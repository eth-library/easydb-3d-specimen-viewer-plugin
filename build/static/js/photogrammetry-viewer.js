var _a2, _b2;
const e = window, t = e.ShadowRoot && (void 0 === e.ShadyCSS || e.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype, i = Symbol(), n = /* @__PURE__ */ new WeakMap();
let o = class {
  constructor(e6, t2, n2) {
    if (this._$cssResult$ = true, n2 !== i) throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
    this.cssText = e6, this.t = t2;
  }
  get styleSheet() {
    let e6 = this.o;
    const i2 = this.t;
    if (t && void 0 === e6) {
      const t2 = void 0 !== i2 && 1 === i2.length;
      t2 && (e6 = n.get(i2)), void 0 === e6 && ((this.o = e6 = new CSSStyleSheet()).replaceSync(this.cssText), t2 && n.set(i2, e6));
    }
    return e6;
  }
  toString() {
    return this.cssText;
  }
};
const r = (e6, ...t2) => {
  const n2 = 1 === e6.length ? e6[0] : t2.reduce((t3, i2, n3) => t3 + ((e7) => {
    if (true === e7._$cssResult$) return e7.cssText;
    if ("number" == typeof e7) return e7;
    throw Error("Value passed to 'css' function must be a 'css' function result: " + e7 + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.");
  })(i2) + e6[n3 + 1], e6[0]);
  return new o(n2, e6, i);
}, s = t ? (e6) => e6 : (e6) => e6 instanceof CSSStyleSheet ? ((e7) => {
  let t2 = "";
  for (const i2 of e7.cssRules) t2 += i2.cssText;
  return ((e8) => new o("string" == typeof e8 ? e8 : e8 + "", void 0, i))(t2);
})(e6) : e6;
var a;
const l = window, c = l.trustedTypes, h = c ? c.emptyScript : "", u = l.reactiveElementPolyfillSupport, d = { toAttribute(e6, t2) {
  switch (t2) {
    case Boolean:
      e6 = e6 ? h : null;
      break;
    case Object:
    case Array:
      e6 = null == e6 ? e6 : JSON.stringify(e6);
  }
  return e6;
}, fromAttribute(e6, t2) {
  let i2 = e6;
  switch (t2) {
    case Boolean:
      i2 = null !== e6;
      break;
    case Number:
      i2 = null === e6 ? null : Number(e6);
      break;
    case Object:
    case Array:
      try {
        i2 = JSON.parse(e6);
      } catch (e7) {
        i2 = null;
      }
  }
  return i2;
} }, p = (e6, t2) => t2 !== e6 && (t2 == t2 || e6 == e6), _ = { attribute: true, type: String, converter: d, reflect: false, hasChanged: p }, g = "finalized";
let m = class extends HTMLElement {
  constructor() {
    super(), this._$Ei = /* @__PURE__ */ new Map(), this.isUpdatePending = false, this.hasUpdated = false, this._$El = null, this._$Eu();
  }
  static addInitializer(e6) {
    var t2;
    this.finalize(), (null !== (t2 = this.h) && void 0 !== t2 ? t2 : this.h = []).push(e6);
  }
  static get observedAttributes() {
    this.finalize();
    const e6 = [];
    return this.elementProperties.forEach((t2, i2) => {
      const n2 = this._$Ep(i2, t2);
      void 0 !== n2 && (this._$Ev.set(n2, i2), e6.push(n2));
    }), e6;
  }
  static createProperty(e6, t2 = _) {
    if (t2.state && (t2.attribute = false), this.finalize(), this.elementProperties.set(e6, t2), !t2.noAccessor && !this.prototype.hasOwnProperty(e6)) {
      const i2 = "symbol" == typeof e6 ? Symbol() : "__" + e6, n2 = this.getPropertyDescriptor(e6, i2, t2);
      void 0 !== n2 && Object.defineProperty(this.prototype, e6, n2);
    }
  }
  static getPropertyDescriptor(e6, t2, i2) {
    return { get() {
      return this[t2];
    }, set(n2) {
      const o2 = this[e6];
      this[t2] = n2, this.requestUpdate(e6, o2, i2);
    }, configurable: true, enumerable: true };
  }
  static getPropertyOptions(e6) {
    return this.elementProperties.get(e6) || _;
  }
  static finalize() {
    if (this.hasOwnProperty(g)) return false;
    this[g] = true;
    const e6 = Object.getPrototypeOf(this);
    if (e6.finalize(), void 0 !== e6.h && (this.h = [...e6.h]), this.elementProperties = new Map(e6.elementProperties), this._$Ev = /* @__PURE__ */ new Map(), this.hasOwnProperty("properties")) {
      const e7 = this.properties, t2 = [...Object.getOwnPropertyNames(e7), ...Object.getOwnPropertySymbols(e7)];
      for (const i2 of t2) this.createProperty(i2, e7[i2]);
    }
    return this.elementStyles = this.finalizeStyles(this.styles), true;
  }
  static finalizeStyles(e6) {
    const t2 = [];
    if (Array.isArray(e6)) {
      const i2 = new Set(e6.flat(1 / 0).reverse());
      for (const e7 of i2) t2.unshift(s(e7));
    } else void 0 !== e6 && t2.push(s(e6));
    return t2;
  }
  static _$Ep(e6, t2) {
    const i2 = t2.attribute;
    return false === i2 ? void 0 : "string" == typeof i2 ? i2 : "string" == typeof e6 ? e6.toLowerCase() : void 0;
  }
  _$Eu() {
    var e6;
    this._$E_ = new Promise((e7) => this.enableUpdating = e7), this._$AL = /* @__PURE__ */ new Map(), this._$Eg(), this.requestUpdate(), null === (e6 = this.constructor.h) || void 0 === e6 || e6.forEach((e7) => e7(this));
  }
  addController(e6) {
    var t2, i2;
    (null !== (t2 = this._$ES) && void 0 !== t2 ? t2 : this._$ES = []).push(e6), void 0 !== this.renderRoot && this.isConnected && (null === (i2 = e6.hostConnected) || void 0 === i2 || i2.call(e6));
  }
  removeController(e6) {
    var t2;
    null === (t2 = this._$ES) || void 0 === t2 || t2.splice(this._$ES.indexOf(e6) >>> 0, 1);
  }
  _$Eg() {
    this.constructor.elementProperties.forEach((e6, t2) => {
      this.hasOwnProperty(t2) && (this._$Ei.set(t2, this[t2]), delete this[t2]);
    });
  }
  createRenderRoot() {
    var i2;
    const n2 = null !== (i2 = this.shadowRoot) && void 0 !== i2 ? i2 : this.attachShadow(this.constructor.shadowRootOptions);
    return ((i3, n3) => {
      t ? i3.adoptedStyleSheets = n3.map((e6) => e6 instanceof CSSStyleSheet ? e6 : e6.styleSheet) : n3.forEach((t2) => {
        const n4 = document.createElement("style"), o2 = e.litNonce;
        void 0 !== o2 && n4.setAttribute("nonce", o2), n4.textContent = t2.cssText, i3.appendChild(n4);
      });
    })(n2, this.constructor.elementStyles), n2;
  }
  connectedCallback() {
    var e6;
    void 0 === this.renderRoot && (this.renderRoot = this.createRenderRoot()), this.enableUpdating(true), null === (e6 = this._$ES) || void 0 === e6 || e6.forEach((e7) => {
      var t2;
      return null === (t2 = e7.hostConnected) || void 0 === t2 ? void 0 : t2.call(e7);
    });
  }
  enableUpdating(e6) {
  }
  disconnectedCallback() {
    var e6;
    null === (e6 = this._$ES) || void 0 === e6 || e6.forEach((e7) => {
      var t2;
      return null === (t2 = e7.hostDisconnected) || void 0 === t2 ? void 0 : t2.call(e7);
    });
  }
  attributeChangedCallback(e6, t2, i2) {
    this._$AK(e6, i2);
  }
  _$EO(e6, t2, i2 = _) {
    var n2;
    const o2 = this.constructor._$Ep(e6, i2);
    if (void 0 !== o2 && true === i2.reflect) {
      const r2 = (void 0 !== (null === (n2 = i2.converter) || void 0 === n2 ? void 0 : n2.toAttribute) ? i2.converter : d).toAttribute(t2, i2.type);
      this._$El = e6, null == r2 ? this.removeAttribute(o2) : this.setAttribute(o2, r2), this._$El = null;
    }
  }
  _$AK(e6, t2) {
    var i2;
    const n2 = this.constructor, o2 = n2._$Ev.get(e6);
    if (void 0 !== o2 && this._$El !== o2) {
      const e7 = n2.getPropertyOptions(o2), r2 = "function" == typeof e7.converter ? { fromAttribute: e7.converter } : void 0 !== (null === (i2 = e7.converter) || void 0 === i2 ? void 0 : i2.fromAttribute) ? e7.converter : d;
      this._$El = o2, this[o2] = r2.fromAttribute(t2, e7.type), this._$El = null;
    }
  }
  requestUpdate(e6, t2, i2) {
    let n2 = true;
    void 0 !== e6 && (((i2 = i2 || this.constructor.getPropertyOptions(e6)).hasChanged || p)(this[e6], t2) ? (this._$AL.has(e6) || this._$AL.set(e6, t2), true === i2.reflect && this._$El !== e6 && (void 0 === this._$EC && (this._$EC = /* @__PURE__ */ new Map()), this._$EC.set(e6, i2))) : n2 = false), !this.isUpdatePending && n2 && (this._$E_ = this._$Ej());
  }
  async _$Ej() {
    this.isUpdatePending = true;
    try {
      await this._$E_;
    } catch (e7) {
      Promise.reject(e7);
    }
    const e6 = this.scheduleUpdate();
    return null != e6 && await e6, !this.isUpdatePending;
  }
  scheduleUpdate() {
    return this.performUpdate();
  }
  performUpdate() {
    var e6;
    if (!this.isUpdatePending) return;
    this.hasUpdated, this._$Ei && (this._$Ei.forEach((e7, t3) => this[t3] = e7), this._$Ei = void 0);
    let t2 = false;
    const i2 = this._$AL;
    try {
      t2 = this.shouldUpdate(i2), t2 ? (this.willUpdate(i2), null === (e6 = this._$ES) || void 0 === e6 || e6.forEach((e7) => {
        var t3;
        return null === (t3 = e7.hostUpdate) || void 0 === t3 ? void 0 : t3.call(e7);
      }), this.update(i2)) : this._$Ek();
    } catch (e7) {
      throw t2 = false, this._$Ek(), e7;
    }
    t2 && this._$AE(i2);
  }
  willUpdate(e6) {
  }
  _$AE(e6) {
    var t2;
    null === (t2 = this._$ES) || void 0 === t2 || t2.forEach((e7) => {
      var t3;
      return null === (t3 = e7.hostUpdated) || void 0 === t3 ? void 0 : t3.call(e7);
    }), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(e6)), this.updated(e6);
  }
  _$Ek() {
    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;
  }
  get updateComplete() {
    return this.getUpdateComplete();
  }
  getUpdateComplete() {
    return this._$E_;
  }
  shouldUpdate(e6) {
    return true;
  }
  update(e6) {
    void 0 !== this._$EC && (this._$EC.forEach((e7, t2) => this._$EO(t2, this[t2], e7)), this._$EC = void 0), this._$Ek();
  }
  updated(e6) {
  }
  firstUpdated(e6) {
  }
};
var f;
m[g] = true, m.elementProperties = /* @__PURE__ */ new Map(), m.elementStyles = [], m.shadowRootOptions = { mode: "open" }, null == u || u({ ReactiveElement: m }), (null !== (a = l.reactiveElementVersions) && void 0 !== a ? a : l.reactiveElementVersions = []).push("1.6.3");
const v = window, A = v.trustedTypes, b = A ? A.createPolicy("lit-html", { createHTML: (e6) => e6 }) : void 0, y = "$lit$", w = `lit$${(Math.random() + "").slice(9)}$`, x = "?" + w, C = `<${x}>`, S = document, E = () => S.createComment(""), T = (e6) => null === e6 || "object" != typeof e6 && "function" != typeof e6, I = Array.isArray, M = (e6) => I(e6) || "function" == typeof (null == e6 ? void 0 : e6[Symbol.iterator]), B = "[ 	\n\f\r]", R = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g, k = /-->/g, P = />/g, D = RegExp(`>|${B}(?:([^\\s"'>=/]+)(${B}*=${B}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`, "g"), L = /'/g, F = /"/g, N = /^(?:script|style|textarea|title)$/i, O = (e6) => (t2, ...i2) => ({ _$litType$: e6, strings: t2, values: i2 }), U = O(1), z = O(2), H = Symbol.for("lit-noChange"), Q = Symbol.for("lit-nothing"), V = /* @__PURE__ */ new WeakMap(), G = S.createTreeWalker(S, 129, null, false);
function q(e6, t2) {
  if (!Array.isArray(e6) || !e6.hasOwnProperty("raw")) throw Error("invalid template strings array");
  return void 0 !== b ? b.createHTML(t2) : t2;
}
const $ = (e6, t2) => {
  const i2 = e6.length - 1, n2 = [];
  let o2, r2 = 2 === t2 ? "<svg>" : "", s2 = R;
  for (let t3 = 0; t3 < i2; t3++) {
    const i3 = e6[t3];
    let a2, l2, c2 = -1, h2 = 0;
    for (; h2 < i3.length && (s2.lastIndex = h2, l2 = s2.exec(i3), null !== l2); ) h2 = s2.lastIndex, s2 === R ? "!--" === l2[1] ? s2 = k : void 0 !== l2[1] ? s2 = P : void 0 !== l2[2] ? (N.test(l2[2]) && (o2 = RegExp("</" + l2[2], "g")), s2 = D) : void 0 !== l2[3] && (s2 = D) : s2 === D ? ">" === l2[0] ? (s2 = null != o2 ? o2 : R, c2 = -1) : void 0 === l2[1] ? c2 = -2 : (c2 = s2.lastIndex - l2[2].length, a2 = l2[1], s2 = void 0 === l2[3] ? D : '"' === l2[3] ? F : L) : s2 === F || s2 === L ? s2 = D : s2 === k || s2 === P ? s2 = R : (s2 = D, o2 = void 0);
    const u2 = s2 === D && e6[t3 + 1].startsWith("/>") ? " " : "";
    r2 += s2 === R ? i3 + C : c2 >= 0 ? (n2.push(a2), i3.slice(0, c2) + y + i3.slice(c2) + w + u2) : i3 + w + (-2 === c2 ? (n2.push(void 0), t3) : u2);
  }
  return [q(e6, r2 + (e6[i2] || "<?>") + (2 === t2 ? "</svg>" : "")), n2];
};
let W = class e2 {
  constructor({ strings: t2, _$litType$: i2 }, n2) {
    let o2;
    this.parts = [];
    let r2 = 0, s2 = 0;
    const a2 = t2.length - 1, l2 = this.parts, [c2, h2] = $(t2, i2);
    if (this.el = e2.createElement(c2, n2), G.currentNode = this.el.content, 2 === i2) {
      const e6 = this.el.content, t3 = e6.firstChild;
      t3.remove(), e6.append(...t3.childNodes);
    }
    for (; null !== (o2 = G.nextNode()) && l2.length < a2; ) {
      if (1 === o2.nodeType) {
        if (o2.hasAttributes()) {
          const e6 = [];
          for (const t3 of o2.getAttributeNames()) if (t3.endsWith(y) || t3.startsWith(w)) {
            const i3 = h2[s2++];
            if (e6.push(t3), void 0 !== i3) {
              const e7 = o2.getAttribute(i3.toLowerCase() + y).split(w), t4 = /([.?@])?(.*)/.exec(i3);
              l2.push({ type: 1, index: r2, name: t4[2], strings: e7, ctor: "." === t4[1] ? Z : "?" === t4[1] ? ee : "@" === t4[1] ? te : K });
            } else l2.push({ type: 6, index: r2 });
          }
          for (const t3 of e6) o2.removeAttribute(t3);
        }
        if (N.test(o2.tagName)) {
          const e6 = o2.textContent.split(w), t3 = e6.length - 1;
          if (t3 > 0) {
            o2.textContent = A ? A.emptyScript : "";
            for (let i3 = 0; i3 < t3; i3++) o2.append(e6[i3], E()), G.nextNode(), l2.push({ type: 2, index: ++r2 });
            o2.append(e6[t3], E());
          }
        }
      } else if (8 === o2.nodeType) if (o2.data === x) l2.push({ type: 2, index: r2 });
      else {
        let e6 = -1;
        for (; -1 !== (e6 = o2.data.indexOf(w, e6 + 1)); ) l2.push({ type: 7, index: r2 }), e6 += w.length - 1;
      }
      r2++;
    }
  }
  static createElement(e6, t2) {
    const i2 = S.createElement("template");
    return i2.innerHTML = e6, i2;
  }
};
function j(e6, t2, i2 = e6, n2) {
  var o2, r2, s2, a2;
  if (t2 === H) return t2;
  let l2 = void 0 !== n2 ? null === (o2 = i2._$Co) || void 0 === o2 ? void 0 : o2[n2] : i2._$Cl;
  const c2 = T(t2) ? void 0 : t2._$litDirective$;
  return (null == l2 ? void 0 : l2.constructor) !== c2 && (null === (r2 = null == l2 ? void 0 : l2._$AO) || void 0 === r2 || r2.call(l2, false), void 0 === c2 ? l2 = void 0 : (l2 = new c2(e6), l2._$AT(e6, i2, n2)), void 0 !== n2 ? (null !== (s2 = (a2 = i2)._$Co) && void 0 !== s2 ? s2 : a2._$Co = [])[n2] = l2 : i2._$Cl = l2), void 0 !== l2 && (t2 = j(e6, l2._$AS(e6, t2.values), l2, n2)), t2;
}
let X = class {
  constructor(e6, t2) {
    this._$AV = [], this._$AN = void 0, this._$AD = e6, this._$AM = t2;
  }
  get parentNode() {
    return this._$AM.parentNode;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  u(e6) {
    var t2;
    const { el: { content: i2 }, parts: n2 } = this._$AD, o2 = (null !== (t2 = null == e6 ? void 0 : e6.creationScope) && void 0 !== t2 ? t2 : S).importNode(i2, true);
    G.currentNode = o2;
    let r2 = G.nextNode(), s2 = 0, a2 = 0, l2 = n2[0];
    for (; void 0 !== l2; ) {
      if (s2 === l2.index) {
        let t3;
        2 === l2.type ? t3 = new Y(r2, r2.nextSibling, this, e6) : 1 === l2.type ? t3 = new l2.ctor(r2, l2.name, l2.strings, this, e6) : 6 === l2.type && (t3 = new ie(r2, this, e6)), this._$AV.push(t3), l2 = n2[++a2];
      }
      s2 !== (null == l2 ? void 0 : l2.index) && (r2 = G.nextNode(), s2++);
    }
    return G.currentNode = S, o2;
  }
  v(e6) {
    let t2 = 0;
    for (const i2 of this._$AV) void 0 !== i2 && (void 0 !== i2.strings ? (i2._$AI(e6, i2, t2), t2 += i2.strings.length - 2) : i2._$AI(e6[t2])), t2++;
  }
}, Y = class e3 {
  constructor(e6, t2, i2, n2) {
    var o2;
    this.type = 2, this._$AH = Q, this._$AN = void 0, this._$AA = e6, this._$AB = t2, this._$AM = i2, this.options = n2, this._$Cp = null === (o2 = null == n2 ? void 0 : n2.isConnected) || void 0 === o2 || o2;
  }
  get _$AU() {
    var e6, t2;
    return null !== (t2 = null === (e6 = this._$AM) || void 0 === e6 ? void 0 : e6._$AU) && void 0 !== t2 ? t2 : this._$Cp;
  }
  get parentNode() {
    let e6 = this._$AA.parentNode;
    const t2 = this._$AM;
    return void 0 !== t2 && 11 === (null == e6 ? void 0 : e6.nodeType) && (e6 = t2.parentNode), e6;
  }
  get startNode() {
    return this._$AA;
  }
  get endNode() {
    return this._$AB;
  }
  _$AI(e6, t2 = this) {
    e6 = j(this, e6, t2), T(e6) ? e6 === Q || null == e6 || "" === e6 ? (this._$AH !== Q && this._$AR(), this._$AH = Q) : e6 !== this._$AH && e6 !== H && this._(e6) : void 0 !== e6._$litType$ ? this.g(e6) : void 0 !== e6.nodeType ? this.$(e6) : M(e6) ? this.T(e6) : this._(e6);
  }
  k(e6) {
    return this._$AA.parentNode.insertBefore(e6, this._$AB);
  }
  $(e6) {
    this._$AH !== e6 && (this._$AR(), this._$AH = this.k(e6));
  }
  _(e6) {
    this._$AH !== Q && T(this._$AH) ? this._$AA.nextSibling.data = e6 : this.$(S.createTextNode(e6)), this._$AH = e6;
  }
  g(e6) {
    var t2;
    const { values: i2, _$litType$: n2 } = e6, o2 = "number" == typeof n2 ? this._$AC(e6) : (void 0 === n2.el && (n2.el = W.createElement(q(n2.h, n2.h[0]), this.options)), n2);
    if ((null === (t2 = this._$AH) || void 0 === t2 ? void 0 : t2._$AD) === o2) this._$AH.v(i2);
    else {
      const e7 = new X(o2, this), t3 = e7.u(this.options);
      e7.v(i2), this.$(t3), this._$AH = e7;
    }
  }
  _$AC(e6) {
    let t2 = V.get(e6.strings);
    return void 0 === t2 && V.set(e6.strings, t2 = new W(e6)), t2;
  }
  T(t2) {
    I(this._$AH) || (this._$AH = [], this._$AR());
    const i2 = this._$AH;
    let n2, o2 = 0;
    for (const r2 of t2) o2 === i2.length ? i2.push(n2 = new e3(this.k(E()), this.k(E()), this, this.options)) : n2 = i2[o2], n2._$AI(r2), o2++;
    o2 < i2.length && (this._$AR(n2 && n2._$AB.nextSibling, o2), i2.length = o2);
  }
  _$AR(e6 = this._$AA.nextSibling, t2) {
    var i2;
    for (null === (i2 = this._$AP) || void 0 === i2 || i2.call(this, false, true, t2); e6 && e6 !== this._$AB; ) {
      const t3 = e6.nextSibling;
      e6.remove(), e6 = t3;
    }
  }
  setConnected(e6) {
    var t2;
    void 0 === this._$AM && (this._$Cp = e6, null === (t2 = this._$AP) || void 0 === t2 || t2.call(this, e6));
  }
}, K = class {
  constructor(e6, t2, i2, n2, o2) {
    this.type = 1, this._$AH = Q, this._$AN = void 0, this.element = e6, this.name = t2, this._$AM = n2, this.options = o2, i2.length > 2 || "" !== i2[0] || "" !== i2[1] ? (this._$AH = Array(i2.length - 1).fill(new String()), this.strings = i2) : this._$AH = Q;
  }
  get tagName() {
    return this.element.tagName;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AI(e6, t2 = this, i2, n2) {
    const o2 = this.strings;
    let r2 = false;
    if (void 0 === o2) e6 = j(this, e6, t2, 0), r2 = !T(e6) || e6 !== this._$AH && e6 !== H, r2 && (this._$AH = e6);
    else {
      const n3 = e6;
      let s2, a2;
      for (e6 = o2[0], s2 = 0; s2 < o2.length - 1; s2++) a2 = j(this, n3[i2 + s2], t2, s2), a2 === H && (a2 = this._$AH[s2]), r2 || (r2 = !T(a2) || a2 !== this._$AH[s2]), a2 === Q ? e6 = Q : e6 !== Q && (e6 += (null != a2 ? a2 : "") + o2[s2 + 1]), this._$AH[s2] = a2;
    }
    r2 && !n2 && this.j(e6);
  }
  j(e6) {
    e6 === Q ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, null != e6 ? e6 : "");
  }
}, Z = class extends K {
  constructor() {
    super(...arguments), this.type = 3;
  }
  j(e6) {
    this.element[this.name] = e6 === Q ? void 0 : e6;
  }
};
const J = A ? A.emptyScript : "";
let ee = class extends K {
  constructor() {
    super(...arguments), this.type = 4;
  }
  j(e6) {
    e6 && e6 !== Q ? this.element.setAttribute(this.name, J) : this.element.removeAttribute(this.name);
  }
}, te = class extends K {
  constructor(e6, t2, i2, n2, o2) {
    super(e6, t2, i2, n2, o2), this.type = 5;
  }
  _$AI(e6, t2 = this) {
    var i2;
    if ((e6 = null !== (i2 = j(this, e6, t2, 0)) && void 0 !== i2 ? i2 : Q) === H) return;
    const n2 = this._$AH, o2 = e6 === Q && n2 !== Q || e6.capture !== n2.capture || e6.once !== n2.once || e6.passive !== n2.passive, r2 = e6 !== Q && (n2 === Q || o2);
    o2 && this.element.removeEventListener(this.name, this, n2), r2 && this.element.addEventListener(this.name, this, e6), this._$AH = e6;
  }
  handleEvent(e6) {
    var t2, i2;
    "function" == typeof this._$AH ? this._$AH.call(null !== (i2 = null === (t2 = this.options) || void 0 === t2 ? void 0 : t2.host) && void 0 !== i2 ? i2 : this.element, e6) : this._$AH.handleEvent(e6);
  }
}, ie = class {
  constructor(e6, t2, i2) {
    this.element = e6, this.type = 6, this._$AN = void 0, this._$AM = t2, this.options = i2;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AI(e6) {
    j(this, e6);
  }
};
const ne = { O: y, P: w, A: x, C: 1, M: $, L: X, R: M, D: j, I: Y, V: K, H: ee, N: te, U: Z, F: ie }, oe = v.litHtmlPolyfillSupport;
null == oe || oe(W, Y), (null !== (f = v.litHtmlVersions) && void 0 !== f ? f : v.litHtmlVersions = []).push("2.8.0");
const re = (e6, t2, i2) => {
  var n2, o2;
  const r2 = null !== (n2 = null == i2 ? void 0 : i2.renderBefore) && void 0 !== n2 ? n2 : t2;
  let s2 = r2._$litPart$;
  if (void 0 === s2) {
    const e7 = null !== (o2 = null == i2 ? void 0 : i2.renderBefore) && void 0 !== o2 ? o2 : null;
    r2._$litPart$ = s2 = new Y(t2.insertBefore(E(), e7), e7, void 0, null != i2 ? i2 : {});
  }
  return s2._$AI(e6), s2;
};
var se, ae;
let le = class extends m {
  constructor() {
    super(...arguments), this.renderOptions = { host: this }, this._$Do = void 0;
  }
  createRenderRoot() {
    var e6, t2;
    const i2 = super.createRenderRoot();
    return null !== (e6 = (t2 = this.renderOptions).renderBefore) && void 0 !== e6 || (t2.renderBefore = i2.firstChild), i2;
  }
  update(e6) {
    const t2 = this.render();
    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(e6), this._$Do = re(t2, this.renderRoot, this.renderOptions);
  }
  connectedCallback() {
    var e6;
    super.connectedCallback(), null === (e6 = this._$Do) || void 0 === e6 || e6.setConnected(true);
  }
  disconnectedCallback() {
    var e6;
    super.disconnectedCallback(), null === (e6 = this._$Do) || void 0 === e6 || e6.setConnected(false);
  }
  render() {
    return H;
  }
};
le.finalized = true, le._$litElement$ = true, null === (se = globalThis.litElementHydrateSupport) || void 0 === se || se.call(globalThis, { LitElement: le });
const ce = globalThis.litElementPolyfillSupport;
null == ce || ce({ LitElement: le }), (null !== (ae = globalThis.litElementVersions) && void 0 !== ae ? ae : globalThis.litElementVersions = []).push("3.3.3");
const he = (e6) => (t2) => "function" == typeof t2 ? ((e7, t3) => (customElements.define(e7, t3), t3))(e6, t2) : ((e7, t3) => {
  const { kind: i2, elements: n2 } = t3;
  return { kind: i2, elements: n2, finisher(t4) {
    customElements.define(e7, t4);
  } };
})(e6, t2), ue = (e6, t2) => "method" === t2.kind && t2.descriptor && !("value" in t2.descriptor) ? { ...t2, finisher(i2) {
  i2.createProperty(t2.key, e6);
} } : { kind: "field", key: Symbol(), placement: "own", descriptor: {}, originalKey: t2.key, initializer() {
  "function" == typeof t2.initializer && (this[t2.key] = t2.initializer.call(this));
}, finisher(i2) {
  i2.createProperty(t2.key, e6);
} };
function de(e6) {
  return (t2, i2) => void 0 !== i2 ? ((e7, t3, i3) => {
    t3.constructor.createProperty(i3, e7);
  })(e6, t2, i2) : ue(e6, t2);
}
function pe(e6, t2) {
  return (({ finisher: e7, descriptor: t3 }) => (i2, n2) => {
    var o2;
    if (void 0 === n2) {
      const n3 = null !== (o2 = i2.originalKey) && void 0 !== o2 ? o2 : i2.key, r2 = null != t3 ? { kind: "method", placement: "prototype", key: n3, descriptor: t3(i2.key) } : { ...i2, key: n3 };
      return null != e7 && (r2.finisher = function(t4) {
        e7(t4, n3);
      }), r2;
    }
    {
      const o3 = i2.constructor;
      void 0 !== t3 && Object.defineProperty(i2, n2, t3(n2)), null == e7 || e7(o3, n2);
    }
  })({ descriptor: (t3) => {
    const i2 = { get() {
      var t4, i3;
      return null !== (i3 = null === (t4 = this.renderRoot) || void 0 === t4 ? void 0 : t4.querySelector(e6)) && void 0 !== i3 ? i3 : null;
    }, enumerable: true, configurable: true };
    return i2;
  } });
}
var _e;
null === (_e = window.HTMLSlotElement) || void 0 === _e || _e.prototype.assignedElements;
const ge = "169", me = 0, fe = 1, ve = 2, Ae = 100, be = 101, ye = 102, we = 200, xe = 201, Ce = 202, Se = 203, Ee = 204, Te = 205, Ie = 206, Me = 207, Be = 208, Re = 209, ke = 210, Pe = 211, De = 212, Le = 213, Fe = 214, Ne = 0, Oe = 1, Ue = 2, ze = 3, He = 4, Qe = 5, Ve = 6, Ge = 7, qe = "attached", $e = 300, We = 301, je = 302, Xe = 303, Ye = 306, Ke = 1e3, Ze = 1001, Je = 1002, et = 1003, tt = 1004, it = 1005, nt = 1006, ot = 1007, rt = 1008, st = 1009, at = 1010, lt = 1011, ct = 1012, ht = 1013, ut = 1014, dt = 1015, pt = 1016, _t = 1017, gt = 1018, mt = 1020, ft = 35902, vt = 1023, At = 1026, bt = 1027, yt = 1028, wt = 1029, xt = 1030, Ct = 1031, St = 1033, Et = 33776, Tt = 33777, It = 33778, Mt = 33779, Bt = 35840, Rt = 35841, kt = 35842, Pt = 35843, Dt = 36196, Lt = 37492, Ft = 37496, Nt = 37808, Ot = 37809, Ut = 37810, zt = 37811, Ht = 37812, Qt = 37813, Vt = 37814, Gt = 37815, qt = 37816, $t = 37817, Wt = 37818, jt = 37819, Xt = 37820, Yt = 37821, Kt = 36492, Zt = 36494, Jt = 36495, ei = 36284, ti = 36285, ii = 36286, ni = 2201, oi = 2202, ri = 2300, si = 2301, ai = 2302, li = 2400, ci = 2401, hi = 2402, ui = 2500, di = "", pi = "srgb", _i = "srgb-linear", gi = "display-p3", mi = "display-p3-linear", fi = "linear", vi = "srgb", Ai = "rec709", bi = "p3", yi = 7680, wi = 512, xi = 513, Ci = 514, Si = 515, Ei = 516, Ti = 517, Ii = 518, Mi = 519, Bi = 35044, Ri = "300 es", ki = 2e3, Pi = 2001;
class Di {
  addEventListener(e6, t2) {
    void 0 === this._listeners && (this._listeners = {});
    const i2 = this._listeners;
    void 0 === i2[e6] && (i2[e6] = []), -1 === i2[e6].indexOf(t2) && i2[e6].push(t2);
  }
  hasEventListener(e6, t2) {
    if (void 0 === this._listeners) return false;
    const i2 = this._listeners;
    return void 0 !== i2[e6] && -1 !== i2[e6].indexOf(t2);
  }
  removeEventListener(e6, t2) {
    if (void 0 === this._listeners) return;
    const i2 = this._listeners[e6];
    if (void 0 !== i2) {
      const e7 = i2.indexOf(t2);
      -1 !== e7 && i2.splice(e7, 1);
    }
  }
  dispatchEvent(e6) {
    if (void 0 === this._listeners) return;
    const t2 = this._listeners[e6.type];
    if (void 0 !== t2) {
      e6.target = this;
      const i2 = t2.slice(0);
      for (let t3 = 0, n2 = i2.length; t3 < n2; t3++) i2[t3].call(this, e6);
      e6.target = null;
    }
  }
}
const Li = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf", "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf", "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df", "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef", "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff"];
let Fi = 1234567;
const Ni = Math.PI / 180, Oi = 180 / Math.PI;
function Ui() {
  const e6 = 4294967295 * Math.random() | 0, t2 = 4294967295 * Math.random() | 0, i2 = 4294967295 * Math.random() | 0, n2 = 4294967295 * Math.random() | 0;
  return (Li[255 & e6] + Li[e6 >> 8 & 255] + Li[e6 >> 16 & 255] + Li[e6 >> 24 & 255] + "-" + Li[255 & t2] + Li[t2 >> 8 & 255] + "-" + Li[t2 >> 16 & 15 | 64] + Li[t2 >> 24 & 255] + "-" + Li[63 & i2 | 128] + Li[i2 >> 8 & 255] + "-" + Li[i2 >> 16 & 255] + Li[i2 >> 24 & 255] + Li[255 & n2] + Li[n2 >> 8 & 255] + Li[n2 >> 16 & 255] + Li[n2 >> 24 & 255]).toLowerCase();
}
function zi(e6, t2, i2) {
  return Math.max(t2, Math.min(i2, e6));
}
function Hi(e6, t2) {
  return (e6 % t2 + t2) % t2;
}
function Qi(e6, t2, i2) {
  return (1 - i2) * e6 + i2 * t2;
}
function Vi(e6, t2) {
  switch (t2.constructor) {
    case Float32Array:
      return e6;
    case Uint32Array:
      return e6 / 4294967295;
    case Uint16Array:
      return e6 / 65535;
    case Uint8Array:
      return e6 / 255;
    case Int32Array:
      return Math.max(e6 / 2147483647, -1);
    case Int16Array:
      return Math.max(e6 / 32767, -1);
    case Int8Array:
      return Math.max(e6 / 127, -1);
    default:
      throw new Error("Invalid component type.");
  }
}
function Gi(e6, t2) {
  switch (t2.constructor) {
    case Float32Array:
      return e6;
    case Uint32Array:
      return Math.round(4294967295 * e6);
    case Uint16Array:
      return Math.round(65535 * e6);
    case Uint8Array:
      return Math.round(255 * e6);
    case Int32Array:
      return Math.round(2147483647 * e6);
    case Int16Array:
      return Math.round(32767 * e6);
    case Int8Array:
      return Math.round(127 * e6);
    default:
      throw new Error("Invalid component type.");
  }
}
const qi = { DEG2RAD: Ni, RAD2DEG: Oi, generateUUID: Ui, clamp: zi, euclideanModulo: Hi, mapLinear: function(e6, t2, i2, n2, o2) {
  return n2 + (e6 - t2) * (o2 - n2) / (i2 - t2);
}, inverseLerp: function(e6, t2, i2) {
  return e6 !== t2 ? (i2 - e6) / (t2 - e6) : 0;
}, lerp: Qi, damp: function(e6, t2, i2, n2) {
  return Qi(e6, t2, 1 - Math.exp(-i2 * n2));
}, pingpong: function(e6, t2 = 1) {
  return t2 - Math.abs(Hi(e6, 2 * t2) - t2);
}, smoothstep: function(e6, t2, i2) {
  return e6 <= t2 ? 0 : e6 >= i2 ? 1 : (e6 = (e6 - t2) / (i2 - t2)) * e6 * (3 - 2 * e6);
}, smootherstep: function(e6, t2, i2) {
  return e6 <= t2 ? 0 : e6 >= i2 ? 1 : (e6 = (e6 - t2) / (i2 - t2)) * e6 * e6 * (e6 * (6 * e6 - 15) + 10);
}, randInt: function(e6, t2) {
  return e6 + Math.floor(Math.random() * (t2 - e6 + 1));
}, randFloat: function(e6, t2) {
  return e6 + Math.random() * (t2 - e6);
}, randFloatSpread: function(e6) {
  return e6 * (0.5 - Math.random());
}, seededRandom: function(e6) {
  void 0 !== e6 && (Fi = e6);
  let t2 = Fi += 1831565813;
  return t2 = Math.imul(t2 ^ t2 >>> 15, 1 | t2), t2 ^= t2 + Math.imul(t2 ^ t2 >>> 7, 61 | t2), ((t2 ^ t2 >>> 14) >>> 0) / 4294967296;
}, degToRad: function(e6) {
  return e6 * Ni;
}, radToDeg: function(e6) {
  return e6 * Oi;
}, isPowerOfTwo: function(e6) {
  return !(e6 & e6 - 1) && 0 !== e6;
}, ceilPowerOfTwo: function(e6) {
  return Math.pow(2, Math.ceil(Math.log(e6) / Math.LN2));
}, floorPowerOfTwo: function(e6) {
  return Math.pow(2, Math.floor(Math.log(e6) / Math.LN2));
}, setQuaternionFromProperEuler: function(e6, t2, i2, n2, o2) {
  const r2 = Math.cos, s2 = Math.sin, a2 = r2(i2 / 2), l2 = s2(i2 / 2), c2 = r2((t2 + n2) / 2), h2 = s2((t2 + n2) / 2), u2 = r2((t2 - n2) / 2), d2 = s2((t2 - n2) / 2), p2 = r2((n2 - t2) / 2), _2 = s2((n2 - t2) / 2);
  switch (o2) {
    case "XYX":
      e6.set(a2 * h2, l2 * u2, l2 * d2, a2 * c2);
      break;
    case "YZY":
      e6.set(l2 * d2, a2 * h2, l2 * u2, a2 * c2);
      break;
    case "ZXZ":
      e6.set(l2 * u2, l2 * d2, a2 * h2, a2 * c2);
      break;
    case "XZX":
      e6.set(a2 * h2, l2 * _2, l2 * p2, a2 * c2);
      break;
    case "YXY":
      e6.set(l2 * p2, a2 * h2, l2 * _2, a2 * c2);
      break;
    case "ZYZ":
      e6.set(l2 * _2, l2 * p2, a2 * h2, a2 * c2);
      break;
    default:
      console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " + o2);
  }
}, normalize: Gi, denormalize: Vi };
class $i {
  constructor(e6 = 0, t2 = 0) {
    $i.prototype.isVector2 = true, this.x = e6, this.y = t2;
  }
  get width() {
    return this.x;
  }
  set width(e6) {
    this.x = e6;
  }
  get height() {
    return this.y;
  }
  set height(e6) {
    this.y = e6;
  }
  set(e6, t2) {
    return this.x = e6, this.y = t2, this;
  }
  setScalar(e6) {
    return this.x = e6, this.y = e6, this;
  }
  setX(e6) {
    return this.x = e6, this;
  }
  setY(e6) {
    return this.y = e6, this;
  }
  setComponent(e6, t2) {
    switch (e6) {
      case 0:
        this.x = t2;
        break;
      case 1:
        this.y = t2;
        break;
      default:
        throw new Error("index is out of range: " + e6);
    }
    return this;
  }
  getComponent(e6) {
    switch (e6) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      default:
        throw new Error("index is out of range: " + e6);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y);
  }
  copy(e6) {
    return this.x = e6.x, this.y = e6.y, this;
  }
  add(e6) {
    return this.x += e6.x, this.y += e6.y, this;
  }
  addScalar(e6) {
    return this.x += e6, this.y += e6, this;
  }
  addVectors(e6, t2) {
    return this.x = e6.x + t2.x, this.y = e6.y + t2.y, this;
  }
  addScaledVector(e6, t2) {
    return this.x += e6.x * t2, this.y += e6.y * t2, this;
  }
  sub(e6) {
    return this.x -= e6.x, this.y -= e6.y, this;
  }
  subScalar(e6) {
    return this.x -= e6, this.y -= e6, this;
  }
  subVectors(e6, t2) {
    return this.x = e6.x - t2.x, this.y = e6.y - t2.y, this;
  }
  multiply(e6) {
    return this.x *= e6.x, this.y *= e6.y, this;
  }
  multiplyScalar(e6) {
    return this.x *= e6, this.y *= e6, this;
  }
  divide(e6) {
    return this.x /= e6.x, this.y /= e6.y, this;
  }
  divideScalar(e6) {
    return this.multiplyScalar(1 / e6);
  }
  applyMatrix3(e6) {
    const t2 = this.x, i2 = this.y, n2 = e6.elements;
    return this.x = n2[0] * t2 + n2[3] * i2 + n2[6], this.y = n2[1] * t2 + n2[4] * i2 + n2[7], this;
  }
  min(e6) {
    return this.x = Math.min(this.x, e6.x), this.y = Math.min(this.y, e6.y), this;
  }
  max(e6) {
    return this.x = Math.max(this.x, e6.x), this.y = Math.max(this.y, e6.y), this;
  }
  clamp(e6, t2) {
    return this.x = Math.max(e6.x, Math.min(t2.x, this.x)), this.y = Math.max(e6.y, Math.min(t2.y, this.y)), this;
  }
  clampScalar(e6, t2) {
    return this.x = Math.max(e6, Math.min(t2, this.x)), this.y = Math.max(e6, Math.min(t2, this.y)), this;
  }
  clampLength(e6, t2) {
    const i2 = this.length();
    return this.divideScalar(i2 || 1).multiplyScalar(Math.max(e6, Math.min(t2, i2)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
  }
  roundToZero() {
    return this.x = Math.trunc(this.x), this.y = Math.trunc(this.y), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this;
  }
  dot(e6) {
    return this.x * e6.x + this.y * e6.y;
  }
  cross(e6) {
    return this.x * e6.y - this.y * e6.x;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  angle() {
    return Math.atan2(-this.y, -this.x) + Math.PI;
  }
  angleTo(e6) {
    const t2 = Math.sqrt(this.lengthSq() * e6.lengthSq());
    if (0 === t2) return Math.PI / 2;
    const i2 = this.dot(e6) / t2;
    return Math.acos(zi(i2, -1, 1));
  }
  distanceTo(e6) {
    return Math.sqrt(this.distanceToSquared(e6));
  }
  distanceToSquared(e6) {
    const t2 = this.x - e6.x, i2 = this.y - e6.y;
    return t2 * t2 + i2 * i2;
  }
  manhattanDistanceTo(e6) {
    return Math.abs(this.x - e6.x) + Math.abs(this.y - e6.y);
  }
  setLength(e6) {
    return this.normalize().multiplyScalar(e6);
  }
  lerp(e6, t2) {
    return this.x += (e6.x - this.x) * t2, this.y += (e6.y - this.y) * t2, this;
  }
  lerpVectors(e6, t2, i2) {
    return this.x = e6.x + (t2.x - e6.x) * i2, this.y = e6.y + (t2.y - e6.y) * i2, this;
  }
  equals(e6) {
    return e6.x === this.x && e6.y === this.y;
  }
  fromArray(e6, t2 = 0) {
    return this.x = e6[t2], this.y = e6[t2 + 1], this;
  }
  toArray(e6 = [], t2 = 0) {
    return e6[t2] = this.x, e6[t2 + 1] = this.y, e6;
  }
  fromBufferAttribute(e6, t2) {
    return this.x = e6.getX(t2), this.y = e6.getY(t2), this;
  }
  rotateAround(e6, t2) {
    const i2 = Math.cos(t2), n2 = Math.sin(t2), o2 = this.x - e6.x, r2 = this.y - e6.y;
    return this.x = o2 * i2 - r2 * n2 + e6.x, this.y = o2 * n2 + r2 * i2 + e6.y, this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y;
  }
}
class Wi {
  constructor(e6, t2, i2, n2, o2, r2, s2, a2, l2) {
    Wi.prototype.isMatrix3 = true, this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1], void 0 !== e6 && this.set(e6, t2, i2, n2, o2, r2, s2, a2, l2);
  }
  set(e6, t2, i2, n2, o2, r2, s2, a2, l2) {
    const c2 = this.elements;
    return c2[0] = e6, c2[1] = n2, c2[2] = s2, c2[3] = t2, c2[4] = o2, c2[5] = a2, c2[6] = i2, c2[7] = r2, c2[8] = l2, this;
  }
  identity() {
    return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
  }
  copy(e6) {
    const t2 = this.elements, i2 = e6.elements;
    return t2[0] = i2[0], t2[1] = i2[1], t2[2] = i2[2], t2[3] = i2[3], t2[4] = i2[4], t2[5] = i2[5], t2[6] = i2[6], t2[7] = i2[7], t2[8] = i2[8], this;
  }
  extractBasis(e6, t2, i2) {
    return e6.setFromMatrix3Column(this, 0), t2.setFromMatrix3Column(this, 1), i2.setFromMatrix3Column(this, 2), this;
  }
  setFromMatrix4(e6) {
    const t2 = e6.elements;
    return this.set(t2[0], t2[4], t2[8], t2[1], t2[5], t2[9], t2[2], t2[6], t2[10]), this;
  }
  multiply(e6) {
    return this.multiplyMatrices(this, e6);
  }
  premultiply(e6) {
    return this.multiplyMatrices(e6, this);
  }
  multiplyMatrices(e6, t2) {
    const i2 = e6.elements, n2 = t2.elements, o2 = this.elements, r2 = i2[0], s2 = i2[3], a2 = i2[6], l2 = i2[1], c2 = i2[4], h2 = i2[7], u2 = i2[2], d2 = i2[5], p2 = i2[8], _2 = n2[0], g2 = n2[3], m2 = n2[6], f2 = n2[1], v2 = n2[4], A2 = n2[7], b2 = n2[2], y2 = n2[5], w2 = n2[8];
    return o2[0] = r2 * _2 + s2 * f2 + a2 * b2, o2[3] = r2 * g2 + s2 * v2 + a2 * y2, o2[6] = r2 * m2 + s2 * A2 + a2 * w2, o2[1] = l2 * _2 + c2 * f2 + h2 * b2, o2[4] = l2 * g2 + c2 * v2 + h2 * y2, o2[7] = l2 * m2 + c2 * A2 + h2 * w2, o2[2] = u2 * _2 + d2 * f2 + p2 * b2, o2[5] = u2 * g2 + d2 * v2 + p2 * y2, o2[8] = u2 * m2 + d2 * A2 + p2 * w2, this;
  }
  multiplyScalar(e6) {
    const t2 = this.elements;
    return t2[0] *= e6, t2[3] *= e6, t2[6] *= e6, t2[1] *= e6, t2[4] *= e6, t2[7] *= e6, t2[2] *= e6, t2[5] *= e6, t2[8] *= e6, this;
  }
  determinant() {
    const e6 = this.elements, t2 = e6[0], i2 = e6[1], n2 = e6[2], o2 = e6[3], r2 = e6[4], s2 = e6[5], a2 = e6[6], l2 = e6[7], c2 = e6[8];
    return t2 * r2 * c2 - t2 * s2 * l2 - i2 * o2 * c2 + i2 * s2 * a2 + n2 * o2 * l2 - n2 * r2 * a2;
  }
  invert() {
    const e6 = this.elements, t2 = e6[0], i2 = e6[1], n2 = e6[2], o2 = e6[3], r2 = e6[4], s2 = e6[5], a2 = e6[6], l2 = e6[7], c2 = e6[8], h2 = c2 * r2 - s2 * l2, u2 = s2 * a2 - c2 * o2, d2 = l2 * o2 - r2 * a2, p2 = t2 * h2 + i2 * u2 + n2 * d2;
    if (0 === p2) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
    const _2 = 1 / p2;
    return e6[0] = h2 * _2, e6[1] = (n2 * l2 - c2 * i2) * _2, e6[2] = (s2 * i2 - n2 * r2) * _2, e6[3] = u2 * _2, e6[4] = (c2 * t2 - n2 * a2) * _2, e6[5] = (n2 * o2 - s2 * t2) * _2, e6[6] = d2 * _2, e6[7] = (i2 * a2 - l2 * t2) * _2, e6[8] = (r2 * t2 - i2 * o2) * _2, this;
  }
  transpose() {
    let e6;
    const t2 = this.elements;
    return e6 = t2[1], t2[1] = t2[3], t2[3] = e6, e6 = t2[2], t2[2] = t2[6], t2[6] = e6, e6 = t2[5], t2[5] = t2[7], t2[7] = e6, this;
  }
  getNormalMatrix(e6) {
    return this.setFromMatrix4(e6).invert().transpose();
  }
  transposeIntoArray(e6) {
    const t2 = this.elements;
    return e6[0] = t2[0], e6[1] = t2[3], e6[2] = t2[6], e6[3] = t2[1], e6[4] = t2[4], e6[5] = t2[7], e6[6] = t2[2], e6[7] = t2[5], e6[8] = t2[8], this;
  }
  setUvTransform(e6, t2, i2, n2, o2, r2, s2) {
    const a2 = Math.cos(o2), l2 = Math.sin(o2);
    return this.set(i2 * a2, i2 * l2, -i2 * (a2 * r2 + l2 * s2) + r2 + e6, -n2 * l2, n2 * a2, -n2 * (-l2 * r2 + a2 * s2) + s2 + t2, 0, 0, 1), this;
  }
  scale(e6, t2) {
    return this.premultiply(ji.makeScale(e6, t2)), this;
  }
  rotate(e6) {
    return this.premultiply(ji.makeRotation(-e6)), this;
  }
  translate(e6, t2) {
    return this.premultiply(ji.makeTranslation(e6, t2)), this;
  }
  makeTranslation(e6, t2) {
    return e6.isVector2 ? this.set(1, 0, e6.x, 0, 1, e6.y, 0, 0, 1) : this.set(1, 0, e6, 0, 1, t2, 0, 0, 1), this;
  }
  makeRotation(e6) {
    const t2 = Math.cos(e6), i2 = Math.sin(e6);
    return this.set(t2, -i2, 0, i2, t2, 0, 0, 0, 1), this;
  }
  makeScale(e6, t2) {
    return this.set(e6, 0, 0, 0, t2, 0, 0, 0, 1), this;
  }
  equals(e6) {
    const t2 = this.elements, i2 = e6.elements;
    for (let e7 = 0; e7 < 9; e7++) if (t2[e7] !== i2[e7]) return false;
    return true;
  }
  fromArray(e6, t2 = 0) {
    for (let i2 = 0; i2 < 9; i2++) this.elements[i2] = e6[i2 + t2];
    return this;
  }
  toArray(e6 = [], t2 = 0) {
    const i2 = this.elements;
    return e6[t2] = i2[0], e6[t2 + 1] = i2[1], e6[t2 + 2] = i2[2], e6[t2 + 3] = i2[3], e6[t2 + 4] = i2[4], e6[t2 + 5] = i2[5], e6[t2 + 6] = i2[6], e6[t2 + 7] = i2[7], e6[t2 + 8] = i2[8], e6;
  }
  clone() {
    return new this.constructor().fromArray(this.elements);
  }
}
const ji = new Wi();
function Xi(e6) {
  for (let t2 = e6.length - 1; t2 >= 0; --t2) if (e6[t2] >= 65535) return true;
  return false;
}
function Yi(e6) {
  return document.createElementNS("http://www.w3.org/1999/xhtml", e6);
}
function Ki() {
  const e6 = Yi("canvas");
  return e6.style.display = "block", e6;
}
const Zi = {};
function Ji(e6) {
  e6 in Zi || (Zi[e6] = true, console.warn(e6));
}
const en = new Wi().set(0.8224621, 0.177538, 0, 0.0331941, 0.9668058, 0, 0.0170827, 0.0723974, 0.9105199), tn = new Wi().set(1.2249401, -0.2249404, 0, -0.0420569, 1.0420571, 0, -0.0196376, -0.0786361, 1.0982735), nn = { [_i]: { transfer: fi, primaries: Ai, luminanceCoefficients: [0.2126, 0.7152, 0.0722], toReference: (e6) => e6, fromReference: (e6) => e6 }, [pi]: { transfer: vi, primaries: Ai, luminanceCoefficients: [0.2126, 0.7152, 0.0722], toReference: (e6) => e6.convertSRGBToLinear(), fromReference: (e6) => e6.convertLinearToSRGB() }, [mi]: { transfer: fi, primaries: bi, luminanceCoefficients: [0.2289, 0.6917, 0.0793], toReference: (e6) => e6.applyMatrix3(tn), fromReference: (e6) => e6.applyMatrix3(en) }, [gi]: { transfer: vi, primaries: bi, luminanceCoefficients: [0.2289, 0.6917, 0.0793], toReference: (e6) => e6.convertSRGBToLinear().applyMatrix3(tn), fromReference: (e6) => e6.applyMatrix3(en).convertLinearToSRGB() } }, on = /* @__PURE__ */ new Set([_i, mi]), rn = { enabled: true, _workingColorSpace: _i, get workingColorSpace() {
  return this._workingColorSpace;
}, set workingColorSpace(e6) {
  if (!on.has(e6)) throw new Error(`Unsupported working color space, "${e6}".`);
  this._workingColorSpace = e6;
}, convert: function(e6, t2, i2) {
  if (false === this.enabled || t2 === i2 || !t2 || !i2) return e6;
  const n2 = nn[t2].toReference;
  return (0, nn[i2].fromReference)(n2(e6));
}, fromWorkingColorSpace: function(e6, t2) {
  return this.convert(e6, this._workingColorSpace, t2);
}, toWorkingColorSpace: function(e6, t2) {
  return this.convert(e6, t2, this._workingColorSpace);
}, getPrimaries: function(e6) {
  return nn[e6].primaries;
}, getTransfer: function(e6) {
  return e6 === di ? fi : nn[e6].transfer;
}, getLuminanceCoefficients: function(e6, t2 = this._workingColorSpace) {
  return e6.fromArray(nn[t2].luminanceCoefficients);
} };
function sn(e6) {
  return e6 < 0.04045 ? 0.0773993808 * e6 : Math.pow(0.9478672986 * e6 + 0.0521327014, 2.4);
}
function an(e6) {
  return e6 < 31308e-7 ? 12.92 * e6 : 1.055 * Math.pow(e6, 0.41666) - 0.055;
}
let ln;
class cn {
  static getDataURL(e6) {
    if (/^data:/i.test(e6.src)) return e6.src;
    if ("undefined" == typeof HTMLCanvasElement) return e6.src;
    let t2;
    if (e6 instanceof HTMLCanvasElement) t2 = e6;
    else {
      void 0 === ln && (ln = Yi("canvas")), ln.width = e6.width, ln.height = e6.height;
      const i2 = ln.getContext("2d");
      e6 instanceof ImageData ? i2.putImageData(e6, 0, 0) : i2.drawImage(e6, 0, 0, e6.width, e6.height), t2 = ln;
    }
    return t2.width > 2048 || t2.height > 2048 ? (console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons", e6), t2.toDataURL("image/jpeg", 0.6)) : t2.toDataURL("image/png");
  }
  static sRGBToLinear(e6) {
    if ("undefined" != typeof HTMLImageElement && e6 instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e6 instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && e6 instanceof ImageBitmap) {
      const t2 = Yi("canvas");
      t2.width = e6.width, t2.height = e6.height;
      const i2 = t2.getContext("2d");
      i2.drawImage(e6, 0, 0, e6.width, e6.height);
      const n2 = i2.getImageData(0, 0, e6.width, e6.height), o2 = n2.data;
      for (let e7 = 0; e7 < o2.length; e7++) o2[e7] = 255 * sn(o2[e7] / 255);
      return i2.putImageData(n2, 0, 0), t2;
    }
    if (e6.data) {
      const t2 = e6.data.slice(0);
      for (let e7 = 0; e7 < t2.length; e7++) t2 instanceof Uint8Array || t2 instanceof Uint8ClampedArray ? t2[e7] = Math.floor(255 * sn(t2[e7] / 255)) : t2[e7] = sn(t2[e7]);
      return { data: t2, width: e6.width, height: e6.height };
    }
    return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."), e6;
  }
}
let hn = 0;
class un {
  constructor(e6 = null) {
    this.isSource = true, Object.defineProperty(this, "id", { value: hn++ }), this.uuid = Ui(), this.data = e6, this.dataReady = true, this.version = 0;
  }
  set needsUpdate(e6) {
    true === e6 && this.version++;
  }
  toJSON(e6) {
    const t2 = void 0 === e6 || "string" == typeof e6;
    if (!t2 && void 0 !== e6.images[this.uuid]) return e6.images[this.uuid];
    const i2 = { uuid: this.uuid, url: "" }, n2 = this.data;
    if (null !== n2) {
      let e7;
      if (Array.isArray(n2)) {
        e7 = [];
        for (let t3 = 0, i3 = n2.length; t3 < i3; t3++) n2[t3].isDataTexture ? e7.push(dn(n2[t3].image)) : e7.push(dn(n2[t3]));
      } else e7 = dn(n2);
      i2.url = e7;
    }
    return t2 || (e6.images[this.uuid] = i2), i2;
  }
}
function dn(e6) {
  return "undefined" != typeof HTMLImageElement && e6 instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e6 instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && e6 instanceof ImageBitmap ? cn.getDataURL(e6) : e6.data ? { data: Array.from(e6.data), width: e6.width, height: e6.height, type: e6.data.constructor.name } : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
}
let pn = 0, _n = class e4 extends Di {
  constructor(t2 = e4.DEFAULT_IMAGE, i2 = e4.DEFAULT_MAPPING, n2 = 1001, o2 = 1001, r2 = 1006, s2 = 1008, a2 = 1023, l2 = 1009, c2 = e4.DEFAULT_ANISOTROPY, h2 = "") {
    super(), this.isTexture = true, Object.defineProperty(this, "id", { value: pn++ }), this.uuid = Ui(), this.name = "", this.source = new un(t2), this.mipmaps = [], this.mapping = i2, this.channel = 0, this.wrapS = n2, this.wrapT = o2, this.magFilter = r2, this.minFilter = s2, this.anisotropy = c2, this.format = a2, this.internalFormat = null, this.type = l2, this.offset = new $i(0, 0), this.repeat = new $i(1, 1), this.center = new $i(0, 0), this.rotation = 0, this.matrixAutoUpdate = true, this.matrix = new Wi(), this.generateMipmaps = true, this.premultiplyAlpha = false, this.flipY = true, this.unpackAlignment = 4, this.colorSpace = h2, this.userData = {}, this.version = 0, this.onUpdate = null, this.isRenderTargetTexture = false, this.pmremVersion = 0;
  }
  get image() {
    return this.source.data;
  }
  set image(e6 = null) {
    this.source.data = e6;
  }
  updateMatrix() {
    this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e6) {
    return this.name = e6.name, this.source = e6.source, this.mipmaps = e6.mipmaps.slice(0), this.mapping = e6.mapping, this.channel = e6.channel, this.wrapS = e6.wrapS, this.wrapT = e6.wrapT, this.magFilter = e6.magFilter, this.minFilter = e6.minFilter, this.anisotropy = e6.anisotropy, this.format = e6.format, this.internalFormat = e6.internalFormat, this.type = e6.type, this.offset.copy(e6.offset), this.repeat.copy(e6.repeat), this.center.copy(e6.center), this.rotation = e6.rotation, this.matrixAutoUpdate = e6.matrixAutoUpdate, this.matrix.copy(e6.matrix), this.generateMipmaps = e6.generateMipmaps, this.premultiplyAlpha = e6.premultiplyAlpha, this.flipY = e6.flipY, this.unpackAlignment = e6.unpackAlignment, this.colorSpace = e6.colorSpace, this.userData = JSON.parse(JSON.stringify(e6.userData)), this.needsUpdate = true, this;
  }
  toJSON(e6) {
    const t2 = void 0 === e6 || "string" == typeof e6;
    if (!t2 && void 0 !== e6.textures[this.uuid]) return e6.textures[this.uuid];
    const i2 = { metadata: { version: 4.6, type: "Texture", generator: "Texture.toJSON" }, uuid: this.uuid, name: this.name, image: this.source.toJSON(e6).uuid, mapping: this.mapping, channel: this.channel, repeat: [this.repeat.x, this.repeat.y], offset: [this.offset.x, this.offset.y], center: [this.center.x, this.center.y], rotation: this.rotation, wrap: [this.wrapS, this.wrapT], format: this.format, internalFormat: this.internalFormat, type: this.type, colorSpace: this.colorSpace, minFilter: this.minFilter, magFilter: this.magFilter, anisotropy: this.anisotropy, flipY: this.flipY, generateMipmaps: this.generateMipmaps, premultiplyAlpha: this.premultiplyAlpha, unpackAlignment: this.unpackAlignment };
    return Object.keys(this.userData).length > 0 && (i2.userData = this.userData), t2 || (e6.textures[this.uuid] = i2), i2;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  transformUv(e6) {
    if (this.mapping !== $e) return e6;
    if (e6.applyMatrix3(this.matrix), e6.x < 0 || e6.x > 1) switch (this.wrapS) {
      case Ke:
        e6.x = e6.x - Math.floor(e6.x);
        break;
      case Ze:
        e6.x = e6.x < 0 ? 0 : 1;
        break;
      case Je:
        1 === Math.abs(Math.floor(e6.x) % 2) ? e6.x = Math.ceil(e6.x) - e6.x : e6.x = e6.x - Math.floor(e6.x);
    }
    if (e6.y < 0 || e6.y > 1) switch (this.wrapT) {
      case Ke:
        e6.y = e6.y - Math.floor(e6.y);
        break;
      case Ze:
        e6.y = e6.y < 0 ? 0 : 1;
        break;
      case Je:
        1 === Math.abs(Math.floor(e6.y) % 2) ? e6.y = Math.ceil(e6.y) - e6.y : e6.y = e6.y - Math.floor(e6.y);
    }
    return this.flipY && (e6.y = 1 - e6.y), e6;
  }
  set needsUpdate(e6) {
    true === e6 && (this.version++, this.source.needsUpdate = true);
  }
  set needsPMREMUpdate(e6) {
    true === e6 && this.pmremVersion++;
  }
};
_n.DEFAULT_IMAGE = null, _n.DEFAULT_MAPPING = $e, _n.DEFAULT_ANISOTROPY = 1;
class gn {
  constructor(e6 = 0, t2 = 0, i2 = 0, n2 = 1) {
    gn.prototype.isVector4 = true, this.x = e6, this.y = t2, this.z = i2, this.w = n2;
  }
  get width() {
    return this.z;
  }
  set width(e6) {
    this.z = e6;
  }
  get height() {
    return this.w;
  }
  set height(e6) {
    this.w = e6;
  }
  set(e6, t2, i2, n2) {
    return this.x = e6, this.y = t2, this.z = i2, this.w = n2, this;
  }
  setScalar(e6) {
    return this.x = e6, this.y = e6, this.z = e6, this.w = e6, this;
  }
  setX(e6) {
    return this.x = e6, this;
  }
  setY(e6) {
    return this.y = e6, this;
  }
  setZ(e6) {
    return this.z = e6, this;
  }
  setW(e6) {
    return this.w = e6, this;
  }
  setComponent(e6, t2) {
    switch (e6) {
      case 0:
        this.x = t2;
        break;
      case 1:
        this.y = t2;
        break;
      case 2:
        this.z = t2;
        break;
      case 3:
        this.w = t2;
        break;
      default:
        throw new Error("index is out of range: " + e6);
    }
    return this;
  }
  getComponent(e6) {
    switch (e6) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      case 3:
        return this.w;
      default:
        throw new Error("index is out of range: " + e6);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z, this.w);
  }
  copy(e6) {
    return this.x = e6.x, this.y = e6.y, this.z = e6.z, this.w = void 0 !== e6.w ? e6.w : 1, this;
  }
  add(e6) {
    return this.x += e6.x, this.y += e6.y, this.z += e6.z, this.w += e6.w, this;
  }
  addScalar(e6) {
    return this.x += e6, this.y += e6, this.z += e6, this.w += e6, this;
  }
  addVectors(e6, t2) {
    return this.x = e6.x + t2.x, this.y = e6.y + t2.y, this.z = e6.z + t2.z, this.w = e6.w + t2.w, this;
  }
  addScaledVector(e6, t2) {
    return this.x += e6.x * t2, this.y += e6.y * t2, this.z += e6.z * t2, this.w += e6.w * t2, this;
  }
  sub(e6) {
    return this.x -= e6.x, this.y -= e6.y, this.z -= e6.z, this.w -= e6.w, this;
  }
  subScalar(e6) {
    return this.x -= e6, this.y -= e6, this.z -= e6, this.w -= e6, this;
  }
  subVectors(e6, t2) {
    return this.x = e6.x - t2.x, this.y = e6.y - t2.y, this.z = e6.z - t2.z, this.w = e6.w - t2.w, this;
  }
  multiply(e6) {
    return this.x *= e6.x, this.y *= e6.y, this.z *= e6.z, this.w *= e6.w, this;
  }
  multiplyScalar(e6) {
    return this.x *= e6, this.y *= e6, this.z *= e6, this.w *= e6, this;
  }
  applyMatrix4(e6) {
    const t2 = this.x, i2 = this.y, n2 = this.z, o2 = this.w, r2 = e6.elements;
    return this.x = r2[0] * t2 + r2[4] * i2 + r2[8] * n2 + r2[12] * o2, this.y = r2[1] * t2 + r2[5] * i2 + r2[9] * n2 + r2[13] * o2, this.z = r2[2] * t2 + r2[6] * i2 + r2[10] * n2 + r2[14] * o2, this.w = r2[3] * t2 + r2[7] * i2 + r2[11] * n2 + r2[15] * o2, this;
  }
  divideScalar(e6) {
    return this.multiplyScalar(1 / e6);
  }
  setAxisAngleFromQuaternion(e6) {
    this.w = 2 * Math.acos(e6.w);
    const t2 = Math.sqrt(1 - e6.w * e6.w);
    return t2 < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e6.x / t2, this.y = e6.y / t2, this.z = e6.z / t2), this;
  }
  setAxisAngleFromRotationMatrix(e6) {
    let t2, i2, n2, o2;
    const r2 = 0.01, s2 = 0.1, a2 = e6.elements, l2 = a2[0], c2 = a2[4], h2 = a2[8], u2 = a2[1], d2 = a2[5], p2 = a2[9], _2 = a2[2], g2 = a2[6], m2 = a2[10];
    if (Math.abs(c2 - u2) < r2 && Math.abs(h2 - _2) < r2 && Math.abs(p2 - g2) < r2) {
      if (Math.abs(c2 + u2) < s2 && Math.abs(h2 + _2) < s2 && Math.abs(p2 + g2) < s2 && Math.abs(l2 + d2 + m2 - 3) < s2) return this.set(1, 0, 0, 0), this;
      t2 = Math.PI;
      const e7 = (l2 + 1) / 2, a3 = (d2 + 1) / 2, f3 = (m2 + 1) / 2, v2 = (c2 + u2) / 4, A2 = (h2 + _2) / 4, b2 = (p2 + g2) / 4;
      return e7 > a3 && e7 > f3 ? e7 < r2 ? (i2 = 0, n2 = 0.707106781, o2 = 0.707106781) : (i2 = Math.sqrt(e7), n2 = v2 / i2, o2 = A2 / i2) : a3 > f3 ? a3 < r2 ? (i2 = 0.707106781, n2 = 0, o2 = 0.707106781) : (n2 = Math.sqrt(a3), i2 = v2 / n2, o2 = b2 / n2) : f3 < r2 ? (i2 = 0.707106781, n2 = 0.707106781, o2 = 0) : (o2 = Math.sqrt(f3), i2 = A2 / o2, n2 = b2 / o2), this.set(i2, n2, o2, t2), this;
    }
    let f2 = Math.sqrt((g2 - p2) * (g2 - p2) + (h2 - _2) * (h2 - _2) + (u2 - c2) * (u2 - c2));
    return Math.abs(f2) < 1e-3 && (f2 = 1), this.x = (g2 - p2) / f2, this.y = (h2 - _2) / f2, this.z = (u2 - c2) / f2, this.w = Math.acos((l2 + d2 + m2 - 1) / 2), this;
  }
  setFromMatrixPosition(e6) {
    const t2 = e6.elements;
    return this.x = t2[12], this.y = t2[13], this.z = t2[14], this.w = t2[15], this;
  }
  min(e6) {
    return this.x = Math.min(this.x, e6.x), this.y = Math.min(this.y, e6.y), this.z = Math.min(this.z, e6.z), this.w = Math.min(this.w, e6.w), this;
  }
  max(e6) {
    return this.x = Math.max(this.x, e6.x), this.y = Math.max(this.y, e6.y), this.z = Math.max(this.z, e6.z), this.w = Math.max(this.w, e6.w), this;
  }
  clamp(e6, t2) {
    return this.x = Math.max(e6.x, Math.min(t2.x, this.x)), this.y = Math.max(e6.y, Math.min(t2.y, this.y)), this.z = Math.max(e6.z, Math.min(t2.z, this.z)), this.w = Math.max(e6.w, Math.min(t2.w, this.w)), this;
  }
  clampScalar(e6, t2) {
    return this.x = Math.max(e6, Math.min(t2, this.x)), this.y = Math.max(e6, Math.min(t2, this.y)), this.z = Math.max(e6, Math.min(t2, this.z)), this.w = Math.max(e6, Math.min(t2, this.w)), this;
  }
  clampLength(e6, t2) {
    const i2 = this.length();
    return this.divideScalar(i2 || 1).multiplyScalar(Math.max(e6, Math.min(t2, i2)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this;
  }
  roundToZero() {
    return this.x = Math.trunc(this.x), this.y = Math.trunc(this.y), this.z = Math.trunc(this.z), this.w = Math.trunc(this.w), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
  }
  dot(e6) {
    return this.x * e6.x + this.y * e6.y + this.z * e6.z + this.w * e6.w;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e6) {
    return this.normalize().multiplyScalar(e6);
  }
  lerp(e6, t2) {
    return this.x += (e6.x - this.x) * t2, this.y += (e6.y - this.y) * t2, this.z += (e6.z - this.z) * t2, this.w += (e6.w - this.w) * t2, this;
  }
  lerpVectors(e6, t2, i2) {
    return this.x = e6.x + (t2.x - e6.x) * i2, this.y = e6.y + (t2.y - e6.y) * i2, this.z = e6.z + (t2.z - e6.z) * i2, this.w = e6.w + (t2.w - e6.w) * i2, this;
  }
  equals(e6) {
    return e6.x === this.x && e6.y === this.y && e6.z === this.z && e6.w === this.w;
  }
  fromArray(e6, t2 = 0) {
    return this.x = e6[t2], this.y = e6[t2 + 1], this.z = e6[t2 + 2], this.w = e6[t2 + 3], this;
  }
  toArray(e6 = [], t2 = 0) {
    return e6[t2] = this.x, e6[t2 + 1] = this.y, e6[t2 + 2] = this.z, e6[t2 + 3] = this.w, e6;
  }
  fromBufferAttribute(e6, t2) {
    return this.x = e6.getX(t2), this.y = e6.getY(t2), this.z = e6.getZ(t2), this.w = e6.getW(t2), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this.w = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z, yield this.w;
  }
}
class mn extends Di {
  constructor(e6 = 1, t2 = 1, i2 = {}) {
    super(), this.isRenderTarget = true, this.width = e6, this.height = t2, this.depth = 1, this.scissor = new gn(0, 0, e6, t2), this.scissorTest = false, this.viewport = new gn(0, 0, e6, t2);
    const n2 = { width: e6, height: t2, depth: 1 };
    i2 = Object.assign({ generateMipmaps: false, internalFormat: null, minFilter: nt, depthBuffer: true, stencilBuffer: false, resolveDepthBuffer: true, resolveStencilBuffer: true, depthTexture: null, samples: 0, count: 1 }, i2);
    const o2 = new _n(n2, i2.mapping, i2.wrapS, i2.wrapT, i2.magFilter, i2.minFilter, i2.format, i2.type, i2.anisotropy, i2.colorSpace);
    o2.flipY = false, o2.generateMipmaps = i2.generateMipmaps, o2.internalFormat = i2.internalFormat, this.textures = [];
    const r2 = i2.count;
    for (let e7 = 0; e7 < r2; e7++) this.textures[e7] = o2.clone(), this.textures[e7].isRenderTargetTexture = true;
    this.depthBuffer = i2.depthBuffer, this.stencilBuffer = i2.stencilBuffer, this.resolveDepthBuffer = i2.resolveDepthBuffer, this.resolveStencilBuffer = i2.resolveStencilBuffer, this.depthTexture = i2.depthTexture, this.samples = i2.samples;
  }
  get texture() {
    return this.textures[0];
  }
  set texture(e6) {
    this.textures[0] = e6;
  }
  setSize(e6, t2, i2 = 1) {
    if (this.width !== e6 || this.height !== t2 || this.depth !== i2) {
      this.width = e6, this.height = t2, this.depth = i2;
      for (let n2 = 0, o2 = this.textures.length; n2 < o2; n2++) this.textures[n2].image.width = e6, this.textures[n2].image.height = t2, this.textures[n2].image.depth = i2;
      this.dispose();
    }
    this.viewport.set(0, 0, e6, t2), this.scissor.set(0, 0, e6, t2);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e6) {
    this.width = e6.width, this.height = e6.height, this.depth = e6.depth, this.scissor.copy(e6.scissor), this.scissorTest = e6.scissorTest, this.viewport.copy(e6.viewport), this.textures.length = 0;
    for (let t3 = 0, i2 = e6.textures.length; t3 < i2; t3++) this.textures[t3] = e6.textures[t3].clone(), this.textures[t3].isRenderTargetTexture = true;
    const t2 = Object.assign({}, e6.texture.image);
    return this.texture.source = new un(t2), this.depthBuffer = e6.depthBuffer, this.stencilBuffer = e6.stencilBuffer, this.resolveDepthBuffer = e6.resolveDepthBuffer, this.resolveStencilBuffer = e6.resolveStencilBuffer, null !== e6.depthTexture && (this.depthTexture = e6.depthTexture.clone()), this.samples = e6.samples, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
}
class fn extends mn {
  constructor(e6 = 1, t2 = 1, i2 = {}) {
    super(e6, t2, i2), this.isWebGLRenderTarget = true;
  }
}
class vn extends _n {
  constructor(e6 = null, t2 = 1, i2 = 1, n2 = 1) {
    super(null), this.isDataArrayTexture = true, this.image = { data: e6, width: t2, height: i2, depth: n2 }, this.magFilter = et, this.minFilter = et, this.wrapR = Ze, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1, this.layerUpdates = /* @__PURE__ */ new Set();
  }
  addLayerUpdate(e6) {
    this.layerUpdates.add(e6);
  }
  clearLayerUpdates() {
    this.layerUpdates.clear();
  }
}
class An extends _n {
  constructor(e6 = null, t2 = 1, i2 = 1, n2 = 1) {
    super(null), this.isData3DTexture = true, this.image = { data: e6, width: t2, height: i2, depth: n2 }, this.magFilter = et, this.minFilter = et, this.wrapR = Ze, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
}
class bn {
  constructor(e6 = 0, t2 = 0, i2 = 0, n2 = 1) {
    this.isQuaternion = true, this._x = e6, this._y = t2, this._z = i2, this._w = n2;
  }
  static slerpFlat(e6, t2, i2, n2, o2, r2, s2) {
    let a2 = i2[n2 + 0], l2 = i2[n2 + 1], c2 = i2[n2 + 2], h2 = i2[n2 + 3];
    const u2 = o2[r2 + 0], d2 = o2[r2 + 1], p2 = o2[r2 + 2], _2 = o2[r2 + 3];
    if (0 === s2) return e6[t2 + 0] = a2, e6[t2 + 1] = l2, e6[t2 + 2] = c2, void (e6[t2 + 3] = h2);
    if (1 === s2) return e6[t2 + 0] = u2, e6[t2 + 1] = d2, e6[t2 + 2] = p2, void (e6[t2 + 3] = _2);
    if (h2 !== _2 || a2 !== u2 || l2 !== d2 || c2 !== p2) {
      let e7 = 1 - s2;
      const t3 = a2 * u2 + l2 * d2 + c2 * p2 + h2 * _2, i3 = t3 >= 0 ? 1 : -1, n3 = 1 - t3 * t3;
      if (n3 > Number.EPSILON) {
        const o4 = Math.sqrt(n3), r3 = Math.atan2(o4, t3 * i3);
        e7 = Math.sin(e7 * r3) / o4, s2 = Math.sin(s2 * r3) / o4;
      }
      const o3 = s2 * i3;
      if (a2 = a2 * e7 + u2 * o3, l2 = l2 * e7 + d2 * o3, c2 = c2 * e7 + p2 * o3, h2 = h2 * e7 + _2 * o3, e7 === 1 - s2) {
        const e8 = 1 / Math.sqrt(a2 * a2 + l2 * l2 + c2 * c2 + h2 * h2);
        a2 *= e8, l2 *= e8, c2 *= e8, h2 *= e8;
      }
    }
    e6[t2] = a2, e6[t2 + 1] = l2, e6[t2 + 2] = c2, e6[t2 + 3] = h2;
  }
  static multiplyQuaternionsFlat(e6, t2, i2, n2, o2, r2) {
    const s2 = i2[n2], a2 = i2[n2 + 1], l2 = i2[n2 + 2], c2 = i2[n2 + 3], h2 = o2[r2], u2 = o2[r2 + 1], d2 = o2[r2 + 2], p2 = o2[r2 + 3];
    return e6[t2] = s2 * p2 + c2 * h2 + a2 * d2 - l2 * u2, e6[t2 + 1] = a2 * p2 + c2 * u2 + l2 * h2 - s2 * d2, e6[t2 + 2] = l2 * p2 + c2 * d2 + s2 * u2 - a2 * h2, e6[t2 + 3] = c2 * p2 - s2 * h2 - a2 * u2 - l2 * d2, e6;
  }
  get x() {
    return this._x;
  }
  set x(e6) {
    this._x = e6, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e6) {
    this._y = e6, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e6) {
    this._z = e6, this._onChangeCallback();
  }
  get w() {
    return this._w;
  }
  set w(e6) {
    this._w = e6, this._onChangeCallback();
  }
  set(e6, t2, i2, n2) {
    return this._x = e6, this._y = t2, this._z = i2, this._w = n2, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._w);
  }
  copy(e6) {
    return this._x = e6.x, this._y = e6.y, this._z = e6.z, this._w = e6.w, this._onChangeCallback(), this;
  }
  setFromEuler(e6, t2 = true) {
    const i2 = e6._x, n2 = e6._y, o2 = e6._z, r2 = e6._order, s2 = Math.cos, a2 = Math.sin, l2 = s2(i2 / 2), c2 = s2(n2 / 2), h2 = s2(o2 / 2), u2 = a2(i2 / 2), d2 = a2(n2 / 2), p2 = a2(o2 / 2);
    switch (r2) {
      case "XYZ":
        this._x = u2 * c2 * h2 + l2 * d2 * p2, this._y = l2 * d2 * h2 - u2 * c2 * p2, this._z = l2 * c2 * p2 + u2 * d2 * h2, this._w = l2 * c2 * h2 - u2 * d2 * p2;
        break;
      case "YXZ":
        this._x = u2 * c2 * h2 + l2 * d2 * p2, this._y = l2 * d2 * h2 - u2 * c2 * p2, this._z = l2 * c2 * p2 - u2 * d2 * h2, this._w = l2 * c2 * h2 + u2 * d2 * p2;
        break;
      case "ZXY":
        this._x = u2 * c2 * h2 - l2 * d2 * p2, this._y = l2 * d2 * h2 + u2 * c2 * p2, this._z = l2 * c2 * p2 + u2 * d2 * h2, this._w = l2 * c2 * h2 - u2 * d2 * p2;
        break;
      case "ZYX":
        this._x = u2 * c2 * h2 - l2 * d2 * p2, this._y = l2 * d2 * h2 + u2 * c2 * p2, this._z = l2 * c2 * p2 - u2 * d2 * h2, this._w = l2 * c2 * h2 + u2 * d2 * p2;
        break;
      case "YZX":
        this._x = u2 * c2 * h2 + l2 * d2 * p2, this._y = l2 * d2 * h2 + u2 * c2 * p2, this._z = l2 * c2 * p2 - u2 * d2 * h2, this._w = l2 * c2 * h2 - u2 * d2 * p2;
        break;
      case "XZY":
        this._x = u2 * c2 * h2 - l2 * d2 * p2, this._y = l2 * d2 * h2 - u2 * c2 * p2, this._z = l2 * c2 * p2 + u2 * d2 * h2, this._w = l2 * c2 * h2 + u2 * d2 * p2;
        break;
      default:
        console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: " + r2);
    }
    return true === t2 && this._onChangeCallback(), this;
  }
  setFromAxisAngle(e6, t2) {
    const i2 = t2 / 2, n2 = Math.sin(i2);
    return this._x = e6.x * n2, this._y = e6.y * n2, this._z = e6.z * n2, this._w = Math.cos(i2), this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e6) {
    const t2 = e6.elements, i2 = t2[0], n2 = t2[4], o2 = t2[8], r2 = t2[1], s2 = t2[5], a2 = t2[9], l2 = t2[2], c2 = t2[6], h2 = t2[10], u2 = i2 + s2 + h2;
    if (u2 > 0) {
      const e7 = 0.5 / Math.sqrt(u2 + 1);
      this._w = 0.25 / e7, this._x = (c2 - a2) * e7, this._y = (o2 - l2) * e7, this._z = (r2 - n2) * e7;
    } else if (i2 > s2 && i2 > h2) {
      const e7 = 2 * Math.sqrt(1 + i2 - s2 - h2);
      this._w = (c2 - a2) / e7, this._x = 0.25 * e7, this._y = (n2 + r2) / e7, this._z = (o2 + l2) / e7;
    } else if (s2 > h2) {
      const e7 = 2 * Math.sqrt(1 + s2 - i2 - h2);
      this._w = (o2 - l2) / e7, this._x = (n2 + r2) / e7, this._y = 0.25 * e7, this._z = (a2 + c2) / e7;
    } else {
      const e7 = 2 * Math.sqrt(1 + h2 - i2 - s2);
      this._w = (r2 - n2) / e7, this._x = (o2 + l2) / e7, this._y = (a2 + c2) / e7, this._z = 0.25 * e7;
    }
    return this._onChangeCallback(), this;
  }
  setFromUnitVectors(e6, t2) {
    let i2 = e6.dot(t2) + 1;
    return i2 < Number.EPSILON ? (i2 = 0, Math.abs(e6.x) > Math.abs(e6.z) ? (this._x = -e6.y, this._y = e6.x, this._z = 0, this._w = i2) : (this._x = 0, this._y = -e6.z, this._z = e6.y, this._w = i2)) : (this._x = e6.y * t2.z - e6.z * t2.y, this._y = e6.z * t2.x - e6.x * t2.z, this._z = e6.x * t2.y - e6.y * t2.x, this._w = i2), this.normalize();
  }
  angleTo(e6) {
    return 2 * Math.acos(Math.abs(zi(this.dot(e6), -1, 1)));
  }
  rotateTowards(e6, t2) {
    const i2 = this.angleTo(e6);
    if (0 === i2) return this;
    const n2 = Math.min(1, t2 / i2);
    return this.slerp(e6, n2), this;
  }
  identity() {
    return this.set(0, 0, 0, 1);
  }
  invert() {
    return this.conjugate();
  }
  conjugate() {
    return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this;
  }
  dot(e6) {
    return this._x * e6._x + this._y * e6._y + this._z * e6._z + this._w * e6._w;
  }
  lengthSq() {
    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;
  }
  length() {
    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);
  }
  normalize() {
    let e6 = this.length();
    return 0 === e6 ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e6 = 1 / e6, this._x = this._x * e6, this._y = this._y * e6, this._z = this._z * e6, this._w = this._w * e6), this._onChangeCallback(), this;
  }
  multiply(e6) {
    return this.multiplyQuaternions(this, e6);
  }
  premultiply(e6) {
    return this.multiplyQuaternions(e6, this);
  }
  multiplyQuaternions(e6, t2) {
    const i2 = e6._x, n2 = e6._y, o2 = e6._z, r2 = e6._w, s2 = t2._x, a2 = t2._y, l2 = t2._z, c2 = t2._w;
    return this._x = i2 * c2 + r2 * s2 + n2 * l2 - o2 * a2, this._y = n2 * c2 + r2 * a2 + o2 * s2 - i2 * l2, this._z = o2 * c2 + r2 * l2 + i2 * a2 - n2 * s2, this._w = r2 * c2 - i2 * s2 - n2 * a2 - o2 * l2, this._onChangeCallback(), this;
  }
  slerp(e6, t2) {
    if (0 === t2) return this;
    if (1 === t2) return this.copy(e6);
    const i2 = this._x, n2 = this._y, o2 = this._z, r2 = this._w;
    let s2 = r2 * e6._w + i2 * e6._x + n2 * e6._y + o2 * e6._z;
    if (s2 < 0 ? (this._w = -e6._w, this._x = -e6._x, this._y = -e6._y, this._z = -e6._z, s2 = -s2) : this.copy(e6), s2 >= 1) return this._w = r2, this._x = i2, this._y = n2, this._z = o2, this;
    const a2 = 1 - s2 * s2;
    if (a2 <= Number.EPSILON) {
      const e7 = 1 - t2;
      return this._w = e7 * r2 + t2 * this._w, this._x = e7 * i2 + t2 * this._x, this._y = e7 * n2 + t2 * this._y, this._z = e7 * o2 + t2 * this._z, this.normalize(), this;
    }
    const l2 = Math.sqrt(a2), c2 = Math.atan2(l2, s2), h2 = Math.sin((1 - t2) * c2) / l2, u2 = Math.sin(t2 * c2) / l2;
    return this._w = r2 * h2 + this._w * u2, this._x = i2 * h2 + this._x * u2, this._y = n2 * h2 + this._y * u2, this._z = o2 * h2 + this._z * u2, this._onChangeCallback(), this;
  }
  slerpQuaternions(e6, t2, i2) {
    return this.copy(e6).slerp(t2, i2);
  }
  random() {
    const e6 = 2 * Math.PI * Math.random(), t2 = 2 * Math.PI * Math.random(), i2 = Math.random(), n2 = Math.sqrt(1 - i2), o2 = Math.sqrt(i2);
    return this.set(n2 * Math.sin(e6), n2 * Math.cos(e6), o2 * Math.sin(t2), o2 * Math.cos(t2));
  }
  equals(e6) {
    return e6._x === this._x && e6._y === this._y && e6._z === this._z && e6._w === this._w;
  }
  fromArray(e6, t2 = 0) {
    return this._x = e6[t2], this._y = e6[t2 + 1], this._z = e6[t2 + 2], this._w = e6[t2 + 3], this._onChangeCallback(), this;
  }
  toArray(e6 = [], t2 = 0) {
    return e6[t2] = this._x, e6[t2 + 1] = this._y, e6[t2 + 2] = this._z, e6[t2 + 3] = this._w, e6;
  }
  fromBufferAttribute(e6, t2) {
    return this._x = e6.getX(t2), this._y = e6.getY(t2), this._z = e6.getZ(t2), this._w = e6.getW(t2), this._onChangeCallback(), this;
  }
  toJSON() {
    return this.toArray();
  }
  _onChange(e6) {
    return this._onChangeCallback = e6, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._w;
  }
}
class yn {
  constructor(e6 = 0, t2 = 0, i2 = 0) {
    yn.prototype.isVector3 = true, this.x = e6, this.y = t2, this.z = i2;
  }
  set(e6, t2, i2) {
    return void 0 === i2 && (i2 = this.z), this.x = e6, this.y = t2, this.z = i2, this;
  }
  setScalar(e6) {
    return this.x = e6, this.y = e6, this.z = e6, this;
  }
  setX(e6) {
    return this.x = e6, this;
  }
  setY(e6) {
    return this.y = e6, this;
  }
  setZ(e6) {
    return this.z = e6, this;
  }
  setComponent(e6, t2) {
    switch (e6) {
      case 0:
        this.x = t2;
        break;
      case 1:
        this.y = t2;
        break;
      case 2:
        this.z = t2;
        break;
      default:
        throw new Error("index is out of range: " + e6);
    }
    return this;
  }
  getComponent(e6) {
    switch (e6) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      default:
        throw new Error("index is out of range: " + e6);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z);
  }
  copy(e6) {
    return this.x = e6.x, this.y = e6.y, this.z = e6.z, this;
  }
  add(e6) {
    return this.x += e6.x, this.y += e6.y, this.z += e6.z, this;
  }
  addScalar(e6) {
    return this.x += e6, this.y += e6, this.z += e6, this;
  }
  addVectors(e6, t2) {
    return this.x = e6.x + t2.x, this.y = e6.y + t2.y, this.z = e6.z + t2.z, this;
  }
  addScaledVector(e6, t2) {
    return this.x += e6.x * t2, this.y += e6.y * t2, this.z += e6.z * t2, this;
  }
  sub(e6) {
    return this.x -= e6.x, this.y -= e6.y, this.z -= e6.z, this;
  }
  subScalar(e6) {
    return this.x -= e6, this.y -= e6, this.z -= e6, this;
  }
  subVectors(e6, t2) {
    return this.x = e6.x - t2.x, this.y = e6.y - t2.y, this.z = e6.z - t2.z, this;
  }
  multiply(e6) {
    return this.x *= e6.x, this.y *= e6.y, this.z *= e6.z, this;
  }
  multiplyScalar(e6) {
    return this.x *= e6, this.y *= e6, this.z *= e6, this;
  }
  multiplyVectors(e6, t2) {
    return this.x = e6.x * t2.x, this.y = e6.y * t2.y, this.z = e6.z * t2.z, this;
  }
  applyEuler(e6) {
    return this.applyQuaternion(xn.setFromEuler(e6));
  }
  applyAxisAngle(e6, t2) {
    return this.applyQuaternion(xn.setFromAxisAngle(e6, t2));
  }
  applyMatrix3(e6) {
    const t2 = this.x, i2 = this.y, n2 = this.z, o2 = e6.elements;
    return this.x = o2[0] * t2 + o2[3] * i2 + o2[6] * n2, this.y = o2[1] * t2 + o2[4] * i2 + o2[7] * n2, this.z = o2[2] * t2 + o2[5] * i2 + o2[8] * n2, this;
  }
  applyNormalMatrix(e6) {
    return this.applyMatrix3(e6).normalize();
  }
  applyMatrix4(e6) {
    const t2 = this.x, i2 = this.y, n2 = this.z, o2 = e6.elements, r2 = 1 / (o2[3] * t2 + o2[7] * i2 + o2[11] * n2 + o2[15]);
    return this.x = (o2[0] * t2 + o2[4] * i2 + o2[8] * n2 + o2[12]) * r2, this.y = (o2[1] * t2 + o2[5] * i2 + o2[9] * n2 + o2[13]) * r2, this.z = (o2[2] * t2 + o2[6] * i2 + o2[10] * n2 + o2[14]) * r2, this;
  }
  applyQuaternion(e6) {
    const t2 = this.x, i2 = this.y, n2 = this.z, o2 = e6.x, r2 = e6.y, s2 = e6.z, a2 = e6.w, l2 = 2 * (r2 * n2 - s2 * i2), c2 = 2 * (s2 * t2 - o2 * n2), h2 = 2 * (o2 * i2 - r2 * t2);
    return this.x = t2 + a2 * l2 + r2 * h2 - s2 * c2, this.y = i2 + a2 * c2 + s2 * l2 - o2 * h2, this.z = n2 + a2 * h2 + o2 * c2 - r2 * l2, this;
  }
  project(e6) {
    return this.applyMatrix4(e6.matrixWorldInverse).applyMatrix4(e6.projectionMatrix);
  }
  unproject(e6) {
    return this.applyMatrix4(e6.projectionMatrixInverse).applyMatrix4(e6.matrixWorld);
  }
  transformDirection(e6) {
    const t2 = this.x, i2 = this.y, n2 = this.z, o2 = e6.elements;
    return this.x = o2[0] * t2 + o2[4] * i2 + o2[8] * n2, this.y = o2[1] * t2 + o2[5] * i2 + o2[9] * n2, this.z = o2[2] * t2 + o2[6] * i2 + o2[10] * n2, this.normalize();
  }
  divide(e6) {
    return this.x /= e6.x, this.y /= e6.y, this.z /= e6.z, this;
  }
  divideScalar(e6) {
    return this.multiplyScalar(1 / e6);
  }
  min(e6) {
    return this.x = Math.min(this.x, e6.x), this.y = Math.min(this.y, e6.y), this.z = Math.min(this.z, e6.z), this;
  }
  max(e6) {
    return this.x = Math.max(this.x, e6.x), this.y = Math.max(this.y, e6.y), this.z = Math.max(this.z, e6.z), this;
  }
  clamp(e6, t2) {
    return this.x = Math.max(e6.x, Math.min(t2.x, this.x)), this.y = Math.max(e6.y, Math.min(t2.y, this.y)), this.z = Math.max(e6.z, Math.min(t2.z, this.z)), this;
  }
  clampScalar(e6, t2) {
    return this.x = Math.max(e6, Math.min(t2, this.x)), this.y = Math.max(e6, Math.min(t2, this.y)), this.z = Math.max(e6, Math.min(t2, this.z)), this;
  }
  clampLength(e6, t2) {
    const i2 = this.length();
    return this.divideScalar(i2 || 1).multiplyScalar(Math.max(e6, Math.min(t2, i2)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this;
  }
  roundToZero() {
    return this.x = Math.trunc(this.x), this.y = Math.trunc(this.y), this.z = Math.trunc(this.z), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
  }
  dot(e6) {
    return this.x * e6.x + this.y * e6.y + this.z * e6.z;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e6) {
    return this.normalize().multiplyScalar(e6);
  }
  lerp(e6, t2) {
    return this.x += (e6.x - this.x) * t2, this.y += (e6.y - this.y) * t2, this.z += (e6.z - this.z) * t2, this;
  }
  lerpVectors(e6, t2, i2) {
    return this.x = e6.x + (t2.x - e6.x) * i2, this.y = e6.y + (t2.y - e6.y) * i2, this.z = e6.z + (t2.z - e6.z) * i2, this;
  }
  cross(e6) {
    return this.crossVectors(this, e6);
  }
  crossVectors(e6, t2) {
    const i2 = e6.x, n2 = e6.y, o2 = e6.z, r2 = t2.x, s2 = t2.y, a2 = t2.z;
    return this.x = n2 * a2 - o2 * s2, this.y = o2 * r2 - i2 * a2, this.z = i2 * s2 - n2 * r2, this;
  }
  projectOnVector(e6) {
    const t2 = e6.lengthSq();
    if (0 === t2) return this.set(0, 0, 0);
    const i2 = e6.dot(this) / t2;
    return this.copy(e6).multiplyScalar(i2);
  }
  projectOnPlane(e6) {
    return wn.copy(this).projectOnVector(e6), this.sub(wn);
  }
  reflect(e6) {
    return this.sub(wn.copy(e6).multiplyScalar(2 * this.dot(e6)));
  }
  angleTo(e6) {
    const t2 = Math.sqrt(this.lengthSq() * e6.lengthSq());
    if (0 === t2) return Math.PI / 2;
    const i2 = this.dot(e6) / t2;
    return Math.acos(zi(i2, -1, 1));
  }
  distanceTo(e6) {
    return Math.sqrt(this.distanceToSquared(e6));
  }
  distanceToSquared(e6) {
    const t2 = this.x - e6.x, i2 = this.y - e6.y, n2 = this.z - e6.z;
    return t2 * t2 + i2 * i2 + n2 * n2;
  }
  manhattanDistanceTo(e6) {
    return Math.abs(this.x - e6.x) + Math.abs(this.y - e6.y) + Math.abs(this.z - e6.z);
  }
  setFromSpherical(e6) {
    return this.setFromSphericalCoords(e6.radius, e6.phi, e6.theta);
  }
  setFromSphericalCoords(e6, t2, i2) {
    const n2 = Math.sin(t2) * e6;
    return this.x = n2 * Math.sin(i2), this.y = Math.cos(t2) * e6, this.z = n2 * Math.cos(i2), this;
  }
  setFromCylindrical(e6) {
    return this.setFromCylindricalCoords(e6.radius, e6.theta, e6.y);
  }
  setFromCylindricalCoords(e6, t2, i2) {
    return this.x = e6 * Math.sin(t2), this.y = i2, this.z = e6 * Math.cos(t2), this;
  }
  setFromMatrixPosition(e6) {
    const t2 = e6.elements;
    return this.x = t2[12], this.y = t2[13], this.z = t2[14], this;
  }
  setFromMatrixScale(e6) {
    const t2 = this.setFromMatrixColumn(e6, 0).length(), i2 = this.setFromMatrixColumn(e6, 1).length(), n2 = this.setFromMatrixColumn(e6, 2).length();
    return this.x = t2, this.y = i2, this.z = n2, this;
  }
  setFromMatrixColumn(e6, t2) {
    return this.fromArray(e6.elements, 4 * t2);
  }
  setFromMatrix3Column(e6, t2) {
    return this.fromArray(e6.elements, 3 * t2);
  }
  setFromEuler(e6) {
    return this.x = e6._x, this.y = e6._y, this.z = e6._z, this;
  }
  setFromColor(e6) {
    return this.x = e6.r, this.y = e6.g, this.z = e6.b, this;
  }
  equals(e6) {
    return e6.x === this.x && e6.y === this.y && e6.z === this.z;
  }
  fromArray(e6, t2 = 0) {
    return this.x = e6[t2], this.y = e6[t2 + 1], this.z = e6[t2 + 2], this;
  }
  toArray(e6 = [], t2 = 0) {
    return e6[t2] = this.x, e6[t2 + 1] = this.y, e6[t2 + 2] = this.z, e6;
  }
  fromBufferAttribute(e6, t2) {
    return this.x = e6.getX(t2), this.y = e6.getY(t2), this.z = e6.getZ(t2), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this;
  }
  randomDirection() {
    const e6 = Math.random() * Math.PI * 2, t2 = 2 * Math.random() - 1, i2 = Math.sqrt(1 - t2 * t2);
    return this.x = i2 * Math.cos(e6), this.y = t2, this.z = i2 * Math.sin(e6), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z;
  }
}
const wn = new yn(), xn = new bn();
class Cn {
  constructor(e6 = new yn(1 / 0, 1 / 0, 1 / 0), t2 = new yn(-1 / 0, -1 / 0, -1 / 0)) {
    this.isBox3 = true, this.min = e6, this.max = t2;
  }
  set(e6, t2) {
    return this.min.copy(e6), this.max.copy(t2), this;
  }
  setFromArray(e6) {
    this.makeEmpty();
    for (let t2 = 0, i2 = e6.length; t2 < i2; t2 += 3) this.expandByPoint(En.fromArray(e6, t2));
    return this;
  }
  setFromBufferAttribute(e6) {
    this.makeEmpty();
    for (let t2 = 0, i2 = e6.count; t2 < i2; t2++) this.expandByPoint(En.fromBufferAttribute(e6, t2));
    return this;
  }
  setFromPoints(e6) {
    this.makeEmpty();
    for (let t2 = 0, i2 = e6.length; t2 < i2; t2++) this.expandByPoint(e6[t2]);
    return this;
  }
  setFromCenterAndSize(e6, t2) {
    const i2 = En.copy(t2).multiplyScalar(0.5);
    return this.min.copy(e6).sub(i2), this.max.copy(e6).add(i2), this;
  }
  setFromObject(e6, t2 = false) {
    return this.makeEmpty(), this.expandByObject(e6, t2);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e6) {
    return this.min.copy(e6.min), this.max.copy(e6.max), this;
  }
  makeEmpty() {
    return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this;
  }
  isEmpty() {
    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
  }
  getCenter(e6) {
    return this.isEmpty() ? e6.set(0, 0, 0) : e6.addVectors(this.min, this.max).multiplyScalar(0.5);
  }
  getSize(e6) {
    return this.isEmpty() ? e6.set(0, 0, 0) : e6.subVectors(this.max, this.min);
  }
  expandByPoint(e6) {
    return this.min.min(e6), this.max.max(e6), this;
  }
  expandByVector(e6) {
    return this.min.sub(e6), this.max.add(e6), this;
  }
  expandByScalar(e6) {
    return this.min.addScalar(-e6), this.max.addScalar(e6), this;
  }
  expandByObject(e6, t2 = false) {
    e6.updateWorldMatrix(false, false);
    const i2 = e6.geometry;
    if (void 0 !== i2) {
      const n3 = i2.getAttribute("position");
      if (true === t2 && void 0 !== n3 && true !== e6.isInstancedMesh) for (let t3 = 0, i3 = n3.count; t3 < i3; t3++) true === e6.isMesh ? e6.getVertexPosition(t3, En) : En.fromBufferAttribute(n3, t3), En.applyMatrix4(e6.matrixWorld), this.expandByPoint(En);
      else void 0 !== e6.boundingBox ? (null === e6.boundingBox && e6.computeBoundingBox(), Tn.copy(e6.boundingBox)) : (null === i2.boundingBox && i2.computeBoundingBox(), Tn.copy(i2.boundingBox)), Tn.applyMatrix4(e6.matrixWorld), this.union(Tn);
    }
    const n2 = e6.children;
    for (let e7 = 0, i3 = n2.length; e7 < i3; e7++) this.expandByObject(n2[e7], t2);
    return this;
  }
  containsPoint(e6) {
    return e6.x >= this.min.x && e6.x <= this.max.x && e6.y >= this.min.y && e6.y <= this.max.y && e6.z >= this.min.z && e6.z <= this.max.z;
  }
  containsBox(e6) {
    return this.min.x <= e6.min.x && e6.max.x <= this.max.x && this.min.y <= e6.min.y && e6.max.y <= this.max.y && this.min.z <= e6.min.z && e6.max.z <= this.max.z;
  }
  getParameter(e6, t2) {
    return t2.set((e6.x - this.min.x) / (this.max.x - this.min.x), (e6.y - this.min.y) / (this.max.y - this.min.y), (e6.z - this.min.z) / (this.max.z - this.min.z));
  }
  intersectsBox(e6) {
    return e6.max.x >= this.min.x && e6.min.x <= this.max.x && e6.max.y >= this.min.y && e6.min.y <= this.max.y && e6.max.z >= this.min.z && e6.min.z <= this.max.z;
  }
  intersectsSphere(e6) {
    return this.clampPoint(e6.center, En), En.distanceToSquared(e6.center) <= e6.radius * e6.radius;
  }
  intersectsPlane(e6) {
    let t2, i2;
    return e6.normal.x > 0 ? (t2 = e6.normal.x * this.min.x, i2 = e6.normal.x * this.max.x) : (t2 = e6.normal.x * this.max.x, i2 = e6.normal.x * this.min.x), e6.normal.y > 0 ? (t2 += e6.normal.y * this.min.y, i2 += e6.normal.y * this.max.y) : (t2 += e6.normal.y * this.max.y, i2 += e6.normal.y * this.min.y), e6.normal.z > 0 ? (t2 += e6.normal.z * this.min.z, i2 += e6.normal.z * this.max.z) : (t2 += e6.normal.z * this.max.z, i2 += e6.normal.z * this.min.z), t2 <= -e6.constant && i2 >= -e6.constant;
  }
  intersectsTriangle(e6) {
    if (this.isEmpty()) return false;
    this.getCenter(Dn), Ln.subVectors(this.max, Dn), In.subVectors(e6.a, Dn), Mn.subVectors(e6.b, Dn), Bn.subVectors(e6.c, Dn), Rn.subVectors(Mn, In), kn.subVectors(Bn, Mn), Pn.subVectors(In, Bn);
    let t2 = [0, -Rn.z, Rn.y, 0, -kn.z, kn.y, 0, -Pn.z, Pn.y, Rn.z, 0, -Rn.x, kn.z, 0, -kn.x, Pn.z, 0, -Pn.x, -Rn.y, Rn.x, 0, -kn.y, kn.x, 0, -Pn.y, Pn.x, 0];
    return !!On(t2, In, Mn, Bn, Ln) && (t2 = [1, 0, 0, 0, 1, 0, 0, 0, 1], !!On(t2, In, Mn, Bn, Ln) && (Fn.crossVectors(Rn, kn), t2 = [Fn.x, Fn.y, Fn.z], On(t2, In, Mn, Bn, Ln)));
  }
  clampPoint(e6, t2) {
    return t2.copy(e6).clamp(this.min, this.max);
  }
  distanceToPoint(e6) {
    return this.clampPoint(e6, En).distanceTo(e6);
  }
  getBoundingSphere(e6) {
    return this.isEmpty() ? e6.makeEmpty() : (this.getCenter(e6.center), e6.radius = 0.5 * this.getSize(En).length()), e6;
  }
  intersect(e6) {
    return this.min.max(e6.min), this.max.min(e6.max), this.isEmpty() && this.makeEmpty(), this;
  }
  union(e6) {
    return this.min.min(e6.min), this.max.max(e6.max), this;
  }
  applyMatrix4(e6) {
    return this.isEmpty() || (Sn[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e6), Sn[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e6), Sn[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e6), Sn[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e6), Sn[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e6), Sn[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e6), Sn[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e6), Sn[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e6), this.setFromPoints(Sn)), this;
  }
  translate(e6) {
    return this.min.add(e6), this.max.add(e6), this;
  }
  equals(e6) {
    return e6.min.equals(this.min) && e6.max.equals(this.max);
  }
}
const Sn = [new yn(), new yn(), new yn(), new yn(), new yn(), new yn(), new yn(), new yn()], En = new yn(), Tn = new Cn(), In = new yn(), Mn = new yn(), Bn = new yn(), Rn = new yn(), kn = new yn(), Pn = new yn(), Dn = new yn(), Ln = new yn(), Fn = new yn(), Nn = new yn();
function On(e6, t2, i2, n2, o2) {
  for (let r2 = 0, s2 = e6.length - 3; r2 <= s2; r2 += 3) {
    Nn.fromArray(e6, r2);
    const s3 = o2.x * Math.abs(Nn.x) + o2.y * Math.abs(Nn.y) + o2.z * Math.abs(Nn.z), a2 = t2.dot(Nn), l2 = i2.dot(Nn), c2 = n2.dot(Nn);
    if (Math.max(-Math.max(a2, l2, c2), Math.min(a2, l2, c2)) > s3) return false;
  }
  return true;
}
const Un = new Cn(), zn = new yn(), Hn = new yn();
class Qn {
  constructor(e6 = new yn(), t2 = -1) {
    this.isSphere = true, this.center = e6, this.radius = t2;
  }
  set(e6, t2) {
    return this.center.copy(e6), this.radius = t2, this;
  }
  setFromPoints(e6, t2) {
    const i2 = this.center;
    void 0 !== t2 ? i2.copy(t2) : Un.setFromPoints(e6).getCenter(i2);
    let n2 = 0;
    for (let t3 = 0, o2 = e6.length; t3 < o2; t3++) n2 = Math.max(n2, i2.distanceToSquared(e6[t3]));
    return this.radius = Math.sqrt(n2), this;
  }
  copy(e6) {
    return this.center.copy(e6.center), this.radius = e6.radius, this;
  }
  isEmpty() {
    return this.radius < 0;
  }
  makeEmpty() {
    return this.center.set(0, 0, 0), this.radius = -1, this;
  }
  containsPoint(e6) {
    return e6.distanceToSquared(this.center) <= this.radius * this.radius;
  }
  distanceToPoint(e6) {
    return e6.distanceTo(this.center) - this.radius;
  }
  intersectsSphere(e6) {
    const t2 = this.radius + e6.radius;
    return e6.center.distanceToSquared(this.center) <= t2 * t2;
  }
  intersectsBox(e6) {
    return e6.intersectsSphere(this);
  }
  intersectsPlane(e6) {
    return Math.abs(e6.distanceToPoint(this.center)) <= this.radius;
  }
  clampPoint(e6, t2) {
    const i2 = this.center.distanceToSquared(e6);
    return t2.copy(e6), i2 > this.radius * this.radius && (t2.sub(this.center).normalize(), t2.multiplyScalar(this.radius).add(this.center)), t2;
  }
  getBoundingBox(e6) {
    return this.isEmpty() ? (e6.makeEmpty(), e6) : (e6.set(this.center, this.center), e6.expandByScalar(this.radius), e6);
  }
  applyMatrix4(e6) {
    return this.center.applyMatrix4(e6), this.radius = this.radius * e6.getMaxScaleOnAxis(), this;
  }
  translate(e6) {
    return this.center.add(e6), this;
  }
  expandByPoint(e6) {
    if (this.isEmpty()) return this.center.copy(e6), this.radius = 0, this;
    zn.subVectors(e6, this.center);
    const t2 = zn.lengthSq();
    if (t2 > this.radius * this.radius) {
      const e7 = Math.sqrt(t2), i2 = 0.5 * (e7 - this.radius);
      this.center.addScaledVector(zn, i2 / e7), this.radius += i2;
    }
    return this;
  }
  union(e6) {
    return e6.isEmpty() ? this : this.isEmpty() ? (this.copy(e6), this) : (true === this.center.equals(e6.center) ? this.radius = Math.max(this.radius, e6.radius) : (Hn.subVectors(e6.center, this.center).setLength(e6.radius), this.expandByPoint(zn.copy(e6.center).add(Hn)), this.expandByPoint(zn.copy(e6.center).sub(Hn))), this);
  }
  equals(e6) {
    return e6.center.equals(this.center) && e6.radius === this.radius;
  }
  clone() {
    return new this.constructor().copy(this);
  }
}
const Vn = new yn(), Gn = new yn(), qn = new yn(), $n = new yn(), Wn = new yn(), jn = new yn(), Xn = new yn();
class Yn {
  constructor(e6 = new yn(), t2 = new yn(0, 0, -1)) {
    this.origin = e6, this.direction = t2;
  }
  set(e6, t2) {
    return this.origin.copy(e6), this.direction.copy(t2), this;
  }
  copy(e6) {
    return this.origin.copy(e6.origin), this.direction.copy(e6.direction), this;
  }
  at(e6, t2) {
    return t2.copy(this.origin).addScaledVector(this.direction, e6);
  }
  lookAt(e6) {
    return this.direction.copy(e6).sub(this.origin).normalize(), this;
  }
  recast(e6) {
    return this.origin.copy(this.at(e6, Vn)), this;
  }
  closestPointToPoint(e6, t2) {
    t2.subVectors(e6, this.origin);
    const i2 = t2.dot(this.direction);
    return i2 < 0 ? t2.copy(this.origin) : t2.copy(this.origin).addScaledVector(this.direction, i2);
  }
  distanceToPoint(e6) {
    return Math.sqrt(this.distanceSqToPoint(e6));
  }
  distanceSqToPoint(e6) {
    const t2 = Vn.subVectors(e6, this.origin).dot(this.direction);
    return t2 < 0 ? this.origin.distanceToSquared(e6) : (Vn.copy(this.origin).addScaledVector(this.direction, t2), Vn.distanceToSquared(e6));
  }
  distanceSqToSegment(e6, t2, i2, n2) {
    Gn.copy(e6).add(t2).multiplyScalar(0.5), qn.copy(t2).sub(e6).normalize(), $n.copy(this.origin).sub(Gn);
    const o2 = 0.5 * e6.distanceTo(t2), r2 = -this.direction.dot(qn), s2 = $n.dot(this.direction), a2 = -$n.dot(qn), l2 = $n.lengthSq(), c2 = Math.abs(1 - r2 * r2);
    let h2, u2, d2, p2;
    if (c2 > 0) if (h2 = r2 * a2 - s2, u2 = r2 * s2 - a2, p2 = o2 * c2, h2 >= 0) if (u2 >= -p2) if (u2 <= p2) {
      const e7 = 1 / c2;
      h2 *= e7, u2 *= e7, d2 = h2 * (h2 + r2 * u2 + 2 * s2) + u2 * (r2 * h2 + u2 + 2 * a2) + l2;
    } else u2 = o2, h2 = Math.max(0, -(r2 * u2 + s2)), d2 = -h2 * h2 + u2 * (u2 + 2 * a2) + l2;
    else u2 = -o2, h2 = Math.max(0, -(r2 * u2 + s2)), d2 = -h2 * h2 + u2 * (u2 + 2 * a2) + l2;
    else u2 <= -p2 ? (h2 = Math.max(0, -(-r2 * o2 + s2)), u2 = h2 > 0 ? -o2 : Math.min(Math.max(-o2, -a2), o2), d2 = -h2 * h2 + u2 * (u2 + 2 * a2) + l2) : u2 <= p2 ? (h2 = 0, u2 = Math.min(Math.max(-o2, -a2), o2), d2 = u2 * (u2 + 2 * a2) + l2) : (h2 = Math.max(0, -(r2 * o2 + s2)), u2 = h2 > 0 ? o2 : Math.min(Math.max(-o2, -a2), o2), d2 = -h2 * h2 + u2 * (u2 + 2 * a2) + l2);
    else u2 = r2 > 0 ? -o2 : o2, h2 = Math.max(0, -(r2 * u2 + s2)), d2 = -h2 * h2 + u2 * (u2 + 2 * a2) + l2;
    return i2 && i2.copy(this.origin).addScaledVector(this.direction, h2), n2 && n2.copy(Gn).addScaledVector(qn, u2), d2;
  }
  intersectSphere(e6, t2) {
    Vn.subVectors(e6.center, this.origin);
    const i2 = Vn.dot(this.direction), n2 = Vn.dot(Vn) - i2 * i2, o2 = e6.radius * e6.radius;
    if (n2 > o2) return null;
    const r2 = Math.sqrt(o2 - n2), s2 = i2 - r2, a2 = i2 + r2;
    return a2 < 0 ? null : s2 < 0 ? this.at(a2, t2) : this.at(s2, t2);
  }
  intersectsSphere(e6) {
    return this.distanceSqToPoint(e6.center) <= e6.radius * e6.radius;
  }
  distanceToPlane(e6) {
    const t2 = e6.normal.dot(this.direction);
    if (0 === t2) return 0 === e6.distanceToPoint(this.origin) ? 0 : null;
    const i2 = -(this.origin.dot(e6.normal) + e6.constant) / t2;
    return i2 >= 0 ? i2 : null;
  }
  intersectPlane(e6, t2) {
    const i2 = this.distanceToPlane(e6);
    return null === i2 ? null : this.at(i2, t2);
  }
  intersectsPlane(e6) {
    const t2 = e6.distanceToPoint(this.origin);
    if (0 === t2) return true;
    return e6.normal.dot(this.direction) * t2 < 0;
  }
  intersectBox(e6, t2) {
    let i2, n2, o2, r2, s2, a2;
    const l2 = 1 / this.direction.x, c2 = 1 / this.direction.y, h2 = 1 / this.direction.z, u2 = this.origin;
    return l2 >= 0 ? (i2 = (e6.min.x - u2.x) * l2, n2 = (e6.max.x - u2.x) * l2) : (i2 = (e6.max.x - u2.x) * l2, n2 = (e6.min.x - u2.x) * l2), c2 >= 0 ? (o2 = (e6.min.y - u2.y) * c2, r2 = (e6.max.y - u2.y) * c2) : (o2 = (e6.max.y - u2.y) * c2, r2 = (e6.min.y - u2.y) * c2), i2 > r2 || o2 > n2 ? null : ((o2 > i2 || isNaN(i2)) && (i2 = o2), (r2 < n2 || isNaN(n2)) && (n2 = r2), h2 >= 0 ? (s2 = (e6.min.z - u2.z) * h2, a2 = (e6.max.z - u2.z) * h2) : (s2 = (e6.max.z - u2.z) * h2, a2 = (e6.min.z - u2.z) * h2), i2 > a2 || s2 > n2 ? null : ((s2 > i2 || i2 != i2) && (i2 = s2), (a2 < n2 || n2 != n2) && (n2 = a2), n2 < 0 ? null : this.at(i2 >= 0 ? i2 : n2, t2)));
  }
  intersectsBox(e6) {
    return null !== this.intersectBox(e6, Vn);
  }
  intersectTriangle(e6, t2, i2, n2, o2) {
    Wn.subVectors(t2, e6), jn.subVectors(i2, e6), Xn.crossVectors(Wn, jn);
    let r2, s2 = this.direction.dot(Xn);
    if (s2 > 0) {
      if (n2) return null;
      r2 = 1;
    } else {
      if (!(s2 < 0)) return null;
      r2 = -1, s2 = -s2;
    }
    $n.subVectors(this.origin, e6);
    const a2 = r2 * this.direction.dot(jn.crossVectors($n, jn));
    if (a2 < 0) return null;
    const l2 = r2 * this.direction.dot(Wn.cross($n));
    if (l2 < 0) return null;
    if (a2 + l2 > s2) return null;
    const c2 = -r2 * $n.dot(Xn);
    return c2 < 0 ? null : this.at(c2 / s2, o2);
  }
  applyMatrix4(e6) {
    return this.origin.applyMatrix4(e6), this.direction.transformDirection(e6), this;
  }
  equals(e6) {
    return e6.origin.equals(this.origin) && e6.direction.equals(this.direction);
  }
  clone() {
    return new this.constructor().copy(this);
  }
}
class Kn {
  constructor(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2, d2, p2, _2, g2) {
    Kn.prototype.isMatrix4 = true, this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], void 0 !== e6 && this.set(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2, d2, p2, _2, g2);
  }
  set(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2, d2, p2, _2, g2) {
    const m2 = this.elements;
    return m2[0] = e6, m2[4] = t2, m2[8] = i2, m2[12] = n2, m2[1] = o2, m2[5] = r2, m2[9] = s2, m2[13] = a2, m2[2] = l2, m2[6] = c2, m2[10] = h2, m2[14] = u2, m2[3] = d2, m2[7] = p2, m2[11] = _2, m2[15] = g2, this;
  }
  identity() {
    return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
  }
  clone() {
    return new Kn().fromArray(this.elements);
  }
  copy(e6) {
    const t2 = this.elements, i2 = e6.elements;
    return t2[0] = i2[0], t2[1] = i2[1], t2[2] = i2[2], t2[3] = i2[3], t2[4] = i2[4], t2[5] = i2[5], t2[6] = i2[6], t2[7] = i2[7], t2[8] = i2[8], t2[9] = i2[9], t2[10] = i2[10], t2[11] = i2[11], t2[12] = i2[12], t2[13] = i2[13], t2[14] = i2[14], t2[15] = i2[15], this;
  }
  copyPosition(e6) {
    const t2 = this.elements, i2 = e6.elements;
    return t2[12] = i2[12], t2[13] = i2[13], t2[14] = i2[14], this;
  }
  setFromMatrix3(e6) {
    const t2 = e6.elements;
    return this.set(t2[0], t2[3], t2[6], 0, t2[1], t2[4], t2[7], 0, t2[2], t2[5], t2[8], 0, 0, 0, 0, 1), this;
  }
  extractBasis(e6, t2, i2) {
    return e6.setFromMatrixColumn(this, 0), t2.setFromMatrixColumn(this, 1), i2.setFromMatrixColumn(this, 2), this;
  }
  makeBasis(e6, t2, i2) {
    return this.set(e6.x, t2.x, i2.x, 0, e6.y, t2.y, i2.y, 0, e6.z, t2.z, i2.z, 0, 0, 0, 0, 1), this;
  }
  extractRotation(e6) {
    const t2 = this.elements, i2 = e6.elements, n2 = 1 / Zn.setFromMatrixColumn(e6, 0).length(), o2 = 1 / Zn.setFromMatrixColumn(e6, 1).length(), r2 = 1 / Zn.setFromMatrixColumn(e6, 2).length();
    return t2[0] = i2[0] * n2, t2[1] = i2[1] * n2, t2[2] = i2[2] * n2, t2[3] = 0, t2[4] = i2[4] * o2, t2[5] = i2[5] * o2, t2[6] = i2[6] * o2, t2[7] = 0, t2[8] = i2[8] * r2, t2[9] = i2[9] * r2, t2[10] = i2[10] * r2, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0, t2[15] = 1, this;
  }
  makeRotationFromEuler(e6) {
    const t2 = this.elements, i2 = e6.x, n2 = e6.y, o2 = e6.z, r2 = Math.cos(i2), s2 = Math.sin(i2), a2 = Math.cos(n2), l2 = Math.sin(n2), c2 = Math.cos(o2), h2 = Math.sin(o2);
    if ("XYZ" === e6.order) {
      const e7 = r2 * c2, i3 = r2 * h2, n3 = s2 * c2, o3 = s2 * h2;
      t2[0] = a2 * c2, t2[4] = -a2 * h2, t2[8] = l2, t2[1] = i3 + n3 * l2, t2[5] = e7 - o3 * l2, t2[9] = -s2 * a2, t2[2] = o3 - e7 * l2, t2[6] = n3 + i3 * l2, t2[10] = r2 * a2;
    } else if ("YXZ" === e6.order) {
      const e7 = a2 * c2, i3 = a2 * h2, n3 = l2 * c2, o3 = l2 * h2;
      t2[0] = e7 + o3 * s2, t2[4] = n3 * s2 - i3, t2[8] = r2 * l2, t2[1] = r2 * h2, t2[5] = r2 * c2, t2[9] = -s2, t2[2] = i3 * s2 - n3, t2[6] = o3 + e7 * s2, t2[10] = r2 * a2;
    } else if ("ZXY" === e6.order) {
      const e7 = a2 * c2, i3 = a2 * h2, n3 = l2 * c2, o3 = l2 * h2;
      t2[0] = e7 - o3 * s2, t2[4] = -r2 * h2, t2[8] = n3 + i3 * s2, t2[1] = i3 + n3 * s2, t2[5] = r2 * c2, t2[9] = o3 - e7 * s2, t2[2] = -r2 * l2, t2[6] = s2, t2[10] = r2 * a2;
    } else if ("ZYX" === e6.order) {
      const e7 = r2 * c2, i3 = r2 * h2, n3 = s2 * c2, o3 = s2 * h2;
      t2[0] = a2 * c2, t2[4] = n3 * l2 - i3, t2[8] = e7 * l2 + o3, t2[1] = a2 * h2, t2[5] = o3 * l2 + e7, t2[9] = i3 * l2 - n3, t2[2] = -l2, t2[6] = s2 * a2, t2[10] = r2 * a2;
    } else if ("YZX" === e6.order) {
      const e7 = r2 * a2, i3 = r2 * l2, n3 = s2 * a2, o3 = s2 * l2;
      t2[0] = a2 * c2, t2[4] = o3 - e7 * h2, t2[8] = n3 * h2 + i3, t2[1] = h2, t2[5] = r2 * c2, t2[9] = -s2 * c2, t2[2] = -l2 * c2, t2[6] = i3 * h2 + n3, t2[10] = e7 - o3 * h2;
    } else if ("XZY" === e6.order) {
      const e7 = r2 * a2, i3 = r2 * l2, n3 = s2 * a2, o3 = s2 * l2;
      t2[0] = a2 * c2, t2[4] = -h2, t2[8] = l2 * c2, t2[1] = e7 * h2 + o3, t2[5] = r2 * c2, t2[9] = i3 * h2 - n3, t2[2] = n3 * h2 - i3, t2[6] = s2 * c2, t2[10] = o3 * h2 + e7;
    }
    return t2[3] = 0, t2[7] = 0, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0, t2[15] = 1, this;
  }
  makeRotationFromQuaternion(e6) {
    return this.compose(eo, e6, to);
  }
  lookAt(e6, t2, i2) {
    const n2 = this.elements;
    return oo.subVectors(e6, t2), 0 === oo.lengthSq() && (oo.z = 1), oo.normalize(), io.crossVectors(i2, oo), 0 === io.lengthSq() && (1 === Math.abs(i2.z) ? oo.x += 1e-4 : oo.z += 1e-4, oo.normalize(), io.crossVectors(i2, oo)), io.normalize(), no.crossVectors(oo, io), n2[0] = io.x, n2[4] = no.x, n2[8] = oo.x, n2[1] = io.y, n2[5] = no.y, n2[9] = oo.y, n2[2] = io.z, n2[6] = no.z, n2[10] = oo.z, this;
  }
  multiply(e6) {
    return this.multiplyMatrices(this, e6);
  }
  premultiply(e6) {
    return this.multiplyMatrices(e6, this);
  }
  multiplyMatrices(e6, t2) {
    const i2 = e6.elements, n2 = t2.elements, o2 = this.elements, r2 = i2[0], s2 = i2[4], a2 = i2[8], l2 = i2[12], c2 = i2[1], h2 = i2[5], u2 = i2[9], d2 = i2[13], p2 = i2[2], _2 = i2[6], g2 = i2[10], m2 = i2[14], f2 = i2[3], v2 = i2[7], A2 = i2[11], b2 = i2[15], y2 = n2[0], w2 = n2[4], x2 = n2[8], C2 = n2[12], S2 = n2[1], E2 = n2[5], T2 = n2[9], I2 = n2[13], M2 = n2[2], B2 = n2[6], R2 = n2[10], k2 = n2[14], P2 = n2[3], D2 = n2[7], L2 = n2[11], F2 = n2[15];
    return o2[0] = r2 * y2 + s2 * S2 + a2 * M2 + l2 * P2, o2[4] = r2 * w2 + s2 * E2 + a2 * B2 + l2 * D2, o2[8] = r2 * x2 + s2 * T2 + a2 * R2 + l2 * L2, o2[12] = r2 * C2 + s2 * I2 + a2 * k2 + l2 * F2, o2[1] = c2 * y2 + h2 * S2 + u2 * M2 + d2 * P2, o2[5] = c2 * w2 + h2 * E2 + u2 * B2 + d2 * D2, o2[9] = c2 * x2 + h2 * T2 + u2 * R2 + d2 * L2, o2[13] = c2 * C2 + h2 * I2 + u2 * k2 + d2 * F2, o2[2] = p2 * y2 + _2 * S2 + g2 * M2 + m2 * P2, o2[6] = p2 * w2 + _2 * E2 + g2 * B2 + m2 * D2, o2[10] = p2 * x2 + _2 * T2 + g2 * R2 + m2 * L2, o2[14] = p2 * C2 + _2 * I2 + g2 * k2 + m2 * F2, o2[3] = f2 * y2 + v2 * S2 + A2 * M2 + b2 * P2, o2[7] = f2 * w2 + v2 * E2 + A2 * B2 + b2 * D2, o2[11] = f2 * x2 + v2 * T2 + A2 * R2 + b2 * L2, o2[15] = f2 * C2 + v2 * I2 + A2 * k2 + b2 * F2, this;
  }
  multiplyScalar(e6) {
    const t2 = this.elements;
    return t2[0] *= e6, t2[4] *= e6, t2[8] *= e6, t2[12] *= e6, t2[1] *= e6, t2[5] *= e6, t2[9] *= e6, t2[13] *= e6, t2[2] *= e6, t2[6] *= e6, t2[10] *= e6, t2[14] *= e6, t2[3] *= e6, t2[7] *= e6, t2[11] *= e6, t2[15] *= e6, this;
  }
  determinant() {
    const e6 = this.elements, t2 = e6[0], i2 = e6[4], n2 = e6[8], o2 = e6[12], r2 = e6[1], s2 = e6[5], a2 = e6[9], l2 = e6[13], c2 = e6[2], h2 = e6[6], u2 = e6[10], d2 = e6[14];
    return e6[3] * (+o2 * a2 * h2 - n2 * l2 * h2 - o2 * s2 * u2 + i2 * l2 * u2 + n2 * s2 * d2 - i2 * a2 * d2) + e6[7] * (+t2 * a2 * d2 - t2 * l2 * u2 + o2 * r2 * u2 - n2 * r2 * d2 + n2 * l2 * c2 - o2 * a2 * c2) + e6[11] * (+t2 * l2 * h2 - t2 * s2 * d2 - o2 * r2 * h2 + i2 * r2 * d2 + o2 * s2 * c2 - i2 * l2 * c2) + e6[15] * (-n2 * s2 * c2 - t2 * a2 * h2 + t2 * s2 * u2 + n2 * r2 * h2 - i2 * r2 * u2 + i2 * a2 * c2);
  }
  transpose() {
    const e6 = this.elements;
    let t2;
    return t2 = e6[1], e6[1] = e6[4], e6[4] = t2, t2 = e6[2], e6[2] = e6[8], e6[8] = t2, t2 = e6[6], e6[6] = e6[9], e6[9] = t2, t2 = e6[3], e6[3] = e6[12], e6[12] = t2, t2 = e6[7], e6[7] = e6[13], e6[13] = t2, t2 = e6[11], e6[11] = e6[14], e6[14] = t2, this;
  }
  setPosition(e6, t2, i2) {
    const n2 = this.elements;
    return e6.isVector3 ? (n2[12] = e6.x, n2[13] = e6.y, n2[14] = e6.z) : (n2[12] = e6, n2[13] = t2, n2[14] = i2), this;
  }
  invert() {
    const e6 = this.elements, t2 = e6[0], i2 = e6[1], n2 = e6[2], o2 = e6[3], r2 = e6[4], s2 = e6[5], a2 = e6[6], l2 = e6[7], c2 = e6[8], h2 = e6[9], u2 = e6[10], d2 = e6[11], p2 = e6[12], _2 = e6[13], g2 = e6[14], m2 = e6[15], f2 = h2 * g2 * l2 - _2 * u2 * l2 + _2 * a2 * d2 - s2 * g2 * d2 - h2 * a2 * m2 + s2 * u2 * m2, v2 = p2 * u2 * l2 - c2 * g2 * l2 - p2 * a2 * d2 + r2 * g2 * d2 + c2 * a2 * m2 - r2 * u2 * m2, A2 = c2 * _2 * l2 - p2 * h2 * l2 + p2 * s2 * d2 - r2 * _2 * d2 - c2 * s2 * m2 + r2 * h2 * m2, b2 = p2 * h2 * a2 - c2 * _2 * a2 - p2 * s2 * u2 + r2 * _2 * u2 + c2 * s2 * g2 - r2 * h2 * g2, y2 = t2 * f2 + i2 * v2 + n2 * A2 + o2 * b2;
    if (0 === y2) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    const w2 = 1 / y2;
    return e6[0] = f2 * w2, e6[1] = (_2 * u2 * o2 - h2 * g2 * o2 - _2 * n2 * d2 + i2 * g2 * d2 + h2 * n2 * m2 - i2 * u2 * m2) * w2, e6[2] = (s2 * g2 * o2 - _2 * a2 * o2 + _2 * n2 * l2 - i2 * g2 * l2 - s2 * n2 * m2 + i2 * a2 * m2) * w2, e6[3] = (h2 * a2 * o2 - s2 * u2 * o2 - h2 * n2 * l2 + i2 * u2 * l2 + s2 * n2 * d2 - i2 * a2 * d2) * w2, e6[4] = v2 * w2, e6[5] = (c2 * g2 * o2 - p2 * u2 * o2 + p2 * n2 * d2 - t2 * g2 * d2 - c2 * n2 * m2 + t2 * u2 * m2) * w2, e6[6] = (p2 * a2 * o2 - r2 * g2 * o2 - p2 * n2 * l2 + t2 * g2 * l2 + r2 * n2 * m2 - t2 * a2 * m2) * w2, e6[7] = (r2 * u2 * o2 - c2 * a2 * o2 + c2 * n2 * l2 - t2 * u2 * l2 - r2 * n2 * d2 + t2 * a2 * d2) * w2, e6[8] = A2 * w2, e6[9] = (p2 * h2 * o2 - c2 * _2 * o2 - p2 * i2 * d2 + t2 * _2 * d2 + c2 * i2 * m2 - t2 * h2 * m2) * w2, e6[10] = (r2 * _2 * o2 - p2 * s2 * o2 + p2 * i2 * l2 - t2 * _2 * l2 - r2 * i2 * m2 + t2 * s2 * m2) * w2, e6[11] = (c2 * s2 * o2 - r2 * h2 * o2 - c2 * i2 * l2 + t2 * h2 * l2 + r2 * i2 * d2 - t2 * s2 * d2) * w2, e6[12] = b2 * w2, e6[13] = (c2 * _2 * n2 - p2 * h2 * n2 + p2 * i2 * u2 - t2 * _2 * u2 - c2 * i2 * g2 + t2 * h2 * g2) * w2, e6[14] = (p2 * s2 * n2 - r2 * _2 * n2 - p2 * i2 * a2 + t2 * _2 * a2 + r2 * i2 * g2 - t2 * s2 * g2) * w2, e6[15] = (r2 * h2 * n2 - c2 * s2 * n2 + c2 * i2 * a2 - t2 * h2 * a2 - r2 * i2 * u2 + t2 * s2 * u2) * w2, this;
  }
  scale(e6) {
    const t2 = this.elements, i2 = e6.x, n2 = e6.y, o2 = e6.z;
    return t2[0] *= i2, t2[4] *= n2, t2[8] *= o2, t2[1] *= i2, t2[5] *= n2, t2[9] *= o2, t2[2] *= i2, t2[6] *= n2, t2[10] *= o2, t2[3] *= i2, t2[7] *= n2, t2[11] *= o2, this;
  }
  getMaxScaleOnAxis() {
    const e6 = this.elements, t2 = e6[0] * e6[0] + e6[1] * e6[1] + e6[2] * e6[2], i2 = e6[4] * e6[4] + e6[5] * e6[5] + e6[6] * e6[6], n2 = e6[8] * e6[8] + e6[9] * e6[9] + e6[10] * e6[10];
    return Math.sqrt(Math.max(t2, i2, n2));
  }
  makeTranslation(e6, t2, i2) {
    return e6.isVector3 ? this.set(1, 0, 0, e6.x, 0, 1, 0, e6.y, 0, 0, 1, e6.z, 0, 0, 0, 1) : this.set(1, 0, 0, e6, 0, 1, 0, t2, 0, 0, 1, i2, 0, 0, 0, 1), this;
  }
  makeRotationX(e6) {
    const t2 = Math.cos(e6), i2 = Math.sin(e6);
    return this.set(1, 0, 0, 0, 0, t2, -i2, 0, 0, i2, t2, 0, 0, 0, 0, 1), this;
  }
  makeRotationY(e6) {
    const t2 = Math.cos(e6), i2 = Math.sin(e6);
    return this.set(t2, 0, i2, 0, 0, 1, 0, 0, -i2, 0, t2, 0, 0, 0, 0, 1), this;
  }
  makeRotationZ(e6) {
    const t2 = Math.cos(e6), i2 = Math.sin(e6);
    return this.set(t2, -i2, 0, 0, i2, t2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
  }
  makeRotationAxis(e6, t2) {
    const i2 = Math.cos(t2), n2 = Math.sin(t2), o2 = 1 - i2, r2 = e6.x, s2 = e6.y, a2 = e6.z, l2 = o2 * r2, c2 = o2 * s2;
    return this.set(l2 * r2 + i2, l2 * s2 - n2 * a2, l2 * a2 + n2 * s2, 0, l2 * s2 + n2 * a2, c2 * s2 + i2, c2 * a2 - n2 * r2, 0, l2 * a2 - n2 * s2, c2 * a2 + n2 * r2, o2 * a2 * a2 + i2, 0, 0, 0, 0, 1), this;
  }
  makeScale(e6, t2, i2) {
    return this.set(e6, 0, 0, 0, 0, t2, 0, 0, 0, 0, i2, 0, 0, 0, 0, 1), this;
  }
  makeShear(e6, t2, i2, n2, o2, r2) {
    return this.set(1, i2, o2, 0, e6, 1, r2, 0, t2, n2, 1, 0, 0, 0, 0, 1), this;
  }
  compose(e6, t2, i2) {
    const n2 = this.elements, o2 = t2._x, r2 = t2._y, s2 = t2._z, a2 = t2._w, l2 = o2 + o2, c2 = r2 + r2, h2 = s2 + s2, u2 = o2 * l2, d2 = o2 * c2, p2 = o2 * h2, _2 = r2 * c2, g2 = r2 * h2, m2 = s2 * h2, f2 = a2 * l2, v2 = a2 * c2, A2 = a2 * h2, b2 = i2.x, y2 = i2.y, w2 = i2.z;
    return n2[0] = (1 - (_2 + m2)) * b2, n2[1] = (d2 + A2) * b2, n2[2] = (p2 - v2) * b2, n2[3] = 0, n2[4] = (d2 - A2) * y2, n2[5] = (1 - (u2 + m2)) * y2, n2[6] = (g2 + f2) * y2, n2[7] = 0, n2[8] = (p2 + v2) * w2, n2[9] = (g2 - f2) * w2, n2[10] = (1 - (u2 + _2)) * w2, n2[11] = 0, n2[12] = e6.x, n2[13] = e6.y, n2[14] = e6.z, n2[15] = 1, this;
  }
  decompose(e6, t2, i2) {
    const n2 = this.elements;
    let o2 = Zn.set(n2[0], n2[1], n2[2]).length();
    const r2 = Zn.set(n2[4], n2[5], n2[6]).length(), s2 = Zn.set(n2[8], n2[9], n2[10]).length();
    this.determinant() < 0 && (o2 = -o2), e6.x = n2[12], e6.y = n2[13], e6.z = n2[14], Jn.copy(this);
    const a2 = 1 / o2, l2 = 1 / r2, c2 = 1 / s2;
    return Jn.elements[0] *= a2, Jn.elements[1] *= a2, Jn.elements[2] *= a2, Jn.elements[4] *= l2, Jn.elements[5] *= l2, Jn.elements[6] *= l2, Jn.elements[8] *= c2, Jn.elements[9] *= c2, Jn.elements[10] *= c2, t2.setFromRotationMatrix(Jn), i2.x = o2, i2.y = r2, i2.z = s2, this;
  }
  makePerspective(e6, t2, i2, n2, o2, r2, s2 = 2e3) {
    const a2 = this.elements, l2 = 2 * o2 / (t2 - e6), c2 = 2 * o2 / (i2 - n2), h2 = (t2 + e6) / (t2 - e6), u2 = (i2 + n2) / (i2 - n2);
    let d2, p2;
    if (s2 === ki) d2 = -(r2 + o2) / (r2 - o2), p2 = -2 * r2 * o2 / (r2 - o2);
    else {
      if (s2 !== Pi) throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: " + s2);
      d2 = -r2 / (r2 - o2), p2 = -r2 * o2 / (r2 - o2);
    }
    return a2[0] = l2, a2[4] = 0, a2[8] = h2, a2[12] = 0, a2[1] = 0, a2[5] = c2, a2[9] = u2, a2[13] = 0, a2[2] = 0, a2[6] = 0, a2[10] = d2, a2[14] = p2, a2[3] = 0, a2[7] = 0, a2[11] = -1, a2[15] = 0, this;
  }
  makeOrthographic(e6, t2, i2, n2, o2, r2, s2 = 2e3) {
    const a2 = this.elements, l2 = 1 / (t2 - e6), c2 = 1 / (i2 - n2), h2 = 1 / (r2 - o2), u2 = (t2 + e6) * l2, d2 = (i2 + n2) * c2;
    let p2, _2;
    if (s2 === ki) p2 = (r2 + o2) * h2, _2 = -2 * h2;
    else {
      if (s2 !== Pi) throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: " + s2);
      p2 = o2 * h2, _2 = -1 * h2;
    }
    return a2[0] = 2 * l2, a2[4] = 0, a2[8] = 0, a2[12] = -u2, a2[1] = 0, a2[5] = 2 * c2, a2[9] = 0, a2[13] = -d2, a2[2] = 0, a2[6] = 0, a2[10] = _2, a2[14] = -p2, a2[3] = 0, a2[7] = 0, a2[11] = 0, a2[15] = 1, this;
  }
  equals(e6) {
    const t2 = this.elements, i2 = e6.elements;
    for (let e7 = 0; e7 < 16; e7++) if (t2[e7] !== i2[e7]) return false;
    return true;
  }
  fromArray(e6, t2 = 0) {
    for (let i2 = 0; i2 < 16; i2++) this.elements[i2] = e6[i2 + t2];
    return this;
  }
  toArray(e6 = [], t2 = 0) {
    const i2 = this.elements;
    return e6[t2] = i2[0], e6[t2 + 1] = i2[1], e6[t2 + 2] = i2[2], e6[t2 + 3] = i2[3], e6[t2 + 4] = i2[4], e6[t2 + 5] = i2[5], e6[t2 + 6] = i2[6], e6[t2 + 7] = i2[7], e6[t2 + 8] = i2[8], e6[t2 + 9] = i2[9], e6[t2 + 10] = i2[10], e6[t2 + 11] = i2[11], e6[t2 + 12] = i2[12], e6[t2 + 13] = i2[13], e6[t2 + 14] = i2[14], e6[t2 + 15] = i2[15], e6;
  }
}
const Zn = new yn(), Jn = new Kn(), eo = new yn(0, 0, 0), to = new yn(1, 1, 1), io = new yn(), no = new yn(), oo = new yn(), ro = new Kn(), so = new bn();
class ao {
  constructor(e6 = 0, t2 = 0, i2 = 0, n2 = ao.DEFAULT_ORDER) {
    this.isEuler = true, this._x = e6, this._y = t2, this._z = i2, this._order = n2;
  }
  get x() {
    return this._x;
  }
  set x(e6) {
    this._x = e6, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e6) {
    this._y = e6, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e6) {
    this._z = e6, this._onChangeCallback();
  }
  get order() {
    return this._order;
  }
  set order(e6) {
    this._order = e6, this._onChangeCallback();
  }
  set(e6, t2, i2, n2 = this._order) {
    return this._x = e6, this._y = t2, this._z = i2, this._order = n2, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._order);
  }
  copy(e6) {
    return this._x = e6._x, this._y = e6._y, this._z = e6._z, this._order = e6._order, this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e6, t2 = this._order, i2 = true) {
    const n2 = e6.elements, o2 = n2[0], r2 = n2[4], s2 = n2[8], a2 = n2[1], l2 = n2[5], c2 = n2[9], h2 = n2[2], u2 = n2[6], d2 = n2[10];
    switch (t2) {
      case "XYZ":
        this._y = Math.asin(zi(s2, -1, 1)), Math.abs(s2) < 0.9999999 ? (this._x = Math.atan2(-c2, d2), this._z = Math.atan2(-r2, o2)) : (this._x = Math.atan2(u2, l2), this._z = 0);
        break;
      case "YXZ":
        this._x = Math.asin(-zi(c2, -1, 1)), Math.abs(c2) < 0.9999999 ? (this._y = Math.atan2(s2, d2), this._z = Math.atan2(a2, l2)) : (this._y = Math.atan2(-h2, o2), this._z = 0);
        break;
      case "ZXY":
        this._x = Math.asin(zi(u2, -1, 1)), Math.abs(u2) < 0.9999999 ? (this._y = Math.atan2(-h2, d2), this._z = Math.atan2(-r2, l2)) : (this._y = 0, this._z = Math.atan2(a2, o2));
        break;
      case "ZYX":
        this._y = Math.asin(-zi(h2, -1, 1)), Math.abs(h2) < 0.9999999 ? (this._x = Math.atan2(u2, d2), this._z = Math.atan2(a2, o2)) : (this._x = 0, this._z = Math.atan2(-r2, l2));
        break;
      case "YZX":
        this._z = Math.asin(zi(a2, -1, 1)), Math.abs(a2) < 0.9999999 ? (this._x = Math.atan2(-c2, l2), this._y = Math.atan2(-h2, o2)) : (this._x = 0, this._y = Math.atan2(s2, d2));
        break;
      case "XZY":
        this._z = Math.asin(-zi(r2, -1, 1)), Math.abs(r2) < 0.9999999 ? (this._x = Math.atan2(u2, l2), this._y = Math.atan2(s2, o2)) : (this._x = Math.atan2(-c2, d2), this._y = 0);
        break;
      default:
        console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " + t2);
    }
    return this._order = t2, true === i2 && this._onChangeCallback(), this;
  }
  setFromQuaternion(e6, t2, i2) {
    return ro.makeRotationFromQuaternion(e6), this.setFromRotationMatrix(ro, t2, i2);
  }
  setFromVector3(e6, t2 = this._order) {
    return this.set(e6.x, e6.y, e6.z, t2);
  }
  reorder(e6) {
    return so.setFromEuler(this), this.setFromQuaternion(so, e6);
  }
  equals(e6) {
    return e6._x === this._x && e6._y === this._y && e6._z === this._z && e6._order === this._order;
  }
  fromArray(e6) {
    return this._x = e6[0], this._y = e6[1], this._z = e6[2], void 0 !== e6[3] && (this._order = e6[3]), this._onChangeCallback(), this;
  }
  toArray(e6 = [], t2 = 0) {
    return e6[t2] = this._x, e6[t2 + 1] = this._y, e6[t2 + 2] = this._z, e6[t2 + 3] = this._order, e6;
  }
  _onChange(e6) {
    return this._onChangeCallback = e6, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._order;
  }
}
ao.DEFAULT_ORDER = "XYZ";
class lo {
  constructor() {
    this.mask = 1;
  }
  set(e6) {
    this.mask = 1 << e6 >>> 0;
  }
  enable(e6) {
    this.mask |= 1 << e6;
  }
  enableAll() {
    this.mask = -1;
  }
  toggle(e6) {
    this.mask ^= 1 << e6;
  }
  disable(e6) {
    this.mask &= ~(1 << e6);
  }
  disableAll() {
    this.mask = 0;
  }
  test(e6) {
    return !!(this.mask & e6.mask);
  }
  isEnabled(e6) {
    return !!(this.mask & 1 << e6);
  }
}
let co = 0;
const ho = new yn(), uo = new bn(), po = new Kn(), _o = new yn(), go = new yn(), mo = new yn(), fo = new bn(), vo = new yn(1, 0, 0), Ao = new yn(0, 1, 0), bo = new yn(0, 0, 1), yo = { type: "added" }, wo = { type: "removed" }, xo = { type: "childadded", child: null }, Co = { type: "childremoved", child: null };
class So extends Di {
  constructor() {
    super(), this.isObject3D = true, Object.defineProperty(this, "id", { value: co++ }), this.uuid = Ui(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = So.DEFAULT_UP.clone();
    const e6 = new yn(), t2 = new ao(), i2 = new bn(), n2 = new yn(1, 1, 1);
    t2._onChange(function() {
      i2.setFromEuler(t2, false);
    }), i2._onChange(function() {
      t2.setFromQuaternion(i2, void 0, false);
    }), Object.defineProperties(this, { position: { configurable: true, enumerable: true, value: e6 }, rotation: { configurable: true, enumerable: true, value: t2 }, quaternion: { configurable: true, enumerable: true, value: i2 }, scale: { configurable: true, enumerable: true, value: n2 }, modelViewMatrix: { value: new Kn() }, normalMatrix: { value: new Wi() } }), this.matrix = new Kn(), this.matrixWorld = new Kn(), this.matrixAutoUpdate = So.DEFAULT_MATRIX_AUTO_UPDATE, this.matrixWorldAutoUpdate = So.DEFAULT_MATRIX_WORLD_AUTO_UPDATE, this.matrixWorldNeedsUpdate = false, this.layers = new lo(), this.visible = true, this.castShadow = false, this.receiveShadow = false, this.frustumCulled = true, this.renderOrder = 0, this.animations = [], this.userData = {};
  }
  onBeforeShadow() {
  }
  onAfterShadow() {
  }
  onBeforeRender() {
  }
  onAfterRender() {
  }
  applyMatrix4(e6) {
    this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e6), this.matrix.decompose(this.position, this.quaternion, this.scale);
  }
  applyQuaternion(e6) {
    return this.quaternion.premultiply(e6), this;
  }
  setRotationFromAxisAngle(e6, t2) {
    this.quaternion.setFromAxisAngle(e6, t2);
  }
  setRotationFromEuler(e6) {
    this.quaternion.setFromEuler(e6, true);
  }
  setRotationFromMatrix(e6) {
    this.quaternion.setFromRotationMatrix(e6);
  }
  setRotationFromQuaternion(e6) {
    this.quaternion.copy(e6);
  }
  rotateOnAxis(e6, t2) {
    return uo.setFromAxisAngle(e6, t2), this.quaternion.multiply(uo), this;
  }
  rotateOnWorldAxis(e6, t2) {
    return uo.setFromAxisAngle(e6, t2), this.quaternion.premultiply(uo), this;
  }
  rotateX(e6) {
    return this.rotateOnAxis(vo, e6);
  }
  rotateY(e6) {
    return this.rotateOnAxis(Ao, e6);
  }
  rotateZ(e6) {
    return this.rotateOnAxis(bo, e6);
  }
  translateOnAxis(e6, t2) {
    return ho.copy(e6).applyQuaternion(this.quaternion), this.position.add(ho.multiplyScalar(t2)), this;
  }
  translateX(e6) {
    return this.translateOnAxis(vo, e6);
  }
  translateY(e6) {
    return this.translateOnAxis(Ao, e6);
  }
  translateZ(e6) {
    return this.translateOnAxis(bo, e6);
  }
  localToWorld(e6) {
    return this.updateWorldMatrix(true, false), e6.applyMatrix4(this.matrixWorld);
  }
  worldToLocal(e6) {
    return this.updateWorldMatrix(true, false), e6.applyMatrix4(po.copy(this.matrixWorld).invert());
  }
  lookAt(e6, t2, i2) {
    e6.isVector3 ? _o.copy(e6) : _o.set(e6, t2, i2);
    const n2 = this.parent;
    this.updateWorldMatrix(true, false), go.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? po.lookAt(go, _o, this.up) : po.lookAt(_o, go, this.up), this.quaternion.setFromRotationMatrix(po), n2 && (po.extractRotation(n2.matrixWorld), uo.setFromRotationMatrix(po), this.quaternion.premultiply(uo.invert()));
  }
  add(e6) {
    if (arguments.length > 1) {
      for (let e7 = 0; e7 < arguments.length; e7++) this.add(arguments[e7]);
      return this;
    }
    return e6 === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e6), this) : (e6 && e6.isObject3D ? (e6.removeFromParent(), e6.parent = this, this.children.push(e6), e6.dispatchEvent(yo), xo.child = e6, this.dispatchEvent(xo), xo.child = null) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e6), this);
  }
  remove(e6) {
    if (arguments.length > 1) {
      for (let e7 = 0; e7 < arguments.length; e7++) this.remove(arguments[e7]);
      return this;
    }
    const t2 = this.children.indexOf(e6);
    return -1 !== t2 && (e6.parent = null, this.children.splice(t2, 1), e6.dispatchEvent(wo), Co.child = e6, this.dispatchEvent(Co), Co.child = null), this;
  }
  removeFromParent() {
    const e6 = this.parent;
    return null !== e6 && e6.remove(this), this;
  }
  clear() {
    return this.remove(...this.children);
  }
  attach(e6) {
    return this.updateWorldMatrix(true, false), po.copy(this.matrixWorld).invert(), null !== e6.parent && (e6.parent.updateWorldMatrix(true, false), po.multiply(e6.parent.matrixWorld)), e6.applyMatrix4(po), e6.removeFromParent(), e6.parent = this, this.children.push(e6), e6.updateWorldMatrix(false, true), e6.dispatchEvent(yo), xo.child = e6, this.dispatchEvent(xo), xo.child = null, this;
  }
  getObjectById(e6) {
    return this.getObjectByProperty("id", e6);
  }
  getObjectByName(e6) {
    return this.getObjectByProperty("name", e6);
  }
  getObjectByProperty(e6, t2) {
    if (this[e6] === t2) return this;
    for (let i2 = 0, n2 = this.children.length; i2 < n2; i2++) {
      const n3 = this.children[i2].getObjectByProperty(e6, t2);
      if (void 0 !== n3) return n3;
    }
  }
  getObjectsByProperty(e6, t2, i2 = []) {
    this[e6] === t2 && i2.push(this);
    const n2 = this.children;
    for (let o2 = 0, r2 = n2.length; o2 < r2; o2++) n2[o2].getObjectsByProperty(e6, t2, i2);
    return i2;
  }
  getWorldPosition(e6) {
    return this.updateWorldMatrix(true, false), e6.setFromMatrixPosition(this.matrixWorld);
  }
  getWorldQuaternion(e6) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(go, e6, mo), e6;
  }
  getWorldScale(e6) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(go, fo, e6), e6;
  }
  getWorldDirection(e6) {
    this.updateWorldMatrix(true, false);
    const t2 = this.matrixWorld.elements;
    return e6.set(t2[8], t2[9], t2[10]).normalize();
  }
  raycast() {
  }
  traverse(e6) {
    e6(this);
    const t2 = this.children;
    for (let i2 = 0, n2 = t2.length; i2 < n2; i2++) t2[i2].traverse(e6);
  }
  traverseVisible(e6) {
    if (false === this.visible) return;
    e6(this);
    const t2 = this.children;
    for (let i2 = 0, n2 = t2.length; i2 < n2; i2++) t2[i2].traverseVisible(e6);
  }
  traverseAncestors(e6) {
    const t2 = this.parent;
    null !== t2 && (e6(t2), t2.traverseAncestors(e6));
  }
  updateMatrix() {
    this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = true;
  }
  updateMatrixWorld(e6) {
    this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e6) && (true === this.matrixWorldAutoUpdate && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix)), this.matrixWorldNeedsUpdate = false, e6 = true);
    const t2 = this.children;
    for (let i2 = 0, n2 = t2.length; i2 < n2; i2++) {
      t2[i2].updateMatrixWorld(e6);
    }
  }
  updateWorldMatrix(e6, t2) {
    const i2 = this.parent;
    if (true === e6 && null !== i2 && i2.updateWorldMatrix(true, false), this.matrixAutoUpdate && this.updateMatrix(), true === this.matrixWorldAutoUpdate && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix)), true === t2) {
      const e7 = this.children;
      for (let t3 = 0, i3 = e7.length; t3 < i3; t3++) {
        e7[t3].updateWorldMatrix(false, true);
      }
    }
  }
  toJSON(e6) {
    const t2 = void 0 === e6 || "string" == typeof e6, i2 = {};
    t2 && (e6 = { geometries: {}, materials: {}, textures: {}, images: {}, shapes: {}, skeletons: {}, animations: {}, nodes: {} }, i2.metadata = { version: 4.6, type: "Object", generator: "Object3D.toJSON" });
    const n2 = {};
    function o2(t3, i3) {
      return void 0 === t3[i3.uuid] && (t3[i3.uuid] = i3.toJSON(e6)), i3.uuid;
    }
    if (n2.uuid = this.uuid, n2.type = this.type, "" !== this.name && (n2.name = this.name), true === this.castShadow && (n2.castShadow = true), true === this.receiveShadow && (n2.receiveShadow = true), false === this.visible && (n2.visible = false), false === this.frustumCulled && (n2.frustumCulled = false), 0 !== this.renderOrder && (n2.renderOrder = this.renderOrder), Object.keys(this.userData).length > 0 && (n2.userData = this.userData), n2.layers = this.layers.mask, n2.matrix = this.matrix.toArray(), n2.up = this.up.toArray(), false === this.matrixAutoUpdate && (n2.matrixAutoUpdate = false), this.isInstancedMesh && (n2.type = "InstancedMesh", n2.count = this.count, n2.instanceMatrix = this.instanceMatrix.toJSON(), null !== this.instanceColor && (n2.instanceColor = this.instanceColor.toJSON())), this.isBatchedMesh && (n2.type = "BatchedMesh", n2.perObjectFrustumCulled = this.perObjectFrustumCulled, n2.sortObjects = this.sortObjects, n2.drawRanges = this._drawRanges, n2.reservedRanges = this._reservedRanges, n2.visibility = this._visibility, n2.active = this._active, n2.bounds = this._bounds.map((e7) => ({ boxInitialized: e7.boxInitialized, boxMin: e7.box.min.toArray(), boxMax: e7.box.max.toArray(), sphereInitialized: e7.sphereInitialized, sphereRadius: e7.sphere.radius, sphereCenter: e7.sphere.center.toArray() })), n2.maxInstanceCount = this._maxInstanceCount, n2.maxVertexCount = this._maxVertexCount, n2.maxIndexCount = this._maxIndexCount, n2.geometryInitialized = this._geometryInitialized, n2.geometryCount = this._geometryCount, n2.matricesTexture = this._matricesTexture.toJSON(e6), null !== this._colorsTexture && (n2.colorsTexture = this._colorsTexture.toJSON(e6)), null !== this.boundingSphere && (n2.boundingSphere = { center: n2.boundingSphere.center.toArray(), radius: n2.boundingSphere.radius }), null !== this.boundingBox && (n2.boundingBox = { min: n2.boundingBox.min.toArray(), max: n2.boundingBox.max.toArray() })), this.isScene) this.background && (this.background.isColor ? n2.background = this.background.toJSON() : this.background.isTexture && (n2.background = this.background.toJSON(e6).uuid)), this.environment && this.environment.isTexture && true !== this.environment.isRenderTargetTexture && (n2.environment = this.environment.toJSON(e6).uuid);
    else if (this.isMesh || this.isLine || this.isPoints) {
      n2.geometry = o2(e6.geometries, this.geometry);
      const t3 = this.geometry.parameters;
      if (void 0 !== t3 && void 0 !== t3.shapes) {
        const i3 = t3.shapes;
        if (Array.isArray(i3)) for (let t4 = 0, n3 = i3.length; t4 < n3; t4++) {
          const n4 = i3[t4];
          o2(e6.shapes, n4);
        }
        else o2(e6.shapes, i3);
      }
    }
    if (this.isSkinnedMesh && (n2.bindMode = this.bindMode, n2.bindMatrix = this.bindMatrix.toArray(), void 0 !== this.skeleton && (o2(e6.skeletons, this.skeleton), n2.skeleton = this.skeleton.uuid)), void 0 !== this.material) if (Array.isArray(this.material)) {
      const t3 = [];
      for (let i3 = 0, n3 = this.material.length; i3 < n3; i3++) t3.push(o2(e6.materials, this.material[i3]));
      n2.material = t3;
    } else n2.material = o2(e6.materials, this.material);
    if (this.children.length > 0) {
      n2.children = [];
      for (let t3 = 0; t3 < this.children.length; t3++) n2.children.push(this.children[t3].toJSON(e6).object);
    }
    if (this.animations.length > 0) {
      n2.animations = [];
      for (let t3 = 0; t3 < this.animations.length; t3++) {
        const i3 = this.animations[t3];
        n2.animations.push(o2(e6.animations, i3));
      }
    }
    if (t2) {
      const t3 = r2(e6.geometries), n3 = r2(e6.materials), o3 = r2(e6.textures), s2 = r2(e6.images), a2 = r2(e6.shapes), l2 = r2(e6.skeletons), c2 = r2(e6.animations), h2 = r2(e6.nodes);
      t3.length > 0 && (i2.geometries = t3), n3.length > 0 && (i2.materials = n3), o3.length > 0 && (i2.textures = o3), s2.length > 0 && (i2.images = s2), a2.length > 0 && (i2.shapes = a2), l2.length > 0 && (i2.skeletons = l2), c2.length > 0 && (i2.animations = c2), h2.length > 0 && (i2.nodes = h2);
    }
    return i2.object = n2, i2;
    function r2(e7) {
      const t3 = [];
      for (const i3 in e7) {
        const n3 = e7[i3];
        delete n3.metadata, t3.push(n3);
      }
      return t3;
    }
  }
  clone(e6) {
    return new this.constructor().copy(this, e6);
  }
  copy(e6, t2 = true) {
    if (this.name = e6.name, this.up.copy(e6.up), this.position.copy(e6.position), this.rotation.order = e6.rotation.order, this.quaternion.copy(e6.quaternion), this.scale.copy(e6.scale), this.matrix.copy(e6.matrix), this.matrixWorld.copy(e6.matrixWorld), this.matrixAutoUpdate = e6.matrixAutoUpdate, this.matrixWorldAutoUpdate = e6.matrixWorldAutoUpdate, this.matrixWorldNeedsUpdate = e6.matrixWorldNeedsUpdate, this.layers.mask = e6.layers.mask, this.visible = e6.visible, this.castShadow = e6.castShadow, this.receiveShadow = e6.receiveShadow, this.frustumCulled = e6.frustumCulled, this.renderOrder = e6.renderOrder, this.animations = e6.animations.slice(), this.userData = JSON.parse(JSON.stringify(e6.userData)), true === t2) for (let t3 = 0; t3 < e6.children.length; t3++) {
      const i2 = e6.children[t3];
      this.add(i2.clone());
    }
    return this;
  }
}
So.DEFAULT_UP = new yn(0, 1, 0), So.DEFAULT_MATRIX_AUTO_UPDATE = true, So.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = true;
const Eo = new yn(), To = new yn(), Io = new yn(), Mo = new yn(), Bo = new yn(), Ro = new yn(), ko = new yn(), Po = new yn(), Do = new yn(), Lo = new yn(), Fo = new gn(), No = new gn(), Oo = new gn();
class Uo {
  constructor(e6 = new yn(), t2 = new yn(), i2 = new yn()) {
    this.a = e6, this.b = t2, this.c = i2;
  }
  static getNormal(e6, t2, i2, n2) {
    n2.subVectors(i2, t2), Eo.subVectors(e6, t2), n2.cross(Eo);
    const o2 = n2.lengthSq();
    return o2 > 0 ? n2.multiplyScalar(1 / Math.sqrt(o2)) : n2.set(0, 0, 0);
  }
  static getBarycoord(e6, t2, i2, n2, o2) {
    Eo.subVectors(n2, t2), To.subVectors(i2, t2), Io.subVectors(e6, t2);
    const r2 = Eo.dot(Eo), s2 = Eo.dot(To), a2 = Eo.dot(Io), l2 = To.dot(To), c2 = To.dot(Io), h2 = r2 * l2 - s2 * s2;
    if (0 === h2) return o2.set(0, 0, 0), null;
    const u2 = 1 / h2, d2 = (l2 * a2 - s2 * c2) * u2, p2 = (r2 * c2 - s2 * a2) * u2;
    return o2.set(1 - d2 - p2, p2, d2);
  }
  static containsPoint(e6, t2, i2, n2) {
    return null !== this.getBarycoord(e6, t2, i2, n2, Mo) && (Mo.x >= 0 && Mo.y >= 0 && Mo.x + Mo.y <= 1);
  }
  static getInterpolation(e6, t2, i2, n2, o2, r2, s2, a2) {
    return null === this.getBarycoord(e6, t2, i2, n2, Mo) ? (a2.x = 0, a2.y = 0, "z" in a2 && (a2.z = 0), "w" in a2 && (a2.w = 0), null) : (a2.setScalar(0), a2.addScaledVector(o2, Mo.x), a2.addScaledVector(r2, Mo.y), a2.addScaledVector(s2, Mo.z), a2);
  }
  static getInterpolatedAttribute(e6, t2, i2, n2, o2, r2) {
    return Fo.setScalar(0), No.setScalar(0), Oo.setScalar(0), Fo.fromBufferAttribute(e6, t2), No.fromBufferAttribute(e6, i2), Oo.fromBufferAttribute(e6, n2), r2.setScalar(0), r2.addScaledVector(Fo, o2.x), r2.addScaledVector(No, o2.y), r2.addScaledVector(Oo, o2.z), r2;
  }
  static isFrontFacing(e6, t2, i2, n2) {
    return Eo.subVectors(i2, t2), To.subVectors(e6, t2), Eo.cross(To).dot(n2) < 0;
  }
  set(e6, t2, i2) {
    return this.a.copy(e6), this.b.copy(t2), this.c.copy(i2), this;
  }
  setFromPointsAndIndices(e6, t2, i2, n2) {
    return this.a.copy(e6[t2]), this.b.copy(e6[i2]), this.c.copy(e6[n2]), this;
  }
  setFromAttributeAndIndices(e6, t2, i2, n2) {
    return this.a.fromBufferAttribute(e6, t2), this.b.fromBufferAttribute(e6, i2), this.c.fromBufferAttribute(e6, n2), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e6) {
    return this.a.copy(e6.a), this.b.copy(e6.b), this.c.copy(e6.c), this;
  }
  getArea() {
    return Eo.subVectors(this.c, this.b), To.subVectors(this.a, this.b), 0.5 * Eo.cross(To).length();
  }
  getMidpoint(e6) {
    return e6.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
  }
  getNormal(e6) {
    return Uo.getNormal(this.a, this.b, this.c, e6);
  }
  getPlane(e6) {
    return e6.setFromCoplanarPoints(this.a, this.b, this.c);
  }
  getBarycoord(e6, t2) {
    return Uo.getBarycoord(e6, this.a, this.b, this.c, t2);
  }
  getInterpolation(e6, t2, i2, n2, o2) {
    return Uo.getInterpolation(e6, this.a, this.b, this.c, t2, i2, n2, o2);
  }
  containsPoint(e6) {
    return Uo.containsPoint(e6, this.a, this.b, this.c);
  }
  isFrontFacing(e6) {
    return Uo.isFrontFacing(this.a, this.b, this.c, e6);
  }
  intersectsBox(e6) {
    return e6.intersectsTriangle(this);
  }
  closestPointToPoint(e6, t2) {
    const i2 = this.a, n2 = this.b, o2 = this.c;
    let r2, s2;
    Bo.subVectors(n2, i2), Ro.subVectors(o2, i2), Po.subVectors(e6, i2);
    const a2 = Bo.dot(Po), l2 = Ro.dot(Po);
    if (a2 <= 0 && l2 <= 0) return t2.copy(i2);
    Do.subVectors(e6, n2);
    const c2 = Bo.dot(Do), h2 = Ro.dot(Do);
    if (c2 >= 0 && h2 <= c2) return t2.copy(n2);
    const u2 = a2 * h2 - c2 * l2;
    if (u2 <= 0 && a2 >= 0 && c2 <= 0) return r2 = a2 / (a2 - c2), t2.copy(i2).addScaledVector(Bo, r2);
    Lo.subVectors(e6, o2);
    const d2 = Bo.dot(Lo), p2 = Ro.dot(Lo);
    if (p2 >= 0 && d2 <= p2) return t2.copy(o2);
    const _2 = d2 * l2 - a2 * p2;
    if (_2 <= 0 && l2 >= 0 && p2 <= 0) return s2 = l2 / (l2 - p2), t2.copy(i2).addScaledVector(Ro, s2);
    const g2 = c2 * p2 - d2 * h2;
    if (g2 <= 0 && h2 - c2 >= 0 && d2 - p2 >= 0) return ko.subVectors(o2, n2), s2 = (h2 - c2) / (h2 - c2 + (d2 - p2)), t2.copy(n2).addScaledVector(ko, s2);
    const m2 = 1 / (g2 + _2 + u2);
    return r2 = _2 * m2, s2 = u2 * m2, t2.copy(i2).addScaledVector(Bo, r2).addScaledVector(Ro, s2);
  }
  equals(e6) {
    return e6.a.equals(this.a) && e6.b.equals(this.b) && e6.c.equals(this.c);
  }
}
const zo = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }, Ho = { h: 0, s: 0, l: 0 }, Qo = { h: 0, s: 0, l: 0 };
function Vo(e6, t2, i2) {
  return i2 < 0 && (i2 += 1), i2 > 1 && (i2 -= 1), i2 < 1 / 6 ? e6 + 6 * (t2 - e6) * i2 : i2 < 0.5 ? t2 : i2 < 2 / 3 ? e6 + 6 * (t2 - e6) * (2 / 3 - i2) : e6;
}
class Go {
  constructor(e6, t2, i2) {
    return this.isColor = true, this.r = 1, this.g = 1, this.b = 1, this.set(e6, t2, i2);
  }
  set(e6, t2, i2) {
    if (void 0 === t2 && void 0 === i2) {
      const t3 = e6;
      t3 && t3.isColor ? this.copy(t3) : "number" == typeof t3 ? this.setHex(t3) : "string" == typeof t3 && this.setStyle(t3);
    } else this.setRGB(e6, t2, i2);
    return this;
  }
  setScalar(e6) {
    return this.r = e6, this.g = e6, this.b = e6, this;
  }
  setHex(e6, t2 = pi) {
    return e6 = Math.floor(e6), this.r = (e6 >> 16 & 255) / 255, this.g = (e6 >> 8 & 255) / 255, this.b = (255 & e6) / 255, rn.toWorkingColorSpace(this, t2), this;
  }
  setRGB(e6, t2, i2, n2 = rn.workingColorSpace) {
    return this.r = e6, this.g = t2, this.b = i2, rn.toWorkingColorSpace(this, n2), this;
  }
  setHSL(e6, t2, i2, n2 = rn.workingColorSpace) {
    if (e6 = Hi(e6, 1), t2 = zi(t2, 0, 1), i2 = zi(i2, 0, 1), 0 === t2) this.r = this.g = this.b = i2;
    else {
      const n3 = i2 <= 0.5 ? i2 * (1 + t2) : i2 + t2 - i2 * t2, o2 = 2 * i2 - n3;
      this.r = Vo(o2, n3, e6 + 1 / 3), this.g = Vo(o2, n3, e6), this.b = Vo(o2, n3, e6 - 1 / 3);
    }
    return rn.toWorkingColorSpace(this, n2), this;
  }
  setStyle(e6, t2 = pi) {
    function i2(t3) {
      void 0 !== t3 && parseFloat(t3) < 1 && console.warn("THREE.Color: Alpha component of " + e6 + " will be ignored.");
    }
    let n2;
    if (n2 = /^(\w+)\(([^\)]*)\)/.exec(e6)) {
      let o2;
      const r2 = n2[1], s2 = n2[2];
      switch (r2) {
        case "rgb":
        case "rgba":
          if (o2 = /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s2)) return i2(o2[4]), this.setRGB(Math.min(255, parseInt(o2[1], 10)) / 255, Math.min(255, parseInt(o2[2], 10)) / 255, Math.min(255, parseInt(o2[3], 10)) / 255, t2);
          if (o2 = /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s2)) return i2(o2[4]), this.setRGB(Math.min(100, parseInt(o2[1], 10)) / 100, Math.min(100, parseInt(o2[2], 10)) / 100, Math.min(100, parseInt(o2[3], 10)) / 100, t2);
          break;
        case "hsl":
        case "hsla":
          if (o2 = /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s2)) return i2(o2[4]), this.setHSL(parseFloat(o2[1]) / 360, parseFloat(o2[2]) / 100, parseFloat(o2[3]) / 100, t2);
          break;
        default:
          console.warn("THREE.Color: Unknown color model " + e6);
      }
    } else if (n2 = /^\#([A-Fa-f\d]+)$/.exec(e6)) {
      const i3 = n2[1], o2 = i3.length;
      if (3 === o2) return this.setRGB(parseInt(i3.charAt(0), 16) / 15, parseInt(i3.charAt(1), 16) / 15, parseInt(i3.charAt(2), 16) / 15, t2);
      if (6 === o2) return this.setHex(parseInt(i3, 16), t2);
      console.warn("THREE.Color: Invalid hex color " + e6);
    } else if (e6 && e6.length > 0) return this.setColorName(e6, t2);
    return this;
  }
  setColorName(e6, t2 = pi) {
    const i2 = zo[e6.toLowerCase()];
    return void 0 !== i2 ? this.setHex(i2, t2) : console.warn("THREE.Color: Unknown color " + e6), this;
  }
  clone() {
    return new this.constructor(this.r, this.g, this.b);
  }
  copy(e6) {
    return this.r = e6.r, this.g = e6.g, this.b = e6.b, this;
  }
  copySRGBToLinear(e6) {
    return this.r = sn(e6.r), this.g = sn(e6.g), this.b = sn(e6.b), this;
  }
  copyLinearToSRGB(e6) {
    return this.r = an(e6.r), this.g = an(e6.g), this.b = an(e6.b), this;
  }
  convertSRGBToLinear() {
    return this.copySRGBToLinear(this), this;
  }
  convertLinearToSRGB() {
    return this.copyLinearToSRGB(this), this;
  }
  getHex(e6 = pi) {
    return rn.fromWorkingColorSpace(qo.copy(this), e6), 65536 * Math.round(zi(255 * qo.r, 0, 255)) + 256 * Math.round(zi(255 * qo.g, 0, 255)) + Math.round(zi(255 * qo.b, 0, 255));
  }
  getHexString(e6 = pi) {
    return ("000000" + this.getHex(e6).toString(16)).slice(-6);
  }
  getHSL(e6, t2 = rn.workingColorSpace) {
    rn.fromWorkingColorSpace(qo.copy(this), t2);
    const i2 = qo.r, n2 = qo.g, o2 = qo.b, r2 = Math.max(i2, n2, o2), s2 = Math.min(i2, n2, o2);
    let a2, l2;
    const c2 = (s2 + r2) / 2;
    if (s2 === r2) a2 = 0, l2 = 0;
    else {
      const e7 = r2 - s2;
      switch (l2 = c2 <= 0.5 ? e7 / (r2 + s2) : e7 / (2 - r2 - s2), r2) {
        case i2:
          a2 = (n2 - o2) / e7 + (n2 < o2 ? 6 : 0);
          break;
        case n2:
          a2 = (o2 - i2) / e7 + 2;
          break;
        case o2:
          a2 = (i2 - n2) / e7 + 4;
      }
      a2 /= 6;
    }
    return e6.h = a2, e6.s = l2, e6.l = c2, e6;
  }
  getRGB(e6, t2 = rn.workingColorSpace) {
    return rn.fromWorkingColorSpace(qo.copy(this), t2), e6.r = qo.r, e6.g = qo.g, e6.b = qo.b, e6;
  }
  getStyle(e6 = pi) {
    rn.fromWorkingColorSpace(qo.copy(this), e6);
    const t2 = qo.r, i2 = qo.g, n2 = qo.b;
    return e6 !== pi ? `color(${e6} ${t2.toFixed(3)} ${i2.toFixed(3)} ${n2.toFixed(3)})` : `rgb(${Math.round(255 * t2)},${Math.round(255 * i2)},${Math.round(255 * n2)})`;
  }
  offsetHSL(e6, t2, i2) {
    return this.getHSL(Ho), this.setHSL(Ho.h + e6, Ho.s + t2, Ho.l + i2);
  }
  add(e6) {
    return this.r += e6.r, this.g += e6.g, this.b += e6.b, this;
  }
  addColors(e6, t2) {
    return this.r = e6.r + t2.r, this.g = e6.g + t2.g, this.b = e6.b + t2.b, this;
  }
  addScalar(e6) {
    return this.r += e6, this.g += e6, this.b += e6, this;
  }
  sub(e6) {
    return this.r = Math.max(0, this.r - e6.r), this.g = Math.max(0, this.g - e6.g), this.b = Math.max(0, this.b - e6.b), this;
  }
  multiply(e6) {
    return this.r *= e6.r, this.g *= e6.g, this.b *= e6.b, this;
  }
  multiplyScalar(e6) {
    return this.r *= e6, this.g *= e6, this.b *= e6, this;
  }
  lerp(e6, t2) {
    return this.r += (e6.r - this.r) * t2, this.g += (e6.g - this.g) * t2, this.b += (e6.b - this.b) * t2, this;
  }
  lerpColors(e6, t2, i2) {
    return this.r = e6.r + (t2.r - e6.r) * i2, this.g = e6.g + (t2.g - e6.g) * i2, this.b = e6.b + (t2.b - e6.b) * i2, this;
  }
  lerpHSL(e6, t2) {
    this.getHSL(Ho), e6.getHSL(Qo);
    const i2 = Qi(Ho.h, Qo.h, t2), n2 = Qi(Ho.s, Qo.s, t2), o2 = Qi(Ho.l, Qo.l, t2);
    return this.setHSL(i2, n2, o2), this;
  }
  setFromVector3(e6) {
    return this.r = e6.x, this.g = e6.y, this.b = e6.z, this;
  }
  applyMatrix3(e6) {
    const t2 = this.r, i2 = this.g, n2 = this.b, o2 = e6.elements;
    return this.r = o2[0] * t2 + o2[3] * i2 + o2[6] * n2, this.g = o2[1] * t2 + o2[4] * i2 + o2[7] * n2, this.b = o2[2] * t2 + o2[5] * i2 + o2[8] * n2, this;
  }
  equals(e6) {
    return e6.r === this.r && e6.g === this.g && e6.b === this.b;
  }
  fromArray(e6, t2 = 0) {
    return this.r = e6[t2], this.g = e6[t2 + 1], this.b = e6[t2 + 2], this;
  }
  toArray(e6 = [], t2 = 0) {
    return e6[t2] = this.r, e6[t2 + 1] = this.g, e6[t2 + 2] = this.b, e6;
  }
  fromBufferAttribute(e6, t2) {
    return this.r = e6.getX(t2), this.g = e6.getY(t2), this.b = e6.getZ(t2), this;
  }
  toJSON() {
    return this.getHex();
  }
  *[Symbol.iterator]() {
    yield this.r, yield this.g, yield this.b;
  }
}
const qo = new Go();
Go.NAMES = zo;
let $o = 0, Wo = class extends Di {
  constructor() {
    super(), this.isMaterial = true, Object.defineProperty(this, "id", { value: $o++ }), this.uuid = Ui(), this.name = "", this.type = "Material", this.blending = 1, this.side = 0, this.vertexColors = false, this.opacity = 1, this.transparent = false, this.alphaHash = false, this.blendSrc = 204, this.blendDst = 205, this.blendEquation = Ae, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.blendColor = new Go(0, 0, 0), this.blendAlpha = 0, this.depthFunc = 3, this.depthTest = true, this.depthWrite = true, this.stencilWriteMask = 255, this.stencilFunc = 519, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = yi, this.stencilZFail = yi, this.stencilZPass = yi, this.stencilWrite = false, this.clippingPlanes = null, this.clipIntersection = false, this.clipShadows = false, this.shadowSide = null, this.colorWrite = true, this.precision = null, this.polygonOffset = false, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = false, this.alphaToCoverage = false, this.premultipliedAlpha = false, this.forceSinglePass = false, this.visible = true, this.toneMapped = true, this.userData = {}, this.version = 0, this._alphaTest = 0;
  }
  get alphaTest() {
    return this._alphaTest;
  }
  set alphaTest(e6) {
    this._alphaTest > 0 != e6 > 0 && this.version++, this._alphaTest = e6;
  }
  onBeforeRender() {
  }
  onBeforeCompile() {
  }
  customProgramCacheKey() {
    return this.onBeforeCompile.toString();
  }
  setValues(e6) {
    if (void 0 !== e6) for (const t2 in e6) {
      const i2 = e6[t2];
      if (void 0 === i2) {
        console.warn(`THREE.Material: parameter '${t2}' has value of undefined.`);
        continue;
      }
      const n2 = this[t2];
      void 0 !== n2 ? n2 && n2.isColor ? n2.set(i2) : n2 && n2.isVector3 && i2 && i2.isVector3 ? n2.copy(i2) : this[t2] = i2 : console.warn(`THREE.Material: '${t2}' is not a property of THREE.${this.type}.`);
    }
  }
  toJSON(e6) {
    const t2 = void 0 === e6 || "string" == typeof e6;
    t2 && (e6 = { textures: {}, images: {} });
    const i2 = { metadata: { version: 4.6, type: "Material", generator: "Material.toJSON" } };
    function n2(e7) {
      const t3 = [];
      for (const i3 in e7) {
        const n3 = e7[i3];
        delete n3.metadata, t3.push(n3);
      }
      return t3;
    }
    if (i2.uuid = this.uuid, i2.type = this.type, "" !== this.name && (i2.name = this.name), this.color && this.color.isColor && (i2.color = this.color.getHex()), void 0 !== this.roughness && (i2.roughness = this.roughness), void 0 !== this.metalness && (i2.metalness = this.metalness), void 0 !== this.sheen && (i2.sheen = this.sheen), this.sheenColor && this.sheenColor.isColor && (i2.sheenColor = this.sheenColor.getHex()), void 0 !== this.sheenRoughness && (i2.sheenRoughness = this.sheenRoughness), this.emissive && this.emissive.isColor && (i2.emissive = this.emissive.getHex()), void 0 !== this.emissiveIntensity && 1 !== this.emissiveIntensity && (i2.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (i2.specular = this.specular.getHex()), void 0 !== this.specularIntensity && (i2.specularIntensity = this.specularIntensity), this.specularColor && this.specularColor.isColor && (i2.specularColor = this.specularColor.getHex()), void 0 !== this.shininess && (i2.shininess = this.shininess), void 0 !== this.clearcoat && (i2.clearcoat = this.clearcoat), void 0 !== this.clearcoatRoughness && (i2.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatMap && this.clearcoatMap.isTexture && (i2.clearcoatMap = this.clearcoatMap.toJSON(e6).uuid), this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture && (i2.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(e6).uuid), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (i2.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e6).uuid, i2.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), void 0 !== this.dispersion && (i2.dispersion = this.dispersion), void 0 !== this.iridescence && (i2.iridescence = this.iridescence), void 0 !== this.iridescenceIOR && (i2.iridescenceIOR = this.iridescenceIOR), void 0 !== this.iridescenceThicknessRange && (i2.iridescenceThicknessRange = this.iridescenceThicknessRange), this.iridescenceMap && this.iridescenceMap.isTexture && (i2.iridescenceMap = this.iridescenceMap.toJSON(e6).uuid), this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture && (i2.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON(e6).uuid), void 0 !== this.anisotropy && (i2.anisotropy = this.anisotropy), void 0 !== this.anisotropyRotation && (i2.anisotropyRotation = this.anisotropyRotation), this.anisotropyMap && this.anisotropyMap.isTexture && (i2.anisotropyMap = this.anisotropyMap.toJSON(e6).uuid), this.map && this.map.isTexture && (i2.map = this.map.toJSON(e6).uuid), this.matcap && this.matcap.isTexture && (i2.matcap = this.matcap.toJSON(e6).uuid), this.alphaMap && this.alphaMap.isTexture && (i2.alphaMap = this.alphaMap.toJSON(e6).uuid), this.lightMap && this.lightMap.isTexture && (i2.lightMap = this.lightMap.toJSON(e6).uuid, i2.lightMapIntensity = this.lightMapIntensity), this.aoMap && this.aoMap.isTexture && (i2.aoMap = this.aoMap.toJSON(e6).uuid, i2.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (i2.bumpMap = this.bumpMap.toJSON(e6).uuid, i2.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (i2.normalMap = this.normalMap.toJSON(e6).uuid, i2.normalMapType = this.normalMapType, i2.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (i2.displacementMap = this.displacementMap.toJSON(e6).uuid, i2.displacementScale = this.displacementScale, i2.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (i2.roughnessMap = this.roughnessMap.toJSON(e6).uuid), this.metalnessMap && this.metalnessMap.isTexture && (i2.metalnessMap = this.metalnessMap.toJSON(e6).uuid), this.emissiveMap && this.emissiveMap.isTexture && (i2.emissiveMap = this.emissiveMap.toJSON(e6).uuid), this.specularMap && this.specularMap.isTexture && (i2.specularMap = this.specularMap.toJSON(e6).uuid), this.specularIntensityMap && this.specularIntensityMap.isTexture && (i2.specularIntensityMap = this.specularIntensityMap.toJSON(e6).uuid), this.specularColorMap && this.specularColorMap.isTexture && (i2.specularColorMap = this.specularColorMap.toJSON(e6).uuid), this.envMap && this.envMap.isTexture && (i2.envMap = this.envMap.toJSON(e6).uuid, void 0 !== this.combine && (i2.combine = this.combine)), void 0 !== this.envMapRotation && (i2.envMapRotation = this.envMapRotation.toArray()), void 0 !== this.envMapIntensity && (i2.envMapIntensity = this.envMapIntensity), void 0 !== this.reflectivity && (i2.reflectivity = this.reflectivity), void 0 !== this.refractionRatio && (i2.refractionRatio = this.refractionRatio), this.gradientMap && this.gradientMap.isTexture && (i2.gradientMap = this.gradientMap.toJSON(e6).uuid), void 0 !== this.transmission && (i2.transmission = this.transmission), this.transmissionMap && this.transmissionMap.isTexture && (i2.transmissionMap = this.transmissionMap.toJSON(e6).uuid), void 0 !== this.thickness && (i2.thickness = this.thickness), this.thicknessMap && this.thicknessMap.isTexture && (i2.thicknessMap = this.thicknessMap.toJSON(e6).uuid), void 0 !== this.attenuationDistance && this.attenuationDistance !== 1 / 0 && (i2.attenuationDistance = this.attenuationDistance), void 0 !== this.attenuationColor && (i2.attenuationColor = this.attenuationColor.getHex()), void 0 !== this.size && (i2.size = this.size), null !== this.shadowSide && (i2.shadowSide = this.shadowSide), void 0 !== this.sizeAttenuation && (i2.sizeAttenuation = this.sizeAttenuation), 1 !== this.blending && (i2.blending = this.blending), 0 !== this.side && (i2.side = this.side), true === this.vertexColors && (i2.vertexColors = true), this.opacity < 1 && (i2.opacity = this.opacity), true === this.transparent && (i2.transparent = true), 204 !== this.blendSrc && (i2.blendSrc = this.blendSrc), 205 !== this.blendDst && (i2.blendDst = this.blendDst), this.blendEquation !== Ae && (i2.blendEquation = this.blendEquation), null !== this.blendSrcAlpha && (i2.blendSrcAlpha = this.blendSrcAlpha), null !== this.blendDstAlpha && (i2.blendDstAlpha = this.blendDstAlpha), null !== this.blendEquationAlpha && (i2.blendEquationAlpha = this.blendEquationAlpha), this.blendColor && this.blendColor.isColor && (i2.blendColor = this.blendColor.getHex()), 0 !== this.blendAlpha && (i2.blendAlpha = this.blendAlpha), 3 !== this.depthFunc && (i2.depthFunc = this.depthFunc), false === this.depthTest && (i2.depthTest = this.depthTest), false === this.depthWrite && (i2.depthWrite = this.depthWrite), false === this.colorWrite && (i2.colorWrite = this.colorWrite), 255 !== this.stencilWriteMask && (i2.stencilWriteMask = this.stencilWriteMask), 519 !== this.stencilFunc && (i2.stencilFunc = this.stencilFunc), 0 !== this.stencilRef && (i2.stencilRef = this.stencilRef), 255 !== this.stencilFuncMask && (i2.stencilFuncMask = this.stencilFuncMask), this.stencilFail !== yi && (i2.stencilFail = this.stencilFail), this.stencilZFail !== yi && (i2.stencilZFail = this.stencilZFail), this.stencilZPass !== yi && (i2.stencilZPass = this.stencilZPass), true === this.stencilWrite && (i2.stencilWrite = this.stencilWrite), void 0 !== this.rotation && 0 !== this.rotation && (i2.rotation = this.rotation), true === this.polygonOffset && (i2.polygonOffset = true), 0 !== this.polygonOffsetFactor && (i2.polygonOffsetFactor = this.polygonOffsetFactor), 0 !== this.polygonOffsetUnits && (i2.polygonOffsetUnits = this.polygonOffsetUnits), void 0 !== this.linewidth && 1 !== this.linewidth && (i2.linewidth = this.linewidth), void 0 !== this.dashSize && (i2.dashSize = this.dashSize), void 0 !== this.gapSize && (i2.gapSize = this.gapSize), void 0 !== this.scale && (i2.scale = this.scale), true === this.dithering && (i2.dithering = true), this.alphaTest > 0 && (i2.alphaTest = this.alphaTest), true === this.alphaHash && (i2.alphaHash = true), true === this.alphaToCoverage && (i2.alphaToCoverage = true), true === this.premultipliedAlpha && (i2.premultipliedAlpha = true), true === this.forceSinglePass && (i2.forceSinglePass = true), true === this.wireframe && (i2.wireframe = true), this.wireframeLinewidth > 1 && (i2.wireframeLinewidth = this.wireframeLinewidth), "round" !== this.wireframeLinecap && (i2.wireframeLinecap = this.wireframeLinecap), "round" !== this.wireframeLinejoin && (i2.wireframeLinejoin = this.wireframeLinejoin), true === this.flatShading && (i2.flatShading = true), false === this.visible && (i2.visible = false), false === this.toneMapped && (i2.toneMapped = false), false === this.fog && (i2.fog = false), Object.keys(this.userData).length > 0 && (i2.userData = this.userData), t2) {
      const t3 = n2(e6.textures), o2 = n2(e6.images);
      t3.length > 0 && (i2.textures = t3), o2.length > 0 && (i2.images = o2);
    }
    return i2;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e6) {
    this.name = e6.name, this.blending = e6.blending, this.side = e6.side, this.vertexColors = e6.vertexColors, this.opacity = e6.opacity, this.transparent = e6.transparent, this.blendSrc = e6.blendSrc, this.blendDst = e6.blendDst, this.blendEquation = e6.blendEquation, this.blendSrcAlpha = e6.blendSrcAlpha, this.blendDstAlpha = e6.blendDstAlpha, this.blendEquationAlpha = e6.blendEquationAlpha, this.blendColor.copy(e6.blendColor), this.blendAlpha = e6.blendAlpha, this.depthFunc = e6.depthFunc, this.depthTest = e6.depthTest, this.depthWrite = e6.depthWrite, this.stencilWriteMask = e6.stencilWriteMask, this.stencilFunc = e6.stencilFunc, this.stencilRef = e6.stencilRef, this.stencilFuncMask = e6.stencilFuncMask, this.stencilFail = e6.stencilFail, this.stencilZFail = e6.stencilZFail, this.stencilZPass = e6.stencilZPass, this.stencilWrite = e6.stencilWrite;
    const t2 = e6.clippingPlanes;
    let i2 = null;
    if (null !== t2) {
      const e7 = t2.length;
      i2 = new Array(e7);
      for (let n2 = 0; n2 !== e7; ++n2) i2[n2] = t2[n2].clone();
    }
    return this.clippingPlanes = i2, this.clipIntersection = e6.clipIntersection, this.clipShadows = e6.clipShadows, this.shadowSide = e6.shadowSide, this.colorWrite = e6.colorWrite, this.precision = e6.precision, this.polygonOffset = e6.polygonOffset, this.polygonOffsetFactor = e6.polygonOffsetFactor, this.polygonOffsetUnits = e6.polygonOffsetUnits, this.dithering = e6.dithering, this.alphaTest = e6.alphaTest, this.alphaHash = e6.alphaHash, this.alphaToCoverage = e6.alphaToCoverage, this.premultipliedAlpha = e6.premultipliedAlpha, this.forceSinglePass = e6.forceSinglePass, this.visible = e6.visible, this.toneMapped = e6.toneMapped, this.userData = JSON.parse(JSON.stringify(e6.userData)), this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  set needsUpdate(e6) {
    true === e6 && this.version++;
  }
  onBuild() {
    console.warn("Material: onBuild() has been removed.");
  }
};
class jo extends Wo {
  constructor(e6) {
    super(), this.isMeshBasicMaterial = true, this.type = "MeshBasicMaterial", this.color = new Go(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.envMapRotation = new ao(), this.combine = 0, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.fog = true, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.color.copy(e6.color), this.map = e6.map, this.lightMap = e6.lightMap, this.lightMapIntensity = e6.lightMapIntensity, this.aoMap = e6.aoMap, this.aoMapIntensity = e6.aoMapIntensity, this.specularMap = e6.specularMap, this.alphaMap = e6.alphaMap, this.envMap = e6.envMap, this.envMapRotation.copy(e6.envMapRotation), this.combine = e6.combine, this.reflectivity = e6.reflectivity, this.refractionRatio = e6.refractionRatio, this.wireframe = e6.wireframe, this.wireframeLinewidth = e6.wireframeLinewidth, this.wireframeLinecap = e6.wireframeLinecap, this.wireframeLinejoin = e6.wireframeLinejoin, this.fog = e6.fog, this;
  }
}
const Xo = Yo();
function Yo() {
  const e6 = new ArrayBuffer(4), t2 = new Float32Array(e6), i2 = new Uint32Array(e6), n2 = new Uint32Array(512), o2 = new Uint32Array(512);
  for (let e7 = 0; e7 < 256; ++e7) {
    const t3 = e7 - 127;
    t3 < -27 ? (n2[e7] = 0, n2[256 | e7] = 32768, o2[e7] = 24, o2[256 | e7] = 24) : t3 < -14 ? (n2[e7] = 1024 >> -t3 - 14, n2[256 | e7] = 1024 >> -t3 - 14 | 32768, o2[e7] = -t3 - 1, o2[256 | e7] = -t3 - 1) : t3 <= 15 ? (n2[e7] = t3 + 15 << 10, n2[256 | e7] = t3 + 15 << 10 | 32768, o2[e7] = 13, o2[256 | e7] = 13) : t3 < 128 ? (n2[e7] = 31744, n2[256 | e7] = 64512, o2[e7] = 24, o2[256 | e7] = 24) : (n2[e7] = 31744, n2[256 | e7] = 64512, o2[e7] = 13, o2[256 | e7] = 13);
  }
  const r2 = new Uint32Array(2048), s2 = new Uint32Array(64), a2 = new Uint32Array(64);
  for (let e7 = 1; e7 < 1024; ++e7) {
    let t3 = e7 << 13, i3 = 0;
    for (; !(8388608 & t3); ) t3 <<= 1, i3 -= 8388608;
    t3 &= -8388609, i3 += 947912704, r2[e7] = t3 | i3;
  }
  for (let e7 = 1024; e7 < 2048; ++e7) r2[e7] = 939524096 + (e7 - 1024 << 13);
  for (let e7 = 1; e7 < 31; ++e7) s2[e7] = e7 << 23;
  s2[31] = 1199570944, s2[32] = 2147483648;
  for (let e7 = 33; e7 < 63; ++e7) s2[e7] = 2147483648 + (e7 - 32 << 23);
  s2[63] = 3347054592;
  for (let e7 = 1; e7 < 64; ++e7) 32 !== e7 && (a2[e7] = 1024);
  return { floatView: t2, uint32View: i2, baseTable: n2, shiftTable: o2, mantissaTable: r2, exponentTable: s2, offsetTable: a2 };
}
const Ko = { toHalfFloat: function(e6) {
  Math.abs(e6) > 65504 && console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."), e6 = zi(e6, -65504, 65504), Xo.floatView[0] = e6;
  const t2 = Xo.uint32View[0], i2 = t2 >> 23 & 511;
  return Xo.baseTable[i2] + ((8388607 & t2) >> Xo.shiftTable[i2]);
}, fromHalfFloat: function(e6) {
  const t2 = e6 >> 10;
  return Xo.uint32View[0] = Xo.mantissaTable[Xo.offsetTable[t2] + (1023 & e6)] + Xo.exponentTable[t2], Xo.floatView[0];
} }, Zo = new yn(), Jo = new $i();
class er {
  constructor(e6, t2, i2 = false) {
    if (Array.isArray(e6)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
    this.isBufferAttribute = true, this.name = "", this.array = e6, this.itemSize = t2, this.count = void 0 !== e6 ? e6.length / t2 : 0, this.normalized = i2, this.usage = Bi, this.updateRanges = [], this.gpuType = dt, this.version = 0;
  }
  onUploadCallback() {
  }
  set needsUpdate(e6) {
    true === e6 && this.version++;
  }
  setUsage(e6) {
    return this.usage = e6, this;
  }
  addUpdateRange(e6, t2) {
    this.updateRanges.push({ start: e6, count: t2 });
  }
  clearUpdateRanges() {
    this.updateRanges.length = 0;
  }
  copy(e6) {
    return this.name = e6.name, this.array = new e6.array.constructor(e6.array), this.itemSize = e6.itemSize, this.count = e6.count, this.normalized = e6.normalized, this.usage = e6.usage, this.gpuType = e6.gpuType, this;
  }
  copyAt(e6, t2, i2) {
    e6 *= this.itemSize, i2 *= t2.itemSize;
    for (let n2 = 0, o2 = this.itemSize; n2 < o2; n2++) this.array[e6 + n2] = t2.array[i2 + n2];
    return this;
  }
  copyArray(e6) {
    return this.array.set(e6), this;
  }
  applyMatrix3(e6) {
    if (2 === this.itemSize) for (let t2 = 0, i2 = this.count; t2 < i2; t2++) Jo.fromBufferAttribute(this, t2), Jo.applyMatrix3(e6), this.setXY(t2, Jo.x, Jo.y);
    else if (3 === this.itemSize) for (let t2 = 0, i2 = this.count; t2 < i2; t2++) Zo.fromBufferAttribute(this, t2), Zo.applyMatrix3(e6), this.setXYZ(t2, Zo.x, Zo.y, Zo.z);
    return this;
  }
  applyMatrix4(e6) {
    for (let t2 = 0, i2 = this.count; t2 < i2; t2++) Zo.fromBufferAttribute(this, t2), Zo.applyMatrix4(e6), this.setXYZ(t2, Zo.x, Zo.y, Zo.z);
    return this;
  }
  applyNormalMatrix(e6) {
    for (let t2 = 0, i2 = this.count; t2 < i2; t2++) Zo.fromBufferAttribute(this, t2), Zo.applyNormalMatrix(e6), this.setXYZ(t2, Zo.x, Zo.y, Zo.z);
    return this;
  }
  transformDirection(e6) {
    for (let t2 = 0, i2 = this.count; t2 < i2; t2++) Zo.fromBufferAttribute(this, t2), Zo.transformDirection(e6), this.setXYZ(t2, Zo.x, Zo.y, Zo.z);
    return this;
  }
  set(e6, t2 = 0) {
    return this.array.set(e6, t2), this;
  }
  getComponent(e6, t2) {
    let i2 = this.array[e6 * this.itemSize + t2];
    return this.normalized && (i2 = Vi(i2, this.array)), i2;
  }
  setComponent(e6, t2, i2) {
    return this.normalized && (i2 = Gi(i2, this.array)), this.array[e6 * this.itemSize + t2] = i2, this;
  }
  getX(e6) {
    let t2 = this.array[e6 * this.itemSize];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  setX(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.array[e6 * this.itemSize] = t2, this;
  }
  getY(e6) {
    let t2 = this.array[e6 * this.itemSize + 1];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  setY(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.array[e6 * this.itemSize + 1] = t2, this;
  }
  getZ(e6) {
    let t2 = this.array[e6 * this.itemSize + 2];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  setZ(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.array[e6 * this.itemSize + 2] = t2, this;
  }
  getW(e6) {
    let t2 = this.array[e6 * this.itemSize + 3];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  setW(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.array[e6 * this.itemSize + 3] = t2, this;
  }
  setXY(e6, t2, i2) {
    return e6 *= this.itemSize, this.normalized && (t2 = Gi(t2, this.array), i2 = Gi(i2, this.array)), this.array[e6 + 0] = t2, this.array[e6 + 1] = i2, this;
  }
  setXYZ(e6, t2, i2, n2) {
    return e6 *= this.itemSize, this.normalized && (t2 = Gi(t2, this.array), i2 = Gi(i2, this.array), n2 = Gi(n2, this.array)), this.array[e6 + 0] = t2, this.array[e6 + 1] = i2, this.array[e6 + 2] = n2, this;
  }
  setXYZW(e6, t2, i2, n2, o2) {
    return e6 *= this.itemSize, this.normalized && (t2 = Gi(t2, this.array), i2 = Gi(i2, this.array), n2 = Gi(n2, this.array), o2 = Gi(o2, this.array)), this.array[e6 + 0] = t2, this.array[e6 + 1] = i2, this.array[e6 + 2] = n2, this.array[e6 + 3] = o2, this;
  }
  onUpload(e6) {
    return this.onUploadCallback = e6, this;
  }
  clone() {
    return new this.constructor(this.array, this.itemSize).copy(this);
  }
  toJSON() {
    const e6 = { itemSize: this.itemSize, type: this.array.constructor.name, array: Array.from(this.array), normalized: this.normalized };
    return "" !== this.name && (e6.name = this.name), this.usage !== Bi && (e6.usage = this.usage), e6;
  }
}
class tr extends er {
  constructor(e6, t2, i2) {
    super(new Uint16Array(e6), t2, i2);
  }
}
class ir extends er {
  constructor(e6, t2, i2) {
    super(new Uint32Array(e6), t2, i2);
  }
}
class nr extends er {
  constructor(e6, t2, i2) {
    super(new Float32Array(e6), t2, i2);
  }
}
let or = 0;
const rr = new Kn(), sr = new So(), ar = new yn(), lr = new Cn(), cr = new Cn(), hr = new yn();
class ur extends Di {
  constructor() {
    super(), this.isBufferGeometry = true, Object.defineProperty(this, "id", { value: or++ }), this.uuid = Ui(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = false, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = { start: 0, count: 1 / 0 }, this.userData = {};
  }
  getIndex() {
    return this.index;
  }
  setIndex(e6) {
    return Array.isArray(e6) ? this.index = new (Xi(e6) ? ir : tr)(e6, 1) : this.index = e6, this;
  }
  getAttribute(e6) {
    return this.attributes[e6];
  }
  setAttribute(e6, t2) {
    return this.attributes[e6] = t2, this;
  }
  deleteAttribute(e6) {
    return delete this.attributes[e6], this;
  }
  hasAttribute(e6) {
    return void 0 !== this.attributes[e6];
  }
  addGroup(e6, t2, i2 = 0) {
    this.groups.push({ start: e6, count: t2, materialIndex: i2 });
  }
  clearGroups() {
    this.groups = [];
  }
  setDrawRange(e6, t2) {
    this.drawRange.start = e6, this.drawRange.count = t2;
  }
  applyMatrix4(e6) {
    const t2 = this.attributes.position;
    void 0 !== t2 && (t2.applyMatrix4(e6), t2.needsUpdate = true);
    const i2 = this.attributes.normal;
    if (void 0 !== i2) {
      const t3 = new Wi().getNormalMatrix(e6);
      i2.applyNormalMatrix(t3), i2.needsUpdate = true;
    }
    const n2 = this.attributes.tangent;
    return void 0 !== n2 && (n2.transformDirection(e6), n2.needsUpdate = true), null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this;
  }
  applyQuaternion(e6) {
    return rr.makeRotationFromQuaternion(e6), this.applyMatrix4(rr), this;
  }
  rotateX(e6) {
    return rr.makeRotationX(e6), this.applyMatrix4(rr), this;
  }
  rotateY(e6) {
    return rr.makeRotationY(e6), this.applyMatrix4(rr), this;
  }
  rotateZ(e6) {
    return rr.makeRotationZ(e6), this.applyMatrix4(rr), this;
  }
  translate(e6, t2, i2) {
    return rr.makeTranslation(e6, t2, i2), this.applyMatrix4(rr), this;
  }
  scale(e6, t2, i2) {
    return rr.makeScale(e6, t2, i2), this.applyMatrix4(rr), this;
  }
  lookAt(e6) {
    return sr.lookAt(e6), sr.updateMatrix(), this.applyMatrix4(sr.matrix), this;
  }
  center() {
    return this.computeBoundingBox(), this.boundingBox.getCenter(ar).negate(), this.translate(ar.x, ar.y, ar.z), this;
  }
  setFromPoints(e6) {
    const t2 = [];
    for (let i2 = 0, n2 = e6.length; i2 < n2; i2++) {
      const n3 = e6[i2];
      t2.push(n3.x, n3.y, n3.z || 0);
    }
    return this.setAttribute("position", new nr(t2, 3)), this;
  }
  computeBoundingBox() {
    null === this.boundingBox && (this.boundingBox = new Cn());
    const e6 = this.attributes.position, t2 = this.morphAttributes.position;
    if (e6 && e6.isGLBufferAttribute) return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.", this), void this.boundingBox.set(new yn(-1 / 0, -1 / 0, -1 / 0), new yn(1 / 0, 1 / 0, 1 / 0));
    if (void 0 !== e6) {
      if (this.boundingBox.setFromBufferAttribute(e6), t2) for (let e7 = 0, i2 = t2.length; e7 < i2; e7++) {
        const i3 = t2[e7];
        lr.setFromBufferAttribute(i3), this.morphTargetsRelative ? (hr.addVectors(this.boundingBox.min, lr.min), this.boundingBox.expandByPoint(hr), hr.addVectors(this.boundingBox.max, lr.max), this.boundingBox.expandByPoint(hr)) : (this.boundingBox.expandByPoint(lr.min), this.boundingBox.expandByPoint(lr.max));
      }
    } else this.boundingBox.makeEmpty();
    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
  }
  computeBoundingSphere() {
    null === this.boundingSphere && (this.boundingSphere = new Qn());
    const e6 = this.attributes.position, t2 = this.morphAttributes.position;
    if (e6 && e6.isGLBufferAttribute) return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.", this), void this.boundingSphere.set(new yn(), 1 / 0);
    if (e6) {
      const i2 = this.boundingSphere.center;
      if (lr.setFromBufferAttribute(e6), t2) for (let e7 = 0, i3 = t2.length; e7 < i3; e7++) {
        const i4 = t2[e7];
        cr.setFromBufferAttribute(i4), this.morphTargetsRelative ? (hr.addVectors(lr.min, cr.min), lr.expandByPoint(hr), hr.addVectors(lr.max, cr.max), lr.expandByPoint(hr)) : (lr.expandByPoint(cr.min), lr.expandByPoint(cr.max));
      }
      lr.getCenter(i2);
      let n2 = 0;
      for (let t3 = 0, o2 = e6.count; t3 < o2; t3++) hr.fromBufferAttribute(e6, t3), n2 = Math.max(n2, i2.distanceToSquared(hr));
      if (t2) for (let o2 = 0, r2 = t2.length; o2 < r2; o2++) {
        const r3 = t2[o2], s2 = this.morphTargetsRelative;
        for (let t3 = 0, o3 = r3.count; t3 < o3; t3++) hr.fromBufferAttribute(r3, t3), s2 && (ar.fromBufferAttribute(e6, t3), hr.add(ar)), n2 = Math.max(n2, i2.distanceToSquared(hr));
      }
      this.boundingSphere.radius = Math.sqrt(n2), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
    }
  }
  computeTangents() {
    const e6 = this.index, t2 = this.attributes;
    if (null === e6 || void 0 === t2.position || void 0 === t2.normal || void 0 === t2.uv) return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");
    const i2 = t2.position, n2 = t2.normal, o2 = t2.uv;
    false === this.hasAttribute("tangent") && this.setAttribute("tangent", new er(new Float32Array(4 * i2.count), 4));
    const r2 = this.getAttribute("tangent"), s2 = [], a2 = [];
    for (let e7 = 0; e7 < i2.count; e7++) s2[e7] = new yn(), a2[e7] = new yn();
    const l2 = new yn(), c2 = new yn(), h2 = new yn(), u2 = new $i(), d2 = new $i(), p2 = new $i(), _2 = new yn(), g2 = new yn();
    function m2(e7, t3, n3) {
      l2.fromBufferAttribute(i2, e7), c2.fromBufferAttribute(i2, t3), h2.fromBufferAttribute(i2, n3), u2.fromBufferAttribute(o2, e7), d2.fromBufferAttribute(o2, t3), p2.fromBufferAttribute(o2, n3), c2.sub(l2), h2.sub(l2), d2.sub(u2), p2.sub(u2);
      const r3 = 1 / (d2.x * p2.y - p2.x * d2.y);
      isFinite(r3) && (_2.copy(c2).multiplyScalar(p2.y).addScaledVector(h2, -d2.y).multiplyScalar(r3), g2.copy(h2).multiplyScalar(d2.x).addScaledVector(c2, -p2.x).multiplyScalar(r3), s2[e7].add(_2), s2[t3].add(_2), s2[n3].add(_2), a2[e7].add(g2), a2[t3].add(g2), a2[n3].add(g2));
    }
    let f2 = this.groups;
    0 === f2.length && (f2 = [{ start: 0, count: e6.count }]);
    for (let t3 = 0, i3 = f2.length; t3 < i3; ++t3) {
      const i4 = f2[t3], n3 = i4.start;
      for (let t4 = n3, o3 = n3 + i4.count; t4 < o3; t4 += 3) m2(e6.getX(t4 + 0), e6.getX(t4 + 1), e6.getX(t4 + 2));
    }
    const v2 = new yn(), A2 = new yn(), b2 = new yn(), y2 = new yn();
    function w2(e7) {
      b2.fromBufferAttribute(n2, e7), y2.copy(b2);
      const t3 = s2[e7];
      v2.copy(t3), v2.sub(b2.multiplyScalar(b2.dot(t3))).normalize(), A2.crossVectors(y2, t3);
      const i3 = A2.dot(a2[e7]) < 0 ? -1 : 1;
      r2.setXYZW(e7, v2.x, v2.y, v2.z, i3);
    }
    for (let t3 = 0, i3 = f2.length; t3 < i3; ++t3) {
      const i4 = f2[t3], n3 = i4.start;
      for (let t4 = n3, o3 = n3 + i4.count; t4 < o3; t4 += 3) w2(e6.getX(t4 + 0)), w2(e6.getX(t4 + 1)), w2(e6.getX(t4 + 2));
    }
  }
  computeVertexNormals() {
    const e6 = this.index, t2 = this.getAttribute("position");
    if (void 0 !== t2) {
      let i2 = this.getAttribute("normal");
      if (void 0 === i2) i2 = new er(new Float32Array(3 * t2.count), 3), this.setAttribute("normal", i2);
      else for (let e7 = 0, t3 = i2.count; e7 < t3; e7++) i2.setXYZ(e7, 0, 0, 0);
      const n2 = new yn(), o2 = new yn(), r2 = new yn(), s2 = new yn(), a2 = new yn(), l2 = new yn(), c2 = new yn(), h2 = new yn();
      if (e6) for (let u2 = 0, d2 = e6.count; u2 < d2; u2 += 3) {
        const d3 = e6.getX(u2 + 0), p2 = e6.getX(u2 + 1), _2 = e6.getX(u2 + 2);
        n2.fromBufferAttribute(t2, d3), o2.fromBufferAttribute(t2, p2), r2.fromBufferAttribute(t2, _2), c2.subVectors(r2, o2), h2.subVectors(n2, o2), c2.cross(h2), s2.fromBufferAttribute(i2, d3), a2.fromBufferAttribute(i2, p2), l2.fromBufferAttribute(i2, _2), s2.add(c2), a2.add(c2), l2.add(c2), i2.setXYZ(d3, s2.x, s2.y, s2.z), i2.setXYZ(p2, a2.x, a2.y, a2.z), i2.setXYZ(_2, l2.x, l2.y, l2.z);
      }
      else for (let e7 = 0, s3 = t2.count; e7 < s3; e7 += 3) n2.fromBufferAttribute(t2, e7 + 0), o2.fromBufferAttribute(t2, e7 + 1), r2.fromBufferAttribute(t2, e7 + 2), c2.subVectors(r2, o2), h2.subVectors(n2, o2), c2.cross(h2), i2.setXYZ(e7 + 0, c2.x, c2.y, c2.z), i2.setXYZ(e7 + 1, c2.x, c2.y, c2.z), i2.setXYZ(e7 + 2, c2.x, c2.y, c2.z);
      this.normalizeNormals(), i2.needsUpdate = true;
    }
  }
  normalizeNormals() {
    const e6 = this.attributes.normal;
    for (let t2 = 0, i2 = e6.count; t2 < i2; t2++) hr.fromBufferAttribute(e6, t2), hr.normalize(), e6.setXYZ(t2, hr.x, hr.y, hr.z);
  }
  toNonIndexed() {
    function e6(e7, t3) {
      const i3 = e7.array, n3 = e7.itemSize, o3 = e7.normalized, r3 = new i3.constructor(t3.length * n3);
      let s2 = 0, a2 = 0;
      for (let o4 = 0, l2 = t3.length; o4 < l2; o4++) {
        s2 = e7.isInterleavedBufferAttribute ? t3[o4] * e7.data.stride + e7.offset : t3[o4] * n3;
        for (let e8 = 0; e8 < n3; e8++) r3[a2++] = i3[s2++];
      }
      return new er(r3, n3, o3);
    }
    if (null === this.index) return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."), this;
    const t2 = new ur(), i2 = this.index.array, n2 = this.attributes;
    for (const o3 in n2) {
      const r3 = e6(n2[o3], i2);
      t2.setAttribute(o3, r3);
    }
    const o2 = this.morphAttributes;
    for (const n3 in o2) {
      const r3 = [], s2 = o2[n3];
      for (let t3 = 0, n4 = s2.length; t3 < n4; t3++) {
        const n5 = e6(s2[t3], i2);
        r3.push(n5);
      }
      t2.morphAttributes[n3] = r3;
    }
    t2.morphTargetsRelative = this.morphTargetsRelative;
    const r2 = this.groups;
    for (let e7 = 0, i3 = r2.length; e7 < i3; e7++) {
      const i4 = r2[e7];
      t2.addGroup(i4.start, i4.count, i4.materialIndex);
    }
    return t2;
  }
  toJSON() {
    const e6 = { metadata: { version: 4.6, type: "BufferGeometry", generator: "BufferGeometry.toJSON" } };
    if (e6.uuid = this.uuid, e6.type = this.type, "" !== this.name && (e6.name = this.name), Object.keys(this.userData).length > 0 && (e6.userData = this.userData), void 0 !== this.parameters) {
      const t3 = this.parameters;
      for (const i3 in t3) void 0 !== t3[i3] && (e6[i3] = t3[i3]);
      return e6;
    }
    e6.data = { attributes: {} };
    const t2 = this.index;
    null !== t2 && (e6.data.index = { type: t2.array.constructor.name, array: Array.prototype.slice.call(t2.array) });
    const i2 = this.attributes;
    for (const t3 in i2) {
      const n3 = i2[t3];
      e6.data.attributes[t3] = n3.toJSON(e6.data);
    }
    const n2 = {};
    let o2 = false;
    for (const t3 in this.morphAttributes) {
      const i3 = this.morphAttributes[t3], r3 = [];
      for (let t4 = 0, n3 = i3.length; t4 < n3; t4++) {
        const n4 = i3[t4];
        r3.push(n4.toJSON(e6.data));
      }
      r3.length > 0 && (n2[t3] = r3, o2 = true);
    }
    o2 && (e6.data.morphAttributes = n2, e6.data.morphTargetsRelative = this.morphTargetsRelative);
    const r2 = this.groups;
    r2.length > 0 && (e6.data.groups = JSON.parse(JSON.stringify(r2)));
    const s2 = this.boundingSphere;
    return null !== s2 && (e6.data.boundingSphere = { center: s2.center.toArray(), radius: s2.radius }), e6;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e6) {
    this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null;
    const t2 = {};
    this.name = e6.name;
    const i2 = e6.index;
    null !== i2 && this.setIndex(i2.clone(t2));
    const n2 = e6.attributes;
    for (const e7 in n2) {
      const i3 = n2[e7];
      this.setAttribute(e7, i3.clone(t2));
    }
    const o2 = e6.morphAttributes;
    for (const e7 in o2) {
      const i3 = [], n3 = o2[e7];
      for (let e8 = 0, o3 = n3.length; e8 < o3; e8++) i3.push(n3[e8].clone(t2));
      this.morphAttributes[e7] = i3;
    }
    this.morphTargetsRelative = e6.morphTargetsRelative;
    const r2 = e6.groups;
    for (let e7 = 0, t3 = r2.length; e7 < t3; e7++) {
      const t4 = r2[e7];
      this.addGroup(t4.start, t4.count, t4.materialIndex);
    }
    const s2 = e6.boundingBox;
    null !== s2 && (this.boundingBox = s2.clone());
    const a2 = e6.boundingSphere;
    return null !== a2 && (this.boundingSphere = a2.clone()), this.drawRange.start = e6.drawRange.start, this.drawRange.count = e6.drawRange.count, this.userData = e6.userData, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
}
const dr = new Kn(), pr = new Yn(), _r = new Qn(), gr = new yn(), mr = new yn(), fr = new yn(), vr = new yn(), Ar = new yn(), br = new yn(), yr = new yn(), wr = new yn();
class xr extends So {
  constructor(e6 = new ur(), t2 = new jo()) {
    super(), this.isMesh = true, this.type = "Mesh", this.geometry = e6, this.material = t2, this.updateMorphTargets();
  }
  copy(e6, t2) {
    return super.copy(e6, t2), void 0 !== e6.morphTargetInfluences && (this.morphTargetInfluences = e6.morphTargetInfluences.slice()), void 0 !== e6.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, e6.morphTargetDictionary)), this.material = Array.isArray(e6.material) ? e6.material.slice() : e6.material, this.geometry = e6.geometry, this;
  }
  updateMorphTargets() {
    const e6 = this.geometry.morphAttributes, t2 = Object.keys(e6);
    if (t2.length > 0) {
      const i2 = e6[t2[0]];
      if (void 0 !== i2) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let e7 = 0, t3 = i2.length; e7 < t3; e7++) {
          const t4 = i2[e7].name || String(e7);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[t4] = e7;
        }
      }
    }
  }
  getVertexPosition(e6, t2) {
    const i2 = this.geometry, n2 = i2.attributes.position, o2 = i2.morphAttributes.position, r2 = i2.morphTargetsRelative;
    t2.fromBufferAttribute(n2, e6);
    const s2 = this.morphTargetInfluences;
    if (o2 && s2) {
      br.set(0, 0, 0);
      for (let i3 = 0, n3 = o2.length; i3 < n3; i3++) {
        const n4 = s2[i3], a2 = o2[i3];
        0 !== n4 && (Ar.fromBufferAttribute(a2, e6), r2 ? br.addScaledVector(Ar, n4) : br.addScaledVector(Ar.sub(t2), n4));
      }
      t2.add(br);
    }
    return t2;
  }
  raycast(e6, t2) {
    const i2 = this.geometry, n2 = this.material, o2 = this.matrixWorld;
    if (void 0 !== n2) {
      if (null === i2.boundingSphere && i2.computeBoundingSphere(), _r.copy(i2.boundingSphere), _r.applyMatrix4(o2), pr.copy(e6.ray).recast(e6.near), false === _r.containsPoint(pr.origin)) {
        if (null === pr.intersectSphere(_r, gr)) return;
        if (pr.origin.distanceToSquared(gr) > (e6.far - e6.near) ** 2) return;
      }
      dr.copy(o2).invert(), pr.copy(e6.ray).applyMatrix4(dr), null !== i2.boundingBox && false === pr.intersectsBox(i2.boundingBox) || this._computeIntersections(e6, t2, pr);
    }
  }
  _computeIntersections(e6, t2, i2) {
    let n2;
    const o2 = this.geometry, r2 = this.material, s2 = o2.index, a2 = o2.attributes.position, l2 = o2.attributes.uv, c2 = o2.attributes.uv1, h2 = o2.attributes.normal, u2 = o2.groups, d2 = o2.drawRange;
    if (null !== s2) if (Array.isArray(r2)) for (let o3 = 0, a3 = u2.length; o3 < a3; o3++) {
      const a4 = u2[o3], p2 = r2[a4.materialIndex];
      for (let o4 = Math.max(a4.start, d2.start), r3 = Math.min(s2.count, Math.min(a4.start + a4.count, d2.start + d2.count)); o4 < r3; o4 += 3) {
        n2 = Cr(this, p2, e6, i2, l2, c2, h2, s2.getX(o4), s2.getX(o4 + 1), s2.getX(o4 + 2)), n2 && (n2.faceIndex = Math.floor(o4 / 3), n2.face.materialIndex = a4.materialIndex, t2.push(n2));
      }
    }
    else {
      for (let o3 = Math.max(0, d2.start), a3 = Math.min(s2.count, d2.start + d2.count); o3 < a3; o3 += 3) {
        n2 = Cr(this, r2, e6, i2, l2, c2, h2, s2.getX(o3), s2.getX(o3 + 1), s2.getX(o3 + 2)), n2 && (n2.faceIndex = Math.floor(o3 / 3), t2.push(n2));
      }
    }
    else if (void 0 !== a2) if (Array.isArray(r2)) for (let o3 = 0, s3 = u2.length; o3 < s3; o3++) {
      const s4 = u2[o3], p2 = r2[s4.materialIndex];
      for (let o4 = Math.max(s4.start, d2.start), r3 = Math.min(a2.count, Math.min(s4.start + s4.count, d2.start + d2.count)); o4 < r3; o4 += 3) {
        n2 = Cr(this, p2, e6, i2, l2, c2, h2, o4, o4 + 1, o4 + 2), n2 && (n2.faceIndex = Math.floor(o4 / 3), n2.face.materialIndex = s4.materialIndex, t2.push(n2));
      }
    }
    else {
      for (let o3 = Math.max(0, d2.start), s3 = Math.min(a2.count, d2.start + d2.count); o3 < s3; o3 += 3) {
        n2 = Cr(this, r2, e6, i2, l2, c2, h2, o3, o3 + 1, o3 + 2), n2 && (n2.faceIndex = Math.floor(o3 / 3), t2.push(n2));
      }
    }
  }
}
function Cr(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2) {
  e6.getVertexPosition(a2, mr), e6.getVertexPosition(l2, fr), e6.getVertexPosition(c2, vr);
  const h2 = function(e7, t3, i3, n3, o3, r3, s3, a3) {
    let l3;
    if (l3 = 1 === t3.side ? n3.intersectTriangle(s3, r3, o3, true, a3) : n3.intersectTriangle(o3, r3, s3, 0 === t3.side, a3), null === l3) return null;
    wr.copy(a3), wr.applyMatrix4(e7.matrixWorld);
    const c3 = i3.ray.origin.distanceTo(wr);
    return c3 < i3.near || c3 > i3.far ? null : { distance: c3, point: wr.clone(), object: e7 };
  }(e6, t2, i2, n2, mr, fr, vr, yr);
  if (h2) {
    const e7 = new yn();
    Uo.getBarycoord(yr, mr, fr, vr, e7), o2 && (h2.uv = Uo.getInterpolatedAttribute(o2, a2, l2, c2, e7, new $i())), r2 && (h2.uv1 = Uo.getInterpolatedAttribute(r2, a2, l2, c2, e7, new $i())), s2 && (h2.normal = Uo.getInterpolatedAttribute(s2, a2, l2, c2, e7, new yn()), h2.normal.dot(n2.direction) > 0 && h2.normal.multiplyScalar(-1));
    const t3 = { a: a2, b: l2, c: c2, normal: new yn(), materialIndex: 0 };
    Uo.getNormal(mr, fr, vr, t3.normal), h2.face = t3, h2.barycoord = e7;
  }
  return h2;
}
class Sr extends ur {
  constructor(e6 = 1, t2 = 1, i2 = 1, n2 = 1, o2 = 1, r2 = 1) {
    super(), this.type = "BoxGeometry", this.parameters = { width: e6, height: t2, depth: i2, widthSegments: n2, heightSegments: o2, depthSegments: r2 };
    const s2 = this;
    n2 = Math.floor(n2), o2 = Math.floor(o2), r2 = Math.floor(r2);
    const a2 = [], l2 = [], c2 = [], h2 = [];
    let u2 = 0, d2 = 0;
    function p2(e7, t3, i3, n3, o3, r3, p3, _2, g2, m2, f2) {
      const v2 = r3 / g2, A2 = p3 / m2, b2 = r3 / 2, y2 = p3 / 2, w2 = _2 / 2, x2 = g2 + 1, C2 = m2 + 1;
      let S2 = 0, E2 = 0;
      const T2 = new yn();
      for (let r4 = 0; r4 < C2; r4++) {
        const s3 = r4 * A2 - y2;
        for (let a3 = 0; a3 < x2; a3++) {
          const u3 = a3 * v2 - b2;
          T2[e7] = u3 * n3, T2[t3] = s3 * o3, T2[i3] = w2, l2.push(T2.x, T2.y, T2.z), T2[e7] = 0, T2[t3] = 0, T2[i3] = _2 > 0 ? 1 : -1, c2.push(T2.x, T2.y, T2.z), h2.push(a3 / g2), h2.push(1 - r4 / m2), S2 += 1;
        }
      }
      for (let e8 = 0; e8 < m2; e8++) for (let t4 = 0; t4 < g2; t4++) {
        const i4 = u2 + t4 + x2 * e8, n4 = u2 + t4 + x2 * (e8 + 1), o4 = u2 + (t4 + 1) + x2 * (e8 + 1), r4 = u2 + (t4 + 1) + x2 * e8;
        a2.push(i4, n4, r4), a2.push(n4, o4, r4), E2 += 6;
      }
      s2.addGroup(d2, E2, f2), d2 += E2, u2 += S2;
    }
    p2("z", "y", "x", -1, -1, i2, t2, e6, r2, o2, 0), p2("z", "y", "x", 1, -1, i2, t2, -e6, r2, o2, 1), p2("x", "z", "y", 1, 1, e6, i2, t2, n2, r2, 2), p2("x", "z", "y", 1, -1, e6, i2, -t2, n2, r2, 3), p2("x", "y", "z", 1, -1, e6, t2, i2, n2, o2, 4), p2("x", "y", "z", -1, -1, e6, t2, -i2, n2, o2, 5), this.setIndex(a2), this.setAttribute("position", new nr(l2, 3)), this.setAttribute("normal", new nr(c2, 3)), this.setAttribute("uv", new nr(h2, 2));
  }
  copy(e6) {
    return super.copy(e6), this.parameters = Object.assign({}, e6.parameters), this;
  }
  static fromJSON(e6) {
    return new Sr(e6.width, e6.height, e6.depth, e6.widthSegments, e6.heightSegments, e6.depthSegments);
  }
}
function Er(e6) {
  const t2 = {};
  for (const i2 in e6) {
    t2[i2] = {};
    for (const n2 in e6[i2]) {
      const o2 = e6[i2][n2];
      o2 && (o2.isColor || o2.isMatrix3 || o2.isMatrix4 || o2.isVector2 || o2.isVector3 || o2.isVector4 || o2.isTexture || o2.isQuaternion) ? o2.isRenderTargetTexture ? (console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."), t2[i2][n2] = null) : t2[i2][n2] = o2.clone() : Array.isArray(o2) ? t2[i2][n2] = o2.slice() : t2[i2][n2] = o2;
    }
  }
  return t2;
}
function Tr(e6) {
  const t2 = {};
  for (let i2 = 0; i2 < e6.length; i2++) {
    const n2 = Er(e6[i2]);
    for (const e7 in n2) t2[e7] = n2[e7];
  }
  return t2;
}
function Ir(e6) {
  const t2 = e6.getRenderTarget();
  return null === t2 ? e6.outputColorSpace : true === t2.isXRRenderTarget ? t2.texture.colorSpace : rn.workingColorSpace;
}
const Mr = { clone: Er, merge: Tr };
class Br extends Wo {
  constructor(e6) {
    super(), this.isShaderMaterial = true, this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.uniformsGroups = [], this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.linewidth = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.fog = false, this.lights = false, this.clipping = false, this.forceSinglePass = true, this.extensions = { clipCullDistance: false, multiDraw: false }, this.defaultAttributeValues = { color: [1, 1, 1], uv: [0, 0], uv1: [0, 0] }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = false, this.glslVersion = null, void 0 !== e6 && this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.fragmentShader = e6.fragmentShader, this.vertexShader = e6.vertexShader, this.uniforms = Er(e6.uniforms), this.uniformsGroups = function(e7) {
      const t2 = [];
      for (let i2 = 0; i2 < e7.length; i2++) t2.push(e7[i2].clone());
      return t2;
    }(e6.uniformsGroups), this.defines = Object.assign({}, e6.defines), this.wireframe = e6.wireframe, this.wireframeLinewidth = e6.wireframeLinewidth, this.fog = e6.fog, this.lights = e6.lights, this.clipping = e6.clipping, this.extensions = Object.assign({}, e6.extensions), this.glslVersion = e6.glslVersion, this;
  }
  toJSON(e6) {
    const t2 = super.toJSON(e6);
    t2.glslVersion = this.glslVersion, t2.uniforms = {};
    for (const i3 in this.uniforms) {
      const n2 = this.uniforms[i3].value;
      n2 && n2.isTexture ? t2.uniforms[i3] = { type: "t", value: n2.toJSON(e6).uuid } : n2 && n2.isColor ? t2.uniforms[i3] = { type: "c", value: n2.getHex() } : n2 && n2.isVector2 ? t2.uniforms[i3] = { type: "v2", value: n2.toArray() } : n2 && n2.isVector3 ? t2.uniforms[i3] = { type: "v3", value: n2.toArray() } : n2 && n2.isVector4 ? t2.uniforms[i3] = { type: "v4", value: n2.toArray() } : n2 && n2.isMatrix3 ? t2.uniforms[i3] = { type: "m3", value: n2.toArray() } : n2 && n2.isMatrix4 ? t2.uniforms[i3] = { type: "m4", value: n2.toArray() } : t2.uniforms[i3] = { value: n2 };
    }
    Object.keys(this.defines).length > 0 && (t2.defines = this.defines), t2.vertexShader = this.vertexShader, t2.fragmentShader = this.fragmentShader, t2.lights = this.lights, t2.clipping = this.clipping;
    const i2 = {};
    for (const e7 in this.extensions) true === this.extensions[e7] && (i2[e7] = true);
    return Object.keys(i2).length > 0 && (t2.extensions = i2), t2;
  }
}
class Rr extends So {
  constructor() {
    super(), this.isCamera = true, this.type = "Camera", this.matrixWorldInverse = new Kn(), this.projectionMatrix = new Kn(), this.projectionMatrixInverse = new Kn(), this.coordinateSystem = ki;
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.matrixWorldInverse.copy(e6.matrixWorldInverse), this.projectionMatrix.copy(e6.projectionMatrix), this.projectionMatrixInverse.copy(e6.projectionMatrixInverse), this.coordinateSystem = e6.coordinateSystem, this;
  }
  getWorldDirection(e6) {
    return super.getWorldDirection(e6).negate();
  }
  updateMatrixWorld(e6) {
    super.updateMatrixWorld(e6), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  updateWorldMatrix(e6, t2) {
    super.updateWorldMatrix(e6, t2), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  clone() {
    return new this.constructor().copy(this);
  }
}
const kr = new yn(), Pr = new $i(), Dr = new $i();
class Lr extends Rr {
  constructor(e6 = 50, t2 = 1, i2 = 0.1, n2 = 2e3) {
    super(), this.isPerspectiveCamera = true, this.type = "PerspectiveCamera", this.fov = e6, this.zoom = 1, this.near = i2, this.far = n2, this.focus = 10, this.aspect = t2, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix();
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.fov = e6.fov, this.zoom = e6.zoom, this.near = e6.near, this.far = e6.far, this.focus = e6.focus, this.aspect = e6.aspect, this.view = null === e6.view ? null : Object.assign({}, e6.view), this.filmGauge = e6.filmGauge, this.filmOffset = e6.filmOffset, this;
  }
  setFocalLength(e6) {
    const t2 = 0.5 * this.getFilmHeight() / e6;
    this.fov = 2 * Oi * Math.atan(t2), this.updateProjectionMatrix();
  }
  getFocalLength() {
    const e6 = Math.tan(0.5 * Ni * this.fov);
    return 0.5 * this.getFilmHeight() / e6;
  }
  getEffectiveFOV() {
    return 2 * Oi * Math.atan(Math.tan(0.5 * Ni * this.fov) / this.zoom);
  }
  getFilmWidth() {
    return this.filmGauge * Math.min(this.aspect, 1);
  }
  getFilmHeight() {
    return this.filmGauge / Math.max(this.aspect, 1);
  }
  getViewBounds(e6, t2, i2) {
    kr.set(-1, -1, 0.5).applyMatrix4(this.projectionMatrixInverse), t2.set(kr.x, kr.y).multiplyScalar(-e6 / kr.z), kr.set(1, 1, 0.5).applyMatrix4(this.projectionMatrixInverse), i2.set(kr.x, kr.y).multiplyScalar(-e6 / kr.z);
  }
  getViewSize(e6, t2) {
    return this.getViewBounds(e6, Pr, Dr), t2.subVectors(Dr, Pr);
  }
  setViewOffset(e6, t2, i2, n2, o2, r2) {
    this.aspect = e6 / t2, null === this.view && (this.view = { enabled: true, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = true, this.view.fullWidth = e6, this.view.fullHeight = t2, this.view.offsetX = i2, this.view.offsetY = n2, this.view.width = o2, this.view.height = r2, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    null !== this.view && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e6 = this.near;
    let t2 = e6 * Math.tan(0.5 * Ni * this.fov) / this.zoom, i2 = 2 * t2, n2 = this.aspect * i2, o2 = -0.5 * n2;
    const r2 = this.view;
    if (null !== this.view && this.view.enabled) {
      const e7 = r2.fullWidth, s3 = r2.fullHeight;
      o2 += r2.offsetX * n2 / e7, t2 -= r2.offsetY * i2 / s3, n2 *= r2.width / e7, i2 *= r2.height / s3;
    }
    const s2 = this.filmOffset;
    0 !== s2 && (o2 += e6 * s2 / this.getFilmWidth()), this.projectionMatrix.makePerspective(o2, o2 + n2, t2, t2 - i2, e6, this.far, this.coordinateSystem), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e6) {
    const t2 = super.toJSON(e6);
    return t2.object.fov = this.fov, t2.object.zoom = this.zoom, t2.object.near = this.near, t2.object.far = this.far, t2.object.focus = this.focus, t2.object.aspect = this.aspect, null !== this.view && (t2.object.view = Object.assign({}, this.view)), t2.object.filmGauge = this.filmGauge, t2.object.filmOffset = this.filmOffset, t2;
  }
}
const Fr = -90;
class Nr extends So {
  constructor(e6, t2, i2) {
    super(), this.type = "CubeCamera", this.renderTarget = i2, this.coordinateSystem = null, this.activeMipmapLevel = 0;
    const n2 = new Lr(Fr, 1, e6, t2);
    n2.layers = this.layers, this.add(n2);
    const o2 = new Lr(Fr, 1, e6, t2);
    o2.layers = this.layers, this.add(o2);
    const r2 = new Lr(Fr, 1, e6, t2);
    r2.layers = this.layers, this.add(r2);
    const s2 = new Lr(Fr, 1, e6, t2);
    s2.layers = this.layers, this.add(s2);
    const a2 = new Lr(Fr, 1, e6, t2);
    a2.layers = this.layers, this.add(a2);
    const l2 = new Lr(Fr, 1, e6, t2);
    l2.layers = this.layers, this.add(l2);
  }
  updateCoordinateSystem() {
    const e6 = this.coordinateSystem, t2 = this.children.concat(), [i2, n2, o2, r2, s2, a2] = t2;
    for (const e7 of t2) this.remove(e7);
    if (e6 === ki) i2.up.set(0, 1, 0), i2.lookAt(1, 0, 0), n2.up.set(0, 1, 0), n2.lookAt(-1, 0, 0), o2.up.set(0, 0, -1), o2.lookAt(0, 1, 0), r2.up.set(0, 0, 1), r2.lookAt(0, -1, 0), s2.up.set(0, 1, 0), s2.lookAt(0, 0, 1), a2.up.set(0, 1, 0), a2.lookAt(0, 0, -1);
    else {
      if (e6 !== Pi) throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: " + e6);
      i2.up.set(0, -1, 0), i2.lookAt(-1, 0, 0), n2.up.set(0, -1, 0), n2.lookAt(1, 0, 0), o2.up.set(0, 0, 1), o2.lookAt(0, 1, 0), r2.up.set(0, 0, -1), r2.lookAt(0, -1, 0), s2.up.set(0, -1, 0), s2.lookAt(0, 0, 1), a2.up.set(0, -1, 0), a2.lookAt(0, 0, -1);
    }
    for (const e7 of t2) this.add(e7), e7.updateMatrixWorld();
  }
  update(e6, t2) {
    null === this.parent && this.updateMatrixWorld();
    const { renderTarget: i2, activeMipmapLevel: n2 } = this;
    this.coordinateSystem !== e6.coordinateSystem && (this.coordinateSystem = e6.coordinateSystem, this.updateCoordinateSystem());
    const [o2, r2, s2, a2, l2, c2] = this.children, h2 = e6.getRenderTarget(), u2 = e6.getActiveCubeFace(), d2 = e6.getActiveMipmapLevel(), p2 = e6.xr.enabled;
    e6.xr.enabled = false;
    const _2 = i2.texture.generateMipmaps;
    i2.texture.generateMipmaps = false, e6.setRenderTarget(i2, 0, n2), e6.render(t2, o2), e6.setRenderTarget(i2, 1, n2), e6.render(t2, r2), e6.setRenderTarget(i2, 2, n2), e6.render(t2, s2), e6.setRenderTarget(i2, 3, n2), e6.render(t2, a2), e6.setRenderTarget(i2, 4, n2), e6.render(t2, l2), i2.texture.generateMipmaps = _2, e6.setRenderTarget(i2, 5, n2), e6.render(t2, c2), e6.setRenderTarget(h2, u2, d2), e6.xr.enabled = p2, i2.texture.needsPMREMUpdate = true;
  }
}
class Or extends _n {
  constructor(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2) {
    super(e6 = void 0 !== e6 ? e6 : [], t2 = void 0 !== t2 ? t2 : We, i2, n2, o2, r2, s2, a2, l2, c2), this.isCubeTexture = true, this.flipY = false;
  }
  get images() {
    return this.image;
  }
  set images(e6) {
    this.image = e6;
  }
}
class Ur extends fn {
  constructor(e6 = 1, t2 = {}) {
    super(e6, e6, t2), this.isWebGLCubeRenderTarget = true;
    const i2 = { width: e6, height: e6, depth: 1 }, n2 = [i2, i2, i2, i2, i2, i2];
    this.texture = new Or(n2, t2.mapping, t2.wrapS, t2.wrapT, t2.magFilter, t2.minFilter, t2.format, t2.type, t2.anisotropy, t2.colorSpace), this.texture.isRenderTargetTexture = true, this.texture.generateMipmaps = void 0 !== t2.generateMipmaps && t2.generateMipmaps, this.texture.minFilter = void 0 !== t2.minFilter ? t2.minFilter : nt;
  }
  fromEquirectangularTexture(e6, t2) {
    this.texture.type = t2.type, this.texture.colorSpace = t2.colorSpace, this.texture.generateMipmaps = t2.generateMipmaps, this.texture.minFilter = t2.minFilter, this.texture.magFilter = t2.magFilter;
    const i2 = { uniforms: { tEquirect: { value: null } }, vertexShader: "\n\n				varying vec3 vWorldDirection;\n\n				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n				}\n\n				void main() {\n\n					vWorldDirection = transformDirection( position, modelMatrix );\n\n					#include <begin_vertex>\n					#include <project_vertex>\n\n				}\n			", fragmentShader: "\n\n				uniform sampler2D tEquirect;\n\n				varying vec3 vWorldDirection;\n\n				#include <common>\n\n				void main() {\n\n					vec3 direction = normalize( vWorldDirection );\n\n					vec2 sampleUV = equirectUv( direction );\n\n					gl_FragColor = texture2D( tEquirect, sampleUV );\n\n				}\n			" }, n2 = new Sr(5, 5, 5), o2 = new Br({ name: "CubemapFromEquirect", uniforms: Er(i2.uniforms), vertexShader: i2.vertexShader, fragmentShader: i2.fragmentShader, side: 1, blending: 0 });
    o2.uniforms.tEquirect.value = t2;
    const r2 = new xr(n2, o2), s2 = t2.minFilter;
    t2.minFilter === rt && (t2.minFilter = nt);
    return new Nr(1, 10, this).update(e6, r2), t2.minFilter = s2, r2.geometry.dispose(), r2.material.dispose(), this;
  }
  clear(e6, t2, i2, n2) {
    const o2 = e6.getRenderTarget();
    for (let o3 = 0; o3 < 6; o3++) e6.setRenderTarget(this, o3), e6.clear(t2, i2, n2);
    e6.setRenderTarget(o2);
  }
}
const zr = new yn(), Hr = new yn(), Qr = new Wi();
class Vr {
  constructor(e6 = new yn(1, 0, 0), t2 = 0) {
    this.isPlane = true, this.normal = e6, this.constant = t2;
  }
  set(e6, t2) {
    return this.normal.copy(e6), this.constant = t2, this;
  }
  setComponents(e6, t2, i2, n2) {
    return this.normal.set(e6, t2, i2), this.constant = n2, this;
  }
  setFromNormalAndCoplanarPoint(e6, t2) {
    return this.normal.copy(e6), this.constant = -t2.dot(this.normal), this;
  }
  setFromCoplanarPoints(e6, t2, i2) {
    const n2 = zr.subVectors(i2, t2).cross(Hr.subVectors(e6, t2)).normalize();
    return this.setFromNormalAndCoplanarPoint(n2, e6), this;
  }
  copy(e6) {
    return this.normal.copy(e6.normal), this.constant = e6.constant, this;
  }
  normalize() {
    const e6 = 1 / this.normal.length();
    return this.normal.multiplyScalar(e6), this.constant *= e6, this;
  }
  negate() {
    return this.constant *= -1, this.normal.negate(), this;
  }
  distanceToPoint(e6) {
    return this.normal.dot(e6) + this.constant;
  }
  distanceToSphere(e6) {
    return this.distanceToPoint(e6.center) - e6.radius;
  }
  projectPoint(e6, t2) {
    return t2.copy(e6).addScaledVector(this.normal, -this.distanceToPoint(e6));
  }
  intersectLine(e6, t2) {
    const i2 = e6.delta(zr), n2 = this.normal.dot(i2);
    if (0 === n2) return 0 === this.distanceToPoint(e6.start) ? t2.copy(e6.start) : null;
    const o2 = -(e6.start.dot(this.normal) + this.constant) / n2;
    return o2 < 0 || o2 > 1 ? null : t2.copy(e6.start).addScaledVector(i2, o2);
  }
  intersectsLine(e6) {
    const t2 = this.distanceToPoint(e6.start), i2 = this.distanceToPoint(e6.end);
    return t2 < 0 && i2 > 0 || i2 < 0 && t2 > 0;
  }
  intersectsBox(e6) {
    return e6.intersectsPlane(this);
  }
  intersectsSphere(e6) {
    return e6.intersectsPlane(this);
  }
  coplanarPoint(e6) {
    return e6.copy(this.normal).multiplyScalar(-this.constant);
  }
  applyMatrix4(e6, t2) {
    const i2 = t2 || Qr.getNormalMatrix(e6), n2 = this.coplanarPoint(zr).applyMatrix4(e6), o2 = this.normal.applyMatrix3(i2).normalize();
    return this.constant = -n2.dot(o2), this;
  }
  translate(e6) {
    return this.constant -= e6.dot(this.normal), this;
  }
  equals(e6) {
    return e6.normal.equals(this.normal) && e6.constant === this.constant;
  }
  clone() {
    return new this.constructor().copy(this);
  }
}
const Gr = new Qn(), qr = new yn();
class $r {
  constructor(e6 = new Vr(), t2 = new Vr(), i2 = new Vr(), n2 = new Vr(), o2 = new Vr(), r2 = new Vr()) {
    this.planes = [e6, t2, i2, n2, o2, r2];
  }
  set(e6, t2, i2, n2, o2, r2) {
    const s2 = this.planes;
    return s2[0].copy(e6), s2[1].copy(t2), s2[2].copy(i2), s2[3].copy(n2), s2[4].copy(o2), s2[5].copy(r2), this;
  }
  copy(e6) {
    const t2 = this.planes;
    for (let i2 = 0; i2 < 6; i2++) t2[i2].copy(e6.planes[i2]);
    return this;
  }
  setFromProjectionMatrix(e6, t2 = 2e3) {
    const i2 = this.planes, n2 = e6.elements, o2 = n2[0], r2 = n2[1], s2 = n2[2], a2 = n2[3], l2 = n2[4], c2 = n2[5], h2 = n2[6], u2 = n2[7], d2 = n2[8], p2 = n2[9], _2 = n2[10], g2 = n2[11], m2 = n2[12], f2 = n2[13], v2 = n2[14], A2 = n2[15];
    if (i2[0].setComponents(a2 - o2, u2 - l2, g2 - d2, A2 - m2).normalize(), i2[1].setComponents(a2 + o2, u2 + l2, g2 + d2, A2 + m2).normalize(), i2[2].setComponents(a2 + r2, u2 + c2, g2 + p2, A2 + f2).normalize(), i2[3].setComponents(a2 - r2, u2 - c2, g2 - p2, A2 - f2).normalize(), i2[4].setComponents(a2 - s2, u2 - h2, g2 - _2, A2 - v2).normalize(), t2 === ki) i2[5].setComponents(a2 + s2, u2 + h2, g2 + _2, A2 + v2).normalize();
    else {
      if (t2 !== Pi) throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: " + t2);
      i2[5].setComponents(s2, h2, _2, v2).normalize();
    }
    return this;
  }
  intersectsObject(e6) {
    if (void 0 !== e6.boundingSphere) null === e6.boundingSphere && e6.computeBoundingSphere(), Gr.copy(e6.boundingSphere).applyMatrix4(e6.matrixWorld);
    else {
      const t2 = e6.geometry;
      null === t2.boundingSphere && t2.computeBoundingSphere(), Gr.copy(t2.boundingSphere).applyMatrix4(e6.matrixWorld);
    }
    return this.intersectsSphere(Gr);
  }
  intersectsSprite(e6) {
    return Gr.center.set(0, 0, 0), Gr.radius = 0.7071067811865476, Gr.applyMatrix4(e6.matrixWorld), this.intersectsSphere(Gr);
  }
  intersectsSphere(e6) {
    const t2 = this.planes, i2 = e6.center, n2 = -e6.radius;
    for (let e7 = 0; e7 < 6; e7++) {
      if (t2[e7].distanceToPoint(i2) < n2) return false;
    }
    return true;
  }
  intersectsBox(e6) {
    const t2 = this.planes;
    for (let i2 = 0; i2 < 6; i2++) {
      const n2 = t2[i2];
      if (qr.x = n2.normal.x > 0 ? e6.max.x : e6.min.x, qr.y = n2.normal.y > 0 ? e6.max.y : e6.min.y, qr.z = n2.normal.z > 0 ? e6.max.z : e6.min.z, n2.distanceToPoint(qr) < 0) return false;
    }
    return true;
  }
  containsPoint(e6) {
    const t2 = this.planes;
    for (let i2 = 0; i2 < 6; i2++) if (t2[i2].distanceToPoint(e6) < 0) return false;
    return true;
  }
  clone() {
    return new this.constructor().copy(this);
  }
}
function Wr() {
  let e6 = null, t2 = false, i2 = null, n2 = null;
  function o2(t3, r2) {
    i2(t3, r2), n2 = e6.requestAnimationFrame(o2);
  }
  return { start: function() {
    true !== t2 && null !== i2 && (n2 = e6.requestAnimationFrame(o2), t2 = true);
  }, stop: function() {
    e6.cancelAnimationFrame(n2), t2 = false;
  }, setAnimationLoop: function(e7) {
    i2 = e7;
  }, setContext: function(t3) {
    e6 = t3;
  } };
}
function jr(e6) {
  const t2 = /* @__PURE__ */ new WeakMap();
  return { get: function(e7) {
    return e7.isInterleavedBufferAttribute && (e7 = e7.data), t2.get(e7);
  }, remove: function(i2) {
    i2.isInterleavedBufferAttribute && (i2 = i2.data);
    const n2 = t2.get(i2);
    n2 && (e6.deleteBuffer(n2.buffer), t2.delete(i2));
  }, update: function(i2, n2) {
    if (i2.isInterleavedBufferAttribute && (i2 = i2.data), i2.isGLBufferAttribute) {
      const e7 = t2.get(i2);
      return void ((!e7 || e7.version < i2.version) && t2.set(i2, { buffer: i2.buffer, type: i2.type, bytesPerElement: i2.elementSize, version: i2.version }));
    }
    const o2 = t2.get(i2);
    if (void 0 === o2) t2.set(i2, function(t3, i3) {
      const n3 = t3.array, o3 = t3.usage, r2 = n3.byteLength, s2 = e6.createBuffer();
      let a2;
      if (e6.bindBuffer(i3, s2), e6.bufferData(i3, n3, o3), t3.onUploadCallback(), n3 instanceof Float32Array) a2 = e6.FLOAT;
      else if (n3 instanceof Uint16Array) a2 = t3.isFloat16BufferAttribute ? e6.HALF_FLOAT : e6.UNSIGNED_SHORT;
      else if (n3 instanceof Int16Array) a2 = e6.SHORT;
      else if (n3 instanceof Uint32Array) a2 = e6.UNSIGNED_INT;
      else if (n3 instanceof Int32Array) a2 = e6.INT;
      else if (n3 instanceof Int8Array) a2 = e6.BYTE;
      else if (n3 instanceof Uint8Array) a2 = e6.UNSIGNED_BYTE;
      else {
        if (!(n3 instanceof Uint8ClampedArray)) throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: " + n3);
        a2 = e6.UNSIGNED_BYTE;
      }
      return { buffer: s2, type: a2, bytesPerElement: n3.BYTES_PER_ELEMENT, version: t3.version, size: r2 };
    }(i2, n2));
    else if (o2.version < i2.version) {
      if (o2.size !== i2.array.byteLength) throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");
      !function(t3, i3, n3) {
        const o3 = i3.array, r2 = i3.updateRanges;
        if (e6.bindBuffer(n3, t3), 0 === r2.length) e6.bufferSubData(n3, 0, o3);
        else {
          r2.sort((e7, t5) => e7.start - t5.start);
          let t4 = 0;
          for (let e7 = 1; e7 < r2.length; e7++) {
            const i4 = r2[t4], n4 = r2[e7];
            n4.start <= i4.start + i4.count + 1 ? i4.count = Math.max(i4.count, n4.start + n4.count - i4.start) : (++t4, r2[t4] = n4);
          }
          r2.length = t4 + 1;
          for (let t5 = 0, i4 = r2.length; t5 < i4; t5++) {
            const i5 = r2[t5];
            e6.bufferSubData(n3, i5.start * o3.BYTES_PER_ELEMENT, o3, i5.start, i5.count);
          }
          i3.clearUpdateRanges();
        }
        i3.onUploadCallback();
      }(o2.buffer, i2, n2), o2.version = i2.version;
    }
  } };
}
class Xr extends ur {
  constructor(e6 = 1, t2 = 1, i2 = 1, n2 = 1) {
    super(), this.type = "PlaneGeometry", this.parameters = { width: e6, height: t2, widthSegments: i2, heightSegments: n2 };
    const o2 = e6 / 2, r2 = t2 / 2, s2 = Math.floor(i2), a2 = Math.floor(n2), l2 = s2 + 1, c2 = a2 + 1, h2 = e6 / s2, u2 = t2 / a2, d2 = [], p2 = [], _2 = [], g2 = [];
    for (let e7 = 0; e7 < c2; e7++) {
      const t3 = e7 * u2 - r2;
      for (let i3 = 0; i3 < l2; i3++) {
        const n3 = i3 * h2 - o2;
        p2.push(n3, -t3, 0), _2.push(0, 0, 1), g2.push(i3 / s2), g2.push(1 - e7 / a2);
      }
    }
    for (let e7 = 0; e7 < a2; e7++) for (let t3 = 0; t3 < s2; t3++) {
      const i3 = t3 + l2 * e7, n3 = t3 + l2 * (e7 + 1), o3 = t3 + 1 + l2 * (e7 + 1), r3 = t3 + 1 + l2 * e7;
      d2.push(i3, n3, r3), d2.push(n3, o3, r3);
    }
    this.setIndex(d2), this.setAttribute("position", new nr(p2, 3)), this.setAttribute("normal", new nr(_2, 3)), this.setAttribute("uv", new nr(g2, 2));
  }
  copy(e6) {
    return super.copy(e6), this.parameters = Object.assign({}, e6.parameters), this;
  }
  static fromJSON(e6) {
    return new Xr(e6.width, e6.height, e6.widthSegments, e6.heightSegments);
  }
}
const Yr = { alphahash_fragment: "#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif", alphahash_pars_fragment: "#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif", alphamap_fragment: "#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif", alphamap_pars_fragment: "#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif", alphatest_fragment: "#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif", alphatest_pars_fragment: "#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif", aomap_fragment: "#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif", aomap_pars_fragment: "#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif", batching_pars_vertex: "#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif", batching_vertex: "#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif", begin_vertex: "vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif", beginnormal_vertex: "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif", bsdfs: "float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated", iridescence_fragment: "#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif", bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif", clipping_planes_fragment: "#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif", clipping_planes_pars_fragment: "#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif", clipping_planes_pars_vertex: "#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif", clipping_planes_vertex: "#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif", color_fragment: "#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif", color_pars_fragment: "#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif", color_pars_vertex: "#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif", color_vertex: "#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif", common: "#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated", cube_uv_reflection_fragment: "#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif", defaultnormal_vertex: "vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif", displacementmap_pars_vertex: "#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif", displacementmap_vertex: "#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif", emissivemap_fragment: "#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif", emissivemap_pars_fragment: "#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif", colorspace_fragment: "gl_FragColor = linearToOutputTexel( gl_FragColor );", colorspace_pars_fragment: "\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n	vec3( 0.8224621, 0.177538, 0.0 ),\n	vec3( 0.0331941, 0.9668058, 0.0 ),\n	vec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n	vec3( 1.2249401, - 0.2249404, 0.0 ),\n	vec3( - 0.0420569, 1.0420571, 0.0 ),\n	vec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}", envmap_fragment: "#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif", envmap_common_pars_fragment: "#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif", envmap_pars_fragment: "#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif", envmap_pars_vertex: "#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif", envmap_physical_pars_fragment: "#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif", envmap_vertex: "#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif", fog_vertex: "#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif", fog_pars_vertex: "#ifdef USE_FOG\n	varying float vFogDepth;\n#endif", fog_fragment: "#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif", fog_pars_fragment: "#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif", gradientmap_pars_fragment: "#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}", lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif", lights_lambert_fragment: "LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;", lights_lambert_pars_fragment: "varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert", lights_pars_begin: "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif", lights_toon_fragment: "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;", lights_toon_pars_fragment: "varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon", lights_phong_fragment: "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;", lights_phong_pars_fragment: "varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong", lights_physical_fragment: "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif", lights_physical_pars_fragment: "struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}", lights_fragment_begin: "\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif", lights_fragment_maps: "#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif", lights_fragment_end: "#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif", logdepthbuf_fragment: "#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif", logdepthbuf_pars_fragment: "#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif", logdepthbuf_pars_vertex: "#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif", logdepthbuf_vertex: "#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif", map_fragment: "#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n	\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif", map_pars_fragment: "#ifdef USE_MAP\n	uniform sampler2D map;\n#endif", map_particle_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif", map_particle_pars_fragment: "#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif", metalnessmap_fragment: "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif", metalnessmap_pars_fragment: "#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif", morphinstance_vertex: "#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif", morphcolor_vertex: "#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif", morphnormal_vertex: "#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif", morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif", morphtarget_vertex: "#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif", normal_fragment_begin: "float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;", normal_fragment_maps: "#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif", normal_pars_fragment: "#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif", normal_pars_vertex: "#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif", normal_vertex: "#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif", normalmap_pars_fragment: "#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif", clearcoat_normal_fragment_begin: "#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif", clearcoat_normal_fragment_maps: "#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif", clearcoat_pars_fragment: "#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif", iridescence_pars_fragment: "#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif", opaque_fragment: "#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );", packing: "vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}", premultiplied_alpha_fragment: "#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif", project_vertex: "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;", dithering_fragment: "#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif", dithering_pars_fragment: "#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif", roughnessmap_fragment: "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif", roughnessmap_pars_fragment: "#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif", shadowmap_pars_fragment: "#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif", shadowmap_pars_vertex: "#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif", shadowmap_vertex: "#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif", shadowmask_pars_fragment: "float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}", skinbase_vertex: "#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif", skinning_pars_vertex: "#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif", skinning_vertex: "#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif", skinnormal_vertex: "#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif", specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif", specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif", tonemapping_fragment: "#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif", tonemapping_pars_fragment: "#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }", transmission_fragment: "#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif", transmission_pars_fragment: "#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n		\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n		\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		\n		#else\n		\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif", uv_pars_fragment: "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif", uv_pars_vertex: "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif", uv_vertex: "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif", worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif", background_vert: "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}", background_frag: "uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}", backgroundCube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}", backgroundCube_frag: "#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}", cube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}", cube_frag: "uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}", depth_vert: "#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}", depth_frag: "#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}", distanceRGBA_vert: "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}", distanceRGBA_frag: "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}", equirect_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}", equirect_frag: "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}", linedashed_vert: "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}", linedashed_frag: "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}", meshbasic_vert: "#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}", meshbasic_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}", meshlambert_vert: "#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}", meshlambert_frag: "#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}", meshmatcap_vert: "#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}", meshmatcap_frag: "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}", meshnormal_vert: "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}", meshnormal_frag: "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}", meshphong_vert: "#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}", meshphong_frag: "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}", meshphysical_vert: "#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}", meshphysical_frag: "#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}", meshtoon_vert: "#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}", meshtoon_frag: "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}", points_vert: "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}", points_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}", shadow_vert: "#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}", shadow_frag: "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}", sprite_vert: "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}", sprite_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}" }, Kr = { common: { diffuse: { value: new Go(16777215) }, opacity: { value: 1 }, map: { value: null }, mapTransform: { value: new Wi() }, alphaMap: { value: null }, alphaMapTransform: { value: new Wi() }, alphaTest: { value: 0 } }, specularmap: { specularMap: { value: null }, specularMapTransform: { value: new Wi() } }, envmap: { envMap: { value: null }, envMapRotation: { value: new Wi() }, flipEnvMap: { value: -1 }, reflectivity: { value: 1 }, ior: { value: 1.5 }, refractionRatio: { value: 0.98 } }, aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 }, aoMapTransform: { value: new Wi() } }, lightmap: { lightMap: { value: null }, lightMapIntensity: { value: 1 }, lightMapTransform: { value: new Wi() } }, bumpmap: { bumpMap: { value: null }, bumpMapTransform: { value: new Wi() }, bumpScale: { value: 1 } }, normalmap: { normalMap: { value: null }, normalMapTransform: { value: new Wi() }, normalScale: { value: new $i(1, 1) } }, displacementmap: { displacementMap: { value: null }, displacementMapTransform: { value: new Wi() }, displacementScale: { value: 1 }, displacementBias: { value: 0 } }, emissivemap: { emissiveMap: { value: null }, emissiveMapTransform: { value: new Wi() } }, metalnessmap: { metalnessMap: { value: null }, metalnessMapTransform: { value: new Wi() } }, roughnessmap: { roughnessMap: { value: null }, roughnessMapTransform: { value: new Wi() } }, gradientmap: { gradientMap: { value: null } }, fog: { fogDensity: { value: 25e-5 }, fogNear: { value: 1 }, fogFar: { value: 2e3 }, fogColor: { value: new Go(16777215) } }, lights: { ambientLightColor: { value: [] }, lightProbe: { value: [] }, directionalLights: { value: [], properties: { direction: {}, color: {} } }, directionalLightShadows: { value: [], properties: { shadowIntensity: 1, shadowBias: {}, shadowNormalBias: {}, shadowRadius: {}, shadowMapSize: {} } }, directionalShadowMap: { value: [] }, directionalShadowMatrix: { value: [] }, spotLights: { value: [], properties: { color: {}, position: {}, direction: {}, distance: {}, coneCos: {}, penumbraCos: {}, decay: {} } }, spotLightShadows: { value: [], properties: { shadowIntensity: 1, shadowBias: {}, shadowNormalBias: {}, shadowRadius: {}, shadowMapSize: {} } }, spotLightMap: { value: [] }, spotShadowMap: { value: [] }, spotLightMatrix: { value: [] }, pointLights: { value: [], properties: { color: {}, position: {}, decay: {}, distance: {} } }, pointLightShadows: { value: [], properties: { shadowIntensity: 1, shadowBias: {}, shadowNormalBias: {}, shadowRadius: {}, shadowMapSize: {}, shadowCameraNear: {}, shadowCameraFar: {} } }, pointShadowMap: { value: [] }, pointShadowMatrix: { value: [] }, hemisphereLights: { value: [], properties: { direction: {}, skyColor: {}, groundColor: {} } }, rectAreaLights: { value: [], properties: { color: {}, position: {}, width: {}, height: {} } }, ltc_1: { value: null }, ltc_2: { value: null } }, points: { diffuse: { value: new Go(16777215) }, opacity: { value: 1 }, size: { value: 1 }, scale: { value: 1 }, map: { value: null }, alphaMap: { value: null }, alphaMapTransform: { value: new Wi() }, alphaTest: { value: 0 }, uvTransform: { value: new Wi() } }, sprite: { diffuse: { value: new Go(16777215) }, opacity: { value: 1 }, center: { value: new $i(0.5, 0.5) }, rotation: { value: 0 }, map: { value: null }, mapTransform: { value: new Wi() }, alphaMap: { value: null }, alphaMapTransform: { value: new Wi() }, alphaTest: { value: 0 } } }, Zr = { basic: { uniforms: Tr([Kr.common, Kr.specularmap, Kr.envmap, Kr.aomap, Kr.lightmap, Kr.fog]), vertexShader: Yr.meshbasic_vert, fragmentShader: Yr.meshbasic_frag }, lambert: { uniforms: Tr([Kr.common, Kr.specularmap, Kr.envmap, Kr.aomap, Kr.lightmap, Kr.emissivemap, Kr.bumpmap, Kr.normalmap, Kr.displacementmap, Kr.fog, Kr.lights, { emissive: { value: new Go(0) } }]), vertexShader: Yr.meshlambert_vert, fragmentShader: Yr.meshlambert_frag }, phong: { uniforms: Tr([Kr.common, Kr.specularmap, Kr.envmap, Kr.aomap, Kr.lightmap, Kr.emissivemap, Kr.bumpmap, Kr.normalmap, Kr.displacementmap, Kr.fog, Kr.lights, { emissive: { value: new Go(0) }, specular: { value: new Go(1118481) }, shininess: { value: 30 } }]), vertexShader: Yr.meshphong_vert, fragmentShader: Yr.meshphong_frag }, standard: { uniforms: Tr([Kr.common, Kr.envmap, Kr.aomap, Kr.lightmap, Kr.emissivemap, Kr.bumpmap, Kr.normalmap, Kr.displacementmap, Kr.roughnessmap, Kr.metalnessmap, Kr.fog, Kr.lights, { emissive: { value: new Go(0) }, roughness: { value: 1 }, metalness: { value: 0 }, envMapIntensity: { value: 1 } }]), vertexShader: Yr.meshphysical_vert, fragmentShader: Yr.meshphysical_frag }, toon: { uniforms: Tr([Kr.common, Kr.aomap, Kr.lightmap, Kr.emissivemap, Kr.bumpmap, Kr.normalmap, Kr.displacementmap, Kr.gradientmap, Kr.fog, Kr.lights, { emissive: { value: new Go(0) } }]), vertexShader: Yr.meshtoon_vert, fragmentShader: Yr.meshtoon_frag }, matcap: { uniforms: Tr([Kr.common, Kr.bumpmap, Kr.normalmap, Kr.displacementmap, Kr.fog, { matcap: { value: null } }]), vertexShader: Yr.meshmatcap_vert, fragmentShader: Yr.meshmatcap_frag }, points: { uniforms: Tr([Kr.points, Kr.fog]), vertexShader: Yr.points_vert, fragmentShader: Yr.points_frag }, dashed: { uniforms: Tr([Kr.common, Kr.fog, { scale: { value: 1 }, dashSize: { value: 1 }, totalSize: { value: 2 } }]), vertexShader: Yr.linedashed_vert, fragmentShader: Yr.linedashed_frag }, depth: { uniforms: Tr([Kr.common, Kr.displacementmap]), vertexShader: Yr.depth_vert, fragmentShader: Yr.depth_frag }, normal: { uniforms: Tr([Kr.common, Kr.bumpmap, Kr.normalmap, Kr.displacementmap, { opacity: { value: 1 } }]), vertexShader: Yr.meshnormal_vert, fragmentShader: Yr.meshnormal_frag }, sprite: { uniforms: Tr([Kr.sprite, Kr.fog]), vertexShader: Yr.sprite_vert, fragmentShader: Yr.sprite_frag }, background: { uniforms: { uvTransform: { value: new Wi() }, t2D: { value: null }, backgroundIntensity: { value: 1 } }, vertexShader: Yr.background_vert, fragmentShader: Yr.background_frag }, backgroundCube: { uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 }, backgroundBlurriness: { value: 0 }, backgroundIntensity: { value: 1 }, backgroundRotation: { value: new Wi() } }, vertexShader: Yr.backgroundCube_vert, fragmentShader: Yr.backgroundCube_frag }, cube: { uniforms: { tCube: { value: null }, tFlip: { value: -1 }, opacity: { value: 1 } }, vertexShader: Yr.cube_vert, fragmentShader: Yr.cube_frag }, equirect: { uniforms: { tEquirect: { value: null } }, vertexShader: Yr.equirect_vert, fragmentShader: Yr.equirect_frag }, distanceRGBA: { uniforms: Tr([Kr.common, Kr.displacementmap, { referencePosition: { value: new yn() }, nearDistance: { value: 1 }, farDistance: { value: 1e3 } }]), vertexShader: Yr.distanceRGBA_vert, fragmentShader: Yr.distanceRGBA_frag }, shadow: { uniforms: Tr([Kr.lights, Kr.fog, { color: { value: new Go(0) }, opacity: { value: 1 } }]), vertexShader: Yr.shadow_vert, fragmentShader: Yr.shadow_frag } };
Zr.physical = { uniforms: Tr([Zr.standard.uniforms, { clearcoat: { value: 0 }, clearcoatMap: { value: null }, clearcoatMapTransform: { value: new Wi() }, clearcoatNormalMap: { value: null }, clearcoatNormalMapTransform: { value: new Wi() }, clearcoatNormalScale: { value: new $i(1, 1) }, clearcoatRoughness: { value: 0 }, clearcoatRoughnessMap: { value: null }, clearcoatRoughnessMapTransform: { value: new Wi() }, dispersion: { value: 0 }, iridescence: { value: 0 }, iridescenceMap: { value: null }, iridescenceMapTransform: { value: new Wi() }, iridescenceIOR: { value: 1.3 }, iridescenceThicknessMinimum: { value: 100 }, iridescenceThicknessMaximum: { value: 400 }, iridescenceThicknessMap: { value: null }, iridescenceThicknessMapTransform: { value: new Wi() }, sheen: { value: 0 }, sheenColor: { value: new Go(0) }, sheenColorMap: { value: null }, sheenColorMapTransform: { value: new Wi() }, sheenRoughness: { value: 1 }, sheenRoughnessMap: { value: null }, sheenRoughnessMapTransform: { value: new Wi() }, transmission: { value: 0 }, transmissionMap: { value: null }, transmissionMapTransform: { value: new Wi() }, transmissionSamplerSize: { value: new $i() }, transmissionSamplerMap: { value: null }, thickness: { value: 0 }, thicknessMap: { value: null }, thicknessMapTransform: { value: new Wi() }, attenuationDistance: { value: 0 }, attenuationColor: { value: new Go(0) }, specularColor: { value: new Go(1, 1, 1) }, specularColorMap: { value: null }, specularColorMapTransform: { value: new Wi() }, specularIntensity: { value: 1 }, specularIntensityMap: { value: null }, specularIntensityMapTransform: { value: new Wi() }, anisotropyVector: { value: new $i() }, anisotropyMap: { value: null }, anisotropyMapTransform: { value: new Wi() } }]), vertexShader: Yr.meshphysical_vert, fragmentShader: Yr.meshphysical_frag };
const Jr = { r: 0, b: 0, g: 0 }, es = new ao(), ts = new Kn();
function is(e6, t2, i2, n2, o2, r2, s2) {
  const a2 = new Go(0);
  let l2, c2, h2 = true === r2 ? 0 : 1, u2 = null, d2 = 0, p2 = null;
  function _2(e7) {
    let n3 = true === e7.isScene ? e7.background : null;
    if (n3 && n3.isTexture) {
      n3 = (e7.backgroundBlurriness > 0 ? i2 : t2).get(n3);
    }
    return n3;
  }
  function g2(t3, i3) {
    t3.getRGB(Jr, Ir(e6)), n2.buffers.color.setClear(Jr.r, Jr.g, Jr.b, i3, s2);
  }
  return { getClearColor: function() {
    return a2;
  }, setClearColor: function(e7, t3 = 1) {
    a2.set(e7), h2 = t3, g2(a2, h2);
  }, getClearAlpha: function() {
    return h2;
  }, setClearAlpha: function(e7) {
    h2 = e7, g2(a2, h2);
  }, render: function(t3) {
    let i3 = false;
    const o3 = _2(t3);
    null === o3 ? g2(a2, h2) : o3 && o3.isColor && (g2(o3, 1), i3 = true);
    const r3 = e6.xr.getEnvironmentBlendMode();
    "additive" === r3 ? n2.buffers.color.setClear(0, 0, 0, 1, s2) : "alpha-blend" === r3 && n2.buffers.color.setClear(0, 0, 0, 0, s2), (e6.autoClear || i3) && (n2.buffers.depth.setTest(true), n2.buffers.depth.setMask(true), n2.buffers.color.setMask(true), e6.clear(e6.autoClearColor, e6.autoClearDepth, e6.autoClearStencil));
  }, addToRenderList: function(t3, i3) {
    const n3 = _2(i3);
    n3 && (n3.isCubeTexture || n3.mapping === Ye) ? (void 0 === c2 && (c2 = new xr(new Sr(1, 1, 1), new Br({ name: "BackgroundCubeMaterial", uniforms: Er(Zr.backgroundCube.uniforms), vertexShader: Zr.backgroundCube.vertexShader, fragmentShader: Zr.backgroundCube.fragmentShader, side: 1, depthTest: false, depthWrite: false, fog: false })), c2.geometry.deleteAttribute("normal"), c2.geometry.deleteAttribute("uv"), c2.onBeforeRender = function(e7, t4, i4) {
      this.matrixWorld.copyPosition(i4.matrixWorld);
    }, Object.defineProperty(c2.material, "envMap", { get: function() {
      return this.uniforms.envMap.value;
    } }), o2.update(c2)), es.copy(i3.backgroundRotation), es.x *= -1, es.y *= -1, es.z *= -1, n3.isCubeTexture && false === n3.isRenderTargetTexture && (es.y *= -1, es.z *= -1), c2.material.uniforms.envMap.value = n3, c2.material.uniforms.flipEnvMap.value = n3.isCubeTexture && false === n3.isRenderTargetTexture ? -1 : 1, c2.material.uniforms.backgroundBlurriness.value = i3.backgroundBlurriness, c2.material.uniforms.backgroundIntensity.value = i3.backgroundIntensity, c2.material.uniforms.backgroundRotation.value.setFromMatrix4(ts.makeRotationFromEuler(es)), c2.material.toneMapped = rn.getTransfer(n3.colorSpace) !== vi, u2 === n3 && d2 === n3.version && p2 === e6.toneMapping || (c2.material.needsUpdate = true, u2 = n3, d2 = n3.version, p2 = e6.toneMapping), c2.layers.enableAll(), t3.unshift(c2, c2.geometry, c2.material, 0, 0, null)) : n3 && n3.isTexture && (void 0 === l2 && (l2 = new xr(new Xr(2, 2), new Br({ name: "BackgroundMaterial", uniforms: Er(Zr.background.uniforms), vertexShader: Zr.background.vertexShader, fragmentShader: Zr.background.fragmentShader, side: 0, depthTest: false, depthWrite: false, fog: false })), l2.geometry.deleteAttribute("normal"), Object.defineProperty(l2.material, "map", { get: function() {
      return this.uniforms.t2D.value;
    } }), o2.update(l2)), l2.material.uniforms.t2D.value = n3, l2.material.uniforms.backgroundIntensity.value = i3.backgroundIntensity, l2.material.toneMapped = rn.getTransfer(n3.colorSpace) !== vi, true === n3.matrixAutoUpdate && n3.updateMatrix(), l2.material.uniforms.uvTransform.value.copy(n3.matrix), u2 === n3 && d2 === n3.version && p2 === e6.toneMapping || (l2.material.needsUpdate = true, u2 = n3, d2 = n3.version, p2 = e6.toneMapping), l2.layers.enableAll(), t3.unshift(l2, l2.geometry, l2.material, 0, 0, null));
  } };
}
function ns(e6, t2) {
  const i2 = e6.getParameter(e6.MAX_VERTEX_ATTRIBS), n2 = {}, o2 = c2(null);
  let r2 = o2, s2 = false;
  function a2(t3) {
    return e6.bindVertexArray(t3);
  }
  function l2(t3) {
    return e6.deleteVertexArray(t3);
  }
  function c2(e7) {
    const t3 = [], n3 = [], o3 = [];
    for (let e8 = 0; e8 < i2; e8++) t3[e8] = 0, n3[e8] = 0, o3[e8] = 0;
    return { geometry: null, program: null, wireframe: false, newAttributes: t3, enabledAttributes: n3, attributeDivisors: o3, object: e7, attributes: {}, index: null };
  }
  function h2() {
    const e7 = r2.newAttributes;
    for (let t3 = 0, i3 = e7.length; t3 < i3; t3++) e7[t3] = 0;
  }
  function u2(e7) {
    d2(e7, 0);
  }
  function d2(t3, i3) {
    const n3 = r2.newAttributes, o3 = r2.enabledAttributes, s3 = r2.attributeDivisors;
    n3[t3] = 1, 0 === o3[t3] && (e6.enableVertexAttribArray(t3), o3[t3] = 1), s3[t3] !== i3 && (e6.vertexAttribDivisor(t3, i3), s3[t3] = i3);
  }
  function p2() {
    const t3 = r2.newAttributes, i3 = r2.enabledAttributes;
    for (let n3 = 0, o3 = i3.length; n3 < o3; n3++) i3[n3] !== t3[n3] && (e6.disableVertexAttribArray(n3), i3[n3] = 0);
  }
  function _2(t3, i3, n3, o3, r3, s3, a3) {
    true === a3 ? e6.vertexAttribIPointer(t3, i3, n3, r3, s3) : e6.vertexAttribPointer(t3, i3, n3, o3, r3, s3);
  }
  function g2() {
    m2(), s2 = true, r2 !== o2 && (r2 = o2, a2(r2.object));
  }
  function m2() {
    o2.geometry = null, o2.program = null, o2.wireframe = false;
  }
  return { setup: function(i3, o3, l3, g3, m3) {
    let f2 = false;
    const v2 = function(t3, i4, o4) {
      const r3 = true === o4.wireframe;
      let s3 = n2[t3.id];
      void 0 === s3 && (s3 = {}, n2[t3.id] = s3);
      let a3 = s3[i4.id];
      void 0 === a3 && (a3 = {}, s3[i4.id] = a3);
      let l4 = a3[r3];
      void 0 === l4 && (l4 = c2(e6.createVertexArray()), a3[r3] = l4);
      return l4;
    }(g3, l3, o3);
    r2 !== v2 && (r2 = v2, a2(r2.object)), f2 = function(e7, t3, i4, n3) {
      const o4 = r2.attributes, s3 = t3.attributes;
      let a3 = 0;
      const l4 = i4.getAttributes();
      for (const t4 in l4) {
        if (l4[t4].location >= 0) {
          const i5 = o4[t4];
          let n4 = s3[t4];
          if (void 0 === n4 && ("instanceMatrix" === t4 && e7.instanceMatrix && (n4 = e7.instanceMatrix), "instanceColor" === t4 && e7.instanceColor && (n4 = e7.instanceColor)), void 0 === i5) return true;
          if (i5.attribute !== n4) return true;
          if (n4 && i5.data !== n4.data) return true;
          a3++;
        }
      }
      return r2.attributesNum !== a3 || r2.index !== n3;
    }(i3, g3, l3, m3), f2 && function(e7, t3, i4, n3) {
      const o4 = {}, s3 = t3.attributes;
      let a3 = 0;
      const l4 = i4.getAttributes();
      for (const t4 in l4) {
        if (l4[t4].location >= 0) {
          let i5 = s3[t4];
          void 0 === i5 && ("instanceMatrix" === t4 && e7.instanceMatrix && (i5 = e7.instanceMatrix), "instanceColor" === t4 && e7.instanceColor && (i5 = e7.instanceColor));
          const n4 = {};
          n4.attribute = i5, i5 && i5.data && (n4.data = i5.data), o4[t4] = n4, a3++;
        }
      }
      r2.attributes = o4, r2.attributesNum = a3, r2.index = n3;
    }(i3, g3, l3, m3), null !== m3 && t2.update(m3, e6.ELEMENT_ARRAY_BUFFER), (f2 || s2) && (s2 = false, function(i4, n3, o4, r3) {
      h2();
      const s3 = r3.attributes, a3 = o4.getAttributes(), l4 = n3.defaultAttributeValues;
      for (const n4 in a3) {
        const o5 = a3[n4];
        if (o5.location >= 0) {
          let a4 = s3[n4];
          if (void 0 === a4 && ("instanceMatrix" === n4 && i4.instanceMatrix && (a4 = i4.instanceMatrix), "instanceColor" === n4 && i4.instanceColor && (a4 = i4.instanceColor)), void 0 !== a4) {
            const n5 = a4.normalized, s4 = a4.itemSize, l5 = t2.get(a4);
            if (void 0 === l5) continue;
            const c3 = l5.buffer, h3 = l5.type, p3 = l5.bytesPerElement, g4 = h3 === e6.INT || h3 === e6.UNSIGNED_INT || a4.gpuType === ht;
            if (a4.isInterleavedBufferAttribute) {
              const t3 = a4.data, l6 = t3.stride, m4 = a4.offset;
              if (t3.isInstancedInterleavedBuffer) {
                for (let e7 = 0; e7 < o5.locationSize; e7++) d2(o5.location + e7, t3.meshPerAttribute);
                true !== i4.isInstancedMesh && void 0 === r3._maxInstanceCount && (r3._maxInstanceCount = t3.meshPerAttribute * t3.count);
              } else for (let e7 = 0; e7 < o5.locationSize; e7++) u2(o5.location + e7);
              e6.bindBuffer(e6.ARRAY_BUFFER, c3);
              for (let e7 = 0; e7 < o5.locationSize; e7++) _2(o5.location + e7, s4 / o5.locationSize, h3, n5, l6 * p3, (m4 + s4 / o5.locationSize * e7) * p3, g4);
            } else {
              if (a4.isInstancedBufferAttribute) {
                for (let e7 = 0; e7 < o5.locationSize; e7++) d2(o5.location + e7, a4.meshPerAttribute);
                true !== i4.isInstancedMesh && void 0 === r3._maxInstanceCount && (r3._maxInstanceCount = a4.meshPerAttribute * a4.count);
              } else for (let e7 = 0; e7 < o5.locationSize; e7++) u2(o5.location + e7);
              e6.bindBuffer(e6.ARRAY_BUFFER, c3);
              for (let e7 = 0; e7 < o5.locationSize; e7++) _2(o5.location + e7, s4 / o5.locationSize, h3, n5, s4 * p3, s4 / o5.locationSize * e7 * p3, g4);
            }
          } else if (void 0 !== l4) {
            const t3 = l4[n4];
            if (void 0 !== t3) switch (t3.length) {
              case 2:
                e6.vertexAttrib2fv(o5.location, t3);
                break;
              case 3:
                e6.vertexAttrib3fv(o5.location, t3);
                break;
              case 4:
                e6.vertexAttrib4fv(o5.location, t3);
                break;
              default:
                e6.vertexAttrib1fv(o5.location, t3);
            }
          }
        }
      }
      p2();
    }(i3, o3, l3, g3), null !== m3 && e6.bindBuffer(e6.ELEMENT_ARRAY_BUFFER, t2.get(m3).buffer));
  }, reset: g2, resetDefaultState: m2, dispose: function() {
    g2();
    for (const e7 in n2) {
      const t3 = n2[e7];
      for (const e8 in t3) {
        const i3 = t3[e8];
        for (const e9 in i3) l2(i3[e9].object), delete i3[e9];
        delete t3[e8];
      }
      delete n2[e7];
    }
  }, releaseStatesOfGeometry: function(e7) {
    if (void 0 === n2[e7.id]) return;
    const t3 = n2[e7.id];
    for (const e8 in t3) {
      const i3 = t3[e8];
      for (const e9 in i3) l2(i3[e9].object), delete i3[e9];
      delete t3[e8];
    }
    delete n2[e7.id];
  }, releaseStatesOfProgram: function(e7) {
    for (const t3 in n2) {
      const i3 = n2[t3];
      if (void 0 === i3[e7.id]) continue;
      const o3 = i3[e7.id];
      for (const e8 in o3) l2(o3[e8].object), delete o3[e8];
      delete i3[e7.id];
    }
  }, initAttributes: h2, enableAttribute: u2, disableUnusedAttributes: p2 };
}
function os(e6, t2, i2) {
  let n2;
  function o2(t3, o3, r2) {
    0 !== r2 && (e6.drawArraysInstanced(n2, t3, o3, r2), i2.update(o3, n2, r2));
  }
  this.setMode = function(e7) {
    n2 = e7;
  }, this.render = function(t3, o3) {
    e6.drawArrays(n2, t3, o3), i2.update(o3, n2, 1);
  }, this.renderInstances = o2, this.renderMultiDraw = function(e7, o3, r2) {
    if (0 === r2) return;
    t2.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n2, e7, 0, o3, 0, r2);
    let s2 = 0;
    for (let e8 = 0; e8 < r2; e8++) s2 += o3[e8];
    i2.update(s2, n2, 1);
  }, this.renderMultiDrawInstances = function(e7, r2, s2, a2) {
    if (0 === s2) return;
    const l2 = t2.get("WEBGL_multi_draw");
    if (null === l2) for (let t3 = 0; t3 < e7.length; t3++) o2(e7[t3], r2[t3], a2[t3]);
    else {
      l2.multiDrawArraysInstancedWEBGL(n2, e7, 0, r2, 0, a2, 0, s2);
      let t3 = 0;
      for (let e8 = 0; e8 < s2; e8++) t3 += r2[e8];
      for (let e8 = 0; e8 < a2.length; e8++) i2.update(t3, n2, a2[e8]);
    }
  };
}
function rs(e6, t2, i2, n2) {
  let o2;
  function r2(t3) {
    if ("highp" === t3) {
      if (e6.getShaderPrecisionFormat(e6.VERTEX_SHADER, e6.HIGH_FLOAT).precision > 0 && e6.getShaderPrecisionFormat(e6.FRAGMENT_SHADER, e6.HIGH_FLOAT).precision > 0) return "highp";
      t3 = "mediump";
    }
    return "mediump" === t3 && e6.getShaderPrecisionFormat(e6.VERTEX_SHADER, e6.MEDIUM_FLOAT).precision > 0 && e6.getShaderPrecisionFormat(e6.FRAGMENT_SHADER, e6.MEDIUM_FLOAT).precision > 0 ? "mediump" : "lowp";
  }
  let s2 = void 0 !== i2.precision ? i2.precision : "highp";
  const a2 = r2(s2);
  a2 !== s2 && (console.warn("THREE.WebGLRenderer:", s2, "not supported, using", a2, "instead."), s2 = a2);
  const l2 = true === i2.logarithmicDepthBuffer, c2 = true === i2.reverseDepthBuffer && t2.has("EXT_clip_control");
  if (true === c2) {
    const e7 = t2.get("EXT_clip_control");
    e7.clipControlEXT(e7.LOWER_LEFT_EXT, e7.ZERO_TO_ONE_EXT);
  }
  const h2 = e6.getParameter(e6.MAX_TEXTURE_IMAGE_UNITS), u2 = e6.getParameter(e6.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
  return { isWebGL2: true, getMaxAnisotropy: function() {
    if (void 0 !== o2) return o2;
    if (true === t2.has("EXT_texture_filter_anisotropic")) {
      const i3 = t2.get("EXT_texture_filter_anisotropic");
      o2 = e6.getParameter(i3.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
    } else o2 = 0;
    return o2;
  }, getMaxPrecision: r2, textureFormatReadable: function(t3) {
    return t3 === vt || n2.convert(t3) === e6.getParameter(e6.IMPLEMENTATION_COLOR_READ_FORMAT);
  }, textureTypeReadable: function(i3) {
    const o3 = i3 === pt && (t2.has("EXT_color_buffer_half_float") || t2.has("EXT_color_buffer_float"));
    return !(i3 !== st && n2.convert(i3) !== e6.getParameter(e6.IMPLEMENTATION_COLOR_READ_TYPE) && i3 !== dt && !o3);
  }, precision: s2, logarithmicDepthBuffer: l2, reverseDepthBuffer: c2, maxTextures: h2, maxVertexTextures: u2, maxTextureSize: e6.getParameter(e6.MAX_TEXTURE_SIZE), maxCubemapSize: e6.getParameter(e6.MAX_CUBE_MAP_TEXTURE_SIZE), maxAttributes: e6.getParameter(e6.MAX_VERTEX_ATTRIBS), maxVertexUniforms: e6.getParameter(e6.MAX_VERTEX_UNIFORM_VECTORS), maxVaryings: e6.getParameter(e6.MAX_VARYING_VECTORS), maxFragmentUniforms: e6.getParameter(e6.MAX_FRAGMENT_UNIFORM_VECTORS), vertexTextures: u2 > 0, maxSamples: e6.getParameter(e6.MAX_SAMPLES) };
}
function ss(e6) {
  const t2 = this;
  let i2 = null, n2 = 0, o2 = false, r2 = false;
  const s2 = new Vr(), a2 = new Wi(), l2 = { value: null, needsUpdate: false };
  function c2(e7, i3, n3, o3) {
    const r3 = null !== e7 ? e7.length : 0;
    let c3 = null;
    if (0 !== r3) {
      if (c3 = l2.value, true !== o3 || null === c3) {
        const t3 = n3 + 4 * r3, o4 = i3.matrixWorldInverse;
        a2.getNormalMatrix(o4), (null === c3 || c3.length < t3) && (c3 = new Float32Array(t3));
        for (let t4 = 0, i4 = n3; t4 !== r3; ++t4, i4 += 4) s2.copy(e7[t4]).applyMatrix4(o4, a2), s2.normal.toArray(c3, i4), c3[i4 + 3] = s2.constant;
      }
      l2.value = c3, l2.needsUpdate = true;
    }
    return t2.numPlanes = r3, t2.numIntersection = 0, c3;
  }
  this.uniform = l2, this.numPlanes = 0, this.numIntersection = 0, this.init = function(e7, t3) {
    const i3 = 0 !== e7.length || t3 || 0 !== n2 || o2;
    return o2 = t3, n2 = e7.length, i3;
  }, this.beginShadows = function() {
    r2 = true, c2(null);
  }, this.endShadows = function() {
    r2 = false;
  }, this.setGlobalState = function(e7, t3) {
    i2 = c2(e7, t3, 0);
  }, this.setState = function(s3, a3, h2) {
    const u2 = s3.clippingPlanes, d2 = s3.clipIntersection, p2 = s3.clipShadows, _2 = e6.get(s3);
    if (!o2 || null === u2 || 0 === u2.length || r2 && !p2) r2 ? c2(null) : function() {
      l2.value !== i2 && (l2.value = i2, l2.needsUpdate = n2 > 0);
      t2.numPlanes = n2, t2.numIntersection = 0;
    }();
    else {
      const e7 = r2 ? 0 : n2, t3 = 4 * e7;
      let o3 = _2.clippingState || null;
      l2.value = o3, o3 = c2(u2, a3, t3, h2);
      for (let e8 = 0; e8 !== t3; ++e8) o3[e8] = i2[e8];
      _2.clippingState = o3, this.numIntersection = d2 ? this.numPlanes : 0, this.numPlanes += e7;
    }
  };
}
function as(e6) {
  let t2 = /* @__PURE__ */ new WeakMap();
  function i2(e7, t3) {
    return t3 === Xe ? e7.mapping = We : 304 === t3 && (e7.mapping = je), e7;
  }
  function n2(e7) {
    const i3 = e7.target;
    i3.removeEventListener("dispose", n2);
    const o2 = t2.get(i3);
    void 0 !== o2 && (t2.delete(i3), o2.dispose());
  }
  return { get: function(o2) {
    if (o2 && o2.isTexture) {
      const r2 = o2.mapping;
      if (r2 === Xe || 304 === r2) {
        if (t2.has(o2)) {
          return i2(t2.get(o2).texture, o2.mapping);
        }
        {
          const r3 = o2.image;
          if (r3 && r3.height > 0) {
            const s2 = new Ur(r3.height);
            return s2.fromEquirectangularTexture(e6, o2), t2.set(o2, s2), o2.addEventListener("dispose", n2), i2(s2.texture, o2.mapping);
          }
          return null;
        }
      }
    }
    return o2;
  }, dispose: function() {
    t2 = /* @__PURE__ */ new WeakMap();
  } };
}
class ls extends Rr {
  constructor(e6 = -1, t2 = 1, i2 = 1, n2 = -1, o2 = 0.1, r2 = 2e3) {
    super(), this.isOrthographicCamera = true, this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = e6, this.right = t2, this.top = i2, this.bottom = n2, this.near = o2, this.far = r2, this.updateProjectionMatrix();
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.left = e6.left, this.right = e6.right, this.top = e6.top, this.bottom = e6.bottom, this.near = e6.near, this.far = e6.far, this.zoom = e6.zoom, this.view = null === e6.view ? null : Object.assign({}, e6.view), this;
  }
  setViewOffset(e6, t2, i2, n2, o2, r2) {
    null === this.view && (this.view = { enabled: true, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = true, this.view.fullWidth = e6, this.view.fullHeight = t2, this.view.offsetX = i2, this.view.offsetY = n2, this.view.width = o2, this.view.height = r2, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    null !== this.view && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e6 = (this.right - this.left) / (2 * this.zoom), t2 = (this.top - this.bottom) / (2 * this.zoom), i2 = (this.right + this.left) / 2, n2 = (this.top + this.bottom) / 2;
    let o2 = i2 - e6, r2 = i2 + e6, s2 = n2 + t2, a2 = n2 - t2;
    if (null !== this.view && this.view.enabled) {
      const e7 = (this.right - this.left) / this.view.fullWidth / this.zoom, t3 = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
      o2 += e7 * this.view.offsetX, r2 = o2 + e7 * this.view.width, s2 -= t3 * this.view.offsetY, a2 = s2 - t3 * this.view.height;
    }
    this.projectionMatrix.makeOrthographic(o2, r2, s2, a2, this.near, this.far, this.coordinateSystem), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e6) {
    const t2 = super.toJSON(e6);
    return t2.object.zoom = this.zoom, t2.object.left = this.left, t2.object.right = this.right, t2.object.top = this.top, t2.object.bottom = this.bottom, t2.object.near = this.near, t2.object.far = this.far, null !== this.view && (t2.object.view = Object.assign({}, this.view)), t2;
  }
}
const cs = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582], hs = 20, us = new ls(), ds = new Go();
let ps = null, _s = 0, gs = 0, ms = false;
const fs = (1 + Math.sqrt(5)) / 2, vs = 1 / fs, As = [new yn(-fs, vs, 0), new yn(fs, vs, 0), new yn(-vs, 0, fs), new yn(vs, 0, fs), new yn(0, fs, -vs), new yn(0, fs, vs), new yn(-1, 1, -1), new yn(1, 1, -1), new yn(-1, 1, 1), new yn(1, 1, 1)];
class bs {
  constructor(e6) {
    this._renderer = e6, this._pingPongRenderTarget = null, this._lodMax = 0, this._cubeSize = 0, this._lodPlanes = [], this._sizeLods = [], this._sigmas = [], this._blurMaterial = null, this._cubemapMaterial = null, this._equirectMaterial = null, this._compileMaterial(this._blurMaterial);
  }
  fromScene(e6, t2 = 0, i2 = 0.1, n2 = 100) {
    ps = this._renderer.getRenderTarget(), _s = this._renderer.getActiveCubeFace(), gs = this._renderer.getActiveMipmapLevel(), ms = this._renderer.xr.enabled, this._renderer.xr.enabled = false, this._setSize(256);
    const o2 = this._allocateTargets();
    return o2.depthBuffer = true, this._sceneToCubeUV(e6, i2, n2, o2), t2 > 0 && this._blur(o2, 0, 0, t2), this._applyPMREM(o2), this._cleanup(o2), o2;
  }
  fromEquirectangular(e6, t2 = null) {
    return this._fromTexture(e6, t2);
  }
  fromCubemap(e6, t2 = null) {
    return this._fromTexture(e6, t2);
  }
  compileCubemapShader() {
    null === this._cubemapMaterial && (this._cubemapMaterial = Cs(), this._compileMaterial(this._cubemapMaterial));
  }
  compileEquirectangularShader() {
    null === this._equirectMaterial && (this._equirectMaterial = xs(), this._compileMaterial(this._equirectMaterial));
  }
  dispose() {
    this._dispose(), null !== this._cubemapMaterial && this._cubemapMaterial.dispose(), null !== this._equirectMaterial && this._equirectMaterial.dispose();
  }
  _setSize(e6) {
    this._lodMax = Math.floor(Math.log2(e6)), this._cubeSize = Math.pow(2, this._lodMax);
  }
  _dispose() {
    null !== this._blurMaterial && this._blurMaterial.dispose(), null !== this._pingPongRenderTarget && this._pingPongRenderTarget.dispose();
    for (let e6 = 0; e6 < this._lodPlanes.length; e6++) this._lodPlanes[e6].dispose();
  }
  _cleanup(e6) {
    this._renderer.setRenderTarget(ps, _s, gs), this._renderer.xr.enabled = ms, e6.scissorTest = false, ws(e6, 0, 0, e6.width, e6.height);
  }
  _fromTexture(e6, t2) {
    e6.mapping === We || e6.mapping === je ? this._setSize(0 === e6.image.length ? 16 : e6.image[0].width || e6.image[0].image.width) : this._setSize(e6.image.width / 4), ps = this._renderer.getRenderTarget(), _s = this._renderer.getActiveCubeFace(), gs = this._renderer.getActiveMipmapLevel(), ms = this._renderer.xr.enabled, this._renderer.xr.enabled = false;
    const i2 = t2 || this._allocateTargets();
    return this._textureToCubeUV(e6, i2), this._applyPMREM(i2), this._cleanup(i2), i2;
  }
  _allocateTargets() {
    const e6 = 3 * Math.max(this._cubeSize, 112), t2 = 4 * this._cubeSize, i2 = { magFilter: nt, minFilter: nt, generateMipmaps: false, type: pt, format: vt, colorSpace: _i, depthBuffer: false }, n2 = ys(e6, t2, i2);
    if (null === this._pingPongRenderTarget || this._pingPongRenderTarget.width !== e6 || this._pingPongRenderTarget.height !== t2) {
      null !== this._pingPongRenderTarget && this._dispose(), this._pingPongRenderTarget = ys(e6, t2, i2);
      const { _lodMax: n3 } = this;
      ({ sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = function(e7) {
        const t3 = [], i3 = [], n4 = [];
        let o2 = e7;
        const r2 = e7 - 4 + 1 + cs.length;
        for (let s2 = 0; s2 < r2; s2++) {
          const r3 = Math.pow(2, o2);
          i3.push(r3);
          let a2 = 1 / r3;
          s2 > e7 - 4 ? a2 = cs[s2 - e7 + 4 - 1] : 0 === s2 && (a2 = 0), n4.push(a2);
          const l2 = 1 / (r3 - 2), c2 = -l2, h2 = 1 + l2, u2 = [c2, c2, h2, c2, h2, h2, c2, c2, h2, h2, c2, h2], d2 = 6, p2 = 6, _2 = 3, g2 = 2, m2 = 1, f2 = new Float32Array(_2 * p2 * d2), v2 = new Float32Array(g2 * p2 * d2), A2 = new Float32Array(m2 * p2 * d2);
          for (let e8 = 0; e8 < d2; e8++) {
            const t4 = e8 % 3 * 2 / 3 - 1, i4 = e8 > 2 ? 0 : -1, n5 = [t4, i4, 0, t4 + 2 / 3, i4, 0, t4 + 2 / 3, i4 + 1, 0, t4, i4, 0, t4 + 2 / 3, i4 + 1, 0, t4, i4 + 1, 0];
            f2.set(n5, _2 * p2 * e8), v2.set(u2, g2 * p2 * e8);
            const o3 = [e8, e8, e8, e8, e8, e8];
            A2.set(o3, m2 * p2 * e8);
          }
          const b2 = new ur();
          b2.setAttribute("position", new er(f2, _2)), b2.setAttribute("uv", new er(v2, g2)), b2.setAttribute("faceIndex", new er(A2, m2)), t3.push(b2), o2 > 4 && o2--;
        }
        return { lodPlanes: t3, sizeLods: i3, sigmas: n4 };
      }(n3)), this._blurMaterial = function(e7, t3, i3) {
        const n4 = new Float32Array(hs), o2 = new yn(0, 1, 0), r2 = new Br({ name: "SphericalGaussianBlur", defines: { n: hs, CUBEUV_TEXEL_WIDTH: 1 / t3, CUBEUV_TEXEL_HEIGHT: 1 / i3, CUBEUV_MAX_MIP: `${e7}.0` }, uniforms: { envMap: { value: null }, samples: { value: 1 }, weights: { value: n4 }, latitudinal: { value: false }, dTheta: { value: 0 }, mipInt: { value: 0 }, poleAxis: { value: o2 } }, vertexShader: Ss(), fragmentShader: "\n\n			precision mediump float;\n			precision mediump int;\n\n			varying vec3 vOutputDirection;\n\n			uniform sampler2D envMap;\n			uniform int samples;\n			uniform float weights[ n ];\n			uniform bool latitudinal;\n			uniform float dTheta;\n			uniform float mipInt;\n			uniform vec3 poleAxis;\n\n			#define ENVMAP_TYPE_CUBE_UV\n			#include <cube_uv_reflection_fragment>\n\n			vec3 getSample( float theta, vec3 axis ) {\n\n				float cosTheta = cos( theta );\n				// Rodrigues' axis-angle rotation\n				vec3 sampleDirection = vOutputDirection * cosTheta\n					+ cross( axis, vOutputDirection ) * sin( theta )\n					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n				return bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n			}\n\n			void main() {\n\n				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n				}\n\n				axis = normalize( axis );\n\n				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n				for ( int i = 1; i < n; i++ ) {\n\n					if ( i >= samples ) {\n\n						break;\n\n					}\n\n					float theta = dTheta * float( i );\n					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n				}\n\n			}\n		", blending: 0, depthTest: false, depthWrite: false });
        return r2;
      }(n3, e6, t2);
    }
    return n2;
  }
  _compileMaterial(e6) {
    const t2 = new xr(this._lodPlanes[0], e6);
    this._renderer.compile(t2, us);
  }
  _sceneToCubeUV(e6, t2, i2, n2) {
    const o2 = new Lr(90, 1, t2, i2), r2 = [1, -1, 1, 1, 1, 1], s2 = [1, 1, 1, -1, -1, -1], a2 = this._renderer, l2 = a2.autoClear, c2 = a2.toneMapping;
    a2.getClearColor(ds), a2.toneMapping = 0, a2.autoClear = false;
    const h2 = new jo({ name: "PMREM.Background", side: 1, depthWrite: false, depthTest: false }), u2 = new xr(new Sr(), h2);
    let d2 = false;
    const p2 = e6.background;
    p2 ? p2.isColor && (h2.color.copy(p2), e6.background = null, d2 = true) : (h2.color.copy(ds), d2 = true);
    for (let t3 = 0; t3 < 6; t3++) {
      const i3 = t3 % 3;
      0 === i3 ? (o2.up.set(0, r2[t3], 0), o2.lookAt(s2[t3], 0, 0)) : 1 === i3 ? (o2.up.set(0, 0, r2[t3]), o2.lookAt(0, s2[t3], 0)) : (o2.up.set(0, r2[t3], 0), o2.lookAt(0, 0, s2[t3]));
      const l3 = this._cubeSize;
      ws(n2, i3 * l3, t3 > 2 ? l3 : 0, l3, l3), a2.setRenderTarget(n2), d2 && a2.render(u2, o2), a2.render(e6, o2);
    }
    u2.geometry.dispose(), u2.material.dispose(), a2.toneMapping = c2, a2.autoClear = l2, e6.background = p2;
  }
  _textureToCubeUV(e6, t2) {
    const i2 = this._renderer, n2 = e6.mapping === We || e6.mapping === je;
    n2 ? (null === this._cubemapMaterial && (this._cubemapMaterial = Cs()), this._cubemapMaterial.uniforms.flipEnvMap.value = false === e6.isRenderTargetTexture ? -1 : 1) : null === this._equirectMaterial && (this._equirectMaterial = xs());
    const o2 = n2 ? this._cubemapMaterial : this._equirectMaterial, r2 = new xr(this._lodPlanes[0], o2);
    o2.uniforms.envMap.value = e6;
    const s2 = this._cubeSize;
    ws(t2, 0, 0, 3 * s2, 2 * s2), i2.setRenderTarget(t2), i2.render(r2, us);
  }
  _applyPMREM(e6) {
    const t2 = this._renderer, i2 = t2.autoClear;
    t2.autoClear = false;
    const n2 = this._lodPlanes.length;
    for (let t3 = 1; t3 < n2; t3++) {
      const i3 = Math.sqrt(this._sigmas[t3] * this._sigmas[t3] - this._sigmas[t3 - 1] * this._sigmas[t3 - 1]), o2 = As[(n2 - t3 - 1) % As.length];
      this._blur(e6, t3 - 1, t3, i3, o2);
    }
    t2.autoClear = i2;
  }
  _blur(e6, t2, i2, n2, o2) {
    const r2 = this._pingPongRenderTarget;
    this._halfBlur(e6, r2, t2, i2, n2, "latitudinal", o2), this._halfBlur(r2, e6, i2, i2, n2, "longitudinal", o2);
  }
  _halfBlur(e6, t2, i2, n2, o2, r2, s2) {
    const a2 = this._renderer, l2 = this._blurMaterial;
    "latitudinal" !== r2 && "longitudinal" !== r2 && console.error("blur direction must be either latitudinal or longitudinal!");
    const c2 = new xr(this._lodPlanes[n2], l2), h2 = l2.uniforms, u2 = this._sizeLods[i2] - 1, d2 = isFinite(o2) ? Math.PI / (2 * u2) : 2 * Math.PI / 39, p2 = o2 / d2, _2 = isFinite(o2) ? 1 + Math.floor(3 * p2) : hs;
    _2 > hs && console.warn(`sigmaRadians, ${o2}, is too large and will clip, as it requested ${_2} samples when the maximum is set to 20`);
    const g2 = [];
    let m2 = 0;
    for (let e7 = 0; e7 < hs; ++e7) {
      const t3 = e7 / p2, i3 = Math.exp(-t3 * t3 / 2);
      g2.push(i3), 0 === e7 ? m2 += i3 : e7 < _2 && (m2 += 2 * i3);
    }
    for (let e7 = 0; e7 < g2.length; e7++) g2[e7] = g2[e7] / m2;
    h2.envMap.value = e6.texture, h2.samples.value = _2, h2.weights.value = g2, h2.latitudinal.value = "latitudinal" === r2, s2 && (h2.poleAxis.value = s2);
    const { _lodMax: f2 } = this;
    h2.dTheta.value = d2, h2.mipInt.value = f2 - i2;
    const v2 = this._sizeLods[n2];
    ws(t2, 3 * v2 * (n2 > f2 - 4 ? n2 - f2 + 4 : 0), 4 * (this._cubeSize - v2), 3 * v2, 2 * v2), a2.setRenderTarget(t2), a2.render(c2, us);
  }
}
function ys(e6, t2, i2) {
  const n2 = new fn(e6, t2, i2);
  return n2.texture.mapping = Ye, n2.texture.name = "PMREM.cubeUv", n2.scissorTest = true, n2;
}
function ws(e6, t2, i2, n2, o2) {
  e6.viewport.set(t2, i2, n2, o2), e6.scissor.set(t2, i2, n2, o2);
}
function xs() {
  return new Br({ name: "EquirectangularToCubeUV", uniforms: { envMap: { value: null } }, vertexShader: Ss(), fragmentShader: "\n\n			precision mediump float;\n			precision mediump int;\n\n			varying vec3 vOutputDirection;\n\n			uniform sampler2D envMap;\n\n			#include <common>\n\n			void main() {\n\n				vec3 outputDirection = normalize( vOutputDirection );\n				vec2 uv = equirectUv( outputDirection );\n\n				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n			}\n		", blending: 0, depthTest: false, depthWrite: false });
}
function Cs() {
  return new Br({ name: "CubemapToCubeUV", uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 } }, vertexShader: Ss(), fragmentShader: "\n\n			precision mediump float;\n			precision mediump int;\n\n			uniform float flipEnvMap;\n\n			varying vec3 vOutputDirection;\n\n			uniform samplerCube envMap;\n\n			void main() {\n\n				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n			}\n		", blending: 0, depthTest: false, depthWrite: false });
}
function Ss() {
  return "\n\n		precision mediump float;\n		precision mediump int;\n\n		attribute float faceIndex;\n\n		varying vec3 vOutputDirection;\n\n		// RH coordinate system; PMREM face-indexing convention\n		vec3 getDirection( vec2 uv, float face ) {\n\n			uv = 2.0 * uv - 1.0;\n\n			vec3 direction = vec3( uv, 1.0 );\n\n			if ( face == 0.0 ) {\n\n				direction = direction.zyx; // ( 1, v, u ) pos x\n\n			} else if ( face == 1.0 ) {\n\n				direction = direction.xzy;\n				direction.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n			} else if ( face == 2.0 ) {\n\n				direction.x *= -1.0; // ( -u, v, 1 ) pos z\n\n			} else if ( face == 3.0 ) {\n\n				direction = direction.zyx;\n				direction.xz *= -1.0; // ( -1, v, -u ) neg x\n\n			} else if ( face == 4.0 ) {\n\n				direction = direction.xzy;\n				direction.xy *= -1.0; // ( -u, -1, v ) neg y\n\n			} else if ( face == 5.0 ) {\n\n				direction.z *= -1.0; // ( u, v, -1 ) neg z\n\n			}\n\n			return direction;\n\n		}\n\n		void main() {\n\n			vOutputDirection = getDirection( uv, faceIndex );\n			gl_Position = vec4( position, 1.0 );\n\n		}\n	";
}
function Es(e6) {
  let t2 = /* @__PURE__ */ new WeakMap(), i2 = null;
  function n2(e7) {
    const i3 = e7.target;
    i3.removeEventListener("dispose", n2);
    const o2 = t2.get(i3);
    void 0 !== o2 && (t2.delete(i3), o2.dispose());
  }
  return { get: function(o2) {
    if (o2 && o2.isTexture) {
      const r2 = o2.mapping, s2 = r2 === Xe || 304 === r2, a2 = r2 === We || r2 === je;
      if (s2 || a2) {
        let r3 = t2.get(o2);
        const l2 = void 0 !== r3 ? r3.texture.pmremVersion : 0;
        if (o2.isRenderTargetTexture && o2.pmremVersion !== l2) return null === i2 && (i2 = new bs(e6)), r3 = s2 ? i2.fromEquirectangular(o2, r3) : i2.fromCubemap(o2, r3), r3.texture.pmremVersion = o2.pmremVersion, t2.set(o2, r3), r3.texture;
        if (void 0 !== r3) return r3.texture;
        {
          const l3 = o2.image;
          return s2 && l3 && l3.height > 0 || a2 && l3 && function(e7) {
            let t3 = 0;
            const i3 = 6;
            for (let n3 = 0; n3 < i3; n3++) void 0 !== e7[n3] && t3++;
            return t3 === i3;
          }(l3) ? (null === i2 && (i2 = new bs(e6)), r3 = s2 ? i2.fromEquirectangular(o2) : i2.fromCubemap(o2), r3.texture.pmremVersion = o2.pmremVersion, t2.set(o2, r3), o2.addEventListener("dispose", n2), r3.texture) : null;
        }
      }
    }
    return o2;
  }, dispose: function() {
    t2 = /* @__PURE__ */ new WeakMap(), null !== i2 && (i2.dispose(), i2 = null);
  } };
}
function Ts(e6) {
  const t2 = {};
  function i2(i3) {
    if (void 0 !== t2[i3]) return t2[i3];
    let n2;
    switch (i3) {
      case "WEBGL_depth_texture":
        n2 = e6.getExtension("WEBGL_depth_texture") || e6.getExtension("MOZ_WEBGL_depth_texture") || e6.getExtension("WEBKIT_WEBGL_depth_texture");
        break;
      case "EXT_texture_filter_anisotropic":
        n2 = e6.getExtension("EXT_texture_filter_anisotropic") || e6.getExtension("MOZ_EXT_texture_filter_anisotropic") || e6.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
        break;
      case "WEBGL_compressed_texture_s3tc":
        n2 = e6.getExtension("WEBGL_compressed_texture_s3tc") || e6.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e6.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
        break;
      case "WEBGL_compressed_texture_pvrtc":
        n2 = e6.getExtension("WEBGL_compressed_texture_pvrtc") || e6.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
        break;
      default:
        n2 = e6.getExtension(i3);
    }
    return t2[i3] = n2, n2;
  }
  return { has: function(e7) {
    return null !== i2(e7);
  }, init: function() {
    i2("EXT_color_buffer_float"), i2("WEBGL_clip_cull_distance"), i2("OES_texture_float_linear"), i2("EXT_color_buffer_half_float"), i2("WEBGL_multisampled_render_to_texture"), i2("WEBGL_render_shared_exponent");
  }, get: function(e7) {
    const t3 = i2(e7);
    return null === t3 && Ji("THREE.WebGLRenderer: " + e7 + " extension not supported."), t3;
  } };
}
function Is(e6, t2, i2, n2) {
  const o2 = {}, r2 = /* @__PURE__ */ new WeakMap();
  function s2(e7) {
    const a3 = e7.target;
    null !== a3.index && t2.remove(a3.index);
    for (const e8 in a3.attributes) t2.remove(a3.attributes[e8]);
    for (const e8 in a3.morphAttributes) {
      const i3 = a3.morphAttributes[e8];
      for (let e9 = 0, n3 = i3.length; e9 < n3; e9++) t2.remove(i3[e9]);
    }
    a3.removeEventListener("dispose", s2), delete o2[a3.id];
    const l2 = r2.get(a3);
    l2 && (t2.remove(l2), r2.delete(a3)), n2.releaseStatesOfGeometry(a3), true === a3.isInstancedBufferGeometry && delete a3._maxInstanceCount, i2.memory.geometries--;
  }
  function a2(e7) {
    const i3 = [], n3 = e7.index, o3 = e7.attributes.position;
    let s3 = 0;
    if (null !== n3) {
      const e8 = n3.array;
      s3 = n3.version;
      for (let t3 = 0, n4 = e8.length; t3 < n4; t3 += 3) {
        const n5 = e8[t3 + 0], o4 = e8[t3 + 1], r3 = e8[t3 + 2];
        i3.push(n5, o4, o4, r3, r3, n5);
      }
    } else {
      if (void 0 === o3) return;
      {
        const e8 = o3.array;
        s3 = o3.version;
        for (let t3 = 0, n4 = e8.length / 3 - 1; t3 < n4; t3 += 3) {
          const e9 = t3 + 0, n5 = t3 + 1, o4 = t3 + 2;
          i3.push(e9, n5, n5, o4, o4, e9);
        }
      }
    }
    const a3 = new (Xi(i3) ? ir : tr)(i3, 1);
    a3.version = s3;
    const l2 = r2.get(e7);
    l2 && t2.remove(l2), r2.set(e7, a3);
  }
  return { get: function(e7, t3) {
    return true === o2[t3.id] || (t3.addEventListener("dispose", s2), o2[t3.id] = true, i2.memory.geometries++), t3;
  }, update: function(i3) {
    const n3 = i3.attributes;
    for (const i4 in n3) t2.update(n3[i4], e6.ARRAY_BUFFER);
    const o3 = i3.morphAttributes;
    for (const i4 in o3) {
      const n4 = o3[i4];
      for (let i5 = 0, o4 = n4.length; i5 < o4; i5++) t2.update(n4[i5], e6.ARRAY_BUFFER);
    }
  }, getWireframeAttribute: function(e7) {
    const t3 = r2.get(e7);
    if (t3) {
      const i3 = e7.index;
      null !== i3 && t3.version < i3.version && a2(e7);
    } else a2(e7);
    return r2.get(e7);
  } };
}
function Ms(e6, t2, i2) {
  let n2, o2, r2;
  function s2(t3, s3, a2) {
    0 !== a2 && (e6.drawElementsInstanced(n2, s3, o2, t3 * r2, a2), i2.update(s3, n2, a2));
  }
  this.setMode = function(e7) {
    n2 = e7;
  }, this.setIndex = function(e7) {
    o2 = e7.type, r2 = e7.bytesPerElement;
  }, this.render = function(t3, s3) {
    e6.drawElements(n2, s3, o2, t3 * r2), i2.update(s3, n2, 1);
  }, this.renderInstances = s2, this.renderMultiDraw = function(e7, r3, s3) {
    if (0 === s3) return;
    t2.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n2, r3, 0, o2, e7, 0, s3);
    let a2 = 0;
    for (let e8 = 0; e8 < s3; e8++) a2 += r3[e8];
    i2.update(a2, n2, 1);
  }, this.renderMultiDrawInstances = function(e7, a2, l2, c2) {
    if (0 === l2) return;
    const h2 = t2.get("WEBGL_multi_draw");
    if (null === h2) for (let t3 = 0; t3 < e7.length; t3++) s2(e7[t3] / r2, a2[t3], c2[t3]);
    else {
      h2.multiDrawElementsInstancedWEBGL(n2, a2, 0, o2, e7, 0, c2, 0, l2);
      let t3 = 0;
      for (let e8 = 0; e8 < l2; e8++) t3 += a2[e8];
      for (let e8 = 0; e8 < c2.length; e8++) i2.update(t3, n2, c2[e8]);
    }
  };
}
function Bs(e6) {
  const t2 = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
  return { memory: { geometries: 0, textures: 0 }, render: t2, programs: null, autoReset: true, reset: function() {
    t2.calls = 0, t2.triangles = 0, t2.points = 0, t2.lines = 0;
  }, update: function(i2, n2, o2) {
    switch (t2.calls++, n2) {
      case e6.TRIANGLES:
        t2.triangles += o2 * (i2 / 3);
        break;
      case e6.LINES:
        t2.lines += o2 * (i2 / 2);
        break;
      case e6.LINE_STRIP:
        t2.lines += o2 * (i2 - 1);
        break;
      case e6.LINE_LOOP:
        t2.lines += o2 * i2;
        break;
      case e6.POINTS:
        t2.points += o2 * i2;
        break;
      default:
        console.error("THREE.WebGLInfo: Unknown draw mode:", n2);
    }
  } };
}
function Rs(e6, t2, i2) {
  const n2 = /* @__PURE__ */ new WeakMap(), o2 = new gn();
  return { update: function(r2, s2, a2) {
    const l2 = r2.morphTargetInfluences, c2 = s2.morphAttributes.position || s2.morphAttributes.normal || s2.morphAttributes.color, h2 = void 0 !== c2 ? c2.length : 0;
    let u2 = n2.get(s2);
    if (void 0 === u2 || u2.count !== h2) {
      let C2 = function() {
        w2.dispose(), n2.delete(s2), s2.removeEventListener("dispose", C2);
      };
      void 0 !== u2 && u2.texture.dispose();
      const d2 = void 0 !== s2.morphAttributes.position, p2 = void 0 !== s2.morphAttributes.normal, _2 = void 0 !== s2.morphAttributes.color, g2 = s2.morphAttributes.position || [], m2 = s2.morphAttributes.normal || [], f2 = s2.morphAttributes.color || [];
      let v2 = 0;
      true === d2 && (v2 = 1), true === p2 && (v2 = 2), true === _2 && (v2 = 3);
      let A2 = s2.attributes.position.count * v2, b2 = 1;
      A2 > t2.maxTextureSize && (b2 = Math.ceil(A2 / t2.maxTextureSize), A2 = t2.maxTextureSize);
      const y2 = new Float32Array(A2 * b2 * 4 * h2), w2 = new vn(y2, A2, b2, h2);
      w2.type = dt, w2.needsUpdate = true;
      const x2 = 4 * v2;
      for (let S2 = 0; S2 < h2; S2++) {
        const E2 = g2[S2], T2 = m2[S2], I2 = f2[S2], M2 = A2 * b2 * 4 * S2;
        for (let B2 = 0; B2 < E2.count; B2++) {
          const R2 = B2 * x2;
          true === d2 && (o2.fromBufferAttribute(E2, B2), y2[M2 + R2 + 0] = o2.x, y2[M2 + R2 + 1] = o2.y, y2[M2 + R2 + 2] = o2.z, y2[M2 + R2 + 3] = 0), true === p2 && (o2.fromBufferAttribute(T2, B2), y2[M2 + R2 + 4] = o2.x, y2[M2 + R2 + 5] = o2.y, y2[M2 + R2 + 6] = o2.z, y2[M2 + R2 + 7] = 0), true === _2 && (o2.fromBufferAttribute(I2, B2), y2[M2 + R2 + 8] = o2.x, y2[M2 + R2 + 9] = o2.y, y2[M2 + R2 + 10] = o2.z, y2[M2 + R2 + 11] = 4 === I2.itemSize ? o2.w : 1);
        }
      }
      u2 = { count: h2, texture: w2, size: new $i(A2, b2) }, n2.set(s2, u2), s2.addEventListener("dispose", C2);
    }
    if (true === r2.isInstancedMesh && null !== r2.morphTexture) a2.getUniforms().setValue(e6, "morphTexture", r2.morphTexture, i2);
    else {
      let k2 = 0;
      for (let D2 = 0; D2 < l2.length; D2++) k2 += l2[D2];
      const P2 = s2.morphTargetsRelative ? 1 : 1 - k2;
      a2.getUniforms().setValue(e6, "morphTargetBaseInfluence", P2), a2.getUniforms().setValue(e6, "morphTargetInfluences", l2);
    }
    a2.getUniforms().setValue(e6, "morphTargetsTexture", u2.texture, i2), a2.getUniforms().setValue(e6, "morphTargetsTextureSize", u2.size);
  } };
}
function ks(e6, t2, i2, n2) {
  let o2 = /* @__PURE__ */ new WeakMap();
  function r2(e7) {
    const t3 = e7.target;
    t3.removeEventListener("dispose", r2), i2.remove(t3.instanceMatrix), null !== t3.instanceColor && i2.remove(t3.instanceColor);
  }
  return { update: function(s2) {
    const a2 = n2.render.frame, l2 = s2.geometry, c2 = t2.get(s2, l2);
    if (o2.get(c2) !== a2 && (t2.update(c2), o2.set(c2, a2)), s2.isInstancedMesh && (false === s2.hasEventListener("dispose", r2) && s2.addEventListener("dispose", r2), o2.get(s2) !== a2 && (i2.update(s2.instanceMatrix, e6.ARRAY_BUFFER), null !== s2.instanceColor && i2.update(s2.instanceColor, e6.ARRAY_BUFFER), o2.set(s2, a2))), s2.isSkinnedMesh) {
      const e7 = s2.skeleton;
      o2.get(e7) !== a2 && (e7.update(), o2.set(e7, a2));
    }
    return c2;
  }, dispose: function() {
    o2 = /* @__PURE__ */ new WeakMap();
  } };
}
class Ps extends _n {
  constructor(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2 = 1026) {
    if (c2 !== At && c2 !== bt) throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
    void 0 === i2 && c2 === At && (i2 = ut), void 0 === i2 && c2 === bt && (i2 = mt), super(null, n2, o2, r2, s2, a2, c2, i2, l2), this.isDepthTexture = true, this.image = { width: e6, height: t2 }, this.magFilter = void 0 !== s2 ? s2 : et, this.minFilter = void 0 !== a2 ? a2 : et, this.flipY = false, this.generateMipmaps = false, this.compareFunction = null;
  }
  copy(e6) {
    return super.copy(e6), this.compareFunction = e6.compareFunction, this;
  }
  toJSON(e6) {
    const t2 = super.toJSON(e6);
    return null !== this.compareFunction && (t2.compareFunction = this.compareFunction), t2;
  }
}
const Ds = new _n(), Ls = new Ps(1, 1), Fs = new vn(), Ns = new An(), Os = new Or(), Us = [], zs = [], Hs = new Float32Array(16), Qs = new Float32Array(9), Vs = new Float32Array(4);
function Gs(e6, t2, i2) {
  const n2 = e6[0];
  if (n2 <= 0 || n2 > 0) return e6;
  const o2 = t2 * i2;
  let r2 = Us[o2];
  if (void 0 === r2 && (r2 = new Float32Array(o2), Us[o2] = r2), 0 !== t2) {
    n2.toArray(r2, 0);
    for (let n3 = 1, o3 = 0; n3 !== t2; ++n3) o3 += i2, e6[n3].toArray(r2, o3);
  }
  return r2;
}
function qs(e6, t2) {
  if (e6.length !== t2.length) return false;
  for (let i2 = 0, n2 = e6.length; i2 < n2; i2++) if (e6[i2] !== t2[i2]) return false;
  return true;
}
function $s(e6, t2) {
  for (let i2 = 0, n2 = t2.length; i2 < n2; i2++) e6[i2] = t2[i2];
}
function Ws(e6, t2) {
  let i2 = zs[t2];
  void 0 === i2 && (i2 = new Int32Array(t2), zs[t2] = i2);
  for (let n2 = 0; n2 !== t2; ++n2) i2[n2] = e6.allocateTextureUnit();
  return i2;
}
function js(e6, t2) {
  const i2 = this.cache;
  i2[0] !== t2 && (e6.uniform1f(this.addr, t2), i2[0] = t2);
}
function Xs(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y || (e6.uniform2f(this.addr, t2.x, t2.y), i2[0] = t2.x, i2[1] = t2.y);
  else {
    if (qs(i2, t2)) return;
    e6.uniform2fv(this.addr, t2), $s(i2, t2);
  }
}
function Ys(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y && i2[2] === t2.z || (e6.uniform3f(this.addr, t2.x, t2.y, t2.z), i2[0] = t2.x, i2[1] = t2.y, i2[2] = t2.z);
  else if (void 0 !== t2.r) i2[0] === t2.r && i2[1] === t2.g && i2[2] === t2.b || (e6.uniform3f(this.addr, t2.r, t2.g, t2.b), i2[0] = t2.r, i2[1] = t2.g, i2[2] = t2.b);
  else {
    if (qs(i2, t2)) return;
    e6.uniform3fv(this.addr, t2), $s(i2, t2);
  }
}
function Ks(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y && i2[2] === t2.z && i2[3] === t2.w || (e6.uniform4f(this.addr, t2.x, t2.y, t2.z, t2.w), i2[0] = t2.x, i2[1] = t2.y, i2[2] = t2.z, i2[3] = t2.w);
  else {
    if (qs(i2, t2)) return;
    e6.uniform4fv(this.addr, t2), $s(i2, t2);
  }
}
function Zs(e6, t2) {
  const i2 = this.cache, n2 = t2.elements;
  if (void 0 === n2) {
    if (qs(i2, t2)) return;
    e6.uniformMatrix2fv(this.addr, false, t2), $s(i2, t2);
  } else {
    if (qs(i2, n2)) return;
    Vs.set(n2), e6.uniformMatrix2fv(this.addr, false, Vs), $s(i2, n2);
  }
}
function Js(e6, t2) {
  const i2 = this.cache, n2 = t2.elements;
  if (void 0 === n2) {
    if (qs(i2, t2)) return;
    e6.uniformMatrix3fv(this.addr, false, t2), $s(i2, t2);
  } else {
    if (qs(i2, n2)) return;
    Qs.set(n2), e6.uniformMatrix3fv(this.addr, false, Qs), $s(i2, n2);
  }
}
function ea(e6, t2) {
  const i2 = this.cache, n2 = t2.elements;
  if (void 0 === n2) {
    if (qs(i2, t2)) return;
    e6.uniformMatrix4fv(this.addr, false, t2), $s(i2, t2);
  } else {
    if (qs(i2, n2)) return;
    Hs.set(n2), e6.uniformMatrix4fv(this.addr, false, Hs), $s(i2, n2);
  }
}
function ta(e6, t2) {
  const i2 = this.cache;
  i2[0] !== t2 && (e6.uniform1i(this.addr, t2), i2[0] = t2);
}
function ia(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y || (e6.uniform2i(this.addr, t2.x, t2.y), i2[0] = t2.x, i2[1] = t2.y);
  else {
    if (qs(i2, t2)) return;
    e6.uniform2iv(this.addr, t2), $s(i2, t2);
  }
}
function na(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y && i2[2] === t2.z || (e6.uniform3i(this.addr, t2.x, t2.y, t2.z), i2[0] = t2.x, i2[1] = t2.y, i2[2] = t2.z);
  else {
    if (qs(i2, t2)) return;
    e6.uniform3iv(this.addr, t2), $s(i2, t2);
  }
}
function oa(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y && i2[2] === t2.z && i2[3] === t2.w || (e6.uniform4i(this.addr, t2.x, t2.y, t2.z, t2.w), i2[0] = t2.x, i2[1] = t2.y, i2[2] = t2.z, i2[3] = t2.w);
  else {
    if (qs(i2, t2)) return;
    e6.uniform4iv(this.addr, t2), $s(i2, t2);
  }
}
function ra(e6, t2) {
  const i2 = this.cache;
  i2[0] !== t2 && (e6.uniform1ui(this.addr, t2), i2[0] = t2);
}
function sa(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y || (e6.uniform2ui(this.addr, t2.x, t2.y), i2[0] = t2.x, i2[1] = t2.y);
  else {
    if (qs(i2, t2)) return;
    e6.uniform2uiv(this.addr, t2), $s(i2, t2);
  }
}
function aa(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y && i2[2] === t2.z || (e6.uniform3ui(this.addr, t2.x, t2.y, t2.z), i2[0] = t2.x, i2[1] = t2.y, i2[2] = t2.z);
  else {
    if (qs(i2, t2)) return;
    e6.uniform3uiv(this.addr, t2), $s(i2, t2);
  }
}
function la(e6, t2) {
  const i2 = this.cache;
  if (void 0 !== t2.x) i2[0] === t2.x && i2[1] === t2.y && i2[2] === t2.z && i2[3] === t2.w || (e6.uniform4ui(this.addr, t2.x, t2.y, t2.z, t2.w), i2[0] = t2.x, i2[1] = t2.y, i2[2] = t2.z, i2[3] = t2.w);
  else {
    if (qs(i2, t2)) return;
    e6.uniform4uiv(this.addr, t2), $s(i2, t2);
  }
}
function ca(e6, t2, i2) {
  const n2 = this.cache, o2 = i2.allocateTextureUnit();
  let r2;
  n2[0] !== o2 && (e6.uniform1i(this.addr, o2), n2[0] = o2), this.type === e6.SAMPLER_2D_SHADOW ? (Ls.compareFunction = 515, r2 = Ls) : r2 = Ds, i2.setTexture2D(t2 || r2, o2);
}
function ha(e6, t2, i2) {
  const n2 = this.cache, o2 = i2.allocateTextureUnit();
  n2[0] !== o2 && (e6.uniform1i(this.addr, o2), n2[0] = o2), i2.setTexture3D(t2 || Ns, o2);
}
function ua(e6, t2, i2) {
  const n2 = this.cache, o2 = i2.allocateTextureUnit();
  n2[0] !== o2 && (e6.uniform1i(this.addr, o2), n2[0] = o2), i2.setTextureCube(t2 || Os, o2);
}
function da(e6, t2, i2) {
  const n2 = this.cache, o2 = i2.allocateTextureUnit();
  n2[0] !== o2 && (e6.uniform1i(this.addr, o2), n2[0] = o2), i2.setTexture2DArray(t2 || Fs, o2);
}
function pa(e6, t2) {
  e6.uniform1fv(this.addr, t2);
}
function _a(e6, t2) {
  const i2 = Gs(t2, this.size, 2);
  e6.uniform2fv(this.addr, i2);
}
function ga(e6, t2) {
  const i2 = Gs(t2, this.size, 3);
  e6.uniform3fv(this.addr, i2);
}
function ma(e6, t2) {
  const i2 = Gs(t2, this.size, 4);
  e6.uniform4fv(this.addr, i2);
}
function fa(e6, t2) {
  const i2 = Gs(t2, this.size, 4);
  e6.uniformMatrix2fv(this.addr, false, i2);
}
function va(e6, t2) {
  const i2 = Gs(t2, this.size, 9);
  e6.uniformMatrix3fv(this.addr, false, i2);
}
function Aa(e6, t2) {
  const i2 = Gs(t2, this.size, 16);
  e6.uniformMatrix4fv(this.addr, false, i2);
}
function ba(e6, t2) {
  e6.uniform1iv(this.addr, t2);
}
function ya(e6, t2) {
  e6.uniform2iv(this.addr, t2);
}
function wa(e6, t2) {
  e6.uniform3iv(this.addr, t2);
}
function xa(e6, t2) {
  e6.uniform4iv(this.addr, t2);
}
function Ca(e6, t2) {
  e6.uniform1uiv(this.addr, t2);
}
function Sa(e6, t2) {
  e6.uniform2uiv(this.addr, t2);
}
function Ea(e6, t2) {
  e6.uniform3uiv(this.addr, t2);
}
function Ta(e6, t2) {
  e6.uniform4uiv(this.addr, t2);
}
function Ia(e6, t2, i2) {
  const n2 = this.cache, o2 = t2.length, r2 = Ws(i2, o2);
  qs(n2, r2) || (e6.uniform1iv(this.addr, r2), $s(n2, r2));
  for (let e7 = 0; e7 !== o2; ++e7) i2.setTexture2D(t2[e7] || Ds, r2[e7]);
}
function Ma(e6, t2, i2) {
  const n2 = this.cache, o2 = t2.length, r2 = Ws(i2, o2);
  qs(n2, r2) || (e6.uniform1iv(this.addr, r2), $s(n2, r2));
  for (let e7 = 0; e7 !== o2; ++e7) i2.setTexture3D(t2[e7] || Ns, r2[e7]);
}
function Ba(e6, t2, i2) {
  const n2 = this.cache, o2 = t2.length, r2 = Ws(i2, o2);
  qs(n2, r2) || (e6.uniform1iv(this.addr, r2), $s(n2, r2));
  for (let e7 = 0; e7 !== o2; ++e7) i2.setTextureCube(t2[e7] || Os, r2[e7]);
}
function Ra(e6, t2, i2) {
  const n2 = this.cache, o2 = t2.length, r2 = Ws(i2, o2);
  qs(n2, r2) || (e6.uniform1iv(this.addr, r2), $s(n2, r2));
  for (let e7 = 0; e7 !== o2; ++e7) i2.setTexture2DArray(t2[e7] || Fs, r2[e7]);
}
class ka {
  constructor(e6, t2, i2) {
    this.id = e6, this.addr = i2, this.cache = [], this.type = t2.type, this.setValue = function(e7) {
      switch (e7) {
        case 5126:
          return js;
        case 35664:
          return Xs;
        case 35665:
          return Ys;
        case 35666:
          return Ks;
        case 35674:
          return Zs;
        case 35675:
          return Js;
        case 35676:
          return ea;
        case 5124:
        case 35670:
          return ta;
        case 35667:
        case 35671:
          return ia;
        case 35668:
        case 35672:
          return na;
        case 35669:
        case 35673:
          return oa;
        case 5125:
          return ra;
        case 36294:
          return sa;
        case 36295:
          return aa;
        case 36296:
          return la;
        case 35678:
        case 36198:
        case 36298:
        case 36306:
        case 35682:
          return ca;
        case 35679:
        case 36299:
        case 36307:
          return ha;
        case 35680:
        case 36300:
        case 36308:
        case 36293:
          return ua;
        case 36289:
        case 36303:
        case 36311:
        case 36292:
          return da;
      }
    }(t2.type);
  }
}
class Pa {
  constructor(e6, t2, i2) {
    this.id = e6, this.addr = i2, this.cache = [], this.type = t2.type, this.size = t2.size, this.setValue = function(e7) {
      switch (e7) {
        case 5126:
          return pa;
        case 35664:
          return _a;
        case 35665:
          return ga;
        case 35666:
          return ma;
        case 35674:
          return fa;
        case 35675:
          return va;
        case 35676:
          return Aa;
        case 5124:
        case 35670:
          return ba;
        case 35667:
        case 35671:
          return ya;
        case 35668:
        case 35672:
          return wa;
        case 35669:
        case 35673:
          return xa;
        case 5125:
          return Ca;
        case 36294:
          return Sa;
        case 36295:
          return Ea;
        case 36296:
          return Ta;
        case 35678:
        case 36198:
        case 36298:
        case 36306:
        case 35682:
          return Ia;
        case 35679:
        case 36299:
        case 36307:
          return Ma;
        case 35680:
        case 36300:
        case 36308:
        case 36293:
          return Ba;
        case 36289:
        case 36303:
        case 36311:
        case 36292:
          return Ra;
      }
    }(t2.type);
  }
}
class Da {
  constructor(e6) {
    this.id = e6, this.seq = [], this.map = {};
  }
  setValue(e6, t2, i2) {
    const n2 = this.seq;
    for (let o2 = 0, r2 = n2.length; o2 !== r2; ++o2) {
      const r3 = n2[o2];
      r3.setValue(e6, t2[r3.id], i2);
    }
  }
}
const La = /(\w+)(\])?(\[|\.)?/g;
function Fa(e6, t2) {
  e6.seq.push(t2), e6.map[t2.id] = t2;
}
function Na(e6, t2, i2) {
  const n2 = e6.name, o2 = n2.length;
  for (La.lastIndex = 0; ; ) {
    const r2 = La.exec(n2), s2 = La.lastIndex;
    let a2 = r2[1];
    const l2 = "]" === r2[2], c2 = r2[3];
    if (l2 && (a2 |= 0), void 0 === c2 || "[" === c2 && s2 + 2 === o2) {
      Fa(i2, void 0 === c2 ? new ka(a2, e6, t2) : new Pa(a2, e6, t2));
      break;
    }
    {
      let e7 = i2.map[a2];
      void 0 === e7 && (e7 = new Da(a2), Fa(i2, e7)), i2 = e7;
    }
  }
}
class Oa {
  constructor(e6, t2) {
    this.seq = [], this.map = {};
    const i2 = e6.getProgramParameter(t2, e6.ACTIVE_UNIFORMS);
    for (let n2 = 0; n2 < i2; ++n2) {
      const i3 = e6.getActiveUniform(t2, n2);
      Na(i3, e6.getUniformLocation(t2, i3.name), this);
    }
  }
  setValue(e6, t2, i2, n2) {
    const o2 = this.map[t2];
    void 0 !== o2 && o2.setValue(e6, i2, n2);
  }
  setOptional(e6, t2, i2) {
    const n2 = t2[i2];
    void 0 !== n2 && this.setValue(e6, i2, n2);
  }
  static upload(e6, t2, i2, n2) {
    for (let o2 = 0, r2 = t2.length; o2 !== r2; ++o2) {
      const r3 = t2[o2], s2 = i2[r3.id];
      false !== s2.needsUpdate && r3.setValue(e6, s2.value, n2);
    }
  }
  static seqWithValue(e6, t2) {
    const i2 = [];
    for (let n2 = 0, o2 = e6.length; n2 !== o2; ++n2) {
      const o3 = e6[n2];
      o3.id in t2 && i2.push(o3);
    }
    return i2;
  }
}
function Ua(e6, t2, i2) {
  const n2 = e6.createShader(t2);
  return e6.shaderSource(n2, i2), e6.compileShader(n2), n2;
}
let za = 0;
function Ha(e6, t2, i2) {
  const n2 = e6.getShaderParameter(t2, e6.COMPILE_STATUS), o2 = e6.getShaderInfoLog(t2).trim();
  if (n2 && "" === o2) return "";
  const r2 = /ERROR: 0:(\d+)/.exec(o2);
  if (r2) {
    const n3 = parseInt(r2[1]);
    return i2.toUpperCase() + "\n\n" + o2 + "\n\n" + function(e7, t3) {
      const i3 = e7.split("\n"), n4 = [], o3 = Math.max(t3 - 6, 0), r3 = Math.min(t3 + 6, i3.length);
      for (let e8 = o3; e8 < r3; e8++) {
        const o4 = e8 + 1;
        n4.push(`${o4 === t3 ? ">" : " "} ${o4}: ${i3[e8]}`);
      }
      return n4.join("\n");
    }(e6.getShaderSource(t2), n3);
  }
  return o2;
}
function Qa(e6, t2) {
  const i2 = function(e7) {
    const t3 = rn.getPrimaries(rn.workingColorSpace), i3 = rn.getPrimaries(e7);
    let n2;
    switch (t3 === i3 ? n2 = "" : t3 === bi && i3 === Ai ? n2 = "LinearDisplayP3ToLinearSRGB" : t3 === Ai && i3 === bi && (n2 = "LinearSRGBToLinearDisplayP3"), e7) {
      case _i:
      case mi:
        return [n2, "LinearTransferOETF"];
      case pi:
      case gi:
        return [n2, "sRGBTransferOETF"];
      default:
        return console.warn("THREE.WebGLProgram: Unsupported color space:", e7), [n2, "LinearTransferOETF"];
    }
  }(t2);
  return `vec4 ${e6}( vec4 value ) { return ${i2[0]}( ${i2[1]}( value ) ); }`;
}
function Va(e6, t2) {
  let i2;
  switch (t2) {
    case 1:
      i2 = "Linear";
      break;
    case 2:
      i2 = "Reinhard";
      break;
    case 3:
      i2 = "Cineon";
      break;
    case 4:
      i2 = "ACESFilmic";
      break;
    case 6:
      i2 = "AgX";
      break;
    case 7:
      i2 = "Neutral";
      break;
    case 5:
      i2 = "Custom";
      break;
    default:
      console.warn("THREE.WebGLProgram: Unsupported toneMapping:", t2), i2 = "Linear";
  }
  return "vec3 " + e6 + "( vec3 color ) { return " + i2 + "ToneMapping( color ); }";
}
const Ga = new yn();
function qa() {
  rn.getLuminanceCoefficients(Ga);
  return ["float luminance( const in vec3 rgb ) {", `	const vec3 weights = vec3( ${Ga.x.toFixed(4)}, ${Ga.y.toFixed(4)}, ${Ga.z.toFixed(4)} );`, "	return dot( weights, rgb );", "}"].join("\n");
}
function $a(e6) {
  return "" !== e6;
}
function Wa(e6, t2) {
  const i2 = t2.numSpotLightShadows + t2.numSpotLightMaps - t2.numSpotLightShadowsWithMaps;
  return e6.replace(/NUM_DIR_LIGHTS/g, t2.numDirLights).replace(/NUM_SPOT_LIGHTS/g, t2.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g, t2.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g, i2).replace(/NUM_RECT_AREA_LIGHTS/g, t2.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, t2.numPointLights).replace(/NUM_HEMI_LIGHTS/g, t2.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, t2.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, t2.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g, t2.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, t2.numPointLightShadows);
}
function ja(e6, t2) {
  return e6.replace(/NUM_CLIPPING_PLANES/g, t2.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, t2.numClippingPlanes - t2.numClipIntersection);
}
const Xa = /^[ \t]*#include +<([\w\d./]+)>/gm;
function Ya(e6) {
  return e6.replace(Xa, Za);
}
const Ka = /* @__PURE__ */ new Map();
function Za(e6, t2) {
  let i2 = Yr[t2];
  if (void 0 === i2) {
    const e7 = Ka.get(t2);
    if (void 0 === e7) throw new Error("Can not resolve #include <" + t2 + ">");
    i2 = Yr[e7], console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.', t2, e7);
  }
  return Ya(i2);
}
const Ja = /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
function el(e6) {
  return e6.replace(Ja, tl);
}
function tl(e6, t2, i2, n2) {
  let o2 = "";
  for (let e7 = parseInt(t2); e7 < parseInt(i2); e7++) o2 += n2.replace(/\[\s*i\s*\]/g, "[ " + e7 + " ]").replace(/UNROLLED_LOOP_INDEX/g, e7);
  return o2;
}
function il(e6) {
  let t2 = `precision ${e6.precision} float;
	precision ${e6.precision} int;
	precision ${e6.precision} sampler2D;
	precision ${e6.precision} samplerCube;
	precision ${e6.precision} sampler3D;
	precision ${e6.precision} sampler2DArray;
	precision ${e6.precision} sampler2DShadow;
	precision ${e6.precision} samplerCubeShadow;
	precision ${e6.precision} sampler2DArrayShadow;
	precision ${e6.precision} isampler2D;
	precision ${e6.precision} isampler3D;
	precision ${e6.precision} isamplerCube;
	precision ${e6.precision} isampler2DArray;
	precision ${e6.precision} usampler2D;
	precision ${e6.precision} usampler3D;
	precision ${e6.precision} usamplerCube;
	precision ${e6.precision} usampler2DArray;
	`;
  return "highp" === e6.precision ? t2 += "\n#define HIGH_PRECISION" : "mediump" === e6.precision ? t2 += "\n#define MEDIUM_PRECISION" : "lowp" === e6.precision && (t2 += "\n#define LOW_PRECISION"), t2;
}
function nl(e6, t2, i2, n2) {
  const o2 = e6.getContext(), r2 = i2.defines;
  let s2 = i2.vertexShader, a2 = i2.fragmentShader;
  const l2 = function(e7) {
    let t3 = "SHADOWMAP_TYPE_BASIC";
    return 1 === e7.shadowMapType ? t3 = "SHADOWMAP_TYPE_PCF" : 2 === e7.shadowMapType ? t3 = "SHADOWMAP_TYPE_PCF_SOFT" : 3 === e7.shadowMapType && (t3 = "SHADOWMAP_TYPE_VSM"), t3;
  }(i2), c2 = function(e7) {
    let t3 = "ENVMAP_TYPE_CUBE";
    if (e7.envMap) switch (e7.envMapMode) {
      case We:
      case je:
        t3 = "ENVMAP_TYPE_CUBE";
        break;
      case Ye:
        t3 = "ENVMAP_TYPE_CUBE_UV";
    }
    return t3;
  }(i2), h2 = function(e7) {
    let t3 = "ENVMAP_MODE_REFLECTION";
    e7.envMap && e7.envMapMode === je && (t3 = "ENVMAP_MODE_REFRACTION");
    return t3;
  }(i2), u2 = function(e7) {
    let t3 = "ENVMAP_BLENDING_NONE";
    if (e7.envMap) switch (e7.combine) {
      case 0:
        t3 = "ENVMAP_BLENDING_MULTIPLY";
        break;
      case 1:
        t3 = "ENVMAP_BLENDING_MIX";
        break;
      case 2:
        t3 = "ENVMAP_BLENDING_ADD";
    }
    return t3;
  }(i2), d2 = function(e7) {
    const t3 = e7.envMapCubeUVHeight;
    if (null === t3) return null;
    const i3 = Math.log2(t3) - 2, n3 = 1 / t3;
    return { texelWidth: 1 / (3 * Math.max(Math.pow(2, i3), 112)), texelHeight: n3, maxMip: i3 };
  }(i2), p2 = function(e7) {
    return [e7.extensionClipCullDistance ? "#extension GL_ANGLE_clip_cull_distance : require" : "", e7.extensionMultiDraw ? "#extension GL_ANGLE_multi_draw : require" : ""].filter($a).join("\n");
  }(i2), _2 = function(e7) {
    const t3 = [];
    for (const i3 in e7) {
      const n3 = e7[i3];
      false !== n3 && t3.push("#define " + i3 + " " + n3);
    }
    return t3.join("\n");
  }(r2), g2 = o2.createProgram();
  let m2, f2, v2 = i2.glslVersion ? "#version " + i2.glslVersion + "\n" : "";
  i2.isRawShaderMaterial ? (m2 = ["#define SHADER_TYPE " + i2.shaderType, "#define SHADER_NAME " + i2.shaderName, _2].filter($a).join("\n"), m2.length > 0 && (m2 += "\n"), f2 = ["#define SHADER_TYPE " + i2.shaderType, "#define SHADER_NAME " + i2.shaderName, _2].filter($a).join("\n"), f2.length > 0 && (f2 += "\n")) : (m2 = [il(i2), "#define SHADER_TYPE " + i2.shaderType, "#define SHADER_NAME " + i2.shaderName, _2, i2.extensionClipCullDistance ? "#define USE_CLIP_DISTANCE" : "", i2.batching ? "#define USE_BATCHING" : "", i2.batchingColor ? "#define USE_BATCHING_COLOR" : "", i2.instancing ? "#define USE_INSTANCING" : "", i2.instancingColor ? "#define USE_INSTANCING_COLOR" : "", i2.instancingMorph ? "#define USE_INSTANCING_MORPH" : "", i2.useFog && i2.fog ? "#define USE_FOG" : "", i2.useFog && i2.fogExp2 ? "#define FOG_EXP2" : "", i2.map ? "#define USE_MAP" : "", i2.envMap ? "#define USE_ENVMAP" : "", i2.envMap ? "#define " + h2 : "", i2.lightMap ? "#define USE_LIGHTMAP" : "", i2.aoMap ? "#define USE_AOMAP" : "", i2.bumpMap ? "#define USE_BUMPMAP" : "", i2.normalMap ? "#define USE_NORMALMAP" : "", i2.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "", i2.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "", i2.displacementMap ? "#define USE_DISPLACEMENTMAP" : "", i2.emissiveMap ? "#define USE_EMISSIVEMAP" : "", i2.anisotropy ? "#define USE_ANISOTROPY" : "", i2.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "", i2.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", i2.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", i2.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", i2.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "", i2.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "", i2.specularMap ? "#define USE_SPECULARMAP" : "", i2.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "", i2.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "", i2.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", i2.metalnessMap ? "#define USE_METALNESSMAP" : "", i2.alphaMap ? "#define USE_ALPHAMAP" : "", i2.alphaHash ? "#define USE_ALPHAHASH" : "", i2.transmission ? "#define USE_TRANSMISSION" : "", i2.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "", i2.thicknessMap ? "#define USE_THICKNESSMAP" : "", i2.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "", i2.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "", i2.mapUv ? "#define MAP_UV " + i2.mapUv : "", i2.alphaMapUv ? "#define ALPHAMAP_UV " + i2.alphaMapUv : "", i2.lightMapUv ? "#define LIGHTMAP_UV " + i2.lightMapUv : "", i2.aoMapUv ? "#define AOMAP_UV " + i2.aoMapUv : "", i2.emissiveMapUv ? "#define EMISSIVEMAP_UV " + i2.emissiveMapUv : "", i2.bumpMapUv ? "#define BUMPMAP_UV " + i2.bumpMapUv : "", i2.normalMapUv ? "#define NORMALMAP_UV " + i2.normalMapUv : "", i2.displacementMapUv ? "#define DISPLACEMENTMAP_UV " + i2.displacementMapUv : "", i2.metalnessMapUv ? "#define METALNESSMAP_UV " + i2.metalnessMapUv : "", i2.roughnessMapUv ? "#define ROUGHNESSMAP_UV " + i2.roughnessMapUv : "", i2.anisotropyMapUv ? "#define ANISOTROPYMAP_UV " + i2.anisotropyMapUv : "", i2.clearcoatMapUv ? "#define CLEARCOATMAP_UV " + i2.clearcoatMapUv : "", i2.clearcoatNormalMapUv ? "#define CLEARCOAT_NORMALMAP_UV " + i2.clearcoatNormalMapUv : "", i2.clearcoatRoughnessMapUv ? "#define CLEARCOAT_ROUGHNESSMAP_UV " + i2.clearcoatRoughnessMapUv : "", i2.iridescenceMapUv ? "#define IRIDESCENCEMAP_UV " + i2.iridescenceMapUv : "", i2.iridescenceThicknessMapUv ? "#define IRIDESCENCE_THICKNESSMAP_UV " + i2.iridescenceThicknessMapUv : "", i2.sheenColorMapUv ? "#define SHEEN_COLORMAP_UV " + i2.sheenColorMapUv : "", i2.sheenRoughnessMapUv ? "#define SHEEN_ROUGHNESSMAP_UV " + i2.sheenRoughnessMapUv : "", i2.specularMapUv ? "#define SPECULARMAP_UV " + i2.specularMapUv : "", i2.specularColorMapUv ? "#define SPECULAR_COLORMAP_UV " + i2.specularColorMapUv : "", i2.specularIntensityMapUv ? "#define SPECULAR_INTENSITYMAP_UV " + i2.specularIntensityMapUv : "", i2.transmissionMapUv ? "#define TRANSMISSIONMAP_UV " + i2.transmissionMapUv : "", i2.thicknessMapUv ? "#define THICKNESSMAP_UV " + i2.thicknessMapUv : "", i2.vertexTangents && false === i2.flatShading ? "#define USE_TANGENT" : "", i2.vertexColors ? "#define USE_COLOR" : "", i2.vertexAlphas ? "#define USE_COLOR_ALPHA" : "", i2.vertexUv1s ? "#define USE_UV1" : "", i2.vertexUv2s ? "#define USE_UV2" : "", i2.vertexUv3s ? "#define USE_UV3" : "", i2.pointsUvs ? "#define USE_POINTS_UV" : "", i2.flatShading ? "#define FLAT_SHADED" : "", i2.skinning ? "#define USE_SKINNING" : "", i2.morphTargets ? "#define USE_MORPHTARGETS" : "", i2.morphNormals && false === i2.flatShading ? "#define USE_MORPHNORMALS" : "", i2.morphColors ? "#define USE_MORPHCOLORS" : "", i2.morphTargetsCount > 0 ? "#define MORPHTARGETS_TEXTURE_STRIDE " + i2.morphTextureStride : "", i2.morphTargetsCount > 0 ? "#define MORPHTARGETS_COUNT " + i2.morphTargetsCount : "", i2.doubleSided ? "#define DOUBLE_SIDED" : "", i2.flipSided ? "#define FLIP_SIDED" : "", i2.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", i2.shadowMapEnabled ? "#define " + l2 : "", i2.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", i2.numLightProbes > 0 ? "#define USE_LIGHT_PROBES" : "", i2.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", i2.reverseDepthBuffer ? "#define USE_REVERSEDEPTHBUF" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", "#ifdef USE_INSTANCING", "	attribute mat4 instanceMatrix;", "#endif", "#ifdef USE_INSTANCING_COLOR", "	attribute vec3 instanceColor;", "#endif", "#ifdef USE_INSTANCING_MORPH", "	uniform sampler2D morphTexture;", "#endif", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_UV1", "	attribute vec2 uv1;", "#endif", "#ifdef USE_UV2", "	attribute vec2 uv2;", "#endif", "#ifdef USE_UV3", "	attribute vec2 uv3;", "#endif", "#ifdef USE_TANGENT", "	attribute vec4 tangent;", "#endif", "#if defined( USE_COLOR_ALPHA )", "	attribute vec4 color;", "#elif defined( USE_COLOR )", "	attribute vec3 color;", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", "\n"].filter($a).join("\n"), f2 = [il(i2), "#define SHADER_TYPE " + i2.shaderType, "#define SHADER_NAME " + i2.shaderName, _2, i2.useFog && i2.fog ? "#define USE_FOG" : "", i2.useFog && i2.fogExp2 ? "#define FOG_EXP2" : "", i2.alphaToCoverage ? "#define ALPHA_TO_COVERAGE" : "", i2.map ? "#define USE_MAP" : "", i2.matcap ? "#define USE_MATCAP" : "", i2.envMap ? "#define USE_ENVMAP" : "", i2.envMap ? "#define " + c2 : "", i2.envMap ? "#define " + h2 : "", i2.envMap ? "#define " + u2 : "", d2 ? "#define CUBEUV_TEXEL_WIDTH " + d2.texelWidth : "", d2 ? "#define CUBEUV_TEXEL_HEIGHT " + d2.texelHeight : "", d2 ? "#define CUBEUV_MAX_MIP " + d2.maxMip + ".0" : "", i2.lightMap ? "#define USE_LIGHTMAP" : "", i2.aoMap ? "#define USE_AOMAP" : "", i2.bumpMap ? "#define USE_BUMPMAP" : "", i2.normalMap ? "#define USE_NORMALMAP" : "", i2.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "", i2.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "", i2.emissiveMap ? "#define USE_EMISSIVEMAP" : "", i2.anisotropy ? "#define USE_ANISOTROPY" : "", i2.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "", i2.clearcoat ? "#define USE_CLEARCOAT" : "", i2.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", i2.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", i2.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", i2.dispersion ? "#define USE_DISPERSION" : "", i2.iridescence ? "#define USE_IRIDESCENCE" : "", i2.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "", i2.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "", i2.specularMap ? "#define USE_SPECULARMAP" : "", i2.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "", i2.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "", i2.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", i2.metalnessMap ? "#define USE_METALNESSMAP" : "", i2.alphaMap ? "#define USE_ALPHAMAP" : "", i2.alphaTest ? "#define USE_ALPHATEST" : "", i2.alphaHash ? "#define USE_ALPHAHASH" : "", i2.sheen ? "#define USE_SHEEN" : "", i2.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "", i2.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "", i2.transmission ? "#define USE_TRANSMISSION" : "", i2.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "", i2.thicknessMap ? "#define USE_THICKNESSMAP" : "", i2.vertexTangents && false === i2.flatShading ? "#define USE_TANGENT" : "", i2.vertexColors || i2.instancingColor || i2.batchingColor ? "#define USE_COLOR" : "", i2.vertexAlphas ? "#define USE_COLOR_ALPHA" : "", i2.vertexUv1s ? "#define USE_UV1" : "", i2.vertexUv2s ? "#define USE_UV2" : "", i2.vertexUv3s ? "#define USE_UV3" : "", i2.pointsUvs ? "#define USE_POINTS_UV" : "", i2.gradientMap ? "#define USE_GRADIENTMAP" : "", i2.flatShading ? "#define FLAT_SHADED" : "", i2.doubleSided ? "#define DOUBLE_SIDED" : "", i2.flipSided ? "#define FLIP_SIDED" : "", i2.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", i2.shadowMapEnabled ? "#define " + l2 : "", i2.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", i2.numLightProbes > 0 ? "#define USE_LIGHT_PROBES" : "", i2.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "", i2.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", i2.reverseDepthBuffer ? "#define USE_REVERSEDEPTHBUF" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", 0 !== i2.toneMapping ? "#define TONE_MAPPING" : "", 0 !== i2.toneMapping ? Yr.tonemapping_pars_fragment : "", 0 !== i2.toneMapping ? Va("toneMapping", i2.toneMapping) : "", i2.dithering ? "#define DITHERING" : "", i2.opaque ? "#define OPAQUE" : "", Yr.colorspace_pars_fragment, Qa("linearToOutputTexel", i2.outputColorSpace), qa(), i2.useDepthPacking ? "#define DEPTH_PACKING " + i2.depthPacking : "", "\n"].filter($a).join("\n")), s2 = Ya(s2), s2 = Wa(s2, i2), s2 = ja(s2, i2), a2 = Ya(a2), a2 = Wa(a2, i2), a2 = ja(a2, i2), s2 = el(s2), a2 = el(a2), true !== i2.isRawShaderMaterial && (v2 = "#version 300 es\n", m2 = [p2, "#define attribute in", "#define varying out", "#define texture2D texture"].join("\n") + "\n" + m2, f2 = ["#define varying in", i2.glslVersion === Ri ? "" : "layout(location = 0) out highp vec4 pc_fragColor;", i2.glslVersion === Ri ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad"].join("\n") + "\n" + f2);
  const A2 = v2 + m2 + s2, b2 = v2 + f2 + a2, y2 = Ua(o2, o2.VERTEX_SHADER, A2), w2 = Ua(o2, o2.FRAGMENT_SHADER, b2);
  function x2(t3) {
    if (e6.debug.checkShaderErrors) {
      const i3 = o2.getProgramInfoLog(g2).trim(), n3 = o2.getShaderInfoLog(y2).trim(), r3 = o2.getShaderInfoLog(w2).trim();
      let s3 = true, a3 = true;
      if (false === o2.getProgramParameter(g2, o2.LINK_STATUS)) if (s3 = false, "function" == typeof e6.debug.onShaderError) e6.debug.onShaderError(o2, g2, y2, w2);
      else {
        const e7 = Ha(o2, y2, "vertex"), n4 = Ha(o2, w2, "fragment");
        console.error("THREE.WebGLProgram: Shader Error " + o2.getError() + " - VALIDATE_STATUS " + o2.getProgramParameter(g2, o2.VALIDATE_STATUS) + "\n\nMaterial Name: " + t3.name + "\nMaterial Type: " + t3.type + "\n\nProgram Info Log: " + i3 + "\n" + e7 + "\n" + n4);
      }
      else "" !== i3 ? console.warn("THREE.WebGLProgram: Program Info Log:", i3) : "" !== n3 && "" !== r3 || (a3 = false);
      a3 && (t3.diagnostics = { runnable: s3, programLog: i3, vertexShader: { log: n3, prefix: m2 }, fragmentShader: { log: r3, prefix: f2 } });
    }
    o2.deleteShader(y2), o2.deleteShader(w2), C2 = new Oa(o2, g2), S2 = function(e7, t4) {
      const i3 = {}, n3 = e7.getProgramParameter(t4, e7.ACTIVE_ATTRIBUTES);
      for (let o3 = 0; o3 < n3; o3++) {
        const n4 = e7.getActiveAttrib(t4, o3), r3 = n4.name;
        let s3 = 1;
        n4.type === e7.FLOAT_MAT2 && (s3 = 2), n4.type === e7.FLOAT_MAT3 && (s3 = 3), n4.type === e7.FLOAT_MAT4 && (s3 = 4), i3[r3] = { type: n4.type, location: e7.getAttribLocation(t4, r3), locationSize: s3 };
      }
      return i3;
    }(o2, g2);
  }
  let C2, S2;
  o2.attachShader(g2, y2), o2.attachShader(g2, w2), void 0 !== i2.index0AttributeName ? o2.bindAttribLocation(g2, 0, i2.index0AttributeName) : true === i2.morphTargets && o2.bindAttribLocation(g2, 0, "position"), o2.linkProgram(g2), this.getUniforms = function() {
    return void 0 === C2 && x2(this), C2;
  }, this.getAttributes = function() {
    return void 0 === S2 && x2(this), S2;
  };
  let E2 = false === i2.rendererExtensionParallelShaderCompile;
  return this.isReady = function() {
    return false === E2 && (E2 = o2.getProgramParameter(g2, 37297)), E2;
  }, this.destroy = function() {
    n2.releaseStatesOfProgram(this), o2.deleteProgram(g2), this.program = void 0;
  }, this.type = i2.shaderType, this.name = i2.shaderName, this.id = za++, this.cacheKey = t2, this.usedTimes = 1, this.program = g2, this.vertexShader = y2, this.fragmentShader = w2, this;
}
let ol = 0;
class rl {
  constructor() {
    this.shaderCache = /* @__PURE__ */ new Map(), this.materialCache = /* @__PURE__ */ new Map();
  }
  update(e6) {
    const t2 = e6.vertexShader, i2 = e6.fragmentShader, n2 = this._getShaderStage(t2), o2 = this._getShaderStage(i2), r2 = this._getShaderCacheForMaterial(e6);
    return false === r2.has(n2) && (r2.add(n2), n2.usedTimes++), false === r2.has(o2) && (r2.add(o2), o2.usedTimes++), this;
  }
  remove(e6) {
    const t2 = this.materialCache.get(e6);
    for (const e7 of t2) e7.usedTimes--, 0 === e7.usedTimes && this.shaderCache.delete(e7.code);
    return this.materialCache.delete(e6), this;
  }
  getVertexShaderID(e6) {
    return this._getShaderStage(e6.vertexShader).id;
  }
  getFragmentShaderID(e6) {
    return this._getShaderStage(e6.fragmentShader).id;
  }
  dispose() {
    this.shaderCache.clear(), this.materialCache.clear();
  }
  _getShaderCacheForMaterial(e6) {
    const t2 = this.materialCache;
    let i2 = t2.get(e6);
    return void 0 === i2 && (i2 = /* @__PURE__ */ new Set(), t2.set(e6, i2)), i2;
  }
  _getShaderStage(e6) {
    const t2 = this.shaderCache;
    let i2 = t2.get(e6);
    return void 0 === i2 && (i2 = new sl(e6), t2.set(e6, i2)), i2;
  }
}
class sl {
  constructor(e6) {
    this.id = ol++, this.code = e6, this.usedTimes = 0;
  }
}
function al(e6, t2, i2, n2, o2, r2, s2) {
  const a2 = new lo(), l2 = new rl(), c2 = /* @__PURE__ */ new Set(), h2 = [], u2 = o2.logarithmicDepthBuffer, d2 = o2.reverseDepthBuffer, p2 = o2.vertexTextures;
  let _2 = o2.precision;
  const g2 = { MeshDepthMaterial: "depth", MeshDistanceMaterial: "distanceRGBA", MeshNormalMaterial: "normal", MeshBasicMaterial: "basic", MeshLambertMaterial: "lambert", MeshPhongMaterial: "phong", MeshToonMaterial: "toon", MeshStandardMaterial: "physical", MeshPhysicalMaterial: "physical", MeshMatcapMaterial: "matcap", LineBasicMaterial: "basic", LineDashedMaterial: "dashed", PointsMaterial: "points", ShadowMaterial: "shadow", SpriteMaterial: "sprite" };
  function m2(e7) {
    return c2.add(e7), 0 === e7 ? "uv" : `uv${e7}`;
  }
  return { getParameters: function(r3, a3, h3, f2, v2) {
    const A2 = f2.fog, b2 = v2.geometry, y2 = r3.isMeshStandardMaterial ? f2.environment : null, w2 = (r3.isMeshStandardMaterial ? i2 : t2).get(r3.envMap || y2), x2 = w2 && w2.mapping === Ye ? w2.image.height : null, C2 = g2[r3.type];
    null !== r3.precision && (_2 = o2.getMaxPrecision(r3.precision), _2 !== r3.precision && console.warn("THREE.WebGLProgram.getParameters:", r3.precision, "not supported, using", _2, "instead."));
    const S2 = b2.morphAttributes.position || b2.morphAttributes.normal || b2.morphAttributes.color, E2 = void 0 !== S2 ? S2.length : 0;
    let T2, I2, M2, B2, R2 = 0;
    if (void 0 !== b2.morphAttributes.position && (R2 = 1), void 0 !== b2.morphAttributes.normal && (R2 = 2), void 0 !== b2.morphAttributes.color && (R2 = 3), C2) {
      const e7 = Zr[C2];
      T2 = e7.vertexShader, I2 = e7.fragmentShader;
    } else T2 = r3.vertexShader, I2 = r3.fragmentShader, l2.update(r3), M2 = l2.getVertexShaderID(r3), B2 = l2.getFragmentShaderID(r3);
    const k2 = e6.getRenderTarget(), P2 = true === v2.isInstancedMesh, D2 = true === v2.isBatchedMesh, L2 = !!r3.map, F2 = !!r3.matcap, N2 = !!w2, O2 = !!r3.aoMap, U2 = !!r3.lightMap, z2 = !!r3.bumpMap, H2 = !!r3.normalMap, Q2 = !!r3.displacementMap, V2 = !!r3.emissiveMap, G2 = !!r3.metalnessMap, q2 = !!r3.roughnessMap, $2 = r3.anisotropy > 0, W2 = r3.clearcoat > 0, j2 = r3.dispersion > 0, X2 = r3.iridescence > 0, Y2 = r3.sheen > 0, K2 = r3.transmission > 0, Z2 = $2 && !!r3.anisotropyMap, J2 = W2 && !!r3.clearcoatMap, ee2 = W2 && !!r3.clearcoatNormalMap, te2 = W2 && !!r3.clearcoatRoughnessMap, ie2 = X2 && !!r3.iridescenceMap, ne2 = X2 && !!r3.iridescenceThicknessMap, oe2 = Y2 && !!r3.sheenColorMap, re2 = Y2 && !!r3.sheenRoughnessMap, se2 = !!r3.specularMap, ae2 = !!r3.specularColorMap, le2 = !!r3.specularIntensityMap, ce2 = K2 && !!r3.transmissionMap, he2 = K2 && !!r3.thicknessMap, ue2 = !!r3.gradientMap, de2 = !!r3.alphaMap, pe2 = r3.alphaTest > 0, _e2 = !!r3.alphaHash, ge2 = !!r3.extensions;
    let me2 = 0;
    r3.toneMapped && (null !== k2 && true !== k2.isXRRenderTarget || (me2 = e6.toneMapping));
    const fe2 = { shaderID: C2, shaderType: r3.type, shaderName: r3.name, vertexShader: T2, fragmentShader: I2, defines: r3.defines, customVertexShaderID: M2, customFragmentShaderID: B2, isRawShaderMaterial: true === r3.isRawShaderMaterial, glslVersion: r3.glslVersion, precision: _2, batching: D2, batchingColor: D2 && null !== v2._colorsTexture, instancing: P2, instancingColor: P2 && null !== v2.instanceColor, instancingMorph: P2 && null !== v2.morphTexture, supportsVertexTextures: p2, outputColorSpace: null === k2 ? e6.outputColorSpace : true === k2.isXRRenderTarget ? k2.texture.colorSpace : _i, alphaToCoverage: !!r3.alphaToCoverage, map: L2, matcap: F2, envMap: N2, envMapMode: N2 && w2.mapping, envMapCubeUVHeight: x2, aoMap: O2, lightMap: U2, bumpMap: z2, normalMap: H2, displacementMap: p2 && Q2, emissiveMap: V2, normalMapObjectSpace: H2 && 1 === r3.normalMapType, normalMapTangentSpace: H2 && 0 === r3.normalMapType, metalnessMap: G2, roughnessMap: q2, anisotropy: $2, anisotropyMap: Z2, clearcoat: W2, clearcoatMap: J2, clearcoatNormalMap: ee2, clearcoatRoughnessMap: te2, dispersion: j2, iridescence: X2, iridescenceMap: ie2, iridescenceThicknessMap: ne2, sheen: Y2, sheenColorMap: oe2, sheenRoughnessMap: re2, specularMap: se2, specularColorMap: ae2, specularIntensityMap: le2, transmission: K2, transmissionMap: ce2, thicknessMap: he2, gradientMap: ue2, opaque: false === r3.transparent && 1 === r3.blending && false === r3.alphaToCoverage, alphaMap: de2, alphaTest: pe2, alphaHash: _e2, combine: r3.combine, mapUv: L2 && m2(r3.map.channel), aoMapUv: O2 && m2(r3.aoMap.channel), lightMapUv: U2 && m2(r3.lightMap.channel), bumpMapUv: z2 && m2(r3.bumpMap.channel), normalMapUv: H2 && m2(r3.normalMap.channel), displacementMapUv: Q2 && m2(r3.displacementMap.channel), emissiveMapUv: V2 && m2(r3.emissiveMap.channel), metalnessMapUv: G2 && m2(r3.metalnessMap.channel), roughnessMapUv: q2 && m2(r3.roughnessMap.channel), anisotropyMapUv: Z2 && m2(r3.anisotropyMap.channel), clearcoatMapUv: J2 && m2(r3.clearcoatMap.channel), clearcoatNormalMapUv: ee2 && m2(r3.clearcoatNormalMap.channel), clearcoatRoughnessMapUv: te2 && m2(r3.clearcoatRoughnessMap.channel), iridescenceMapUv: ie2 && m2(r3.iridescenceMap.channel), iridescenceThicknessMapUv: ne2 && m2(r3.iridescenceThicknessMap.channel), sheenColorMapUv: oe2 && m2(r3.sheenColorMap.channel), sheenRoughnessMapUv: re2 && m2(r3.sheenRoughnessMap.channel), specularMapUv: se2 && m2(r3.specularMap.channel), specularColorMapUv: ae2 && m2(r3.specularColorMap.channel), specularIntensityMapUv: le2 && m2(r3.specularIntensityMap.channel), transmissionMapUv: ce2 && m2(r3.transmissionMap.channel), thicknessMapUv: he2 && m2(r3.thicknessMap.channel), alphaMapUv: de2 && m2(r3.alphaMap.channel), vertexTangents: !!b2.attributes.tangent && (H2 || $2), vertexColors: r3.vertexColors, vertexAlphas: true === r3.vertexColors && !!b2.attributes.color && 4 === b2.attributes.color.itemSize, pointsUvs: true === v2.isPoints && !!b2.attributes.uv && (L2 || de2), fog: !!A2, useFog: true === r3.fog, fogExp2: !!A2 && A2.isFogExp2, flatShading: true === r3.flatShading, sizeAttenuation: true === r3.sizeAttenuation, logarithmicDepthBuffer: u2, reverseDepthBuffer: d2, skinning: true === v2.isSkinnedMesh, morphTargets: void 0 !== b2.morphAttributes.position, morphNormals: void 0 !== b2.morphAttributes.normal, morphColors: void 0 !== b2.morphAttributes.color, morphTargetsCount: E2, morphTextureStride: R2, numDirLights: a3.directional.length, numPointLights: a3.point.length, numSpotLights: a3.spot.length, numSpotLightMaps: a3.spotLightMap.length, numRectAreaLights: a3.rectArea.length, numHemiLights: a3.hemi.length, numDirLightShadows: a3.directionalShadowMap.length, numPointLightShadows: a3.pointShadowMap.length, numSpotLightShadows: a3.spotShadowMap.length, numSpotLightShadowsWithMaps: a3.numSpotLightShadowsWithMaps, numLightProbes: a3.numLightProbes, numClippingPlanes: s2.numPlanes, numClipIntersection: s2.numIntersection, dithering: r3.dithering, shadowMapEnabled: e6.shadowMap.enabled && h3.length > 0, shadowMapType: e6.shadowMap.type, toneMapping: me2, decodeVideoTexture: L2 && true === r3.map.isVideoTexture && rn.getTransfer(r3.map.colorSpace) === vi, premultipliedAlpha: r3.premultipliedAlpha, doubleSided: 2 === r3.side, flipSided: 1 === r3.side, useDepthPacking: r3.depthPacking >= 0, depthPacking: r3.depthPacking || 0, index0AttributeName: r3.index0AttributeName, extensionClipCullDistance: ge2 && true === r3.extensions.clipCullDistance && n2.has("WEBGL_clip_cull_distance"), extensionMultiDraw: (ge2 && true === r3.extensions.multiDraw || D2) && n2.has("WEBGL_multi_draw"), rendererExtensionParallelShaderCompile: n2.has("KHR_parallel_shader_compile"), customProgramCacheKey: r3.customProgramCacheKey() };
    return fe2.vertexUv1s = c2.has(1), fe2.vertexUv2s = c2.has(2), fe2.vertexUv3s = c2.has(3), c2.clear(), fe2;
  }, getProgramCacheKey: function(t3) {
    const i3 = [];
    if (t3.shaderID ? i3.push(t3.shaderID) : (i3.push(t3.customVertexShaderID), i3.push(t3.customFragmentShaderID)), void 0 !== t3.defines) for (const e7 in t3.defines) i3.push(e7), i3.push(t3.defines[e7]);
    return false === t3.isRawShaderMaterial && (!function(e7, t4) {
      e7.push(t4.precision), e7.push(t4.outputColorSpace), e7.push(t4.envMapMode), e7.push(t4.envMapCubeUVHeight), e7.push(t4.mapUv), e7.push(t4.alphaMapUv), e7.push(t4.lightMapUv), e7.push(t4.aoMapUv), e7.push(t4.bumpMapUv), e7.push(t4.normalMapUv), e7.push(t4.displacementMapUv), e7.push(t4.emissiveMapUv), e7.push(t4.metalnessMapUv), e7.push(t4.roughnessMapUv), e7.push(t4.anisotropyMapUv), e7.push(t4.clearcoatMapUv), e7.push(t4.clearcoatNormalMapUv), e7.push(t4.clearcoatRoughnessMapUv), e7.push(t4.iridescenceMapUv), e7.push(t4.iridescenceThicknessMapUv), e7.push(t4.sheenColorMapUv), e7.push(t4.sheenRoughnessMapUv), e7.push(t4.specularMapUv), e7.push(t4.specularColorMapUv), e7.push(t4.specularIntensityMapUv), e7.push(t4.transmissionMapUv), e7.push(t4.thicknessMapUv), e7.push(t4.combine), e7.push(t4.fogExp2), e7.push(t4.sizeAttenuation), e7.push(t4.morphTargetsCount), e7.push(t4.morphAttributeCount), e7.push(t4.numDirLights), e7.push(t4.numPointLights), e7.push(t4.numSpotLights), e7.push(t4.numSpotLightMaps), e7.push(t4.numHemiLights), e7.push(t4.numRectAreaLights), e7.push(t4.numDirLightShadows), e7.push(t4.numPointLightShadows), e7.push(t4.numSpotLightShadows), e7.push(t4.numSpotLightShadowsWithMaps), e7.push(t4.numLightProbes), e7.push(t4.shadowMapType), e7.push(t4.toneMapping), e7.push(t4.numClippingPlanes), e7.push(t4.numClipIntersection), e7.push(t4.depthPacking);
    }(i3, t3), function(e7, t4) {
      a2.disableAll(), t4.supportsVertexTextures && a2.enable(0);
      t4.instancing && a2.enable(1);
      t4.instancingColor && a2.enable(2);
      t4.instancingMorph && a2.enable(3);
      t4.matcap && a2.enable(4);
      t4.envMap && a2.enable(5);
      t4.normalMapObjectSpace && a2.enable(6);
      t4.normalMapTangentSpace && a2.enable(7);
      t4.clearcoat && a2.enable(8);
      t4.iridescence && a2.enable(9);
      t4.alphaTest && a2.enable(10);
      t4.vertexColors && a2.enable(11);
      t4.vertexAlphas && a2.enable(12);
      t4.vertexUv1s && a2.enable(13);
      t4.vertexUv2s && a2.enable(14);
      t4.vertexUv3s && a2.enable(15);
      t4.vertexTangents && a2.enable(16);
      t4.anisotropy && a2.enable(17);
      t4.alphaHash && a2.enable(18);
      t4.batching && a2.enable(19);
      t4.dispersion && a2.enable(20);
      t4.batchingColor && a2.enable(21);
      e7.push(a2.mask), a2.disableAll(), t4.fog && a2.enable(0);
      t4.useFog && a2.enable(1);
      t4.flatShading && a2.enable(2);
      t4.logarithmicDepthBuffer && a2.enable(3);
      t4.reverseDepthBuffer && a2.enable(4);
      t4.skinning && a2.enable(5);
      t4.morphTargets && a2.enable(6);
      t4.morphNormals && a2.enable(7);
      t4.morphColors && a2.enable(8);
      t4.premultipliedAlpha && a2.enable(9);
      t4.shadowMapEnabled && a2.enable(10);
      t4.doubleSided && a2.enable(11);
      t4.flipSided && a2.enable(12);
      t4.useDepthPacking && a2.enable(13);
      t4.dithering && a2.enable(14);
      t4.transmission && a2.enable(15);
      t4.sheen && a2.enable(16);
      t4.opaque && a2.enable(17);
      t4.pointsUvs && a2.enable(18);
      t4.decodeVideoTexture && a2.enable(19);
      t4.alphaToCoverage && a2.enable(20);
      e7.push(a2.mask);
    }(i3, t3), i3.push(e6.outputColorSpace)), i3.push(t3.customProgramCacheKey), i3.join();
  }, getUniforms: function(e7) {
    const t3 = g2[e7.type];
    let i3;
    if (t3) {
      const e8 = Zr[t3];
      i3 = Mr.clone(e8.uniforms);
    } else i3 = e7.uniforms;
    return i3;
  }, acquireProgram: function(t3, i3) {
    let n3;
    for (let e7 = 0, t4 = h2.length; e7 < t4; e7++) {
      const t5 = h2[e7];
      if (t5.cacheKey === i3) {
        n3 = t5, ++n3.usedTimes;
        break;
      }
    }
    return void 0 === n3 && (n3 = new nl(e6, i3, t3, r2), h2.push(n3)), n3;
  }, releaseProgram: function(e7) {
    if (0 == --e7.usedTimes) {
      const t3 = h2.indexOf(e7);
      h2[t3] = h2[h2.length - 1], h2.pop(), e7.destroy();
    }
  }, releaseShaderCache: function(e7) {
    l2.remove(e7);
  }, programs: h2, dispose: function() {
    l2.dispose();
  } };
}
function ll() {
  let e6 = /* @__PURE__ */ new WeakMap();
  return { has: function(t2) {
    return e6.has(t2);
  }, get: function(t2) {
    let i2 = e6.get(t2);
    return void 0 === i2 && (i2 = {}, e6.set(t2, i2)), i2;
  }, remove: function(t2) {
    e6.delete(t2);
  }, update: function(t2, i2, n2) {
    e6.get(t2)[i2] = n2;
  }, dispose: function() {
    e6 = /* @__PURE__ */ new WeakMap();
  } };
}
function cl(e6, t2) {
  return e6.groupOrder !== t2.groupOrder ? e6.groupOrder - t2.groupOrder : e6.renderOrder !== t2.renderOrder ? e6.renderOrder - t2.renderOrder : e6.material.id !== t2.material.id ? e6.material.id - t2.material.id : e6.z !== t2.z ? e6.z - t2.z : e6.id - t2.id;
}
function hl(e6, t2) {
  return e6.groupOrder !== t2.groupOrder ? e6.groupOrder - t2.groupOrder : e6.renderOrder !== t2.renderOrder ? e6.renderOrder - t2.renderOrder : e6.z !== t2.z ? t2.z - e6.z : e6.id - t2.id;
}
function ul() {
  const e6 = [];
  let t2 = 0;
  const i2 = [], n2 = [], o2 = [];
  function r2(i3, n3, o3, r3, s2, a2) {
    let l2 = e6[t2];
    return void 0 === l2 ? (l2 = { id: i3.id, object: i3, geometry: n3, material: o3, groupOrder: r3, renderOrder: i3.renderOrder, z: s2, group: a2 }, e6[t2] = l2) : (l2.id = i3.id, l2.object = i3, l2.geometry = n3, l2.material = o3, l2.groupOrder = r3, l2.renderOrder = i3.renderOrder, l2.z = s2, l2.group = a2), t2++, l2;
  }
  return { opaque: i2, transmissive: n2, transparent: o2, init: function() {
    t2 = 0, i2.length = 0, n2.length = 0, o2.length = 0;
  }, push: function(e7, t3, s2, a2, l2, c2) {
    const h2 = r2(e7, t3, s2, a2, l2, c2);
    s2.transmission > 0 ? n2.push(h2) : true === s2.transparent ? o2.push(h2) : i2.push(h2);
  }, unshift: function(e7, t3, s2, a2, l2, c2) {
    const h2 = r2(e7, t3, s2, a2, l2, c2);
    s2.transmission > 0 ? n2.unshift(h2) : true === s2.transparent ? o2.unshift(h2) : i2.unshift(h2);
  }, finish: function() {
    for (let i3 = t2, n3 = e6.length; i3 < n3; i3++) {
      const t3 = e6[i3];
      if (null === t3.id) break;
      t3.id = null, t3.object = null, t3.geometry = null, t3.material = null, t3.group = null;
    }
  }, sort: function(e7, t3) {
    i2.length > 1 && i2.sort(e7 || cl), n2.length > 1 && n2.sort(t3 || hl), o2.length > 1 && o2.sort(t3 || hl);
  } };
}
function dl() {
  let e6 = /* @__PURE__ */ new WeakMap();
  return { get: function(t2, i2) {
    const n2 = e6.get(t2);
    let o2;
    return void 0 === n2 ? (o2 = new ul(), e6.set(t2, [o2])) : i2 >= n2.length ? (o2 = new ul(), n2.push(o2)) : o2 = n2[i2], o2;
  }, dispose: function() {
    e6 = /* @__PURE__ */ new WeakMap();
  } };
}
function pl() {
  const e6 = {};
  return { get: function(t2) {
    if (void 0 !== e6[t2.id]) return e6[t2.id];
    let i2;
    switch (t2.type) {
      case "DirectionalLight":
        i2 = { direction: new yn(), color: new Go() };
        break;
      case "SpotLight":
        i2 = { position: new yn(), direction: new yn(), color: new Go(), distance: 0, coneCos: 0, penumbraCos: 0, decay: 0 };
        break;
      case "PointLight":
        i2 = { position: new yn(), color: new Go(), distance: 0, decay: 0 };
        break;
      case "HemisphereLight":
        i2 = { direction: new yn(), skyColor: new Go(), groundColor: new Go() };
        break;
      case "RectAreaLight":
        i2 = { color: new Go(), position: new yn(), halfWidth: new yn(), halfHeight: new yn() };
    }
    return e6[t2.id] = i2, i2;
  } };
}
let _l = 0;
function gl(e6, t2) {
  return (t2.castShadow ? 2 : 0) - (e6.castShadow ? 2 : 0) + (t2.map ? 1 : 0) - (e6.map ? 1 : 0);
}
function ml(e6) {
  const t2 = new pl(), i2 = /* @__PURE__ */ function() {
    const e7 = {};
    return { get: function(t3) {
      if (void 0 !== e7[t3.id]) return e7[t3.id];
      let i3;
      switch (t3.type) {
        case "DirectionalLight":
        case "SpotLight":
          i3 = { shadowIntensity: 1, shadowBias: 0, shadowNormalBias: 0, shadowRadius: 1, shadowMapSize: new $i() };
          break;
        case "PointLight":
          i3 = { shadowIntensity: 1, shadowBias: 0, shadowNormalBias: 0, shadowRadius: 1, shadowMapSize: new $i(), shadowCameraNear: 1, shadowCameraFar: 1e3 };
      }
      return e7[t3.id] = i3, i3;
    } };
  }(), n2 = { version: 0, hash: { directionalLength: -1, pointLength: -1, spotLength: -1, rectAreaLength: -1, hemiLength: -1, numDirectionalShadows: -1, numPointShadows: -1, numSpotShadows: -1, numSpotMaps: -1, numLightProbes: -1 }, ambient: [0, 0, 0], probe: [], directional: [], directionalShadow: [], directionalShadowMap: [], directionalShadowMatrix: [], spot: [], spotLightMap: [], spotShadow: [], spotShadowMap: [], spotLightMatrix: [], rectArea: [], rectAreaLTC1: null, rectAreaLTC2: null, point: [], pointShadow: [], pointShadowMap: [], pointShadowMatrix: [], hemi: [], numSpotLightShadowsWithMaps: 0, numLightProbes: 0 };
  for (let e7 = 0; e7 < 9; e7++) n2.probe.push(new yn());
  const o2 = new yn(), r2 = new Kn(), s2 = new Kn();
  return { setup: function(o3) {
    let r3 = 0, s3 = 0, a2 = 0;
    for (let e7 = 0; e7 < 9; e7++) n2.probe[e7].set(0, 0, 0);
    let l2 = 0, c2 = 0, h2 = 0, u2 = 0, d2 = 0, p2 = 0, _2 = 0, g2 = 0, m2 = 0, f2 = 0, v2 = 0;
    o3.sort(gl);
    for (let e7 = 0, A3 = o3.length; e7 < A3; e7++) {
      const A4 = o3[e7], b2 = A4.color, y2 = A4.intensity, w2 = A4.distance, x2 = A4.shadow && A4.shadow.map ? A4.shadow.map.texture : null;
      if (A4.isAmbientLight) r3 += b2.r * y2, s3 += b2.g * y2, a2 += b2.b * y2;
      else if (A4.isLightProbe) {
        for (let e8 = 0; e8 < 9; e8++) n2.probe[e8].addScaledVector(A4.sh.coefficients[e8], y2);
        v2++;
      } else if (A4.isDirectionalLight) {
        const e8 = t2.get(A4);
        if (e8.color.copy(A4.color).multiplyScalar(A4.intensity), A4.castShadow) {
          const e9 = A4.shadow, t3 = i2.get(A4);
          t3.shadowIntensity = e9.intensity, t3.shadowBias = e9.bias, t3.shadowNormalBias = e9.normalBias, t3.shadowRadius = e9.radius, t3.shadowMapSize = e9.mapSize, n2.directionalShadow[l2] = t3, n2.directionalShadowMap[l2] = x2, n2.directionalShadowMatrix[l2] = A4.shadow.matrix, p2++;
        }
        n2.directional[l2] = e8, l2++;
      } else if (A4.isSpotLight) {
        const e8 = t2.get(A4);
        e8.position.setFromMatrixPosition(A4.matrixWorld), e8.color.copy(b2).multiplyScalar(y2), e8.distance = w2, e8.coneCos = Math.cos(A4.angle), e8.penumbraCos = Math.cos(A4.angle * (1 - A4.penumbra)), e8.decay = A4.decay, n2.spot[h2] = e8;
        const o4 = A4.shadow;
        if (A4.map && (n2.spotLightMap[m2] = A4.map, m2++, o4.updateMatrices(A4), A4.castShadow && f2++), n2.spotLightMatrix[h2] = o4.matrix, A4.castShadow) {
          const e9 = i2.get(A4);
          e9.shadowIntensity = o4.intensity, e9.shadowBias = o4.bias, e9.shadowNormalBias = o4.normalBias, e9.shadowRadius = o4.radius, e9.shadowMapSize = o4.mapSize, n2.spotShadow[h2] = e9, n2.spotShadowMap[h2] = x2, g2++;
        }
        h2++;
      } else if (A4.isRectAreaLight) {
        const e8 = t2.get(A4);
        e8.color.copy(b2).multiplyScalar(y2), e8.halfWidth.set(0.5 * A4.width, 0, 0), e8.halfHeight.set(0, 0.5 * A4.height, 0), n2.rectArea[u2] = e8, u2++;
      } else if (A4.isPointLight) {
        const e8 = t2.get(A4);
        if (e8.color.copy(A4.color).multiplyScalar(A4.intensity), e8.distance = A4.distance, e8.decay = A4.decay, A4.castShadow) {
          const e9 = A4.shadow, t3 = i2.get(A4);
          t3.shadowIntensity = e9.intensity, t3.shadowBias = e9.bias, t3.shadowNormalBias = e9.normalBias, t3.shadowRadius = e9.radius, t3.shadowMapSize = e9.mapSize, t3.shadowCameraNear = e9.camera.near, t3.shadowCameraFar = e9.camera.far, n2.pointShadow[c2] = t3, n2.pointShadowMap[c2] = x2, n2.pointShadowMatrix[c2] = A4.shadow.matrix, _2++;
        }
        n2.point[c2] = e8, c2++;
      } else if (A4.isHemisphereLight) {
        const e8 = t2.get(A4);
        e8.skyColor.copy(A4.color).multiplyScalar(y2), e8.groundColor.copy(A4.groundColor).multiplyScalar(y2), n2.hemi[d2] = e8, d2++;
      }
    }
    u2 > 0 && (true === e6.has("OES_texture_float_linear") ? (n2.rectAreaLTC1 = Kr.LTC_FLOAT_1, n2.rectAreaLTC2 = Kr.LTC_FLOAT_2) : (n2.rectAreaLTC1 = Kr.LTC_HALF_1, n2.rectAreaLTC2 = Kr.LTC_HALF_2)), n2.ambient[0] = r3, n2.ambient[1] = s3, n2.ambient[2] = a2;
    const A2 = n2.hash;
    A2.directionalLength === l2 && A2.pointLength === c2 && A2.spotLength === h2 && A2.rectAreaLength === u2 && A2.hemiLength === d2 && A2.numDirectionalShadows === p2 && A2.numPointShadows === _2 && A2.numSpotShadows === g2 && A2.numSpotMaps === m2 && A2.numLightProbes === v2 || (n2.directional.length = l2, n2.spot.length = h2, n2.rectArea.length = u2, n2.point.length = c2, n2.hemi.length = d2, n2.directionalShadow.length = p2, n2.directionalShadowMap.length = p2, n2.pointShadow.length = _2, n2.pointShadowMap.length = _2, n2.spotShadow.length = g2, n2.spotShadowMap.length = g2, n2.directionalShadowMatrix.length = p2, n2.pointShadowMatrix.length = _2, n2.spotLightMatrix.length = g2 + m2 - f2, n2.spotLightMap.length = m2, n2.numSpotLightShadowsWithMaps = f2, n2.numLightProbes = v2, A2.directionalLength = l2, A2.pointLength = c2, A2.spotLength = h2, A2.rectAreaLength = u2, A2.hemiLength = d2, A2.numDirectionalShadows = p2, A2.numPointShadows = _2, A2.numSpotShadows = g2, A2.numSpotMaps = m2, A2.numLightProbes = v2, n2.version = _l++);
  }, setupView: function(e7, t3) {
    let i3 = 0, a2 = 0, l2 = 0, c2 = 0, h2 = 0;
    const u2 = t3.matrixWorldInverse;
    for (let t4 = 0, d2 = e7.length; t4 < d2; t4++) {
      const d3 = e7[t4];
      if (d3.isDirectionalLight) {
        const e8 = n2.directional[i3];
        e8.direction.setFromMatrixPosition(d3.matrixWorld), o2.setFromMatrixPosition(d3.target.matrixWorld), e8.direction.sub(o2), e8.direction.transformDirection(u2), i3++;
      } else if (d3.isSpotLight) {
        const e8 = n2.spot[l2];
        e8.position.setFromMatrixPosition(d3.matrixWorld), e8.position.applyMatrix4(u2), e8.direction.setFromMatrixPosition(d3.matrixWorld), o2.setFromMatrixPosition(d3.target.matrixWorld), e8.direction.sub(o2), e8.direction.transformDirection(u2), l2++;
      } else if (d3.isRectAreaLight) {
        const e8 = n2.rectArea[c2];
        e8.position.setFromMatrixPosition(d3.matrixWorld), e8.position.applyMatrix4(u2), s2.identity(), r2.copy(d3.matrixWorld), r2.premultiply(u2), s2.extractRotation(r2), e8.halfWidth.set(0.5 * d3.width, 0, 0), e8.halfHeight.set(0, 0.5 * d3.height, 0), e8.halfWidth.applyMatrix4(s2), e8.halfHeight.applyMatrix4(s2), c2++;
      } else if (d3.isPointLight) {
        const e8 = n2.point[a2];
        e8.position.setFromMatrixPosition(d3.matrixWorld), e8.position.applyMatrix4(u2), a2++;
      } else if (d3.isHemisphereLight) {
        const e8 = n2.hemi[h2];
        e8.direction.setFromMatrixPosition(d3.matrixWorld), e8.direction.transformDirection(u2), h2++;
      }
    }
  }, state: n2 };
}
function fl(e6) {
  const t2 = new ml(e6), i2 = [], n2 = [];
  const o2 = { lightsArray: i2, shadowsArray: n2, camera: null, lights: t2, transmissionRenderTarget: {} };
  return { init: function(e7) {
    o2.camera = e7, i2.length = 0, n2.length = 0;
  }, state: o2, setupLights: function() {
    t2.setup(i2);
  }, setupLightsView: function(e7) {
    t2.setupView(i2, e7);
  }, pushLight: function(e7) {
    i2.push(e7);
  }, pushShadow: function(e7) {
    n2.push(e7);
  } };
}
function vl(e6) {
  let t2 = /* @__PURE__ */ new WeakMap();
  return { get: function(i2, n2 = 0) {
    const o2 = t2.get(i2);
    let r2;
    return void 0 === o2 ? (r2 = new fl(e6), t2.set(i2, [r2])) : n2 >= o2.length ? (r2 = new fl(e6), o2.push(r2)) : r2 = o2[n2], r2;
  }, dispose: function() {
    t2 = /* @__PURE__ */ new WeakMap();
  } };
}
class Al extends Wo {
  constructor(e6) {
    super(), this.isMeshDepthMaterial = true, this.type = "MeshDepthMaterial", this.depthPacking = 3200, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = false, this.wireframeLinewidth = 1, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.depthPacking = e6.depthPacking, this.map = e6.map, this.alphaMap = e6.alphaMap, this.displacementMap = e6.displacementMap, this.displacementScale = e6.displacementScale, this.displacementBias = e6.displacementBias, this.wireframe = e6.wireframe, this.wireframeLinewidth = e6.wireframeLinewidth, this;
  }
}
class bl extends Wo {
  constructor(e6) {
    super(), this.isMeshDistanceMaterial = true, this.type = "MeshDistanceMaterial", this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.map = e6.map, this.alphaMap = e6.alphaMap, this.displacementMap = e6.displacementMap, this.displacementScale = e6.displacementScale, this.displacementBias = e6.displacementBias, this;
  }
}
function yl(e6, t2, i2) {
  let n2 = new $r();
  const o2 = new $i(), r2 = new $i(), s2 = new gn(), a2 = new Al({ depthPacking: 3201 }), l2 = new bl(), c2 = {}, h2 = i2.maxTextureSize, u2 = { [me]: 1, [fe]: 0, [ve]: 2 }, d2 = new Br({ defines: { VSM_SAMPLES: 8 }, uniforms: { shadow_pass: { value: null }, resolution: { value: new $i() }, radius: { value: 4 } }, vertexShader: "void main() {\n	gl_Position = vec4( position, 1.0 );\n}", fragmentShader: "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}" }), p2 = d2.clone();
  p2.defines.HORIZONTAL_PASS = 1;
  const _2 = new ur();
  _2.setAttribute("position", new er(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3));
  const g2 = new xr(_2, d2), m2 = this;
  this.enabled = false, this.autoUpdate = true, this.needsUpdate = false, this.type = 1;
  let f2 = this.type;
  function v2(i3, n3) {
    const r3 = t2.update(g2);
    d2.defines.VSM_SAMPLES !== i3.blurSamples && (d2.defines.VSM_SAMPLES = i3.blurSamples, p2.defines.VSM_SAMPLES = i3.blurSamples, d2.needsUpdate = true, p2.needsUpdate = true), null === i3.mapPass && (i3.mapPass = new fn(o2.x, o2.y)), d2.uniforms.shadow_pass.value = i3.map.texture, d2.uniforms.resolution.value = i3.mapSize, d2.uniforms.radius.value = i3.radius, e6.setRenderTarget(i3.mapPass), e6.clear(), e6.renderBufferDirect(n3, null, r3, d2, g2, null), p2.uniforms.shadow_pass.value = i3.mapPass.texture, p2.uniforms.resolution.value = i3.mapSize, p2.uniforms.radius.value = i3.radius, e6.setRenderTarget(i3.map), e6.clear(), e6.renderBufferDirect(n3, null, r3, p2, g2, null);
  }
  function A2(t3, i3, n3, o3) {
    let r3 = null;
    const s3 = true === n3.isPointLight ? t3.customDistanceMaterial : t3.customDepthMaterial;
    if (void 0 !== s3) r3 = s3;
    else if (r3 = true === n3.isPointLight ? l2 : a2, e6.localClippingEnabled && true === i3.clipShadows && Array.isArray(i3.clippingPlanes) && 0 !== i3.clippingPlanes.length || i3.displacementMap && 0 !== i3.displacementScale || i3.alphaMap && i3.alphaTest > 0 || i3.map && i3.alphaTest > 0) {
      const e7 = r3.uuid, t4 = i3.uuid;
      let n4 = c2[e7];
      void 0 === n4 && (n4 = {}, c2[e7] = n4);
      let o4 = n4[t4];
      void 0 === o4 && (o4 = r3.clone(), n4[t4] = o4, i3.addEventListener("dispose", y2)), r3 = o4;
    }
    if (r3.visible = i3.visible, r3.wireframe = i3.wireframe, r3.side = 3 === o3 ? null !== i3.shadowSide ? i3.shadowSide : i3.side : null !== i3.shadowSide ? i3.shadowSide : u2[i3.side], r3.alphaMap = i3.alphaMap, r3.alphaTest = i3.alphaTest, r3.map = i3.map, r3.clipShadows = i3.clipShadows, r3.clippingPlanes = i3.clippingPlanes, r3.clipIntersection = i3.clipIntersection, r3.displacementMap = i3.displacementMap, r3.displacementScale = i3.displacementScale, r3.displacementBias = i3.displacementBias, r3.wireframeLinewidth = i3.wireframeLinewidth, r3.linewidth = i3.linewidth, true === n3.isPointLight && true === r3.isMeshDistanceMaterial) {
      e6.properties.get(r3).light = n3;
    }
    return r3;
  }
  function b2(i3, o3, r3, s3, a3) {
    if (false === i3.visible) return;
    if (i3.layers.test(o3.layers) && (i3.isMesh || i3.isLine || i3.isPoints) && (i3.castShadow || i3.receiveShadow && 3 === a3) && (!i3.frustumCulled || n2.intersectsObject(i3))) {
      i3.modelViewMatrix.multiplyMatrices(r3.matrixWorldInverse, i3.matrixWorld);
      const n3 = t2.update(i3), l4 = i3.material;
      if (Array.isArray(l4)) {
        const t3 = n3.groups;
        for (let c3 = 0, h3 = t3.length; c3 < h3; c3++) {
          const h4 = t3[c3], u3 = l4[h4.materialIndex];
          if (u3 && u3.visible) {
            const t4 = A2(i3, u3, s3, a3);
            i3.onBeforeShadow(e6, i3, o3, r3, n3, t4, h4), e6.renderBufferDirect(r3, null, n3, t4, i3, h4), i3.onAfterShadow(e6, i3, o3, r3, n3, t4, h4);
          }
        }
      } else if (l4.visible) {
        const t3 = A2(i3, l4, s3, a3);
        i3.onBeforeShadow(e6, i3, o3, r3, n3, t3, null), e6.renderBufferDirect(r3, null, n3, t3, i3, null), i3.onAfterShadow(e6, i3, o3, r3, n3, t3, null);
      }
    }
    const l3 = i3.children;
    for (let e7 = 0, t3 = l3.length; e7 < t3; e7++) b2(l3[e7], o3, r3, s3, a3);
  }
  function y2(e7) {
    e7.target.removeEventListener("dispose", y2);
    for (const t3 in c2) {
      const i3 = c2[t3], n3 = e7.target.uuid;
      if (n3 in i3) {
        i3[n3].dispose(), delete i3[n3];
      }
    }
  }
  this.render = function(t3, i3, a3) {
    if (false === m2.enabled) return;
    if (false === m2.autoUpdate && false === m2.needsUpdate) return;
    if (0 === t3.length) return;
    const l3 = e6.getRenderTarget(), c3 = e6.getActiveCubeFace(), u3 = e6.getActiveMipmapLevel(), d3 = e6.state;
    d3.setBlending(0), d3.buffers.color.setClear(1, 1, 1, 1), d3.buffers.depth.setTest(true), d3.setScissorTest(false);
    const p3 = 3 !== f2 && 3 === this.type, _3 = 3 === f2 && 3 !== this.type;
    for (let l4 = 0, c4 = t3.length; l4 < c4; l4++) {
      const c5 = t3[l4], u4 = c5.shadow;
      if (void 0 === u4) {
        console.warn("THREE.WebGLShadowMap:", c5, "has no shadow.");
        continue;
      }
      if (false === u4.autoUpdate && false === u4.needsUpdate) continue;
      o2.copy(u4.mapSize);
      const g3 = u4.getFrameExtents();
      if (o2.multiply(g3), r2.copy(u4.mapSize), (o2.x > h2 || o2.y > h2) && (o2.x > h2 && (r2.x = Math.floor(h2 / g3.x), o2.x = r2.x * g3.x, u4.mapSize.x = r2.x), o2.y > h2 && (r2.y = Math.floor(h2 / g3.y), o2.y = r2.y * g3.y, u4.mapSize.y = r2.y)), null === u4.map || true === p3 || true === _3) {
        const e7 = 3 !== this.type ? { minFilter: et, magFilter: et } : {};
        null !== u4.map && u4.map.dispose(), u4.map = new fn(o2.x, o2.y, e7), u4.map.texture.name = c5.name + ".shadowMap", u4.camera.updateProjectionMatrix();
      }
      e6.setRenderTarget(u4.map), e6.clear();
      const m3 = u4.getViewportCount();
      for (let e7 = 0; e7 < m3; e7++) {
        const t4 = u4.getViewport(e7);
        s2.set(r2.x * t4.x, r2.y * t4.y, r2.x * t4.z, r2.y * t4.w), d3.viewport(s2), u4.updateMatrices(c5, e7), n2 = u4.getFrustum(), b2(i3, a3, u4.camera, c5, this.type);
      }
      true !== u4.isPointLightShadow && 3 === this.type && v2(u4, a3), u4.needsUpdate = false;
    }
    f2 = this.type, m2.needsUpdate = false, e6.setRenderTarget(l3, c3, u3);
  };
}
const wl = { [Ne]: 1, [Ue]: 6, [He]: 7, [ze]: 5, [Oe]: 0, [Ve]: 2, [Ge]: 4, [Qe]: 3 };
function xl(e6) {
  const t2 = new function() {
    let t3 = false;
    const i3 = new gn();
    let n3 = null;
    const o3 = new gn(0, 0, 0, 0);
    return { setMask: function(i4) {
      n3 === i4 || t3 || (e6.colorMask(i4, i4, i4, i4), n3 = i4);
    }, setLocked: function(e7) {
      t3 = e7;
    }, setClear: function(t4, n4, r3, s3, a3) {
      true === a3 && (t4 *= s3, n4 *= s3, r3 *= s3), i3.set(t4, n4, r3, s3), false === o3.equals(i3) && (e6.clearColor(t4, n4, r3, s3), o3.copy(i3));
    }, reset: function() {
      t3 = false, n3 = null, o3.set(-1, 0, 0, 0);
    } };
  }(), i2 = new function() {
    let t3 = false, i3 = false, n3 = null, o3 = null, r3 = null;
    return { setReversed: function(e7) {
      i3 = e7;
    }, setTest: function(t4) {
      t4 ? U2(e6.DEPTH_TEST) : z2(e6.DEPTH_TEST);
    }, setMask: function(i4) {
      n3 === i4 || t3 || (e6.depthMask(i4), n3 = i4);
    }, setFunc: function(t4) {
      if (i3 && (t4 = wl[t4]), o3 !== t4) {
        switch (t4) {
          case 0:
            e6.depthFunc(e6.NEVER);
            break;
          case 1:
            e6.depthFunc(e6.ALWAYS);
            break;
          case 2:
            e6.depthFunc(e6.LESS);
            break;
          case 3:
          default:
            e6.depthFunc(e6.LEQUAL);
            break;
          case 4:
            e6.depthFunc(e6.EQUAL);
            break;
          case 5:
            e6.depthFunc(e6.GEQUAL);
            break;
          case 6:
            e6.depthFunc(e6.GREATER);
            break;
          case 7:
            e6.depthFunc(e6.NOTEQUAL);
        }
        o3 = t4;
      }
    }, setLocked: function(e7) {
      t3 = e7;
    }, setClear: function(t4) {
      r3 !== t4 && (e6.clearDepth(t4), r3 = t4);
    }, reset: function() {
      t3 = false, n3 = null, o3 = null, r3 = null;
    } };
  }(), n2 = new function() {
    let t3 = false, i3 = null, n3 = null, o3 = null, r3 = null, s3 = null, a3 = null, l3 = null, c3 = null;
    return { setTest: function(i4) {
      t3 || (i4 ? U2(e6.STENCIL_TEST) : z2(e6.STENCIL_TEST));
    }, setMask: function(n4) {
      i3 === n4 || t3 || (e6.stencilMask(n4), i3 = n4);
    }, setFunc: function(t4, i4, s4) {
      n3 === t4 && o3 === i4 && r3 === s4 || (e6.stencilFunc(t4, i4, s4), n3 = t4, o3 = i4, r3 = s4);
    }, setOp: function(t4, i4, n4) {
      s3 === t4 && a3 === i4 && l3 === n4 || (e6.stencilOp(t4, i4, n4), s3 = t4, a3 = i4, l3 = n4);
    }, setLocked: function(e7) {
      t3 = e7;
    }, setClear: function(t4) {
      c3 !== t4 && (e6.clearStencil(t4), c3 = t4);
    }, reset: function() {
      t3 = false, i3 = null, n3 = null, o3 = null, r3 = null, s3 = null, a3 = null, l3 = null, c3 = null;
    } };
  }(), o2 = /* @__PURE__ */ new WeakMap(), r2 = /* @__PURE__ */ new WeakMap();
  let s2 = {}, a2 = {}, l2 = /* @__PURE__ */ new WeakMap(), c2 = [], h2 = null, u2 = false, d2 = null, p2 = null, _2 = null, g2 = null, m2 = null, f2 = null, v2 = null, A2 = new Go(0, 0, 0), b2 = 0, y2 = false, w2 = null, x2 = null, C2 = null, S2 = null, E2 = null;
  const T2 = e6.getParameter(e6.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
  let I2 = false, M2 = 0;
  const B2 = e6.getParameter(e6.VERSION);
  -1 !== B2.indexOf("WebGL") ? (M2 = parseFloat(/^WebGL (\d)/.exec(B2)[1]), I2 = M2 >= 1) : -1 !== B2.indexOf("OpenGL ES") && (M2 = parseFloat(/^OpenGL ES (\d)/.exec(B2)[1]), I2 = M2 >= 2);
  let R2 = null, k2 = {};
  const P2 = e6.getParameter(e6.SCISSOR_BOX), D2 = e6.getParameter(e6.VIEWPORT), L2 = new gn().fromArray(P2), F2 = new gn().fromArray(D2);
  function N2(t3, i3, n3, o3) {
    const r3 = new Uint8Array(4), s3 = e6.createTexture();
    e6.bindTexture(t3, s3), e6.texParameteri(t3, e6.TEXTURE_MIN_FILTER, e6.NEAREST), e6.texParameteri(t3, e6.TEXTURE_MAG_FILTER, e6.NEAREST);
    for (let s4 = 0; s4 < n3; s4++) t3 === e6.TEXTURE_3D || t3 === e6.TEXTURE_2D_ARRAY ? e6.texImage3D(i3, 0, e6.RGBA, 1, 1, o3, 0, e6.RGBA, e6.UNSIGNED_BYTE, r3) : e6.texImage2D(i3 + s4, 0, e6.RGBA, 1, 1, 0, e6.RGBA, e6.UNSIGNED_BYTE, r3);
    return s3;
  }
  const O2 = {};
  function U2(t3) {
    true !== s2[t3] && (e6.enable(t3), s2[t3] = true);
  }
  function z2(t3) {
    false !== s2[t3] && (e6.disable(t3), s2[t3] = false);
  }
  O2[e6.TEXTURE_2D] = N2(e6.TEXTURE_2D, e6.TEXTURE_2D, 1), O2[e6.TEXTURE_CUBE_MAP] = N2(e6.TEXTURE_CUBE_MAP, e6.TEXTURE_CUBE_MAP_POSITIVE_X, 6), O2[e6.TEXTURE_2D_ARRAY] = N2(e6.TEXTURE_2D_ARRAY, e6.TEXTURE_2D_ARRAY, 1, 1), O2[e6.TEXTURE_3D] = N2(e6.TEXTURE_3D, e6.TEXTURE_3D, 1, 1), t2.setClear(0, 0, 0, 1), i2.setClear(1), n2.setClear(0), U2(e6.DEPTH_TEST), i2.setFunc(3), G2(false), q2(1), U2(e6.CULL_FACE), V2(0);
  const H2 = { [Ae]: e6.FUNC_ADD, [be]: e6.FUNC_SUBTRACT, [ye]: e6.FUNC_REVERSE_SUBTRACT };
  H2[103] = e6.MIN, H2[104] = e6.MAX;
  const Q2 = { [we]: e6.ZERO, [xe]: e6.ONE, [Ce]: e6.SRC_COLOR, [Ee]: e6.SRC_ALPHA, [ke]: e6.SRC_ALPHA_SATURATE, [Be]: e6.DST_COLOR, [Ie]: e6.DST_ALPHA, [Se]: e6.ONE_MINUS_SRC_COLOR, [Te]: e6.ONE_MINUS_SRC_ALPHA, [Re]: e6.ONE_MINUS_DST_COLOR, [Me]: e6.ONE_MINUS_DST_ALPHA, [Pe]: e6.CONSTANT_COLOR, [De]: e6.ONE_MINUS_CONSTANT_COLOR, [Le]: e6.CONSTANT_ALPHA, [Fe]: e6.ONE_MINUS_CONSTANT_ALPHA };
  function V2(t3, i3, n3, o3, r3, s3, a3, l3, c3, h3) {
    if (0 !== t3) {
      if (false === u2 && (U2(e6.BLEND), u2 = true), 5 === t3) r3 = r3 || i3, s3 = s3 || n3, a3 = a3 || o3, i3 === p2 && r3 === m2 || (e6.blendEquationSeparate(H2[i3], H2[r3]), p2 = i3, m2 = r3), n3 === _2 && o3 === g2 && s3 === f2 && a3 === v2 || (e6.blendFuncSeparate(Q2[n3], Q2[o3], Q2[s3], Q2[a3]), _2 = n3, g2 = o3, f2 = s3, v2 = a3), false !== l3.equals(A2) && c3 === b2 || (e6.blendColor(l3.r, l3.g, l3.b, c3), A2.copy(l3), b2 = c3), d2 = t3, y2 = false;
      else if (t3 !== d2 || h3 !== y2) {
        if (p2 === Ae && m2 === Ae || (e6.blendEquation(e6.FUNC_ADD), p2 = Ae, m2 = Ae), h3) switch (t3) {
          case 1:
            e6.blendFuncSeparate(e6.ONE, e6.ONE_MINUS_SRC_ALPHA, e6.ONE, e6.ONE_MINUS_SRC_ALPHA);
            break;
          case 2:
            e6.blendFunc(e6.ONE, e6.ONE);
            break;
          case 3:
            e6.blendFuncSeparate(e6.ZERO, e6.ONE_MINUS_SRC_COLOR, e6.ZERO, e6.ONE);
            break;
          case 4:
            e6.blendFuncSeparate(e6.ZERO, e6.SRC_COLOR, e6.ZERO, e6.SRC_ALPHA);
            break;
          default:
            console.error("THREE.WebGLState: Invalid blending: ", t3);
        }
        else switch (t3) {
          case 1:
            e6.blendFuncSeparate(e6.SRC_ALPHA, e6.ONE_MINUS_SRC_ALPHA, e6.ONE, e6.ONE_MINUS_SRC_ALPHA);
            break;
          case 2:
            e6.blendFunc(e6.SRC_ALPHA, e6.ONE);
            break;
          case 3:
            e6.blendFuncSeparate(e6.ZERO, e6.ONE_MINUS_SRC_COLOR, e6.ZERO, e6.ONE);
            break;
          case 4:
            e6.blendFunc(e6.ZERO, e6.SRC_COLOR);
            break;
          default:
            console.error("THREE.WebGLState: Invalid blending: ", t3);
        }
        _2 = null, g2 = null, f2 = null, v2 = null, A2.set(0, 0, 0), b2 = 0, d2 = t3, y2 = h3;
      }
    } else true === u2 && (z2(e6.BLEND), u2 = false);
  }
  function G2(t3) {
    w2 !== t3 && (t3 ? e6.frontFace(e6.CW) : e6.frontFace(e6.CCW), w2 = t3);
  }
  function q2(t3) {
    0 !== t3 ? (U2(e6.CULL_FACE), t3 !== x2 && (1 === t3 ? e6.cullFace(e6.BACK) : 2 === t3 ? e6.cullFace(e6.FRONT) : e6.cullFace(e6.FRONT_AND_BACK))) : z2(e6.CULL_FACE), x2 = t3;
  }
  function $2(t3, i3, n3) {
    t3 ? (U2(e6.POLYGON_OFFSET_FILL), S2 === i3 && E2 === n3 || (e6.polygonOffset(i3, n3), S2 = i3, E2 = n3)) : z2(e6.POLYGON_OFFSET_FILL);
  }
  return { buffers: { color: t2, depth: i2, stencil: n2 }, enable: U2, disable: z2, bindFramebuffer: function(t3, i3) {
    return a2[t3] !== i3 && (e6.bindFramebuffer(t3, i3), a2[t3] = i3, t3 === e6.DRAW_FRAMEBUFFER && (a2[e6.FRAMEBUFFER] = i3), t3 === e6.FRAMEBUFFER && (a2[e6.DRAW_FRAMEBUFFER] = i3), true);
  }, drawBuffers: function(t3, i3) {
    let n3 = c2, o3 = false;
    if (t3) {
      n3 = l2.get(i3), void 0 === n3 && (n3 = [], l2.set(i3, n3));
      const r3 = t3.textures;
      if (n3.length !== r3.length || n3[0] !== e6.COLOR_ATTACHMENT0) {
        for (let t4 = 0, i4 = r3.length; t4 < i4; t4++) n3[t4] = e6.COLOR_ATTACHMENT0 + t4;
        n3.length = r3.length, o3 = true;
      }
    } else n3[0] !== e6.BACK && (n3[0] = e6.BACK, o3 = true);
    o3 && e6.drawBuffers(n3);
  }, useProgram: function(t3) {
    return h2 !== t3 && (e6.useProgram(t3), h2 = t3, true);
  }, setBlending: V2, setMaterial: function(o3, r3) {
    2 === o3.side ? z2(e6.CULL_FACE) : U2(e6.CULL_FACE);
    let s3 = 1 === o3.side;
    r3 && (s3 = !s3), G2(s3), 1 === o3.blending && false === o3.transparent ? V2(0) : V2(o3.blending, o3.blendEquation, o3.blendSrc, o3.blendDst, o3.blendEquationAlpha, o3.blendSrcAlpha, o3.blendDstAlpha, o3.blendColor, o3.blendAlpha, o3.premultipliedAlpha), i2.setFunc(o3.depthFunc), i2.setTest(o3.depthTest), i2.setMask(o3.depthWrite), t2.setMask(o3.colorWrite);
    const a3 = o3.stencilWrite;
    n2.setTest(a3), a3 && (n2.setMask(o3.stencilWriteMask), n2.setFunc(o3.stencilFunc, o3.stencilRef, o3.stencilFuncMask), n2.setOp(o3.stencilFail, o3.stencilZFail, o3.stencilZPass)), $2(o3.polygonOffset, o3.polygonOffsetFactor, o3.polygonOffsetUnits), true === o3.alphaToCoverage ? U2(e6.SAMPLE_ALPHA_TO_COVERAGE) : z2(e6.SAMPLE_ALPHA_TO_COVERAGE);
  }, setFlipSided: G2, setCullFace: q2, setLineWidth: function(t3) {
    t3 !== C2 && (I2 && e6.lineWidth(t3), C2 = t3);
  }, setPolygonOffset: $2, setScissorTest: function(t3) {
    t3 ? U2(e6.SCISSOR_TEST) : z2(e6.SCISSOR_TEST);
  }, activeTexture: function(t3) {
    void 0 === t3 && (t3 = e6.TEXTURE0 + T2 - 1), R2 !== t3 && (e6.activeTexture(t3), R2 = t3);
  }, bindTexture: function(t3, i3, n3) {
    void 0 === n3 && (n3 = null === R2 ? e6.TEXTURE0 + T2 - 1 : R2);
    let o3 = k2[n3];
    void 0 === o3 && (o3 = { type: void 0, texture: void 0 }, k2[n3] = o3), o3.type === t3 && o3.texture === i3 || (R2 !== n3 && (e6.activeTexture(n3), R2 = n3), e6.bindTexture(t3, i3 || O2[t3]), o3.type = t3, o3.texture = i3);
  }, unbindTexture: function() {
    const t3 = k2[R2];
    void 0 !== t3 && void 0 !== t3.type && (e6.bindTexture(t3.type, null), t3.type = void 0, t3.texture = void 0);
  }, compressedTexImage2D: function() {
    try {
      e6.compressedTexImage2D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, compressedTexImage3D: function() {
    try {
      e6.compressedTexImage3D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, texImage2D: function() {
    try {
      e6.texImage2D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, texImage3D: function() {
    try {
      e6.texImage3D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, updateUBOMapping: function(t3, i3) {
    let n3 = r2.get(i3);
    void 0 === n3 && (n3 = /* @__PURE__ */ new WeakMap(), r2.set(i3, n3));
    let o3 = n3.get(t3);
    void 0 === o3 && (o3 = e6.getUniformBlockIndex(i3, t3.name), n3.set(t3, o3));
  }, uniformBlockBinding: function(t3, i3) {
    const n3 = r2.get(i3).get(t3);
    o2.get(i3) !== n3 && (e6.uniformBlockBinding(i3, n3, t3.__bindingPointIndex), o2.set(i3, n3));
  }, texStorage2D: function() {
    try {
      e6.texStorage2D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, texStorage3D: function() {
    try {
      e6.texStorage3D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, texSubImage2D: function() {
    try {
      e6.texSubImage2D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, texSubImage3D: function() {
    try {
      e6.texSubImage3D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, compressedTexSubImage2D: function() {
    try {
      e6.compressedTexSubImage2D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, compressedTexSubImage3D: function() {
    try {
      e6.compressedTexSubImage3D.apply(e6, arguments);
    } catch (e7) {
      console.error("THREE.WebGLState:", e7);
    }
  }, scissor: function(t3) {
    false === L2.equals(t3) && (e6.scissor(t3.x, t3.y, t3.z, t3.w), L2.copy(t3));
  }, viewport: function(t3) {
    false === F2.equals(t3) && (e6.viewport(t3.x, t3.y, t3.z, t3.w), F2.copy(t3));
  }, reset: function() {
    e6.disable(e6.BLEND), e6.disable(e6.CULL_FACE), e6.disable(e6.DEPTH_TEST), e6.disable(e6.POLYGON_OFFSET_FILL), e6.disable(e6.SCISSOR_TEST), e6.disable(e6.STENCIL_TEST), e6.disable(e6.SAMPLE_ALPHA_TO_COVERAGE), e6.blendEquation(e6.FUNC_ADD), e6.blendFunc(e6.ONE, e6.ZERO), e6.blendFuncSeparate(e6.ONE, e6.ZERO, e6.ONE, e6.ZERO), e6.blendColor(0, 0, 0, 0), e6.colorMask(true, true, true, true), e6.clearColor(0, 0, 0, 0), e6.depthMask(true), e6.depthFunc(e6.LESS), e6.clearDepth(1), e6.stencilMask(4294967295), e6.stencilFunc(e6.ALWAYS, 0, 4294967295), e6.stencilOp(e6.KEEP, e6.KEEP, e6.KEEP), e6.clearStencil(0), e6.cullFace(e6.BACK), e6.frontFace(e6.CCW), e6.polygonOffset(0, 0), e6.activeTexture(e6.TEXTURE0), e6.bindFramebuffer(e6.FRAMEBUFFER, null), e6.bindFramebuffer(e6.DRAW_FRAMEBUFFER, null), e6.bindFramebuffer(e6.READ_FRAMEBUFFER, null), e6.useProgram(null), e6.lineWidth(1), e6.scissor(0, 0, e6.canvas.width, e6.canvas.height), e6.viewport(0, 0, e6.canvas.width, e6.canvas.height), s2 = {}, R2 = null, k2 = {}, a2 = {}, l2 = /* @__PURE__ */ new WeakMap(), c2 = [], h2 = null, u2 = false, d2 = null, p2 = null, _2 = null, g2 = null, m2 = null, f2 = null, v2 = null, A2 = new Go(0, 0, 0), b2 = 0, y2 = false, w2 = null, x2 = null, C2 = null, S2 = null, E2 = null, L2.set(0, 0, e6.canvas.width, e6.canvas.height), F2.set(0, 0, e6.canvas.width, e6.canvas.height), t2.reset(), i2.reset(), n2.reset();
  } };
}
function Cl(e6, t2, i2, n2) {
  const o2 = function(e7) {
    switch (e7) {
      case st:
      case at:
        return { byteLength: 1, components: 1 };
      case ct:
      case lt:
      case pt:
        return { byteLength: 2, components: 1 };
      case _t:
      case gt:
        return { byteLength: 2, components: 4 };
      case ut:
      case ht:
      case dt:
        return { byteLength: 4, components: 1 };
      case ft:
        return { byteLength: 4, components: 3 };
    }
    throw new Error(`Unknown texture type ${e7}.`);
  }(n2);
  switch (i2) {
    case 1021:
    case 1024:
      return e6 * t2;
    case 1025:
      return e6 * t2 * 2;
    case yt:
    case wt:
      return e6 * t2 / o2.components * o2.byteLength;
    case xt:
    case Ct:
      return e6 * t2 * 2 / o2.components * o2.byteLength;
    case 1022:
      return e6 * t2 * 3 / o2.components * o2.byteLength;
    case vt:
    case St:
      return e6 * t2 * 4 / o2.components * o2.byteLength;
    case Et:
    case Tt:
      return Math.floor((e6 + 3) / 4) * Math.floor((t2 + 3) / 4) * 8;
    case It:
    case Mt:
      return Math.floor((e6 + 3) / 4) * Math.floor((t2 + 3) / 4) * 16;
    case Rt:
    case Pt:
      return Math.max(e6, 16) * Math.max(t2, 8) / 4;
    case Bt:
    case kt:
      return Math.max(e6, 8) * Math.max(t2, 8) / 2;
    case Dt:
    case Lt:
      return Math.floor((e6 + 3) / 4) * Math.floor((t2 + 3) / 4) * 8;
    case Ft:
    case Nt:
      return Math.floor((e6 + 3) / 4) * Math.floor((t2 + 3) / 4) * 16;
    case Ot:
      return Math.floor((e6 + 4) / 5) * Math.floor((t2 + 3) / 4) * 16;
    case Ut:
      return Math.floor((e6 + 4) / 5) * Math.floor((t2 + 4) / 5) * 16;
    case zt:
      return Math.floor((e6 + 5) / 6) * Math.floor((t2 + 4) / 5) * 16;
    case Ht:
      return Math.floor((e6 + 5) / 6) * Math.floor((t2 + 5) / 6) * 16;
    case Qt:
      return Math.floor((e6 + 7) / 8) * Math.floor((t2 + 4) / 5) * 16;
    case Vt:
      return Math.floor((e6 + 7) / 8) * Math.floor((t2 + 5) / 6) * 16;
    case Gt:
      return Math.floor((e6 + 7) / 8) * Math.floor((t2 + 7) / 8) * 16;
    case qt:
      return Math.floor((e6 + 9) / 10) * Math.floor((t2 + 4) / 5) * 16;
    case $t:
      return Math.floor((e6 + 9) / 10) * Math.floor((t2 + 5) / 6) * 16;
    case Wt:
      return Math.floor((e6 + 9) / 10) * Math.floor((t2 + 7) / 8) * 16;
    case jt:
      return Math.floor((e6 + 9) / 10) * Math.floor((t2 + 9) / 10) * 16;
    case Xt:
      return Math.floor((e6 + 11) / 12) * Math.floor((t2 + 9) / 10) * 16;
    case Yt:
      return Math.floor((e6 + 11) / 12) * Math.floor((t2 + 11) / 12) * 16;
    case Kt:
    case Zt:
    case Jt:
      return Math.ceil(e6 / 4) * Math.ceil(t2 / 4) * 16;
    case 36283:
    case ei:
      return Math.ceil(e6 / 4) * Math.ceil(t2 / 4) * 8;
    case ti:
    case ii:
      return Math.ceil(e6 / 4) * Math.ceil(t2 / 4) * 16;
  }
  throw new Error(`Unable to determine texture byte length for ${i2} format.`);
}
function Sl(e6, t2, i2, n2, o2, r2, s2) {
  const a2 = t2.has("WEBGL_multisampled_render_to_texture") ? t2.get("WEBGL_multisampled_render_to_texture") : null, l2 = "undefined" != typeof navigator && /OculusBrowser/g.test(navigator.userAgent), c2 = new $i(), h2 = /* @__PURE__ */ new WeakMap();
  let u2;
  const d2 = /* @__PURE__ */ new WeakMap();
  let p2 = false;
  try {
    p2 = "undefined" != typeof OffscreenCanvas && null !== new OffscreenCanvas(1, 1).getContext("2d");
  } catch (e7) {
  }
  function _2(e7, t3) {
    return p2 ? new OffscreenCanvas(e7, t3) : Yi("canvas");
  }
  function g2(e7, t3, i3) {
    let n3 = 1;
    const o3 = z2(e7);
    if ((o3.width > i3 || o3.height > i3) && (n3 = i3 / Math.max(o3.width, o3.height)), n3 < 1) {
      if ("undefined" != typeof HTMLImageElement && e7 instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e7 instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && e7 instanceof ImageBitmap || "undefined" != typeof VideoFrame && e7 instanceof VideoFrame) {
        const i4 = Math.floor(n3 * o3.width), r3 = Math.floor(n3 * o3.height);
        void 0 === u2 && (u2 = _2(i4, r3));
        const s3 = t3 ? _2(i4, r3) : u2;
        s3.width = i4, s3.height = r3;
        return s3.getContext("2d").drawImage(e7, 0, 0, i4, r3), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + o3.width + "x" + o3.height + ") to (" + i4 + "x" + r3 + ")."), s3;
      }
      return "data" in e7 && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + o3.width + "x" + o3.height + ")."), e7;
    }
    return e7;
  }
  function m2(e7) {
    return e7.generateMipmaps && e7.minFilter !== et && e7.minFilter !== nt;
  }
  function f2(t3) {
    e6.generateMipmap(t3);
  }
  function v2(i3, n3, o3, r3, s3 = false) {
    if (null !== i3) {
      if (void 0 !== e6[i3]) return e6[i3];
      console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + i3 + "'");
    }
    let a3 = n3;
    if (n3 === e6.RED && (o3 === e6.FLOAT && (a3 = e6.R32F), o3 === e6.HALF_FLOAT && (a3 = e6.R16F), o3 === e6.UNSIGNED_BYTE && (a3 = e6.R8)), n3 === e6.RED_INTEGER && (o3 === e6.UNSIGNED_BYTE && (a3 = e6.R8UI), o3 === e6.UNSIGNED_SHORT && (a3 = e6.R16UI), o3 === e6.UNSIGNED_INT && (a3 = e6.R32UI), o3 === e6.BYTE && (a3 = e6.R8I), o3 === e6.SHORT && (a3 = e6.R16I), o3 === e6.INT && (a3 = e6.R32I)), n3 === e6.RG && (o3 === e6.FLOAT && (a3 = e6.RG32F), o3 === e6.HALF_FLOAT && (a3 = e6.RG16F), o3 === e6.UNSIGNED_BYTE && (a3 = e6.RG8)), n3 === e6.RG_INTEGER && (o3 === e6.UNSIGNED_BYTE && (a3 = e6.RG8UI), o3 === e6.UNSIGNED_SHORT && (a3 = e6.RG16UI), o3 === e6.UNSIGNED_INT && (a3 = e6.RG32UI), o3 === e6.BYTE && (a3 = e6.RG8I), o3 === e6.SHORT && (a3 = e6.RG16I), o3 === e6.INT && (a3 = e6.RG32I)), n3 === e6.RGB_INTEGER && (o3 === e6.UNSIGNED_BYTE && (a3 = e6.RGB8UI), o3 === e6.UNSIGNED_SHORT && (a3 = e6.RGB16UI), o3 === e6.UNSIGNED_INT && (a3 = e6.RGB32UI), o3 === e6.BYTE && (a3 = e6.RGB8I), o3 === e6.SHORT && (a3 = e6.RGB16I), o3 === e6.INT && (a3 = e6.RGB32I)), n3 === e6.RGBA_INTEGER && (o3 === e6.UNSIGNED_BYTE && (a3 = e6.RGBA8UI), o3 === e6.UNSIGNED_SHORT && (a3 = e6.RGBA16UI), o3 === e6.UNSIGNED_INT && (a3 = e6.RGBA32UI), o3 === e6.BYTE && (a3 = e6.RGBA8I), o3 === e6.SHORT && (a3 = e6.RGBA16I), o3 === e6.INT && (a3 = e6.RGBA32I)), n3 === e6.RGB && o3 === e6.UNSIGNED_INT_5_9_9_9_REV && (a3 = e6.RGB9_E5), n3 === e6.RGBA) {
      const t3 = s3 ? fi : rn.getTransfer(r3);
      o3 === e6.FLOAT && (a3 = e6.RGBA32F), o3 === e6.HALF_FLOAT && (a3 = e6.RGBA16F), o3 === e6.UNSIGNED_BYTE && (a3 = t3 === vi ? e6.SRGB8_ALPHA8 : e6.RGBA8), o3 === e6.UNSIGNED_SHORT_4_4_4_4 && (a3 = e6.RGBA4), o3 === e6.UNSIGNED_SHORT_5_5_5_1 && (a3 = e6.RGB5_A1);
    }
    return a3 !== e6.R16F && a3 !== e6.R32F && a3 !== e6.RG16F && a3 !== e6.RG32F && a3 !== e6.RGBA16F && a3 !== e6.RGBA32F || t2.get("EXT_color_buffer_float"), a3;
  }
  function A2(t3, i3) {
    let n3;
    return t3 ? null === i3 || i3 === ut || i3 === mt ? n3 = e6.DEPTH24_STENCIL8 : i3 === dt ? n3 = e6.DEPTH32F_STENCIL8 : i3 === ct && (n3 = e6.DEPTH24_STENCIL8, console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")) : null === i3 || i3 === ut || i3 === mt ? n3 = e6.DEPTH_COMPONENT24 : i3 === dt ? n3 = e6.DEPTH_COMPONENT32F : i3 === ct && (n3 = e6.DEPTH_COMPONENT16), n3;
  }
  function b2(e7, t3) {
    return true === m2(e7) || e7.isFramebufferTexture && e7.minFilter !== et && e7.minFilter !== nt ? Math.log2(Math.max(t3.width, t3.height)) + 1 : void 0 !== e7.mipmaps && e7.mipmaps.length > 0 ? e7.mipmaps.length : e7.isCompressedTexture && Array.isArray(e7.image) ? t3.mipmaps.length : 1;
  }
  function y2(e7) {
    const t3 = e7.target;
    t3.removeEventListener("dispose", y2), function(e8) {
      const t4 = n2.get(e8);
      if (void 0 === t4.__webglInit) return;
      const i3 = e8.source, o3 = d2.get(i3);
      if (o3) {
        const n3 = o3[t4.__cacheKey];
        n3.usedTimes--, 0 === n3.usedTimes && x2(e8), 0 === Object.keys(o3).length && d2.delete(i3);
      }
      n2.remove(e8);
    }(t3), t3.isVideoTexture && h2.delete(t3);
  }
  function w2(t3) {
    const i3 = t3.target;
    i3.removeEventListener("dispose", w2), function(t4) {
      const i4 = n2.get(t4);
      t4.depthTexture && t4.depthTexture.dispose();
      if (t4.isWebGLCubeRenderTarget) for (let t5 = 0; t5 < 6; t5++) {
        if (Array.isArray(i4.__webglFramebuffer[t5])) for (let n3 = 0; n3 < i4.__webglFramebuffer[t5].length; n3++) e6.deleteFramebuffer(i4.__webglFramebuffer[t5][n3]);
        else e6.deleteFramebuffer(i4.__webglFramebuffer[t5]);
        i4.__webglDepthbuffer && e6.deleteRenderbuffer(i4.__webglDepthbuffer[t5]);
      }
      else {
        if (Array.isArray(i4.__webglFramebuffer)) for (let t5 = 0; t5 < i4.__webglFramebuffer.length; t5++) e6.deleteFramebuffer(i4.__webglFramebuffer[t5]);
        else e6.deleteFramebuffer(i4.__webglFramebuffer);
        if (i4.__webglDepthbuffer && e6.deleteRenderbuffer(i4.__webglDepthbuffer), i4.__webglMultisampledFramebuffer && e6.deleteFramebuffer(i4.__webglMultisampledFramebuffer), i4.__webglColorRenderbuffer) for (let t5 = 0; t5 < i4.__webglColorRenderbuffer.length; t5++) i4.__webglColorRenderbuffer[t5] && e6.deleteRenderbuffer(i4.__webglColorRenderbuffer[t5]);
        i4.__webglDepthRenderbuffer && e6.deleteRenderbuffer(i4.__webglDepthRenderbuffer);
      }
      const o3 = t4.textures;
      for (let t5 = 0, i5 = o3.length; t5 < i5; t5++) {
        const i6 = n2.get(o3[t5]);
        i6.__webglTexture && (e6.deleteTexture(i6.__webglTexture), s2.memory.textures--), n2.remove(o3[t5]);
      }
      n2.remove(t4);
    }(i3);
  }
  function x2(t3) {
    const i3 = n2.get(t3);
    e6.deleteTexture(i3.__webglTexture);
    const o3 = t3.source;
    delete d2.get(o3)[i3.__cacheKey], s2.memory.textures--;
  }
  let C2 = 0;
  function S2(t3, o3) {
    const r3 = n2.get(t3);
    if (t3.isVideoTexture && function(e7) {
      const t4 = s2.render.frame;
      h2.get(e7) !== t4 && (h2.set(e7, t4), e7.update());
    }(t3), false === t3.isRenderTargetTexture && t3.version > 0 && r3.__version !== t3.version) {
      const e7 = t3.image;
      if (null === e7) console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");
      else {
        if (false !== e7.complete) return void R2(r3, t3, o3);
        console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
      }
    }
    i2.bindTexture(e6.TEXTURE_2D, r3.__webglTexture, e6.TEXTURE0 + o3);
  }
  const E2 = { [Ke]: e6.REPEAT, [Ze]: e6.CLAMP_TO_EDGE, [Je]: e6.MIRRORED_REPEAT }, T2 = { [et]: e6.NEAREST, [tt]: e6.NEAREST_MIPMAP_NEAREST, [it]: e6.NEAREST_MIPMAP_LINEAR, [nt]: e6.LINEAR, [ot]: e6.LINEAR_MIPMAP_NEAREST, [rt]: e6.LINEAR_MIPMAP_LINEAR }, I2 = { [wi]: e6.NEVER, [Mi]: e6.ALWAYS, [xi]: e6.LESS, [Si]: e6.LEQUAL, [Ci]: e6.EQUAL, [Ii]: e6.GEQUAL, [Ei]: e6.GREATER, [Ti]: e6.NOTEQUAL };
  function M2(i3, r3) {
    if (r3.type !== dt || false !== t2.has("OES_texture_float_linear") || r3.magFilter !== nt && r3.magFilter !== ot && r3.magFilter !== it && r3.magFilter !== rt && r3.minFilter !== nt && r3.minFilter !== ot && r3.minFilter !== it && r3.minFilter !== rt || console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."), e6.texParameteri(i3, e6.TEXTURE_WRAP_S, E2[r3.wrapS]), e6.texParameteri(i3, e6.TEXTURE_WRAP_T, E2[r3.wrapT]), i3 !== e6.TEXTURE_3D && i3 !== e6.TEXTURE_2D_ARRAY || e6.texParameteri(i3, e6.TEXTURE_WRAP_R, E2[r3.wrapR]), e6.texParameteri(i3, e6.TEXTURE_MAG_FILTER, T2[r3.magFilter]), e6.texParameteri(i3, e6.TEXTURE_MIN_FILTER, T2[r3.minFilter]), r3.compareFunction && (e6.texParameteri(i3, e6.TEXTURE_COMPARE_MODE, e6.COMPARE_REF_TO_TEXTURE), e6.texParameteri(i3, e6.TEXTURE_COMPARE_FUNC, I2[r3.compareFunction])), true === t2.has("EXT_texture_filter_anisotropic")) {
      if (r3.magFilter === et) return;
      if (r3.minFilter !== it && r3.minFilter !== rt) return;
      if (r3.type === dt && false === t2.has("OES_texture_float_linear")) return;
      if (r3.anisotropy > 1 || n2.get(r3).__currentAnisotropy) {
        const s3 = t2.get("EXT_texture_filter_anisotropic");
        e6.texParameterf(i3, s3.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(r3.anisotropy, o2.getMaxAnisotropy())), n2.get(r3).__currentAnisotropy = r3.anisotropy;
      }
    }
  }
  function B2(t3, i3) {
    let n3 = false;
    void 0 === t3.__webglInit && (t3.__webglInit = true, i3.addEventListener("dispose", y2));
    const o3 = i3.source;
    let r3 = d2.get(o3);
    void 0 === r3 && (r3 = {}, d2.set(o3, r3));
    const a3 = function(e7) {
      const t4 = [];
      return t4.push(e7.wrapS), t4.push(e7.wrapT), t4.push(e7.wrapR || 0), t4.push(e7.magFilter), t4.push(e7.minFilter), t4.push(e7.anisotropy), t4.push(e7.internalFormat), t4.push(e7.format), t4.push(e7.type), t4.push(e7.generateMipmaps), t4.push(e7.premultiplyAlpha), t4.push(e7.flipY), t4.push(e7.unpackAlignment), t4.push(e7.colorSpace), t4.join();
    }(i3);
    if (a3 !== t3.__cacheKey) {
      void 0 === r3[a3] && (r3[a3] = { texture: e6.createTexture(), usedTimes: 0 }, s2.memory.textures++, n3 = true), r3[a3].usedTimes++;
      const o4 = r3[t3.__cacheKey];
      void 0 !== o4 && (r3[t3.__cacheKey].usedTimes--, 0 === o4.usedTimes && x2(i3)), t3.__cacheKey = a3, t3.__webglTexture = r3[a3].texture;
    }
    return n3;
  }
  function R2(t3, s3, a3) {
    let l3 = e6.TEXTURE_2D;
    (s3.isDataArrayTexture || s3.isCompressedArrayTexture) && (l3 = e6.TEXTURE_2D_ARRAY), s3.isData3DTexture && (l3 = e6.TEXTURE_3D);
    const c3 = B2(t3, s3), h3 = s3.source;
    i2.bindTexture(l3, t3.__webglTexture, e6.TEXTURE0 + a3);
    const u3 = n2.get(h3);
    if (h3.version !== u3.__version || true === c3) {
      i2.activeTexture(e6.TEXTURE0 + a3);
      const t4 = rn.getPrimaries(rn.workingColorSpace), n3 = s3.colorSpace === di ? null : rn.getPrimaries(s3.colorSpace), d3 = s3.colorSpace === di || t4 === n3 ? e6.NONE : e6.BROWSER_DEFAULT_WEBGL;
      e6.pixelStorei(e6.UNPACK_FLIP_Y_WEBGL, s3.flipY), e6.pixelStorei(e6.UNPACK_PREMULTIPLY_ALPHA_WEBGL, s3.premultiplyAlpha), e6.pixelStorei(e6.UNPACK_ALIGNMENT, s3.unpackAlignment), e6.pixelStorei(e6.UNPACK_COLORSPACE_CONVERSION_WEBGL, d3);
      let p3 = g2(s3.image, false, o2.maxTextureSize);
      p3 = U2(s3, p3);
      const _3 = r2.convert(s3.format, s3.colorSpace), y3 = r2.convert(s3.type);
      let w3, x3 = v2(s3.internalFormat, _3, y3, s3.colorSpace, s3.isVideoTexture);
      M2(l3, s3);
      const C3 = s3.mipmaps, S3 = true !== s3.isVideoTexture, E3 = void 0 === u3.__version || true === c3, T3 = h3.dataReady, I3 = b2(s3, p3);
      if (s3.isDepthTexture) x3 = A2(s3.format === bt, s3.type), E3 && (S3 ? i2.texStorage2D(e6.TEXTURE_2D, 1, x3, p3.width, p3.height) : i2.texImage2D(e6.TEXTURE_2D, 0, x3, p3.width, p3.height, 0, _3, y3, null));
      else if (s3.isDataTexture) if (C3.length > 0) {
        S3 && E3 && i2.texStorage2D(e6.TEXTURE_2D, I3, x3, C3[0].width, C3[0].height);
        for (let t5 = 0, n4 = C3.length; t5 < n4; t5++) w3 = C3[t5], S3 ? T3 && i2.texSubImage2D(e6.TEXTURE_2D, t5, 0, 0, w3.width, w3.height, _3, y3, w3.data) : i2.texImage2D(e6.TEXTURE_2D, t5, x3, w3.width, w3.height, 0, _3, y3, w3.data);
        s3.generateMipmaps = false;
      } else S3 ? (E3 && i2.texStorage2D(e6.TEXTURE_2D, I3, x3, p3.width, p3.height), T3 && i2.texSubImage2D(e6.TEXTURE_2D, 0, 0, 0, p3.width, p3.height, _3, y3, p3.data)) : i2.texImage2D(e6.TEXTURE_2D, 0, x3, p3.width, p3.height, 0, _3, y3, p3.data);
      else if (s3.isCompressedTexture) if (s3.isCompressedArrayTexture) {
        S3 && E3 && i2.texStorage3D(e6.TEXTURE_2D_ARRAY, I3, x3, C3[0].width, C3[0].height, p3.depth);
        for (let t5 = 0, n4 = C3.length; t5 < n4; t5++) if (w3 = C3[t5], s3.format !== vt) if (null !== _3) if (S3) {
          if (T3) if (s3.layerUpdates.size > 0) {
            const n5 = Cl(w3.width, w3.height, s3.format, s3.type);
            for (const o3 of s3.layerUpdates) {
              const r3 = w3.data.subarray(o3 * n5 / w3.data.BYTES_PER_ELEMENT, (o3 + 1) * n5 / w3.data.BYTES_PER_ELEMENT);
              i2.compressedTexSubImage3D(e6.TEXTURE_2D_ARRAY, t5, 0, 0, o3, w3.width, w3.height, 1, _3, r3, 0, 0);
            }
            s3.clearLayerUpdates();
          } else i2.compressedTexSubImage3D(e6.TEXTURE_2D_ARRAY, t5, 0, 0, 0, w3.width, w3.height, p3.depth, _3, w3.data, 0, 0);
        } else i2.compressedTexImage3D(e6.TEXTURE_2D_ARRAY, t5, x3, w3.width, w3.height, p3.depth, 0, w3.data, 0, 0);
        else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");
        else S3 ? T3 && i2.texSubImage3D(e6.TEXTURE_2D_ARRAY, t5, 0, 0, 0, w3.width, w3.height, p3.depth, _3, y3, w3.data) : i2.texImage3D(e6.TEXTURE_2D_ARRAY, t5, x3, w3.width, w3.height, p3.depth, 0, _3, y3, w3.data);
      } else {
        S3 && E3 && i2.texStorage2D(e6.TEXTURE_2D, I3, x3, C3[0].width, C3[0].height);
        for (let t5 = 0, n4 = C3.length; t5 < n4; t5++) w3 = C3[t5], s3.format !== vt ? null !== _3 ? S3 ? T3 && i2.compressedTexSubImage2D(e6.TEXTURE_2D, t5, 0, 0, w3.width, w3.height, _3, w3.data) : i2.compressedTexImage2D(e6.TEXTURE_2D, t5, x3, w3.width, w3.height, 0, w3.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : S3 ? T3 && i2.texSubImage2D(e6.TEXTURE_2D, t5, 0, 0, w3.width, w3.height, _3, y3, w3.data) : i2.texImage2D(e6.TEXTURE_2D, t5, x3, w3.width, w3.height, 0, _3, y3, w3.data);
      }
      else if (s3.isDataArrayTexture) if (S3) {
        if (E3 && i2.texStorage3D(e6.TEXTURE_2D_ARRAY, I3, x3, p3.width, p3.height, p3.depth), T3) if (s3.layerUpdates.size > 0) {
          const t5 = Cl(p3.width, p3.height, s3.format, s3.type);
          for (const n4 of s3.layerUpdates) {
            const o3 = p3.data.subarray(n4 * t5 / p3.data.BYTES_PER_ELEMENT, (n4 + 1) * t5 / p3.data.BYTES_PER_ELEMENT);
            i2.texSubImage3D(e6.TEXTURE_2D_ARRAY, 0, 0, 0, n4, p3.width, p3.height, 1, _3, y3, o3);
          }
          s3.clearLayerUpdates();
        } else i2.texSubImage3D(e6.TEXTURE_2D_ARRAY, 0, 0, 0, 0, p3.width, p3.height, p3.depth, _3, y3, p3.data);
      } else i2.texImage3D(e6.TEXTURE_2D_ARRAY, 0, x3, p3.width, p3.height, p3.depth, 0, _3, y3, p3.data);
      else if (s3.isData3DTexture) S3 ? (E3 && i2.texStorage3D(e6.TEXTURE_3D, I3, x3, p3.width, p3.height, p3.depth), T3 && i2.texSubImage3D(e6.TEXTURE_3D, 0, 0, 0, 0, p3.width, p3.height, p3.depth, _3, y3, p3.data)) : i2.texImage3D(e6.TEXTURE_3D, 0, x3, p3.width, p3.height, p3.depth, 0, _3, y3, p3.data);
      else if (s3.isFramebufferTexture) {
        if (E3) if (S3) i2.texStorage2D(e6.TEXTURE_2D, I3, x3, p3.width, p3.height);
        else {
          let t5 = p3.width, n4 = p3.height;
          for (let o3 = 0; o3 < I3; o3++) i2.texImage2D(e6.TEXTURE_2D, o3, x3, t5, n4, 0, _3, y3, null), t5 >>= 1, n4 >>= 1;
        }
      } else if (C3.length > 0) {
        if (S3 && E3) {
          const t5 = z2(C3[0]);
          i2.texStorage2D(e6.TEXTURE_2D, I3, x3, t5.width, t5.height);
        }
        for (let t5 = 0, n4 = C3.length; t5 < n4; t5++) w3 = C3[t5], S3 ? T3 && i2.texSubImage2D(e6.TEXTURE_2D, t5, 0, 0, _3, y3, w3) : i2.texImage2D(e6.TEXTURE_2D, t5, x3, _3, y3, w3);
        s3.generateMipmaps = false;
      } else if (S3) {
        if (E3) {
          const t5 = z2(p3);
          i2.texStorage2D(e6.TEXTURE_2D, I3, x3, t5.width, t5.height);
        }
        T3 && i2.texSubImage2D(e6.TEXTURE_2D, 0, 0, 0, _3, y3, p3);
      } else i2.texImage2D(e6.TEXTURE_2D, 0, x3, _3, y3, p3);
      m2(s3) && f2(l3), u3.__version = h3.version, s3.onUpdate && s3.onUpdate(s3);
    }
    t3.__version = s3.version;
  }
  function k2(t3, o3, s3, l3, c3, h3) {
    const u3 = r2.convert(s3.format, s3.colorSpace), d3 = r2.convert(s3.type), p3 = v2(s3.internalFormat, u3, d3, s3.colorSpace);
    if (!n2.get(o3).__hasExternalTextures) {
      const t4 = Math.max(1, o3.width >> h3), n3 = Math.max(1, o3.height >> h3);
      c3 === e6.TEXTURE_3D || c3 === e6.TEXTURE_2D_ARRAY ? i2.texImage3D(c3, h3, p3, t4, n3, o3.depth, 0, u3, d3, null) : i2.texImage2D(c3, h3, p3, t4, n3, 0, u3, d3, null);
    }
    i2.bindFramebuffer(e6.FRAMEBUFFER, t3), O2(o3) ? a2.framebufferTexture2DMultisampleEXT(e6.FRAMEBUFFER, l3, c3, n2.get(s3).__webglTexture, 0, N2(o3)) : (c3 === e6.TEXTURE_2D || c3 >= e6.TEXTURE_CUBE_MAP_POSITIVE_X && c3 <= e6.TEXTURE_CUBE_MAP_NEGATIVE_Z) && e6.framebufferTexture2D(e6.FRAMEBUFFER, l3, c3, n2.get(s3).__webglTexture, h3), i2.bindFramebuffer(e6.FRAMEBUFFER, null);
  }
  function P2(t3, i3, n3) {
    if (e6.bindRenderbuffer(e6.RENDERBUFFER, t3), i3.depthBuffer) {
      const o3 = i3.depthTexture, r3 = o3 && o3.isDepthTexture ? o3.type : null, s3 = A2(i3.stencilBuffer, r3), l3 = i3.stencilBuffer ? e6.DEPTH_STENCIL_ATTACHMENT : e6.DEPTH_ATTACHMENT, c3 = N2(i3);
      O2(i3) ? a2.renderbufferStorageMultisampleEXT(e6.RENDERBUFFER, c3, s3, i3.width, i3.height) : n3 ? e6.renderbufferStorageMultisample(e6.RENDERBUFFER, c3, s3, i3.width, i3.height) : e6.renderbufferStorage(e6.RENDERBUFFER, s3, i3.width, i3.height), e6.framebufferRenderbuffer(e6.FRAMEBUFFER, l3, e6.RENDERBUFFER, t3);
    } else {
      const t4 = i3.textures;
      for (let o3 = 0; o3 < t4.length; o3++) {
        const s3 = t4[o3], l3 = r2.convert(s3.format, s3.colorSpace), c3 = r2.convert(s3.type), h3 = v2(s3.internalFormat, l3, c3, s3.colorSpace), u3 = N2(i3);
        n3 && false === O2(i3) ? e6.renderbufferStorageMultisample(e6.RENDERBUFFER, u3, h3, i3.width, i3.height) : O2(i3) ? a2.renderbufferStorageMultisampleEXT(e6.RENDERBUFFER, u3, h3, i3.width, i3.height) : e6.renderbufferStorage(e6.RENDERBUFFER, h3, i3.width, i3.height);
      }
    }
    e6.bindRenderbuffer(e6.RENDERBUFFER, null);
  }
  function D2(t3) {
    const o3 = n2.get(t3), r3 = true === t3.isWebGLCubeRenderTarget;
    if (o3.__boundDepthTexture !== t3.depthTexture) {
      const e7 = t3.depthTexture;
      if (o3.__depthDisposeCallback && o3.__depthDisposeCallback(), e7) {
        const t4 = () => {
          delete o3.__boundDepthTexture, delete o3.__depthDisposeCallback, e7.removeEventListener("dispose", t4);
        };
        e7.addEventListener("dispose", t4), o3.__depthDisposeCallback = t4;
      }
      o3.__boundDepthTexture = e7;
    }
    if (t3.depthTexture && !o3.__autoAllocateDepthBuffer) {
      if (r3) throw new Error("target.depthTexture not supported in Cube render targets");
      !function(t4, o4) {
        if (o4 && o4.isWebGLCubeRenderTarget) throw new Error("Depth Texture with cube render targets is not supported");
        if (i2.bindFramebuffer(e6.FRAMEBUFFER, t4), !o4.depthTexture || !o4.depthTexture.isDepthTexture) throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
        n2.get(o4.depthTexture).__webglTexture && o4.depthTexture.image.width === o4.width && o4.depthTexture.image.height === o4.height || (o4.depthTexture.image.width = o4.width, o4.depthTexture.image.height = o4.height, o4.depthTexture.needsUpdate = true), S2(o4.depthTexture, 0);
        const r4 = n2.get(o4.depthTexture).__webglTexture, s3 = N2(o4);
        if (o4.depthTexture.format === At) O2(o4) ? a2.framebufferTexture2DMultisampleEXT(e6.FRAMEBUFFER, e6.DEPTH_ATTACHMENT, e6.TEXTURE_2D, r4, 0, s3) : e6.framebufferTexture2D(e6.FRAMEBUFFER, e6.DEPTH_ATTACHMENT, e6.TEXTURE_2D, r4, 0);
        else {
          if (o4.depthTexture.format !== bt) throw new Error("Unknown depthTexture format");
          O2(o4) ? a2.framebufferTexture2DMultisampleEXT(e6.FRAMEBUFFER, e6.DEPTH_STENCIL_ATTACHMENT, e6.TEXTURE_2D, r4, 0, s3) : e6.framebufferTexture2D(e6.FRAMEBUFFER, e6.DEPTH_STENCIL_ATTACHMENT, e6.TEXTURE_2D, r4, 0);
        }
      }(o3.__webglFramebuffer, t3);
    } else if (r3) {
      o3.__webglDepthbuffer = [];
      for (let n3 = 0; n3 < 6; n3++) if (i2.bindFramebuffer(e6.FRAMEBUFFER, o3.__webglFramebuffer[n3]), void 0 === o3.__webglDepthbuffer[n3]) o3.__webglDepthbuffer[n3] = e6.createRenderbuffer(), P2(o3.__webglDepthbuffer[n3], t3, false);
      else {
        const i3 = t3.stencilBuffer ? e6.DEPTH_STENCIL_ATTACHMENT : e6.DEPTH_ATTACHMENT, r4 = o3.__webglDepthbuffer[n3];
        e6.bindRenderbuffer(e6.RENDERBUFFER, r4), e6.framebufferRenderbuffer(e6.FRAMEBUFFER, i3, e6.RENDERBUFFER, r4);
      }
    } else if (i2.bindFramebuffer(e6.FRAMEBUFFER, o3.__webglFramebuffer), void 0 === o3.__webglDepthbuffer) o3.__webglDepthbuffer = e6.createRenderbuffer(), P2(o3.__webglDepthbuffer, t3, false);
    else {
      const i3 = t3.stencilBuffer ? e6.DEPTH_STENCIL_ATTACHMENT : e6.DEPTH_ATTACHMENT, n3 = o3.__webglDepthbuffer;
      e6.bindRenderbuffer(e6.RENDERBUFFER, n3), e6.framebufferRenderbuffer(e6.FRAMEBUFFER, i3, e6.RENDERBUFFER, n3);
    }
    i2.bindFramebuffer(e6.FRAMEBUFFER, null);
  }
  const L2 = [], F2 = [];
  function N2(e7) {
    return Math.min(o2.maxSamples, e7.samples);
  }
  function O2(e7) {
    const i3 = n2.get(e7);
    return e7.samples > 0 && true === t2.has("WEBGL_multisampled_render_to_texture") && false !== i3.__useRenderToTexture;
  }
  function U2(e7, t3) {
    const i3 = e7.colorSpace, n3 = e7.format, o3 = e7.type;
    return true === e7.isCompressedTexture || true === e7.isVideoTexture || i3 !== _i && i3 !== di && (rn.getTransfer(i3) === vi ? n3 === vt && o3 === st || console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.") : console.error("THREE.WebGLTextures: Unsupported texture color space:", i3)), t3;
  }
  function z2(e7) {
    return "undefined" != typeof HTMLImageElement && e7 instanceof HTMLImageElement ? (c2.width = e7.naturalWidth || e7.width, c2.height = e7.naturalHeight || e7.height) : "undefined" != typeof VideoFrame && e7 instanceof VideoFrame ? (c2.width = e7.displayWidth, c2.height = e7.displayHeight) : (c2.width = e7.width, c2.height = e7.height), c2;
  }
  this.allocateTextureUnit = function() {
    const e7 = C2;
    return e7 >= o2.maxTextures && console.warn("THREE.WebGLTextures: Trying to use " + e7 + " texture units while this GPU supports only " + o2.maxTextures), C2 += 1, e7;
  }, this.resetTextureUnits = function() {
    C2 = 0;
  }, this.setTexture2D = S2, this.setTexture2DArray = function(t3, o3) {
    const r3 = n2.get(t3);
    t3.version > 0 && r3.__version !== t3.version ? R2(r3, t3, o3) : i2.bindTexture(e6.TEXTURE_2D_ARRAY, r3.__webglTexture, e6.TEXTURE0 + o3);
  }, this.setTexture3D = function(t3, o3) {
    const r3 = n2.get(t3);
    t3.version > 0 && r3.__version !== t3.version ? R2(r3, t3, o3) : i2.bindTexture(e6.TEXTURE_3D, r3.__webglTexture, e6.TEXTURE0 + o3);
  }, this.setTextureCube = function(t3, s3) {
    const a3 = n2.get(t3);
    t3.version > 0 && a3.__version !== t3.version ? function(t4, s4, a4) {
      if (6 !== s4.image.length) return;
      const l3 = B2(t4, s4), c3 = s4.source;
      i2.bindTexture(e6.TEXTURE_CUBE_MAP, t4.__webglTexture, e6.TEXTURE0 + a4);
      const h3 = n2.get(c3);
      if (c3.version !== h3.__version || true === l3) {
        i2.activeTexture(e6.TEXTURE0 + a4);
        const t5 = rn.getPrimaries(rn.workingColorSpace), n3 = s4.colorSpace === di ? null : rn.getPrimaries(s4.colorSpace), u3 = s4.colorSpace === di || t5 === n3 ? e6.NONE : e6.BROWSER_DEFAULT_WEBGL;
        e6.pixelStorei(e6.UNPACK_FLIP_Y_WEBGL, s4.flipY), e6.pixelStorei(e6.UNPACK_PREMULTIPLY_ALPHA_WEBGL, s4.premultiplyAlpha), e6.pixelStorei(e6.UNPACK_ALIGNMENT, s4.unpackAlignment), e6.pixelStorei(e6.UNPACK_COLORSPACE_CONVERSION_WEBGL, u3);
        const d3 = s4.isCompressedTexture || s4.image[0].isCompressedTexture, p3 = s4.image[0] && s4.image[0].isDataTexture, _3 = [];
        for (let e7 = 0; e7 < 6; e7++) _3[e7] = d3 || p3 ? p3 ? s4.image[e7].image : s4.image[e7] : g2(s4.image[e7], true, o2.maxCubemapSize), _3[e7] = U2(s4, _3[e7]);
        const A3 = _3[0], y3 = r2.convert(s4.format, s4.colorSpace), w3 = r2.convert(s4.type), x3 = v2(s4.internalFormat, y3, w3, s4.colorSpace), C3 = true !== s4.isVideoTexture, S3 = void 0 === h3.__version || true === l3, E3 = c3.dataReady;
        let T3, I3 = b2(s4, A3);
        if (M2(e6.TEXTURE_CUBE_MAP, s4), d3) {
          C3 && S3 && i2.texStorage2D(e6.TEXTURE_CUBE_MAP, I3, x3, A3.width, A3.height);
          for (let t6 = 0; t6 < 6; t6++) {
            T3 = _3[t6].mipmaps;
            for (let n4 = 0; n4 < T3.length; n4++) {
              const o3 = T3[n4];
              s4.format !== vt ? null !== y3 ? C3 ? E3 && i2.compressedTexSubImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4, 0, 0, o3.width, o3.height, y3, o3.data) : i2.compressedTexImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4, x3, o3.width, o3.height, 0, o3.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : C3 ? E3 && i2.texSubImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4, 0, 0, o3.width, o3.height, y3, w3, o3.data) : i2.texImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4, x3, o3.width, o3.height, 0, y3, w3, o3.data);
            }
          }
        } else {
          if (T3 = s4.mipmaps, C3 && S3) {
            T3.length > 0 && I3++;
            const t6 = z2(_3[0]);
            i2.texStorage2D(e6.TEXTURE_CUBE_MAP, I3, x3, t6.width, t6.height);
          }
          for (let t6 = 0; t6 < 6; t6++) if (p3) {
            C3 ? E3 && i2.texSubImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, 0, 0, 0, _3[t6].width, _3[t6].height, y3, w3, _3[t6].data) : i2.texImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, 0, x3, _3[t6].width, _3[t6].height, 0, y3, w3, _3[t6].data);
            for (let n4 = 0; n4 < T3.length; n4++) {
              const o3 = T3[n4].image[t6].image;
              C3 ? E3 && i2.texSubImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4 + 1, 0, 0, o3.width, o3.height, y3, w3, o3.data) : i2.texImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4 + 1, x3, o3.width, o3.height, 0, y3, w3, o3.data);
            }
          } else {
            C3 ? E3 && i2.texSubImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, 0, 0, 0, y3, w3, _3[t6]) : i2.texImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, 0, x3, y3, w3, _3[t6]);
            for (let n4 = 0; n4 < T3.length; n4++) {
              const o3 = T3[n4];
              C3 ? E3 && i2.texSubImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4 + 1, 0, 0, y3, w3, o3.image[t6]) : i2.texImage2D(e6.TEXTURE_CUBE_MAP_POSITIVE_X + t6, n4 + 1, x3, y3, w3, o3.image[t6]);
            }
          }
        }
        m2(s4) && f2(e6.TEXTURE_CUBE_MAP), h3.__version = c3.version, s4.onUpdate && s4.onUpdate(s4);
      }
      t4.__version = s4.version;
    }(a3, t3, s3) : i2.bindTexture(e6.TEXTURE_CUBE_MAP, a3.__webglTexture, e6.TEXTURE0 + s3);
  }, this.rebindTextures = function(t3, i3, o3) {
    const r3 = n2.get(t3);
    void 0 !== i3 && k2(r3.__webglFramebuffer, t3, t3.texture, e6.COLOR_ATTACHMENT0, e6.TEXTURE_2D, 0), void 0 !== o3 && D2(t3);
  }, this.setupRenderTarget = function(t3) {
    const o3 = t3.texture, a3 = n2.get(t3), l3 = n2.get(o3);
    t3.addEventListener("dispose", w2);
    const c3 = t3.textures, h3 = true === t3.isWebGLCubeRenderTarget, u3 = c3.length > 1;
    if (u3 || (void 0 === l3.__webglTexture && (l3.__webglTexture = e6.createTexture()), l3.__version = o3.version, s2.memory.textures++), h3) {
      a3.__webglFramebuffer = [];
      for (let t4 = 0; t4 < 6; t4++) if (o3.mipmaps && o3.mipmaps.length > 0) {
        a3.__webglFramebuffer[t4] = [];
        for (let i3 = 0; i3 < o3.mipmaps.length; i3++) a3.__webglFramebuffer[t4][i3] = e6.createFramebuffer();
      } else a3.__webglFramebuffer[t4] = e6.createFramebuffer();
    } else {
      if (o3.mipmaps && o3.mipmaps.length > 0) {
        a3.__webglFramebuffer = [];
        for (let t4 = 0; t4 < o3.mipmaps.length; t4++) a3.__webglFramebuffer[t4] = e6.createFramebuffer();
      } else a3.__webglFramebuffer = e6.createFramebuffer();
      if (u3) for (let t4 = 0, i3 = c3.length; t4 < i3; t4++) {
        const i4 = n2.get(c3[t4]);
        void 0 === i4.__webglTexture && (i4.__webglTexture = e6.createTexture(), s2.memory.textures++);
      }
      if (t3.samples > 0 && false === O2(t3)) {
        a3.__webglMultisampledFramebuffer = e6.createFramebuffer(), a3.__webglColorRenderbuffer = [], i2.bindFramebuffer(e6.FRAMEBUFFER, a3.__webglMultisampledFramebuffer);
        for (let i3 = 0; i3 < c3.length; i3++) {
          const n3 = c3[i3];
          a3.__webglColorRenderbuffer[i3] = e6.createRenderbuffer(), e6.bindRenderbuffer(e6.RENDERBUFFER, a3.__webglColorRenderbuffer[i3]);
          const o4 = r2.convert(n3.format, n3.colorSpace), s3 = r2.convert(n3.type), l4 = v2(n3.internalFormat, o4, s3, n3.colorSpace, true === t3.isXRRenderTarget), h4 = N2(t3);
          e6.renderbufferStorageMultisample(e6.RENDERBUFFER, h4, l4, t3.width, t3.height), e6.framebufferRenderbuffer(e6.FRAMEBUFFER, e6.COLOR_ATTACHMENT0 + i3, e6.RENDERBUFFER, a3.__webglColorRenderbuffer[i3]);
        }
        e6.bindRenderbuffer(e6.RENDERBUFFER, null), t3.depthBuffer && (a3.__webglDepthRenderbuffer = e6.createRenderbuffer(), P2(a3.__webglDepthRenderbuffer, t3, true)), i2.bindFramebuffer(e6.FRAMEBUFFER, null);
      }
    }
    if (h3) {
      i2.bindTexture(e6.TEXTURE_CUBE_MAP, l3.__webglTexture), M2(e6.TEXTURE_CUBE_MAP, o3);
      for (let i3 = 0; i3 < 6; i3++) if (o3.mipmaps && o3.mipmaps.length > 0) for (let n3 = 0; n3 < o3.mipmaps.length; n3++) k2(a3.__webglFramebuffer[i3][n3], t3, o3, e6.COLOR_ATTACHMENT0, e6.TEXTURE_CUBE_MAP_POSITIVE_X + i3, n3);
      else k2(a3.__webglFramebuffer[i3], t3, o3, e6.COLOR_ATTACHMENT0, e6.TEXTURE_CUBE_MAP_POSITIVE_X + i3, 0);
      m2(o3) && f2(e6.TEXTURE_CUBE_MAP), i2.unbindTexture();
    } else if (u3) {
      for (let o4 = 0, r3 = c3.length; o4 < r3; o4++) {
        const r4 = c3[o4], s3 = n2.get(r4);
        i2.bindTexture(e6.TEXTURE_2D, s3.__webglTexture), M2(e6.TEXTURE_2D, r4), k2(a3.__webglFramebuffer, t3, r4, e6.COLOR_ATTACHMENT0 + o4, e6.TEXTURE_2D, 0), m2(r4) && f2(e6.TEXTURE_2D);
      }
      i2.unbindTexture();
    } else {
      let n3 = e6.TEXTURE_2D;
      if ((t3.isWebGL3DRenderTarget || t3.isWebGLArrayRenderTarget) && (n3 = t3.isWebGL3DRenderTarget ? e6.TEXTURE_3D : e6.TEXTURE_2D_ARRAY), i2.bindTexture(n3, l3.__webglTexture), M2(n3, o3), o3.mipmaps && o3.mipmaps.length > 0) for (let i3 = 0; i3 < o3.mipmaps.length; i3++) k2(a3.__webglFramebuffer[i3], t3, o3, e6.COLOR_ATTACHMENT0, n3, i3);
      else k2(a3.__webglFramebuffer, t3, o3, e6.COLOR_ATTACHMENT0, n3, 0);
      m2(o3) && f2(n3), i2.unbindTexture();
    }
    t3.depthBuffer && D2(t3);
  }, this.updateRenderTargetMipmap = function(t3) {
    const o3 = t3.textures;
    for (let r3 = 0, s3 = o3.length; r3 < s3; r3++) {
      const s4 = o3[r3];
      if (m2(s4)) {
        const o4 = t3.isWebGLCubeRenderTarget ? e6.TEXTURE_CUBE_MAP : e6.TEXTURE_2D, r4 = n2.get(s4).__webglTexture;
        i2.bindTexture(o4, r4), f2(o4), i2.unbindTexture();
      }
    }
  }, this.updateMultisampleRenderTarget = function(t3) {
    if (t3.samples > 0) {
      if (false === O2(t3)) {
        const o3 = t3.textures, r3 = t3.width, s3 = t3.height;
        let a3 = e6.COLOR_BUFFER_BIT;
        const c3 = t3.stencilBuffer ? e6.DEPTH_STENCIL_ATTACHMENT : e6.DEPTH_ATTACHMENT, h3 = n2.get(t3), u3 = o3.length > 1;
        if (u3) for (let t4 = 0; t4 < o3.length; t4++) i2.bindFramebuffer(e6.FRAMEBUFFER, h3.__webglMultisampledFramebuffer), e6.framebufferRenderbuffer(e6.FRAMEBUFFER, e6.COLOR_ATTACHMENT0 + t4, e6.RENDERBUFFER, null), i2.bindFramebuffer(e6.FRAMEBUFFER, h3.__webglFramebuffer), e6.framebufferTexture2D(e6.DRAW_FRAMEBUFFER, e6.COLOR_ATTACHMENT0 + t4, e6.TEXTURE_2D, null, 0);
        i2.bindFramebuffer(e6.READ_FRAMEBUFFER, h3.__webglMultisampledFramebuffer), i2.bindFramebuffer(e6.DRAW_FRAMEBUFFER, h3.__webglFramebuffer);
        for (let i3 = 0; i3 < o3.length; i3++) {
          if (t3.resolveDepthBuffer && (t3.depthBuffer && (a3 |= e6.DEPTH_BUFFER_BIT), t3.stencilBuffer && t3.resolveStencilBuffer && (a3 |= e6.STENCIL_BUFFER_BIT)), u3) {
            e6.framebufferRenderbuffer(e6.READ_FRAMEBUFFER, e6.COLOR_ATTACHMENT0, e6.RENDERBUFFER, h3.__webglColorRenderbuffer[i3]);
            const t4 = n2.get(o3[i3]).__webglTexture;
            e6.framebufferTexture2D(e6.DRAW_FRAMEBUFFER, e6.COLOR_ATTACHMENT0, e6.TEXTURE_2D, t4, 0);
          }
          e6.blitFramebuffer(0, 0, r3, s3, 0, 0, r3, s3, a3, e6.NEAREST), true === l2 && (L2.length = 0, F2.length = 0, L2.push(e6.COLOR_ATTACHMENT0 + i3), t3.depthBuffer && false === t3.resolveDepthBuffer && (L2.push(c3), F2.push(c3), e6.invalidateFramebuffer(e6.DRAW_FRAMEBUFFER, F2)), e6.invalidateFramebuffer(e6.READ_FRAMEBUFFER, L2));
        }
        if (i2.bindFramebuffer(e6.READ_FRAMEBUFFER, null), i2.bindFramebuffer(e6.DRAW_FRAMEBUFFER, null), u3) for (let t4 = 0; t4 < o3.length; t4++) {
          i2.bindFramebuffer(e6.FRAMEBUFFER, h3.__webglMultisampledFramebuffer), e6.framebufferRenderbuffer(e6.FRAMEBUFFER, e6.COLOR_ATTACHMENT0 + t4, e6.RENDERBUFFER, h3.__webglColorRenderbuffer[t4]);
          const r4 = n2.get(o3[t4]).__webglTexture;
          i2.bindFramebuffer(e6.FRAMEBUFFER, h3.__webglFramebuffer), e6.framebufferTexture2D(e6.DRAW_FRAMEBUFFER, e6.COLOR_ATTACHMENT0 + t4, e6.TEXTURE_2D, r4, 0);
        }
        i2.bindFramebuffer(e6.DRAW_FRAMEBUFFER, h3.__webglMultisampledFramebuffer);
      } else if (t3.depthBuffer && false === t3.resolveDepthBuffer && l2) {
        const i3 = t3.stencilBuffer ? e6.DEPTH_STENCIL_ATTACHMENT : e6.DEPTH_ATTACHMENT;
        e6.invalidateFramebuffer(e6.DRAW_FRAMEBUFFER, [i3]);
      }
    }
  }, this.setupDepthRenderbuffer = D2, this.setupFrameBufferTexture = k2, this.useMultisampledRTT = O2;
}
function El(e6, t2) {
  return { convert: function(i2, n2 = "") {
    let o2;
    const r2 = rn.getTransfer(n2);
    if (i2 === st) return e6.UNSIGNED_BYTE;
    if (i2 === _t) return e6.UNSIGNED_SHORT_4_4_4_4;
    if (i2 === gt) return e6.UNSIGNED_SHORT_5_5_5_1;
    if (i2 === ft) return e6.UNSIGNED_INT_5_9_9_9_REV;
    if (i2 === at) return e6.BYTE;
    if (i2 === lt) return e6.SHORT;
    if (i2 === ct) return e6.UNSIGNED_SHORT;
    if (i2 === ht) return e6.INT;
    if (i2 === ut) return e6.UNSIGNED_INT;
    if (i2 === dt) return e6.FLOAT;
    if (i2 === pt) return e6.HALF_FLOAT;
    if (1021 === i2) return e6.ALPHA;
    if (1022 === i2) return e6.RGB;
    if (i2 === vt) return e6.RGBA;
    if (1024 === i2) return e6.LUMINANCE;
    if (1025 === i2) return e6.LUMINANCE_ALPHA;
    if (i2 === At) return e6.DEPTH_COMPONENT;
    if (i2 === bt) return e6.DEPTH_STENCIL;
    if (i2 === yt) return e6.RED;
    if (i2 === wt) return e6.RED_INTEGER;
    if (i2 === xt) return e6.RG;
    if (i2 === Ct) return e6.RG_INTEGER;
    if (i2 === St) return e6.RGBA_INTEGER;
    if (i2 === Et || i2 === Tt || i2 === It || i2 === Mt) if (r2 === vi) {
      if (o2 = t2.get("WEBGL_compressed_texture_s3tc_srgb"), null === o2) return null;
      if (i2 === Et) return o2.COMPRESSED_SRGB_S3TC_DXT1_EXT;
      if (i2 === Tt) return o2.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
      if (i2 === It) return o2.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
      if (i2 === Mt) return o2.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
    } else {
      if (o2 = t2.get("WEBGL_compressed_texture_s3tc"), null === o2) return null;
      if (i2 === Et) return o2.COMPRESSED_RGB_S3TC_DXT1_EXT;
      if (i2 === Tt) return o2.COMPRESSED_RGBA_S3TC_DXT1_EXT;
      if (i2 === It) return o2.COMPRESSED_RGBA_S3TC_DXT3_EXT;
      if (i2 === Mt) return o2.COMPRESSED_RGBA_S3TC_DXT5_EXT;
    }
    if (i2 === Bt || i2 === Rt || i2 === kt || i2 === Pt) {
      if (o2 = t2.get("WEBGL_compressed_texture_pvrtc"), null === o2) return null;
      if (i2 === Bt) return o2.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
      if (i2 === Rt) return o2.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
      if (i2 === kt) return o2.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
      if (i2 === Pt) return o2.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
    }
    if (i2 === Dt || i2 === Lt || i2 === Ft) {
      if (o2 = t2.get("WEBGL_compressed_texture_etc"), null === o2) return null;
      if (i2 === Dt || i2 === Lt) return r2 === vi ? o2.COMPRESSED_SRGB8_ETC2 : o2.COMPRESSED_RGB8_ETC2;
      if (i2 === Ft) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : o2.COMPRESSED_RGBA8_ETC2_EAC;
    }
    if (i2 === Nt || i2 === Ot || i2 === Ut || i2 === zt || i2 === Ht || i2 === Qt || i2 === Vt || i2 === Gt || i2 === qt || i2 === $t || i2 === Wt || i2 === jt || i2 === Xt || i2 === Yt) {
      if (o2 = t2.get("WEBGL_compressed_texture_astc"), null === o2) return null;
      if (i2 === Nt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : o2.COMPRESSED_RGBA_ASTC_4x4_KHR;
      if (i2 === Ot) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : o2.COMPRESSED_RGBA_ASTC_5x4_KHR;
      if (i2 === Ut) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : o2.COMPRESSED_RGBA_ASTC_5x5_KHR;
      if (i2 === zt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : o2.COMPRESSED_RGBA_ASTC_6x5_KHR;
      if (i2 === Ht) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : o2.COMPRESSED_RGBA_ASTC_6x6_KHR;
      if (i2 === Qt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : o2.COMPRESSED_RGBA_ASTC_8x5_KHR;
      if (i2 === Vt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : o2.COMPRESSED_RGBA_ASTC_8x6_KHR;
      if (i2 === Gt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : o2.COMPRESSED_RGBA_ASTC_8x8_KHR;
      if (i2 === qt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : o2.COMPRESSED_RGBA_ASTC_10x5_KHR;
      if (i2 === $t) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : o2.COMPRESSED_RGBA_ASTC_10x6_KHR;
      if (i2 === Wt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : o2.COMPRESSED_RGBA_ASTC_10x8_KHR;
      if (i2 === jt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : o2.COMPRESSED_RGBA_ASTC_10x10_KHR;
      if (i2 === Xt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : o2.COMPRESSED_RGBA_ASTC_12x10_KHR;
      if (i2 === Yt) return r2 === vi ? o2.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : o2.COMPRESSED_RGBA_ASTC_12x12_KHR;
    }
    if (i2 === Kt || i2 === Zt || i2 === Jt) {
      if (o2 = t2.get("EXT_texture_compression_bptc"), null === o2) return null;
      if (i2 === Kt) return r2 === vi ? o2.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : o2.COMPRESSED_RGBA_BPTC_UNORM_EXT;
      if (i2 === Zt) return o2.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;
      if (i2 === Jt) return o2.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT;
    }
    if (36283 === i2 || i2 === ei || i2 === ti || i2 === ii) {
      if (o2 = t2.get("EXT_texture_compression_rgtc"), null === o2) return null;
      if (i2 === Kt) return o2.COMPRESSED_RED_RGTC1_EXT;
      if (i2 === ei) return o2.COMPRESSED_SIGNED_RED_RGTC1_EXT;
      if (i2 === ti) return o2.COMPRESSED_RED_GREEN_RGTC2_EXT;
      if (i2 === ii) return o2.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
    }
    return i2 === mt ? e6.UNSIGNED_INT_24_8 : void 0 !== e6[i2] ? e6[i2] : null;
  } };
}
class Tl extends Lr {
  constructor(e6 = []) {
    super(), this.isArrayCamera = true, this.cameras = e6;
  }
}
class Il extends So {
  constructor() {
    super(), this.isGroup = true, this.type = "Group";
  }
}
const Ml = { type: "move" };
class Bl {
  constructor() {
    this._targetRay = null, this._grip = null, this._hand = null;
  }
  getHandSpace() {
    return null === this._hand && (this._hand = new Il(), this._hand.matrixAutoUpdate = false, this._hand.visible = false, this._hand.joints = {}, this._hand.inputState = { pinching: false }), this._hand;
  }
  getTargetRaySpace() {
    return null === this._targetRay && (this._targetRay = new Il(), this._targetRay.matrixAutoUpdate = false, this._targetRay.visible = false, this._targetRay.hasLinearVelocity = false, this._targetRay.linearVelocity = new yn(), this._targetRay.hasAngularVelocity = false, this._targetRay.angularVelocity = new yn()), this._targetRay;
  }
  getGripSpace() {
    return null === this._grip && (this._grip = new Il(), this._grip.matrixAutoUpdate = false, this._grip.visible = false, this._grip.hasLinearVelocity = false, this._grip.linearVelocity = new yn(), this._grip.hasAngularVelocity = false, this._grip.angularVelocity = new yn()), this._grip;
  }
  dispatchEvent(e6) {
    return null !== this._targetRay && this._targetRay.dispatchEvent(e6), null !== this._grip && this._grip.dispatchEvent(e6), null !== this._hand && this._hand.dispatchEvent(e6), this;
  }
  connect(e6) {
    if (e6 && e6.hand) {
      const t2 = this._hand;
      if (t2) for (const i2 of e6.hand.values()) this._getHandJoint(t2, i2);
    }
    return this.dispatchEvent({ type: "connected", data: e6 }), this;
  }
  disconnect(e6) {
    return this.dispatchEvent({ type: "disconnected", data: e6 }), null !== this._targetRay && (this._targetRay.visible = false), null !== this._grip && (this._grip.visible = false), null !== this._hand && (this._hand.visible = false), this;
  }
  update(e6, t2, i2) {
    let n2 = null, o2 = null, r2 = null;
    const s2 = this._targetRay, a2 = this._grip, l2 = this._hand;
    if (e6 && "visible-blurred" !== t2.session.visibilityState) {
      if (l2 && e6.hand) {
        r2 = true;
        for (const n4 of e6.hand.values()) {
          const e7 = t2.getJointPose(n4, i2), o4 = this._getHandJoint(l2, n4);
          null !== e7 && (o4.matrix.fromArray(e7.transform.matrix), o4.matrix.decompose(o4.position, o4.rotation, o4.scale), o4.matrixWorldNeedsUpdate = true, o4.jointRadius = e7.radius), o4.visible = null !== e7;
        }
        const n3 = l2.joints["index-finger-tip"], o3 = l2.joints["thumb-tip"], s3 = n3.position.distanceTo(o3.position), a3 = 0.02, c2 = 5e-3;
        l2.inputState.pinching && s3 > a3 + c2 ? (l2.inputState.pinching = false, this.dispatchEvent({ type: "pinchend", handedness: e6.handedness, target: this })) : !l2.inputState.pinching && s3 <= a3 - c2 && (l2.inputState.pinching = true, this.dispatchEvent({ type: "pinchstart", handedness: e6.handedness, target: this }));
      } else null !== a2 && e6.gripSpace && (o2 = t2.getPose(e6.gripSpace, i2), null !== o2 && (a2.matrix.fromArray(o2.transform.matrix), a2.matrix.decompose(a2.position, a2.rotation, a2.scale), a2.matrixWorldNeedsUpdate = true, o2.linearVelocity ? (a2.hasLinearVelocity = true, a2.linearVelocity.copy(o2.linearVelocity)) : a2.hasLinearVelocity = false, o2.angularVelocity ? (a2.hasAngularVelocity = true, a2.angularVelocity.copy(o2.angularVelocity)) : a2.hasAngularVelocity = false));
      null !== s2 && (n2 = t2.getPose(e6.targetRaySpace, i2), null === n2 && null !== o2 && (n2 = o2), null !== n2 && (s2.matrix.fromArray(n2.transform.matrix), s2.matrix.decompose(s2.position, s2.rotation, s2.scale), s2.matrixWorldNeedsUpdate = true, n2.linearVelocity ? (s2.hasLinearVelocity = true, s2.linearVelocity.copy(n2.linearVelocity)) : s2.hasLinearVelocity = false, n2.angularVelocity ? (s2.hasAngularVelocity = true, s2.angularVelocity.copy(n2.angularVelocity)) : s2.hasAngularVelocity = false, this.dispatchEvent(Ml)));
    }
    return null !== s2 && (s2.visible = null !== n2), null !== a2 && (a2.visible = null !== o2), null !== l2 && (l2.visible = null !== r2), this;
  }
  _getHandJoint(e6, t2) {
    if (void 0 === e6.joints[t2.jointName]) {
      const i2 = new Il();
      i2.matrixAutoUpdate = false, i2.visible = false, e6.joints[t2.jointName] = i2, e6.add(i2);
    }
    return e6.joints[t2.jointName];
  }
}
class Rl {
  constructor() {
    this.texture = null, this.mesh = null, this.depthNear = 0, this.depthFar = 0;
  }
  init(e6, t2, i2) {
    if (null === this.texture) {
      const n2 = new _n();
      e6.properties.get(n2).__webglTexture = t2.texture, t2.depthNear == i2.depthNear && t2.depthFar == i2.depthFar || (this.depthNear = t2.depthNear, this.depthFar = t2.depthFar), this.texture = n2;
    }
  }
  getMesh(e6) {
    if (null !== this.texture && null === this.mesh) {
      const t2 = e6.cameras[0].viewport, i2 = new Br({ vertexShader: "\nvoid main() {\n\n	gl_Position = vec4( position, 1.0 );\n\n}", fragmentShader: "\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n	if ( coord.x >= 1.0 ) {\n\n		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n	} else {\n\n		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n	}\n\n}", uniforms: { depthColor: { value: this.texture }, depthWidth: { value: t2.z }, depthHeight: { value: t2.w } } });
      this.mesh = new xr(new Xr(20, 20), i2);
    }
    return this.mesh;
  }
  reset() {
    this.texture = null, this.mesh = null;
  }
  getDepthTexture() {
    return this.texture;
  }
}
class kl extends Di {
  constructor(e6, t2) {
    super();
    const i2 = this;
    let n2 = null, o2 = 1, r2 = null, s2 = "local-floor", a2 = 1, l2 = null, c2 = null, h2 = null, u2 = null, d2 = null, p2 = null;
    const _2 = new Rl(), g2 = t2.getContextAttributes();
    let m2 = null, f2 = null;
    const v2 = [], A2 = [], b2 = new $i();
    let y2 = null;
    const w2 = new Lr();
    w2.layers.enable(1), w2.viewport = new gn();
    const x2 = new Lr();
    x2.layers.enable(2), x2.viewport = new gn();
    const C2 = [w2, x2], S2 = new Tl();
    S2.layers.enable(1), S2.layers.enable(2);
    let E2 = null, T2 = null;
    function I2(e7) {
      const t3 = A2.indexOf(e7.inputSource);
      if (-1 === t3) return;
      const i3 = v2[t3];
      void 0 !== i3 && (i3.update(e7.inputSource, e7.frame, l2 || r2), i3.dispatchEvent({ type: e7.type, data: e7.inputSource }));
    }
    function M2() {
      n2.removeEventListener("select", I2), n2.removeEventListener("selectstart", I2), n2.removeEventListener("selectend", I2), n2.removeEventListener("squeeze", I2), n2.removeEventListener("squeezestart", I2), n2.removeEventListener("squeezeend", I2), n2.removeEventListener("end", M2), n2.removeEventListener("inputsourceschange", B2);
      for (let e7 = 0; e7 < v2.length; e7++) {
        const t3 = A2[e7];
        null !== t3 && (A2[e7] = null, v2[e7].disconnect(t3));
      }
      E2 = null, T2 = null, _2.reset(), e6.setRenderTarget(m2), d2 = null, u2 = null, h2 = null, n2 = null, f2 = null, L2.stop(), i2.isPresenting = false, e6.setPixelRatio(y2), e6.setSize(b2.width, b2.height, false), i2.dispatchEvent({ type: "sessionend" });
    }
    function B2(e7) {
      for (let t3 = 0; t3 < e7.removed.length; t3++) {
        const i3 = e7.removed[t3], n3 = A2.indexOf(i3);
        n3 >= 0 && (A2[n3] = null, v2[n3].disconnect(i3));
      }
      for (let t3 = 0; t3 < e7.added.length; t3++) {
        const i3 = e7.added[t3];
        let n3 = A2.indexOf(i3);
        if (-1 === n3) {
          for (let e8 = 0; e8 < v2.length; e8++) {
            if (e8 >= A2.length) {
              A2.push(i3), n3 = e8;
              break;
            }
            if (null === A2[e8]) {
              A2[e8] = i3, n3 = e8;
              break;
            }
          }
          if (-1 === n3) break;
        }
        const o3 = v2[n3];
        o3 && o3.connect(i3);
      }
    }
    this.cameraAutoUpdate = true, this.enabled = false, this.isPresenting = false, this.getController = function(e7) {
      let t3 = v2[e7];
      return void 0 === t3 && (t3 = new Bl(), v2[e7] = t3), t3.getTargetRaySpace();
    }, this.getControllerGrip = function(e7) {
      let t3 = v2[e7];
      return void 0 === t3 && (t3 = new Bl(), v2[e7] = t3), t3.getGripSpace();
    }, this.getHand = function(e7) {
      let t3 = v2[e7];
      return void 0 === t3 && (t3 = new Bl(), v2[e7] = t3), t3.getHandSpace();
    }, this.setFramebufferScaleFactor = function(e7) {
      o2 = e7, true === i2.isPresenting && console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.");
    }, this.setReferenceSpaceType = function(e7) {
      s2 = e7, true === i2.isPresenting && console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.");
    }, this.getReferenceSpace = function() {
      return l2 || r2;
    }, this.setReferenceSpace = function(e7) {
      l2 = e7;
    }, this.getBaseLayer = function() {
      return null !== u2 ? u2 : d2;
    }, this.getBinding = function() {
      return h2;
    }, this.getFrame = function() {
      return p2;
    }, this.getSession = function() {
      return n2;
    }, this.setSession = async function(c3) {
      if (n2 = c3, null !== n2) {
        if (m2 = e6.getRenderTarget(), n2.addEventListener("select", I2), n2.addEventListener("selectstart", I2), n2.addEventListener("selectend", I2), n2.addEventListener("squeeze", I2), n2.addEventListener("squeezestart", I2), n2.addEventListener("squeezeend", I2), n2.addEventListener("end", M2), n2.addEventListener("inputsourceschange", B2), true !== g2.xrCompatible && await t2.makeXRCompatible(), y2 = e6.getPixelRatio(), e6.getSize(b2), void 0 === n2.renderState.layers) {
          const i3 = { antialias: g2.antialias, alpha: true, depth: g2.depth, stencil: g2.stencil, framebufferScaleFactor: o2 };
          d2 = new XRWebGLLayer(n2, t2, i3), n2.updateRenderState({ baseLayer: d2 }), e6.setPixelRatio(1), e6.setSize(d2.framebufferWidth, d2.framebufferHeight, false), f2 = new fn(d2.framebufferWidth, d2.framebufferHeight, { format: vt, type: st, colorSpace: e6.outputColorSpace, stencilBuffer: g2.stencil });
        } else {
          let i3 = null, r3 = null, s3 = null;
          g2.depth && (s3 = g2.stencil ? t2.DEPTH24_STENCIL8 : t2.DEPTH_COMPONENT24, i3 = g2.stencil ? bt : At, r3 = g2.stencil ? mt : ut);
          const a3 = { colorFormat: t2.RGBA8, depthFormat: s3, scaleFactor: o2 };
          h2 = new XRWebGLBinding(n2, t2), u2 = h2.createProjectionLayer(a3), n2.updateRenderState({ layers: [u2] }), e6.setPixelRatio(1), e6.setSize(u2.textureWidth, u2.textureHeight, false), f2 = new fn(u2.textureWidth, u2.textureHeight, { format: vt, type: st, depthTexture: new Ps(u2.textureWidth, u2.textureHeight, r3, void 0, void 0, void 0, void 0, void 0, void 0, i3), stencilBuffer: g2.stencil, colorSpace: e6.outputColorSpace, samples: g2.antialias ? 4 : 0, resolveDepthBuffer: false === u2.ignoreDepthValues });
        }
        f2.isXRRenderTarget = true, this.setFoveation(a2), l2 = null, r2 = await n2.requestReferenceSpace(s2), L2.setContext(n2), L2.start(), i2.isPresenting = true, i2.dispatchEvent({ type: "sessionstart" });
      }
    }, this.getEnvironmentBlendMode = function() {
      if (null !== n2) return n2.environmentBlendMode;
    }, this.getDepthTexture = function() {
      return _2.getDepthTexture();
    };
    const R2 = new yn(), k2 = new yn();
    function P2(e7, t3) {
      null === t3 ? e7.matrixWorld.copy(e7.matrix) : e7.matrixWorld.multiplyMatrices(t3.matrixWorld, e7.matrix), e7.matrixWorldInverse.copy(e7.matrixWorld).invert();
    }
    this.updateCamera = function(e7) {
      if (null === n2) return;
      let t3 = e7.near, i3 = e7.far;
      null !== _2.texture && (_2.depthNear > 0 && (t3 = _2.depthNear), _2.depthFar > 0 && (i3 = _2.depthFar)), S2.near = x2.near = w2.near = t3, S2.far = x2.far = w2.far = i3, E2 === S2.near && T2 === S2.far || (n2.updateRenderState({ depthNear: S2.near, depthFar: S2.far }), E2 = S2.near, T2 = S2.far);
      const o3 = e7.parent, r3 = S2.cameras;
      P2(S2, o3);
      for (let e8 = 0; e8 < r3.length; e8++) P2(r3[e8], o3);
      2 === r3.length ? function(e8, t4, i4) {
        R2.setFromMatrixPosition(t4.matrixWorld), k2.setFromMatrixPosition(i4.matrixWorld);
        const n3 = R2.distanceTo(k2), o4 = t4.projectionMatrix.elements, r4 = i4.projectionMatrix.elements, s3 = o4[14] / (o4[10] - 1), a3 = o4[14] / (o4[10] + 1), l3 = (o4[9] + 1) / o4[5], c3 = (o4[9] - 1) / o4[5], h3 = (o4[8] - 1) / o4[0], u3 = (r4[8] + 1) / r4[0], d3 = s3 * h3, p3 = s3 * u3, _3 = n3 / (-h3 + u3), g3 = _3 * -h3;
        if (t4.matrixWorld.decompose(e8.position, e8.quaternion, e8.scale), e8.translateX(g3), e8.translateZ(_3), e8.matrixWorld.compose(e8.position, e8.quaternion, e8.scale), e8.matrixWorldInverse.copy(e8.matrixWorld).invert(), -1 === o4[10]) e8.projectionMatrix.copy(t4.projectionMatrix), e8.projectionMatrixInverse.copy(t4.projectionMatrixInverse);
        else {
          const t5 = s3 + _3, i5 = a3 + _3, o5 = d3 - g3, r5 = p3 + (n3 - g3), h4 = l3 * a3 / i5 * t5, u4 = c3 * a3 / i5 * t5;
          e8.projectionMatrix.makePerspective(o5, r5, h4, u4, t5, i5), e8.projectionMatrixInverse.copy(e8.projectionMatrix).invert();
        }
      }(S2, w2, x2) : S2.projectionMatrix.copy(w2.projectionMatrix), function(e8, t4, i4) {
        null === i4 ? e8.matrix.copy(t4.matrixWorld) : (e8.matrix.copy(i4.matrixWorld), e8.matrix.invert(), e8.matrix.multiply(t4.matrixWorld));
        e8.matrix.decompose(e8.position, e8.quaternion, e8.scale), e8.updateMatrixWorld(true), e8.projectionMatrix.copy(t4.projectionMatrix), e8.projectionMatrixInverse.copy(t4.projectionMatrixInverse), e8.isPerspectiveCamera && (e8.fov = 2 * Oi * Math.atan(1 / e8.projectionMatrix.elements[5]), e8.zoom = 1);
      }(e7, S2, o3);
    }, this.getCamera = function() {
      return S2;
    }, this.getFoveation = function() {
      if (null !== u2 || null !== d2) return a2;
    }, this.setFoveation = function(e7) {
      a2 = e7, null !== u2 && (u2.fixedFoveation = e7), null !== d2 && void 0 !== d2.fixedFoveation && (d2.fixedFoveation = e7);
    }, this.hasDepthSensing = function() {
      return null !== _2.texture;
    }, this.getDepthSensingMesh = function() {
      return _2.getMesh(S2);
    };
    let D2 = null;
    const L2 = new Wr();
    L2.setAnimationLoop(function(t3, o3) {
      if (c2 = o3.getViewerPose(l2 || r2), p2 = o3, null !== c2) {
        const t4 = c2.views;
        null !== d2 && (e6.setRenderTargetFramebuffer(f2, d2.framebuffer), e6.setRenderTarget(f2));
        let i3 = false;
        t4.length !== S2.cameras.length && (S2.cameras.length = 0, i3 = true);
        for (let n3 = 0; n3 < t4.length; n3++) {
          const o5 = t4[n3];
          let r3 = null;
          if (null !== d2) r3 = d2.getViewport(o5);
          else {
            const t5 = h2.getViewSubImage(u2, o5);
            r3 = t5.viewport, 0 === n3 && (e6.setRenderTargetTextures(f2, t5.colorTexture, u2.ignoreDepthValues ? void 0 : t5.depthStencilTexture), e6.setRenderTarget(f2));
          }
          let s3 = C2[n3];
          void 0 === s3 && (s3 = new Lr(), s3.layers.enable(n3), s3.viewport = new gn(), C2[n3] = s3), s3.matrix.fromArray(o5.transform.matrix), s3.matrix.decompose(s3.position, s3.quaternion, s3.scale), s3.projectionMatrix.fromArray(o5.projectionMatrix), s3.projectionMatrixInverse.copy(s3.projectionMatrix).invert(), s3.viewport.set(r3.x, r3.y, r3.width, r3.height), 0 === n3 && (S2.matrix.copy(s3.matrix), S2.matrix.decompose(S2.position, S2.quaternion, S2.scale)), true === i3 && S2.cameras.push(s3);
        }
        const o4 = n2.enabledFeatures;
        if (o4 && o4.includes("depth-sensing")) {
          const i4 = h2.getDepthInformation(t4[0]);
          i4 && i4.isValid && i4.texture && _2.init(e6, i4, n2.renderState);
        }
      }
      for (let e7 = 0; e7 < v2.length; e7++) {
        const t4 = A2[e7], i3 = v2[e7];
        null !== t4 && void 0 !== i3 && i3.update(t4, o3, l2 || r2);
      }
      D2 && D2(t3, o3), o3.detectedPlanes && i2.dispatchEvent({ type: "planesdetected", data: o3 }), p2 = null;
    }), this.setAnimationLoop = function(e7) {
      D2 = e7;
    }, this.dispose = function() {
    };
  }
}
const Pl = new ao(), Dl = new Kn();
function Ll(e6, t2) {
  function i2(e7, t3) {
    true === e7.matrixAutoUpdate && e7.updateMatrix(), t3.value.copy(e7.matrix);
  }
  function n2(e7, n3) {
    e7.opacity.value = n3.opacity, n3.color && e7.diffuse.value.copy(n3.color), n3.emissive && e7.emissive.value.copy(n3.emissive).multiplyScalar(n3.emissiveIntensity), n3.map && (e7.map.value = n3.map, i2(n3.map, e7.mapTransform)), n3.alphaMap && (e7.alphaMap.value = n3.alphaMap, i2(n3.alphaMap, e7.alphaMapTransform)), n3.bumpMap && (e7.bumpMap.value = n3.bumpMap, i2(n3.bumpMap, e7.bumpMapTransform), e7.bumpScale.value = n3.bumpScale, 1 === n3.side && (e7.bumpScale.value *= -1)), n3.normalMap && (e7.normalMap.value = n3.normalMap, i2(n3.normalMap, e7.normalMapTransform), e7.normalScale.value.copy(n3.normalScale), 1 === n3.side && e7.normalScale.value.negate()), n3.displacementMap && (e7.displacementMap.value = n3.displacementMap, i2(n3.displacementMap, e7.displacementMapTransform), e7.displacementScale.value = n3.displacementScale, e7.displacementBias.value = n3.displacementBias), n3.emissiveMap && (e7.emissiveMap.value = n3.emissiveMap, i2(n3.emissiveMap, e7.emissiveMapTransform)), n3.specularMap && (e7.specularMap.value = n3.specularMap, i2(n3.specularMap, e7.specularMapTransform)), n3.alphaTest > 0 && (e7.alphaTest.value = n3.alphaTest);
    const o2 = t2.get(n3), r2 = o2.envMap, s2 = o2.envMapRotation;
    r2 && (e7.envMap.value = r2, Pl.copy(s2), Pl.x *= -1, Pl.y *= -1, Pl.z *= -1, r2.isCubeTexture && false === r2.isRenderTargetTexture && (Pl.y *= -1, Pl.z *= -1), e7.envMapRotation.value.setFromMatrix4(Dl.makeRotationFromEuler(Pl)), e7.flipEnvMap.value = r2.isCubeTexture && false === r2.isRenderTargetTexture ? -1 : 1, e7.reflectivity.value = n3.reflectivity, e7.ior.value = n3.ior, e7.refractionRatio.value = n3.refractionRatio), n3.lightMap && (e7.lightMap.value = n3.lightMap, e7.lightMapIntensity.value = n3.lightMapIntensity, i2(n3.lightMap, e7.lightMapTransform)), n3.aoMap && (e7.aoMap.value = n3.aoMap, e7.aoMapIntensity.value = n3.aoMapIntensity, i2(n3.aoMap, e7.aoMapTransform));
  }
  return { refreshFogUniforms: function(t3, i3) {
    i3.color.getRGB(t3.fogColor.value, Ir(e6)), i3.isFog ? (t3.fogNear.value = i3.near, t3.fogFar.value = i3.far) : i3.isFogExp2 && (t3.fogDensity.value = i3.density);
  }, refreshMaterialUniforms: function(e7, o2, r2, s2, a2) {
    o2.isMeshBasicMaterial || o2.isMeshLambertMaterial ? n2(e7, o2) : o2.isMeshToonMaterial ? (n2(e7, o2), function(e8, t3) {
      t3.gradientMap && (e8.gradientMap.value = t3.gradientMap);
    }(e7, o2)) : o2.isMeshPhongMaterial ? (n2(e7, o2), function(e8, t3) {
      e8.specular.value.copy(t3.specular), e8.shininess.value = Math.max(t3.shininess, 1e-4);
    }(e7, o2)) : o2.isMeshStandardMaterial ? (n2(e7, o2), function(e8, t3) {
      e8.metalness.value = t3.metalness, t3.metalnessMap && (e8.metalnessMap.value = t3.metalnessMap, i2(t3.metalnessMap, e8.metalnessMapTransform));
      e8.roughness.value = t3.roughness, t3.roughnessMap && (e8.roughnessMap.value = t3.roughnessMap, i2(t3.roughnessMap, e8.roughnessMapTransform));
      t3.envMap && (e8.envMapIntensity.value = t3.envMapIntensity);
    }(e7, o2), o2.isMeshPhysicalMaterial && function(e8, t3, n3) {
      e8.ior.value = t3.ior, t3.sheen > 0 && (e8.sheenColor.value.copy(t3.sheenColor).multiplyScalar(t3.sheen), e8.sheenRoughness.value = t3.sheenRoughness, t3.sheenColorMap && (e8.sheenColorMap.value = t3.sheenColorMap, i2(t3.sheenColorMap, e8.sheenColorMapTransform)), t3.sheenRoughnessMap && (e8.sheenRoughnessMap.value = t3.sheenRoughnessMap, i2(t3.sheenRoughnessMap, e8.sheenRoughnessMapTransform)));
      t3.clearcoat > 0 && (e8.clearcoat.value = t3.clearcoat, e8.clearcoatRoughness.value = t3.clearcoatRoughness, t3.clearcoatMap && (e8.clearcoatMap.value = t3.clearcoatMap, i2(t3.clearcoatMap, e8.clearcoatMapTransform)), t3.clearcoatRoughnessMap && (e8.clearcoatRoughnessMap.value = t3.clearcoatRoughnessMap, i2(t3.clearcoatRoughnessMap, e8.clearcoatRoughnessMapTransform)), t3.clearcoatNormalMap && (e8.clearcoatNormalMap.value = t3.clearcoatNormalMap, i2(t3.clearcoatNormalMap, e8.clearcoatNormalMapTransform), e8.clearcoatNormalScale.value.copy(t3.clearcoatNormalScale), 1 === t3.side && e8.clearcoatNormalScale.value.negate()));
      t3.dispersion > 0 && (e8.dispersion.value = t3.dispersion);
      t3.iridescence > 0 && (e8.iridescence.value = t3.iridescence, e8.iridescenceIOR.value = t3.iridescenceIOR, e8.iridescenceThicknessMinimum.value = t3.iridescenceThicknessRange[0], e8.iridescenceThicknessMaximum.value = t3.iridescenceThicknessRange[1], t3.iridescenceMap && (e8.iridescenceMap.value = t3.iridescenceMap, i2(t3.iridescenceMap, e8.iridescenceMapTransform)), t3.iridescenceThicknessMap && (e8.iridescenceThicknessMap.value = t3.iridescenceThicknessMap, i2(t3.iridescenceThicknessMap, e8.iridescenceThicknessMapTransform)));
      t3.transmission > 0 && (e8.transmission.value = t3.transmission, e8.transmissionSamplerMap.value = n3.texture, e8.transmissionSamplerSize.value.set(n3.width, n3.height), t3.transmissionMap && (e8.transmissionMap.value = t3.transmissionMap, i2(t3.transmissionMap, e8.transmissionMapTransform)), e8.thickness.value = t3.thickness, t3.thicknessMap && (e8.thicknessMap.value = t3.thicknessMap, i2(t3.thicknessMap, e8.thicknessMapTransform)), e8.attenuationDistance.value = t3.attenuationDistance, e8.attenuationColor.value.copy(t3.attenuationColor));
      t3.anisotropy > 0 && (e8.anisotropyVector.value.set(t3.anisotropy * Math.cos(t3.anisotropyRotation), t3.anisotropy * Math.sin(t3.anisotropyRotation)), t3.anisotropyMap && (e8.anisotropyMap.value = t3.anisotropyMap, i2(t3.anisotropyMap, e8.anisotropyMapTransform)));
      e8.specularIntensity.value = t3.specularIntensity, e8.specularColor.value.copy(t3.specularColor), t3.specularColorMap && (e8.specularColorMap.value = t3.specularColorMap, i2(t3.specularColorMap, e8.specularColorMapTransform));
      t3.specularIntensityMap && (e8.specularIntensityMap.value = t3.specularIntensityMap, i2(t3.specularIntensityMap, e8.specularIntensityMapTransform));
    }(e7, o2, a2)) : o2.isMeshMatcapMaterial ? (n2(e7, o2), function(e8, t3) {
      t3.matcap && (e8.matcap.value = t3.matcap);
    }(e7, o2)) : o2.isMeshDepthMaterial ? n2(e7, o2) : o2.isMeshDistanceMaterial ? (n2(e7, o2), function(e8, i3) {
      const n3 = t2.get(i3).light;
      e8.referencePosition.value.setFromMatrixPosition(n3.matrixWorld), e8.nearDistance.value = n3.shadow.camera.near, e8.farDistance.value = n3.shadow.camera.far;
    }(e7, o2)) : o2.isMeshNormalMaterial ? n2(e7, o2) : o2.isLineBasicMaterial ? (function(e8, t3) {
      e8.diffuse.value.copy(t3.color), e8.opacity.value = t3.opacity, t3.map && (e8.map.value = t3.map, i2(t3.map, e8.mapTransform));
    }(e7, o2), o2.isLineDashedMaterial && function(e8, t3) {
      e8.dashSize.value = t3.dashSize, e8.totalSize.value = t3.dashSize + t3.gapSize, e8.scale.value = t3.scale;
    }(e7, o2)) : o2.isPointsMaterial ? function(e8, t3, n3, o3) {
      e8.diffuse.value.copy(t3.color), e8.opacity.value = t3.opacity, e8.size.value = t3.size * n3, e8.scale.value = 0.5 * o3, t3.map && (e8.map.value = t3.map, i2(t3.map, e8.uvTransform));
      t3.alphaMap && (e8.alphaMap.value = t3.alphaMap, i2(t3.alphaMap, e8.alphaMapTransform));
      t3.alphaTest > 0 && (e8.alphaTest.value = t3.alphaTest);
    }(e7, o2, r2, s2) : o2.isSpriteMaterial ? function(e8, t3) {
      e8.diffuse.value.copy(t3.color), e8.opacity.value = t3.opacity, e8.rotation.value = t3.rotation, t3.map && (e8.map.value = t3.map, i2(t3.map, e8.mapTransform));
      t3.alphaMap && (e8.alphaMap.value = t3.alphaMap, i2(t3.alphaMap, e8.alphaMapTransform));
      t3.alphaTest > 0 && (e8.alphaTest.value = t3.alphaTest);
    }(e7, o2) : o2.isShadowMaterial ? (e7.color.value.copy(o2.color), e7.opacity.value = o2.opacity) : o2.isShaderMaterial && (o2.uniformsNeedUpdate = false);
  } };
}
function Fl(e6, t2, i2, n2) {
  let o2 = {}, r2 = {}, s2 = [];
  const a2 = e6.getParameter(e6.MAX_UNIFORM_BUFFER_BINDINGS);
  function l2(e7, t3, i3, n3) {
    const o3 = e7.value, r3 = t3 + "_" + i3;
    if (void 0 === n3[r3]) return n3[r3] = "number" == typeof o3 || "boolean" == typeof o3 ? o3 : o3.clone(), true;
    {
      const e8 = n3[r3];
      if ("number" == typeof o3 || "boolean" == typeof o3) {
        if (e8 !== o3) return n3[r3] = o3, true;
      } else if (false === e8.equals(o3)) return e8.copy(o3), true;
    }
    return false;
  }
  function c2(e7) {
    const t3 = { boundary: 0, storage: 0 };
    return "number" == typeof e7 || "boolean" == typeof e7 ? (t3.boundary = 4, t3.storage = 4) : e7.isVector2 ? (t3.boundary = 8, t3.storage = 8) : e7.isVector3 || e7.isColor ? (t3.boundary = 16, t3.storage = 12) : e7.isVector4 ? (t3.boundary = 16, t3.storage = 16) : e7.isMatrix3 ? (t3.boundary = 48, t3.storage = 48) : e7.isMatrix4 ? (t3.boundary = 64, t3.storage = 64) : e7.isTexture ? console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.") : console.warn("THREE.WebGLRenderer: Unsupported uniform value type.", e7), t3;
  }
  function h2(t3) {
    const i3 = t3.target;
    i3.removeEventListener("dispose", h2);
    const n3 = s2.indexOf(i3.__bindingPointIndex);
    s2.splice(n3, 1), e6.deleteBuffer(o2[i3.id]), delete o2[i3.id], delete r2[i3.id];
  }
  return { bind: function(e7, t3) {
    const i3 = t3.program;
    n2.uniformBlockBinding(e7, i3);
  }, update: function(i3, u2) {
    let d2 = o2[i3.id];
    void 0 === d2 && (!function(e7) {
      const t3 = e7.uniforms;
      let i4 = 0;
      const n3 = 16;
      for (let e8 = 0, o4 = t3.length; e8 < o4; e8++) {
        const o5 = Array.isArray(t3[e8]) ? t3[e8] : [t3[e8]];
        for (let e9 = 0, t4 = o5.length; e9 < t4; e9++) {
          const t5 = o5[e9], r3 = Array.isArray(t5.value) ? t5.value : [t5.value];
          for (let e10 = 0, o6 = r3.length; e10 < o6; e10++) {
            const o7 = c2(r3[e10]), s3 = i4 % n3, a3 = s3 % o7.boundary, l3 = s3 + a3;
            i4 += a3, 0 !== l3 && n3 - l3 < o7.storage && (i4 += n3 - l3), t5.__data = new Float32Array(o7.storage / Float32Array.BYTES_PER_ELEMENT), t5.__offset = i4, i4 += o7.storage;
          }
        }
      }
      const o3 = i4 % n3;
      o3 > 0 && (i4 += n3 - o3);
      e7.__size = i4, e7.__cache = {};
    }(i3), d2 = function(t3) {
      const i4 = function() {
        for (let e7 = 0; e7 < a2; e7++) if (-1 === s2.indexOf(e7)) return s2.push(e7), e7;
        return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."), 0;
      }();
      t3.__bindingPointIndex = i4;
      const n3 = e6.createBuffer(), o3 = t3.__size, r3 = t3.usage;
      return e6.bindBuffer(e6.UNIFORM_BUFFER, n3), e6.bufferData(e6.UNIFORM_BUFFER, o3, r3), e6.bindBuffer(e6.UNIFORM_BUFFER, null), e6.bindBufferBase(e6.UNIFORM_BUFFER, i4, n3), n3;
    }(i3), o2[i3.id] = d2, i3.addEventListener("dispose", h2));
    const p2 = u2.program;
    n2.updateUBOMapping(i3, p2);
    const _2 = t2.render.frame;
    r2[i3.id] !== _2 && (!function(t3) {
      const i4 = o2[t3.id], n3 = t3.uniforms, r3 = t3.__cache;
      e6.bindBuffer(e6.UNIFORM_BUFFER, i4);
      for (let t4 = 0, i5 = n3.length; t4 < i5; t4++) {
        const i6 = Array.isArray(n3[t4]) ? n3[t4] : [n3[t4]];
        for (let n4 = 0, o3 = i6.length; n4 < o3; n4++) {
          const o4 = i6[n4];
          if (true === l2(o4, t4, n4, r3)) {
            const t5 = o4.__offset, i7 = Array.isArray(o4.value) ? o4.value : [o4.value];
            let n5 = 0;
            for (let r4 = 0; r4 < i7.length; r4++) {
              const s3 = i7[r4], a3 = c2(s3);
              "number" == typeof s3 || "boolean" == typeof s3 ? (o4.__data[0] = s3, e6.bufferSubData(e6.UNIFORM_BUFFER, t5 + n5, o4.__data)) : s3.isMatrix3 ? (o4.__data[0] = s3.elements[0], o4.__data[1] = s3.elements[1], o4.__data[2] = s3.elements[2], o4.__data[3] = 0, o4.__data[4] = s3.elements[3], o4.__data[5] = s3.elements[4], o4.__data[6] = s3.elements[5], o4.__data[7] = 0, o4.__data[8] = s3.elements[6], o4.__data[9] = s3.elements[7], o4.__data[10] = s3.elements[8], o4.__data[11] = 0) : (s3.toArray(o4.__data, n5), n5 += a3.storage / Float32Array.BYTES_PER_ELEMENT);
            }
            e6.bufferSubData(e6.UNIFORM_BUFFER, t5, o4.__data);
          }
        }
      }
      e6.bindBuffer(e6.UNIFORM_BUFFER, null);
    }(i3), r2[i3.id] = _2);
  }, dispose: function() {
    for (const t3 in o2) e6.deleteBuffer(o2[t3]);
    s2 = [], o2 = {}, r2 = {};
  } };
}
class Nl {
  constructor(e6 = {}) {
    const { canvas: t2 = Ki(), context: i2 = null, depth: n2 = true, stencil: o2 = false, alpha: r2 = false, antialias: s2 = false, premultipliedAlpha: a2 = true, preserveDrawingBuffer: l2 = false, powerPreference: c2 = "default", failIfMajorPerformanceCaveat: h2 = false } = e6;
    let u2;
    if (this.isWebGLRenderer = true, null !== i2) {
      if ("undefined" != typeof WebGLRenderingContext && i2 instanceof WebGLRenderingContext) throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");
      u2 = i2.getContextAttributes().alpha;
    } else u2 = r2;
    const d2 = new Uint32Array(4), p2 = new Int32Array(4);
    let _2 = null, g2 = null;
    const m2 = [], f2 = [];
    this.domElement = t2, this.debug = { checkShaderErrors: true, onShaderError: null }, this.autoClear = true, this.autoClearColor = true, this.autoClearDepth = true, this.autoClearStencil = true, this.sortObjects = true, this.clippingPlanes = [], this.localClippingEnabled = false, this._outputColorSpace = pi, this.toneMapping = 0, this.toneMappingExposure = 1;
    const v2 = this;
    let A2 = false, b2 = 0, y2 = 0, w2 = null, x2 = -1, C2 = null;
    const S2 = new gn(), E2 = new gn();
    let T2 = null;
    const I2 = new Go(0);
    let M2 = 0, B2 = t2.width, R2 = t2.height, k2 = 1, P2 = null, D2 = null;
    const L2 = new gn(0, 0, B2, R2), F2 = new gn(0, 0, B2, R2);
    let N2 = false;
    const O2 = new $r();
    let U2 = false, z2 = false;
    const H2 = new Kn(), Q2 = new Kn(), V2 = new yn(), G2 = new gn(), q2 = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };
    let $2 = false;
    function W2() {
      return null === w2 ? k2 : 1;
    }
    let j2, X2, Y2, K2, Z2, J2, ee2, te2, ie2, ne2, oe2, re2, se2, ae2, le2, ce2, he2, ue2, de2, pe2, _e2, me2, fe2, ve2, Ae2 = i2;
    function be2(e7, i3) {
      return t2.getContext(e7, i3);
    }
    try {
      const e7 = { alpha: true, depth: n2, stencil: o2, antialias: s2, premultipliedAlpha: a2, preserveDrawingBuffer: l2, powerPreference: c2, failIfMajorPerformanceCaveat: h2 };
      if ("setAttribute" in t2 && t2.setAttribute("data-engine", `three.js r${ge}`), t2.addEventListener("webglcontextlost", xe2, false), t2.addEventListener("webglcontextrestored", Ce2, false), t2.addEventListener("webglcontextcreationerror", Se2, false), null === Ae2) {
        const t3 = "webgl2";
        if (Ae2 = be2(t3, e7), null === Ae2) throw be2(t3) ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
      }
    } catch (e7) {
      throw console.error("THREE.WebGLRenderer: " + e7.message), e7;
    }
    function ye2() {
      j2 = new Ts(Ae2), j2.init(), me2 = new El(Ae2, j2), X2 = new rs(Ae2, j2, e6, me2), Y2 = new xl(Ae2), X2.reverseDepthBuffer && Y2.buffers.depth.setReversed(true), K2 = new Bs(Ae2), Z2 = new ll(), J2 = new Sl(Ae2, j2, Y2, Z2, X2, me2, K2), ee2 = new as(v2), te2 = new Es(v2), ie2 = new jr(Ae2), fe2 = new ns(Ae2, ie2), ne2 = new Is(Ae2, ie2, K2, fe2), oe2 = new ks(Ae2, ne2, ie2, K2), de2 = new Rs(Ae2, X2, J2), ce2 = new ss(Z2), re2 = new al(v2, ee2, te2, j2, X2, fe2, ce2), se2 = new Ll(v2, Z2), ae2 = new dl(), le2 = new vl(j2), ue2 = new is(v2, ee2, te2, Y2, oe2, u2, a2), he2 = new yl(v2, oe2, X2), ve2 = new Fl(Ae2, K2, X2, Y2), pe2 = new os(Ae2, j2, K2), _e2 = new Ms(Ae2, j2, K2), K2.programs = re2.programs, v2.capabilities = X2, v2.extensions = j2, v2.properties = Z2, v2.renderLists = ae2, v2.shadowMap = he2, v2.state = Y2, v2.info = K2;
    }
    ye2();
    const we2 = new kl(v2, Ae2);
    function xe2(e7) {
      e7.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), A2 = true;
    }
    function Ce2() {
      console.log("THREE.WebGLRenderer: Context Restored."), A2 = false;
      const e7 = K2.autoReset, t3 = he2.enabled, i3 = he2.autoUpdate, n3 = he2.needsUpdate, o3 = he2.type;
      ye2(), K2.autoReset = e7, he2.enabled = t3, he2.autoUpdate = i3, he2.needsUpdate = n3, he2.type = o3;
    }
    function Se2(e7) {
      console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ", e7.statusMessage);
    }
    function Ee2(e7) {
      const t3 = e7.target;
      t3.removeEventListener("dispose", Ee2), function(e8) {
        (function(e9) {
          const t4 = Z2.get(e9).programs;
          void 0 !== t4 && (t4.forEach(function(e10) {
            re2.releaseProgram(e10);
          }), e9.isShaderMaterial && re2.releaseShaderCache(e9));
        })(e8), Z2.remove(e8);
      }(t3);
    }
    function Te2(e7, t3, i3) {
      true === e7.transparent && 2 === e7.side && false === e7.forceSinglePass ? (e7.side = 1, e7.needsUpdate = true, Ne2(e7, t3, i3), e7.side = 0, e7.needsUpdate = true, Ne2(e7, t3, i3), e7.side = 2) : Ne2(e7, t3, i3);
    }
    this.xr = we2, this.getContext = function() {
      return Ae2;
    }, this.getContextAttributes = function() {
      return Ae2.getContextAttributes();
    }, this.forceContextLoss = function() {
      const e7 = j2.get("WEBGL_lose_context");
      e7 && e7.loseContext();
    }, this.forceContextRestore = function() {
      const e7 = j2.get("WEBGL_lose_context");
      e7 && e7.restoreContext();
    }, this.getPixelRatio = function() {
      return k2;
    }, this.setPixelRatio = function(e7) {
      void 0 !== e7 && (k2 = e7, this.setSize(B2, R2, false));
    }, this.getSize = function(e7) {
      return e7.set(B2, R2);
    }, this.setSize = function(e7, i3, n3 = true) {
      we2.isPresenting ? console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (B2 = e7, R2 = i3, t2.width = Math.floor(e7 * k2), t2.height = Math.floor(i3 * k2), true === n3 && (t2.style.width = e7 + "px", t2.style.height = i3 + "px"), this.setViewport(0, 0, e7, i3));
    }, this.getDrawingBufferSize = function(e7) {
      return e7.set(B2 * k2, R2 * k2).floor();
    }, this.setDrawingBufferSize = function(e7, i3, n3) {
      B2 = e7, R2 = i3, k2 = n3, t2.width = Math.floor(e7 * n3), t2.height = Math.floor(i3 * n3), this.setViewport(0, 0, e7, i3);
    }, this.getCurrentViewport = function(e7) {
      return e7.copy(S2);
    }, this.getViewport = function(e7) {
      return e7.copy(L2);
    }, this.setViewport = function(e7, t3, i3, n3) {
      e7.isVector4 ? L2.set(e7.x, e7.y, e7.z, e7.w) : L2.set(e7, t3, i3, n3), Y2.viewport(S2.copy(L2).multiplyScalar(k2).round());
    }, this.getScissor = function(e7) {
      return e7.copy(F2);
    }, this.setScissor = function(e7, t3, i3, n3) {
      e7.isVector4 ? F2.set(e7.x, e7.y, e7.z, e7.w) : F2.set(e7, t3, i3, n3), Y2.scissor(E2.copy(F2).multiplyScalar(k2).round());
    }, this.getScissorTest = function() {
      return N2;
    }, this.setScissorTest = function(e7) {
      Y2.setScissorTest(N2 = e7);
    }, this.setOpaqueSort = function(e7) {
      P2 = e7;
    }, this.setTransparentSort = function(e7) {
      D2 = e7;
    }, this.getClearColor = function(e7) {
      return e7.copy(ue2.getClearColor());
    }, this.setClearColor = function() {
      ue2.setClearColor.apply(ue2, arguments);
    }, this.getClearAlpha = function() {
      return ue2.getClearAlpha();
    }, this.setClearAlpha = function() {
      ue2.setClearAlpha.apply(ue2, arguments);
    }, this.clear = function(e7 = true, t3 = true, i3 = true) {
      let n3 = 0;
      if (e7) {
        let e8 = false;
        if (null !== w2) {
          const t4 = w2.texture.format;
          e8 = t4 === St || t4 === Ct || t4 === wt;
        }
        if (e8) {
          const e9 = w2.texture.type, t4 = e9 === st || e9 === ut || e9 === ct || e9 === mt || e9 === _t || e9 === gt, i4 = ue2.getClearColor(), n4 = ue2.getClearAlpha(), o3 = i4.r, r3 = i4.g, s3 = i4.b;
          t4 ? (d2[0] = o3, d2[1] = r3, d2[2] = s3, d2[3] = n4, Ae2.clearBufferuiv(Ae2.COLOR, 0, d2)) : (p2[0] = o3, p2[1] = r3, p2[2] = s3, p2[3] = n4, Ae2.clearBufferiv(Ae2.COLOR, 0, p2));
        } else n3 |= Ae2.COLOR_BUFFER_BIT;
      }
      t3 && (n3 |= Ae2.DEPTH_BUFFER_BIT, Ae2.clearDepth(this.capabilities.reverseDepthBuffer ? 0 : 1)), i3 && (n3 |= Ae2.STENCIL_BUFFER_BIT, this.state.buffers.stencil.setMask(4294967295)), Ae2.clear(n3);
    }, this.clearColor = function() {
      this.clear(true, false, false);
    }, this.clearDepth = function() {
      this.clear(false, true, false);
    }, this.clearStencil = function() {
      this.clear(false, false, true);
    }, this.dispose = function() {
      t2.removeEventListener("webglcontextlost", xe2, false), t2.removeEventListener("webglcontextrestored", Ce2, false), t2.removeEventListener("webglcontextcreationerror", Se2, false), ae2.dispose(), le2.dispose(), Z2.dispose(), ee2.dispose(), te2.dispose(), oe2.dispose(), fe2.dispose(), ve2.dispose(), re2.dispose(), we2.dispose(), we2.removeEventListener("sessionstart", Me2), we2.removeEventListener("sessionend", Be2), Re2.stop();
    }, this.renderBufferDirect = function(e7, t3, i3, n3, o3, r3) {
      null === t3 && (t3 = q2);
      const s3 = o3.isMesh && o3.matrixWorld.determinant() < 0, a3 = function(e8, t4, i4, n4, o4) {
        true !== t4.isScene && (t4 = q2);
        J2.resetTextureUnits();
        const r4 = t4.fog, s4 = n4.isMeshStandardMaterial ? t4.environment : null, a4 = null === w2 ? v2.outputColorSpace : true === w2.isXRRenderTarget ? w2.texture.colorSpace : _i, l4 = (n4.isMeshStandardMaterial ? te2 : ee2).get(n4.envMap || s4), c4 = true === n4.vertexColors && !!i4.attributes.color && 4 === i4.attributes.color.itemSize, h4 = !!i4.attributes.tangent && (!!n4.normalMap || n4.anisotropy > 0), u4 = !!i4.morphAttributes.position, d4 = !!i4.morphAttributes.normal, p4 = !!i4.morphAttributes.color;
        let _4 = 0;
        n4.toneMapped && (null !== w2 && true !== w2.isXRRenderTarget || (_4 = v2.toneMapping));
        const m4 = i4.morphAttributes.position || i4.morphAttributes.normal || i4.morphAttributes.color, f4 = void 0 !== m4 ? m4.length : 0, A3 = Z2.get(n4), b3 = g2.state.lights;
        if (true === U2 && (true === z2 || e8 !== C2)) {
          const t5 = e8 === C2 && n4.id === x2;
          ce2.setState(n4, e8, t5);
        }
        let y3 = false;
        n4.version === A3.__version ? A3.needsLights && A3.lightsStateVersion !== b3.state.version || A3.outputColorSpace !== a4 || o4.isBatchedMesh && false === A3.batching ? y3 = true : o4.isBatchedMesh || true !== A3.batching ? o4.isBatchedMesh && true === A3.batchingColor && null === o4.colorTexture || o4.isBatchedMesh && false === A3.batchingColor && null !== o4.colorTexture || o4.isInstancedMesh && false === A3.instancing ? y3 = true : o4.isInstancedMesh || true !== A3.instancing ? o4.isSkinnedMesh && false === A3.skinning ? y3 = true : o4.isSkinnedMesh || true !== A3.skinning ? o4.isInstancedMesh && true === A3.instancingColor && null === o4.instanceColor || o4.isInstancedMesh && false === A3.instancingColor && null !== o4.instanceColor || o4.isInstancedMesh && true === A3.instancingMorph && null === o4.morphTexture || o4.isInstancedMesh && false === A3.instancingMorph && null !== o4.morphTexture || A3.envMap !== l4 || true === n4.fog && A3.fog !== r4 ? y3 = true : void 0 === A3.numClippingPlanes || A3.numClippingPlanes === ce2.numPlanes && A3.numIntersection === ce2.numIntersection ? (A3.vertexAlphas !== c4 || A3.vertexTangents !== h4 || A3.morphTargets !== u4 || A3.morphNormals !== d4 || A3.morphColors !== p4 || A3.toneMapping !== _4 || A3.morphTargetsCount !== f4) && (y3 = true) : y3 = true : y3 = true : y3 = true : y3 = true : (y3 = true, A3.__version = n4.version);
        let S3 = A3.currentProgram;
        true === y3 && (S3 = Ne2(n4, t4, o4));
        let E3 = false, T3 = false, I3 = false;
        const M3 = S3.getUniforms(), B3 = A3.uniforms;
        Y2.useProgram(S3.program) && (E3 = true, T3 = true, I3 = true);
        n4.id !== x2 && (x2 = n4.id, T3 = true);
        if (E3 || C2 !== e8) {
          X2.reverseDepthBuffer ? (H2.copy(e8.projectionMatrix), function(e9) {
            const t6 = e9.elements;
            t6[2] = 0.5 * t6[2] + 0.5 * t6[3], t6[6] = 0.5 * t6[6] + 0.5 * t6[7], t6[10] = 0.5 * t6[10] + 0.5 * t6[11], t6[14] = 0.5 * t6[14] + 0.5 * t6[15];
          }(H2), function(e9) {
            const t6 = e9.elements;
            -1 === t6[11] ? (t6[10] = -t6[10] - 1, t6[14] = -t6[14]) : (t6[10] = -t6[10], t6[14] = 1 - t6[14]);
          }(H2), M3.setValue(Ae2, "projectionMatrix", H2)) : M3.setValue(Ae2, "projectionMatrix", e8.projectionMatrix), M3.setValue(Ae2, "viewMatrix", e8.matrixWorldInverse);
          const t5 = M3.map.cameraPosition;
          void 0 !== t5 && t5.setValue(Ae2, V2.setFromMatrixPosition(e8.matrixWorld)), X2.logarithmicDepthBuffer && M3.setValue(Ae2, "logDepthBufFC", 2 / (Math.log(e8.far + 1) / Math.LN2)), (n4.isMeshPhongMaterial || n4.isMeshToonMaterial || n4.isMeshLambertMaterial || n4.isMeshBasicMaterial || n4.isMeshStandardMaterial || n4.isShaderMaterial) && M3.setValue(Ae2, "isOrthographic", true === e8.isOrthographicCamera), C2 !== e8 && (C2 = e8, T3 = true, I3 = true);
        }
        if (o4.isSkinnedMesh) {
          M3.setOptional(Ae2, o4, "bindMatrix"), M3.setOptional(Ae2, o4, "bindMatrixInverse");
          const e9 = o4.skeleton;
          e9 && (null === e9.boneTexture && e9.computeBoneTexture(), M3.setValue(Ae2, "boneTexture", e9.boneTexture, J2));
        }
        o4.isBatchedMesh && (M3.setOptional(Ae2, o4, "batchingTexture"), M3.setValue(Ae2, "batchingTexture", o4._matricesTexture, J2), M3.setOptional(Ae2, o4, "batchingIdTexture"), M3.setValue(Ae2, "batchingIdTexture", o4._indirectTexture, J2), M3.setOptional(Ae2, o4, "batchingColorTexture"), null !== o4._colorsTexture && M3.setValue(Ae2, "batchingColorTexture", o4._colorsTexture, J2));
        const P3 = i4.morphAttributes;
        void 0 === P3.position && void 0 === P3.normal && void 0 === P3.color || de2.update(o4, i4, S3);
        (T3 || A3.receiveShadow !== o4.receiveShadow) && (A3.receiveShadow = o4.receiveShadow, M3.setValue(Ae2, "receiveShadow", o4.receiveShadow));
        n4.isMeshGouraudMaterial && null !== n4.envMap && (B3.envMap.value = l4, B3.flipEnvMap.value = l4.isCubeTexture && false === l4.isRenderTargetTexture ? -1 : 1);
        n4.isMeshStandardMaterial && null === n4.envMap && null !== t4.environment && (B3.envMapIntensity.value = t4.environmentIntensity);
        T3 && (M3.setValue(Ae2, "toneMappingExposure", v2.toneMappingExposure), A3.needsLights && (L3 = I3, (D3 = B3).ambientLightColor.needsUpdate = L3, D3.lightProbe.needsUpdate = L3, D3.directionalLights.needsUpdate = L3, D3.directionalLightShadows.needsUpdate = L3, D3.pointLights.needsUpdate = L3, D3.pointLightShadows.needsUpdate = L3, D3.spotLights.needsUpdate = L3, D3.spotLightShadows.needsUpdate = L3, D3.rectAreaLights.needsUpdate = L3, D3.hemisphereLights.needsUpdate = L3), r4 && true === n4.fog && se2.refreshFogUniforms(B3, r4), se2.refreshMaterialUniforms(B3, n4, k2, R2, g2.state.transmissionRenderTarget[e8.id]), Oa.upload(Ae2, Oe2(A3), B3, J2));
        var D3, L3;
        n4.isShaderMaterial && true === n4.uniformsNeedUpdate && (Oa.upload(Ae2, Oe2(A3), B3, J2), n4.uniformsNeedUpdate = false);
        n4.isSpriteMaterial && M3.setValue(Ae2, "center", o4.center);
        if (M3.setValue(Ae2, "modelViewMatrix", o4.modelViewMatrix), M3.setValue(Ae2, "normalMatrix", o4.normalMatrix), M3.setValue(Ae2, "modelMatrix", o4.matrixWorld), n4.isShaderMaterial || n4.isRawShaderMaterial) {
          const e9 = n4.uniformsGroups;
          for (let t5 = 0, i5 = e9.length; t5 < i5; t5++) {
            const i6 = e9[t5];
            ve2.update(i6, S3), ve2.bind(i6, S3);
          }
        }
        return S3;
      }(e7, t3, i3, n3, o3);
      Y2.setMaterial(n3, s3);
      let l3 = i3.index, c3 = 1;
      if (true === n3.wireframe) {
        if (l3 = ne2.getWireframeAttribute(i3), void 0 === l3) return;
        c3 = 2;
      }
      const h3 = i3.drawRange, u3 = i3.attributes.position;
      let d3 = h3.start * c3, p3 = (h3.start + h3.count) * c3;
      null !== r3 && (d3 = Math.max(d3, r3.start * c3), p3 = Math.min(p3, (r3.start + r3.count) * c3)), null !== l3 ? (d3 = Math.max(d3, 0), p3 = Math.min(p3, l3.count)) : null != u3 && (d3 = Math.max(d3, 0), p3 = Math.min(p3, u3.count));
      const _3 = p3 - d3;
      if (_3 < 0 || _3 === 1 / 0) return;
      let m3;
      fe2.setup(o3, n3, a3, i3, l3);
      let f3 = pe2;
      if (null !== l3 && (m3 = ie2.get(l3), f3 = _e2, f3.setIndex(m3)), o3.isMesh) true === n3.wireframe ? (Y2.setLineWidth(n3.wireframeLinewidth * W2()), f3.setMode(Ae2.LINES)) : f3.setMode(Ae2.TRIANGLES);
      else if (o3.isLine) {
        let e8 = n3.linewidth;
        void 0 === e8 && (e8 = 1), Y2.setLineWidth(e8 * W2()), o3.isLineSegments ? f3.setMode(Ae2.LINES) : o3.isLineLoop ? f3.setMode(Ae2.LINE_LOOP) : f3.setMode(Ae2.LINE_STRIP);
      } else o3.isPoints ? f3.setMode(Ae2.POINTS) : o3.isSprite && f3.setMode(Ae2.TRIANGLES);
      if (o3.isBatchedMesh) if (null !== o3._multiDrawInstances) f3.renderMultiDrawInstances(o3._multiDrawStarts, o3._multiDrawCounts, o3._multiDrawCount, o3._multiDrawInstances);
      else if (j2.get("WEBGL_multi_draw")) f3.renderMultiDraw(o3._multiDrawStarts, o3._multiDrawCounts, o3._multiDrawCount);
      else {
        const e8 = o3._multiDrawStarts, t4 = o3._multiDrawCounts, i4 = o3._multiDrawCount, r4 = l3 ? ie2.get(l3).bytesPerElement : 1, s4 = Z2.get(n3).currentProgram.getUniforms();
        for (let n4 = 0; n4 < i4; n4++) s4.setValue(Ae2, "_gl_DrawID", n4), f3.render(e8[n4] / r4, t4[n4]);
      }
      else if (o3.isInstancedMesh) f3.renderInstances(d3, _3, o3.count);
      else if (i3.isInstancedBufferGeometry) {
        const e8 = void 0 !== i3._maxInstanceCount ? i3._maxInstanceCount : 1 / 0, t4 = Math.min(i3.instanceCount, e8);
        f3.renderInstances(d3, _3, t4);
      } else f3.render(d3, _3);
    }, this.compile = function(e7, t3, i3 = null) {
      null === i3 && (i3 = e7), g2 = le2.get(i3), g2.init(t3), f2.push(g2), i3.traverseVisible(function(e8) {
        e8.isLight && e8.layers.test(t3.layers) && (g2.pushLight(e8), e8.castShadow && g2.pushShadow(e8));
      }), e7 !== i3 && e7.traverseVisible(function(e8) {
        e8.isLight && e8.layers.test(t3.layers) && (g2.pushLight(e8), e8.castShadow && g2.pushShadow(e8));
      }), g2.setupLights();
      const n3 = /* @__PURE__ */ new Set();
      return e7.traverse(function(e8) {
        if (!(e8.isMesh || e8.isPoints || e8.isLine || e8.isSprite)) return;
        const t4 = e8.material;
        if (t4) if (Array.isArray(t4)) for (let o3 = 0; o3 < t4.length; o3++) {
          const r3 = t4[o3];
          Te2(r3, i3, e8), n3.add(r3);
        }
        else Te2(t4, i3, e8), n3.add(t4);
      }), f2.pop(), g2 = null, n3;
    }, this.compileAsync = function(e7, t3, i3 = null) {
      const n3 = this.compile(e7, t3, i3);
      return new Promise((t4) => {
        function i4() {
          n3.forEach(function(e8) {
            Z2.get(e8).currentProgram.isReady() && n3.delete(e8);
          }), 0 !== n3.size ? setTimeout(i4, 10) : t4(e7);
        }
        null !== j2.get("KHR_parallel_shader_compile") ? i4() : setTimeout(i4, 10);
      });
    };
    let Ie2 = null;
    function Me2() {
      Re2.stop();
    }
    function Be2() {
      Re2.start();
    }
    const Re2 = new Wr();
    function ke2(e7, t3, i3, n3) {
      if (false === e7.visible) return;
      if (e7.layers.test(t3.layers)) {
        if (e7.isGroup) i3 = e7.renderOrder;
        else if (e7.isLOD) true === e7.autoUpdate && e7.update(t3);
        else if (e7.isLight) g2.pushLight(e7), e7.castShadow && g2.pushShadow(e7);
        else if (e7.isSprite) {
          if (!e7.frustumCulled || O2.intersectsSprite(e7)) {
            n3 && G2.setFromMatrixPosition(e7.matrixWorld).applyMatrix4(Q2);
            const t4 = oe2.update(e7), o4 = e7.material;
            o4.visible && _2.push(e7, t4, o4, i3, G2.z, null);
          }
        } else if ((e7.isMesh || e7.isLine || e7.isPoints) && (!e7.frustumCulled || O2.intersectsObject(e7))) {
          const t4 = oe2.update(e7), o4 = e7.material;
          if (n3 && (void 0 !== e7.boundingSphere ? (null === e7.boundingSphere && e7.computeBoundingSphere(), G2.copy(e7.boundingSphere.center)) : (null === t4.boundingSphere && t4.computeBoundingSphere(), G2.copy(t4.boundingSphere.center)), G2.applyMatrix4(e7.matrixWorld).applyMatrix4(Q2)), Array.isArray(o4)) {
            const n4 = t4.groups;
            for (let r3 = 0, s3 = n4.length; r3 < s3; r3++) {
              const s4 = n4[r3], a3 = o4[s4.materialIndex];
              a3 && a3.visible && _2.push(e7, t4, a3, i3, G2.z, s4);
            }
          } else o4.visible && _2.push(e7, t4, o4, i3, G2.z, null);
        }
      }
      const o3 = e7.children;
      for (let e8 = 0, r3 = o3.length; e8 < r3; e8++) ke2(o3[e8], t3, i3, n3);
    }
    function Pe2(e7, t3, i3, n3) {
      const o3 = e7.opaque, r3 = e7.transmissive, s3 = e7.transparent;
      g2.setupLightsView(i3), true === U2 && ce2.setGlobalState(v2.clippingPlanes, i3), n3 && Y2.viewport(S2.copy(n3)), o3.length > 0 && Le2(o3, t3, i3), r3.length > 0 && Le2(r3, t3, i3), s3.length > 0 && Le2(s3, t3, i3), Y2.buffers.depth.setTest(true), Y2.buffers.depth.setMask(true), Y2.buffers.color.setMask(true), Y2.setPolygonOffset(false);
    }
    function De2(e7, t3, i3, n3) {
      if (null !== (true === i3.isScene ? i3.overrideMaterial : null)) return;
      void 0 === g2.state.transmissionRenderTarget[n3.id] && (g2.state.transmissionRenderTarget[n3.id] = new fn(1, 1, { generateMipmaps: true, type: j2.has("EXT_color_buffer_half_float") || j2.has("EXT_color_buffer_float") ? pt : st, minFilter: rt, samples: 4, stencilBuffer: o2, resolveDepthBuffer: false, resolveStencilBuffer: false, colorSpace: rn.workingColorSpace }));
      const r3 = g2.state.transmissionRenderTarget[n3.id], s3 = n3.viewport || S2;
      r3.setSize(s3.z, s3.w);
      const a3 = v2.getRenderTarget();
      v2.setRenderTarget(r3), v2.getClearColor(I2), M2 = v2.getClearAlpha(), M2 < 1 && v2.setClearColor(16777215, 0.5), v2.clear(), $2 && ue2.render(i3);
      const l3 = v2.toneMapping;
      v2.toneMapping = 0;
      const c3 = n3.viewport;
      if (void 0 !== n3.viewport && (n3.viewport = void 0), g2.setupLightsView(n3), true === U2 && ce2.setGlobalState(v2.clippingPlanes, n3), Le2(e7, i3, n3), J2.updateMultisampleRenderTarget(r3), J2.updateRenderTargetMipmap(r3), false === j2.has("WEBGL_multisampled_render_to_texture")) {
        let e8 = false;
        for (let o3 = 0, r4 = t3.length; o3 < r4; o3++) {
          const r5 = t3[o3], s4 = r5.object, a4 = r5.geometry, l4 = r5.material, c4 = r5.group;
          if (2 === l4.side && s4.layers.test(n3.layers)) {
            const t4 = l4.side;
            l4.side = 1, l4.needsUpdate = true, Fe2(s4, i3, n3, a4, l4, c4), l4.side = t4, l4.needsUpdate = true, e8 = true;
          }
        }
        true === e8 && (J2.updateMultisampleRenderTarget(r3), J2.updateRenderTargetMipmap(r3));
      }
      v2.setRenderTarget(a3), v2.setClearColor(I2, M2), void 0 !== c3 && (n3.viewport = c3), v2.toneMapping = l3;
    }
    function Le2(e7, t3, i3) {
      const n3 = true === t3.isScene ? t3.overrideMaterial : null;
      for (let o3 = 0, r3 = e7.length; o3 < r3; o3++) {
        const r4 = e7[o3], s3 = r4.object, a3 = r4.geometry, l3 = null === n3 ? r4.material : n3, c3 = r4.group;
        s3.layers.test(i3.layers) && Fe2(s3, t3, i3, a3, l3, c3);
      }
    }
    function Fe2(e7, t3, i3, n3, o3, r3) {
      e7.onBeforeRender(v2, t3, i3, n3, o3, r3), e7.modelViewMatrix.multiplyMatrices(i3.matrixWorldInverse, e7.matrixWorld), e7.normalMatrix.getNormalMatrix(e7.modelViewMatrix), o3.onBeforeRender(v2, t3, i3, n3, e7, r3), true === o3.transparent && 2 === o3.side && false === o3.forceSinglePass ? (o3.side = 1, o3.needsUpdate = true, v2.renderBufferDirect(i3, t3, n3, o3, e7, r3), o3.side = 0, o3.needsUpdate = true, v2.renderBufferDirect(i3, t3, n3, o3, e7, r3), o3.side = 2) : v2.renderBufferDirect(i3, t3, n3, o3, e7, r3), e7.onAfterRender(v2, t3, i3, n3, o3, r3);
    }
    function Ne2(e7, t3, i3) {
      true !== t3.isScene && (t3 = q2);
      const n3 = Z2.get(e7), o3 = g2.state.lights, r3 = g2.state.shadowsArray, s3 = o3.state.version, a3 = re2.getParameters(e7, o3.state, r3, t3, i3), l3 = re2.getProgramCacheKey(a3);
      let c3 = n3.programs;
      n3.environment = e7.isMeshStandardMaterial ? t3.environment : null, n3.fog = t3.fog, n3.envMap = (e7.isMeshStandardMaterial ? te2 : ee2).get(e7.envMap || n3.environment), n3.envMapRotation = null !== n3.environment && null === e7.envMap ? t3.environmentRotation : e7.envMapRotation, void 0 === c3 && (e7.addEventListener("dispose", Ee2), c3 = /* @__PURE__ */ new Map(), n3.programs = c3);
      let h3 = c3.get(l3);
      if (void 0 !== h3) {
        if (n3.currentProgram === h3 && n3.lightsStateVersion === s3) return Ue2(e7, a3), h3;
      } else a3.uniforms = re2.getUniforms(e7), e7.onBeforeCompile(a3, v2), h3 = re2.acquireProgram(a3, l3), c3.set(l3, h3), n3.uniforms = a3.uniforms;
      const u3 = n3.uniforms;
      return (e7.isShaderMaterial || e7.isRawShaderMaterial) && true !== e7.clipping || (u3.clippingPlanes = ce2.uniform), Ue2(e7, a3), n3.needsLights = function(e8) {
        return e8.isMeshLambertMaterial || e8.isMeshToonMaterial || e8.isMeshPhongMaterial || e8.isMeshStandardMaterial || e8.isShadowMaterial || e8.isShaderMaterial && true === e8.lights;
      }(e7), n3.lightsStateVersion = s3, n3.needsLights && (u3.ambientLightColor.value = o3.state.ambient, u3.lightProbe.value = o3.state.probe, u3.directionalLights.value = o3.state.directional, u3.directionalLightShadows.value = o3.state.directionalShadow, u3.spotLights.value = o3.state.spot, u3.spotLightShadows.value = o3.state.spotShadow, u3.rectAreaLights.value = o3.state.rectArea, u3.ltc_1.value = o3.state.rectAreaLTC1, u3.ltc_2.value = o3.state.rectAreaLTC2, u3.pointLights.value = o3.state.point, u3.pointLightShadows.value = o3.state.pointShadow, u3.hemisphereLights.value = o3.state.hemi, u3.directionalShadowMap.value = o3.state.directionalShadowMap, u3.directionalShadowMatrix.value = o3.state.directionalShadowMatrix, u3.spotShadowMap.value = o3.state.spotShadowMap, u3.spotLightMatrix.value = o3.state.spotLightMatrix, u3.spotLightMap.value = o3.state.spotLightMap, u3.pointShadowMap.value = o3.state.pointShadowMap, u3.pointShadowMatrix.value = o3.state.pointShadowMatrix), n3.currentProgram = h3, n3.uniformsList = null, h3;
    }
    function Oe2(e7) {
      if (null === e7.uniformsList) {
        const t3 = e7.currentProgram.getUniforms();
        e7.uniformsList = Oa.seqWithValue(t3.seq, e7.uniforms);
      }
      return e7.uniformsList;
    }
    function Ue2(e7, t3) {
      const i3 = Z2.get(e7);
      i3.outputColorSpace = t3.outputColorSpace, i3.batching = t3.batching, i3.batchingColor = t3.batchingColor, i3.instancing = t3.instancing, i3.instancingColor = t3.instancingColor, i3.instancingMorph = t3.instancingMorph, i3.skinning = t3.skinning, i3.morphTargets = t3.morphTargets, i3.morphNormals = t3.morphNormals, i3.morphColors = t3.morphColors, i3.morphTargetsCount = t3.morphTargetsCount, i3.numClippingPlanes = t3.numClippingPlanes, i3.numIntersection = t3.numClipIntersection, i3.vertexAlphas = t3.vertexAlphas, i3.vertexTangents = t3.vertexTangents, i3.toneMapping = t3.toneMapping;
    }
    Re2.setAnimationLoop(function(e7) {
      Ie2 && Ie2(e7);
    }), "undefined" != typeof self && Re2.setContext(self), this.setAnimationLoop = function(e7) {
      Ie2 = e7, we2.setAnimationLoop(e7), null === e7 ? Re2.stop() : Re2.start();
    }, we2.addEventListener("sessionstart", Me2), we2.addEventListener("sessionend", Be2), this.render = function(e7, t3) {
      if (void 0 !== t3 && true !== t3.isCamera) return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
      if (true === A2) return;
      if (true === e7.matrixWorldAutoUpdate && e7.updateMatrixWorld(), null === t3.parent && true === t3.matrixWorldAutoUpdate && t3.updateMatrixWorld(), true === we2.enabled && true === we2.isPresenting && (true === we2.cameraAutoUpdate && we2.updateCamera(t3), t3 = we2.getCamera()), true === e7.isScene && e7.onBeforeRender(v2, e7, t3, w2), g2 = le2.get(e7, f2.length), g2.init(t3), f2.push(g2), Q2.multiplyMatrices(t3.projectionMatrix, t3.matrixWorldInverse), O2.setFromProjectionMatrix(Q2), z2 = this.localClippingEnabled, U2 = ce2.init(this.clippingPlanes, z2), _2 = ae2.get(e7, m2.length), _2.init(), m2.push(_2), true === we2.enabled && true === we2.isPresenting) {
        const e8 = v2.xr.getDepthSensingMesh();
        null !== e8 && ke2(e8, t3, -1 / 0, v2.sortObjects);
      }
      ke2(e7, t3, 0, v2.sortObjects), _2.finish(), true === v2.sortObjects && _2.sort(P2, D2), $2 = false === we2.enabled || false === we2.isPresenting || false === we2.hasDepthSensing(), $2 && ue2.addToRenderList(_2, e7), this.info.render.frame++, true === U2 && ce2.beginShadows();
      const i3 = g2.state.shadowsArray;
      he2.render(i3, e7, t3), true === U2 && ce2.endShadows(), true === this.info.autoReset && this.info.reset();
      const n3 = _2.opaque, o3 = _2.transmissive;
      if (g2.setupLights(), t3.isArrayCamera) {
        const i4 = t3.cameras;
        if (o3.length > 0) for (let t4 = 0, r3 = i4.length; t4 < r3; t4++) {
          De2(n3, o3, e7, i4[t4]);
        }
        $2 && ue2.render(e7);
        for (let t4 = 0, n4 = i4.length; t4 < n4; t4++) {
          const n5 = i4[t4];
          Pe2(_2, e7, n5, n5.viewport);
        }
      } else o3.length > 0 && De2(n3, o3, e7, t3), $2 && ue2.render(e7), Pe2(_2, e7, t3);
      null !== w2 && (J2.updateMultisampleRenderTarget(w2), J2.updateRenderTargetMipmap(w2)), true === e7.isScene && e7.onAfterRender(v2, e7, t3), fe2.resetDefaultState(), x2 = -1, C2 = null, f2.pop(), f2.length > 0 ? (g2 = f2[f2.length - 1], true === U2 && ce2.setGlobalState(v2.clippingPlanes, g2.state.camera)) : g2 = null, m2.pop(), _2 = m2.length > 0 ? m2[m2.length - 1] : null;
    }, this.getActiveCubeFace = function() {
      return b2;
    }, this.getActiveMipmapLevel = function() {
      return y2;
    }, this.getRenderTarget = function() {
      return w2;
    }, this.setRenderTargetTextures = function(e7, t3, i3) {
      Z2.get(e7.texture).__webglTexture = t3, Z2.get(e7.depthTexture).__webglTexture = i3;
      const n3 = Z2.get(e7);
      n3.__hasExternalTextures = true, n3.__autoAllocateDepthBuffer = void 0 === i3, n3.__autoAllocateDepthBuffer || true === j2.has("WEBGL_multisampled_render_to_texture") && (console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"), n3.__useRenderToTexture = false);
    }, this.setRenderTargetFramebuffer = function(e7, t3) {
      const i3 = Z2.get(e7);
      i3.__webglFramebuffer = t3, i3.__useDefaultFramebuffer = void 0 === t3;
    }, this.setRenderTarget = function(e7, t3 = 0, i3 = 0) {
      w2 = e7, b2 = t3, y2 = i3;
      let n3 = true, o3 = null, r3 = false, s3 = false;
      if (e7) {
        const a3 = Z2.get(e7);
        if (void 0 !== a3.__useDefaultFramebuffer) Y2.bindFramebuffer(Ae2.FRAMEBUFFER, null), n3 = false;
        else if (void 0 === a3.__webglFramebuffer) J2.setupRenderTarget(e7);
        else if (a3.__hasExternalTextures) J2.rebindTextures(e7, Z2.get(e7.texture).__webglTexture, Z2.get(e7.depthTexture).__webglTexture);
        else if (e7.depthBuffer) {
          const t4 = e7.depthTexture;
          if (a3.__boundDepthTexture !== t4) {
            if (null !== t4 && Z2.has(t4) && (e7.width !== t4.image.width || e7.height !== t4.image.height)) throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");
            J2.setupDepthRenderbuffer(e7);
          }
        }
        const l3 = e7.texture;
        (l3.isData3DTexture || l3.isDataArrayTexture || l3.isCompressedArrayTexture) && (s3 = true);
        const c3 = Z2.get(e7).__webglFramebuffer;
        e7.isWebGLCubeRenderTarget ? (o3 = Array.isArray(c3[t3]) ? c3[t3][i3] : c3[t3], r3 = true) : o3 = e7.samples > 0 && false === J2.useMultisampledRTT(e7) ? Z2.get(e7).__webglMultisampledFramebuffer : Array.isArray(c3) ? c3[i3] : c3, S2.copy(e7.viewport), E2.copy(e7.scissor), T2 = e7.scissorTest;
      } else S2.copy(L2).multiplyScalar(k2).floor(), E2.copy(F2).multiplyScalar(k2).floor(), T2 = N2;
      if (Y2.bindFramebuffer(Ae2.FRAMEBUFFER, o3) && n3 && Y2.drawBuffers(e7, o3), Y2.viewport(S2), Y2.scissor(E2), Y2.setScissorTest(T2), r3) {
        const n4 = Z2.get(e7.texture);
        Ae2.framebufferTexture2D(Ae2.FRAMEBUFFER, Ae2.COLOR_ATTACHMENT0, Ae2.TEXTURE_CUBE_MAP_POSITIVE_X + t3, n4.__webglTexture, i3);
      } else if (s3) {
        const n4 = Z2.get(e7.texture), o4 = t3 || 0;
        Ae2.framebufferTextureLayer(Ae2.FRAMEBUFFER, Ae2.COLOR_ATTACHMENT0, n4.__webglTexture, i3 || 0, o4);
      }
      x2 = -1;
    }, this.readRenderTargetPixels = function(e7, t3, i3, n3, o3, r3, s3) {
      if (!e7 || !e7.isWebGLRenderTarget) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
      let a3 = Z2.get(e7).__webglFramebuffer;
      if (e7.isWebGLCubeRenderTarget && void 0 !== s3 && (a3 = a3[s3]), a3) {
        Y2.bindFramebuffer(Ae2.FRAMEBUFFER, a3);
        try {
          const s4 = e7.texture, a4 = s4.format, l3 = s4.type;
          if (!X2.textureFormatReadable(a4)) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
          if (!X2.textureTypeReadable(l3)) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
          t3 >= 0 && t3 <= e7.width - n3 && i3 >= 0 && i3 <= e7.height - o3 && Ae2.readPixels(t3, i3, n3, o3, me2.convert(a4), me2.convert(l3), r3);
        } finally {
          const e8 = null !== w2 ? Z2.get(w2).__webglFramebuffer : null;
          Y2.bindFramebuffer(Ae2.FRAMEBUFFER, e8);
        }
      }
    }, this.readRenderTargetPixelsAsync = async function(e7, t3, i3, n3, o3, r3, s3) {
      if (!e7 || !e7.isWebGLRenderTarget) throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
      let a3 = Z2.get(e7).__webglFramebuffer;
      if (e7.isWebGLCubeRenderTarget && void 0 !== s3 && (a3 = a3[s3]), a3) {
        const s4 = e7.texture, l3 = s4.format, c3 = s4.type;
        if (!X2.textureFormatReadable(l3)) throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");
        if (!X2.textureTypeReadable(c3)) throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");
        if (t3 >= 0 && t3 <= e7.width - n3 && i3 >= 0 && i3 <= e7.height - o3) {
          Y2.bindFramebuffer(Ae2.FRAMEBUFFER, a3);
          const e8 = Ae2.createBuffer();
          Ae2.bindBuffer(Ae2.PIXEL_PACK_BUFFER, e8), Ae2.bufferData(Ae2.PIXEL_PACK_BUFFER, r3.byteLength, Ae2.STREAM_READ), Ae2.readPixels(t3, i3, n3, o3, me2.convert(l3), me2.convert(c3), 0);
          const s5 = null !== w2 ? Z2.get(w2).__webglFramebuffer : null;
          Y2.bindFramebuffer(Ae2.FRAMEBUFFER, s5);
          const h3 = Ae2.fenceSync(Ae2.SYNC_GPU_COMMANDS_COMPLETE, 0);
          return Ae2.flush(), await function(e9, t4, i4) {
            return new Promise(function(n4, o4) {
              setTimeout(function r4() {
                switch (e9.clientWaitSync(t4, e9.SYNC_FLUSH_COMMANDS_BIT, 0)) {
                  case e9.WAIT_FAILED:
                    o4();
                    break;
                  case e9.TIMEOUT_EXPIRED:
                    setTimeout(r4, i4);
                    break;
                  default:
                    n4();
                }
              }, i4);
            });
          }(Ae2, h3, 4), Ae2.bindBuffer(Ae2.PIXEL_PACK_BUFFER, e8), Ae2.getBufferSubData(Ae2.PIXEL_PACK_BUFFER, 0, r3), Ae2.deleteBuffer(e8), Ae2.deleteSync(h3), r3;
        }
        throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.");
      }
    }, this.copyFramebufferToTexture = function(e7, t3 = null, i3 = 0) {
      true !== e7.isTexture && (Ji("WebGLRenderer: copyFramebufferToTexture function signature has changed."), t3 = arguments[0] || null, e7 = arguments[1]);
      const n3 = Math.pow(2, -i3), o3 = Math.floor(e7.image.width * n3), r3 = Math.floor(e7.image.height * n3), s3 = null !== t3 ? t3.x : 0, a3 = null !== t3 ? t3.y : 0;
      J2.setTexture2D(e7, 0), Ae2.copyTexSubImage2D(Ae2.TEXTURE_2D, i3, 0, 0, s3, a3, o3, r3), Y2.unbindTexture();
    }, this.copyTextureToTexture = function(e7, t3, i3 = null, n3 = null, o3 = 0) {
      let r3, s3, a3, l3, c3, h3;
      true !== e7.isTexture && (Ji("WebGLRenderer: copyTextureToTexture function signature has changed."), n3 = arguments[0] || null, e7 = arguments[1], t3 = arguments[2], o3 = arguments[3] || 0, i3 = null), null !== i3 ? (r3 = i3.max.x - i3.min.x, s3 = i3.max.y - i3.min.y, a3 = i3.min.x, l3 = i3.min.y) : (r3 = e7.image.width, s3 = e7.image.height, a3 = 0, l3 = 0), null !== n3 ? (c3 = n3.x, h3 = n3.y) : (c3 = 0, h3 = 0);
      const u3 = me2.convert(t3.format), d3 = me2.convert(t3.type);
      J2.setTexture2D(t3, 0), Ae2.pixelStorei(Ae2.UNPACK_FLIP_Y_WEBGL, t3.flipY), Ae2.pixelStorei(Ae2.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t3.premultiplyAlpha), Ae2.pixelStorei(Ae2.UNPACK_ALIGNMENT, t3.unpackAlignment);
      const p3 = Ae2.getParameter(Ae2.UNPACK_ROW_LENGTH), _3 = Ae2.getParameter(Ae2.UNPACK_IMAGE_HEIGHT), g3 = Ae2.getParameter(Ae2.UNPACK_SKIP_PIXELS), m3 = Ae2.getParameter(Ae2.UNPACK_SKIP_ROWS), f3 = Ae2.getParameter(Ae2.UNPACK_SKIP_IMAGES), v3 = e7.isCompressedTexture ? e7.mipmaps[o3] : e7.image;
      Ae2.pixelStorei(Ae2.UNPACK_ROW_LENGTH, v3.width), Ae2.pixelStorei(Ae2.UNPACK_IMAGE_HEIGHT, v3.height), Ae2.pixelStorei(Ae2.UNPACK_SKIP_PIXELS, a3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_ROWS, l3), e7.isDataTexture ? Ae2.texSubImage2D(Ae2.TEXTURE_2D, o3, c3, h3, r3, s3, u3, d3, v3.data) : e7.isCompressedTexture ? Ae2.compressedTexSubImage2D(Ae2.TEXTURE_2D, o3, c3, h3, v3.width, v3.height, u3, v3.data) : Ae2.texSubImage2D(Ae2.TEXTURE_2D, o3, c3, h3, r3, s3, u3, d3, v3), Ae2.pixelStorei(Ae2.UNPACK_ROW_LENGTH, p3), Ae2.pixelStorei(Ae2.UNPACK_IMAGE_HEIGHT, _3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_PIXELS, g3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_ROWS, m3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_IMAGES, f3), 0 === o3 && t3.generateMipmaps && Ae2.generateMipmap(Ae2.TEXTURE_2D), Y2.unbindTexture();
    }, this.copyTextureToTexture3D = function(e7, t3, i3 = null, n3 = null, o3 = 0) {
      let r3, s3, a3, l3, c3, h3, u3, d3, p3;
      true !== e7.isTexture && (Ji("WebGLRenderer: copyTextureToTexture3D function signature has changed."), i3 = arguments[0] || null, n3 = arguments[1] || null, e7 = arguments[2], t3 = arguments[3], o3 = arguments[4] || 0);
      const _3 = e7.isCompressedTexture ? e7.mipmaps[o3] : e7.image;
      null !== i3 ? (r3 = i3.max.x - i3.min.x, s3 = i3.max.y - i3.min.y, a3 = i3.max.z - i3.min.z, l3 = i3.min.x, c3 = i3.min.y, h3 = i3.min.z) : (r3 = _3.width, s3 = _3.height, a3 = _3.depth, l3 = 0, c3 = 0, h3 = 0), null !== n3 ? (u3 = n3.x, d3 = n3.y, p3 = n3.z) : (u3 = 0, d3 = 0, p3 = 0);
      const g3 = me2.convert(t3.format), m3 = me2.convert(t3.type);
      let f3;
      if (t3.isData3DTexture) J2.setTexture3D(t3, 0), f3 = Ae2.TEXTURE_3D;
      else {
        if (!t3.isDataArrayTexture && !t3.isCompressedArrayTexture) return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");
        J2.setTexture2DArray(t3, 0), f3 = Ae2.TEXTURE_2D_ARRAY;
      }
      Ae2.pixelStorei(Ae2.UNPACK_FLIP_Y_WEBGL, t3.flipY), Ae2.pixelStorei(Ae2.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t3.premultiplyAlpha), Ae2.pixelStorei(Ae2.UNPACK_ALIGNMENT, t3.unpackAlignment);
      const v3 = Ae2.getParameter(Ae2.UNPACK_ROW_LENGTH), A3 = Ae2.getParameter(Ae2.UNPACK_IMAGE_HEIGHT), b3 = Ae2.getParameter(Ae2.UNPACK_SKIP_PIXELS), y3 = Ae2.getParameter(Ae2.UNPACK_SKIP_ROWS), w3 = Ae2.getParameter(Ae2.UNPACK_SKIP_IMAGES);
      Ae2.pixelStorei(Ae2.UNPACK_ROW_LENGTH, _3.width), Ae2.pixelStorei(Ae2.UNPACK_IMAGE_HEIGHT, _3.height), Ae2.pixelStorei(Ae2.UNPACK_SKIP_PIXELS, l3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_ROWS, c3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_IMAGES, h3), e7.isDataTexture || e7.isData3DTexture ? Ae2.texSubImage3D(f3, o3, u3, d3, p3, r3, s3, a3, g3, m3, _3.data) : t3.isCompressedArrayTexture ? Ae2.compressedTexSubImage3D(f3, o3, u3, d3, p3, r3, s3, a3, g3, _3.data) : Ae2.texSubImage3D(f3, o3, u3, d3, p3, r3, s3, a3, g3, m3, _3), Ae2.pixelStorei(Ae2.UNPACK_ROW_LENGTH, v3), Ae2.pixelStorei(Ae2.UNPACK_IMAGE_HEIGHT, A3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_PIXELS, b3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_ROWS, y3), Ae2.pixelStorei(Ae2.UNPACK_SKIP_IMAGES, w3), 0 === o3 && t3.generateMipmaps && Ae2.generateMipmap(f3), Y2.unbindTexture();
    }, this.initRenderTarget = function(e7) {
      void 0 === Z2.get(e7).__webglFramebuffer && J2.setupRenderTarget(e7);
    }, this.initTexture = function(e7) {
      e7.isCubeTexture ? J2.setTextureCube(e7, 0) : e7.isData3DTexture ? J2.setTexture3D(e7, 0) : e7.isDataArrayTexture || e7.isCompressedArrayTexture ? J2.setTexture2DArray(e7, 0) : J2.setTexture2D(e7, 0), Y2.unbindTexture();
    }, this.resetState = function() {
      b2 = 0, y2 = 0, w2 = null, Y2.reset(), fe2.reset();
    }, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  get coordinateSystem() {
    return ki;
  }
  get outputColorSpace() {
    return this._outputColorSpace;
  }
  set outputColorSpace(e6) {
    this._outputColorSpace = e6;
    const t2 = this.getContext();
    t2.drawingBufferColorSpace = e6 === gi ? "display-p3" : "srgb", t2.unpackColorSpace = rn.workingColorSpace === mi ? "display-p3" : "srgb";
  }
}
class Ol extends So {
  constructor() {
    super(), this.isScene = true, this.type = "Scene", this.background = null, this.environment = null, this.fog = null, this.backgroundBlurriness = 0, this.backgroundIntensity = 1, this.backgroundRotation = new ao(), this.environmentIntensity = 1, this.environmentRotation = new ao(), this.overrideMaterial = null, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  copy(e6, t2) {
    return super.copy(e6, t2), null !== e6.background && (this.background = e6.background.clone()), null !== e6.environment && (this.environment = e6.environment.clone()), null !== e6.fog && (this.fog = e6.fog.clone()), this.backgroundBlurriness = e6.backgroundBlurriness, this.backgroundIntensity = e6.backgroundIntensity, this.backgroundRotation.copy(e6.backgroundRotation), this.environmentIntensity = e6.environmentIntensity, this.environmentRotation.copy(e6.environmentRotation), null !== e6.overrideMaterial && (this.overrideMaterial = e6.overrideMaterial.clone()), this.matrixAutoUpdate = e6.matrixAutoUpdate, this;
  }
  toJSON(e6) {
    const t2 = super.toJSON(e6);
    return null !== this.fog && (t2.object.fog = this.fog.toJSON()), this.backgroundBlurriness > 0 && (t2.object.backgroundBlurriness = this.backgroundBlurriness), 1 !== this.backgroundIntensity && (t2.object.backgroundIntensity = this.backgroundIntensity), t2.object.backgroundRotation = this.backgroundRotation.toArray(), 1 !== this.environmentIntensity && (t2.object.environmentIntensity = this.environmentIntensity), t2.object.environmentRotation = this.environmentRotation.toArray(), t2;
  }
}
class Ul {
  constructor(e6, t2) {
    this.isInterleavedBuffer = true, this.array = e6, this.stride = t2, this.count = void 0 !== e6 ? e6.length / t2 : 0, this.usage = Bi, this.updateRanges = [], this.version = 0, this.uuid = Ui();
  }
  onUploadCallback() {
  }
  set needsUpdate(e6) {
    true === e6 && this.version++;
  }
  setUsage(e6) {
    return this.usage = e6, this;
  }
  addUpdateRange(e6, t2) {
    this.updateRanges.push({ start: e6, count: t2 });
  }
  clearUpdateRanges() {
    this.updateRanges.length = 0;
  }
  copy(e6) {
    return this.array = new e6.array.constructor(e6.array), this.count = e6.count, this.stride = e6.stride, this.usage = e6.usage, this;
  }
  copyAt(e6, t2, i2) {
    e6 *= this.stride, i2 *= t2.stride;
    for (let n2 = 0, o2 = this.stride; n2 < o2; n2++) this.array[e6 + n2] = t2.array[i2 + n2];
    return this;
  }
  set(e6, t2 = 0) {
    return this.array.set(e6, t2), this;
  }
  clone(e6) {
    void 0 === e6.arrayBuffers && (e6.arrayBuffers = {}), void 0 === this.array.buffer._uuid && (this.array.buffer._uuid = Ui()), void 0 === e6.arrayBuffers[this.array.buffer._uuid] && (e6.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer);
    const t2 = new this.array.constructor(e6.arrayBuffers[this.array.buffer._uuid]), i2 = new this.constructor(t2, this.stride);
    return i2.setUsage(this.usage), i2;
  }
  onUpload(e6) {
    return this.onUploadCallback = e6, this;
  }
  toJSON(e6) {
    return void 0 === e6.arrayBuffers && (e6.arrayBuffers = {}), void 0 === this.array.buffer._uuid && (this.array.buffer._uuid = Ui()), void 0 === e6.arrayBuffers[this.array.buffer._uuid] && (e6.arrayBuffers[this.array.buffer._uuid] = Array.from(new Uint32Array(this.array.buffer))), { uuid: this.uuid, buffer: this.array.buffer._uuid, type: this.array.constructor.name, stride: this.stride };
  }
}
const zl = new yn();
class Hl {
  constructor(e6, t2, i2, n2 = false) {
    this.isInterleavedBufferAttribute = true, this.name = "", this.data = e6, this.itemSize = t2, this.offset = i2, this.normalized = n2;
  }
  get count() {
    return this.data.count;
  }
  get array() {
    return this.data.array;
  }
  set needsUpdate(e6) {
    this.data.needsUpdate = e6;
  }
  applyMatrix4(e6) {
    for (let t2 = 0, i2 = this.data.count; t2 < i2; t2++) zl.fromBufferAttribute(this, t2), zl.applyMatrix4(e6), this.setXYZ(t2, zl.x, zl.y, zl.z);
    return this;
  }
  applyNormalMatrix(e6) {
    for (let t2 = 0, i2 = this.count; t2 < i2; t2++) zl.fromBufferAttribute(this, t2), zl.applyNormalMatrix(e6), this.setXYZ(t2, zl.x, zl.y, zl.z);
    return this;
  }
  transformDirection(e6) {
    for (let t2 = 0, i2 = this.count; t2 < i2; t2++) zl.fromBufferAttribute(this, t2), zl.transformDirection(e6), this.setXYZ(t2, zl.x, zl.y, zl.z);
    return this;
  }
  getComponent(e6, t2) {
    let i2 = this.array[e6 * this.data.stride + this.offset + t2];
    return this.normalized && (i2 = Vi(i2, this.array)), i2;
  }
  setComponent(e6, t2, i2) {
    return this.normalized && (i2 = Gi(i2, this.array)), this.data.array[e6 * this.data.stride + this.offset + t2] = i2, this;
  }
  setX(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.data.array[e6 * this.data.stride + this.offset] = t2, this;
  }
  setY(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.data.array[e6 * this.data.stride + this.offset + 1] = t2, this;
  }
  setZ(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.data.array[e6 * this.data.stride + this.offset + 2] = t2, this;
  }
  setW(e6, t2) {
    return this.normalized && (t2 = Gi(t2, this.array)), this.data.array[e6 * this.data.stride + this.offset + 3] = t2, this;
  }
  getX(e6) {
    let t2 = this.data.array[e6 * this.data.stride + this.offset];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  getY(e6) {
    let t2 = this.data.array[e6 * this.data.stride + this.offset + 1];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  getZ(e6) {
    let t2 = this.data.array[e6 * this.data.stride + this.offset + 2];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  getW(e6) {
    let t2 = this.data.array[e6 * this.data.stride + this.offset + 3];
    return this.normalized && (t2 = Vi(t2, this.array)), t2;
  }
  setXY(e6, t2, i2) {
    return e6 = e6 * this.data.stride + this.offset, this.normalized && (t2 = Gi(t2, this.array), i2 = Gi(i2, this.array)), this.data.array[e6 + 0] = t2, this.data.array[e6 + 1] = i2, this;
  }
  setXYZ(e6, t2, i2, n2) {
    return e6 = e6 * this.data.stride + this.offset, this.normalized && (t2 = Gi(t2, this.array), i2 = Gi(i2, this.array), n2 = Gi(n2, this.array)), this.data.array[e6 + 0] = t2, this.data.array[e6 + 1] = i2, this.data.array[e6 + 2] = n2, this;
  }
  setXYZW(e6, t2, i2, n2, o2) {
    return e6 = e6 * this.data.stride + this.offset, this.normalized && (t2 = Gi(t2, this.array), i2 = Gi(i2, this.array), n2 = Gi(n2, this.array), o2 = Gi(o2, this.array)), this.data.array[e6 + 0] = t2, this.data.array[e6 + 1] = i2, this.data.array[e6 + 2] = n2, this.data.array[e6 + 3] = o2, this;
  }
  clone(e6) {
    if (void 0 === e6) {
      console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");
      const e7 = [];
      for (let t2 = 0; t2 < this.count; t2++) {
        const i2 = t2 * this.data.stride + this.offset;
        for (let t3 = 0; t3 < this.itemSize; t3++) e7.push(this.data.array[i2 + t3]);
      }
      return new er(new this.array.constructor(e7), this.itemSize, this.normalized);
    }
    return void 0 === e6.interleavedBuffers && (e6.interleavedBuffers = {}), void 0 === e6.interleavedBuffers[this.data.uuid] && (e6.interleavedBuffers[this.data.uuid] = this.data.clone(e6)), new Hl(e6.interleavedBuffers[this.data.uuid], this.itemSize, this.offset, this.normalized);
  }
  toJSON(e6) {
    if (void 0 === e6) {
      console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
      const e7 = [];
      for (let t2 = 0; t2 < this.count; t2++) {
        const i2 = t2 * this.data.stride + this.offset;
        for (let t3 = 0; t3 < this.itemSize; t3++) e7.push(this.data.array[i2 + t3]);
      }
      return { itemSize: this.itemSize, type: this.array.constructor.name, array: e7, normalized: this.normalized };
    }
    return void 0 === e6.interleavedBuffers && (e6.interleavedBuffers = {}), void 0 === e6.interleavedBuffers[this.data.uuid] && (e6.interleavedBuffers[this.data.uuid] = this.data.toJSON(e6)), { isInterleavedBufferAttribute: true, itemSize: this.itemSize, data: this.data.uuid, offset: this.offset, normalized: this.normalized };
  }
}
class Ql extends Wo {
  constructor(e6) {
    super(), this.isSpriteMaterial = true, this.type = "SpriteMaterial", this.color = new Go(16777215), this.map = null, this.alphaMap = null, this.rotation = 0, this.sizeAttenuation = true, this.transparent = true, this.fog = true, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.color.copy(e6.color), this.map = e6.map, this.alphaMap = e6.alphaMap, this.rotation = e6.rotation, this.sizeAttenuation = e6.sizeAttenuation, this.fog = e6.fog, this;
  }
}
let Vl;
const Gl = new yn(), ql = new yn(), $l = new yn(), Wl = new $i(), jl = new $i(), Xl = new Kn(), Yl = new yn(), Kl = new yn(), Zl = new yn(), Jl = new $i(), ec = new $i(), tc = new $i();
class ic extends So {
  constructor(e6 = new Ql()) {
    if (super(), this.isSprite = true, this.type = "Sprite", void 0 === Vl) {
      Vl = new ur();
      const e7 = new Float32Array([-0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1, 1, -0.5, 0.5, 0, 0, 1]), t2 = new Ul(e7, 5);
      Vl.setIndex([0, 1, 2, 0, 2, 3]), Vl.setAttribute("position", new Hl(t2, 3, 0, false)), Vl.setAttribute("uv", new Hl(t2, 2, 3, false));
    }
    this.geometry = Vl, this.material = e6, this.center = new $i(0.5, 0.5);
  }
  raycast(e6, t2) {
    null === e6.camera && console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'), ql.setFromMatrixScale(this.matrixWorld), Xl.copy(e6.camera.matrixWorld), this.modelViewMatrix.multiplyMatrices(e6.camera.matrixWorldInverse, this.matrixWorld), $l.setFromMatrixPosition(this.modelViewMatrix), e6.camera.isPerspectiveCamera && false === this.material.sizeAttenuation && ql.multiplyScalar(-$l.z);
    const i2 = this.material.rotation;
    let n2, o2;
    0 !== i2 && (o2 = Math.cos(i2), n2 = Math.sin(i2));
    const r2 = this.center;
    nc(Yl.set(-0.5, -0.5, 0), $l, r2, ql, n2, o2), nc(Kl.set(0.5, -0.5, 0), $l, r2, ql, n2, o2), nc(Zl.set(0.5, 0.5, 0), $l, r2, ql, n2, o2), Jl.set(0, 0), ec.set(1, 0), tc.set(1, 1);
    let s2 = e6.ray.intersectTriangle(Yl, Kl, Zl, false, Gl);
    if (null === s2 && (nc(Kl.set(-0.5, 0.5, 0), $l, r2, ql, n2, o2), ec.set(0, 1), s2 = e6.ray.intersectTriangle(Yl, Zl, Kl, false, Gl), null === s2)) return;
    const a2 = e6.ray.origin.distanceTo(Gl);
    a2 < e6.near || a2 > e6.far || t2.push({ distance: a2, point: Gl.clone(), uv: Uo.getInterpolation(Gl, Yl, Kl, Zl, Jl, ec, tc, new $i()), face: null, object: this });
  }
  copy(e6, t2) {
    return super.copy(e6, t2), void 0 !== e6.center && this.center.copy(e6.center), this.material = e6.material, this;
  }
}
function nc(e6, t2, i2, n2, o2, r2) {
  Wl.subVectors(e6, i2).addScalar(0.5).multiply(n2), void 0 !== o2 ? (jl.x = r2 * Wl.x - o2 * Wl.y, jl.y = o2 * Wl.x + r2 * Wl.y) : jl.copy(Wl), e6.copy(t2), e6.x += jl.x, e6.y += jl.y, e6.applyMatrix4(Xl);
}
const oc = new yn(), rc = new gn(), sc = new gn(), ac = new yn(), lc = new Kn(), cc = new yn(), hc = new Qn(), uc = new Kn(), dc = new Yn();
class pc extends xr {
  constructor(e6, t2) {
    super(e6, t2), this.isSkinnedMesh = true, this.type = "SkinnedMesh", this.bindMode = qe, this.bindMatrix = new Kn(), this.bindMatrixInverse = new Kn(), this.boundingBox = null, this.boundingSphere = null;
  }
  computeBoundingBox() {
    const e6 = this.geometry;
    null === this.boundingBox && (this.boundingBox = new Cn()), this.boundingBox.makeEmpty();
    const t2 = e6.getAttribute("position");
    for (let e7 = 0; e7 < t2.count; e7++) this.getVertexPosition(e7, cc), this.boundingBox.expandByPoint(cc);
  }
  computeBoundingSphere() {
    const e6 = this.geometry;
    null === this.boundingSphere && (this.boundingSphere = new Qn()), this.boundingSphere.makeEmpty();
    const t2 = e6.getAttribute("position");
    for (let e7 = 0; e7 < t2.count; e7++) this.getVertexPosition(e7, cc), this.boundingSphere.expandByPoint(cc);
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.bindMode = e6.bindMode, this.bindMatrix.copy(e6.bindMatrix), this.bindMatrixInverse.copy(e6.bindMatrixInverse), this.skeleton = e6.skeleton, null !== e6.boundingBox && (this.boundingBox = e6.boundingBox.clone()), null !== e6.boundingSphere && (this.boundingSphere = e6.boundingSphere.clone()), this;
  }
  raycast(e6, t2) {
    const i2 = this.material, n2 = this.matrixWorld;
    void 0 !== i2 && (null === this.boundingSphere && this.computeBoundingSphere(), hc.copy(this.boundingSphere), hc.applyMatrix4(n2), false !== e6.ray.intersectsSphere(hc) && (uc.copy(n2).invert(), dc.copy(e6.ray).applyMatrix4(uc), null !== this.boundingBox && false === dc.intersectsBox(this.boundingBox) || this._computeIntersections(e6, t2, dc)));
  }
  getVertexPosition(e6, t2) {
    return super.getVertexPosition(e6, t2), this.applyBoneTransform(e6, t2), t2;
  }
  bind(e6, t2) {
    this.skeleton = e6, void 0 === t2 && (this.updateMatrixWorld(true), this.skeleton.calculateInverses(), t2 = this.matrixWorld), this.bindMatrix.copy(t2), this.bindMatrixInverse.copy(t2).invert();
  }
  pose() {
    this.skeleton.pose();
  }
  normalizeSkinWeights() {
    const e6 = new gn(), t2 = this.geometry.attributes.skinWeight;
    for (let i2 = 0, n2 = t2.count; i2 < n2; i2++) {
      e6.fromBufferAttribute(t2, i2);
      const n3 = 1 / e6.manhattanLength();
      n3 !== 1 / 0 ? e6.multiplyScalar(n3) : e6.set(1, 0, 0, 0), t2.setXYZW(i2, e6.x, e6.y, e6.z, e6.w);
    }
  }
  updateMatrixWorld(e6) {
    super.updateMatrixWorld(e6), this.bindMode === qe ? this.bindMatrixInverse.copy(this.matrixWorld).invert() : "detached" === this.bindMode ? this.bindMatrixInverse.copy(this.bindMatrix).invert() : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode);
  }
  applyBoneTransform(e6, t2) {
    const i2 = this.skeleton, n2 = this.geometry;
    rc.fromBufferAttribute(n2.attributes.skinIndex, e6), sc.fromBufferAttribute(n2.attributes.skinWeight, e6), oc.copy(t2).applyMatrix4(this.bindMatrix), t2.set(0, 0, 0);
    for (let e7 = 0; e7 < 4; e7++) {
      const n3 = sc.getComponent(e7);
      if (0 !== n3) {
        const o2 = rc.getComponent(e7);
        lc.multiplyMatrices(i2.bones[o2].matrixWorld, i2.boneInverses[o2]), t2.addScaledVector(ac.copy(oc).applyMatrix4(lc), n3);
      }
    }
    return t2.applyMatrix4(this.bindMatrixInverse);
  }
}
class _c extends So {
  constructor() {
    super(), this.isBone = true, this.type = "Bone";
  }
}
class gc extends _n {
  constructor(e6 = null, t2 = 1, i2 = 1, n2, o2, r2, s2, a2, l2 = 1003, c2 = 1003, h2, u2) {
    super(null, r2, s2, a2, l2, c2, n2, o2, h2, u2), this.isDataTexture = true, this.image = { data: e6, width: t2, height: i2 }, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
}
const mc = new Kn(), fc = new Kn();
class vc {
  constructor(e6 = [], t2 = []) {
    this.uuid = Ui(), this.bones = e6.slice(0), this.boneInverses = t2, this.boneMatrices = null, this.boneTexture = null, this.init();
  }
  init() {
    const e6 = this.bones, t2 = this.boneInverses;
    if (this.boneMatrices = new Float32Array(16 * e6.length), 0 === t2.length) this.calculateInverses();
    else if (e6.length !== t2.length) {
      console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."), this.boneInverses = [];
      for (let e7 = 0, t3 = this.bones.length; e7 < t3; e7++) this.boneInverses.push(new Kn());
    }
  }
  calculateInverses() {
    this.boneInverses.length = 0;
    for (let e6 = 0, t2 = this.bones.length; e6 < t2; e6++) {
      const t3 = new Kn();
      this.bones[e6] && t3.copy(this.bones[e6].matrixWorld).invert(), this.boneInverses.push(t3);
    }
  }
  pose() {
    for (let e6 = 0, t2 = this.bones.length; e6 < t2; e6++) {
      const t3 = this.bones[e6];
      t3 && t3.matrixWorld.copy(this.boneInverses[e6]).invert();
    }
    for (let e6 = 0, t2 = this.bones.length; e6 < t2; e6++) {
      const t3 = this.bones[e6];
      t3 && (t3.parent && t3.parent.isBone ? (t3.matrix.copy(t3.parent.matrixWorld).invert(), t3.matrix.multiply(t3.matrixWorld)) : t3.matrix.copy(t3.matrixWorld), t3.matrix.decompose(t3.position, t3.quaternion, t3.scale));
    }
  }
  update() {
    const e6 = this.bones, t2 = this.boneInverses, i2 = this.boneMatrices, n2 = this.boneTexture;
    for (let n3 = 0, o2 = e6.length; n3 < o2; n3++) {
      const o3 = e6[n3] ? e6[n3].matrixWorld : fc;
      mc.multiplyMatrices(o3, t2[n3]), mc.toArray(i2, 16 * n3);
    }
    null !== n2 && (n2.needsUpdate = true);
  }
  clone() {
    return new vc(this.bones, this.boneInverses);
  }
  computeBoneTexture() {
    let e6 = Math.sqrt(4 * this.bones.length);
    e6 = 4 * Math.ceil(e6 / 4), e6 = Math.max(e6, 4);
    const t2 = new Float32Array(e6 * e6 * 4);
    t2.set(this.boneMatrices);
    const i2 = new gc(t2, e6, e6, vt, dt);
    return i2.needsUpdate = true, this.boneMatrices = t2, this.boneTexture = i2, this;
  }
  getBoneByName(e6) {
    for (let t2 = 0, i2 = this.bones.length; t2 < i2; t2++) {
      const i3 = this.bones[t2];
      if (i3.name === e6) return i3;
    }
  }
  dispose() {
    null !== this.boneTexture && (this.boneTexture.dispose(), this.boneTexture = null);
  }
  fromJSON(e6, t2) {
    this.uuid = e6.uuid;
    for (let i2 = 0, n2 = e6.bones.length; i2 < n2; i2++) {
      const n3 = e6.bones[i2];
      let o2 = t2[n3];
      void 0 === o2 && (console.warn("THREE.Skeleton: No bone found with UUID:", n3), o2 = new _c()), this.bones.push(o2), this.boneInverses.push(new Kn().fromArray(e6.boneInverses[i2]));
    }
    return this.init(), this;
  }
  toJSON() {
    const e6 = { metadata: { version: 4.6, type: "Skeleton", generator: "Skeleton.toJSON" }, bones: [], boneInverses: [] };
    e6.uuid = this.uuid;
    const t2 = this.bones, i2 = this.boneInverses;
    for (let n2 = 0, o2 = t2.length; n2 < o2; n2++) {
      const o3 = t2[n2];
      e6.bones.push(o3.uuid);
      const r2 = i2[n2];
      e6.boneInverses.push(r2.toArray());
    }
    return e6;
  }
}
class Ac extends er {
  constructor(e6, t2, i2, n2 = 1) {
    super(e6, t2, i2), this.isInstancedBufferAttribute = true, this.meshPerAttribute = n2;
  }
  copy(e6) {
    return super.copy(e6), this.meshPerAttribute = e6.meshPerAttribute, this;
  }
  toJSON() {
    const e6 = super.toJSON();
    return e6.meshPerAttribute = this.meshPerAttribute, e6.isInstancedBufferAttribute = true, e6;
  }
}
const bc = new Kn(), yc = new Kn(), wc = [], xc = new Cn(), Cc = new Kn(), Sc = new xr(), Ec = new Qn();
class Tc extends xr {
  constructor(e6, t2, i2) {
    super(e6, t2), this.isInstancedMesh = true, this.instanceMatrix = new Ac(new Float32Array(16 * i2), 16), this.instanceColor = null, this.morphTexture = null, this.count = i2, this.boundingBox = null, this.boundingSphere = null;
    for (let e7 = 0; e7 < i2; e7++) this.setMatrixAt(e7, Cc);
  }
  computeBoundingBox() {
    const e6 = this.geometry, t2 = this.count;
    null === this.boundingBox && (this.boundingBox = new Cn()), null === e6.boundingBox && e6.computeBoundingBox(), this.boundingBox.makeEmpty();
    for (let i2 = 0; i2 < t2; i2++) this.getMatrixAt(i2, bc), xc.copy(e6.boundingBox).applyMatrix4(bc), this.boundingBox.union(xc);
  }
  computeBoundingSphere() {
    const e6 = this.geometry, t2 = this.count;
    null === this.boundingSphere && (this.boundingSphere = new Qn()), null === e6.boundingSphere && e6.computeBoundingSphere(), this.boundingSphere.makeEmpty();
    for (let i2 = 0; i2 < t2; i2++) this.getMatrixAt(i2, bc), Ec.copy(e6.boundingSphere).applyMatrix4(bc), this.boundingSphere.union(Ec);
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.instanceMatrix.copy(e6.instanceMatrix), null !== e6.morphTexture && (this.morphTexture = e6.morphTexture.clone()), null !== e6.instanceColor && (this.instanceColor = e6.instanceColor.clone()), this.count = e6.count, null !== e6.boundingBox && (this.boundingBox = e6.boundingBox.clone()), null !== e6.boundingSphere && (this.boundingSphere = e6.boundingSphere.clone()), this;
  }
  getColorAt(e6, t2) {
    t2.fromArray(this.instanceColor.array, 3 * e6);
  }
  getMatrixAt(e6, t2) {
    t2.fromArray(this.instanceMatrix.array, 16 * e6);
  }
  getMorphAt(e6, t2) {
    const i2 = t2.morphTargetInfluences, n2 = this.morphTexture.source.data.data, o2 = e6 * (i2.length + 1) + 1;
    for (let e7 = 0; e7 < i2.length; e7++) i2[e7] = n2[o2 + e7];
  }
  raycast(e6, t2) {
    const i2 = this.matrixWorld, n2 = this.count;
    if (Sc.geometry = this.geometry, Sc.material = this.material, void 0 !== Sc.material && (null === this.boundingSphere && this.computeBoundingSphere(), Ec.copy(this.boundingSphere), Ec.applyMatrix4(i2), false !== e6.ray.intersectsSphere(Ec))) for (let o2 = 0; o2 < n2; o2++) {
      this.getMatrixAt(o2, bc), yc.multiplyMatrices(i2, bc), Sc.matrixWorld = yc, Sc.raycast(e6, wc);
      for (let e7 = 0, i3 = wc.length; e7 < i3; e7++) {
        const i4 = wc[e7];
        i4.instanceId = o2, i4.object = this, t2.push(i4);
      }
      wc.length = 0;
    }
  }
  setColorAt(e6, t2) {
    null === this.instanceColor && (this.instanceColor = new Ac(new Float32Array(3 * this.instanceMatrix.count).fill(1), 3)), t2.toArray(this.instanceColor.array, 3 * e6);
  }
  setMatrixAt(e6, t2) {
    t2.toArray(this.instanceMatrix.array, 16 * e6);
  }
  setMorphAt(e6, t2) {
    const i2 = t2.morphTargetInfluences, n2 = i2.length + 1;
    null === this.morphTexture && (this.morphTexture = new gc(new Float32Array(n2 * this.count), n2, this.count, yt, dt));
    const o2 = this.morphTexture.source.data.data;
    let r2 = 0;
    for (let e7 = 0; e7 < i2.length; e7++) r2 += i2[e7];
    const s2 = this.geometry.morphTargetsRelative ? 1 : 1 - r2, a2 = n2 * e6;
    o2[a2] = s2, o2.set(i2, a2 + 1);
  }
  updateMorphTargets() {
  }
  dispose() {
    return this.dispatchEvent({ type: "dispose" }), null !== this.morphTexture && (this.morphTexture.dispose(), this.morphTexture = null), this;
  }
}
class Ic extends Wo {
  constructor(e6) {
    super(), this.isLineBasicMaterial = true, this.type = "LineBasicMaterial", this.color = new Go(16777215), this.map = null, this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.fog = true, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.color.copy(e6.color), this.map = e6.map, this.linewidth = e6.linewidth, this.linecap = e6.linecap, this.linejoin = e6.linejoin, this.fog = e6.fog, this;
  }
}
const Mc = new yn(), Bc = new yn(), Rc = new Kn(), kc = new Yn(), Pc = new Qn(), Dc = new yn(), Lc = new yn();
class Fc extends So {
  constructor(e6 = new ur(), t2 = new Ic()) {
    super(), this.isLine = true, this.type = "Line", this.geometry = e6, this.material = t2, this.updateMorphTargets();
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.material = Array.isArray(e6.material) ? e6.material.slice() : e6.material, this.geometry = e6.geometry, this;
  }
  computeLineDistances() {
    const e6 = this.geometry;
    if (null === e6.index) {
      const t2 = e6.attributes.position, i2 = [0];
      for (let e7 = 1, n2 = t2.count; e7 < n2; e7++) Mc.fromBufferAttribute(t2, e7 - 1), Bc.fromBufferAttribute(t2, e7), i2[e7] = i2[e7 - 1], i2[e7] += Mc.distanceTo(Bc);
      e6.setAttribute("lineDistance", new nr(i2, 1));
    } else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
  raycast(e6, t2) {
    const i2 = this.geometry, n2 = this.matrixWorld, o2 = e6.params.Line.threshold, r2 = i2.drawRange;
    if (null === i2.boundingSphere && i2.computeBoundingSphere(), Pc.copy(i2.boundingSphere), Pc.applyMatrix4(n2), Pc.radius += o2, false === e6.ray.intersectsSphere(Pc)) return;
    Rc.copy(n2).invert(), kc.copy(e6.ray).applyMatrix4(Rc);
    const s2 = o2 / ((this.scale.x + this.scale.y + this.scale.z) / 3), a2 = s2 * s2, l2 = this.isLineSegments ? 2 : 1, c2 = i2.index, h2 = i2.attributes.position;
    if (null !== c2) {
      const i3 = Math.max(0, r2.start), n3 = Math.min(c2.count, r2.start + r2.count);
      for (let o3 = i3, r3 = n3 - 1; o3 < r3; o3 += l2) {
        const i4 = c2.getX(o3), n4 = c2.getX(o3 + 1), r4 = Nc(this, e6, kc, a2, i4, n4);
        r4 && t2.push(r4);
      }
      if (this.isLineLoop) {
        const o3 = c2.getX(n3 - 1), r3 = c2.getX(i3), s3 = Nc(this, e6, kc, a2, o3, r3);
        s3 && t2.push(s3);
      }
    } else {
      const i3 = Math.max(0, r2.start), n3 = Math.min(h2.count, r2.start + r2.count);
      for (let o3 = i3, r3 = n3 - 1; o3 < r3; o3 += l2) {
        const i4 = Nc(this, e6, kc, a2, o3, o3 + 1);
        i4 && t2.push(i4);
      }
      if (this.isLineLoop) {
        const o3 = Nc(this, e6, kc, a2, n3 - 1, i3);
        o3 && t2.push(o3);
      }
    }
  }
  updateMorphTargets() {
    const e6 = this.geometry.morphAttributes, t2 = Object.keys(e6);
    if (t2.length > 0) {
      const i2 = e6[t2[0]];
      if (void 0 !== i2) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let e7 = 0, t3 = i2.length; e7 < t3; e7++) {
          const t4 = i2[e7].name || String(e7);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[t4] = e7;
        }
      }
    }
  }
}
function Nc(e6, t2, i2, n2, o2, r2) {
  const s2 = e6.geometry.attributes.position;
  Mc.fromBufferAttribute(s2, o2), Bc.fromBufferAttribute(s2, r2);
  if (i2.distanceSqToSegment(Mc, Bc, Dc, Lc) > n2) return;
  Dc.applyMatrix4(e6.matrixWorld);
  const a2 = t2.ray.origin.distanceTo(Dc);
  return a2 < t2.near || a2 > t2.far ? void 0 : { distance: a2, point: Lc.clone().applyMatrix4(e6.matrixWorld), index: o2, face: null, faceIndex: null, barycoord: null, object: e6 };
}
const Oc = new yn(), Uc = new yn();
class zc extends Fc {
  constructor(e6, t2) {
    super(e6, t2), this.isLineSegments = true, this.type = "LineSegments";
  }
  computeLineDistances() {
    const e6 = this.geometry;
    if (null === e6.index) {
      const t2 = e6.attributes.position, i2 = [];
      for (let e7 = 0, n2 = t2.count; e7 < n2; e7 += 2) Oc.fromBufferAttribute(t2, e7), Uc.fromBufferAttribute(t2, e7 + 1), i2[e7] = 0 === e7 ? 0 : i2[e7 - 1], i2[e7 + 1] = i2[e7] + Oc.distanceTo(Uc);
      e6.setAttribute("lineDistance", new nr(i2, 1));
    } else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
}
class Hc extends Fc {
  constructor(e6, t2) {
    super(e6, t2), this.isLineLoop = true, this.type = "LineLoop";
  }
}
class Qc extends Wo {
  constructor(e6) {
    super(), this.isPointsMaterial = true, this.type = "PointsMaterial", this.color = new Go(16777215), this.map = null, this.alphaMap = null, this.size = 1, this.sizeAttenuation = true, this.fog = true, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.color.copy(e6.color), this.map = e6.map, this.alphaMap = e6.alphaMap, this.size = e6.size, this.sizeAttenuation = e6.sizeAttenuation, this.fog = e6.fog, this;
  }
}
const Vc = new Kn(), Gc = new Yn(), qc = new Qn(), $c = new yn();
class Wc extends So {
  constructor(e6 = new ur(), t2 = new Qc()) {
    super(), this.isPoints = true, this.type = "Points", this.geometry = e6, this.material = t2, this.updateMorphTargets();
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.material = Array.isArray(e6.material) ? e6.material.slice() : e6.material, this.geometry = e6.geometry, this;
  }
  raycast(e6, t2) {
    const i2 = this.geometry, n2 = this.matrixWorld, o2 = e6.params.Points.threshold, r2 = i2.drawRange;
    if (null === i2.boundingSphere && i2.computeBoundingSphere(), qc.copy(i2.boundingSphere), qc.applyMatrix4(n2), qc.radius += o2, false === e6.ray.intersectsSphere(qc)) return;
    Vc.copy(n2).invert(), Gc.copy(e6.ray).applyMatrix4(Vc);
    const s2 = o2 / ((this.scale.x + this.scale.y + this.scale.z) / 3), a2 = s2 * s2, l2 = i2.index, c2 = i2.attributes.position;
    if (null !== l2) {
      for (let i3 = Math.max(0, r2.start), o3 = Math.min(l2.count, r2.start + r2.count); i3 < o3; i3++) {
        const o4 = l2.getX(i3);
        $c.fromBufferAttribute(c2, o4), jc($c, o4, a2, n2, e6, t2, this);
      }
    } else {
      for (let i3 = Math.max(0, r2.start), o3 = Math.min(c2.count, r2.start + r2.count); i3 < o3; i3++) $c.fromBufferAttribute(c2, i3), jc($c, i3, a2, n2, e6, t2, this);
    }
  }
  updateMorphTargets() {
    const e6 = this.geometry.morphAttributes, t2 = Object.keys(e6);
    if (t2.length > 0) {
      const i2 = e6[t2[0]];
      if (void 0 !== i2) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let e7 = 0, t3 = i2.length; e7 < t3; e7++) {
          const t4 = i2[e7].name || String(e7);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[t4] = e7;
        }
      }
    }
  }
}
function jc(e6, t2, i2, n2, o2, r2, s2) {
  const a2 = Gc.distanceSqToPoint(e6);
  if (a2 < i2) {
    const i3 = new yn();
    Gc.closestPointToPoint(e6, i3), i3.applyMatrix4(n2);
    const l2 = o2.ray.origin.distanceTo(i3);
    if (l2 < o2.near || l2 > o2.far) return;
    r2.push({ distance: l2, distanceToRay: Math.sqrt(a2), point: i3, index: t2, face: null, faceIndex: null, barycoord: null, object: s2 });
  }
}
class Xc extends _n {
  constructor(e6, t2, i2, n2, o2, r2, s2, a2, l2) {
    super(e6, t2, i2, n2, o2, r2, s2, a2, l2), this.isVideoTexture = true, this.minFilter = void 0 !== r2 ? r2 : nt, this.magFilter = void 0 !== o2 ? o2 : nt, this.generateMipmaps = false;
    const c2 = this;
    "requestVideoFrameCallback" in e6 && e6.requestVideoFrameCallback(function t3() {
      c2.needsUpdate = true, e6.requestVideoFrameCallback(t3);
    });
  }
  clone() {
    return new this.constructor(this.image).copy(this);
  }
  update() {
    const e6 = this.image;
    false === "requestVideoFrameCallback" in e6 && e6.readyState >= e6.HAVE_CURRENT_DATA && (this.needsUpdate = true);
  }
}
class Yc extends _n {
  constructor(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2) {
    super(null, r2, s2, a2, l2, c2, n2, o2, h2, u2), this.isCompressedTexture = true, this.image = { width: t2, height: i2 }, this.mipmaps = e6, this.flipY = false, this.generateMipmaps = false;
  }
}
class Kc extends Yc {
  constructor(e6, t2, i2, n2, o2, r2) {
    super(e6, t2, i2, o2, r2), this.isCompressedArrayTexture = true, this.image.depth = n2, this.wrapR = Ze, this.layerUpdates = /* @__PURE__ */ new Set();
  }
  addLayerUpdate(e6) {
    this.layerUpdates.add(e6);
  }
  clearLayerUpdates() {
    this.layerUpdates.clear();
  }
}
class Zc extends Yc {
  constructor(e6, t2, i2) {
    super(void 0, e6[0].width, e6[0].height, t2, i2, We), this.isCompressedCubeTexture = true, this.isCubeTexture = true, this.image = e6;
  }
}
class Jc extends _n {
  constructor(e6, t2, i2, n2, o2, r2, s2, a2, l2) {
    super(e6, t2, i2, n2, o2, r2, s2, a2, l2), this.isCanvasTexture = true, this.needsUpdate = true;
  }
}
class eh extends ur {
  constructor(e6 = 1, t2 = 1, i2 = 1, n2 = 32, o2 = 1, r2 = false, s2 = 0, a2 = 2 * Math.PI) {
    super(), this.type = "CylinderGeometry", this.parameters = { radiusTop: e6, radiusBottom: t2, height: i2, radialSegments: n2, heightSegments: o2, openEnded: r2, thetaStart: s2, thetaLength: a2 };
    const l2 = this;
    n2 = Math.floor(n2), o2 = Math.floor(o2);
    const c2 = [], h2 = [], u2 = [], d2 = [];
    let p2 = 0;
    const _2 = [], g2 = i2 / 2;
    let m2 = 0;
    function f2(i3) {
      const o3 = p2, r3 = new $i(), _3 = new yn();
      let f3 = 0;
      const v2 = true === i3 ? e6 : t2, A2 = true === i3 ? 1 : -1;
      for (let e7 = 1; e7 <= n2; e7++) h2.push(0, g2 * A2, 0), u2.push(0, A2, 0), d2.push(0.5, 0.5), p2++;
      const b2 = p2;
      for (let e7 = 0; e7 <= n2; e7++) {
        const t3 = e7 / n2 * a2 + s2, i4 = Math.cos(t3), o4 = Math.sin(t3);
        _3.x = v2 * o4, _3.y = g2 * A2, _3.z = v2 * i4, h2.push(_3.x, _3.y, _3.z), u2.push(0, A2, 0), r3.x = 0.5 * i4 + 0.5, r3.y = 0.5 * o4 * A2 + 0.5, d2.push(r3.x, r3.y), p2++;
      }
      for (let e7 = 0; e7 < n2; e7++) {
        const t3 = o3 + e7, n3 = b2 + e7;
        true === i3 ? c2.push(n3, n3 + 1, t3) : c2.push(n3 + 1, n3, t3), f3 += 3;
      }
      l2.addGroup(m2, f3, true === i3 ? 1 : 2), m2 += f3;
    }
    !function() {
      const r3 = new yn(), f3 = new yn();
      let v2 = 0;
      const A2 = (t2 - e6) / i2;
      for (let l3 = 0; l3 <= o2; l3++) {
        const c3 = [], m3 = l3 / o2, v3 = m3 * (t2 - e6) + e6;
        for (let e7 = 0; e7 <= n2; e7++) {
          const t3 = e7 / n2, o3 = t3 * a2 + s2, l4 = Math.sin(o3), _3 = Math.cos(o3);
          f3.x = v3 * l4, f3.y = -m3 * i2 + g2, f3.z = v3 * _3, h2.push(f3.x, f3.y, f3.z), r3.set(l4, A2, _3).normalize(), u2.push(r3.x, r3.y, r3.z), d2.push(t3, 1 - m3), c3.push(p2++);
        }
        _2.push(c3);
      }
      for (let i3 = 0; i3 < n2; i3++) for (let n3 = 0; n3 < o2; n3++) {
        const o3 = _2[n3][i3], r4 = _2[n3 + 1][i3], s3 = _2[n3 + 1][i3 + 1], a3 = _2[n3][i3 + 1];
        e6 > 0 && (c2.push(o3, r4, a3), v2 += 3), t2 > 0 && (c2.push(r4, s3, a3), v2 += 3);
      }
      l2.addGroup(m2, v2, 0), m2 += v2;
    }(), false === r2 && (e6 > 0 && f2(true), t2 > 0 && f2(false)), this.setIndex(c2), this.setAttribute("position", new nr(h2, 3)), this.setAttribute("normal", new nr(u2, 3)), this.setAttribute("uv", new nr(d2, 2));
  }
  copy(e6) {
    return super.copy(e6), this.parameters = Object.assign({}, e6.parameters), this;
  }
  static fromJSON(e6) {
    return new eh(e6.radiusTop, e6.radiusBottom, e6.height, e6.radialSegments, e6.heightSegments, e6.openEnded, e6.thetaStart, e6.thetaLength);
  }
}
class th extends ur {
  constructor(e6 = 1, t2 = 32, i2 = 16, n2 = 0, o2 = 2 * Math.PI, r2 = 0, s2 = Math.PI) {
    super(), this.type = "SphereGeometry", this.parameters = { radius: e6, widthSegments: t2, heightSegments: i2, phiStart: n2, phiLength: o2, thetaStart: r2, thetaLength: s2 }, t2 = Math.max(3, Math.floor(t2)), i2 = Math.max(2, Math.floor(i2));
    const a2 = Math.min(r2 + s2, Math.PI);
    let l2 = 0;
    const c2 = [], h2 = new yn(), u2 = new yn(), d2 = [], p2 = [], _2 = [], g2 = [];
    for (let d3 = 0; d3 <= i2; d3++) {
      const m2 = [], f2 = d3 / i2;
      let v2 = 0;
      0 === d3 && 0 === r2 ? v2 = 0.5 / t2 : d3 === i2 && a2 === Math.PI && (v2 = -0.5 / t2);
      for (let i3 = 0; i3 <= t2; i3++) {
        const a3 = i3 / t2;
        h2.x = -e6 * Math.cos(n2 + a3 * o2) * Math.sin(r2 + f2 * s2), h2.y = e6 * Math.cos(r2 + f2 * s2), h2.z = e6 * Math.sin(n2 + a3 * o2) * Math.sin(r2 + f2 * s2), p2.push(h2.x, h2.y, h2.z), u2.copy(h2).normalize(), _2.push(u2.x, u2.y, u2.z), g2.push(a3 + v2, 1 - f2), m2.push(l2++);
      }
      c2.push(m2);
    }
    for (let e7 = 0; e7 < i2; e7++) for (let n3 = 0; n3 < t2; n3++) {
      const t3 = c2[e7][n3 + 1], o3 = c2[e7][n3], s3 = c2[e7 + 1][n3], l3 = c2[e7 + 1][n3 + 1];
      (0 !== e7 || r2 > 0) && d2.push(t3, o3, l3), (e7 !== i2 - 1 || a2 < Math.PI) && d2.push(o3, s3, l3);
    }
    this.setIndex(d2), this.setAttribute("position", new nr(p2, 3)), this.setAttribute("normal", new nr(_2, 3)), this.setAttribute("uv", new nr(g2, 2));
  }
  copy(e6) {
    return super.copy(e6), this.parameters = Object.assign({}, e6.parameters), this;
  }
  static fromJSON(e6) {
    return new th(e6.radius, e6.widthSegments, e6.heightSegments, e6.phiStart, e6.phiLength, e6.thetaStart, e6.thetaLength);
  }
}
class ih extends Wo {
  constructor(e6) {
    super(), this.isMeshStandardMaterial = true, this.defines = { STANDARD: "" }, this.type = "MeshStandardMaterial", this.color = new Go(16777215), this.roughness = 1, this.metalness = 0, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new Go(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = 0, this.normalScale = new $i(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapRotation = new ao(), this.envMapIntensity = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.defines = { STANDARD: "" }, this.color.copy(e6.color), this.roughness = e6.roughness, this.metalness = e6.metalness, this.map = e6.map, this.lightMap = e6.lightMap, this.lightMapIntensity = e6.lightMapIntensity, this.aoMap = e6.aoMap, this.aoMapIntensity = e6.aoMapIntensity, this.emissive.copy(e6.emissive), this.emissiveMap = e6.emissiveMap, this.emissiveIntensity = e6.emissiveIntensity, this.bumpMap = e6.bumpMap, this.bumpScale = e6.bumpScale, this.normalMap = e6.normalMap, this.normalMapType = e6.normalMapType, this.normalScale.copy(e6.normalScale), this.displacementMap = e6.displacementMap, this.displacementScale = e6.displacementScale, this.displacementBias = e6.displacementBias, this.roughnessMap = e6.roughnessMap, this.metalnessMap = e6.metalnessMap, this.alphaMap = e6.alphaMap, this.envMap = e6.envMap, this.envMapRotation.copy(e6.envMapRotation), this.envMapIntensity = e6.envMapIntensity, this.wireframe = e6.wireframe, this.wireframeLinewidth = e6.wireframeLinewidth, this.wireframeLinecap = e6.wireframeLinecap, this.wireframeLinejoin = e6.wireframeLinejoin, this.flatShading = e6.flatShading, this.fog = e6.fog, this;
  }
}
class nh extends ih {
  constructor(e6) {
    super(), this.isMeshPhysicalMaterial = true, this.defines = { STANDARD: "", PHYSICAL: "" }, this.type = "MeshPhysicalMaterial", this.anisotropyRotation = 0, this.anisotropyMap = null, this.clearcoatMap = null, this.clearcoatRoughness = 0, this.clearcoatRoughnessMap = null, this.clearcoatNormalScale = new $i(1, 1), this.clearcoatNormalMap = null, this.ior = 1.5, Object.defineProperty(this, "reflectivity", { get: function() {
      return zi(2.5 * (this.ior - 1) / (this.ior + 1), 0, 1);
    }, set: function(e7) {
      this.ior = (1 + 0.4 * e7) / (1 - 0.4 * e7);
    } }), this.iridescenceMap = null, this.iridescenceIOR = 1.3, this.iridescenceThicknessRange = [100, 400], this.iridescenceThicknessMap = null, this.sheenColor = new Go(0), this.sheenColorMap = null, this.sheenRoughness = 1, this.sheenRoughnessMap = null, this.transmissionMap = null, this.thickness = 0, this.thicknessMap = null, this.attenuationDistance = 1 / 0, this.attenuationColor = new Go(1, 1, 1), this.specularIntensity = 1, this.specularIntensityMap = null, this.specularColor = new Go(1, 1, 1), this.specularColorMap = null, this._anisotropy = 0, this._clearcoat = 0, this._dispersion = 0, this._iridescence = 0, this._sheen = 0, this._transmission = 0, this.setValues(e6);
  }
  get anisotropy() {
    return this._anisotropy;
  }
  set anisotropy(e6) {
    this._anisotropy > 0 != e6 > 0 && this.version++, this._anisotropy = e6;
  }
  get clearcoat() {
    return this._clearcoat;
  }
  set clearcoat(e6) {
    this._clearcoat > 0 != e6 > 0 && this.version++, this._clearcoat = e6;
  }
  get iridescence() {
    return this._iridescence;
  }
  set iridescence(e6) {
    this._iridescence > 0 != e6 > 0 && this.version++, this._iridescence = e6;
  }
  get dispersion() {
    return this._dispersion;
  }
  set dispersion(e6) {
    this._dispersion > 0 != e6 > 0 && this.version++, this._dispersion = e6;
  }
  get sheen() {
    return this._sheen;
  }
  set sheen(e6) {
    this._sheen > 0 != e6 > 0 && this.version++, this._sheen = e6;
  }
  get transmission() {
    return this._transmission;
  }
  set transmission(e6) {
    this._transmission > 0 != e6 > 0 && this.version++, this._transmission = e6;
  }
  copy(e6) {
    return super.copy(e6), this.defines = { STANDARD: "", PHYSICAL: "" }, this.anisotropy = e6.anisotropy, this.anisotropyRotation = e6.anisotropyRotation, this.anisotropyMap = e6.anisotropyMap, this.clearcoat = e6.clearcoat, this.clearcoatMap = e6.clearcoatMap, this.clearcoatRoughness = e6.clearcoatRoughness, this.clearcoatRoughnessMap = e6.clearcoatRoughnessMap, this.clearcoatNormalMap = e6.clearcoatNormalMap, this.clearcoatNormalScale.copy(e6.clearcoatNormalScale), this.dispersion = e6.dispersion, this.ior = e6.ior, this.iridescence = e6.iridescence, this.iridescenceMap = e6.iridescenceMap, this.iridescenceIOR = e6.iridescenceIOR, this.iridescenceThicknessRange = [...e6.iridescenceThicknessRange], this.iridescenceThicknessMap = e6.iridescenceThicknessMap, this.sheen = e6.sheen, this.sheenColor.copy(e6.sheenColor), this.sheenColorMap = e6.sheenColorMap, this.sheenRoughness = e6.sheenRoughness, this.sheenRoughnessMap = e6.sheenRoughnessMap, this.transmission = e6.transmission, this.transmissionMap = e6.transmissionMap, this.thickness = e6.thickness, this.thicknessMap = e6.thicknessMap, this.attenuationDistance = e6.attenuationDistance, this.attenuationColor.copy(e6.attenuationColor), this.specularIntensity = e6.specularIntensity, this.specularIntensityMap = e6.specularIntensityMap, this.specularColor.copy(e6.specularColor), this.specularColorMap = e6.specularColorMap, this;
  }
}
class oh extends Ic {
  constructor(e6) {
    super(), this.isLineDashedMaterial = true, this.type = "LineDashedMaterial", this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.setValues(e6);
  }
  copy(e6) {
    return super.copy(e6), this.scale = e6.scale, this.dashSize = e6.dashSize, this.gapSize = e6.gapSize, this;
  }
}
function rh(e6, t2, i2) {
  return !e6 || !i2 && e6.constructor === t2 ? e6 : "number" == typeof t2.BYTES_PER_ELEMENT ? new t2(e6) : Array.prototype.slice.call(e6);
}
function sh(e6) {
  const t2 = e6.length, i2 = new Array(t2);
  for (let e7 = 0; e7 !== t2; ++e7) i2[e7] = e7;
  return i2.sort(function(t3, i3) {
    return e6[t3] - e6[i3];
  }), i2;
}
function ah(e6, t2, i2) {
  const n2 = e6.length, o2 = new e6.constructor(n2);
  for (let r2 = 0, s2 = 0; s2 !== n2; ++r2) {
    const n3 = i2[r2] * t2;
    for (let i3 = 0; i3 !== t2; ++i3) o2[s2++] = e6[n3 + i3];
  }
  return o2;
}
function lh(e6, t2, i2, n2) {
  let o2 = 1, r2 = e6[0];
  for (; void 0 !== r2 && void 0 === r2[n2]; ) r2 = e6[o2++];
  if (void 0 === r2) return;
  let s2 = r2[n2];
  if (void 0 !== s2) if (Array.isArray(s2)) do {
    s2 = r2[n2], void 0 !== s2 && (t2.push(r2.time), i2.push.apply(i2, s2)), r2 = e6[o2++];
  } while (void 0 !== r2);
  else if (void 0 !== s2.toArray) do {
    s2 = r2[n2], void 0 !== s2 && (t2.push(r2.time), s2.toArray(i2, i2.length)), r2 = e6[o2++];
  } while (void 0 !== r2);
  else do {
    s2 = r2[n2], void 0 !== s2 && (t2.push(r2.time), i2.push(s2)), r2 = e6[o2++];
  } while (void 0 !== r2);
}
class ch {
  constructor(e6, t2, i2, n2) {
    this.parameterPositions = e6, this._cachedIndex = 0, this.resultBuffer = void 0 !== n2 ? n2 : new t2.constructor(i2), this.sampleValues = t2, this.valueSize = i2, this.settings = null, this.DefaultSettings_ = {};
  }
  evaluate(e6) {
    const t2 = this.parameterPositions;
    let i2 = this._cachedIndex, n2 = t2[i2], o2 = t2[i2 - 1];
    e: {
      t: {
        let r2;
        i: {
          n: if (!(e6 < n2)) {
            for (let r3 = i2 + 2; ; ) {
              if (void 0 === n2) {
                if (e6 < o2) break n;
                return i2 = t2.length, this._cachedIndex = i2, this.copySampleValue_(i2 - 1);
              }
              if (i2 === r3) break;
              if (o2 = n2, n2 = t2[++i2], e6 < n2) break t;
            }
            r2 = t2.length;
            break i;
          }
          if (e6 >= o2) break e;
          {
            const s2 = t2[1];
            e6 < s2 && (i2 = 2, o2 = s2);
            for (let r3 = i2 - 2; ; ) {
              if (void 0 === o2) return this._cachedIndex = 0, this.copySampleValue_(0);
              if (i2 === r3) break;
              if (n2 = o2, o2 = t2[--i2 - 1], e6 >= o2) break t;
            }
            r2 = i2, i2 = 0;
          }
        }
        for (; i2 < r2; ) {
          const n3 = i2 + r2 >>> 1;
          e6 < t2[n3] ? r2 = n3 : i2 = n3 + 1;
        }
        if (n2 = t2[i2], o2 = t2[i2 - 1], void 0 === o2) return this._cachedIndex = 0, this.copySampleValue_(0);
        if (void 0 === n2) return i2 = t2.length, this._cachedIndex = i2, this.copySampleValue_(i2 - 1);
      }
      this._cachedIndex = i2, this.intervalChanged_(i2, o2, n2);
    }
    return this.interpolate_(i2, o2, e6, n2);
  }
  getSettings_() {
    return this.settings || this.DefaultSettings_;
  }
  copySampleValue_(e6) {
    const t2 = this.resultBuffer, i2 = this.sampleValues, n2 = this.valueSize, o2 = e6 * n2;
    for (let e7 = 0; e7 !== n2; ++e7) t2[e7] = i2[o2 + e7];
    return t2;
  }
  interpolate_() {
    throw new Error("call to abstract method");
  }
  intervalChanged_() {
  }
}
class hh extends ch {
  constructor(e6, t2, i2, n2) {
    super(e6, t2, i2, n2), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0, this.DefaultSettings_ = { endingStart: li, endingEnd: li };
  }
  intervalChanged_(e6, t2, i2) {
    const n2 = this.parameterPositions;
    let o2 = e6 - 2, r2 = e6 + 1, s2 = n2[o2], a2 = n2[r2];
    if (void 0 === s2) switch (this.getSettings_().endingStart) {
      case ci:
        o2 = e6, s2 = 2 * t2 - i2;
        break;
      case hi:
        o2 = n2.length - 2, s2 = t2 + n2[o2] - n2[o2 + 1];
        break;
      default:
        o2 = e6, s2 = i2;
    }
    if (void 0 === a2) switch (this.getSettings_().endingEnd) {
      case ci:
        r2 = e6, a2 = 2 * i2 - t2;
        break;
      case hi:
        r2 = 1, a2 = i2 + n2[1] - n2[0];
        break;
      default:
        r2 = e6 - 1, a2 = t2;
    }
    const l2 = 0.5 * (i2 - t2), c2 = this.valueSize;
    this._weightPrev = l2 / (t2 - s2), this._weightNext = l2 / (a2 - i2), this._offsetPrev = o2 * c2, this._offsetNext = r2 * c2;
  }
  interpolate_(e6, t2, i2, n2) {
    const o2 = this.resultBuffer, r2 = this.sampleValues, s2 = this.valueSize, a2 = e6 * s2, l2 = a2 - s2, c2 = this._offsetPrev, h2 = this._offsetNext, u2 = this._weightPrev, d2 = this._weightNext, p2 = (i2 - t2) / (n2 - t2), _2 = p2 * p2, g2 = _2 * p2, m2 = -u2 * g2 + 2 * u2 * _2 - u2 * p2, f2 = (1 + u2) * g2 + (-1.5 - 2 * u2) * _2 + (-0.5 + u2) * p2 + 1, v2 = (-1 - d2) * g2 + (1.5 + d2) * _2 + 0.5 * p2, A2 = d2 * g2 - d2 * _2;
    for (let e7 = 0; e7 !== s2; ++e7) o2[e7] = m2 * r2[c2 + e7] + f2 * r2[l2 + e7] + v2 * r2[a2 + e7] + A2 * r2[h2 + e7];
    return o2;
  }
}
class uh extends ch {
  constructor(e6, t2, i2, n2) {
    super(e6, t2, i2, n2);
  }
  interpolate_(e6, t2, i2, n2) {
    const o2 = this.resultBuffer, r2 = this.sampleValues, s2 = this.valueSize, a2 = e6 * s2, l2 = a2 - s2, c2 = (i2 - t2) / (n2 - t2), h2 = 1 - c2;
    for (let e7 = 0; e7 !== s2; ++e7) o2[e7] = r2[l2 + e7] * h2 + r2[a2 + e7] * c2;
    return o2;
  }
}
class dh extends ch {
  constructor(e6, t2, i2, n2) {
    super(e6, t2, i2, n2);
  }
  interpolate_(e6) {
    return this.copySampleValue_(e6 - 1);
  }
}
class ph {
  constructor(e6, t2, i2, n2) {
    if (void 0 === e6) throw new Error("THREE.KeyframeTrack: track name is undefined");
    if (void 0 === t2 || 0 === t2.length) throw new Error("THREE.KeyframeTrack: no keyframes in track named " + e6);
    this.name = e6, this.times = rh(t2, this.TimeBufferType), this.values = rh(i2, this.ValueBufferType), this.setInterpolation(n2 || this.DefaultInterpolation);
  }
  static toJSON(e6) {
    const t2 = e6.constructor;
    let i2;
    if (t2.toJSON !== this.toJSON) i2 = t2.toJSON(e6);
    else {
      i2 = { name: e6.name, times: rh(e6.times, Array), values: rh(e6.values, Array) };
      const t3 = e6.getInterpolation();
      t3 !== e6.DefaultInterpolation && (i2.interpolation = t3);
    }
    return i2.type = e6.ValueTypeName, i2;
  }
  InterpolantFactoryMethodDiscrete(e6) {
    return new dh(this.times, this.values, this.getValueSize(), e6);
  }
  InterpolantFactoryMethodLinear(e6) {
    return new uh(this.times, this.values, this.getValueSize(), e6);
  }
  InterpolantFactoryMethodSmooth(e6) {
    return new hh(this.times, this.values, this.getValueSize(), e6);
  }
  setInterpolation(e6) {
    let t2;
    switch (e6) {
      case ri:
        t2 = this.InterpolantFactoryMethodDiscrete;
        break;
      case si:
        t2 = this.InterpolantFactoryMethodLinear;
        break;
      case ai:
        t2 = this.InterpolantFactoryMethodSmooth;
    }
    if (void 0 === t2) {
      const t3 = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
      if (void 0 === this.createInterpolant) {
        if (e6 === this.DefaultInterpolation) throw new Error(t3);
        this.setInterpolation(this.DefaultInterpolation);
      }
      return console.warn("THREE.KeyframeTrack:", t3), this;
    }
    return this.createInterpolant = t2, this;
  }
  getInterpolation() {
    switch (this.createInterpolant) {
      case this.InterpolantFactoryMethodDiscrete:
        return ri;
      case this.InterpolantFactoryMethodLinear:
        return si;
      case this.InterpolantFactoryMethodSmooth:
        return ai;
    }
  }
  getValueSize() {
    return this.values.length / this.times.length;
  }
  shift(e6) {
    if (0 !== e6) {
      const t2 = this.times;
      for (let i2 = 0, n2 = t2.length; i2 !== n2; ++i2) t2[i2] += e6;
    }
    return this;
  }
  scale(e6) {
    if (1 !== e6) {
      const t2 = this.times;
      for (let i2 = 0, n2 = t2.length; i2 !== n2; ++i2) t2[i2] *= e6;
    }
    return this;
  }
  trim(e6, t2) {
    const i2 = this.times, n2 = i2.length;
    let o2 = 0, r2 = n2 - 1;
    for (; o2 !== n2 && i2[o2] < e6; ) ++o2;
    for (; -1 !== r2 && i2[r2] > t2; ) --r2;
    if (++r2, 0 !== o2 || r2 !== n2) {
      o2 >= r2 && (r2 = Math.max(r2, 1), o2 = r2 - 1);
      const e7 = this.getValueSize();
      this.times = i2.slice(o2, r2), this.values = this.values.slice(o2 * e7, r2 * e7);
    }
    return this;
  }
  validate() {
    let e6 = true;
    const t2 = this.getValueSize();
    t2 - Math.floor(t2) != 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e6 = false);
    const i2 = this.times, n2 = this.values, o2 = i2.length;
    0 === o2 && (console.error("THREE.KeyframeTrack: Track is empty.", this), e6 = false);
    let r2 = null;
    for (let t3 = 0; t3 !== o2; t3++) {
      const n3 = i2[t3];
      if ("number" == typeof n3 && isNaN(n3)) {
        console.error("THREE.KeyframeTrack: Time is not a valid number.", this, t3, n3), e6 = false;
        break;
      }
      if (null !== r2 && r2 > n3) {
        console.error("THREE.KeyframeTrack: Out of order keys.", this, t3, n3, r2), e6 = false;
        break;
      }
      r2 = n3;
    }
    if (void 0 !== n2 && (s2 = n2, ArrayBuffer.isView(s2) && !(s2 instanceof DataView))) for (let t3 = 0, i3 = n2.length; t3 !== i3; ++t3) {
      const i4 = n2[t3];
      if (isNaN(i4)) {
        console.error("THREE.KeyframeTrack: Value is not a valid number.", this, t3, i4), e6 = false;
        break;
      }
    }
    var s2;
    return e6;
  }
  optimize() {
    const e6 = this.times.slice(), t2 = this.values.slice(), i2 = this.getValueSize(), n2 = this.getInterpolation() === ai, o2 = e6.length - 1;
    let r2 = 1;
    for (let s2 = 1; s2 < o2; ++s2) {
      let o3 = false;
      const a2 = e6[s2];
      if (a2 !== e6[s2 + 1] && (1 !== s2 || a2 !== e6[0])) if (n2) o3 = true;
      else {
        const e7 = s2 * i2, n3 = e7 - i2, r3 = e7 + i2;
        for (let s3 = 0; s3 !== i2; ++s3) {
          const i3 = t2[e7 + s3];
          if (i3 !== t2[n3 + s3] || i3 !== t2[r3 + s3]) {
            o3 = true;
            break;
          }
        }
      }
      if (o3) {
        if (s2 !== r2) {
          e6[r2] = e6[s2];
          const n3 = s2 * i2, o4 = r2 * i2;
          for (let e7 = 0; e7 !== i2; ++e7) t2[o4 + e7] = t2[n3 + e7];
        }
        ++r2;
      }
    }
    if (o2 > 0) {
      e6[r2] = e6[o2];
      for (let e7 = o2 * i2, n3 = r2 * i2, s2 = 0; s2 !== i2; ++s2) t2[n3 + s2] = t2[e7 + s2];
      ++r2;
    }
    return r2 !== e6.length ? (this.times = e6.slice(0, r2), this.values = t2.slice(0, r2 * i2)) : (this.times = e6, this.values = t2), this;
  }
  clone() {
    const e6 = this.times.slice(), t2 = this.values.slice(), i2 = new (0, this.constructor)(this.name, e6, t2);
    return i2.createInterpolant = this.createInterpolant, i2;
  }
}
ph.prototype.TimeBufferType = Float32Array, ph.prototype.ValueBufferType = Float32Array, ph.prototype.DefaultInterpolation = si;
class _h extends ph {
  constructor(e6, t2, i2) {
    super(e6, t2, i2);
  }
}
_h.prototype.ValueTypeName = "bool", _h.prototype.ValueBufferType = Array, _h.prototype.DefaultInterpolation = ri, _h.prototype.InterpolantFactoryMethodLinear = void 0, _h.prototype.InterpolantFactoryMethodSmooth = void 0;
class gh extends ph {
}
gh.prototype.ValueTypeName = "color";
class mh extends ph {
}
mh.prototype.ValueTypeName = "number";
class fh extends ch {
  constructor(e6, t2, i2, n2) {
    super(e6, t2, i2, n2);
  }
  interpolate_(e6, t2, i2, n2) {
    const o2 = this.resultBuffer, r2 = this.sampleValues, s2 = this.valueSize, a2 = (i2 - t2) / (n2 - t2);
    let l2 = e6 * s2;
    for (let e7 = l2 + s2; l2 !== e7; l2 += 4) bn.slerpFlat(o2, 0, r2, l2 - s2, r2, l2, a2);
    return o2;
  }
}
class vh extends ph {
  InterpolantFactoryMethodLinear(e6) {
    return new fh(this.times, this.values, this.getValueSize(), e6);
  }
}
vh.prototype.ValueTypeName = "quaternion", vh.prototype.InterpolantFactoryMethodSmooth = void 0;
class Ah extends ph {
  constructor(e6, t2, i2) {
    super(e6, t2, i2);
  }
}
Ah.prototype.ValueTypeName = "string", Ah.prototype.ValueBufferType = Array, Ah.prototype.DefaultInterpolation = ri, Ah.prototype.InterpolantFactoryMethodLinear = void 0, Ah.prototype.InterpolantFactoryMethodSmooth = void 0;
class bh extends ph {
}
bh.prototype.ValueTypeName = "vector";
class yh {
  constructor(e6 = "", t2 = -1, i2 = [], n2 = 2500) {
    this.name = e6, this.tracks = i2, this.duration = t2, this.blendMode = n2, this.uuid = Ui(), this.duration < 0 && this.resetDuration();
  }
  static parse(e6) {
    const t2 = [], i2 = e6.tracks, n2 = 1 / (e6.fps || 1);
    for (let e7 = 0, o3 = i2.length; e7 !== o3; ++e7) t2.push(wh(i2[e7]).scale(n2));
    const o2 = new this(e6.name, e6.duration, t2, e6.blendMode);
    return o2.uuid = e6.uuid, o2;
  }
  static toJSON(e6) {
    const t2 = [], i2 = e6.tracks, n2 = { name: e6.name, duration: e6.duration, tracks: t2, uuid: e6.uuid, blendMode: e6.blendMode };
    for (let e7 = 0, n3 = i2.length; e7 !== n3; ++e7) t2.push(ph.toJSON(i2[e7]));
    return n2;
  }
  static CreateFromMorphTargetSequence(e6, t2, i2, n2) {
    const o2 = t2.length, r2 = [];
    for (let e7 = 0; e7 < o2; e7++) {
      let s2 = [], a2 = [];
      s2.push((e7 + o2 - 1) % o2, e7, (e7 + 1) % o2), a2.push(0, 1, 0);
      const l2 = sh(s2);
      s2 = ah(s2, 1, l2), a2 = ah(a2, 1, l2), n2 || 0 !== s2[0] || (s2.push(o2), a2.push(a2[0])), r2.push(new mh(".morphTargetInfluences[" + t2[e7].name + "]", s2, a2).scale(1 / i2));
    }
    return new this(e6, -1, r2);
  }
  static findByName(e6, t2) {
    let i2 = e6;
    if (!Array.isArray(e6)) {
      const t3 = e6;
      i2 = t3.geometry && t3.geometry.animations || t3.animations;
    }
    for (let e7 = 0; e7 < i2.length; e7++) if (i2[e7].name === t2) return i2[e7];
    return null;
  }
  static CreateClipsFromMorphTargetSequences(e6, t2, i2) {
    const n2 = {}, o2 = /^([\w-]*?)([\d]+)$/;
    for (let t3 = 0, i3 = e6.length; t3 < i3; t3++) {
      const i4 = e6[t3], r3 = i4.name.match(o2);
      if (r3 && r3.length > 1) {
        const e7 = r3[1];
        let t4 = n2[e7];
        t4 || (n2[e7] = t4 = []), t4.push(i4);
      }
    }
    const r2 = [];
    for (const e7 in n2) r2.push(this.CreateFromMorphTargetSequence(e7, n2[e7], t2, i2));
    return r2;
  }
  static parseAnimation(e6, t2) {
    if (!e6) return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null;
    const i2 = function(e7, t3, i3, n3, o3) {
      if (0 !== i3.length) {
        const r3 = [], s3 = [];
        lh(i3, r3, s3, n3), 0 !== r3.length && o3.push(new e7(t3, r3, s3));
      }
    }, n2 = [], o2 = e6.name || "default", r2 = e6.fps || 30, s2 = e6.blendMode;
    let a2 = e6.length || -1;
    const l2 = e6.hierarchy || [];
    for (let e7 = 0; e7 < l2.length; e7++) {
      const o3 = l2[e7].keys;
      if (o3 && 0 !== o3.length) if (o3[0].morphTargets) {
        const e8 = {};
        let t3;
        for (t3 = 0; t3 < o3.length; t3++) if (o3[t3].morphTargets) for (let i3 = 0; i3 < o3[t3].morphTargets.length; i3++) e8[o3[t3].morphTargets[i3]] = -1;
        for (const i3 in e8) {
          const e9 = [], r3 = [];
          for (let n3 = 0; n3 !== o3[t3].morphTargets.length; ++n3) {
            const n4 = o3[t3];
            e9.push(n4.time), r3.push(n4.morphTarget === i3 ? 1 : 0);
          }
          n2.push(new mh(".morphTargetInfluence[" + i3 + "]", e9, r3));
        }
        a2 = e8.length * r2;
      } else {
        const r3 = ".bones[" + t2[e7].name + "]";
        i2(bh, r3 + ".position", o3, "pos", n2), i2(vh, r3 + ".quaternion", o3, "rot", n2), i2(bh, r3 + ".scale", o3, "scl", n2);
      }
    }
    if (0 === n2.length) return null;
    return new this(o2, a2, n2, s2);
  }
  resetDuration() {
    let e6 = 0;
    for (let t2 = 0, i2 = this.tracks.length; t2 !== i2; ++t2) {
      const i3 = this.tracks[t2];
      e6 = Math.max(e6, i3.times[i3.times.length - 1]);
    }
    return this.duration = e6, this;
  }
  trim() {
    for (let e6 = 0; e6 < this.tracks.length; e6++) this.tracks[e6].trim(0, this.duration);
    return this;
  }
  validate() {
    let e6 = true;
    for (let t2 = 0; t2 < this.tracks.length; t2++) e6 = e6 && this.tracks[t2].validate();
    return e6;
  }
  optimize() {
    for (let e6 = 0; e6 < this.tracks.length; e6++) this.tracks[e6].optimize();
    return this;
  }
  clone() {
    const e6 = [];
    for (let t2 = 0; t2 < this.tracks.length; t2++) e6.push(this.tracks[t2].clone());
    return new this.constructor(this.name, this.duration, e6, this.blendMode);
  }
  toJSON() {
    return this.constructor.toJSON(this);
  }
}
function wh(e6) {
  if (void 0 === e6.type) throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
  const t2 = function(e7) {
    switch (e7.toLowerCase()) {
      case "scalar":
      case "double":
      case "float":
      case "number":
      case "integer":
        return mh;
      case "vector":
      case "vector2":
      case "vector3":
      case "vector4":
        return bh;
      case "color":
        return gh;
      case "quaternion":
        return vh;
      case "bool":
      case "boolean":
        return _h;
      case "string":
        return Ah;
    }
    throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + e7);
  }(e6.type);
  if (void 0 === e6.times) {
    const t3 = [], i2 = [];
    lh(e6.keys, t3, i2, "value"), e6.times = t3, e6.values = i2;
  }
  return void 0 !== t2.parse ? t2.parse(e6) : new t2(e6.name, e6.times, e6.values, e6.interpolation);
}
const xh = { enabled: false, files: {}, add: function(e6, t2) {
  false !== this.enabled && (this.files[e6] = t2);
}, get: function(e6) {
  if (false !== this.enabled) return this.files[e6];
}, remove: function(e6) {
  delete this.files[e6];
}, clear: function() {
  this.files = {};
} };
class Ch {
  constructor(e6, t2, i2) {
    const n2 = this;
    let o2, r2 = false, s2 = 0, a2 = 0;
    const l2 = [];
    this.onStart = void 0, this.onLoad = e6, this.onProgress = t2, this.onError = i2, this.itemStart = function(e7) {
      a2++, false === r2 && void 0 !== n2.onStart && n2.onStart(e7, s2, a2), r2 = true;
    }, this.itemEnd = function(e7) {
      s2++, void 0 !== n2.onProgress && n2.onProgress(e7, s2, a2), s2 === a2 && (r2 = false, void 0 !== n2.onLoad && n2.onLoad());
    }, this.itemError = function(e7) {
      void 0 !== n2.onError && n2.onError(e7);
    }, this.resolveURL = function(e7) {
      return o2 ? o2(e7) : e7;
    }, this.setURLModifier = function(e7) {
      return o2 = e7, this;
    }, this.addHandler = function(e7, t3) {
      return l2.push(e7, t3), this;
    }, this.removeHandler = function(e7) {
      const t3 = l2.indexOf(e7);
      return -1 !== t3 && l2.splice(t3, 2), this;
    }, this.getHandler = function(e7) {
      for (let t3 = 0, i3 = l2.length; t3 < i3; t3 += 2) {
        const i4 = l2[t3], n3 = l2[t3 + 1];
        if (i4.global && (i4.lastIndex = 0), i4.test(e7)) return n3;
      }
      return null;
    };
  }
}
const Sh = new Ch();
class Eh {
  constructor(e6) {
    this.manager = void 0 !== e6 ? e6 : Sh, this.crossOrigin = "anonymous", this.withCredentials = false, this.path = "", this.resourcePath = "", this.requestHeader = {};
  }
  load() {
  }
  loadAsync(e6, t2) {
    const i2 = this;
    return new Promise(function(n2, o2) {
      i2.load(e6, n2, t2, o2);
    });
  }
  parse() {
  }
  setCrossOrigin(e6) {
    return this.crossOrigin = e6, this;
  }
  setWithCredentials(e6) {
    return this.withCredentials = e6, this;
  }
  setPath(e6) {
    return this.path = e6, this;
  }
  setResourcePath(e6) {
    return this.resourcePath = e6, this;
  }
  setRequestHeader(e6) {
    return this.requestHeader = e6, this;
  }
}
Eh.DEFAULT_MATERIAL_NAME = "__DEFAULT";
const Th = {};
class Ih extends Error {
  constructor(e6, t2) {
    super(e6), this.response = t2;
  }
}
class Mh extends Eh {
  constructor(e6) {
    super(e6);
  }
  load(e6, t2, i2, n2) {
    void 0 === e6 && (e6 = ""), void 0 !== this.path && (e6 = this.path + e6), e6 = this.manager.resolveURL(e6);
    const o2 = xh.get(e6);
    if (void 0 !== o2) return this.manager.itemStart(e6), setTimeout(() => {
      t2 && t2(o2), this.manager.itemEnd(e6);
    }, 0), o2;
    if (void 0 !== Th[e6]) return void Th[e6].push({ onLoad: t2, onProgress: i2, onError: n2 });
    Th[e6] = [], Th[e6].push({ onLoad: t2, onProgress: i2, onError: n2 });
    const r2 = new Request(e6, { headers: new Headers(this.requestHeader), credentials: this.withCredentials ? "include" : "same-origin" }), s2 = this.mimeType, a2 = this.responseType;
    fetch(r2).then((t3) => {
      if (200 === t3.status || 0 === t3.status) {
        if (0 === t3.status && console.warn("THREE.FileLoader: HTTP Status 0 received."), "undefined" == typeof ReadableStream || void 0 === t3.body || void 0 === t3.body.getReader) return t3;
        const i3 = Th[e6], n3 = t3.body.getReader(), o3 = t3.headers.get("X-File-Size") || t3.headers.get("Content-Length"), r3 = o3 ? parseInt(o3) : 0, s3 = 0 !== r3;
        let a3 = 0;
        const l2 = new ReadableStream({ start(e7) {
          !function t4() {
            n3.read().then(({ done: n4, value: o4 }) => {
              if (n4) e7.close();
              else {
                a3 += o4.byteLength;
                const n5 = new ProgressEvent("progress", { lengthComputable: s3, loaded: a3, total: r3 });
                for (let e8 = 0, t5 = i3.length; e8 < t5; e8++) {
                  const t6 = i3[e8];
                  t6.onProgress && t6.onProgress(n5);
                }
                e7.enqueue(o4), t4();
              }
            }, (t5) => {
              e7.error(t5);
            });
          }();
        } });
        return new Response(l2);
      }
      throw new Ih(`fetch for "${t3.url}" responded with ${t3.status}: ${t3.statusText}`, t3);
    }).then((e7) => {
      switch (a2) {
        case "arraybuffer":
          return e7.arrayBuffer();
        case "blob":
          return e7.blob();
        case "document":
          return e7.text().then((e8) => new DOMParser().parseFromString(e8, s2));
        case "json":
          return e7.json();
        default:
          if (void 0 === s2) return e7.text();
          {
            const t3 = /charset="?([^;"\s]*)"?/i.exec(s2), i3 = t3 && t3[1] ? t3[1].toLowerCase() : void 0, n3 = new TextDecoder(i3);
            return e7.arrayBuffer().then((e8) => n3.decode(e8));
          }
      }
    }).then((t3) => {
      xh.add(e6, t3);
      const i3 = Th[e6];
      delete Th[e6];
      for (let e7 = 0, n3 = i3.length; e7 < n3; e7++) {
        const n4 = i3[e7];
        n4.onLoad && n4.onLoad(t3);
      }
    }).catch((t3) => {
      const i3 = Th[e6];
      if (void 0 === i3) throw this.manager.itemError(e6), t3;
      delete Th[e6];
      for (let e7 = 0, n3 = i3.length; e7 < n3; e7++) {
        const n4 = i3[e7];
        n4.onError && n4.onError(t3);
      }
      this.manager.itemError(e6);
    }).finally(() => {
      this.manager.itemEnd(e6);
    }), this.manager.itemStart(e6);
  }
  setResponseType(e6) {
    return this.responseType = e6, this;
  }
  setMimeType(e6) {
    return this.mimeType = e6, this;
  }
}
class Bh extends Eh {
  constructor(e6) {
    super(e6);
  }
  load(e6, t2, i2, n2) {
    void 0 !== this.path && (e6 = this.path + e6), e6 = this.manager.resolveURL(e6);
    const o2 = this, r2 = xh.get(e6);
    if (void 0 !== r2) return o2.manager.itemStart(e6), setTimeout(function() {
      t2 && t2(r2), o2.manager.itemEnd(e6);
    }, 0), r2;
    const s2 = Yi("img");
    function a2() {
      c2(), xh.add(e6, this), t2 && t2(this), o2.manager.itemEnd(e6);
    }
    function l2(t3) {
      c2(), n2 && n2(t3), o2.manager.itemError(e6), o2.manager.itemEnd(e6);
    }
    function c2() {
      s2.removeEventListener("load", a2, false), s2.removeEventListener("error", l2, false);
    }
    return s2.addEventListener("load", a2, false), s2.addEventListener("error", l2, false), "data:" !== e6.slice(0, 5) && void 0 !== this.crossOrigin && (s2.crossOrigin = this.crossOrigin), o2.manager.itemStart(e6), s2.src = e6, s2;
  }
}
class Rh extends Eh {
  constructor(e6) {
    super(e6);
  }
  load(e6, t2, i2, n2) {
    const o2 = this, r2 = new gc(), s2 = new Mh(this.manager);
    return s2.setResponseType("arraybuffer"), s2.setRequestHeader(this.requestHeader), s2.setPath(this.path), s2.setWithCredentials(o2.withCredentials), s2.load(e6, function(e7) {
      let i3;
      try {
        i3 = o2.parse(e7);
      } catch (e8) {
        if (void 0 === n2) return void console.error(e8);
        n2(e8);
      }
      void 0 !== i3.image ? r2.image = i3.image : void 0 !== i3.data && (r2.image.width = i3.width, r2.image.height = i3.height, r2.image.data = i3.data), r2.wrapS = void 0 !== i3.wrapS ? i3.wrapS : Ze, r2.wrapT = void 0 !== i3.wrapT ? i3.wrapT : Ze, r2.magFilter = void 0 !== i3.magFilter ? i3.magFilter : nt, r2.minFilter = void 0 !== i3.minFilter ? i3.minFilter : nt, r2.anisotropy = void 0 !== i3.anisotropy ? i3.anisotropy : 1, void 0 !== i3.colorSpace && (r2.colorSpace = i3.colorSpace), void 0 !== i3.flipY && (r2.flipY = i3.flipY), void 0 !== i3.format && (r2.format = i3.format), void 0 !== i3.type && (r2.type = i3.type), void 0 !== i3.mipmaps && (r2.mipmaps = i3.mipmaps, r2.minFilter = rt), 1 === i3.mipmapCount && (r2.minFilter = nt), void 0 !== i3.generateMipmaps && (r2.generateMipmaps = i3.generateMipmaps), r2.needsUpdate = true, t2 && t2(r2, i3);
    }, i2, n2), r2;
  }
}
class kh extends Eh {
  constructor(e6) {
    super(e6);
  }
  load(e6, t2, i2, n2) {
    const o2 = new _n(), r2 = new Bh(this.manager);
    return r2.setCrossOrigin(this.crossOrigin), r2.setPath(this.path), r2.load(e6, function(e7) {
      o2.image = e7, o2.needsUpdate = true, void 0 !== t2 && t2(o2);
    }, i2, n2), o2;
  }
}
class Ph extends So {
  constructor(e6, t2 = 1) {
    super(), this.isLight = true, this.type = "Light", this.color = new Go(e6), this.intensity = t2;
  }
  dispose() {
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.color.copy(e6.color), this.intensity = e6.intensity, this;
  }
  toJSON(e6) {
    const t2 = super.toJSON(e6);
    return t2.object.color = this.color.getHex(), t2.object.intensity = this.intensity, void 0 !== this.groundColor && (t2.object.groundColor = this.groundColor.getHex()), void 0 !== this.distance && (t2.object.distance = this.distance), void 0 !== this.angle && (t2.object.angle = this.angle), void 0 !== this.decay && (t2.object.decay = this.decay), void 0 !== this.penumbra && (t2.object.penumbra = this.penumbra), void 0 !== this.shadow && (t2.object.shadow = this.shadow.toJSON()), void 0 !== this.target && (t2.object.target = this.target.uuid), t2;
  }
}
const Dh = new Kn(), Lh = new yn(), Fh = new yn();
class Nh {
  constructor(e6) {
    this.camera = e6, this.intensity = 1, this.bias = 0, this.normalBias = 0, this.radius = 1, this.blurSamples = 8, this.mapSize = new $i(512, 512), this.map = null, this.mapPass = null, this.matrix = new Kn(), this.autoUpdate = true, this.needsUpdate = false, this._frustum = new $r(), this._frameExtents = new $i(1, 1), this._viewportCount = 1, this._viewports = [new gn(0, 0, 1, 1)];
  }
  getViewportCount() {
    return this._viewportCount;
  }
  getFrustum() {
    return this._frustum;
  }
  updateMatrices(e6) {
    const t2 = this.camera, i2 = this.matrix;
    Lh.setFromMatrixPosition(e6.matrixWorld), t2.position.copy(Lh), Fh.setFromMatrixPosition(e6.target.matrixWorld), t2.lookAt(Fh), t2.updateMatrixWorld(), Dh.multiplyMatrices(t2.projectionMatrix, t2.matrixWorldInverse), this._frustum.setFromProjectionMatrix(Dh), i2.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1), i2.multiply(Dh);
  }
  getViewport(e6) {
    return this._viewports[e6];
  }
  getFrameExtents() {
    return this._frameExtents;
  }
  dispose() {
    this.map && this.map.dispose(), this.mapPass && this.mapPass.dispose();
  }
  copy(e6) {
    return this.camera = e6.camera.clone(), this.intensity = e6.intensity, this.bias = e6.bias, this.radius = e6.radius, this.mapSize.copy(e6.mapSize), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  toJSON() {
    const e6 = {};
    return 1 !== this.intensity && (e6.intensity = this.intensity), 0 !== this.bias && (e6.bias = this.bias), 0 !== this.normalBias && (e6.normalBias = this.normalBias), 1 !== this.radius && (e6.radius = this.radius), 512 === this.mapSize.x && 512 === this.mapSize.y || (e6.mapSize = this.mapSize.toArray()), e6.camera = this.camera.toJSON(false).object, delete e6.camera.matrix, e6;
  }
}
class Oh extends Nh {
  constructor() {
    super(new Lr(50, 1, 0.5, 500)), this.isSpotLightShadow = true, this.focus = 1;
  }
  updateMatrices(e6) {
    const t2 = this.camera, i2 = 2 * Oi * e6.angle * this.focus, n2 = this.mapSize.width / this.mapSize.height, o2 = e6.distance || t2.far;
    i2 === t2.fov && n2 === t2.aspect && o2 === t2.far || (t2.fov = i2, t2.aspect = n2, t2.far = o2, t2.updateProjectionMatrix()), super.updateMatrices(e6);
  }
  copy(e6) {
    return super.copy(e6), this.focus = e6.focus, this;
  }
}
class Uh extends Ph {
  constructor(e6, t2, i2 = 0, n2 = Math.PI / 3, o2 = 0, r2 = 2) {
    super(e6, t2), this.isSpotLight = true, this.type = "SpotLight", this.position.copy(So.DEFAULT_UP), this.updateMatrix(), this.target = new So(), this.distance = i2, this.angle = n2, this.penumbra = o2, this.decay = r2, this.map = null, this.shadow = new Oh();
  }
  get power() {
    return this.intensity * Math.PI;
  }
  set power(e6) {
    this.intensity = e6 / Math.PI;
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.distance = e6.distance, this.angle = e6.angle, this.penumbra = e6.penumbra, this.decay = e6.decay, this.target = e6.target.clone(), this.shadow = e6.shadow.clone(), this;
  }
}
const zh = new Kn(), Hh = new yn(), Qh = new yn();
class Vh extends Nh {
  constructor() {
    super(new Lr(90, 1, 0.5, 500)), this.isPointLightShadow = true, this._frameExtents = new $i(4, 2), this._viewportCount = 6, this._viewports = [new gn(2, 1, 1, 1), new gn(0, 1, 1, 1), new gn(3, 1, 1, 1), new gn(1, 1, 1, 1), new gn(3, 0, 1, 1), new gn(1, 0, 1, 1)], this._cubeDirections = [new yn(1, 0, 0), new yn(-1, 0, 0), new yn(0, 0, 1), new yn(0, 0, -1), new yn(0, 1, 0), new yn(0, -1, 0)], this._cubeUps = [new yn(0, 1, 0), new yn(0, 1, 0), new yn(0, 1, 0), new yn(0, 1, 0), new yn(0, 0, 1), new yn(0, 0, -1)];
  }
  updateMatrices(e6, t2 = 0) {
    const i2 = this.camera, n2 = this.matrix, o2 = e6.distance || i2.far;
    o2 !== i2.far && (i2.far = o2, i2.updateProjectionMatrix()), Hh.setFromMatrixPosition(e6.matrixWorld), i2.position.copy(Hh), Qh.copy(i2.position), Qh.add(this._cubeDirections[t2]), i2.up.copy(this._cubeUps[t2]), i2.lookAt(Qh), i2.updateMatrixWorld(), n2.makeTranslation(-Hh.x, -Hh.y, -Hh.z), zh.multiplyMatrices(i2.projectionMatrix, i2.matrixWorldInverse), this._frustum.setFromProjectionMatrix(zh);
  }
}
class Gh extends Ph {
  constructor(e6, t2, i2 = 0, n2 = 2) {
    super(e6, t2), this.isPointLight = true, this.type = "PointLight", this.distance = i2, this.decay = n2, this.shadow = new Vh();
  }
  get power() {
    return 4 * this.intensity * Math.PI;
  }
  set power(e6) {
    this.intensity = e6 / (4 * Math.PI);
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.distance = e6.distance, this.decay = e6.decay, this.shadow = e6.shadow.clone(), this;
  }
}
class qh extends Nh {
  constructor() {
    super(new ls(-5, 5, 5, -5, 0.5, 500)), this.isDirectionalLightShadow = true;
  }
}
class $h extends Ph {
  constructor(e6, t2) {
    super(e6, t2), this.isDirectionalLight = true, this.type = "DirectionalLight", this.position.copy(So.DEFAULT_UP), this.updateMatrix(), this.target = new So(), this.shadow = new qh();
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e6) {
    return super.copy(e6), this.target = e6.target.clone(), this.shadow = e6.shadow.clone(), this;
  }
}
class Wh {
  constructor() {
    this.isSphericalHarmonics3 = true, this.coefficients = [];
    for (let e6 = 0; e6 < 9; e6++) this.coefficients.push(new yn());
  }
  set(e6) {
    for (let t2 = 0; t2 < 9; t2++) this.coefficients[t2].copy(e6[t2]);
    return this;
  }
  zero() {
    for (let e6 = 0; e6 < 9; e6++) this.coefficients[e6].set(0, 0, 0);
    return this;
  }
  getAt(e6, t2) {
    const i2 = e6.x, n2 = e6.y, o2 = e6.z, r2 = this.coefficients;
    return t2.copy(r2[0]).multiplyScalar(0.282095), t2.addScaledVector(r2[1], 0.488603 * n2), t2.addScaledVector(r2[2], 0.488603 * o2), t2.addScaledVector(r2[3], 0.488603 * i2), t2.addScaledVector(r2[4], i2 * n2 * 1.092548), t2.addScaledVector(r2[5], n2 * o2 * 1.092548), t2.addScaledVector(r2[6], 0.315392 * (3 * o2 * o2 - 1)), t2.addScaledVector(r2[7], i2 * o2 * 1.092548), t2.addScaledVector(r2[8], 0.546274 * (i2 * i2 - n2 * n2)), t2;
  }
  getIrradianceAt(e6, t2) {
    const i2 = e6.x, n2 = e6.y, o2 = e6.z, r2 = this.coefficients;
    return t2.copy(r2[0]).multiplyScalar(0.886227), t2.addScaledVector(r2[1], 1.023328 * n2), t2.addScaledVector(r2[2], 1.023328 * o2), t2.addScaledVector(r2[3], 1.023328 * i2), t2.addScaledVector(r2[4], 0.858086 * i2 * n2), t2.addScaledVector(r2[5], 0.858086 * n2 * o2), t2.addScaledVector(r2[6], 0.743125 * o2 * o2 - 0.247708), t2.addScaledVector(r2[7], 0.858086 * i2 * o2), t2.addScaledVector(r2[8], 0.429043 * (i2 * i2 - n2 * n2)), t2;
  }
  add(e6) {
    for (let t2 = 0; t2 < 9; t2++) this.coefficients[t2].add(e6.coefficients[t2]);
    return this;
  }
  addScaledSH(e6, t2) {
    for (let i2 = 0; i2 < 9; i2++) this.coefficients[i2].addScaledVector(e6.coefficients[i2], t2);
    return this;
  }
  scale(e6) {
    for (let t2 = 0; t2 < 9; t2++) this.coefficients[t2].multiplyScalar(e6);
    return this;
  }
  lerp(e6, t2) {
    for (let i2 = 0; i2 < 9; i2++) this.coefficients[i2].lerp(e6.coefficients[i2], t2);
    return this;
  }
  equals(e6) {
    for (let t2 = 0; t2 < 9; t2++) if (!this.coefficients[t2].equals(e6.coefficients[t2])) return false;
    return true;
  }
  copy(e6) {
    return this.set(e6.coefficients);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  fromArray(e6, t2 = 0) {
    const i2 = this.coefficients;
    for (let n2 = 0; n2 < 9; n2++) i2[n2].fromArray(e6, t2 + 3 * n2);
    return this;
  }
  toArray(e6 = [], t2 = 0) {
    const i2 = this.coefficients;
    for (let n2 = 0; n2 < 9; n2++) i2[n2].toArray(e6, t2 + 3 * n2);
    return e6;
  }
  static getBasisAt(e6, t2) {
    const i2 = e6.x, n2 = e6.y, o2 = e6.z;
    t2[0] = 0.282095, t2[1] = 0.488603 * n2, t2[2] = 0.488603 * o2, t2[3] = 0.488603 * i2, t2[4] = 1.092548 * i2 * n2, t2[5] = 1.092548 * n2 * o2, t2[6] = 0.315392 * (3 * o2 * o2 - 1), t2[7] = 1.092548 * i2 * o2, t2[8] = 0.546274 * (i2 * i2 - n2 * n2);
  }
}
class jh extends Ph {
  constructor(e6 = new Wh(), t2 = 1) {
    super(void 0, t2), this.isLightProbe = true, this.sh = e6;
  }
  copy(e6) {
    return super.copy(e6), this.sh.copy(e6.sh), this;
  }
  fromJSON(e6) {
    return this.intensity = e6.intensity, this.sh.fromArray(e6.sh), this;
  }
  toJSON(e6) {
    const t2 = super.toJSON(e6);
    return t2.object.sh = this.sh.toArray(), t2;
  }
}
class Xh {
  static decodeText(e6) {
    if (console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."), "undefined" != typeof TextDecoder) return new TextDecoder().decode(e6);
    let t2 = "";
    for (let i2 = 0, n2 = e6.length; i2 < n2; i2++) t2 += String.fromCharCode(e6[i2]);
    try {
      return decodeURIComponent(escape(t2));
    } catch (e7) {
      return t2;
    }
  }
  static extractUrlBase(e6) {
    const t2 = e6.lastIndexOf("/");
    return -1 === t2 ? "./" : e6.slice(0, t2 + 1);
  }
  static resolveURL(e6, t2) {
    return "string" != typeof e6 || "" === e6 ? "" : (/^https?:\/\//i.test(t2) && /^\//.test(e6) && (t2 = t2.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e6) || /^data:.*,.*$/i.test(e6) || /^blob:.*$/i.test(e6) ? e6 : t2 + e6);
  }
}
class Yh extends Eh {
  constructor(e6) {
    super(e6), this.isImageBitmapLoader = true, "undefined" == typeof createImageBitmap && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), "undefined" == typeof fetch && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), this.options = { premultiplyAlpha: "none" };
  }
  setOptions(e6) {
    return this.options = e6, this;
  }
  load(e6, t2, i2, n2) {
    void 0 === e6 && (e6 = ""), void 0 !== this.path && (e6 = this.path + e6), e6 = this.manager.resolveURL(e6);
    const o2 = this, r2 = xh.get(e6);
    if (void 0 !== r2) return o2.manager.itemStart(e6), r2.then ? void r2.then((i3) => {
      t2 && t2(i3), o2.manager.itemEnd(e6);
    }).catch((e7) => {
      n2 && n2(e7);
    }) : (setTimeout(function() {
      t2 && t2(r2), o2.manager.itemEnd(e6);
    }, 0), r2);
    const s2 = {};
    s2.credentials = "anonymous" === this.crossOrigin ? "same-origin" : "include", s2.headers = this.requestHeader;
    const a2 = fetch(e6, s2).then(function(e7) {
      return e7.blob();
    }).then(function(e7) {
      return createImageBitmap(e7, Object.assign(o2.options, { colorSpaceConversion: "none" }));
    }).then(function(i3) {
      return xh.add(e6, i3), t2 && t2(i3), o2.manager.itemEnd(e6), i3;
    }).catch(function(t3) {
      n2 && n2(t3), xh.remove(e6), o2.manager.itemError(e6), o2.manager.itemEnd(e6);
    });
    xh.add(e6, a2), o2.manager.itemStart(e6);
  }
}
class Kh {
  constructor(e6, t2, i2) {
    let n2, o2, r2;
    switch (this.binding = e6, this.valueSize = i2, t2) {
      case "quaternion":
        n2 = this._slerp, o2 = this._slerpAdditive, r2 = this._setAdditiveIdentityQuaternion, this.buffer = new Float64Array(6 * i2), this._workIndex = 5;
        break;
      case "string":
      case "bool":
        n2 = this._select, o2 = this._select, r2 = this._setAdditiveIdentityOther, this.buffer = new Array(5 * i2);
        break;
      default:
        n2 = this._lerp, o2 = this._lerpAdditive, r2 = this._setAdditiveIdentityNumeric, this.buffer = new Float64Array(5 * i2);
    }
    this._mixBufferRegion = n2, this._mixBufferRegionAdditive = o2, this._setIdentity = r2, this._origIndex = 3, this._addIndex = 4, this.cumulativeWeight = 0, this.cumulativeWeightAdditive = 0, this.useCount = 0, this.referenceCount = 0;
  }
  accumulate(e6, t2) {
    const i2 = this.buffer, n2 = this.valueSize, o2 = e6 * n2 + n2;
    let r2 = this.cumulativeWeight;
    if (0 === r2) {
      for (let e7 = 0; e7 !== n2; ++e7) i2[o2 + e7] = i2[e7];
      r2 = t2;
    } else {
      r2 += t2;
      const e7 = t2 / r2;
      this._mixBufferRegion(i2, o2, 0, e7, n2);
    }
    this.cumulativeWeight = r2;
  }
  accumulateAdditive(e6) {
    const t2 = this.buffer, i2 = this.valueSize, n2 = i2 * this._addIndex;
    0 === this.cumulativeWeightAdditive && this._setIdentity(), this._mixBufferRegionAdditive(t2, n2, 0, e6, i2), this.cumulativeWeightAdditive += e6;
  }
  apply(e6) {
    const t2 = this.valueSize, i2 = this.buffer, n2 = e6 * t2 + t2, o2 = this.cumulativeWeight, r2 = this.cumulativeWeightAdditive, s2 = this.binding;
    if (this.cumulativeWeight = 0, this.cumulativeWeightAdditive = 0, o2 < 1) {
      const e7 = t2 * this._origIndex;
      this._mixBufferRegion(i2, n2, e7, 1 - o2, t2);
    }
    r2 > 0 && this._mixBufferRegionAdditive(i2, n2, this._addIndex * t2, 1, t2);
    for (let e7 = t2, o3 = t2 + t2; e7 !== o3; ++e7) if (i2[e7] !== i2[e7 + t2]) {
      s2.setValue(i2, n2);
      break;
    }
  }
  saveOriginalState() {
    const e6 = this.binding, t2 = this.buffer, i2 = this.valueSize, n2 = i2 * this._origIndex;
    e6.getValue(t2, n2);
    for (let e7 = i2, o2 = n2; e7 !== o2; ++e7) t2[e7] = t2[n2 + e7 % i2];
    this._setIdentity(), this.cumulativeWeight = 0, this.cumulativeWeightAdditive = 0;
  }
  restoreOriginalState() {
    const e6 = 3 * this.valueSize;
    this.binding.setValue(this.buffer, e6);
  }
  _setAdditiveIdentityNumeric() {
    const e6 = this._addIndex * this.valueSize, t2 = e6 + this.valueSize;
    for (let i2 = e6; i2 < t2; i2++) this.buffer[i2] = 0;
  }
  _setAdditiveIdentityQuaternion() {
    this._setAdditiveIdentityNumeric(), this.buffer[this._addIndex * this.valueSize + 3] = 1;
  }
  _setAdditiveIdentityOther() {
    const e6 = this._origIndex * this.valueSize, t2 = this._addIndex * this.valueSize;
    for (let i2 = 0; i2 < this.valueSize; i2++) this.buffer[t2 + i2] = this.buffer[e6 + i2];
  }
  _select(e6, t2, i2, n2, o2) {
    if (n2 >= 0.5) for (let n3 = 0; n3 !== o2; ++n3) e6[t2 + n3] = e6[i2 + n3];
  }
  _slerp(e6, t2, i2, n2) {
    bn.slerpFlat(e6, t2, e6, t2, e6, i2, n2);
  }
  _slerpAdditive(e6, t2, i2, n2, o2) {
    const r2 = this._workIndex * o2;
    bn.multiplyQuaternionsFlat(e6, r2, e6, t2, e6, i2), bn.slerpFlat(e6, t2, e6, t2, e6, r2, n2);
  }
  _lerp(e6, t2, i2, n2, o2) {
    const r2 = 1 - n2;
    for (let s2 = 0; s2 !== o2; ++s2) {
      const o3 = t2 + s2;
      e6[o3] = e6[o3] * r2 + e6[i2 + s2] * n2;
    }
  }
  _lerpAdditive(e6, t2, i2, n2, o2) {
    for (let r2 = 0; r2 !== o2; ++r2) {
      const o3 = t2 + r2;
      e6[o3] = e6[o3] + e6[i2 + r2] * n2;
    }
  }
}
const Zh = "\\[\\]\\.:\\/", Jh = new RegExp("[" + Zh + "]", "g"), eu = "[^" + Zh + "]", tu = "[^" + Zh.replace("\\.", "") + "]", iu = new RegExp("^" + /((?:WC+[\/:])*)/.source.replace("WC", eu) + /(WCOD+)?/.source.replace("WCOD", tu) + /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", eu) + /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", eu) + "$"), nu = ["material", "materials", "bones", "map"];
class ou {
  constructor(e6, t2, i2) {
    this.path = t2, this.parsedPath = i2 || ou.parseTrackName(t2), this.node = ou.findNode(e6, this.parsedPath.nodeName), this.rootNode = e6, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
  static create(e6, t2, i2) {
    return e6 && e6.isAnimationObjectGroup ? new ou.Composite(e6, t2, i2) : new ou(e6, t2, i2);
  }
  static sanitizeNodeName(e6) {
    return e6.replace(/\s/g, "_").replace(Jh, "");
  }
  static parseTrackName(e6) {
    const t2 = iu.exec(e6);
    if (null === t2) throw new Error("PropertyBinding: Cannot parse trackName: " + e6);
    const i2 = { nodeName: t2[2], objectName: t2[3], objectIndex: t2[4], propertyName: t2[5], propertyIndex: t2[6] }, n2 = i2.nodeName && i2.nodeName.lastIndexOf(".");
    if (void 0 !== n2 && -1 !== n2) {
      const e7 = i2.nodeName.substring(n2 + 1);
      -1 !== nu.indexOf(e7) && (i2.nodeName = i2.nodeName.substring(0, n2), i2.objectName = e7);
    }
    if (null === i2.propertyName || 0 === i2.propertyName.length) throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e6);
    return i2;
  }
  static findNode(e6, t2) {
    if (void 0 === t2 || "" === t2 || "." === t2 || -1 === t2 || t2 === e6.name || t2 === e6.uuid) return e6;
    if (e6.skeleton) {
      const i2 = e6.skeleton.getBoneByName(t2);
      if (void 0 !== i2) return i2;
    }
    if (e6.children) {
      const i2 = function(e7) {
        for (let n3 = 0; n3 < e7.length; n3++) {
          const o2 = e7[n3];
          if (o2.name === t2 || o2.uuid === t2) return o2;
          const r2 = i2(o2.children);
          if (r2) return r2;
        }
        return null;
      }, n2 = i2(e6.children);
      if (n2) return n2;
    }
    return null;
  }
  _getValue_unavailable() {
  }
  _setValue_unavailable() {
  }
  _getValue_direct(e6, t2) {
    e6[t2] = this.targetObject[this.propertyName];
  }
  _getValue_array(e6, t2) {
    const i2 = this.resolvedProperty;
    for (let n2 = 0, o2 = i2.length; n2 !== o2; ++n2) e6[t2++] = i2[n2];
  }
  _getValue_arrayElement(e6, t2) {
    e6[t2] = this.resolvedProperty[this.propertyIndex];
  }
  _getValue_toArray(e6, t2) {
    this.resolvedProperty.toArray(e6, t2);
  }
  _setValue_direct(e6, t2) {
    this.targetObject[this.propertyName] = e6[t2];
  }
  _setValue_direct_setNeedsUpdate(e6, t2) {
    this.targetObject[this.propertyName] = e6[t2], this.targetObject.needsUpdate = true;
  }
  _setValue_direct_setMatrixWorldNeedsUpdate(e6, t2) {
    this.targetObject[this.propertyName] = e6[t2], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _setValue_array(e6, t2) {
    const i2 = this.resolvedProperty;
    for (let n2 = 0, o2 = i2.length; n2 !== o2; ++n2) i2[n2] = e6[t2++];
  }
  _setValue_array_setNeedsUpdate(e6, t2) {
    const i2 = this.resolvedProperty;
    for (let n2 = 0, o2 = i2.length; n2 !== o2; ++n2) i2[n2] = e6[t2++];
    this.targetObject.needsUpdate = true;
  }
  _setValue_array_setMatrixWorldNeedsUpdate(e6, t2) {
    const i2 = this.resolvedProperty;
    for (let n2 = 0, o2 = i2.length; n2 !== o2; ++n2) i2[n2] = e6[t2++];
    this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _setValue_arrayElement(e6, t2) {
    this.resolvedProperty[this.propertyIndex] = e6[t2];
  }
  _setValue_arrayElement_setNeedsUpdate(e6, t2) {
    this.resolvedProperty[this.propertyIndex] = e6[t2], this.targetObject.needsUpdate = true;
  }
  _setValue_arrayElement_setMatrixWorldNeedsUpdate(e6, t2) {
    this.resolvedProperty[this.propertyIndex] = e6[t2], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _setValue_fromArray(e6, t2) {
    this.resolvedProperty.fromArray(e6, t2);
  }
  _setValue_fromArray_setNeedsUpdate(e6, t2) {
    this.resolvedProperty.fromArray(e6, t2), this.targetObject.needsUpdate = true;
  }
  _setValue_fromArray_setMatrixWorldNeedsUpdate(e6, t2) {
    this.resolvedProperty.fromArray(e6, t2), this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _getValue_unbound(e6, t2) {
    this.bind(), this.getValue(e6, t2);
  }
  _setValue_unbound(e6, t2) {
    this.bind(), this.setValue(e6, t2);
  }
  bind() {
    let e6 = this.node;
    const t2 = this.parsedPath, i2 = t2.objectName, n2 = t2.propertyName;
    let o2 = t2.propertyIndex;
    if (e6 || (e6 = ou.findNode(this.rootNode, t2.nodeName), this.node = e6), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, !e6) return void console.warn("THREE.PropertyBinding: No target node found for track: " + this.path + ".");
    if (i2) {
      let n3 = t2.objectIndex;
      switch (i2) {
        case "materials":
          if (!e6.material) return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
          if (!e6.material.materials) return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
          e6 = e6.material.materials;
          break;
        case "bones":
          if (!e6.skeleton) return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
          e6 = e6.skeleton.bones;
          for (let t3 = 0; t3 < e6.length; t3++) if (e6[t3].name === n3) {
            n3 = t3;
            break;
          }
          break;
        case "map":
          if ("map" in e6) {
            e6 = e6.map;
            break;
          }
          if (!e6.material) return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
          if (!e6.material.map) return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.", this);
          e6 = e6.material.map;
          break;
        default:
          if (void 0 === e6[i2]) return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
          e6 = e6[i2];
      }
      if (void 0 !== n3) {
        if (void 0 === e6[n3]) return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, e6);
        e6 = e6[n3];
      }
    }
    const r2 = e6[n2];
    if (void 0 === r2) {
      const i3 = t2.nodeName;
      return void console.error("THREE.PropertyBinding: Trying to update property for track: " + i3 + "." + n2 + " but it wasn't found.", e6);
    }
    let s2 = this.Versioning.None;
    this.targetObject = e6, void 0 !== e6.needsUpdate ? s2 = this.Versioning.NeedsUpdate : void 0 !== e6.matrixWorldNeedsUpdate && (s2 = this.Versioning.MatrixWorldNeedsUpdate);
    let a2 = this.BindingType.Direct;
    if (void 0 !== o2) {
      if ("morphTargetInfluences" === n2) {
        if (!e6.geometry) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
        if (!e6.geometry.morphAttributes) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
        void 0 !== e6.morphTargetDictionary[o2] && (o2 = e6.morphTargetDictionary[o2]);
      }
      a2 = this.BindingType.ArrayElement, this.resolvedProperty = r2, this.propertyIndex = o2;
    } else void 0 !== r2.fromArray && void 0 !== r2.toArray ? (a2 = this.BindingType.HasFromToArray, this.resolvedProperty = r2) : Array.isArray(r2) ? (a2 = this.BindingType.EntireArray, this.resolvedProperty = r2) : this.propertyName = n2;
    this.getValue = this.GetterByBindingType[a2], this.setValue = this.SetterByBindingTypeAndVersioning[a2][s2];
  }
  unbind() {
    this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
}
ou.Composite = class {
  constructor(e6, t2, i2) {
    const n2 = i2 || ou.parseTrackName(t2);
    this._targetGroup = e6, this._bindings = e6.subscribe_(t2, n2);
  }
  getValue(e6, t2) {
    this.bind();
    const i2 = this._targetGroup.nCachedObjects_, n2 = this._bindings[i2];
    void 0 !== n2 && n2.getValue(e6, t2);
  }
  setValue(e6, t2) {
    const i2 = this._bindings;
    for (let n2 = this._targetGroup.nCachedObjects_, o2 = i2.length; n2 !== o2; ++n2) i2[n2].setValue(e6, t2);
  }
  bind() {
    const e6 = this._bindings;
    for (let t2 = this._targetGroup.nCachedObjects_, i2 = e6.length; t2 !== i2; ++t2) e6[t2].bind();
  }
  unbind() {
    const e6 = this._bindings;
    for (let t2 = this._targetGroup.nCachedObjects_, i2 = e6.length; t2 !== i2; ++t2) e6[t2].unbind();
  }
}, ou.prototype.BindingType = { Direct: 0, EntireArray: 1, ArrayElement: 2, HasFromToArray: 3 }, ou.prototype.Versioning = { None: 0, NeedsUpdate: 1, MatrixWorldNeedsUpdate: 2 }, ou.prototype.GetterByBindingType = [ou.prototype._getValue_direct, ou.prototype._getValue_array, ou.prototype._getValue_arrayElement, ou.prototype._getValue_toArray], ou.prototype.SetterByBindingTypeAndVersioning = [[ou.prototype._setValue_direct, ou.prototype._setValue_direct_setNeedsUpdate, ou.prototype._setValue_direct_setMatrixWorldNeedsUpdate], [ou.prototype._setValue_array, ou.prototype._setValue_array_setNeedsUpdate, ou.prototype._setValue_array_setMatrixWorldNeedsUpdate], [ou.prototype._setValue_arrayElement, ou.prototype._setValue_arrayElement_setNeedsUpdate, ou.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate], [ou.prototype._setValue_fromArray, ou.prototype._setValue_fromArray_setNeedsUpdate, ou.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];
class ru {
  constructor(e6, t2, i2 = null, n2 = t2.blendMode) {
    this._mixer = e6, this._clip = t2, this._localRoot = i2, this.blendMode = n2;
    const o2 = t2.tracks, r2 = o2.length, s2 = new Array(r2), a2 = { endingStart: li, endingEnd: li };
    for (let e7 = 0; e7 !== r2; ++e7) {
      const t3 = o2[e7].createInterpolant(null);
      s2[e7] = t3, t3.settings = a2;
    }
    this._interpolantSettings = a2, this._interpolants = s2, this._propertyBindings = new Array(r2), this._cacheIndex = null, this._byClipCacheIndex = null, this._timeScaleInterpolant = null, this._weightInterpolant = null, this.loop = ni, this._loopCount = -1, this._startTime = null, this.time = 0, this.timeScale = 1, this._effectiveTimeScale = 1, this.weight = 1, this._effectiveWeight = 1, this.repetitions = 1 / 0, this.paused = false, this.enabled = true, this.clampWhenFinished = false, this.zeroSlopeAtStart = true, this.zeroSlopeAtEnd = true;
  }
  play() {
    return this._mixer._activateAction(this), this;
  }
  stop() {
    return this._mixer._deactivateAction(this), this.reset();
  }
  reset() {
    return this.paused = false, this.enabled = true, this.time = 0, this._loopCount = -1, this._startTime = null, this.stopFading().stopWarping();
  }
  isRunning() {
    return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this);
  }
  isScheduled() {
    return this._mixer._isActiveAction(this);
  }
  startAt(e6) {
    return this._startTime = e6, this;
  }
  setLoop(e6, t2) {
    return this.loop = e6, this.repetitions = t2, this;
  }
  setEffectiveWeight(e6) {
    return this.weight = e6, this._effectiveWeight = this.enabled ? e6 : 0, this.stopFading();
  }
  getEffectiveWeight() {
    return this._effectiveWeight;
  }
  fadeIn(e6) {
    return this._scheduleFading(e6, 0, 1);
  }
  fadeOut(e6) {
    return this._scheduleFading(e6, 1, 0);
  }
  crossFadeFrom(e6, t2, i2) {
    if (e6.fadeOut(t2), this.fadeIn(t2), i2) {
      const i3 = this._clip.duration, n2 = e6._clip.duration, o2 = n2 / i3, r2 = i3 / n2;
      e6.warp(1, o2, t2), this.warp(r2, 1, t2);
    }
    return this;
  }
  crossFadeTo(e6, t2, i2) {
    return e6.crossFadeFrom(this, t2, i2);
  }
  stopFading() {
    const e6 = this._weightInterpolant;
    return null !== e6 && (this._weightInterpolant = null, this._mixer._takeBackControlInterpolant(e6)), this;
  }
  setEffectiveTimeScale(e6) {
    return this.timeScale = e6, this._effectiveTimeScale = this.paused ? 0 : e6, this.stopWarping();
  }
  getEffectiveTimeScale() {
    return this._effectiveTimeScale;
  }
  setDuration(e6) {
    return this.timeScale = this._clip.duration / e6, this.stopWarping();
  }
  syncWith(e6) {
    return this.time = e6.time, this.timeScale = e6.timeScale, this.stopWarping();
  }
  halt(e6) {
    return this.warp(this._effectiveTimeScale, 0, e6);
  }
  warp(e6, t2, i2) {
    const n2 = this._mixer, o2 = n2.time, r2 = this.timeScale;
    let s2 = this._timeScaleInterpolant;
    null === s2 && (s2 = n2._lendControlInterpolant(), this._timeScaleInterpolant = s2);
    const a2 = s2.parameterPositions, l2 = s2.sampleValues;
    return a2[0] = o2, a2[1] = o2 + i2, l2[0] = e6 / r2, l2[1] = t2 / r2, this;
  }
  stopWarping() {
    const e6 = this._timeScaleInterpolant;
    return null !== e6 && (this._timeScaleInterpolant = null, this._mixer._takeBackControlInterpolant(e6)), this;
  }
  getMixer() {
    return this._mixer;
  }
  getClip() {
    return this._clip;
  }
  getRoot() {
    return this._localRoot || this._mixer._root;
  }
  _update(e6, t2, i2, n2) {
    if (!this.enabled) return void this._updateWeight(e6);
    const o2 = this._startTime;
    if (null !== o2) {
      const n3 = (e6 - o2) * i2;
      n3 < 0 || 0 === i2 ? t2 = 0 : (this._startTime = null, t2 = i2 * n3);
    }
    t2 *= this._updateTimeScale(e6);
    const r2 = this._updateTime(t2), s2 = this._updateWeight(e6);
    if (s2 > 0) {
      const e7 = this._interpolants, t3 = this._propertyBindings;
      if (2501 === this.blendMode) for (let i3 = 0, n3 = e7.length; i3 !== n3; ++i3) e7[i3].evaluate(r2), t3[i3].accumulateAdditive(s2);
      else for (let i3 = 0, o3 = e7.length; i3 !== o3; ++i3) e7[i3].evaluate(r2), t3[i3].accumulate(n2, s2);
    }
  }
  _updateWeight(e6) {
    let t2 = 0;
    if (this.enabled) {
      t2 = this.weight;
      const i2 = this._weightInterpolant;
      if (null !== i2) {
        const n2 = i2.evaluate(e6)[0];
        t2 *= n2, e6 > i2.parameterPositions[1] && (this.stopFading(), 0 === n2 && (this.enabled = false));
      }
    }
    return this._effectiveWeight = t2, t2;
  }
  _updateTimeScale(e6) {
    let t2 = 0;
    if (!this.paused) {
      t2 = this.timeScale;
      const i2 = this._timeScaleInterpolant;
      if (null !== i2) {
        t2 *= i2.evaluate(e6)[0], e6 > i2.parameterPositions[1] && (this.stopWarping(), 0 === t2 ? this.paused = true : this.timeScale = t2);
      }
    }
    return this._effectiveTimeScale = t2, t2;
  }
  _updateTime(e6) {
    const t2 = this._clip.duration, i2 = this.loop;
    let n2 = this.time + e6, o2 = this._loopCount;
    const r2 = i2 === oi;
    if (0 === e6) return -1 === o2 || !r2 || 1 & ~o2 ? n2 : t2 - n2;
    if (2200 === i2) {
      -1 === o2 && (this._loopCount = 0, this._setEndings(true, true, false));
      e: {
        if (n2 >= t2) n2 = t2;
        else {
          if (!(n2 < 0)) {
            this.time = n2;
            break e;
          }
          n2 = 0;
        }
        this.clampWhenFinished ? this.paused = true : this.enabled = false, this.time = n2, this._mixer.dispatchEvent({ type: "finished", action: this, direction: e6 < 0 ? -1 : 1 });
      }
    } else {
      if (-1 === o2 && (e6 >= 0 ? (o2 = 0, this._setEndings(true, 0 === this.repetitions, r2)) : this._setEndings(0 === this.repetitions, true, r2)), n2 >= t2 || n2 < 0) {
        const i3 = Math.floor(n2 / t2);
        n2 -= t2 * i3, o2 += Math.abs(i3);
        const s2 = this.repetitions - o2;
        if (s2 <= 0) this.clampWhenFinished ? this.paused = true : this.enabled = false, n2 = e6 > 0 ? t2 : 0, this.time = n2, this._mixer.dispatchEvent({ type: "finished", action: this, direction: e6 > 0 ? 1 : -1 });
        else {
          if (1 === s2) {
            const t3 = e6 < 0;
            this._setEndings(t3, !t3, r2);
          } else this._setEndings(false, false, r2);
          this._loopCount = o2, this.time = n2, this._mixer.dispatchEvent({ type: "loop", action: this, loopDelta: i3 });
        }
      } else this.time = n2;
      if (r2 && !(1 & ~o2)) return t2 - n2;
    }
    return n2;
  }
  _setEndings(e6, t2, i2) {
    const n2 = this._interpolantSettings;
    i2 ? (n2.endingStart = ci, n2.endingEnd = ci) : (n2.endingStart = e6 ? this.zeroSlopeAtStart ? ci : li : hi, n2.endingEnd = t2 ? this.zeroSlopeAtEnd ? ci : li : hi);
  }
  _scheduleFading(e6, t2, i2) {
    const n2 = this._mixer, o2 = n2.time;
    let r2 = this._weightInterpolant;
    null === r2 && (r2 = n2._lendControlInterpolant(), this._weightInterpolant = r2);
    const s2 = r2.parameterPositions, a2 = r2.sampleValues;
    return s2[0] = o2, a2[0] = t2, s2[1] = o2 + e6, a2[1] = i2, this;
  }
}
const su = new Float32Array(1);
class au extends Di {
  constructor(e6) {
    super(), this._root = e6, this._initMemoryManager(), this._accuIndex = 0, this.time = 0, this.timeScale = 1;
  }
  _bindAction(e6, t2) {
    const i2 = e6._localRoot || this._root, n2 = e6._clip.tracks, o2 = n2.length, r2 = e6._propertyBindings, s2 = e6._interpolants, a2 = i2.uuid, l2 = this._bindingsByRootAndName;
    let c2 = l2[a2];
    void 0 === c2 && (c2 = {}, l2[a2] = c2);
    for (let e7 = 0; e7 !== o2; ++e7) {
      const o3 = n2[e7], l3 = o3.name;
      let h2 = c2[l3];
      if (void 0 !== h2) ++h2.referenceCount, r2[e7] = h2;
      else {
        if (h2 = r2[e7], void 0 !== h2) {
          null === h2._cacheIndex && (++h2.referenceCount, this._addInactiveBinding(h2, a2, l3));
          continue;
        }
        const n3 = t2 && t2._propertyBindings[e7].binding.parsedPath;
        h2 = new Kh(ou.create(i2, l3, n3), o3.ValueTypeName, o3.getValueSize()), ++h2.referenceCount, this._addInactiveBinding(h2, a2, l3), r2[e7] = h2;
      }
      s2[e7].resultBuffer = h2.buffer;
    }
  }
  _activateAction(e6) {
    if (!this._isActiveAction(e6)) {
      if (null === e6._cacheIndex) {
        const t3 = (e6._localRoot || this._root).uuid, i2 = e6._clip.uuid, n2 = this._actionsByClip[i2];
        this._bindAction(e6, n2 && n2.knownActions[0]), this._addInactiveAction(e6, i2, t3);
      }
      const t2 = e6._propertyBindings;
      for (let e7 = 0, i2 = t2.length; e7 !== i2; ++e7) {
        const i3 = t2[e7];
        0 == i3.useCount++ && (this._lendBinding(i3), i3.saveOriginalState());
      }
      this._lendAction(e6);
    }
  }
  _deactivateAction(e6) {
    if (this._isActiveAction(e6)) {
      const t2 = e6._propertyBindings;
      for (let e7 = 0, i2 = t2.length; e7 !== i2; ++e7) {
        const i3 = t2[e7];
        0 == --i3.useCount && (i3.restoreOriginalState(), this._takeBackBinding(i3));
      }
      this._takeBackAction(e6);
    }
  }
  _initMemoryManager() {
    this._actions = [], this._nActiveActions = 0, this._actionsByClip = {}, this._bindings = [], this._nActiveBindings = 0, this._bindingsByRootAndName = {}, this._controlInterpolants = [], this._nActiveControlInterpolants = 0;
    const e6 = this;
    this.stats = { actions: { get total() {
      return e6._actions.length;
    }, get inUse() {
      return e6._nActiveActions;
    } }, bindings: { get total() {
      return e6._bindings.length;
    }, get inUse() {
      return e6._nActiveBindings;
    } }, controlInterpolants: { get total() {
      return e6._controlInterpolants.length;
    }, get inUse() {
      return e6._nActiveControlInterpolants;
    } } };
  }
  _isActiveAction(e6) {
    const t2 = e6._cacheIndex;
    return null !== t2 && t2 < this._nActiveActions;
  }
  _addInactiveAction(e6, t2, i2) {
    const n2 = this._actions, o2 = this._actionsByClip;
    let r2 = o2[t2];
    if (void 0 === r2) r2 = { knownActions: [e6], actionByRoot: {} }, e6._byClipCacheIndex = 0, o2[t2] = r2;
    else {
      const t3 = r2.knownActions;
      e6._byClipCacheIndex = t3.length, t3.push(e6);
    }
    e6._cacheIndex = n2.length, n2.push(e6), r2.actionByRoot[i2] = e6;
  }
  _removeInactiveAction(e6) {
    const t2 = this._actions, i2 = t2[t2.length - 1], n2 = e6._cacheIndex;
    i2._cacheIndex = n2, t2[n2] = i2, t2.pop(), e6._cacheIndex = null;
    const o2 = e6._clip.uuid, r2 = this._actionsByClip, s2 = r2[o2], a2 = s2.knownActions, l2 = a2[a2.length - 1], c2 = e6._byClipCacheIndex;
    l2._byClipCacheIndex = c2, a2[c2] = l2, a2.pop(), e6._byClipCacheIndex = null;
    delete s2.actionByRoot[(e6._localRoot || this._root).uuid], 0 === a2.length && delete r2[o2], this._removeInactiveBindingsForAction(e6);
  }
  _removeInactiveBindingsForAction(e6) {
    const t2 = e6._propertyBindings;
    for (let e7 = 0, i2 = t2.length; e7 !== i2; ++e7) {
      const i3 = t2[e7];
      0 == --i3.referenceCount && this._removeInactiveBinding(i3);
    }
  }
  _lendAction(e6) {
    const t2 = this._actions, i2 = e6._cacheIndex, n2 = this._nActiveActions++, o2 = t2[n2];
    e6._cacheIndex = n2, t2[n2] = e6, o2._cacheIndex = i2, t2[i2] = o2;
  }
  _takeBackAction(e6) {
    const t2 = this._actions, i2 = e6._cacheIndex, n2 = --this._nActiveActions, o2 = t2[n2];
    e6._cacheIndex = n2, t2[n2] = e6, o2._cacheIndex = i2, t2[i2] = o2;
  }
  _addInactiveBinding(e6, t2, i2) {
    const n2 = this._bindingsByRootAndName, o2 = this._bindings;
    let r2 = n2[t2];
    void 0 === r2 && (r2 = {}, n2[t2] = r2), r2[i2] = e6, e6._cacheIndex = o2.length, o2.push(e6);
  }
  _removeInactiveBinding(e6) {
    const t2 = this._bindings, i2 = e6.binding, n2 = i2.rootNode.uuid, o2 = i2.path, r2 = this._bindingsByRootAndName, s2 = r2[n2], a2 = t2[t2.length - 1], l2 = e6._cacheIndex;
    a2._cacheIndex = l2, t2[l2] = a2, t2.pop(), delete s2[o2], 0 === Object.keys(s2).length && delete r2[n2];
  }
  _lendBinding(e6) {
    const t2 = this._bindings, i2 = e6._cacheIndex, n2 = this._nActiveBindings++, o2 = t2[n2];
    e6._cacheIndex = n2, t2[n2] = e6, o2._cacheIndex = i2, t2[i2] = o2;
  }
  _takeBackBinding(e6) {
    const t2 = this._bindings, i2 = e6._cacheIndex, n2 = --this._nActiveBindings, o2 = t2[n2];
    e6._cacheIndex = n2, t2[n2] = e6, o2._cacheIndex = i2, t2[i2] = o2;
  }
  _lendControlInterpolant() {
    const e6 = this._controlInterpolants, t2 = this._nActiveControlInterpolants++;
    let i2 = e6[t2];
    return void 0 === i2 && (i2 = new uh(new Float32Array(2), new Float32Array(2), 1, su), i2.__cacheIndex = t2, e6[t2] = i2), i2;
  }
  _takeBackControlInterpolant(e6) {
    const t2 = this._controlInterpolants, i2 = e6.__cacheIndex, n2 = --this._nActiveControlInterpolants, o2 = t2[n2];
    e6.__cacheIndex = n2, t2[n2] = e6, o2.__cacheIndex = i2, t2[i2] = o2;
  }
  clipAction(e6, t2, i2) {
    const n2 = t2 || this._root, o2 = n2.uuid;
    let r2 = "string" == typeof e6 ? yh.findByName(n2, e6) : e6;
    const s2 = null !== r2 ? r2.uuid : e6, a2 = this._actionsByClip[s2];
    let l2 = null;
    if (void 0 === i2 && (i2 = null !== r2 ? r2.blendMode : ui), void 0 !== a2) {
      const e7 = a2.actionByRoot[o2];
      if (void 0 !== e7 && e7.blendMode === i2) return e7;
      l2 = a2.knownActions[0], null === r2 && (r2 = l2._clip);
    }
    if (null === r2) return null;
    const c2 = new ru(this, r2, t2, i2);
    return this._bindAction(c2, l2), this._addInactiveAction(c2, s2, o2), c2;
  }
  existingAction(e6, t2) {
    const i2 = t2 || this._root, n2 = i2.uuid, o2 = "string" == typeof e6 ? yh.findByName(i2, e6) : e6, r2 = o2 ? o2.uuid : e6, s2 = this._actionsByClip[r2];
    return void 0 !== s2 && s2.actionByRoot[n2] || null;
  }
  stopAllAction() {
    const e6 = this._actions;
    for (let t2 = this._nActiveActions - 1; t2 >= 0; --t2) e6[t2].stop();
    return this;
  }
  update(e6) {
    e6 *= this.timeScale;
    const t2 = this._actions, i2 = this._nActiveActions, n2 = this.time += e6, o2 = Math.sign(e6), r2 = this._accuIndex ^= 1;
    for (let s3 = 0; s3 !== i2; ++s3) {
      t2[s3]._update(n2, e6, o2, r2);
    }
    const s2 = this._bindings, a2 = this._nActiveBindings;
    for (let e7 = 0; e7 !== a2; ++e7) s2[e7].apply(r2);
    return this;
  }
  setTime(e6) {
    this.time = 0;
    for (let e7 = 0; e7 < this._actions.length; e7++) this._actions[e7].time = 0;
    return this.update(e6);
  }
  getRoot() {
    return this._root;
  }
  uncacheClip(e6) {
    const t2 = this._actions, i2 = e6.uuid, n2 = this._actionsByClip, o2 = n2[i2];
    if (void 0 !== o2) {
      const e7 = o2.knownActions;
      for (let i3 = 0, n3 = e7.length; i3 !== n3; ++i3) {
        const n4 = e7[i3];
        this._deactivateAction(n4);
        const o3 = n4._cacheIndex, r2 = t2[t2.length - 1];
        n4._cacheIndex = null, n4._byClipCacheIndex = null, r2._cacheIndex = o3, t2[o3] = r2, t2.pop(), this._removeInactiveBindingsForAction(n4);
      }
      delete n2[i2];
    }
  }
  uncacheRoot(e6) {
    const t2 = e6.uuid, i2 = this._actionsByClip;
    for (const e7 in i2) {
      const n3 = i2[e7].actionByRoot[t2];
      void 0 !== n3 && (this._deactivateAction(n3), this._removeInactiveAction(n3));
    }
    const n2 = this._bindingsByRootAndName[t2];
    if (void 0 !== n2) for (const e7 in n2) {
      const t3 = n2[e7];
      t3.restoreOriginalState(), this._removeInactiveBinding(t3);
    }
  }
  uncacheAction(e6, t2) {
    const i2 = this.existingAction(e6, t2);
    null !== i2 && (this._deactivateAction(i2), this._removeInactiveAction(i2));
  }
}
class lu {
  constructor(e6) {
    this.value = e6;
  }
  clone() {
    return new lu(void 0 === this.value.clone ? this.value : this.value.clone());
  }
}
const cu = new Kn();
class hu {
  constructor(e6, t2, i2 = 0, n2 = 1 / 0) {
    this.ray = new Yn(e6, t2), this.near = i2, this.far = n2, this.camera = null, this.layers = new lo(), this.params = { Mesh: {}, Line: { threshold: 1 }, LOD: {}, Points: { threshold: 1 }, Sprite: {} };
  }
  set(e6, t2) {
    this.ray.set(e6, t2);
  }
  setFromCamera(e6, t2) {
    t2.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(t2.matrixWorld), this.ray.direction.set(e6.x, e6.y, 0.5).unproject(t2).sub(this.ray.origin).normalize(), this.camera = t2) : t2.isOrthographicCamera ? (this.ray.origin.set(e6.x, e6.y, (t2.near + t2.far) / (t2.near - t2.far)).unproject(t2), this.ray.direction.set(0, 0, -1).transformDirection(t2.matrixWorld), this.camera = t2) : console.error("THREE.Raycaster: Unsupported camera type: " + t2.type);
  }
  setFromXRController(e6) {
    return cu.identity().extractRotation(e6.matrixWorld), this.ray.origin.setFromMatrixPosition(e6.matrixWorld), this.ray.direction.set(0, 0, -1).applyMatrix4(cu), this;
  }
  intersectObject(e6, t2 = true, i2 = []) {
    return du(e6, this, i2, t2), i2.sort(uu), i2;
  }
  intersectObjects(e6, t2 = true, i2 = []) {
    for (let n2 = 0, o2 = e6.length; n2 < o2; n2++) du(e6[n2], this, i2, t2);
    return i2.sort(uu), i2;
  }
}
function uu(e6, t2) {
  return e6.distance - t2.distance;
}
function du(e6, t2, i2, n2) {
  let o2 = true;
  if (e6.layers.test(t2.layers)) {
    false === e6.raycast(t2, i2) && (o2 = false);
  }
  if (true === o2 && true === n2) {
    const n3 = e6.children;
    for (let e7 = 0, o3 = n3.length; e7 < o3; e7++) du(n3[e7], t2, i2, true);
  }
}
class pu {
  constructor(e6 = 1, t2 = 0, i2 = 0) {
    return this.radius = e6, this.phi = t2, this.theta = i2, this;
  }
  set(e6, t2, i2) {
    return this.radius = e6, this.phi = t2, this.theta = i2, this;
  }
  copy(e6) {
    return this.radius = e6.radius, this.phi = e6.phi, this.theta = e6.theta, this;
  }
  makeSafe() {
    const e6 = 1e-6;
    return this.phi = Math.max(e6, Math.min(Math.PI - e6, this.phi)), this;
  }
  setFromVector3(e6) {
    return this.setFromCartesianCoords(e6.x, e6.y, e6.z);
  }
  setFromCartesianCoords(e6, t2, i2) {
    return this.radius = Math.sqrt(e6 * e6 + t2 * t2 + i2 * i2), 0 === this.radius ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e6, i2), this.phi = Math.acos(zi(t2 / this.radius, -1, 1))), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
}
const _u = new yn();
let gu, mu;
class fu extends So {
  constructor(e6 = new yn(0, 0, 1), t2 = new yn(0, 0, 0), i2 = 1, n2 = 16776960, o2 = 0.2 * i2, r2 = 0.2 * o2) {
    super(), this.type = "ArrowHelper", void 0 === gu && (gu = new ur(), gu.setAttribute("position", new nr([0, 0, 0, 0, 1, 0], 3)), mu = new eh(0, 0.5, 1, 5, 1), mu.translate(0, -0.5, 0)), this.position.copy(t2), this.line = new Fc(gu, new Ic({ color: n2, toneMapped: false })), this.line.matrixAutoUpdate = false, this.add(this.line), this.cone = new xr(mu, new jo({ color: n2, toneMapped: false })), this.cone.matrixAutoUpdate = false, this.add(this.cone), this.setDirection(e6), this.setLength(i2, o2, r2);
  }
  setDirection(e6) {
    if (e6.y > 0.99999) this.quaternion.set(0, 0, 0, 1);
    else if (e6.y < -0.99999) this.quaternion.set(1, 0, 0, 0);
    else {
      _u.set(e6.z, 0, -e6.x).normalize();
      const t2 = Math.acos(e6.y);
      this.quaternion.setFromAxisAngle(_u, t2);
    }
  }
  setLength(e6, t2 = 0.2 * e6, i2 = 0.2 * t2) {
    this.line.scale.set(1, Math.max(1e-4, e6 - t2), 1), this.line.updateMatrix(), this.cone.scale.set(i2, t2, i2), this.cone.position.y = e6, this.cone.updateMatrix();
  }
  setColor(e6) {
    this.line.material.color.set(e6), this.cone.material.color.set(e6);
  }
  copy(e6) {
    return super.copy(e6, false), this.line.copy(e6.line), this.cone.copy(e6.cone), this;
  }
  dispose() {
    this.line.geometry.dispose(), this.line.material.dispose(), this.cone.geometry.dispose(), this.cone.material.dispose();
  }
}
"undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", { detail: { revision: ge } })), "undefined" != typeof window && (window.__THREE__ ? console.warn("WARNING: Multiple instances of Three.js being imported.") : window.__THREE__ = ge);
const vu = null != navigator.xr && null != self.XRSession && null != navigator.xr.isSessionSupported, Au = vu && null != self.XRSession.prototype.requestHitTestSource, bu = null != self.ResizeObserver, yu = null != self.IntersectionObserver, wu = Au;
(() => {
  const e6 = navigator.userAgent || navigator.vendor || self.opera;
  let t2 = false;
  (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e6) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e6.substr(0, 4))) && (t2 = true);
})();
const xu = /android/i.test(navigator.userAgent), Cu = /iPad|iPhone|iPod/.test(navigator.userAgent) && !self.MSStream || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1, Su = /firefox/i.test(navigator.userAgent), Eu = /OculusBrowser/.test(navigator.userAgent), Tu = xu && !Su && !Eu, Iu = Boolean(window.webkit && window.webkit.messageHandlers), Mu = (() => {
  if (Cu) {
    if (Iu) return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));
    {
      const e6 = document.createElement("a");
      return Boolean(e6.relList && e6.relList.supports && e6.relList.supports("ar"));
    }
  }
  return false;
})(), Bu = (e6) => e6 && "null" !== e6 ? ku(e6) : null, Ru = () => {
  if (wu) return;
  const e6 = [];
  throw vu || e6.push("WebXR Device API"), Au || e6.push("WebXR Hit Test API"), new Error(`The following APIs are required for AR, but are missing in this browser: ${e6.join(", ")}`);
}, ku = (e6) => new URL(e6, window.location.toString()).toString(), Pu = (e6, t2) => {
  let i2 = null;
  return (...n2) => {
    null != i2 && self.clearTimeout(i2), i2 = self.setTimeout(() => {
      i2 = null, e6(...n2);
    }, t2);
  };
}, Du = (e6, t2, i2) => Math.max(t2, Math.min(i2, e6)), Lu = (() => {
  const e6 = new RegExp("[?&]model-viewer-debug-mode(&|$)");
  return () => self.ModelViewerElement && self.ModelViewerElement.debugMode || self.location && self.location.search && self.location.search.match(e6);
})();
var Fu = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const Nu = Symbol("currentEnvironmentMap"), Ou = Symbol("currentBackground"), Uu = Symbol("updateEnvironment"), zu = Symbol("cancelEnvironmentUpdate"), Hu = U`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`, Qu = U`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`, Vu = U`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`, Gu = U`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${Vu}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${Qu}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${Hu}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`, qu = /* @__PURE__ */ new WeakMap();
function $u() {
  let e6, t2;
  function i2(e7, t3, i3, n2, o2, r2) {
    const s2 = r2.num_components(), a2 = i3.num_points() * s2, l2 = a2 * o2.BYTES_PER_ELEMENT, c2 = function(e8, t4) {
      switch (t4) {
        case Float32Array:
          return e8.DT_FLOAT32;
        case Int8Array:
          return e8.DT_INT8;
        case Int16Array:
          return e8.DT_INT16;
        case Int32Array:
          return e8.DT_INT32;
        case Uint8Array:
          return e8.DT_UINT8;
        case Uint16Array:
          return e8.DT_UINT16;
        case Uint32Array:
          return e8.DT_UINT32;
      }
    }(e7, o2), h2 = e7._malloc(l2);
    t3.GetAttributeDataArrayForAllPoints(i3, r2, c2, l2, h2);
    const u2 = new o2(e7.HEAPF32.buffer, h2, a2).slice();
    return e7._free(h2), { name: n2, array: u2, itemSize: s2 };
  }
  onmessage = function(n2) {
    const o2 = n2.data;
    switch (o2.type) {
      case "init":
        e6 = o2.decoderConfig, t2 = new Promise(function(t3) {
          e6.onModuleLoaded = function(e7) {
            t3({ draco: e7 });
          }, DracoDecoderModule(e6);
        });
        break;
      case "decode":
        const n3 = o2.buffer, r2 = o2.taskConfig;
        t2.then((e7) => {
          const t3 = e7.draco, s2 = new t3.Decoder();
          try {
            const e8 = function(e9, t4, n4, o3) {
              const r3 = o3.attributeIDs, s3 = o3.attributeTypes;
              let a3, l2;
              const c2 = t4.GetEncodedGeometryType(n4);
              if (c2 === e9.TRIANGULAR_MESH) a3 = new e9.Mesh(), l2 = t4.DecodeArrayToMesh(n4, n4.byteLength, a3);
              else {
                if (c2 !== e9.POINT_CLOUD) throw new Error("THREE.DRACOLoader: Unexpected geometry type.");
                a3 = new e9.PointCloud(), l2 = t4.DecodeArrayToPointCloud(n4, n4.byteLength, a3);
              }
              if (!l2.ok() || 0 === a3.ptr) throw new Error("THREE.DRACOLoader: Decoding failed: " + l2.error_msg());
              const h2 = { index: null, attributes: [] };
              for (const n5 in r3) {
                const l3 = self[s3[n5]];
                let c3, u2;
                if (o3.useUniqueIDs) u2 = r3[n5], c3 = t4.GetAttributeByUniqueId(a3, u2);
                else {
                  if (u2 = t4.GetAttributeId(a3, e9[r3[n5]]), -1 === u2) continue;
                  c3 = t4.GetAttribute(a3, u2);
                }
                const d2 = i2(e9, t4, a3, n5, l3, c3);
                "color" === n5 && (d2.vertexColorSpace = o3.vertexColorSpace), h2.attributes.push(d2);
              }
              c2 === e9.TRIANGULAR_MESH && (h2.index = function(e10, t5, i3) {
                const n5 = i3.num_faces(), o4 = 3 * n5, r4 = 4 * o4, s4 = e10._malloc(r4);
                t5.GetTrianglesUInt32Array(i3, r4, s4);
                const a4 = new Uint32Array(e10.HEAPF32.buffer, s4, o4).slice();
                return e10._free(s4), { array: a4, itemSize: 1 };
              }(e9, t4, a3));
              return e9.destroy(a3), h2;
            }(t3, s2, new Int8Array(n3), r2), a2 = e8.attributes.map((e9) => e9.array.buffer);
            e8.index && a2.push(e8.index.array.buffer), self.postMessage({ type: "decode", id: o2.id, geometry: e8 }, a2);
          } catch (e8) {
            console.error(e8), self.postMessage({ type: "error", id: o2.id, error: e8.message });
          } finally {
            t3.destroy(s2);
          }
        });
    }
  };
}
function Wu(e6, t2) {
  if (0 === t2) return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."), e6;
  if (2 === t2 || 1 === t2) {
    let i2 = e6.getIndex();
    if (null === i2) {
      const t3 = [], n3 = e6.getAttribute("position");
      if (void 0 === n3) return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), e6;
      for (let e7 = 0; e7 < n3.count; e7++) t3.push(e7);
      e6.setIndex(t3), i2 = e6.getIndex();
    }
    const n2 = i2.count - 2, o2 = [];
    if (2 === t2) for (let e7 = 1; e7 <= n2; e7++) o2.push(i2.getX(0)), o2.push(i2.getX(e7)), o2.push(i2.getX(e7 + 1));
    else for (let e7 = 0; e7 < n2; e7++) e7 % 2 == 0 ? (o2.push(i2.getX(e7)), o2.push(i2.getX(e7 + 1)), o2.push(i2.getX(e7 + 2))) : (o2.push(i2.getX(e7 + 2)), o2.push(i2.getX(e7 + 1)), o2.push(i2.getX(e7)));
    o2.length / 3 !== n2 && console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");
    const r2 = e6.clone();
    return r2.setIndex(o2), r2.clearGroups(), r2;
  }
  return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:", t2), e6;
}
class ju extends Eh {
  constructor(e6) {
    super(e6), this.dracoLoader = null, this.ktx2Loader = null, this.meshoptDecoder = null, this.pluginCallbacks = [], this.register(function(e7) {
      return new ed(e7);
    }), this.register(function(e7) {
      return new td(e7);
    }), this.register(function(e7) {
      return new hd(e7);
    }), this.register(function(e7) {
      return new ud(e7);
    }), this.register(function(e7) {
      return new dd(e7);
    }), this.register(function(e7) {
      return new nd(e7);
    }), this.register(function(e7) {
      return new od(e7);
    }), this.register(function(e7) {
      return new rd(e7);
    }), this.register(function(e7) {
      return new sd(e7);
    }), this.register(function(e7) {
      return new Ju(e7);
    }), this.register(function(e7) {
      return new ad(e7);
    }), this.register(function(e7) {
      return new id(e7);
    }), this.register(function(e7) {
      return new cd(e7);
    }), this.register(function(e7) {
      return new ld(e7);
    }), this.register(function(e7) {
      return new Ku(e7);
    }), this.register(function(e7) {
      return new pd(e7);
    }), this.register(function(e7) {
      return new _d(e7);
    });
  }
  load(e6, t2, i2, n2) {
    const o2 = this;
    let r2;
    if ("" !== this.resourcePath) r2 = this.resourcePath;
    else if ("" !== this.path) {
      const t3 = Xh.extractUrlBase(e6);
      r2 = Xh.resolveURL(t3, this.path);
    } else r2 = Xh.extractUrlBase(e6);
    this.manager.itemStart(e6);
    const s2 = function(t3) {
      n2 ? n2(t3) : console.error(t3), o2.manager.itemError(e6), o2.manager.itemEnd(e6);
    }, a2 = new Mh(this.manager);
    a2.setPath(this.path), a2.setResponseType("arraybuffer"), a2.setRequestHeader(this.requestHeader), a2.setWithCredentials(this.withCredentials), a2.load(e6, function(i3) {
      try {
        o2.parse(i3, r2, function(i4) {
          t2(i4), o2.manager.itemEnd(e6);
        }, s2);
      } catch (e7) {
        s2(e7);
      }
    }, i2, s2);
  }
  setDRACOLoader(e6) {
    return this.dracoLoader = e6, this;
  }
  setKTX2Loader(e6) {
    return this.ktx2Loader = e6, this;
  }
  setMeshoptDecoder(e6) {
    return this.meshoptDecoder = e6, this;
  }
  register(e6) {
    return -1 === this.pluginCallbacks.indexOf(e6) && this.pluginCallbacks.push(e6), this;
  }
  unregister(e6) {
    return -1 !== this.pluginCallbacks.indexOf(e6) && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e6), 1), this;
  }
  parse(e6, t2, i2, n2) {
    let o2;
    const r2 = {}, s2 = {}, a2 = new TextDecoder();
    if ("string" == typeof e6) o2 = JSON.parse(e6);
    else if (e6 instanceof ArrayBuffer) {
      if (a2.decode(new Uint8Array(e6, 0, 4)) === gd) {
        try {
          r2[Yu.KHR_BINARY_GLTF] = new vd(e6);
        } catch (e7) {
          return void (n2 && n2(e7));
        }
        o2 = JSON.parse(r2[Yu.KHR_BINARY_GLTF].content);
      } else o2 = JSON.parse(a2.decode(e6));
    } else o2 = e6;
    if (void 0 === o2.asset || o2.asset.version[0] < 2) return void (n2 && n2(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));
    const l2 = new Gd(o2, { path: t2 || this.resourcePath || "", crossOrigin: this.crossOrigin, requestHeader: this.requestHeader, manager: this.manager, ktx2Loader: this.ktx2Loader, meshoptDecoder: this.meshoptDecoder });
    l2.fileLoader.setRequestHeader(this.requestHeader);
    for (let e7 = 0; e7 < this.pluginCallbacks.length; e7++) {
      const t3 = this.pluginCallbacks[e7](l2);
      t3.name || console.error("THREE.GLTFLoader: Invalid plugin found: missing name"), s2[t3.name] = t3, r2[t3.name] = true;
    }
    if (o2.extensionsUsed) for (let e7 = 0; e7 < o2.extensionsUsed.length; ++e7) {
      const t3 = o2.extensionsUsed[e7], i3 = o2.extensionsRequired || [];
      switch (t3) {
        case Yu.KHR_MATERIALS_UNLIT:
          r2[t3] = new Zu();
          break;
        case Yu.KHR_DRACO_MESH_COMPRESSION:
          r2[t3] = new Ad(o2, this.dracoLoader);
          break;
        case Yu.KHR_TEXTURE_TRANSFORM:
          r2[t3] = new bd();
          break;
        case Yu.KHR_MESH_QUANTIZATION:
          r2[t3] = new yd();
          break;
        default:
          i3.indexOf(t3) >= 0 && void 0 === s2[t3] && console.warn('THREE.GLTFLoader: Unknown extension "' + t3 + '".');
      }
    }
    l2.setExtensions(r2), l2.setPlugins(s2), l2.parse(i2, n2);
  }
  parseAsync(e6, t2) {
    const i2 = this;
    return new Promise(function(n2, o2) {
      i2.parse(e6, t2, n2, o2);
    });
  }
}
function Xu() {
  let e6 = {};
  return { get: function(t2) {
    return e6[t2];
  }, add: function(t2, i2) {
    e6[t2] = i2;
  }, remove: function(t2) {
    delete e6[t2];
  }, removeAll: function() {
    e6 = {};
  } };
}
const Yu = { KHR_BINARY_GLTF: "KHR_binary_glTF", KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression", KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual", KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat", KHR_MATERIALS_DISPERSION: "KHR_materials_dispersion", KHR_MATERIALS_IOR: "KHR_materials_ior", KHR_MATERIALS_SHEEN: "KHR_materials_sheen", KHR_MATERIALS_SPECULAR: "KHR_materials_specular", KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission", KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence", KHR_MATERIALS_ANISOTROPY: "KHR_materials_anisotropy", KHR_MATERIALS_UNLIT: "KHR_materials_unlit", KHR_MATERIALS_VOLUME: "KHR_materials_volume", KHR_TEXTURE_BASISU: "KHR_texture_basisu", KHR_TEXTURE_TRANSFORM: "KHR_texture_transform", KHR_MESH_QUANTIZATION: "KHR_mesh_quantization", KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength", EXT_MATERIALS_BUMP: "EXT_materials_bump", EXT_TEXTURE_WEBP: "EXT_texture_webp", EXT_TEXTURE_AVIF: "EXT_texture_avif", EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression", EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing" };
class Ku {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_LIGHTS_PUNCTUAL, this.cache = { refs: {}, uses: {} };
  }
  _markDefs() {
    const e6 = this.parser, t2 = this.parser.json.nodes || [];
    for (let i2 = 0, n2 = t2.length; i2 < n2; i2++) {
      const n3 = t2[i2];
      n3.extensions && n3.extensions[this.name] && void 0 !== n3.extensions[this.name].light && e6._addNodeRef(this.cache, n3.extensions[this.name].light);
    }
  }
  _loadLight(e6) {
    const t2 = this.parser, i2 = "light:" + e6;
    let n2 = t2.cache.get(i2);
    if (n2) return n2;
    const o2 = t2.json, r2 = ((o2.extensions && o2.extensions[this.name] || {}).lights || [])[e6];
    let s2;
    const a2 = new Go(16777215);
    void 0 !== r2.color && a2.setRGB(r2.color[0], r2.color[1], r2.color[2], _i);
    const l2 = void 0 !== r2.range ? r2.range : 0;
    switch (r2.type) {
      case "directional":
        s2 = new $h(a2), s2.target.position.set(0, 0, -1), s2.add(s2.target);
        break;
      case "point":
        s2 = new Gh(a2), s2.distance = l2;
        break;
      case "spot":
        s2 = new Uh(a2), s2.distance = l2, r2.spot = r2.spot || {}, r2.spot.innerConeAngle = void 0 !== r2.spot.innerConeAngle ? r2.spot.innerConeAngle : 0, r2.spot.outerConeAngle = void 0 !== r2.spot.outerConeAngle ? r2.spot.outerConeAngle : Math.PI / 4, s2.angle = r2.spot.outerConeAngle, s2.penumbra = 1 - r2.spot.innerConeAngle / r2.spot.outerConeAngle, s2.target.position.set(0, 0, -1), s2.add(s2.target);
        break;
      default:
        throw new Error("THREE.GLTFLoader: Unexpected light type: " + r2.type);
    }
    return s2.position.set(0, 0, 0), s2.decay = 2, Od(s2, r2), void 0 !== r2.intensity && (s2.intensity = r2.intensity), s2.name = t2.createUniqueName(r2.name || "light_" + e6), n2 = Promise.resolve(s2), t2.cache.add(i2, n2), n2;
  }
  getDependency(e6, t2) {
    if ("light" === e6) return this._loadLight(t2);
  }
  createNodeAttachment(e6) {
    const t2 = this, i2 = this.parser, n2 = i2.json.nodes[e6], o2 = (n2.extensions && n2.extensions[this.name] || {}).light;
    return void 0 === o2 ? null : this._loadLight(o2).then(function(e7) {
      return i2._getNodeRef(t2.cache, o2, e7);
    });
  }
}
let Zu = class {
  constructor() {
    this.name = Yu.KHR_MATERIALS_UNLIT;
  }
  getMaterialType() {
    return jo;
  }
  extendParams(e6, t2, i2) {
    const n2 = [];
    e6.color = new Go(1, 1, 1), e6.opacity = 1;
    const o2 = t2.pbrMetallicRoughness;
    if (o2) {
      if (Array.isArray(o2.baseColorFactor)) {
        const t3 = o2.baseColorFactor;
        e6.color.setRGB(t3[0], t3[1], t3[2], _i), e6.opacity = t3[3];
      }
      void 0 !== o2.baseColorTexture && n2.push(i2.assignTexture(e6, "map", o2.baseColorTexture, pi));
    }
    return Promise.all(n2);
  }
}, Ju = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_EMISSIVE_STRENGTH;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser.json.materials[e6];
    if (!i2.extensions || !i2.extensions[this.name]) return Promise.resolve();
    const n2 = i2.extensions[this.name].emissiveStrength;
    return void 0 !== n2 && (t2.emissiveIntensity = n2), Promise.resolve();
  }
}, ed = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_CLEARCOAT;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [], r2 = n2.extensions[this.name];
    if (void 0 !== r2.clearcoatFactor && (t2.clearcoat = r2.clearcoatFactor), void 0 !== r2.clearcoatTexture && o2.push(i2.assignTexture(t2, "clearcoatMap", r2.clearcoatTexture)), void 0 !== r2.clearcoatRoughnessFactor && (t2.clearcoatRoughness = r2.clearcoatRoughnessFactor), void 0 !== r2.clearcoatRoughnessTexture && o2.push(i2.assignTexture(t2, "clearcoatRoughnessMap", r2.clearcoatRoughnessTexture)), void 0 !== r2.clearcoatNormalTexture && (o2.push(i2.assignTexture(t2, "clearcoatNormalMap", r2.clearcoatNormalTexture)), void 0 !== r2.clearcoatNormalTexture.scale)) {
      const e7 = r2.clearcoatNormalTexture.scale;
      t2.clearcoatNormalScale = new $i(e7, e7);
    }
    return Promise.all(o2);
  }
}, td = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_DISPERSION;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser.json.materials[e6];
    if (!i2.extensions || !i2.extensions[this.name]) return Promise.resolve();
    const n2 = i2.extensions[this.name];
    return t2.dispersion = void 0 !== n2.dispersion ? n2.dispersion : 0, Promise.resolve();
  }
}, id = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_IRIDESCENCE;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [], r2 = n2.extensions[this.name];
    return void 0 !== r2.iridescenceFactor && (t2.iridescence = r2.iridescenceFactor), void 0 !== r2.iridescenceTexture && o2.push(i2.assignTexture(t2, "iridescenceMap", r2.iridescenceTexture)), void 0 !== r2.iridescenceIor && (t2.iridescenceIOR = r2.iridescenceIor), void 0 === t2.iridescenceThicknessRange && (t2.iridescenceThicknessRange = [100, 400]), void 0 !== r2.iridescenceThicknessMinimum && (t2.iridescenceThicknessRange[0] = r2.iridescenceThicknessMinimum), void 0 !== r2.iridescenceThicknessMaximum && (t2.iridescenceThicknessRange[1] = r2.iridescenceThicknessMaximum), void 0 !== r2.iridescenceThicknessTexture && o2.push(i2.assignTexture(t2, "iridescenceThicknessMap", r2.iridescenceThicknessTexture)), Promise.all(o2);
  }
}, nd = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_SHEEN;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [];
    t2.sheenColor = new Go(0, 0, 0), t2.sheenRoughness = 0, t2.sheen = 1;
    const r2 = n2.extensions[this.name];
    if (void 0 !== r2.sheenColorFactor) {
      const e7 = r2.sheenColorFactor;
      t2.sheenColor.setRGB(e7[0], e7[1], e7[2], _i);
    }
    return void 0 !== r2.sheenRoughnessFactor && (t2.sheenRoughness = r2.sheenRoughnessFactor), void 0 !== r2.sheenColorTexture && o2.push(i2.assignTexture(t2, "sheenColorMap", r2.sheenColorTexture, pi)), void 0 !== r2.sheenRoughnessTexture && o2.push(i2.assignTexture(t2, "sheenRoughnessMap", r2.sheenRoughnessTexture)), Promise.all(o2);
  }
}, od = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_TRANSMISSION;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [], r2 = n2.extensions[this.name];
    return void 0 !== r2.transmissionFactor && (t2.transmission = r2.transmissionFactor), void 0 !== r2.transmissionTexture && o2.push(i2.assignTexture(t2, "transmissionMap", r2.transmissionTexture)), Promise.all(o2);
  }
}, rd = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_VOLUME;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [], r2 = n2.extensions[this.name];
    t2.thickness = void 0 !== r2.thicknessFactor ? r2.thicknessFactor : 0, void 0 !== r2.thicknessTexture && o2.push(i2.assignTexture(t2, "thicknessMap", r2.thicknessTexture)), t2.attenuationDistance = r2.attenuationDistance || 1 / 0;
    const s2 = r2.attenuationColor || [1, 1, 1];
    return t2.attenuationColor = new Go().setRGB(s2[0], s2[1], s2[2], _i), Promise.all(o2);
  }
}, sd = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_IOR;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser.json.materials[e6];
    if (!i2.extensions || !i2.extensions[this.name]) return Promise.resolve();
    const n2 = i2.extensions[this.name];
    return t2.ior = void 0 !== n2.ior ? n2.ior : 1.5, Promise.resolve();
  }
}, ad = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_SPECULAR;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [], r2 = n2.extensions[this.name];
    t2.specularIntensity = void 0 !== r2.specularFactor ? r2.specularFactor : 1, void 0 !== r2.specularTexture && o2.push(i2.assignTexture(t2, "specularIntensityMap", r2.specularTexture));
    const s2 = r2.specularColorFactor || [1, 1, 1];
    return t2.specularColor = new Go().setRGB(s2[0], s2[1], s2[2], _i), void 0 !== r2.specularColorTexture && o2.push(i2.assignTexture(t2, "specularColorMap", r2.specularColorTexture, pi)), Promise.all(o2);
  }
}, ld = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.EXT_MATERIALS_BUMP;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [], r2 = n2.extensions[this.name];
    return t2.bumpScale = void 0 !== r2.bumpFactor ? r2.bumpFactor : 1, void 0 !== r2.bumpTexture && o2.push(i2.assignTexture(t2, "bumpMap", r2.bumpTexture)), Promise.all(o2);
  }
}, cd = class {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_MATERIALS_ANISOTROPY;
  }
  getMaterialType(e6) {
    const t2 = this.parser.json.materials[e6];
    return t2.extensions && t2.extensions[this.name] ? nh : null;
  }
  extendMaterialParams(e6, t2) {
    const i2 = this.parser, n2 = i2.json.materials[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return Promise.resolve();
    const o2 = [], r2 = n2.extensions[this.name];
    return void 0 !== r2.anisotropyStrength && (t2.anisotropy = r2.anisotropyStrength), void 0 !== r2.anisotropyRotation && (t2.anisotropyRotation = r2.anisotropyRotation), void 0 !== r2.anisotropyTexture && o2.push(i2.assignTexture(t2, "anisotropyMap", r2.anisotropyTexture)), Promise.all(o2);
  }
};
class hd {
  constructor(e6) {
    this.parser = e6, this.name = Yu.KHR_TEXTURE_BASISU;
  }
  loadTexture(e6) {
    const t2 = this.parser, i2 = t2.json, n2 = i2.textures[e6];
    if (!n2.extensions || !n2.extensions[this.name]) return null;
    const o2 = n2.extensions[this.name], r2 = t2.options.ktx2Loader;
    if (!r2) {
      if (i2.extensionsRequired && i2.extensionsRequired.indexOf(this.name) >= 0) throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");
      return null;
    }
    return t2.loadTextureImage(e6, o2.source, r2);
  }
}
class ud {
  constructor(e6) {
    this.parser = e6, this.name = Yu.EXT_TEXTURE_WEBP, this.isSupported = null;
  }
  loadTexture(e6) {
    const t2 = this.name, i2 = this.parser, n2 = i2.json, o2 = n2.textures[e6];
    if (!o2.extensions || !o2.extensions[t2]) return null;
    const r2 = o2.extensions[t2], s2 = n2.images[r2.source];
    let a2 = i2.textureLoader;
    if (s2.uri) {
      const e7 = i2.options.manager.getHandler(s2.uri);
      null !== e7 && (a2 = e7);
    }
    return this.detectSupport().then(function(o3) {
      if (o3) return i2.loadTextureImage(e6, r2.source, a2);
      if (n2.extensionsRequired && n2.extensionsRequired.indexOf(t2) >= 0) throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");
      return i2.loadTexture(e6);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e6) {
      const t2 = new Image();
      t2.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA", t2.onload = t2.onerror = function() {
        e6(1 === t2.height);
      };
    })), this.isSupported;
  }
}
class dd {
  constructor(e6) {
    this.parser = e6, this.name = Yu.EXT_TEXTURE_AVIF, this.isSupported = null;
  }
  loadTexture(e6) {
    const t2 = this.name, i2 = this.parser, n2 = i2.json, o2 = n2.textures[e6];
    if (!o2.extensions || !o2.extensions[t2]) return null;
    const r2 = o2.extensions[t2], s2 = n2.images[r2.source];
    let a2 = i2.textureLoader;
    if (s2.uri) {
      const e7 = i2.options.manager.getHandler(s2.uri);
      null !== e7 && (a2 = e7);
    }
    return this.detectSupport().then(function(o3) {
      if (o3) return i2.loadTextureImage(e6, r2.source, a2);
      if (n2.extensionsRequired && n2.extensionsRequired.indexOf(t2) >= 0) throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");
      return i2.loadTexture(e6);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e6) {
      const t2 = new Image();
      t2.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=", t2.onload = t2.onerror = function() {
        e6(1 === t2.height);
      };
    })), this.isSupported;
  }
}
class pd {
  constructor(e6) {
    this.name = Yu.EXT_MESHOPT_COMPRESSION, this.parser = e6;
  }
  loadBufferView(e6) {
    const t2 = this.parser.json, i2 = t2.bufferViews[e6];
    if (i2.extensions && i2.extensions[this.name]) {
      const e7 = i2.extensions[this.name], n2 = this.parser.getDependency("buffer", e7.buffer), o2 = this.parser.options.meshoptDecoder;
      if (!o2 || !o2.supported) {
        if (t2.extensionsRequired && t2.extensionsRequired.indexOf(this.name) >= 0) throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");
        return null;
      }
      return n2.then(function(t3) {
        const i3 = e7.byteOffset || 0, n3 = e7.byteLength || 0, r2 = e7.count, s2 = e7.byteStride, a2 = new Uint8Array(t3, i3, n3);
        return o2.decodeGltfBufferAsync ? o2.decodeGltfBufferAsync(r2, s2, a2, e7.mode, e7.filter).then(function(e8) {
          return e8.buffer;
        }) : o2.ready.then(function() {
          const t4 = new ArrayBuffer(r2 * s2);
          return o2.decodeGltfBuffer(new Uint8Array(t4), r2, s2, a2, e7.mode, e7.filter), t4;
        });
      });
    }
    return null;
  }
}
let _d = class {
  constructor(e6) {
    this.name = Yu.EXT_MESH_GPU_INSTANCING, this.parser = e6;
  }
  createNodeMesh(e6) {
    const t2 = this.parser.json, i2 = t2.nodes[e6];
    if (!i2.extensions || !i2.extensions[this.name] || void 0 === i2.mesh) return null;
    const n2 = t2.meshes[i2.mesh];
    for (const e7 of n2.primitives) if (e7.mode !== Sd.TRIANGLES && e7.mode !== Sd.TRIANGLE_STRIP && e7.mode !== Sd.TRIANGLE_FAN && void 0 !== e7.mode) return null;
    const o2 = i2.extensions[this.name].attributes, r2 = [], s2 = {};
    for (const e7 in o2) r2.push(this.parser.getDependency("accessor", o2[e7]).then((t3) => (s2[e7] = t3, s2[e7])));
    return r2.length < 1 ? null : (r2.push(this.parser.createNodeMesh(e6)), Promise.all(r2).then((e7) => {
      const t3 = e7.pop(), i3 = t3.isGroup ? t3.children : [t3], n3 = e7[0].count, o3 = [];
      for (const e8 of i3) {
        const t4 = new Kn(), i4 = new yn(), r3 = new bn(), a2 = new yn(1, 1, 1), l2 = new Tc(e8.geometry, e8.material, n3);
        for (let e9 = 0; e9 < n3; e9++) s2.TRANSLATION && i4.fromBufferAttribute(s2.TRANSLATION, e9), s2.ROTATION && r3.fromBufferAttribute(s2.ROTATION, e9), s2.SCALE && a2.fromBufferAttribute(s2.SCALE, e9), l2.setMatrixAt(e9, t4.compose(i4, r3, a2));
        for (const t5 in s2) if ("_COLOR_0" === t5) {
          const e9 = s2[t5];
          l2.instanceColor = new Ac(e9.array, e9.itemSize, e9.normalized);
        } else "TRANSLATION" !== t5 && "ROTATION" !== t5 && "SCALE" !== t5 && e8.geometry.setAttribute(t5, s2[t5]);
        So.prototype.copy.call(l2, e8), this.parser.assignFinalMaterial(l2), o3.push(l2);
      }
      return t3.isGroup ? (t3.clear(), t3.add(...o3), t3) : o3[0];
    }));
  }
};
const gd = "glTF", md = 1313821514, fd = 5130562;
class vd {
  constructor(e6) {
    this.name = Yu.KHR_BINARY_GLTF, this.content = null, this.body = null;
    const t2 = new DataView(e6, 0, 12), i2 = new TextDecoder();
    if (this.header = { magic: i2.decode(new Uint8Array(e6.slice(0, 4))), version: t2.getUint32(4, true), length: t2.getUint32(8, true) }, this.header.magic !== gd) throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
    if (this.header.version < 2) throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
    const n2 = this.header.length - 12, o2 = new DataView(e6, 12);
    let r2 = 0;
    for (; r2 < n2; ) {
      const t3 = o2.getUint32(r2, true);
      r2 += 4;
      const n3 = o2.getUint32(r2, true);
      if (r2 += 4, n3 === md) {
        const n4 = new Uint8Array(e6, 12 + r2, t3);
        this.content = i2.decode(n4);
      } else if (n3 === fd) {
        const i3 = 12 + r2;
        this.body = e6.slice(i3, i3 + t3);
      }
      r2 += t3;
    }
    if (null === this.content) throw new Error("THREE.GLTFLoader: JSON content not found.");
  }
}
class Ad {
  constructor(e6, t2) {
    if (!t2) throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
    this.name = Yu.KHR_DRACO_MESH_COMPRESSION, this.json = e6, this.dracoLoader = t2, this.dracoLoader.preload();
  }
  decodePrimitive(e6, t2) {
    const i2 = this.json, n2 = this.dracoLoader, o2 = e6.extensions[this.name].bufferView, r2 = e6.extensions[this.name].attributes, s2 = {}, a2 = {}, l2 = {};
    for (const e7 in r2) {
      const t3 = Bd[e7] || e7.toLowerCase();
      s2[t3] = r2[e7];
    }
    for (const t3 in e6.attributes) {
      const n3 = Bd[t3] || t3.toLowerCase();
      if (void 0 !== r2[t3]) {
        const o3 = i2.accessors[e6.attributes[t3]], r3 = Ed[o3.componentType];
        l2[n3] = r3.name, a2[n3] = true === o3.normalized;
      }
    }
    return t2.getDependency("bufferView", o2).then(function(e7) {
      return new Promise(function(t3, i3) {
        n2.decodeDracoFile(e7, function(e8) {
          for (const t4 in e8.attributes) {
            const i4 = e8.attributes[t4], n3 = a2[t4];
            void 0 !== n3 && (i4.normalized = n3);
          }
          t3(e8);
        }, s2, l2, _i, i3);
      });
    });
  }
}
class bd {
  constructor() {
    this.name = Yu.KHR_TEXTURE_TRANSFORM;
  }
  extendTexture(e6, t2) {
    return void 0 !== t2.texCoord && t2.texCoord !== e6.channel || void 0 !== t2.offset || void 0 !== t2.rotation || void 0 !== t2.scale ? (e6 = e6.clone(), void 0 !== t2.texCoord && (e6.channel = t2.texCoord), void 0 !== t2.offset && e6.offset.fromArray(t2.offset), void 0 !== t2.rotation && (e6.rotation = t2.rotation), void 0 !== t2.scale && e6.repeat.fromArray(t2.scale), e6.needsUpdate = true, e6) : e6;
  }
}
class yd {
  constructor() {
    this.name = Yu.KHR_MESH_QUANTIZATION;
  }
}
class wd extends ch {
  constructor(e6, t2, i2, n2) {
    super(e6, t2, i2, n2);
  }
  copySampleValue_(e6) {
    const t2 = this.resultBuffer, i2 = this.sampleValues, n2 = this.valueSize, o2 = e6 * n2 * 3 + n2;
    for (let e7 = 0; e7 !== n2; e7++) t2[e7] = i2[o2 + e7];
    return t2;
  }
  interpolate_(e6, t2, i2, n2) {
    const o2 = this.resultBuffer, r2 = this.sampleValues, s2 = this.valueSize, a2 = 2 * s2, l2 = 3 * s2, c2 = n2 - t2, h2 = (i2 - t2) / c2, u2 = h2 * h2, d2 = u2 * h2, p2 = e6 * l2, _2 = p2 - l2, g2 = -2 * d2 + 3 * u2, m2 = d2 - u2, f2 = 1 - g2, v2 = m2 - u2 + h2;
    for (let e7 = 0; e7 !== s2; e7++) {
      const t3 = r2[_2 + e7 + s2], i3 = r2[_2 + e7 + a2] * c2, n3 = r2[p2 + e7 + s2], l3 = r2[p2 + e7] * c2;
      o2[e7] = f2 * t3 + v2 * i3 + g2 * n3 + m2 * l3;
    }
    return o2;
  }
}
const xd = new bn();
class Cd extends wd {
  interpolate_(e6, t2, i2, n2) {
    const o2 = super.interpolate_(e6, t2, i2, n2);
    return xd.fromArray(o2).normalize().toArray(o2), o2;
  }
}
const Sd = { FLOAT: 5126, FLOAT_MAT3: 35675, FLOAT_MAT4: 35676, FLOAT_VEC2: 35664, FLOAT_VEC3: 35665, FLOAT_VEC4: 35666, LINEAR: 9729, REPEAT: 10497, SAMPLER_2D: 35678, POINTS: 0, LINES: 1, LINE_LOOP: 2, LINE_STRIP: 3, TRIANGLES: 4, TRIANGLE_STRIP: 5, TRIANGLE_FAN: 6, UNSIGNED_BYTE: 5121, UNSIGNED_SHORT: 5123 }, Ed = { 5120: Int8Array, 5121: Uint8Array, 5122: Int16Array, 5123: Uint16Array, 5125: Uint32Array, 5126: Float32Array }, Td = { 9728: et, 9729: nt, 9984: tt, 9985: ot, 9986: it, 9987: rt }, Id = { 33071: Ze, 33648: Je, 10497: Ke }, Md = { SCALAR: 1, VEC2: 2, VEC3: 3, VEC4: 4, MAT2: 4, MAT3: 9, MAT4: 16 }, Bd = { POSITION: "position", NORMAL: "normal", TANGENT: "tangent", TEXCOORD_0: "uv", TEXCOORD_1: "uv1", TEXCOORD_2: "uv2", TEXCOORD_3: "uv3", COLOR_0: "color", WEIGHTS_0: "skinWeight", JOINTS_0: "skinIndex" }, Rd = { scale: "scale", translation: "position", rotation: "quaternion", weights: "morphTargetInfluences" }, kd = { CUBICSPLINE: void 0, LINEAR: si, STEP: ri }, Pd = "OPAQUE", Dd = "MASK", Ld = "BLEND";
function Fd(e6) {
  return void 0 === e6.DefaultMaterial && (e6.DefaultMaterial = new ih({ color: 16777215, emissive: 0, metalness: 1, roughness: 1, transparent: false, depthTest: true, side: 0 })), e6.DefaultMaterial;
}
function Nd(e6, t2, i2) {
  for (const n2 in i2.extensions) void 0 === e6[n2] && (t2.userData.gltfExtensions = t2.userData.gltfExtensions || {}, t2.userData.gltfExtensions[n2] = i2.extensions[n2]);
}
function Od(e6, t2) {
  void 0 !== t2.extras && ("object" == typeof t2.extras ? Object.assign(e6.userData, t2.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + t2.extras));
}
function Ud(e6, t2) {
  if (e6.updateMorphTargets(), void 0 !== t2.weights) for (let i2 = 0, n2 = t2.weights.length; i2 < n2; i2++) e6.morphTargetInfluences[i2] = t2.weights[i2];
  if (t2.extras && Array.isArray(t2.extras.targetNames)) {
    const i2 = t2.extras.targetNames;
    if (e6.morphTargetInfluences.length === i2.length) {
      e6.morphTargetDictionary = {};
      for (let t3 = 0, n2 = i2.length; t3 < n2; t3++) e6.morphTargetDictionary[i2[t3]] = t3;
    } else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
  }
}
function zd(e6) {
  let t2;
  const i2 = e6.extensions && e6.extensions[Yu.KHR_DRACO_MESH_COMPRESSION];
  if (t2 = i2 ? "draco:" + i2.bufferView + ":" + i2.indices + ":" + Hd(i2.attributes) : e6.indices + ":" + Hd(e6.attributes) + ":" + e6.mode, void 0 !== e6.targets) for (let i3 = 0, n2 = e6.targets.length; i3 < n2; i3++) t2 += ":" + Hd(e6.targets[i3]);
  return t2;
}
function Hd(e6) {
  let t2 = "";
  const i2 = Object.keys(e6).sort();
  for (let n2 = 0, o2 = i2.length; n2 < o2; n2++) t2 += i2[n2] + ":" + e6[i2[n2]] + ";";
  return t2;
}
function Qd(e6) {
  switch (e6) {
    case Int8Array:
      return 1 / 127;
    case Uint8Array:
      return 1 / 255;
    case Int16Array:
      return 1 / 32767;
    case Uint16Array:
      return 1 / 65535;
    default:
      throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");
  }
}
const Vd = new Kn();
class Gd {
  constructor(e6 = {}, t2 = {}) {
    this.json = e6, this.extensions = {}, this.plugins = {}, this.options = t2, this.cache = new Xu(), this.associations = /* @__PURE__ */ new Map(), this.primitiveCache = {}, this.nodeCache = {}, this.meshCache = { refs: {}, uses: {} }, this.cameraCache = { refs: {}, uses: {} }, this.lightCache = { refs: {}, uses: {} }, this.sourceCache = {}, this.textureCache = {}, this.nodeNamesUsed = {};
    let i2 = false, n2 = -1, o2 = false, r2 = -1;
    if ("undefined" != typeof navigator) {
      const e7 = navigator.userAgent;
      i2 = true === /^((?!chrome|android).)*safari/i.test(e7);
      const t3 = e7.match(/Version\/(\d+)/);
      n2 = i2 && t3 ? parseInt(t3[1], 10) : -1, o2 = e7.indexOf("Firefox") > -1, r2 = o2 ? e7.match(/Firefox\/([0-9]+)\./)[1] : -1;
    }
    "undefined" == typeof createImageBitmap || i2 && n2 < 17 || o2 && r2 < 98 ? this.textureLoader = new kh(this.options.manager) : this.textureLoader = new Yh(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.textureLoader.setRequestHeader(this.options.requestHeader), this.fileLoader = new Mh(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), "use-credentials" === this.options.crossOrigin && this.fileLoader.setWithCredentials(true);
  }
  setExtensions(e6) {
    this.extensions = e6;
  }
  setPlugins(e6) {
    this.plugins = e6;
  }
  parse(e6, t2) {
    const i2 = this, n2 = this.json, o2 = this.extensions;
    this.cache.removeAll(), this.nodeCache = {}, this._invokeAll(function(e7) {
      return e7._markDefs && e7._markDefs();
    }), Promise.all(this._invokeAll(function(e7) {
      return e7.beforeRoot && e7.beforeRoot();
    })).then(function() {
      return Promise.all([i2.getDependencies("scene"), i2.getDependencies("animation"), i2.getDependencies("camera")]);
    }).then(function(t3) {
      const r2 = { scene: t3[0][n2.scene || 0], scenes: t3[0], animations: t3[1], cameras: t3[2], asset: n2.asset, parser: i2, userData: {} };
      return Nd(o2, r2, n2), Od(r2, n2), Promise.all(i2._invokeAll(function(e7) {
        return e7.afterRoot && e7.afterRoot(r2);
      })).then(function() {
        for (const e7 of r2.scenes) e7.updateMatrixWorld();
        e6(r2);
      });
    }).catch(t2);
  }
  _markDefs() {
    const e6 = this.json.nodes || [], t2 = this.json.skins || [], i2 = this.json.meshes || [];
    for (let i3 = 0, n2 = t2.length; i3 < n2; i3++) {
      const n3 = t2[i3].joints;
      for (let t3 = 0, i4 = n3.length; t3 < i4; t3++) e6[n3[t3]].isBone = true;
    }
    for (let t3 = 0, n2 = e6.length; t3 < n2; t3++) {
      const n3 = e6[t3];
      void 0 !== n3.mesh && (this._addNodeRef(this.meshCache, n3.mesh), void 0 !== n3.skin && (i2[n3.mesh].isSkinnedMesh = true)), void 0 !== n3.camera && this._addNodeRef(this.cameraCache, n3.camera);
    }
  }
  _addNodeRef(e6, t2) {
    void 0 !== t2 && (void 0 === e6.refs[t2] && (e6.refs[t2] = e6.uses[t2] = 0), e6.refs[t2]++);
  }
  _getNodeRef(e6, t2, i2) {
    if (e6.refs[t2] <= 1) return i2;
    const n2 = i2.clone(), o2 = (e7, t3) => {
      const i3 = this.associations.get(e7);
      null != i3 && this.associations.set(t3, i3);
      for (const [i4, n3] of e7.children.entries()) o2(n3, t3.children[i4]);
    };
    return o2(i2, n2), n2.name += "_instance_" + e6.uses[t2]++, n2;
  }
  _invokeOne(e6) {
    const t2 = Object.values(this.plugins);
    t2.push(this);
    for (let i2 = 0; i2 < t2.length; i2++) {
      const n2 = e6(t2[i2]);
      if (n2) return n2;
    }
    return null;
  }
  _invokeAll(e6) {
    const t2 = Object.values(this.plugins);
    t2.unshift(this);
    const i2 = [];
    for (let n2 = 0; n2 < t2.length; n2++) {
      const o2 = e6(t2[n2]);
      o2 && i2.push(o2);
    }
    return i2;
  }
  getDependency(e6, t2) {
    const i2 = e6 + ":" + t2;
    let n2 = this.cache.get(i2);
    if (!n2) {
      switch (e6) {
        case "scene":
          n2 = this.loadScene(t2);
          break;
        case "node":
          n2 = this._invokeOne(function(e7) {
            return e7.loadNode && e7.loadNode(t2);
          });
          break;
        case "mesh":
          n2 = this._invokeOne(function(e7) {
            return e7.loadMesh && e7.loadMesh(t2);
          });
          break;
        case "accessor":
          n2 = this.loadAccessor(t2);
          break;
        case "bufferView":
          n2 = this._invokeOne(function(e7) {
            return e7.loadBufferView && e7.loadBufferView(t2);
          });
          break;
        case "buffer":
          n2 = this.loadBuffer(t2);
          break;
        case "material":
          n2 = this._invokeOne(function(e7) {
            return e7.loadMaterial && e7.loadMaterial(t2);
          });
          break;
        case "texture":
          n2 = this._invokeOne(function(e7) {
            return e7.loadTexture && e7.loadTexture(t2);
          });
          break;
        case "skin":
          n2 = this.loadSkin(t2);
          break;
        case "animation":
          n2 = this._invokeOne(function(e7) {
            return e7.loadAnimation && e7.loadAnimation(t2);
          });
          break;
        case "camera":
          n2 = this.loadCamera(t2);
          break;
        default:
          if (n2 = this._invokeOne(function(i3) {
            return i3 != this && i3.getDependency && i3.getDependency(e6, t2);
          }), !n2) throw new Error("Unknown type: " + e6);
      }
      this.cache.add(i2, n2);
    }
    return n2;
  }
  getDependencies(e6) {
    let t2 = this.cache.get(e6);
    if (!t2) {
      const i2 = this, n2 = this.json[e6 + ("mesh" === e6 ? "es" : "s")] || [];
      t2 = Promise.all(n2.map(function(t3, n3) {
        return i2.getDependency(e6, n3);
      })), this.cache.add(e6, t2);
    }
    return t2;
  }
  loadBuffer(e6) {
    const t2 = this.json.buffers[e6], i2 = this.fileLoader;
    if (t2.type && "arraybuffer" !== t2.type) throw new Error("THREE.GLTFLoader: " + t2.type + " buffer type is not supported.");
    if (void 0 === t2.uri && 0 === e6) return Promise.resolve(this.extensions[Yu.KHR_BINARY_GLTF].body);
    const n2 = this.options;
    return new Promise(function(e7, o2) {
      i2.load(Xh.resolveURL(t2.uri, n2.path), e7, void 0, function() {
        o2(new Error('THREE.GLTFLoader: Failed to load buffer "' + t2.uri + '".'));
      });
    });
  }
  loadBufferView(e6) {
    const t2 = this.json.bufferViews[e6];
    return this.getDependency("buffer", t2.buffer).then(function(e7) {
      const i2 = t2.byteLength || 0, n2 = t2.byteOffset || 0;
      return e7.slice(n2, n2 + i2);
    });
  }
  loadAccessor(e6) {
    const t2 = this, i2 = this.json, n2 = this.json.accessors[e6];
    if (void 0 === n2.bufferView && void 0 === n2.sparse) {
      const e7 = Md[n2.type], t3 = Ed[n2.componentType], i3 = true === n2.normalized, o3 = new t3(n2.count * e7);
      return Promise.resolve(new er(o3, e7, i3));
    }
    const o2 = [];
    return void 0 !== n2.bufferView ? o2.push(this.getDependency("bufferView", n2.bufferView)) : o2.push(null), void 0 !== n2.sparse && (o2.push(this.getDependency("bufferView", n2.sparse.indices.bufferView)), o2.push(this.getDependency("bufferView", n2.sparse.values.bufferView))), Promise.all(o2).then(function(e7) {
      const o3 = e7[0], r2 = Md[n2.type], s2 = Ed[n2.componentType], a2 = s2.BYTES_PER_ELEMENT, l2 = a2 * r2, c2 = n2.byteOffset || 0, h2 = void 0 !== n2.bufferView ? i2.bufferViews[n2.bufferView].byteStride : void 0, u2 = true === n2.normalized;
      let d2, p2;
      if (h2 && h2 !== l2) {
        const e8 = Math.floor(c2 / h2), i3 = "InterleavedBuffer:" + n2.bufferView + ":" + n2.componentType + ":" + e8 + ":" + n2.count;
        let l3 = t2.cache.get(i3);
        l3 || (d2 = new s2(o3, e8 * h2, n2.count * h2 / a2), l3 = new Ul(d2, h2 / a2), t2.cache.add(i3, l3)), p2 = new Hl(l3, r2, c2 % h2 / a2, u2);
      } else d2 = null === o3 ? new s2(n2.count * r2) : new s2(o3, c2, n2.count * r2), p2 = new er(d2, r2, u2);
      if (void 0 !== n2.sparse) {
        const t3 = Md.SCALAR, i3 = Ed[n2.sparse.indices.componentType], a3 = n2.sparse.indices.byteOffset || 0, l3 = n2.sparse.values.byteOffset || 0, c3 = new i3(e7[1], a3, n2.sparse.count * t3), h3 = new s2(e7[2], l3, n2.sparse.count * r2);
        null !== o3 && (p2 = new er(p2.array.slice(), p2.itemSize, p2.normalized)), p2.normalized = false;
        for (let e8 = 0, t4 = c3.length; e8 < t4; e8++) {
          const t5 = c3[e8];
          if (p2.setX(t5, h3[e8 * r2]), r2 >= 2 && p2.setY(t5, h3[e8 * r2 + 1]), r2 >= 3 && p2.setZ(t5, h3[e8 * r2 + 2]), r2 >= 4 && p2.setW(t5, h3[e8 * r2 + 3]), r2 >= 5) throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
        }
        p2.normalized = u2;
      }
      return p2;
    });
  }
  loadTexture(e6) {
    const t2 = this.json, i2 = this.options, n2 = t2.textures[e6].source, o2 = t2.images[n2];
    let r2 = this.textureLoader;
    if (o2.uri) {
      const e7 = i2.manager.getHandler(o2.uri);
      null !== e7 && (r2 = e7);
    }
    return this.loadTextureImage(e6, n2, r2);
  }
  loadTextureImage(e6, t2, i2) {
    const n2 = this, o2 = this.json, r2 = o2.textures[e6], s2 = o2.images[t2], a2 = (s2.uri || s2.bufferView) + ":" + r2.sampler;
    if (this.textureCache[a2]) return this.textureCache[a2];
    const l2 = this.loadImageSource(t2, i2).then(function(t3) {
      t3.flipY = false, t3.name = r2.name || s2.name || "", "" === t3.name && "string" == typeof s2.uri && false === s2.uri.startsWith("data:image/") && (t3.name = s2.uri);
      const i3 = (o2.samplers || {})[r2.sampler] || {};
      return t3.magFilter = Td[i3.magFilter] || nt, t3.minFilter = Td[i3.minFilter] || rt, t3.wrapS = Id[i3.wrapS] || Ke, t3.wrapT = Id[i3.wrapT] || Ke, n2.associations.set(t3, { textures: e6 }), t3;
    }).catch(function() {
      return null;
    });
    return this.textureCache[a2] = l2, l2;
  }
  loadImageSource(e6, t2) {
    const i2 = this, n2 = this.json, o2 = this.options;
    if (void 0 !== this.sourceCache[e6]) return this.sourceCache[e6].then((e7) => e7.clone());
    const r2 = n2.images[e6], s2 = self.URL || self.webkitURL;
    let a2 = r2.uri || "", l2 = false;
    if (void 0 !== r2.bufferView) a2 = i2.getDependency("bufferView", r2.bufferView).then(function(e7) {
      l2 = true;
      const t3 = new Blob([e7], { type: r2.mimeType });
      return a2 = s2.createObjectURL(t3), a2;
    });
    else if (void 0 === r2.uri) throw new Error("THREE.GLTFLoader: Image " + e6 + " is missing URI and bufferView");
    const c2 = Promise.resolve(a2).then(function(e7) {
      return new Promise(function(i3, n3) {
        let r3 = i3;
        true === t2.isImageBitmapLoader && (r3 = function(e8) {
          const t3 = new _n(e8);
          t3.needsUpdate = true, i3(t3);
        }), t2.load(Xh.resolveURL(e7, o2.path), r3, void 0, n3);
      });
    }).then(function(e7) {
      var t3;
      return true === l2 && s2.revokeObjectURL(a2), Od(e7, r2), e7.userData.mimeType = r2.mimeType || ((t3 = r2.uri).search(/\.jpe?g($|\?)/i) > 0 || 0 === t3.search(/^data\:image\/jpeg/) ? "image/jpeg" : t3.search(/\.webp($|\?)/i) > 0 || 0 === t3.search(/^data\:image\/webp/) ? "image/webp" : "image/png"), e7;
    }).catch(function(e7) {
      throw console.error("THREE.GLTFLoader: Couldn't load texture", a2), e7;
    });
    return this.sourceCache[e6] = c2, c2;
  }
  assignTexture(e6, t2, i2, n2) {
    const o2 = this;
    return this.getDependency("texture", i2.index).then(function(r2) {
      if (!r2) return null;
      if (void 0 !== i2.texCoord && i2.texCoord > 0 && ((r2 = r2.clone()).channel = i2.texCoord), o2.extensions[Yu.KHR_TEXTURE_TRANSFORM]) {
        const e7 = void 0 !== i2.extensions ? i2.extensions[Yu.KHR_TEXTURE_TRANSFORM] : void 0;
        if (e7) {
          const t3 = o2.associations.get(r2);
          r2 = o2.extensions[Yu.KHR_TEXTURE_TRANSFORM].extendTexture(r2, e7), o2.associations.set(r2, t3);
        }
      }
      return void 0 !== n2 && (r2.colorSpace = n2), e6[t2] = r2, r2;
    });
  }
  assignFinalMaterial(e6) {
    const t2 = e6.geometry;
    let i2 = e6.material;
    const n2 = void 0 === t2.attributes.tangent, o2 = void 0 !== t2.attributes.color, r2 = void 0 === t2.attributes.normal;
    if (e6.isPoints) {
      const e7 = "PointsMaterial:" + i2.uuid;
      let t3 = this.cache.get(e7);
      t3 || (t3 = new Qc(), Wo.prototype.copy.call(t3, i2), t3.color.copy(i2.color), t3.map = i2.map, t3.sizeAttenuation = false, this.cache.add(e7, t3)), i2 = t3;
    } else if (e6.isLine) {
      const e7 = "LineBasicMaterial:" + i2.uuid;
      let t3 = this.cache.get(e7);
      t3 || (t3 = new Ic(), Wo.prototype.copy.call(t3, i2), t3.color.copy(i2.color), t3.map = i2.map, this.cache.add(e7, t3)), i2 = t3;
    }
    if (n2 || o2 || r2) {
      let e7 = "ClonedMaterial:" + i2.uuid + ":";
      n2 && (e7 += "derivative-tangents:"), o2 && (e7 += "vertex-colors:"), r2 && (e7 += "flat-shading:");
      let t3 = this.cache.get(e7);
      t3 || (t3 = i2.clone(), o2 && (t3.vertexColors = true), r2 && (t3.flatShading = true), n2 && (t3.normalScale && (t3.normalScale.y *= -1), t3.clearcoatNormalScale && (t3.clearcoatNormalScale.y *= -1)), this.cache.add(e7, t3), this.associations.set(t3, this.associations.get(i2))), i2 = t3;
    }
    e6.material = i2;
  }
  getMaterialType() {
    return ih;
  }
  loadMaterial(e6) {
    const t2 = this, i2 = this.json, n2 = this.extensions, o2 = i2.materials[e6];
    let r2;
    const s2 = {}, a2 = [];
    if ((o2.extensions || {})[Yu.KHR_MATERIALS_UNLIT]) {
      const e7 = n2[Yu.KHR_MATERIALS_UNLIT];
      r2 = e7.getMaterialType(), a2.push(e7.extendParams(s2, o2, t2));
    } else {
      const i3 = o2.pbrMetallicRoughness || {};
      if (s2.color = new Go(1, 1, 1), s2.opacity = 1, Array.isArray(i3.baseColorFactor)) {
        const e7 = i3.baseColorFactor;
        s2.color.setRGB(e7[0], e7[1], e7[2], _i), s2.opacity = e7[3];
      }
      void 0 !== i3.baseColorTexture && a2.push(t2.assignTexture(s2, "map", i3.baseColorTexture, pi)), s2.metalness = void 0 !== i3.metallicFactor ? i3.metallicFactor : 1, s2.roughness = void 0 !== i3.roughnessFactor ? i3.roughnessFactor : 1, void 0 !== i3.metallicRoughnessTexture && (a2.push(t2.assignTexture(s2, "metalnessMap", i3.metallicRoughnessTexture)), a2.push(t2.assignTexture(s2, "roughnessMap", i3.metallicRoughnessTexture))), r2 = this._invokeOne(function(t3) {
        return t3.getMaterialType && t3.getMaterialType(e6);
      }), a2.push(Promise.all(this._invokeAll(function(t3) {
        return t3.extendMaterialParams && t3.extendMaterialParams(e6, s2);
      })));
    }
    true === o2.doubleSided && (s2.side = 2);
    const l2 = o2.alphaMode || Pd;
    if (l2 === Ld ? (s2.transparent = true, s2.depthWrite = false) : (s2.transparent = false, l2 === Dd && (s2.alphaTest = void 0 !== o2.alphaCutoff ? o2.alphaCutoff : 0.5)), void 0 !== o2.normalTexture && r2 !== jo && (a2.push(t2.assignTexture(s2, "normalMap", o2.normalTexture)), s2.normalScale = new $i(1, 1), void 0 !== o2.normalTexture.scale)) {
      const e7 = o2.normalTexture.scale;
      s2.normalScale.set(e7, e7);
    }
    if (void 0 !== o2.occlusionTexture && r2 !== jo && (a2.push(t2.assignTexture(s2, "aoMap", o2.occlusionTexture)), void 0 !== o2.occlusionTexture.strength && (s2.aoMapIntensity = o2.occlusionTexture.strength)), void 0 !== o2.emissiveFactor && r2 !== jo) {
      const e7 = o2.emissiveFactor;
      s2.emissive = new Go().setRGB(e7[0], e7[1], e7[2], _i);
    }
    return void 0 !== o2.emissiveTexture && r2 !== jo && a2.push(t2.assignTexture(s2, "emissiveMap", o2.emissiveTexture, pi)), Promise.all(a2).then(function() {
      const i3 = new r2(s2);
      return o2.name && (i3.name = o2.name), Od(i3, o2), t2.associations.set(i3, { materials: e6 }), o2.extensions && Nd(n2, i3, o2), i3;
    });
  }
  createUniqueName(e6) {
    const t2 = ou.sanitizeNodeName(e6 || "");
    return t2 in this.nodeNamesUsed ? t2 + "_" + ++this.nodeNamesUsed[t2] : (this.nodeNamesUsed[t2] = 0, t2);
  }
  loadGeometries(e6) {
    const t2 = this, i2 = this.extensions, n2 = this.primitiveCache;
    function o2(e7) {
      return i2[Yu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e7, t2).then(function(i3) {
        return qd(i3, e7, t2);
      });
    }
    const r2 = [];
    for (let i3 = 0, s2 = e6.length; i3 < s2; i3++) {
      const s3 = e6[i3], a2 = zd(s3), l2 = n2[a2];
      if (l2) r2.push(l2.promise);
      else {
        let e7;
        e7 = s3.extensions && s3.extensions[Yu.KHR_DRACO_MESH_COMPRESSION] ? o2(s3) : qd(new ur(), s3, t2), n2[a2] = { primitive: s3, promise: e7 }, r2.push(e7);
      }
    }
    return Promise.all(r2);
  }
  loadMesh(e6) {
    const t2 = this, i2 = this.json, n2 = this.extensions, o2 = i2.meshes[e6], r2 = o2.primitives, s2 = [];
    for (let e7 = 0, t3 = r2.length; e7 < t3; e7++) {
      const t4 = void 0 === r2[e7].material ? Fd(this.cache) : this.getDependency("material", r2[e7].material);
      s2.push(t4);
    }
    return s2.push(t2.loadGeometries(r2)), Promise.all(s2).then(function(i3) {
      const s3 = i3.slice(0, i3.length - 1), a2 = i3[i3.length - 1], l2 = [];
      for (let i4 = 0, c3 = a2.length; i4 < c3; i4++) {
        const c4 = a2[i4], h2 = r2[i4];
        let u2;
        const d2 = s3[i4];
        if (h2.mode === Sd.TRIANGLES || h2.mode === Sd.TRIANGLE_STRIP || h2.mode === Sd.TRIANGLE_FAN || void 0 === h2.mode) u2 = true === o2.isSkinnedMesh ? new pc(c4, d2) : new xr(c4, d2), true === u2.isSkinnedMesh && u2.normalizeSkinWeights(), h2.mode === Sd.TRIANGLE_STRIP ? u2.geometry = Wu(u2.geometry, 1) : h2.mode === Sd.TRIANGLE_FAN && (u2.geometry = Wu(u2.geometry, 2));
        else if (h2.mode === Sd.LINES) u2 = new zc(c4, d2);
        else if (h2.mode === Sd.LINE_STRIP) u2 = new Fc(c4, d2);
        else if (h2.mode === Sd.LINE_LOOP) u2 = new Hc(c4, d2);
        else {
          if (h2.mode !== Sd.POINTS) throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + h2.mode);
          u2 = new Wc(c4, d2);
        }
        Object.keys(u2.geometry.morphAttributes).length > 0 && Ud(u2, o2), u2.name = t2.createUniqueName(o2.name || "mesh_" + e6), Od(u2, o2), h2.extensions && Nd(n2, u2, h2), t2.assignFinalMaterial(u2), l2.push(u2);
      }
      for (let i4 = 0, n3 = l2.length; i4 < n3; i4++) t2.associations.set(l2[i4], { meshes: e6, primitives: i4 });
      if (1 === l2.length) return o2.extensions && Nd(n2, l2[0], o2), l2[0];
      const c2 = new Il();
      o2.extensions && Nd(n2, c2, o2), t2.associations.set(c2, { meshes: e6 });
      for (let e7 = 0, t3 = l2.length; e7 < t3; e7++) c2.add(l2[e7]);
      return c2;
    });
  }
  loadCamera(e6) {
    let t2;
    const i2 = this.json.cameras[e6], n2 = i2[i2.type];
    if (n2) return "perspective" === i2.type ? t2 = new Lr(qi.radToDeg(n2.yfov), n2.aspectRatio || 1, n2.znear || 1, n2.zfar || 2e6) : "orthographic" === i2.type && (t2 = new ls(-n2.xmag, n2.xmag, n2.ymag, -n2.ymag, n2.znear, n2.zfar)), i2.name && (t2.name = this.createUniqueName(i2.name)), Od(t2, i2), Promise.resolve(t2);
    console.warn("THREE.GLTFLoader: Missing camera parameters.");
  }
  loadSkin(e6) {
    const t2 = this.json.skins[e6], i2 = [];
    for (let e7 = 0, n2 = t2.joints.length; e7 < n2; e7++) i2.push(this._loadNodeShallow(t2.joints[e7]));
    return void 0 !== t2.inverseBindMatrices ? i2.push(this.getDependency("accessor", t2.inverseBindMatrices)) : i2.push(null), Promise.all(i2).then(function(e7) {
      const i3 = e7.pop(), n2 = e7, o2 = [], r2 = [];
      for (let e8 = 0, s2 = n2.length; e8 < s2; e8++) {
        const s3 = n2[e8];
        if (s3) {
          o2.push(s3);
          const t3 = new Kn();
          null !== i3 && t3.fromArray(i3.array, 16 * e8), r2.push(t3);
        } else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t2.joints[e8]);
      }
      return new vc(o2, r2);
    });
  }
  loadAnimation(e6) {
    const t2 = this.json, i2 = this, n2 = t2.animations[e6], o2 = n2.name ? n2.name : "animation_" + e6, r2 = [], s2 = [], a2 = [], l2 = [], c2 = [];
    for (let e7 = 0, t3 = n2.channels.length; e7 < t3; e7++) {
      const t4 = n2.channels[e7], i3 = n2.samplers[t4.sampler], o3 = t4.target, h2 = o3.node, u2 = void 0 !== n2.parameters ? n2.parameters[i3.input] : i3.input, d2 = void 0 !== n2.parameters ? n2.parameters[i3.output] : i3.output;
      void 0 !== o3.node && (r2.push(this.getDependency("node", h2)), s2.push(this.getDependency("accessor", u2)), a2.push(this.getDependency("accessor", d2)), l2.push(i3), c2.push(o3));
    }
    return Promise.all([Promise.all(r2), Promise.all(s2), Promise.all(a2), Promise.all(l2), Promise.all(c2)]).then(function(e7) {
      const t3 = e7[0], n3 = e7[1], r3 = e7[2], s3 = e7[3], a3 = e7[4], l3 = [];
      for (let e8 = 0, o3 = t3.length; e8 < o3; e8++) {
        const o4 = t3[e8], c3 = n3[e8], h2 = r3[e8], u2 = s3[e8], d2 = a3[e8];
        if (void 0 === o4) continue;
        o4.updateMatrix && o4.updateMatrix();
        const p2 = i2._createAnimationTracks(o4, c3, h2, u2, d2);
        if (p2) for (let e9 = 0; e9 < p2.length; e9++) l3.push(p2[e9]);
      }
      return new yh(o2, void 0, l3);
    });
  }
  createNodeMesh(e6) {
    const t2 = this.json, i2 = this, n2 = t2.nodes[e6];
    return void 0 === n2.mesh ? null : i2.getDependency("mesh", n2.mesh).then(function(e7) {
      const t3 = i2._getNodeRef(i2.meshCache, n2.mesh, e7);
      return void 0 !== n2.weights && t3.traverse(function(e8) {
        if (e8.isMesh) for (let t4 = 0, i3 = n2.weights.length; t4 < i3; t4++) e8.morphTargetInfluences[t4] = n2.weights[t4];
      }), t3;
    });
  }
  loadNode(e6) {
    const t2 = this, i2 = this.json.nodes[e6], n2 = t2._loadNodeShallow(e6), o2 = [], r2 = i2.children || [];
    for (let e7 = 0, i3 = r2.length; e7 < i3; e7++) o2.push(t2.getDependency("node", r2[e7]));
    const s2 = void 0 === i2.skin ? Promise.resolve(null) : t2.getDependency("skin", i2.skin);
    return Promise.all([n2, Promise.all(o2), s2]).then(function(e7) {
      const t3 = e7[0], i3 = e7[1], n3 = e7[2];
      null !== n3 && t3.traverse(function(e8) {
        e8.isSkinnedMesh && e8.bind(n3, Vd);
      });
      for (let e8 = 0, n4 = i3.length; e8 < n4; e8++) t3.add(i3[e8]);
      return t3;
    });
  }
  _loadNodeShallow(e6) {
    const t2 = this.json, i2 = this.extensions, n2 = this;
    if (void 0 !== this.nodeCache[e6]) return this.nodeCache[e6];
    const o2 = t2.nodes[e6], r2 = o2.name ? n2.createUniqueName(o2.name) : "", s2 = [], a2 = n2._invokeOne(function(t3) {
      return t3.createNodeMesh && t3.createNodeMesh(e6);
    });
    return a2 && s2.push(a2), void 0 !== o2.camera && s2.push(n2.getDependency("camera", o2.camera).then(function(e7) {
      return n2._getNodeRef(n2.cameraCache, o2.camera, e7);
    })), n2._invokeAll(function(t3) {
      return t3.createNodeAttachment && t3.createNodeAttachment(e6);
    }).forEach(function(e7) {
      s2.push(e7);
    }), this.nodeCache[e6] = Promise.all(s2).then(function(t3) {
      let s3;
      if (s3 = true === o2.isBone ? new _c() : t3.length > 1 ? new Il() : 1 === t3.length ? t3[0] : new So(), s3 !== t3[0]) for (let e7 = 0, i3 = t3.length; e7 < i3; e7++) s3.add(t3[e7]);
      if (o2.name && (s3.userData.name = o2.name, s3.name = r2), Od(s3, o2), o2.extensions && Nd(i2, s3, o2), void 0 !== o2.matrix) {
        const e7 = new Kn();
        e7.fromArray(o2.matrix), s3.applyMatrix4(e7);
      } else void 0 !== o2.translation && s3.position.fromArray(o2.translation), void 0 !== o2.rotation && s3.quaternion.fromArray(o2.rotation), void 0 !== o2.scale && s3.scale.fromArray(o2.scale);
      return n2.associations.has(s3) || n2.associations.set(s3, {}), n2.associations.get(s3).nodes = e6, s3;
    }), this.nodeCache[e6];
  }
  loadScene(e6) {
    const t2 = this.extensions, i2 = this.json.scenes[e6], n2 = this, o2 = new Il();
    i2.name && (o2.name = n2.createUniqueName(i2.name)), Od(o2, i2), i2.extensions && Nd(t2, o2, i2);
    const r2 = i2.nodes || [], s2 = [];
    for (let e7 = 0, t3 = r2.length; e7 < t3; e7++) s2.push(n2.getDependency("node", r2[e7]));
    return Promise.all(s2).then(function(e7) {
      for (let t3 = 0, i3 = e7.length; t3 < i3; t3++) o2.add(e7[t3]);
      return n2.associations = ((e8) => {
        const t3 = /* @__PURE__ */ new Map();
        for (const [e9, i3] of n2.associations) (e9 instanceof Wo || e9 instanceof _n) && t3.set(e9, i3);
        return e8.traverse((e9) => {
          const i3 = n2.associations.get(e9);
          null != i3 && t3.set(e9, i3);
        }), t3;
      })(o2), o2;
    });
  }
  _createAnimationTracks(e6, t2, i2, n2, o2) {
    const r2 = [], s2 = e6.name ? e6.name : e6.uuid, a2 = [];
    let l2;
    switch (Rd[o2.path] === Rd.weights ? e6.traverse(function(e7) {
      e7.morphTargetInfluences && a2.push(e7.name ? e7.name : e7.uuid);
    }) : a2.push(s2), Rd[o2.path]) {
      case Rd.weights:
        l2 = mh;
        break;
      case Rd.rotation:
        l2 = vh;
        break;
      case Rd.position:
      case Rd.scale:
        l2 = bh;
        break;
      default:
        if (1 === i2.itemSize) l2 = mh;
        else l2 = bh;
    }
    const c2 = void 0 !== n2.interpolation ? kd[n2.interpolation] : si, h2 = this._getArrayFromAccessor(i2);
    for (let e7 = 0, i3 = a2.length; e7 < i3; e7++) {
      const i4 = new l2(a2[e7] + "." + Rd[o2.path], t2.array, h2, c2);
      "CUBICSPLINE" === n2.interpolation && this._createCubicSplineTrackInterpolant(i4), r2.push(i4);
    }
    return r2;
  }
  _getArrayFromAccessor(e6) {
    let t2 = e6.array;
    if (e6.normalized) {
      const e7 = Qd(t2.constructor), i2 = new Float32Array(t2.length);
      for (let n2 = 0, o2 = t2.length; n2 < o2; n2++) i2[n2] = t2[n2] * e7;
      t2 = i2;
    }
    return t2;
  }
  _createCubicSplineTrackInterpolant(e6) {
    e6.createInterpolant = function(e7) {
      return new (this instanceof vh ? Cd : wd)(this.times, this.values, this.getValueSize() / 3, e7);
    }, e6.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;
  }
}
function qd(e6, t2, i2) {
  const n2 = t2.attributes, o2 = [];
  function r2(t3, n3) {
    return i2.getDependency("accessor", t3).then(function(t4) {
      e6.setAttribute(n3, t4);
    });
  }
  for (const t3 in n2) {
    const i3 = Bd[t3] || t3.toLowerCase();
    i3 in e6.attributes || o2.push(r2(n2[t3], i3));
  }
  if (void 0 !== t2.indices && !e6.index) {
    const n3 = i2.getDependency("accessor", t2.indices).then(function(t3) {
      e6.setIndex(t3);
    });
    o2.push(n3);
  }
  return rn.workingColorSpace !== _i && "COLOR_0" in n2 && console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${rn.workingColorSpace}" not supported.`), Od(e6, t2), function(e7, t3, i3) {
    const n3 = t3.attributes, o3 = new Cn();
    if (void 0 === n3.POSITION) return;
    {
      const e8 = i3.json.accessors[n3.POSITION], t4 = e8.min, r4 = e8.max;
      if (void 0 === t4 || void 0 === r4) return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      if (o3.set(new yn(t4[0], t4[1], t4[2]), new yn(r4[0], r4[1], r4[2])), e8.normalized) {
        const t5 = Qd(Ed[e8.componentType]);
        o3.min.multiplyScalar(t5), o3.max.multiplyScalar(t5);
      }
    }
    const r3 = t3.targets;
    if (void 0 !== r3) {
      const e8 = new yn(), t4 = new yn();
      for (let n4 = 0, o4 = r3.length; n4 < o4; n4++) {
        const o5 = r3[n4];
        if (void 0 !== o5.POSITION) {
          const n5 = i3.json.accessors[o5.POSITION], r4 = n5.min, s3 = n5.max;
          if (void 0 !== r4 && void 0 !== s3) {
            if (t4.setX(Math.max(Math.abs(r4[0]), Math.abs(s3[0]))), t4.setY(Math.max(Math.abs(r4[1]), Math.abs(s3[1]))), t4.setZ(Math.max(Math.abs(r4[2]), Math.abs(s3[2]))), n5.normalized) {
              const e9 = Qd(Ed[n5.componentType]);
              t4.multiplyScalar(e9);
            }
            e8.max(t4);
          } else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
        }
      }
      o3.expandByVector(e8);
    }
    e7.boundingBox = o3;
    const s2 = new Qn();
    o3.getCenter(s2.center), s2.radius = o3.min.distanceTo(o3.max) / 2, e7.boundingSphere = s2;
  }(e6, t2, i2), Promise.all(o2).then(function() {
    return void 0 !== t2.targets ? function(e7, t3, i3) {
      let n3 = false, o3 = false, r3 = false;
      for (let e8 = 0, i4 = t3.length; e8 < i4; e8++) {
        const i5 = t3[e8];
        if (void 0 !== i5.POSITION && (n3 = true), void 0 !== i5.NORMAL && (o3 = true), void 0 !== i5.COLOR_0 && (r3 = true), n3 && o3 && r3) break;
      }
      if (!n3 && !o3 && !r3) return Promise.resolve(e7);
      const s2 = [], a2 = [], l2 = [];
      for (let c2 = 0, h2 = t3.length; c2 < h2; c2++) {
        const h3 = t3[c2];
        if (n3) {
          const t4 = void 0 !== h3.POSITION ? i3.getDependency("accessor", h3.POSITION) : e7.attributes.position;
          s2.push(t4);
        }
        if (o3) {
          const t4 = void 0 !== h3.NORMAL ? i3.getDependency("accessor", h3.NORMAL) : e7.attributes.normal;
          a2.push(t4);
        }
        if (r3) {
          const t4 = void 0 !== h3.COLOR_0 ? i3.getDependency("accessor", h3.COLOR_0) : e7.attributes.color;
          l2.push(t4);
        }
      }
      return Promise.all([Promise.all(s2), Promise.all(a2), Promise.all(l2)]).then(function(t4) {
        const i4 = t4[0], s3 = t4[1], a3 = t4[2];
        return n3 && (e7.morphAttributes.position = i4), o3 && (e7.morphAttributes.normal = s3), r3 && (e7.morphAttributes.color = a3), e7.morphTargetsRelative = true, e7;
      });
    }(e6, t2.targets, i2) : e6;
  });
}
class $d {
  constructor(e6 = 4) {
    this.pool = e6, this.queue = [], this.workers = [], this.workersResolve = [], this.workerStatus = 0;
  }
  _initWorker(e6) {
    if (!this.workers[e6]) {
      const t2 = this.workerCreator();
      t2.addEventListener("message", this._onMessage.bind(this, e6)), this.workers[e6] = t2;
    }
  }
  _getIdleWorker() {
    for (let e6 = 0; e6 < this.pool; e6++) if (!(this.workerStatus & 1 << e6)) return e6;
    return -1;
  }
  _onMessage(e6, t2) {
    const i2 = this.workersResolve[e6];
    if (i2 && i2(t2), this.queue.length) {
      const { resolve: t3, msg: i3, transfer: n2 } = this.queue.shift();
      this.workersResolve[e6] = t3, this.workers[e6].postMessage(i3, n2);
    } else this.workerStatus ^= 1 << e6;
  }
  setWorkerCreator(e6) {
    this.workerCreator = e6;
  }
  setWorkerLimit(e6) {
    this.pool = e6;
  }
  postMessage(e6, t2) {
    return new Promise((i2) => {
      const n2 = this._getIdleWorker();
      -1 !== n2 ? (this._initWorker(n2), this.workerStatus |= 1 << n2, this.workersResolve[n2] = i2, this.workers[n2].postMessage(e6, t2)) : this.queue.push({ resolve: i2, msg: e6, transfer: t2 });
    });
  }
  dispose() {
    this.workers.forEach((e6) => e6.terminate()), this.workersResolve.length = 0, this.workers.length = 0, this.queue.length = 0, this.workerStatus = 0;
  }
}
const Wd = 9, jd = 15, Xd = 16, Yd = 22, Kd = 37, Zd = 43, Jd = 76, ep = 83, tp = 97, ip = 100, np = 103, op = 109, rp = 165, sp = 166, ap = 1000066e3;
class lp {
  constructor() {
    this.vkFormat = 0, this.typeSize = 1, this.pixelWidth = 0, this.pixelHeight = 0, this.pixelDepth = 0, this.layerCount = 0, this.faceCount = 1, this.supercompressionScheme = 0, this.levels = [], this.dataFormatDescriptor = [{ vendorId: 0, descriptorType: 0, descriptorBlockSize: 0, versionNumber: 2, colorModel: 0, colorPrimaries: 1, transferFunction: 2, flags: 0, texelBlockDimension: [0, 0, 0, 0], bytesPlane: [0, 0, 0, 0, 0, 0, 0, 0], samples: [] }], this.keyValue = {}, this.globalData = null;
  }
}
class cp {
  constructor(e6, t2, i2, n2) {
    this._dataView = void 0, this._littleEndian = void 0, this._offset = void 0, this._dataView = new DataView(e6.buffer, e6.byteOffset + t2, i2), this._littleEndian = n2, this._offset = 0;
  }
  _nextUint8() {
    const e6 = this._dataView.getUint8(this._offset);
    return this._offset += 1, e6;
  }
  _nextUint16() {
    const e6 = this._dataView.getUint16(this._offset, this._littleEndian);
    return this._offset += 2, e6;
  }
  _nextUint32() {
    const e6 = this._dataView.getUint32(this._offset, this._littleEndian);
    return this._offset += 4, e6;
  }
  _nextUint64() {
    const e6 = this._dataView.getUint32(this._offset, this._littleEndian) + 2 ** 32 * this._dataView.getUint32(this._offset + 4, this._littleEndian);
    return this._offset += 8, e6;
  }
  _nextInt32() {
    const e6 = this._dataView.getInt32(this._offset, this._littleEndian);
    return this._offset += 4, e6;
  }
  _nextUint8Array(e6) {
    const t2 = new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + this._offset, e6);
    return this._offset += e6, t2;
  }
  _skip(e6) {
    return this._offset += e6, this;
  }
  _scan(e6, t2) {
    void 0 === t2 && (t2 = 0);
    const i2 = this._offset;
    let n2 = 0;
    for (; this._dataView.getUint8(this._offset) !== t2 && n2 < e6; ) n2++, this._offset++;
    return n2 < e6 && this._offset++, new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + i2, n2);
  }
}
const hp = [171, 75, 84, 88, 32, 50, 48, 187, 13, 10, 26, 10];
function up(e6) {
  return new TextDecoder().decode(e6);
}
let dp, pp, _p;
const gp = { env: { emscripten_notify_memory_growth: function(e6) {
  _p = new Uint8Array(pp.exports.memory.buffer);
} } };
class mp {
  init() {
    return dp || (dp = "undefined" != typeof fetch ? fetch("data:application/wasm;base64," + fp).then((e6) => e6.arrayBuffer()).then((e6) => WebAssembly.instantiate(e6, gp)).then(this._init) : WebAssembly.instantiate(Buffer.from(fp, "base64"), gp).then(this._init), dp);
  }
  _init(e6) {
    pp = e6.instance, gp.env.emscripten_notify_memory_growth(0);
  }
  decode(e6, t2 = 0) {
    if (!pp) throw new Error("ZSTDDecoder: Await .init() before decoding.");
    const i2 = e6.byteLength, n2 = pp.exports.malloc(i2);
    _p.set(e6, n2), t2 = t2 || Number(pp.exports.ZSTD_findDecompressedSize(n2, i2));
    const o2 = pp.exports.malloc(t2), r2 = pp.exports.ZSTD_decompress(o2, t2, n2, i2), s2 = _p.slice(o2, o2 + r2);
    return pp.exports.free(n2), pp.exports.free(o2), s2;
  }
}
const fp = "AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ", vp = /* @__PURE__ */ new WeakMap();
let Ap, bp = 0;
class yp extends Eh {
  constructor(e6) {
    super(e6), this.transcoderPath = "", this.transcoderBinary = null, this.transcoderPending = null, this.workerPool = new $d(), this.workerSourceURL = "", this.workerConfig = null, "undefined" != typeof MSC_TRANSCODER && console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.');
  }
  setTranscoderPath(e6) {
    return this.transcoderPath = e6, this;
  }
  setWorkerLimit(e6) {
    return this.workerPool.setWorkerLimit(e6), this;
  }
  async detectSupportAsync(e6) {
    return this.workerConfig = { astcSupported: await e6.hasFeatureAsync("texture-compression-astc"), etc1Supported: await e6.hasFeatureAsync("texture-compression-etc1"), etc2Supported: await e6.hasFeatureAsync("texture-compression-etc2"), dxtSupported: await e6.hasFeatureAsync("texture-compression-bc"), bptcSupported: await e6.hasFeatureAsync("texture-compression-bptc"), pvrtcSupported: await e6.hasFeatureAsync("texture-compression-pvrtc") }, this;
  }
  detectSupport(e6) {
    return true === e6.isWebGPURenderer ? this.workerConfig = { astcSupported: e6.hasFeature("texture-compression-astc"), etc1Supported: e6.hasFeature("texture-compression-etc1"), etc2Supported: e6.hasFeature("texture-compression-etc2"), dxtSupported: e6.hasFeature("texture-compression-bc"), bptcSupported: e6.hasFeature("texture-compression-bptc"), pvrtcSupported: e6.hasFeature("texture-compression-pvrtc") } : this.workerConfig = { astcSupported: e6.extensions.has("WEBGL_compressed_texture_astc"), etc1Supported: e6.extensions.has("WEBGL_compressed_texture_etc1"), etc2Supported: e6.extensions.has("WEBGL_compressed_texture_etc"), dxtSupported: e6.extensions.has("WEBGL_compressed_texture_s3tc"), bptcSupported: e6.extensions.has("EXT_texture_compression_bptc"), pvrtcSupported: e6.extensions.has("WEBGL_compressed_texture_pvrtc") || e6.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc") }, this;
  }
  init() {
    if (!this.transcoderPending) {
      const e6 = new Mh(this.manager);
      e6.setPath(this.transcoderPath), e6.setWithCredentials(this.withCredentials);
      const t2 = e6.loadAsync("basis_transcoder.js"), i2 = new Mh(this.manager);
      i2.setPath(this.transcoderPath), i2.setResponseType("arraybuffer"), i2.setWithCredentials(this.withCredentials);
      const n2 = i2.loadAsync("basis_transcoder.wasm");
      this.transcoderPending = Promise.all([t2, n2]).then(([e7, t3]) => {
        const i3 = yp.BasisWorker.toString(), n3 = ["/* constants */", "let _EngineFormat = " + JSON.stringify(yp.EngineFormat), "let _TranscoderFormat = " + JSON.stringify(yp.TranscoderFormat), "let _BasisFormat = " + JSON.stringify(yp.BasisFormat), "/* basis_transcoder.js */", e7, "/* worker */", i3.substring(i3.indexOf("{") + 1, i3.lastIndexOf("}"))].join("\n");
        this.workerSourceURL = URL.createObjectURL(new Blob([n3])), this.transcoderBinary = t3, this.workerPool.setWorkerCreator(() => {
          const e8 = new Worker(this.workerSourceURL), t4 = this.transcoderBinary.slice(0);
          return e8.postMessage({ type: "init", config: this.workerConfig, transcoderBinary: t4 }, [t4]), e8;
        });
      }), bp > 0 && console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."), bp++;
    }
    return this.transcoderPending;
  }
  load(e6, t2, i2, n2) {
    if (null === this.workerConfig) throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");
    const o2 = new Mh(this.manager);
    o2.setResponseType("arraybuffer"), o2.setWithCredentials(this.withCredentials), o2.load(e6, (e7) => {
      this.parse(e7, t2, n2);
    }, i2, n2);
  }
  parse(e6, t2, i2) {
    if (null === this.workerConfig) throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");
    if (vp.has(e6)) {
      return vp.get(e6).promise.then(t2).catch(i2);
    }
    this._createTexture(e6).then((e7) => t2 ? t2(e7) : null).catch(i2);
  }
  _createTextureFrom(e6, t2) {
    const { faces: i2, width: n2, height: o2, format: r2, type: s2, error: a2, dfdFlags: l2 } = e6;
    if ("error" === s2) return Promise.reject(a2);
    let c2;
    if (6 === t2.faceCount) c2 = new Zc(i2, r2, st);
    else {
      const e7 = i2[0].mipmaps;
      c2 = t2.layerCount > 1 ? new Kc(e7, n2, o2, t2.layerCount, r2, st) : new Yc(e7, n2, o2, r2, st);
    }
    return c2.minFilter = 1 === i2[0].mipmaps.length ? nt : rt, c2.magFilter = nt, c2.generateMipmaps = false, c2.needsUpdate = true, c2.colorSpace = Sp(t2), c2.premultiplyAlpha = !!(1 & l2), c2;
  }
  async _createTexture(e6, t2 = {}) {
    const i2 = function(e7) {
      const t3 = new Uint8Array(e7.buffer, e7.byteOffset, hp.length);
      if (t3[0] !== hp[0] || t3[1] !== hp[1] || t3[2] !== hp[2] || t3[3] !== hp[3] || t3[4] !== hp[4] || t3[5] !== hp[5] || t3[6] !== hp[6] || t3[7] !== hp[7] || t3[8] !== hp[8] || t3[9] !== hp[9] || t3[10] !== hp[10] || t3[11] !== hp[11]) throw new Error("Missing KTX 2.0 identifier.");
      const i3 = new lp(), n3 = 17 * Uint32Array.BYTES_PER_ELEMENT, o3 = new cp(e7, hp.length, n3, true);
      i3.vkFormat = o3._nextUint32(), i3.typeSize = o3._nextUint32(), i3.pixelWidth = o3._nextUint32(), i3.pixelHeight = o3._nextUint32(), i3.pixelDepth = o3._nextUint32(), i3.layerCount = o3._nextUint32(), i3.faceCount = o3._nextUint32();
      const r2 = o3._nextUint32();
      i3.supercompressionScheme = o3._nextUint32();
      const s2 = o3._nextUint32(), a2 = o3._nextUint32(), l2 = o3._nextUint32(), c2 = o3._nextUint32(), h2 = o3._nextUint64(), u2 = o3._nextUint64(), d2 = new cp(e7, hp.length + n3, 3 * r2 * 8, true);
      for (let t4 = 0; t4 < r2; t4++) i3.levels.push({ levelData: new Uint8Array(e7.buffer, e7.byteOffset + d2._nextUint64(), d2._nextUint64()), uncompressedByteLength: d2._nextUint64() });
      const p2 = new cp(e7, s2, a2, true), _2 = { vendorId: p2._skip(4)._nextUint16(), descriptorType: p2._nextUint16(), versionNumber: p2._nextUint16(), descriptorBlockSize: p2._nextUint16(), colorModel: p2._nextUint8(), colorPrimaries: p2._nextUint8(), transferFunction: p2._nextUint8(), flags: p2._nextUint8(), texelBlockDimension: [p2._nextUint8(), p2._nextUint8(), p2._nextUint8(), p2._nextUint8()], bytesPlane: [p2._nextUint8(), p2._nextUint8(), p2._nextUint8(), p2._nextUint8(), p2._nextUint8(), p2._nextUint8(), p2._nextUint8(), p2._nextUint8()], samples: [] }, g2 = (_2.descriptorBlockSize / 4 - 6) / 4;
      for (let e8 = 0; e8 < g2; e8++) {
        const t4 = { bitOffset: p2._nextUint16(), bitLength: p2._nextUint8(), channelType: p2._nextUint8(), samplePosition: [p2._nextUint8(), p2._nextUint8(), p2._nextUint8(), p2._nextUint8()], sampleLower: -1 / 0, sampleUpper: 1 / 0 };
        64 & t4.channelType ? (t4.sampleLower = p2._nextInt32(), t4.sampleUpper = p2._nextInt32()) : (t4.sampleLower = p2._nextUint32(), t4.sampleUpper = p2._nextUint32()), _2.samples[e8] = t4;
      }
      i3.dataFormatDescriptor.length = 0, i3.dataFormatDescriptor.push(_2);
      const m2 = new cp(e7, l2, c2, true);
      for (; m2._offset < c2; ) {
        const e8 = m2._nextUint32(), t4 = m2._scan(e8), n4 = up(t4);
        if (i3.keyValue[n4] = m2._nextUint8Array(e8 - t4.byteLength - 1), n4.match(/^ktx/i)) {
          const e9 = up(i3.keyValue[n4]);
          i3.keyValue[n4] = e9.substring(0, e9.lastIndexOf("\0"));
        }
        m2._skip(e8 % 4 ? 4 - e8 % 4 : 0);
      }
      if (u2 <= 0) return i3;
      const f2 = new cp(e7, h2, u2, true), v2 = f2._nextUint16(), A2 = f2._nextUint16(), b2 = f2._nextUint32(), y2 = f2._nextUint32(), w2 = f2._nextUint32(), x2 = f2._nextUint32(), C2 = [];
      for (let e8 = 0; e8 < r2; e8++) C2.push({ imageFlags: f2._nextUint32(), rgbSliceByteOffset: f2._nextUint32(), rgbSliceByteLength: f2._nextUint32(), alphaSliceByteOffset: f2._nextUint32(), alphaSliceByteLength: f2._nextUint32() });
      const S2 = h2 + f2._offset, E2 = S2 + b2, T2 = E2 + y2, I2 = T2 + w2, M2 = new Uint8Array(e7.buffer, e7.byteOffset + S2, b2), B2 = new Uint8Array(e7.buffer, e7.byteOffset + E2, y2), R2 = new Uint8Array(e7.buffer, e7.byteOffset + T2, w2), k2 = new Uint8Array(e7.buffer, e7.byteOffset + I2, x2);
      return i3.globalData = { endpointCount: v2, selectorCount: A2, imageDescs: C2, endpointsData: M2, selectorsData: B2, tablesData: R2, extendedData: k2 }, i3;
    }(new Uint8Array(e6));
    if (0 !== i2.vkFormat) return async function(e7) {
      const { vkFormat: t3 } = e7;
      if (void 0 === xp[t3]) throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");
      let i3;
      2 === e7.supercompressionScheme && (Ap || (Ap = new Promise(async (e8) => {
        const t4 = new mp();
        await t4.init(), e8(t4);
      })), i3 = await Ap);
      const n3 = [];
      for (let o4 = 0; o4 < e7.levels.length; o4++) {
        const r2 = Math.max(1, e7.pixelWidth >> o4), s2 = Math.max(1, e7.pixelHeight >> o4), a2 = e7.pixelDepth ? Math.max(1, e7.pixelDepth >> o4) : 0, l2 = e7.levels[o4];
        let c2, h2;
        if (0 === e7.supercompressionScheme) c2 = l2.levelData;
        else {
          if (2 !== e7.supercompressionScheme) throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");
          c2 = i3.decode(l2.levelData, l2.uncompressedByteLength);
        }
        h2 = Cp[t3] === dt ? new Float32Array(c2.buffer, c2.byteOffset, c2.byteLength / Float32Array.BYTES_PER_ELEMENT) : Cp[t3] === pt ? new Uint16Array(c2.buffer, c2.byteOffset, c2.byteLength / Uint16Array.BYTES_PER_ELEMENT) : c2, n3.push({ data: h2, width: r2, height: s2, depth: a2 });
      }
      let o3;
      if (wp.has(xp[t3])) o3 = 0 === e7.pixelDepth ? new gc(n3[0].data, e7.pixelWidth, e7.pixelHeight) : new An(n3[0].data, e7.pixelWidth, e7.pixelHeight, e7.pixelDepth);
      else {
        if (e7.pixelDepth > 0) throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");
        o3 = new Yc(n3, e7.pixelWidth, e7.pixelHeight);
      }
      return o3.mipmaps = n3, o3.type = Cp[t3], o3.format = xp[t3], o3.colorSpace = Sp(e7), o3.needsUpdate = true, Promise.resolve(o3);
    }(i2);
    const n2 = t2, o2 = this.init().then(() => this.workerPool.postMessage({ type: "transcode", buffer: e6, taskConfig: n2 }, [e6])).then((e7) => this._createTextureFrom(e7.data, i2));
    return vp.set(e6, { promise: o2 }), o2;
  }
  dispose() {
    return this.workerPool.dispose(), this.workerSourceURL && URL.revokeObjectURL(this.workerSourceURL), bp--, this;
  }
}
yp.BasisFormat = { ETC1S: 0, UASTC_4x4: 1 }, yp.TranscoderFormat = { ETC1: 0, ETC2: 1, BC1: 2, BC3: 3, BC4: 4, BC5: 5, BC7_M6_OPAQUE_ONLY: 6, BC7_M5: 7, PVRTC1_4_RGB: 8, PVRTC1_4_RGBA: 9, ASTC_4x4: 10, ATC_RGB: 11, ATC_RGBA_INTERPOLATED_ALPHA: 12, RGBA32: 13, RGB565: 14, BGR565: 15, RGBA4444: 16 }, yp.EngineFormat = { RGBAFormat: vt, RGBA_ASTC_4x4_Format: Nt, RGBA_BPTC_Format: Kt, RGBA_ETC2_EAC_Format: Ft, RGBA_PVRTC_4BPPV1_Format: kt, RGBA_S3TC_DXT5_Format: Mt, RGB_ETC1_Format: Dt, RGB_ETC2_Format: Lt, RGB_PVRTC_4BPPV1_Format: Bt, RGBA_S3TC_DXT1_Format: Tt }, yp.BasisWorker = function() {
  let e6, t2, i2;
  const n2 = _EngineFormat, o2 = _TranscoderFormat, r2 = _BasisFormat;
  self.addEventListener("message", function(s3) {
    const u2 = s3.data;
    switch (u2.type) {
      case "init":
        e6 = u2.config, d2 = u2.transcoderBinary, t2 = new Promise((e7) => {
          i2 = { wasmBinary: d2, onRuntimeInitialized: e7 }, BASIS(i2);
        }).then(() => {
          i2.initializeBasis(), void 0 === i2.KTX2File && console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.");
        });
        break;
      case "transcode":
        t2.then(() => {
          try {
            const { faces: t3, buffers: s4, width: d3, height: p2, hasAlpha: _2, format: g2, dfdFlags: m2 } = function(t4) {
              const s5 = new i2.KTX2File(new Uint8Array(t4));
              function u3() {
                s5.close(), s5.delete();
              }
              if (!s5.isValid()) throw u3(), new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");
              const d4 = s5.isUASTC() ? r2.UASTC_4x4 : r2.ETC1S, p3 = s5.getWidth(), _3 = s5.getHeight(), g3 = s5.getLayers() || 1, m3 = s5.getLevels(), f2 = s5.getFaces(), v2 = s5.getHasAlpha(), A2 = s5.getDFDFlags(), { transcoderFormat: b2, engineFormat: y2 } = function(t5, i3, s6, h3) {
                let u4, d5;
                const p4 = t5 === r2.ETC1S ? a2 : l2;
                for (let n3 = 0; n3 < p4.length; n3++) {
                  const o3 = p4[n3];
                  if (e6[o3.if] && (o3.basisFormat.includes(t5) && !(h3 && o3.transcoderFormat.length < 2) && (!o3.needsPowerOfTwo || c2(i3) && c2(s6)))) return u4 = o3.transcoderFormat[h3 ? 1 : 0], d5 = o3.engineFormat[h3 ? 1 : 0], { transcoderFormat: u4, engineFormat: d5 };
                }
                return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."), u4 = o2.RGBA32, d5 = n2.RGBAFormat, { transcoderFormat: u4, engineFormat: d5 };
              }(d4, p3, _3, v2);
              if (!p3 || !_3 || !m3) throw u3(), new Error("THREE.KTX2Loader:	Invalid texture");
              if (!s5.startTranscoding()) throw u3(), new Error("THREE.KTX2Loader: .startTranscoding failed");
              const w2 = [], x2 = [];
              for (let e7 = 0; e7 < f2; e7++) {
                const t5 = [];
                for (let i3 = 0; i3 < m3; i3++) {
                  const n3 = [];
                  let o3, r3;
                  for (let t6 = 0; t6 < g3; t6++) {
                    const a4 = s5.getImageLevelInfo(i3, t6, e7);
                    0 !== e7 || 0 !== i3 || 0 !== t6 || a4.origWidth % 4 == 0 && a4.origHeight % 4 == 0 || console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."), m3 > 1 ? (o3 = a4.origWidth, r3 = a4.origHeight) : (o3 = a4.width, r3 = a4.height);
                    const l3 = new Uint8Array(s5.getImageTranscodedSizeInBytes(i3, t6, 0, b2));
                    if (!s5.transcodeImage(l3, i3, t6, e7, b2, 0, -1, -1)) throw u3(), new Error("THREE.KTX2Loader: .transcodeImage failed.");
                    n3.push(l3);
                  }
                  const a3 = h2(n3);
                  t5.push({ data: a3, width: o3, height: r3 }), x2.push(a3.buffer);
                }
                w2.push({ mipmaps: t5, width: p3, height: _3, format: y2 });
              }
              return u3(), { faces: w2, buffers: x2, width: p3, height: _3, hasAlpha: v2, format: y2, dfdFlags: A2 };
            }(u2.buffer);
            self.postMessage({ type: "transcode", id: u2.id, faces: t3, width: d3, height: p2, hasAlpha: _2, format: g2, dfdFlags: m2 }, s4);
          } catch (e7) {
            console.error(e7), self.postMessage({ type: "error", id: u2.id, error: e7.message });
          }
        });
    }
    var d2;
  });
  const s2 = [{ if: "astcSupported", basisFormat: [r2.UASTC_4x4], transcoderFormat: [o2.ASTC_4x4, o2.ASTC_4x4], engineFormat: [n2.RGBA_ASTC_4x4_Format, n2.RGBA_ASTC_4x4_Format], priorityETC1S: 1 / 0, priorityUASTC: 1, needsPowerOfTwo: false }, { if: "bptcSupported", basisFormat: [r2.ETC1S, r2.UASTC_4x4], transcoderFormat: [o2.BC7_M5, o2.BC7_M5], engineFormat: [n2.RGBA_BPTC_Format, n2.RGBA_BPTC_Format], priorityETC1S: 3, priorityUASTC: 2, needsPowerOfTwo: false }, { if: "dxtSupported", basisFormat: [r2.ETC1S, r2.UASTC_4x4], transcoderFormat: [o2.BC1, o2.BC3], engineFormat: [n2.RGBA_S3TC_DXT1_Format, n2.RGBA_S3TC_DXT5_Format], priorityETC1S: 4, priorityUASTC: 5, needsPowerOfTwo: false }, { if: "etc2Supported", basisFormat: [r2.ETC1S, r2.UASTC_4x4], transcoderFormat: [o2.ETC1, o2.ETC2], engineFormat: [n2.RGB_ETC2_Format, n2.RGBA_ETC2_EAC_Format], priorityETC1S: 1, priorityUASTC: 3, needsPowerOfTwo: false }, { if: "etc1Supported", basisFormat: [r2.ETC1S, r2.UASTC_4x4], transcoderFormat: [o2.ETC1], engineFormat: [n2.RGB_ETC1_Format], priorityETC1S: 2, priorityUASTC: 4, needsPowerOfTwo: false }, { if: "pvrtcSupported", basisFormat: [r2.ETC1S, r2.UASTC_4x4], transcoderFormat: [o2.PVRTC1_4_RGB, o2.PVRTC1_4_RGBA], engineFormat: [n2.RGB_PVRTC_4BPPV1_Format, n2.RGBA_PVRTC_4BPPV1_Format], priorityETC1S: 5, priorityUASTC: 6, needsPowerOfTwo: true }], a2 = s2.sort(function(e7, t3) {
    return e7.priorityETC1S - t3.priorityETC1S;
  }), l2 = s2.sort(function(e7, t3) {
    return e7.priorityUASTC - t3.priorityUASTC;
  });
  function c2(e7) {
    return e7 <= 2 || !(e7 & e7 - 1) && 0 !== e7;
  }
  function h2(e7) {
    if (1 === e7.length) return e7[0];
    let t3 = 0;
    for (let i4 = 0; i4 < e7.length; i4++) {
      t3 += e7[i4].byteLength;
    }
    const i3 = new Uint8Array(t3);
    let n3 = 0;
    for (let t4 = 0; t4 < e7.length; t4++) {
      const o3 = e7[t4];
      i3.set(o3, n3), n3 += o3.byteLength;
    }
    return i3;
  }
};
const wp = /* @__PURE__ */ new Set([vt, xt, yt]), xp = { [op]: vt, [tp]: vt, [Kd]: vt, [Zd]: vt, [np]: xt, [ep]: xt, [Xd]: xt, [Yd]: xt, [ip]: yt, [Jd]: yt, [jd]: yt, [Wd]: yt, [ap]: Nt, [sp]: Ht, [rp]: Ht }, Cp = { [op]: dt, [tp]: pt, [Kd]: st, [Zd]: st, [np]: dt, [ep]: pt, [Xd]: st, [Yd]: st, [ip]: dt, [Jd]: pt, [jd]: st, [Wd]: st, [ap]: pt, [sp]: st, [rp]: st };
function Sp(e6) {
  const t2 = e6.dataFormatDescriptor[0];
  return 1 === t2.colorPrimaries ? 2 === t2.transferFunction ? pi : _i : 10 === t2.colorPrimaries ? 2 === t2.transferFunction ? gi : mi : (0 === t2.colorPrimaries || console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t2.colorPrimaries}"`), di);
}
var Ep, Tp;
const Ip = Symbol("retainerCount"), Mp = Symbol("recentlyUsed"), Bp = Symbol("evict"), Rp = Symbol("evictionThreshold"), kp = Symbol("cache");
class Pp {
  constructor(e6, t2 = 5) {
    this[Ep] = /* @__PURE__ */ new Map(), this[Tp] = [], this[kp] = e6, this[Rp] = t2;
  }
  set evictionThreshold(e6) {
    this[Rp] = e6, this[Bp]();
  }
  get evictionThreshold() {
    return this[Rp];
  }
  get cache() {
    return this[kp];
  }
  retainerCount(e6) {
    return this[Ip].get(e6) || 0;
  }
  reset() {
    this[Ip].clear(), this[Mp] = [];
  }
  retain(e6) {
    this[Ip].has(e6) || this[Ip].set(e6, 0), this[Ip].set(e6, this[Ip].get(e6) + 1);
    const t2 = this[Mp].indexOf(e6);
    -1 !== t2 && this[Mp].splice(t2, 1), this[Mp].unshift(e6), this[Bp]();
  }
  release(e6) {
    this[Ip].has(e6) && this[Ip].set(e6, Math.max(this[Ip].get(e6) - 1, 0)), this[Bp]();
  }
  [(Ep = Ip, Tp = Mp, Bp)]() {
    if (!(this[Mp].length < this[Rp])) for (let e6 = this[Mp].length - 1; e6 >= this[Rp]; --e6) {
      const t2 = this[Mp][e6];
      0 === this[Ip].get(t2) && (this[kp].delete(t2), this[Mp].splice(e6, 1));
    }
  }
}
const Dp = (e6) => {
  const t2 = /* @__PURE__ */ new Map();
  for (const i2 of e6.mappings) for (const e7 of i2.variants) t2.set(e7, { material: null, gltfMaterialIndex: i2.material });
  return t2;
};
class Lp {
  constructor(e6) {
    this.parser = e6, this.name = "KHR_materials_variants";
  }
  afterRoot(e6) {
    const t2 = this.parser, i2 = t2.json;
    if (void 0 === i2.extensions || void 0 === i2.extensions[this.name]) return null;
    const n2 = ((e7) => {
      const t3 = [], i3 = /* @__PURE__ */ new Set();
      for (const n3 of e7) {
        let e8 = n3, o2 = 0;
        for (; i3.has(e8); ) e8 = n3 + "." + ++o2;
        i3.add(e8), t3.push(e8);
      }
      return t3;
    })((i2.extensions[this.name].variants || []).map((e7) => e7.name));
    for (const n3 of e6.scenes) n3.traverse((e7) => {
      const n4 = e7;
      if (!n4.material) return;
      const o2 = t2.associations.get(n4);
      if (null == o2 || null == o2.meshes || null == o2.primitives) return;
      const r2 = i2.meshes[o2.meshes].primitives[o2.primitives].extensions;
      r2 && r2[this.name] && (n4.userData.variantMaterials = Dp(r2[this.name]));
    });
    return e6.userData.variants = n2, Promise.resolve();
  }
}
var Fp, Np;
_n.DEFAULT_ANISOTROPY = 4;
const Op = /* @__PURE__ */ new Map(), Up = /* @__PURE__ */ new Map();
let zp;
const Hp = new class extends Eh {
  constructor(e6) {
    super(e6), this.decoderPath = "", this.decoderConfig = {}, this.decoderBinary = null, this.decoderPending = null, this.workerLimit = 4, this.workerPool = [], this.workerNextTaskID = 1, this.workerSourceURL = "", this.defaultAttributeIDs = { position: "POSITION", normal: "NORMAL", color: "COLOR", uv: "TEX_COORD" }, this.defaultAttributeTypes = { position: "Float32Array", normal: "Float32Array", color: "Float32Array", uv: "Float32Array" };
  }
  setDecoderPath(e6) {
    return this.decoderPath = e6, this;
  }
  setDecoderConfig(e6) {
    return this.decoderConfig = e6, this;
  }
  setWorkerLimit(e6) {
    return this.workerLimit = e6, this;
  }
  load(e6, t2, i2, n2) {
    const o2 = new Mh(this.manager);
    o2.setPath(this.path), o2.setResponseType("arraybuffer"), o2.setRequestHeader(this.requestHeader), o2.setWithCredentials(this.withCredentials), o2.load(e6, (e7) => {
      this.parse(e7, t2, n2);
    }, i2, n2);
  }
  parse(e6, t2, i2 = () => {
  }) {
    this.decodeDracoFile(e6, t2, null, null, pi, i2).catch(i2);
  }
  decodeDracoFile(e6, t2, i2, n2, o2 = _i, r2 = () => {
  }) {
    const s2 = { attributeIDs: i2 || this.defaultAttributeIDs, attributeTypes: n2 || this.defaultAttributeTypes, useUniqueIDs: !!i2, vertexColorSpace: o2 };
    return this.decodeGeometry(e6, s2).then(t2).catch(r2);
  }
  decodeGeometry(e6, t2) {
    const i2 = JSON.stringify(t2);
    if (qu.has(e6)) {
      const t3 = qu.get(e6);
      if (t3.key === i2) return t3.promise;
      if (0 === e6.byteLength) throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.");
    }
    let n2;
    const o2 = this.workerNextTaskID++, r2 = e6.byteLength, s2 = this._getWorker(o2, r2).then((i3) => (n2 = i3, new Promise((i4, r3) => {
      n2._callbacks[o2] = { resolve: i4, reject: r3 }, n2.postMessage({ type: "decode", id: o2, taskConfig: t2, buffer: e6 }, [e6]);
    }))).then((e7) => this._createGeometry(e7.geometry));
    return s2.catch(() => true).then(() => {
      n2 && o2 && this._releaseTask(n2, o2);
    }), qu.set(e6, { key: i2, promise: s2 }), s2;
  }
  _createGeometry(e6) {
    const t2 = new ur();
    e6.index && t2.setIndex(new er(e6.index.array, 1));
    for (let i2 = 0; i2 < e6.attributes.length; i2++) {
      const n2 = e6.attributes[i2], o2 = n2.name, r2 = n2.array, s2 = n2.itemSize, a2 = new er(r2, s2);
      "color" === o2 && (this._assignVertexColorSpace(a2, n2.vertexColorSpace), a2.normalized = r2 instanceof Float32Array == false), t2.setAttribute(o2, a2);
    }
    return t2;
  }
  _assignVertexColorSpace(e6, t2) {
    if (t2 !== pi) return;
    const i2 = new Go();
    for (let t3 = 0, n2 = e6.count; t3 < n2; t3++) i2.fromBufferAttribute(e6, t3), rn.toWorkingColorSpace(i2, pi), e6.setXYZ(t3, i2.r, i2.g, i2.b);
  }
  _loadLibrary(e6, t2) {
    const i2 = new Mh(this.manager);
    return i2.setPath(this.decoderPath), i2.setResponseType(t2), i2.setWithCredentials(this.withCredentials), new Promise((t3, n2) => {
      i2.load(e6, t3, void 0, n2);
    });
  }
  preload() {
    return this._initDecoder(), this;
  }
  _initDecoder() {
    if (this.decoderPending) return this.decoderPending;
    const e6 = "object" != typeof WebAssembly || "js" === this.decoderConfig.type, t2 = [];
    return e6 ? t2.push(this._loadLibrary("draco_decoder.js", "text")) : (t2.push(this._loadLibrary("draco_wasm_wrapper.js", "text")), t2.push(this._loadLibrary("draco_decoder.wasm", "arraybuffer"))), this.decoderPending = Promise.all(t2).then((t3) => {
      const i2 = t3[0];
      e6 || (this.decoderConfig.wasmBinary = t3[1]);
      const n2 = $u.toString(), o2 = ["/* draco decoder */", i2, "", "/* worker */", n2.substring(n2.indexOf("{") + 1, n2.lastIndexOf("}"))].join("\n");
      this.workerSourceURL = URL.createObjectURL(new Blob([o2]));
    }), this.decoderPending;
  }
  _getWorker(e6, t2) {
    return this._initDecoder().then(() => {
      if (this.workerPool.length < this.workerLimit) {
        const e7 = new Worker(this.workerSourceURL);
        e7._callbacks = {}, e7._taskCosts = {}, e7._taskLoad = 0, e7.postMessage({ type: "init", decoderConfig: this.decoderConfig }), e7.onmessage = function(t3) {
          const i3 = t3.data;
          switch (i3.type) {
            case "decode":
              e7._callbacks[i3.id].resolve(i3);
              break;
            case "error":
              e7._callbacks[i3.id].reject(i3);
              break;
            default:
              console.error('THREE.DRACOLoader: Unexpected message, "' + i3.type + '"');
          }
        }, this.workerPool.push(e7);
      } else this.workerPool.sort(function(e7, t3) {
        return e7._taskLoad > t3._taskLoad ? -1 : 1;
      });
      const i2 = this.workerPool[this.workerPool.length - 1];
      return i2._taskCosts[e6] = t2, i2._taskLoad += t2, i2;
    });
  }
  _releaseTask(e6, t2) {
    e6._taskLoad -= e6._taskCosts[t2], delete e6._callbacks[t2], delete e6._taskCosts[t2];
  }
  debug() {
    console.log("Task load: ", this.workerPool.map((e6) => e6._taskLoad));
  }
  dispose() {
    for (let e6 = 0; e6 < this.workerPool.length; ++e6) this.workerPool[e6].terminate();
    return this.workerPool.length = 0, "" !== this.workerSourceURL && URL.revokeObjectURL(this.workerSourceURL), this;
  }
}();
let Qp;
const Vp = new yp();
let Gp, qp;
const $p = Symbol("loader"), Wp = Symbol("evictionPolicy"), jp = Symbol("GLTFInstance");
class Xp extends Di {
  constructor(e6) {
    super(), this[Np] = new ju().register((e7) => new Lp(e7)), this[jp] = e6, this[$p].setDRACOLoader(Hp), this[$p].setKTX2Loader(Vp);
  }
  static setDRACODecoderLocation(e6) {
    zp = e6, Hp.setDecoderPath(e6);
  }
  static getDRACODecoderLocation() {
    return zp;
  }
  static setKTX2TranscoderLocation(e6) {
    Qp = e6, Vp.setTranscoderPath(e6);
  }
  static getKTX2TranscoderLocation() {
    return Qp;
  }
  static setMeshoptDecoderLocation(e6) {
    var t2;
    Gp !== e6 && (Gp = e6, qp = (t2 = e6, new Promise((e7, i2) => {
      const n2 = document.createElement("script");
      document.body.appendChild(n2), n2.onload = e7, n2.onerror = i2, n2.async = true, n2.src = t2;
    })).then(() => MeshoptDecoder.ready).then(() => MeshoptDecoder));
  }
  static getMeshoptDecoderLocation() {
    return Gp;
  }
  static initializeKTX2Loader(e6) {
    Vp.detectSupport(e6);
  }
  static get cache() {
    return Op;
  }
  static clearCache() {
    Op.forEach((e6, t2) => {
      this.delete(t2);
    }), this[Wp].reset();
  }
  static has(e6) {
    return Op.has(e6);
  }
  static async delete(e6) {
    if (!this.has(e6)) return;
    const t2 = Op.get(e6);
    Up.delete(e6), Op.delete(e6);
    (await t2).dispose();
  }
  static hasFinishedLoading(e6) {
    return !!Up.get(e6);
  }
  get [(Fp = Wp, Np = $p, Wp)]() {
    return this.constructor[Wp];
  }
  async preload(e6, t2, i2 = () => {
  }) {
    if (this[$p].setWithCredentials(t2.withCredentials), this.dispatchEvent({ type: "preload", element: t2, src: e6 }), !Op.has(e6)) {
      null != qp && this[$p].setMeshoptDecoder(await qp);
      const t3 = ((e7, t4, i3 = () => {
      }) => {
        const n3 = (e8) => {
          const t5 = e8.loaded / e8.total;
          i3(Math.max(0, Math.min(1, isFinite(t5) ? t5 : 1)));
        };
        return new Promise((i4, o3) => {
          t4.load(e7, i4, n3, o3);
        });
      })(e6, this[$p], (e7) => {
        i2(0.8 * e7);
      }), n2 = this[jp], o2 = t3.then((e7) => n2.prepare(e7)).then((e7) => (i2(0.9), new n2(e7))).catch((e7) => (console.error(e7), new n2()));
      Op.set(e6, o2);
    }
    await Op.get(e6), Up.set(e6, true), i2 && i2(1);
  }
  async load(e6, t2, i2 = () => {
  }) {
    await this.preload(e6, t2, i2);
    const n2 = await Op.get(e6), o2 = await n2.clone();
    return this[Wp].retain(e6), o2.dispose = () => {
      this[Wp].release(e6);
    }, o2;
  }
}
Xp[Fp] = new Pp(Xp);
class Yp extends So {
  constructor(e6 = document.createElement("div")) {
    super(), this.isCSS2DObject = true, this.element = e6, this.element.style.position = "absolute", this.element.style.userSelect = "none", this.element.setAttribute("draggable", false), this.center = new $i(0.5, 0.5), this.addEventListener("removed", function() {
      this.traverse(function(e7) {
        e7.element instanceof Element && null !== e7.element.parentNode && e7.element.parentNode.removeChild(e7.element);
      });
    });
  }
  copy(e6, t2) {
    return super.copy(e6, t2), this.element = e6.element.cloneNode(true), this.center = e6.center, this;
  }
}
const Kp = new yn(), Zp = new Kn(), Jp = new Kn(), e_ = new yn(), t_ = new yn();
class i_ {
  constructor(e6 = {}) {
    const t2 = this;
    let i2, n2, o2, r2;
    const s2 = { objects: /* @__PURE__ */ new WeakMap() }, a2 = void 0 !== e6.element ? e6.element : document.createElement("div");
    function l2(e7) {
      e7.isCSS2DObject && (e7.element.style.display = "none");
      for (let t3 = 0, i3 = e7.children.length; t3 < i3; t3++) l2(e7.children[t3]);
    }
    function c2(e7, i3, n3) {
      if (false !== e7.visible) {
        if (e7.isCSS2DObject) {
          Kp.setFromMatrixPosition(e7.matrixWorld), Kp.applyMatrix4(Jp);
          const l3 = Kp.z >= -1 && Kp.z <= 1 && true === e7.layers.test(n3.layers), c3 = e7.element;
          c3.style.display = true === l3 ? "" : "none", true === l3 && (e7.onBeforeRender(t2, i3, n3), c3.style.transform = "translate(" + -100 * e7.center.x + "%," + -100 * e7.center.y + "%)translate(" + (Kp.x * o2 + o2) + "px," + (-Kp.y * r2 + r2) + "px)", c3.parentNode !== a2 && a2.appendChild(c3), e7.onAfterRender(t2, i3, n3));
          const u2 = { distanceToCameraSquared: h2(n3, e7) };
          s2.objects.set(e7, u2);
        }
        for (let t3 = 0, o3 = e7.children.length; t3 < o3; t3++) c2(e7.children[t3], i3, n3);
      } else l2(e7);
    }
    function h2(e7, t3) {
      return e_.setFromMatrixPosition(e7.matrixWorld), t_.setFromMatrixPosition(t3.matrixWorld), e_.distanceToSquared(t_);
    }
    a2.style.overflow = "hidden", this.domElement = a2, this.getSize = function() {
      return { width: i2, height: n2 };
    }, this.render = function(e7, t3) {
      true === e7.matrixWorldAutoUpdate && e7.updateMatrixWorld(), null === t3.parent && true === t3.matrixWorldAutoUpdate && t3.updateMatrixWorld(), Zp.copy(t3.matrixWorldInverse), Jp.multiplyMatrices(t3.projectionMatrix, Zp), c2(e7, e7, t3), function(e8) {
        const t4 = function(e9) {
          const t5 = [];
          return e9.traverseVisible(function(e10) {
            e10.isCSS2DObject && t5.push(e10);
          }), t5;
        }(e8).sort(function(e9, t5) {
          if (e9.renderOrder !== t5.renderOrder) return t5.renderOrder - e9.renderOrder;
          return s2.objects.get(e9).distanceToCameraSquared - s2.objects.get(t5).distanceToCameraSquared;
        }), i3 = t4.length;
        for (let e9 = 0, n3 = t4.length; e9 < n3; e9++) t4[e9].element.style.zIndex = i3 - e9;
      }(e7);
    }, this.setSize = function(e7, t3) {
      i2 = e7, n2 = t3, o2 = i2 / 2, r2 = n2 / 2, a2.style.width = e7 + "px", a2.style.height = t3 + "px";
    };
  }
}
function n_(e6, t2, i2) {
  let n2 = i2;
  const o2 = new yn();
  return e6.updateWorldMatrix(true, true), e6.traverseVisible((e7) => {
    const { geometry: i3 } = e7;
    if (void 0 !== i3) {
      const { position: r2 } = i3.attributes;
      if (void 0 !== r2) for (let i4 = 0, s2 = r2.count; i4 < s2; i4++) e7.isMesh ? e7.getVertexPosition(i4, o2) : o2.fromBufferAttribute(r2, i4), e7.isSkinnedMesh || o2.applyMatrix4(e7.matrixWorld), n2 = t2(n2, o2);
    }
  }), n2;
}
let o_, r_, s_, a_;
function l_(e6, t2 = 1 / 0, i2 = null) {
  r_ || (r_ = new Xr(2, 2, 1, 1)), s_ || (s_ = new Br({ uniforms: { blitTexture: new lu(e6) }, vertexShader: "\n			varying vec2 vUv;\n			void main(){\n				vUv = uv;\n				gl_Position = vec4(position.xy * 1.0,0.,.999999);\n			}", fragmentShader: "\n			uniform sampler2D blitTexture; \n			varying vec2 vUv;\n\n			void main(){ \n				gl_FragColor = vec4(vUv.xy, 0, 1);\n				\n				#ifdef IS_SRGB\n				gl_FragColor = sRGBTransferOETF( texture2D( blitTexture, vUv) );\n				#else\n				gl_FragColor = texture2D( blitTexture, vUv);\n				#endif\n			}" })), s_.uniforms.blitTexture.value = e6, s_.defines.IS_SRGB = e6.colorSpace == pi, s_.needsUpdate = true, a_ || (a_ = new xr(r_, s_), a_.frustumCulled = false);
  const n2 = new Lr(), o2 = new Ol();
  o2.add(a_), null === i2 && (i2 = o_ = new Nl({ antialias: false }));
  const r2 = Math.min(e6.image.width, t2), s2 = Math.min(e6.image.height, t2);
  i2.setSize(r2, s2), i2.clear(), i2.render(o2, n2);
  const a2 = document.createElement("canvas"), l2 = a2.getContext("2d");
  a2.width = r2, a2.height = s2, l2.drawImage(i2.domElement, 0, 0, r2, s2);
  const c2 = new Jc(a2);
  return c2.minFilter = e6.minFilter, c2.magFilter = e6.magFilter, c2.wrapS = e6.wrapS, c2.wrapT = e6.wrapT, c2.colorSpace = e6.colorSpace, c2.name = e6.name, o_ && (o_.forceContextLoss(), o_.dispose(), o_ = null), c2;
}
const c_ = { POSITION: ["byte", "byte normalized", "unsigned byte", "unsigned byte normalized", "short", "short normalized", "unsigned short", "unsigned short normalized"], NORMAL: ["byte normalized", "short normalized"], TANGENT: ["byte normalized", "short normalized"], TEXCOORD: ["byte", "byte normalized", "unsigned byte", "short", "short normalized", "unsigned short"] };
class h_ {
  constructor() {
    this.pluginCallbacks = [], this.register(function(e6) {
      return new G_(e6);
    }), this.register(function(e6) {
      return new q_(e6);
    }), this.register(function(e6) {
      return new X_(e6);
    }), this.register(function(e6) {
      return new Y_(e6);
    }), this.register(function(e6) {
      return new K_(e6);
    }), this.register(function(e6) {
      return new Z_(e6);
    }), this.register(function(e6) {
      return new $_(e6);
    }), this.register(function(e6) {
      return new W_(e6);
    }), this.register(function(e6) {
      return new j_(e6);
    }), this.register(function(e6) {
      return new J_(e6);
    }), this.register(function(e6) {
      return new eg(e6);
    }), this.register(function(e6) {
      return new tg(e6);
    }), this.register(function(e6) {
      return new ig(e6);
    }), this.register(function(e6) {
      return new ng(e6);
    });
  }
  register(e6) {
    return -1 === this.pluginCallbacks.indexOf(e6) && this.pluginCallbacks.push(e6), this;
  }
  unregister(e6) {
    return -1 !== this.pluginCallbacks.indexOf(e6) && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e6), 1), this;
  }
  parse(e6, t2, i2, n2) {
    const o2 = new V_(), r2 = [];
    for (let e7 = 0, t3 = this.pluginCallbacks.length; e7 < t3; e7++) r2.push(this.pluginCallbacks[e7](o2));
    o2.setPlugins(r2), o2.write(e6, t2, n2).catch(i2);
  }
  parseAsync(e6, t2) {
    const i2 = this;
    return new Promise(function(n2, o2) {
      i2.parse(e6, n2, o2, t2);
    });
  }
}
const u_ = 0, d_ = 1, p_ = 2, __ = 3, g_ = 4, m_ = 5120, f_ = 5121, v_ = 5122, A_ = 5123, b_ = 5124, y_ = 5125, w_ = 5126, x_ = 34962, C_ = 34963, S_ = 9728, E_ = 9729, T_ = 9984, I_ = 9985, M_ = 9986, B_ = 9987, R_ = 33071, k_ = 33648, P_ = 10497, D_ = "KHR_mesh_quantization", L_ = {};
L_[1003] = S_, L_[1004] = T_, L_[1005] = M_, L_[1006] = E_, L_[1007] = I_, L_[1008] = B_, L_[1001] = R_, L_[1e3] = P_, L_[1002] = k_;
const F_ = { scale: "scale", position: "translation", quaternion: "rotation", morphTargetInfluences: "weights" }, N_ = new Go();
function O_(e6, t2) {
  return e6.length === t2.length && e6.every(function(e7, i2) {
    return e7 === t2[i2];
  });
}
function U_(e6) {
  return 4 * Math.ceil(e6 / 4);
}
function z_(e6, t2 = 0) {
  const i2 = U_(e6.byteLength);
  if (i2 !== e6.byteLength) {
    const n2 = new Uint8Array(i2);
    if (n2.set(new Uint8Array(e6)), 0 !== t2) for (let o2 = e6.byteLength; o2 < i2; o2++) n2[o2] = t2;
    return n2.buffer;
  }
  return e6;
}
function H_() {
  return "undefined" == typeof document && "undefined" != typeof OffscreenCanvas ? new OffscreenCanvas(1, 1) : document.createElement("canvas");
}
function Q_(e6, t2) {
  if (void 0 !== e6.toBlob) return new Promise((i3) => e6.toBlob(i3, t2));
  let i2;
  return "image/jpeg" === t2 ? i2 = 0.92 : "image/webp" === t2 && (i2 = 0.8), e6.convertToBlob({ type: t2, quality: i2 });
}
class V_ {
  constructor() {
    this.plugins = [], this.options = {}, this.pending = [], this.buffers = [], this.byteOffset = 0, this.buffers = [], this.nodeMap = /* @__PURE__ */ new Map(), this.skins = [], this.extensionsUsed = {}, this.extensionsRequired = {}, this.uids = /* @__PURE__ */ new Map(), this.uid = 0, this.json = { asset: { version: "2.0", generator: "THREE.GLTFExporter r" + ge } }, this.cache = { meshes: /* @__PURE__ */ new Map(), attributes: /* @__PURE__ */ new Map(), attributesNormalized: /* @__PURE__ */ new Map(), materials: /* @__PURE__ */ new Map(), textures: /* @__PURE__ */ new Map(), images: /* @__PURE__ */ new Map() };
  }
  setPlugins(e6) {
    this.plugins = e6;
  }
  async write(e6, t2, i2 = {}) {
    this.options = Object.assign({ binary: false, trs: false, onlyVisible: true, maxTextureSize: 1 / 0, animations: [], includeCustomExtensions: false }, i2), this.options.animations.length > 0 && (this.options.trs = true), this.processInput(e6), await Promise.all(this.pending);
    const n2 = this, o2 = n2.buffers, r2 = n2.json;
    i2 = n2.options;
    const s2 = n2.extensionsUsed, a2 = n2.extensionsRequired, l2 = new Blob(o2, { type: "application/octet-stream" }), c2 = Object.keys(s2), h2 = Object.keys(a2);
    if (c2.length > 0 && (r2.extensionsUsed = c2), h2.length > 0 && (r2.extensionsRequired = h2), r2.buffers && r2.buffers.length > 0 && (r2.buffers[0].byteLength = l2.size), true === i2.binary) {
      const e7 = new FileReader();
      e7.readAsArrayBuffer(l2), e7.onloadend = function() {
        const i3 = z_(e7.result), n3 = new DataView(new ArrayBuffer(8));
        n3.setUint32(0, i3.byteLength, true), n3.setUint32(4, 5130562, true);
        const o3 = z_((s3 = JSON.stringify(r2), new TextEncoder().encode(s3).buffer), 32);
        var s3;
        const a3 = new DataView(new ArrayBuffer(8));
        a3.setUint32(0, o3.byteLength, true), a3.setUint32(4, 1313821514, true);
        const l3 = new ArrayBuffer(12), c3 = new DataView(l3);
        c3.setUint32(0, 1179937895, true), c3.setUint32(4, 2, true);
        const h3 = 12 + a3.byteLength + o3.byteLength + n3.byteLength + i3.byteLength;
        c3.setUint32(8, h3, true);
        const u2 = new Blob([l3, a3, o3, n3, i3], { type: "application/octet-stream" }), d2 = new FileReader();
        d2.readAsArrayBuffer(u2), d2.onloadend = function() {
          t2(d2.result);
        };
      };
    } else if (r2.buffers && r2.buffers.length > 0) {
      const e7 = new FileReader();
      e7.readAsDataURL(l2), e7.onloadend = function() {
        const i3 = e7.result;
        r2.buffers[0].uri = i3, t2(r2);
      };
    } else t2(r2);
  }
  serializeUserData(e6, t2) {
    if (0 === Object.keys(e6.userData).length) return;
    const i2 = this.options, n2 = this.extensionsUsed;
    try {
      const o2 = JSON.parse(JSON.stringify(e6.userData));
      if (i2.includeCustomExtensions && o2.gltfExtensions) {
        void 0 === t2.extensions && (t2.extensions = {});
        for (const e7 in o2.gltfExtensions) t2.extensions[e7] = o2.gltfExtensions[e7], n2[e7] = true;
        delete o2.gltfExtensions;
      }
      Object.keys(o2).length > 0 && (t2.extras = o2);
    } catch (t3) {
      console.warn("THREE.GLTFExporter: userData of '" + e6.name + "' won't be serialized because of JSON.stringify error - " + t3.message);
    }
  }
  getUID(e6, t2 = false) {
    if (false === this.uids.has(e6)) {
      const t3 = /* @__PURE__ */ new Map();
      t3.set(true, this.uid++), t3.set(false, this.uid++), this.uids.set(e6, t3);
    }
    return this.uids.get(e6).get(t2);
  }
  isNormalizedNormalAttribute(e6) {
    if (this.cache.attributesNormalized.has(e6)) return false;
    const t2 = new yn();
    for (let i2 = 0, n2 = e6.count; i2 < n2; i2++) if (Math.abs(t2.fromBufferAttribute(e6, i2).length() - 1) > 5e-4) return false;
    return true;
  }
  createNormalizedNormalAttribute(e6) {
    const t2 = this.cache;
    if (t2.attributesNormalized.has(e6)) return t2.attributesNormalized.get(e6);
    const i2 = e6.clone(), n2 = new yn();
    for (let e7 = 0, t3 = i2.count; e7 < t3; e7++) n2.fromBufferAttribute(i2, e7), 0 === n2.x && 0 === n2.y && 0 === n2.z ? n2.setX(1) : n2.normalize(), i2.setXYZ(e7, n2.x, n2.y, n2.z);
    return t2.attributesNormalized.set(e6, i2), i2;
  }
  applyTextureTransform(e6, t2) {
    let i2 = false;
    const n2 = {};
    0 === t2.offset.x && 0 === t2.offset.y || (n2.offset = t2.offset.toArray(), i2 = true), 0 !== t2.rotation && (n2.rotation = t2.rotation, i2 = true), 1 === t2.repeat.x && 1 === t2.repeat.y || (n2.scale = t2.repeat.toArray(), i2 = true), i2 && (e6.extensions = e6.extensions || {}, e6.extensions.KHR_texture_transform = n2, this.extensionsUsed.KHR_texture_transform = true);
  }
  buildMetalRoughTexture(e6, t2) {
    if (e6 === t2) return e6;
    function i2(e7) {
      return e7.colorSpace === pi ? function(e8) {
        return e8 < 0.04045 ? 0.0773993808 * e8 : Math.pow(0.9478672986 * e8 + 0.0521327014, 2.4);
      } : function(e8) {
        return e8;
      };
    }
    console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."), e6 instanceof Yc && (e6 = l_(e6)), t2 instanceof Yc && (t2 = l_(t2));
    const n2 = e6 ? e6.image : null, o2 = t2 ? t2.image : null, r2 = Math.max(n2 ? n2.width : 0, o2 ? o2.width : 0), s2 = Math.max(n2 ? n2.height : 0, o2 ? o2.height : 0), a2 = H_();
    a2.width = r2, a2.height = s2;
    const l2 = a2.getContext("2d", { willReadFrequently: true });
    l2.fillStyle = "#00ffff", l2.fillRect(0, 0, r2, s2);
    const c2 = l2.getImageData(0, 0, r2, s2);
    if (n2) {
      l2.drawImage(n2, 0, 0, r2, s2);
      const t3 = i2(e6), o3 = l2.getImageData(0, 0, r2, s2).data;
      for (let e7 = 2; e7 < o3.length; e7 += 4) c2.data[e7] = 256 * t3(o3[e7] / 256);
    }
    if (o2) {
      l2.drawImage(o2, 0, 0, r2, s2);
      const e7 = i2(t2), n3 = l2.getImageData(0, 0, r2, s2).data;
      for (let t3 = 1; t3 < n3.length; t3 += 4) c2.data[t3] = 256 * e7(n3[t3] / 256);
    }
    l2.putImageData(c2, 0, 0);
    const h2 = (e6 || t2).clone();
    return h2.source = new un(a2), h2.colorSpace = di, h2.channel = (e6 || t2).channel, e6 && t2 && e6.channel !== t2.channel && console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."), h2;
  }
  processBuffer(e6) {
    const t2 = this.json, i2 = this.buffers;
    return t2.buffers || (t2.buffers = [{ byteLength: 0 }]), i2.push(e6), 0;
  }
  processBufferView(e6, t2, i2, n2, o2) {
    const r2 = this.json;
    let s2;
    switch (r2.bufferViews || (r2.bufferViews = []), t2) {
      case m_:
      case f_:
        s2 = 1;
        break;
      case v_:
      case A_:
        s2 = 2;
        break;
      default:
        s2 = 4;
    }
    let a2 = e6.itemSize * s2;
    o2 === x_ && (a2 = 4 * Math.ceil(a2 / 4));
    const l2 = U_(n2 * a2), c2 = new DataView(new ArrayBuffer(l2));
    let h2 = 0;
    for (let o3 = i2; o3 < i2 + n2; o3++) {
      for (let i3 = 0; i3 < e6.itemSize; i3++) {
        let n3;
        e6.itemSize > 4 ? n3 = e6.array[o3 * e6.itemSize + i3] : (0 === i3 ? n3 = e6.getX(o3) : 1 === i3 ? n3 = e6.getY(o3) : 2 === i3 ? n3 = e6.getZ(o3) : 3 === i3 && (n3 = e6.getW(o3)), true === e6.normalized && (n3 = qi.normalize(n3, e6.array))), t2 === w_ ? c2.setFloat32(h2, n3, true) : t2 === b_ ? c2.setInt32(h2, n3, true) : t2 === y_ ? c2.setUint32(h2, n3, true) : t2 === v_ ? c2.setInt16(h2, n3, true) : t2 === A_ ? c2.setUint16(h2, n3, true) : t2 === m_ ? c2.setInt8(h2, n3) : t2 === f_ && c2.setUint8(h2, n3), h2 += s2;
      }
      h2 % a2 != 0 && (h2 += a2 - h2 % a2);
    }
    const u2 = { buffer: this.processBuffer(c2.buffer), byteOffset: this.byteOffset, byteLength: l2 };
    void 0 !== o2 && (u2.target = o2), o2 === x_ && (u2.byteStride = a2), this.byteOffset += l2, r2.bufferViews.push(u2);
    return { id: r2.bufferViews.length - 1, byteLength: 0 };
  }
  processBufferViewImage(e6) {
    const t2 = this, i2 = t2.json;
    return i2.bufferViews || (i2.bufferViews = []), new Promise(function(n2) {
      const o2 = new FileReader();
      o2.readAsArrayBuffer(e6), o2.onloadend = function() {
        const e7 = z_(o2.result), r2 = { buffer: t2.processBuffer(e7), byteOffset: t2.byteOffset, byteLength: e7.byteLength };
        t2.byteOffset += e7.byteLength, n2(i2.bufferViews.push(r2) - 1);
      };
    });
  }
  processAccessor(e6, t2, i2, n2) {
    const o2 = this.json;
    let r2;
    if (e6.array.constructor === Float32Array) r2 = w_;
    else if (e6.array.constructor === Int32Array) r2 = b_;
    else if (e6.array.constructor === Uint32Array) r2 = y_;
    else if (e6.array.constructor === Int16Array) r2 = v_;
    else if (e6.array.constructor === Uint16Array) r2 = A_;
    else if (e6.array.constructor === Int8Array) r2 = m_;
    else {
      if (e6.array.constructor !== Uint8Array) throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: " + e6.array.constructor.name);
      r2 = f_;
    }
    if (void 0 === i2 && (i2 = 0), void 0 !== n2 && n2 !== 1 / 0 || (n2 = e6.count), 0 === n2) return null;
    const s2 = function(e7, t3, i3) {
      const n3 = { min: new Array(e7.itemSize).fill(Number.POSITIVE_INFINITY), max: new Array(e7.itemSize).fill(Number.NEGATIVE_INFINITY) };
      for (let o3 = t3; o3 < t3 + i3; o3++) for (let t4 = 0; t4 < e7.itemSize; t4++) {
        let i4;
        e7.itemSize > 4 ? i4 = e7.array[o3 * e7.itemSize + t4] : (0 === t4 ? i4 = e7.getX(o3) : 1 === t4 ? i4 = e7.getY(o3) : 2 === t4 ? i4 = e7.getZ(o3) : 3 === t4 && (i4 = e7.getW(o3)), true === e7.normalized && (i4 = qi.normalize(i4, e7.array))), n3.min[t4] = Math.min(n3.min[t4], i4), n3.max[t4] = Math.max(n3.max[t4], i4);
      }
      return n3;
    }(e6, i2, n2);
    let a2;
    void 0 !== t2 && (a2 = e6 === t2.index ? C_ : x_);
    const l2 = this.processBufferView(e6, r2, i2, n2, a2), c2 = { bufferView: l2.id, byteOffset: l2.byteOffset, componentType: r2, count: n2, max: s2.max, min: s2.min, type: { 1: "SCALAR", 2: "VEC2", 3: "VEC3", 4: "VEC4", 9: "MAT3", 16: "MAT4" }[e6.itemSize] };
    return true === e6.normalized && (c2.normalized = true), o2.accessors || (o2.accessors = []), o2.accessors.push(c2) - 1;
  }
  processImage(e6, t2, i2, n2 = "image/png") {
    if (null !== e6) {
      const o2 = this, r2 = o2.cache, s2 = o2.json, a2 = o2.options, l2 = o2.pending;
      r2.images.has(e6) || r2.images.set(e6, {});
      const c2 = r2.images.get(e6), h2 = n2 + ":flipY/" + i2.toString();
      if (void 0 !== c2[h2]) return c2[h2];
      s2.images || (s2.images = []);
      const u2 = { mimeType: n2 }, d2 = H_();
      d2.width = Math.min(e6.width, a2.maxTextureSize), d2.height = Math.min(e6.height, a2.maxTextureSize);
      const p2 = d2.getContext("2d", { willReadFrequently: true });
      if (true === i2 && (p2.translate(0, d2.height), p2.scale(1, -1)), void 0 !== e6.data) {
        t2 !== vt && console.error("GLTFExporter: Only RGBAFormat is supported.", t2), (e6.width > a2.maxTextureSize || e6.height > a2.maxTextureSize) && console.warn("GLTFExporter: Image size is bigger than maxTextureSize", e6);
        const i3 = new Uint8ClampedArray(e6.height * e6.width * 4);
        for (let t3 = 0; t3 < i3.length; t3 += 4) i3[t3 + 0] = e6.data[t3 + 0], i3[t3 + 1] = e6.data[t3 + 1], i3[t3 + 2] = e6.data[t3 + 2], i3[t3 + 3] = e6.data[t3 + 3];
        p2.putImageData(new ImageData(i3, e6.width, e6.height), 0, 0);
      } else {
        if (!("undefined" != typeof HTMLImageElement && e6 instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e6 instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && e6 instanceof ImageBitmap || "undefined" != typeof OffscreenCanvas && e6 instanceof OffscreenCanvas)) throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");
        p2.drawImage(e6, 0, 0, d2.width, d2.height);
      }
      true === a2.binary ? l2.push(Q_(d2, n2).then((e7) => o2.processBufferViewImage(e7)).then((e7) => {
        u2.bufferView = e7;
      })) : void 0 !== d2.toDataURL ? u2.uri = d2.toDataURL(n2) : l2.push(Q_(d2, n2).then((e7) => new FileReader().readAsDataURL(e7)).then((e7) => {
        u2.uri = e7;
      }));
      const _2 = s2.images.push(u2) - 1;
      return c2[h2] = _2, _2;
    }
    throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.");
  }
  processSampler(e6) {
    const t2 = this.json;
    t2.samplers || (t2.samplers = []);
    const i2 = { magFilter: L_[e6.magFilter], minFilter: L_[e6.minFilter], wrapS: L_[e6.wrapS], wrapT: L_[e6.wrapT] };
    return t2.samplers.push(i2) - 1;
  }
  processTexture(e6) {
    const t2 = this.options, i2 = this.cache, n2 = this.json;
    if (i2.textures.has(e6)) return i2.textures.get(e6);
    n2.textures || (n2.textures = []), e6 instanceof Yc && (e6 = l_(e6, t2.maxTextureSize));
    let o2 = e6.userData.mimeType;
    "image/webp" === o2 && (o2 = "image/png");
    const r2 = { sampler: this.processSampler(e6), source: this.processImage(e6.image, e6.format, e6.flipY, o2) };
    e6.name && (r2.name = e6.name), this._invokeAll(function(t3) {
      t3.writeTexture && t3.writeTexture(e6, r2);
    });
    const s2 = n2.textures.push(r2) - 1;
    return i2.textures.set(e6, s2), s2;
  }
  processMaterial(e6) {
    const t2 = this.cache, i2 = this.json;
    if (t2.materials.has(e6)) return t2.materials.get(e6);
    if (e6.isShaderMaterial) return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."), null;
    i2.materials || (i2.materials = []);
    const n2 = { pbrMetallicRoughness: {} };
    true !== e6.isMeshStandardMaterial && true !== e6.isMeshBasicMaterial && console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");
    const o2 = e6.color.toArray().concat([e6.opacity]);
    if (O_(o2, [1, 1, 1, 1]) || (n2.pbrMetallicRoughness.baseColorFactor = o2), e6.isMeshStandardMaterial ? (n2.pbrMetallicRoughness.metallicFactor = e6.metalness, n2.pbrMetallicRoughness.roughnessFactor = e6.roughness) : (n2.pbrMetallicRoughness.metallicFactor = 0.5, n2.pbrMetallicRoughness.roughnessFactor = 0.5), e6.metalnessMap || e6.roughnessMap) {
      const t3 = this.buildMetalRoughTexture(e6.metalnessMap, e6.roughnessMap), i3 = { index: this.processTexture(t3), channel: t3.channel };
      this.applyTextureTransform(i3, t3), n2.pbrMetallicRoughness.metallicRoughnessTexture = i3;
    }
    if (e6.map) {
      const t3 = { index: this.processTexture(e6.map), texCoord: e6.map.channel };
      this.applyTextureTransform(t3, e6.map), n2.pbrMetallicRoughness.baseColorTexture = t3;
    }
    if (e6.emissive) {
      const t3 = e6.emissive;
      if (Math.max(t3.r, t3.g, t3.b) > 0 && (n2.emissiveFactor = e6.emissive.toArray()), e6.emissiveMap) {
        const t4 = { index: this.processTexture(e6.emissiveMap), texCoord: e6.emissiveMap.channel };
        this.applyTextureTransform(t4, e6.emissiveMap), n2.emissiveTexture = t4;
      }
    }
    if (e6.normalMap) {
      const t3 = { index: this.processTexture(e6.normalMap), texCoord: e6.normalMap.channel };
      e6.normalScale && 1 !== e6.normalScale.x && (t3.scale = e6.normalScale.x), this.applyTextureTransform(t3, e6.normalMap), n2.normalTexture = t3;
    }
    if (e6.aoMap) {
      const t3 = { index: this.processTexture(e6.aoMap), texCoord: e6.aoMap.channel };
      1 !== e6.aoMapIntensity && (t3.strength = e6.aoMapIntensity), this.applyTextureTransform(t3, e6.aoMap), n2.occlusionTexture = t3;
    }
    e6.transparent ? n2.alphaMode = "BLEND" : e6.alphaTest > 0 && (n2.alphaMode = "MASK", n2.alphaCutoff = e6.alphaTest), 2 === e6.side && (n2.doubleSided = true), "" !== e6.name && (n2.name = e6.name), this.serializeUserData(e6, n2), this._invokeAll(function(t3) {
      t3.writeMaterial && t3.writeMaterial(e6, n2);
    });
    const r2 = i2.materials.push(n2) - 1;
    return t2.materials.set(e6, r2), r2;
  }
  processMesh(e6) {
    const t2 = this.cache, i2 = this.json, n2 = [e6.geometry.uuid];
    if (Array.isArray(e6.material)) for (let t3 = 0, i3 = e6.material.length; t3 < i3; t3++) n2.push(e6.material[t3].uuid);
    else n2.push(e6.material.uuid);
    const o2 = n2.join(":");
    if (t2.meshes.has(o2)) return t2.meshes.get(o2);
    const r2 = e6.geometry;
    let s2;
    s2 = e6.isLineSegments ? d_ : e6.isLineLoop ? p_ : e6.isLine ? __ : e6.isPoints ? u_ : e6.material.wireframe ? d_ : g_;
    const a2 = {}, l2 = {}, c2 = [], h2 = [], u2 = { uv: "TEXCOORD_0", uv1: "TEXCOORD_1", uv2: "TEXCOORD_2", uv3: "TEXCOORD_3", color: "COLOR_0", skinWeight: "WEIGHTS_0", skinIndex: "JOINTS_0" }, d2 = r2.getAttribute("normal");
    void 0 === d2 || this.isNormalizedNormalAttribute(d2) || (console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."), r2.setAttribute("normal", this.createNormalizedNormalAttribute(d2)));
    let p2 = null;
    for (let e7 in r2.attributes) {
      if ("morph" === e7.slice(0, 5)) continue;
      const i3 = r2.attributes[e7];
      e7 = u2[e7] || e7.toUpperCase();
      if (/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(e7) || (e7 = "_" + e7), t2.attributes.has(this.getUID(i3))) {
        l2[e7] = t2.attributes.get(this.getUID(i3));
        continue;
      }
      p2 = null;
      const n3 = i3.array;
      "JOINTS_0" !== e7 || n3 instanceof Uint16Array || n3 instanceof Uint8Array || (console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'), p2 = new er(new Uint16Array(n3), i3.itemSize, i3.normalized));
      const o3 = this.processAccessor(p2 || i3, r2);
      null !== o3 && (e7.startsWith("_") || this.detectMeshQuantization(e7, i3), l2[e7] = o3, t2.attributes.set(this.getUID(i3), o3));
    }
    if (void 0 !== d2 && r2.setAttribute("normal", d2), 0 === Object.keys(l2).length) return null;
    if (void 0 !== e6.morphTargetInfluences && e6.morphTargetInfluences.length > 0) {
      const i3 = [], n3 = [], o3 = {};
      if (void 0 !== e6.morphTargetDictionary) for (const t3 in e6.morphTargetDictionary) o3[e6.morphTargetDictionary[t3]] = t3;
      for (let s3 = 0; s3 < e6.morphTargetInfluences.length; ++s3) {
        const a3 = {};
        let l3 = false;
        for (const e7 in r2.morphAttributes) {
          if ("position" !== e7 && "normal" !== e7) {
            l3 || (console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."), l3 = true);
            continue;
          }
          const i4 = r2.morphAttributes[e7][s3], n4 = e7.toUpperCase(), o4 = r2.attributes[e7];
          if (t2.attributes.has(this.getUID(i4, true))) {
            a3[n4] = t2.attributes.get(this.getUID(i4, true));
            continue;
          }
          const c3 = i4.clone();
          if (!r2.morphTargetsRelative) for (let e8 = 0, t3 = i4.count; e8 < t3; e8++) for (let t4 = 0; t4 < i4.itemSize; t4++) 0 === t4 && c3.setX(e8, i4.getX(e8) - o4.getX(e8)), 1 === t4 && c3.setY(e8, i4.getY(e8) - o4.getY(e8)), 2 === t4 && c3.setZ(e8, i4.getZ(e8) - o4.getZ(e8)), 3 === t4 && c3.setW(e8, i4.getW(e8) - o4.getW(e8));
          a3[n4] = this.processAccessor(c3, r2), t2.attributes.set(this.getUID(o4, true), a3[n4]);
        }
        h2.push(a3), i3.push(e6.morphTargetInfluences[s3]), void 0 !== e6.morphTargetDictionary && n3.push(o3[s3]);
      }
      a2.weights = i3, n3.length > 0 && (a2.extras = {}, a2.extras.targetNames = n3);
    }
    const _2 = Array.isArray(e6.material);
    if (_2 && 0 === r2.groups.length) return null;
    let g2 = false;
    if (_2 && null === r2.index) {
      const e7 = [];
      for (let t3 = 0, i3 = r2.attributes.position.count; t3 < i3; t3++) e7[t3] = t3;
      r2.setIndex(e7), g2 = true;
    }
    const m2 = _2 ? e6.material : [e6.material], f2 = _2 ? r2.groups : [{ materialIndex: 0, start: void 0, count: void 0 }];
    for (let e7 = 0, i3 = f2.length; e7 < i3; e7++) {
      const i4 = { mode: s2, attributes: l2 };
      if (this.serializeUserData(r2, i4), h2.length > 0 && (i4.targets = h2), null !== r2.index) {
        let n4 = this.getUID(r2.index);
        void 0 === f2[e7].start && void 0 === f2[e7].count || (n4 += ":" + f2[e7].start + ":" + f2[e7].count), t2.attributes.has(n4) ? i4.indices = t2.attributes.get(n4) : (i4.indices = this.processAccessor(r2.index, r2, f2[e7].start, f2[e7].count), t2.attributes.set(n4, i4.indices)), null === i4.indices && delete i4.indices;
      }
      const n3 = this.processMaterial(m2[f2[e7].materialIndex]);
      null !== n3 && (i4.material = n3), c2.push(i4);
    }
    true === g2 && r2.setIndex(null), a2.primitives = c2, i2.meshes || (i2.meshes = []), this._invokeAll(function(t3) {
      t3.writeMesh && t3.writeMesh(e6, a2);
    });
    const v2 = i2.meshes.push(a2) - 1;
    return t2.meshes.set(o2, v2), v2;
  }
  detectMeshQuantization(e6, t2) {
    if (this.extensionsUsed[D_]) return;
    let i2;
    switch (t2.array.constructor) {
      case Int8Array:
        i2 = "byte";
        break;
      case Uint8Array:
        i2 = "unsigned byte";
        break;
      case Int16Array:
        i2 = "short";
        break;
      case Uint16Array:
        i2 = "unsigned short";
        break;
      default:
        return;
    }
    t2.normalized && (i2 += " normalized");
    const n2 = e6.split("_", 1)[0];
    c_[n2] && c_[n2].includes(i2) && (this.extensionsUsed[D_] = true, this.extensionsRequired[D_] = true);
  }
  processCamera(e6) {
    const t2 = this.json;
    t2.cameras || (t2.cameras = []);
    const i2 = e6.isOrthographicCamera, n2 = { type: i2 ? "orthographic" : "perspective" };
    return i2 ? n2.orthographic = { xmag: 2 * e6.right, ymag: 2 * e6.top, zfar: e6.far <= 0 ? 1e-3 : e6.far, znear: e6.near < 0 ? 0 : e6.near } : n2.perspective = { aspectRatio: e6.aspect, yfov: qi.degToRad(e6.fov), zfar: e6.far <= 0 ? 1e-3 : e6.far, znear: e6.near < 0 ? 0 : e6.near }, "" !== e6.name && (n2.name = e6.type), t2.cameras.push(n2) - 1;
  }
  processAnimation(e6, t2) {
    const i2 = this.json, n2 = this.nodeMap;
    i2.animations || (i2.animations = []);
    const o2 = (e6 = h_.Utils.mergeMorphTargetTracks(e6.clone(), t2)).tracks, r2 = [], s2 = [];
    for (let e7 = 0; e7 < o2.length; ++e7) {
      const i3 = o2[e7], a2 = ou.parseTrackName(i3.name);
      let l2 = ou.findNode(t2, a2.nodeName);
      const c2 = F_[a2.propertyName];
      if ("bones" === a2.objectName && (l2 = true === l2.isSkinnedMesh ? l2.skeleton.getBoneByName(a2.objectIndex) : void 0), !l2 || !c2) {
        console.warn('THREE.GLTFExporter: Could not export animation track "%s".', i3.name);
        continue;
      }
      const h2 = 1;
      let u2, d2 = i3.values.length / i3.times.length;
      c2 === F_.morphTargetInfluences && (d2 /= l2.morphTargetInfluences.length), true === i3.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ? (u2 = "CUBICSPLINE", d2 /= 3) : u2 = i3.getInterpolation() === ri ? "STEP" : "LINEAR", s2.push({ input: this.processAccessor(new er(i3.times, h2)), output: this.processAccessor(new er(i3.values, d2)), interpolation: u2 }), r2.push({ sampler: s2.length - 1, target: { node: n2.get(l2), path: c2 } });
    }
    return i2.animations.push({ name: e6.name || "clip_" + i2.animations.length, samplers: s2, channels: r2 }), i2.animations.length - 1;
  }
  processSkin(e6) {
    const t2 = this.json, i2 = this.nodeMap, n2 = t2.nodes[i2.get(e6)], o2 = e6.skeleton;
    if (void 0 === o2) return null;
    const r2 = e6.skeleton.bones[0];
    if (void 0 === r2) return null;
    const s2 = [], a2 = new Float32Array(16 * o2.bones.length), l2 = new Kn();
    for (let t3 = 0; t3 < o2.bones.length; ++t3) s2.push(i2.get(o2.bones[t3])), l2.copy(o2.boneInverses[t3]), l2.multiply(e6.bindMatrix).toArray(a2, 16 * t3);
    void 0 === t2.skins && (t2.skins = []), t2.skins.push({ inverseBindMatrices: this.processAccessor(new er(a2, 16)), joints: s2, skeleton: i2.get(r2) });
    return n2.skin = t2.skins.length - 1;
  }
  processNode(e6) {
    const t2 = this.json, i2 = this.options, n2 = this.nodeMap;
    t2.nodes || (t2.nodes = []);
    const o2 = {};
    if (i2.trs) {
      const t3 = e6.quaternion.toArray(), i3 = e6.position.toArray(), n3 = e6.scale.toArray();
      O_(t3, [0, 0, 0, 1]) || (o2.rotation = t3), O_(i3, [0, 0, 0]) || (o2.translation = i3), O_(n3, [1, 1, 1]) || (o2.scale = n3);
    } else e6.matrixAutoUpdate && e6.updateMatrix(), false === O_(e6.matrix.elements, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]) && (o2.matrix = e6.matrix.elements);
    if ("" !== e6.name && (o2.name = String(e6.name)), this.serializeUserData(e6, o2), e6.isMesh || e6.isLine || e6.isPoints) {
      const t3 = this.processMesh(e6);
      null !== t3 && (o2.mesh = t3);
    } else e6.isCamera && (o2.camera = this.processCamera(e6));
    if (e6.isSkinnedMesh && this.skins.push(e6), e6.children.length > 0) {
      const t3 = [];
      for (let n3 = 0, o3 = e6.children.length; n3 < o3; n3++) {
        const o4 = e6.children[n3];
        if (o4.visible || false === i2.onlyVisible) {
          const e7 = this.processNode(o4);
          null !== e7 && t3.push(e7);
        }
      }
      t3.length > 0 && (o2.children = t3);
    }
    this._invokeAll(function(t3) {
      t3.writeNode && t3.writeNode(e6, o2);
    });
    const r2 = t2.nodes.push(o2) - 1;
    return n2.set(e6, r2), r2;
  }
  processScene(e6) {
    const t2 = this.json, i2 = this.options;
    t2.scenes || (t2.scenes = [], t2.scene = 0);
    const n2 = {};
    "" !== e6.name && (n2.name = e6.name), t2.scenes.push(n2);
    const o2 = [];
    for (let t3 = 0, n3 = e6.children.length; t3 < n3; t3++) {
      const n4 = e6.children[t3];
      if (n4.visible || false === i2.onlyVisible) {
        const e7 = this.processNode(n4);
        null !== e7 && o2.push(e7);
      }
    }
    o2.length > 0 && (n2.nodes = o2), this.serializeUserData(e6, n2);
  }
  processObjects(e6) {
    const t2 = new Ol();
    t2.name = "AuxScene";
    for (let i2 = 0; i2 < e6.length; i2++) t2.children.push(e6[i2]);
    this.processScene(t2);
  }
  processInput(e6) {
    const t2 = this.options;
    e6 = e6 instanceof Array ? e6 : [e6], this._invokeAll(function(t3) {
      t3.beforeParse && t3.beforeParse(e6);
    });
    const i2 = [];
    for (let t3 = 0; t3 < e6.length; t3++) e6[t3] instanceof Ol ? this.processScene(e6[t3]) : i2.push(e6[t3]);
    i2.length > 0 && this.processObjects(i2);
    for (let e7 = 0; e7 < this.skins.length; ++e7) this.processSkin(this.skins[e7]);
    for (let i3 = 0; i3 < t2.animations.length; ++i3) this.processAnimation(t2.animations[i3], e6[0]);
    this._invokeAll(function(t3) {
      t3.afterParse && t3.afterParse(e6);
    });
  }
  _invokeAll(e6) {
    for (let t2 = 0, i2 = this.plugins.length; t2 < i2; t2++) e6(this.plugins[t2]);
  }
}
class G_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_lights_punctual";
  }
  writeNode(e6, t2) {
    if (!e6.isLight) return;
    if (!e6.isDirectionalLight && !e6.isPointLight && !e6.isSpotLight) return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.", e6);
    const i2 = this.writer, n2 = i2.json, o2 = i2.extensionsUsed, r2 = {};
    e6.name && (r2.name = e6.name), r2.color = e6.color.toArray(), r2.intensity = e6.intensity, e6.isDirectionalLight ? r2.type = "directional" : e6.isPointLight ? (r2.type = "point", e6.distance > 0 && (r2.range = e6.distance)) : e6.isSpotLight && (r2.type = "spot", e6.distance > 0 && (r2.range = e6.distance), r2.spot = {}, r2.spot.innerConeAngle = (1 - e6.penumbra) * e6.angle, r2.spot.outerConeAngle = e6.angle), void 0 !== e6.decay && 2 !== e6.decay && console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."), !e6.target || e6.target.parent === e6 && 0 === e6.target.position.x && 0 === e6.target.position.y && -1 === e6.target.position.z || console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."), o2[this.name] || (n2.extensions = n2.extensions || {}, n2.extensions[this.name] = { lights: [] }, o2[this.name] = true);
    const s2 = n2.extensions[this.name].lights;
    s2.push(r2), t2.extensions = t2.extensions || {}, t2.extensions[this.name] = { light: s2.length - 1 };
  }
}
class q_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_unlit";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshBasicMaterial) return;
    const i2 = this.writer.extensionsUsed;
    t2.extensions = t2.extensions || {}, t2.extensions[this.name] = {}, i2[this.name] = true, t2.pbrMetallicRoughness.metallicFactor = 0, t2.pbrMetallicRoughness.roughnessFactor = 0.9;
  }
}
class $_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_clearcoat";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 0 === e6.clearcoat) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (o2.clearcoatFactor = e6.clearcoat, e6.clearcoatMap) {
      const t3 = { index: i2.processTexture(e6.clearcoatMap), texCoord: e6.clearcoatMap.channel };
      i2.applyTextureTransform(t3, e6.clearcoatMap), o2.clearcoatTexture = t3;
    }
    if (o2.clearcoatRoughnessFactor = e6.clearcoatRoughness, e6.clearcoatRoughnessMap) {
      const t3 = { index: i2.processTexture(e6.clearcoatRoughnessMap), texCoord: e6.clearcoatRoughnessMap.channel };
      i2.applyTextureTransform(t3, e6.clearcoatRoughnessMap), o2.clearcoatRoughnessTexture = t3;
    }
    if (e6.clearcoatNormalMap) {
      const t3 = { index: i2.processTexture(e6.clearcoatNormalMap), texCoord: e6.clearcoatNormalMap.channel };
      1 !== e6.clearcoatNormalScale.x && (t3.scale = e6.clearcoatNormalScale.x), i2.applyTextureTransform(t3, e6.clearcoatNormalMap), o2.clearcoatNormalTexture = t3;
    }
    t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class W_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_dispersion";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 0 === e6.dispersion) return;
    const i2 = this.writer.extensionsUsed, n2 = {};
    n2.dispersion = e6.dispersion, t2.extensions = t2.extensions || {}, t2.extensions[this.name] = n2, i2[this.name] = true;
  }
}
class j_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_iridescence";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 0 === e6.iridescence) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (o2.iridescenceFactor = e6.iridescence, e6.iridescenceMap) {
      const t3 = { index: i2.processTexture(e6.iridescenceMap), texCoord: e6.iridescenceMap.channel };
      i2.applyTextureTransform(t3, e6.iridescenceMap), o2.iridescenceTexture = t3;
    }
    if (o2.iridescenceIor = e6.iridescenceIOR, o2.iridescenceThicknessMinimum = e6.iridescenceThicknessRange[0], o2.iridescenceThicknessMaximum = e6.iridescenceThicknessRange[1], e6.iridescenceThicknessMap) {
      const t3 = { index: i2.processTexture(e6.iridescenceThicknessMap), texCoord: e6.iridescenceThicknessMap.channel };
      i2.applyTextureTransform(t3, e6.iridescenceThicknessMap), o2.iridescenceThicknessTexture = t3;
    }
    t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class X_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_transmission";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 0 === e6.transmission) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (o2.transmissionFactor = e6.transmission, e6.transmissionMap) {
      const t3 = { index: i2.processTexture(e6.transmissionMap), texCoord: e6.transmissionMap.channel };
      i2.applyTextureTransform(t3, e6.transmissionMap), o2.transmissionTexture = t3;
    }
    t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class Y_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_volume";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 0 === e6.transmission) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (o2.thicknessFactor = e6.thickness, e6.thicknessMap) {
      const t3 = { index: i2.processTexture(e6.thicknessMap), texCoord: e6.thicknessMap.channel };
      i2.applyTextureTransform(t3, e6.thicknessMap), o2.thicknessTexture = t3;
    }
    e6.attenuationDistance !== 1 / 0 && (o2.attenuationDistance = e6.attenuationDistance), o2.attenuationColor = e6.attenuationColor.toArray(), t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class K_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_ior";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 1.5 === e6.ior) return;
    const i2 = this.writer.extensionsUsed, n2 = {};
    n2.ior = e6.ior, t2.extensions = t2.extensions || {}, t2.extensions[this.name] = n2, i2[this.name] = true;
  }
}
class Z_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_specular";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 1 === e6.specularIntensity && e6.specularColor.equals(N_) && !e6.specularIntensityMap && !e6.specularColorMap) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (e6.specularIntensityMap) {
      const t3 = { index: i2.processTexture(e6.specularIntensityMap), texCoord: e6.specularIntensityMap.channel };
      i2.applyTextureTransform(t3, e6.specularIntensityMap), o2.specularTexture = t3;
    }
    if (e6.specularColorMap) {
      const t3 = { index: i2.processTexture(e6.specularColorMap), texCoord: e6.specularColorMap.channel };
      i2.applyTextureTransform(t3, e6.specularColorMap), o2.specularColorTexture = t3;
    }
    o2.specularFactor = e6.specularIntensity, o2.specularColorFactor = e6.specularColor.toArray(), t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class J_ {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_sheen";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 0 == e6.sheen) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (e6.sheenRoughnessMap) {
      const t3 = { index: i2.processTexture(e6.sheenRoughnessMap), texCoord: e6.sheenRoughnessMap.channel };
      i2.applyTextureTransform(t3, e6.sheenRoughnessMap), o2.sheenRoughnessTexture = t3;
    }
    if (e6.sheenColorMap) {
      const t3 = { index: i2.processTexture(e6.sheenColorMap), texCoord: e6.sheenColorMap.channel };
      i2.applyTextureTransform(t3, e6.sheenColorMap), o2.sheenColorTexture = t3;
    }
    o2.sheenRoughnessFactor = e6.sheenRoughness, o2.sheenColorFactor = e6.sheenColor.toArray(), t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class eg {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_anisotropy";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshPhysicalMaterial || 0 == e6.anisotropy) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (e6.anisotropyMap) {
      const t3 = { index: i2.processTexture(e6.anisotropyMap) };
      i2.applyTextureTransform(t3, e6.anisotropyMap), o2.anisotropyTexture = t3;
    }
    o2.anisotropyStrength = e6.anisotropy, o2.anisotropyRotation = e6.anisotropyRotation, t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class tg {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_emissive_strength";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshStandardMaterial || 1 === e6.emissiveIntensity) return;
    const i2 = this.writer.extensionsUsed, n2 = {};
    n2.emissiveStrength = e6.emissiveIntensity, t2.extensions = t2.extensions || {}, t2.extensions[this.name] = n2, i2[this.name] = true;
  }
}
class ig {
  constructor(e6) {
    this.writer = e6, this.name = "EXT_materials_bump";
  }
  writeMaterial(e6, t2) {
    if (!e6.isMeshStandardMaterial || 1 === e6.bumpScale && !e6.bumpMap) return;
    const i2 = this.writer, n2 = i2.extensionsUsed, o2 = {};
    if (e6.bumpMap) {
      const t3 = { index: i2.processTexture(e6.bumpMap), texCoord: e6.bumpMap.channel };
      i2.applyTextureTransform(t3, e6.bumpMap), o2.bumpTexture = t3;
    }
    o2.bumpFactor = e6.bumpScale, t2.extensions = t2.extensions || {}, t2.extensions[this.name] = o2, n2[this.name] = true;
  }
}
class ng {
  constructor(e6) {
    this.writer = e6, this.name = "EXT_mesh_gpu_instancing";
  }
  writeNode(e6, t2) {
    if (!e6.isInstancedMesh) return;
    const i2 = this.writer, n2 = e6, o2 = new Float32Array(3 * n2.count), r2 = new Float32Array(4 * n2.count), s2 = new Float32Array(3 * n2.count), a2 = new Kn(), l2 = new yn(), c2 = new bn(), h2 = new yn();
    for (let e7 = 0; e7 < n2.count; e7++) n2.getMatrixAt(e7, a2), a2.decompose(l2, c2, h2), l2.toArray(o2, 3 * e7), c2.toArray(r2, 4 * e7), h2.toArray(s2, 3 * e7);
    const u2 = { TRANSLATION: i2.processAccessor(new er(o2, 3)), ROTATION: i2.processAccessor(new er(r2, 4)), SCALE: i2.processAccessor(new er(s2, 3)) };
    n2.instanceColor && (u2._COLOR_0 = i2.processAccessor(n2.instanceColor)), t2.extensions = t2.extensions || {}, t2.extensions[this.name] = { attributes: u2 }, i2.extensionsUsed[this.name] = true, i2.extensionsRequired[this.name] = true;
  }
}
h_.Utils = { insertKeyframe: function(e6, t2) {
  const i2 = 1e-3, n2 = e6.getValueSize(), o2 = new e6.TimeBufferType(e6.times.length + 1), r2 = new e6.ValueBufferType(e6.values.length + n2), s2 = e6.createInterpolant(new e6.ValueBufferType(n2));
  let a2;
  if (0 === e6.times.length) {
    o2[0] = t2;
    for (let e7 = 0; e7 < n2; e7++) r2[e7] = 0;
    a2 = 0;
  } else if (t2 < e6.times[0]) {
    if (Math.abs(e6.times[0] - t2) < i2) return 0;
    o2[0] = t2, o2.set(e6.times, 1), r2.set(s2.evaluate(t2), 0), r2.set(e6.values, n2), a2 = 0;
  } else if (t2 > e6.times[e6.times.length - 1]) {
    if (Math.abs(e6.times[e6.times.length - 1] - t2) < i2) return e6.times.length - 1;
    o2[o2.length - 1] = t2, o2.set(e6.times, 0), r2.set(e6.values, 0), r2.set(s2.evaluate(t2), e6.values.length), a2 = o2.length - 1;
  } else for (let l2 = 0; l2 < e6.times.length; l2++) {
    if (Math.abs(e6.times[l2] - t2) < i2) return l2;
    if (e6.times[l2] < t2 && e6.times[l2 + 1] > t2) {
      o2.set(e6.times.slice(0, l2 + 1), 0), o2[l2 + 1] = t2, o2.set(e6.times.slice(l2 + 1), l2 + 2), r2.set(e6.values.slice(0, (l2 + 1) * n2), 0), r2.set(s2.evaluate(t2), (l2 + 1) * n2), r2.set(e6.values.slice((l2 + 1) * n2), (l2 + 2) * n2), a2 = l2 + 1;
      break;
    }
  }
  return e6.times = o2, e6.values = r2, a2;
}, mergeMorphTargetTracks: function(e6, t2) {
  const i2 = [], n2 = {}, o2 = e6.tracks;
  for (let e7 = 0; e7 < o2.length; ++e7) {
    let r2 = o2[e7];
    const s2 = ou.parseTrackName(r2.name), a2 = ou.findNode(t2, s2.nodeName);
    if ("morphTargetInfluences" !== s2.propertyName || void 0 === s2.propertyIndex) {
      i2.push(r2);
      continue;
    }
    if (r2.createInterpolant !== r2.InterpolantFactoryMethodDiscrete && r2.createInterpolant !== r2.InterpolantFactoryMethodLinear) {
      if (r2.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline) throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");
      console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."), r2 = r2.clone(), r2.setInterpolation(si);
    }
    const l2 = a2.morphTargetInfluences.length, c2 = a2.morphTargetDictionary[s2.propertyIndex];
    if (void 0 === c2) throw new Error("THREE.GLTFExporter: Morph target name not found: " + s2.propertyIndex);
    let h2;
    if (void 0 === n2[a2.uuid]) {
      h2 = r2.clone();
      const e8 = new h2.ValueBufferType(l2 * h2.times.length);
      for (let t3 = 0; t3 < h2.times.length; t3++) e8[t3 * l2 + c2] = h2.values[t3];
      h2.name = (s2.nodeName || "") + ".morphTargetInfluences", h2.values = e8, n2[a2.uuid] = h2, i2.push(h2);
      continue;
    }
    const u2 = r2.createInterpolant(new r2.ValueBufferType(1));
    h2 = n2[a2.uuid];
    for (let e8 = 0; e8 < h2.times.length; e8++) h2.values[e8 * l2 + c2] = u2.evaluate(h2.times[e8]);
    for (let e8 = 0; e8 < r2.times.length; e8++) {
      const t3 = this.insertKeyframe(h2, r2.times[e8]);
      h2.values[t3 * l2 + c2] = r2.values[e8];
    }
  }
  return e6.tracks = i2, e6;
} };
const og = (e6) => void 0 !== e6.material && e6.userData && e6.userData.variantMaterials && !!Array.from(e6.userData.variantMaterials.values()).filter((e7) => rg(e7.material)), rg = (e6) => e6 && e6.isMaterial && !Array.isArray(e6);
class sg {
  constructor(e6) {
    this.writer = e6, this.name = "KHR_materials_variants", this.variantNames = [];
  }
  beforeParse(e6) {
    const t2 = /* @__PURE__ */ new Set();
    for (const i2 of e6) i2.traverse((e7) => {
      if (!og(e7)) return;
      const i3 = e7.userData.variantMaterials, n2 = e7.userData.variantData;
      for (const [e8, o2] of n2) {
        const n3 = i3.get(o2.index);
        n3 && rg(n3.material) && t2.add(e8);
      }
    });
    t2.forEach((e7) => this.variantNames.push(e7));
  }
  writeMesh(e6, t2) {
    if (!og(e6)) return;
    const i2 = e6.userData, n2 = i2.variantMaterials, o2 = i2.variantData, r2 = /* @__PURE__ */ new Map(), s2 = /* @__PURE__ */ new Map(), a2 = Array.from(o2.values()).sort((e7, t3) => e7.index - t3.index);
    for (const [e7, t3] of a2.entries()) s2.set(t3.index, e7);
    for (const e7 of o2.values()) {
      const t3 = n2.get(e7.index);
      if (!t3 || !rg(t3.material)) continue;
      const i3 = this.writer.processMaterial(t3.material);
      r2.has(i3) || r2.set(i3, { material: i3, variants: [] }), r2.get(i3).variants.push(s2.get(e7.index));
    }
    const l2 = Array.from(r2.values()).map((e7) => e7.variants.sort((e8, t3) => e8 - t3) && e7).sort((e7, t3) => e7.material - t3.material);
    if (0 === l2.length) return;
    const c2 = rg(i2.originalMaterial) ? this.writer.processMaterial(i2.originalMaterial) : -1;
    for (const e7 of t2.primitives) c2 >= 0 && (e7.material = c2), e7.extensions = e7.extensions || {}, e7.extensions[this.name] = { mappings: l2 };
  }
  afterParse() {
    if (0 === this.variantNames.length) return;
    const e6 = this.writer.json;
    e6.extensions = e6.extensions || {};
    const t2 = this.variantNames.map((e7) => ({ name: e7 }));
    e6.extensions[this.name] = { variants: t2 }, this.writer.extensionsUsed[this.name] = true;
  }
}
class ag {
  constructor(e6, t2, i2, n2, o2) {
    this.xrLight = e6, this.renderer = t2, this.lightProbe = i2, this.xrWebGLBinding = null, this.estimationStartCallback = o2, this.frameCallback = this.onXRFrame.bind(this);
    const r2 = t2.xr.getSession();
    if (n2 && "XRWebGLBinding" in window) {
      const i3 = new Ur(16);
      e6.environment = i3.texture;
      const n3 = t2.getContext();
      switch (r2.preferredReflectionFormat) {
        case "srgba8":
          n3.getExtension("EXT_sRGB");
          break;
        case "rgba16f":
          n3.getExtension("OES_texture_half_float");
      }
      this.xrWebGLBinding = new XRWebGLBinding(r2, n3), this.lightProbe.addEventListener("reflectionchange", () => {
        this.updateReflection();
      });
    }
    r2.requestAnimationFrame(this.frameCallback);
  }
  updateReflection() {
    const e6 = this.renderer.properties.get(this.xrLight.environment);
    if (e6) {
      const t2 = this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);
      t2 && (e6.__webglTexture = t2, this.xrLight.environment.needsPMREMUpdate = true);
    }
  }
  onXRFrame(e6, t2) {
    if (!this.xrLight) return;
    t2.session.requestAnimationFrame(this.frameCallback);
    const i2 = t2.getLightEstimate(this.lightProbe);
    if (i2) {
      this.xrLight.lightProbe.sh.fromArray(i2.sphericalHarmonicsCoefficients), this.xrLight.lightProbe.intensity = 1;
      const e7 = Math.max(1, Math.max(i2.primaryLightIntensity.x, Math.max(i2.primaryLightIntensity.y, i2.primaryLightIntensity.z)));
      this.xrLight.directionalLight.color.setRGB(i2.primaryLightIntensity.x / e7, i2.primaryLightIntensity.y / e7, i2.primaryLightIntensity.z / e7), this.xrLight.directionalLight.intensity = e7, this.xrLight.directionalLight.position.copy(i2.primaryLightDirection), this.estimationStartCallback && (this.estimationStartCallback(), this.estimationStartCallback = null);
    }
  }
  dispose() {
    this.xrLight = null, this.renderer = null, this.lightProbe = null, this.xrWebGLBinding = null;
  }
}
class lg extends Il {
  constructor(e6, t2 = true) {
    super(), this.lightProbe = new jh(), this.lightProbe.intensity = 0, this.add(this.lightProbe), this.directionalLight = new $h(), this.directionalLight.intensity = 0, this.add(this.directionalLight), this.environment = null;
    let i2 = null, n2 = false;
    e6.xr.addEventListener("sessionstart", () => {
      const o2 = e6.xr.getSession();
      "requestLightProbe" in o2 && o2.requestLightProbe({ reflectionFormat: o2.preferredReflectionFormat }).then((o3) => {
        i2 = new ag(this, e6, o3, t2, () => {
          n2 = true, this.dispatchEvent({ type: "estimationstart" });
        });
      });
    }), e6.xr.addEventListener("sessionend", () => {
      i2 && (i2.dispose(), i2 = null), n2 && this.dispatchEvent({ type: "estimationend" });
    }), this.dispose = () => {
      i2 && (i2.dispose(), i2 = null), this.remove(this.lightProbe), this.lightProbe = null, this.remove(this.directionalLight), this.directionalLight = null, this.environment = null;
    };
  }
}
class cg {
  constructor(e6 = 50) {
    this.velocity = 0, this.naturalFrequency = 0, this.setDecayTime(e6);
  }
  setDecayTime(e6) {
    this.naturalFrequency = 1 / Math.max(1e-3, e6);
  }
  update(e6, t2, i2, n2) {
    const o2 = 2e-4 * this.naturalFrequency;
    if (null == e6 || 0 === n2) return t2;
    if (e6 === t2 && 0 === this.velocity) return t2;
    if (i2 < 0) return e6;
    const r2 = e6 - t2, s2 = this.velocity + this.naturalFrequency * r2, a2 = r2 + i2 * s2, l2 = Math.exp(-this.naturalFrequency * i2), c2 = (s2 - this.naturalFrequency * a2) * l2, h2 = -this.naturalFrequency * (c2 + s2 * l2);
    return Math.abs(c2) < o2 * Math.abs(n2) && h2 * r2 >= 0 ? (this.velocity = 0, t2) : (this.velocity = c2, t2 + a2 * l2);
  }
}
const hg = 0.2, ug = Math.PI / 24, dg = new $i(), pg = (e6, t2, i2) => {
  let n2 = t2 > 0 ? i2 > 0 ? 0 : -Math.PI / 2 : i2 > 0 ? Math.PI / 2 : Math.PI;
  for (let o2 = 0; o2 <= 12; ++o2) e6.push(t2 + 0.17 * Math.cos(n2), i2 + 0.17 * Math.sin(n2), 0, t2 + hg * Math.cos(n2), i2 + hg * Math.sin(n2), 0), n2 += ug;
};
class _g extends xr {
  constructor(e6, t2) {
    const i2 = new ur(), n2 = [], o2 = [], { size: r2, boundingBox: s2 } = e6, a2 = r2.x / 2, l2 = ("back" === t2 ? r2.y : r2.z) / 2;
    pg(o2, a2, l2), pg(o2, -a2, l2), pg(o2, -a2, -l2), pg(o2, a2, -l2);
    const c2 = o2.length / 3;
    for (let e7 = 0; e7 < c2 - 2; e7 += 2) n2.push(e7, e7 + 1, e7 + 3, e7, e7 + 3, e7 + 2);
    const h2 = c2 - 2;
    n2.push(h2, h2 + 1, 1, h2, 1, 0), i2.setAttribute("position", new nr(o2, 3)), i2.setIndex(n2), super(i2), this.side = t2;
    const u2 = this.material;
    switch (u2.side = 2, u2.transparent = true, u2.opacity = 0, this.goalOpacity = 0, this.opacityDamper = new cg(), this.hitPlane = new xr(new Xr(2 * (a2 + hg), 2 * (l2 + hg))), this.hitPlane.visible = false, this.hitPlane.material.side = 2, this.add(this.hitPlane), this.hitBox = new xr(new Sr(r2.x + 0.4, r2.y + hg, r2.z + 0.4)), this.hitBox.visible = false, this.hitBox.material.side = 2, this.add(this.hitBox), s2.getCenter(this.position), t2) {
      case "bottom":
        this.rotateX(-Math.PI / 2), this.shadowHeight = s2.min.y, this.position.y = this.shadowHeight;
        break;
      case "back":
        this.shadowHeight = s2.min.z, this.position.z = this.shadowHeight;
    }
    e6.target.add(this), this.hitBox.position.y = (r2.y + hg) / 2 + s2.min.y, e6.target.add(this.hitBox), this.offsetHeight = 0;
  }
  getHit(e6, t2, i2) {
    dg.set(t2, -i2), this.hitPlane.visible = true;
    const n2 = e6.positionAndNormalFromPoint(dg, this.hitPlane);
    return this.hitPlane.visible = false, null == n2 ? null : n2.position;
  }
  getExpandedHit(e6, t2, i2) {
    this.hitPlane.scale.set(1e3, 1e3, 1e3), this.hitPlane.updateMatrixWorld();
    const n2 = this.getHit(e6, t2, i2);
    return this.hitPlane.scale.set(1, 1, 1), n2;
  }
  controllerIntersection(e6, t2) {
    this.hitBox.visible = true;
    const i2 = e6.hitFromController(t2, this.hitBox);
    return this.hitBox.visible = false, i2;
  }
  set offsetHeight(e6) {
    e6 -= 1e-3, "back" === this.side ? this.position.z = this.shadowHeight + e6 : this.position.y = this.shadowHeight + e6;
  }
  get offsetHeight() {
    return "back" === this.side ? this.position.z - this.shadowHeight : this.position.y - this.shadowHeight;
  }
  set show(e6) {
    this.goalOpacity = e6 ? 0.75 : 0;
  }
  updateOpacity(e6) {
    const t2 = this.material;
    t2.opacity = this.opacityDamper.update(t2.opacity, this.goalOpacity, e6, 1), this.visible = t2.opacity > 0;
  }
  dispose() {
    const { geometry: e6, material: t2 } = this.hitPlane;
    e6.dispose(), t2.dispose(), this.hitBox.geometry.dispose(), this.hitBox.material.dispose(), this.geometry.dispose(), this.material.dispose(), this.hitBox.removeFromParent(), this.removeFromParent();
  }
}
const gg = (e6, t2) => ({ type: "number", number: e6, unit: t2 }), mg = /* @__PURE__ */ (() => {
  const e6 = {};
  return (t2) => {
    const i2 = t2;
    if (i2 in e6) return e6[i2];
    const n2 = [];
    let o2 = 0;
    for (; t2; ) {
      if (++o2 > 1e3) {
        t2 = "";
        break;
      }
      const e7 = fg(t2), i3 = e7.nodes[0];
      if (null == i3 || 0 === i3.terms.length) break;
      n2.push(i3), t2 = e7.remainingInput;
    }
    return e6[i2] = n2;
  };
})(), fg = /* @__PURE__ */ (() => {
  const e6 = /^(\-\-|[a-z\u0240-\uffff])/i, t2 = /^([\*\+\/]|[\-]\s)/i, i2 = /^[\),]/;
  return (n2) => {
    const o2 = [];
    for (; n2.length && (n2 = n2.trim(), !i2.test(n2)); ) if ("(" === n2[0]) {
      const { nodes: e7, remainingInput: t3 } = yg(n2);
      n2 = t3, o2.push({ type: "function", name: { type: "ident", value: "calc" }, arguments: e7 });
    } else if (e6.test(n2)) {
      const e7 = vg(n2), t3 = e7.nodes[0];
      if ("(" === (n2 = e7.remainingInput)[0]) {
        const { nodes: e8, remainingInput: i3 } = yg(n2);
        o2.push({ type: "function", name: t3, arguments: e8 }), n2 = i3;
      } else o2.push(t3);
    } else if (t2.test(n2)) o2.push({ type: "operator", value: n2[0] }), n2 = n2.slice(1);
    else {
      const { nodes: e7, remainingInput: t3 } = "#" === n2[0] ? bg(n2) : Ag(n2);
      if (0 === e7.length) break;
      o2.push(e7[0]), n2 = t3;
    }
    return { nodes: [{ type: "expression", terms: o2 }], remainingInput: n2 };
  };
})(), vg = /* @__PURE__ */ (() => {
  const e6 = /[^a-z0-9_\-\u0240-\uffff]/i;
  return (t2) => {
    const i2 = t2.match(e6);
    return { nodes: [{ type: "ident", value: null == i2 ? t2 : t2.substr(0, i2.index) }], remainingInput: null == i2 ? "" : t2.substr(i2.index) };
  };
})(), Ag = /* @__PURE__ */ (() => {
  const e6 = /[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/, t2 = /^[a-z%]+/i, i2 = /^(m|mm|cm|rad|deg|[%])$/;
  return (n2) => {
    const o2 = n2.match(e6), r2 = null == o2 ? "0" : o2[0], s2 = (n2 = null == r2 ? n2 : n2.slice(r2.length)).match(t2);
    let a2 = null != s2 && "" !== s2[0] ? s2[0] : null;
    const l2 = null == s2 ? n2 : n2.slice(a2.length);
    return null == a2 || i2.test(a2) || (a2 = null), { nodes: [{ type: "number", number: parseFloat(r2) || 0, unit: a2 }], remainingInput: l2 };
  };
})(), bg = /* @__PURE__ */ (() => {
  const e6 = /^[a-f0-9]*/i;
  return (t2) => {
    const i2 = (t2 = t2.slice(1).trim()).match(e6);
    return { nodes: null == i2 ? [] : [{ type: "hex", value: i2[0] }], remainingInput: null == i2 ? t2 : t2.slice(i2[0].length) };
  };
})(), yg = (e6) => {
  const t2 = [];
  for (e6 = e6.slice(1).trim(); e6.length; ) {
    const i2 = fg(e6);
    if (t2.push(i2.nodes[0]), "," === (e6 = i2.remainingInput.trim())[0]) e6 = e6.slice(1).trim();
    else if (")" === e6[0]) {
      e6 = e6.slice(1);
      break;
    }
  }
  return { nodes: t2, remainingInput: e6 };
}, wg = Symbol("visitedTypes");
class xg {
  constructor(e6) {
    this[wg] = e6;
  }
  walk(e6, t2) {
    const i2 = e6.slice();
    for (; i2.length; ) {
      const e7 = i2.shift();
      switch (this[wg].indexOf(e7.type) > -1 && t2(e7), e7.type) {
        case "expression":
          i2.unshift(...e7.terms);
          break;
        case "function":
          i2.unshift(e7.name, ...e7.arguments);
      }
    }
  }
}
const Cg = Object.freeze({ type: "number", number: 0, unit: null }), Sg = (e6, t2 = 0) => {
  let { number: i2, unit: n2 } = e6;
  if (isFinite(i2)) {
    if ("rad" === e6.unit || null == e6.unit) return e6;
  } else i2 = t2, n2 = "rad";
  return { type: "number", number: ("deg" === n2 && null != i2 ? i2 : 0) * Math.PI / 180, unit: "rad" };
}, Eg = (e6, t2 = 0) => {
  let i2, { number: n2, unit: o2 } = e6;
  if (isFinite(n2)) {
    if ("m" === e6.unit) return e6;
  } else n2 = t2, o2 = "m";
  switch (o2) {
    default:
      i2 = 1;
      break;
    case "cm":
      i2 = 0.01;
      break;
    case "mm":
      i2 = 1e-3;
  }
  return { type: "number", number: i2 * n2, unit: "m" };
}, Tg = /* @__PURE__ */ (() => {
  const e6 = (e7) => e7, t2 = { rad: e6, deg: Sg, m: e6, mm: Eg, cm: Eg };
  return (e7, i2 = Cg) => {
    isFinite(e7.number) || (e7.number = i2.number, e7.unit = i2.unit);
    const { unit: n2 } = e7;
    if (null == n2) return e7;
    const o2 = t2[n2];
    return null == o2 ? i2 : o2(e7);
  };
})();
var Ig, Mg, Bg;
const Rg = Symbol("evaluate"), kg = Symbol("lastValue");
class Pg {
  constructor() {
    this[Ig] = null;
  }
  static evaluatableFor(e6, t2 = Cg) {
    if (e6 instanceof Pg) return e6;
    if ("number" === e6.type) return "%" === e6.unit ? new Fg(e6, t2) : e6;
    switch (e6.name.value) {
      case "calc":
        return new Hg(e6, t2);
      case "env":
        return new Og(e6);
    }
    return Cg;
  }
  static evaluate(e6) {
    return e6 instanceof Pg ? e6.evaluate() : e6;
  }
  static isConstant(e6) {
    return !(e6 instanceof Pg) || e6.isConstant;
  }
  static applyIntrinsics(e6, t2) {
    const { basis: i2, keywords: n2 } = t2, { auto: o2 } = n2;
    return i2.map((t3, i3) => {
      const r2 = null == o2[i3] ? t3 : o2[i3];
      let s2 = e6[i3] ? e6[i3] : r2;
      if ("ident" === s2.type) {
        const e7 = s2.value;
        e7 in n2 && (s2 = n2[e7][i3]);
      }
      return null != s2 && "ident" !== s2.type || (s2 = r2), "%" === s2.unit ? gg(s2.number / 100 * t3.number, t3.unit) : (s2 = Tg(s2, t3), s2.unit !== t3.unit ? t3 : s2);
    });
  }
  get isConstant() {
    return false;
  }
  evaluate() {
    return this.isConstant && null != this[kg] || (this[kg] = this[Rg]()), this[kg];
  }
}
Ig = kg;
const Dg = Symbol("percentage"), Lg = Symbol("basis");
class Fg extends Pg {
  constructor(e6, t2) {
    super(), this[Dg] = e6, this[Lg] = t2;
  }
  get isConstant() {
    return true;
  }
  [Rg]() {
    return gg(this[Dg].number / 100 * this[Lg].number, this[Lg].unit);
  }
}
const Ng = Symbol("identNode");
class Og extends Pg {
  constructor(e6) {
    super(), this[Mg] = null;
    const t2 = e6.arguments.length ? e6.arguments[0].terms[0] : null;
    null != t2 && "ident" === t2.type && (this[Ng] = t2);
  }
  get isConstant() {
    return false;
  }
  [(Mg = Ng, Rg)]() {
    if (null != this[Ng] && "window-scroll-y" === this[Ng].value) {
      return { type: "number", number: window.pageYOffset / (Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) - window.innerHeight) || 0, unit: null };
    }
    return Cg;
  }
}
const Ug = /[\*\/]/, zg = Symbol("evaluator");
class Hg extends Pg {
  constructor(e6, t2 = Cg) {
    if (super(), this[Bg] = null, 1 !== e6.arguments.length) return;
    const i2 = e6.arguments[0].terms.slice(), n2 = [];
    for (; i2.length; ) {
      const e7 = i2.shift();
      if (n2.length > 0) {
        const i3 = n2[n2.length - 1];
        if ("operator" === i3.type && Ug.test(i3.value)) {
          const i4 = n2.pop(), o2 = n2.pop();
          if (null == o2) return;
          n2.push(new qg(i4, Pg.evaluatableFor(o2, t2), Pg.evaluatableFor(e7, t2)));
          continue;
        }
      }
      n2.push("operator" === e7.type ? e7 : Pg.evaluatableFor(e7, t2));
    }
    for (; n2.length > 2; ) {
      const [e7, i3, o2] = n2.splice(0, 3);
      if ("operator" !== i3.type) return;
      n2.unshift(new qg(i3, Pg.evaluatableFor(e7, t2), Pg.evaluatableFor(o2, t2)));
    }
    1 === n2.length && (this[zg] = n2[0]);
  }
  get isConstant() {
    return null == this[zg] || Pg.isConstant(this[zg]);
  }
  [(Bg = zg, Rg)]() {
    return null != this[zg] ? Pg.evaluate(this[zg]) : Cg;
  }
}
const Qg = Symbol("operator"), Vg = Symbol("left"), Gg = Symbol("right");
class qg extends Pg {
  constructor(e6, t2, i2) {
    super(), this[Qg] = e6, this[Vg] = t2, this[Gg] = i2;
  }
  get isConstant() {
    return Pg.isConstant(this[Vg]) && Pg.isConstant(this[Gg]);
  }
  [Rg]() {
    const e6 = Tg(Pg.evaluate(this[Vg])), t2 = Tg(Pg.evaluate(this[Gg])), { number: i2, unit: n2 } = e6, { number: o2, unit: r2 } = t2;
    if (null != r2 && null != n2 && r2 != n2) return Cg;
    const s2 = n2 || r2;
    let a2;
    switch (this[Qg].value) {
      case "+":
        a2 = i2 + o2;
        break;
      case "-":
        a2 = i2 - o2;
        break;
      case "/":
        a2 = i2 / o2;
        break;
      case "*":
        a2 = i2 * o2;
        break;
      default:
        return Cg;
    }
    return { type: "number", number: a2, unit: s2 };
  }
}
const $g = Symbol("evaluatables"), Wg = Symbol("intrinsics");
class jg extends Pg {
  constructor(e6, t2) {
    super(), this[Wg] = t2;
    const i2 = e6[0], n2 = null != i2 ? i2.terms : [];
    this[$g] = t2.basis.map((e7, t3) => {
      const i3 = n2[t3];
      return null == i3 ? { type: "ident", value: "auto" } : "ident" === i3.type ? i3 : Pg.evaluatableFor(i3, e7);
    });
  }
  get isConstant() {
    for (const e6 of this[$g]) if (!Pg.isConstant(e6)) return false;
    return true;
  }
  [Rg]() {
    const e6 = this[$g].map((e7) => Pg.evaluate(e7));
    return Pg.applyIntrinsics(e6, this[Wg]).map((e7) => e7.number);
  }
}
var Xg, Yg, Kg, Zg;
const Jg = Symbol("instances"), em = Symbol("activateListener"), tm = Symbol("deactivateListener"), im = Symbol("notifyInstances"), nm = Symbol("notify"), om = Symbol("callback");
class rm {
  constructor(e6) {
    this[om] = e6;
  }
  static [im]() {
    for (const e6 of rm[Jg]) e6[nm]();
  }
  static [(Xg = Jg, em)]() {
    window.addEventListener("scroll", this[im], { passive: true });
  }
  static [tm]() {
    window.removeEventListener("scroll", this[im]);
  }
  observe() {
    0 === rm[Jg].size && rm[em](), rm[Jg].add(this);
  }
  disconnect() {
    rm[Jg].delete(this), 0 === rm[Jg].size && rm[tm]();
  }
  [nm]() {
    this[om]();
  }
}
rm[Xg] = /* @__PURE__ */ new Set();
const sm = Symbol("computeStyleCallback"), am = Symbol("astWalker"), lm = Symbol("dependencies"), cm = Symbol("onScroll");
class hm {
  constructor(e6) {
    this[Yg] = {}, this[Kg] = new xg(["function"]), this[Zg] = () => {
      this[sm]({ relatedState: "window-scroll" });
    }, this[sm] = e6;
  }
  observeEffectsFor(e6) {
    const t2 = {}, i2 = this[lm];
    this[am].walk(e6, (e7) => {
      const { name: n2 } = e7, o2 = e7.arguments[0].terms[0];
      if ("env" === n2.value && null != o2 && "ident" === o2.type && "window-scroll-y" === o2.value) {
        if (null == t2["window-scroll"]) {
          const e8 = "window-scroll" in i2 ? i2["window-scroll"] : new rm(this[cm]);
          e8.observe(), delete i2["window-scroll"], t2["window-scroll"] = e8;
        }
      }
    });
    for (const e7 in i2) {
      i2[e7].disconnect();
    }
    this[lm] = t2;
  }
  dispose() {
    for (const e6 in this[lm]) {
      this[lm][e6].disconnect();
    }
  }
}
Yg = lm, Kg = am, Zg = cm;
const um = (e6) => {
  const t2 = e6.observeEffects || false, i2 = e6.intrinsics instanceof Function ? e6.intrinsics : () => e6.intrinsics;
  return (n2, o2) => {
    const r2 = n2.updated, s2 = n2.connectedCallback, a2 = n2.disconnectedCallback, l2 = Symbol(`${o2}StyleEffector`), c2 = Symbol(`${o2}StyleEvaluator`), h2 = Symbol(`${o2}UpdateEvaluator`), u2 = Symbol(`${o2}EvaluateAndSync`);
    Object.defineProperties(n2, { [l2]: { value: null, writable: true }, [c2]: { value: null, writable: true }, [h2]: { value: function() {
      const e7 = mg(this[o2]);
      this[c2] = new jg(e7, i2(this)), null == this[l2] && t2 && (this[l2] = new hm(() => this[u2]())), null != this[l2] && this[l2].observeEffectsFor(e7);
    } }, [u2]: { value: function() {
      if (null == this[c2]) return;
      const t3 = this[c2].evaluate();
      this[e6.updateHandler](t3);
    } }, updated: { value: function(e7) {
      e7.has(o2) && (this[h2](), this[u2]()), r2.call(this, e7);
    } }, connectedCallback: { value: function() {
      s2.call(this), this.requestUpdate(o2, this[o2]);
    } }, disconnectedCallback: { value: function() {
      a2.call(this), null != this[l2] && (this[l2].dispose(), this[l2] = null);
    } } });
  };
}, dm = (e6) => e6 < 0.5 ? 2 * e6 * e6 : (4 - 2 * e6) * e6 - 1, pm = (e6, t2, i2 = dm) => (n2) => e6 + (t2 - e6) * i2(n2), _m = (e6) => {
  const t2 = [], i2 = [];
  let n2 = e6.initialValue;
  for (let o2 = 0; o2 < e6.keyframes.length; ++o2) {
    const r2 = e6.keyframes[o2], { value: s2, frames: a2 } = r2, l2 = r2.ease || dm, c2 = pm(n2, s2, l2);
    t2.push(c2), i2.push(a2), n2 = s2;
  }
  return ((e7, t3) => {
    const i3 = t3.map((n3 = 0, (e8) => n3 += e8));
    var n3;
    return (t4) => {
      t4 = Du(t4, 0, 1), t4 *= i3[i3.length - 1];
      const n4 = i3.findIndex((e8) => e8 >= t4), o2 = n4 < 1 ? 0 : i3[n4 - 1], r2 = i3[n4];
      return e7[n4]((t4 - o2) / (r2 - o2));
    };
  })(t2, i2);
};
var gm = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const mm = _m({ initialValue: 0, keyframes: [{ frames: 5, value: -1 }, { frames: 1, value: -1 }, { frames: 8, value: 1 }, { frames: 1, value: 1 }, { frames: 5, value: 0 }, { frames: 18, value: 0 }] }), fm = _m({ initialValue: 0, keyframes: [{ frames: 1, value: 1 }, { frames: 5, value: 1 }, { frames: 1, value: 0 }, { frames: 6, value: 0 }] }), vm = "0deg 75deg 105%", Am = ["front", "right", "back", "left"], bm = ["upper-", "", "lower-"], ym = "auto", wm = "basic", xm = "wiggle", Cm = "none", Sm = () => ({ basis: [Sg(gg(30, "deg"))], keywords: { auto: [null] } }), Em = () => ({ basis: [Sg(gg(12, "deg"))], keywords: { auto: [null] } }), Tm = (() => {
  const e6 = mg(vm)[0].terms, t2 = Tg(e6[0]), i2 = Tg(e6[1]);
  return (e7) => {
    const n2 = e7[hy].idealCameraDistance();
    return { basis: [t2, i2, gg(n2, "m")], keywords: { auto: [null, null, gg(105, "%")] } };
  };
})(), Im = (e6) => {
  const t2 = 2.2 * e6[hy].boundingSphere.radius;
  return { basis: [gg(-1 / 0, "rad"), gg(0, "rad"), gg(t2, "m")], keywords: { auto: [null, null, null] } };
}, Mm = (e6) => {
  const t2 = Tm(e6), i2 = new jg([], t2).evaluate()[2];
  return { basis: [gg(1 / 0, "rad"), gg(Math.PI, "rad"), gg(i2, "m")], keywords: { auto: [null, null, null] } };
}, Bm = (e6) => {
  const t2 = e6[hy].boundingBox.getCenter(new yn());
  return { basis: [gg(t2.x, "m"), gg(t2.y, "m"), gg(t2.z, "m")], keywords: { auto: [null, null, null] } };
}, Rm = Math.PI / 2, km = Math.PI / 3, Pm = Rm / 2, Dm = 2 * Math.PI, Lm = Symbol("controls"), Fm = Symbol("panElement"), Nm = Symbol("promptElement"), Om = Symbol("promptAnimatedContainer"), Um = Symbol("fingerAnimatedContainers"), zm = Symbol("deferInteractionPrompt"), Hm = Symbol("updateAria"), Qm = Symbol("a11y"), Vm = Symbol("updateA11y"), Gm = Symbol("updateCameraForRadius"), qm = Symbol("cancelPrompts"), $m = Symbol("onChange"), Wm = Symbol("onPointerChange"), jm = Symbol("waitingToPromptUser"), Xm = Symbol("userHasInteracted"), Ym = Symbol("promptElementVisibleTime"), Km = Symbol("lastPromptOffset"), Zm = Symbol("cancellationSource"), Jm = Symbol("lastSpherical"), ef = Symbol("jumpCamera"), tf = Symbol("initialized"), nf = Symbol("maintainThetaPhi"), of = Symbol("syncCameraOrbit"), rf = Symbol("syncFieldOfView"), sf = Symbol("syncCameraTarget"), af = Symbol("syncMinCameraOrbit"), lf = Symbol("syncMaxCameraOrbit"), cf = Symbol("syncMinFieldOfView"), hf = Symbol("syncMaxFieldOfView"), uf = new $i(), df = new yn(), pf = Object.freeze({ minimumRadius: 0, maximumRadius: 1 / 0, minimumPolarAngle: 0, maximumPolarAngle: Math.PI, minimumAzimuthalAngle: -1 / 0, maximumAzimuthalAngle: 1 / 0, minimumFieldOfView: 10, maximumFieldOfView: 45, touchAction: "none" }), _f = Math.PI / 8, gf = 0.04, mf = { USER_INTERACTION: "user-interaction", NONE: "none", AUTOMATIC: "automatic" };
class ff extends Di {
  constructor(e6, t2, i2) {
    super(), this.camera = e6, this.element = t2, this.scene = i2, this.orbitSensitivity = 1, this.zoomSensitivity = 1, this.panSensitivity = 1, this.inputSensitivity = 1, this.changeSource = mf.NONE, this._interactionEnabled = false, this._disableZoom = false, this.isUserPointing = false, this.enablePan = true, this.enableTap = true, this.panProjection = new Wi(), this.panPerPixel = 0, this.spherical = new pu(), this.goalSpherical = new pu(), this.thetaDamper = new cg(), this.phiDamper = new cg(), this.radiusDamper = new cg(), this.logFov = Math.log(pf.maximumFieldOfView), this.goalLogFov = this.logFov, this.fovDamper = new cg(), this.touchMode = null, this.pointers = [], this.startTime = 0, this.startPointerPosition = { clientX: 0, clientY: 0 }, this.lastSeparation = 0, this.touchDecided = false, this.onContext = (e7) => {
      if (this.enablePan) e7.preventDefault();
      else for (const e8 of this.pointers) this.onPointerUp(new PointerEvent("pointercancel", Object.assign(Object.assign({}, this.startPointerPosition), { pointerId: e8.id })));
    }, this.touchModeZoom = (e7, t3) => {
      if (!this._disableZoom) {
        const e8 = this.twoTouchDistance(this.pointers[0], this.pointers[1]), t4 = gf * this.zoomSensitivity * (this.lastSeparation - e8) * 50 / this.scene.height;
        this.lastSeparation = e8, this.userAdjustOrbit(0, 0, t4);
      }
      this.panPerPixel > 0 && this.movePan(e7, t3);
    }, this.disableScroll = (e7) => {
      e7.preventDefault();
    }, this.touchModeRotate = (e7, t3) => {
      const { touchAction: i3 } = this._options;
      if (!this.touchDecided && "none" !== i3) {
        this.touchDecided = true;
        const n2 = Math.abs(e7), o2 = Math.abs(t3);
        if (this.changeSource === mf.USER_INTERACTION && ("pan-y" === i3 && o2 > n2 || "pan-x" === i3 && n2 > o2)) return void (this.touchMode = null);
        this.element.addEventListener("touchmove", this.disableScroll, { passive: false });
      }
      this.handleSinglePointerMove(e7, t3);
    }, this.onPointerDown = (e7) => {
      if (this.pointers.length > 2) return;
      const { element: t3 } = this;
      0 === this.pointers.length && (t3.addEventListener("pointermove", this.onPointerMove), t3.addEventListener("pointerup", this.onPointerUp), this.touchMode = null, this.touchDecided = false, this.startPointerPosition.clientX = e7.clientX, this.startPointerPosition.clientY = e7.clientY, this.startTime = performance.now());
      try {
        t3.setPointerCapture(e7.pointerId);
      } catch (e8) {
      }
      this.pointers.push({ clientX: e7.clientX, clientY: e7.clientY, id: e7.pointerId }), this.isUserPointing = false, "touch" === e7.pointerType ? (this.changeSource = e7.altKey ? mf.AUTOMATIC : mf.USER_INTERACTION, this.onTouchChange(e7)) : (this.changeSource = mf.USER_INTERACTION, this.onMouseDown(e7)), this.changeSource === mf.USER_INTERACTION && this.dispatchEvent({ type: "user-interaction" });
    }, this.onPointerMove = (e7) => {
      const t3 = this.pointers.find((t4) => t4.id === e7.pointerId);
      if (null == t3) return;
      if ("mouse" === e7.pointerType && 0 === e7.buttons) return void this.onPointerUp(e7);
      const i3 = this.pointers.length, n2 = (e7.clientX - t3.clientX) / i3, o2 = (e7.clientY - t3.clientY) / i3;
      0 === n2 && 0 === o2 || (t3.clientX = e7.clientX, t3.clientY = e7.clientY, "touch" === e7.pointerType ? (this.changeSource = e7.altKey ? mf.AUTOMATIC : mf.USER_INTERACTION, null !== this.touchMode && this.touchMode(n2, o2)) : (this.changeSource = mf.USER_INTERACTION, this.panPerPixel > 0 ? this.movePan(n2, o2) : this.handleSinglePointerMove(n2, o2)));
    }, this.onPointerUp = (e7) => {
      const { element: t3 } = this, i3 = this.pointers.findIndex((t4) => t4.id === e7.pointerId);
      -1 !== i3 && this.pointers.splice(i3, 1), this.panPerPixel > 0 && !e7.altKey && this.resetRadius(), 0 === this.pointers.length ? (t3.removeEventListener("pointermove", this.onPointerMove), t3.removeEventListener("pointerup", this.onPointerUp), t3.removeEventListener("touchmove", this.disableScroll), this.enablePan && this.enableTap && this.recenter(e7)) : null !== this.touchMode && this.onTouchChange(e7), this.scene.element[Fm].style.opacity = 0, t3.style.cursor = "grab", this.panPerPixel = 0, this.isUserPointing && this.dispatchEvent({ type: "pointer-change-end" });
    }, this.onWheel = (e7) => {
      this.changeSource = mf.USER_INTERACTION;
      const t3 = e7.deltaY * (1 == e7.deltaMode ? 18 : 1) * gf * this.zoomSensitivity / 30;
      this.userAdjustOrbit(0, 0, t3), e7.preventDefault(), this.dispatchEvent({ type: "user-interaction" });
    }, this.onKeyDown = (e7) => {
      const { changeSource: t3 } = this;
      this.changeSource = mf.USER_INTERACTION;
      (e7.shiftKey && this.enablePan ? this.panKeyCodeHandler(e7) : this.orbitZoomKeyCodeHandler(e7)) ? (e7.preventDefault(), this.dispatchEvent({ type: "user-interaction" })) : this.changeSource = t3;
    }, this._options = Object.assign({}, pf), this.setOrbit(0, Math.PI / 2, 1), this.setFieldOfView(100), this.jumpToGoal();
  }
  get interactionEnabled() {
    return this._interactionEnabled;
  }
  enableInteraction() {
    if (false === this._interactionEnabled) {
      const { element: e6 } = this;
      e6.addEventListener("pointerdown", this.onPointerDown), e6.addEventListener("pointercancel", this.onPointerUp), this._disableZoom || e6.addEventListener("wheel", this.onWheel), e6.addEventListener("keydown", this.onKeyDown), e6.addEventListener("touchmove", () => {
      }, { passive: false }), e6.addEventListener("contextmenu", this.onContext), this.element.style.cursor = "grab", this._interactionEnabled = true, this.updateTouchActionStyle();
    }
  }
  disableInteraction() {
    if (true === this._interactionEnabled) {
      const { element: e6 } = this;
      e6.removeEventListener("pointerdown", this.onPointerDown), e6.removeEventListener("pointermove", this.onPointerMove), e6.removeEventListener("pointerup", this.onPointerUp), e6.removeEventListener("pointercancel", this.onPointerUp), e6.removeEventListener("wheel", this.onWheel), e6.removeEventListener("keydown", this.onKeyDown), e6.removeEventListener("contextmenu", this.onContext), e6.style.cursor = "", this.touchMode = null, this._interactionEnabled = false, this.updateTouchActionStyle();
    }
  }
  get options() {
    return this._options;
  }
  set disableZoom(e6) {
    this._disableZoom != e6 && (this._disableZoom = e6, true === e6 ? this.element.removeEventListener("wheel", this.onWheel) : this.element.addEventListener("wheel", this.onWheel), this.updateTouchActionStyle());
  }
  getCameraSpherical(e6 = new pu()) {
    return e6.copy(this.spherical);
  }
  getFieldOfView() {
    return this.camera.fov;
  }
  applyOptions(e6) {
    Object.assign(this._options, e6), this.setOrbit(), this.setFieldOfView(Math.exp(this.goalLogFov));
  }
  updateNearFar(e6, t2) {
    this.camera.far = 0 === t2 ? 2 : t2, this.camera.near = Math.max(e6, this.camera.far / 1e3), this.camera.updateProjectionMatrix();
  }
  updateAspect(e6) {
    this.camera.aspect = e6, this.camera.updateProjectionMatrix();
  }
  setOrbit(e6 = this.goalSpherical.theta, t2 = this.goalSpherical.phi, i2 = this.goalSpherical.radius) {
    const { minimumAzimuthalAngle: n2, maximumAzimuthalAngle: o2, minimumPolarAngle: r2, maximumPolarAngle: s2, minimumRadius: a2, maximumRadius: l2 } = this._options, { theta: c2, phi: h2, radius: u2 } = this.goalSpherical, d2 = Du(e6, n2, o2);
    isFinite(n2) || isFinite(o2) || (this.spherical.theta = this.wrapAngle(this.spherical.theta - d2) + d2);
    const p2 = Du(t2, r2, s2), _2 = Du(i2, a2, l2);
    return (d2 !== c2 || p2 !== h2 || _2 !== u2) && (!!(isFinite(d2) && isFinite(p2) && isFinite(_2)) && (this.goalSpherical.theta = d2, this.goalSpherical.phi = p2, this.goalSpherical.radius = _2, this.goalSpherical.makeSafe(), true));
  }
  setRadius(e6) {
    this.goalSpherical.radius = e6, this.setOrbit();
  }
  setFieldOfView(e6) {
    const { minimumFieldOfView: t2, maximumFieldOfView: i2 } = this._options;
    e6 = Du(e6, t2, i2), this.goalLogFov = Math.log(e6);
  }
  setDamperDecayTime(e6) {
    this.thetaDamper.setDecayTime(e6), this.phiDamper.setDecayTime(e6), this.radiusDamper.setDecayTime(e6), this.fovDamper.setDecayTime(e6);
  }
  adjustOrbit(e6, t2, i2) {
    const { theta: n2, phi: o2, radius: r2 } = this.goalSpherical, { minimumRadius: s2, maximumRadius: a2, minimumFieldOfView: l2, maximumFieldOfView: c2 } = this._options, h2 = this.spherical.theta - n2, u2 = Math.PI - 1e-3, d2 = n2 - Du(e6, -u2 - h2, u2 - h2), p2 = o2 - t2, _2 = 0 === i2 ? 0 : ((i2 > 0 ? a2 : s2) - r2) / (Math.log(i2 > 0 ? c2 : l2) - this.goalLogFov), g2 = r2 + i2 * (isFinite(_2) ? _2 : 2 * (a2 - s2));
    if (this.setOrbit(d2, p2, g2), 0 !== i2) {
      const e7 = this.goalLogFov + i2;
      this.setFieldOfView(Math.exp(e7));
    }
  }
  jumpToGoal() {
    this.update(0, 1e4);
  }
  update(e6, t2) {
    if (this.isStationary()) return false;
    const { maximumPolarAngle: i2, maximumRadius: n2 } = this._options, o2 = this.spherical.theta - this.goalSpherical.theta;
    return Math.abs(o2) > Math.PI && !isFinite(this._options.minimumAzimuthalAngle) && !isFinite(this._options.maximumAzimuthalAngle) && (this.spherical.theta -= 2 * Math.sign(o2) * Math.PI), this.spherical.theta = this.thetaDamper.update(this.spherical.theta, this.goalSpherical.theta, t2, Math.PI), this.spherical.phi = this.phiDamper.update(this.spherical.phi, this.goalSpherical.phi, t2, i2), this.spherical.radius = this.radiusDamper.update(this.spherical.radius, this.goalSpherical.radius, t2, n2), this.logFov = this.fovDamper.update(this.logFov, this.goalLogFov, t2, 1), this.moveCamera(), true;
  }
  updateTouchActionStyle() {
    const { style: e6 } = this.element;
    if (this._interactionEnabled) {
      const { touchAction: t2 } = this._options;
      this._disableZoom && "none" !== t2 ? e6.touchAction = "manipulation" : e6.touchAction = t2;
    } else e6.touchAction = "";
  }
  isStationary() {
    return this.goalSpherical.theta === this.spherical.theta && this.goalSpherical.phi === this.spherical.phi && this.goalSpherical.radius === this.spherical.radius && this.goalLogFov === this.logFov;
  }
  moveCamera() {
    this.spherical.makeSafe(), this.camera.position.setFromSpherical(this.spherical), this.camera.setRotationFromEuler(new ao(this.spherical.phi - Math.PI / 2, this.spherical.theta, 0, "YXZ")), this.camera.fov !== Math.exp(this.logFov) && (this.camera.fov = Math.exp(this.logFov), this.camera.updateProjectionMatrix());
  }
  userAdjustOrbit(e6, t2, i2) {
    this.adjustOrbit(e6 * this.orbitSensitivity * this.inputSensitivity, t2 * this.orbitSensitivity * this.inputSensitivity, i2 * this.inputSensitivity);
  }
  wrapAngle(e6) {
    const t2 = (e6 + Math.PI) / (2 * Math.PI);
    return 2 * (t2 - Math.floor(t2)) * Math.PI - Math.PI;
  }
  pixelLengthToSphericalAngle(e6) {
    return 2 * Math.PI * e6 / this.scene.height;
  }
  twoTouchDistance(e6, t2) {
    const { clientX: i2, clientY: n2 } = e6, { clientX: o2, clientY: r2 } = t2, s2 = o2 - i2, a2 = r2 - n2;
    return Math.sqrt(s2 * s2 + a2 * a2);
  }
  handleSinglePointerMove(e6, t2) {
    const i2 = this.pixelLengthToSphericalAngle(e6), n2 = this.pixelLengthToSphericalAngle(t2);
    false === this.isUserPointing && (this.isUserPointing = true, this.dispatchEvent({ type: "pointer-change-start" })), this.userAdjustOrbit(i2, n2, 0);
  }
  initializePan() {
    const { theta: e6, phi: t2 } = this.spherical, i2 = e6 - this.scene.yaw;
    this.panPerPixel = 0.018 * this.panSensitivity / this.scene.height, this.panProjection.set(-Math.cos(i2), -Math.cos(t2) * Math.sin(i2), 0, 0, Math.sin(t2), 0, Math.sin(i2), -Math.cos(t2) * Math.cos(i2), 0);
  }
  movePan(e6, t2) {
    const { scene: i2 } = this, n2 = df.set(e6, t2, 0).multiplyScalar(this.inputSensitivity), o2 = this.spherical.radius * Math.exp(this.logFov) * this.panPerPixel;
    n2.multiplyScalar(o2);
    const r2 = i2.getTarget();
    r2.add(n2.applyMatrix3(this.panProjection)), i2.boundingSphere.clampPoint(r2, r2), i2.setTarget(r2.x, r2.y, r2.z);
  }
  recenter(e6) {
    if (performance.now() > this.startTime + 300 || Math.abs(e6.clientX - this.startPointerPosition.clientX) > 2 || Math.abs(e6.clientY - this.startPointerPosition.clientY) > 2) return;
    const { scene: t2 } = this, i2 = t2.positionAndNormalFromPoint(t2.getNDC(e6.clientX, e6.clientY));
    if (null == i2) {
      const { cameraTarget: e7 } = t2.element;
      t2.element.cameraTarget = "", t2.element.cameraTarget = e7, this.userAdjustOrbit(0, 0, 1);
    } else t2.target.worldToLocal(i2.position), t2.setTarget(i2.position.x, i2.position.y, i2.position.z);
  }
  resetRadius() {
    const { scene: e6 } = this, t2 = e6.positionAndNormalFromPoint(uf.set(0, 0));
    if (null == t2) return;
    e6.target.worldToLocal(t2.position);
    const i2 = e6.getTarget(), { theta: n2, phi: o2 } = this.spherical, r2 = n2 - e6.yaw, s2 = df.set(Math.sin(o2) * Math.sin(r2), Math.cos(o2), Math.sin(o2) * Math.cos(r2)), a2 = s2.dot(t2.position.sub(i2));
    i2.add(s2.multiplyScalar(a2)), e6.setTarget(i2.x, i2.y, i2.z), this.setOrbit(void 0, void 0, this.goalSpherical.radius - a2);
  }
  onTouchChange(e6) {
    if (1 === this.pointers.length) this.touchMode = this.touchModeRotate;
    else {
      if (this._disableZoom) return this.touchMode = null, void this.element.removeEventListener("touchmove", this.disableScroll);
      this.touchMode = this.touchDecided && null === this.touchMode ? null : this.touchModeZoom, this.touchDecided = true, this.element.addEventListener("touchmove", this.disableScroll, { passive: false }), this.lastSeparation = this.twoTouchDistance(this.pointers[0], this.pointers[1]), this.enablePan && null != this.touchMode && (this.initializePan(), e6.altKey || (this.scene.element[Fm].style.opacity = 1));
    }
  }
  onMouseDown(e6) {
    this.panPerPixel = 0, this.enablePan && (2 === e6.button || e6.ctrlKey || e6.metaKey || e6.shiftKey) && (this.initializePan(), this.scene.element[Fm].style.opacity = 1), this.element.style.cursor = "grabbing";
  }
  orbitZoomKeyCodeHandler(e6) {
    let t2 = true;
    switch (e6.key) {
      case "PageUp":
        this.userAdjustOrbit(0, 0, gf * this.zoomSensitivity);
        break;
      case "PageDown":
        this.userAdjustOrbit(0, 0, -0.04 * this.zoomSensitivity);
        break;
      case "ArrowUp":
        this.userAdjustOrbit(0, -_f, 0);
        break;
      case "ArrowDown":
        this.userAdjustOrbit(0, _f, 0);
        break;
      case "ArrowLeft":
        this.userAdjustOrbit(-_f, 0, 0);
        break;
      case "ArrowRight":
        this.userAdjustOrbit(_f, 0, 0);
        break;
      default:
        t2 = false;
    }
    return t2;
  }
  panKeyCodeHandler(e6) {
    this.initializePan();
    let t2 = true;
    switch (e6.key) {
      case "ArrowUp":
        this.movePan(0, -10);
        break;
      case "ArrowDown":
        this.movePan(0, 10);
        break;
      case "ArrowLeft":
        this.movePan(-10, 0);
        break;
      case "ArrowRight":
        this.movePan(10, 0);
        break;
      default:
        t2 = false;
    }
    return t2;
  }
}
const vf = 150, Af = "not-presenting", bf = "session-started", yf = "object-placed", wf = "failed", xf = "tracking", Cf = "not-tracking", Sf = new yn(), Ef = new bn(), Tf = new Kn(), If = new yn(), Mf = new Lr(45, 1, 0.1, 100), Bf = new ur().setFromPoints([new yn(0, 0, 0), new yn(0, 0, -1)]), Rf = new Sr();
class kf extends Di {
  constructor(e6) {
    super(), this.renderer = e6, this.currentSession = null, this.placeOnWall = false, this.placementBox = null, this.lastTick = null, this.turntableRotation = null, this.oldShadowIntensity = null, this.frame = null, this.initialHitSource = null, this.transientHitTestSource = null, this.inputSource = null, this._presentedScene = null, this.resolveCleanup = null, this.exitWebXRButtonContainer = null, this.overlay = null, this.xrLight = null, this.xrMode = null, this.controller1 = null, this.controller2 = null, this.selectedController = null, this.tracking = true, this.frames = 0, this.initialized = false, this.oldTarget = new yn(), this.placementComplete = false, this.isTranslating = false, this.isRotating = false, this.isTwoFingering = false, this.lastDragPosition = new yn(), this.relativeOrientation = new bn(), this.scaleLine = new Fc(Bf), this.firstRatio = 0, this.lastAngle = 0, this.goalPosition = new yn(), this.goalYaw = 0, this.goalScale = 1, this.xDamper = new cg(), this.yDamper = new cg(), this.zDamper = new cg(), this.yawDamper = new cg(), this.pitchDamper = new cg(), this.rollDamper = new cg(), this.scaleDamper = new cg(), this.onExitWebXRButtonContainerClick = () => this.stopPresenting(), this.onControllerSelectStart = (e7) => {
      const t2 = this.presentedScene, i2 = e7.target;
      if (null != this.placementBox.controllerIntersection(t2, i2)) null != this.selectedController && (this.selectedController.userData.line.visible = false, t2.canScale && (this.isTwoFingering = true, this.firstRatio = this.controllerSeparation() / t2.pivot.scale.x, this.scaleLine.visible = true)), i2.attach(t2.pivot), this.selectedController = i2, t2.setShadowIntensity(0.01);
      else {
        const e8 = i2 === this.controller1 ? this.controller2 : this.controller1;
        this.relativeOrientation.copy(i2.quaternion).invert().multiply(t2.pivot.getWorldQuaternion(Ef)), e8.userData.turning = false, i2.userData.turning = true, i2.userData.line.visible = false;
      }
    }, this.onControllerSelectEnd = (e7) => {
      const t2 = e7.target;
      if (t2.userData.turning = false, t2.userData.line.visible = true, this.isTwoFingering = false, this.scaleLine.visible = false, null != this.selectedController && this.selectedController != t2) return;
      const i2 = this.presentedScene;
      i2.attach(i2.pivot), this.selectedController = null, this.goalYaw = Math.atan2(i2.pivot.matrix.elements[8], i2.pivot.matrix.elements[10]), this.goalPosition.x = i2.pivot.position.x, this.goalPosition.z = i2.pivot.position.z;
    }, this.onUpdateScene = () => {
      null != this.placementBox && this.isPresenting && (this.placementBox.dispose(), this.placementBox = new _g(this.presentedScene, this.placeOnWall ? "back" : "bottom"));
    }, this.onSelectStart = (e7) => {
      const t2 = this.transientHitTestSource;
      if (null == t2) return;
      const i2 = this.frame.getHitTestResultsForTransientInput(t2), n2 = this.presentedScene, o2 = this.placementBox;
      if (1 === i2.length) {
        this.inputSource = e7.inputSource;
        const { axes: t3 } = this.inputSource.gamepad, i3 = o2.getHit(this.presentedScene, t3[0], t3[1]);
        o2.show = true, null != i3 ? (this.isTranslating = true, this.lastDragPosition.copy(i3)) : false === this.placeOnWall && (this.isRotating = true, this.lastAngle = 1.5 * t3[0]);
      } else if (2 === i2.length) {
        o2.show = true, this.isTwoFingering = true;
        const { separation: e8 } = this.fingerPolar(i2);
        this.firstRatio = e8 / n2.pivot.scale.x;
      }
    }, this.onSelectEnd = () => {
      this.isTranslating = false, this.isRotating = false, this.isTwoFingering = false, this.inputSource = null, this.goalPosition.y += this.placementBox.offsetHeight * this.presentedScene.scale.x, this.placementBox.show = false;
    }, this.threeRenderer = e6.threeRenderer, this.threeRenderer.xr.enabled = true;
  }
  async resolveARSession() {
    Ru();
    const e6 = await navigator.xr.requestSession("immersive-ar", { requiredFeatures: ["hit-test"], optionalFeatures: ["dom-overlay", "light-estimation"], domOverlay: this.overlay ? { root: this.overlay } : void 0 });
    return this.threeRenderer.xr.setReferenceSpaceType("local"), await this.threeRenderer.xr.setSession(e6), this.threeRenderer.xr.cameraAutoUpdate = false, e6;
  }
  get presentedScene() {
    return this._presentedScene;
  }
  async supportsPresentation() {
    try {
      return Ru(), await navigator.xr.isSessionSupported("immersive-ar");
    } catch (e6) {
      return console.warn("Request to present in WebXR denied:"), console.warn(e6), console.warn("Falling back to next ar-mode"), false;
    }
  }
  async present(e6, t2 = false) {
    this.isPresenting && console.warn("Cannot present while a model is already presenting");
    let i2 = new Promise((e7, t3) => {
      requestAnimationFrame(() => e7());
    });
    e6.setHotspotsVisibility(false), e6.queueRender(), await i2, this._presentedScene = e6, this.overlay = e6.element.shadowRoot.querySelector("div.default"), true === t2 && (this.xrLight = new lg(this.threeRenderer), this.xrLight.addEventListener("estimationstart", () => {
      if (!this.isPresenting || null == this.xrLight) return;
      const e7 = this.presentedScene;
      e7.add(this.xrLight), e7.environment = this.xrLight.environment;
    }));
    const n2 = await this.resolveARSession();
    n2.addEventListener("end", () => {
      this.postSessionCleanup();
    }, { once: true });
    const o2 = e6.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");
    o2.classList.add("enabled"), o2.addEventListener("click", this.onExitWebXRButtonContainerClick), this.exitWebXRButtonContainer = o2;
    const r2 = await n2.requestReferenceSpace("viewer");
    this.xrMode = n2.interactionMode, this.tracking = true, this.frames = 0, this.initialized = false, this.turntableRotation = e6.yaw, this.goalYaw = e6.yaw, this.goalScale = 1, e6.setBackground(null), this.oldShadowIntensity = e6.shadowIntensity, e6.setShadowIntensity(0.01), this.oldTarget.copy(e6.getTarget()), e6.element.addEventListener("load", this.onUpdateScene);
    const s2 = 20 * Math.PI / 180, a2 = true === this.placeOnWall ? void 0 : new XRRay(new DOMPoint(0, 0, 0), { x: 0, y: -Math.sin(s2), z: -Math.cos(s2) });
    n2.requestHitTestSource({ space: r2, offsetRay: a2 }).then((e7) => {
      this.initialHitSource = e7;
    }), "screen-space" !== this.xrMode && (this.setupControllers(), this.xDamper.setDecayTime(vf), this.yDamper.setDecayTime(vf), this.zDamper.setDecayTime(vf), this.yawDamper.setDecayTime(vf), this.pitchDamper.setDecayTime(vf), this.rollDamper.setDecayTime(vf)), this.currentSession = n2, this.placementBox = new _g(e6, this.placeOnWall ? "back" : "bottom"), this.placementComplete = false, this.lastTick = performance.now(), this.dispatchEvent({ type: "status", status: bf });
  }
  setupControllers() {
    this.controller1 = this.threeRenderer.xr.getController(0), this.controller1.addEventListener("selectstart", this.onControllerSelectStart), this.controller1.addEventListener("selectend", this.onControllerSelectEnd), this.controller2 = this.threeRenderer.xr.getController(1), this.controller2.addEventListener("selectstart", this.onControllerSelectStart), this.controller2.addEventListener("selectend", this.onControllerSelectEnd);
    const e6 = this.presentedScene;
    if (e6.add(this.controller1), e6.add(this.controller2), !this.controller1.userData.line) {
      const t2 = new Fc(Bf);
      t2.name = "line", t2.scale.z = 5, this.controller1.userData.turning = false, this.controller1.userData.line = t2, this.controller1.add(t2), this.controller2.userData.turning = false;
      const i2 = t2.clone();
      this.controller2.userData.line = i2, this.controller2.add(i2), this.scaleLine.name = "scale line", this.scaleLine.visible = false, this.controller1.add(this.scaleLine);
      const { size: n2 } = e6, o2 = 0.1 / Math.max(n2.x, n2.y, n2.z), r2 = new xr(Rf);
      r2.name = "box", r2.scale.copy(n2).multiplyScalar(o2), r2.visible = false, this.controller1.userData.box = r2, e6.add(r2);
      const s2 = r2.clone();
      this.controller2.userData.box = s2, e6.add(s2);
    }
  }
  hover(e6) {
    if ("screen-space" === this.xrMode || this.selectedController == e6) return false;
    const t2 = this.presentedScene, i2 = this.placementBox.controllerIntersection(t2, e6);
    return e6.userData.box.visible = (null == i2 || e6.userData.turning) && !this.isTwoFingering, e6.userData.line.scale.z = null == i2 ? 5 : i2.distance, null != i2;
  }
  controllerSeparation() {
    return this.controller1.position.distanceTo(this.controller2.position);
  }
  async stopPresenting() {
    if (!this.isPresenting) return;
    const e6 = new Promise((e7) => {
      this.resolveCleanup = e7;
    });
    try {
      await this.currentSession.end(), await e6;
    } catch (e7) {
      console.warn("Error while trying to end WebXR AR session"), console.warn(e7), this.postSessionCleanup();
    }
  }
  get isPresenting() {
    return null != this.presentedScene;
  }
  get target() {
    return this.oldTarget;
  }
  updateTarget() {
    const e6 = this.presentedScene;
    if (null != e6) {
      const t2 = e6.getTarget();
      this.oldTarget.copy(t2), this.placeOnWall ? t2.z = e6.boundingBox.min.z : t2.y = e6.boundingBox.min.y, e6.setTarget(t2.x, t2.y, t2.z);
    }
  }
  postSessionCleanup() {
    const e6 = this.currentSession;
    null != e6 && (e6.removeEventListener("selectstart", this.onSelectStart), e6.removeEventListener("selectend", this.onSelectEnd), this.currentSession = null);
    const t2 = this.presentedScene;
    if (this._presentedScene = null, null != t2) {
      const { element: e7 } = t2;
      null != this.xrLight && (t2.remove(this.xrLight), this.xrLight.dispose(), this.xrLight = null), t2.add(t2.pivot), t2.pivot.quaternion.set(0, 0, 0, 1), t2.pivot.position.set(0, 0, 0), t2.pivot.scale.set(1, 1, 1), t2.setShadowOffset(0);
      const i3 = this.turntableRotation;
      null != i3 && (t2.yaw = i3);
      const n3 = this.oldShadowIntensity;
      null != n3 && t2.setShadowIntensity(n3), t2.setEnvironmentAndSkybox(e7[Nu], e7[Ou]);
      const o3 = this.oldTarget;
      t2.setTarget(o3.x, o3.y, o3.z), t2.xrCamera = null, t2.element.removeEventListener("load", this.onUpdateScene), t2.orientHotspots(0);
      const { width: r2, height: s2 } = e7.getBoundingClientRect();
      t2.setSize(r2, s2), requestAnimationFrame(() => {
        t2.element.dispatchEvent(new CustomEvent("camera-change", { detail: { source: mf.NONE } }));
      });
    }
    this.renderer.height = 0;
    const i2 = this.exitWebXRButtonContainer;
    null != i2 && (i2.classList.remove("enabled"), i2.removeEventListener("click", this.onExitWebXRButtonContainerClick), this.exitWebXRButtonContainer = null);
    const n2 = this.transientHitTestSource;
    null != n2 && (n2.cancel(), this.transientHitTestSource = null);
    const o2 = this.initialHitSource;
    null != o2 && (o2.cancel(), this.initialHitSource = null), null != this.placementBox && (this.placementBox.dispose(), this.placementBox = null), "screen-space" !== this.xrMode && (null != this.controller1 && (this.controller1.userData.turning = false, this.controller1.userData.box.visible = false, this.controller1.userData.line.visible = true, this.controller1.removeEventListener("selectstart", this.onControllerSelectStart), this.controller1.removeEventListener("selectend", this.onControllerSelectEnd), this.controller1.removeFromParent(), this.controller1 = null), null != this.controller2 && (this.controller2.userData.turning = false, this.controller2.userData.box.visible = false, this.controller2.userData.line.visible = true, this.controller2.removeEventListener("selectstart", this.onControllerSelectStart), this.controller2.removeEventListener("selectend", this.onControllerSelectEnd), this.controller2.removeFromParent(), this.controller2 = null), this.selectedController = null, this.scaleLine.visible = false), this.isTranslating = false, this.isRotating = false, this.isTwoFingering = false, this.lastTick = null, this.turntableRotation = null, this.oldShadowIntensity = null, this.frame = null, this.inputSource = null, this.overlay = null, null != this.resolveCleanup && this.resolveCleanup(), this.dispatchEvent({ type: "status", status: Af });
  }
  updateView(e6) {
    const t2 = this.presentedScene, i2 = this.threeRenderer.xr;
    i2.updateCamera(Mf), t2.xrCamera = i2.getCamera();
    const { elements: n2 } = t2.getCamera().matrixWorld;
    if (t2.orientHotspots(Math.atan2(n2[1], n2[5])), this.initialized || (this.placeInitially(), this.initialized = true), e6.requestViewportScale && e6.recommendedViewportScale) {
      const t3 = e6.recommendedViewportScale;
      e6.requestViewportScale(Math.max(t3, 0.25));
    }
    const o2 = i2.getBaseLayer();
    if (null != o2) {
      const t3 = o2 instanceof XRWebGLLayer ? o2.getViewport(e6) : i2.getBinding().getViewSubImage(o2, e6).viewport;
      this.threeRenderer.setViewport(t3.x, t3.y, t3.width, t3.height);
    }
  }
  placeInitially() {
    const e6 = this.presentedScene, { pivot: t2, element: i2 } = e6, { position: n2 } = t2, o2 = e6.getCamera(), { width: r2, height: s2 } = this.overlay.getBoundingClientRect();
    e6.setSize(r2, s2), o2.projectionMatrixInverse.copy(o2.projectionMatrix).invert();
    const { theta: a2 } = i2.getCameraOrbit(), l2 = o2.getWorldDirection(Sf);
    e6.yaw = Math.atan2(-l2.x, -l2.z) - a2, this.goalYaw = e6.yaw;
    const c2 = Math.max(1, 2 * e6.boundingSphere.radius);
    n2.copy(o2.position).add(l2.multiplyScalar(c2)), this.updateTarget();
    const h2 = e6.getTarget();
    if (n2.add(h2).sub(this.oldTarget), this.goalPosition.copy(n2), e6.setHotspotsVisibility(true), "screen-space" === this.xrMode) {
      const { session: e7 } = this.frame;
      e7.addEventListener("selectstart", this.onSelectStart), e7.addEventListener("selectend", this.onSelectEnd), e7.requestHitTestSourceForTransientInput({ profile: "generic-touchscreen" }).then((e8) => {
        this.transientHitTestSource = e8;
      });
    }
  }
  getTouchLocation() {
    const { axes: e6 } = this.inputSource.gamepad;
    let t2 = this.placementBox.getExpandedHit(this.presentedScene, e6[0], e6[1]);
    return null != t2 && (Sf.copy(t2).sub(this.presentedScene.getCamera().position), Sf.length() > 10) ? null : t2;
  }
  getHitPoint(e6) {
    const t2 = this.threeRenderer.xr.getReferenceSpace(), i2 = e6.getPose(t2);
    if (null == i2) return null;
    const n2 = Tf.fromArray(i2.transform.matrix);
    return true === this.placeOnWall && (this.goalYaw = Math.atan2(n2.elements[4], n2.elements[6])), n2.elements[5] > 0.75 !== this.placeOnWall ? If.setFromMatrixPosition(n2) : null;
  }
  moveToFloor(e6) {
    const t2 = this.initialHitSource;
    if (null == t2) return;
    const i2 = e6.getHitTestResults(t2);
    if (0 == i2.length) return;
    const n2 = i2[0], o2 = this.getHitPoint(n2);
    null != o2 && (this.placementBox.show = true, this.isTranslating || (this.placeOnWall ? this.goalPosition.copy(o2) : this.goalPosition.y = o2.y), t2.cancel(), this.initialHitSource = null, this.dispatchEvent({ type: "status", status: yf }));
  }
  fingerPolar(e6) {
    const t2 = e6[0].inputSource.gamepad.axes, i2 = e6[1].inputSource.gamepad.axes, n2 = i2[0] - t2[0], o2 = i2[1] - t2[1], r2 = Math.atan2(o2, n2);
    let s2 = this.lastAngle - r2;
    return s2 > Math.PI ? s2 -= 2 * Math.PI : s2 < -Math.PI && (s2 += 2 * Math.PI), this.lastAngle = r2, { separation: Math.sqrt(n2 * n2 + o2 * o2), deltaYaw: s2 };
  }
  setScale(e6) {
    const t2 = e6 / this.firstRatio;
    this.goalScale = Math.abs(t2 - 1) < 0.2 ? 1 : t2;
  }
  processInput(e6) {
    const t2 = this.transientHitTestSource;
    if (null == t2) return;
    if (!this.isTranslating && !this.isTwoFingering && !this.isRotating) return;
    const i2 = e6.getHitTestResultsForTransientInput(t2), n2 = this.presentedScene, o2 = n2.pivot.scale.x;
    if (this.isTwoFingering) if (i2.length < 2) this.isTwoFingering = false;
    else {
      const { separation: e7, deltaYaw: t3 } = this.fingerPolar(i2);
      false === this.placeOnWall && (this.goalYaw += t3), n2.canScale && this.setScale(e7);
    }
    else if (2 !== i2.length) if (this.isRotating) {
      const e7 = 1.5 * this.inputSource.gamepad.axes[0];
      this.goalYaw += e7 - this.lastAngle, this.lastAngle = e7;
    } else this.isTranslating && i2.forEach((e7) => {
      if (e7.inputSource !== this.inputSource) return;
      let t3 = null;
      if (e7.results.length > 0 && (t3 = this.getHitPoint(e7.results[0])), null == t3 && (t3 = this.getTouchLocation()), null != t3) {
        if (this.goalPosition.sub(this.lastDragPosition), false === this.placeOnWall) {
          const e8 = t3.y - this.lastDragPosition.y;
          if (e8 < 0) {
            this.placementBox.offsetHeight = e8 / o2, this.presentedScene.setShadowOffset(e8);
            const i3 = Sf.copy(n2.getCamera().position), r2 = -e8 / (i3.y - t3.y);
            i3.multiplyScalar(r2), t3.multiplyScalar(1 - r2).add(i3);
          }
        }
        this.goalPosition.add(t3), this.lastDragPosition.copy(t3);
      }
    });
    else {
      this.isTranslating = false, this.isRotating = false, this.isTwoFingering = true;
      const { separation: e7 } = this.fingerPolar(i2);
      this.firstRatio = e7 / o2;
    }
  }
  moveScene(e6) {
    const t2 = this.presentedScene, { pivot: i2 } = t2, n2 = this.placementBox;
    if (n2.updateOpacity(e6), this.controller1 && (this.controller1.userData.turning && (i2.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation), this.selectedController && this.selectedController === this.controller2 && i2.quaternion.premultiply(Ef.copy(this.controller2.quaternion).invert())), this.controller1.userData.box.position.copy(this.controller1.position), i2.getWorldQuaternion(this.controller1.userData.box.quaternion)), this.controller2 && (this.controller2.userData.turning && (i2.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation), this.selectedController && this.selectedController === this.controller1 && i2.quaternion.premultiply(Ef.copy(this.controller1.quaternion).invert())), this.controller2.userData.box.position.copy(this.controller2.position), i2.getWorldQuaternion(this.controller2.userData.box.quaternion)), this.controller1 && this.controller2 && this.isTwoFingering) {
      const e7 = this.controllerSeparation();
      this.setScale(e7), this.scaleLine.scale.z = -e7, this.scaleLine.lookAt(this.controller2.position);
    }
    const o2 = t2.pivot.scale.x;
    if (this.goalScale !== o2) {
      const i3 = this.scaleDamper.update(o2, this.goalScale, e6, 1);
      t2.pivot.scale.set(i3, i3, i3);
    }
    if (i2.parent !== t2) return;
    const { position: r2 } = i2, s2 = t2.boundingSphere.radius, a2 = this.goalPosition;
    let l2 = mf.NONE;
    if (!a2.equals(r2)) {
      l2 = mf.USER_INTERACTION;
      let { x: i3, y: o3, z: c3 } = r2;
      if (i3 = this.xDamper.update(i3, a2.x, e6, s2), o3 = this.yDamper.update(o3, a2.y, e6, s2), c3 = this.zDamper.update(c3, a2.z, e6, s2), r2.set(i3, o3, c3), "screen-space" === this.xrMode && !this.isTranslating) {
        const e7 = a2.y - o3;
        this.placementComplete && false === this.placeOnWall ? (n2.offsetHeight = e7 / t2.pivot.scale.x, t2.setShadowOffset(e7)) : 0 === e7 && (this.placementComplete = true, n2.show = false, t2.setShadowIntensity(0.8));
      }
      "screen-space" !== this.xrMode && a2.equals(r2) && t2.setShadowIntensity(0.8);
    }
    t2.updateTarget(e6), Ef.setFromAxisAngle(Sf.set(0, 1, 0), this.goalYaw);
    const c2 = t2.pivot.quaternion.angleTo(Ef), h2 = c2 - this.yawDamper.update(c2, 0, e6, Math.PI);
    t2.pivot.quaternion.rotateTowards(Ef, h2), t2.element.dispatchEvent(new CustomEvent("camera-change", { detail: { source: l2 } }));
  }
  onWebXRFrame(e6, t2) {
    if ("screen-space" !== this.xrMode) {
      const e7 = this.hover(this.controller1), t3 = this.hover(this.controller2);
      this.placementBox.show = (e7 || t3) && !this.isTwoFingering;
    }
    this.frame = t2, ++this.frames;
    const i2 = this.threeRenderer.xr.getReferenceSpace(), n2 = t2.getViewerPose(i2);
    null == n2 && true === this.tracking && this.frames > 30 && (this.tracking = false, this.dispatchEvent({ type: "tracking", status: Cf }));
    const o2 = this.presentedScene;
    if (null == n2 || null == o2 || !o2.element.loaded) return void this.threeRenderer.clear();
    false === this.tracking && (this.tracking = true, this.dispatchEvent({ type: "tracking", status: xf }));
    let r2 = true;
    for (const i3 of n2.views) {
      if (this.updateView(i3), r2) {
        this.moveToFloor(t2), this.processInput(t2);
        const i4 = e6 - this.lastTick;
        this.moveScene(i4), this.renderer.preRender(o2, e6, i4), this.lastTick = e6, o2.renderShadow(this.threeRenderer);
      }
      this.threeRenderer.render(o2, o2.getCamera()), r2 = false;
    }
  }
}
function Pf(e6) {
  const t2 = /* @__PURE__ */ new Map(), i2 = /* @__PURE__ */ new Map(), n2 = e6.clone();
  return Df(e6, n2, function(e7, n3) {
    t2.set(n3, e7), i2.set(e7, n3);
  }), n2.traverse(function(e7) {
    if (!e7.isSkinnedMesh) return;
    const n3 = e7, o2 = t2.get(e7), r2 = o2.skeleton.bones;
    n3.skeleton = o2.skeleton.clone(), n3.bindMatrix.copy(o2.bindMatrix), n3.skeleton.bones = r2.map(function(e8) {
      return i2.get(e8);
    }), n3.bind(n3.skeleton, n3.bindMatrix);
  }), n2;
}
function Df(e6, t2, i2) {
  i2(e6, t2);
  for (let n2 = 0; n2 < e6.children.length; n2++) Df(e6.children[n2], t2.children[n2], i2);
}
const Lf = Symbol("prepared"), Ff = Symbol("prepare"), Nf = Symbol("preparedGLTF"), Of = Symbol("clone");
class Uf {
  constructor(e6) {
    this[Nf] = e6;
  }
  static prepare(e6) {
    if (null == e6.scene) throw new Error("Model does not have a scene");
    if (e6[Lf]) return e6;
    const t2 = this[Ff](e6);
    return t2[Lf] = true, t2;
  }
  static [Ff](e6) {
    const { scene: t2 } = e6, i2 = [t2];
    return Object.assign(Object.assign({}, e6), { scene: t2, scenes: i2 });
  }
  get parser() {
    return this[Nf].parser;
  }
  get animations() {
    return this[Nf].animations;
  }
  get scene() {
    return this[Nf].scene;
  }
  get scenes() {
    return this[Nf].scenes;
  }
  get cameras() {
    return this[Nf].cameras;
  }
  get asset() {
    return this[Nf].asset;
  }
  get userData() {
    return this[Nf].userData;
  }
  clone() {
    return new (0, this.constructor)(this[Of]());
  }
  dispose() {
    this.scenes.forEach((e6) => {
      e6.traverse((e7) => {
        const t2 = e7;
        if (!t2.material) return;
        (Array.isArray(t2.material) ? t2.material : [t2.material]).forEach((e8) => {
          for (const t3 in e8) {
            const i2 = e8[t3];
            if (i2 instanceof _n) {
              const e9 = i2.source.data;
              null != e9.close && e9.close(), i2.dispose();
            }
          }
          e8.dispose();
        }), t2.geometry.dispose();
      });
    });
  }
  [Of]() {
    const e6 = this[Nf], t2 = Pf(this.scene);
    zf(t2, this.scene);
    const i2 = [t2], n2 = e6.userData ? Object.assign({}, e6.userData) : {};
    return Object.assign(Object.assign({}, e6), { scene: t2, scenes: i2, userData: n2 });
  }
}
const zf = (e6, t2) => {
  Hf(e6, t2, (e7, t3) => {
    void 0 !== t3.userData.variantMaterials && (e7.userData.variantMaterials = new Map(t3.userData.variantMaterials)), void 0 !== t3.userData.variantData && (e7.userData.variantData = t3.userData.variantData), void 0 !== t3.userData.originalMaterial && (e7.userData.originalMaterial = t3.userData.originalMaterial);
  });
}, Hf = (e6, t2, i2) => {
  i2(e6, t2);
  for (let n2 = 0; n2 < e6.children.length; n2++) Hf(e6.children[n2], t2.children[n2], i2);
}, Qf = Symbol("threeGLTF"), Vf = Symbol("gltf"), Gf = Symbol("gltfElementMap"), qf = Symbol("threeObjectMap"), $f = Symbol("parallelTraverseThreeScene"), Wf = Symbol("correlateOriginalThreeGLTF"), jf = Symbol("correlateCloneThreeGLTF");
class Xf {
  constructor(e6, t2, i2, n2) {
    this[Qf] = e6, this[Vf] = t2, this[Gf] = n2, this[qf] = i2;
  }
  static from(e6, t2) {
    return null != t2 ? this[jf](e6, t2) : this[Wf](e6);
  }
  static [Wf](e6) {
    const t2 = e6.parser.json, i2 = e6.parser.associations, n2 = /* @__PURE__ */ new Map(), o2 = { name: "Default" }, r2 = { type: "materials", index: -1 };
    for (const e7 of i2.keys()) e7 instanceof Wo && null == i2.get(e7) && (r2.index < 0 && (null == t2.materials && (t2.materials = []), r2.index = t2.materials.length, t2.materials.push(o2)), e7.name = o2.name, i2.set(e7, { materials: r2.index }));
    for (const [e7, o3] of i2) {
      o3 && (e7.userData = e7.userData || {}, e7.userData.associations = o3);
      for (const i3 in o3) if (null != i3 && "primitives" !== i3) {
        const r3 = i3, s2 = (t2[r3] || [])[o3[r3]];
        if (null == s2) continue;
        let a2 = n2.get(s2);
        null == a2 && (a2 = /* @__PURE__ */ new Set(), n2.set(s2, a2)), a2.add(e7);
      }
    }
    return new Xf(e6, t2, i2, n2);
  }
  static [jf](e6, t2) {
    const i2 = t2.threeGLTF, n2 = t2.gltf, o2 = JSON.parse(JSON.stringify(n2)), r2 = /* @__PURE__ */ new Map(), s2 = /* @__PURE__ */ new Map();
    for (let n3 = 0; n3 < i2.scenes.length; n3++) this[$f](i2.scenes[n3], e6.scenes[n3], (e7, i3) => {
      const n4 = t2.threeObjectMap.get(e7);
      if (null != n4) {
        for (const e8 in n4) if (null != e8 && "primitives" !== e8) {
          const t3 = e8, a2 = n4[t3], l2 = o2[t3][a2], c2 = r2.get(i3) || {};
          c2[t3] = a2, r2.set(i3, c2);
          const h2 = s2.get(l2) || /* @__PURE__ */ new Set();
          h2.add(i3), s2.set(l2, h2);
        }
      }
    });
    return new Xf(e6, o2, r2, s2);
  }
  static [$f](e6, t2, i2) {
    const n2 = (e7, t3) => {
      if (i2(e7, t3), e7.isObject3D) {
        const o2 = e7, r2 = t3;
        if (o2.material) if (Array.isArray(o2.material)) for (let e8 = 0; e8 < o2.material.length; ++e8) i2(o2.material[e8], r2.material[e8]);
        else i2(o2.material, r2.material);
        for (let i3 = 0; i3 < e7.children.length; ++i3) n2(e7.children[i3], t3.children[i3]);
      }
    };
    n2(e6, t2);
  }
  get threeGLTF() {
    return this[Qf];
  }
  get gltf() {
    return this[Vf];
  }
  get gltfElementMap() {
    return this[Gf];
  }
  get threeObjectMap() {
    return this[qf];
  }
}
const Yf = Symbol("correlatedSceneGraph");
class Kf extends Uf {
  static [Ff](e6) {
    const t2 = super[Ff](e6);
    null == t2[Yf] && (t2[Yf] = Xf.from(t2));
    const { scene: i2 } = t2, n2 = new Qn(void 0, 1 / 0);
    return i2.traverse((e7) => {
      e7.renderOrder = 1e3, e7.frustumCulled = false, e7.name || (e7.name = e7.uuid);
      const i3 = e7;
      if (i3.material) {
        const { geometry: e8 } = i3;
        i3.castShadow = true, i3.isSkinnedMesh && (e8.boundingSphere = n2, e8.boundingBox = null);
        const o2 = i3.material;
        if (true === o2.isMeshBasicMaterial && (o2.toneMapped = false), o2.shadowSide = 0, o2.aoMap) {
          const { gltf: i4, threeObjectMap: n3 } = t2[Yf], r2 = n3.get(o2);
          if (null != i4.materials && null != r2 && null != r2.materials) {
            const t3 = i4.materials[r2.materials];
            t3.occlusionTexture && 0 === t3.occlusionTexture.texCoord && null != e8.attributes.uv && e8.setAttribute("uv2", e8.attributes.uv);
          }
        }
      }
    }), t2;
  }
  get correlatedSceneGraph() {
    return this[Nf][Yf];
  }
  [Of]() {
    const e6 = super[Of](), t2 = /* @__PURE__ */ new Map();
    return e6.scene.traverse((e7) => {
      const i2 = e7;
      if (i2.material) {
        const e8 = i2.material;
        if (null != e8) {
          if (t2.has(e8.uuid)) return void (i2.material = t2.get(e8.uuid));
          i2.material = e8.clone(), t2.set(e8.uuid, i2.material);
        }
      }
      const n2 = e7;
      void 0 !== n2.target && n2.add(n2.target);
    }), e6[Yf] = Xf.from(e6, this.correlatedSceneGraph), e6;
  }
}
const Zf = (e6, t2, i2) => {
  let n2;
  switch (e6) {
    case st:
      n2 = new Uint8ClampedArray(t2 * i2 * 4);
      break;
    case pt:
      n2 = new Uint16Array(t2 * i2 * 4);
      break;
    case ut:
      n2 = new Uint32Array(t2 * i2 * 4);
      break;
    case at:
      n2 = new Int8Array(t2 * i2 * 4);
      break;
    case lt:
      n2 = new Int16Array(t2 * i2 * 4);
      break;
    case ht:
      n2 = new Int32Array(t2 * i2 * 4);
      break;
    case dt:
      n2 = new Float32Array(t2 * i2 * 4);
      break;
    default:
      throw new Error("Unsupported data type");
  }
  return n2;
};
let Jf;
class ev {
  constructor(e6) {
    var t2, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2, d2, p2, _2, g2, m2;
    this._rendererIsDisposable = false, this._supportsReadPixels = true, this.render = () => {
      this._renderer.setRenderTarget(this._renderTarget);
      try {
        this._renderer.render(this._scene, this._camera);
      } catch (e7) {
        throw this._renderer.setRenderTarget(null), e7;
      }
      this._renderer.setRenderTarget(null);
    }, this._width = e6.width, this._height = e6.height, this._type = e6.type, this._colorSpace = e6.colorSpace;
    const f2 = { format: vt, depthBuffer: false, stencilBuffer: false, type: this._type, colorSpace: this._colorSpace, anisotropy: void 0 !== (null === (t2 = e6.renderTargetOptions) || void 0 === t2 ? void 0 : t2.anisotropy) ? null === (i2 = e6.renderTargetOptions) || void 0 === i2 ? void 0 : i2.anisotropy : 1, generateMipmaps: void 0 !== (null === (n2 = e6.renderTargetOptions) || void 0 === n2 ? void 0 : n2.generateMipmaps) && (null === (o2 = e6.renderTargetOptions) || void 0 === o2 ? void 0 : o2.generateMipmaps), magFilter: void 0 !== (null === (r2 = e6.renderTargetOptions) || void 0 === r2 ? void 0 : r2.magFilter) ? null === (s2 = e6.renderTargetOptions) || void 0 === s2 ? void 0 : s2.magFilter : nt, minFilter: void 0 !== (null === (a2 = e6.renderTargetOptions) || void 0 === a2 ? void 0 : a2.minFilter) ? null === (l2 = e6.renderTargetOptions) || void 0 === l2 ? void 0 : l2.minFilter : nt, samples: void 0 !== (null === (c2 = e6.renderTargetOptions) || void 0 === c2 ? void 0 : c2.samples) ? null === (h2 = e6.renderTargetOptions) || void 0 === h2 ? void 0 : h2.samples : void 0, wrapS: void 0 !== (null === (u2 = e6.renderTargetOptions) || void 0 === u2 ? void 0 : u2.wrapS) ? null === (d2 = e6.renderTargetOptions) || void 0 === d2 ? void 0 : d2.wrapS : Ze, wrapT: void 0 !== (null === (p2 = e6.renderTargetOptions) || void 0 === p2 ? void 0 : p2.wrapT) ? null === (_2 = e6.renderTargetOptions) || void 0 === _2 ? void 0 : _2.wrapT : Ze };
    if (this._material = e6.material, e6.renderer ? this._renderer = e6.renderer : (this._renderer = ev.instantiateRenderer(), this._rendererIsDisposable = true), this._scene = new Ol(), this._camera = new ls(), this._camera.position.set(0, 0, 10), this._camera.left = -0.5, this._camera.right = 0.5, this._camera.top = 0.5, this._camera.bottom = -0.5, this._camera.updateProjectionMatrix(), !((e7, t3, i3, n3) => {
      if (void 0 !== Jf) return Jf;
      const o3 = new fn(1, 1, n3);
      t3.setRenderTarget(o3);
      const r3 = new xr(new Xr(), new jo({ color: 16777215 }));
      t3.render(r3, i3), t3.setRenderTarget(null);
      const s3 = Zf(e7, o3.width, o3.height);
      return t3.readRenderTargetPixels(o3, 0, 0, o3.width, o3.height, s3), o3.dispose(), r3.geometry.dispose(), r3.material.dispose(), Jf = 0 !== s3[0], Jf;
    })(this._type, this._renderer, this._camera, f2)) {
      let e7;
      if (this._type === pt) e7 = this._renderer.extensions.has("EXT_color_buffer_float") ? dt : void 0;
      void 0 !== e7 ? (console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to 1015`), this._type = e7) : (this._supportsReadPixels = false, console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"));
    }
    this._quad = new xr(new Xr(), this._material), this._quad.geometry.computeBoundingBox(), this._scene.add(this._quad), this._renderTarget = new fn(this.width, this.height, f2), this._renderTarget.texture.mapping = void 0 !== (null === (g2 = e6.renderTargetOptions) || void 0 === g2 ? void 0 : g2.mapping) ? null === (m2 = e6.renderTargetOptions) || void 0 === m2 ? void 0 : m2.mapping : $e;
  }
  static instantiateRenderer() {
    const e6 = new Nl();
    return e6.setSize(128, 128), e6;
  }
  toArray() {
    if (!this._supportsReadPixels) throw new Error("Can't read pixels in this browser");
    const e6 = Zf(this._type, this._width, this._height);
    return this._renderer.readRenderTargetPixels(this._renderTarget, 0, 0, this._width, this._height, e6), e6;
  }
  toDataTexture(e6) {
    const t2 = new gc(this.toArray(), this.width, this.height, vt, this._type, (null == e6 ? void 0 : e6.mapping) || $e, (null == e6 ? void 0 : e6.wrapS) || Ze, (null == e6 ? void 0 : e6.wrapT) || Ze, (null == e6 ? void 0 : e6.magFilter) || nt, (null == e6 ? void 0 : e6.minFilter) || nt, (null == e6 ? void 0 : e6.anisotropy) || 1, _i);
    return t2.generateMipmaps = void 0 !== (null == e6 ? void 0 : e6.generateMipmaps) && (null == e6 ? void 0 : e6.generateMipmaps), t2;
  }
  disposeOnDemandRenderer() {
    this._renderer.setRenderTarget(null), this._rendererIsDisposable && (this._renderer.dispose(), this._renderer.forceContextLoss());
  }
  dispose(e6) {
    this.disposeOnDemandRenderer(), e6 && this.renderTarget.dispose(), this.material instanceof Br && Object.values(this.material.uniforms).forEach((e7) => {
      e7.value instanceof _n && e7.value.dispose();
    }), Object.values(this.material).forEach((e7) => {
      e7 instanceof _n && e7.dispose();
    }), this.material.dispose(), this._quad.geometry.dispose();
  }
  get width() {
    return this._width;
  }
  set width(e6) {
    this._width = e6, this._renderTarget.setSize(this._width, this._height);
  }
  get height() {
    return this._height;
  }
  set height(e6) {
    this._height = e6, this._renderTarget.setSize(this._width, this._height);
  }
  get renderer() {
    return this._renderer;
  }
  get renderTarget() {
    return this._renderTarget;
  }
  set renderTarget(e6) {
    this._renderTarget = e6, this._width = e6.width, this._height = e6.height;
  }
  get material() {
    return this._material;
  }
  get type() {
    return this._type;
  }
  get colorSpace() {
    return this._colorSpace;
  }
}
class tv extends Br {
  constructor({ gamma: e6, offsetHdr: t2, offsetSdr: i2, gainMapMin: n2, gainMapMax: o2, maxDisplayBoost: r2, hdrCapacityMin: s2, hdrCapacityMax: a2, sdr: l2, gainMap: c2 }) {
    super({ name: "GainMapDecoderMaterial", vertexShader: "\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n", fragmentShader: "\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n", uniforms: { sdr: { value: l2 }, gainMap: { value: c2 }, gamma: { value: new yn(1 / e6[0], 1 / e6[1], 1 / e6[2]) }, offsetHdr: { value: new yn().fromArray(t2) }, offsetSdr: { value: new yn().fromArray(i2) }, gainMapMin: { value: new yn().fromArray(n2) }, gainMapMax: { value: new yn().fromArray(o2) }, weightFactor: { value: (Math.log2(r2) - s2) / (a2 - s2) } }, blending: 0, depthTest: false, depthWrite: false }), this._maxDisplayBoost = r2, this._hdrCapacityMin = s2, this._hdrCapacityMax = a2, this.needsUpdate = true, this.uniformsNeedUpdate = true;
  }
  get sdr() {
    return this.uniforms.sdr.value;
  }
  set sdr(e6) {
    this.uniforms.sdr.value = e6;
  }
  get gainMap() {
    return this.uniforms.gainMap.value;
  }
  set gainMap(e6) {
    this.uniforms.gainMap.value = e6;
  }
  get offsetHdr() {
    return this.uniforms.offsetHdr.value.toArray();
  }
  set offsetHdr(e6) {
    this.uniforms.offsetHdr.value.fromArray(e6);
  }
  get offsetSdr() {
    return this.uniforms.offsetSdr.value.toArray();
  }
  set offsetSdr(e6) {
    this.uniforms.offsetSdr.value.fromArray(e6);
  }
  get gainMapMin() {
    return this.uniforms.gainMapMin.value.toArray();
  }
  set gainMapMin(e6) {
    this.uniforms.gainMapMin.value.fromArray(e6);
  }
  get gainMapMax() {
    return this.uniforms.gainMapMax.value.toArray();
  }
  set gainMapMax(e6) {
    this.uniforms.gainMapMax.value.fromArray(e6);
  }
  get gamma() {
    const e6 = this.uniforms.gamma.value;
    return [1 / e6.x, 1 / e6.y, 1 / e6.z];
  }
  set gamma(e6) {
    const t2 = this.uniforms.gamma.value;
    t2.x = 1 / e6[0], t2.y = 1 / e6[1], t2.z = 1 / e6[2];
  }
  get hdrCapacityMin() {
    return this._hdrCapacityMin;
  }
  set hdrCapacityMin(e6) {
    this._hdrCapacityMin = e6, this.calculateWeight();
  }
  get hdrCapacityMax() {
    return this._hdrCapacityMax;
  }
  set hdrCapacityMax(e6) {
    this._hdrCapacityMax = e6, this.calculateWeight();
  }
  get maxDisplayBoost() {
    return this._maxDisplayBoost;
  }
  set maxDisplayBoost(e6) {
    this._maxDisplayBoost = Math.max(1, Math.min(65504, e6)), this.calculateWeight();
  }
  calculateWeight() {
    const e6 = (Math.log2(this._maxDisplayBoost) - this._hdrCapacityMin) / (this._hdrCapacityMax - this._hdrCapacityMin);
    this.uniforms.weightFactor.value = Math.max(0, Math.min(1, e6));
  }
}
class iv extends Error {
}
class nv extends Error {
}
const ov = (e6, t2, i2) => {
  var n2;
  let o2;
  const r2 = null === (n2 = e6.attributes.getNamedItem(t2)) || void 0 === n2 ? void 0 : n2.nodeValue;
  if (r2) o2 = r2;
  else {
    const n3 = e6.getElementsByTagName(t2)[0];
    if (!n3) {
      if (i2) return i2;
      throw new Error(`Can't find ${t2} in gainmap metadata`);
    }
    {
      const e7 = n3.getElementsByTagName("rdf:li");
      if (3 !== e7.length) throw new Error(`Gainmap metadata contains an array of items for ${t2} but its length is not 3`);
      o2 = Array.from(e7).map((e8) => e8.innerHTML);
    }
  }
  return o2;
};
class rv {
  constructor(e6) {
    this.options = { debug: !(!e6 || void 0 === e6.debug) && e6.debug, extractFII: !e6 || void 0 === e6.extractFII || e6.extractFII, extractNonFII: !e6 || void 0 === e6.extractNonFII || e6.extractNonFII };
  }
  extract(e6) {
    return new Promise((t2, i2) => {
      const n2 = this.options.debug, o2 = new DataView(e6.buffer);
      if (65496 !== o2.getUint16(0)) return void i2(new Error("Not a valid jpeg"));
      const r2 = o2.byteLength;
      let s2, a2 = 2, l2 = 0;
      for (; a2 < r2; ) {
        if (++l2 > 250) return void i2(new Error(`Found no marker after ${l2} loops `));
        if (255 !== o2.getUint8(a2)) return void i2(new Error(`Not a valid marker at offset 0x${a2.toString(16)}, found: 0x${o2.getUint8(a2).toString(16)}`));
        if (s2 = o2.getUint8(a2 + 1), n2 && console.log(`Marker: ${s2.toString(16)}`), 226 === s2) {
          n2 && console.log("Found APP2 marker (0xffe2)");
          const e7 = a2 + 4;
          if (1297106432 === o2.getUint32(e7)) {
            const n3 = e7 + 4;
            let r3;
            if (18761 === o2.getUint16(n3)) r3 = false;
            else {
              if (19789 !== o2.getUint16(n3)) return void i2(new Error("No valid endianness marker found in TIFF header"));
              r3 = true;
            }
            if (42 !== o2.getUint16(n3 + 2, !r3)) return void i2(new Error("Not valid TIFF data! (no 0x002A marker)"));
            const s3 = o2.getUint32(n3 + 4, !r3);
            if (s3 < 8) return void i2(new Error("Not valid TIFF data! (First offset less than 8)"));
            const a3 = n3 + s3, l3 = o2.getUint16(a3, !r3), c2 = a3 + 2;
            let h2 = 0;
            for (let e8 = c2; e8 < c2 + 12 * l3; e8 += 12) 45057 === o2.getUint16(e8, !r3) && (h2 = o2.getUint32(e8 + 8, !r3));
            const u2 = a3 + 2 + 12 * l3 + 4, d2 = [];
            for (let e8 = u2; e8 < u2 + 16 * h2; e8 += 16) {
              const t3 = { MPType: o2.getUint32(e8, !r3), size: o2.getUint32(e8 + 4, !r3), dataOffset: o2.getUint32(e8 + 8, !r3), dependantImages: o2.getUint32(e8 + 12, !r3), start: -1, end: -1, isFII: false };
              t3.dataOffset ? (t3.start = n3 + t3.dataOffset, t3.isFII = false) : (t3.start = 0, t3.isFII = true), t3.end = t3.start + t3.size, d2.push(t3);
            }
            if (this.options.extractNonFII && d2.length) {
              const e8 = new Blob([o2]), i3 = [];
              for (const t3 of d2) {
                if (t3.isFII && !this.options.extractFII) continue;
                const n4 = e8.slice(t3.start, t3.end + 1, "image/jpeg");
                i3.push(n4);
              }
              t2(i3);
            }
          }
        }
        a2 += 2 + o2.getUint16(a2 + 2);
      }
    });
  }
}
const sv = async (e6) => {
  const t2 = ((e7) => {
    var t3, i3;
    let n3;
    n3 = "undefined" != typeof TextDecoder ? new TextDecoder().decode(e7) : e7.toString();
    let o2 = n3.indexOf("<x:xmpmeta");
    const r2 = new DOMParser();
    for (; -1 !== o2; ) {
      const e8 = n3.indexOf("x:xmpmeta>", o2);
      n3.slice(o2, e8 + 10);
      const s2 = n3.slice(o2, e8 + 10);
      try {
        const e9 = r2.parseFromString(s2, "text/xml").getElementsByTagName("rdf:Description")[0], n4 = ov(e9, "hdrgm:GainMapMin", "0"), o3 = ov(e9, "hdrgm:GainMapMax"), a2 = ov(e9, "hdrgm:Gamma", "1"), l2 = ov(e9, "hdrgm:OffsetSDR", "0.015625"), c2 = ov(e9, "hdrgm:OffsetHDR", "0.015625");
        let h2 = null === (t3 = e9.attributes.getNamedItem("hdrgm:HDRCapacityMin")) || void 0 === t3 ? void 0 : t3.nodeValue;
        h2 || (h2 = "0");
        const u2 = null === (i3 = e9.attributes.getNamedItem("hdrgm:HDRCapacityMax")) || void 0 === i3 ? void 0 : i3.nodeValue;
        if (!u2) throw new Error("Incomplete gainmap metadata");
        return { gainMapMin: Array.isArray(n4) ? n4.map((e10) => parseFloat(e10)) : [parseFloat(n4), parseFloat(n4), parseFloat(n4)], gainMapMax: Array.isArray(o3) ? o3.map((e10) => parseFloat(e10)) : [parseFloat(o3), parseFloat(o3), parseFloat(o3)], gamma: Array.isArray(a2) ? a2.map((e10) => parseFloat(e10)) : [parseFloat(a2), parseFloat(a2), parseFloat(a2)], offsetSdr: Array.isArray(l2) ? l2.map((e10) => parseFloat(e10)) : [parseFloat(l2), parseFloat(l2), parseFloat(l2)], offsetHdr: Array.isArray(c2) ? c2.map((e10) => parseFloat(e10)) : [parseFloat(c2), parseFloat(c2), parseFloat(c2)], hdrCapacityMin: parseFloat(h2), hdrCapacityMax: parseFloat(u2) };
      } catch (e9) {
      }
      o2 = n3.indexOf("<x:xmpmeta", e8);
    }
  })(e6);
  if (!t2) throw new nv("Gain map XMP metadata not found");
  const i2 = new rv({ extractFII: true, extractNonFII: true }), n2 = await i2.extract(e6);
  if (2 !== n2.length) throw new iv("Gain map recovery image not found");
  return { sdr: new Uint8Array(await n2[0].arrayBuffer()), gainMap: new Uint8Array(await n2[1].arrayBuffer()), metadata: t2 };
}, av = (e6) => new Promise((t2, i2) => {
  const n2 = document.createElement("img");
  n2.onload = () => {
    t2(n2);
  }, n2.onerror = (e7) => {
    i2(e7);
  }, n2.src = URL.createObjectURL(e6);
});
class lv extends Eh {
  constructor(e6, t2) {
    super(t2), e6 && (this._renderer = e6), this._internalLoadingManager = new Ch();
  }
  setRenderer(e6) {
    return this._renderer = e6, this;
  }
  setRenderTargetOptions(e6) {
    return this._renderTargetOptions = e6, this;
  }
  prepareQuadRenderer() {
    this._renderer || console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");
    const e6 = new tv({ gainMapMax: [1, 1, 1], gainMapMin: [0, 0, 0], gamma: [1, 1, 1], offsetHdr: [1, 1, 1], offsetSdr: [1, 1, 1], hdrCapacityMax: 1, hdrCapacityMin: 0, maxDisplayBoost: 1, gainMap: new _n(), sdr: new _n() });
    return new ev({ width: 16, height: 16, type: pt, colorSpace: _i, material: e6, renderer: this._renderer, renderTargetOptions: this._renderTargetOptions });
  }
  async render(e6, t2, i2, n2) {
    const o2 = n2 ? new Blob([n2], { type: "image/jpeg" }) : void 0, r2 = new Blob([i2], { type: "image/jpeg" });
    let s2, a2, l2 = false;
    if ("undefined" == typeof createImageBitmap) {
      const e7 = await Promise.all([o2 ? av(o2) : Promise.resolve(void 0), av(r2)]);
      a2 = e7[0], s2 = e7[1], l2 = true;
    } else {
      const e7 = await Promise.all([o2 ? createImageBitmap(o2, { imageOrientation: "flipY" }) : Promise.resolve(void 0), createImageBitmap(r2, { imageOrientation: "flipY" })]);
      a2 = e7[0], s2 = e7[1];
    }
    const c2 = new _n(a2 || new ImageData(2, 2), $e, Ze, Ze, nt, 1008, vt, st, 1, _i);
    c2.flipY = l2, c2.needsUpdate = true;
    const h2 = new _n(s2, $e, Ze, Ze, nt, 1008, vt, st, 1, pi);
    h2.flipY = l2, h2.needsUpdate = true, e6.width = s2.width, e6.height = s2.height, e6.material.gainMap = c2, e6.material.sdr = h2, e6.material.gainMapMin = t2.gainMapMin, e6.material.gainMapMax = t2.gainMapMax, e6.material.offsetHdr = t2.offsetHdr, e6.material.offsetSdr = t2.offsetSdr, e6.material.gamma = t2.gamma, e6.material.hdrCapacityMin = t2.hdrCapacityMin, e6.material.hdrCapacityMax = t2.hdrCapacityMax, e6.material.maxDisplayBoost = Math.pow(2, t2.hdrCapacityMax), e6.material.needsUpdate = true, e6.render();
  }
}
class cv extends lv {
  load(e6, t2, i2, n2) {
    const o2 = this.prepareQuadRenderer(), r2 = new Mh(this._internalLoadingManager);
    return r2.setResponseType("arraybuffer"), r2.setRequestHeader(this.requestHeader), r2.setPath(this.path), r2.setWithCredentials(this.withCredentials), this.manager.itemStart(e6), r2.load(e6, async (i3) => {
      if ("string" == typeof i3) throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");
      const r3 = new Uint8Array(i3);
      let s2, a2, l2;
      try {
        const e7 = await sv(r3);
        s2 = e7.sdr, a2 = e7.gainMap, l2 = e7.metadata;
      } catch (t3) {
        if (!(t3 instanceof nv || t3 instanceof iv)) throw t3;
        console.warn(`Failure to reconstruct an HDR image from ${e6}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`), l2 = { gainMapMin: [0, 0, 0], gainMapMax: [1, 1, 1], gamma: [1, 1, 1], hdrCapacityMin: 0, hdrCapacityMax: 1, offsetHdr: [0, 0, 0], offsetSdr: [0, 0, 0] }, s2 = r3;
      }
      try {
        await this.render(o2, l2, s2, a2);
      } catch (t3) {
        return this.manager.itemError(e6), "function" == typeof n2 && n2(t3), void o2.disposeOnDemandRenderer();
      }
      "function" == typeof t2 && t2(o2), this.manager.itemEnd(e6), o2.disposeOnDemandRenderer();
    }, i2, (t3) => {
      this.manager.itemError(e6), "function" == typeof n2 && n2(t3);
    }), o2;
  }
}
class hv extends Rh {
  constructor(e6) {
    super(e6), this.type = pt;
  }
  parse(e6) {
    const t2 = function(e7, t3) {
      switch (e7) {
        case 1:
          throw new Error("THREE.RGBELoader: Read Error: " + (t3 || ""));
        case 2:
          throw new Error("THREE.RGBELoader: Write Error: " + (t3 || ""));
        case 3:
          throw new Error("THREE.RGBELoader: Bad File Format: " + (t3 || ""));
        default:
          throw new Error("THREE.RGBELoader: Memory Error: " + (t3 || ""));
      }
    }, i2 = function(e7, t3, i3) {
      t3 = t3 || 1024;
      let n3 = e7.pos, o3 = -1, r3 = 0, s3 = "", a3 = String.fromCharCode.apply(null, new Uint16Array(e7.subarray(n3, n3 + 128)));
      for (; 0 > (o3 = a3.indexOf("\n")) && r3 < t3 && n3 < e7.byteLength; ) s3 += a3, r3 += a3.length, n3 += 128, a3 += String.fromCharCode.apply(null, new Uint16Array(e7.subarray(n3, n3 + 128)));
      return -1 < o3 && (e7.pos += r3 + o3 + 1, s3 + a3.slice(0, o3));
    }, n2 = function(e7, t3, i3, n3) {
      const o3 = e7[t3 + 3], r3 = Math.pow(2, o3 - 128) / 255;
      i3[n3 + 0] = e7[t3 + 0] * r3, i3[n3 + 1] = e7[t3 + 1] * r3, i3[n3 + 2] = e7[t3 + 2] * r3, i3[n3 + 3] = 1;
    }, o2 = function(e7, t3, i3, n3) {
      const o3 = e7[t3 + 3], r3 = Math.pow(2, o3 - 128) / 255;
      i3[n3 + 0] = Ko.toHalfFloat(Math.min(e7[t3 + 0] * r3, 65504)), i3[n3 + 1] = Ko.toHalfFloat(Math.min(e7[t3 + 1] * r3, 65504)), i3[n3 + 2] = Ko.toHalfFloat(Math.min(e7[t3 + 2] * r3, 65504)), i3[n3 + 3] = Ko.toHalfFloat(1);
    }, r2 = new Uint8Array(e6);
    r2.pos = 0;
    const s2 = function(e7) {
      const n3 = /^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/, o3 = /^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/, r3 = /^\s*FORMAT=(\S+)\s*$/, s3 = /^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/, a3 = { valid: 0, string: "", comments: "", programtype: "RGBE", format: "", gamma: 1, exposure: 1, width: 0, height: 0 };
      let l3, c3;
      for ((e7.pos >= e7.byteLength || !(l3 = i2(e7))) && t2(1, "no header found"), (c3 = l3.match(/^#\?(\S+)/)) || t2(3, "bad initial token"), a3.valid |= 1, a3.programtype = c3[1], a3.string += l3 + "\n"; l3 = i2(e7), false !== l3; ) if (a3.string += l3 + "\n", "#" !== l3.charAt(0)) {
        if ((c3 = l3.match(n3)) && (a3.gamma = parseFloat(c3[1])), (c3 = l3.match(o3)) && (a3.exposure = parseFloat(c3[1])), (c3 = l3.match(r3)) && (a3.valid |= 2, a3.format = c3[1]), (c3 = l3.match(s3)) && (a3.valid |= 4, a3.height = parseInt(c3[1], 10), a3.width = parseInt(c3[2], 10)), 2 & a3.valid && 4 & a3.valid) break;
      } else a3.comments += l3 + "\n";
      return 2 & a3.valid || t2(3, "missing format specifier"), 4 & a3.valid || t2(3, "missing image size specifier"), a3;
    }(r2), a2 = s2.width, l2 = s2.height, c2 = function(e7, i3, n3) {
      const o3 = i3;
      if (o3 < 8 || o3 > 32767 || 2 !== e7[0] || 2 !== e7[1] || 128 & e7[2]) return new Uint8Array(e7);
      o3 !== (e7[2] << 8 | e7[3]) && t2(3, "wrong scanline width");
      const r3 = new Uint8Array(4 * i3 * n3);
      r3.length || t2(4, "unable to allocate buffer space");
      let s3 = 0, a3 = 0;
      const l3 = 4 * o3, c3 = new Uint8Array(4), h3 = new Uint8Array(l3);
      let u3 = n3;
      for (; u3 > 0 && a3 < e7.byteLength; ) {
        a3 + 4 > e7.byteLength && t2(1), c3[0] = e7[a3++], c3[1] = e7[a3++], c3[2] = e7[a3++], c3[3] = e7[a3++], 2 == c3[0] && 2 == c3[1] && (c3[2] << 8 | c3[3]) == o3 || t2(3, "bad rgbe scanline format");
        let i4, n4 = 0;
        for (; n4 < l3 && a3 < e7.byteLength; ) {
          i4 = e7[a3++];
          const o4 = i4 > 128;
          if (o4 && (i4 -= 128), (0 === i4 || n4 + i4 > l3) && t2(3, "bad scanline data"), o4) {
            const t3 = e7[a3++];
            for (let e8 = 0; e8 < i4; e8++) h3[n4++] = t3;
          } else h3.set(e7.subarray(a3, a3 + i4), n4), n4 += i4, a3 += i4;
        }
        const d3 = o3;
        for (let e8 = 0; e8 < d3; e8++) {
          let t3 = 0;
          r3[s3] = h3[e8 + t3], t3 += o3, r3[s3 + 1] = h3[e8 + t3], t3 += o3, r3[s3 + 2] = h3[e8 + t3], t3 += o3, r3[s3 + 3] = h3[e8 + t3], s3 += 4;
        }
        u3--;
      }
      return r3;
    }(r2.subarray(r2.pos), a2, l2);
    let h2, u2, d2;
    switch (this.type) {
      case dt:
        d2 = c2.length / 4;
        const e7 = new Float32Array(4 * d2);
        for (let t4 = 0; t4 < d2; t4++) n2(c2, 4 * t4, e7, 4 * t4);
        h2 = e7, u2 = dt;
        break;
      case pt:
        d2 = c2.length / 4;
        const t3 = new Uint16Array(4 * d2);
        for (let e8 = 0; e8 < d2; e8++) o2(c2, 4 * e8, t3, 4 * e8);
        h2 = t3, u2 = pt;
        break;
      default:
        throw new Error("THREE.RGBELoader: Unsupported type: " + this.type);
    }
    return { width: a2, height: l2, data: h2, header: s2.string, gamma: s2.gamma, exposure: s2.exposure, type: u2 };
  }
  setDataType(e6) {
    return this.type = e6, this;
  }
  load(e6, t2, i2, n2) {
    return super.load(e6, function(e7, i3) {
      switch (e7.type) {
        case dt:
        case pt:
          e7.colorSpace = _i, e7.minFilter = nt, e7.magFilter = nt, e7.generateMipmaps = false, e7.flipY = true;
      }
      t2 && t2(e7, i3);
    }, i2, n2);
  }
}
const uv = { topLight: { intensity: 500, position: [0.418, 16.199, 0.3] }, room: { position: [-0.757, 13.219, 0.717], scale: [31.713, 28.305, 28.591] }, boxes: [{ position: [-10.906, 2.009, 1.846], rotation: -0.195, scale: [2.328, 7.905, 4.651] }, { position: [-5.607, -0.754, -0.758], rotation: 0.994, scale: [1.97, 1.534, 3.955] }, { position: [6.167, 0.857, 7.803], rotation: 0.561, scale: [3.927, 6.285, 3.687] }, { position: [-2.017, 0.018, 6.124], rotation: 0.333, scale: [2.002, 4.566, 2.064] }, { position: [2.291, -0.756, -2.621], rotation: -0.286, scale: [1.546, 1.552, 1.496] }, { position: [-2.193, -0.369, -5.547], rotation: 0.516, scale: [3.875, 3.487, 2.986] }], lights: [{ intensity: 50, position: [-16.116, 14.37, 8.208], scale: [0.1, 2.428, 2.739] }, { intensity: 50, position: [-16.109, 18.021, -8.207], scale: [0.1, 2.425, 2.751] }, { intensity: 17, position: [14.904, 12.198, -1.832], scale: [0.15, 4.265, 6.331] }, { intensity: 43, position: [-0.462, 8.89, 14.52], scale: [4.38, 5.441, 0.088] }, { intensity: 20, position: [3.235, 11.486, -12.541], scale: [2.5, 2, 0.1] }, { intensity: 100, position: [0, 20, 0], scale: [1, 0.1, 1] }] }, dv = { topLight: { intensity: 400, position: [0.5, 14, 0.5] }, room: { position: [0, 13.2, 0], scale: [31.5, 28.5, 31.5] }, boxes: [{ position: [-10.906, -1, 1.846], rotation: -0.195, scale: [2.328, 7.905, 4.651] }, { position: [-5.607, -0.754, -0.758], rotation: 0.994, scale: [1.97, 1.534, 3.955] }, { position: [6.167, -0.16, 7.803], rotation: 0.561, scale: [3.927, 6.285, 3.687] }, { position: [-2.017, 0.018, 6.124], rotation: 0.333, scale: [2.002, 4.566, 2.064] }, { position: [2.291, -0.756, -2.621], rotation: -0.286, scale: [1.546, 1.552, 1.496] }, { position: [-2.193, -0.369, -5.547], rotation: 0.516, scale: [3.875, 3.487, 2.986] }], lights: [{ intensity: 80, position: [-14, 10, 8], scale: [0.1, 2.5, 2.5] }, { intensity: 80, position: [-14, 14, -4], scale: [0.1, 2.5, 2.5] }, { intensity: 23, position: [14, 12, 0], scale: [0.1, 5, 5] }, { intensity: 16, position: [0, 9, 14], scale: [5, 5, 0.1] }, { intensity: 80, position: [7, 8, -14], scale: [2.5, 2.5, 0.1] }, { intensity: 80, position: [-7, 16, -14], scale: [2.5, 2.5, 0.1] }, { intensity: 1, position: [0, 20, 0], scale: [0.1, 0.1, 0.1] }] };
class pv extends Ol {
  constructor(e6) {
    super(), this.position.y = -3.5;
    const t2 = new Sr();
    t2.deleteAttribute("uv");
    const i2 = new ih({ metalness: 0, side: 1 }), n2 = new ih({ metalness: 0 }), o2 = "legacy" == e6 ? uv : dv, r2 = new Gh(16777215, o2.topLight.intensity, 28, 2);
    r2.position.set(...o2.topLight.position), this.add(r2);
    const s2 = new xr(t2, i2);
    s2.position.set(...o2.room.position), s2.scale.set(...o2.room.scale), this.add(s2);
    for (const e7 of o2.boxes) {
      const i3 = new xr(t2, n2);
      i3.position.set(...e7.position), i3.rotation.set(0, e7.rotation, 0), i3.scale.set(...e7.scale), this.add(i3);
    }
    for (const e7 of o2.lights) {
      const i3 = new xr(t2, this.createAreaLightMaterial(e7.intensity));
      i3.position.set(...e7.position), i3.scale.set(...e7.scale), this.add(i3);
    }
  }
  createAreaLightMaterial(e6) {
    const t2 = new jo();
    return t2.color.setScalar(e6), t2;
  }
}
const _v = 20, gv = /\.hdr(\.js)?$/;
class mv {
  constructor(e6) {
    this.threeRenderer = e6, this.lottieLoaderUrl = "", this._ldrLoader = null, this._imageLoader = null, this._hdrLoader = null, this._lottieLoader = null, this.generatedEnvironmentMap = null, this.generatedEnvironmentMapAlt = null, this.skyboxCache = /* @__PURE__ */ new Map(), this.blurMaterial = null, this.blurScene = null;
  }
  ldrLoader(e6) {
    return null == this._ldrLoader && (this._ldrLoader = new kh()), this._ldrLoader.setWithCredentials(e6), this._ldrLoader;
  }
  imageLoader(e6) {
    return null == this._imageLoader && (this._imageLoader = new cv(this.threeRenderer)), this._imageLoader.setWithCredentials(e6), this._imageLoader;
  }
  hdrLoader(e6) {
    return null == this._hdrLoader && (this._hdrLoader = new hv(), this._hdrLoader.setDataType(pt)), this._hdrLoader.setWithCredentials(e6), this._hdrLoader;
  }
  async getLottieLoader(e6) {
    if (null == this._lottieLoader) {
      const { LottieLoader: e7 } = await import(this.lottieLoaderUrl);
      this._lottieLoader = new e7();
    }
    return this._lottieLoader.setWithCredentials(e6), this._lottieLoader;
  }
  async loadImage(e6, t2) {
    const i2 = await new Promise((i3, n2) => this.ldrLoader(t2).load(e6, i3, () => {
    }, n2));
    return i2.name = e6, i2.flipY = false, i2;
  }
  async loadLottie(e6, t2, i2) {
    const n2 = await this.getLottieLoader(i2);
    n2.setQuality(t2);
    const o2 = await new Promise((t3, i3) => n2.load(e6, t3, () => {
    }, i3));
    return o2.name = e6, o2;
  }
  async loadEquirect(e6, t2 = false, i2 = () => {
  }) {
    try {
      const n2 = gv.test(e6), o2 = n2 ? this.hdrLoader(t2) : this.imageLoader(t2), r2 = await new Promise((t3, n3) => o2.load(e6, (e7) => {
        const { renderTarget: i3 } = e7;
        if (null != i3) {
          const { texture: n4 } = i3;
          e7.dispose(false), t3(n4);
        } else t3(e7);
      }, (e7) => {
        i2(e7.loaded / e7.total * 0.9);
      }, n3));
      return i2(1), r2.name = e6, r2.mapping = Xe, n2 || (r2.colorSpace = pi), r2;
    } finally {
      i2 && i2(1);
    }
  }
  async generateEnvironmentMapAndSkybox(e6 = null, t2 = null, i2 = () => {
  }, n2 = false) {
    const o2 = "legacy" !== t2;
    "legacy" !== t2 && "neutral" !== t2 || (t2 = null), t2 = Bu(t2);
    let r2, s2 = Promise.resolve(null);
    e6 && (s2 = this.loadEquirectFromUrl(e6, n2, i2)), r2 = t2 ? this.loadEquirectFromUrl(t2, n2, i2) : e6 ? this.loadEquirectFromUrl(e6, n2, i2) : o2 ? this.loadGeneratedEnvironmentMapAlt() : this.loadGeneratedEnvironmentMap();
    const [a2, l2] = await Promise.all([r2, s2]);
    if (null == a2) throw new Error("Failed to load environment map.");
    return { environmentMap: a2, skybox: l2 };
  }
  async loadEquirectFromUrl(e6, t2, i2) {
    if (!this.skyboxCache.has(e6)) {
      const n2 = this.loadEquirect(e6, t2, i2);
      this.skyboxCache.set(e6, n2);
    }
    return this.skyboxCache.get(e6);
  }
  async GenerateEnvironmentMap(e6, t2) {
    await ((e7 = 0) => new Promise((t3) => setTimeout(t3, e7)))();
    const i2 = this.threeRenderer, n2 = new Ur(256, { generateMipmaps: false, type: pt, format: vt, colorSpace: _i, depthBuffer: true }), o2 = new Nr(0.1, 100, n2), r2 = o2.renderTarget.texture;
    r2.name = t2;
    const s2 = i2.outputColorSpace, a2 = i2.toneMapping;
    return i2.toneMapping = 0, i2.outputColorSpace = _i, o2.update(i2, e6), this.blurCubemap(n2, 0.04), i2.toneMapping = a2, i2.outputColorSpace = s2, r2;
  }
  async loadGeneratedEnvironmentMap() {
    return null == this.generatedEnvironmentMap && (this.generatedEnvironmentMap = this.GenerateEnvironmentMap(new pv("legacy"), "legacy")), this.generatedEnvironmentMap;
  }
  async loadGeneratedEnvironmentMapAlt() {
    return null == this.generatedEnvironmentMapAlt && (this.generatedEnvironmentMapAlt = this.GenerateEnvironmentMap(new pv("neutral"), "neutral")), this.generatedEnvironmentMapAlt;
  }
  blurCubemap(e6, t2) {
    if (null == this.blurMaterial) {
      this.blurMaterial = this.getBlurShader(_v);
      const e7 = new Sr(), t3 = new xr(e7, this.blurMaterial);
      this.blurScene = new Ol(), this.blurScene.add(t3);
    }
    const i2 = e6.clone();
    this.halfblur(e6, i2, t2, "latitudinal"), this.halfblur(i2, e6, t2, "longitudinal");
  }
  halfblur(e6, t2, i2, n2) {
    const o2 = e6.width, r2 = isFinite(i2) ? Math.PI / (2 * o2) : 2 * Math.PI / 39, s2 = i2 / r2, a2 = isFinite(i2) ? 1 + Math.floor(3 * s2) : _v;
    a2 > _v && console.warn(`sigmaRadians, ${i2}, is too large and will clip, as it requested ${a2} samples when the maximum is set to 20`);
    const l2 = [];
    let c2 = 0;
    for (let e7 = 0; e7 < _v; ++e7) {
      const t3 = e7 / s2, i3 = Math.exp(-t3 * t3 / 2);
      l2.push(i3), 0 == e7 ? c2 += i3 : e7 < a2 && (c2 += 2 * i3);
    }
    for (let e7 = 0; e7 < l2.length; e7++) l2[e7] = l2[e7] / c2;
    const h2 = this.blurMaterial.uniforms;
    h2.envMap.value = e6.texture, h2.samples.value = a2, h2.weights.value = l2, h2.latitudinal.value = "latitudinal" === n2, h2.dTheta.value = r2;
    new Nr(0.1, 100, t2).update(this.threeRenderer, this.blurScene);
  }
  getBlurShader(e6) {
    const t2 = new Float32Array(e6), i2 = new yn(0, 1, 0);
    return new Br({ name: "SphericalGaussianBlur", defines: { n: e6 }, uniforms: { envMap: { value: null }, samples: { value: 1 }, weights: { value: t2 }, latitudinal: { value: false }, dTheta: { value: 0 }, poleAxis: { value: i2 } }, vertexShader: "\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ", fragmentShader: "\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ", blending: 0, depthTest: false, depthWrite: false, side: 1 });
  }
  async dispose() {
    for (const [, e6] of this.skyboxCache) {
      (await e6).dispose();
    }
    null != this.generatedEnvironmentMap && ((await this.generatedEnvironmentMap).dispose(), this.generatedEnvironmentMap = null), null != this.generatedEnvironmentMapAlt && ((await this.generatedEnvironmentMapAlt).dispose(), this.generatedEnvironmentMapAlt = null), null != this.blurMaterial && this.blurMaterial.dispose();
  }
}
const fv = [1, 0.79, 0.62, 0.5, 0.4, 0.31, 0.25], vv = "high-performance";
class Av extends Di {
  constructor(e6) {
    super(), this.loader = new Xp(Kf), this.width = 0, this.height = 0, this.dpr = 1, this.scenes = /* @__PURE__ */ new Set(), this.multipleScenesVisible = false, this.lastTick = performance.now(), this.renderedLastFrame = false, this.scaleStep = 0, this.lastStep = 3, this.avgFrameDuration = 50, this.onWebGLContextLost = (e7) => {
      this.dispatchEvent({ type: "contextlost", sourceEvent: e7 });
    }, this.onWebGLContextRestored = () => {
      var e7;
      null === (e7 = this.textureUtils) || void 0 === e7 || e7.dispose(), this.textureUtils = new mv(this.threeRenderer);
      for (const e8 of this.scenes) e8.element[Uu]();
    }, this.dpr = window.devicePixelRatio, this.canvas3D = document.createElement("canvas"), this.canvas3D.id = "webgl-canvas", this.canvas3D.classList.add("show");
    try {
      this.threeRenderer = new Nl({ canvas: this.canvas3D, alpha: true, antialias: true, powerPreference: e6.powerPreference, preserveDrawingBuffer: true }), this.threeRenderer.autoClear = true, this.threeRenderer.setPixelRatio(1), this.threeRenderer.debug = { checkShaderErrors: !!e6.debug, onShaderError: null }, this.threeRenderer.toneMapping = 4;
    } catch (e7) {
      console.warn(e7);
    }
    this.arRenderer = new kf(this), this.textureUtils = this.canRender ? new mv(this.threeRenderer) : null, Xp.initializeKTX2Loader(this.threeRenderer), this.canvas3D.addEventListener("webglcontextlost", this.onWebGLContextLost), this.canvas3D.addEventListener("webglcontextrestored", this.onWebGLContextRestored), this.updateRendererSize();
  }
  static get singleton() {
    return this._singleton || (this._singleton = new Av({ powerPreference: (self.ModelViewerElement || {}).powerPreference || vv, debug: Lu() })), this._singleton;
  }
  static resetSingleton() {
    const e6 = this._singleton.dispose();
    for (const t2 of e6) t2.disconnectedCallback();
    this._singleton = new Av({ powerPreference: (self.ModelViewerElement || {}).powerPreference || vv, debug: Lu() });
    for (const t2 of e6) t2.connectedCallback();
  }
  get canRender() {
    return null != this.threeRenderer;
  }
  get scaleFactor() {
    return fv[this.scaleStep];
  }
  set minScale(e6) {
    let t2 = 1;
    for (; t2 < fv.length && !(fv[t2] < e6); ) ++t2;
    this.lastStep = t2 - 1;
  }
  registerScene(e6) {
    this.scenes.add(e6), e6.forceRescale();
    const t2 = new $i();
    this.threeRenderer.getSize(t2), e6.canvas.width = t2.x, e6.canvas.height = t2.y, this.canRender && this.scenes.size > 0 && this.threeRenderer.setAnimationLoop((e7, t3) => this.render(e7, t3));
  }
  unregisterScene(e6) {
    this.scenes.delete(e6), this.canvas3D.parentElement === e6.canvas.parentElement && e6.canvas.parentElement.removeChild(this.canvas3D), this.canRender && 0 === this.scenes.size && this.threeRenderer.setAnimationLoop(null);
  }
  displayCanvas(e6) {
    return e6.element.modelIsVisible && !this.multipleScenesVisible ? this.canvas3D : e6.element[cy];
  }
  countVisibleScenes() {
    const { canvas3D: e6 } = this;
    let t2 = 0, i2 = null;
    for (const n3 of this.scenes) {
      const { element: o2 } = n3;
      o2.modelIsVisible && null == n3.externalRenderer && ++t2, e6.parentElement === n3.canvas.parentElement && (i2 = n3);
    }
    const n2 = t2 > 1;
    if (null != i2) {
      const t3 = n2 && !this.multipleScenesVisible, o2 = !i2.element.modelIsVisible;
      if (t3 || o2) {
        const { width: t4, height: n3 } = this.sceneSize(i2);
        this.copyPixels(i2, t4, n3), e6.parentElement.removeChild(e6);
      }
    }
    this.multipleScenesVisible = n2;
  }
  updateRendererSize() {
    var e6;
    const t2 = window.devicePixelRatio;
    if (t2 !== this.dpr) for (const e7 of this.scenes) {
      const { element: t3 } = e7;
      t3[Yb](t3.getBoundingClientRect());
    }
    let i2 = 0, n2 = 0;
    for (const e7 of this.scenes) i2 = Math.max(i2, e7.width), n2 = Math.max(n2, e7.height);
    if (i2 !== this.width || n2 !== this.height || t2 !== this.dpr) {
      this.width = i2, this.height = n2, this.dpr = t2, i2 = Math.ceil(i2 * t2), n2 = Math.ceil(n2 * t2), this.canRender && this.threeRenderer.setSize(i2, n2, false);
      for (const t3 of this.scenes) {
        const { canvas: o2 } = t3;
        o2.width = i2, o2.height = n2, t3.forceRescale(), null === (e6 = t3.effectRenderer) || void 0 === e6 || e6.setSize(i2, n2);
      }
    }
  }
  updateRendererScale(e6) {
    const t2 = this.scaleStep;
    this.avgFrameDuration += Du(0.2 * (e6 - this.avgFrameDuration), -5, 5), this.avgFrameDuration > 60 ? ++this.scaleStep : this.avgFrameDuration < 40 && this.scaleStep > 0 && --this.scaleStep, this.scaleStep = Math.min(this.scaleStep, this.lastStep), t2 !== this.scaleStep && (this.avgFrameDuration = 50);
  }
  shouldRender(e6) {
    if (e6.shouldRender()) e6.scaleStep != this.scaleStep && (e6.scaleStep = this.scaleStep, this.rescaleCanvas(e6));
    else {
      if (0 == e6.scaleStep) return false;
      e6.scaleStep = 0, this.rescaleCanvas(e6);
    }
    return true;
  }
  rescaleCanvas(e6) {
    const t2 = fv[e6.scaleStep], i2 = Math.ceil(this.width / t2), n2 = Math.ceil(this.height / t2), { style: o2 } = e6.canvas;
    o2.width = `${i2}px`, o2.height = `${n2}px`, this.canvas3D.style.width = `${i2}px`, this.canvas3D.style.height = `${n2}px`;
    const r2 = this.dpr * t2, s2 = t2 < 1 ? "GPU throttling" : this.dpr !== window.devicePixelRatio ? "No meta viewport tag" : "";
    e6.element.dispatchEvent(new CustomEvent("render-scale", { detail: { reportedDpr: window.devicePixelRatio, renderedDpr: r2, minimumDpr: this.dpr * fv[this.lastStep], pixelWidth: Math.ceil(e6.width * r2), pixelHeight: Math.ceil(e6.height * r2), reason: s2 } }));
  }
  sceneSize(e6) {
    const { dpr: t2 } = this, i2 = fv[e6.scaleStep];
    return { width: Math.min(Math.ceil(e6.width * i2 * t2), this.canvas3D.width), height: Math.min(Math.ceil(e6.height * i2 * t2), this.canvas3D.height) };
  }
  copyPixels(e6, t2, i2) {
    const n2 = e6.context;
    null != n2 ? (n2.clearRect(0, 0, t2, i2), n2.drawImage(this.canvas3D, 0, 0, t2, i2, 0, 0, t2, i2), e6.canvas.classList.add("show")) : console.log("could not acquire 2d context");
  }
  orderedScenes() {
    const e6 = [];
    for (const t2 of [false, true]) for (const i2 of this.scenes) i2.element.modelIsVisible === t2 && e6.push(i2);
    return e6;
  }
  get isPresenting() {
    return this.arRenderer.isPresenting;
  }
  preRender(e6, t2, i2) {
    const { element: n2, exposure: o2, toneMapping: r2 } = e6;
    n2[dy](t2, i2);
    const s2 = "number" == typeof o2 && !Number.isNaN(o2), a2 = n2.environmentImage, l2 = n2.skyboxImage, c2 = 7 === r2 && ("neutral" === a2 || "legacy" === a2 || !a2 && !l2);
    this.threeRenderer.toneMappingExposure = (s2 ? o2 : 1) * (c2 ? 1.3 : 1);
  }
  render(e6, t2) {
    if (null != t2) return void this.arRenderer.onWebXRFrame(e6, t2);
    const i2 = e6 - this.lastTick;
    if (this.lastTick = e6, !this.canRender || this.isPresenting) return;
    this.countVisibleScenes(), this.updateRendererSize(), this.renderedLastFrame && (this.updateRendererScale(i2), this.renderedLastFrame = false);
    const { canvas3D: n2 } = this;
    for (const t3 of this.orderedScenes()) {
      const { element: o2 } = t3;
      if (!o2.loaded || !o2.modelIsVisible && t3.renderCount > 0) continue;
      if (this.preRender(t3, e6, i2), !this.shouldRender(t3)) continue;
      if (null != t3.externalRenderer) {
        const e7 = t3.getCamera();
        e7.updateMatrix();
        const { matrix: i3, projectionMatrix: n3 } = e7, o3 = i3.elements.slice(), r3 = t3.getTarget();
        o3[12] += r3.x, o3[13] += r3.y, o3[14] += r3.z, t3.externalRenderer.render({ viewMatrix: o3, projectionMatrix: n3.elements });
        continue;
      }
      if (!o2.modelIsVisible && !this.multipleScenesVisible) for (const e7 of this.scenes) e7.element.modelIsVisible && e7.queueRender();
      const { width: r2, height: s2 } = this.sceneSize(t3);
      t3.renderShadow(this.threeRenderer), this.threeRenderer.setRenderTarget(null), this.threeRenderer.setViewport(0, Math.ceil(this.height * this.dpr) - s2, r2, s2), null != t3.effectRenderer ? t3.effectRenderer.render(i2) : (this.threeRenderer.autoClear = true, this.threeRenderer.toneMapping = t3.toneMapping, this.threeRenderer.render(t3, t3.camera)), this.multipleScenesVisible || !t3.element.modelIsVisible && 0 === t3.renderCount ? this.copyPixels(t3, r2, s2) : n2.parentElement !== t3.canvas.parentElement && (t3.canvas.parentElement.appendChild(n2), t3.canvas.classList.remove("show")), t3.hasRendered(), ++t3.renderCount, this.renderedLastFrame = true;
    }
  }
  dispose() {
    null != this.textureUtils && this.textureUtils.dispose(), null != this.threeRenderer && this.threeRenderer.dispose(), this.textureUtils = null, this.threeRenderer = null;
    const e6 = [];
    for (const t2 of this.scenes) e6.push(t2.element);
    return this.canvas3D.removeEventListener("webglcontextlost", this.onWebGLContextLost), this.canvas3D.removeEventListener("webglcontextrestored", this.onWebGLContextRestored), e6;
  }
}
const bv = Symbol("correlatedObjects"), yv = Symbol("onUpdate");
class wv {
  constructor(e6, t2) {
    this[yv] = e6, this[bv] = t2;
  }
}
const xv = new jo(), Cv = new Xr(2, 2);
let Sv = 0;
const Ev = Symbol("threeTexture"), Tv = Symbol("threeTextures");
let Iv = class extends wv {
  get [Ev]() {
    var e6;
    return null === (e6 = this[bv]) || void 0 === e6 ? void 0 : e6.values().next().value;
  }
  get [Tv]() {
    return this[bv];
  }
  constructor(e6, t2) {
    super(e6, new Set(t2 ? [t2] : [])), this[Ev].image.src || (this[Ev].image.src = t2.name ? t2.name : "adhoc_image" + Sv++), this[Ev].image.name || (this[Ev].image.name = t2 && t2.image && t2.image.src ? t2.image.src.split("/").pop() : "adhoc_image");
  }
  get name() {
    return this[Ev].image.name || "";
  }
  get uri() {
    return this[Ev].image.src;
  }
  get bufferView() {
    return this[Ev].image.bufferView;
  }
  get element() {
    const e6 = this[Ev];
    if (e6 && (e6.isCanvasTexture || e6.isVideoTexture)) return e6.image;
  }
  get animation() {
    const e6 = this[Ev];
    if (e6 && e6.isCanvasTexture && e6.animation) return e6.animation;
  }
  get type() {
    return null != this.uri ? "external" : "embedded";
  }
  set name(e6) {
    for (const t2 of this[Tv]) t2.image.name = e6;
  }
  update() {
    const e6 = this[Ev];
    e6 && e6.isCanvasTexture && !e6.animation && (this[Ev].needsUpdate = true, this[yv]());
  }
  async createThumbnail(e6, t2) {
    const i2 = new Ol();
    xv.map = this[Ev];
    const n2 = new xr(Cv, xv);
    i2.add(n2);
    const o2 = new ls(-1, 1, 1, -1, 0, 1), { threeRenderer: r2 } = Av.singleton, s2 = new fn(e6, t2);
    r2.setRenderTarget(s2), r2.render(i2, o2), r2.setRenderTarget(null);
    const a2 = new Uint8Array(e6 * t2 * 4);
    r2.readRenderTargetPixels(s2, 0, 0, e6, t2, a2), zb.width = e6, zb.height = t2;
    const l2 = zb.getContext("2d"), c2 = l2.createImageData(e6, t2);
    return c2.data.set(a2), l2.putImageData(c2, 0, 0), new Promise(async (e7, t3) => {
      zb.toBlob((i3) => {
        if (!i3) return t3("Failed to capture thumbnail.");
        e7(URL.createObjectURL(i3));
      }, "image/png");
    });
  }
};
var Mv, Bv;
!function(e6) {
  e6[e6.Nearest = 9728] = "Nearest", e6[e6.Linear = 9729] = "Linear", e6[e6.NearestMipmapNearest = 9984] = "NearestMipmapNearest", e6[e6.LinearMipmapNearest = 9985] = "LinearMipmapNearest", e6[e6.NearestMipmapLinear = 9986] = "NearestMipmapLinear", e6[e6.LinearMipmapLinear = 9987] = "LinearMipmapLinear";
}(Mv || (Mv = {})), function(e6) {
  e6[e6.ClampToEdge = 33071] = "ClampToEdge", e6[e6.MirroredRepeat = 33648] = "MirroredRepeat", e6[e6.Repeat = 10497] = "Repeat";
}(Bv || (Bv = {}));
const Rv = /* @__PURE__ */ new Map([[Bv.Repeat, Ke], [Bv.ClampToEdge, Ze], [Bv.MirroredRepeat, Je]]), kv = /* @__PURE__ */ new Map([[Ke, Bv.Repeat], [Ze, Bv.ClampToEdge], [Je, Bv.MirroredRepeat]]), Pv = /* @__PURE__ */ new Map([[Mv.Nearest, et], [Mv.Linear, nt], [Mv.NearestMipmapNearest, tt], [Mv.LinearMipmapNearest, ot], [Mv.NearestMipmapLinear, it], [Mv.LinearMipmapLinear, rt]]), Dv = /* @__PURE__ */ new Map([[et, Mv.Nearest], [nt, Mv.Linear], [tt, Mv.NearestMipmapNearest], [ot, Mv.LinearMipmapNearest], [it, Mv.NearestMipmapLinear], [rt, Mv.LinearMipmapLinear]]), Lv = /* @__PURE__ */ new Map([[Mv.Nearest, et], [Mv.Linear, nt]]), Fv = /* @__PURE__ */ new Map([[et, Mv.Nearest], [nt, Mv.Linear]]), Nv = (e6) => Dv.has(e6), Ov = (e6) => Fv.has(e6), Uv = (e6) => kv.has(e6), zv = Symbol("threeTexture"), Hv = Symbol("threeTextures"), Qv = Symbol("setProperty");
class Vv extends wv {
  get [zv]() {
    var e6;
    return null === (e6 = this[bv]) || void 0 === e6 ? void 0 : e6.values().next().value;
  }
  get [Hv]() {
    return this[bv];
  }
  constructor(e6, t2) {
    super(e6, new Set(t2 ? [t2] : []));
  }
  get name() {
    return this[zv].name || "";
  }
  get minFilter() {
    return Dv.get(this[zv].minFilter);
  }
  get magFilter() {
    return Fv.get(this[zv].magFilter);
  }
  get wrapS() {
    return kv.get(this[zv].wrapS);
  }
  get wrapT() {
    return kv.get(this[zv].wrapT);
  }
  get rotation() {
    return this[zv].rotation;
  }
  get scale() {
    return yy(this[zv].repeat);
  }
  get offset() {
    return yy(this[zv].offset);
  }
  setMinFilter(e6) {
    this[Qv]("minFilter", Pv.get(e6));
  }
  setMagFilter(e6) {
    this[Qv]("magFilter", Lv.get(e6));
  }
  setWrapS(e6) {
    this[Qv]("wrapS", Rv.get(e6));
  }
  setWrapT(e6) {
    this[Qv]("wrapT", Rv.get(e6));
  }
  setRotation(e6) {
    null == e6 && (e6 = 0), this[Qv]("rotation", e6);
  }
  setScale(e6) {
    null == e6 && (e6 = { u: 1, v: 1 }), this[Qv]("repeat", new $i(e6.u, e6.v));
  }
  setOffset(e6) {
    null == e6 && (e6 = { u: 0, v: 0 }), this[Qv]("offset", new $i(e6.u, e6.v));
  }
  [Qv](e6, t2) {
    if (((e7, t3) => {
      switch (e7) {
        case "minFilter":
          return Nv(t3);
        case "magFilter":
          return Ov(t3);
        case "wrapS":
        case "wrapT":
          return Uv(t3);
        case "rotation":
        case "repeat":
        case "offset":
          return true;
        default:
          throw new Error(`Cannot configure property "${e7}" on Sampler`);
      }
    })(e6, t2)) for (const i2 of this[Hv]) i2[e6] = t2, i2.needsUpdate = true;
    this[yv]();
  }
}
const Gv = Symbol("image"), qv = Symbol("sampler"), $v = Symbol("threeTexture");
class Wv extends wv {
  constructor(e6, t2) {
    super(e6, new Set(t2 ? [t2] : [])), this[qv] = new Vv(e6, t2), this[Gv] = new Iv(e6, t2);
  }
  get [$v]() {
    var e6;
    return null === (e6 = this[bv]) || void 0 === e6 ? void 0 : e6.values().next().value;
  }
  get name() {
    return this[$v].name || "";
  }
  set name(e6) {
    for (const t2 of this[bv]) t2.name = e6;
  }
  get sampler() {
    return this[qv];
  }
  get source() {
    return this[Gv];
  }
}
var jv, Xv, Yv;
const Kv = Symbol("texture"), Zv = Symbol("transform"), Jv = Symbol("materials"), eA = Symbol("usage"), tA = Symbol("onUpdate"), iA = Symbol("activeVideo");
var nA;
!function(e6) {
  e6[e6.Base = 0] = "Base", e6[e6.MetallicRoughness = 1] = "MetallicRoughness", e6[e6.Normal = 2] = "Normal", e6[e6.Occlusion = 3] = "Occlusion", e6[e6.Emissive = 4] = "Emissive", e6[e6.Clearcoat = 5] = "Clearcoat", e6[e6.ClearcoatRoughness = 6] = "ClearcoatRoughness", e6[e6.ClearcoatNormal = 7] = "ClearcoatNormal", e6[e6.SheenColor = 8] = "SheenColor", e6[e6.SheenRoughness = 9] = "SheenRoughness", e6[e6.Transmission = 10] = "Transmission", e6[e6.Thickness = 11] = "Thickness", e6[e6.Specular = 12] = "Specular", e6[e6.SpecularColor = 13] = "SpecularColor", e6[e6.Iridescence = 14] = "Iridescence", e6[e6.IridescenceThickness = 15] = "IridescenceThickness", e6[e6.Anisotropy = 16] = "Anisotropy";
}(nA || (nA = {}));
class oA {
  constructor(e6, t2, i2, n2) {
    this[jv] = null, this[Xv] = { rotation: 0, scale: new $i(1, 1), offset: new $i(0, 0) }, this[Yv] = false, i2 && (this[Zv].rotation = i2.rotation, this[Zv].scale.copy(i2.repeat), this[Zv].offset.copy(i2.offset), this[Kv] = new Wv(e6, i2)), this[tA] = e6, this[Jv] = n2, this[eA] = t2;
  }
  get texture() {
    return this[Kv];
  }
  setTexture(e6) {
    var t2, i2;
    const n2 = null != e6 ? e6.source[Ev] : null, o2 = null === (t2 = this[Kv]) || void 0 === t2 ? void 0 : t2.source[Ev];
    if (null != o2 && o2.isVideoTexture ? this[iA] = false : (null === (i2 = this[Kv]) || void 0 === i2 ? void 0 : i2.source.animation) && this[Kv].source.animation.removeEventListener("enterFrame", this[tA]), this[Kv] = e6, null != n2 && n2.isVideoTexture) {
      const e7 = n2.image;
      if (this[iA] = true, null != e7.requestVideoFrameCallback) {
        const t3 = () => {
          this[iA] && (this[tA](), e7.requestVideoFrameCallback(t3));
        };
        e7.requestVideoFrameCallback(t3);
      } else {
        const e8 = () => {
          this[iA] && (this[tA](), requestAnimationFrame(e8));
        };
        requestAnimationFrame(e8);
      }
    } else null != (null == e6 ? void 0 : e6.source.animation) && e6.source.animation.addEventListener("enterFrame", this[tA]);
    let r2 = pi;
    if (this[Jv]) for (const e7 of this[Jv]) {
      switch (this[eA]) {
        case nA.Base:
          e7.map = n2;
          break;
        case nA.MetallicRoughness:
          r2 = _i, e7.metalnessMap = n2, e7.roughnessMap = n2;
          break;
        case nA.Normal:
          r2 = _i, e7.normalMap = n2;
          break;
        case nA.Occlusion:
          r2 = _i, e7.aoMap = n2;
          break;
        case nA.Emissive:
          e7.emissiveMap = n2;
          break;
        case nA.Clearcoat:
          e7.clearcoatMap = n2;
          break;
        case nA.ClearcoatRoughness:
          e7.clearcoatRoughnessMap = n2;
          break;
        case nA.ClearcoatNormal:
          e7.clearcoatNormalMap = n2;
          break;
        case nA.SheenColor:
          e7.sheenColorMap = n2;
          break;
        case nA.SheenRoughness:
          e7.sheenRoughnessMap = n2;
          break;
        case nA.Transmission:
          e7.transmissionMap = n2;
          break;
        case nA.Thickness:
          e7.thicknessMap = n2;
          break;
        case nA.Specular:
          e7.specularIntensityMap = n2;
          break;
        case nA.SpecularColor:
          e7.specularColorMap = n2;
          break;
        case nA.Iridescence:
          e7.iridescenceMap = n2;
          break;
        case nA.IridescenceThickness:
          e7.iridescenceThicknessMap = n2;
          break;
        case nA.Anisotropy:
          e7.anisotropyMap = n2;
      }
      e7.needsUpdate = true;
    }
    n2 && (n2.colorSpace = r2, n2.rotation = this[Zv].rotation, n2.repeat = this[Zv].scale, n2.offset = this[Zv].offset), this[tA]();
  }
}
jv = Kv, Xv = Zv, Yv = iA;
const rA = Symbol("threeMaterial"), sA = Symbol("threeMaterials"), aA = Symbol("baseColorTexture"), lA = Symbol("metallicRoughnessTexture");
class cA extends wv {
  constructor(e6, t2) {
    super(e6, t2);
    const { map: i2, metalnessMap: n2 } = t2.values().next().value;
    this[aA] = new oA(e6, nA.Base, i2, t2), this[lA] = new oA(e6, nA.MetallicRoughness, n2, t2);
  }
  get [sA]() {
    return this[bv];
  }
  get [rA]() {
    var e6;
    return null === (e6 = this[bv]) || void 0 === e6 ? void 0 : e6.values().next().value;
  }
  get baseColorFactor() {
    const e6 = [0, 0, 0, this[rA].opacity];
    return this[rA].color.toArray(e6), e6;
  }
  get metallicFactor() {
    return this[rA].metalness;
  }
  get roughnessFactor() {
    return this[rA].roughness;
  }
  get baseColorTexture() {
    return this[aA];
  }
  get metallicRoughnessTexture() {
    return this[lA];
  }
  setBaseColorFactor(e6) {
    const t2 = new Go();
    e6 instanceof Array ? t2.fromArray(e6) : t2.set(e6);
    for (const i2 of this[sA]) i2.color.set(t2), e6 instanceof Array && e6.length > 3 ? i2.opacity = e6[3] : (e6 = [0, 0, 0, i2.opacity], t2.toArray(e6));
    this[yv]();
  }
  setMetallicFactor(e6) {
    for (const t2 of this[sA]) t2.metalness = e6;
    this[yv]();
  }
  setRoughnessFactor(e6) {
    for (const t2 of this[sA]) t2.roughness = e6;
    this[yv]();
  }
}
var hA, uA;
const dA = Symbol("pbrMetallicRoughness"), pA = Symbol("normalTexture"), _A = Symbol("occlusionTexture"), gA = Symbol("emissiveTexture"), mA = Symbol("backingThreeMaterial"), fA = Symbol("applyAlphaCutoff"), vA = Symbol("getAlphaMode"), AA = Symbol("lazyLoadGLTFInfo"), bA = Symbol("initialize"), yA = Symbol("getLoadedMaterial"), wA = Symbol("ensureMaterialIsLoaded"), xA = Symbol("gltfIndex"), CA = Symbol("setActive"), SA = Symbol("variantIndices"), EA = Symbol("isActive"), TA = Symbol("modelVariants"), IA = Symbol("name"), MA = Symbol("pbrTextures");
class BA extends wv {
  constructor(e6, t2, i2, n2, o2, r2, s2 = void 0) {
    super(e6, o2), this[hA] = /* @__PURE__ */ new Set(), this[uA] = /* @__PURE__ */ new Map(), this[xA] = t2, this[EA] = i2, this[TA] = n2, this[IA] = r2, null == s2 ? this[bA]() : this[AA] = s2;
  }
  get [(hA = SA, uA = MA, mA)]() {
    return this[bv].values().next().value;
  }
  [bA]() {
    const e6 = this[yv], t2 = this[bv];
    this[dA] = new cA(e6, t2);
    const { normalMap: i2, aoMap: n2, emissiveMap: o2 } = t2.values().next().value;
    this[pA] = new oA(e6, nA.Normal, i2, t2), this[_A] = new oA(e6, nA.Occlusion, n2, t2), this[gA] = new oA(e6, nA.Emissive, o2, t2);
    const r2 = (i3) => {
      this[MA].set(i3, new oA(e6, i3, null, t2));
    };
    r2(nA.Clearcoat), r2(nA.ClearcoatRoughness), r2(nA.ClearcoatNormal), r2(nA.SheenColor), r2(nA.SheenRoughness), r2(nA.Transmission), r2(nA.Thickness), r2(nA.Specular), r2(nA.SpecularColor), r2(nA.Iridescence), r2(nA.IridescenceThickness), r2(nA.Anisotropy);
  }
  async [yA]() {
    if (null != this[AA]) {
      const e6 = await this[AA].doLazyLoad();
      return this[bA](), this[AA] = void 0, this.ensureLoaded = async () => {
      }, e6;
    }
    return null;
  }
  colorFromRgb(e6) {
    const t2 = new Go();
    return e6 instanceof Array ? t2.fromArray(e6) : t2.set(e6), t2;
  }
  [wA]() {
    if (null != this[AA]) throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`);
  }
  async ensureLoaded() {
    await this[yA]();
  }
  get isLoaded() {
    return null == this[AA];
  }
  get isActive() {
    return this[EA];
  }
  [CA](e6) {
    this[EA] = e6;
  }
  get name() {
    return this[IA] || "";
  }
  set name(e6) {
    if (this[IA] = e6, null != this[bv]) for (const t2 of this[bv]) t2.name = e6;
  }
  get pbrMetallicRoughness() {
    return this[wA](), this[dA];
  }
  get normalTexture() {
    return this[wA](), this[pA];
  }
  get occlusionTexture() {
    return this[wA](), this[_A];
  }
  get emissiveTexture() {
    return this[wA](), this[gA];
  }
  get emissiveFactor() {
    return this[wA](), this[mA].emissive.toArray();
  }
  get index() {
    return this[xA];
  }
  hasVariant(e6) {
    const t2 = this[TA].get(e6);
    return null != t2 && this[SA].has(t2.index);
  }
  setEmissiveFactor(e6) {
    this[wA]();
    const t2 = this.colorFromRgb(e6);
    for (const e7 of this[bv]) e7.emissive.set(t2);
    this[yv]();
  }
  [vA]() {
    return this[mA].transparent ? "BLEND" : this[mA].alphaTest > 0 ? "MASK" : "OPAQUE";
  }
  [fA]() {
    this[wA]();
    for (const e6 of this[bv]) "MASK" === this[vA]() ? null == e6.alphaTest && (e6.alphaTest = 0.5) : e6.alphaTest = void 0, e6.needsUpdate = true;
  }
  setAlphaCutoff(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.alphaTest = e6, t2.needsUpdate = true;
    this[fA](), this[yv]();
  }
  getAlphaCutoff() {
    return this[wA](), this[mA].alphaTest;
  }
  setDoubleSided(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.side = e6 ? 2 : 0, t2.needsUpdate = true;
    this[yv]();
  }
  getDoubleSided() {
    return this[wA](), 2 == this[mA].side;
  }
  setAlphaMode(e6) {
    this[wA]();
    const t2 = (e7, t3) => {
      e7.transparent = t3, e7.depthWrite = !t3;
    };
    for (const i2 of this[bv]) t2(i2, "BLEND" === e6), i2.alphaTest = "MASK" === e6 ? 0.5 : void 0, i2.needsUpdate = true;
    this[yv]();
  }
  getAlphaMode() {
    return this[wA](), this[vA]();
  }
  get emissiveStrength() {
    return this[wA](), this[mA].emissiveIntensity;
  }
  setEmissiveStrength(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.emissiveIntensity = e6;
    this[yv]();
  }
  get clearcoatFactor() {
    return this[wA](), this[mA].clearcoat;
  }
  get clearcoatRoughnessFactor() {
    return this[wA](), this[mA].clearcoatRoughness;
  }
  get clearcoatTexture() {
    return this[wA](), this[MA].get(nA.Clearcoat);
  }
  get clearcoatRoughnessTexture() {
    return this[wA](), this[MA].get(nA.ClearcoatRoughness);
  }
  get clearcoatNormalTexture() {
    return this[wA](), this[MA].get(nA.ClearcoatNormal);
  }
  get clearcoatNormalScale() {
    return this[wA](), this[mA].clearcoatNormalScale.x;
  }
  setClearcoatFactor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.clearcoat = e6;
    this[yv]();
  }
  setClearcoatRoughnessFactor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.clearcoatRoughness = e6;
    this[yv]();
  }
  setClearcoatNormalScale(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.clearcoatNormalScale = new $i(e6, e6);
    this[yv]();
  }
  get ior() {
    return this[wA](), this[mA].ior;
  }
  setIor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.ior = e6;
    this[yv]();
  }
  get sheenColorFactor() {
    return this[wA](), this[mA].sheenColor.toArray();
  }
  get sheenColorTexture() {
    return this[wA](), this[MA].get(nA.SheenColor);
  }
  get sheenRoughnessFactor() {
    return this[wA](), this[mA].sheenRoughness;
  }
  get sheenRoughnessTexture() {
    return this[wA](), this[MA].get(nA.SheenRoughness);
  }
  setSheenColorFactor(e6) {
    this[wA]();
    const t2 = this.colorFromRgb(e6);
    for (const e7 of this[bv]) e7.sheenColor.set(t2), e7.sheen = 1;
    this[yv]();
  }
  setSheenRoughnessFactor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.sheenRoughness = e6, t2.sheen = 1;
    this[yv]();
  }
  get transmissionFactor() {
    return this[wA](), this[mA].transmission;
  }
  get transmissionTexture() {
    return this[wA](), this[MA].get(nA.Transmission);
  }
  setTransmissionFactor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.transmission = e6;
    this[yv]();
  }
  get thicknessFactor() {
    return this[wA](), this[mA].thickness;
  }
  get thicknessTexture() {
    return this[wA](), this[MA].get(nA.Thickness);
  }
  get attenuationDistance() {
    return this[wA](), this[mA].attenuationDistance;
  }
  get attenuationColor() {
    return this[wA](), this[mA].attenuationColor.toArray();
  }
  setThicknessFactor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.thickness = e6;
    this[yv]();
  }
  setAttenuationDistance(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.attenuationDistance = e6;
    this[yv]();
  }
  setAttenuationColor(e6) {
    this[wA]();
    const t2 = this.colorFromRgb(e6);
    for (const e7 of this[bv]) e7.attenuationColor.set(t2);
    this[yv]();
  }
  get specularFactor() {
    return this[wA](), this[mA].specularIntensity;
  }
  get specularTexture() {
    return this[wA](), this[MA].get(nA.Specular);
  }
  get specularColorFactor() {
    return this[wA](), this[mA].specularColor.toArray();
  }
  get specularColorTexture() {
    return this[wA](), this[MA].get(nA.SheenColor);
  }
  setSpecularFactor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.specularIntensity = e6;
    this[yv]();
  }
  setSpecularColorFactor(e6) {
    this[wA]();
    const t2 = this.colorFromRgb(e6);
    for (const e7 of this[bv]) e7.specularColor.set(t2);
    this[yv]();
  }
  get iridescenceFactor() {
    return this[wA](), this[mA].iridescence;
  }
  get iridescenceTexture() {
    return this[wA](), this[MA].get(nA.Iridescence);
  }
  get iridescenceIor() {
    return this[wA](), this[mA].iridescenceIOR;
  }
  get iridescenceThicknessMinimum() {
    return this[wA](), this[mA].iridescenceThicknessRange[0];
  }
  get iridescenceThicknessMaximum() {
    return this[wA](), this[mA].iridescenceThicknessRange[1];
  }
  get iridescenceThicknessTexture() {
    return this[wA](), this[MA].get(nA.IridescenceThickness);
  }
  setIridescenceFactor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.iridescence = e6;
    this[yv]();
  }
  setIridescenceIor(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.iridescenceIOR = e6;
    this[yv]();
  }
  setIridescenceThicknessMinimum(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.iridescenceThicknessRange[0] = e6;
    this[yv]();
  }
  setIridescenceThicknessMaximum(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.iridescenceThicknessRange[1] = e6;
    this[yv]();
  }
  get anisotropyStrength() {
    return this[wA](), this[mA].anisotropy;
  }
  get anisotropyRotation() {
    return this[wA](), this[mA].anisotropyRotation;
  }
  get anisotropyTexture() {
    return this[wA](), this[MA].get(nA.Anisotropy);
  }
  setAnisotropyStrength(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.anisotropy = e6;
    this[yv]();
  }
  setAnisotropyRotation(e6) {
    this[wA]();
    for (const t2 of this[bv]) t2.anisotropyRotation = e6;
    this[yv]();
  }
}
let RA = class {
  constructor(e6) {
    this.name = "", this.children = new Array(), this.name = e6;
  }
};
class kA extends RA {
  constructor(e6, t2, i2, n2) {
    super(e6.name), this.materials = /* @__PURE__ */ new Map(), this.variantToMaterialMap = /* @__PURE__ */ new Map(), this.initialMaterialIdx = 0, this.activeMaterialIdx = 0, this.mesh = e6;
    const { gltf: o2, threeGLTF: r2, threeObjectMap: s2 } = n2;
    this.parser = r2.parser, this.modelVariants = i2, this.mesh.userData.variantData = i2;
    const a2 = s2.get(e6.material);
    null != a2.materials ? this.initialMaterialIdx = this.activeMaterialIdx = a2.materials : console.error(`Primitive (${e6.name}) missing initial material reference.`);
    const l2 = e6.userData.associations || {};
    if (null == l2.meshes) return void console.error("Mesh is missing primitive index association");
    const c2 = ((o2.meshes || [])[l2.meshes].primitives || [])[l2.primitives];
    if (null != c2) {
      if (null != c2.material) this.materials.set(c2.material, t2[c2.material]);
      else {
        const e7 = t2.findIndex((e8) => "Default" === e8.name);
        e7 >= 0 ? this.materials.set(e7, t2[e7]) : console.warn("gltfPrimitive has no material!");
      }
      if (c2.extensions && c2.extensions.KHR_materials_variants) {
        const e7 = c2.extensions.KHR_materials_variants, n3 = r2.parser.json.extensions.KHR_materials_variants.variants;
        for (const o3 of e7.mappings) {
          const e8 = t2[o3.material];
          this.materials.set(o3.material, e8);
          for (const t3 of o3.variants) {
            const { name: o4 } = n3[t3];
            this.variantToMaterialMap.set(t3, e8), e8[SA].add(t3), i2.has(o4) || i2.set(o4, { name: o4, index: t3 });
          }
        }
      }
    } else console.error("Mesh primitive definition is missing.");
  }
  async setActiveMaterial(e6) {
    const t2 = this.materials.get(e6);
    if (e6 !== this.activeMaterialIdx) {
      const i2 = t2[bv], n2 = await t2[yA]();
      this.mesh.material = null != n2 ? n2 : i2.values().next().value, this.parser.assignFinalMaterial(this.mesh), i2.add(this.mesh.material), this.activeMaterialIdx = e6;
    }
    return this.mesh.material;
  }
  getActiveMaterial() {
    return this.materials.get(this.activeMaterialIdx);
  }
  getMaterial(e6) {
    return this.materials.get(e6);
  }
  async enableVariant(e6) {
    if (null == e6) return this.setActiveMaterial(this.initialMaterialIdx);
    if (null != this.variantToMaterialMap && this.modelVariants.has(e6)) {
      const t2 = this.modelVariants.get(e6);
      return this.enableVariantHelper(t2.index);
    }
    return null;
  }
  async enableVariantHelper(e6) {
    if (null != this.variantToMaterialMap && null != e6) {
      const t2 = this.variantToMaterialMap.get(e6);
      if (null != t2) return this.setActiveMaterial(t2.index);
    }
    return null;
  }
  async instantiateVariants() {
    if (null != this.variantToMaterialMap) for (const e6 of this.variantToMaterialMap.keys()) {
      const t2 = this.mesh.userData.variantMaterials.get(e6);
      if (null != t2.material) continue;
      const i2 = await this.enableVariantHelper(e6);
      null != i2 && (t2.material = i2);
    }
  }
  get variantInfo() {
    return this.variantToMaterialMap;
  }
  addVariant(e6, t2) {
    if (!this.ensureVariantIsUnused(t2)) return false;
    this.modelVariants.has(t2) || this.modelVariants.set(t2, { name: t2, index: this.modelVariants.size });
    const i2 = this.modelVariants.get(t2).index;
    return e6[SA].add(i2), this.variantToMaterialMap.set(i2, e6), this.materials.set(e6.index, e6), this.updateVariantUserData(i2, e6), true;
  }
  deleteVariant(e6) {
    if (this.variantInfo.has(e6)) {
      this.variantInfo.delete(e6);
      const t2 = this.mesh.userData.variantMaterials;
      null != t2 && t2.delete(e6);
    }
  }
  updateVariantUserData(e6, t2) {
    t2[SA].add(e6), this.mesh.userData.variantData = this.modelVariants, this.mesh.userData.variantMaterials = this.mesh.userData.variantMaterials || /* @__PURE__ */ new Map();
    this.mesh.userData.variantMaterials.set(e6, { material: t2[bv].values().next().value, gltfMaterialIndex: t2.index });
  }
  ensureVariantIsUnused(e6) {
    const t2 = this.modelVariants.get(e6);
    return null == t2 || !this.variantInfo.has(t2.index) || (console.warn(`Primitive cannot add variant '${e6}' for this material, it already exists.`), false);
  }
}
var PA, DA, LA, FA, NA, OA;
const UA = Symbol("materials"), zA = Symbol("hierarchy"), HA = Symbol("roots"), QA = Symbol("primitives"), VA = Symbol("prepareVariantsForExport"), GA = Symbol("switchVariant"), qA = Symbol("materialFromPoint"), $A = Symbol("nodeFromPoint"), WA = Symbol("nodeFromIndex"), jA = Symbol("variantData"), XA = Symbol("availableVariants"), YA = Symbol("modelOnUpdate"), KA = Symbol("cloneMaterial");
class ZA {
  constructor(e6, t2, i2, n2) {
    this.gltf = e6, this.gltfElementMap = t2, this.mapKey = i2, this.doLazyLoad = n2;
  }
}
class JA {
  constructor(e6, t2 = () => {
  }) {
    this[PA] = new Array(), this[DA] = new Array(), this[LA] = new Array(), this[FA] = new Array(), this[NA] = () => {
    }, this[OA] = /* @__PURE__ */ new Map(), this[YA] = t2;
    const { gltf: i2, threeGLTF: n2, gltfElementMap: o2 } = e6;
    for (const [e7, r3] of i2.materials.entries()) {
      const s3 = o2.get(r3);
      if (null != s3) this[UA].push(new BA(t2, e7, true, this[jA], s3, r3.name));
      else {
        const s4 = (i2.materials || [])[e7], a2 = /* @__PURE__ */ new Set();
        o2.set(s4, a2);
        const l2 = async () => {
          const t3 = await n2.parser.getDependency("material", e7);
          return a2.add(t3), t3;
        };
        this[UA].push(new BA(t2, e7, false, this[jA], a2, r3.name, new ZA(i2, o2, s4, l2)));
      }
    }
    const r2 = /* @__PURE__ */ new Map(), s2 = new Array();
    for (const e7 of n2.scene.children) s2.push(e7);
    for (; s2.length > 0; ) {
      const t3 = s2.pop();
      let i3 = null;
      t3 instanceof xr ? (i3 = new kA(t3, this.materials, this[jA], e6), this[QA].push(i3)) : i3 = new RA(t3.name);
      const n3 = r2.get(t3);
      null != n3 ? n3.children.push(i3) : this[HA].push(i3), this[zA].push(i3);
      for (const e7 of t3.children) s2.push(e7), r2.set(t3, i3);
    }
  }
  get materials() {
    return this[UA];
  }
  [(PA = UA, DA = zA, LA = HA, FA = QA, NA = YA, OA = jA, XA)]() {
    const e6 = Array.from(this[jA].values());
    return e6.sort((e7, t2) => e7.index - t2.index), e6.map((e7) => e7.name);
  }
  getMaterialByName(e6) {
    const t2 = this[UA].filter((t3) => t3.name === e6);
    return t2.length > 0 ? t2[0] : null;
  }
  [WA](e6, t2) {
    const i2 = this[zA].find((i3) => {
      if (i3 instanceof kA) {
        const { meshes: n2, primitives: o2 } = i3.mesh.userData.associations;
        if (n2 == e6 && o2 == t2) return true;
      }
      return false;
    });
    return null == i2 ? null : i2;
  }
  [$A](e6) {
    return this[zA].find((t2) => {
      if (t2 instanceof kA) {
        if (t2.mesh === e6.object) return true;
      }
      return false;
    });
  }
  [qA](e6) {
    return this[$A](e6).getActiveMaterial();
  }
  async [GA](e6) {
    for (const t2 of this[QA]) await t2.enableVariant(e6);
    for (const e7 of this.materials) e7[CA](false);
    for (const e7 of this[QA]) this.materials[e7.getActiveMaterial().index][CA](true);
  }
  async [VA]() {
    const e6 = new Array();
    for (const t2 of this[QA]) e6.push(t2.instantiateVariants());
    await Promise.all(e6);
  }
  [KA](e6, t2) {
    const i2 = this.materials[e6];
    i2.isLoaded || console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.");
    const n2 = i2[bv], o2 = /* @__PURE__ */ new Set();
    for (const [e7, i3] of n2.entries()) {
      const r3 = i3.clone();
      r3.name = t2 + (n2.size > 1 ? "_inst" + e7 : ""), o2.add(r3);
    }
    const r2 = new BA(this[YA], this[UA].length, false, this[jA], o2, t2);
    return this[UA].push(r2), r2;
  }
  createMaterialInstanceForVariant(e6, t2, i2, n2 = true) {
    let o2 = null;
    for (const n3 of this[QA]) {
      const r2 = this[jA].get(i2);
      null != r2 && n3.variantInfo.has(r2.index) || null != n3.getMaterial(e6) && (this.hasVariant(i2) || this.createVariant(i2), null == o2 && (o2 = this[KA](e6, t2)), n3.addVariant(o2, i2));
    }
    if (n2 && null != o2) {
      o2[CA](true), this.materials[e6][CA](false);
      for (const e7 of this[QA]) e7.enableVariant(i2);
    }
    return o2;
  }
  createVariant(e6) {
    this[jA].has(e6) ? console.warn(`Variant '${e6}'' already exists`) : this[jA].set(e6, { name: e6, index: this[jA].size });
  }
  hasVariant(e6) {
    return this[jA].has(e6);
  }
  setMaterialToVariant(e6, t2) {
    if (null != this[XA]().find((e7) => e7 === t2)) if (e6 < 0 || e6 >= this.materials.length) console.error("setMaterialToVariant(): materialIndex is out of bounds.");
    else for (const i2 of this[QA]) {
      const n2 = i2.getMaterial(e6);
      null != n2 && i2.addVariant(n2, t2);
    }
    else console.warn(`Can't add material to '${t2}', the variant does not exist.'`);
  }
  updateVariantName(e6, t2) {
    const i2 = this[jA].get(e6);
    null != i2 && (i2.name = t2, this[jA].set(t2, i2), this[jA].delete(e6));
  }
  deleteVariant(e6) {
    const t2 = this[jA].get(e6);
    if (null != t2) {
      for (const i2 of this.materials) i2.hasVariant(e6) && i2[SA].delete(t2.index);
      for (const e7 of this[QA]) e7.deleteVariant(t2.index);
      this[jA].delete(e6);
    }
  }
}
var eb = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const tb = Symbol("currentGLTF"), ib = Symbol("originalGltfJson"), nb = Symbol("model"), ob = Symbol("getOnUpdateMethod"), rb = Symbol("buildTexture");
class sb extends xr {
  constructor() {
    super(void 0, new jo({ depthWrite: false })), this.height = 0, this.radius = 0, this.resolution = 0, this.userData.noHit = true;
  }
  get map() {
    return this.material.map;
  }
  set map(e6) {
    this.material.map = e6;
  }
  isUsable() {
    return this.height > 0 && this.radius > 0 && null != this.geometry && null != this.map;
  }
  updateGeometry(e6 = this.height, t2 = this.radius, i2 = 128) {
    e6 == this.height && t2 == this.radius && i2 == this.resolution || (this.height = e6, this.radius = t2, this.resolution = i2, e6 > 0 && t2 > 0 && (this.geometry.dispose(), this.geometry = function(e7, t3, i3) {
      const n2 = new th(t3, 2 * i3, i3);
      n2.scale(1, 1, -1);
      const o2 = n2.getAttribute("position"), r2 = new yn();
      for (let t4 = 0; t4 < o2.count; ++t4) if (r2.fromBufferAttribute(o2, t4), r2.y < 0) {
        const i4 = 3 * -e7 / 2, n3 = r2.y < i4 ? -e7 / r2.y : 1 - r2.y * r2.y / (3 * i4 * i4);
        r2.multiplyScalar(n3), r2.toArray(o2.array, 3 * t4);
      }
      return o2.needsUpdate = true, n2;
    }(e6, t2, i2)));
  }
}
const ab = new yn(), lb = new yn(), cb = new yn(), hb = new Wi(), ub = new Uo(), db = new bn();
class pb extends Yp {
  constructor(e6) {
    super(document.createElement("div")), this.normal = new yn(0, 1, 0), this.initialized = false, this.referenceCount = 1, this.pivot = document.createElement("div"), this.slot = document.createElement("slot"), this.element.classList.add("annotation-wrapper"), this.slot.name = e6.name, this.element.appendChild(this.pivot), this.pivot.appendChild(this.slot), this.updatePosition(e6.position), this.updateNormal(e6.normal), this.surface = e6.surface;
  }
  get facingCamera() {
    return !this.element.classList.contains("hide");
  }
  show() {
    this.facingCamera && this.initialized || this.updateVisibility(true);
  }
  hide() {
    !this.facingCamera && this.initialized || this.updateVisibility(false);
  }
  increment() {
    this.referenceCount++;
  }
  decrement() {
    return this.referenceCount > 0 && --this.referenceCount, 0 === this.referenceCount;
  }
  updatePosition(e6) {
    if (null == e6) return;
    const t2 = mg(e6)[0].terms;
    for (let e7 = 0; e7 < 3; ++e7) this.position.setComponent(e7, Tg(t2[e7]).number);
    this.updateMatrixWorld();
  }
  updateNormal(e6) {
    if (null == e6) return;
    const t2 = mg(e6)[0].terms;
    for (let e7 = 0; e7 < 3; ++e7) this.normal.setComponent(e7, t2[e7].number);
  }
  updateSurface() {
    const { mesh: e6, tri: t2, bary: i2 } = this;
    if (null == e6 || null == t2 || null == i2) return;
    e6.getVertexPosition(t2.x, ab), e6.getVertexPosition(t2.y, lb), e6.getVertexPosition(t2.z, cb), ab.toArray(hb.elements, 0), lb.toArray(hb.elements, 3), cb.toArray(hb.elements, 6), this.position.copy(i2).applyMatrix3(hb);
    const n2 = this.parent;
    n2.worldToLocal(e6.localToWorld(this.position)), ub.set(ab, lb, cb), ub.getNormal(this.normal).transformDirection(e6.matrixWorld);
    const o2 = n2.parent;
    db.setFromAxisAngle(ab.set(0, 1, 0), -o2.rotation.y), this.normal.applyQuaternion(db);
  }
  orient(e6) {
    this.pivot.style.transform = `rotate(${e6}rad)`;
  }
  updateVisibility(e6) {
    this.element.classList.toggle("hide", !e6), this.slot.assignedNodes().forEach((t2) => {
      if (t2.nodeType !== Node.ELEMENT_NODE) return;
      const i2 = t2, n2 = i2.dataset.visibilityAttribute;
      if (null != n2) {
        const t3 = `data-${n2}`;
        i2.toggleAttribute(t3, e6);
      }
      i2.dispatchEvent(new CustomEvent("hotspot-visibility", { detail: { visible: e6 } }));
    }), this.initialized = true;
  }
}
const _b = { name: "HorizontalBlurShader", uniforms: { tDiffuse: { value: null }, h: { value: 1 / 512 } }, vertexShader: "\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vUv = uv;\n			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n		}", fragmentShader: "\n\n		uniform sampler2D tDiffuse;\n		uniform float h;\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vec4 sum = vec4( 0.0 );\n\n			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n			gl_FragColor = sum;\n\n		}" }, gb = { name: "VerticalBlurShader", uniforms: { tDiffuse: { value: null }, v: { value: 1 / 512 } }, vertexShader: "\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vUv = uv;\n			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n		}", fragmentShader: "\n\n		uniform sampler2D tDiffuse;\n		uniform float v;\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vec4 sum = vec4( 0.0 );\n\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n			gl_FragColor = sum;\n\n		}" };
function mb(e6, t2, i2) {
  return (1 - i2) * e6 + i2 * t2;
}
class fb extends So {
  constructor(e6, t2, i2) {
    super(), this.camera = new ls(), this.renderTarget = null, this.renderTargetBlur = null, this.depthMaterial = new Al(), this.horizontalBlurMaterial = new Br(_b), this.verticalBlurMaterial = new Br(gb), this.intensity = 0, this.softness = 1, this.boundingBox = new Cn(), this.size = new yn(), this.maxDimension = 0, this.isAnimated = false, this.needsUpdate = false;
    const { camera: n2 } = this;
    n2.rotation.x = Math.PI / 2, n2.left = -0.5, n2.right = 0.5, n2.bottom = -0.5, n2.top = 0.5, this.add(n2);
    const o2 = new Xr(), r2 = new jo({ opacity: 1, transparent: true, side: 1 });
    this.floor = new xr(o2, r2), this.floor.userData.noHit = true, n2.add(this.floor), this.blurPlane = new xr(o2), this.blurPlane.visible = false, n2.add(this.blurPlane), e6.target.add(this), this.depthMaterial.onBeforeCompile = function(e7) {
      e7.fragmentShader = e7.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );", "gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );");
    }, this.horizontalBlurMaterial.depthTest = false, this.verticalBlurMaterial.depthTest = false, this.setScene(e6, t2, i2);
  }
  setScene(e6, t2, i2) {
    const { boundingBox: n2, size: o2, rotation: r2, position: s2 } = this;
    if (this.isAnimated = e6.animationNames.length > 0, this.boundingBox.copy(e6.boundingBox), this.size.copy(e6.size), this.maxDimension = Math.max(o2.x, o2.y, o2.z) * (this.isAnimated ? 2 : 1), this.boundingBox.getCenter(s2), "back" === i2) {
      const { min: e7, max: t3 } = n2;
      [e7.y, e7.z] = [e7.z, e7.y], [t3.y, t3.z] = [t3.z, t3.y], [o2.y, o2.z] = [o2.z, o2.y], r2.x = Math.PI / 2, r2.y = Math.PI;
    } else r2.x = 0, r2.y = 0;
    if (this.isAnimated) {
      const e7 = n2.min.y, t3 = n2.max.y;
      o2.y = this.maxDimension, n2.expandByVector(o2.subScalar(this.maxDimension).multiplyScalar(-0.5)), n2.min.y = e7, n2.max.y = t3, o2.set(this.maxDimension, t3 - e7, this.maxDimension);
    }
    "bottom" === i2 ? s2.y = n2.min.y : s2.z = n2.min.y, this.setSoftness(t2);
  }
  setSoftness(e6) {
    this.softness = e6;
    const { size: t2, camera: i2 } = this, n2 = this.isAnimated ? 2 : 1, o2 = n2 * Math.pow(2, 9 - 3 * e6);
    this.setMapSize(o2);
    const r2 = t2.y / 2, s2 = t2.y * n2;
    i2.near = 0, i2.far = mb(s2, r2, e6), this.depthMaterial.opacity = 1 / e6, i2.updateProjectionMatrix(), this.setIntensity(this.intensity), this.setOffset(0);
  }
  setMapSize(e6) {
    const { size: t2 } = this;
    this.isAnimated && (e6 *= 2);
    const i2 = Math.floor(t2.x > t2.z ? e6 : e6 * t2.x / t2.z), n2 = Math.floor(t2.x > t2.z ? e6 * t2.z / t2.x : e6), o2 = 10 + i2, r2 = 10 + n2;
    if (null == this.renderTarget || this.renderTarget.width === o2 && this.renderTarget.height === r2 || (this.renderTarget.dispose(), this.renderTarget = null, this.renderTargetBlur.dispose(), this.renderTargetBlur = null), null == this.renderTarget) {
      const e7 = { format: vt };
      this.renderTarget = new fn(o2, r2, e7), this.renderTargetBlur = new fn(o2, r2, e7), this.floor.material.map = this.renderTarget.texture;
    }
    this.camera.scale.set(t2.x * (1 + 10 / i2), t2.z * (1 + 10 / n2), 1), this.needsUpdate = true;
  }
  setIntensity(e6) {
    this.intensity = e6, e6 > 0 ? (this.visible = true, this.floor.visible = true, this.floor.material.opacity = e6 * mb(0.3, 1, this.softness * this.softness)) : (this.visible = false, this.floor.visible = false);
  }
  getIntensity() {
    return this.intensity;
  }
  setOffset(e6) {
    this.floor.position.z = -e6 + this.gap();
  }
  gap() {
    return 1e-3 * this.maxDimension;
  }
  render(e6, t2) {
    t2.overrideMaterial = this.depthMaterial;
    const i2 = e6.getClearAlpha();
    e6.setClearAlpha(0), this.floor.visible = false;
    const n2 = e6.xr.enabled;
    e6.xr.enabled = false;
    const o2 = e6.getRenderTarget();
    e6.setRenderTarget(this.renderTarget), e6.render(t2, this.camera), t2.overrideMaterial = null, this.floor.visible = true, this.blurShadow(e6), e6.xr.enabled = n2, e6.setRenderTarget(o2), e6.setClearAlpha(i2);
  }
  blurShadow(e6) {
    const { camera: t2, horizontalBlurMaterial: i2, verticalBlurMaterial: n2, renderTarget: o2, renderTargetBlur: r2, blurPlane: s2 } = this;
    s2.visible = true, s2.material = i2, i2.uniforms.h.value = 1 / this.renderTarget.width, i2.uniforms.tDiffuse.value = this.renderTarget.texture, e6.setRenderTarget(r2), e6.render(s2, t2), s2.material = n2, n2.uniforms.v.value = 1 / this.renderTarget.height, n2.uniforms.tDiffuse.value = this.renderTargetBlur.texture, e6.setRenderTarget(o2), e6.render(s2, t2), s2.visible = false;
  }
  dispose() {
    null != this.renderTarget && this.renderTarget.dispose(), null != this.renderTargetBlur && this.renderTargetBlur.dispose(), this.depthMaterial.dispose(), this.horizontalBlurMaterial.dispose(), this.verticalBlurMaterial.dispose(), this.floor.material.dispose(), this.floor.geometry.dispose(), this.blurPlane.geometry.dispose(), this.removeFromParent();
  }
}
const vb = new yn(), Ab = new yn(), bb = new yn(), yb = new hu(), wb = new yn(), xb = new $i();
class Cb extends Ol {
  constructor({ canvas: e6, element: t2, width: i2, height: n2 }) {
    super(), this.annotationRenderer = new i_(), this.effectRenderer = null, this.schemaElement = document.createElement("script"), this.width = 1, this.height = 1, this.aspect = 1, this.scaleStep = 0, this.renderCount = 0, this.externalRenderer = null, this.camera = new Lr(45, 1, 0.1, 100), this.xrCamera = null, this.url = null, this.pivot = new So(), this.target = new So(), this.animationNames = [], this.boundingBox = new Cn(), this.boundingSphere = new Qn(), this.size = new yn(), this.idealAspect = 0, this.framedFoVDeg = 0, this.shadow = null, this.shadowIntensity = 0, this.shadowSoftness = 1, this.bakedShadows = /* @__PURE__ */ new Set(), this.exposure = 1, this.toneMapping = 4, this.canScale = true, this.isDirty = false, this.goalTarget = new yn(), this.targetDamperX = new cg(), this.targetDamperY = new cg(), this.targetDamperZ = new cg(), this._currentGLTF = null, this._model = null, this.cancelPendingSourceChange = null, this.animationsByName = /* @__PURE__ */ new Map(), this.currentAnimationAction = null, this.groundedSkybox = new sb(), this.name = "ModelScene", this.element = t2, this.canvas = e6, this.camera = new Lr(45, 1, 0.1, 100), this.camera.name = "MainCamera", this.add(this.pivot), this.pivot.name = "Pivot", this.pivot.add(this.target), this.setSize(i2, n2), this.target.name = "Target", this.mixer = new au(this.target);
    const { domElement: o2 } = this.annotationRenderer, { style: r2 } = o2;
    r2.display = "none", r2.pointerEvents = "none", r2.position = "absolute", r2.top = "0", this.element.shadowRoot.querySelector(".default").appendChild(o2), this.schemaElement.setAttribute("type", "application/ld+json");
  }
  get context() {
    return this.canvas.getContext("2d");
  }
  getCamera() {
    return null != this.xrCamera ? this.xrCamera : this.camera;
  }
  queueRender() {
    this.isDirty = true;
  }
  shouldRender() {
    return this.isDirty;
  }
  hasRendered() {
    this.isDirty = false;
  }
  forceRescale() {
    this.scaleStep = -1, this.queueRender();
  }
  async setObject(e6) {
    this.reset(), this._model = e6, this.target.add(e6), await this.setupScene();
  }
  async setSource(e6, t2 = () => {
  }) {
    if (!e6 || e6 === this.url) return void t2(1);
    if (this.reset(), this.url = e6, null != this.externalRenderer) {
      const e7 = await this.externalRenderer.load(t2);
      return this.boundingSphere.radius = e7.framedRadius, void (this.idealAspect = e7.fieldOfViewAspect);
    }
    let i2;
    null != this.cancelPendingSourceChange && (this.cancelPendingSourceChange(), this.cancelPendingSourceChange = null);
    try {
      i2 = await new Promise(async (i3, n3) => {
        this.cancelPendingSourceChange = () => n3();
        try {
          i3(await this.element[gy].loader.load(e6, this.element, t2));
        } catch (e7) {
          n3(e7);
        }
      });
    } catch (e7) {
      if (null == e7) return;
      throw e7;
    }
    this.cancelPendingSourceChange = null, this.reset(), this.url = e6, this._currentGLTF = i2, null != i2 && (this._model = i2.scene, this.target.add(i2.scene));
    const { animations: n2 } = i2, o2 = /* @__PURE__ */ new Map(), r2 = [];
    for (const e7 of n2) o2.set(e7.name, e7), r2.push(e7.name);
    this.animations = n2, this.animationsByName = o2, this.animationNames = r2, await this.setupScene();
  }
  async setupScene() {
    this.applyTransform(), this.updateBoundingBox(), await this.updateFraming(), this.updateShadow(), this.setShadowIntensity(this.shadowIntensity), this.setGroundedSkybox();
  }
  reset() {
    this.url = null, this.renderCount = 0, this.queueRender(), null != this.shadow && this.shadow.setIntensity(0), this.bakedShadows.clear();
    const { _model: e6 } = this;
    null != e6 && (e6.removeFromParent(), this._model = null);
    const t2 = this._currentGLTF;
    null != t2 && (t2.dispose(), this._currentGLTF = null), null != this.currentAnimationAction && (this.currentAnimationAction.stop(), this.currentAnimationAction = null), this.mixer.stopAllAction(), this.mixer.uncacheRoot(this);
  }
  dispose() {
    this.reset(), null != this.shadow && (this.shadow.dispose(), this.shadow = null), this.element[tb] = null, this.element[ib] = null, this.element[nb] = null;
  }
  get currentGLTF() {
    return this._currentGLTF;
  }
  setSize(e6, t2) {
    if (this.width !== e6 || this.height !== t2) {
      if (this.width = Math.max(e6, 1), this.height = Math.max(t2, 1), this.annotationRenderer.setSize(e6, t2), this.aspect = this.width / this.height, null != this.externalRenderer) {
        const i2 = window.devicePixelRatio;
        this.externalRenderer.resize(e6 * i2, t2 * i2);
      }
      this.queueRender();
    }
  }
  markBakedShadow(e6) {
    e6.userData.noHit = true, this.bakedShadows.add(e6);
  }
  unmarkBakedShadow(e6) {
    e6.userData.noHit = false, e6.visible = true, this.bakedShadows.delete(e6), this.boundingBox.expandByObject(e6);
  }
  findBakedShadows(e6) {
    const t2 = new Cn();
    e6.traverse((e7) => {
      const i2 = e7;
      if (!i2.material) return;
      if (!i2.material.transparent) return;
      t2.setFromObject(i2);
      const n2 = t2.getSize(wb), o2 = Math.min(n2.x, n2.y, n2.z);
      Math.max(n2.x, n2.y, n2.z) < 100 * o2 || this.markBakedShadow(i2);
    });
  }
  checkBakedShadows() {
    const { min: e6, max: t2 } = this.boundingBox, i2 = new Cn();
    this.boundingBox.getSize(this.size);
    for (const n2 of this.bakedShadows) i2.setFromObject(n2), i2.min.y < e6.y + this.size.y / 100 && i2.min.x <= e6.x && i2.max.x >= t2.x && i2.min.z <= e6.z && i2.max.z >= t2.z || i2.min.z < e6.z + this.size.z / 100 && i2.min.x <= e6.x && i2.max.x >= t2.x && i2.min.y <= e6.y && i2.max.y >= t2.y || this.unmarkBakedShadow(n2);
  }
  applyTransform() {
    const { model: e6 } = this;
    if (null == e6) return;
    const t2 = mg(this.element.orientation)[0].terms, i2 = Tg(t2[0]).number, n2 = Tg(t2[1]).number, o2 = Tg(t2[2]).number;
    e6.quaternion.setFromEuler(new ao(n2, o2, i2, "YXZ"));
    const r2 = mg(this.element.scale)[0].terms;
    e6.scale.set(r2[0].number, r2[1].number, r2[2].number);
  }
  updateBoundingBox() {
    const { model: e6 } = this;
    if (null == e6) return;
    this.target.remove(e6), this.findBakedShadows(e6);
    const t2 = (e7, t3) => e7.expandByPoint(t3);
    this.setBakedShadowVisibility(false), this.boundingBox = n_(e6, t2, new Cn()), this.boundingBox.isEmpty() && (this.setBakedShadowVisibility(true), this.bakedShadows.forEach((e7) => this.unmarkBakedShadow(e7)), this.boundingBox = n_(e6, t2, new Cn())), this.checkBakedShadows(), this.setBakedShadowVisibility(), this.boundingBox.getSize(this.size), this.target.add(e6);
  }
  async updateFraming() {
    const { model: e6 } = this;
    if (null == e6) return;
    this.target.remove(e6), this.setBakedShadowVisibility(false);
    const { center: t2 } = this.boundingSphere;
    this.element.requestUpdate("cameraTarget"), await this.element.updateComplete, t2.copy(this.getTarget());
    this.boundingSphere.radius = Math.sqrt(n_(e6, (e7, i2) => Math.max(e7, t2.distanceToSquared(i2)), 0));
    this.idealAspect = n_(e6, (e7, i2) => {
      i2.sub(t2);
      const n2 = Math.sqrt(i2.x * i2.x + i2.z * i2.z);
      return Math.max(e7, n2 / (this.idealCameraDistance() - Math.abs(i2.y)));
    }, 0) / Math.tan(this.framedFoVDeg / 2 * Math.PI / 180), this.setBakedShadowVisibility(), this.target.add(e6);
  }
  setBakedShadowVisibility(e6 = this.shadowIntensity <= 0) {
    for (const t2 of this.bakedShadows) t2.visible = e6;
  }
  idealCameraDistance() {
    const e6 = this.framedFoVDeg / 2 * Math.PI / 180;
    return this.boundingSphere.radius / Math.sin(e6);
  }
  adjustedFoV(e6) {
    const t2 = Math.tan(e6 / 2 * Math.PI / 180) * Math.max(1, this.idealAspect / this.aspect);
    return 2 * Math.atan(t2) * 180 / Math.PI;
  }
  getNDC(e6, t2) {
    if (null != this.xrCamera) xb.set(e6 / window.screen.width, t2 / window.screen.height);
    else {
      const i2 = this.element.getBoundingClientRect();
      xb.set((e6 - i2.x) / this.width, (t2 - i2.y) / this.height);
    }
    return xb.multiplyScalar(2).subScalar(1), xb.y *= -1, xb;
  }
  getSize() {
    return { width: this.width, height: this.height };
  }
  setEnvironmentAndSkybox(e6, t2) {
    this.element[gy].arRenderer.presentedScene !== this && (this.environment = e6, this.setBackground(t2), this.queueRender());
  }
  setBackground(e6) {
    this.groundedSkybox.map = e6, this.groundedSkybox.isUsable() ? (this.target.add(this.groundedSkybox), this.background = null) : (this.target.remove(this.groundedSkybox), this.background = e6);
  }
  farRadius() {
    return this.boundingSphere.radius * (null != this.groundedSkybox.parent ? 10 : 1);
  }
  setGroundedSkybox() {
    const e6 = mg(this.element.skyboxHeight)[0].terms[0], t2 = Tg(e6).number, i2 = 10 * this.boundingSphere.radius;
    this.groundedSkybox.updateGeometry(t2, i2), this.groundedSkybox.position.y = t2 - (this.shadow ? 2 * this.shadow.gap() : 0), this.setBackground(this.groundedSkybox.map);
  }
  setTarget(e6, t2, i2) {
    this.goalTarget.set(-e6, -t2, -i2);
  }
  setTargetDamperDecayTime(e6) {
    this.targetDamperX.setDecayTime(e6), this.targetDamperY.setDecayTime(e6), this.targetDamperZ.setDecayTime(e6);
  }
  getTarget() {
    return this.goalTarget.clone().multiplyScalar(-1);
  }
  getDynamicTarget() {
    return this.target.position.clone().multiplyScalar(-1);
  }
  jumpToGoal() {
    this.updateTarget(1e4);
  }
  updateTarget(e6) {
    const t2 = this.goalTarget, i2 = this.target.position;
    if (t2.equals(i2)) return false;
    {
      const n2 = this.boundingSphere.radius / 10;
      let { x: o2, y: r2, z: s2 } = i2;
      return o2 = this.targetDamperX.update(o2, t2.x, e6, n2), r2 = this.targetDamperY.update(r2, t2.y, e6, n2), s2 = this.targetDamperZ.update(s2, t2.z, e6, n2), this.groundedSkybox.position.x = -o2, this.groundedSkybox.position.z = -s2, this.target.position.set(o2, r2, s2), this.target.updateMatrixWorld(), this.queueRender(), true;
    }
  }
  pointTowards(e6, t2) {
    const { x: i2, z: n2 } = this.position;
    this.yaw = Math.atan2(e6 - i2, t2 - n2);
  }
  get model() {
    return this._model;
  }
  set yaw(e6) {
    this.pivot.rotation.y = e6, this.groundedSkybox.rotation.y = -e6, this.queueRender();
  }
  get yaw() {
    return this.pivot.rotation.y;
  }
  set animationTime(e6) {
    this.mixer.setTime(e6), this.queueShadowRender();
  }
  get animationTime() {
    if (null != this.currentAnimationAction) {
      const e6 = Math.max(this.currentAnimationAction._loopCount, 0);
      return this.currentAnimationAction.loop !== oi || 1 & ~e6 ? this.currentAnimationAction.time : this.duration - this.currentAnimationAction.time;
    }
    return 0;
  }
  set animationTimeScale(e6) {
    this.mixer.timeScale = e6;
  }
  get animationTimeScale() {
    return this.mixer.timeScale;
  }
  get duration() {
    return null != this.currentAnimationAction && this.currentAnimationAction.getClip() ? this.currentAnimationAction.getClip().duration : 0;
  }
  get hasActiveAnimation() {
    return null != this.currentAnimationAction;
  }
  playAnimation(e6 = null, t2 = 0, i2 = 2201, n2 = 1 / 0) {
    if (null == this._currentGLTF) return;
    const { animations: o2 } = this;
    if (null == o2 || 0 === o2.length) return;
    let r2 = null;
    if (null != e6 && (r2 = this.animationsByName.get(e6), null == r2)) {
      const t3 = parseInt(e6);
      !isNaN(t3) && t3 >= 0 && t3 < o2.length && (r2 = o2[t3]);
    }
    null == r2 && (r2 = o2[0]);
    try {
      const { currentAnimationAction: e7 } = this, o3 = this.mixer.clipAction(r2, this);
      this.currentAnimationAction = o3, this.element.paused ? this.mixer.stopAllAction() : (o3.paused = false, null != e7 && o3 !== e7 ? o3.crossFadeFrom(e7, t2, false) : this.animationTimeScale > 0 && this.animationTime == this.duration && (this.animationTime = 0)), o3.setLoop(i2, n2), o3.enabled = true, o3.clampWhenFinished = true, o3.play();
    } catch (e7) {
      console.error(e7);
    }
  }
  stopAnimation() {
    this.currentAnimationAction = null, this.mixer.stopAllAction();
  }
  updateAnimation(e6) {
    this.mixer.update(e6), this.queueShadowRender();
  }
  subscribeMixerEvent(e6, t2) {
    this.mixer.addEventListener(e6, t2);
  }
  updateShadow() {
    const e6 = this.shadow;
    if (null != e6) {
      const t2 = "wall" === this.element.arPlacement ? "back" : "bottom";
      e6.setScene(this, this.shadowSoftness, t2), e6.needsUpdate = true;
    }
  }
  renderShadow(e6) {
    const t2 = this.shadow;
    null != t2 && 1 == t2.needsUpdate && (t2.render(e6, this), t2.needsUpdate = false);
  }
  queueShadowRender() {
    null != this.shadow && (this.shadow.needsUpdate = true);
  }
  setShadowIntensity(e6) {
    if (this.shadowIntensity = e6, null != this._currentGLTF && (this.setBakedShadowVisibility(), !(e6 <= 0 && null == this.shadow))) {
      if (null == this.shadow) {
        const e7 = "wall" === this.element.arPlacement ? "back" : "bottom";
        this.shadow = new fb(this, this.shadowSoftness, e7);
      }
      this.shadow.setIntensity(e6);
    }
  }
  setShadowSoftness(e6) {
    this.shadowSoftness = e6;
    const t2 = this.shadow;
    null != t2 && t2.setSoftness(e6);
  }
  setShadowOffset(e6) {
    const t2 = this.shadow;
    null != t2 && t2.setOffset(e6);
  }
  getHit(e6 = this) {
    return yb.intersectObject(e6, true).find((e7) => e7.object.visible && !e7.object.userData.noHit);
  }
  hitFromController(e6, t2 = this) {
    return yb.setFromXRController(e6), this.getHit(t2);
  }
  hitFromPoint(e6, t2 = this) {
    return yb.setFromCamera(e6, this.getCamera()), this.getHit(t2);
  }
  positionAndNormalFromPoint(e6, t2 = this) {
    var i2;
    const n2 = this.hitFromPoint(e6, t2);
    if (null == n2) return null;
    return { position: n2.point, normal: null != n2.face ? n2.face.normal.clone().applyNormalMatrix(new Wi().getNormalMatrix(n2.object.matrixWorld)) : yb.ray.direction.clone().multiplyScalar(-1), uv: null !== (i2 = n2.uv) && void 0 !== i2 ? i2 : null };
  }
  surfaceFromPoint(e6, t2 = this) {
    const i2 = this.element.model;
    if (null == i2) return null;
    const n2 = this.hitFromPoint(e6, t2);
    if (null == n2 || null == n2.face) return null;
    const o2 = i2[$A](n2), { meshes: r2, primitives: s2 } = o2.mesh.userData.associations, a2 = new yn(), l2 = new yn(), c2 = new yn(), { a: h2, b: u2, c: d2 } = n2.face, p2 = n2.object;
    p2.getVertexPosition(h2, a2), p2.getVertexPosition(u2, l2), p2.getVertexPosition(d2, c2);
    const _2 = new Uo(a2, l2, c2), g2 = new yn();
    return _2.getBarycoord(p2.worldToLocal(n2.point), g2), `${r2} ${s2} ${h2} ${u2} ${d2} ${g2.x.toFixed(3)} ${g2.y.toFixed(3)} ${g2.z.toFixed(3)}`;
  }
  addHotspot(e6) {
    this.target.add(e6), this.annotationRenderer.domElement.appendChild(e6.element), this.updateSurfaceHotspot(e6);
  }
  removeHotspot(e6) {
    this.target.remove(e6);
  }
  forHotspots(e6) {
    const { children: t2 } = this.target;
    for (let i2 = 0, n2 = t2.length; i2 < n2; i2++) {
      const n3 = t2[i2];
      n3 instanceof pb && e6(n3);
    }
  }
  updateSurfaceHotspot(e6) {
    if (null == e6.surface || null == this.element.model) return;
    const t2 = mg(e6.surface)[0].terms;
    if (8 != t2.length) return void console.warn(e6.surface + " does not have exactly 8 numbers.");
    const i2 = this.element.model[WA](t2[0].number, t2[1].number);
    if (null == i2) return void console.warn(e6.surface + " does not match a node/primitive in this glTF! Skipping this hotspot.");
    const n2 = i2.mesh.geometry.attributes.position.count, o2 = new yn(t2[2].number, t2[3].number, t2[4].number);
    if (o2.x >= n2 || o2.y >= n2 || o2.z >= n2) return void console.warn(e6.surface + " vertex indices out of range in this glTF! Skipping this hotspot.");
    const r2 = new yn(t2[5].number, t2[6].number, t2[7].number);
    e6.mesh = i2.mesh, e6.tri = o2, e6.bary = r2, e6.updateSurface();
  }
  animateSurfaceHotspots() {
    this.element.paused || this.forHotspots((e6) => {
      e6.updateSurface();
    });
  }
  updateHotspotsVisibility(e6) {
    this.forHotspots((t2) => {
      vb.copy(e6), Ab.setFromMatrixPosition(t2.matrixWorld), vb.sub(Ab), bb.copy(t2.normal).transformDirection(this.target.matrixWorld), vb.dot(bb) < 0 ? t2.hide() : t2.show();
    });
  }
  orientHotspots(e6) {
    this.forHotspots((t2) => {
      t2.orient(e6);
    });
  }
  setHotspotsVisibility(e6) {
    this.forHotspots((t2) => {
      t2.visible = e6;
    });
  }
  updateSchema(e6) {
    var t2;
    const { schemaElement: i2, element: n2 } = this, { alt: o2, poster: r2, iosSrc: s2 } = n2;
    if (null != e6) {
      const n3 = [{ "@type": "MediaObject", contentUrl: e6, encodingFormat: "gltf" === (null === (t2 = e6.split(".").pop()) || void 0 === t2 ? void 0 : t2.toLowerCase()) ? "model/gltf+json" : "model/gltf-binary" }];
      s2 && n3.push({ "@type": "MediaObject", contentUrl: s2, encodingFormat: "model/vnd.usdz+zip" });
      const a2 = { "@context": "http://schema.org/", "@type": "3DModel", image: null != r2 ? r2 : void 0, name: null != o2 ? o2 : void 0, encoding: n3 };
      i2.textContent = JSON.stringify(a2), document.head.appendChild(i2);
    } else null != i2.parentElement && i2.parentElement.removeChild(i2);
  }
}
class Sb extends EventTarget {
  constructor() {
    super(...arguments), this.ongoingActivities = /* @__PURE__ */ new Set(), this.totalProgress = 0;
  }
  get ongoingActivityCount() {
    return this.ongoingActivities.size;
  }
  beginActivity(e6) {
    const t2 = { progress: 0, completed: false };
    return this.ongoingActivities.add(t2), 1 === this.ongoingActivityCount && this.announceTotalProgress(t2, 0, e6), (i2) => {
      let n2;
      return n2 = Math.max(Du(i2, 0, 1), t2.progress), n2 !== t2.progress && this.announceTotalProgress(t2, n2, e6), t2.progress;
    };
  }
  announceTotalProgress(e6, t2, i2) {
    let n2 = 0, o2 = 0;
    1 == t2 && (e6.completed = true);
    for (const e7 of this.ongoingActivities) {
      const { progress: t3 } = e7;
      n2 += 1 - t3, e7.completed && o2++;
    }
    const r2 = e6.progress;
    e6.progress = t2, this.totalProgress += (t2 - r2) * (1 - this.totalProgress) / n2;
    const s2 = o2 === this.ongoingActivityCount ? 1 : this.totalProgress;
    this.dispatchEvent(new CustomEvent("progress", { detail: { totalProgress: s2, reason: i2 } })), o2 === this.ongoingActivityCount && (this.totalProgress = 0, this.ongoingActivities.clear());
  }
}
var Eb, Tb, Ib, Mb, Bb, Rb, kb, Pb, Db, Lb, Fb, Nb, Ob, Ub = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const zb = document.createElement("canvas"), Hb = Symbol("fallbackResizeHandler"), Qb = Symbol("defaultAriaLabel"), Vb = Symbol("resizeObserver"), Gb = Symbol("clearModelTimeout"), qb = Symbol("onContextLost"), $b = Symbol("loaded"), Wb = Symbol("status"), jb = Symbol("onFocus"), Xb = Symbol("onBlur"), Yb = Symbol("updateSize"), Kb = Symbol("intersectionObserver"), Zb = Symbol("isElementInViewport"), Jb = Symbol("announceModelVisibility"), ey = Symbol("ariaLabel"), ty = Symbol("altDefaulted"), iy = Symbol("statusElement"), ny = Symbol("updateStatus"), oy = Symbol("loadedTime"), ry = Symbol("updateSource"), sy = Symbol("markLoaded"), ay = Symbol("container"), ly = Symbol("input"), cy = Symbol("canvas"), hy = Symbol("scene"), uy = Symbol("needsRender"), dy = Symbol("tick"), py = Symbol("onModelLoad"), _y = Symbol("onResize"), gy = Symbol("renderer"), my = Symbol("progressTracker"), fy = Symbol("getLoaded"), vy = Symbol("getModelIsVisible"), Ay = Symbol("shouldAttemptPreload"), by = (e6) => ({ x: e6.x, y: e6.y, z: e6.z, toString() {
  return `${this.x}m ${this.y}m ${this.z}m`;
} }), yy = (e6) => ({ u: e6.x, v: e6.y, toString() {
  return `${this.u} ${this.v}`;
} });
class wy extends m {
  constructor() {
    super(), this.alt = null, this.src = null, this.withCredentials = false, this.generateSchema = false, this[Eb] = false, this[Tb] = false, this[Ib] = 0, this[Mb] = "", this[Bb] = null, this[Rb] = Pu(() => {
      const e7 = this.getBoundingClientRect();
      this[Yb](e7);
    }, 50), this[kb] = Pu((e7) => {
      const t3 = this.modelIsVisible;
      t3 !== e7 && this.dispatchEvent(new CustomEvent("model-visibility", { detail: { visible: t3 } }));
    }, 0), this[Pb] = null, this[Db] = null, this[Lb] = new Sb(), this[Fb] = () => {
      this[iy].textContent = this[Wb];
    }, this[Nb] = () => {
      this[iy].textContent = "";
    }, this[Ob] = (e7) => {
      this.dispatchEvent(new CustomEvent("error", { detail: { type: "webglcontextlost", sourceError: e7.sourceEvent } }));
    }, this.attachShadow({ mode: "open" });
    const e6 = this.shadowRoot;
    let t2, i2;
    if (((e7) => {
      re(Gu, e7);
    })(e6), this[ay] = e6.querySelector(".container"), this[ly] = e6.querySelector(".userInput"), this[cy] = e6.querySelector("canvas"), this[iy] = e6.querySelector("#status"), this[Qb] = this[ly].getAttribute("aria-label"), this.isConnected) {
      const e7 = this.getBoundingClientRect();
      t2 = e7.width, i2 = e7.height;
    } else t2 = 300, i2 = 150;
    this[hy] = new Cb({ canvas: this[cy], element: this, width: t2, height: i2 }), Promise.resolve().then(() => {
      this[Yb](this.getBoundingClientRect());
    }), bu && (this[Vb] = new ResizeObserver((e7) => {
      if (!this[gy].isPresenting) for (let t3 of e7) t3.target === this && this[Yb](t3.contentRect);
    })), yu ? this[Kb] = new IntersectionObserver((e7) => {
      for (let t3 of e7) if (t3.target === this) {
        const e8 = this.modelIsVisible;
        this[Zb] = t3.isIntersecting, this[Jb](e8), this[Zb] && !this.loaded && this[ry]();
      }
    }, { root: null, rootMargin: "0px", threshold: 1e-5 }) : this[Zb] = true;
  }
  static get is() {
    return "model-viewer";
  }
  static set modelCacheSize(e6) {
    Xp[Wp].evictionThreshold = e6;
  }
  static get modelCacheSize() {
    return Xp[Wp].evictionThreshold;
  }
  static set minimumRenderScale(e6) {
    e6 > 1 && console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."), e6 <= 0 && console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."), Av.singleton.minScale = e6;
  }
  static get minimumRenderScale() {
    return Av.singleton.minScale;
  }
  get loaded() {
    return this[fy]();
  }
  get [(Eb = Zb, Tb = $b, Ib = oy, Mb = Wb, Bb = Gb, Rb = Hb, kb = Jb, Pb = Vb, Db = Kb, Lb = my, gy)]() {
    return Av.singleton;
  }
  get modelIsVisible() {
    return this[vy]();
  }
  connectedCallback() {
    super.connectedCallback && super.connectedCallback(), bu ? this[Vb].observe(this) : self.addEventListener("resize", this[Hb]), yu && this[Kb].observe(this), this.addEventListener("focus", this[jb]), this.addEventListener("blur", this[Xb]);
    const e6 = this[gy];
    e6.addEventListener("contextlost", this[qb]), e6.registerScene(this[hy]), null != this[Gb] && (self.clearTimeout(this[Gb]), this[Gb] = null, this.requestUpdate("src", null));
  }
  disconnectedCallback() {
    super.disconnectedCallback && super.disconnectedCallback(), bu ? this[Vb].unobserve(this) : self.removeEventListener("resize", this[Hb]), yu && this[Kb].unobserve(this), this.removeEventListener("focus", this[jb]), this.removeEventListener("blur", this[Xb]);
    const e6 = this[gy];
    e6.removeEventListener("contextlost", this[qb]), e6.unregisterScene(this[hy]), this[Gb] = self.setTimeout(() => {
      this[hy].dispose(), this[Gb] = null;
    }, 10);
  }
  updated(e6) {
    super.updated(e6), e6.has("src") && (null == this.src ? (this[$b] = false, this[oy] = 0, this[hy].reset()) : this.src !== this[hy].url && (this[$b] = false, this[oy] = 0, this[ry]())), e6.has("alt") && this[ly].setAttribute("aria-label", this[ey]), e6.has("generateSchema") && (this.generateSchema ? this[hy].updateSchema(this.src) : this[hy].updateSchema(null));
  }
  toDataURL(e6, t2) {
    return this[gy].displayCanvas(this[hy]).toDataURL(e6, t2);
  }
  async toBlob(e6) {
    const t2 = e6 ? e6.mimeType : void 0, i2 = e6 ? e6.qualityArgument : void 0, n2 = e6 ? e6.idealAspect : void 0, { width: o2, height: r2, idealAspect: s2, aspect: a2 } = this[hy], { dpr: l2, scaleFactor: c2 } = this[gy];
    let h2 = o2 * c2 * l2, u2 = r2 * c2 * l2, d2 = 0, p2 = 0;
    if (true === n2) if (s2 > a2) {
      const e7 = u2;
      u2 = Math.round(h2 / s2), p2 = (e7 - u2) / 2;
    } else {
      const e7 = h2;
      h2 = Math.round(u2 * s2), d2 = (e7 - h2) / 2;
    }
    zb.width = h2, zb.height = u2;
    try {
      return new Promise(async (e7, n3) => {
        zb.getContext("2d").drawImage(this[gy].displayCanvas(this[hy]), d2, p2, h2, u2, 0, 0, h2, u2), zb.toBlob((t3) => {
          if (!t3) return n3(new Error("Unable to retrieve canvas blob"));
          e7(t3);
        }, t2, i2);
      });
    } finally {
      this[Yb]({ width: o2, height: r2 });
    }
  }
  registerEffectComposer(e6) {
    e6.setRenderer(this[gy].threeRenderer), e6.setMainCamera(this[hy].getCamera()), e6.setMainScene(this[hy]), this[hy].effectRenderer = e6;
  }
  unregisterEffectComposer() {
    this[hy].effectRenderer = null;
  }
  registerRenderer(e6) {
    this[hy].externalRenderer = e6;
  }
  unregisterRenderer() {
    this[hy].externalRenderer = null;
  }
  get [ey]() {
    return this[ty];
  }
  get [ty]() {
    return null == this.alt || "null" === this.alt ? this[Qb] : this.alt;
  }
  [fy]() {
    return this[$b];
  }
  [vy]() {
    return this.loaded && this[Zb];
  }
  [Ay]() {
    return !!this.src && this[Zb];
  }
  [Yb]({ width: e6, height: t2 }) {
    0 !== e6 && 0 !== t2 && (this[ay].style.width = `${e6}px`, this[ay].style.height = `${t2}px`, this[_y]({ width: e6, height: t2 }));
  }
  [dy](e6, t2) {
    var i2;
    null === (i2 = this[hy].effectRenderer) || void 0 === i2 || i2.beforeRender(e6, t2);
  }
  [sy]() {
    this[$b] || (this[$b] = true, this[oy] = performance.now());
  }
  [uy]() {
    this[hy].queueRender();
  }
  [py]() {
  }
  [ny](e6) {
    this[Wb] = e6;
    const t2 = this.getRootNode();
    null != t2 && t2.activeElement === this && this[iy].textContent != e6 && (this[iy].textContent = e6);
  }
  [(Fb = jb, Nb = Xb, _y)](e6) {
    this[hy].setSize(e6.width, e6.height);
  }
  async [(Ob = qb, ry)]() {
    const e6 = this[hy];
    if (this.loaded || !this[Ay]() || this.src === e6.url) return;
    this.generateSchema && e6.updateSchema(this.src), this[ny]("Loading"), e6.stopAnimation();
    const t2 = this[my].beginActivity("model-load"), i2 = this.src;
    try {
      const n2 = e6.setSource(i2, (e7) => t2(0.95 * Du(e7, 0, 1))), o2 = this[Uu]();
      await Promise.all([n2, o2]), this[sy](), this[py](), this.updateComplete.then(() => {
        this.dispatchEvent(new CustomEvent("before-render"));
      }), await new Promise((e7) => {
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            this.dispatchEvent(new CustomEvent("load", { detail: { url: i2 } })), e7();
          });
        });
      });
    } catch (e7) {
      this.dispatchEvent(new CustomEvent("error", { detail: { type: "loadfailure", sourceError: e7 } }));
    } finally {
      t2(1);
    }
  }
}
Ub([de({ type: String })], wy.prototype, "alt", void 0), Ub([de({ type: String })], wy.prototype, "src", void 0), Ub([de({ type: Boolean, attribute: "with-credentials" })], wy.prototype, "withCredentials", void 0), Ub([de({ type: Boolean, attribute: "generate-schema" })], wy.prototype, "generateSchema", void 0);
var xy = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const Cy = Symbol("changeAnimation"), Sy = Symbol("paused"), Ey = { repetitions: 1 / 0, pingpong: false }, Ty = Symbol("hotspotMap"), Iy = Symbol("mutationCallback"), My = Symbol("observer"), By = Symbol("addHotspot"), Ry = Symbol("removeHotspot"), ky = new Kn();
var Py = Uint8Array, Dy = Uint16Array, Ly = Int32Array, Fy = new Py([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]), Ny = new Py([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]), Oy = new Py([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), Uy = function(e6, t2) {
  for (var i2 = new Dy(31), n2 = 0; n2 < 31; ++n2) i2[n2] = t2 += 1 << e6[n2 - 1];
  var o2 = new Ly(i2[30]);
  for (n2 = 1; n2 < 30; ++n2) for (var r2 = i2[n2]; r2 < i2[n2 + 1]; ++r2) o2[r2] = r2 - i2[n2] << 5 | n2;
  return { b: i2, r: o2 };
}, zy = Uy(Fy, 2), Hy = zy.b, Qy = zy.r;
Hy[28] = 258, Qy[258] = 28;
for (var Vy = Uy(Ny, 0).r, Gy = new Dy(32768), qy = 0; qy < 32768; ++qy) {
  var $y = (43690 & qy) >> 1 | (21845 & qy) << 1;
  $y = (61680 & ($y = (52428 & $y) >> 2 | (13107 & $y) << 2)) >> 4 | (3855 & $y) << 4, Gy[qy] = ((65280 & $y) >> 8 | (255 & $y) << 8) >> 1;
}
var Wy = function(e6, t2, i2) {
  for (var n2 = e6.length, o2 = 0, r2 = new Dy(t2); o2 < n2; ++o2) e6[o2] && ++r2[e6[o2] - 1];
  var s2, a2 = new Dy(t2);
  for (o2 = 1; o2 < t2; ++o2) a2[o2] = a2[o2 - 1] + r2[o2 - 1] << 1;
  if (i2) {
    s2 = new Dy(1 << t2);
    var l2 = 15 - t2;
    for (o2 = 0; o2 < n2; ++o2) if (e6[o2]) for (var c2 = o2 << 4 | e6[o2], h2 = t2 - e6[o2], u2 = a2[e6[o2] - 1]++ << h2, d2 = u2 | (1 << h2) - 1; u2 <= d2; ++u2) s2[Gy[u2] >> l2] = c2;
  } else for (s2 = new Dy(n2), o2 = 0; o2 < n2; ++o2) e6[o2] && (s2[o2] = Gy[a2[e6[o2] - 1]++] >> 15 - e6[o2]);
  return s2;
}, jy = new Py(288);
for (qy = 0; qy < 144; ++qy) jy[qy] = 8;
for (qy = 144; qy < 256; ++qy) jy[qy] = 9;
for (qy = 256; qy < 280; ++qy) jy[qy] = 7;
for (qy = 280; qy < 288; ++qy) jy[qy] = 8;
var Xy = new Py(32);
for (qy = 0; qy < 32; ++qy) Xy[qy] = 5;
var Yy = Wy(jy, 9, 0), Ky = Wy(Xy, 5, 0), Zy = function(e6) {
  return (e6 + 7) / 8 | 0;
}, Jy = function(e6, t2, i2) {
  return (null == i2 || i2 > e6.length) && (i2 = e6.length), new Py(e6.subarray(t2, i2));
}, ew = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"], tw = function(e6, t2, i2) {
  var n2 = new Error(t2 || ew[e6]);
  if (n2.code = e6, Error.captureStackTrace && Error.captureStackTrace(n2, tw), !i2) throw n2;
  return n2;
}, iw = function(e6, t2, i2) {
  i2 <<= 7 & t2;
  var n2 = t2 / 8 | 0;
  e6[n2] |= i2, e6[n2 + 1] |= i2 >> 8;
}, nw = function(e6, t2, i2) {
  i2 <<= 7 & t2;
  var n2 = t2 / 8 | 0;
  e6[n2] |= i2, e6[n2 + 1] |= i2 >> 8, e6[n2 + 2] |= i2 >> 16;
}, ow = function(e6, t2) {
  for (var i2 = [], n2 = 0; n2 < e6.length; ++n2) e6[n2] && i2.push({ s: n2, f: e6[n2] });
  var o2 = i2.length, r2 = i2.slice();
  if (!o2) return { t: uw, l: 0 };
  if (1 == o2) {
    var s2 = new Py(i2[0].s + 1);
    return s2[i2[0].s] = 1, { t: s2, l: 1 };
  }
  i2.sort(function(e7, t3) {
    return e7.f - t3.f;
  }), i2.push({ s: -1, f: 25001 });
  var a2 = i2[0], l2 = i2[1], c2 = 0, h2 = 1, u2 = 2;
  for (i2[0] = { s: -1, f: a2.f + l2.f, l: a2, r: l2 }; h2 != o2 - 1; ) a2 = i2[i2[c2].f < i2[u2].f ? c2++ : u2++], l2 = i2[c2 != h2 && i2[c2].f < i2[u2].f ? c2++ : u2++], i2[h2++] = { s: -1, f: a2.f + l2.f, l: a2, r: l2 };
  var d2 = r2[0].s;
  for (n2 = 1; n2 < o2; ++n2) r2[n2].s > d2 && (d2 = r2[n2].s);
  var p2 = new Dy(d2 + 1), _2 = rw(i2[h2 - 1], p2, 0);
  if (_2 > t2) {
    n2 = 0;
    var g2 = 0, m2 = _2 - t2, f2 = 1 << m2;
    for (r2.sort(function(e7, t3) {
      return p2[t3.s] - p2[e7.s] || e7.f - t3.f;
    }); n2 < o2; ++n2) {
      var v2 = r2[n2].s;
      if (!(p2[v2] > t2)) break;
      g2 += f2 - (1 << _2 - p2[v2]), p2[v2] = t2;
    }
    for (g2 >>= m2; g2 > 0; ) {
      var A2 = r2[n2].s;
      p2[A2] < t2 ? g2 -= 1 << t2 - p2[A2]++ - 1 : ++n2;
    }
    for (; n2 >= 0 && g2; --n2) {
      var b2 = r2[n2].s;
      p2[b2] == t2 && (--p2[b2], ++g2);
    }
    _2 = t2;
  }
  return { t: new Py(p2), l: _2 };
}, rw = function(e6, t2, i2) {
  return -1 == e6.s ? Math.max(rw(e6.l, t2, i2 + 1), rw(e6.r, t2, i2 + 1)) : t2[e6.s] = i2;
}, sw = function(e6) {
  for (var t2 = e6.length; t2 && !e6[--t2]; ) ;
  for (var i2 = new Dy(++t2), n2 = 0, o2 = e6[0], r2 = 1, s2 = function(e7) {
    i2[n2++] = e7;
  }, a2 = 1; a2 <= t2; ++a2) if (e6[a2] == o2 && a2 != t2) ++r2;
  else {
    if (!o2 && r2 > 2) {
      for (; r2 > 138; r2 -= 138) s2(32754);
      r2 > 2 && (s2(r2 > 10 ? r2 - 11 << 5 | 28690 : r2 - 3 << 5 | 12305), r2 = 0);
    } else if (r2 > 3) {
      for (s2(o2), --r2; r2 > 6; r2 -= 6) s2(8304);
      r2 > 2 && (s2(r2 - 3 << 5 | 8208), r2 = 0);
    }
    for (; r2--; ) s2(o2);
    r2 = 1, o2 = e6[a2];
  }
  return { c: i2.subarray(0, n2), n: t2 };
}, aw = function(e6, t2) {
  for (var i2 = 0, n2 = 0; n2 < t2.length; ++n2) i2 += e6[n2] * t2[n2];
  return i2;
}, lw = function(e6, t2, i2) {
  var n2 = i2.length, o2 = Zy(t2 + 2);
  e6[o2] = 255 & n2, e6[o2 + 1] = n2 >> 8, e6[o2 + 2] = 255 ^ e6[o2], e6[o2 + 3] = 255 ^ e6[o2 + 1];
  for (var r2 = 0; r2 < n2; ++r2) e6[o2 + r2 + 4] = i2[r2];
  return 8 * (o2 + 4 + n2);
}, cw = function(e6, t2, i2, n2, o2, r2, s2, a2, l2, c2, h2) {
  iw(t2, h2++, i2), ++o2[256];
  for (var u2 = ow(o2, 15), d2 = u2.t, p2 = u2.l, _2 = ow(r2, 15), g2 = _2.t, m2 = _2.l, f2 = sw(d2), v2 = f2.c, A2 = f2.n, b2 = sw(g2), y2 = b2.c, w2 = b2.n, x2 = new Dy(19), C2 = 0; C2 < v2.length; ++C2) ++x2[31 & v2[C2]];
  for (C2 = 0; C2 < y2.length; ++C2) ++x2[31 & y2[C2]];
  for (var S2 = ow(x2, 7), E2 = S2.t, T2 = S2.l, I2 = 19; I2 > 4 && !E2[Oy[I2 - 1]]; --I2) ;
  var M2, B2, R2, k2, P2 = c2 + 5 << 3, D2 = aw(o2, jy) + aw(r2, Xy) + s2, L2 = aw(o2, d2) + aw(r2, g2) + s2 + 14 + 3 * I2 + aw(x2, E2) + 2 * x2[16] + 3 * x2[17] + 7 * x2[18];
  if (l2 >= 0 && P2 <= D2 && P2 <= L2) return lw(t2, h2, e6.subarray(l2, l2 + c2));
  if (iw(t2, h2, 1 + (L2 < D2)), h2 += 2, L2 < D2) {
    M2 = Wy(d2, p2, 0), B2 = d2, R2 = Wy(g2, m2, 0), k2 = g2;
    var F2 = Wy(E2, T2, 0);
    iw(t2, h2, A2 - 257), iw(t2, h2 + 5, w2 - 1), iw(t2, h2 + 10, I2 - 4), h2 += 14;
    for (C2 = 0; C2 < I2; ++C2) iw(t2, h2 + 3 * C2, E2[Oy[C2]]);
    h2 += 3 * I2;
    for (var N2 = [v2, y2], O2 = 0; O2 < 2; ++O2) {
      var U2 = N2[O2];
      for (C2 = 0; C2 < U2.length; ++C2) {
        var z2 = 31 & U2[C2];
        iw(t2, h2, F2[z2]), h2 += E2[z2], z2 > 15 && (iw(t2, h2, U2[C2] >> 5 & 127), h2 += U2[C2] >> 12);
      }
    }
  } else M2 = Yy, B2 = jy, R2 = Ky, k2 = Xy;
  for (C2 = 0; C2 < a2; ++C2) {
    var H2 = n2[C2];
    if (H2 > 255) {
      nw(t2, h2, M2[(z2 = H2 >> 18 & 31) + 257]), h2 += B2[z2 + 257], z2 > 7 && (iw(t2, h2, H2 >> 23 & 31), h2 += Fy[z2]);
      var Q2 = 31 & H2;
      nw(t2, h2, R2[Q2]), h2 += k2[Q2], Q2 > 3 && (nw(t2, h2, H2 >> 5 & 8191), h2 += Ny[Q2]);
    } else nw(t2, h2, M2[H2]), h2 += B2[H2];
  }
  return nw(t2, h2, M2[256]), h2 + B2[256];
}, hw = new Ly([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]), uw = new Py(0), dw = function() {
  for (var e6 = new Int32Array(256), t2 = 0; t2 < 256; ++t2) {
    for (var i2 = t2, n2 = 9; --n2; ) i2 = (1 & i2 && -306674912) ^ i2 >>> 1;
    e6[t2] = i2;
  }
  return e6;
}(), pw = function() {
  var e6 = -1;
  return { p: function(t2) {
    for (var i2 = e6, n2 = 0; n2 < t2.length; ++n2) i2 = dw[255 & i2 ^ t2[n2]] ^ i2 >>> 8;
    e6 = i2;
  }, d: function() {
    return ~e6;
  } };
}, _w = function(e6, t2, i2, n2, o2) {
  if (!o2 && (o2 = { l: 1 }, t2.dictionary)) {
    var r2 = t2.dictionary.subarray(-32768), s2 = new Py(r2.length + e6.length);
    s2.set(r2), s2.set(e6, r2.length), e6 = s2, o2.w = r2.length;
  }
  return function(e7, t3, i3, n3, o3, r3) {
    var s3 = r3.z || e7.length, a2 = new Py(n3 + s3 + 5 * (1 + Math.ceil(s3 / 7e3)) + o3), l2 = a2.subarray(n3, a2.length - o3), c2 = r3.l, h2 = 7 & (r3.r || 0);
    if (t3) {
      h2 && (l2[0] = r3.r >> 3);
      for (var u2 = hw[t3 - 1], d2 = u2 >> 13, p2 = 8191 & u2, _2 = (1 << i3) - 1, g2 = r3.p || new Dy(32768), m2 = r3.h || new Dy(_2 + 1), f2 = Math.ceil(i3 / 3), v2 = 2 * f2, A2 = function(t4) {
        return (e7[t4] ^ e7[t4 + 1] << f2 ^ e7[t4 + 2] << v2) & _2;
      }, b2 = new Ly(25e3), y2 = new Dy(288), w2 = new Dy(32), x2 = 0, C2 = 0, S2 = r3.i || 0, E2 = 0, T2 = r3.w || 0, I2 = 0; S2 + 2 < s3; ++S2) {
        var M2 = A2(S2), B2 = 32767 & S2, R2 = m2[M2];
        if (g2[B2] = R2, m2[M2] = B2, T2 <= S2) {
          var k2 = s3 - S2;
          if ((x2 > 7e3 || E2 > 24576) && (k2 > 423 || !c2)) {
            h2 = cw(e7, l2, 0, b2, y2, w2, C2, E2, I2, S2 - I2, h2), E2 = x2 = C2 = 0, I2 = S2;
            for (var P2 = 0; P2 < 286; ++P2) y2[P2] = 0;
            for (P2 = 0; P2 < 30; ++P2) w2[P2] = 0;
          }
          var D2 = 2, L2 = 0, F2 = p2, N2 = B2 - R2 & 32767;
          if (k2 > 2 && M2 == A2(S2 - N2)) for (var O2 = Math.min(d2, k2) - 1, U2 = Math.min(32767, S2), z2 = Math.min(258, k2); N2 <= U2 && --F2 && B2 != R2; ) {
            if (e7[S2 + D2] == e7[S2 + D2 - N2]) {
              for (var H2 = 0; H2 < z2 && e7[S2 + H2] == e7[S2 + H2 - N2]; ++H2) ;
              if (H2 > D2) {
                if (D2 = H2, L2 = N2, H2 > O2) break;
                var Q2 = Math.min(N2, H2 - 2), V2 = 0;
                for (P2 = 0; P2 < Q2; ++P2) {
                  var G2 = S2 - N2 + P2 & 32767, q2 = G2 - g2[G2] & 32767;
                  q2 > V2 && (V2 = q2, R2 = G2);
                }
              }
            }
            N2 += (B2 = R2) - (R2 = g2[B2]) & 32767;
          }
          if (L2) {
            b2[E2++] = 268435456 | Qy[D2] << 18 | Vy[L2];
            var $2 = 31 & Qy[D2], W2 = 31 & Vy[L2];
            C2 += Fy[$2] + Ny[W2], ++y2[257 + $2], ++w2[W2], T2 = S2 + D2, ++x2;
          } else b2[E2++] = e7[S2], ++y2[e7[S2]];
        }
      }
      for (S2 = Math.max(S2, T2); S2 < s3; ++S2) b2[E2++] = e7[S2], ++y2[e7[S2]];
      h2 = cw(e7, l2, c2, b2, y2, w2, C2, E2, I2, S2 - I2, h2), c2 || (r3.r = 7 & h2 | l2[h2 / 8 | 0] << 3, h2 -= 7, r3.h = m2, r3.p = g2, r3.i = S2, r3.w = T2);
    } else {
      for (S2 = r3.w || 0; S2 < s3 + c2; S2 += 65535) {
        var j2 = S2 + 65535;
        j2 >= s3 && (l2[h2 / 8 | 0] = c2, j2 = s3), h2 = lw(l2, h2 + 1, e7.subarray(S2, j2));
      }
      r3.i = s3;
    }
    return Jy(a2, 0, n3 + Zy(h2) + o3);
  }(e6, null == t2.level ? 6 : t2.level, null == t2.mem ? o2.l ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e6.length)))) : 20 : 12 + t2.mem, i2, n2, o2);
}, gw = function(e6, t2) {
  var i2 = {};
  for (var n2 in e6) i2[n2] = e6[n2];
  for (var n2 in t2) i2[n2] = t2[n2];
  return i2;
}, mw = function(e6, t2, i2) {
  for (; i2; ++t2) e6[t2] = i2, i2 >>>= 8;
};
function fw(e6, t2) {
  return _w(e6, t2 || {}, 0, 0);
}
var vw = function(e6, t2, i2, n2) {
  for (var o2 in e6) {
    var r2 = e6[o2], s2 = t2 + o2, a2 = n2;
    Array.isArray(r2) && (a2 = gw(n2, r2[1]), r2 = r2[0]), r2 instanceof Py ? i2[s2] = [r2, a2] : (i2[s2 += "/"] = [new Py(0), a2], vw(r2, s2, i2, n2));
  }
}, Aw = "undefined" != typeof TextEncoder && new TextEncoder(), bw = "undefined" != typeof TextDecoder && new TextDecoder();
try {
  bw.decode(uw, { stream: true });
} catch (wN2) {
}
function yw(e6, t2) {
  if (Aw) return Aw.encode(e6);
  for (var i2 = e6.length, n2 = new Py(e6.length + (e6.length >> 1)), o2 = 0, r2 = function(e7) {
    n2[o2++] = e7;
  }, s2 = 0; s2 < i2; ++s2) {
    if (o2 + 5 > n2.length) {
      var a2 = new Py(o2 + 8 + (i2 - s2 << 1));
      a2.set(n2), n2 = a2;
    }
    var l2 = e6.charCodeAt(s2);
    l2 < 128 || t2 ? r2(l2) : l2 < 2048 ? (r2(192 | l2 >> 6), r2(128 | 63 & l2)) : l2 > 55295 && l2 < 57344 ? (r2(240 | (l2 = 65536 + (1047552 & l2) | 1023 & e6.charCodeAt(++s2)) >> 18), r2(128 | l2 >> 12 & 63), r2(128 | l2 >> 6 & 63), r2(128 | 63 & l2)) : (r2(224 | l2 >> 12), r2(128 | l2 >> 6 & 63), r2(128 | 63 & l2));
  }
  return Jy(n2, 0, o2);
}
var ww = function(e6) {
  var t2 = 0;
  if (e6) for (var i2 in e6) {
    var n2 = e6[i2].length;
    n2 > 65535 && tw(9), t2 += n2 + 4;
  }
  return t2;
}, xw = function(e6, t2, i2, n2, o2, r2, s2, a2) {
  var l2 = n2.length, c2 = i2.extra, h2 = a2 && a2.length, u2 = ww(c2);
  mw(e6, t2, null != s2 ? 33639248 : 67324752), t2 += 4, null != s2 && (e6[t2++] = 20, e6[t2++] = i2.os), e6[t2] = 20, t2 += 2, e6[t2++] = i2.flag << 1 | (r2 < 0 && 8), e6[t2++] = o2 && 8, e6[t2++] = 255 & i2.compression, e6[t2++] = i2.compression >> 8;
  var d2 = new Date(null == i2.mtime ? Date.now() : i2.mtime), p2 = d2.getFullYear() - 1980;
  if ((p2 < 0 || p2 > 119) && tw(10), mw(e6, t2, p2 << 25 | d2.getMonth() + 1 << 21 | d2.getDate() << 16 | d2.getHours() << 11 | d2.getMinutes() << 5 | d2.getSeconds() >> 1), t2 += 4, -1 != r2 && (mw(e6, t2, i2.crc), mw(e6, t2 + 4, r2 < 0 ? -r2 - 2 : r2), mw(e6, t2 + 8, i2.size)), mw(e6, t2 + 12, l2), mw(e6, t2 + 14, u2), t2 += 16, null != s2 && (mw(e6, t2, h2), mw(e6, t2 + 6, i2.attrs), mw(e6, t2 + 10, s2), t2 += 14), e6.set(n2, t2), t2 += l2, u2) for (var _2 in c2) {
    var g2 = c2[_2], m2 = g2.length;
    mw(e6, t2, +_2), mw(e6, t2 + 2, m2), e6.set(g2, t2 + 4), t2 += 4 + m2;
  }
  return h2 && (e6.set(a2, t2), t2 += h2), t2;
};
function Cw(e6, t2) {
  t2 || (t2 = {});
  var i2 = {}, n2 = [];
  vw(e6, "", i2, t2);
  var o2 = 0, r2 = 0;
  for (var s2 in i2) {
    var a2 = i2[s2], l2 = a2[0], c2 = a2[1], h2 = 0 == c2.level ? 0 : 8, u2 = (x2 = yw(s2)).length, d2 = c2.comment, p2 = d2 && yw(d2), _2 = p2 && p2.length, g2 = ww(c2.extra);
    u2 > 65535 && tw(11);
    var m2 = h2 ? fw(l2, c2) : l2, f2 = m2.length, v2 = pw();
    v2.p(l2), n2.push(gw(c2, { size: l2.length, crc: v2.d(), c: m2, f: x2, m: p2, u: u2 != s2.length || p2 && d2.length != _2, o: o2, compression: h2 })), o2 += 30 + u2 + g2 + f2, r2 += 76 + 2 * (u2 + g2) + (_2 || 0) + f2;
  }
  for (var A2 = new Py(r2 + 22), b2 = o2, y2 = r2 - o2, w2 = 0; w2 < n2.length; ++w2) {
    var x2 = n2[w2];
    xw(A2, x2.o, x2, x2.f, x2.u, x2.c.length);
    var C2 = 30 + x2.f.length + ww(x2.extra);
    A2.set(x2.c, x2.o + C2), xw(A2, o2, x2, x2.f, x2.u, x2.c.length, x2.o, x2.m), o2 += 16 + C2 + (x2.m ? x2.m.length : 0);
  }
  return function(e7, t3, i3, n3, o3) {
    mw(e7, t3, 101010256), mw(e7, t3 + 8, i3), mw(e7, t3 + 10, i3), mw(e7, t3 + 12, n3), mw(e7, t3 + 16, o3);
  }(A2, o2, n2.length, y2, b2), A2;
}
class Sw {
  parse(e6, t2, i2, n2) {
    this.parseAsync(e6, n2).then(t2).catch(i2);
  }
  async parseAsync(e6, t2 = {}) {
    t2 = Object.assign({ ar: { anchoring: { type: "plane" }, planeAnchoring: { alignment: "horizontal" } }, includeAnchoringProperties: true, quickLookCompatible: false, maxTextureSize: 1024 }, t2);
    const i2 = {}, n2 = "model.usda";
    i2[n2] = null;
    let o2 = Iw();
    o2 += function(e7) {
      const t3 = true === e7.includeAnchoringProperties ? `
		token preliminary:anchoring:type = "${e7.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${e7.ar.planeAnchoring.alignment}"
	` : "";
      return `def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{${t3}
`;
    }(t2);
    const r2 = {}, s2 = {};
    e6.traverseVisible((e7) => {
      if (e7.isMesh) {
        const t3 = e7.geometry, n3 = e7.material;
        if (n3.isMeshStandardMaterial) {
          const s3 = "geometries/Geometry_" + t3.id + ".usda";
          if (!(s3 in i2)) {
            const e8 = function(e9) {
              const t4 = function(e10) {
                const t5 = "Geometry", i3 = e10.attributes, n4 = i3.position.count;
                return `
	def Mesh "${t5}"
	{
		int[] faceVertexCounts = [${function(e11) {
                  const t6 = null !== e11.index ? e11.index.count : e11.attributes.position.count;
                  return Array(t6 / 3).fill(3).join(", ");
                }(e10)}]
		int[] faceVertexIndices = [${function(e11) {
                  const t6 = e11.index, i4 = [];
                  if (null !== t6) for (let e12 = 0; e12 < t6.count; e12++) i4.push(t6.getX(e12));
                  else {
                    const t7 = e11.attributes.position.count;
                    for (let e12 = 0; e12 < t7; e12++) i4.push(e12);
                  }
                  return i4.join(", ");
                }(e10)}]
		normal3f[] normals = [${Rw(i3.normal, n4)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${Rw(i3.position, n4)}]
${function(e11) {
                  let t6 = "";
                  for (let i5 = 0; i5 < 4; i5++) {
                    const n5 = i5 > 0 ? i5 : "", o3 = e11["uv" + n5];
                    void 0 !== o3 && (t6 += `
		texCoord2f[] primvars:st${n5} = [${kw(o3)}] (
			interpolation = "vertex"
		)`);
                  }
                  const i4 = e11.color;
                  if (void 0 !== i4) {
                    t6 += `
	color3f[] primvars:displayColor = [${Rw(i4, i4.count)}] (
		interpolation = "vertex"
		)`;
                  }
                  return t6;
                }(i3)}
		uniform token subdivisionScheme = "none"
	}
`;
              }(e9);
              return `
def "Geometry"
{
${t4}
}
`;
            }(t3);
            i2[s3] = function(e9) {
              let t4 = Iw();
              return t4 += e9, yw(t4);
            }(e8);
          }
          n3.uuid in r2 || (r2[n3.uuid] = n3), o2 += function(e8, t4, i3) {
            const n4 = "Object_" + e8.id, o3 = Mw(e8.matrixWorld);
            e8.matrixWorld.determinant() < 0 && console.warn("THREE.USDZExporter: USDZ does not support negative scales", e8);
            return `def Xform "${n4}" (
	prepend references = @./geometries/Geometry_${t4.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${o3}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${i3.id}>
}

`;
          }(e7, t3, n3);
        } else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)", e7);
      } else e7.isCamera && (o2 += function(e8) {
        const t3 = e8.name ? e8.name : "Camera_" + e8.id, i3 = Mw(e8.matrixWorld);
        e8.matrixWorld.determinant() < 0 && console.warn("THREE.USDZExporter: USDZ does not support negative scales", e8);
        return e8.isOrthographicCamera ? `def Camera "${t3}"
		{
			matrix4d xformOp:transform = ${i3}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${e8.near.toPrecision(Tw)}, ${e8.far.toPrecision(Tw)})
			float horizontalAperture = ${(10 * (Math.abs(e8.left) + Math.abs(e8.right))).toPrecision(Tw)}
			float verticalAperture = ${(10 * (Math.abs(e8.top) + Math.abs(e8.bottom))).toPrecision(Tw)}
			token projection = "orthographic"
		}
	
	` : `def Camera "${t3}"
		{
			matrix4d xformOp:transform = ${i3}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${e8.near.toPrecision(Tw)}, ${e8.far.toPrecision(Tw)})
			float focalLength = ${e8.getFocalLength().toPrecision(Tw)}
			float focusDistance = ${e8.focus.toPrecision(Tw)}
			float horizontalAperture = ${e8.getFilmWidth().toPrecision(Tw)}
			token projection = "perspective"
			float verticalAperture = ${e8.getFilmHeight().toPrecision(Tw)}
		}
	
	`;
      }(e7));
    }), o2 += "\n		}\n	}\n}\n\n", o2 += function(e7, t3, i3 = false) {
      const n3 = [];
      for (const o3 in e7) {
        const r3 = e7[o3];
        n3.push(Pw(r3, t3, i3));
      }
      return `def "Materials"
{
${n3.join("")}
}

`;
    }(r2, s2, t2.quickLookCompatible), i2[n2] = yw(o2), o2 = null;
    for (const e7 in s2) {
      let n3 = s2[e7];
      true === n3.isCompressedTexture && (n3 = l_(n3));
      const o3 = Ew(n3.image, n3.flipY, t2.maxTextureSize), r3 = await new Promise((e8) => o3.toBlob(e8, "image/png", 1));
      i2[`textures/Texture_${e7}.png`] = new Uint8Array(await r3.arrayBuffer());
    }
    let a2 = 0;
    for (const e7 in i2) {
      const t3 = i2[e7];
      a2 += 34 + e7.length;
      const n3 = 63 & a2;
      if (4 !== n3) {
        const o3 = new Uint8Array(64 - n3);
        i2[e7] = [t3, { extra: { 12345: o3 } }];
      }
      a2 = t3.length;
    }
    return Cw(i2, { level: 0 });
  }
}
function Ew(e6, t2, i2) {
  if ("undefined" != typeof HTMLImageElement && e6 instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e6 instanceof HTMLCanvasElement || "undefined" != typeof OffscreenCanvas && e6 instanceof OffscreenCanvas || "undefined" != typeof ImageBitmap && e6 instanceof ImageBitmap) {
    const n2 = i2 / Math.max(e6.width, e6.height), o2 = document.createElement("canvas");
    o2.width = e6.width * Math.min(1, n2), o2.height = e6.height * Math.min(1, n2);
    const r2 = o2.getContext("2d");
    return true === t2 && (r2.translate(0, o2.height), r2.scale(1, -1)), r2.drawImage(e6, 0, 0, o2.width, o2.height), o2;
  }
  throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.");
}
const Tw = 7;
function Iw() {
  return '#usda 1.0\n(\n	customLayerData = {\n		string creator = "Three.js USDZExporter"\n	}\n	defaultPrim = "Root"\n	metersPerUnit = 1\n	upAxis = "Y"\n)\n\n';
}
function Mw(e6) {
  const t2 = e6.elements;
  return `( ${Bw(t2, 0)}, ${Bw(t2, 4)}, ${Bw(t2, 8)}, ${Bw(t2, 12)} )`;
}
function Bw(e6, t2) {
  return `(${e6[t2 + 0]}, ${e6[t2 + 1]}, ${e6[t2 + 2]}, ${e6[t2 + 3]})`;
}
function Rw(e6, t2) {
  if (void 0 === e6) return console.warn("USDZExporter: Normals missing."), Array(t2).fill("(0, 0, 0)").join(", ");
  const i2 = [];
  for (let t3 = 0; t3 < e6.count; t3++) {
    const n2 = e6.getX(t3), o2 = e6.getY(t3), r2 = e6.getZ(t3);
    i2.push(`(${n2.toPrecision(Tw)}, ${o2.toPrecision(Tw)}, ${r2.toPrecision(Tw)})`);
  }
  return i2.join(", ");
}
function kw(e6) {
  const t2 = [];
  for (let i2 = 0; i2 < e6.count; i2++) {
    const n2 = e6.getX(i2), o2 = e6.getY(i2);
    t2.push(`(${n2.toPrecision(Tw)}, ${1 - o2.toPrecision(Tw)})`);
  }
  return t2.join(", ");
}
function Pw(e6, t2, i2 = false) {
  const n2 = "			", o2 = [], r2 = [];
  function s2(n3, o3, r3) {
    const s3 = n3.source.id + "_" + n3.flipY;
    t2[s3] = n3;
    const a2 = n3.channel > 0 ? "st" + n3.channel : "st", l2 = { 1e3: "repeat", 1001: "clamp", 1002: "mirror" }, c2 = n3.repeat.clone(), h2 = n3.offset.clone(), u2 = n3.rotation, d2 = Math.sin(u2), p2 = Math.cos(u2);
    return h2.y = 1 - h2.y - c2.y, i2 ? (h2.x = h2.x / c2.x, h2.y = h2.y / c2.y, h2.x += d2 / c2.x, h2.y += p2 - 1) : (h2.x += d2 * c2.x, h2.y += (1 - p2) * c2.y), `
		def Shader "PrimvarReader_${o3}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${a2}"
			float2 outputs:result
		}

		def Shader "Transform2d_${o3}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${e6.id}/PrimvarReader_${o3}.outputs:result>
			float inputs:rotation = ${(u2 * (180 / Math.PI)).toFixed(Tw)}
			float2 inputs:scale = ${Lw(c2)}
			float2 inputs:translation = ${Lw(h2)}
			float2 outputs:result
		}

		def Shader "Texture_${n3.id}_${o3}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${s3}.png@
			float2 inputs:st.connect = </Materials/Material_${e6.id}/Transform2d_${o3}.outputs:result>
			${void 0 !== r3 ? "float4 inputs:scale = " + function(e7) {
      return `(${e7.r}, ${e7.g}, ${e7.b}, 1.0)`;
    }(r3) : ""}
			token inputs:sourceColorSpace = "${n3.colorSpace === di ? "raw" : "sRGB"}"
			token inputs:wrapS = "${l2[n3.wrapS]}"
			token inputs:wrapT = "${l2[n3.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${e6.transparent || e6.alphaTest > 0 ? "float outputs:a" : ""}
		}`;
  }
  return 2 === e6.side && console.warn("THREE.USDZExporter: USDZ does not support double sided materials", e6), null !== e6.map ? (o2.push(`${n2}color3f inputs:diffuseColor.connect = </Materials/Material_${e6.id}/Texture_${e6.map.id}_diffuse.outputs:rgb>`), e6.transparent ? o2.push(`${n2}float inputs:opacity.connect = </Materials/Material_${e6.id}/Texture_${e6.map.id}_diffuse.outputs:a>`) : e6.alphaTest > 0 && (o2.push(`${n2}float inputs:opacity.connect = </Materials/Material_${e6.id}/Texture_${e6.map.id}_diffuse.outputs:a>`), o2.push(`${n2}float inputs:opacityThreshold = ${e6.alphaTest}`)), r2.push(s2(e6.map, "diffuse", e6.color))) : o2.push(`${n2}color3f inputs:diffuseColor = ${Dw(e6.color)}`), null !== e6.emissiveMap ? (o2.push(`${n2}color3f inputs:emissiveColor.connect = </Materials/Material_${e6.id}/Texture_${e6.emissiveMap.id}_emissive.outputs:rgb>`), r2.push(s2(e6.emissiveMap, "emissive", new Go(e6.emissive.r * e6.emissiveIntensity, e6.emissive.g * e6.emissiveIntensity, e6.emissive.b * e6.emissiveIntensity)))) : e6.emissive.getHex() > 0 && o2.push(`${n2}color3f inputs:emissiveColor = ${Dw(e6.emissive)}`), null !== e6.normalMap && (o2.push(`${n2}normal3f inputs:normal.connect = </Materials/Material_${e6.id}/Texture_${e6.normalMap.id}_normal.outputs:rgb>`), r2.push(s2(e6.normalMap, "normal"))), null !== e6.aoMap && (o2.push(`${n2}float inputs:occlusion.connect = </Materials/Material_${e6.id}/Texture_${e6.aoMap.id}_occlusion.outputs:r>`), r2.push(s2(e6.aoMap, "occlusion", new Go(e6.aoMapIntensity, e6.aoMapIntensity, e6.aoMapIntensity)))), null !== e6.roughnessMap ? (o2.push(`${n2}float inputs:roughness.connect = </Materials/Material_${e6.id}/Texture_${e6.roughnessMap.id}_roughness.outputs:g>`), r2.push(s2(e6.roughnessMap, "roughness", new Go(e6.roughness, e6.roughness, e6.roughness)))) : o2.push(`${n2}float inputs:roughness = ${e6.roughness}`), null !== e6.metalnessMap ? (o2.push(`${n2}float inputs:metallic.connect = </Materials/Material_${e6.id}/Texture_${e6.metalnessMap.id}_metallic.outputs:b>`), r2.push(s2(e6.metalnessMap, "metallic", new Go(e6.metalness, e6.metalness, e6.metalness)))) : o2.push(`${n2}float inputs:metallic = ${e6.metalness}`), null !== e6.alphaMap ? (o2.push(`${n2}float inputs:opacity.connect = </Materials/Material_${e6.id}/Texture_${e6.alphaMap.id}_opacity.outputs:r>`), o2.push(`${n2}float inputs:opacityThreshold = 0.0001`), r2.push(s2(e6.alphaMap, "opacity"))) : o2.push(`${n2}float inputs:opacity = ${e6.opacity}`), e6.isMeshPhysicalMaterial && (null !== e6.clearcoatMap ? (o2.push(`${n2}float inputs:clearcoat.connect = </Materials/Material_${e6.id}/Texture_${e6.clearcoatMap.id}_clearcoat.outputs:r>`), r2.push(s2(e6.clearcoatMap, "clearcoat", new Go(e6.clearcoat, e6.clearcoat, e6.clearcoat)))) : o2.push(`${n2}float inputs:clearcoat = ${e6.clearcoat}`), null !== e6.clearcoatRoughnessMap ? (o2.push(`${n2}float inputs:clearcoatRoughness.connect = </Materials/Material_${e6.id}/Texture_${e6.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`), r2.push(s2(e6.clearcoatRoughnessMap, "clearcoatRoughness", new Go(e6.clearcoatRoughness, e6.clearcoatRoughness, e6.clearcoatRoughness)))) : o2.push(`${n2}float inputs:clearcoatRoughness = ${e6.clearcoatRoughness}`), o2.push(`${n2}float inputs:ior = ${e6.ior}`)), `
	def Material "Material_${e6.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${o2.join("\n")}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${e6.id}/PreviewSurface.outputs:surface>

${r2.join("\n")}

	}
`;
}
function Dw(e6) {
  return `(${e6.r}, ${e6.g}, ${e6.b})`;
}
function Lw(e6) {
  return `(${e6.x}, ${e6.y})`;
}
var Fw = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let Nw = false, Ow = false;
const Uw = "#model-viewer-no-ar-fallback", zw = (Hw = ["quick-look", "scene-viewer", "webxr", "none"], (e6) => {
  try {
    const t2 = mg(e6), i2 = (t2.length ? t2[0].terms : []).filter((e7) => e7 && "ident" === e7.type).map((e7) => e7.value).filter((e7) => Hw.indexOf(e7) > -1);
    return new Set(i2);
  } catch (e7) {
  }
  return /* @__PURE__ */ new Set();
});
var Hw;
const Qw = "quick-look", Vw = "scene-viewer", Gw = "webxr", qw = "none", $w = Symbol("arButtonContainer"), Ww = Symbol("enterARWithWebXR"), jw = Symbol("openSceneViewer"), Xw = Symbol("openIOSARQuickLook"), Yw = Symbol("canActivateAR"), Kw = Symbol("arMode"), Zw = Symbol("arModes"), Jw = Symbol("arAnchor"), ex = Symbol("preload"), tx = Symbol("onARButtonContainerClick"), ix = Symbol("onARStatus"), nx = Symbol("onARTracking"), ox = Symbol("onARTap"), rx = Symbol("selectARMode"), sx = Symbol("triggerLoad");
var ax = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const lx = "auto", cx = "auto", hx = "eager", ux = Symbol("defaultProgressBarElement"), dx = Symbol("posterContainerElement"), px = Symbol("defaultPosterElement"), _x = Symbol("shouldDismissPoster"), gx = Symbol("hidePoster"), mx = Symbol("modelIsRevealed"), fx = Symbol("updateProgressBar"), vx = Symbol("ariaLabelCallToAction"), Ax = Symbol("onProgress");
var bx = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const yx = Math.PI / 32, wx = { basis: [Sg(gg(yx, "rad"))], keywords: { auto: [null] } }, xx = Symbol("autoRotateStartTime"), Cx = Symbol("radiansPerSecond"), Sx = Symbol("syncRotationRate"), Ex = Symbol("onCameraChange"), Tx = ((e6) => {
  var t2, i2, n2;
  class o2 extends e6 {
    constructor() {
      super(...arguments), this[t2] = /* @__PURE__ */ new Map(), this[i2] = (e7) => {
        e7.forEach((e8) => {
          e8 instanceof MutationRecord && "childList" !== e8.type || (e8.addedNodes.forEach((e9) => {
            this[By](e9);
          }), e8.removedNodes.forEach((e9) => {
            this[Ry](e9);
          }), this[uy]());
        });
      }, this[n2] = new MutationObserver(this[Iy]);
    }
    connectedCallback() {
      super.connectedCallback();
      for (let e8 = 0; e8 < this.children.length; ++e8) this[By](this.children[e8]);
      const { ShadyDOM: e7 } = self;
      null == e7 ? this[My].observe(this, { childList: true }) : this[My] = e7.observeChildren(this, this[Iy]);
    }
    disconnectedCallback() {
      super.disconnectedCallback();
      const { ShadyDOM: e7 } = self;
      null == e7 ? this[My].disconnect() : e7.unobserveChildren(this[My]);
    }
    [(t2 = Ty, i2 = Iy, n2 = My, py)]() {
      super[py]();
      const e7 = this[hy];
      e7.forHotspots((t3) => {
        e7.updateSurfaceHotspot(t3);
      });
    }
    [dy](e7, t3) {
      super[dy](e7, t3);
      const i3 = this[hy], { annotationRenderer: n3 } = i3, o3 = i3.getCamera();
      i3.shouldRender() && (i3.animateSurfaceHotspots(), i3.updateHotspotsVisibility(o3.position), n3.domElement.style.display = "", n3.render(i3, o3));
    }
    updateHotspot(e7) {
      const t3 = this[Ty].get(e7.name);
      null != t3 && (t3.updatePosition(e7.position), t3.updateNormal(e7.normal), t3.surface = e7.surface, this[hy].updateSurfaceHotspot(t3), this[uy]());
    }
    queryHotspot(e7) {
      const t3 = this[Ty].get(e7);
      if (null == t3) return null;
      const i3 = by(t3.position), n3 = by(t3.normal), o3 = t3.facingCamera, r2 = this[hy], s2 = r2.getCamera(), a2 = new yn();
      a2.setFromMatrixPosition(t3.matrixWorld), a2.project(s2);
      const l2 = r2.width / 2, c2 = r2.height / 2;
      a2.x = a2.x * l2 + l2, a2.y = -a2.y * c2 + c2;
      const h2 = by(new yn(a2.x, a2.y, a2.z));
      return Number.isFinite(h2.x) && Number.isFinite(h2.y) ? { position: i3, normal: n3, canvasPosition: h2, facingCamera: o3 } : null;
    }
    positionAndNormalFromPoint(e7, t3) {
      const i3 = this[hy], n3 = i3.getNDC(e7, t3), o3 = i3.positionAndNormalFromPoint(n3);
      if (null == o3) return null;
      ky.copy(i3.target.matrixWorld).invert();
      const r2 = by(o3.position.applyMatrix4(ky)), s2 = by(o3.normal.transformDirection(ky));
      let a2 = null;
      return null != o3.uv && (a2 = yy(o3.uv)), { position: r2, normal: s2, uv: a2 };
    }
    surfaceFromPoint(e7, t3) {
      const i3 = this[hy], n3 = i3.getNDC(e7, t3);
      return i3.surfaceFromPoint(n3);
    }
    [By](e7) {
      if (!(e7 instanceof HTMLElement && 0 === e7.slot.indexOf("hotspot"))) return;
      let t3 = this[Ty].get(e7.slot);
      null != t3 ? t3.increment() : (t3 = new pb({ name: e7.slot, position: e7.dataset.position, normal: e7.dataset.normal, surface: e7.dataset.surface }), this[Ty].set(e7.slot, t3), this[hy].addHotspot(t3)), this[hy].queueRender();
    }
    [Ry](e7) {
      if (!(e7 instanceof HTMLElement)) return;
      const t3 = this[Ty].get(e7.slot);
      t3 && (t3.decrement() && (this[hy].removeHotspot(t3), this[Ty].delete(e7.slot)), this[hy].queueRender());
    }
  }
  return o2;
})(((e6) => {
  var t2, i2, n2;
  class o2 extends e6 {
    constructor() {
      super(...arguments), this[t2] = void 0, this[i2] = null, this[n2] = null, this.variantName = null, this.orientation = "0 0 0", this.scale = "1 1 1";
    }
    get model() {
      return this[nb];
    }
    get availableVariants() {
      return this.model ? this.model[XA]() : [];
    }
    get originalGltfJson() {
      return this[ib];
    }
    [(t2 = nb, i2 = tb, n2 = ib, ob)]() {
      return () => {
        this[uy]();
      };
    }
    [rb](e7) {
      return e7.colorSpace = pi, e7.wrapS = Ke, e7.wrapT = Ke, new Wv(this[ob](), e7);
    }
    async createTexture(e7, t3 = "image/png") {
      const { textureUtils: i3 } = this[gy], n3 = await i3.loadImage(e7, this.withCredentials);
      return n3.userData.mimeType = t3, this[rb](n3);
    }
    async createLottieTexture(e7, t3 = 1) {
      const { textureUtils: i3 } = this[gy], n3 = await i3.loadLottie(e7, t3, this.withCredentials);
      return this[rb](n3);
    }
    createVideoTexture(e7) {
      const t3 = document.createElement("video");
      t3.crossOrigin = this.withCredentials ? "use-credentials" : "anonymous", t3.src = e7, t3.muted = true, t3.playsInline = true, t3.loop = true, t3.play();
      const i3 = new Xc(t3);
      return this[rb](i3);
    }
    createCanvasTexture() {
      const e7 = document.createElement("canvas"), t3 = new Jc(e7);
      return this[rb](t3);
    }
    async updated(e7) {
      if (super.updated(e7), e7.has("variantName")) {
        const e8 = this[my].beginActivity("variant-update");
        e8(0.1);
        const t3 = this[nb], { variantName: i3 } = this;
        null != t3 && (await t3[GA](i3), this[uy](), this.dispatchEvent(new CustomEvent("variant-applied"))), e8(1);
      }
      if (e7.has("orientation") || e7.has("scale")) {
        if (!this.loaded) return;
        const e8 = this[hy];
        e8.applyTransform(), e8.updateBoundingBox(), e8.updateShadow(), this[gy].arRenderer.onUpdateScene(), this[uy]();
      }
    }
    [py]() {
      super[py]();
      const { currentGLTF: e7 } = this[hy];
      if (null != e7) {
        const { correlatedSceneGraph: t3 } = e7;
        null != t3 && e7 !== this[tb] && (this[nb] = new JA(t3, this[ob]()), this[ib] = JSON.parse(JSON.stringify(t3.gltf))), "variants" in e7.userData && this.requestUpdate("variantName");
      }
      this[tb] = e7;
    }
    async exportScene(e7) {
      const t3 = this[hy];
      return new Promise(async (i3, n3) => {
        const o3 = { binary: true, onlyVisible: true, maxTextureSize: 1 / 0, includeCustomExtensions: false, forceIndices: false };
        Object.assign(o3, e7), o3.animations = t3.animations, o3.truncateDrawRange = true;
        const r2 = t3.shadow;
        let s2 = false;
        null != r2 && (s2 = r2.visible, r2.visible = false), await this[nb][VA]();
        new h_().register((e8) => new sg(e8)).parse(t3.model, (e8) => i3(new Blob([o3.binary ? e8 : JSON.stringify(e8)], { type: o3.binary ? "application/octet-stream" : "application/json" })), () => n3("glTF export failed"), o3), null != r2 && (r2.visible = s2);
      });
    }
    materialFromPoint(e7, t3) {
      const i3 = this[nb];
      if (null == i3) return null;
      const n3 = this[hy], o3 = n3.getNDC(e7, t3), r2 = n3.hitFromPoint(o3);
      return null == r2 || null == r2.face ? null : i3[qA](r2);
    }
  }
  return eb([de({ type: String, attribute: "variant-name" })], o2.prototype, "variantName", void 0), eb([de({ type: String, attribute: "orientation" })], o2.prototype, "orientation", void 0), eb([de({ type: String, attribute: "scale" })], o2.prototype, "scale", void 0), o2;
})(((e6) => {
  var t2, i2, n2;
  class o2 extends e6 {
    constructor() {
      super(...arguments), this.autoRotate = false, this.autoRotateDelay = 3e3, this.rotationPerSecond = "auto", this[t2] = performance.now(), this[i2] = 0, this[n2] = (e7) => {
        this.autoRotate && "user-interaction" === e7.detail.source && (this[xx] = performance.now());
      };
    }
    connectedCallback() {
      super.connectedCallback(), this.addEventListener("camera-change", this[Ex]), this[xx] = performance.now();
    }
    disconnectedCallback() {
      super.disconnectedCallback(), this.removeEventListener("camera-change", this[Ex]), this[xx] = performance.now();
    }
    updated(e7) {
      super.updated(e7), e7.has("autoRotate") && (this[xx] = performance.now());
    }
    [(t2 = xx, i2 = Cx, Sx)](e7) {
      this[Cx] = e7[0];
    }
    [dy](e7, t3) {
      if (super[dy](e7, t3), !this.autoRotate || !this[vy]() || this[gy].isPresenting) return;
      const i3 = Math.min(t3, e7 - this[xx] - this.autoRotateDelay);
      i3 > 0 && (this[hy].yaw = this.turntableRotation + this[Cx] * i3 * 1e-3);
    }
    get turntableRotation() {
      return this[hy].yaw;
    }
    resetTurntableRotation(e7 = 0) {
      this[hy].yaw = e7;
    }
  }
  return n2 = Ex, bx([de({ type: Boolean, attribute: "auto-rotate" })], o2.prototype, "autoRotate", void 0), bx([de({ type: Number, attribute: "auto-rotate-delay" })], o2.prototype, "autoRotateDelay", void 0), bx([um({ intrinsics: wx, updateHandler: Sx }), de({ type: String, attribute: "rotation-per-second" })], o2.prototype, "rotationPerSecond", void 0), o2;
})(((e6) => {
  var t2, i2, n2;
  class o2 extends e6 {
    constructor() {
      super(...arguments), this.environmentImage = null, this.skyboxImage = null, this.shadowIntensity = 0, this.shadowSoftness = 1, this.exposure = 1, this.toneMapping = "auto", this.skyboxHeight = "0", this[t2] = null, this[i2] = null, this[n2] = null;
    }
    updated(e7) {
      super.updated(e7), e7.has("shadowIntensity") && (this[hy].setShadowIntensity(0.5 * this.shadowIntensity), this[uy]()), e7.has("shadowSoftness") && (this[hy].setShadowSoftness(this.shadowSoftness), this[uy]()), e7.has("exposure") && (this[hy].exposure = this.exposure, this[uy]()), e7.has("toneMapping") && (this[hy].toneMapping = "aces" === this.toneMapping ? 4 : "agx" === this.toneMapping ? 6 : 7, this[uy]()), (e7.has("environmentImage") || e7.has("skyboxImage")) && this[Ay]() && this[Uu](), e7.has("skyboxHeight") && (this[hy].setGroundedSkybox(), this[uy]());
    }
    hasBakedShadow() {
      return this[hy].bakedShadows.size > 0;
    }
    async [(t2 = Nu, i2 = Ou, n2 = zu, Uu)]() {
      const { skyboxImage: e7, environmentImage: t3 } = this;
      null != this[zu] && (this[zu](), this[zu] = null);
      const { textureUtils: i3 } = this[gy];
      if (null == i3) return;
      const n3 = this[my].beginActivity("environment-update");
      try {
        const { environmentMap: o3, skybox: r2 } = await i3.generateEnvironmentMapAndSkybox(Bu(e7), t3, (e8) => n3(Du(e8, 0, 1)), this.withCredentials);
        this[Nu] !== o3 && (this[Nu] = o3, this.dispatchEvent(new CustomEvent("environment-change"))), this[Ou] = null != r2 ? r2.name === o3.name ? o3 : r2 : null, this[hy].setEnvironmentAndSkybox(this[Nu], this[Ou]);
      } catch (e8) {
        if (e8 instanceof Error) throw this[hy].setEnvironmentAndSkybox(null, null), e8;
      } finally {
        n3(1);
      }
    }
  }
  return Fu([de({ type: String, attribute: "environment-image" })], o2.prototype, "environmentImage", void 0), Fu([de({ type: String, attribute: "skybox-image" })], o2.prototype, "skyboxImage", void 0), Fu([de({ type: Number, attribute: "shadow-intensity" })], o2.prototype, "shadowIntensity", void 0), Fu([de({ type: Number, attribute: "shadow-softness" })], o2.prototype, "shadowSoftness", void 0), Fu([de({ type: Number })], o2.prototype, "exposure", void 0), Fu([de({ type: String, attribute: "tone-mapping" })], o2.prototype, "toneMapping", void 0), Fu([de({ type: String, attribute: "skybox-height" })], o2.prototype, "skyboxHeight", void 0), o2;
})(((e6) => {
  var t2, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2, d2, p2, _2, g2, m2, f2, v2;
  class A2 extends e6 {
    constructor() {
      super(...arguments), this.cameraControls = false, this.cameraOrbit = vm, this.cameraTarget = "auto auto auto", this.fieldOfView = "auto", this.minCameraOrbit = "auto", this.maxCameraOrbit = "auto", this.minFieldOfView = "auto", this.maxFieldOfView = "auto", this.interactionPromptThreshold = 3e3, this.interactionPrompt = ym, this.interactionPromptStyle = xm, this.orbitSensitivity = 1, this.zoomSensitivity = 1, this.panSensitivity = 1, this.touchAction = Cm, this.disableZoom = false, this.disablePan = false, this.disableTap = false, this.interpolationDecay = 50, this.a11y = null, this[t2] = this.shadowRoot.querySelector(".interaction-prompt"), this[i2] = this.shadowRoot.querySelector("#prompt"), this[n2] = [this.shadowRoot.querySelector("#finger0"), this.shadowRoot.querySelector("#finger1")], this[o2] = this.shadowRoot.querySelector(".pan-target"), this[r2] = 0, this[s2] = 1 / 0, this[a2] = false, this[l2] = false, this[c2] = mf.AUTOMATIC, this[h2] = new ff(this[hy].camera, this[ly], this[hy]), this[u2] = new pu(), this[d2] = false, this[p2] = false, this[_2] = false, this[g2] = {}, this[m2] = () => {
        const e7 = this[Lm].changeSource;
        this[Zm] = e7, e7 === mf.USER_INTERACTION && (this[Xm] = true, this[zm]());
      }, this[f2] = () => {
        this[Hm](), this[uy]();
        const e7 = this[Lm].changeSource;
        this.dispatchEvent(new CustomEvent("camera-change", { detail: { source: e7 } }));
      }, this[v2] = (e7) => {
        this[ay].classList.toggle("pointer-tumbling", "pointer-change-start" === e7.type);
      };
    }
    get inputSensitivity() {
      return this[Lm].inputSensitivity;
    }
    set inputSensitivity(e7) {
      this[Lm].inputSensitivity = e7;
    }
    getCameraOrbit() {
      const { theta: e7, phi: t3, radius: i3 } = this[Jm];
      return { theta: e7, phi: t3, radius: i3, toString() {
        return `${this.theta}rad ${this.phi}rad ${this.radius}m`;
      } };
    }
    getCameraTarget() {
      return by(this[gy].isPresenting ? this[gy].arRenderer.target : this[hy].getDynamicTarget());
    }
    getFieldOfView() {
      return this[Lm].getFieldOfView();
    }
    getMinimumFieldOfView() {
      return this[Lm].options.minimumFieldOfView;
    }
    getMaximumFieldOfView() {
      return this[Lm].options.maximumFieldOfView;
    }
    getIdealAspect() {
      return this[hy].idealAspect;
    }
    jumpCameraToGoal() {
      this[ef] = true, this.requestUpdate(ef, false);
    }
    resetInteractionPrompt() {
      this[Km] = 0, this[Ym] = 1 / 0, this[Xm] = false, this[jm] = this.interactionPrompt === ym && this.cameraControls;
    }
    zoom(e7) {
      const t3 = new WheelEvent("wheel", { deltaY: -30 * e7 });
      this[ly].dispatchEvent(t3);
    }
    connectedCallback() {
      super.connectedCallback(), this[Lm].addEventListener("user-interaction", this[qm]), this[Lm].addEventListener("pointer-change-start", this[Wm]), this[Lm].addEventListener("pointer-change-end", this[Wm]);
    }
    disconnectedCallback() {
      super.disconnectedCallback(), this[Lm].removeEventListener("user-interaction", this[qm]), this[Lm].removeEventListener("pointer-change-start", this[Wm]), this[Lm].removeEventListener("pointer-change-end", this[Wm]);
    }
    updated(e7) {
      super.updated(e7);
      const t3 = this[Lm], i3 = this[hy];
      if (e7.has("cameraControls") && (this.cameraControls ? (t3.enableInteraction(), this.interactionPrompt === ym && (this[jm] = true)) : (t3.disableInteraction(), this[zm]()), this[ly].setAttribute("aria-label", this[ey])), e7.has("disableZoom") && (t3.disableZoom = this.disableZoom), e7.has("disablePan") && (t3.enablePan = !this.disablePan), e7.has("disableTap") && (t3.enableTap = !this.disableTap), (e7.has("interactionPrompt") || e7.has("cameraControls") || e7.has("src")) && (this.interactionPrompt === ym && this.cameraControls && !this[Xm] ? this[jm] = true : this[zm]()), e7.has("interactionPromptStyle") && (this[Om].style.opacity = this.interactionPromptStyle == wm ? "1" : "0"), e7.has("touchAction")) {
        const e8 = this.touchAction;
        t3.applyOptions({ touchAction: e8 }), t3.updateTouchActionStyle();
      }
      e7.has("orbitSensitivity") && (t3.orbitSensitivity = this.orbitSensitivity), e7.has("zoomSensitivity") && (t3.zoomSensitivity = this.zoomSensitivity), e7.has("panSensitivity") && (t3.panSensitivity = this.panSensitivity), e7.has("interpolationDecay") && (t3.setDamperDecayTime(this.interpolationDecay), i3.setTargetDamperDecayTime(this.interpolationDecay)), e7.has("a11y") && this[Vm](), true === this[ef] && Promise.resolve().then(() => {
        t3.jumpToGoal(), i3.jumpToGoal(), this[$m](), this[ef] = false;
      });
    }
    async updateFraming() {
      const e7 = this[hy], t3 = e7.adjustedFoV(e7.framedFoVDeg);
      await e7.updateFraming();
      const i3 = e7.adjustedFoV(e7.framedFoVDeg), n3 = this[Lm].getFieldOfView() / t3;
      this[Lm].setFieldOfView(i3 * n3), this[nf] = true, this.requestUpdate("maxFieldOfView"), this.requestUpdate("fieldOfView"), this.requestUpdate("minCameraOrbit"), this.requestUpdate("maxCameraOrbit"), this.requestUpdate("cameraOrbit"), await this.updateComplete;
    }
    interact(e7, t3, i3) {
      const n3 = this[ly], o3 = this[Um];
      if ("1" === o3[0].style.opacity) return void console.warn("interact() failed because an existing interaction is running.");
      const r3 = new Array();
      r3.push({ x: _m(t3.x), y: _m(t3.y) });
      const s3 = [{ x: r3[0].x(0), y: r3[0].y(0) }];
      null != i3 && (r3.push({ x: _m(i3.x), y: _m(i3.y) }), s3.push({ x: r3[1].x(0), y: r3[1].y(0) }));
      let a3 = performance.now();
      const { width: l3, height: c3 } = this[hy], h3 = this.getBoundingClientRect(), u3 = (e8) => {
        for (const [t4, i4] of s3.entries()) {
          const { style: r4 } = o3[t4];
          r4.transform = `translateX(${l3 * i4.x}px) translateY(${c3 * i4.y}px)`, "pointerdown" === e8 ? r4.opacity = "1" : "pointerup" === e8 && (r4.opacity = "0");
          const s4 = { pointerId: t4 - 5678, pointerType: "touch", target: n3, clientX: l3 * i4.x + h3.x, clientY: c3 * i4.y + h3.y, altKey: true };
          n3.dispatchEvent(new PointerEvent(e8, s4));
        }
      }, d3 = () => {
        const t4 = this[Zm];
        if (t4 !== mf.AUTOMATIC || !n3.isConnected) {
          for (const e8 of this[Um]) e8.style.opacity = "0";
          return u3("pointercancel"), this.dispatchEvent(new CustomEvent("interact-stopped", { detail: { source: t4 } })), void document.removeEventListener("visibilitychange", p3);
        }
        const i4 = Math.min(1, (performance.now() - a3) / e7);
        for (const [e8, t5] of s3.entries()) t5.x = r3[e8].x(i4), t5.y = r3[e8].y(i4);
        u3("pointermove"), i4 < 1 ? requestAnimationFrame(d3) : (u3("pointerup"), this.dispatchEvent(new CustomEvent("interact-stopped", { detail: { source: mf.AUTOMATIC } })), document.removeEventListener("visibilitychange", p3));
      }, p3 = () => {
        let e8 = 0;
        "hidden" === document.visibilityState ? e8 = performance.now() - a3 : a3 = performance.now() - e8;
      };
      document.addEventListener("visibilitychange", p3), u3("pointerdown"), this[Zm] = mf.AUTOMATIC, requestAnimationFrame(d3);
    }
    [(t2 = Nm, i2 = Om, n2 = Um, o2 = Fm, r2 = Km, s2 = Ym, a2 = Xm, l2 = jm, c2 = Zm, h2 = Lm, u2 = Jm, d2 = ef, p2 = tf, _2 = nf, g2 = Qm, rf)](e7) {
      const t3 = this[Lm], i3 = this[hy];
      i3.framedFoVDeg = 180 * e7[0] / Math.PI, t3.changeSource = mf.NONE, t3.setFieldOfView(i3.adjustedFoV(i3.framedFoVDeg)), this[qm]();
    }
    [of](e7) {
      const t3 = this[Lm];
      if (this[nf]) {
        const { theta: t4, phi: i3 } = this.getCameraOrbit();
        e7[0] = t4, e7[1] = i3, this[nf] = false;
      }
      t3.changeSource = mf.NONE, t3.setOrbit(e7[0], e7[1], e7[2]), this[qm]();
    }
    [af](e7) {
      this[Lm].applyOptions({ minimumAzimuthalAngle: e7[0], minimumPolarAngle: e7[1], minimumRadius: e7[2] }), this.jumpCameraToGoal();
    }
    [lf](e7) {
      this[Lm].applyOptions({ maximumAzimuthalAngle: e7[0], maximumPolarAngle: e7[1], maximumRadius: e7[2] }), this[Gm](e7[2]), this.jumpCameraToGoal();
    }
    [cf](e7) {
      this[Lm].applyOptions({ minimumFieldOfView: 180 * e7[0] / Math.PI }), this.jumpCameraToGoal();
    }
    [hf](e7) {
      const t3 = this[hy].adjustedFoV(180 * e7[0] / Math.PI);
      this[Lm].applyOptions({ maximumFieldOfView: t3 }), this.jumpCameraToGoal();
    }
    [sf](e7) {
      const [t3, i3, n3] = e7;
      this[gy].arRenderer.isPresenting || this[hy].setTarget(t3, i3, n3), this[Lm].changeSource = mf.NONE, this[gy].arRenderer.updateTarget(), this[qm]();
    }
    [dy](e7, t3) {
      if (super[dy](e7, t3), this[gy].isPresenting || !this[vy]()) return;
      const i3 = this[Lm], n3 = this[hy], o3 = performance.now();
      if (this[jm] && this.loaded && o3 > this[oy] + this.interactionPromptThreshold && (this[jm] = false, this[Ym] = o3, this[Nm].classList.add("visible")), isFinite(this[Ym]) && this.interactionPromptStyle === xm) {
        const e8 = (o3 - this[Ym]) / 5e3 % 1, t4 = mm(e8), r4 = fm(e8);
        if (this[Om].style.opacity = `${r4}`, t4 !== this[Km]) {
          const e9 = t4 * n3.width * 0.05, o4 = (t4 - this[Km]) * Math.PI / 16;
          this[Om].style.transform = `translateX(${e9}px)`, i3.changeSource = mf.AUTOMATIC, i3.adjustOrbit(o4, 0, 0), this[Km] = t4;
        }
      }
      const r3 = i3.update(e7, t3), s3 = n3.updateTarget(t3);
      (r3 || s3) && this[$m]();
    }
    [zm]() {
      this[jm] = false, this[Nm].classList.remove("visible"), this[Ym] = 1 / 0;
    }
    [Gm](e7) {
      const t3 = Math.max(this[hy].farRadius(), e7), i3 = Math.abs(2 * t3);
      this[Lm].updateNearFar(0, i3);
    }
    [Hm]() {
      const { theta: e7, phi: t3 } = this[Lm].getCameraSpherical(this[Jm]), i3 = (4 + Math.floor((e7 % Dm + Pm) / Rm)) % 4, n3 = Math.floor(t3 / km), o3 = `${bm[n3]}${Am[i3]}`, r3 = o3;
      r3 in this[Qm] ? this[ny](this[Qm][r3]) : this[ny](`View from stage ${o3}`);
    }
    get [ey]() {
      let e7 = ". Use mouse, touch or arrow keys to move.";
      return "interaction-prompt" in this[Qm] && (e7 = `. ${this[Qm]["interaction-prompt"]}`), super[ey].replace(/\.$/, "") + (this.cameraControls ? e7 : "");
    }
    async [_y](e7) {
      const t3 = this[Lm], i3 = this[hy], n3 = i3.adjustedFoV(i3.framedFoVDeg);
      super[_y](e7);
      const o3 = i3.adjustedFoV(i3.framedFoVDeg) / n3, r3 = t3.getFieldOfView() * (isFinite(o3) ? o3 : 1);
      t3.updateAspect(this[hy].aspect), this.requestUpdate("maxFieldOfView", this.maxFieldOfView), await this.updateComplete, this[Lm].setFieldOfView(r3), this.jumpCameraToGoal();
    }
    [py]() {
      super[py](), this[tf] ? this[nf] = true : this[tf] = true, this.requestUpdate("maxFieldOfView", this.maxFieldOfView), this.requestUpdate("fieldOfView", this.fieldOfView), this.requestUpdate("minCameraOrbit", this.minCameraOrbit), this.requestUpdate("maxCameraOrbit", this.maxCameraOrbit), this.requestUpdate("cameraOrbit", this.cameraOrbit), this.requestUpdate("cameraTarget", this.cameraTarget), this.jumpCameraToGoal();
    }
    [(m2 = qm, f2 = $m, v2 = Wm, Vm)]() {
      if ("string" == typeof this.a11y) if (this.a11y.startsWith("{")) try {
        this[Qm] = JSON.parse(this.a11y);
      } catch (e7) {
        console.warn("Error parsing a11y JSON:", e7);
      }
      else this.a11y.length > 0 ? console.warn("Error not supported format, should be a JSON string:", this.a11y) : this[Qm] = {};
      else "object" == typeof this.a11y && null != this.a11y ? this[Qm] = Object.assign({}, this.a11y) : this[Qm] = {};
      this[ly].setAttribute("aria-label", this[ey]);
    }
  }
  return gm([de({ type: Boolean, attribute: "camera-controls" })], A2.prototype, "cameraControls", void 0), gm([um({ intrinsics: Tm, observeEffects: true, updateHandler: of }), de({ type: String, attribute: "camera-orbit", hasChanged: () => true })], A2.prototype, "cameraOrbit", void 0), gm([um({ intrinsics: Bm, observeEffects: true, updateHandler: sf }), de({ type: String, attribute: "camera-target", hasChanged: () => true })], A2.prototype, "cameraTarget", void 0), gm([um({ intrinsics: Sm, observeEffects: true, updateHandler: rf }), de({ type: String, attribute: "field-of-view", hasChanged: () => true })], A2.prototype, "fieldOfView", void 0), gm([um({ intrinsics: Im, updateHandler: af }), de({ type: String, attribute: "min-camera-orbit", hasChanged: () => true })], A2.prototype, "minCameraOrbit", void 0), gm([um({ intrinsics: Mm, updateHandler: lf }), de({ type: String, attribute: "max-camera-orbit", hasChanged: () => true })], A2.prototype, "maxCameraOrbit", void 0), gm([um({ intrinsics: Em, updateHandler: cf }), de({ type: String, attribute: "min-field-of-view", hasChanged: () => true })], A2.prototype, "minFieldOfView", void 0), gm([um({ intrinsics: Sm, updateHandler: hf }), de({ type: String, attribute: "max-field-of-view", hasChanged: () => true })], A2.prototype, "maxFieldOfView", void 0), gm([de({ type: Number, attribute: "interaction-prompt-threshold" })], A2.prototype, "interactionPromptThreshold", void 0), gm([de({ type: String, attribute: "interaction-prompt" })], A2.prototype, "interactionPrompt", void 0), gm([de({ type: String, attribute: "interaction-prompt-style" })], A2.prototype, "interactionPromptStyle", void 0), gm([de({ type: Number, attribute: "orbit-sensitivity" })], A2.prototype, "orbitSensitivity", void 0), gm([de({ type: Number, attribute: "zoom-sensitivity" })], A2.prototype, "zoomSensitivity", void 0), gm([de({ type: Number, attribute: "pan-sensitivity" })], A2.prototype, "panSensitivity", void 0), gm([de({ type: String, attribute: "touch-action" })], A2.prototype, "touchAction", void 0), gm([de({ type: Boolean, attribute: "disable-zoom" })], A2.prototype, "disableZoom", void 0), gm([de({ type: Boolean, attribute: "disable-pan" })], A2.prototype, "disablePan", void 0), gm([de({ type: Boolean, attribute: "disable-tap" })], A2.prototype, "disableTap", void 0), gm([de({ type: Number, attribute: "interpolation-decay" })], A2.prototype, "interpolationDecay", void 0), gm([de()], A2.prototype, "a11y", void 0), A2;
})(((e6) => {
  var t2, i2, n2, o2, r2, s2, a2, l2, c2, h2;
  class u2 extends e6 {
    constructor() {
      super(...arguments), this.ar = false, this.arScale = "auto", this.arPlacement = "floor", this.arModes = "webxr scene-viewer quick-look", this.iosSrc = null, this.xrEnvironment = false, this[t2] = false, this[i2] = this.shadowRoot.querySelector(".ar-button"), this[n2] = document.createElement("a"), this[o2] = /* @__PURE__ */ new Set(), this[r2] = qw, this[s2] = false, this[a2] = (e7) => {
        e7.preventDefault(), this.activateAR();
      }, this[l2] = ({ status: e7 }) => {
        e7 !== Af && this[gy].arRenderer.presentedScene !== this[hy] || (this.setAttribute("ar-status", e7), this.dispatchEvent(new CustomEvent("ar-status", { detail: { status: e7 } })), e7 === Af ? this.removeAttribute("ar-tracking") : e7 === bf && this.setAttribute("ar-tracking", xf));
      }, this[c2] = ({ status: e7 }) => {
        this.setAttribute("ar-tracking", e7), this.dispatchEvent(new CustomEvent("ar-tracking", { detail: { status: e7 } }));
      }, this[h2] = (e7) => {
        "_apple_ar_quicklook_button_tapped" == e7.data && this.dispatchEvent(new CustomEvent("quick-look-button-tapped"));
      };
    }
    get canActivateAR() {
      return this[Kw] !== qw;
    }
    connectedCallback() {
      super.connectedCallback(), this[gy].arRenderer.addEventListener("status", this[ix]), this.setAttribute("ar-status", Af), this[gy].arRenderer.addEventListener("tracking", this[nx]), this[Jw].addEventListener("message", this[ox]);
    }
    disconnectedCallback() {
      super.disconnectedCallback(), this[gy].arRenderer.removeEventListener("status", this[ix]), this[gy].arRenderer.removeEventListener("tracking", this[nx]), this[Jw].removeEventListener("message", this[ox]);
    }
    update(e7) {
      super.update(e7), e7.has("arScale") && (this[hy].canScale = "fixed" !== this.arScale), e7.has("arPlacement") && (this[hy].updateShadow(), this[uy]()), e7.has("arModes") && (this[Zw] = zw(this.arModes)), (e7.has("ar") || e7.has("arModes") || e7.has("src") || e7.has("iosSrc")) && this[rx]();
    }
    async activateAR() {
      switch (this[Kw]) {
        case Qw:
          await this[Xw]();
          break;
        case Gw:
          await this[Ww]();
          break;
        case Vw:
          this[jw]();
          break;
        default:
          console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");
      }
    }
    async [(t2 = Yw, i2 = $w, n2 = Jw, o2 = Zw, r2 = Kw, s2 = ex, a2 = tx, l2 = ix, c2 = nx, h2 = ox, rx)]() {
      var e7;
      let t3 = qw;
      if (this.ar) {
        if (null != this.src) for (const i3 of this[Zw]) {
          if ("webxr" === i3 && wu && !Nw && await this[gy].arRenderer.supportsPresentation()) {
            t3 = Gw;
            break;
          }
          if ("scene-viewer" === i3 && !Ow && (Tu || navigator.userAgentData && navigator.userAgentData.getHighEntropyValues && (null === (e7 = (await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor) || void 0 === e7 ? void 0 : e7.includes("XR")))) {
            t3 = Vw;
            break;
          }
          if ("quick-look" === i3 && Mu) {
            t3 = Qw;
            break;
          }
        }
        t3 === qw && null != this.iosSrc && Mu && (t3 = Qw);
      }
      if (t3 !== qw) this[$w].classList.add("enabled"), this[$w].addEventListener("click", this[tx]);
      else if (this[$w].classList.contains("enabled")) {
        this[$w].removeEventListener("click", this[tx]), this[$w].classList.remove("enabled");
        const e8 = wf;
        this.setAttribute("ar-status", e8), this.dispatchEvent(new CustomEvent("ar-status", { detail: { status: e8 } }));
      }
      this[Kw] = t3;
    }
    async [Ww]() {
      console.log("Attempting to present in AR with WebXR..."), await this[sx]();
      try {
        this[$w].removeEventListener("click", this[tx]);
        const { arRenderer: e7 } = this[gy];
        e7.placeOnWall = "wall" === this.arPlacement, await e7.present(this[hy], this.xrEnvironment);
      } catch (e7) {
        console.warn("Error while trying to present in AR with WebXR"), console.error(e7), await this[gy].arRenderer.stopPresenting(), Nw = true, console.warn("Falling back to next ar-mode"), await this[rx](), this.activateAR();
      } finally {
        this[rx]();
      }
    }
    async [sx]() {
      this.loaded || (this[ex] = true, this[ry](), await ((e7, t3, i3 = null) => new Promise((n3) => {
        e7.addEventListener(t3, function o3(r3) {
          i3 && !i3(r3) || (n3(r3), e7.removeEventListener(t3, o3));
        });
      }))(this, "load"), this[ex] = false);
    }
    [Ay]() {
      return super[Ay]() || this[ex];
    }
    [jw]() {
      const e7 = self.location.toString(), t3 = new URL(e7), i3 = new URL(this.src, e7);
      i3.hash && (i3.hash = "");
      const n3 = new URLSearchParams(i3.search);
      if (t3.hash = Uw, n3.set("mode", "ar_preferred"), n3.has("disable_occlusion") || n3.set("disable_occlusion", "true"), "fixed" === this.arScale && n3.set("resizable", "false"), "wall" === this.arPlacement && n3.set("enable_vertical_placement", "true"), n3.has("sound")) {
        const t4 = new URL(n3.get("sound"), e7);
        n3.set("sound", t4.toString());
      }
      if (n3.has("link")) {
        const t4 = new URL(n3.get("link"), e7);
        n3.set("link", t4.toString());
      }
      const o3 = `intent://arvr.google.com/scene-viewer/1.2?${n3.toString() + "&file=" + encodeURIComponent(i3.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(t3.toString())};end;`;
      self.addEventListener("hashchange", () => {
        self.location.hash === Uw && (Ow = true, self.history.back(), console.warn("Error while trying to present in AR with Scene Viewer"), console.warn("Falling back to next ar-mode"), this[rx]());
      }, { once: true }), this[Jw].setAttribute("href", o3), console.log("Attempting to present in AR with Scene Viewer..."), this[Jw].click();
    }
    async [Xw]() {
      const e7 = !this.iosSrc;
      this[$w].classList.remove("enabled");
      const t3 = e7 ? await this.prepareUSDZ() : this.iosSrc, i3 = new URL(t3, self.location.toString());
      if (e7) {
        const e8 = self.location.toString(), t4 = new URL(e8), n4 = new URL(this.src, t4);
        n4.hash && (i3.hash = n4.hash);
      }
      "fixed" === this.arScale && (i3.hash && (i3.hash += "&"), i3.hash += "allowsContentScaling=0");
      const n3 = this[Jw];
      n3.setAttribute("rel", "ar");
      const o3 = document.createElement("img");
      n3.appendChild(o3), n3.setAttribute("href", i3.toString()), e7 && n3.setAttribute("download", "model.usdz"), n3.style.display = "none", n3.isConnected || this.shadowRoot.appendChild(n3), console.log("Attempting to present in AR with Quick Look..."), n3.click(), n3.removeChild(o3), e7 && URL.revokeObjectURL(t3), this[$w].classList.add("enabled");
    }
    async prepareUSDZ() {
      const e7 = this[my].beginActivity("usdz-conversion");
      await this[sx]();
      const { model: t3, shadow: i3, target: n3 } = this[hy];
      if (null == t3) return "";
      let o3 = false;
      null != i3 && (o3 = i3.visible, i3.visible = false), e7(0.2);
      const r3 = new Sw();
      n3.remove(t3), t3.position.copy(n3.position), t3.updateWorldMatrix(false, true);
      const s3 = await r3.parseAsync(t3);
      t3.position.set(0, 0, 0), n3.add(t3);
      const a3 = new Blob([s3], { type: "model/vnd.usdz+zip" }), l3 = URL.createObjectURL(a3);
      return e7(1), null != i3 && (i3.visible = o3), l3;
    }
  }
  return Fw([de({ type: Boolean, attribute: "ar" })], u2.prototype, "ar", void 0), Fw([de({ type: String, attribute: "ar-scale" })], u2.prototype, "arScale", void 0), Fw([de({ type: String, attribute: "ar-placement" })], u2.prototype, "arPlacement", void 0), Fw([de({ type: String, attribute: "ar-modes" })], u2.prototype, "arModes", void 0), Fw([de({ type: String, attribute: "ios-src" })], u2.prototype, "iosSrc", void 0), Fw([de({ type: Boolean, attribute: "xr-environment" })], u2.prototype, "xrEnvironment", void 0), u2;
})(((e6) => {
  var t2, i2, n2, o2, r2, s2, a2, l2;
  class c2 extends e6 {
    constructor(...e7) {
      super(...e7), this.poster = null, this.reveal = lx, this.loading = cx, this[t2] = false, this[i2] = false, this[n2] = this.shadowRoot.querySelector(".slot.poster"), this[o2] = this.shadowRoot.querySelector("#default-poster"), this[r2] = this.shadowRoot.querySelector("#default-progress-bar > .bar"), this[s2] = this[px].getAttribute("aria-label"), this[a2] = ((e8, t3) => {
        let i3 = null;
        const n3 = (...n4) => {
          null == i3 && (e8(...n4), i3 = self.setTimeout(() => i3 = null, t3));
        };
        return n3.flush = () => {
          null != i3 && (self.clearTimeout(i3), i3 = null);
        }, n3;
      })((e8) => {
        const t3 = this[ux].parentNode;
        requestAnimationFrame(() => {
          this[ux].style.transform = `scaleX(${e8})`, 0 === e8 && (t3.removeChild(this[ux]), t3.appendChild(this[ux])), this[ux].classList.toggle("hide", 1 === e8);
        });
      }, 100), this[l2] = (e8) => {
        const t3 = e8.detail.totalProgress, i3 = e8.detail.reason;
        1 === t3 && (this[fx].flush(), this.loaded && (this[_x] || this.reveal === lx) && this[gx]()), this[fx](t3), this.dispatchEvent(new CustomEvent("progress", { detail: { totalProgress: t3, reason: i3 } }));
      };
      const c3 = self.ModelViewerElement || {}, h2 = c3.dracoDecoderLocation || "https://www.gstatic.com/draco/versioned/decoders/1.5.6/";
      Xp.setDRACODecoderLocation(h2);
      const u2 = c3.ktx2TranscoderLocation || "https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";
      Xp.setKTX2TranscoderLocation(u2), c3.meshoptDecoderLocation && Xp.setMeshoptDecoderLocation(c3.meshoptDecoderLocation);
      const d2 = c3.lottieLoaderLocation || "https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js";
      Av.singleton.textureUtils.lottieLoaderUrl = d2;
    }
    static set dracoDecoderLocation(e7) {
      Xp.setDRACODecoderLocation(e7);
    }
    static get dracoDecoderLocation() {
      return Xp.getDRACODecoderLocation();
    }
    static set ktx2TranscoderLocation(e7) {
      Xp.setKTX2TranscoderLocation(e7);
    }
    static get ktx2TranscoderLocation() {
      return Xp.getKTX2TranscoderLocation();
    }
    static set meshoptDecoderLocation(e7) {
      Xp.setMeshoptDecoderLocation(e7);
    }
    static get meshoptDecoderLocation() {
      return Xp.getMeshoptDecoderLocation();
    }
    static set lottieLoaderLocation(e7) {
      Av.singleton.textureUtils.lottieLoaderUrl = e7;
    }
    static get lottieLoaderLocation() {
      return Av.singleton.textureUtils.lottieLoaderUrl;
    }
    static mapURLs(e7) {
      Av.singleton.loader[$p].manager.setURLModifier(e7);
    }
    dismissPoster() {
      this.loaded ? this[gx]() : (this[_x] = true, this[ry]());
    }
    showPoster() {
      const e7 = this[dx];
      if (e7.classList.contains("show")) return;
      e7.classList.add("show"), this[ly].classList.remove("show");
      const t3 = this[px];
      t3.removeAttribute("tabindex"), t3.removeAttribute("aria-hidden");
      const i3 = this.modelIsVisible;
      this[mx] = false, this[Jb](i3);
    }
    getDimensions() {
      return by(this[hy].size);
    }
    getBoundingBoxCenter() {
      return by(this[hy].boundingBox.getCenter(new yn()));
    }
    connectedCallback() {
      super.connectedCallback(), this.loaded || this.showPoster(), this[my].addEventListener("progress", this[Ax]);
    }
    disconnectedCallback() {
      super.disconnectedCallback(), this[my].removeEventListener("progress", this[Ax]);
    }
    async updated(e7) {
      super.updated(e7), e7.has("poster") && null != this.poster && (this[px].style.backgroundImage = `url(${this.poster})`), e7.has("alt") && this[px].setAttribute("aria-label", this[ty]), (e7.has("reveal") || e7.has("loading")) && this[ry]();
    }
    [(t2 = mx, i2 = _x, n2 = dx, o2 = px, r2 = ux, s2 = vx, a2 = fx, l2 = Ax, Ay)]() {
      return !!this.src && (this[_x] || this.loading === hx || this.reveal === lx && this[Zb]);
    }
    [gx]() {
      this[_x] = false;
      const e7 = this[dx];
      if (!e7.classList.contains("show")) return;
      e7.classList.remove("show"), this[ly].classList.add("show");
      const t3 = this.modelIsVisible;
      this[mx] = true, this[Jb](t3);
      const i3 = this.getRootNode();
      i3 && i3.activeElement === this && this[ly].focus();
      const n3 = this[px];
      n3.setAttribute("aria-hidden", "true"), n3.tabIndex = -1, this.dispatchEvent(new CustomEvent("poster-dismissed"));
    }
    [vy]() {
      return super[vy]() && this[mx];
    }
  }
  return ax([de({ type: String })], c2.prototype, "poster", void 0), ax([de({ type: String })], c2.prototype, "reveal", void 0), ax([de({ type: String })], c2.prototype, "loading", void 0), c2;
})(((e6) => {
  var t2;
  class i2 extends e6 {
    constructor(...e7) {
      super(e7), this.autoplay = false, this.animationName = void 0, this.animationCrossfadeDuration = 300, this[t2] = true, this[hy].subscribeMixerEvent("loop", (e8) => {
        const t3 = e8.action._loopCount;
        this.dispatchEvent(new CustomEvent("loop", { detail: { count: t3 } }));
      }), this[hy].subscribeMixerEvent("finished", () => {
        this[Sy] = true, this.dispatchEvent(new CustomEvent("finished"));
      });
    }
    get availableAnimations() {
      return this.loaded ? this[hy].animationNames : [];
    }
    get duration() {
      return this[hy].duration;
    }
    get paused() {
      return this[Sy];
    }
    get currentTime() {
      return this[hy].animationTime;
    }
    set currentTime(e7) {
      this[hy].animationTime = e7, this[uy]();
    }
    get timeScale() {
      return this[hy].animationTimeScale;
    }
    set timeScale(e7) {
      this[hy].animationTimeScale = e7;
    }
    pause() {
      this[Sy] || (this[Sy] = true, this.dispatchEvent(new CustomEvent("pause")));
    }
    play(e7) {
      this.availableAnimations.length > 0 && (this[Sy] = false, this[Cy](e7), this.dispatchEvent(new CustomEvent("play")));
    }
    [(t2 = Sy, py)]() {
      super[py](), this[Sy] = true, null != this.animationName && this[Cy](), this.autoplay && this.play();
    }
    [dy](e7, t3) {
      super[dy](e7, t3), this[Sy] || !this[vy]() && !this[gy].isPresenting || (this[hy].updateAnimation(t3 / 1e3), this[uy]());
    }
    updated(e7) {
      super.updated(e7), e7.has("autoplay") && this.autoplay && this.play(), e7.has("animationName") && this[Cy]();
    }
    [Cy](e7 = Ey) {
      var t3;
      const i3 = null !== (t3 = e7.repetitions) && void 0 !== t3 ? t3 : 1 / 0, n2 = e7.pingpong ? oi : 1 === i3 ? 2200 : ni;
      this[hy].playAnimation(this.animationName, this.animationCrossfadeDuration / 1e3, n2, i3), this[Sy] && (this[hy].updateAnimation(0), this[uy]());
    }
  }
  return xy([de({ type: Boolean })], i2.prototype, "autoplay", void 0), xy([de({ type: String, attribute: "animation-name" })], i2.prototype, "animationName", void 0), xy([de({ type: Number, attribute: "animation-crossfade-duration" })], i2.prototype, "animationCrossfadeDuration", void 0), i2;
})(wy))))))));
customElements.define("model-viewer", Tx);
var Ix = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
function Mx(e6) {
  return e6 && e6.__esModule && Object.prototype.hasOwnProperty.call(e6, "default") ? e6.default : e6;
}
var Bx, Rx = { exports: {} }, kx = "object" == typeof Reflect ? Reflect : null, Px = kx && "function" == typeof kx.apply ? kx.apply : function(e6, t2, i2) {
  return Function.prototype.apply.call(e6, t2, i2);
};
Bx = kx && "function" == typeof kx.ownKeys ? kx.ownKeys : Object.getOwnPropertySymbols ? function(e6) {
  return Object.getOwnPropertyNames(e6).concat(Object.getOwnPropertySymbols(e6));
} : function(e6) {
  return Object.getOwnPropertyNames(e6);
};
var Dx = Number.isNaN || function(e6) {
  return e6 != e6;
};
function Lx() {
  Lx.init.call(this);
}
Rx.exports = Lx, Rx.exports.once = function(e6, t2) {
  return new Promise(function(i2, n2) {
    function o2(i3) {
      e6.removeListener(t2, r2), n2(i3);
    }
    function r2() {
      "function" == typeof e6.removeListener && e6.removeListener("error", o2), i2([].slice.call(arguments));
    }
    qx(e6, t2, r2, { once: true }), "error" !== t2 && function(e7, t3, i3) {
      "function" == typeof e7.on && qx(e7, "error", t3, i3);
    }(e6, o2, { once: true });
  });
}, Lx.EventEmitter = Lx, Lx.prototype._events = void 0, Lx.prototype._eventsCount = 0, Lx.prototype._maxListeners = void 0;
var Fx = 10;
function Nx(e6) {
  if ("function" != typeof e6) throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof e6);
}
function Ox(e6) {
  return void 0 === e6._maxListeners ? Lx.defaultMaxListeners : e6._maxListeners;
}
function Ux(e6, t2, i2, n2) {
  var o2, r2, s2, a2;
  if (Nx(i2), void 0 === (r2 = e6._events) ? (r2 = e6._events = /* @__PURE__ */ Object.create(null), e6._eventsCount = 0) : (void 0 !== r2.newListener && (e6.emit("newListener", t2, i2.listener ? i2.listener : i2), r2 = e6._events), s2 = r2[t2]), void 0 === s2) s2 = r2[t2] = i2, ++e6._eventsCount;
  else if ("function" == typeof s2 ? s2 = r2[t2] = n2 ? [i2, s2] : [s2, i2] : n2 ? s2.unshift(i2) : s2.push(i2), (o2 = Ox(e6)) > 0 && s2.length > o2 && !s2.warned) {
    s2.warned = true;
    var l2 = new Error("Possible EventEmitter memory leak detected. " + s2.length + " " + String(t2) + " listeners added. Use emitter.setMaxListeners() to increase limit");
    l2.name = "MaxListenersExceededWarning", l2.emitter = e6, l2.type = t2, l2.count = s2.length, a2 = l2, console && console.warn && console.warn(a2);
  }
  return e6;
}
function zx() {
  if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = true, 0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
}
function Hx(e6, t2, i2) {
  var n2 = { fired: false, wrapFn: void 0, target: e6, type: t2, listener: i2 }, o2 = zx.bind(n2);
  return o2.listener = i2, n2.wrapFn = o2, o2;
}
function Qx(e6, t2, i2) {
  var n2 = e6._events;
  if (void 0 === n2) return [];
  var o2 = n2[t2];
  return void 0 === o2 ? [] : "function" == typeof o2 ? i2 ? [o2.listener || o2] : [o2] : i2 ? function(e7) {
    for (var t3 = new Array(e7.length), i3 = 0; i3 < t3.length; ++i3) t3[i3] = e7[i3].listener || e7[i3];
    return t3;
  }(o2) : Gx(o2, o2.length);
}
function Vx(e6) {
  var t2 = this._events;
  if (void 0 !== t2) {
    var i2 = t2[e6];
    if ("function" == typeof i2) return 1;
    if (void 0 !== i2) return i2.length;
  }
  return 0;
}
function Gx(e6, t2) {
  for (var i2 = new Array(t2), n2 = 0; n2 < t2; ++n2) i2[n2] = e6[n2];
  return i2;
}
function qx(e6, t2, i2, n2) {
  if ("function" == typeof e6.on) n2.once ? e6.once(t2, i2) : e6.on(t2, i2);
  else {
    if ("function" != typeof e6.addEventListener) throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof e6);
    e6.addEventListener(t2, function o2(r2) {
      n2.once && e6.removeEventListener(t2, o2), i2(r2);
    });
  }
}
Object.defineProperty(Lx, "defaultMaxListeners", { enumerable: true, get: function() {
  return Fx;
}, set: function(e6) {
  if ("number" != typeof e6 || e6 < 0 || Dx(e6)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e6 + ".");
  Fx = e6;
} }), Lx.init = function() {
  void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
}, Lx.prototype.setMaxListeners = function(e6) {
  if ("number" != typeof e6 || e6 < 0 || Dx(e6)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e6 + ".");
  return this._maxListeners = e6, this;
}, Lx.prototype.getMaxListeners = function() {
  return Ox(this);
}, Lx.prototype.emit = function(e6) {
  for (var t2 = [], i2 = 1; i2 < arguments.length; i2++) t2.push(arguments[i2]);
  var n2 = "error" === e6, o2 = this._events;
  if (void 0 !== o2) n2 = n2 && void 0 === o2.error;
  else if (!n2) return false;
  if (n2) {
    var r2;
    if (t2.length > 0 && (r2 = t2[0]), r2 instanceof Error) throw r2;
    var s2 = new Error("Unhandled error." + (r2 ? " (" + r2.message + ")" : ""));
    throw s2.context = r2, s2;
  }
  var a2 = o2[e6];
  if (void 0 === a2) return false;
  if ("function" == typeof a2) Px(a2, this, t2);
  else {
    var l2 = a2.length, c2 = Gx(a2, l2);
    for (i2 = 0; i2 < l2; ++i2) Px(c2[i2], this, t2);
  }
  return true;
}, Lx.prototype.addListener = function(e6, t2) {
  return Ux(this, e6, t2, false);
}, Lx.prototype.on = Lx.prototype.addListener, Lx.prototype.prependListener = function(e6, t2) {
  return Ux(this, e6, t2, true);
}, Lx.prototype.once = function(e6, t2) {
  return Nx(t2), this.on(e6, Hx(this, e6, t2)), this;
}, Lx.prototype.prependOnceListener = function(e6, t2) {
  return Nx(t2), this.prependListener(e6, Hx(this, e6, t2)), this;
}, Lx.prototype.removeListener = function(e6, t2) {
  var i2, n2, o2, r2, s2;
  if (Nx(t2), void 0 === (n2 = this._events)) return this;
  if (void 0 === (i2 = n2[e6])) return this;
  if (i2 === t2 || i2.listener === t2) 0 == --this._eventsCount ? this._events = /* @__PURE__ */ Object.create(null) : (delete n2[e6], n2.removeListener && this.emit("removeListener", e6, i2.listener || t2));
  else if ("function" != typeof i2) {
    for (o2 = -1, r2 = i2.length - 1; r2 >= 0; r2--) if (i2[r2] === t2 || i2[r2].listener === t2) {
      s2 = i2[r2].listener, o2 = r2;
      break;
    }
    if (o2 < 0) return this;
    0 === o2 ? i2.shift() : function(e7, t3) {
      for (; t3 + 1 < e7.length; t3++) e7[t3] = e7[t3 + 1];
      e7.pop();
    }(i2, o2), 1 === i2.length && (n2[e6] = i2[0]), void 0 !== n2.removeListener && this.emit("removeListener", e6, s2 || t2);
  }
  return this;
}, Lx.prototype.off = Lx.prototype.removeListener, Lx.prototype.removeAllListeners = function(e6) {
  var t2, i2, n2;
  if (void 0 === (i2 = this._events)) return this;
  if (void 0 === i2.removeListener) return 0 === arguments.length ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : void 0 !== i2[e6] && (0 == --this._eventsCount ? this._events = /* @__PURE__ */ Object.create(null) : delete i2[e6]), this;
  if (0 === arguments.length) {
    var o2, r2 = Object.keys(i2);
    for (n2 = 0; n2 < r2.length; ++n2) "removeListener" !== (o2 = r2[n2]) && this.removeAllListeners(o2);
    return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
  }
  if ("function" == typeof (t2 = i2[e6])) this.removeListener(e6, t2);
  else if (void 0 !== t2) for (n2 = t2.length - 1; n2 >= 0; n2--) this.removeListener(e6, t2[n2]);
  return this;
}, Lx.prototype.listeners = function(e6) {
  return Qx(this, e6, true);
}, Lx.prototype.rawListeners = function(e6) {
  return Qx(this, e6, false);
}, Lx.listenerCount = function(e6, t2) {
  return "function" == typeof e6.listenerCount ? e6.listenerCount(t2) : Vx.call(e6, t2);
}, Lx.prototype.listenerCount = Vx, Lx.prototype.eventNames = function() {
  return this._eventsCount > 0 ? Bx(this._events) : [];
};
var $x = Rx.exports;
const Wx = (e6, t2 = 250) => {
  let i2;
  return function(...n2) {
    clearTimeout(i2), i2 = setTimeout(() => e6.apply(this, n2), t2);
  };
};
class jx extends $x.EventEmitter {
  constructor(e6, t2 = "mousedown", i2 = "click", n2 = 200) {
    super(), this._isHoldEvent = false, this._holdTimeoutId = -1, this._doubleClickTimeoutId = -1, this._numClick = 0, e6.addEventListener(t2, this._handleMouseDown.bind(this)), e6.addEventListener(i2, this._handleMouseClick.bind(this)), this._delay = n2;
  }
  _handleMouseDown() {
    this._isHoldEvent = false, window.clearTimeout(this._doubleClickTimeoutId), this._holdTimeoutId = window.setTimeout(() => {
      this._isHoldEvent = true, this.emit("pointerevent-is-hold-event");
    }, this._delay);
  }
  _handleMouseClick(e6) {
    if (this._isHoldEvent) return this._numClick = 0, void (this._isHoldEvent = false);
    window.clearTimeout(this._holdTimeoutId), this._numClick++, 1 === this._numClick ? this._doubleClickTimeoutId = window.setTimeout(() => {
      this._numClick = 0, this.emit("single-click", e6);
    }, this._delay) : (this._numClick = 0, this.emit("double-click", e6));
  }
}
var Xx = Object.defineProperty, Yx = Object.getOwnPropertyDescriptor, Kx = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? Yx(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && Xx(t2, i2, r2), r2;
};
function Zx(e6, t2 = null) {
  const i2 = document.createElement("canvas");
  i2.width = 64, i2.height = 64;
  const n2 = i2.getContext("2d");
  if (null == n2) return;
  if (n2.beginPath(), n2.arc(32, 32, 16, 0, 2 * Math.PI), n2.closePath(), n2.fillStyle = e6.getStyle(), n2.fill(), null !== t2) {
    const e7 = 20;
    n2.font = e7 + "px Arial";
    const o3 = n2.measureText(t2), r2 = o3.width, s2 = o3.actualBoundingBoxAscent - o3.actualBoundingBoxDescent, a2 = (i2.width - r2) / 2, l2 = (i2.height + s2) / 2;
    n2.fillStyle = "#ffffff", n2.fillText(t2, a2, l2);
  }
  const o2 = new Jc(i2);
  return new Ql({ map: o2, toneMapped: false });
}
let Jx = class extends Tx {
  constructor() {
    super(), this._coordinateAxes = [], this._coordinateLabel = [], this._lastSphericalPosition = { theta: -1, phi: -1, radius: -1 }, this._lastFieldOfViewInDeg = -1, this._referenceFieldOfViewInRad = -1, this._referenceMaxRadius = -1, this._isRadiusConst = false, this._maxZoomLevel = 100, this._minZoomLevel = 0.5, this._currentZoomLevel = 1, this._minPhiInDeg = 0, this._maxPhiInDeg = 1800, this._deltaX = 0, this._deltaY = 0, this._emitCamOrbitAngleChanged = Wx(() => {
      console.log("Cam Phi Theta", 180 * this._lastSphericalPosition.phi / Math.PI, 180 * this._lastSphericalPosition.theta / Math.PI), this.dispatchEvent(new Event("cam-orbit-angle-changed"));
    }, 250), this.addEventListener("load", this._handleModelLoaded), this.addEventListener("camera-change", this._handleCameraChanged);
    const e6 = new jx(this);
    e6.on("single-click", this._handleSceneClicked.bind(this)), this.addEventListener("pointerup", () => this[ly].style.cursor = "default"), this.addEventListener("pointerdown", () => this[ly].style.cursor = "pointer"), e6.on("pointerevent-is-hold-event", () => {
      console.log("Single click over"), this[ly].style.cursor = "grabbing";
    });
  }
  firstUpdated() {
    this[hy].add(this.measurementTool.sceneElementGroup), this.measurementTool.on("scene-update-requested", () => this.updateRendering()), this.measurementTool.on("calculate-hotspot-requested", this._intersectObject.bind(this)), this.measurementTool.on("hotspot-added", this._handleHotspotAdded.bind(this));
  }
  connectWithSettings(e6) {
    e6.modelOrientation.on("model-orientation-changed", (e7) => {
      this.orientation = e7.angleInRadAsString(), this.measurementTool.eulerOrientation = e7;
    }), e6.environment3D.on("change-axes-visibility-requested", this._changeAxesVisibility.bind(this)), e6.environment3D.on("change-viewer-background-color-requested", this._changeBackgroundColor.bind(this)), e6.environment3D.on("change-exposure-requested", (e7) => this.exposure = e7);
    const [t2, i2] = e6.environment3D.backgroundColor;
    this._changeBackgroundColor(t2, i2);
  }
  resize(e6, t2) {
    this.style.height = e6 + "px", this.style.width = t2 + "px", this[hy].idealAspect = this[hy].aspect;
  }
  getCamera() {
    return this[hy].camera;
  }
  setReferenceFieldOfView(e6, t2 = false) {
    if (e6 == this._referenceFieldOfViewInRad) return void (t2 && (this.fieldOfView = e6 + "rad"));
    this._referenceFieldOfViewInRad = e6, this[hy].idealAspect = this[hy].aspect, this.minFieldOfView = e6 / this._maxZoomLevel + "rad", this.maxFieldOfView = e6 / this._minZoomLevel + "rad", t2 && (this.fieldOfView = e6 + "rad");
    const i2 = this.getDimensions(), n2 = Math.sqrt(i2.x * i2.x + i2.y * i2.y + i2.z * i2.z);
    this.clientWidth > this.clientHeight ? this._referenceMaxRadius = n2 / e6 : this._referenceMaxRadius = n2 / e6 * this.clientHeight / this.clientWidth, this._isRadiusConst || (this.maxCameraOrbit = "Infinity " + this._maxPhiInDeg + "deg " + this._referenceMaxRadius + "m");
  }
  rotateModel(e6, t2) {
    const i2 = 2 * Math.PI / this[hy].height, n2 = i2 * e6, o2 = i2 * t2;
    let r2 = this[Lm];
    r2.changeSource = mf.USER_INTERACTION, r2.adjustOrbit(n2, o2, 0);
  }
  zoomTo(e6) {
    -1 != this._referenceFieldOfViewInRad ? (this._currentZoomLevel = e6, this[hy].idealAspect = this[hy].aspect, this.fieldOfView = this._referenceFieldOfViewInRad / e6 + "rad") : console.log("Return 3d  zoom, ", this._currentZoomLevel);
  }
  setViewerOffset(e6, t2) {
    this._deltaX == e6 && this._deltaY == t2 || (this._deltaX = e6, this._deltaY = t2, this[hy].camera.setViewOffset(this.clientWidth, this.clientHeight, e6, t2, this.clientWidth, this.clientHeight), this.updateRendering());
  }
  updateRendering() {
    this[hy].queueRender();
  }
  setMinZoomLevel(e6) {
    if (this._minZoomLevel != e6 && -1 != this._referenceFieldOfViewInRad) {
      const t2 = this._referenceFieldOfViewInRad / e6, i2 = this.getFieldOfView() / 180 * Math.PI;
      if (t2 < i2) if (0 == this._isRadiusConst) {
        const e7 = this.getCameraOrbit(), n2 = this.getCameraOrbit().radius;
        e7.radius = n2 * i2 / t2, this.cameraOrbit = e7.toString();
      } else this.fieldOfView = t2 + "rad";
      this.maxFieldOfView = t2 + "rad", this._minZoomLevel = e6;
    }
  }
  setCameraOrbitPos(e6) {
    this._isRadiusConst && (this.minCameraOrbit = "-Infinity " + this._minPhiInDeg + "deg " + e6.radius + "m", this.maxCameraOrbit = "Infinity " + this._maxPhiInDeg + "deg " + e6.radius + "m"), this.cameraOrbit = e6.toString();
  }
  updateRadiusMode(e6) {
    if (e6 != this._isRadiusConst) if (this._isRadiusConst = e6, e6) {
      const e7 = this.getCameraOrbit().radius;
      this.minCameraOrbit = "-Infinity " + this._minPhiInDeg + "deg " + e7 + "m", this.maxCameraOrbit = "Infinity " + this._maxPhiInDeg + "deg " + e7 + "m";
    } else {
      this.minCameraOrbit = "-Infinity " + this._minPhiInDeg + "deg  auto";
      const e7 = this._referenceMaxRadius > 0 ? this._referenceMaxRadius + "m" : "auto";
      this.maxCameraOrbit = "Infinity " + this._maxPhiInDeg + "deg " + e7;
    }
  }
  _changeAxesVisibility(e6) {
    this._changeCoordinateVisibility(e6), this.updateRendering();
  }
  _changeBackgroundColor(e6, t2) {
    console.log("Change background color", e6, t2), this.style.background = t2 ? "radial-gradient(circle at center, " + t2 + ", " + e6 + ")" : e6;
  }
  _handleHotspotAdded(e6) {
    e6.addEventListener("hotspot-position-changed", () => {
      this.updateHotspot({ name: e6.slot, position: e6.dataset.position, normal: e6.dataset.normal });
    }), this.appendChild(e6);
  }
  _intersectObject(e6, t2) {
    let i2 = this.getCameraTarget();
    console.log("Current translation 2", i2), e6.x -= i2.x, e6.y -= i2.y, e6.z -= i2.z, this[hy].remove(this.measurementTool.sceneElementGroup), this._removeCoordinateElements();
    const n2 = new hu(e6, t2).intersectObject(this[hy], true);
    this[hy].add(this.measurementTool.sceneElementGroup), this._addCoordinateElements();
    var o2 = n2.find((e7) => e7.object.visible && !e7.object.userData.shadow);
    if (null == o2 || null == o2.face) return void console.log("Object intersection not found, not adding point from 3D scene.");
    let r2, s2;
    null == o2.uv ? (r2 = o2.point, s2 = o2.face.normal) : (o2.face.normal.applyNormalMatrix(new Wi().getNormalMatrix(o2.object.matrixWorld)), r2 = o2.point, s2 = o2.face.normal), r2.x += i2.x, r2.y += i2.y, r2.z += i2.z, this.measurementTool.addPointFrom3DScene(r2, s2, false);
  }
  _coordinateLabelIsClicked(e6) {
    if (0 == this._coordinateAxes.length || !this._coordinateAxes[0].visible) return false;
    const t2 = this[hy].getNDC(e6.clientX, e6.clientY), i2 = new hu();
    i2.setFromCamera(t2, this.getCamera());
    const n2 = i2.intersectObjects(this._coordinateLabel, true);
    if (console.log("Label hit?", n2.length), 0 == n2.length) return false;
    const o2 = n2[0].object;
    let r2 = this.getCameraOrbit();
    switch (o2.userData.type) {
      case "posX":
        r2.phi = 0.5 * Math.PI, r2.theta = 0.5 * Math.PI;
        break;
      case "posY":
        r2.phi = 0, r2.theta = 0;
        break;
      case "posZ":
        r2.phi = 0.5 * Math.PI, r2.theta = 0;
        break;
      case "negX":
        r2.phi = 0.5 * Math.PI, r2.theta = 1.5 * Math.PI;
        break;
      case "negY":
        r2.phi = Math.PI, r2.theta = 0;
        break;
      case "negZ":
        r2.phi = 0.5 * Math.PI, r2.theta = Math.PI;
        break;
      default:
        console.log("default");
    }
    return this.cameraOrbit = r2.toString(), this._emitCamOrbitAngleChanged(), true;
  }
  _handleSceneClicked(e6) {
    if (console.log("Single Click into scene"), this._coordinateLabelIsClicked(e6)) return;
    if (!this.measurementTool.isEditModeActive) return;
    const t2 = e6.clientX, i2 = e6.clientY;
    this[hy].remove(this.measurementTool.sceneElementGroup), this._removeCoordinateElements();
    const n2 = this.positionAndNormalFromPoint(t2, i2);
    if (this[hy].add(this.measurementTool.sceneElementGroup), this._addCoordinateElements(), null == n2) return void console.log("no hit result: mouse = ", t2, ", ", i2);
    const { position: o2, normal: r2 } = n2;
    this.measurementTool.addPointFrom3DScene(o2, r2);
  }
  _addCoordinateElements() {
    this._coordinateAxes.forEach((e6) => {
      this[hy].add(e6);
    }), this._coordinateLabel.forEach((e6) => {
      this[hy].add(e6);
    });
  }
  _removeCoordinateElements() {
    this._coordinateAxes.forEach((e6) => {
      this[hy].remove(e6);
    }), this._coordinateLabel.forEach((e6) => {
      this[hy].remove(e6);
    });
  }
  _changeCoordinateVisibility(e6) {
    this._coordinateAxes.forEach((t2) => {
      t2.visible = e6;
    }), this._coordinateLabel.forEach((t2) => {
      t2.visible = e6;
    });
  }
  _handleModelLoaded() {
    const e6 = this.getDimensions(), t2 = 0.5 * Math.max(Math.max(e6.x, e6.y), e6.z);
    this._coordinateAxes.push(new fu(new yn(t2, 0, 0), new yn(-t2, 0, 0), 2 * t2, "red", 0.5, 0.25)), this._coordinateAxes.push(new fu(new yn(0, t2, 0), new yn(0, -t2, 0), 2 * t2, "green", 0.5, 0.25)), this._coordinateAxes.push(new fu(new yn(0, 0, t2), new yn(0, 0, -t2), 2 * t2, "blue", 0.5, 0.25));
    const i2 = new yn(0.5, 0.5, 0.5);
    let n2 = new Kn();
    n2.scale(i2);
    let o2 = new ic(Zx(new Go("red"), "X"));
    o2.userData.type = "posX", o2.applyMatrix4(n2), o2.position.x = t2, this._coordinateLabel.push(o2);
    let r2 = new ic(Zx(new Go(1, 0.2, 0.2), "-x"));
    r2.userData.type = "negX", r2.applyMatrix4(n2), r2.position.x = -t2, this._coordinateLabel.push(r2);
    let s2 = new ic(Zx(new Go("green"), "y"));
    s2.userData.type = "posY", s2.applyMatrix4(n2), s2.position.y = t2, this._coordinateLabel.push(s2);
    let a2 = new ic(Zx(new Go(0.2, 1, 0.2), "-y"));
    a2.userData.type = "negY", a2.applyMatrix4(n2), a2.position.y = -t2, this._coordinateLabel.push(a2);
    let l2 = new ic(Zx(new Go("blue"), "z"));
    l2.userData.type = "posZ", l2.applyMatrix4(n2), l2.position.z = t2, this._coordinateLabel.push(l2);
    let c2 = new ic(Zx(new Go(0.2, 0.2, 1), "-z"));
    c2.userData.type = "negZ", c2.applyMatrix4(n2), c2.position.z = -t2, this._coordinateLabel.push(c2), this._addCoordinateElements(), this._lastSphericalPosition = this.getCameraOrbit(), this[hy].idealAspect = this[hy].aspect, this[hy].queueRender(), this._emitCamOrbitAngleChanged(), this[ly].style.cursor = "default", this.minCameraOrbit = "-Infinity " + this._minPhiInDeg + "deg  auto", this.maxCameraOrbit = "Infinity " + this._maxPhiInDeg + "deg auto";
  }
  _handleCameraChanged(e6) {
    this.measurementTool.translation = new yn().setFromMatrixPosition(this[hy].target.matrixWorld);
    const t2 = this.getCameraOrbit(), i2 = this.getFieldOfView();
    if ("user-interaction" != e6.detail.source) return this._lastSphericalPosition = t2, void (this._lastFieldOfViewInDeg = i2);
    this._lastSphericalPosition.phi == t2.phi && this._lastSphericalPosition.theta == t2.theta || (console.log("CamChanged", this.getCameraOrbit(), this._lastSphericalPosition), t2.radius > 0 && this._emitCamOrbitAngleChanged()), this._lastSphericalPosition.radius == t2.radius && this._lastFieldOfViewInDeg != i2 && (this._currentZoomLevel = 180 * this._referenceFieldOfViewInRad / Math.PI / i2, console.log("FOV change", this._currentZoomLevel, 180 * this._referenceFieldOfViewInRad / Math.PI, i2), this.dispatchEvent(new CustomEvent("fov-based-zoom-changed", { detail: { zoomLevel: this._currentZoomLevel } }))), this._lastSphericalPosition = t2, this._lastFieldOfViewInDeg = i2;
  }
};
Jx.styles = r`
 `, Kx([de({ type: Object })], Jx.prototype, "measurementTool", 2), Jx = Kx([he("viewer-3d")], Jx);
var eC = { exports: {} };
!function(e6) {
  function t2(e7) {
    return new t2.Viewer(e7);
  }
  var i2, n2;
  !function(e7) {
    e7.version = { versionStr: "5.0.0", major: parseInt("5", 10), minor: parseInt("0", 10), revision: parseInt("0", 10) };
    var i3, n3 = { "[object Boolean]": "boolean", "[object Number]": "number", "[object String]": "string", "[object Function]": "function", "[object AsyncFunction]": "function", "[object Promise]": "promise", "[object Array]": "array", "[object Date]": "date", "[object RegExp]": "regexp", "[object Object]": "object" }, o2 = Object.prototype.toString, r2 = Object.prototype.hasOwnProperty;
    e7.isFunction = function(t3) {
      return "function" === e7.type(t3);
    }, e7.isArray = Array.isArray || function(t3) {
      return "array" === e7.type(t3);
    }, e7.isWindow = function(e8) {
      return e8 && "object" == typeof e8 && "setInterval" in e8;
    }, e7.type = function(e8) {
      return null == e8 ? String(e8) : n3[o2.call(e8)] || "object";
    }, e7.isPlainObject = function(i4) {
      if (!i4 || "object" !== t2.type(i4) || i4.nodeType || e7.isWindow(i4)) return false;
      if (i4.constructor && !r2.call(i4, "constructor") && !r2.call(i4.constructor.prototype, "isPrototypeOf")) return false;
      var n4;
      for (var o3 in i4) n4 = o3;
      return void 0 === n4 || r2.call(i4, n4);
    }, e7.isEmptyObject = function(e8) {
      for (var t3 in e8) return false;
      return true;
    }, e7.freezeObject = function(t3) {
      return Object.freeze ? e7.freezeObject = Object.freeze : e7.freezeObject = function(e8) {
        return e8;
      }, e7.freezeObject(t3);
    }, e7.supportsCanvas = (i3 = document.createElement("canvas"), !(!e7.isFunction(i3.getContext) || !i3.getContext("2d"))), e7.isCanvasTainted = function(e8) {
      var t3 = false;
      try {
        e8.getContext("2d").getImageData(0, 0, 1, 1);
      } catch (e9) {
        t3 = true;
      }
      return t3;
    }, e7.supportsAddEventListener = !(!document.documentElement.addEventListener || !document.addEventListener), e7.supportsRemoveEventListener = !(!document.documentElement.removeEventListener || !document.removeEventListener), e7.supportsEventListenerOptions = function() {
      var t3 = 0;
      if (e7.supportsAddEventListener) try {
        var i4 = { get capture() {
          return t3++, false;
        }, get once() {
          return t3++, false;
        }, get passive() {
          return t3++, false;
        } };
        window.addEventListener("test", null, i4), window.removeEventListener("test", null, i4);
      } catch (e8) {
        t3 = 0;
      }
      return t3 >= 3;
    }(), e7.getCurrentPixelDensityRatio = function() {
      if (e7.supportsCanvas) {
        var t3 = document.createElement("canvas").getContext("2d"), i4 = window.devicePixelRatio || 1, n4 = t3.webkitBackingStorePixelRatio || t3.mozBackingStorePixelRatio || t3.msBackingStorePixelRatio || t3.oBackingStorePixelRatio || t3.backingStorePixelRatio || 1;
        return Math.max(i4, 1) / n4;
      }
      return 1;
    }, e7.pixelDensityRatio = e7.getCurrentPixelDensityRatio();
  }(t2), function(e7) {
    e7.extend = function() {
      var i4, n4, o3, r3, s2, a2, l2 = arguments[0] || {}, c2 = arguments.length, h2 = false, u2 = 1;
      for ("boolean" == typeof l2 && (h2 = l2, l2 = arguments[1] || {}, u2 = 2), "object" == typeof l2 || t2.isFunction(l2) || (l2 = {}), c2 === u2 && (l2 = this, --u2); u2 < c2; u2++) if (null !== (i4 = arguments[u2]) || void 0 !== i4) for (n4 in i4) {
        var d2 = Object.getOwnPropertyDescriptor(i4, n4);
        void 0 !== d2 ? d2.get || d2.set ? Object.defineProperty(l2, n4, d2) : l2 !== (r3 = d2.value) && (h2 && r3 && (t2.isPlainObject(r3) || (s2 = t2.isArray(r3))) ? (o3 = l2[n4], s2 ? (s2 = false, a2 = o3 && t2.isArray(o3) ? o3 : []) : a2 = o3 && t2.isPlainObject(o3) ? o3 : {}, l2[n4] = t2.extend(h2, a2, r3)) : void 0 !== r3 && (l2[n4] = r3)) : e7.console.warn('Could not copy inherited property "' + n4 + '".');
      }
      return l2;
    };
    e7.extend(e7, { DEFAULT_SETTINGS: { xmlPath: null, tileSources: null, tileHost: null, initialPage: 0, crossOriginPolicy: false, ajaxWithCredentials: false, loadTilesWithAjax: false, ajaxHeaders: {}, splitHashDataForPost: false, panHorizontal: true, panVertical: true, constrainDuringPan: false, wrapHorizontal: false, wrapVertical: false, visibilityRatio: 0.5, minPixelRatio: 0.5, defaultZoomLevel: 0, minZoomLevel: null, maxZoomLevel: null, homeFillsViewer: false, clickTimeThreshold: 300, clickDistThreshold: 5, dblClickTimeThreshold: 300, dblClickDistThreshold: 20, springStiffness: 6.5, animationTime: 1.2, gestureSettingsMouse: { dragToPan: true, scrollToZoom: true, clickToZoom: true, dblClickToZoom: false, dblClickDragToZoom: false, pinchToZoom: false, zoomToRefPoint: true, flickEnabled: false, flickMinSpeed: 120, flickMomentum: 0.25, pinchRotate: false }, gestureSettingsTouch: { dragToPan: true, scrollToZoom: false, clickToZoom: false, dblClickToZoom: true, dblClickDragToZoom: true, pinchToZoom: true, zoomToRefPoint: true, flickEnabled: true, flickMinSpeed: 120, flickMomentum: 0.25, pinchRotate: false }, gestureSettingsPen: { dragToPan: true, scrollToZoom: false, clickToZoom: true, dblClickToZoom: false, dblClickDragToZoom: false, pinchToZoom: false, zoomToRefPoint: true, flickEnabled: false, flickMinSpeed: 120, flickMomentum: 0.25, pinchRotate: false }, gestureSettingsUnknown: { dragToPan: true, scrollToZoom: false, clickToZoom: false, dblClickToZoom: true, dblClickDragToZoom: false, pinchToZoom: true, zoomToRefPoint: true, flickEnabled: true, flickMinSpeed: 120, flickMomentum: 0.25, pinchRotate: false }, zoomPerClick: 2, zoomPerScroll: 1.2, zoomPerDblClickDrag: 1.2, zoomPerSecond: 1, blendTime: 0, alwaysBlend: false, autoHideControls: true, immediateRender: false, minZoomImageRatio: 0.9, maxZoomPixelRatio: 1.1, smoothTileEdgesMinZoom: 1.1, iOSDevice: function() {
      if ("object" != typeof navigator) return false;
      var e8 = navigator.userAgent;
      return "string" == typeof e8 && (-1 !== e8.indexOf("iPhone") || -1 !== e8.indexOf("iPad") || -1 !== e8.indexOf("iPod"));
    }(), pixelsPerWheelLine: 40, pixelsPerArrowPress: 40, autoResize: true, preserveImageSizeOnResize: false, minScrollDeltaTime: 50, rotationIncrement: 90, maxTilesPerFrame: 1, showSequenceControl: true, sequenceControlAnchor: null, preserveViewport: false, preserveOverlays: false, navPrevNextWrap: false, showNavigationControl: true, navigationControlAnchor: null, showZoomControl: true, showHomeControl: true, showFullPageControl: true, showRotationControl: false, showFlipControl: false, controlsFadeDelay: 2e3, controlsFadeLength: 1500, mouseNavEnabled: true, showNavigator: false, navigatorElement: null, navigatorId: null, navigatorPosition: null, navigatorSizeRatio: 0.2, navigatorMaintainSizeRatio: false, navigatorTop: null, navigatorLeft: null, navigatorHeight: null, navigatorWidth: null, navigatorAutoResize: true, navigatorAutoFade: true, navigatorRotate: true, navigatorBackground: "#000", navigatorOpacity: 0.8, navigatorBorderColor: "#555", navigatorDisplayRegionColor: "#900", degrees: 0, flipped: false, overlayPreserveContentDirection: true, opacity: 1, compositeOperation: null, drawer: ["webgl", "canvas", "html"], drawerOptions: { webgl: {}, canvas: {}, html: {}, custom: {} }, preload: false, imageSmoothingEnabled: true, placeholderFillStyle: null, subPixelRoundingForTransparency: null, showReferenceStrip: false, referenceStripScroll: "horizontal", referenceStripElement: null, referenceStripHeight: null, referenceStripWidth: null, referenceStripPosition: "BOTTOM_LEFT", referenceStripSizeRatio: 0.2, collectionRows: 3, collectionColumns: 0, collectionLayout: "horizontal", collectionMode: false, collectionTileSize: 800, collectionTileMargin: 80, imageLoaderLimit: 0, maxImageCacheCount: 200, timeout: 3e4, tileRetryMax: 0, tileRetryDelay: 2500, prefixUrl: "/images/", navImages: { zoomIn: { REST: "zoomin_rest.png", GROUP: "zoomin_grouphover.png", HOVER: "zoomin_hover.png", DOWN: "zoomin_pressed.png" }, zoomOut: { REST: "zoomout_rest.png", GROUP: "zoomout_grouphover.png", HOVER: "zoomout_hover.png", DOWN: "zoomout_pressed.png" }, home: { REST: "home_rest.png", GROUP: "home_grouphover.png", HOVER: "home_hover.png", DOWN: "home_pressed.png" }, fullpage: { REST: "fullpage_rest.png", GROUP: "fullpage_grouphover.png", HOVER: "fullpage_hover.png", DOWN: "fullpage_pressed.png" }, rotateleft: { REST: "rotateleft_rest.png", GROUP: "rotateleft_grouphover.png", HOVER: "rotateleft_hover.png", DOWN: "rotateleft_pressed.png" }, rotateright: { REST: "rotateright_rest.png", GROUP: "rotateright_grouphover.png", HOVER: "rotateright_hover.png", DOWN: "rotateright_pressed.png" }, flip: { REST: "flip_rest.png", GROUP: "flip_grouphover.png", HOVER: "flip_hover.png", DOWN: "flip_pressed.png" }, previous: { REST: "previous_rest.png", GROUP: "previous_grouphover.png", HOVER: "previous_hover.png", DOWN: "previous_pressed.png" }, next: { REST: "next_rest.png", GROUP: "next_grouphover.png", HOVER: "next_hover.png", DOWN: "next_pressed.png" } }, debugMode: false, debugGridColor: ["#437AB2", "#1B9E77", "#D95F02", "#7570B3", "#E7298A", "#66A61E", "#E6AB02", "#A6761D", "#666666"], silenceMultiImageWarnings: false }, delegate: function(e8, t3) {
      return function() {
        var i4 = arguments;
        return void 0 === i4 && (i4 = []), t3.apply(e8, i4);
      };
    }, BROWSERS: { UNKNOWN: 0, IE: 1, FIREFOX: 2, SAFARI: 3, CHROME: 4, OPERA: 5, EDGE: 6, CHROMEEDGE: 7 }, SUBPIXEL_ROUNDING_OCCURRENCES: { NEVER: 0, ONLY_AT_REST: 1, ALWAYS: 2 }, _viewers: /* @__PURE__ */ new Map(), getViewer: function(t3) {
      return e7._viewers.get(this.getElement(t3));
    }, getElement: function(e8) {
      return "string" == typeof e8 && (e8 = document.getElementById(e8)), e8;
    }, getElementPosition: function(t3) {
      var i4, n4, o3 = new e7.Point();
      for (n4 = r2(t3 = e7.getElement(t3), i4 = "fixed" === e7.getElementStyle(t3).position); n4; ) o3.x += t3.offsetLeft, o3.y += t3.offsetTop, i4 && (o3 = o3.plus(e7.getPageScroll())), n4 = r2(t3 = n4, i4 = "fixed" === e7.getElementStyle(t3).position);
      return o3;
    }, getElementOffset: function(t3) {
      var i4, n4, o3 = (t3 = e7.getElement(t3)) && t3.ownerDocument, r3 = { top: 0, left: 0 };
      return o3 ? (i4 = o3.documentElement, void 0 !== t3.getBoundingClientRect && (r3 = t3.getBoundingClientRect()), n4 = o3 === o3.window ? o3 : 9 === o3.nodeType && (o3.defaultView || o3.parentWindow), new e7.Point(r3.left + (n4.pageXOffset || i4.scrollLeft) - (i4.clientLeft || 0), r3.top + (n4.pageYOffset || i4.scrollTop) - (i4.clientTop || 0))) : new e7.Point();
    }, getElementSize: function(t3) {
      return t3 = e7.getElement(t3), new e7.Point(t3.clientWidth, t3.clientHeight);
    }, getElementStyle: document.documentElement.currentStyle ? function(t3) {
      return (t3 = e7.getElement(t3)).currentStyle;
    } : function(t3) {
      return t3 = e7.getElement(t3), window.getComputedStyle(t3, "");
    }, getCssPropertyWithVendorPrefix: function(t3) {
      var i4 = {};
      return e7.getCssPropertyWithVendorPrefix = function(t4) {
        if (void 0 !== i4[t4]) return i4[t4];
        var n4 = document.createElement("div").style, o3 = null;
        if (void 0 !== n4[t4]) o3 = t4;
        else for (var r3 = ["Webkit", "Moz", "MS", "O", "webkit", "moz", "ms", "o"], s2 = e7.capitalizeFirstLetter(t4), a2 = 0; a2 < r3.length; a2++) {
          var l2 = r3[a2] + s2;
          if (void 0 !== n4[l2]) {
            o3 = l2;
            break;
          }
        }
        return i4[t4] = o3, o3;
      }, e7.getCssPropertyWithVendorPrefix(t3);
    }, capitalizeFirstLetter: function(e8) {
      return e8.charAt(0).toUpperCase() + e8.slice(1);
    }, positiveModulo: function(e8, t3) {
      var i4 = e8 % t3;
      return i4 < 0 && (i4 += t3), i4;
    }, pointInElement: function(t3, i4) {
      t3 = e7.getElement(t3);
      var n4 = e7.getElementOffset(t3), o3 = e7.getElementSize(t3);
      return i4.x >= n4.x && i4.x < n4.x + o3.x && i4.y < n4.y + o3.y && i4.y >= n4.y;
    }, getMousePosition: function(t3) {
      if ("number" == typeof t3.pageX) e7.getMousePosition = function(t4) {
        var i4 = new e7.Point();
        return i4.x = t4.pageX, i4.y = t4.pageY, i4;
      };
      else {
        if ("number" != typeof t3.clientX) throw new Error("Unknown event mouse position, no known technique.");
        e7.getMousePosition = function(t4) {
          var i4 = new e7.Point();
          return i4.x = t4.clientX + document.body.scrollLeft + document.documentElement.scrollLeft, i4.y = t4.clientY + document.body.scrollTop + document.documentElement.scrollTop, i4;
        };
      }
      return e7.getMousePosition(t3);
    }, getPageScroll: function() {
      var t3 = document.documentElement || {}, i4 = document.body || {};
      if ("number" == typeof window.pageXOffset) e7.getPageScroll = function() {
        return new e7.Point(window.pageXOffset, window.pageYOffset);
      };
      else if (i4.scrollLeft || i4.scrollTop) e7.getPageScroll = function() {
        return new e7.Point(document.body.scrollLeft, document.body.scrollTop);
      };
      else {
        if (!t3.scrollLeft && !t3.scrollTop) return new e7.Point(0, 0);
        e7.getPageScroll = function() {
          return new e7.Point(document.documentElement.scrollLeft, document.documentElement.scrollTop);
        };
      }
      return e7.getPageScroll();
    }, setPageScroll: function(t3) {
      if (void 0 !== window.scrollTo) e7.setPageScroll = function(e8) {
        window.scrollTo(e8.x, e8.y);
      };
      else {
        var i4 = e7.getPageScroll();
        if (i4.x === t3.x && i4.y === t3.y) return;
        document.body.scrollLeft = t3.x, document.body.scrollTop = t3.y;
        var n4 = e7.getPageScroll();
        if (n4.x !== i4.x && n4.y !== i4.y) return void (e7.setPageScroll = function(e8) {
          document.body.scrollLeft = e8.x, document.body.scrollTop = e8.y;
        });
        if (document.documentElement.scrollLeft = t3.x, document.documentElement.scrollTop = t3.y, (n4 = e7.getPageScroll()).x !== i4.x && n4.y !== i4.y) return void (e7.setPageScroll = function(e8) {
          document.documentElement.scrollLeft = e8.x, document.documentElement.scrollTop = e8.y;
        });
        e7.setPageScroll = function(e8) {
        };
      }
      e7.setPageScroll(t3);
    }, getWindowSize: function() {
      var t3 = document.documentElement || {}, i4 = document.body || {};
      if ("number" == typeof window.innerWidth) e7.getWindowSize = function() {
        return new e7.Point(window.innerWidth, window.innerHeight);
      };
      else if (t3.clientWidth || t3.clientHeight) e7.getWindowSize = function() {
        return new e7.Point(document.documentElement.clientWidth, document.documentElement.clientHeight);
      };
      else {
        if (!i4.clientWidth && !i4.clientHeight) throw new Error("Unknown window size, no known technique.");
        e7.getWindowSize = function() {
          return new e7.Point(document.body.clientWidth, document.body.clientHeight);
        };
      }
      return e7.getWindowSize();
    }, makeCenteredNode: function(t3) {
      t3 = e7.getElement(t3);
      var i4 = [e7.makeNeutralElement("div"), e7.makeNeutralElement("div"), e7.makeNeutralElement("div")];
      return e7.extend(i4[0].style, { display: "table", height: "100%", width: "100%" }), e7.extend(i4[1].style, { display: "table-row" }), e7.extend(i4[2].style, { display: "table-cell", verticalAlign: "middle", textAlign: "center" }), i4[0].appendChild(i4[1]), i4[1].appendChild(i4[2]), i4[2].appendChild(t3), i4[0];
    }, makeNeutralElement: function(e8) {
      var t3 = document.createElement(e8), i4 = t3.style;
      return i4.background = "transparent none", i4.border = "none", i4.margin = "0px", i4.padding = "0px", i4.position = "static", t3;
    }, now: function() {
      return Date.now ? e7.now = Date.now : e7.now = function() {
        return (/* @__PURE__ */ new Date()).getTime();
      }, e7.now();
    }, makeTransparentImage: function(t3) {
      var i4 = e7.makeNeutralElement("img");
      return i4.src = t3, i4;
    }, setElementOpacity: function(t3, i4, n4) {
      var o3;
      t3 = e7.getElement(t3), n4 && !e7.Browser.alpha && (i4 = Math.round(i4)), e7.Browser.opacity ? t3.style.opacity = i4 < 1 ? i4 : "" : i4 < 1 ? (o3 = "alpha(opacity=" + Math.round(100 * i4) + ")", t3.style.filter = o3) : t3.style.filter = "";
    }, setElementTouchActionNone: function(t3) {
      void 0 !== (t3 = e7.getElement(t3)).style.touchAction ? t3.style.touchAction = "none" : void 0 !== t3.style.msTouchAction && (t3.style.msTouchAction = "none");
    }, setElementPointerEvents: function(t3, i4) {
      void 0 !== (t3 = e7.getElement(t3)).style && void 0 !== t3.style.pointerEvents && (t3.style.pointerEvents = i4);
    }, setElementPointerEventsNone: function(t3) {
      e7.setElementPointerEvents(t3, "none");
    }, addClass: function(t3, i4) {
      (t3 = e7.getElement(t3)).className ? -1 === (" " + t3.className + " ").indexOf(" " + i4 + " ") && (t3.className += " " + i4) : t3.className = i4;
    }, indexOf: function(e8, t3, i4) {
      return Array.prototype.indexOf ? this.indexOf = function(e9, t4, i5) {
        return e9.indexOf(t4, i5);
      } : this.indexOf = function(e9, t4, i5) {
        var n4, o3, r3 = i5 || 0;
        if (!e9) throw new TypeError();
        if (0 === (o3 = e9.length) || r3 >= o3) return -1;
        for (r3 < 0 && (r3 = o3 - Math.abs(r3)), n4 = r3; n4 < o3; n4++) if (e9[n4] === t4) return n4;
        return -1;
      }, this.indexOf(e8, t3, i4);
    }, removeClass: function(t3, i4) {
      var n4, o3, r3 = [];
      for (n4 = (t3 = e7.getElement(t3)).className.split(/\s+/), o3 = 0; o3 < n4.length; o3++) n4[o3] && n4[o3] !== i4 && r3.push(n4[o3]);
      t3.className = r3.join(" ");
    }, normalizeEventListenerOptions: function(t3) {
      return void 0 !== t3 ? "boolean" == typeof t3 ? e7.supportsEventListenerOptions ? { capture: t3 } : t3 : e7.supportsEventListenerOptions ? t3 : void 0 !== t3.capture && t3.capture : !!e7.supportsEventListenerOptions && { capture: false };
    }, addEvent: function() {
      if (e7.supportsAddEventListener) return function(t3, i4, n4, o3) {
        o3 = e7.normalizeEventListenerOptions(o3), (t3 = e7.getElement(t3)).addEventListener(i4, n4, o3);
      };
      if (document.documentElement.attachEvent && document.attachEvent) return function(t3, i4, n4) {
        (t3 = e7.getElement(t3)).attachEvent("on" + i4, n4);
      };
      throw new Error("No known event model.");
    }(), removeEvent: function() {
      if (e7.supportsRemoveEventListener) return function(t3, i4, n4, o3) {
        o3 = e7.normalizeEventListenerOptions(o3), (t3 = e7.getElement(t3)).removeEventListener(i4, n4, o3);
      };
      if (document.documentElement.detachEvent && document.detachEvent) return function(t3, i4, n4) {
        (t3 = e7.getElement(t3)).detachEvent("on" + i4, n4);
      };
      throw new Error("No known event model.");
    }(), cancelEvent: function(e8) {
      e8.preventDefault();
    }, eventIsCanceled: function(e8) {
      return e8.defaultPrevented;
    }, stopEvent: function(e8) {
      e8.stopPropagation();
    }, createCallback: function(e8, t3) {
      console.error("The createCallback function is deprecated and will be removed in future versions. Please use alternativeFunction instead.");
      var i4, n4 = [];
      for (i4 = 2; i4 < arguments.length; i4++) n4.push(arguments[i4]);
      return function() {
        var i5, o3 = n4.concat([]);
        for (i5 = 0; i5 < arguments.length; i5++) o3.push(arguments[i5]);
        return t3.apply(e8, o3);
      };
    }, getUrlParameter: function(e8) {
      var t3 = o2[e8];
      return t3 || null;
    }, getUrlProtocol: function(e8) {
      var t3 = e8.match(/^([a-z]+:)\/\//i);
      return null === t3 ? window.location.protocol : t3[1].toLowerCase();
    }, createAjaxRequest: function() {
      if (window.XMLHttpRequest) return e7.createAjaxRequest = function() {
        return new XMLHttpRequest();
      }, new XMLHttpRequest();
      throw new Error("Browser doesn't support XMLHttpRequest.");
    }, makeAjaxRequest: function(t3, i4, n4) {
      var o3, r3, s2, a2;
      e7.isPlainObject(t3) && (i4 = t3.success, n4 = t3.error, o3 = t3.withCredentials, r3 = t3.headers, s2 = t3.responseType || null, a2 = t3.postData || null, t3 = t3.url);
      var l2 = e7.getUrlProtocol(t3), c2 = e7.createAjaxRequest();
      if (!e7.isFunction(i4)) throw new Error("makeAjaxRequest requires a success callback");
      c2.onreadystatechange = function() {
        4 === c2.readyState && (c2.onreadystatechange = function() {
        }, c2.status >= 200 && c2.status < 300 || 0 === c2.status && "http:" !== l2 && "https:" !== l2 ? i4(c2) : e7.isFunction(n4) ? n4(c2) : e7.console.error("AJAX request returned %d: %s", c2.status, t3));
      };
      var h2 = a2 ? "POST" : "GET";
      try {
        if (c2.open(h2, t3, true), s2 && (c2.responseType = s2), r3) for (var u2 in r3) Object.prototype.hasOwnProperty.call(r3, u2) && r3[u2] && c2.setRequestHeader(u2, r3[u2]);
        o3 && (c2.withCredentials = true), c2.send(a2);
      } catch (t4) {
        e7.console.error("%s while making AJAX request: %s", t4.name, t4.message), c2.onreadystatechange = function() {
        }, e7.isFunction(n4) && n4(c2, t4);
      }
      return c2;
    }, jsonp: function(t3) {
      var i4, n4 = t3.url, o3 = document.head || document.getElementsByTagName("head")[0] || document.documentElement, r3 = t3.callbackName || "openseadragon" + e7.now(), s2 = window[r3], a2 = "$1" + r3 + "$2", l2 = t3.param || "callback", c2 = t3.callback;
      n4 = n4.replace(/(=)\?(&|$)|\?\?/i, a2), n4 += (/\?/.test(n4) ? "&" : "?") + l2 + "=" + r3, window[r3] = function(t4) {
        if (s2) window[r3] = s2;
        else try {
          delete window[r3];
        } catch (e8) {
        }
        c2 && e7.isFunction(c2) && c2(t4);
      }, i4 = document.createElement("script"), void 0 === t3.async && false === t3.async || (i4.async = "async"), t3.scriptCharset && (i4.charset = t3.scriptCharset), i4.src = n4, i4.onload = i4.onreadystatechange = function(e8, t4) {
        (t4 || !i4.readyState || /loaded|complete/.test(i4.readyState)) && (i4.onload = i4.onreadystatechange = null, o3 && i4.parentNode && o3.removeChild(i4), i4 = void 0);
      }, o3.insertBefore(i4, o3.firstChild);
    }, createFromDZI: function() {
      throw "OpenSeadragon.createFromDZI is deprecated, use Viewer.open.";
    }, parseXml: function(t3) {
      if (!window.DOMParser) throw new Error("Browser doesn't support XML DOM.");
      return e7.parseXml = function(e8) {
        return new DOMParser().parseFromString(e8, "text/xml");
      }, e7.parseXml(t3);
    }, parseJSON: function(t3) {
      return e7.parseJSON = window.JSON.parse, e7.parseJSON(t3);
    }, imageFormatSupported: function(e8) {
      return !!n3[(e8 = e8 || "").toLowerCase()];
    }, setImageFormatsSupported: function(t3) {
      e7.extend(n3, t3);
    } });
    var i3 = function(e8) {
    };
    e7.console = window.console || { log: i3, debug: i3, info: i3, warn: i3, error: i3, assert: i3 }, e7.Browser = { vendor: e7.BROWSERS.UNKNOWN, version: 0, alpha: true };
    var n3 = { avif: true, bmp: false, jpeg: true, jpg: true, png: true, tif: false, wdp: false, webp: true }, o2 = {};
    function r2(e8, t3) {
      return t3 && e8 !== document.body ? document.body : e8.offsetParent;
    }
    !function() {
      var t3 = navigator.appVersion, i4 = navigator.userAgent;
      switch (navigator.appName) {
        case "Microsoft Internet Explorer":
          window.attachEvent && window.ActiveXObject && (e7.Browser.vendor = e7.BROWSERS.IE, e7.Browser.version = parseFloat(i4.substring(i4.indexOf("MSIE") + 5, i4.indexOf(";", i4.indexOf("MSIE")))));
          break;
        case "Netscape":
          window.addEventListener && (i4.indexOf("Edge") >= 0 ? (e7.Browser.vendor = e7.BROWSERS.EDGE, e7.Browser.version = parseFloat(i4.substring(i4.indexOf("Edge") + 5))) : i4.indexOf("Edg") >= 0 ? (e7.Browser.vendor = e7.BROWSERS.CHROMEEDGE, e7.Browser.version = parseFloat(i4.substring(i4.indexOf("Edg") + 4))) : i4.indexOf("Firefox") >= 0 ? (e7.Browser.vendor = e7.BROWSERS.FIREFOX, e7.Browser.version = parseFloat(i4.substring(i4.indexOf("Firefox") + 8))) : i4.indexOf("Safari") >= 0 ? (e7.Browser.vendor = i4.indexOf("Chrome") >= 0 ? e7.BROWSERS.CHROME : e7.BROWSERS.SAFARI, e7.Browser.version = parseFloat(i4.substring(i4.substring(0, i4.indexOf("Safari")).lastIndexOf("/") + 1, i4.indexOf("Safari")))) : null !== new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(i4) && (e7.Browser.vendor = e7.BROWSERS.IE, e7.Browser.version = parseFloat(RegExp.$1)));
          break;
        case "Opera":
          e7.Browser.vendor = e7.BROWSERS.OPERA, e7.Browser.version = parseFloat(t3);
      }
      var n4, r3, s2, a2 = window.location.search.substring(1).split("&");
      for (s2 = 0; s2 < a2.length; s2++) if ((r3 = (n4 = a2[s2]).indexOf("=")) > 0) {
        var l2 = n4.substring(0, r3), c2 = n4.substring(r3 + 1);
        try {
          o2[l2] = decodeURIComponent(c2);
        } catch (t4) {
          e7.console.error("Ignoring malformed URL parameter: %s=%s", l2, c2);
        }
      }
      e7.Browser.alpha = !(e7.Browser.vendor === e7.BROWSERS.CHROME && e7.Browser.version < 2), e7.Browser.opacity = true, e7.Browser.vendor === e7.BROWSERS.IE && e7.console.error("Internet Explorer is not supported by OpenSeadragon");
    }(), function(t3) {
      var i4 = t3.requestAnimationFrame || t3.mozRequestAnimationFrame || t3.webkitRequestAnimationFrame || t3.msRequestAnimationFrame, n4 = t3.cancelAnimationFrame || t3.mozCancelAnimationFrame || t3.webkitCancelAnimationFrame || t3.msCancelAnimationFrame;
      if (i4 && n4) e7.requestAnimationFrame = function() {
        return i4.apply(t3, arguments);
      }, e7.cancelAnimationFrame = function() {
        return n4.apply(t3, arguments);
      };
      else {
        var o3, r3 = [], s2 = [], a2 = 0;
        e7.requestAnimationFrame = function(t4) {
          return r3.push([++a2, t4]), o3 || (o3 = setInterval(function() {
            if (r3.length) {
              var t5 = e7.now(), i5 = s2;
              for (s2 = r3, r3 = i5; s2.length; ) s2.shift()[1](t5);
            } else clearInterval(o3), o3 = void 0;
          }, 20)), a2;
        }, e7.cancelAnimationFrame = function(e8) {
          var t4, i5;
          for (t4 = 0, i5 = r3.length; t4 < i5; t4 += 1) if (r3[t4][0] === e8) return void r3.splice(t4, 1);
          for (t4 = 0, i5 = s2.length; t4 < i5; t4 += 1) if (s2[t4][0] === e8) return void s2.splice(t4, 1);
        };
      }
    }(window);
  }(t2), i2 = Ix, n2 = function() {
    return t2;
  }, e6.exports ? e6.exports = n2() : i2.OpenSeadragon = n2(), function(e7) {
    class t3 {
      constructor(e8) {
        e8 || (e8 = [0, 0, 0, 0, 0, 0, 0, 0, 0]), this.values = e8;
      }
      static makeIdentity() {
        return new t3([1, 0, 0, 0, 1, 0, 0, 0, 1]);
      }
      static makeTranslation(e8, i3) {
        return new t3([1, 0, 0, 0, 1, 0, e8, i3, 1]);
      }
      static makeRotation(e8) {
        var i3 = Math.cos(e8), n3 = Math.sin(e8);
        return new t3([i3, -n3, 0, n3, i3, 0, 0, 0, 1]);
      }
      static makeScaling(e8, i3) {
        return new t3([e8, 0, 0, 0, i3, 0, 0, 0, 1]);
      }
      multiply(e8) {
        let i3 = this.values, n3 = e8.values;
        var o2 = i3[0], r2 = i3[1], s2 = i3[2], a2 = i3[3], l2 = i3[4], c2 = i3[5], h2 = i3[6], u2 = i3[7], d2 = i3[8], p2 = n3[0], _2 = n3[1], g2 = n3[2], m2 = n3[3], f2 = n3[4], v2 = n3[5], A2 = n3[6], b2 = n3[7], y2 = n3[8];
        return new t3([p2 * o2 + _2 * a2 + g2 * h2, p2 * r2 + _2 * l2 + g2 * u2, p2 * s2 + _2 * c2 + g2 * d2, m2 * o2 + f2 * a2 + v2 * h2, m2 * r2 + f2 * l2 + v2 * u2, m2 * s2 + f2 * c2 + v2 * d2, A2 * o2 + b2 * a2 + y2 * h2, A2 * r2 + b2 * l2 + y2 * u2, A2 * s2 + b2 * c2 + y2 * d2]);
      }
    }
    e7.Mat3 = t3;
  }(t2), function(e7) {
    var t3 = { supportsFullScreen: false, isFullScreen: function() {
      return false;
    }, getFullScreenElement: function() {
      return null;
    }, requestFullScreen: function() {
    }, exitFullScreen: function() {
    }, cancelFullScreen: function() {
    }, fullScreenEventName: "", fullScreenErrorEventName: "" };
    document.exitFullscreen ? (t3.supportsFullScreen = true, t3.getFullScreenElement = function() {
      return document.fullscreenElement;
    }, t3.requestFullScreen = function(t4) {
      return t4.requestFullscreen().catch(function(t5) {
        e7.console.error("Fullscreen request failed: ", t5);
      });
    }, t3.exitFullScreen = function() {
      document.exitFullscreen().catch(function(t4) {
        e7.console.error("Error while exiting fullscreen: ", t4);
      });
    }, t3.fullScreenEventName = "fullscreenchange", t3.fullScreenErrorEventName = "fullscreenerror") : document.msExitFullscreen ? (t3.supportsFullScreen = true, t3.getFullScreenElement = function() {
      return document.msFullscreenElement;
    }, t3.requestFullScreen = function(e8) {
      return e8.msRequestFullscreen();
    }, t3.exitFullScreen = function() {
      document.msExitFullscreen();
    }, t3.fullScreenEventName = "MSFullscreenChange", t3.fullScreenErrorEventName = "MSFullscreenError") : document.webkitExitFullscreen ? (t3.supportsFullScreen = true, t3.getFullScreenElement = function() {
      return document.webkitFullscreenElement;
    }, t3.requestFullScreen = function(e8) {
      return e8.webkitRequestFullscreen();
    }, t3.exitFullScreen = function() {
      document.webkitExitFullscreen();
    }, t3.fullScreenEventName = "webkitfullscreenchange", t3.fullScreenErrorEventName = "webkitfullscreenerror") : document.webkitCancelFullScreen ? (t3.supportsFullScreen = true, t3.getFullScreenElement = function() {
      return document.webkitCurrentFullScreenElement;
    }, t3.requestFullScreen = function(e8) {
      return e8.webkitRequestFullScreen();
    }, t3.exitFullScreen = function() {
      document.webkitCancelFullScreen();
    }, t3.fullScreenEventName = "webkitfullscreenchange", t3.fullScreenErrorEventName = "webkitfullscreenerror") : document.mozCancelFullScreen && (t3.supportsFullScreen = true, t3.getFullScreenElement = function() {
      return document.mozFullScreenElement;
    }, t3.requestFullScreen = function(e8) {
      return e8.mozRequestFullScreen();
    }, t3.exitFullScreen = function() {
      document.mozCancelFullScreen();
    }, t3.fullScreenEventName = "mozfullscreenchange", t3.fullScreenErrorEventName = "mozfullscreenerror"), t3.isFullScreen = function() {
      return null !== t3.getFullScreenElement();
    }, t3.cancelFullScreen = function() {
      e7.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."), t3.exitFullScreen();
    }, e7.extend(e7, t3);
  }(t2), function(e7) {
    e7.EventSource = function() {
      this.events = {}, this._rejectedEventList = {};
    }, e7.EventSource.prototype = { addOnceHandler: function(e8, t3, i3, n3, o2) {
      var r2 = this;
      n3 = n3 || 1;
      var s2 = 0, a2 = function(i4) {
        return ++s2 === n3 && r2.removeHandler(e8, a2), t3(i4);
      };
      return this.addHandler(e8, a2, i3, o2);
    }, addHandler: function(t3, i3, n3, o2) {
      if (Object.prototype.hasOwnProperty.call(this._rejectedEventList, t3)) return e7.console.error(`Error adding handler for ${t3}. ${this._rejectedEventList[t3]}`), false;
      var r2 = this.events[t3];
      if (r2 || (this.events[t3] = r2 = []), i3 && e7.isFunction(i3)) {
        var s2 = r2.length, a2 = { handler: i3, userData: n3 || null, priority: o2 || 0 };
        for (r2[s2] = a2; s2 > 0 && r2[s2 - 1].priority < r2[s2].priority; ) r2[s2] = r2[s2 - 1], r2[s2 - 1] = a2, s2--;
      }
      return true;
    }, removeHandler: function(t3, i3) {
      var n3, o2 = this.events[t3], r2 = [];
      if (o2 && e7.isArray(o2)) {
        for (n3 = 0; n3 < o2.length; n3++) o2[n3].handler !== i3 && r2.push(o2[n3]);
        this.events[t3] = r2;
      }
    }, numberOfHandlers: function(e8) {
      var t3 = this.events[e8];
      return t3 ? t3.length : 0;
    }, removeAllHandlers: function(e8) {
      if (e8) this.events[e8] = [];
      else for (var t3 in this.events) this.events[t3] = [];
    }, getHandler: function(e8) {
      var t3 = this.events[e8];
      return t3 && t3.length ? (t3 = 1 === t3.length ? [t3[0]] : Array.apply(null, t3), function(e9, i3) {
        var n3, o2 = t3.length;
        for (n3 = 0; n3 < o2; n3++) t3[n3] && (i3.eventSource = e9, i3.userData = t3[n3].userData, t3[n3].handler(i3));
      }) : null;
    }, raiseEvent: function(t3, i3) {
      if (Object.prototype.hasOwnProperty.call(this._rejectedEventList, t3)) return e7.console.error(`Error adding handler for ${t3}. ${this._rejectedEventList[t3]}`), false;
      var n3 = this.getHandler(t3);
      return n3 && n3(this, i3 || {}), true;
    }, rejectEventHandler(e8, t3 = "") {
      this._rejectedEventList[e8] = t3;
    }, allowEventHandler(e8) {
      delete this._rejectedEventList[e8];
    } };
  }(t2), function(e7) {
    var t3 = {};
    e7.MouseTracker = function(i4) {
      var n4 = arguments;
      e7.isPlainObject(i4) || (i4 = { element: n4[0], clickTimeThreshold: n4[1], clickDistThreshold: n4[2] }), this.hash = Math.random(), this.element = e7.getElement(i4.element), this.clickTimeThreshold = i4.clickTimeThreshold || e7.DEFAULT_SETTINGS.clickTimeThreshold, this.clickDistThreshold = i4.clickDistThreshold || e7.DEFAULT_SETTINGS.clickDistThreshold, this.dblClickTimeThreshold = i4.dblClickTimeThreshold || e7.DEFAULT_SETTINGS.dblClickTimeThreshold, this.dblClickDistThreshold = i4.dblClickDistThreshold || e7.DEFAULT_SETTINGS.dblClickDistThreshold, this.userData = i4.userData || null, this.stopDelay = i4.stopDelay || 50, this.preProcessEventHandler = i4.preProcessEventHandler || null, this.contextMenuHandler = i4.contextMenuHandler || null, this.enterHandler = i4.enterHandler || null, this.leaveHandler = i4.leaveHandler || null, this.exitHandler = i4.exitHandler || null, this.overHandler = i4.overHandler || null, this.outHandler = i4.outHandler || null, this.pressHandler = i4.pressHandler || null, this.nonPrimaryPressHandler = i4.nonPrimaryPressHandler || null, this.releaseHandler = i4.releaseHandler || null, this.nonPrimaryReleaseHandler = i4.nonPrimaryReleaseHandler || null, this.moveHandler = i4.moveHandler || null, this.scrollHandler = i4.scrollHandler || null, this.clickHandler = i4.clickHandler || null, this.dblClickHandler = i4.dblClickHandler || null, this.dragHandler = i4.dragHandler || null, this.dragEndHandler = i4.dragEndHandler || null, this.pinchHandler = i4.pinchHandler || null, this.stopHandler = i4.stopHandler || null, this.keyDownHandler = i4.keyDownHandler || null, this.keyUpHandler = i4.keyUpHandler || null, this.keyHandler = i4.keyHandler || null, this.focusHandler = i4.focusHandler || null, this.blurHandler = i4.blurHandler || null;
      var o3 = this;
      t3[this.hash] = { click: function(t4) {
        !function(t5, i5) {
          var n5 = { originalEvent: i5, eventType: "click", pointerType: "mouse", isEmulated: false };
          D2(t5, n5), n5.preventDefault && !n5.defaultPrevented && e7.cancelEvent(i5);
          n5.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, dblclick: function(t4) {
        !function(t5, i5) {
          var n5 = { originalEvent: i5, eventType: "dblclick", pointerType: "mouse", isEmulated: false };
          D2(t5, n5), n5.preventDefault && !n5.defaultPrevented && e7.cancelEvent(i5);
          n5.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, keydown: function(t4) {
        !function(t5, i5) {
          var n5 = null, o4 = { originalEvent: i5, eventType: "keydown", pointerType: "", isEmulated: false };
          D2(t5, o4), !t5.keyDownHandler || o4.preventGesture || o4.defaultPrevented || (n5 = { eventSource: t5, keyCode: i5.keyCode ? i5.keyCode : i5.charCode, ctrl: i5.ctrlKey, shift: i5.shiftKey, alt: i5.altKey, meta: i5.metaKey, originalEvent: i5, preventDefault: o4.preventDefault || o4.defaultPrevented, userData: t5.userData }, t5.keyDownHandler(n5));
          (n5 && n5.preventDefault || o4.preventDefault && !o4.defaultPrevented) && e7.cancelEvent(i5);
          o4.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, keyup: function(t4) {
        !function(t5, i5) {
          var n5 = null, o4 = { originalEvent: i5, eventType: "keyup", pointerType: "", isEmulated: false };
          D2(t5, o4), !t5.keyUpHandler || o4.preventGesture || o4.defaultPrevented || (n5 = { eventSource: t5, keyCode: i5.keyCode ? i5.keyCode : i5.charCode, ctrl: i5.ctrlKey, shift: i5.shiftKey, alt: i5.altKey, meta: i5.metaKey, originalEvent: i5, preventDefault: o4.preventDefault || o4.defaultPrevented, userData: t5.userData }, t5.keyUpHandler(n5));
          (n5 && n5.preventDefault || o4.preventDefault && !o4.defaultPrevented) && e7.cancelEvent(i5);
          o4.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, keypress: function(t4) {
        !function(t5, i5) {
          var n5 = null, o4 = { originalEvent: i5, eventType: "keypress", pointerType: "", isEmulated: false };
          D2(t5, o4), !t5.keyHandler || o4.preventGesture || o4.defaultPrevented || (n5 = { eventSource: t5, keyCode: i5.keyCode ? i5.keyCode : i5.charCode, ctrl: i5.ctrlKey, shift: i5.shiftKey, alt: i5.altKey, meta: i5.metaKey, originalEvent: i5, preventDefault: o4.preventDefault || o4.defaultPrevented, userData: t5.userData }, t5.keyHandler(n5));
          (n5 && n5.preventDefault || o4.preventDefault && !o4.defaultPrevented) && e7.cancelEvent(i5);
          o4.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, focus: function(e8) {
        !function(e9, t4) {
          var i5 = { originalEvent: t4, eventType: "focus", pointerType: "", isEmulated: false };
          D2(e9, i5), e9.focusHandler && !i5.preventGesture && e9.focusHandler({ eventSource: e9, originalEvent: t4, userData: e9.userData });
        }(o3, e8);
      }, blur: function(e8) {
        !function(e9, t4) {
          var i5 = { originalEvent: t4, eventType: "blur", pointerType: "", isEmulated: false };
          D2(e9, i5), e9.blurHandler && !i5.preventGesture && e9.blurHandler({ eventSource: e9, originalEvent: t4, userData: e9.userData });
        }(o3, e8);
      }, contextmenu: function(t4) {
        !function(t5, i5) {
          var n5 = null, o4 = { originalEvent: i5, eventType: "contextmenu", pointerType: "mouse", isEmulated: false };
          D2(t5, o4), !t5.contextMenuHandler || o4.preventGesture || o4.defaultPrevented || (n5 = { eventSource: t5, position: A2(f2(i5), t5.element), originalEvent: o4.originalEvent, preventDefault: o4.preventDefault || o4.defaultPrevented, userData: t5.userData }, t5.contextMenuHandler(n5));
          (n5 && n5.preventDefault || o4.preventDefault && !o4.defaultPrevented) && e7.cancelEvent(i5);
          o4.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, wheel: function(e8) {
        !function(e9, t4) {
          w2(e9, t4, t4);
        }(o3, e8);
      }, mousewheel: function(e8) {
        y2(o3, e8);
      }, DOMMouseScroll: function(e8) {
        y2(o3, e8);
      }, MozMousePixelScroll: function(e8) {
        y2(o3, e8);
      }, losecapture: function(t4) {
        !function(t5, i5) {
          var n5 = { id: e7.MouseTracker.mousePointerId, type: "mouse" }, o4 = { originalEvent: i5, eventType: "lostpointercapture", pointerType: "mouse", isEmulated: false };
          D2(t5, o4), i5.target === t5.element && L2(t5, n5, false);
          o4.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, mouseenter: function(e8) {
        x2(o3, e8);
      }, mouseleave: function(e8) {
        C2(o3, e8);
      }, mouseover: function(e8) {
        S2(o3, e8);
      }, mouseout: function(e8) {
        E2(o3, e8);
      }, mousedown: function(e8) {
        T2(o3, e8);
      }, mouseup: function(e8) {
        I2(o3, e8);
      }, mousemove: function(e8) {
        B2(o3, e8);
      }, touchstart: function(t4) {
        !function(t5, i5) {
          var n5, o4, r3, s3 = i5.changedTouches.length, a3 = t5.getActivePointersListByType("touch");
          n5 = e7.now(), a3.getLength() > i5.touches.length - s3 && e7.console.warn("Tracked touch contact count doesn't match event.touches.length");
          var l3 = { originalEvent: i5, eventType: "pointerdown", pointerType: "touch", isEmulated: false };
          for (D2(t5, l3), o4 = 0; o4 < s3; o4++) F2(t5, l3, r3 = { id: i5.changedTouches[o4].identifier, type: "touch", isPrimary: 0 === a3.getLength(), currentPos: f2(i5.changedTouches[o4]), currentTime: n5 }), O2(t5, l3, r3, 0), L2(t5, r3, true);
          l3.preventDefault && !l3.defaultPrevented && e7.cancelEvent(i5);
          l3.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, touchend: function(t4) {
        !function(t5, i5) {
          var n5, o4, r3, s3 = i5.changedTouches.length;
          n5 = e7.now();
          var a3 = { originalEvent: i5, eventType: "pointerup", pointerType: "touch", isEmulated: false };
          for (D2(t5, a3), o4 = 0; o4 < s3; o4++) U2(t5, a3, r3 = { id: i5.changedTouches[o4].identifier, type: "touch", currentPos: f2(i5.changedTouches[o4]), currentTime: n5 }, 0), L2(t5, r3, false), N2(t5, a3, r3);
          a3.preventDefault && !a3.defaultPrevented && e7.cancelEvent(i5);
          a3.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, touchmove: function(t4) {
        !function(t5, i5) {
          var n5, o4, r3 = i5.changedTouches.length;
          n5 = e7.now();
          var s3 = { originalEvent: i5, eventType: "pointermove", pointerType: "touch", isEmulated: false };
          for (D2(t5, s3), o4 = 0; o4 < r3; o4++) z2(t5, s3, { id: i5.changedTouches[o4].identifier, type: "touch", currentPos: f2(i5.changedTouches[o4]), currentTime: n5 });
          s3.preventDefault && !s3.defaultPrevented && e7.cancelEvent(i5);
          s3.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, touchcancel: function(t4) {
        !function(t5, i5) {
          var n5, o4 = i5.changedTouches.length, r3 = { originalEvent: i5, eventType: "pointercancel", pointerType: "touch", isEmulated: false };
          for (D2(t5, r3), n5 = 0; n5 < o4; n5++) H2(t5, r3, { id: i5.changedTouches[n5].identifier, type: "touch" });
          r3.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, gesturestart: function(t4) {
        !function(t5, i5) {
          e7.eventIsCanceled(i5) || i5.preventDefault();
        }(0, t4);
      }, gesturechange: function(t4) {
        !function(t5, i5) {
          e7.eventIsCanceled(i5) || i5.preventDefault();
        }(0, t4);
      }, gotpointercapture: function(t4) {
        !function(t5, i5) {
          var n5 = { originalEvent: i5, eventType: "gotpointercapture", pointerType: g2(i5), isEmulated: false };
          D2(t5, n5), i5.target === t5.element && L2(t5, { id: i5.pointerId, type: g2(i5) }, true);
          n5.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, lostpointercapture: function(t4) {
        !function(t5, i5) {
          var n5 = { originalEvent: i5, eventType: "lostpointercapture", pointerType: g2(i5), isEmulated: false };
          D2(t5, n5), i5.target === t5.element && L2(t5, { id: i5.pointerId, type: g2(i5) }, false);
          n5.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, pointerenter: function(e8) {
        x2(o3, e8);
      }, pointerleave: function(e8) {
        C2(o3, e8);
      }, pointerover: function(e8) {
        S2(o3, e8);
      }, pointerout: function(e8) {
        E2(o3, e8);
      }, pointerdown: function(e8) {
        T2(o3, e8);
      }, pointerup: function(e8) {
        I2(o3, e8);
      }, pointermove: function(e8) {
        B2(o3, e8);
      }, pointercancel: function(t4) {
        !function(t5, i5) {
          var n5 = { id: i5.pointerId, type: g2(i5) }, o4 = { originalEvent: i5, eventType: "pointercancel", pointerType: n5.type, isEmulated: false };
          D2(t5, o4), H2(t5, o4, n5), o4.stopPropagation && e7.stopEvent(i5);
        }(o3, t4);
      }, pointerupcaptured: function(t4) {
        !function(t5, i5) {
          var n5 = t5.getActivePointersListByType(g2(i5));
          n5.getById(i5.pointerId) && M2(t5, i5);
          e7.stopEvent(i5);
        }(o3, t4);
      }, pointermovecaptured: function(t4) {
        !function(t5, i5) {
          var n5 = t5.getActivePointersListByType(g2(i5));
          n5.getById(i5.pointerId) && R2(t5, i5);
          e7.stopEvent(i5);
        }(o3, t4);
      }, tracking: false, activePointersLists: [], lastClickPos: null, dblClickTimeOut: null, pinchGPoints: [], lastPinchDist: 0, currentPinchDist: 0, lastPinchCenter: null, currentPinchCenter: null, sentDragEvent: false }, this.hasGestureHandlers = !!(this.pressHandler || this.nonPrimaryPressHandler || this.releaseHandler || this.nonPrimaryReleaseHandler || this.clickHandler || this.dblClickHandler || this.dragHandler || this.dragEndHandler || this.pinchHandler), this.hasScrollHandler = !!this.scrollHandler, e7.MouseTracker.havePointerEvents && e7.setElementPointerEvents(this.element, "auto"), this.exitHandler && e7.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."), i4.startDisabled || this.setTracking(true);
    }, e7.MouseTracker.prototype = { destroy: function() {
      u2(this), this.element = null, t3[this.hash] = null, delete t3[this.hash];
    }, isTracking: function() {
      return t3[this.hash].tracking;
    }, setTracking: function(i4) {
      return i4 ? function(i5) {
        var n4, o3, r3 = t3[i5.hash];
        if (!r3.tracking) {
          for (o3 = 0; o3 < e7.MouseTracker.subscribeEvents.length; o3++) n4 = e7.MouseTracker.subscribeEvents[o3], e7.addEvent(i5.element, n4, r3[n4], n4 === e7.MouseTracker.wheelEventName && { passive: false, capture: false });
          h2(i5), r3.tracking = true;
        }
      }(this) : u2(this), this;
    }, getActivePointersListByType: function(i4) {
      var n4, o3, r3 = t3[this.hash], s3 = r3 ? r3.activePointersLists.length : 0;
      for (n4 = 0; n4 < s3; n4++) if (r3.activePointersLists[n4].type === i4) return r3.activePointersLists[n4];
      return o3 = new e7.MouseTracker.GesturePointList(i4), r3 && r3.activePointersLists.push(o3), o3;
    }, getActivePointerCount: function() {
      var e8, i4 = t3[this.hash], n4 = i4.activePointersLists.length, o3 = 0;
      for (e8 = 0; e8 < n4; e8++) o3 += i4.activePointersLists[e8].getLength();
      return o3;
    }, preProcessEventHandler: function() {
    }, contextMenuHandler: function() {
    }, enterHandler: function() {
    }, leaveHandler: function() {
    }, exitHandler: function() {
    }, overHandler: function() {
    }, outHandler: function() {
    }, pressHandler: function() {
    }, nonPrimaryPressHandler: function() {
    }, releaseHandler: function() {
    }, nonPrimaryReleaseHandler: function() {
    }, moveHandler: function() {
    }, scrollHandler: function() {
    }, clickHandler: function() {
    }, dblClickHandler: function() {
    }, dragHandler: function() {
    }, dragEndHandler: function() {
    }, pinchHandler: function() {
    }, stopHandler: function() {
    }, keyDownHandler: function() {
    }, keyUpHandler: function() {
    }, keyHandler: function() {
    }, focusHandler: function() {
    }, blurHandler: function() {
    } };
    var i3, n3, o2, r2, s2, a2, l2 = function() {
      try {
        return window.self !== window.top;
      } catch (e8) {
        return true;
      }
    }();
    function c2(e8) {
      try {
        return e8.addEventListener && e8.removeEventListener;
      } catch (e9) {
        return false;
      }
    }
    function h2(e8) {
      var i4, n4, o3, r3, s3, a3 = t3[e8.hash], l3 = a3.activePointersLists.length;
      for (i4 = 0; i4 < l3; i4++) if ((o3 = a3.activePointersLists[i4]).getLength() > 0) {
        for (s3 = [], r3 = o3.asArray(), n4 = 0; n4 < r3.length; n4++) s3.push(r3[n4]);
        for (n4 = 0; n4 < s3.length; n4++) P2(e8, o3, s3[n4]);
      }
      for (i4 = 0; i4 < l3; i4++) a3.activePointersLists.pop();
      a3.sentDragEvent = false;
    }
    function u2(i4) {
      var n4, o3, r3 = t3[i4.hash];
      if (r3.tracking) {
        for (o3 = 0; o3 < e7.MouseTracker.subscribeEvents.length; o3++) n4 = e7.MouseTracker.subscribeEvents[o3], e7.removeEvent(i4.element, n4, r3[n4], false);
        h2(i4), r3.tracking = false;
      }
    }
    function d2(e8, i4) {
      var n4 = t3[e8.hash];
      if ("pointerevent" === i4) return { upName: "pointerup", upHandler: n4.pointerupcaptured, moveName: "pointermove", moveHandler: n4.pointermovecaptured };
      if ("mouse" === i4) return { upName: "pointerup", upHandler: n4.pointerupcaptured, moveName: "pointermove", moveHandler: n4.pointermovecaptured };
      if ("touch" === i4) return { upName: "touchend", upHandler: n4.touchendcaptured, moveName: "touchmove", moveHandler: n4.touchmovecaptured };
      throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.");
    }
    function p2(t4, i4) {
      var n4, o3;
      if (e7.MouseTracker.havePointerCapture) if (e7.MouseTracker.havePointerEvents) {
        if (!(o3 = t4.getActivePointersListByType(i4.type).getById(i4.id)) || !o3.captured) return;
        try {
          t4.element.releasePointerCapture(i4.id);
        } catch (e8) {
        }
      } else t4.element.releaseCapture();
      else n4 = d2(t4, e7.MouseTracker.havePointerEvents ? "pointerevent" : i4.type), l2 && c2(window.top) && e7.removeEvent(window.top, n4.upName, n4.upHandler, true), e7.removeEvent(e7.MouseTracker.captureElement, n4.moveName, n4.moveHandler, true), e7.removeEvent(e7.MouseTracker.captureElement, n4.upName, n4.upHandler, true);
      L2(t4, i4, false);
    }
    function _2(t4) {
      return e7.MouseTracker.havePointerEvents ? t4.pointerId : e7.MouseTracker.mousePointerId;
    }
    function g2(t4) {
      return e7.MouseTracker.havePointerEvents && t4.pointerType ? t4.pointerType : "mouse";
    }
    function m2(t4) {
      return !e7.MouseTracker.havePointerEvents || t4.isPrimary;
    }
    function f2(t4) {
      return e7.getMousePosition(t4);
    }
    function v2(e8, t4) {
      return A2(f2(e8), t4);
    }
    function A2(t4, i4) {
      var n4 = e7.getElementOffset(i4);
      return t4.minus(n4);
    }
    function b2(t4, i4) {
      return new e7.Point((t4.x + i4.x) / 2, (t4.y + i4.y) / 2);
    }
    function y2(t4, i4) {
      var n4 = { target: i4.target || i4.srcElement, type: "wheel", shiftKey: i4.shiftKey || false, clientX: i4.clientX, clientY: i4.clientY, pageX: i4.pageX ? i4.pageX : i4.clientX, pageY: i4.pageY ? i4.pageY : i4.clientY, deltaMode: "MozMousePixelScroll" === i4.type ? 0 : 1, deltaX: 0, deltaZ: 0 };
      "mousewheel" === e7.MouseTracker.wheelEventName ? n4.deltaY = -i4.wheelDelta / e7.DEFAULT_SETTINGS.pixelsPerWheelLine : n4.deltaY = i4.detail, w2(t4, n4, i4);
    }
    function w2(t4, i4, n4) {
      var o3, r3, s3 = null;
      o3 = i4.deltaY ? i4.deltaY < 0 ? 1 : -1 : 0, D2(t4, r3 = { originalEvent: i4, eventType: "wheel", pointerType: "mouse", isEmulated: i4 !== n4 }), !t4.scrollHandler || r3.preventGesture || r3.defaultPrevented || (s3 = { eventSource: t4, pointerType: "mouse", position: v2(i4, t4.element), scroll: o3, shift: i4.shiftKey, isTouchEvent: false, originalEvent: n4, preventDefault: r3.preventDefault || r3.defaultPrevented, userData: t4.userData }, t4.scrollHandler(s3)), r3.stopPropagation && e7.stopEvent(n4), (s3 && s3.preventDefault || r3.preventDefault && !r3.defaultPrevented) && e7.cancelEvent(n4);
    }
    function x2(t4, i4) {
      var n4 = { id: _2(i4), type: g2(i4), isPrimary: m2(i4), currentPos: f2(i4), currentTime: e7.now() }, o3 = { originalEvent: i4, eventType: "pointerenter", pointerType: n4.type, isEmulated: false };
      D2(t4, o3), F2(t4, o3, n4);
    }
    function C2(t4, i4) {
      var n4 = { id: _2(i4), type: g2(i4), isPrimary: m2(i4), currentPos: f2(i4), currentTime: e7.now() }, o3 = { originalEvent: i4, eventType: "pointerleave", pointerType: n4.type, isEmulated: false };
      D2(t4, o3), N2(t4, o3, n4);
    }
    function S2(t4, i4) {
      var n4 = { id: _2(i4), type: g2(i4), isPrimary: m2(i4), currentPos: f2(i4), currentTime: e7.now() }, o3 = { originalEvent: i4, eventType: "pointerover", pointerType: n4.type, isEmulated: false };
      D2(t4, o3), function(e8, t5, i5) {
        var n5, o4;
        n5 = e8.getActivePointersListByType(i5.type), o4 = n5.getById(i5.id), o4 ? i5 = o4 : (i5.captured = false, i5.insideElementPressed = false);
        e8.overHandler && e8.overHandler({ eventSource: e8, pointerType: i5.type, position: A2(i5.currentPos, e8.element), buttons: n5.buttons, pointers: e8.getActivePointerCount(), insideElementPressed: i5.insideElementPressed, buttonDownAny: 0 !== n5.buttons, isTouchEvent: "touch" === i5.type, originalEvent: t5.originalEvent, userData: e8.userData });
      }(t4, o3, n4), o3.preventDefault && !o3.defaultPrevented && e7.cancelEvent(i4), o3.stopPropagation && e7.stopEvent(i4);
    }
    function E2(t4, i4) {
      var n4 = { id: _2(i4), type: g2(i4), isPrimary: m2(i4), currentPos: f2(i4), currentTime: e7.now() }, o3 = { originalEvent: i4, eventType: "pointerout", pointerType: n4.type, isEmulated: false };
      D2(t4, o3), function(e8, t5, i5) {
        var n5, o4;
        n5 = e8.getActivePointersListByType(i5.type), o4 = n5.getById(i5.id), o4 ? i5 = o4 : (i5.captured = false, i5.insideElementPressed = false);
        e8.outHandler && e8.outHandler({ eventSource: e8, pointerType: i5.type, position: i5.currentPos && A2(i5.currentPos, e8.element), buttons: n5.buttons, pointers: e8.getActivePointerCount(), insideElementPressed: i5.insideElementPressed, buttonDownAny: 0 !== n5.buttons, isTouchEvent: "touch" === i5.type, originalEvent: t5.originalEvent, userData: e8.userData });
      }(t4, o3, n4), o3.preventDefault && !o3.defaultPrevented && e7.cancelEvent(i4), o3.stopPropagation && e7.stopEvent(i4);
    }
    function T2(t4, i4) {
      var n4 = { id: _2(i4), type: g2(i4), isPrimary: m2(i4), currentPos: f2(i4), currentTime: e7.now() }, o3 = e7.MouseTracker.havePointerEvents && "touch" === n4.type, r3 = { originalEvent: i4, eventType: "pointerdown", pointerType: n4.type, isEmulated: false };
      D2(t4, r3), O2(t4, r3, n4, i4.button), r3.preventDefault && !r3.defaultPrevented && e7.cancelEvent(i4), r3.stopPropagation && e7.stopEvent(i4), r3.shouldCapture && (o3 ? L2(t4, n4, true) : function(t5, i5) {
        var n5;
        if (e7.MouseTracker.havePointerCapture) if (e7.MouseTracker.havePointerEvents) try {
          t5.element.setPointerCapture(i5.id);
        } catch (t6) {
          return void e7.console.warn("setPointerCapture() called on invalid pointer ID");
        }
        else t5.element.setCapture(true);
        else n5 = d2(t5, e7.MouseTracker.havePointerEvents ? "pointerevent" : i5.type), l2 && c2(window.top) && e7.addEvent(window.top, n5.upName, n5.upHandler, true), e7.addEvent(e7.MouseTracker.captureElement, n5.upName, n5.upHandler, true), e7.addEvent(e7.MouseTracker.captureElement, n5.moveName, n5.moveHandler, true);
        L2(t5, i5, true);
      }(t4, n4));
    }
    function I2(e8, t4) {
      M2(e8, t4);
    }
    function M2(t4, i4) {
      var n4, o3 = { originalEvent: i4, eventType: "pointerup", pointerType: (n4 = { id: _2(i4), type: g2(i4), isPrimary: m2(i4), currentPos: f2(i4), currentTime: e7.now() }).type, isEmulated: false };
      D2(t4, o3), U2(t4, o3, n4, i4.button), o3.preventDefault && !o3.defaultPrevented && e7.cancelEvent(i4), o3.stopPropagation && e7.stopEvent(i4), o3.shouldReleaseCapture && (i4.target === t4.element ? p2(t4, n4) : L2(t4, n4, false));
    }
    function B2(e8, t4) {
      R2(e8, t4);
    }
    function R2(t4, i4) {
      var n4 = { id: _2(i4), type: g2(i4), isPrimary: m2(i4), currentPos: f2(i4), currentTime: e7.now() }, o3 = { originalEvent: i4, eventType: "pointermove", pointerType: n4.type, isEmulated: false };
      D2(t4, o3), z2(t4, o3, n4), o3.preventDefault && !o3.defaultPrevented && e7.cancelEvent(i4), o3.stopPropagation && e7.stopEvent(i4);
    }
    function k2(e8, t4) {
      return t4.speed = 0, t4.direction = 0, t4.contactPos = t4.currentPos, t4.contactTime = t4.currentTime, t4.lastPos = t4.currentPos, t4.lastTime = t4.currentTime, e8.add(t4);
    }
    function P2(t4, i4, n4) {
      var o3, r3 = i4.getById(n4.id);
      return r3 ? (r3.captured && (e7.console.warn("stopTrackingPointer() called on captured pointer"), p2(t4, r3)), i4.removeContact(), o3 = i4.removeById(n4.id)) : o3 = i4.getLength(), o3;
    }
    function D2(t4, i4) {
      i4.eventSource = t4, i4.eventPhase = i4.originalEvent && void 0 !== i4.originalEvent.eventPhase ? i4.originalEvent.eventPhase : 0, i4.defaultPrevented = e7.eventIsCanceled(i4.originalEvent), i4.shouldCapture = false, i4.shouldReleaseCapture = false, i4.userData = t4.userData, function(e8, t5) {
        switch (t5.eventType) {
          case "pointermove":
          case "pointerdown":
          case "pointerup":
            t5.isStoppable = true, t5.isCancelable = true, t5.preventDefault = false, t5.preventGesture = !e8.hasGestureHandlers, t5.stopPropagation = false;
            break;
          case "pointerover":
          case "pointerout":
          case "contextmenu":
          case "keydown":
          case "keyup":
          case "keypress":
            t5.isStoppable = true, t5.isCancelable = true, t5.preventDefault = false, t5.preventGesture = false, t5.stopPropagation = false;
            break;
          case "wheel":
            t5.isStoppable = true, t5.isCancelable = true, t5.preventDefault = false, t5.preventGesture = !e8.hasScrollHandler, t5.stopPropagation = false;
            break;
          case "gotpointercapture":
          case "lostpointercapture":
          case "pointercancel":
            t5.isStoppable = true, t5.isCancelable = false, t5.preventDefault = false, t5.preventGesture = false, t5.stopPropagation = false;
            break;
          case "click":
            t5.isStoppable = true, t5.isCancelable = true, t5.preventDefault = !!e8.clickHandler, t5.preventGesture = false, t5.stopPropagation = false;
            break;
          case "dblclick":
            t5.isStoppable = true, t5.isCancelable = true, t5.preventDefault = !!e8.dblClickHandler, t5.preventGesture = false, t5.stopPropagation = false;
            break;
          default:
            t5.isStoppable = false, t5.isCancelable = false, t5.preventDefault = false, t5.preventGesture = false, t5.stopPropagation = false;
        }
      }(t4, i4), t4.preProcessEventHandler && t4.preProcessEventHandler(i4);
    }
    function L2(t4, i4, n4) {
      var o3 = t4.getActivePointersListByType(i4.type), r3 = o3.getById(i4.id);
      r3 ? n4 && !r3.captured ? (r3.captured = true, o3.captureCount++) : !n4 && r3.captured && (r3.captured = false, o3.captureCount--, o3.captureCount < 0 && (o3.captureCount = 0, e7.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))) : e7.console.warn("updatePointerCaptured() called on untracked pointer");
    }
    function F2(e8, t4, i4) {
      var n4, o3 = e8.getActivePointersListByType(i4.type);
      (n4 = o3.getById(i4.id)) ? (n4.insideElement = true, n4.lastPos = n4.currentPos, n4.lastTime = n4.currentTime, n4.currentPos = i4.currentPos, n4.currentTime = i4.currentTime, i4 = n4) : (i4.captured = false, i4.insideElementPressed = false, i4.insideElement = true, k2(o3, i4)), e8.enterHandler && e8.enterHandler({ eventSource: e8, pointerType: i4.type, position: A2(i4.currentPos, e8.element), buttons: o3.buttons, pointers: e8.getActivePointerCount(), insideElementPressed: i4.insideElementPressed, buttonDownAny: 0 !== o3.buttons, isTouchEvent: "touch" === i4.type, originalEvent: t4.originalEvent, userData: e8.userData });
    }
    function N2(e8, t4, i4) {
      var n4, o3, r3 = e8.getActivePointersListByType(i4.type);
      (n4 = r3.getById(i4.id)) ? (n4.captured ? (n4.insideElement = false, n4.lastPos = n4.currentPos, n4.lastTime = n4.currentTime, n4.currentPos = i4.currentPos, n4.currentTime = i4.currentTime) : P2(e8, r3, n4), i4 = n4) : (i4.captured = false, i4.insideElementPressed = false), (e8.leaveHandler || e8.exitHandler) && (o3 = { eventSource: e8, pointerType: i4.type, position: i4.currentPos && A2(i4.currentPos, e8.element), buttons: r3.buttons, pointers: e8.getActivePointerCount(), insideElementPressed: i4.insideElementPressed, buttonDownAny: 0 !== r3.buttons, isTouchEvent: "touch" === i4.type, originalEvent: t4.originalEvent, userData: e8.userData }, e8.leaveHandler && e8.leaveHandler(o3), e8.exitHandler && e8.exitHandler(o3));
    }
    function O2(i4, n4, o3, r3) {
      var s3, a3 = t3[i4.hash], l3 = i4.getActivePointersListByType(o3.type);
      if (void 0 !== n4.originalEvent.buttons ? l3.buttons = n4.originalEvent.buttons : 0 === r3 ? l3.buttons |= 1 : 1 === r3 ? l3.buttons |= 4 : 2 === r3 ? l3.buttons |= 2 : 3 === r3 ? l3.buttons |= 8 : 4 === r3 ? l3.buttons |= 16 : 5 === r3 && (l3.buttons |= 32), 0 !== r3) return n4.shouldCapture = false, n4.shouldReleaseCapture = false, void (!i4.nonPrimaryPressHandler || n4.preventGesture || n4.defaultPrevented || (n4.preventDefault = true, i4.nonPrimaryPressHandler({ eventSource: i4, pointerType: o3.type, position: A2(o3.currentPos, i4.element), button: r3, buttons: l3.buttons, isTouchEvent: "touch" === o3.type, originalEvent: n4.originalEvent, userData: i4.userData })));
      (s3 = l3.getById(o3.id)) ? (s3.insideElementPressed = true, s3.insideElement = true, s3.originalTarget = n4.originalEvent.target, s3.contactPos = o3.currentPos, s3.contactTime = o3.currentTime, s3.lastPos = s3.currentPos, s3.lastTime = s3.currentTime, s3.currentPos = o3.currentPos, s3.currentTime = o3.currentTime, o3 = s3) : (o3.captured = false, o3.insideElementPressed = true, o3.insideElement = true, o3.originalTarget = n4.originalEvent.target, k2(l3, o3)), l3.addContact(), n4.preventGesture || n4.defaultPrevented ? (n4.shouldCapture = false, n4.shouldReleaseCapture = false) : (n4.shouldCapture = true, n4.shouldReleaseCapture = false, n4.preventDefault = true, (i4.dragHandler || i4.dragEndHandler || i4.pinchHandler) && e7.MouseTracker.gesturePointVelocityTracker.addPoint(i4, o3), 1 === l3.contacts ? i4.pressHandler && !n4.preventGesture && i4.pressHandler({ eventSource: i4, pointerType: o3.type, position: A2(o3.contactPos, i4.element), buttons: l3.buttons, isTouchEvent: "touch" === o3.type, originalEvent: n4.originalEvent, userData: i4.userData }) : 2 === l3.contacts && i4.pinchHandler && "touch" === o3.type && (a3.pinchGPoints = l3.asArray(), a3.lastPinchDist = a3.currentPinchDist = a3.pinchGPoints[0].currentPos.distanceTo(a3.pinchGPoints[1].currentPos), a3.lastPinchCenter = a3.currentPinchCenter = b2(a3.pinchGPoints[0].currentPos, a3.pinchGPoints[1].currentPos)));
    }
    function U2(i4, n4, o3, r3) {
      var s3, a3, l3, c3, h3 = t3[i4.hash], u3 = i4.getActivePointersListByType(o3.type), d3 = false;
      if (void 0 !== n4.originalEvent.buttons ? u3.buttons = n4.originalEvent.buttons : 0 === r3 ? u3.buttons ^= -2 : 1 === r3 ? u3.buttons ^= -5 : 2 === r3 ? u3.buttons ^= -3 : 3 === r3 ? u3.buttons ^= -9 : 4 === r3 ? u3.buttons ^= -17 : 5 === r3 && (u3.buttons ^= -33), n4.shouldCapture = false, 0 !== r3) return n4.shouldReleaseCapture = false, void (!i4.nonPrimaryReleaseHandler || n4.preventGesture || n4.defaultPrevented || (n4.preventDefault = true, i4.nonPrimaryReleaseHandler({ eventSource: i4, pointerType: o3.type, position: A2(o3.currentPos, i4.element), button: r3, buttons: u3.buttons, isTouchEvent: "touch" === o3.type, originalEvent: n4.originalEvent, userData: i4.userData })));
      (l3 = u3.getById(o3.id)) ? (u3.removeContact(), l3.captured && (d3 = true), l3.lastPos = l3.currentPos, l3.lastTime = l3.currentTime, l3.currentPos = o3.currentPos, l3.currentTime = o3.currentTime, l3.insideElement || P2(i4, u3, l3), s3 = l3.currentPos, a3 = l3.currentTime) : (o3.captured = false, o3.insideElementPressed = false, o3.insideElement = true, k2(u3, o3), l3 = o3), n4.preventGesture || n4.defaultPrevented || (d3 ? (n4.shouldReleaseCapture = true, n4.preventDefault = true, (i4.dragHandler || i4.dragEndHandler || i4.pinchHandler) && e7.MouseTracker.gesturePointVelocityTracker.removePoint(i4, l3), 0 === u3.contacts ? (i4.releaseHandler && s3 && i4.releaseHandler({ eventSource: i4, pointerType: l3.type, position: A2(s3, i4.element), buttons: u3.buttons, insideElementPressed: l3.insideElementPressed, insideElementReleased: l3.insideElement, isTouchEvent: "touch" === l3.type, originalEvent: n4.originalEvent, userData: i4.userData }), i4.dragEndHandler && h3.sentDragEvent && i4.dragEndHandler({ eventSource: i4, pointerType: l3.type, position: A2(l3.currentPos, i4.element), speed: l3.speed, direction: l3.direction, shift: n4.originalEvent.shiftKey, isTouchEvent: "touch" === l3.type, originalEvent: n4.originalEvent, userData: i4.userData }), h3.sentDragEvent = false, (i4.clickHandler || i4.dblClickHandler) && l3.insideElement && (c3 = a3 - l3.contactTime <= i4.clickTimeThreshold && l3.contactPos.distanceTo(s3) <= i4.clickDistThreshold, i4.clickHandler && i4.clickHandler({ eventSource: i4, pointerType: l3.type, position: A2(l3.currentPos, i4.element), quick: c3, shift: n4.originalEvent.shiftKey, isTouchEvent: "touch" === l3.type, originalEvent: n4.originalEvent, originalTarget: l3.originalTarget, userData: i4.userData }), i4.dblClickHandler && c3 && (u3.clicks++, 1 === u3.clicks ? (h3.lastClickPos = s3, h3.dblClickTimeOut = setTimeout(function() {
        u3.clicks = 0;
      }, i4.dblClickTimeThreshold)) : 2 === u3.clicks && (clearTimeout(h3.dblClickTimeOut), u3.clicks = 0, h3.lastClickPos.distanceTo(s3) <= i4.dblClickDistThreshold && i4.dblClickHandler({ eventSource: i4, pointerType: l3.type, position: A2(l3.currentPos, i4.element), shift: n4.originalEvent.shiftKey, isTouchEvent: "touch" === l3.type, originalEvent: n4.originalEvent, userData: i4.userData }), h3.lastClickPos = null)))) : 2 === u3.contacts && i4.pinchHandler && "touch" === l3.type && (h3.pinchGPoints = u3.asArray(), h3.lastPinchDist = h3.currentPinchDist = h3.pinchGPoints[0].currentPos.distanceTo(h3.pinchGPoints[1].currentPos), h3.lastPinchCenter = h3.currentPinchCenter = b2(h3.pinchGPoints[0].currentPos, h3.pinchGPoints[1].currentPos))) : (n4.shouldReleaseCapture = false, i4.releaseHandler && s3 && (i4.releaseHandler({ eventSource: i4, pointerType: l3.type, position: A2(s3, i4.element), buttons: u3.buttons, insideElementPressed: l3.insideElementPressed, insideElementReleased: l3.insideElement, isTouchEvent: "touch" === l3.type, originalEvent: n4.originalEvent, userData: i4.userData }), n4.preventDefault = true)));
    }
    function z2(e8, i4, n4) {
      var o3, r3, s3, a3 = t3[e8.hash], l3 = e8.getActivePointersListByType(n4.type);
      void 0 !== i4.originalEvent.buttons && (l3.buttons = i4.originalEvent.buttons), (o3 = l3.getById(n4.id)) && (o3.lastPos = o3.currentPos, o3.lastTime = o3.currentTime, o3.currentPos = n4.currentPos, o3.currentTime = n4.currentTime, i4.shouldCapture = false, i4.shouldReleaseCapture = false, e8.stopHandler && "mouse" === n4.type && (clearTimeout(e8.stopTimeOut), e8.stopTimeOut = setTimeout(function() {
        !function(e9, t4, i5) {
          e9.stopHandler && e9.stopHandler({ eventSource: e9, pointerType: i5, position: v2(t4, e9.element), buttons: e9.getActivePointersListByType(i5).buttons, isTouchEvent: "touch" === i5, originalEvent: t4, userData: e9.userData });
        }(e8, i4.originalEvent, n4.type);
      }, e8.stopDelay)), 0 === l3.contacts ? e8.moveHandler && e8.moveHandler({ eventSource: e8, pointerType: n4.type, position: A2(n4.currentPos, e8.element), buttons: l3.buttons, isTouchEvent: "touch" === n4.type, originalEvent: i4.originalEvent, userData: e8.userData }) : 1 === l3.contacts ? (e8.moveHandler && (o3 = l3.asArray()[0], e8.moveHandler({ eventSource: e8, pointerType: o3.type, position: A2(o3.currentPos, e8.element), buttons: l3.buttons, isTouchEvent: "touch" === o3.type, originalEvent: i4.originalEvent, userData: e8.userData })), !e8.dragHandler || i4.preventGesture || i4.defaultPrevented || (s3 = (o3 = l3.asArray()[0]).currentPos.minus(o3.lastPos), e8.dragHandler({ eventSource: e8, pointerType: o3.type, position: A2(o3.currentPos, e8.element), buttons: l3.buttons, delta: s3, speed: o3.speed, direction: o3.direction, shift: i4.originalEvent.shiftKey, isTouchEvent: "touch" === o3.type, originalEvent: i4.originalEvent, userData: e8.userData }), i4.preventDefault = true, a3.sentDragEvent = true)) : 2 === l3.contacts && (e8.moveHandler && (r3 = l3.asArray(), e8.moveHandler({ eventSource: e8, pointerType: r3[0].type, position: A2(b2(r3[0].currentPos, r3[1].currentPos), e8.element), buttons: l3.buttons, isTouchEvent: "touch" === r3[0].type, originalEvent: i4.originalEvent, userData: e8.userData })), !e8.pinchHandler || "touch" !== n4.type || i4.preventGesture || i4.defaultPrevented || (s3 = a3.pinchGPoints[0].currentPos.distanceTo(a3.pinchGPoints[1].currentPos)) !== a3.currentPinchDist && (a3.lastPinchDist = a3.currentPinchDist, a3.currentPinchDist = s3, a3.lastPinchCenter = a3.currentPinchCenter, a3.currentPinchCenter = b2(a3.pinchGPoints[0].currentPos, a3.pinchGPoints[1].currentPos), e8.pinchHandler({ eventSource: e8, pointerType: "touch", gesturePoints: a3.pinchGPoints, lastCenter: A2(a3.lastPinchCenter, e8.element), center: A2(a3.currentPinchCenter, e8.element), lastDistance: a3.lastPinchDist, distance: a3.currentPinchDist, shift: i4.originalEvent.shiftKey, originalEvent: i4.originalEvent, userData: e8.userData }), i4.preventDefault = true)));
    }
    function H2(e8, t4, i4) {
      var n4, o3 = e8.getActivePointersListByType(i4.type);
      (n4 = o3.getById(i4.id)) && P2(e8, o3, n4);
    }
    e7.MouseTracker.gesturePointVelocityTracker = (i3 = [], n3 = 0, o2 = 0, r2 = function(e8, t4) {
      return e8.hash.toString() + t4.type + t4.id.toString();
    }, s2 = function() {
      var t4, n4, r3, s3, a3, l3, c3 = i3.length, h3 = e7.now();
      for (s3 = h3 - o2, o2 = h3, t4 = 0; t4 < c3; t4++) (r3 = (n4 = i3[t4]).gPoint).direction = Math.atan2(r3.currentPos.y - n4.lastPos.y, r3.currentPos.x - n4.lastPos.x), a3 = n4.lastPos.distanceTo(r3.currentPos), n4.lastPos = r3.currentPos, l3 = 1e3 * a3 / (s3 + 1), r3.speed = 0.75 * l3 + 0.25 * r3.speed;
    }, { addPoint: function(t4, a3) {
      var l3 = r2(t4, a3);
      i3.push({ guid: l3, gPoint: a3, lastPos: a3.currentPos }), 1 === i3.length && (o2 = e7.now(), n3 = window.setInterval(s2, 50));
    }, removePoint: function(e8, t4) {
      var o3, s3 = r2(e8, t4), a3 = i3.length;
      for (o3 = 0; o3 < a3; o3++) if (i3[o3].guid === s3) {
        i3.splice(o3, 1), 0 == --a3 && window.clearInterval(n3);
        break;
      }
    } }), e7.MouseTracker.captureElement = document, e7.MouseTracker.wheelEventName = "onwheel" in document.createElement("div") ? "wheel" : void 0 !== document.onmousewheel ? "mousewheel" : "DOMMouseScroll", e7.MouseTracker.subscribeEvents = ["click", "dblclick", "keydown", "keyup", "keypress", "focus", "blur", "contextmenu", e7.MouseTracker.wheelEventName], "DOMMouseScroll" === e7.MouseTracker.wheelEventName && e7.MouseTracker.subscribeEvents.push("MozMousePixelScroll"), window.PointerEvent ? (e7.MouseTracker.havePointerEvents = true, e7.MouseTracker.subscribeEvents.push("pointerenter", "pointerleave", "pointerover", "pointerout", "pointerdown", "pointerup", "pointermove", "pointercancel"), e7.MouseTracker.havePointerCapture = (a2 = document.createElement("div"), e7.isFunction(a2.setPointerCapture) && e7.isFunction(a2.releasePointerCapture)), e7.MouseTracker.havePointerCapture && e7.MouseTracker.subscribeEvents.push("gotpointercapture", "lostpointercapture")) : (e7.MouseTracker.havePointerEvents = false, e7.MouseTracker.subscribeEvents.push("mouseenter", "mouseleave", "mouseover", "mouseout", "mousedown", "mouseup", "mousemove"), e7.MouseTracker.mousePointerId = "legacy-mouse", e7.MouseTracker.havePointerCapture = function() {
      var t4 = document.createElement("div");
      return e7.isFunction(t4.setCapture) && e7.isFunction(t4.releaseCapture);
    }(), e7.MouseTracker.havePointerCapture && e7.MouseTracker.subscribeEvents.push("losecapture"), "ontouchstart" in window && e7.MouseTracker.subscribeEvents.push("touchstart", "touchend", "touchmove", "touchcancel"), "ongesturestart" in window && e7.MouseTracker.subscribeEvents.push("gesturestart", "gesturechange")), e7.MouseTracker.GesturePointList = function(e8) {
      this._gPoints = [], this.type = e8, this.buttons = 0, this.contacts = 0, this.clicks = 0, this.captureCount = 0;
    }, e7.MouseTracker.GesturePointList.prototype = { getLength: function() {
      return this._gPoints.length;
    }, asArray: function() {
      return this._gPoints;
    }, add: function(e8) {
      return this._gPoints.push(e8);
    }, removeById: function(e8) {
      var t4, i4 = this._gPoints.length;
      for (t4 = 0; t4 < i4; t4++) if (this._gPoints[t4].id === e8) {
        this._gPoints.splice(t4, 1);
        break;
      }
      return this._gPoints.length;
    }, getByIndex: function(e8) {
      return e8 < this._gPoints.length ? this._gPoints[e8] : null;
    }, getById: function(e8) {
      var t4, i4 = this._gPoints.length;
      for (t4 = 0; t4 < i4; t4++) if (this._gPoints[t4].id === e8) return this._gPoints[t4];
      return null;
    }, getPrimary: function(e8) {
      var t4, i4 = this._gPoints.length;
      for (t4 = 0; t4 < i4; t4++) if (this._gPoints[t4].isPrimary) return this._gPoints[t4];
      return null;
    }, addContact: function() {
      ++this.contacts, this.contacts > 1 && ("mouse" === this.type || "pen" === this.type) && (e7.console.warn("GesturePointList.addContact() Implausible contacts value"), this.contacts = 1);
    }, removeContact: function() {
      --this.contacts, this.contacts < 0 && (this.contacts = 0);
    } };
  }(t2), function(e7) {
    e7.ControlAnchor = { NONE: 0, TOP_LEFT: 1, TOP_RIGHT: 2, BOTTOM_RIGHT: 3, BOTTOM_LEFT: 4, ABSOLUTE: 5 }, e7.Control = function(t3, i3, n3) {
      var o2 = t3.parentNode;
      "number" == typeof i3 && (e7.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"), i3 = { anchor: i3 }), i3.attachToViewer = void 0 === i3.attachToViewer || i3.attachToViewer, this.autoFade = void 0 === i3.autoFade || i3.autoFade, this.element = t3, this.anchor = i3.anchor, this.container = n3, this.anchor === e7.ControlAnchor.ABSOLUTE ? (this.wrapper = e7.makeNeutralElement("div"), this.wrapper.style.position = "absolute", this.wrapper.style.top = "number" == typeof i3.top ? i3.top + "px" : i3.top, this.wrapper.style.left = "number" == typeof i3.left ? i3.left + "px" : i3.left, this.wrapper.style.height = "number" == typeof i3.height ? i3.height + "px" : i3.height, this.wrapper.style.width = "number" == typeof i3.width ? i3.width + "px" : i3.width, this.wrapper.style.margin = "0px", this.wrapper.style.padding = "0px", this.element.style.position = "relative", this.element.style.top = "0px", this.element.style.left = "0px", this.element.style.height = "100%", this.element.style.width = "100%") : (this.wrapper = e7.makeNeutralElement("div"), this.wrapper.style.display = "inline-block", this.anchor === e7.ControlAnchor.NONE && (this.wrapper.style.width = this.wrapper.style.height = "100%")), this.wrapper.appendChild(this.element), i3.attachToViewer ? this.anchor === e7.ControlAnchor.TOP_RIGHT || this.anchor === e7.ControlAnchor.BOTTOM_RIGHT ? this.container.insertBefore(this.wrapper, this.container.firstChild) : this.container.appendChild(this.wrapper) : o2.appendChild(this.wrapper);
    }, e7.Control.prototype = { destroy: function() {
      this.wrapper.removeChild(this.element), this.anchor !== e7.ControlAnchor.NONE && this.container.removeChild(this.wrapper);
    }, isVisible: function() {
      return "none" !== this.wrapper.style.display;
    }, setVisible: function(t3) {
      this.wrapper.style.display = t3 ? this.anchor === e7.ControlAnchor.ABSOLUTE ? "block" : "inline-block" : "none";
    }, setOpacity: function(t3) {
      e7.setElementOpacity(this.wrapper, t3, true);
    } };
  }(t2), function(e7) {
    function t3(e8, t4) {
      var i3, n3 = e8.controls;
      for (i3 = n3.length - 1; i3 >= 0; i3--) if (n3[i3].element === t4) return i3;
      return -1;
    }
    e7.ControlDock = function(t4) {
      var i3, n3, o2 = ["topleft", "topright", "bottomright", "bottomleft"];
      for (e7.extend(true, this, { id: "controldock-" + e7.now() + "-" + Math.floor(1e6 * Math.random()), container: e7.makeNeutralElement("div"), controls: [] }, t4), this.container.onsubmit = function() {
        return false;
      }, this.element && (this.element = e7.getElement(this.element), this.element.appendChild(this.container), "static" === e7.getElementStyle(this.element).position && (this.element.style.position = "relative"), this.container.style.width = "100%", this.container.style.height = "100%"), n3 = 0; n3 < o2.length; n3++) i3 = o2[n3], this.controls[i3] = e7.makeNeutralElement("div"), this.controls[i3].style.position = "absolute", i3.match("left") && (this.controls[i3].style.left = "0px"), i3.match("right") && (this.controls[i3].style.right = "0px"), i3.match("top") && (this.controls[i3].style.top = "0px"), i3.match("bottom") && (this.controls[i3].style.bottom = "0px");
      this.container.appendChild(this.controls.topleft), this.container.appendChild(this.controls.topright), this.container.appendChild(this.controls.bottomright), this.container.appendChild(this.controls.bottomleft);
    }, e7.ControlDock.prototype = { addControl: function(i3, n3) {
      var o2 = null;
      if (!(t3(this, i3 = e7.getElement(i3)) >= 0)) {
        switch (n3.anchor) {
          case e7.ControlAnchor.TOP_RIGHT:
            o2 = this.controls.topright, i3.style.position = "relative", i3.style.paddingRight = "0px", i3.style.paddingTop = "0px";
            break;
          case e7.ControlAnchor.BOTTOM_RIGHT:
            o2 = this.controls.bottomright, i3.style.position = "relative", i3.style.paddingRight = "0px", i3.style.paddingBottom = "0px";
            break;
          case e7.ControlAnchor.BOTTOM_LEFT:
            o2 = this.controls.bottomleft, i3.style.position = "relative", i3.style.paddingLeft = "0px", i3.style.paddingBottom = "0px";
            break;
          case e7.ControlAnchor.TOP_LEFT:
            o2 = this.controls.topleft, i3.style.position = "relative", i3.style.paddingLeft = "0px", i3.style.paddingTop = "0px";
            break;
          case e7.ControlAnchor.ABSOLUTE:
          default:
          case e7.ControlAnchor.NONE:
            o2 = this.container, i3.style.margin = "0px", i3.style.padding = "0px";
        }
        this.controls.push(new e7.Control(i3, n3, o2)), i3.style.display = "inline-block";
      }
    }, removeControl: function(i3) {
      var n3 = t3(this, i3 = e7.getElement(i3));
      return n3 >= 0 && (this.controls[n3].destroy(), this.controls.splice(n3, 1)), this;
    }, clearControls: function() {
      for (; this.controls.length > 0; ) this.controls.pop().destroy();
      return this;
    }, areControlsEnabled: function() {
      var e8;
      for (e8 = this.controls.length - 1; e8 >= 0; e8--) if (this.controls[e8].isVisible()) return true;
      return false;
    }, setControlsEnabled: function(e8) {
      var t4;
      for (t4 = this.controls.length - 1; t4 >= 0; t4--) this.controls[t4].setVisible(e8);
      return this;
    } };
  }(t2), function(e7) {
    e7.Placement = e7.freezeObject({ CENTER: 0, TOP_LEFT: 1, TOP: 2, TOP_RIGHT: 3, RIGHT: 4, BOTTOM_RIGHT: 5, BOTTOM: 6, BOTTOM_LEFT: 7, LEFT: 8, properties: { 0: { isLeft: false, isHorizontallyCentered: true, isRight: false, isTop: false, isVerticallyCentered: true, isBottom: false }, 1: { isLeft: true, isHorizontallyCentered: false, isRight: false, isTop: true, isVerticallyCentered: false, isBottom: false }, 2: { isLeft: false, isHorizontallyCentered: true, isRight: false, isTop: true, isVerticallyCentered: false, isBottom: false }, 3: { isLeft: false, isHorizontallyCentered: false, isRight: true, isTop: true, isVerticallyCentered: false, isBottom: false }, 4: { isLeft: false, isHorizontallyCentered: false, isRight: true, isTop: false, isVerticallyCentered: true, isBottom: false }, 5: { isLeft: false, isHorizontallyCentered: false, isRight: true, isTop: false, isVerticallyCentered: false, isBottom: true }, 6: { isLeft: false, isHorizontallyCentered: true, isRight: false, isTop: false, isVerticallyCentered: false, isBottom: true }, 7: { isLeft: true, isHorizontallyCentered: false, isRight: false, isTop: false, isVerticallyCentered: false, isBottom: true }, 8: { isLeft: true, isHorizontallyCentered: false, isRight: false, isTop: false, isVerticallyCentered: true, isBottom: false } } });
  }(t2), function(e7) {
    var i3 = {}, n3 = 1;
    function o2(t3) {
      return t3 = e7.getElement(t3), new e7.Point(0 === t3.clientWidth ? 1 : t3.clientWidth, 0 === t3.clientHeight ? 1 : t3.clientHeight);
    }
    function r2(t3, i4) {
      if (i4 instanceof e7.Overlay) return i4;
      var n4 = null;
      if (i4.element) n4 = e7.getElement(i4.element);
      else {
        var o3 = i4.id ? i4.id : "openseadragon-overlay-" + Math.floor(1e7 * Math.random());
        (n4 = e7.getElement(i4.id)) || ((n4 = document.createElement("a")).href = "#/overlay/" + o3), n4.id = o3, e7.addClass(n4, i4.className ? i4.className : "openseadragon-overlay");
      }
      var r3 = i4.location, s3 = i4.width, a3 = i4.height;
      if (!r3) {
        var l3 = i4.x, c3 = i4.y;
        if (void 0 !== i4.px) {
          var h3 = t3.viewport.imageToViewportRectangle(new e7.Rect(i4.px, i4.py, s3 || 0, a3 || 0));
          l3 = h3.x, c3 = h3.y, s3 = void 0 !== s3 ? h3.width : void 0, a3 = void 0 !== a3 ? h3.height : void 0;
        }
        r3 = new e7.Point(l3, c3);
      }
      var u3 = i4.placement;
      return u3 && "string" === e7.type(u3) && (u3 = e7.Placement[i4.placement.toUpperCase()]), new e7.Overlay({ element: n4, location: r3, placement: u3, onDraw: i4.onDraw, checkResize: i4.checkResize, width: s3, height: a3, rotationMode: i4.rotationMode });
    }
    function s2(e8, t3) {
      var i4;
      for (i4 = e8.length - 1; i4 >= 0; i4--) if (e8[i4].element === t3) return i4;
      return -1;
    }
    function a2(t3, i4) {
      return e7.requestAnimationFrame(function() {
        i4(t3);
      });
    }
    function l2(t3) {
      e7.requestAnimationFrame(function() {
        !function(t4) {
          var i4, n4;
          if (t4.controlsShouldFade) {
            for (i4 = 1 - (e7.now() - t4.controlsFadeBeginTime) / t4.controlsFadeLength, i4 = Math.min(1, i4), i4 = Math.max(0, i4), n4 = t4.controls.length - 1; n4 >= 0; n4--) t4.controls[n4].autoFade && t4.controls[n4].setOpacity(i4);
            i4 > 0 && l2(t4);
          }
        }(t3);
      });
    }
    function c2(t3) {
      t3.autoHideControls && (t3.controlsShouldFade = true, t3.controlsFadeBeginTime = e7.now() + t3.controlsFadeDelay, window.setTimeout(function() {
        l2(t3);
      }, t3.controlsFadeDelay));
    }
    function h2(e8) {
      var t3;
      for (e8.controlsShouldFade = false, t3 = e8.controls.length - 1; t3 >= 0; t3--) e8.controls[t3].setOpacity(1);
    }
    function u2() {
      h2(this);
    }
    function d2() {
      c2(this);
    }
    function p2(e8) {
      var t3 = { tracker: e8.eventSource, position: e8.position, originalEvent: e8.originalEvent, preventDefault: e8.preventDefault };
      this.raiseEvent("canvas-contextmenu", t3), e8.preventDefault = t3.preventDefault;
    }
    function _2(t3) {
      var i4 = { originalEvent: t3.originalEvent, preventDefaultAction: false, preventVerticalPan: t3.preventVerticalPan || !this.panVertical, preventHorizontalPan: t3.preventHorizontalPan || !this.panHorizontal };
      if (this.raiseEvent("canvas-key", i4), i4.preventDefaultAction || t3.ctrl || t3.alt || t3.meta) t3.preventDefault = false;
      else switch (t3.keyCode) {
        case 38:
          i4.preventVerticalPan || (t3.shift ? this.viewport.zoomBy(1.1) : this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(0, -this.pixelsPerArrowPress))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 40:
          i4.preventVerticalPan || (t3.shift ? this.viewport.zoomBy(0.9) : this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(0, this.pixelsPerArrowPress))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 37:
          i4.preventHorizontalPan || (this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(-this.pixelsPerArrowPress, 0))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 39:
          i4.preventHorizontalPan || (this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(this.pixelsPerArrowPress, 0))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 187:
          this.viewport.zoomBy(1.1), this.viewport.applyConstraints(), t3.preventDefault = true;
          break;
        case 189:
          this.viewport.zoomBy(0.9), this.viewport.applyConstraints(), t3.preventDefault = true;
          break;
        case 48:
          this.viewport.goHome(), this.viewport.applyConstraints(), t3.preventDefault = true;
          break;
        case 87:
          i4.preventVerticalPan || (t3.shift ? this.viewport.zoomBy(1.1) : this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(0, -40))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 83:
          i4.preventVerticalPan || (t3.shift ? this.viewport.zoomBy(0.9) : this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(0, 40))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 65:
          i4.preventHorizontalPan || (this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(-40, 0))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 68:
          i4.preventHorizontalPan || (this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e7.Point(40, 0))), this.viewport.applyConstraints()), t3.preventDefault = true;
          break;
        case 82:
          t3.shift ? this.viewport.flipped ? this.viewport.setRotation(this.viewport.getRotation() + this.rotationIncrement) : this.viewport.setRotation(this.viewport.getRotation() - this.rotationIncrement) : this.viewport.flipped ? this.viewport.setRotation(this.viewport.getRotation() - this.rotationIncrement) : this.viewport.setRotation(this.viewport.getRotation() + this.rotationIncrement), this.viewport.applyConstraints(), t3.preventDefault = true;
          break;
        case 70:
          this.viewport.toggleFlip(), t3.preventDefault = true;
          break;
        case 74:
          this.goToPreviousPage();
          break;
        case 75:
          this.goToNextPage();
          break;
        default:
          t3.preventDefault = false;
      }
    }
    function g2(e8) {
      var t3 = { originalEvent: e8.originalEvent };
      this.raiseEvent("canvas-key-press", t3);
    }
    function m2(t3) {
      var n4;
      document.activeElement === this.canvas || this.canvas.focus(), this.viewport.flipped && (t3.position.x = this.viewport.getContainerSize().x - t3.position.x);
      var o3 = { tracker: t3.eventSource, position: t3.position, quick: t3.quick, shift: t3.shift, originalEvent: t3.originalEvent, originalTarget: t3.originalTarget, preventDefaultAction: false };
      this.raiseEvent("canvas-click", o3), !o3.preventDefaultAction && this.viewport && t3.quick && (true === (n4 = this.gestureSettingsByDeviceType(t3.pointerType)).clickToZoom && (this.viewport.zoomBy(t3.shift ? 1 / this.zoomPerClick : this.zoomPerClick, n4.zoomToRefPoint ? this.viewport.pointFromPixel(t3.position, true) : null), this.viewport.applyConstraints()), n4.dblClickDragToZoom && (true === i3[this.hash].draggingToZoom ? (i3[this.hash].lastClickTime = null, i3[this.hash].draggingToZoom = false) : i3[this.hash].lastClickTime = e7.now()));
    }
    function f2(e8) {
      var t3, i4 = { tracker: e8.eventSource, position: e8.position, shift: e8.shift, originalEvent: e8.originalEvent, preventDefaultAction: false };
      this.raiseEvent("canvas-double-click", i4), !i4.preventDefaultAction && this.viewport && (t3 = this.gestureSettingsByDeviceType(e8.pointerType)).dblClickToZoom && (this.viewport.zoomBy(e8.shift ? 1 / this.zoomPerClick : this.zoomPerClick, t3.zoomToRefPoint ? this.viewport.pointFromPixel(e8.position, true) : null), this.viewport.applyConstraints());
    }
    function v2(e8) {
      var t3, n4 = { tracker: e8.eventSource, pointerType: e8.pointerType, position: e8.position, delta: e8.delta, speed: e8.speed, direction: e8.direction, shift: e8.shift, originalEvent: e8.originalEvent, preventDefaultAction: false };
      if (this.raiseEvent("canvas-drag", n4), t3 = this.gestureSettingsByDeviceType(e8.pointerType), !n4.preventDefaultAction && this.viewport) {
        if (t3.dblClickDragToZoom && i3[this.hash].draggingToZoom) {
          var o3 = Math.pow(this.zoomPerDblClickDrag, e8.delta.y / 50);
          this.viewport.zoomBy(o3);
        } else if (t3.dragToPan && !i3[this.hash].draggingToZoom) {
          if (this.panHorizontal || (e8.delta.x = 0), this.panVertical || (e8.delta.y = 0), this.viewport.flipped && (e8.delta.x = -e8.delta.x), this.constrainDuringPan) {
            var r3 = this.viewport.deltaPointsFromPixels(e8.delta.negate());
            this.viewport.centerSpringX.target.value += r3.x, this.viewport.centerSpringY.target.value += r3.y;
            var s3 = this.viewport.getConstrainedBounds();
            this.viewport.centerSpringX.target.value -= r3.x, this.viewport.centerSpringY.target.value -= r3.y, s3.xConstrained && (e8.delta.x = 0), s3.yConstrained && (e8.delta.y = 0);
          }
          this.viewport.panBy(this.viewport.deltaPointsFromPixels(e8.delta.negate()), t3.flickEnabled && !this.constrainDuringPan);
        }
      }
    }
    function A2(t3) {
      var n4, o3 = { tracker: t3.eventSource, pointerType: t3.pointerType, position: t3.position, speed: t3.speed, direction: t3.direction, shift: t3.shift, originalEvent: t3.originalEvent, preventDefaultAction: false };
      if (this.raiseEvent("canvas-drag-end", o3), n4 = this.gestureSettingsByDeviceType(t3.pointerType), !o3.preventDefaultAction && this.viewport) {
        if (!i3[this.hash].draggingToZoom && n4.dragToPan && n4.flickEnabled && t3.speed >= n4.flickMinSpeed) {
          var r3 = 0;
          this.panHorizontal && (r3 = n4.flickMomentum * t3.speed * Math.cos(t3.direction));
          var s3 = 0;
          this.panVertical && (s3 = n4.flickMomentum * t3.speed * Math.sin(t3.direction));
          var a3 = this.viewport.pixelFromPoint(this.viewport.getCenter(true)), l3 = this.viewport.pointFromPixel(new e7.Point(a3.x - r3, a3.y - s3));
          this.viewport.panTo(l3, false);
        }
        this.viewport.applyConstraints();
      }
      n4.dblClickDragToZoom && true === i3[this.hash].draggingToZoom && (i3[this.hash].draggingToZoom = false);
    }
    function b2(e8) {
      this.raiseEvent("canvas-enter", { tracker: e8.eventSource, pointerType: e8.pointerType, position: e8.position, buttons: e8.buttons, pointers: e8.pointers, insideElementPressed: e8.insideElementPressed, buttonDownAny: e8.buttonDownAny, originalEvent: e8.originalEvent });
    }
    function y2(e8) {
      this.raiseEvent("canvas-exit", { tracker: e8.eventSource, pointerType: e8.pointerType, position: e8.position, buttons: e8.buttons, pointers: e8.pointers, insideElementPressed: e8.insideElementPressed, buttonDownAny: e8.buttonDownAny, originalEvent: e8.originalEvent });
    }
    function w2(t3) {
      if (this.raiseEvent("canvas-press", { tracker: t3.eventSource, pointerType: t3.pointerType, position: t3.position, insideElementPressed: t3.insideElementPressed, insideElementReleased: t3.insideElementReleased, originalEvent: t3.originalEvent }), this.gestureSettingsByDeviceType(t3.pointerType).dblClickDragToZoom) {
        var n4 = i3[this.hash].lastClickTime, o3 = e7.now();
        if (null === n4) return;
        o3 - n4 < this.dblClickTimeThreshold && (i3[this.hash].draggingToZoom = true), i3[this.hash].lastClickTime = null;
      }
    }
    function x2(e8) {
      this.raiseEvent("canvas-release", { tracker: e8.eventSource, pointerType: e8.pointerType, position: e8.position, insideElementPressed: e8.insideElementPressed, insideElementReleased: e8.insideElementReleased, originalEvent: e8.originalEvent });
    }
    function C2(e8) {
      this.raiseEvent("canvas-nonprimary-press", { tracker: e8.eventSource, position: e8.position, pointerType: e8.pointerType, button: e8.button, buttons: e8.buttons, originalEvent: e8.originalEvent });
    }
    function S2(e8) {
      this.raiseEvent("canvas-nonprimary-release", { tracker: e8.eventSource, position: e8.position, pointerType: e8.pointerType, button: e8.button, buttons: e8.buttons, originalEvent: e8.originalEvent });
    }
    function E2(e8) {
      var t3, i4, n4, o3 = { tracker: e8.eventSource, pointerType: e8.pointerType, gesturePoints: e8.gesturePoints, lastCenter: e8.lastCenter, center: e8.center, lastDistance: e8.lastDistance, distance: e8.distance, shift: e8.shift, originalEvent: e8.originalEvent, preventDefaultPanAction: false, preventDefaultZoomAction: false, preventDefaultRotateAction: false };
      if (this.raiseEvent("canvas-pinch", o3), this.viewport && (!(t3 = this.gestureSettingsByDeviceType(e8.pointerType)).pinchToZoom || o3.preventDefaultPanAction && o3.preventDefaultZoomAction || (i4 = this.viewport.pointFromPixel(e8.center, true), t3.zoomToRefPoint && !o3.preventDefaultPanAction && (n4 = this.viewport.pointFromPixel(e8.lastCenter, true).minus(i4), this.panHorizontal || (n4.x = 0), this.panVertical || (n4.y = 0), this.viewport.panBy(n4, true)), o3.preventDefaultZoomAction || this.viewport.zoomBy(e8.distance / e8.lastDistance, i4, true), this.viewport.applyConstraints()), t3.pinchRotate && !o3.preventDefaultRotateAction)) {
        var r3 = Math.atan2(e8.gesturePoints[0].currentPos.y - e8.gesturePoints[1].currentPos.y, e8.gesturePoints[0].currentPos.x - e8.gesturePoints[1].currentPos.x), s3 = Math.atan2(e8.gesturePoints[0].lastPos.y - e8.gesturePoints[1].lastPos.y, e8.gesturePoints[0].lastPos.x - e8.gesturePoints[1].lastPos.x);
        i4 = this.viewport.pointFromPixel(e8.center, true), this.viewport.rotateTo(this.viewport.getRotation(true) + (r3 - s3) * (180 / Math.PI), i4, true);
      }
    }
    function T2(e8) {
      this.raiseEvent("canvas-focus", { tracker: e8.eventSource, originalEvent: e8.originalEvent });
    }
    function I2(e8) {
      this.raiseEvent("canvas-blur", { tracker: e8.eventSource, originalEvent: e8.originalEvent });
    }
    function M2(t3) {
      var i4, n4, o3, r3;
      (r3 = e7.now()) - this._lastScrollTime > this.minScrollDeltaTime ? (this._lastScrollTime = r3, i4 = { tracker: t3.eventSource, position: t3.position, scroll: t3.scroll, shift: t3.shift, originalEvent: t3.originalEvent, preventDefaultAction: false, preventDefault: true }, this.raiseEvent("canvas-scroll", i4), !i4.preventDefaultAction && this.viewport && (this.viewport.flipped && (t3.position.x = this.viewport.getContainerSize().x - t3.position.x), (n4 = this.gestureSettingsByDeviceType(t3.pointerType)).scrollToZoom && (o3 = Math.pow(this.zoomPerScroll, t3.scroll), this.viewport.zoomBy(o3, n4.zoomToRefPoint ? this.viewport.pointFromPixel(t3.position, true) : null), this.viewport.applyConstraints())), t3.preventDefault = i4.preventDefault) : t3.preventDefault = true;
    }
    function B2(e8) {
      i3[this.hash].mouseInside = true, h2(this), this.raiseEvent("container-enter", { tracker: e8.eventSource, pointerType: e8.pointerType, position: e8.position, buttons: e8.buttons, pointers: e8.pointers, insideElementPressed: e8.insideElementPressed, buttonDownAny: e8.buttonDownAny, originalEvent: e8.originalEvent });
    }
    function R2(e8) {
      e8.pointers < 1 && (i3[this.hash].mouseInside = false, i3[this.hash].animating || c2(this)), this.raiseEvent("container-exit", { tracker: e8.eventSource, pointerType: e8.pointerType, position: e8.position, buttons: e8.buttons, pointers: e8.pointers, insideElementPressed: e8.insideElementPressed, buttonDownAny: e8.buttonDownAny, originalEvent: e8.originalEvent });
    }
    function k2(t3) {
      !function(t4) {
        if (t4._opening || !i3[t4.hash]) return;
        if (t4.autoResize || i3[t4.hash].forceResize) {
          var n4;
          if (t4._autoResizePolling) {
            n4 = o2(t4.container);
            var r3 = i3[t4.hash].prevContainerSize;
            n4.equals(r3) || (i3[t4.hash].needsResize = true);
          }
          i3[t4.hash].needsResize && function(t5, n5) {
            var o3, r4 = t5.viewport, s4 = r4.getZoom(), a4 = r4.getCenter();
            if (r4.resize(n5, t5.preserveImageSizeOnResize), r4.panTo(a4, true), t5.preserveImageSizeOnResize) o3 = i3[t5.hash].prevContainerSize.x / n5.x;
            else {
              var l4 = new e7.Point(0, 0), c3 = new e7.Point(i3[t5.hash].prevContainerSize.x, i3[t5.hash].prevContainerSize.y).distanceTo(l4);
              o3 = new e7.Point(n5.x, n5.y).distanceTo(l4) / c3 * i3[t5.hash].prevContainerSize.x / n5.x;
            }
            r4.zoomTo(s4 * o3, null, true), i3[t5.hash].prevContainerSize = n5, i3[t5.hash].forceRedraw = true, i3[t5.hash].needsResize = false, i3[t5.hash].forceResize = false;
          }(t4, n4 || o2(t4.container));
        }
        var s3 = t4.viewport.update(), a3 = t4.world.update(s3) || s3;
        s3 && t4.raiseEvent("viewport-change");
        t4.referenceStrip && (a3 = t4.referenceStrip.update(t4.viewport) || a3);
        var l3 = i3[t4.hash].animating;
        !l3 && a3 && (t4.raiseEvent("animation-start"), h2(t4));
        var u3 = l3 && !a3;
        u3 && (i3[t4.hash].animating = false);
        (a3 || u3 || i3[t4.hash].forceRedraw || t4.world.needsDraw()) && (!function(e8) {
          e8.imageLoader.clear(), e8.world.draw(), e8.raiseEvent("update-viewport", {});
        }(t4), t4._drawOverlays(), t4.navigator && t4.navigator.update(t4.viewport), i3[t4.hash].forceRedraw = false, a3 && t4.raiseEvent("animation"));
        u3 && (t4.raiseEvent("animation-finish"), i3[t4.hash].mouseInside || c2(t4));
        i3[t4.hash].animating = a3;
      }(t3), t3.isOpen() ? t3._updateRequestId = a2(t3, k2) : t3._updateRequestId = false;
    }
    function P2(e8, t3) {
      return e8 ? e8 + t3 : t3;
    }
    function D2() {
      i3[this.hash].lastZoomTime = e7.now(), i3[this.hash].zoomFactor = this.zoomPerSecond, i3[this.hash].zooming = true, N2(this);
    }
    function L2() {
      i3[this.hash].lastZoomTime = e7.now(), i3[this.hash].zoomFactor = 1 / this.zoomPerSecond, i3[this.hash].zooming = true, N2(this);
    }
    function F2() {
      i3[this.hash].zooming = false;
    }
    function N2(t3) {
      e7.requestAnimationFrame(e7.delegate(t3, O2));
    }
    function O2() {
      var t3, n4, o3;
      i3[this.hash].zooming && this.viewport && (n4 = (t3 = e7.now()) - i3[this.hash].lastZoomTime, o3 = Math.pow(i3[this.hash].zoomFactor, n4 / 1e3), this.viewport.zoomBy(o3), this.viewport.applyConstraints(), i3[this.hash].lastZoomTime = t3, N2(this));
    }
    function U2() {
      this.viewport && (i3[this.hash].zooming = false, this.viewport.zoomBy(this.zoomPerClick / 1), this.viewport.applyConstraints());
    }
    function z2() {
      this.viewport && (i3[this.hash].zooming = false, this.viewport.zoomBy(1 / this.zoomPerClick), this.viewport.applyConstraints());
    }
    function H2() {
      this.buttonGroup && (this.buttonGroup.emulateEnter(), this.buttonGroup.emulateLeave());
    }
    function Q2() {
      this.viewport && this.viewport.goHome();
    }
    function V2() {
      this.isFullPage() && !e7.isFullScreen() ? this.setFullPage(false) : this.setFullScreen(!this.isFullPage()), this.buttonGroup && this.buttonGroup.emulateLeave(), this.fullPageButton.element.focus(), this.viewport && this.viewport.applyConstraints();
    }
    function G2() {
      if (this.viewport) {
        var e8 = this.viewport.getRotation();
        this.viewport.flipped ? e8 += this.rotationIncrement : e8 -= this.rotationIncrement, this.viewport.setRotation(e8);
      }
    }
    function q2() {
      if (this.viewport) {
        var e8 = this.viewport.getRotation();
        this.viewport.flipped ? e8 -= this.rotationIncrement : e8 += this.rotationIncrement, this.viewport.setRotation(e8);
      }
    }
    function $2() {
      this.viewport.toggleFlip();
    }
    e7.Viewer = function(t3) {
      var r3, s3 = arguments, l3 = this;
      e7.isPlainObject(t3) || (t3 = { id: s3[0], xmlPath: s3.length > 1 ? s3[1] : void 0, prefixUrl: s3.length > 2 ? s3[2] : void 0, controls: s3.length > 3 ? s3[3] : void 0, overlays: s3.length > 4 ? s3[4] : void 0 }), t3.config && (e7.extend(true, t3, t3.config), delete t3.config);
      if (t3.drawerOptions = Object.assign({}, ["useCanvas"].reduce((e8, i4) => (e8[i4] = t3[i4], delete t3[i4], e8), {}), t3.drawerOptions), e7.extend(true, this, { id: t3.id, hash: t3.hash || n3++, initialPage: 0, element: null, container: null, canvas: null, overlays: [], overlaysContainer: null, previousBody: [], customControls: [], source: null, drawer: null, world: null, viewport: null, navigator: null, collectionViewport: null, collectionDrawer: null, navImages: null, buttonGroup: null, profiler: null }, e7.DEFAULT_SETTINGS, t3), void 0 === this.hash) throw new Error("A hash must be defined, either by specifying options.id or options.hash.");
      void 0 !== i3[this.hash] && e7.console.warn("Hash " + this.hash + " has already been used."), i3[this.hash] = { fsBoundsDelta: new e7.Point(1, 1), prevContainerSize: null, animating: false, forceRedraw: false, needsResize: false, forceResize: false, mouseInside: false, group: null, zooming: false, zoomFactor: null, lastZoomTime: null, fullPage: false, onfullscreenchange: null, lastClickTime: null, draggingToZoom: false }, this._sequenceIndex = 0, this._firstOpen = true, this._updateRequestId = null, this._loadQueue = [], this.currentOverlays = [], this._updatePixelDensityRatioBind = null, this._lastScrollTime = e7.now(), e7.EventSource.call(this), this.addHandler("open-failed", function(t4) {
        var i4 = e7.getString("Errors.OpenFailed", t4.eventSource, t4.message);
        l3._showMessage(i4);
      }), e7.ControlDock.call(this, t3), this.xmlPath && (this.tileSources = [this.xmlPath]), this.element = this.element || document.getElementById(this.id), this.canvas = e7.makeNeutralElement("div"), this.canvas.className = "openseadragon-canvas", function(e8) {
        e8.width = "100%", e8.height = "100%", e8.overflow = "hidden", e8.position = "absolute", e8.top = "0px", e8.left = "0px";
      }(this.canvas.style), e7.setElementTouchActionNone(this.canvas), "" !== t3.tabIndex && (this.canvas.tabIndex = void 0 === t3.tabIndex ? 0 : t3.tabIndex), this.container.className = "openseadragon-container", function(e8) {
        e8.width = "100%", e8.height = "100%", e8.position = "relative", e8.overflow = "hidden", e8.left = "0px", e8.top = "0px", e8.textAlign = "left";
      }(this.container.style), e7.setElementTouchActionNone(this.container), this.container.insertBefore(this.canvas, this.container.firstChild), this.element.appendChild(this.container), this.bodyWidth = document.body.style.width, this.bodyHeight = document.body.style.height, this.bodyOverflow = document.body.style.overflow, this.docOverflow = document.documentElement.style.overflow, this.innerTracker = new e7.MouseTracker({ userData: "Viewer.innerTracker", element: this.canvas, startDisabled: !this.mouseNavEnabled, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, dblClickTimeThreshold: this.dblClickTimeThreshold, dblClickDistThreshold: this.dblClickDistThreshold, contextMenuHandler: e7.delegate(this, p2), keyDownHandler: e7.delegate(this, _2), keyHandler: e7.delegate(this, g2), clickHandler: e7.delegate(this, m2), dblClickHandler: e7.delegate(this, f2), dragHandler: e7.delegate(this, v2), dragEndHandler: e7.delegate(this, A2), enterHandler: e7.delegate(this, b2), leaveHandler: e7.delegate(this, y2), pressHandler: e7.delegate(this, w2), releaseHandler: e7.delegate(this, x2), nonPrimaryPressHandler: e7.delegate(this, C2), nonPrimaryReleaseHandler: e7.delegate(this, S2), scrollHandler: e7.delegate(this, M2), pinchHandler: e7.delegate(this, E2), focusHandler: e7.delegate(this, T2), blurHandler: e7.delegate(this, I2) }), this.outerTracker = new e7.MouseTracker({ userData: "Viewer.outerTracker", element: this.container, startDisabled: !this.mouseNavEnabled, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, dblClickTimeThreshold: this.dblClickTimeThreshold, dblClickDistThreshold: this.dblClickDistThreshold, enterHandler: e7.delegate(this, B2), leaveHandler: e7.delegate(this, R2) }), this.toolbar && (this.toolbar = new e7.ControlDock({ element: this.toolbar })), this.bindStandardControls(), i3[this.hash].prevContainerSize = o2(this.container), window.ResizeObserver ? (this._autoResizePolling = false, this._resizeObserver = new ResizeObserver(function() {
        i3[l3.hash].needsResize = true;
      }), this._resizeObserver.observe(this.container, {})) : this._autoResizePolling = true, this.world = new e7.World({ viewer: this }), this.world.addHandler("add-item", function(e8) {
        l3.source = l3.world.getItemAt(0).source, i3[l3.hash].forceRedraw = true, l3._updateRequestId || (l3._updateRequestId = a2(l3, k2));
      }), this.world.addHandler("remove-item", function(e8) {
        l3.world.getItemCount() ? l3.source = l3.world.getItemAt(0).source : l3.source = null, i3[l3.hash].forceRedraw = true;
      }), this.world.addHandler("metrics-change", function(e8) {
        l3.viewport && l3.viewport._setContentBounds(l3.world.getHomeBounds(), l3.world.getContentFactor());
      }), this.world.addHandler("item-index-change", function(e8) {
        l3.source = l3.world.getItemAt(0).source;
      }), this.viewport = new e7.Viewport({ containerSize: i3[this.hash].prevContainerSize, springStiffness: this.springStiffness, animationTime: this.animationTime, minZoomImageRatio: this.minZoomImageRatio, maxZoomPixelRatio: this.maxZoomPixelRatio, visibilityRatio: this.visibilityRatio, wrapHorizontal: this.wrapHorizontal, wrapVertical: this.wrapVertical, defaultZoomLevel: this.defaultZoomLevel, minZoomLevel: this.minZoomLevel, maxZoomLevel: this.maxZoomLevel, viewer: this, degrees: this.degrees, flipped: this.flipped, overlayPreserveContentDirection: this.overlayPreserveContentDirection, navigatorRotate: this.navigatorRotate, homeFillsViewer: this.homeFillsViewer, margins: this.viewportMargins, silenceMultiImageWarnings: this.silenceMultiImageWarnings }), this.viewport._setContentBounds(this.world.getHomeBounds(), this.world.getContentFactor()), this.imageLoader = new e7.ImageLoader({ jobLimit: this.imageLoaderLimit, timeout: t3.timeout, tileRetryMax: this.tileRetryMax, tileRetryDelay: this.tileRetryDelay }), this.tileCache = new e7.TileCache({ maxImageCacheCount: this.maxImageCacheCount }), Object.prototype.hasOwnProperty.call(this.drawerOptions, "useCanvas") && (e7.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'), this.drawerOptions.useCanvas || (this.drawer = e7.HTMLDrawer), delete this.drawerOptions.useCanvas);
      let h3 = Array.isArray(this.drawer) ? this.drawer : [this.drawer];
      0 === h3.length && (h3 = [e7.DEFAULT_SETTINGS.drawer].flat(), e7.console.warn("No valid drawers were selected. Using the default value.")), this.drawer = null;
      for (const e8 of h3) {
        if (this.requestDrawer(e8, { mainDrawer: true, redrawImmediately: false })) break;
      }
      if (!this.drawer) throw e7.console.error("No drawer could be created!"), "Error with creating the selected drawer(s)";
      for (this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled), this.overlaysContainer = e7.makeNeutralElement("div"), this.canvas.appendChild(this.overlaysContainer), this.drawer.canRotate() || (this.rotateLeft && (r3 = this.buttonGroup.buttons.indexOf(this.rotateLeft), this.buttonGroup.buttons.splice(r3, 1), this.buttonGroup.element.removeChild(this.rotateLeft.element)), this.rotateRight && (r3 = this.buttonGroup.buttons.indexOf(this.rotateRight), this.buttonGroup.buttons.splice(r3, 1), this.buttonGroup.element.removeChild(this.rotateRight.element))), this._addUpdatePixelDensityRatioEvent(), this.showNavigator && (this.navigator = new e7.Navigator({ element: this.navigatorElement, id: this.navigatorId, position: this.navigatorPosition, sizeRatio: this.navigatorSizeRatio, maintainSizeRatio: this.navigatorMaintainSizeRatio, top: this.navigatorTop, left: this.navigatorLeft, width: this.navigatorWidth, height: this.navigatorHeight, autoResize: this.navigatorAutoResize, autoFade: this.navigatorAutoFade, prefixUrl: this.prefixUrl, viewer: this, navigatorRotate: this.navigatorRotate, background: this.navigatorBackground, opacity: this.navigatorOpacity, borderColor: this.navigatorBorderColor, displayRegionColor: this.navigatorDisplayRegionColor, crossOriginPolicy: this.crossOriginPolicy, animationTime: this.animationTime, drawer: this.drawer.getType(), loadTilesWithAjax: this.loadTilesWithAjax, ajaxHeaders: this.ajaxHeaders, ajaxWithCredentials: this.ajaxWithCredentials })), this.sequenceMode && this.bindSequenceControls(), this.tileSources && this.open(this.tileSources), r3 = 0; r3 < this.customControls.length; r3++) this.addControl(this.customControls[r3].id, { anchor: this.customControls[r3].anchor });
      e7.requestAnimationFrame(function() {
        c2(l3);
      }), e7._viewers.set(this.element, this);
    }, e7.extend(e7.Viewer.prototype, e7.EventSource.prototype, e7.ControlDock.prototype, { isOpen: function() {
      return !!this.world.getItemCount();
    }, openDzi: function(t3) {
      return e7.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."), this.open(t3);
    }, openTileSource: function(t3) {
      return e7.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."), this.open(t3);
    }, get buttons() {
      return e7.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"), this.buttonGroup;
    }, open: function(t3, i4) {
      var n4 = this;
      if (this.close(), !t3) return this;
      if (this.sequenceMode && e7.isArray(t3)) return this.referenceStrip && (this.referenceStrip.destroy(), this.referenceStrip = null), void 0 === i4 || isNaN(i4) || (this.initialPage = i4), this.tileSources = t3, this._sequenceIndex = Math.max(0, Math.min(this.tileSources.length - 1, this.initialPage)), this.tileSources.length && (this.open(this.tileSources[this._sequenceIndex]), this.showReferenceStrip && this.addReferenceStrip()), this._updateSequenceButtons(this._sequenceIndex), this;
      if (e7.isArray(t3) || (t3 = [t3]), !t3.length) return this;
      this._opening = true;
      for (var o3, s3 = t3.length, a3 = 0, l3 = 0, c3 = function() {
        if (a3 + l3 === s3) if (a3) {
          !n4._firstOpen && n4.preserveViewport || (n4.viewport.goHome(true), n4.viewport.update()), n4._firstOpen = false;
          var e8 = t3[0];
          if (e8.tileSource && (e8 = e8.tileSource), n4.overlays && !n4.preserveOverlays) for (var i5 = 0; i5 < n4.overlays.length; i5++) n4.currentOverlays[i5] = r2(n4, n4.overlays[i5]);
          n4._drawOverlays(), n4._opening = false, n4.raiseEvent("open", { source: e8 });
        } else n4._opening = false, n4.raiseEvent("open-failed", o3);
      }, h3 = function(t4) {
        e7.isPlainObject(t4) && t4.tileSource || (t4 = { tileSource: t4 }), void 0 !== t4.index && (e7.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"), delete t4.index), void 0 === t4.collectionImmediately && (t4.collectionImmediately = true);
        var i5 = t4.success;
        t4.success = function(e8) {
          if (a3++, t4.tileSource.overlays) for (var o4 = 0; o4 < t4.tileSource.overlays.length; o4++) n4.addOverlay(t4.tileSource.overlays[o4]);
          i5 && i5(e8), c3();
        };
        var r3 = t4.error;
        t4.error = function(e8) {
          l3++, o3 || (o3 = e8), r3 && r3(e8), c3();
        }, n4.addTiledImage(t4);
      }, u3 = 0; u3 < t3.length; u3++) h3(t3[u3]);
      return this;
    }, close: function() {
      return i3[this.hash] ? (this._opening = false, this.navigator && this.navigator.close(), this.preserveOverlays || (this.clearOverlays(), this.overlaysContainer.innerHTML = ""), i3[this.hash].animating = false, this.world.removeAll(), this.imageLoader.clear(), this.raiseEvent("close"), this) : this;
    }, destroy: function() {
      if (i3[this.hash]) {
        if (this.raiseEvent("before-destroy"), this._removeUpdatePixelDensityRatioEvent(), this.close(), this.clearOverlays(), this.overlaysContainer.innerHTML = "", this._resizeObserver && this._resizeObserver.disconnect(), this.referenceStrip && (this.referenceStrip.destroy(), this.referenceStrip = null), null !== this._updateRequestId && (e7.cancelAnimationFrame(this._updateRequestId), this._updateRequestId = null), this.drawer && this.drawer.destroy(), this.navigator && (this.navigator.destroy(), i3[this.navigator.hash] = null, delete i3[this.navigator.hash], this.navigator = null), this.buttonGroup) this.buttonGroup.destroy();
        else if (this.customButtons) for (; this.customButtons.length; ) this.customButtons.pop().destroy();
        if (this.paging && this.paging.destroy(), this.element) for (; this.element.firstChild; ) this.element.removeChild(this.element.firstChild);
        this.container.onsubmit = null, this.clearControls(), this.innerTracker && this.innerTracker.destroy(), this.outerTracker && this.outerTracker.destroy(), i3[this.hash] = null, delete i3[this.hash], this.canvas = null, this.container = null, e7._viewers.delete(this.element), this.element = null, this.raiseEvent("destroy"), this.removeAllHandlers();
      }
    }, requestDrawer(t3, i4) {
      const n4 = (i4 = e7.extend(true, { mainDrawer: true, redrawImmediately: true, drawerOptions: null }, i4)).mainDrawer, o3 = i4.redrawImmediately, r3 = i4.drawerOptions, s3 = this.drawer;
      let a3 = null;
      if (t3 && t3.prototype instanceof e7.DrawerBase ? (a3 = t3, t3 = "custom") : "string" == typeof t3 && (a3 = e7.determineDrawer(t3)), a3 || e7.console.warn("Unsupported drawer! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase."), a3 && a3.isSupported()) {
        s3 && n4 && s3.destroy();
        const e8 = new a3({ viewer: this, viewport: this.viewport, element: this.canvas, debugGridColor: this.debugGridColor, options: r3 || this.drawerOptions[t3] });
        return n4 && (this.drawer = e8, o3 && this.forceRedraw()), e8;
      }
      return false;
    }, isMouseNavEnabled: function() {
      return this.innerTracker.isTracking();
    }, setMouseNavEnabled: function(e8) {
      return this.innerTracker.setTracking(e8), this.outerTracker.setTracking(e8), this.raiseEvent("mouse-enabled", { enabled: e8 }), this;
    }, areControlsEnabled: function() {
      var e8, t3 = this.controls.length;
      for (e8 = 0; e8 < this.controls.length; e8++) t3 = t3 && this.controls[e8].isVisible();
      return t3;
    }, setControlsEnabled: function(e8) {
      return e8 ? h2(this) : c2(this), this.raiseEvent("controls-enabled", { enabled: e8 }), this;
    }, setDebugMode: function(e8) {
      for (var t3 = 0; t3 < this.world.getItemCount(); t3++) this.world.getItemAt(t3).debugMode = e8;
      this.debugMode = e8, this.forceRedraw();
    }, setAjaxHeaders: function(t3, i4) {
      if (null === t3 && (t3 = {}), e7.isPlainObject(t3)) {
        if (void 0 === i4 && (i4 = true), this.ajaxHeaders = t3, i4) {
          for (var n4 = 0; n4 < this.world.getItemCount(); n4++) this.world.getItemAt(n4)._updateAjaxHeaders(true);
          if (this.navigator && this.navigator.setAjaxHeaders(this.ajaxHeaders, true), this.referenceStrip && this.referenceStrip.miniViewers) for (var o3 in this.referenceStrip.miniViewers) this.referenceStrip.miniViewers[o3].setAjaxHeaders(this.ajaxHeaders, true);
        }
      } else console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");
    }, addButton: function(e8) {
      this.buttonGroup.addButton(e8);
    }, isFullPage: function() {
      return i3[this.hash] && i3[this.hash].fullPage;
    }, setFullPage: function(t3) {
      var n4, o3, r3 = document.body, s3 = r3.style, a3 = document.documentElement.style, l3 = this;
      if (t3 === this.isFullPage()) return this;
      var c3 = { fullPage: t3, preventDefaultAction: false };
      if (this.raiseEvent("pre-full-page", c3), c3.preventDefaultAction) return this;
      if (t3 && this.element) {
        for (this.elementSize = e7.getElementSize(this.element), this.pageScroll = e7.getPageScroll(), this.elementMargin = this.element.style.margin, this.element.style.margin = "0", this.elementPadding = this.element.style.padding, this.element.style.padding = "0", this.bodyMargin = s3.margin, this.docMargin = a3.margin, s3.margin = "0", a3.margin = "0", this.bodyPadding = s3.padding, this.docPadding = a3.padding, s3.padding = "0", a3.padding = "0", this.bodyWidth = s3.width, this.docWidth = a3.width, s3.width = "100%", a3.width = "100%", this.bodyHeight = s3.height, this.docHeight = a3.height, s3.height = "100%", a3.height = "100%", this.bodyDisplay = s3.display, s3.display = "block", this.previousBody = [], i3[this.hash].prevElementParent = this.element.parentNode, i3[this.hash].prevNextSibling = this.element.nextSibling, i3[this.hash].prevElementWidth = this.element.style.width, i3[this.hash].prevElementHeight = this.element.style.height, n4 = r3.childNodes.length, o3 = 0; o3 < n4; o3++) this.previousBody.push(r3.childNodes[0]), r3.removeChild(r3.childNodes[0]);
        this.toolbar && this.toolbar.element && (this.toolbar.parentNode = this.toolbar.element.parentNode, this.toolbar.nextSibling = this.toolbar.element.nextSibling, r3.appendChild(this.toolbar.element), e7.addClass(this.toolbar.element, "fullpage")), e7.addClass(this.element, "fullpage"), r3.appendChild(this.element), this.element.style.height = "100vh", this.element.style.width = "100vw", this.toolbar && this.toolbar.element && (this.element.style.height = e7.getElementSize(this.element).y - e7.getElementSize(this.toolbar.element).y + "px"), i3[this.hash].fullPage = true, e7.delegate(this, B2)({});
      } else {
        for (this.element.style.margin = this.elementMargin, this.element.style.padding = this.elementPadding, s3.margin = this.bodyMargin, a3.margin = this.docMargin, s3.padding = this.bodyPadding, a3.padding = this.docPadding, s3.width = this.bodyWidth, a3.width = this.docWidth, s3.height = this.bodyHeight, a3.height = this.docHeight, s3.display = this.bodyDisplay, r3.removeChild(this.element), n4 = this.previousBody.length, o3 = 0; o3 < n4; o3++) r3.appendChild(this.previousBody.shift());
        e7.removeClass(this.element, "fullpage"), i3[this.hash].prevElementParent.insertBefore(this.element, i3[this.hash].prevNextSibling), this.toolbar && this.toolbar.element && (r3.removeChild(this.toolbar.element), e7.removeClass(this.toolbar.element, "fullpage"), this.toolbar.parentNode.insertBefore(this.toolbar.element, this.toolbar.nextSibling), delete this.toolbar.parentNode, delete this.toolbar.nextSibling), this.element.style.width = i3[this.hash].prevElementWidth, this.element.style.height = i3[this.hash].prevElementHeight;
        var h3 = 0, u3 = function() {
          e7.setPageScroll(l3.pageScroll);
          var t4 = e7.getPageScroll();
          ++h3 < 10 && (t4.x !== l3.pageScroll.x || t4.y !== l3.pageScroll.y) && e7.requestAnimationFrame(u3);
        };
        e7.requestAnimationFrame(u3), i3[this.hash].fullPage = false, e7.delegate(this, R2)({});
      }
      return this.navigator && this.viewport && this.navigator.update(this.viewport), this.raiseEvent("full-page", { fullPage: t3 }), this;
    }, setFullScreen: function(t3) {
      var i4 = this;
      if (!e7.supportsFullScreen) return this.setFullPage(t3);
      if (e7.isFullScreen() === t3) return this;
      var n4 = { fullScreen: t3, preventDefaultAction: false };
      if (this.raiseEvent("pre-full-screen", n4), n4.preventDefaultAction) return this;
      if (t3) {
        if (this.setFullPage(true), !this.isFullPage()) return this;
        this.fullPageStyleWidth = this.element.style.width, this.fullPageStyleHeight = this.element.style.height, this.element.style.width = "100%", this.element.style.height = "100%";
        var o3 = function() {
          var t4 = e7.isFullScreen();
          t4 || (e7.removeEvent(document, e7.fullScreenEventName, o3), e7.removeEvent(document, e7.fullScreenErrorEventName, o3), i4.setFullPage(false), i4.isFullPage() && (i4.element.style.width = i4.fullPageStyleWidth, i4.element.style.height = i4.fullPageStyleHeight)), i4.navigator && i4.viewport && setTimeout(function() {
            i4.navigator.update(i4.viewport);
          }), i4.raiseEvent("full-screen", { fullScreen: t4 });
        };
        e7.addEvent(document, e7.fullScreenEventName, o3), e7.addEvent(document, e7.fullScreenErrorEventName, o3), e7.requestFullScreen(document.body);
      } else e7.exitFullScreen();
      return this;
    }, isVisible: function() {
      return "hidden" !== this.container.style.visibility;
    }, isFullScreen: function() {
      return e7.isFullScreen() && this.isFullPage();
    }, setVisible: function(e8) {
      return this.container.style.visibility = e8 ? "" : "hidden", this.raiseEvent("visible", { visible: e8 }), this;
    }, addTiledImage: function(t3) {
      e7.console.assert(t3, "[Viewer.addTiledImage] options is required"), e7.console.assert(t3.tileSource, "[Viewer.addTiledImage] options.tileSource is required"), e7.console.assert(!t3.replace || t3.index > -1 && t3.index < this.world.getItemCount(), "[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");
      var i4 = this;
      t3.replace && (t3.replaceItem = i4.world.getItemAt(t3.index)), this._hideMessage(), void 0 === t3.placeholderFillStyle && (t3.placeholderFillStyle = this.placeholderFillStyle), void 0 === t3.opacity && (t3.opacity = this.opacity), void 0 === t3.preload && (t3.preload = this.preload), void 0 === t3.compositeOperation && (t3.compositeOperation = this.compositeOperation), void 0 === t3.crossOriginPolicy && (t3.crossOriginPolicy = void 0 !== t3.tileSource.crossOriginPolicy ? t3.tileSource.crossOriginPolicy : this.crossOriginPolicy), void 0 === t3.ajaxWithCredentials && (t3.ajaxWithCredentials = this.ajaxWithCredentials), void 0 === t3.loadTilesWithAjax && (t3.loadTilesWithAjax = this.loadTilesWithAjax), e7.isPlainObject(t3.ajaxHeaders) || (t3.ajaxHeaders = {});
      var n4 = { options: t3 };
      function o3(e8) {
        for (var o4 = 0; o4 < i4._loadQueue.length; o4++) if (i4._loadQueue[o4] === n4) {
          i4._loadQueue.splice(o4, 1);
          break;
        }
        0 === i4._loadQueue.length && r3(n4), i4.raiseEvent("add-item-failed", e8), t3.error && t3.error(e8);
      }
      function r3(e8) {
        i4.collectionMode && (i4.world.arrange({ immediately: e8.options.collectionImmediately, rows: i4.collectionRows, columns: i4.collectionColumns, layout: i4.collectionLayout, tileSize: i4.collectionTileSize, tileMargin: i4.collectionTileMargin }), i4.world.setAutoRefigureSizes(true));
      }
      function s3() {
        for (var t4, n5, o4; i4._loadQueue.length && (t4 = i4._loadQueue[0]).tileSource; ) {
          if (i4._loadQueue.splice(0, 1), t4.options.replace) {
            var s4 = i4.world.getIndexOfItem(t4.options.replaceItem);
            -1 !== s4 && (t4.options.index = s4), i4.world.removeItem(t4.options.replaceItem);
          }
          n5 = new e7.TiledImage({ viewer: i4, source: t4.tileSource, viewport: i4.viewport, drawer: i4.drawer, tileCache: i4.tileCache, imageLoader: i4.imageLoader, x: t4.options.x, y: t4.options.y, width: t4.options.width, height: t4.options.height, fitBounds: t4.options.fitBounds, fitBoundsPlacement: t4.options.fitBoundsPlacement, clip: t4.options.clip, placeholderFillStyle: t4.options.placeholderFillStyle, opacity: t4.options.opacity, preload: t4.options.preload, degrees: t4.options.degrees, flipped: t4.options.flipped, compositeOperation: t4.options.compositeOperation, springStiffness: i4.springStiffness, animationTime: i4.animationTime, minZoomImageRatio: i4.minZoomImageRatio, wrapHorizontal: i4.wrapHorizontal, wrapVertical: i4.wrapVertical, maxTilesPerFrame: i4.maxTilesPerFrame, immediateRender: i4.immediateRender, blendTime: i4.blendTime, alwaysBlend: i4.alwaysBlend, minPixelRatio: i4.minPixelRatio, smoothTileEdgesMinZoom: i4.smoothTileEdgesMinZoom, iOSDevice: i4.iOSDevice, crossOriginPolicy: t4.options.crossOriginPolicy, ajaxWithCredentials: t4.options.ajaxWithCredentials, loadTilesWithAjax: t4.options.loadTilesWithAjax, ajaxHeaders: t4.options.ajaxHeaders, debugMode: i4.debugMode, subPixelRoundingForTransparency: i4.subPixelRoundingForTransparency }), i4.collectionMode && i4.world.setAutoRefigureSizes(false), i4.navigator && (o4 = e7.extend({}, t4.options, { replace: false, originalTiledImage: n5, tileSource: t4.tileSource }), i4.navigator.addTiledImage(o4)), i4.world.addItem(n5, { index: t4.options.index }), 0 === i4._loadQueue.length && r3(t4), 1 !== i4.world.getItemCount() || i4.preserveViewport || i4.viewport.goHome(true), t4.options.success && t4.options.success({ item: n5 });
        }
      }
      e7.isArray(t3.tileSource) ? setTimeout(function() {
        o3({ message: "[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.", source: t3.tileSource, options: t3 });
      }) : (this._loadQueue.push(n4), function(t4, i5, n5, o4, r4) {
        var s4 = t4;
        if ("string" === e7.type(i5)) {
          if (i5.match(/^\s*<.*>\s*$/)) i5 = e7.parseXml(i5);
          else if (i5.match(/^\s*[{[].*[}\]]\s*$/)) try {
            var a3 = e7.parseJSON(i5);
            i5 = a3;
          } catch (e8) {
          }
        }
        function l3(e8, t5) {
          e8.ready ? o4(e8) : (e8.addHandler("ready", function() {
            o4(e8);
          }), e8.addHandler("open-failed", function(e9) {
            r4({ message: e9.message, source: t5 });
          }));
        }
        setTimeout(function() {
          if ("string" === e7.type(i5)) (i5 = new e7.TileSource({ url: i5, crossOriginPolicy: void 0 !== n5.crossOriginPolicy ? n5.crossOriginPolicy : t4.crossOriginPolicy, ajaxWithCredentials: t4.ajaxWithCredentials, ajaxHeaders: n5.ajaxHeaders ? n5.ajaxHeaders : t4.ajaxHeaders, splitHashDataForPost: t4.splitHashDataForPost, success: function(e8) {
            o4(e8.tileSource);
          } })).addHandler("open-failed", function(e8) {
            r4(e8);
          });
          else if (e7.isPlainObject(i5) || i5.nodeType) if (void 0 !== i5.crossOriginPolicy || void 0 === n5.crossOriginPolicy && void 0 === t4.crossOriginPolicy || (i5.crossOriginPolicy = void 0 !== n5.crossOriginPolicy ? n5.crossOriginPolicy : t4.crossOriginPolicy), void 0 === i5.ajaxWithCredentials && (i5.ajaxWithCredentials = t4.ajaxWithCredentials), e7.isFunction(i5.getTileUrl)) {
            var a4 = new e7.TileSource(i5);
            a4.getTileUrl = i5.getTileUrl, o4(a4);
          } else {
            var c3 = e7.TileSource.determineType(s4, i5);
            if (!c3) return void r4({ message: "Unable to load TileSource", source: i5 });
            var h3 = c3.prototype.configure.apply(s4, [i5]);
            l3(new c3(h3), i5);
          }
          else l3(i5, i5);
        });
      }(this, t3.tileSource, t3, function(e8) {
        n4.tileSource = e8, s3();
      }, function(e8) {
        e8.options = t3, o3(e8), s3();
      }));
    }, addSimpleImage: function(t3) {
      e7.console.assert(t3, "[Viewer.addSimpleImage] options is required"), e7.console.assert(t3.url, "[Viewer.addSimpleImage] options.url is required");
      var i4 = e7.extend({}, t3, { tileSource: { type: "image", url: t3.url } });
      delete i4.url, this.addTiledImage(i4);
    }, addLayer: function(t3) {
      var i4 = this;
      e7.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");
      var n4 = e7.extend({}, t3, { success: function(e8) {
        i4.raiseEvent("add-layer", { options: t3, drawer: e8.item });
      }, error: function(e8) {
        i4.raiseEvent("add-layer-failed", e8);
      } });
      return this.addTiledImage(n4), this;
    }, getLayerAtLevel: function(t3) {
      return e7.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."), this.world.getItemAt(t3);
    }, getLevelOfLayer: function(t3) {
      return e7.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."), this.world.getIndexOfItem(t3);
    }, getLayersCount: function() {
      return e7.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."), this.world.getItemCount();
    }, setLayerLevel: function(t3, i4) {
      return e7.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."), this.world.setItemIndex(t3, i4);
    }, removeLayer: function(t3) {
      return e7.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."), this.world.removeItem(t3);
    }, forceRedraw: function() {
      return i3[this.hash].forceRedraw = true, this;
    }, forceResize: function() {
      i3[this.hash].needsResize = true, i3[this.hash].forceResize = true;
    }, bindSequenceControls: function() {
      var t3 = e7.delegate(this, u2), i4 = e7.delegate(this, d2), n4 = e7.delegate(this, this.goToNextPage), o3 = e7.delegate(this, this.goToPreviousPage), r3 = this.navImages, s3 = true;
      return this.showSequenceControl && ((this.previousButton || this.nextButton) && (s3 = false), this.previousButton = new e7.Button({ element: this.previousButton ? e7.getElement(this.previousButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.PreviousPage"), srcRest: P2(this.prefixUrl, r3.previous.REST), srcGroup: P2(this.prefixUrl, r3.previous.GROUP), srcHover: P2(this.prefixUrl, r3.previous.HOVER), srcDown: P2(this.prefixUrl, r3.previous.DOWN), onRelease: o3, onFocus: t3, onBlur: i4 }), this.nextButton = new e7.Button({ element: this.nextButton ? e7.getElement(this.nextButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.NextPage"), srcRest: P2(this.prefixUrl, r3.next.REST), srcGroup: P2(this.prefixUrl, r3.next.GROUP), srcHover: P2(this.prefixUrl, r3.next.HOVER), srcDown: P2(this.prefixUrl, r3.next.DOWN), onRelease: n4, onFocus: t3, onBlur: i4 }), this.navPrevNextWrap || this.previousButton.disable(), this.tileSources && this.tileSources.length || this.nextButton.disable(), s3 && (this.paging = new e7.ButtonGroup({ buttons: [this.previousButton, this.nextButton], clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold }), this.pagingControl = this.paging.element, this.toolbar ? this.toolbar.addControl(this.pagingControl, { anchor: e7.ControlAnchor.BOTTOM_RIGHT }) : this.addControl(this.pagingControl, { anchor: this.sequenceControlAnchor || e7.ControlAnchor.TOP_LEFT }))), this;
    }, bindStandardControls: function() {
      var t3 = e7.delegate(this, D2), i4 = e7.delegate(this, F2), n4 = e7.delegate(this, U2), o3 = e7.delegate(this, L2), r3 = e7.delegate(this, z2), s3 = e7.delegate(this, Q2), a3 = e7.delegate(this, V2), l3 = e7.delegate(this, G2), c3 = e7.delegate(this, q2), h3 = e7.delegate(this, $2), p3 = e7.delegate(this, u2), _3 = e7.delegate(this, d2), g3 = this.navImages, m3 = [], f3 = true;
      return this.showNavigationControl && ((this.zoomInButton || this.zoomOutButton || this.homeButton || this.fullPageButton || this.rotateLeftButton || this.rotateRightButton || this.flipButton) && (f3 = false), this.showZoomControl && (m3.push(this.zoomInButton = new e7.Button({ element: this.zoomInButton ? e7.getElement(this.zoomInButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.ZoomIn"), srcRest: P2(this.prefixUrl, g3.zoomIn.REST), srcGroup: P2(this.prefixUrl, g3.zoomIn.GROUP), srcHover: P2(this.prefixUrl, g3.zoomIn.HOVER), srcDown: P2(this.prefixUrl, g3.zoomIn.DOWN), onPress: t3, onRelease: i4, onClick: n4, onEnter: t3, onExit: i4, onFocus: p3, onBlur: _3 })), m3.push(this.zoomOutButton = new e7.Button({ element: this.zoomOutButton ? e7.getElement(this.zoomOutButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.ZoomOut"), srcRest: P2(this.prefixUrl, g3.zoomOut.REST), srcGroup: P2(this.prefixUrl, g3.zoomOut.GROUP), srcHover: P2(this.prefixUrl, g3.zoomOut.HOVER), srcDown: P2(this.prefixUrl, g3.zoomOut.DOWN), onPress: o3, onRelease: i4, onClick: r3, onEnter: o3, onExit: i4, onFocus: p3, onBlur: _3 }))), this.showHomeControl && m3.push(this.homeButton = new e7.Button({ element: this.homeButton ? e7.getElement(this.homeButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.Home"), srcRest: P2(this.prefixUrl, g3.home.REST), srcGroup: P2(this.prefixUrl, g3.home.GROUP), srcHover: P2(this.prefixUrl, g3.home.HOVER), srcDown: P2(this.prefixUrl, g3.home.DOWN), onRelease: s3, onFocus: p3, onBlur: _3 })), this.showFullPageControl && m3.push(this.fullPageButton = new e7.Button({ element: this.fullPageButton ? e7.getElement(this.fullPageButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.FullPage"), srcRest: P2(this.prefixUrl, g3.fullpage.REST), srcGroup: P2(this.prefixUrl, g3.fullpage.GROUP), srcHover: P2(this.prefixUrl, g3.fullpage.HOVER), srcDown: P2(this.prefixUrl, g3.fullpage.DOWN), onRelease: a3, onFocus: p3, onBlur: _3 })), this.showRotationControl && (m3.push(this.rotateLeftButton = new e7.Button({ element: this.rotateLeftButton ? e7.getElement(this.rotateLeftButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.RotateLeft"), srcRest: P2(this.prefixUrl, g3.rotateleft.REST), srcGroup: P2(this.prefixUrl, g3.rotateleft.GROUP), srcHover: P2(this.prefixUrl, g3.rotateleft.HOVER), srcDown: P2(this.prefixUrl, g3.rotateleft.DOWN), onRelease: l3, onFocus: p3, onBlur: _3 })), m3.push(this.rotateRightButton = new e7.Button({ element: this.rotateRightButton ? e7.getElement(this.rotateRightButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.RotateRight"), srcRest: P2(this.prefixUrl, g3.rotateright.REST), srcGroup: P2(this.prefixUrl, g3.rotateright.GROUP), srcHover: P2(this.prefixUrl, g3.rotateright.HOVER), srcDown: P2(this.prefixUrl, g3.rotateright.DOWN), onRelease: c3, onFocus: p3, onBlur: _3 }))), this.showFlipControl && m3.push(this.flipButton = new e7.Button({ element: this.flipButton ? e7.getElement(this.flipButton) : null, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, tooltip: e7.getString("Tooltips.Flip"), srcRest: P2(this.prefixUrl, g3.flip.REST), srcGroup: P2(this.prefixUrl, g3.flip.GROUP), srcHover: P2(this.prefixUrl, g3.flip.HOVER), srcDown: P2(this.prefixUrl, g3.flip.DOWN), onRelease: h3, onFocus: p3, onBlur: _3 })), f3 ? (this.buttonGroup = new e7.ButtonGroup({ buttons: m3, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold }), this.navControl = this.buttonGroup.element, this.addHandler("open", e7.delegate(this, H2)), this.toolbar ? this.toolbar.addControl(this.navControl, { anchor: this.navigationControlAnchor || e7.ControlAnchor.TOP_LEFT }) : this.addControl(this.navControl, { anchor: this.navigationControlAnchor || e7.ControlAnchor.TOP_LEFT })) : this.customButtons = m3), this;
    }, currentPage: function() {
      return this._sequenceIndex;
    }, goToPage: function(e8) {
      return this.tileSources && e8 >= 0 && e8 < this.tileSources.length && (this._sequenceIndex = e8, this._updateSequenceButtons(e8), this.open(this.tileSources[e8]), this.referenceStrip && this.referenceStrip.setFocus(e8), this.raiseEvent("page", { page: e8 })), this;
    }, addOverlay: function(t3, i4, n4, o3) {
      var a3;
      if (a3 = e7.isPlainObject(t3) ? t3 : { element: t3, location: i4, placement: n4, onDraw: o3 }, t3 = e7.getElement(a3.element), s2(this.currentOverlays, t3) >= 0) return this;
      var l3 = r2(this, a3);
      return this.currentOverlays.push(l3), l3.drawHTML(this.overlaysContainer, this.viewport), this.raiseEvent("add-overlay", { element: t3, location: a3.location, placement: a3.placement }), this;
    }, updateOverlay: function(t3, n4, o3) {
      var r3;
      return t3 = e7.getElement(t3), (r3 = s2(this.currentOverlays, t3)) >= 0 && (this.currentOverlays[r3].update(n4, o3), i3[this.hash].forceRedraw = true, this.raiseEvent("update-overlay", { element: t3, location: n4, placement: o3 })), this;
    }, removeOverlay: function(t3) {
      var n4;
      return t3 = e7.getElement(t3), (n4 = s2(this.currentOverlays, t3)) >= 0 && (this.currentOverlays[n4].destroy(), this.currentOverlays.splice(n4, 1), i3[this.hash].forceRedraw = true, this.raiseEvent("remove-overlay", { element: t3 })), this;
    }, clearOverlays: function() {
      for (; this.currentOverlays.length > 0; ) this.currentOverlays.pop().destroy();
      return i3[this.hash].forceRedraw = true, this.raiseEvent("clear-overlay", {}), this;
    }, getOverlayById: function(t3) {
      var i4;
      return t3 = e7.getElement(t3), (i4 = s2(this.currentOverlays, t3)) >= 0 ? this.currentOverlays[i4] : null;
    }, _updateSequenceButtons: function(e8) {
      this.nextButton && (this.tileSources && this.tileSources.length - 1 !== e8 ? this.nextButton.enable() : this.navPrevNextWrap || this.nextButton.disable()), this.previousButton && (e8 > 0 ? this.previousButton.enable() : this.navPrevNextWrap || this.previousButton.disable());
    }, _showMessage: function(t3) {
      this._hideMessage();
      var i4 = e7.makeNeutralElement("div");
      i4.appendChild(document.createTextNode(t3)), this.messageDiv = e7.makeCenteredNode(i4), e7.addClass(this.messageDiv, "openseadragon-message"), this.container.appendChild(this.messageDiv);
    }, _hideMessage: function() {
      var e8 = this.messageDiv;
      e8 && (e8.parentNode.removeChild(e8), delete this.messageDiv);
    }, gestureSettingsByDeviceType: function(e8) {
      switch (e8) {
        case "mouse":
          return this.gestureSettingsMouse;
        case "touch":
          return this.gestureSettingsTouch;
        case "pen":
          return this.gestureSettingsPen;
        default:
          return this.gestureSettingsUnknown;
      }
    }, _drawOverlays: function() {
      var e8, t3 = this.currentOverlays.length;
      for (e8 = 0; e8 < t3; e8++) this.currentOverlays[e8].drawHTML(this.overlaysContainer, this.viewport);
    }, _cancelPendingImages: function() {
      this._loadQueue = [];
    }, removeReferenceStrip: function() {
      this.showReferenceStrip = false, this.referenceStrip && (this.referenceStrip.destroy(), this.referenceStrip = null);
    }, addReferenceStrip: function() {
      if (this.showReferenceStrip = true, this.sequenceMode) {
        if (this.referenceStrip) return;
        this.tileSources.length && this.tileSources.length > 1 && (this.referenceStrip = new e7.ReferenceStrip({ id: this.referenceStripElement, position: this.referenceStripPosition, sizeRatio: this.referenceStripSizeRatio, scroll: this.referenceStripScroll, height: this.referenceStripHeight, width: this.referenceStripWidth, tileSources: this.tileSources, prefixUrl: this.prefixUrl, viewer: this }), this.referenceStrip.setFocus(this._sequenceIndex));
      } else e7.console.warn('Attempting to display a reference strip while "sequenceMode" is off.');
    }, _addUpdatePixelDensityRatioEvent: function() {
      this._updatePixelDensityRatioBind = this._updatePixelDensityRatio.bind(this), e7.addEvent(window, "resize", this._updatePixelDensityRatioBind);
    }, _removeUpdatePixelDensityRatioEvent: function() {
      e7.removeEvent(window, "resize", this._updatePixelDensityRatioBind);
    }, _updatePixelDensityRatio: function() {
      var t3 = e7.pixelDensityRatio, i4 = e7.getCurrentPixelDensityRatio();
      t3 !== i4 && (e7.pixelDensityRatio = i4, this.world.resetItems(), this.forceRedraw());
    }, goToPreviousPage: function() {
      var e8 = this._sequenceIndex - 1;
      this.navPrevNextWrap && e8 < 0 && (e8 += this.tileSources.length), this.goToPage(e8);
    }, goToNextPage: function() {
      var e8 = this._sequenceIndex + 1;
      this.navPrevNextWrap && e8 >= this.tileSources.length && (e8 = 0), this.goToPage(e8);
    }, isAnimating: function() {
      return i3[this.hash].animating;
    } }), e7.determineDrawer = function(i4) {
      for (let n4 in t2) {
        const o3 = t2[n4], r3 = o3.prototype;
        if (r3 && r3 instanceof t2.DrawerBase && e7.isFunction(r3.getType) && r3.getType.call(o3) === i4) return o3;
      }
      return null;
    };
  }(t2), function(e7) {
    function t3(e8) {
      var t4 = { tracker: e8.eventSource, position: e8.position, quick: e8.quick, shift: e8.shift, originalEvent: e8.originalEvent, preventDefaultAction: false };
      if (this.viewer.raiseEvent("navigator-click", t4), !t4.preventDefaultAction && e8.quick && this.viewer.viewport && (this.panVertical || this.panHorizontal)) {
        this.viewer.viewport.flipped && (e8.position.x = this.viewport.getContainerSize().x - e8.position.x);
        var i4 = this.viewport.pointFromPixel(e8.position);
        this.panVertical ? this.panHorizontal || (i4.x = this.viewer.viewport.getCenter(true).x) : i4.y = this.viewer.viewport.getCenter(true).y, this.viewer.viewport.panTo(i4), this.viewer.viewport.applyConstraints();
      }
    }
    function i3(e8) {
      var t4 = { tracker: e8.eventSource, position: e8.position, delta: e8.delta, speed: e8.speed, direction: e8.direction, shift: e8.shift, originalEvent: e8.originalEvent, preventDefaultAction: false };
      this.viewer.raiseEvent("navigator-drag", t4), !t4.preventDefaultAction && this.viewer.viewport && (this.panHorizontal || (e8.delta.x = 0), this.panVertical || (e8.delta.y = 0), this.viewer.viewport.flipped && (e8.delta.x = -e8.delta.x), this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e8.delta)), this.viewer.constrainDuringPan && this.viewer.viewport.applyConstraints());
    }
    function n3(e8) {
      e8.insideElementPressed && this.viewer.viewport && this.viewer.viewport.applyConstraints();
    }
    function o2(e8) {
      var t4 = { tracker: e8.eventSource, position: e8.position, scroll: e8.scroll, shift: e8.shift, originalEvent: e8.originalEvent, preventDefault: e8.preventDefault };
      this.viewer.raiseEvent("navigator-scroll", t4), e8.preventDefault = t4.preventDefault;
    }
    function r2(e8, t4) {
      s2(e8, "rotate(" + t4 + "deg)");
    }
    function s2(e8, t4) {
      e8.style.webkitTransform = t4, e8.style.mozTransform = t4, e8.style.msTransform = t4, e8.style.oTransform = t4, e8.style.transform = t4;
    }
    e7.Navigator = function(s3) {
      var a2, l2, c2 = s3.viewer, h2 = this;
      function u2(e8, t4) {
        r2(h2.displayRegionContainer, e8), r2(h2.displayRegion, -e8), h2.viewport.setRotation(e8, t4);
      }
      (s3.element || s3.id ? (s3.element ? (s3.id && e7.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."), s3.element.id ? s3.id = s3.element.id : s3.id = "navigator-" + e7.now(), this.element = s3.element) : this.element = document.getElementById(s3.id), s3.controlOptions = { anchor: e7.ControlAnchor.NONE, attachToViewer: false, autoFade: false }) : (s3.id = "navigator-" + e7.now(), this.element = e7.makeNeutralElement("div"), s3.controlOptions = { anchor: e7.ControlAnchor.TOP_RIGHT, attachToViewer: true, autoFade: s3.autoFade }, s3.position && ("BOTTOM_RIGHT" === s3.position ? s3.controlOptions.anchor = e7.ControlAnchor.BOTTOM_RIGHT : "BOTTOM_LEFT" === s3.position ? s3.controlOptions.anchor = e7.ControlAnchor.BOTTOM_LEFT : "TOP_RIGHT" === s3.position ? s3.controlOptions.anchor = e7.ControlAnchor.TOP_RIGHT : "TOP_LEFT" === s3.position ? s3.controlOptions.anchor = e7.ControlAnchor.TOP_LEFT : "ABSOLUTE" === s3.position && (s3.controlOptions.anchor = e7.ControlAnchor.ABSOLUTE, s3.controlOptions.top = s3.top, s3.controlOptions.left = s3.left, s3.controlOptions.height = s3.height, s3.controlOptions.width = s3.width))), this.element.id = s3.id, this.element.className += " navigator", (s3 = e7.extend(true, { sizeRatio: e7.DEFAULT_SETTINGS.navigatorSizeRatio }, s3, { element: this.element, tabIndex: -1, showNavigator: false, mouseNavEnabled: false, showNavigationControl: false, showSequenceControl: false, immediateRender: true, blendTime: 0, animationTime: s3.animationTime, autoResize: false, minZoomImageRatio: 1, background: s3.background, opacity: s3.opacity, borderColor: s3.borderColor, displayRegionColor: s3.displayRegionColor })).minPixelRatio = this.minPixelRatio = c2.minPixelRatio, e7.setElementTouchActionNone(this.element), this.borderWidth = 2, this.fudge = new e7.Point(1, 1), this.totalBorderWidths = new e7.Point(2 * this.borderWidth, 2 * this.borderWidth).minus(this.fudge), s3.controlOptions.anchor !== e7.ControlAnchor.NONE && function(e8, t4) {
        e8.margin = "0px", e8.border = t4 + "px solid " + s3.borderColor, e8.padding = "0px", e8.background = s3.background, e8.opacity = s3.opacity, e8.overflow = "hidden";
      }(this.element.style, this.borderWidth), this.displayRegion = e7.makeNeutralElement("div"), this.displayRegion.id = this.element.id + "-displayregion", this.displayRegion.className = "displayregion", function(e8, t4) {
        e8.position = "relative", e8.top = "0px", e8.left = "0px", e8.fontSize = "0px", e8.overflow = "hidden", e8.border = t4 + "px solid " + s3.displayRegionColor, e8.margin = "0px", e8.padding = "0px", e8.background = "transparent", e8.float = "left", e8.cssFloat = "left", e8.zIndex = 999999999, e8.cursor = "default", e8.boxSizing = "content-box";
      }(this.displayRegion.style, this.borderWidth), e7.setElementPointerEventsNone(this.displayRegion), e7.setElementTouchActionNone(this.displayRegion), this.displayRegionContainer = e7.makeNeutralElement("div"), this.displayRegionContainer.id = this.element.id + "-displayregioncontainer", this.displayRegionContainer.className = "displayregioncontainer", this.displayRegionContainer.style.width = "100%", this.displayRegionContainer.style.height = "100%", e7.setElementPointerEventsNone(this.displayRegionContainer), e7.setElementTouchActionNone(this.displayRegionContainer), c2.addControl(this.element, s3.controlOptions), this._resizeWithViewer = s3.controlOptions.anchor !== e7.ControlAnchor.ABSOLUTE && s3.controlOptions.anchor !== e7.ControlAnchor.NONE, s3.width && s3.height ? (this.setWidth(s3.width), this.setHeight(s3.height)) : this._resizeWithViewer && (a2 = e7.getElementSize(c2.element), this.element.style.height = Math.round(a2.y * s3.sizeRatio) + "px", this.element.style.width = Math.round(a2.x * s3.sizeRatio) + "px", this.oldViewerSize = a2, l2 = e7.getElementSize(this.element), this.elementArea = l2.x * l2.y), this.oldContainerSize = new e7.Point(0, 0), e7.Viewer.apply(this, [s3]), this.displayRegionContainer.appendChild(this.displayRegion), this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer), s3.navigatorRotate) && (u2(s3.viewer.viewport ? s3.viewer.viewport.getRotation() : s3.viewer.degrees || 0, true), s3.viewer.addHandler("rotate", function(e8) {
        u2(e8.degrees, e8.immediately);
      }));
      this.innerTracker.destroy(), this.innerTracker = new e7.MouseTracker({ userData: "Navigator.innerTracker", element: this.element, dragHandler: e7.delegate(this, i3), clickHandler: e7.delegate(this, t3), releaseHandler: e7.delegate(this, n3), scrollHandler: e7.delegate(this, o2), preProcessEventHandler: function(e8) {
        "wheel" === e8.eventType && (e8.preventDefault = true);
      } }), this.outerTracker.userData = "Navigator.outerTracker", e7.setElementPointerEventsNone(this.canvas), e7.setElementPointerEventsNone(this.container), this.addHandler("reset-size", function() {
        h2.viewport && h2.viewport.goHome(true);
      }), c2.world.addHandler("item-index-change", function(e8) {
        window.setTimeout(function() {
          var t4 = h2.world.getItemAt(e8.previousIndex);
          h2.world.setItemIndex(t4, e8.newIndex);
        }, 1);
      }), c2.world.addHandler("remove-item", function(e8) {
        var t4 = e8.item, i4 = h2._getMatchingItem(t4);
        i4 && h2.world.removeItem(i4);
      }), this.update(c2.viewport);
    }, e7.extend(e7.Navigator.prototype, e7.EventSource.prototype, e7.Viewer.prototype, { updateSize: function() {
      if (this.viewport) {
        var t4 = new e7.Point(0 === this.container.clientWidth ? 1 : this.container.clientWidth, 0 === this.container.clientHeight ? 1 : this.container.clientHeight);
        t4.equals(this.oldContainerSize) || (this.viewport.resize(t4, true), this.viewport.goHome(true), this.oldContainerSize = t4, this.world.update(), this.world.draw(), this.update(this.viewer.viewport));
      }
    }, setWidth: function(e8) {
      this.width = e8, this.element.style.width = "number" == typeof e8 ? e8 + "px" : e8, this._resizeWithViewer = false, this.updateSize();
    }, setHeight: function(e8) {
      this.height = e8, this.element.style.height = "number" == typeof e8 ? e8 + "px" : e8, this._resizeWithViewer = false, this.updateSize();
    }, setFlip: function(e8) {
      return this.viewport.setFlip(e8), this.setDisplayTransform(this.viewer.viewport.getFlip() ? "scale(-1,1)" : "scale(1,1)"), this;
    }, setDisplayTransform: function(e8) {
      s2(this.displayRegion, e8), s2(this.canvas, e8), s2(this.element, e8);
    }, update: function(t4) {
      var i4, n4, o3, s3, a2, l2;
      if (t4 || (t4 = this.viewer.viewport), i4 = e7.getElementSize(this.viewer.element), this._resizeWithViewer && i4.x && i4.y && !i4.equals(this.oldViewerSize) && (this.oldViewerSize = i4, this.maintainSizeRatio || !this.elementArea ? (n4 = i4.x * this.sizeRatio, o3 = i4.y * this.sizeRatio) : (n4 = Math.sqrt(this.elementArea * (i4.x / i4.y)), o3 = this.elementArea / n4), this.element.style.width = Math.round(n4) + "px", this.element.style.height = Math.round(o3) + "px", this.elementArea || (this.elementArea = n4 * o3), this.updateSize()), t4 && this.viewport) {
        if (s3 = t4.getBoundsNoRotate(true), a2 = this.viewport.pixelFromPointNoRotate(s3.getTopLeft(), false), l2 = this.viewport.pixelFromPointNoRotate(s3.getBottomRight(), false).minus(this.totalBorderWidths), !this.navigatorRotate) {
          var c2 = t4.getRotation(true);
          r2(this.displayRegion, -c2);
        }
        var h2 = this.displayRegion.style;
        h2.display = this.world.getItemCount() ? "block" : "none", h2.top = a2.y.toFixed(2) + "px", h2.left = a2.x.toFixed(2) + "px";
        var u2 = l2.x - a2.x, d2 = l2.y - a2.y;
        h2.width = Math.round(Math.max(u2, 0)) + "px", h2.height = Math.round(Math.max(d2, 0)) + "px";
      }
    }, addTiledImage: function(t4) {
      var i4 = this, n4 = t4.originalTiledImage;
      delete t4.original;
      var o3 = e7.extend({}, t4, { success: function(e8) {
        var t5 = e8.item;
        function o4() {
          i4._matchBounds(t5, n4);
        }
        t5._originalForNavigator = n4, i4._matchBounds(t5, n4, true), i4._matchOpacity(t5, n4), i4._matchCompositeOperation(t5, n4), n4.addHandler("bounds-change", o4), n4.addHandler("clip-change", o4), n4.addHandler("opacity-change", function() {
          i4._matchOpacity(t5, n4);
        }), n4.addHandler("composite-operation-change", function() {
          i4._matchCompositeOperation(t5, n4);
        });
      } });
      return e7.Viewer.prototype.addTiledImage.apply(this, [o3]);
    }, destroy: function() {
      return e7.Viewer.prototype.destroy.apply(this);
    }, _getMatchingItem: function(e8) {
      for (var t4, i4 = this.world.getItemCount(), n4 = 0; n4 < i4; n4++) if ((t4 = this.world.getItemAt(n4))._originalForNavigator === e8) return t4;
      return null;
    }, _matchBounds: function(e8, t4, i4) {
      var n4 = t4.getBoundsNoRotate();
      e8.setPosition(n4.getTopLeft(), i4), e8.setWidth(n4.width, i4), e8.setRotation(t4.getRotation(), i4), e8.setClip(t4.getClip()), e8.setFlip(t4.getFlip());
    }, _matchOpacity: function(e8, t4) {
      e8.setOpacity(t4.opacity);
    }, _matchCompositeOperation: function(e8, t4) {
      e8.setCompositeOperation(t4.compositeOperation);
    } });
  }(t2), function(e7) {
    var t3 = { Errors: { Dzc: "Sorry, we don't support Deep Zoom Collections!", Dzi: "Hmm, this doesn't appear to be a valid Deep Zoom Image.", Xml: "Hmm, this doesn't appear to be a valid Deep Zoom Image.", ImageFormat: "Sorry, we don't support {0}-based Deep Zoom Images.", Security: "It looks like a security restriction stopped us from loading this Deep Zoom Image.", Status: "This space unintentionally left blank ({0} {1}).", OpenFailed: "Unable to open {0}: {1}" }, Tooltips: { FullPage: "Toggle full page", Home: "Go home", ZoomIn: "Zoom in", ZoomOut: "Zoom out", NextPage: "Next page", PreviousPage: "Previous page", RotateLeft: "Rotate left", RotateRight: "Rotate right", Flip: "Flip Horizontally" } };
    e7.extend(e7, { getString: function(i3) {
      var n3, o2 = i3.split("."), r2 = null, s2 = arguments, a2 = t3;
      for (n3 = 0; n3 < o2.length - 1; n3++) a2 = a2[o2[n3]] || {};
      return "string" != typeof (r2 = a2[o2[n3]]) && (e7.console.error("Untranslated source string:", i3), r2 = ""), r2.replace(/\{\d+\}/g, function(e8) {
        var t4 = parseInt(e8.match(/\d+/), 10) + 1;
        return t4 < s2.length ? s2[t4] : "";
      });
    }, setString: function(e8, i3) {
      var n3, o2 = e8.split("."), r2 = t3;
      for (n3 = 0; n3 < o2.length - 1; n3++) r2[o2[n3]] || (r2[o2[n3]] = {}), r2 = r2[o2[n3]];
      r2[o2[n3]] = i3;
    } });
  }(t2), function(e7) {
    e7.Point = function(e8, t3) {
      this.x = "number" == typeof e8 ? e8 : 0, this.y = "number" == typeof t3 ? t3 : 0;
    }, e7.Point.prototype = { clone: function() {
      return new e7.Point(this.x, this.y);
    }, plus: function(t3) {
      return new e7.Point(this.x + t3.x, this.y + t3.y);
    }, minus: function(t3) {
      return new e7.Point(this.x - t3.x, this.y - t3.y);
    }, times: function(t3) {
      return new e7.Point(this.x * t3, this.y * t3);
    }, divide: function(t3) {
      return new e7.Point(this.x / t3, this.y / t3);
    }, negate: function() {
      return new e7.Point(-this.x, -this.y);
    }, distanceTo: function(e8) {
      return Math.sqrt(Math.pow(this.x - e8.x, 2) + Math.pow(this.y - e8.y, 2));
    }, squaredDistanceTo: function(e8) {
      return Math.pow(this.x - e8.x, 2) + Math.pow(this.y - e8.y, 2);
    }, apply: function(t3) {
      return new e7.Point(t3(this.x), t3(this.y));
    }, equals: function(t3) {
      return t3 instanceof e7.Point && this.x === t3.x && this.y === t3.y;
    }, rotate: function(t3, i3) {
      var n3, o2;
      if (i3 = i3 || new e7.Point(0, 0), t3 % 90 == 0) {
        switch (e7.positiveModulo(t3, 360)) {
          case 0:
            n3 = 1, o2 = 0;
            break;
          case 90:
            n3 = 0, o2 = 1;
            break;
          case 180:
            n3 = -1, o2 = 0;
            break;
          case 270:
            n3 = 0, o2 = -1;
        }
      } else {
        var r2 = t3 * Math.PI / 180;
        n3 = Math.cos(r2), o2 = Math.sin(r2);
      }
      var s2 = n3 * (this.x - i3.x) - o2 * (this.y - i3.y) + i3.x, a2 = o2 * (this.x - i3.x) + n3 * (this.y - i3.y) + i3.y;
      return new e7.Point(s2, a2);
    }, toString: function() {
      return "(" + Math.round(100 * this.x) / 100 + "," + Math.round(100 * this.y) / 100 + ")";
    } };
  }(t2), function(e7) {
    e7.TileSource = function(t3, i3, n3, o2, r2, s2) {
      var a2, l2, c2 = this, h2 = arguments;
      if (a2 = e7.isPlainObject(t3) ? t3 : { width: h2[0], height: h2[1], tileSize: h2[2], tileOverlap: h2[3], minLevel: h2[4], maxLevel: h2[5] }, e7.EventSource.call(this), e7.extend(true, this, a2), !this.success) {
        for (l2 = 0; l2 < arguments.length; l2++) if (e7.isFunction(arguments[l2])) {
          this.success = arguments[l2];
          break;
        }
      }
      this.success && this.addHandler("ready", function(e8) {
        c2.success(e8);
      }), "string" === e7.type(arguments[0]) && (this.url = arguments[0]), this.url ? (this.aspectRatio = 1, this.dimensions = new e7.Point(10, 10), this._tileWidth = 0, this._tileHeight = 0, this.tileOverlap = 0, this.minLevel = 0, this.maxLevel = 0, this.ready = false, this.getImageInfo(this.url)) : (this.ready = true, this.aspectRatio = a2.width && a2.height ? a2.width / a2.height : 1, this.dimensions = new e7.Point(a2.width, a2.height), this.tileSize ? (this._tileWidth = this._tileHeight = this.tileSize, delete this.tileSize) : (this.tileWidth ? (this._tileWidth = this.tileWidth, delete this.tileWidth) : this._tileWidth = 0, this.tileHeight ? (this._tileHeight = this.tileHeight, delete this.tileHeight) : this._tileHeight = 0), this.tileOverlap = a2.tileOverlap ? a2.tileOverlap : 0, this.minLevel = a2.minLevel ? a2.minLevel : 0, this.maxLevel = void 0 !== a2.maxLevel && null !== a2.maxLevel ? a2.maxLevel : a2.width && a2.height ? Math.ceil(Math.log(Math.max(a2.width, a2.height)) / Math.log(2)) : 0, this.success && e7.isFunction(this.success) && this.success(this));
    }, e7.TileSource.prototype = { getTileSize: function(t3) {
      return e7.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"), this._tileWidth;
    }, getTileWidth: function(e8) {
      return this._tileWidth ? this._tileWidth : this.getTileSize(e8);
    }, getTileHeight: function(e8) {
      return this._tileHeight ? this._tileHeight : this.getTileSize(e8);
    }, setMaxLevel: function(e8) {
      this.maxLevel = e8, this._memoizeLevelScale();
    }, getLevelScale: function(e8) {
      return this._memoizeLevelScale(), this.getLevelScale(e8);
    }, _memoizeLevelScale: function() {
      var e8, t3 = {};
      for (e8 = 0; e8 <= this.maxLevel; e8++) t3[e8] = 1 / Math.pow(2, this.maxLevel - e8);
      this.getLevelScale = function(e9) {
        return t3[e9];
      };
    }, getNumTiles: function(t3) {
      var i3 = this.getLevelScale(t3), n3 = Math.ceil(i3 * this.dimensions.x / this.getTileWidth(t3)), o2 = Math.ceil(i3 * this.dimensions.y / this.getTileHeight(t3));
      return new e7.Point(n3, o2);
    }, getPixelRatio: function(t3) {
      var i3 = this.dimensions.times(this.getLevelScale(t3)), n3 = 1 / i3.x * e7.pixelDensityRatio, o2 = 1 / i3.y * e7.pixelDensityRatio;
      return new e7.Point(n3, o2);
    }, getClosestLevel: function() {
      var e8, t3;
      for (e8 = this.minLevel + 1; e8 <= this.maxLevel && !((t3 = this.getNumTiles(e8)).x > 1 || t3.y > 1); e8++) ;
      return e8 - 1;
    }, getTileAtPoint: function(t3, i3) {
      var n3 = i3.x >= 0 && i3.x <= 1 && i3.y >= 0 && i3.y <= 1 / this.aspectRatio;
      e7.console.assert(n3, "[TileSource.getTileAtPoint] must be called with a valid point.");
      var o2 = this.dimensions.x * this.getLevelScale(t3), r2 = i3.x * o2, s2 = i3.y * o2, a2 = Math.floor(r2 / this.getTileWidth(t3)), l2 = Math.floor(s2 / this.getTileHeight(t3));
      i3.x >= 1 && (a2 = this.getNumTiles(t3).x - 1);
      return i3.y >= 1 / this.aspectRatio - 1e-15 && (l2 = this.getNumTiles(t3).y - 1), new e7.Point(a2, l2);
    }, getTileBounds: function(t3, i3, n3, o2) {
      var r2 = this.dimensions.times(this.getLevelScale(t3)), s2 = this.getTileWidth(t3), a2 = this.getTileHeight(t3), l2 = 0 === i3 ? 0 : s2 * i3 - this.tileOverlap, c2 = 0 === n3 ? 0 : a2 * n3 - this.tileOverlap, h2 = s2 + (0 === i3 ? 1 : 2) * this.tileOverlap, u2 = a2 + (0 === n3 ? 1 : 2) * this.tileOverlap, d2 = 1 / r2.x;
      return h2 = Math.min(h2, r2.x - l2), u2 = Math.min(u2, r2.y - c2), o2 ? new e7.Rect(0, 0, h2, u2) : new e7.Rect(l2 * d2, c2 * d2, h2 * d2, u2 * d2);
    }, getImageInfo: function(t3) {
      var i3, n3, o2, r2, s2, a2, l2, c2 = this;
      t3 && (l2 = (a2 = (s2 = t3.split("/"))[s2.length - 1]).lastIndexOf(".")) > -1 && (s2[s2.length - 1] = a2.slice(0, l2));
      var h2 = null;
      if (this.splitHashDataForPost) {
        var u2 = t3.indexOf("#");
        -1 !== u2 && (h2 = t3.substring(u2 + 1), t3 = t3.substr(0, u2));
      }
      n3 = function(i4) {
        "string" == typeof i4 && (i4 = e7.parseXml(i4));
        var n4 = e7.TileSource.determineType(c2, i4, t3);
        n4 ? (void 0 === (r2 = n4.prototype.configure.apply(c2, [i4, t3, h2])).ajaxWithCredentials && (r2.ajaxWithCredentials = c2.ajaxWithCredentials), o2 = new n4(r2), c2.ready = true, c2.raiseEvent("ready", { tileSource: o2 })) : c2.raiseEvent("open-failed", { message: "Unable to load TileSource", source: t3 });
      }, t3.match(/\.js$/) ? (i3 = t3.split("/").pop().replace(".js", ""), e7.jsonp({ url: t3, async: false, callbackName: i3, callback: n3 })) : e7.makeAjaxRequest({ url: t3, postData: h2, withCredentials: this.ajaxWithCredentials, headers: this.ajaxHeaders, success: function(t4) {
        var i4 = function(t5) {
          var i5, n4, o3 = t5.responseText, r3 = t5.status;
          if (!t5) throw new Error(e7.getString("Errors.Security"));
          if (200 !== t5.status && 0 !== t5.status) throw i5 = 404 === (r3 = t5.status) ? "Not Found" : t5.statusText, new Error(e7.getString("Errors.Status", r3, i5));
          if (o3.match(/^\s*<.*/)) try {
            n4 = t5.responseXML && t5.responseXML.documentElement ? t5.responseXML : e7.parseXml(o3);
          } catch (e8) {
            n4 = t5.responseText;
          }
          else if (o3.match(/\s*[{[].*/)) try {
            n4 = e7.parseJSON(o3);
          } catch (e8) {
            n4 = o3;
          }
          else n4 = o3;
          return n4;
        }(t4);
        n3(i4);
      }, error: function(i4, n4) {
        var o3;
        try {
          o3 = "HTTP " + i4.status + " attempting to load TileSource: " + t3;
        } catch (e8) {
          o3 = (void 0 !== n4 && n4.toString ? n4.toString() : "Unknown error") + " attempting to load TileSource: " + t3;
        }
        e7.console.error(o3), c2.raiseEvent("open-failed", { message: o3, source: t3, postData: h2 });
      } });
    }, supports: function(e8, t3) {
      return false;
    }, configure: function(e8, t3, i3) {
      throw new Error("Method not implemented.");
    }, getTileUrl: function(e8, t3, i3) {
      throw new Error("Method not implemented.");
    }, getTilePostData: function(e8, t3, i3) {
      return null;
    }, getTileAjaxHeaders: function(e8, t3, i3) {
      return {};
    }, getTileHashKey: function(e8, t3, i3, n3, o2, r2) {
      function s2(e9) {
        return o2 ? e9 + "+" + JSON.stringify(o2) : e9;
      }
      return s2("string" != typeof n3 ? e8 + "/" + t3 + "_" + i3 : n3);
    }, tileExists: function(e8, t3, i3) {
      var n3 = this.getNumTiles(e8);
      return e8 >= this.minLevel && e8 <= this.maxLevel && t3 >= 0 && i3 >= 0 && t3 < n3.x && i3 < n3.y;
    }, hasTransparency: function(e8, t3, i3, n3) {
      return !!e8 || t3.match(".png");
    }, downloadTileStart: function(t3) {
      var i3 = t3.userData, n3 = new Image();
      i3.image = n3, i3.request = null;
      var o2 = function(e8) {
        n3 ? (n3.onload = n3.onerror = n3.onabort = null, t3.finish(e8 ? null : n3, i3.request, e8)) : t3.finish(null, i3.request, "Image load failed: undefined Image instance.");
      };
      n3.onload = function() {
        o2();
      }, n3.onabort = n3.onerror = function() {
        o2("Image load aborted.");
      }, t3.loadWithAjax ? i3.request = e7.makeAjaxRequest({ url: t3.src, withCredentials: t3.ajaxWithCredentials, headers: t3.ajaxHeaders, responseType: "arraybuffer", postData: t3.postData, success: function(e8) {
        var t4;
        try {
          t4 = new window.Blob([e8.response]);
        } catch (n4) {
          var i4 = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;
          if ("TypeError" === n4.name && i4) {
            var r2 = new i4();
            r2.append(e8.response), t4 = r2.getBlob();
          }
        }
        0 === t4.size ? o2("Empty image response.") : n3.src = (window.URL || window.webkitURL).createObjectURL(t4);
      }, error: function(e8) {
        o2("Image load aborted - XHR error");
      } }) : (false !== t3.crossOriginPolicy && (n3.crossOrigin = t3.crossOriginPolicy), n3.src = t3.src);
    }, downloadTileAbort: function(e8) {
      e8.userData.request && e8.userData.request.abort();
      var t3 = e8.userData.image;
      e8.userData.image && (t3.onload = t3.onerror = t3.onabort = null);
    }, createTileCache: function(e8, t3, i3) {
      e8._data = t3;
    }, destroyTileCache: function(e8) {
      e8._data = null, e8._renderedContext = null;
    }, getTileCacheData: function(e8) {
      return e8._data;
    }, getTileCacheDataAsImage: function(e8) {
      return e8._data;
    }, getTileCacheDataAsContext2D: function(e8) {
      if (!e8._renderedContext) {
        var t3 = document.createElement("canvas");
        t3.width = e8._data.width, t3.height = e8._data.height, e8._renderedContext = t3.getContext("2d"), e8._renderedContext.drawImage(e8._data, 0, 0), e8._data = null;
      }
      return e8._renderedContext;
    } }, e7.extend(true, e7.TileSource.prototype, e7.EventSource.prototype), e7.TileSource.determineType = function(i3, n3, o2) {
      var r2;
      for (r2 in t2) if (r2.match(/.+TileSource$/) && e7.isFunction(t2[r2]) && e7.isFunction(t2[r2].prototype.supports) && t2[r2].prototype.supports.call(i3, n3, o2)) return t2[r2];
      return e7.console.error("No TileSource was able to open %s %s", o2, n3), null;
    };
  }(t2), function(e7) {
    function t3(t4, i3) {
      var n3, o2, r2 = i3.Image, s2 = r2.Url, a2 = r2.Format, l2 = r2.Size, c2 = r2.DisplayRect || [], h2 = parseInt(l2.Width, 10), u2 = parseInt(l2.Height, 10), d2 = parseInt(r2.TileSize, 10), p2 = parseInt(r2.Overlap, 10), _2 = [];
      for (o2 = 0; o2 < c2.length; o2++) n3 = c2[o2].Rect, _2.push(new e7.DisplayRect(parseInt(n3.X, 10), parseInt(n3.Y, 10), parseInt(n3.Width, 10), parseInt(n3.Height, 10), parseInt(n3.MinLevel, 10), parseInt(n3.MaxLevel, 10)));
      return e7.extend(true, { width: h2, height: u2, tileSize: d2, tileOverlap: p2, minLevel: null, maxLevel: null, tilesUrl: s2, fileFormat: a2, displayRects: _2 }, i3);
    }
    e7.DziTileSource = function(t4, i3, n3, o2, r2, s2, a2, l2, c2) {
      var h2, u2, d2, p2;
      if (p2 = e7.isPlainObject(t4) ? t4 : { width: arguments[0], height: arguments[1], tileSize: arguments[2], tileOverlap: arguments[3], tilesUrl: arguments[4], fileFormat: arguments[5], displayRects: arguments[6], minLevel: arguments[7], maxLevel: arguments[8] }, this._levelRects = {}, this.tilesUrl = p2.tilesUrl, this.fileFormat = p2.fileFormat, this.displayRects = p2.displayRects, this.displayRects) for (h2 = this.displayRects.length - 1; h2 >= 0; h2--) for (d2 = (u2 = this.displayRects[h2]).minLevel; d2 <= u2.maxLevel; d2++) this._levelRects[d2] || (this._levelRects[d2] = []), this._levelRects[d2].push(u2);
      e7.TileSource.apply(this, [p2]);
    }, e7.extend(e7.DziTileSource.prototype, e7.TileSource.prototype, { supports: function(e8, t4) {
      var i3;
      return e8.Image ? i3 = e8.Image.xmlns : e8.documentElement && ("Image" !== e8.documentElement.localName && "Image" !== e8.documentElement.tagName || (i3 = e8.documentElement.namespaceURI)), -1 !== (i3 = (i3 || "").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008") || -1 !== i3.indexOf("schemas.microsoft.com/deepzoom/2009");
    }, configure: function(i3, n3, o2) {
      var r2;
      return r2 = e7.isPlainObject(i3) ? t3(this, i3) : function(i4, n4) {
        if (!n4 || !n4.documentElement) throw new Error(e7.getString("Errors.Xml"));
        var o3, r3, s2, a2, l2, c2 = n4.documentElement, h2 = c2.localName || c2.tagName, u2 = n4.documentElement.namespaceURI, d2 = null, p2 = [];
        if ("Image" === h2) try {
          if (void 0 === (a2 = c2.getElementsByTagName("Size")[0]) && (a2 = c2.getElementsByTagNameNS(u2, "Size")[0]), d2 = { Image: { xmlns: "http://schemas.microsoft.com/deepzoom/2008", Url: c2.getAttribute("Url"), Format: c2.getAttribute("Format"), DisplayRect: null, Overlap: parseInt(c2.getAttribute("Overlap"), 10), TileSize: parseInt(c2.getAttribute("TileSize"), 10), Size: { Height: parseInt(a2.getAttribute("Height"), 10), Width: parseInt(a2.getAttribute("Width"), 10) } } }, !e7.imageFormatSupported(d2.Image.Format)) throw new Error(e7.getString("Errors.ImageFormat", d2.Image.Format.toUpperCase()));
          for (void 0 === (o3 = c2.getElementsByTagName("DisplayRect")) && (o3 = c2.getElementsByTagNameNS(u2, "DisplayRect")[0]), l2 = 0; l2 < o3.length; l2++) void 0 === (s2 = (r3 = o3[l2]).getElementsByTagName("Rect")[0]) && (s2 = r3.getElementsByTagNameNS(u2, "Rect")[0]), p2.push({ Rect: { X: parseInt(s2.getAttribute("X"), 10), Y: parseInt(s2.getAttribute("Y"), 10), Width: parseInt(s2.getAttribute("Width"), 10), Height: parseInt(s2.getAttribute("Height"), 10), MinLevel: parseInt(r3.getAttribute("MinLevel"), 10), MaxLevel: parseInt(r3.getAttribute("MaxLevel"), 10) } });
          return p2.length && (d2.Image.DisplayRect = p2), t3(i4, d2);
        } catch (t4) {
          throw t4 instanceof Error ? t4 : new Error(e7.getString("Errors.Dzi"));
        }
        else {
          if ("Collection" === h2) throw new Error(e7.getString("Errors.Dzc"));
          if ("Error" === h2) {
            var _2 = c2.getElementsByTagName("Message")[0].firstChild.nodeValue;
            throw new Error(_2);
          }
        }
        throw new Error(e7.getString("Errors.Dzi"));
      }(this, i3), n3 && !r2.tilesUrl && (r2.tilesUrl = n3.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/, "$1_files/"), -1 !== n3.search(/\.(dzi|xml|js)\?/) ? r2.queryParams = n3.match(/\?.*/) : r2.queryParams = ""), r2;
    }, getTileUrl: function(e8, t4, i3) {
      return [this.tilesUrl, e8, "/", t4, "_", i3, ".", this.fileFormat, this.queryParams].join("");
    }, tileExists: function(e8, t4, i3) {
      var n3, o2, r2, s2, a2, l2, c2, h2 = this._levelRects[e8];
      if (this.minLevel && e8 < this.minLevel || this.maxLevel && e8 > this.maxLevel) return false;
      if (!h2 || !h2.length) return true;
      for (c2 = h2.length - 1; c2 >= 0; c2--) if (!(e8 < (n3 = h2[c2]).minLevel || e8 > n3.maxLevel) && (o2 = this.getLevelScale(e8), r2 = n3.x * o2, s2 = n3.y * o2, a2 = r2 + n3.width * o2, l2 = s2 + n3.height * o2, r2 = Math.floor(r2 / this._tileWidth), s2 = Math.floor(s2 / this._tileWidth), a2 = Math.ceil(a2 / this._tileWidth), l2 = Math.ceil(l2 / this._tileWidth), r2 <= t4 && t4 < a2 && s2 <= i3 && i3 < l2)) return true;
      return false;
    } });
  }(t2), function(e7) {
    function i3(e8) {
      var t3 = Array.isArray(e8.profile) ? e8.profile[0] : e8.profile, i4 = -1 !== ["http://library.stanford.edu/iiif/image-api/compliance.html#level0", "http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0", "http://iiif.io/api/image/2/level0.json", "level0", "https://iiif.io/api/image/3/level0.json"].indexOf(t3), n4 = false;
      return 2 === e8.version && e8.profile.length > 1 && e8.profile[1].supports && (n4 = -1 !== e8.profile[1].supports.indexOf("sizeByW")), 3 === e8.version && e8.extraFeatures && (n4 = -1 !== e8.extraFeatures.indexOf("sizeByWh")), !i4 || n4;
    }
    function n3(e8) {
      for (var t3 = [], i4 = 0; i4 < e8.sizes.length; i4++) t3.push({ url: e8._id + "/full/" + e8.sizes[i4].width + "," + (3 === e8.version ? e8.sizes[i4].height : "") + "/0/default." + e8.tileFormat, width: e8.sizes[i4].width, height: e8.sizes[i4].height });
      return t3.sort(function(e9, t4) {
        return e9.width - t4.width;
      });
    }
    function o2(t3, i4, n4) {
      var r2, s2;
      if (3 === t3.nodeType && n4) (s2 = t3.nodeValue.trim()).match(/^\d*$/) && (s2 = Number(s2)), i4[n4] ? (e7.isArray(i4[n4]) || (i4[n4] = [i4[n4]]), i4[n4].push(s2)) : i4[n4] = s2;
      else if (1 === t3.nodeType) for (r2 = 0; r2 < t3.childNodes.length; r2++) o2(t3.childNodes[r2], i4, t3.nodeName);
    }
    e7.IIIFTileSource = function(t3) {
      if (e7.extend(true, this, t3), this._id = this["@id"] || this.id || this.identifier || null, !(this.height && this.width && this._id)) throw new Error("IIIF required parameters (width, height, or id) not provided.");
      if (t3.tileSizePerScaleFactor = {}, this.tileFormat = this.tileFormat || "jpg", this.version = t3.version, this.tile_width && this.tile_height) t3.tileWidth = this.tile_width, t3.tileHeight = this.tile_height;
      else if (this.tile_width) t3.tileSize = this.tile_width;
      else if (this.tile_height) t3.tileSize = this.tile_height;
      else if (this.tiles) if (1 === this.tiles.length) t3.tileWidth = this.tiles[0].width, t3.tileHeight = this.tiles[0].height || this.tiles[0].width, this.scale_factors = this.tiles[0].scaleFactors;
      else {
        this.scale_factors = [];
        for (var o3 = 0; o3 < this.tiles.length; o3++) for (var r2 = 0; r2 < this.tiles[o3].scaleFactors.length; r2++) {
          var s2 = this.tiles[o3].scaleFactors[r2];
          this.scale_factors.push(s2), t3.tileSizePerScaleFactor[s2] = { width: this.tiles[o3].width, height: this.tiles[o3].height || this.tiles[o3].width };
        }
      }
      else if (i3(t3)) {
        for (var a2 = Math.min(this.height, this.width), l2 = [256, 512, 1024], c2 = [], h2 = 0; h2 < l2.length; h2++) l2[h2] <= a2 && c2.push(l2[h2]);
        c2.length > 0 ? t3.tileSize = Math.max.apply(null, c2) : t3.tileSize = a2;
      } else this.sizes && this.sizes.length > 0 ? (this.emulateLegacyImagePyramid = true, t3.levels = n3(this), e7.extend(true, t3, { width: t3.levels[t3.levels.length - 1].width, height: t3.levels[t3.levels.length - 1].height, tileSize: Math.max(t3.height, t3.width), tileOverlap: 0, minLevel: 0, maxLevel: t3.levels.length - 1 }), this.levels = t3.levels) : e7.console.error("Nothing in the info.json to construct image pyramids from");
      if (!t3.maxLevel && !this.emulateLegacyImagePyramid) if (this.scale_factors) {
        var u2 = Math.max.apply(null, this.scale_factors);
        t3.maxLevel = Math.round(Math.log(u2) * Math.LOG2E);
      } else t3.maxLevel = Number(Math.round(Math.log(Math.max(this.width, this.height), 2)));
      if (this.sizes) {
        var d2 = this.sizes.length;
        d2 !== t3.maxLevel && d2 !== t3.maxLevel + 1 || (this.levelSizes = this.sizes.slice().sort((e8, t4) => e8.width - t4.width), d2 === t3.maxLevel && this.levelSizes.push({ width: this.width, height: this.height }));
      }
      e7.TileSource.apply(this, [t3]);
    }, e7.extend(e7.IIIFTileSource.prototype, e7.TileSource.prototype, { supports: function(e8, t3) {
      return !(!e8.protocol || "http://iiif.io/api/image" !== e8.protocol) || (!(!e8["@context"] || "http://library.stanford.edu/iiif/image-api/1.1/context.json" !== e8["@context"] && "http://iiif.io/api/image/1/context.json" !== e8["@context"]) || (!(!e8.profile || 0 !== e8.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")) || (!!(e8.identifier && e8.width && e8.height) || !(!e8.documentElement || "info" !== e8.documentElement.tagName || "http://library.stanford.edu/iiif/image-api/ns/" !== e8.documentElement.namespaceURI))));
    }, configure: function(i4, n4, r2) {
      if (e7.isPlainObject(i4)) {
        if (i4["@context"]) {
          var s2 = i4["@context"];
          if (Array.isArray(s2)) {
            for (var a2 = 0; a2 < s2.length; a2++) if ("string" == typeof s2[a2] && (/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(s2[a2]) || "http://library.stanford.edu/iiif/image-api/1.1/context.json" === s2[a2])) {
              s2 = s2[a2];
              break;
            }
          }
          switch (s2) {
            case "http://iiif.io/api/image/1/context.json":
            case "http://library.stanford.edu/iiif/image-api/1.1/context.json":
              i4.version = 1;
              break;
            case "http://iiif.io/api/image/2/context.json":
              i4.version = 2;
              break;
            case "http://iiif.io/api/image/3/context.json":
              i4.version = 3;
              break;
            default:
              e7.console.error("Data has a @context property which contains no known IIIF context URI.");
          }
        } else i4["@context"] = "http://iiif.io/api/image/1.0/context.json", i4["@id"] = n4.replace("/info.json", ""), i4.version = 1;
        if (i4.preferredFormats) {
          for (var l2 = 0; l2 < i4.preferredFormats.length; l2++) if (t2.imageFormatSupported(i4.preferredFormats[l2])) {
            i4.tileFormat = i4.preferredFormats[l2];
            break;
          }
        }
        return i4;
      }
      var c2 = function(t3) {
        if (!t3 || !t3.documentElement) throw new Error(e7.getString("Errors.Xml"));
        var i5 = t3.documentElement, n5 = i5.tagName, r3 = null;
        if ("info" === n5) try {
          return o2(i5, r3 = {}), r3;
        } catch (t4) {
          throw t4 instanceof Error ? t4 : new Error(e7.getString("Errors.IIIF"));
        }
        throw new Error(e7.getString("Errors.IIIF"));
      }(i4);
      return c2["@context"] = "http://iiif.io/api/image/1.0/context.json", c2["@id"] = n4.replace("/info.xml", ""), c2.version = 1, c2;
    }, getTileWidth: function(t3) {
      if (this.emulateLegacyImagePyramid) return e7.TileSource.prototype.getTileWidth.call(this, t3);
      var i4 = Math.pow(2, this.maxLevel - t3);
      return this.tileSizePerScaleFactor && this.tileSizePerScaleFactor[i4] ? this.tileSizePerScaleFactor[i4].width : this._tileWidth;
    }, getTileHeight: function(t3) {
      if (this.emulateLegacyImagePyramid) return e7.TileSource.prototype.getTileHeight.call(this, t3);
      var i4 = Math.pow(2, this.maxLevel - t3);
      return this.tileSizePerScaleFactor && this.tileSizePerScaleFactor[i4] ? this.tileSizePerScaleFactor[i4].height : this._tileHeight;
    }, getLevelScale: function(t3) {
      if (this.emulateLegacyImagePyramid) {
        var i4 = NaN;
        return this.levels.length > 0 && t3 >= this.minLevel && t3 <= this.maxLevel && (i4 = this.levels[t3].width / this.levels[this.maxLevel].width), i4;
      }
      return e7.TileSource.prototype.getLevelScale.call(this, t3);
    }, getNumTiles: function(t3) {
      if (this.emulateLegacyImagePyramid) return this.getLevelScale(t3) ? new e7.Point(1, 1) : new e7.Point(0, 0);
      if (this.levelSizes) {
        var i4 = this.levelSizes[t3], n4 = Math.ceil(i4.width / this.getTileWidth(t3)), o3 = Math.ceil(i4.height / this.getTileHeight(t3));
        return new e7.Point(n4, o3);
      }
      return e7.TileSource.prototype.getNumTiles.call(this, t3);
    }, getTileAtPoint: function(t3, i4) {
      if (this.emulateLegacyImagePyramid) return new e7.Point(0, 0);
      if (this.levelSizes) {
        var n4 = i4.x >= 0 && i4.x <= 1 && i4.y >= 0 && i4.y <= 1 / this.aspectRatio;
        e7.console.assert(n4, "[TileSource.getTileAtPoint] must be called with a valid point.");
        var o3 = this.levelSizes[t3].width, r2 = i4.x * o3, s2 = i4.y * o3, a2 = Math.floor(r2 / this.getTileWidth(t3)), l2 = Math.floor(s2 / this.getTileHeight(t3));
        i4.x >= 1 && (a2 = this.getNumTiles(t3).x - 1);
        return i4.y >= 1 / this.aspectRatio - 1e-15 && (l2 = this.getNumTiles(t3).y - 1), new e7.Point(a2, l2);
      }
      return e7.TileSource.prototype.getTileAtPoint.call(this, t3, i4);
    }, getTileUrl: function(e8, t3, i4) {
      if (this.emulateLegacyImagePyramid) {
        var n4 = null;
        return this.levels.length > 0 && e8 >= this.minLevel && e8 <= this.maxLevel && (n4 = this.levels[e8].url), n4;
      }
      var o3, r2, s2, a2, l2, c2, h2, u2, d2, p2, _2, g2, m2, f2, v2, A2 = Math.pow(0.5, this.maxLevel - e8);
      return this.levelSizes ? (o3 = this.levelSizes[e8].width, r2 = this.levelSizes[e8].height) : (o3 = Math.ceil(this.width * A2), r2 = Math.ceil(this.height * A2)), s2 = this.getTileWidth(e8), a2 = this.getTileHeight(e8), l2 = Math.round(s2 / A2), c2 = Math.round(a2 / A2), v2 = 1 === this.version ? "native." + this.tileFormat : "default." + this.tileFormat, o3 < s2 && r2 < a2 ? (g2 = 2 === this.version && o3 === this.width ? "full" : 3 === this.version && o3 === this.width && r2 === this.height ? "max" : 3 === this.version ? o3 + "," + r2 : o3 + ",", h2 = "full") : (u2 = t3 * l2, d2 = i4 * c2, p2 = Math.min(l2, this.width - u2), _2 = Math.min(c2, this.height - d2), h2 = 0 === t3 && 0 === i4 && p2 === this.width && _2 === this.height ? "full" : [u2, d2, p2, _2].join(","), m2 = Math.min(s2, o3 - t3 * s2), f2 = Math.min(a2, r2 - i4 * a2), g2 = 2 === this.version && m2 === this.width ? "full" : 3 === this.version && m2 === this.width && f2 === this.height ? "max" : 3 === this.version ? m2 + "," + f2 : m2 + ","), [this._id, h2, g2, "0", v2].join("/");
    }, __testonly__: { canBeTiled: i3, constructLevels: n3 } });
  }(t2), function(e7) {
    e7.OsmTileSource = function(t3, i3, n3, o2, r2) {
      var s2;
      (s2 = e7.isPlainObject(t3) ? t3 : { width: arguments[0], height: arguments[1], tileSize: arguments[2], tileOverlap: arguments[3], tilesUrl: arguments[4] }).width && s2.height || (s2.width = 65572864, s2.height = 65572864), s2.tileSize || (s2.tileSize = 256, s2.tileOverlap = 0), s2.tilesUrl || (s2.tilesUrl = "http://tile.openstreetmap.org/"), s2.minLevel = 8, e7.TileSource.apply(this, [s2]);
    }, e7.extend(e7.OsmTileSource.prototype, e7.TileSource.prototype, { supports: function(e8, t3) {
      return e8.type && "openstreetmaps" === e8.type;
    }, configure: function(e8, t3, i3) {
      return e8;
    }, getTileUrl: function(e8, t3, i3) {
      return this.tilesUrl + (e8 - 8) + "/" + t3 + "/" + i3 + ".png";
    } });
  }(t2), function(e7) {
    e7.TmsTileSource = function(t3, i3, n3, o2, r2) {
      var s2;
      s2 = e7.isPlainObject(t3) ? t3 : { width: arguments[0], height: arguments[1], tileSize: arguments[2], tileOverlap: arguments[3], tilesUrl: arguments[4] };
      var a2, l2 = 256 * Math.ceil(s2.width / 256), c2 = 256 * Math.ceil(s2.height / 256);
      a2 = l2 > c2 ? l2 / 256 : c2 / 256, s2.maxLevel = Math.ceil(Math.log(a2) / Math.log(2)) - 1, s2.tileSize = 256, s2.width = l2, s2.height = c2, e7.TileSource.apply(this, [s2]);
    }, e7.extend(e7.TmsTileSource.prototype, e7.TileSource.prototype, { supports: function(e8, t3) {
      return e8.type && "tiledmapservice" === e8.type;
    }, configure: function(e8, t3, i3) {
      return e8;
    }, getTileUrl: function(e8, t3, i3) {
      var n3 = this.getNumTiles(e8).y - 1;
      return this.tilesUrl + e8 + "/" + t3 + "/" + (n3 - i3) + ".png";
    } });
  }(t2), function(e7) {
    e7.ZoomifyTileSource = function(e8) {
      void 0 === e8.tileSize && (e8.tileSize = 256), void 0 === e8.fileFormat && (e8.fileFormat = "jpg", this.fileFormat = e8.fileFormat);
      var i3 = { x: e8.width, y: e8.height };
      for (e8.imageSizes = [{ x: e8.width, y: e8.height }], e8.gridSize = [this._getGridSize(e8.width, e8.height, e8.tileSize)]; parseInt(i3.x, 10) > e8.tileSize || parseInt(i3.y, 10) > e8.tileSize; ) i3.x = Math.floor(i3.x / 2), i3.y = Math.floor(i3.y / 2), e8.imageSizes.push({ x: i3.x, y: i3.y }), e8.gridSize.push(this._getGridSize(i3.x, i3.y, e8.tileSize));
      e8.imageSizes.reverse(), e8.gridSize.reverse(), e8.minLevel = 0, e8.maxLevel = e8.gridSize.length - 1, t2.TileSource.apply(this, [e8]);
    }, e7.extend(e7.ZoomifyTileSource.prototype, e7.TileSource.prototype, { _getGridSize: function(e8, t3, i3) {
      return { x: Math.ceil(e8 / i3), y: Math.ceil(t3 / i3) };
    }, _calculateAbsoluteTileNumber: function(e8, t3, i3) {
      for (var n3 = 0, o2 = {}, r2 = 0; r2 < e8; r2++) n3 += (o2 = this.gridSize[r2]).x * o2.y;
      return n3 += (o2 = this.gridSize[e8]).x * i3 + t3;
    }, supports: function(e8, t3) {
      return e8.type && "zoomifytileservice" === e8.type;
    }, configure: function(e8, t3, i3) {
      return e8;
    }, getTileUrl: function(e8, t3, i3) {
      var n3, o2 = this._calculateAbsoluteTileNumber(e8, t3, i3);
      return n3 = Math.floor(o2 / 256), this.tilesUrl + "TileGroup" + n3 + "/" + e8 + "-" + t3 + "-" + i3 + "." + this.fileFormat;
    } });
  }(t2), function(e7) {
    function t3(e8, t4) {
      return t4.levels;
    }
    e7.LegacyTileSource = function(t4) {
      var i3, n3, o2;
      e7.isArray(t4) && (i3 = { type: "legacy-image-pyramid", levels: t4 }), i3.levels = function(t5) {
        var i4, n4, o3 = [];
        for (n4 = 0; n4 < t5.length; n4++) (i4 = t5[n4]).height && i4.width && i4.url ? o3.push({ url: i4.url, width: Number(i4.width), height: Number(i4.height) }) : e7.console.error("Unsupported image format: %s", i4.url ? i4.url : "<no URL>");
        return o3.sort(function(e8, t6) {
          return e8.height - t6.height;
        });
      }(i3.levels), i3.levels.length > 0 ? (n3 = i3.levels[i3.levels.length - 1].width, o2 = i3.levels[i3.levels.length - 1].height) : (n3 = 0, o2 = 0, e7.console.error("No supported image formats found")), e7.extend(true, i3, { width: n3, height: o2, tileSize: Math.max(o2, n3), tileOverlap: 0, minLevel: 0, maxLevel: i3.levels.length > 0 ? i3.levels.length - 1 : 0 }), e7.TileSource.apply(this, [i3]), this.levels = i3.levels;
    }, e7.extend(e7.LegacyTileSource.prototype, e7.TileSource.prototype, { supports: function(e8, t4) {
      return e8.type && "legacy-image-pyramid" === e8.type || e8.documentElement && "legacy-image-pyramid" === e8.documentElement.getAttribute("type");
    }, configure: function(i3, n3, o2) {
      var r2;
      return r2 = e7.isPlainObject(i3) ? t3(this, i3) : function(i4, n4) {
        if (!n4 || !n4.documentElement) throw new Error(e7.getString("Errors.Xml"));
        var o3, r3, s2 = n4.documentElement, a2 = s2.tagName, l2 = null, c2 = [];
        if ("image" === a2) try {
          for (l2 = { type: s2.getAttribute("type"), levels: [] }, c2 = s2.getElementsByTagName("level"), r3 = 0; r3 < c2.length; r3++) o3 = c2[r3], l2.levels.push({ url: o3.getAttribute("url"), width: parseInt(o3.getAttribute("width"), 10), height: parseInt(o3.getAttribute("height"), 10) });
          return t3(i4, l2);
        } catch (e8) {
          throw e8 instanceof Error ? e8 : new Error("Unknown error parsing Legacy Image Pyramid XML.");
        }
        else {
          if ("collection" === a2) throw new Error("Legacy Image Pyramid Collections not yet supported.");
          if ("error" === a2) throw new Error("Error: " + n4);
        }
        throw new Error("Unknown element " + a2);
      }(this, i3), r2;
    }, getLevelScale: function(e8) {
      var t4 = NaN;
      return this.levels.length > 0 && e8 >= this.minLevel && e8 <= this.maxLevel && (t4 = this.levels[e8].width / this.levels[this.maxLevel].width), t4;
    }, getNumTiles: function(t4) {
      return this.getLevelScale(t4) ? new e7.Point(1, 1) : new e7.Point(0, 0);
    }, getTileUrl: function(e8, t4, i3) {
      var n3 = null;
      return this.levels.length > 0 && e8 >= this.minLevel && e8 <= this.maxLevel && (n3 = this.levels[e8].url), n3;
    } });
  }(t2), function(e7) {
    e7.ImageTileSource = function(t3) {
      t3 = e7.extend({ buildPyramid: true, crossOriginPolicy: false, ajaxWithCredentials: false }, t3), e7.TileSource.apply(this, [t3]);
    }, e7.extend(e7.ImageTileSource.prototype, e7.TileSource.prototype, { supports: function(e8, t3) {
      return e8.type && "image" === e8.type;
    }, configure: function(e8, t3, i3) {
      return e8;
    }, getImageInfo: function(t3) {
      var i3 = this._image = new Image(), n3 = this;
      this.crossOriginPolicy && (i3.crossOrigin = this.crossOriginPolicy), this.ajaxWithCredentials && (i3.useCredentials = this.ajaxWithCredentials), e7.addEvent(i3, "load", function() {
        n3.width = i3.naturalWidth, n3.height = i3.naturalHeight, n3.aspectRatio = n3.width / n3.height, n3.dimensions = new e7.Point(n3.width, n3.height), n3._tileWidth = n3.width, n3._tileHeight = n3.height, n3.tileOverlap = 0, n3.minLevel = 0, n3.levels = n3._buildLevels(), n3.maxLevel = n3.levels.length - 1, n3.ready = true, n3.raiseEvent("ready", { tileSource: n3 });
      }), e7.addEvent(i3, "error", function() {
        n3.raiseEvent("open-failed", { message: "Error loading image at " + t3, source: t3 });
      }), i3.src = t3;
    }, getLevelScale: function(e8) {
      var t3 = NaN;
      return e8 >= this.minLevel && e8 <= this.maxLevel && (t3 = this.levels[e8].width / this.levels[this.maxLevel].width), t3;
    }, getNumTiles: function(t3) {
      return this.getLevelScale(t3) ? new e7.Point(1, 1) : new e7.Point(0, 0);
    }, getTileUrl: function(e8, t3, i3) {
      var n3 = null;
      return e8 >= this.minLevel && e8 <= this.maxLevel && (n3 = this.levels[e8].url), n3;
    }, getContext2D: function(e8, t3, i3) {
      var n3 = null;
      return e8 >= this.minLevel && e8 <= this.maxLevel && (n3 = this.levels[e8].context2D), n3;
    }, destroy: function(e8) {
      this._freeupCanvasMemory(e8);
    }, _buildLevels: function() {
      var t3 = [{ url: this._image.src, width: this._image.naturalWidth, height: this._image.naturalHeight }];
      if (!this.buildPyramid || !e7.supportsCanvas) return delete this._image, t3;
      var i3 = this._image.naturalWidth, n3 = this._image.naturalHeight, o2 = document.createElement("canvas"), r2 = o2.getContext("2d");
      if (o2.width = i3, o2.height = n3, r2.drawImage(this._image, 0, 0, i3, n3), t3[0].context2D = r2, delete this._image, e7.isCanvasTainted(o2)) return t3;
      for (; i3 >= 2 && n3 >= 2; ) {
        i3 = Math.floor(i3 / 2), n3 = Math.floor(n3 / 2);
        var s2 = document.createElement("canvas"), a2 = s2.getContext("2d");
        s2.width = i3, s2.height = n3, a2.drawImage(o2, 0, 0, i3, n3), t3.splice(0, 0, { context2D: a2, width: i3, height: n3 }), o2 = s2, r2 = a2;
      }
      return t3;
    }, _freeupCanvasMemory: function(e8) {
      for (var t3 = 0; t3 < this.levels.length; t3++) this.levels[t3].context2D && (this.levels[t3].context2D.canvas.height = 0, this.levels[t3].context2D.canvas.width = 0, e8 && e8.raiseEvent("image-unloaded", { context2D: this.levels[t3].context2D }));
    } });
  }(t2), function(e7) {
    e7.TileSourceCollection = function(t3, i3, n3, o2) {
      e7.console.error("TileSourceCollection is deprecated; use World instead");
    };
  }(t2), function(e7) {
    function t3(i4) {
      e7.requestAnimationFrame(function() {
        !function(i5) {
          var n4;
          i5.shouldFade && (n4 = 1 - (e7.now() - i5.fadeBeginTime) / i5.fadeLength, n4 = Math.min(1, n4), n4 = Math.max(0, n4), i5.imgGroup && e7.setElementOpacity(i5.imgGroup, n4, true), n4 > 0 && t3(i5));
        }(i4);
      });
    }
    function i3(t4, i4) {
      t4.element.disabled || (i4 >= e7.ButtonState.GROUP && t4.currentState === e7.ButtonState.REST && (!function(t5) {
        t5.shouldFade = false, t5.imgGroup && e7.setElementOpacity(t5.imgGroup, 1, true);
      }(t4), t4.currentState = e7.ButtonState.GROUP), i4 >= e7.ButtonState.HOVER && t4.currentState === e7.ButtonState.GROUP && (t4.imgHover && (t4.imgHover.style.visibility = ""), t4.currentState = e7.ButtonState.HOVER), i4 >= e7.ButtonState.DOWN && t4.currentState === e7.ButtonState.HOVER && (t4.imgDown && (t4.imgDown.style.visibility = ""), t4.currentState = e7.ButtonState.DOWN));
    }
    function n3(i4, n4) {
      i4.element.disabled || (n4 <= e7.ButtonState.HOVER && i4.currentState === e7.ButtonState.DOWN && (i4.imgDown && (i4.imgDown.style.visibility = "hidden"), i4.currentState = e7.ButtonState.HOVER), n4 <= e7.ButtonState.GROUP && i4.currentState === e7.ButtonState.HOVER && (i4.imgHover && (i4.imgHover.style.visibility = "hidden"), i4.currentState = e7.ButtonState.GROUP), n4 <= e7.ButtonState.REST && i4.currentState === e7.ButtonState.GROUP && (!function(i5) {
        i5.shouldFade = true, i5.fadeBeginTime = e7.now() + i5.fadeDelay, window.setTimeout(function() {
          t3(i5);
        }, i5.fadeDelay);
      }(i4), i4.currentState = e7.ButtonState.REST));
    }
    e7.ButtonState = { REST: 0, GROUP: 1, HOVER: 2, DOWN: 3 }, e7.Button = function(t4) {
      var o2 = this;
      e7.EventSource.call(this), e7.extend(true, this, { tooltip: null, srcRest: null, srcGroup: null, srcHover: null, srcDown: null, clickTimeThreshold: e7.DEFAULT_SETTINGS.clickTimeThreshold, clickDistThreshold: e7.DEFAULT_SETTINGS.clickDistThreshold, fadeDelay: 0, fadeLength: 2e3, onPress: null, onRelease: null, onClick: null, onEnter: null, onExit: null, onFocus: null, onBlur: null, userData: null }, t4), this.element = t4.element || e7.makeNeutralElement("div"), t4.element || (this.imgRest = e7.makeTransparentImage(this.srcRest), this.imgGroup = e7.makeTransparentImage(this.srcGroup), this.imgHover = e7.makeTransparentImage(this.srcHover), this.imgDown = e7.makeTransparentImage(this.srcDown), this.imgRest.alt = this.imgGroup.alt = this.imgHover.alt = this.imgDown.alt = this.tooltip, e7.setElementPointerEventsNone(this.imgRest), e7.setElementPointerEventsNone(this.imgGroup), e7.setElementPointerEventsNone(this.imgHover), e7.setElementPointerEventsNone(this.imgDown), this.element.style.position = "relative", e7.setElementTouchActionNone(this.element), this.imgGroup.style.position = this.imgHover.style.position = this.imgDown.style.position = "absolute", this.imgGroup.style.top = this.imgHover.style.top = this.imgDown.style.top = "0px", this.imgGroup.style.left = this.imgHover.style.left = this.imgDown.style.left = "0px", this.imgHover.style.visibility = this.imgDown.style.visibility = "hidden", this.element.appendChild(this.imgRest), this.element.appendChild(this.imgGroup), this.element.appendChild(this.imgHover), this.element.appendChild(this.imgDown)), this.addHandler("press", this.onPress), this.addHandler("release", this.onRelease), this.addHandler("click", this.onClick), this.addHandler("enter", this.onEnter), this.addHandler("exit", this.onExit), this.addHandler("focus", this.onFocus), this.addHandler("blur", this.onBlur), this.currentState = e7.ButtonState.GROUP, this.fadeBeginTime = null, this.shouldFade = false, this.element.style.display = "inline-block", this.element.style.position = "relative", this.element.title = this.tooltip, this.tracker = new e7.MouseTracker({ userData: "Button.tracker", element: this.element, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, enterHandler: function(t5) {
        t5.insideElementPressed ? (i3(o2, e7.ButtonState.DOWN), o2.raiseEvent("enter", { originalEvent: t5.originalEvent })) : t5.buttonDownAny || i3(o2, e7.ButtonState.HOVER);
      }, focusHandler: function(e8) {
        o2.tracker.enterHandler(e8), o2.raiseEvent("focus", { originalEvent: e8.originalEvent });
      }, leaveHandler: function(t5) {
        n3(o2, e7.ButtonState.GROUP), t5.insideElementPressed && o2.raiseEvent("exit", { originalEvent: t5.originalEvent });
      }, blurHandler: function(e8) {
        o2.tracker.leaveHandler(e8), o2.raiseEvent("blur", { originalEvent: e8.originalEvent });
      }, pressHandler: function(t5) {
        i3(o2, e7.ButtonState.DOWN), o2.raiseEvent("press", { originalEvent: t5.originalEvent });
      }, releaseHandler: function(t5) {
        t5.insideElementPressed && t5.insideElementReleased ? (n3(o2, e7.ButtonState.HOVER), o2.raiseEvent("release", { originalEvent: t5.originalEvent })) : t5.insideElementPressed ? n3(o2, e7.ButtonState.GROUP) : i3(o2, e7.ButtonState.HOVER);
      }, clickHandler: function(e8) {
        e8.quick && o2.raiseEvent("click", { originalEvent: e8.originalEvent });
      }, keyHandler: function(e8) {
        13 === e8.keyCode ? (o2.raiseEvent("click", { originalEvent: e8.originalEvent }), o2.raiseEvent("release", { originalEvent: e8.originalEvent }), e8.preventDefault = true) : e8.preventDefault = false;
      } }), n3(this, e7.ButtonState.REST);
    }, e7.extend(e7.Button.prototype, e7.EventSource.prototype, { notifyGroupEnter: function() {
      i3(this, e7.ButtonState.GROUP);
    }, notifyGroupExit: function() {
      n3(this, e7.ButtonState.REST);
    }, disable: function() {
      this.notifyGroupExit(), this.element.disabled = true, this.tracker.setTracking(false), e7.setElementOpacity(this.element, 0.2, true);
    }, enable: function() {
      this.element.disabled = false, this.tracker.setTracking(true), e7.setElementOpacity(this.element, 1, true), this.notifyGroupEnter();
    }, destroy: function() {
      this.imgRest && (this.element.removeChild(this.imgRest), this.imgRest = null), this.imgGroup && (this.element.removeChild(this.imgGroup), this.imgGroup = null), this.imgHover && (this.element.removeChild(this.imgHover), this.imgHover = null), this.imgDown && (this.element.removeChild(this.imgDown), this.imgDown = null), this.removeAllHandlers(), this.tracker.destroy(), this.element = null;
    } });
  }(t2), function(e7) {
    e7.ButtonGroup = function(t3) {
      e7.extend(true, this, { buttons: [], clickTimeThreshold: e7.DEFAULT_SETTINGS.clickTimeThreshold, clickDistThreshold: e7.DEFAULT_SETTINGS.clickDistThreshold, labelText: "" }, t3);
      var i3, n3 = this.buttons.concat([]), o2 = this;
      if (this.element = t3.element || e7.makeNeutralElement("div"), !t3.group) for (this.element.style.display = "inline-block", i3 = 0; i3 < n3.length; i3++) this.element.appendChild(n3[i3].element);
      e7.setElementTouchActionNone(this.element), this.tracker = new e7.MouseTracker({ userData: "ButtonGroup.tracker", element: this.element, clickTimeThreshold: this.clickTimeThreshold, clickDistThreshold: this.clickDistThreshold, enterHandler: function(e8) {
        var t4;
        for (t4 = 0; t4 < o2.buttons.length; t4++) o2.buttons[t4].notifyGroupEnter();
      }, leaveHandler: function(e8) {
        var t4;
        if (!e8.insideElementPressed) for (t4 = 0; t4 < o2.buttons.length; t4++) o2.buttons[t4].notifyGroupExit();
      } });
    }, e7.ButtonGroup.prototype = { addButton: function(e8) {
      this.buttons.push(e8), this.element.appendChild(e8.element);
    }, emulateEnter: function() {
      this.tracker.enterHandler({ eventSource: this.tracker });
    }, emulateLeave: function() {
      this.tracker.leaveHandler({ eventSource: this.tracker });
    }, destroy: function() {
      for (; this.buttons.length; ) {
        var e8 = this.buttons.pop();
        this.element.removeChild(e8.element), e8.destroy();
      }
      this.tracker.destroy(), this.element = null;
    } };
  }(t2), function(e7) {
    e7.Rect = function(t3, i3, n3, o2, r2) {
      var s2, a2;
      this.x = "number" == typeof t3 ? t3 : 0, this.y = "number" == typeof i3 ? i3 : 0, this.width = "number" == typeof n3 ? n3 : 0, this.height = "number" == typeof o2 ? o2 : 0, this.degrees = "number" == typeof r2 ? r2 : 0, this.degrees = e7.positiveModulo(this.degrees, 360), this.degrees >= 270 ? (s2 = this.getTopRight(), this.x = s2.x, this.y = s2.y, a2 = this.height, this.height = this.width, this.width = a2, this.degrees -= 270) : this.degrees >= 180 ? (s2 = this.getBottomRight(), this.x = s2.x, this.y = s2.y, this.degrees -= 180) : this.degrees >= 90 && (s2 = this.getBottomLeft(), this.x = s2.x, this.y = s2.y, a2 = this.height, this.height = this.width, this.width = a2, this.degrees -= 90);
    }, e7.Rect.fromSummits = function(t3, i3, n3) {
      var o2 = t3.distanceTo(i3), r2 = t3.distanceTo(n3), s2 = i3.minus(t3), a2 = Math.atan(s2.y / s2.x);
      return s2.x < 0 ? a2 += Math.PI : s2.y < 0 && (a2 += 2 * Math.PI), new e7.Rect(t3.x, t3.y, o2, r2, a2 / Math.PI * 180);
    }, e7.Rect.prototype = { clone: function() {
      return new e7.Rect(this.x, this.y, this.width, this.height, this.degrees);
    }, getAspectRatio: function() {
      return this.width / this.height;
    }, getTopLeft: function() {
      return new e7.Point(this.x, this.y);
    }, getBottomRight: function() {
      return new e7.Point(this.x + this.width, this.y + this.height).rotate(this.degrees, this.getTopLeft());
    }, getTopRight: function() {
      return new e7.Point(this.x + this.width, this.y).rotate(this.degrees, this.getTopLeft());
    }, getBottomLeft: function() {
      return new e7.Point(this.x, this.y + this.height).rotate(this.degrees, this.getTopLeft());
    }, getCenter: function() {
      return new e7.Point(this.x + this.width / 2, this.y + this.height / 2).rotate(this.degrees, this.getTopLeft());
    }, getSize: function() {
      return new e7.Point(this.width, this.height);
    }, equals: function(t3) {
      return t3 instanceof e7.Rect && this.x === t3.x && this.y === t3.y && this.width === t3.width && this.height === t3.height && this.degrees === t3.degrees;
    }, times: function(t3) {
      return new e7.Rect(this.x * t3, this.y * t3, this.width * t3, this.height * t3, this.degrees);
    }, translate: function(t3) {
      return new e7.Rect(this.x + t3.x, this.y + t3.y, this.width, this.height, this.degrees);
    }, union: function(t3) {
      var i3 = this.getBoundingBox(), n3 = t3.getBoundingBox(), o2 = Math.min(i3.x, n3.x), r2 = Math.min(i3.y, n3.y), s2 = Math.max(i3.x + i3.width, n3.x + n3.width), a2 = Math.max(i3.y + i3.height, n3.y + n3.height);
      return new e7.Rect(o2, r2, s2 - o2, a2 - r2);
    }, intersection: function(t3) {
      var i3 = 1e-10, n3 = [], o2 = this.getTopLeft();
      t3.containsPoint(o2, i3) && n3.push(o2);
      var r2 = this.getTopRight();
      t3.containsPoint(r2, i3) && n3.push(r2);
      var s2 = this.getBottomLeft();
      t3.containsPoint(s2, i3) && n3.push(s2);
      var a2 = this.getBottomRight();
      t3.containsPoint(a2, i3) && n3.push(a2);
      var l2 = t3.getTopLeft();
      this.containsPoint(l2, i3) && n3.push(l2);
      var c2 = t3.getTopRight();
      this.containsPoint(c2, i3) && n3.push(c2);
      var h2 = t3.getBottomLeft();
      this.containsPoint(h2, i3) && n3.push(h2);
      var u2 = t3.getBottomRight();
      this.containsPoint(u2, i3) && n3.push(u2);
      for (var d2 = this._getSegments(), p2 = t3._getSegments(), _2 = 0; _2 < d2.length; _2++) for (var g2 = d2[_2], m2 = 0; m2 < p2.length; m2++) {
        var f2 = p2[m2], v2 = A2(g2[0], g2[1], f2[0], f2[1]);
        v2 && n3.push(v2);
      }
      function A2(t4, n4, o3, r3) {
        var s3 = n4.minus(t4), a3 = r3.minus(o3), l3 = -a3.x * s3.y + s3.x * a3.y;
        if (0 === l3) return null;
        var c3 = (s3.x * (t4.y - o3.y) - s3.y * (t4.x - o3.x)) / l3, h3 = (a3.x * (t4.y - o3.y) - a3.y * (t4.x - o3.x)) / l3;
        return -1e-10 <= c3 && c3 <= 1 - i3 && -1e-10 <= h3 && h3 <= 1 - i3 ? new e7.Point(t4.x + h3 * s3.x, t4.y + h3 * s3.y) : null;
      }
      if (0 === n3.length) return null;
      for (var b2 = n3[0].x, y2 = n3[0].x, w2 = n3[0].y, x2 = n3[0].y, C2 = 1; C2 < n3.length; C2++) {
        var S2 = n3[C2];
        S2.x < b2 && (b2 = S2.x), S2.x > y2 && (y2 = S2.x), S2.y < w2 && (w2 = S2.y), S2.y > x2 && (x2 = S2.y);
      }
      return new e7.Rect(b2, w2, y2 - b2, x2 - w2);
    }, _getSegments: function() {
      var e8 = this.getTopLeft(), t3 = this.getTopRight(), i3 = this.getBottomLeft(), n3 = this.getBottomRight();
      return [[e8, t3], [t3, n3], [n3, i3], [i3, e8]];
    }, rotate: function(t3, i3) {
      if (0 === (t3 = e7.positiveModulo(t3, 360))) return this.clone();
      i3 = i3 || this.getCenter();
      var n3 = this.getTopLeft().rotate(t3, i3), o2 = this.getTopRight().rotate(t3, i3).minus(n3);
      o2 = o2.apply(function(e8) {
        return Math.abs(e8) < 1e-15 ? 0 : e8;
      });
      var r2 = Math.atan(o2.y / o2.x);
      return o2.x < 0 ? r2 += Math.PI : o2.y < 0 && (r2 += 2 * Math.PI), new e7.Rect(n3.x, n3.y, this.width, this.height, r2 / Math.PI * 180);
    }, getBoundingBox: function() {
      if (0 === this.degrees) return this.clone();
      var t3 = this.getTopLeft(), i3 = this.getTopRight(), n3 = this.getBottomLeft(), o2 = this.getBottomRight(), r2 = Math.min(t3.x, i3.x, n3.x, o2.x), s2 = Math.max(t3.x, i3.x, n3.x, o2.x), a2 = Math.min(t3.y, i3.y, n3.y, o2.y), l2 = Math.max(t3.y, i3.y, n3.y, o2.y);
      return new e7.Rect(r2, a2, s2 - r2, l2 - a2);
    }, getIntegerBoundingBox: function() {
      var t3 = this.getBoundingBox(), i3 = Math.floor(t3.x), n3 = Math.floor(t3.y), o2 = Math.ceil(t3.width + t3.x - i3), r2 = Math.ceil(t3.height + t3.y - n3);
      return new e7.Rect(i3, n3, o2, r2);
    }, containsPoint: function(e8, t3) {
      t3 = t3 || 0;
      var i3 = this.getTopLeft(), n3 = this.getTopRight(), o2 = this.getBottomLeft(), r2 = n3.minus(i3), s2 = o2.minus(i3);
      return (e8.x - i3.x) * r2.x + (e8.y - i3.y) * r2.y >= -t3 && (e8.x - n3.x) * r2.x + (e8.y - n3.y) * r2.y <= t3 && (e8.x - i3.x) * s2.x + (e8.y - i3.y) * s2.y >= -t3 && (e8.x - o2.x) * s2.x + (e8.y - o2.y) * s2.y <= t3;
    }, toString: function() {
      return "[" + Math.round(100 * this.x) / 100 + ", " + Math.round(100 * this.y) / 100 + ", " + Math.round(100 * this.width) / 100 + "x" + Math.round(100 * this.height) / 100 + ", " + Math.round(100 * this.degrees) / 100 + "deg]";
    } };
  }(t2), function(e7) {
    var t3 = {};
    function i3(e8) {
      var t4;
      e8.quick && (t4 = "horizontal" === this.scroll ? Math.floor(e8.position.x / (this.panelWidth + 4)) : Math.floor(e8.position.y / this.panelHeight), this.viewer.goToPage(t4));
      this.element.focus();
    }
    function n3(t4) {
      if (this.dragging = true, this.element) {
        var i4 = Number(this.element.style.marginLeft.replace("px", "")), n4 = Number(this.element.style.marginTop.replace("px", "")), o3 = Number(this.element.style.width.replace("px", "")), s3 = Number(this.element.style.height.replace("px", "")), a3 = e7.getElementSize(this.viewer.canvas);
        "horizontal" === this.scroll ? -t4.delta.x > 0 ? i4 > -(o3 - a3.x) && (this.element.style.marginLeft = i4 + 2 * t4.delta.x + "px", r2(this, a3.x, i4 + 2 * t4.delta.x)) : -t4.delta.x < 0 && i4 < 0 && (this.element.style.marginLeft = i4 + 2 * t4.delta.x + "px", r2(this, a3.x, i4 + 2 * t4.delta.x)) : -t4.delta.y > 0 ? n4 > -(s3 - a3.y) && (this.element.style.marginTop = n4 + 2 * t4.delta.y + "px", r2(this, a3.y, n4 + 2 * t4.delta.y)) : -t4.delta.y < 0 && n4 < 0 && (this.element.style.marginTop = n4 + 2 * t4.delta.y + "px", r2(this, a3.y, n4 + 2 * t4.delta.y));
      }
    }
    function o2(t4) {
      if (this.element) {
        var i4 = Number(this.element.style.marginLeft.replace("px", "")), n4 = Number(this.element.style.marginTop.replace("px", "")), o3 = Number(this.element.style.width.replace("px", "")), s3 = Number(this.element.style.height.replace("px", "")), a3 = e7.getElementSize(this.viewer.canvas);
        "horizontal" === this.scroll ? t4.scroll > 0 ? i4 > -(o3 - a3.x) && (this.element.style.marginLeft = i4 - 60 * t4.scroll + "px", r2(this, a3.x, i4 - 60 * t4.scroll)) : t4.scroll < 0 && i4 < 0 && (this.element.style.marginLeft = i4 - 60 * t4.scroll + "px", r2(this, a3.x, i4 - 60 * t4.scroll)) : t4.scroll < 0 ? n4 > a3.y - s3 && (this.element.style.marginTop = n4 + 60 * t4.scroll + "px", r2(this, a3.y, n4 + 60 * t4.scroll)) : t4.scroll > 0 && n4 < 0 && (this.element.style.marginTop = n4 + 60 * t4.scroll + "px", r2(this, a3.y, n4 + 60 * t4.scroll)), t4.preventDefault = true;
      }
    }
    function r2(t4, i4, n4) {
      var o3, r3, s3, a3, l3, c3;
      for (o3 = "horizontal" === t4.scroll ? t4.panelWidth : t4.panelHeight, r3 = Math.ceil(i4 / o3) + 5, l3 = r3 = (r3 = (s3 = Math.ceil((Math.abs(n4) + i4) / o3) + 1) - r3) < 0 ? 0 : r3; l3 < s3 && l3 < t4.panels.length; l3++) if (!(c3 = t4.panels[l3]).activePanel) {
        var h2, u2 = t4.viewer.tileSources[l3];
        h2 = u2.referenceStripThumbnailUrl ? { type: "image", url: u2.referenceStripThumbnailUrl } : u2, a3 = new e7.Viewer({ id: c3.id, tileSources: [h2], element: c3, navigatorSizeRatio: t4.sizeRatio, showNavigator: false, mouseNavEnabled: false, showNavigationControl: false, showSequenceControl: false, immediateRender: true, blendTime: 0, animationTime: 0, loadTilesWithAjax: t4.viewer.loadTilesWithAjax, ajaxHeaders: t4.viewer.ajaxHeaders, drawer: "canvas" }), e7.setElementPointerEventsNone(a3.canvas), e7.setElementPointerEventsNone(a3.container), a3.innerTracker.setTracking(false), a3.outerTracker.setTracking(false), t4.miniViewers[c3.id] = a3, c3.activePanel = true;
      }
    }
    function s2(e8) {
      var t4 = e8.eventSource.element;
      "horizontal" === this.scroll ? t4.style.marginBottom = "0px" : t4.style.marginLeft = "0px";
    }
    function a2(t4) {
      var i4 = t4.eventSource.element;
      "horizontal" === this.scroll ? i4.style.marginBottom = "-" + e7.getElementSize(i4).y / 2 + "px" : i4.style.marginLeft = "-" + e7.getElementSize(i4).x / 2 + "px";
    }
    function l2(e8) {
      if (e8.ctrl || e8.alt || e8.meta) e8.preventDefault = false;
      else switch (e8.keyCode) {
        case 38:
        case 39:
          o2.call(this, { eventSource: this.tracker, position: null, scroll: 1, shift: null }), e8.preventDefault = true;
          break;
        case 40:
        case 37:
          o2.call(this, { eventSource: this.tracker, position: null, scroll: -1, shift: null }), e8.preventDefault = true;
          break;
        default:
          e8.preventDefault = false;
      }
    }
    function c2(e8) {
      if (e8.ctrl || e8.alt || e8.meta) e8.preventDefault = false;
      else switch (e8.keyCode) {
        case 61:
        case 48:
        case 119:
        case 87:
        case 100:
          o2.call(this, { eventSource: this.tracker, position: null, scroll: 1, shift: null }), e8.preventDefault = true;
          break;
        case 45:
        case 115:
        case 83:
        case 97:
          o2.call(this, { eventSource: this.tracker, position: null, scroll: -1, shift: null }), e8.preventDefault = true;
          break;
        default:
          e8.preventDefault = false;
      }
    }
    e7.ReferenceStrip = function(h2) {
      var u2, d2, p2, _2 = h2.viewer, g2 = e7.getElementSize(_2.element);
      for (h2.id || (h2.id = "referencestrip-" + e7.now(), this.element = e7.makeNeutralElement("div"), this.element.id = h2.id, this.element.className = "referencestrip"), h2 = e7.extend(true, { sizeRatio: e7.DEFAULT_SETTINGS.referenceStripSizeRatio, position: e7.DEFAULT_SETTINGS.referenceStripPosition, scroll: e7.DEFAULT_SETTINGS.referenceStripScroll, clickTimeThreshold: e7.DEFAULT_SETTINGS.clickTimeThreshold }, h2, { element: this.element }), e7.extend(this, h2), t3[this.id] = { animating: false }, this.minPixelRatio = this.viewer.minPixelRatio, this.element.tabIndex = 0, (d2 = this.element.style).marginTop = "0px", d2.marginRight = "0px", d2.marginBottom = "0px", d2.marginLeft = "0px", d2.left = "0px", d2.bottom = "0px", d2.border = "0px", d2.background = "#000", d2.position = "relative", e7.setElementTouchActionNone(this.element), e7.setElementOpacity(this.element, 0.8), this.viewer = _2, this.tracker = new e7.MouseTracker({ userData: "ReferenceStrip.tracker", element: this.element, clickHandler: e7.delegate(this, i3), dragHandler: e7.delegate(this, n3), scrollHandler: e7.delegate(this, o2), enterHandler: e7.delegate(this, s2), leaveHandler: e7.delegate(this, a2), keyDownHandler: e7.delegate(this, l2), keyHandler: e7.delegate(this, c2), preProcessEventHandler: function(e8) {
        "wheel" === e8.eventType && (e8.preventDefault = true);
      } }), h2.width && h2.height ? (this.element.style.width = h2.width + "px", this.element.style.height = h2.height + "px", _2.addControl(this.element, { anchor: e7.ControlAnchor.BOTTOM_LEFT })) : "horizontal" === h2.scroll ? (this.element.style.width = g2.x * h2.sizeRatio * _2.tileSources.length + 12 * _2.tileSources.length + "px", this.element.style.height = g2.y * h2.sizeRatio + "px", _2.addControl(this.element, { anchor: e7.ControlAnchor.BOTTOM_LEFT })) : (this.element.style.height = g2.y * h2.sizeRatio * _2.tileSources.length + 12 * _2.tileSources.length + "px", this.element.style.width = g2.x * h2.sizeRatio + "px", _2.addControl(this.element, { anchor: e7.ControlAnchor.TOP_LEFT })), this.panelWidth = g2.x * this.sizeRatio + 8, this.panelHeight = g2.y * this.sizeRatio + 8, this.panels = [], this.miniViewers = {}, p2 = 0; p2 < _2.tileSources.length; p2++) (u2 = e7.makeNeutralElement("div")).id = this.element.id + "-" + p2, u2.style.width = this.panelWidth + "px", u2.style.height = this.panelHeight + "px", u2.style.display = "inline", u2.style.float = "left", u2.style.cssFloat = "left", u2.style.padding = "2px", e7.setElementTouchActionNone(u2), e7.setElementPointerEventsNone(u2), this.element.appendChild(u2), u2.activePanel = false, this.panels.push(u2);
      r2(this, "vertical" === this.scroll ? g2.y : g2.x, 0), this.setFocus(0);
    }, e7.ReferenceStrip.prototype = { setFocus: function(t4) {
      var i4, n4 = this.element.querySelector("#" + this.element.id + "-" + t4), o3 = e7.getElementSize(this.viewer.canvas), a3 = Number(this.element.style.width.replace("px", "")), l3 = Number(this.element.style.height.replace("px", "")), c3 = -Number(this.element.style.marginLeft.replace("px", "")), h2 = -Number(this.element.style.marginTop.replace("px", ""));
      this.currentSelected !== n4 && (this.currentSelected && (this.currentSelected.style.background = "#000"), this.currentSelected = n4, this.currentSelected.style.background = "#999", "horizontal" === this.scroll ? (i4 = Number(t4) * (this.panelWidth + 3)) > c3 + o3.x - this.panelWidth ? (i4 = Math.min(i4, a3 - o3.x), this.element.style.marginLeft = -i4 + "px", r2(this, o3.x, -i4)) : i4 < c3 && (i4 = Math.max(0, i4 - o3.x / 2), this.element.style.marginLeft = -i4 + "px", r2(this, o3.x, -i4)) : (i4 = Number(t4) * (this.panelHeight + 3)) > h2 + o3.y - this.panelHeight ? (i4 = Math.min(i4, l3 - o3.y), this.element.style.marginTop = -i4 + "px", r2(this, o3.y, -i4)) : i4 < h2 && (i4 = Math.max(0, i4 - o3.y / 2), this.element.style.marginTop = -i4 + "px", r2(this, o3.y, -i4)), this.currentPage = t4, s2.call(this, { eventSource: this.tracker }));
    }, update: function() {
      return !!t3[this.id].animating;
    }, destroy: function() {
      if (this.miniViewers) for (var e8 in this.miniViewers) this.miniViewers[e8].destroy();
      this.tracker.destroy(), this.element && this.viewer.removeControl(this.element);
    } };
  }(t2), function(e7) {
    e7.DisplayRect = function(t3, i3, n3, o2, r2, s2) {
      e7.Rect.apply(this, [t3, i3, n3, o2]), this.minLevel = r2, this.maxLevel = s2;
    }, e7.extend(e7.DisplayRect.prototype, e7.Rect.prototype);
  }(t2), function(e7) {
    e7.Spring = function(t3) {
      var i3 = arguments;
      "object" != typeof t3 && (t3 = { initial: i3.length && "number" == typeof i3[0] ? i3[0] : void 0, springStiffness: i3.length > 1 ? i3[1].springStiffness : 5, animationTime: i3.length > 1 ? i3[1].animationTime : 1.5 }), e7.console.assert("number" == typeof t3.springStiffness && 0 !== t3.springStiffness, "[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"), e7.console.assert("number" == typeof t3.animationTime && t3.animationTime >= 0, "[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"), t3.exponential && (this._exponential = true, delete t3.exponential), e7.extend(true, this, t3), this.current = { value: "number" == typeof this.initial ? this.initial : this._exponential ? 0 : 1, time: e7.now() }, e7.console.assert(!this._exponential || 0 !== this.current.value, "[OpenSeadragon.Spring] value must be non-zero for exponential springs"), this.start = { value: this.current.value, time: this.current.time }, this.target = { value: this.current.value, time: this.current.time }, this._exponential && (this.start._logValue = Math.log(this.start.value), this.target._logValue = Math.log(this.target.value), this.current._logValue = Math.log(this.current.value));
    }, e7.Spring.prototype = { resetTo: function(t3) {
      e7.console.assert(!this._exponential || 0 !== t3, "[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"), this.start.value = this.target.value = this.current.value = t3, this.start.time = this.target.time = this.current.time = e7.now(), this._exponential && (this.start._logValue = Math.log(this.start.value), this.target._logValue = Math.log(this.target.value), this.current._logValue = Math.log(this.current.value));
    }, springTo: function(t3) {
      e7.console.assert(!this._exponential || 0 !== t3, "[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"), this.start.value = this.current.value, this.start.time = this.current.time, this.target.value = t3, this.target.time = this.start.time + 1e3 * this.animationTime, this._exponential && (this.start._logValue = Math.log(this.start.value), this.target._logValue = Math.log(this.target.value));
    }, shiftBy: function(t3) {
      this.start.value += t3, this.target.value += t3, this._exponential && (e7.console.assert(0 !== this.target.value && 0 !== this.start.value, "[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"), this.start._logValue = Math.log(this.start.value), this.target._logValue = Math.log(this.target.value));
    }, setExponential: function(t3) {
      this._exponential = t3, this._exponential && (e7.console.assert(0 !== this.current.value && 0 !== this.target.value && 0 !== this.start.value, "[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"), this.start._logValue = Math.log(this.start.value), this.target._logValue = Math.log(this.target.value), this.current._logValue = Math.log(this.current.value));
    }, update: function() {
      let t3, i3;
      if (this.current.time = e7.now(), this._exponential ? (t3 = this.start._logValue, i3 = this.target._logValue) : (t3 = this.start.value, i3 = this.target.value), this.current.time >= this.target.time) this.current.value = this.target.value;
      else {
        let e8 = t3 + (i3 - t3) * function(e9, t4) {
          return (1 - Math.exp(e9 * -t4)) / (1 - Math.exp(-e9));
        }(this.springStiffness, (this.current.time - this.start.time) / (this.target.time - this.start.time));
        this._exponential ? this.current.value = Math.exp(e8) : this.current.value = e8;
      }
      return this.current.value !== this.target.value;
    }, isAtTargetValue: function() {
      return this.current.value === this.target.value;
    } };
  }(t2), function(e7) {
    e7.ImageJob = function(t3) {
      e7.extend(true, this, { timeout: e7.DEFAULT_SETTINGS.timeout, jobId: null, tries: 0 }, t3), this.data = null, this.userData = {}, this.errorMsg = null;
    }, e7.ImageJob.prototype = { start: function() {
      this.tries++;
      var e8 = this, t3 = this.abort;
      this.jobId = window.setTimeout(function() {
        e8.finish(null, null, "Image load exceeded timeout (" + e8.timeout + " ms)");
      }, this.timeout), this.abort = function() {
        e8.source.downloadTileAbort(e8), "function" == typeof t3 && t3();
      }, this.source.downloadTileStart(this);
    }, finish: function(e8, t3, i3) {
      this.data = e8, this.request = t3, this.errorMsg = i3, this.jobId && window.clearTimeout(this.jobId), this.callback(this);
    } }, e7.ImageLoader = function(t3) {
      e7.extend(true, this, { jobLimit: e7.DEFAULT_SETTINGS.imageLoaderLimit, timeout: e7.DEFAULT_SETTINGS.timeout, jobQueue: [], failedTiles: [], jobsInProgress: 0 }, t3);
    }, e7.ImageLoader.prototype = { addJob: function(t3) {
      if (!t3.source) {
        e7.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");
        var i3 = e7.TileSource.prototype;
        t3.source = { downloadTileStart: i3.downloadTileStart, downloadTileAbort: i3.downloadTileAbort };
      }
      var n3 = this, o2 = { src: t3.src, tile: t3.tile || {}, source: t3.source, loadWithAjax: t3.loadWithAjax, ajaxHeaders: t3.loadWithAjax ? t3.ajaxHeaders : null, crossOriginPolicy: t3.crossOriginPolicy, ajaxWithCredentials: t3.ajaxWithCredentials, postData: t3.postData, callback: function(e8) {
        !function(e9, t4, i4) {
          "" !== t4.errorMsg && (null === t4.data || void 0 === t4.data) && t4.tries < 1 + e9.tileRetryMax && e9.failedTiles.push(t4);
          var n4;
          e9.jobsInProgress--, (!e9.jobLimit || e9.jobsInProgress < e9.jobLimit) && e9.jobQueue.length > 0 && ((n4 = e9.jobQueue.shift()).start(), e9.jobsInProgress++);
          e9.tileRetryMax > 0 && 0 === e9.jobQueue.length && (!e9.jobLimit || e9.jobsInProgress < e9.jobLimit) && e9.failedTiles.length > 0 && (n4 = e9.failedTiles.shift(), setTimeout(function() {
            n4.start();
          }, e9.tileRetryDelay), e9.jobsInProgress++);
          i4(t4.data, t4.errorMsg, t4.request);
        }(n3, e8, t3.callback);
      }, abort: t3.abort, timeout: this.timeout }, r2 = new e7.ImageJob(o2);
      !this.jobLimit || this.jobsInProgress < this.jobLimit ? (r2.start(), this.jobsInProgress++) : this.jobQueue.push(r2);
    }, clear: function() {
      for (var e8 = 0; e8 < this.jobQueue.length; e8++) {
        var t3 = this.jobQueue[e8];
        "function" == typeof t3.abort && t3.abort();
      }
      this.jobQueue = [];
    } };
  }(t2), function(e7) {
    e7.Tile = function(i3, n3, o2, r2, s2, a2, l2, c2, h2, u2, d2, p2) {
      this.level = i3, this.x = n3, this.y = o2, this.bounds = r2, this.positionedBounds = new t2.Rect(r2.x, r2.y, r2.width, r2.height), this.sourceBounds = u2, this.exists = s2, this._url = a2, this.postData = d2, this.context2D = l2, this.loadWithAjax = c2, this.ajaxHeaders = h2, void 0 === p2 && (e7.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."), p2 = e7.TileSource.prototype.getTileHashKey(i3, n3, o2, a2, h2, d2)), this.cacheKey = p2, this.loaded = false, this.loading = false, this.element = null, this.imgElement = null, this.style = null, this.position = null, this.size = null, this.flipped = false, this.blendStart = null, this.opacity = null, this.squaredDistance = null, this.visibility = null, this.hasTransparency = false, this.beingDrawn = false, this.lastTouchTime = 0, this.isRightMost = false, this.isBottomMost = false;
    }, e7.Tile.prototype = { toString: function() {
      return this.level + "/" + this.x + "_" + this.y;
    }, _hasTransparencyChannel: function() {
      return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."), !!this.context2D || this.getUrl().match(".png");
    }, get image() {
      return e7.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."), this.getImage();
    }, get url() {
      return e7.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."), this.getUrl();
    }, getImage: function() {
      return this.cacheImageRecord.getImage();
    }, getUrl: function() {
      return "function" == typeof this._url ? this._url() : this._url;
    }, getCanvasContext: function() {
      return this.context2D || this.cacheImageRecord && this.cacheImageRecord.getRenderedContext();
    }, getScaleForEdgeSmoothing: function() {
      var t3;
      if (this.cacheImageRecord) t3 = this.cacheImageRecord.getRenderedContext();
      else {
        if (!this.context2D) return e7.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached", this.toString()), 1;
        t3 = this.context2D;
      }
      return t3.canvas.width / (this.size.x * e7.pixelDensityRatio);
    }, getTranslationForEdgeSmoothing: function(t3, i3, n3) {
      var o2 = Math.max(1, Math.ceil((n3.x - i3.x) / 2)), r2 = Math.max(1, Math.ceil((n3.y - i3.y) / 2));
      return new e7.Point(o2, r2).minus(this.position.times(e7.pixelDensityRatio).times(t3 || 1).apply(function(e8) {
        return e8 % 1;
      }));
    }, unload: function() {
      this.imgElement && this.imgElement.parentNode && this.imgElement.parentNode.removeChild(this.imgElement), this.element && this.element.parentNode && this.element.parentNode.removeChild(this.element), this.element = null, this.imgElement = null, this.loaded = false, this.loading = false;
    } };
  }(t2), function(e7) {
    e7.OverlayPlacement = e7.Placement, e7.OverlayRotationMode = e7.freezeObject({ NO_ROTATION: 1, EXACT: 2, BOUNDING_BOX: 3 }), e7.Overlay = function(t3, i3, n3) {
      var o2;
      o2 = e7.isPlainObject(t3) ? t3 : { element: t3, location: i3, placement: n3 }, this.element = o2.element, this.element.innerHTML = "<div>" + this.element.innerHTML + "</div>", this.style = o2.element.style, this._init(o2);
    }, e7.Overlay.prototype = { _init: function(t3) {
      this.location = t3.location, this.placement = void 0 === t3.placement ? e7.Placement.TOP_LEFT : t3.placement, this.onDraw = t3.onDraw, this.checkResize = void 0 === t3.checkResize || t3.checkResize, this.width = void 0 === t3.width ? null : t3.width, this.height = void 0 === t3.height ? null : t3.height, this.rotationMode = t3.rotationMode || e7.OverlayRotationMode.EXACT, this.location instanceof e7.Rect && (this.width = this.location.width, this.height = this.location.height, this.location = this.location.getTopLeft(), this.placement = e7.Placement.TOP_LEFT), this.scales = null !== this.width && null !== this.height, this.bounds = new e7.Rect(this.location.x, this.location.y, this.width, this.height), this.position = this.location;
    }, adjust: function(t3, i3) {
      var n3 = e7.Placement.properties[this.placement];
      n3 && (n3.isHorizontallyCentered ? t3.x -= i3.x / 2 : n3.isRight && (t3.x -= i3.x), n3.isVerticallyCentered ? t3.y -= i3.y / 2 : n3.isBottom && (t3.y -= i3.y));
    }, destroy: function() {
      var t3 = this.element, i3 = this.style;
      t3.parentNode && (t3.parentNode.removeChild(t3), t3.prevElementParent && (i3.display = "none", document.body.appendChild(t3))), this.onDraw = null, i3.top = "", i3.left = "", i3.position = "", null !== this.width && (i3.width = ""), null !== this.height && (i3.height = "");
      var n3 = e7.getCssPropertyWithVendorPrefix("transformOrigin"), o2 = e7.getCssPropertyWithVendorPrefix("transform");
      n3 && o2 && (i3[n3] = "", i3[o2] = "");
    }, drawHTML: function(t3, i3) {
      var n3 = this.element;
      n3.parentNode !== t3 && (n3.prevElementParent = n3.parentNode, n3.prevNextSibling = n3.nextSibling, t3.appendChild(n3), this.style.position = "absolute", this.size = e7.getElementSize(n3));
      var o2 = this._getOverlayPositionAndSize(i3), r2 = o2.position, s2 = this.size = o2.size, a2 = "";
      i3.overlayPreserveContentDirection && (a2 = i3.flipped ? " scaleX(-1)" : " scaleX(1)");
      var l2 = i3.flipped ? -o2.rotate : o2.rotate, c2 = i3.flipped ? " scaleX(-1)" : "";
      if (this.onDraw) this.onDraw(r2, s2, this.element);
      else {
        var h2 = this.style, u2 = n3.firstChild.style;
        h2.left = r2.x + "px", h2.top = r2.y + "px", null !== this.width && (h2.width = s2.x + "px"), null !== this.height && (h2.height = s2.y + "px");
        var d2 = e7.getCssPropertyWithVendorPrefix("transformOrigin"), p2 = e7.getCssPropertyWithVendorPrefix("transform");
        d2 && p2 && (l2 && !i3.flipped ? (u2[p2] = "", h2[d2] = this._getTransformOrigin(), h2[p2] = "rotate(" + l2 + "deg)") : !l2 && i3.flipped ? (u2[p2] = a2, h2[d2] = this._getTransformOrigin(), h2[p2] = c2) : l2 && i3.flipped ? (u2[p2] = a2, h2[d2] = this._getTransformOrigin(), h2[p2] = "rotate(" + l2 + "deg)" + c2) : (u2[p2] = "", h2[d2] = "", h2[p2] = "")), h2.display = "block";
      }
    }, _getOverlayPositionAndSize: function(t3) {
      var i3 = t3.pixelFromPoint(this.location, true), n3 = this._getSizeInPixels(t3);
      this.adjust(i3, n3);
      var o2 = 0;
      if (t3.getRotation(true) && this.rotationMode !== e7.OverlayRotationMode.NO_ROTATION) if (this.rotationMode === e7.OverlayRotationMode.BOUNDING_BOX && null !== this.width && null !== this.height) {
        var r2 = new e7.Rect(i3.x, i3.y, n3.x, n3.y), s2 = this._getBoundingBox(r2, t3.getRotation(true));
        i3 = s2.getTopLeft(), n3 = s2.getSize();
      } else o2 = t3.getRotation(true);
      return t3.flipped && (i3.x = t3.getContainerSize().x - i3.x), { position: i3, size: n3, rotate: o2 };
    }, _getSizeInPixels: function(t3) {
      var i3 = this.size.x, n3 = this.size.y;
      if (null !== this.width || null !== this.height) {
        var o2 = t3.deltaPixelsFromPointsNoRotate(new e7.Point(this.width || 0, this.height || 0), true);
        null !== this.width && (i3 = o2.x), null !== this.height && (n3 = o2.y);
      }
      if (this.checkResize && (null === this.width || null === this.height)) {
        var r2 = this.size = e7.getElementSize(this.element);
        null === this.width && (i3 = r2.x), null === this.height && (n3 = r2.y);
      }
      return new e7.Point(i3, n3);
    }, _getBoundingBox: function(e8, t3) {
      var i3 = this._getPlacementPoint(e8);
      return e8.rotate(t3, i3).getBoundingBox();
    }, _getPlacementPoint: function(t3) {
      var i3 = new e7.Point(t3.x, t3.y), n3 = e7.Placement.properties[this.placement];
      return n3 && (n3.isHorizontallyCentered ? i3.x += t3.width / 2 : n3.isRight && (i3.x += t3.width), n3.isVerticallyCentered ? i3.y += t3.height / 2 : n3.isBottom && (i3.y += t3.height)), i3;
    }, _getTransformOrigin: function() {
      var t3 = "", i3 = e7.Placement.properties[this.placement];
      return i3 ? (i3.isLeft ? t3 = "left" : i3.isRight && (t3 = "right"), i3.isTop ? t3 += " top" : i3.isBottom && (t3 += " bottom"), t3) : t3;
    }, update: function(t3, i3) {
      var n3 = e7.isPlainObject(t3) ? t3 : { location: t3, placement: i3 };
      this._init({ location: n3.location || this.location, placement: void 0 !== n3.placement ? n3.placement : this.placement, onDraw: n3.onDraw || this.onDraw, checkResize: n3.checkResize || this.checkResize, width: void 0 !== n3.width ? n3.width : this.width, height: void 0 !== n3.height ? n3.height : this.height, rotationMode: n3.rotationMode || this.rotationMode });
    }, getBounds: function(t3) {
      e7.console.assert(t3, "A viewport must now be passed to Overlay.getBounds.");
      var i3 = this.width, n3 = this.height;
      if (null === i3 || null === n3) {
        var o2 = t3.deltaPointsFromPixelsNoRotate(this.size, true);
        null === i3 && (i3 = o2.x), null === n3 && (n3 = o2.y);
      }
      var r2 = this.location.clone();
      return this.adjust(r2, new e7.Point(i3, n3)), this._adjustBoundsForRotation(t3, new e7.Rect(r2.x, r2.y, i3, n3));
    }, _adjustBoundsForRotation: function(t3, i3) {
      if (!t3 || 0 === t3.getRotation(true) || this.rotationMode === e7.OverlayRotationMode.EXACT) return i3;
      if (this.rotationMode === e7.OverlayRotationMode.BOUNDING_BOX) {
        if (null === this.width || null === this.height) return i3;
        var n3 = this._getOverlayPositionAndSize(t3);
        return t3.viewerElementToViewportRectangle(new e7.Rect(n3.position.x, n3.position.y, n3.size.x, n3.size.y));
      }
      return i3.rotate(-t3.getRotation(true), this._getPlacementPoint(i3));
    } };
  }(t2), function(e7) {
    const t3 = e7;
    t3.DrawerBase = class {
      constructor(t4) {
        e7.console.assert(t4.viewer, "[Drawer] options.viewer is required"), e7.console.assert(t4.viewport, "[Drawer] options.viewport is required"), e7.console.assert(t4.element, "[Drawer] options.element is required"), this.viewer = t4.viewer, this.viewport = t4.viewport, this.debugGridColor = "string" == typeof t4.debugGridColor ? [t4.debugGridColor] : t4.debugGridColor || e7.DEFAULT_SETTINGS.debugGridColor, this.options = t4.options || {}, this.container = e7.getElement(t4.element), this._renderingTarget = this._createDrawingElement(), this.canvas.style.width = "100%", this.canvas.style.height = "100%", this.canvas.style.position = "absolute", this.canvas.style.left = "0", e7.setElementOpacity(this.canvas, this.viewer.opacity, true), e7.setElementPointerEventsNone(this.canvas), e7.setElementTouchActionNone(this.canvas), this.container.style.textAlign = "left", this.container.appendChild(this.canvas), this._checkForAPIOverrides();
      }
      get canvas() {
        return this._renderingTarget;
      }
      get element() {
        return e7.console.error("Drawer.element is deprecated. Use Drawer.container instead."), this.container;
      }
      getType() {
        e7.console.error("Drawer.getType must be implemented by child class");
      }
      static isSupported() {
        e7.console.error("Drawer.isSupported must be implemented by child class");
      }
      _createDrawingElement() {
        return e7.console.error("Drawer._createDrawingElement must be implemented by child class"), null;
      }
      draw(t4) {
        e7.console.error("Drawer.draw must be implemented by child class");
      }
      canRotate() {
        e7.console.error("Drawer.canRotate must be implemented by child class");
      }
      destroy() {
        e7.console.error("Drawer.destroy must be implemented by child class");
      }
      minimumOverlapRequired(e8) {
        return false;
      }
      setImageSmoothingEnabled(t4) {
        e7.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class");
      }
      drawDebuggingRect(t4) {
        e7.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer");
      }
      clear() {
        e7.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.");
      }
      _checkForAPIOverrides() {
        if (this._createDrawingElement === e7.DrawerBase.prototype._createDrawingElement) throw new Error("[drawer]._createDrawingElement must be implemented by child class");
        if (this.draw === e7.DrawerBase.prototype.draw) throw new Error("[drawer].draw must be implemented by child class");
        if (this.canRotate === e7.DrawerBase.prototype.canRotate) throw new Error("[drawer].canRotate must be implemented by child class");
        if (this.destroy === e7.DrawerBase.prototype.destroy) throw new Error("[drawer].destroy must be implemented by child class");
        if (this.setImageSmoothingEnabled === e7.DrawerBase.prototype.setImageSmoothingEnabled) throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class");
      }
      viewportToDrawerRectangle(t4) {
        var i3 = this.viewport.pixelFromPointNoRotate(t4.getTopLeft(), true), n3 = this.viewport.deltaPixelsFromPointsNoRotate(t4.getSize(), true);
        return new e7.Rect(i3.x * e7.pixelDensityRatio, i3.y * e7.pixelDensityRatio, n3.x * e7.pixelDensityRatio, n3.y * e7.pixelDensityRatio);
      }
      viewportCoordToDrawerCoord(t4) {
        var i3 = this.viewport.pixelFromPointNoRotate(t4, true);
        return new e7.Point(i3.x * e7.pixelDensityRatio, i3.y * e7.pixelDensityRatio);
      }
      _calculateCanvasSize() {
        var i3 = e7.pixelDensityRatio, n3 = this.viewport.getContainerSize();
        return new t3.Point(Math.round(n3.x * i3), Math.round(n3.y * i3));
      }
      _raiseTiledImageDrawnEvent(e8, t4) {
        this.viewer && this.viewer.raiseEvent("tiled-image-drawn", { tiledImage: e8, tiles: t4 });
      }
      _raiseDrawerErrorEvent(e8, t4) {
        this.viewer && this.viewer.raiseEvent("drawer-error", { tiledImage: e8, drawer: this, error: t4 });
      }
    };
  }(t2), function(e7) {
    const t3 = e7;
    class i3 extends t3.DrawerBase {
      constructor(e8) {
        super(e8), this.viewer.rejectEventHandler("tile-drawing", "The HTMLDrawer does not raise the tile-drawing event"), this.viewer.allowEventHandler("tile-drawn");
      }
      static isSupported() {
        return true;
      }
      getType() {
        return "html";
      }
      minimumOverlapRequired(e8) {
        return true;
      }
      _createDrawingElement() {
        return e7.makeNeutralElement("div");
      }
      draw(e8) {
        var t4 = this;
        this._prepareNewFrame(), e8.forEach(function(e9) {
          0 !== e9.opacity && t4._drawTiles(e9);
        });
      }
      canRotate() {
        return false;
      }
      destroy() {
        this.container.removeChild(this.canvas);
      }
      setImageSmoothingEnabled() {
      }
      _prepareNewFrame() {
        this.canvas.innerHTML = "";
      }
      _drawTiles(e8) {
        var t4 = e8.getTilesToDraw().map((e9) => e9.tile);
        if (0 !== e8.opacity && (0 !== t4.length || e8.placeholderFillStyle)) for (var i4 = t4.length - 1; i4 >= 0; i4--) {
          var n3 = t4[i4];
          this._drawTile(n3), this.viewer && this.viewer.raiseEvent("tile-drawn", { tiledImage: e8, tile: n3 });
        }
      }
      _drawTile(t4) {
        e7.console.assert(t4, "[Drawer._drawTile] tile is required");
        let i4 = this.canvas;
        if (t4.cacheImageRecord) if (t4.loaded) {
          if (!t4.element) {
            var n3 = t4.getImage();
            if (!n3) return;
            t4.element = e7.makeNeutralElement("div"), t4.imgElement = n3.cloneNode(), t4.imgElement.style.msInterpolationMode = "nearest-neighbor", t4.imgElement.style.width = "100%", t4.imgElement.style.height = "100%", t4.style = t4.element.style, t4.style.position = "absolute";
          }
          t4.element.parentNode !== i4 && i4.appendChild(t4.element), t4.imgElement.parentNode !== t4.element && t4.element.appendChild(t4.imgElement), t4.style.top = t4.position.y + "px", t4.style.left = t4.position.x + "px", t4.style.height = t4.size.y + "px", t4.style.width = t4.size.x + "px", t4.flipped && (t4.style.transform = "scaleX(-1)"), e7.setElementOpacity(t4.element, t4.opacity);
        } else e7.console.warn("Attempting to draw tile %s when it's not yet loaded.", t4.toString());
        else e7.console.warn("[Drawer._drawTileToHTML] attempting to draw tile %s when it's not cached", t4.toString());
      }
    }
    e7.HTMLDrawer = i3;
  }(t2), function(e7) {
    const t3 = e7;
    class i3 extends t3.DrawerBase {
      constructor(e8) {
        super(e8), this.context = this.canvas.getContext("2d"), this.sketchCanvas = null, this.sketchContext = null, this._imageSmoothingEnabled = true, this.viewer.allowEventHandler("tile-drawn"), this.viewer.allowEventHandler("tile-drawing");
      }
      static isSupported() {
        return e7.supportsCanvas;
      }
      getType() {
        return "canvas";
      }
      _createDrawingElement() {
        let t4 = e7.makeNeutralElement("canvas"), i4 = this._calculateCanvasSize();
        return t4.width = i4.x, t4.height = i4.y, t4;
      }
      draw(e8) {
        this._prepareNewFrame(), this.viewer.viewport.getFlip() !== this._viewportFlipped && this._flip();
        for (const t4 of e8) 0 !== t4.opacity && this._drawTiles(t4);
      }
      canRotate() {
        return true;
      }
      destroy() {
        this.canvas.width = 1, this.canvas.height = 1, this.sketchCanvas = null, this.sketchContext = null, this.container.removeChild(this.canvas);
      }
      minimumOverlapRequired(e8) {
        return true;
      }
      setImageSmoothingEnabled(e8) {
        this._imageSmoothingEnabled = !!e8, this._updateImageSmoothingEnabled(this.context), this.viewer.forceRedraw();
      }
      drawDebuggingRect(t4) {
        var i4 = this.context;
        i4.save(), i4.lineWidth = 2 * e7.pixelDensityRatio, i4.strokeStyle = this.debugGridColor[0], i4.fillStyle = this.debugGridColor[0], i4.strokeRect(t4.x * e7.pixelDensityRatio, t4.y * e7.pixelDensityRatio, t4.width * e7.pixelDensityRatio, t4.height * e7.pixelDensityRatio), i4.restore();
      }
      get _viewportFlipped() {
        return this.context.getTransform().a < 0;
      }
      _raiseTileDrawingEvent(e8, t4, i4, n4) {
        this.viewer.raiseEvent("tile-drawing", { tiledImage: e8, context: t4, tile: i4, rendered: n4 });
      }
      _prepareNewFrame() {
        var e8 = this._calculateCanvasSize();
        if ((this.canvas.width !== e8.x || this.canvas.height !== e8.y) && (this.canvas.width = e8.x, this.canvas.height = e8.y, this._updateImageSmoothingEnabled(this.context), null !== this.sketchCanvas)) {
          var t4 = this._calculateSketchCanvasSize();
          this.sketchCanvas.width = t4.x, this.sketchCanvas.height = t4.y, this._updateImageSmoothingEnabled(this.sketchContext);
        }
        this._clear();
      }
      _clear(e8, t4) {
        var i4 = this._getContext(e8);
        if (t4) i4.clearRect(t4.x, t4.y, t4.width, t4.height);
        else {
          var n4 = i4.canvas;
          i4.clearRect(0, 0, n4.width, n4.height);
        }
      }
      _drawTiles(t4) {
        var i4 = t4.getTilesToDraw().map((e8) => e8.tile);
        if (0 !== t4.opacity && (0 !== i4.length || t4.placeholderFillStyle)) {
          var s2, a2, l2, c2 = i4[0];
          c2 && (s2 = t4.opacity < 1 || t4.compositeOperation && "source-over" !== t4.compositeOperation || !t4._isBottomItem() && t4.source.hasTransparency(c2.context2D, c2.getUrl(), c2.ajaxHeaders, c2.postData));
          var h2, u2 = this.viewport.getZoom(true), d2 = t4.viewportToImageZoom(u2);
          i4.length > 1 && d2 > t4.smoothTileEdgesMinZoom && !t4.iOSDevice && t4.getRotation(true) % 360 == 0 && (s2 = true, a2 = c2.getScaleForEdgeSmoothing(), l2 = c2.getTranslationForEdgeSmoothing(a2, this._getCanvasSize(false), this._getCanvasSize(true))), s2 && (a2 || (h2 = (h2 = this.viewport.viewportToViewerElementRectangle(t4.getClippedBounds(true)).getIntegerBoundingBox()).times(e7.pixelDensityRatio)), this._clear(true, h2)), a2 || this._setRotations(t4, s2);
          var p2 = false;
          if (t4._clip) {
            this._saveContext(s2);
            var _2 = t4.imageToViewportRectangle(t4._clip, true);
            _2 = _2.rotate(-t4.getRotation(true), t4._getRotationPoint(true));
            var g2 = this.viewportToDrawerRectangle(_2);
            a2 && (g2 = g2.times(a2)), l2 && (g2 = g2.translate(l2)), this._setClip(g2, s2), p2 = true;
          }
          if (t4._croppingPolygons) {
            var m2 = this;
            p2 || this._saveContext(s2);
            try {
              var f2 = t4._croppingPolygons.map(function(e8) {
                return e8.map(function(e9) {
                  var i5 = t4.imageToViewportCoordinates(e9.x, e9.y, true).rotate(-t4.getRotation(true), t4._getRotationPoint(true)), n4 = m2.viewportCoordToDrawerCoord(i5);
                  return a2 && (n4 = n4.times(a2)), l2 && (n4 = n4.plus(l2)), n4;
                });
              });
              this._clipWithPolygons(f2, s2);
            } catch (t5) {
              e7.console.error(t5);
            }
            p2 = true;
          }
          if (t4._hasOpaqueTile = false, t4.placeholderFillStyle && false === t4._hasOpaqueTile) {
            let e8 = this.viewportToDrawerRectangle(t4.getBoundsNoRotate(true));
            a2 && (e8 = e8.times(a2)), l2 && (e8 = e8.translate(l2));
            let i5 = null;
            i5 = "function" == typeof t4.placeholderFillStyle ? t4.placeholderFillStyle(t4, this.context) : t4.placeholderFillStyle, this._drawRectangle(e8, i5, s2);
          }
          var v2 = function(t5) {
            if ("number" == typeof t5) return r2(t5);
            if (!t5 || !e7.Browser) return n3;
            var i5 = t5[e7.Browser.vendor];
            o2(i5) && (i5 = t5["*"]);
            return r2(i5);
          }(t4.subPixelRoundingForTransparency), A2 = false;
          if (v2 === e7.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS) A2 = true;
          else if (v2 === e7.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST) {
            A2 = !(this.viewer && this.viewer.isAnimating());
          }
          for (var b2 = 0; b2 < i4.length; b2++) c2 = i4[b2], this._drawTile(c2, t4, s2, a2, l2, A2, t4.source), this.viewer && this.viewer.raiseEvent("tile-drawn", { tiledImage: t4, tile: c2 });
          p2 && this._restoreContext(s2), a2 || (t4.getRotation(true) % 360 != 0 && this._restoreRotationChanges(s2), this.viewport.getRotation(true) % 360 != 0 && this._restoreRotationChanges(s2)), s2 && (a2 && this._setRotations(t4), this.blendSketch({ opacity: t4.opacity, scale: a2, translate: l2, compositeOperation: t4.compositeOperation, bounds: h2 }), a2 && (t4.getRotation(true) % 360 != 0 && this._restoreRotationChanges(false), this.viewport.getRotation(true) % 360 != 0 && this._restoreRotationChanges(false))), this._drawDebugInfo(t4, i4), this._raiseTiledImageDrawnEvent(t4, i4);
        }
      }
      _drawDebugInfo(t4, i4) {
        if (t4.debugMode) for (var n4 = i4.length - 1; n4 >= 0; n4--) {
          var o3 = i4[n4];
          try {
            this._drawDebugInfoOnTile(o3, i4.length, n4, t4);
          } catch (t5) {
            e7.console.error(t5);
          }
        }
      }
      _clipWithPolygons(e8, t4) {
        var i4 = this._getContext(t4);
        i4.beginPath();
        for (const t5 of e8) for (const [e9, n4] of t5.entries()) i4[0 === e9 ? "moveTo" : "lineTo"](n4.x, n4.y);
        i4.clip();
      }
      _drawTile(t4, i4, n4, o3, r3, s2, a2) {
        e7.console.assert(t4, "[Drawer._drawTile] tile is required"), e7.console.assert(i4, "[Drawer._drawTile] drawingHandler is required");
        var l2 = this._getContext(n4);
        o3 = o3 || 1, this._drawTileToCanvas(t4, l2, i4, o3, r3, s2, a2);
      }
      _drawTileToCanvas(t4, i4, n4, o3, r3, s2, a2) {
        var l2, c2, h2, u2 = t4.position.times(e7.pixelDensityRatio), d2 = t4.size.times(e7.pixelDensityRatio);
        t4.context2D || t4.cacheImageRecord ? (l2 = t4.getCanvasContext(), t4.loaded && l2 ? (i4.save(), "number" == typeof o3 && 1 !== o3 && (u2 = u2.times(o3), d2 = d2.times(o3)), r3 instanceof e7.Point && (u2 = u2.plus(r3)), 1 === i4.globalAlpha && t4.hasTransparency && (s2 && (u2.x = Math.round(u2.x), u2.y = Math.round(u2.y), d2.x = Math.round(d2.x), d2.y = Math.round(d2.y)), i4.clearRect(u2.x, u2.y, d2.x, d2.y)), this._raiseTileDrawingEvent(n4, i4, t4, l2), t4.sourceBounds ? (c2 = Math.min(t4.sourceBounds.width, l2.canvas.width), h2 = Math.min(t4.sourceBounds.height, l2.canvas.height)) : (c2 = l2.canvas.width, h2 = l2.canvas.height), i4.translate(u2.x + d2.x / 2, 0), t4.flipped && i4.scale(-1, 1), i4.drawImage(l2.canvas, 0, 0, c2, h2, -d2.x / 2, u2.y, d2.x, d2.y), i4.restore()) : e7.console.warn("Attempting to draw tile %s when it's not yet loaded.", t4.toString())) : e7.console.warn("[Drawer._drawTileToCanvas] attempting to draw tile %s when it's not cached", t4.toString());
      }
      _getContext(e8) {
        var t4 = this.context;
        if (e8) {
          if (null === this.sketchCanvas) {
            this.sketchCanvas = document.createElement("canvas");
            var i4 = this._calculateSketchCanvasSize();
            if (this.sketchCanvas.width = i4.x, this.sketchCanvas.height = i4.y, this.sketchContext = this.sketchCanvas.getContext("2d"), 0 === this.viewport.getRotation()) {
              var n4 = this;
              this.viewer.addHandler("rotate", function e9() {
                if (0 !== n4.viewport.getRotation()) {
                  n4.viewer.removeHandler("rotate", e9);
                  var t5 = n4._calculateSketchCanvasSize();
                  n4.sketchCanvas.width = t5.x, n4.sketchCanvas.height = t5.y;
                }
              });
            }
            this._updateImageSmoothingEnabled(this.sketchContext);
          }
          t4 = this.sketchContext;
        }
        return t4;
      }
      _saveContext(e8) {
        this._getContext(e8).save();
      }
      _restoreContext(e8) {
        this._getContext(e8).restore();
      }
      _setClip(e8, t4) {
        var i4 = this._getContext(t4);
        i4.beginPath(), i4.rect(e8.x, e8.y, e8.width, e8.height), i4.clip();
      }
      _drawRectangle(e8, t4, i4) {
        var n4 = this._getContext(i4);
        n4.save(), n4.fillStyle = t4, n4.fillRect(e8.x, e8.y, e8.width, e8.height), n4.restore();
      }
      blendSketch(t4, i4, n4, o3) {
        var r3 = t4;
        e7.isPlainObject(r3) || (r3 = { opacity: t4, scale: i4, translate: n4, compositeOperation: o3 }), t4 = r3.opacity, o3 = r3.compositeOperation;
        var s2 = r3.bounds;
        if (this.context.save(), this.context.globalAlpha = t4, o3 && (this.context.globalCompositeOperation = o3), s2) s2.x < 0 && (s2.width += s2.x, s2.x = 0), s2.x + s2.width > this.canvas.width && (s2.width = this.canvas.width - s2.x), s2.y < 0 && (s2.height += s2.y, s2.y = 0), s2.y + s2.height > this.canvas.height && (s2.height = this.canvas.height - s2.y), this.context.drawImage(this.sketchCanvas, s2.x, s2.y, s2.width, s2.height, s2.x, s2.y, s2.width, s2.height);
        else {
          i4 = r3.scale || 1;
          var a2 = (n4 = r3.translate) instanceof e7.Point ? n4 : new e7.Point(0, 0), l2 = 0, c2 = 0;
          if (n4) {
            var h2 = this.sketchCanvas.width - this.canvas.width, u2 = this.sketchCanvas.height - this.canvas.height;
            l2 = Math.round(h2 / 2), c2 = Math.round(u2 / 2);
          }
          this.context.drawImage(this.sketchCanvas, a2.x - l2 * i4, a2.y - c2 * i4, (this.canvas.width + 2 * l2) * i4, (this.canvas.height + 2 * c2) * i4, -l2, -c2, this.canvas.width + 2 * l2, this.canvas.height + 2 * c2);
        }
        this.context.restore();
      }
      _drawDebugInfoOnTile(t4, i4, n4, o3) {
        var r3 = this.viewer.world.getIndexOfItem(o3) % this.debugGridColor.length, s2 = this.context;
        s2.save(), s2.lineWidth = 2 * e7.pixelDensityRatio, s2.font = "small-caps bold " + 13 * e7.pixelDensityRatio + "px arial", s2.strokeStyle = this.debugGridColor[r3], s2.fillStyle = this.debugGridColor[r3], this._setRotations(o3), this._viewportFlipped && this._flip({ point: t4.position.plus(t4.size.divide(2)) }), s2.strokeRect(t4.position.x * e7.pixelDensityRatio, t4.position.y * e7.pixelDensityRatio, t4.size.x * e7.pixelDensityRatio, t4.size.y * e7.pixelDensityRatio);
        var a2 = (t4.position.x + t4.size.x / 2) * e7.pixelDensityRatio, l2 = (t4.position.y + t4.size.y / 2) * e7.pixelDensityRatio;
        s2.translate(a2, l2);
        const c2 = this.viewport.getRotation(true);
        s2.rotate(Math.PI / 180 * -c2), s2.translate(-a2, -l2), 0 === t4.x && 0 === t4.y && (s2.fillText("Zoom: " + this.viewport.getZoom(), t4.position.x * e7.pixelDensityRatio, (t4.position.y - 30) * e7.pixelDensityRatio), s2.fillText("Pan: " + this.viewport.getBounds().toString(), t4.position.x * e7.pixelDensityRatio, (t4.position.y - 20) * e7.pixelDensityRatio)), s2.fillText("Level: " + t4.level, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 20) * e7.pixelDensityRatio), s2.fillText("Column: " + t4.x, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 30) * e7.pixelDensityRatio), s2.fillText("Row: " + t4.y, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 40) * e7.pixelDensityRatio), s2.fillText("Order: " + n4 + " of " + i4, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 50) * e7.pixelDensityRatio), s2.fillText("Size: " + t4.size.toString(), (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 60) * e7.pixelDensityRatio), s2.fillText("Position: " + t4.position.toString(), (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 70) * e7.pixelDensityRatio), this.viewport.getRotation(true) % 360 != 0 && this._restoreRotationChanges(), o3.getRotation(true) % 360 != 0 && this._restoreRotationChanges(), s2.restore();
      }
      _updateImageSmoothingEnabled(e8) {
        e8.msImageSmoothingEnabled = this._imageSmoothingEnabled, e8.imageSmoothingEnabled = this._imageSmoothingEnabled;
      }
      _getCanvasSize(t4) {
        var i4 = this._getContext(t4).canvas;
        return new e7.Point(i4.width, i4.height);
      }
      _getCanvasCenter() {
        return new e7.Point(this.canvas.width / 2, this.canvas.height / 2);
      }
      _setRotations(e8, t4 = false) {
        var i4 = false;
        this.viewport.getRotation(true) % 360 != 0 && (this._offsetForRotation({ degrees: this.viewport.getRotation(true), useSketch: t4, saveContext: i4 }), i4 = false), e8.getRotation(true) % 360 != 0 && this._offsetForRotation({ degrees: e8.getRotation(true), point: this.viewport.pixelFromPointNoRotate(e8._getRotationPoint(true), true), useSketch: t4, saveContext: i4 });
      }
      _offsetForRotation(t4) {
        var i4 = t4.point ? t4.point.times(e7.pixelDensityRatio) : this._getCanvasCenter(), n4 = this._getContext(t4.useSketch);
        n4.save(), n4.translate(i4.x, i4.y), n4.rotate(Math.PI / 180 * t4.degrees), n4.translate(-i4.x, -i4.y);
      }
      _flip(t4) {
        var i4 = (t4 = t4 || {}).point ? t4.point.times(e7.pixelDensityRatio) : this._getCanvasCenter(), n4 = this._getContext(t4.useSketch);
        n4.translate(i4.x, 0), n4.scale(-1, 1), n4.translate(-i4.x, 0);
      }
      _restoreRotationChanges(e8) {
        this._getContext(e8).restore();
      }
      _calculateCanvasSize() {
        var t4 = e7.pixelDensityRatio, i4 = this.viewport.getContainerSize();
        return { x: Math.round(i4.x * t4), y: Math.round(i4.y * t4) };
      }
      _calculateSketchCanvasSize() {
        var e8 = this._calculateCanvasSize();
        if (0 === this.viewport.getRotation()) return e8;
        var t4 = Math.ceil(Math.sqrt(e8.x * e8.x + e8.y * e8.y));
        return { x: t4, y: t4 };
      }
    }
    e7.CanvasDrawer = i3;
    var n3 = e7.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;
    function o2(t4) {
      return t4 !== e7.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS && t4 !== e7.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST && t4 !== e7.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;
    }
    function r2(e8) {
      return o2(e8) ? n3 : e8;
    }
  }(t2), function(e7) {
    const t3 = e7;
    t3.WebGLDrawer = class extends t3.DrawerBase {
      constructor(e8) {
        super(e8), this._destroyed = false, this._TextureMap = /* @__PURE__ */ new Map(), this._TileMap = /* @__PURE__ */ new Map(), this._gl = null, this._firstPass = null, this._secondPass = null, this._glFrameBuffer = null, this._renderToTexture = null, this._glFramebufferToCanvasTransform = null, this._outputCanvas = null, this._outputContext = null, this._clippingCanvas = null, this._clippingContext = null, this._renderingCanvas = null, this._backupCanvasDrawer = null, this._boundToTileReady = (e9) => this._tileReadyHandler(e9), this._boundToImageUnloaded = (e9) => this._imageUnloadedHandler(e9), this.viewer.addHandler("tile-ready", this._boundToTileReady), this.viewer.addHandler("image-unloaded", this._boundToImageUnloaded), this.viewer.rejectEventHandler("tile-drawn", "The WebGLDrawer does not raise the tile-drawn event"), this.viewer.rejectEventHandler("tile-drawing", "The WebGLDrawer does not raise the tile-drawing event"), this._setupCanvases(), this._setupRenderer(), this.context = this._outputContext;
      }
      destroy() {
        if (this._destroyed) return;
        let e8 = this._gl;
        var t4 = e8.getParameter(e8.MAX_TEXTURE_IMAGE_UNITS);
        for (let i4 = 0; i4 < t4; ++i4) e8.activeTexture(e8.TEXTURE0 + i4), e8.bindTexture(e8.TEXTURE_2D, null), e8.bindTexture(e8.TEXTURE_CUBE_MAP, null);
        e8.bindBuffer(e8.ARRAY_BUFFER, null), e8.bindBuffer(e8.ELEMENT_ARRAY_BUFFER, null), e8.bindRenderbuffer(e8.RENDERBUFFER, null), e8.bindFramebuffer(e8.FRAMEBUFFER, null), Array.from(this._TextureMap.keys()).forEach((e9) => {
          this._cleanupImageData(e9);
        }), e8.deleteBuffer(this._secondPass.bufferOutputPosition), e8.deleteFramebuffer(this._glFrameBuffer), this._renderingCanvas.width = this._renderingCanvas.height = 1, this._clippingCanvas.width = this._clippingCanvas.height = 1, this._outputCanvas.width = this._outputCanvas.height = 1, this._renderingCanvas = null, this._clippingCanvas = this._clippingContext = null, this._outputCanvas = this._outputContext = null;
        let i3 = e8.getExtension("WEBGL_lose_context");
        i3 && i3.loseContext(), this.viewer.removeHandler("tile-ready", this._boundToTileReady), this.viewer.removeHandler("image-unloaded", this._boundToImageUnloaded), this._gl = null, this._backupCanvasDrawer && (this._backupCanvasDrawer.destroy(), this._backupCanvasDrawer = null), this.container.removeChild(this.canvas), this.viewer.drawer === this && (this.viewer.drawer = null), this._destroyed = true;
      }
      canRotate() {
        return true;
      }
      static isSupported() {
        let t4 = document.createElement("canvas"), i3 = e7.isFunction(t4.getContext) && t4.getContext("webgl"), n3 = i3 && i3.getExtension("WEBGL_lose_context");
        return n3 && n3.loseContext(), !!i3;
      }
      getType() {
        return "webgl";
      }
      minimumOverlapRequired(e8) {
        return e8.isTainted();
      }
      _createDrawingElement() {
        let t4 = e7.makeNeutralElement("canvas"), i3 = this._calculateCanvasSize();
        return t4.width = i3.x, t4.height = i3.y, t4;
      }
      _getBackupCanvasDrawer() {
        return this._backupCanvasDrawer || (this._backupCanvasDrawer = this.viewer.requestDrawer("canvas", { mainDrawer: false }), this._backupCanvasDrawer.canvas.style.setProperty("visibility", "hidden")), this._backupCanvasDrawer;
      }
      draw(t4) {
        let i3 = this._gl, n3 = this.viewport.getBoundsNoRotate(true), o2 = this.viewport.getCenter(true), r2 = this.viewport.getRotation(true) * Math.PI / 180, s2 = this.viewport.flipped ? -1 : 1, a2 = e7.Mat3.makeTranslation(-o2.x, -o2.y), l2 = e7.Mat3.makeScaling(2 / n3.width * s2, -2 / n3.height), c2 = e7.Mat3.makeRotation(-r2), h2 = l2.multiply(c2).multiply(a2);
        i3.bindFramebuffer(i3.FRAMEBUFFER, null), i3.clear(i3.COLOR_BUFFER_BIT), this._outputContext.clearRect(0, 0, this._outputCanvas.width, this._outputCanvas.height);
        let u2 = false;
        t4.forEach((t5, n4) => {
          if (t5.isTainted()) {
            u2 && (this._outputContext.drawImage(this._renderingCanvas, 0, 0), i3.bindFramebuffer(i3.FRAMEBUFFER, null), i3.clear(i3.COLOR_BUFFER_BIT), u2 = false);
            const e8 = this._getBackupCanvasDrawer();
            e8.draw([t5]), this._outputContext.drawImage(e8.canvas, 0, 0);
          } else {
            let o3 = t5.getTilesToDraw();
            if (t5.placeholderFillStyle && false === t5._hasOpaqueTile && this._drawPlaceholder(t5), 0 === o3.length || 0 === t5.getOpacity()) return;
            let r3 = o3[0], s3 = t5.compositeOperation || this.viewer.compositeOperation || t5._clip || t5._croppingPolygons || t5.debugMode, a3 = s3 || t5.opacity < 1 || r3.hasTransparency;
            s3 && (u2 && this._outputContext.drawImage(this._renderingCanvas, 0, 0), i3.bindFramebuffer(i3.FRAMEBUFFER, null), i3.clear(i3.COLOR_BUFFER_BIT)), i3.useProgram(this._firstPass.shaderProgram), a3 ? (i3.bindFramebuffer(i3.FRAMEBUFFER, this._glFrameBuffer), i3.clear(i3.COLOR_BUFFER_BIT)) : i3.bindFramebuffer(i3.FRAMEBUFFER, null);
            let l3 = h2, c3 = t5.getRotation(true);
            if (c3 % 360 != 0) {
              let i4 = e7.Mat3.makeRotation(-c3 * Math.PI / 180), n5 = t5.getBoundsNoRotate(true).getCenter(), o4 = e7.Mat3.makeTranslation(n5.x, n5.y), r4 = e7.Mat3.makeTranslation(-n5.x, -n5.y), s4 = o4.multiply(i4).multiply(r4);
              l3 = h2.multiply(s4);
            }
            let d2 = this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);
            if (d2 <= 0) throw new Error(`WegGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${d2}). This could happen
                        if too many contexts have been created and not released, or there is another problem with the graphics card.`);
            let p2 = new Float32Array(12 * d2), _2 = new Array(d2), g2 = new Array(d2), m2 = new Array(d2);
            for (let e8 = 0; e8 < o3.length; e8++) {
              let n5 = o3[e8].tile, r4 = e8 % d2, s4 = r4 + 1, a4 = n5.getCanvasContext(), c4 = a4 ? this._TextureMap.get(a4.canvas) : null;
              if (c4 || (this._tileReadyHandler({ tile: n5, tiledImage: t5 }), c4 = a4 ? this._TextureMap.get(a4.canvas) : null), c4 && this._getTileData(n5, t5, c4, l3, r4, p2, _2, g2, m2), s4 === d2 || e8 === o3.length - 1) {
                for (let e9 = 0; e9 <= s4; e9++) i3.activeTexture(i3.TEXTURE0 + e9), i3.bindTexture(i3.TEXTURE_2D, _2[e9]);
                i3.bindBuffer(i3.ARRAY_BUFFER, this._firstPass.bufferTexturePosition), i3.bufferData(i3.ARRAY_BUFFER, p2, i3.DYNAMIC_DRAW), g2.forEach((e9, t6) => {
                  i3.uniformMatrix3fv(this._firstPass.uTransformMatrices[t6], false, e9);
                }), i3.uniform1fv(this._firstPass.uOpacities, new Float32Array(m2)), i3.bindBuffer(i3.ARRAY_BUFFER, this._firstPass.bufferOutputPosition), i3.vertexAttribPointer(this._firstPass.aOutputPosition, 2, i3.FLOAT, false, 0, 0), i3.bindBuffer(i3.ARRAY_BUFFER, this._firstPass.bufferTexturePosition), i3.vertexAttribPointer(this._firstPass.aTexturePosition, 2, i3.FLOAT, false, 0, 0), i3.bindBuffer(i3.ARRAY_BUFFER, this._firstPass.bufferIndex), i3.vertexAttribPointer(this._firstPass.aIndex, 1, i3.FLOAT, false, 0, 0), i3.drawArrays(i3.TRIANGLES, 0, 6 * s4);
              }
            }
            a3 && (i3.useProgram(this._secondPass.shaderProgram), i3.bindFramebuffer(i3.FRAMEBUFFER, null), i3.activeTexture(i3.TEXTURE0), i3.bindTexture(i3.TEXTURE_2D, this._renderToTexture), this._gl.uniform1f(this._secondPass.uOpacityMultiplier, t5.opacity), i3.bindBuffer(i3.ARRAY_BUFFER, this._secondPass.bufferTexturePosition), i3.vertexAttribPointer(this._secondPass.aTexturePosition, 2, i3.FLOAT, false, 0, 0), i3.bindBuffer(i3.ARRAY_BUFFER, this._secondPass.bufferOutputPosition), i3.vertexAttribPointer(this._firstPass.aOutputPosition, 2, i3.FLOAT, false, 0, 0), i3.drawArrays(i3.TRIANGLES, 0, 6)), u2 = true, s3 && (this._applyContext2dPipeline(t5, o3, n4), u2 = false, i3.bindFramebuffer(i3.FRAMEBUFFER, null), i3.clear(i3.COLOR_BUFFER_BIT)), 0 === n4 && this._raiseTiledImageDrawnEvent(t5, o3.map((e8) => e8.tile));
          }
        }), u2 && this._outputContext.drawImage(this._renderingCanvas, 0, 0);
      }
      setImageSmoothingEnabled(e8) {
      }
      drawDebuggingRect(t4) {
        let i3 = this._outputContext;
        i3.save(), i3.lineWidth = 2 * e7.pixelDensityRatio, i3.strokeStyle = this.debugGridColor[0], i3.fillStyle = this.debugGridColor[0], i3.strokeRect(t4.x * e7.pixelDensityRatio, t4.y * e7.pixelDensityRatio, t4.width * e7.pixelDensityRatio, t4.height * e7.pixelDensityRatio), i3.restore();
      }
      _getTextureDataFromTile(e8) {
        return e8.getCanvasContext().canvas;
      }
      _applyContext2dPipeline(e8, t4, i3) {
        if (this._outputContext.save(), this._outputContext.globalCompositeOperation = 0 === i3 ? null : e8.compositeOperation || this.viewer.compositeOperation, e8._croppingPolygons || e8._clip ? (this._renderToClippingCanvas(e8), this._outputContext.drawImage(this._clippingCanvas, 0, 0)) : this._outputContext.drawImage(this._renderingCanvas, 0, 0), this._outputContext.restore(), e8.debugMode) {
          const i4 = this.viewer.viewport.getFlip();
          i4 && this._flip(), this._drawDebugInfo(t4, e8, i4), i4 && this._flip();
        }
      }
      _getTileData(t4, i3, n3, o2, r2, s2, a2, l2, c2) {
        let h2 = n3.texture, u2 = n3.position;
        s2.set(u2, 12 * r2);
        let d2 = this._calculateOverlapFraction(t4, i3), p2 = t4.positionedBounds.width * d2.x, _2 = t4.positionedBounds.height * d2.y, g2 = t4.positionedBounds.x + (0 === t4.x ? 0 : p2), m2 = t4.positionedBounds.y + (0 === t4.y ? 0 : _2), f2 = t4.positionedBounds.x + t4.positionedBounds.width - (t4.isRightMost ? 0 : p2) - g2, v2 = t4.positionedBounds.y + t4.positionedBounds.height - (t4.isBottomMost ? 0 : _2) - m2, A2 = new e7.Mat3([f2, 0, 0, 0, v2, 0, g2, m2, 1]);
        if (t4.flipped) {
          let t5 = e7.Mat3.makeTranslation(0.5, 0), i4 = e7.Mat3.makeTranslation(-0.5, 0), n4 = t5.multiply(e7.Mat3.makeScaling(-1, 1)).multiply(i4);
          A2 = A2.multiply(n4);
        }
        let b2 = o2.multiply(A2);
        c2[r2] = t4.opacity, a2[r2] = h2, l2[r2] = b2.values;
      }
      _setupRenderer() {
        let t4 = this._gl;
        t4 || e7.console.error("_setupCanvases must be called before _setupRenderer"), this._unitQuad = this._makeQuadVertexBuffer(0, 1, 0, 1), this._makeFirstPassShaderProgram(), this._makeSecondPassShaderProgram(), this._renderToTexture = t4.createTexture(), t4.activeTexture(t4.TEXTURE0), t4.bindTexture(t4.TEXTURE_2D, this._renderToTexture), t4.texImage2D(t4.TEXTURE_2D, 0, t4.RGBA, this._renderingCanvas.width, this._renderingCanvas.height, 0, t4.RGBA, t4.UNSIGNED_BYTE, null), t4.texParameteri(t4.TEXTURE_2D, t4.TEXTURE_MIN_FILTER, t4.LINEAR), t4.texParameteri(t4.TEXTURE_2D, t4.TEXTURE_WRAP_S, t4.CLAMP_TO_EDGE), t4.texParameteri(t4.TEXTURE_2D, t4.TEXTURE_WRAP_T, t4.CLAMP_TO_EDGE), this._glFrameBuffer = t4.createFramebuffer(), t4.bindFramebuffer(t4.FRAMEBUFFER, this._glFrameBuffer), t4.framebufferTexture2D(t4.FRAMEBUFFER, t4.COLOR_ATTACHMENT0, t4.TEXTURE_2D, this._renderToTexture, 0), t4.enable(t4.BLEND), t4.blendFunc(t4.ONE, t4.ONE_MINUS_SRC_ALPHA);
      }
      _makeFirstPassShaderProgram() {
        let e8 = this._glNumTextures = this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);
        const t4 = `
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;
            attribute float a_index;

            ${[...Array(e8).keys()].map((e9) => `uniform mat3 u_matrix_${e9};`).join("\n")} // create a uniform mat3 for each potential tile to draw

            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {

                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()

                ${[...Array(e8).keys()].map((e9) => `${e9 > 0 ? "else " : ""}if(int(a_index) == ${e9}) { transform_matrix = u_matrix_${e9}; }`).join("\n")}

                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
                v_image_index = a_index;
            }
            `, i3 = `
            precision mediump float;

            // our textures
            uniform sampler2D u_images[${e8}];
            // our opacities
            uniform float u_opacities[${e8}];

            // the varyings passed in from the vertex shader.
            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {
                // can't index directly with a variable, need to use a loop iterator hack
                for(int i = 0; i < ${e8}; ++i){
                    if(i == int(v_image_index)){
                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];
                    }
                }
            }
            `;
        let n3 = this._gl, o2 = this.constructor.initShaderProgram(n3, t4, i3);
        n3.useProgram(o2), this._firstPass = { shaderProgram: o2, aOutputPosition: n3.getAttribLocation(o2, "a_output_position"), aTexturePosition: n3.getAttribLocation(o2, "a_texture_position"), aIndex: n3.getAttribLocation(o2, "a_index"), uTransformMatrices: [...Array(this._glNumTextures).keys()].map((e9) => n3.getUniformLocation(o2, `u_matrix_${e9}`)), uImages: n3.getUniformLocation(o2, "u_images"), uOpacities: n3.getUniformLocation(o2, "u_opacities"), bufferOutputPosition: n3.createBuffer(), bufferTexturePosition: n3.createBuffer(), bufferIndex: n3.createBuffer() }, n3.uniform1iv(this._firstPass.uImages, [...Array(e8).keys()]);
        let r2 = new Float32Array(12 * e8);
        for (let t5 = 0; t5 < e8; ++t5) r2.set(Float32Array.from(this._unitQuad), 12 * t5);
        n3.bindBuffer(n3.ARRAY_BUFFER, this._firstPass.bufferOutputPosition), n3.bufferData(n3.ARRAY_BUFFER, r2, n3.STATIC_DRAW), n3.enableVertexAttribArray(this._firstPass.aOutputPosition), n3.bindBuffer(n3.ARRAY_BUFFER, this._firstPass.bufferTexturePosition), n3.enableVertexAttribArray(this._firstPass.aTexturePosition), n3.bindBuffer(n3.ARRAY_BUFFER, this._firstPass.bufferIndex);
        let s2 = [...Array(this._glNumTextures).keys()].map((e9) => Array(6).fill(e9)).flat();
        n3.bufferData(n3.ARRAY_BUFFER, new Float32Array(s2), n3.STATIC_DRAW), n3.enableVertexAttribArray(this._firstPass.aIndex);
      }
      _makeSecondPassShaderProgram() {
        let t4 = this._gl, i3 = this.constructor.initShaderProgram(t4, "\n            attribute vec2 a_output_position;\n            attribute vec2 a_texture_position;\n\n            uniform mat3 u_matrix;\n\n            varying vec2 v_texture_position;\n\n            void main() {\n                gl_Position = vec4(u_matrix * vec3(a_output_position, 1), 1);\n\n                v_texture_position = a_texture_position;\n            }\n            ", "\n            precision mediump float;\n\n            // our texture\n            uniform sampler2D u_image;\n\n            // the texCoords passed in from the vertex shader.\n            varying vec2 v_texture_position;\n\n            // the opacity multiplier for the image\n            uniform float u_opacity_multiplier;\n\n            void main() {\n                gl_FragColor = texture2D(u_image, v_texture_position);\n                gl_FragColor *= u_opacity_multiplier;\n            }\n            ");
        t4.useProgram(i3), this._secondPass = { shaderProgram: i3, aOutputPosition: t4.getAttribLocation(i3, "a_output_position"), aTexturePosition: t4.getAttribLocation(i3, "a_texture_position"), uMatrix: t4.getUniformLocation(i3, "u_matrix"), uImage: t4.getUniformLocation(i3, "u_image"), uOpacityMultiplier: t4.getUniformLocation(i3, "u_opacity_multiplier"), bufferOutputPosition: t4.createBuffer(), bufferTexturePosition: t4.createBuffer() }, t4.bindBuffer(t4.ARRAY_BUFFER, this._secondPass.bufferOutputPosition), t4.bufferData(t4.ARRAY_BUFFER, this._unitQuad, t4.STATIC_DRAW), t4.enableVertexAttribArray(this._secondPass.aOutputPosition), t4.bindBuffer(t4.ARRAY_BUFFER, this._secondPass.bufferTexturePosition), t4.bufferData(t4.ARRAY_BUFFER, this._unitQuad, t4.DYNAMIC_DRAW), t4.enableVertexAttribArray(this._secondPass.aTexturePosition);
        let n3 = e7.Mat3.makeScaling(2, 2).multiply(e7.Mat3.makeTranslation(-0.5, -0.5));
        t4.uniformMatrix3fv(this._secondPass.uMatrix, false, n3.values);
      }
      _resizeRenderer() {
        let e8 = this._gl, t4 = this._renderingCanvas.width, i3 = this._renderingCanvas.height;
        e8.viewport(0, 0, t4, i3), e8.deleteTexture(this._renderToTexture), this._renderToTexture = e8.createTexture(), e8.activeTexture(e8.TEXTURE0), e8.bindTexture(e8.TEXTURE_2D, this._renderToTexture), e8.texImage2D(e8.TEXTURE_2D, 0, e8.RGBA, t4, i3, 0, e8.RGBA, e8.UNSIGNED_BYTE, null), e8.texParameteri(e8.TEXTURE_2D, e8.TEXTURE_MIN_FILTER, e8.LINEAR), e8.texParameteri(e8.TEXTURE_2D, e8.TEXTURE_WRAP_S, e8.CLAMP_TO_EDGE), e8.texParameteri(e8.TEXTURE_2D, e8.TEXTURE_WRAP_T, e8.CLAMP_TO_EDGE), e8.bindFramebuffer(e8.FRAMEBUFFER, this._glFrameBuffer), e8.framebufferTexture2D(e8.FRAMEBUFFER, e8.COLOR_ATTACHMENT0, e8.TEXTURE_2D, this._renderToTexture, 0);
      }
      _setupCanvases() {
        let e8 = this;
        this._outputCanvas = this.canvas, this._outputContext = this._outputCanvas.getContext("2d"), this._renderingCanvas = document.createElement("canvas"), this._clippingCanvas = document.createElement("canvas"), this._clippingContext = this._clippingCanvas.getContext("2d"), this._renderingCanvas.width = this._clippingCanvas.width = this._outputCanvas.width, this._renderingCanvas.height = this._clippingCanvas.height = this._outputCanvas.height, this._gl = this._renderingCanvas.getContext("webgl"), this.viewer.addHandler("resize", function() {
          e8._outputCanvas !== e8.viewer.drawer.canvas && (e8._outputCanvas.style.width = e8.viewer.drawer.canvas.clientWidth + "px", e8._outputCanvas.style.height = e8.viewer.drawer.canvas.clientHeight + "px");
          let t4 = e8._calculateCanvasSize();
          e8._outputCanvas.width === t4.x && e8._outputCanvas.height === t4.y || (e8._outputCanvas.width = t4.x, e8._outputCanvas.height = t4.y), e8._renderingCanvas.style.width = e8._outputCanvas.clientWidth + "px", e8._renderingCanvas.style.height = e8._outputCanvas.clientHeight + "px", e8._renderingCanvas.width = e8._clippingCanvas.width = e8._outputCanvas.width, e8._renderingCanvas.height = e8._clippingCanvas.height = e8._outputCanvas.height, e8._resizeRenderer();
        });
      }
      _makeQuadVertexBuffer(e8, t4, i3, n3) {
        return new Float32Array([e8, n3, t4, n3, e8, i3, e8, i3, t4, n3, t4, i3]);
      }
      _tileReadyHandler(t4) {
        let i3 = t4.tile, n3 = t4.tiledImage;
        if (n3.isTainted()) return;
        let o2 = i3.getCanvasContext(), r2 = o2 && o2.canvas;
        if (r2 && !e7.isCanvasTainted(r2)) {
          if (!this._TextureMap.get(r2)) {
            let e8, t5, s2, a2 = this._gl, l2 = a2.createTexture(), c2 = n3.source.tileOverlap;
            if (i3.sourceBounds ? (t5 = Math.min(i3.sourceBounds.width, r2.width) / r2.width, s2 = Math.min(i3.sourceBounds.height, r2.height) / r2.height) : (t5 = 1, s2 = 1), c2 > 0) {
              let o3 = this._calculateOverlapFraction(i3, n3), r3 = (0 === i3.x ? 0 : o3.x) * t5, a3 = (0 === i3.y ? 0 : o3.y) * s2, l3 = (i3.isRightMost ? 1 : 1 - o3.x) * t5, c3 = (i3.isBottomMost ? 1 : 1 - o3.y) * s2;
              e8 = this._makeQuadVertexBuffer(r3, l3, a3, c3);
            } else e8 = 1 === t5 && 1 === s2 ? this._unitQuad : this._makeQuadVertexBuffer(0, t5, 0, s2);
            let h2 = { texture: l2, position: e8 };
            this._TextureMap.set(r2, h2), a2.activeTexture(a2.TEXTURE0), a2.bindTexture(a2.TEXTURE_2D, l2), a2.texParameteri(a2.TEXTURE_2D, a2.TEXTURE_WRAP_S, a2.CLAMP_TO_EDGE), a2.texParameteri(a2.TEXTURE_2D, a2.TEXTURE_WRAP_T, a2.CLAMP_TO_EDGE), a2.texParameteri(a2.TEXTURE_2D, a2.TEXTURE_MIN_FILTER, a2.LINEAR), a2.texParameteri(a2.TEXTURE_2D, a2.TEXTURE_MAG_FILTER, a2.LINEAR), this._uploadImageData(o2);
          }
        } else {
          n3.isTainted() || (n3.setTainted(true), e7.console.warn("WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"), this._raiseDrawerErrorEvent(n3, "Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage."));
        }
      }
      _calculateOverlapFraction(e8, t4) {
        let i3 = t4.source.tileOverlap, n3 = e8.sourceBounds.width, o2 = e8.sourceBounds.height;
        return { x: i3 / (n3 + ((0 === e8.x ? 0 : i3) + (e8.isRightMost ? 0 : i3))), y: i3 / (o2 + ((0 === e8.y ? 0 : i3) + (e8.isBottomMost ? 0 : i3))) };
      }
      _uploadImageData(t4) {
        let i3 = this._gl, n3 = t4.canvas;
        try {
          if (!n3) throw t4;
          i3.texImage2D(i3.TEXTURE_2D, 0, i3.RGBA, i3.RGBA, i3.UNSIGNED_BYTE, n3);
        } catch (t5) {
          e7.console.error("Error uploading image data to WebGL", t5);
        }
      }
      _imageUnloadedHandler(e8) {
        let t4 = e8.context2D.canvas;
        this._cleanupImageData(t4);
      }
      _cleanupImageData(e8) {
        let t4 = this._TextureMap.get(e8);
        this._TextureMap.delete(e8), t4 && this._gl.deleteTexture(t4.texture);
      }
      _setClip() {
      }
      _renderToClippingCanvas(t4) {
        if (this._clippingContext.clearRect(0, 0, this._clippingCanvas.width, this._clippingCanvas.height), this._clippingContext.save(), this.viewer.viewport.getFlip()) {
          const t5 = new e7.Point(this.canvas.width / 2, this.canvas.height / 2);
          this._clippingContext.translate(t5.x, 0), this._clippingContext.scale(-1, 1), this._clippingContext.translate(-t5.x, 0);
        }
        if (t4._clip) {
          let e8 = [{ x: t4._clip.x, y: t4._clip.y }, { x: t4._clip.x + t4._clip.width, y: t4._clip.y }, { x: t4._clip.x + t4._clip.width, y: t4._clip.y + t4._clip.height }, { x: t4._clip.x, y: t4._clip.y + t4._clip.height }].map((e9) => {
            let i3 = t4.imageToViewportCoordinates(e9.x, e9.y, true).rotate(this.viewer.viewport.getRotation(true), this.viewer.viewport.getCenter(true));
            return this.viewportCoordToDrawerCoord(i3);
          });
          this._clippingContext.beginPath(), e8.forEach((e9, t5) => {
            this._clippingContext[0 === t5 ? "moveTo" : "lineTo"](e9.x, e9.y);
          }), this._clippingContext.clip(), this._setClip();
        }
        if (t4._croppingPolygons) {
          let e8 = t4._croppingPolygons.map((e9) => e9.map((e10) => {
            let i3 = t4.imageToViewportCoordinates(e10.x, e10.y, true).rotate(this.viewer.viewport.getRotation(true), this.viewer.viewport.getCenter(true));
            return this.viewportCoordToDrawerCoord(i3);
          }));
          this._clippingContext.beginPath(), e8.forEach((e9) => {
            e9.forEach((e10, t5) => {
              this._clippingContext[0 === t5 ? "moveTo" : "lineTo"](e10.x, e10.y);
            });
          }), this._clippingContext.clip();
        }
        if (this.viewer.viewport.getFlip()) {
          const t5 = new e7.Point(this.canvas.width / 2, this.canvas.height / 2);
          this._clippingContext.translate(t5.x, 0), this._clippingContext.scale(-1, 1), this._clippingContext.translate(-t5.x, 0);
        }
        this._clippingContext.drawImage(this._renderingCanvas, 0, 0), this._clippingContext.restore();
      }
      _setRotations(e8) {
        var t4 = false;
        this.viewport.getRotation(true) % 360 != 0 && (this._offsetForRotation({ degrees: this.viewport.getRotation(true), saveContext: t4 }), t4 = false), e8.getRotation(true) % 360 != 0 && this._offsetForRotation({ degrees: e8.getRotation(true), point: this.viewport.pixelFromPointNoRotate(e8._getRotationPoint(true), true), saveContext: t4 });
      }
      _offsetForRotation(t4) {
        var i3 = t4.point ? t4.point.times(e7.pixelDensityRatio) : this._getCanvasCenter(), n3 = this._outputContext;
        n3.save(), n3.translate(i3.x, i3.y), n3.rotate(Math.PI / 180 * t4.degrees), n3.translate(-i3.x, -i3.y);
      }
      _flip(t4) {
        var i3 = (t4 = t4 || {}).point ? t4.point.times(e7.pixelDensityRatio) : this._getCanvasCenter(), n3 = this._outputContext;
        n3.translate(i3.x, 0), n3.scale(-1, 1), n3.translate(-i3.x, 0);
      }
      _drawDebugInfo(t4, i3, n3) {
        for (var o2 = t4.length - 1; o2 >= 0; o2--) {
          var r2 = t4[o2].tile;
          try {
            this._drawDebugInfoOnTile(r2, t4.length, o2, i3, n3);
          } catch (t5) {
            e7.console.error(t5);
          }
        }
      }
      _drawDebugInfoOnTile(t4, i3, n3, o2, r2) {
        var s2 = this.viewer.world.getIndexOfItem(o2) % this.debugGridColor.length, a2 = this.context;
        a2.save(), a2.lineWidth = 2 * e7.pixelDensityRatio, a2.font = "small-caps bold " + 13 * e7.pixelDensityRatio + "px arial", a2.strokeStyle = this.debugGridColor[s2], a2.fillStyle = this.debugGridColor[s2], this._setRotations(o2), r2 && this._flip({ point: t4.position.plus(t4.size.divide(2)) }), a2.strokeRect(t4.position.x * e7.pixelDensityRatio, t4.position.y * e7.pixelDensityRatio, t4.size.x * e7.pixelDensityRatio, t4.size.y * e7.pixelDensityRatio);
        var l2 = (t4.position.x + t4.size.x / 2) * e7.pixelDensityRatio, c2 = (t4.position.y + t4.size.y / 2) * e7.pixelDensityRatio;
        a2.translate(l2, c2);
        const h2 = this.viewport.getRotation(true);
        a2.rotate(Math.PI / 180 * -h2), a2.translate(-l2, -c2), 0 === t4.x && 0 === t4.y && (a2.fillText("Zoom: " + this.viewport.getZoom(), t4.position.x * e7.pixelDensityRatio, (t4.position.y - 30) * e7.pixelDensityRatio), a2.fillText("Pan: " + this.viewport.getBounds().toString(), t4.position.x * e7.pixelDensityRatio, (t4.position.y - 20) * e7.pixelDensityRatio)), a2.fillText("Level: " + t4.level, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 20) * e7.pixelDensityRatio), a2.fillText("Column: " + t4.x, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 30) * e7.pixelDensityRatio), a2.fillText("Row: " + t4.y, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 40) * e7.pixelDensityRatio), a2.fillText("Order: " + n3 + " of " + i3, (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 50) * e7.pixelDensityRatio), a2.fillText("Size: " + t4.size.toString(), (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 60) * e7.pixelDensityRatio), a2.fillText("Position: " + t4.position.toString(), (t4.position.x + 10) * e7.pixelDensityRatio, (t4.position.y + 70) * e7.pixelDensityRatio), this.viewport.getRotation(true) % 360 != 0 && this._restoreRotationChanges(), o2.getRotation(true) % 360 != 0 && this._restoreRotationChanges(), a2.restore();
      }
      _drawPlaceholder(e8) {
        const t4 = e8.getBounds(true), i3 = this.viewportToDrawerRectangle(e8.getBounds(true)), n3 = this._outputContext;
        let o2;
        o2 = "function" == typeof e8.placeholderFillStyle ? e8.placeholderFillStyle(e8, n3) : e8.placeholderFillStyle, this._offsetForRotation({ degrees: this.viewer.viewport.getRotation(true) }), n3.fillStyle = o2, n3.translate(i3.x, i3.y), n3.rotate(Math.PI / 180 * t4.degrees), n3.translate(-i3.x, -i3.y), n3.fillRect(i3.x, i3.y, i3.width, i3.height), this._restoreRotationChanges();
      }
      _getCanvasCenter() {
        return new e7.Point(this.canvas.width / 2, this.canvas.height / 2);
      }
      _restoreRotationChanges() {
        this._outputContext.restore();
      }
      static initShaderProgram(t4, i3, n3) {
        function o2(t5, i4, n4) {
          const o3 = t5.createShader(i4);
          return t5.shaderSource(o3, n4), t5.compileShader(o3), t5.getShaderParameter(o3, t5.COMPILE_STATUS) ? o3 : (e7.console.error(`An error occurred compiling the shaders: ${t5.getShaderInfoLog(o3)}`), t5.deleteShader(o3), null);
        }
        const r2 = o2(t4, t4.VERTEX_SHADER, i3), s2 = o2(t4, t4.FRAGMENT_SHADER, n3), a2 = t4.createProgram();
        return t4.attachShader(a2, r2), t4.attachShader(a2, s2), t4.linkProgram(a2), t4.getProgramParameter(a2, t4.LINK_STATUS) ? a2 : (e7.console.error(`Unable to initialize the shader program: ${t4.getProgramInfoLog(a2)}`), null);
      }
    };
  }(t2), function(e7) {
    e7.Viewport = function(t3) {
      var i3 = arguments;
      i3.length && i3[0] instanceof e7.Point && (t3 = { containerSize: i3[0], contentSize: i3[1], config: i3[2] }), t3.config && (e7.extend(true, t3, t3.config), delete t3.config), this._margins = e7.extend({ left: 0, top: 0, right: 0, bottom: 0 }, t3.margins || {}), delete t3.margins, t3.initialDegrees = t3.degrees, delete t3.degrees, e7.extend(true, this, { containerSize: null, contentSize: null, zoomPoint: null, rotationPivot: null, viewer: null, springStiffness: e7.DEFAULT_SETTINGS.springStiffness, animationTime: e7.DEFAULT_SETTINGS.animationTime, minZoomImageRatio: e7.DEFAULT_SETTINGS.minZoomImageRatio, maxZoomPixelRatio: e7.DEFAULT_SETTINGS.maxZoomPixelRatio, visibilityRatio: e7.DEFAULT_SETTINGS.visibilityRatio, wrapHorizontal: e7.DEFAULT_SETTINGS.wrapHorizontal, wrapVertical: e7.DEFAULT_SETTINGS.wrapVertical, defaultZoomLevel: e7.DEFAULT_SETTINGS.defaultZoomLevel, minZoomLevel: e7.DEFAULT_SETTINGS.minZoomLevel, maxZoomLevel: e7.DEFAULT_SETTINGS.maxZoomLevel, initialDegrees: e7.DEFAULT_SETTINGS.degrees, flipped: e7.DEFAULT_SETTINGS.flipped, homeFillsViewer: e7.DEFAULT_SETTINGS.homeFillsViewer, silenceMultiImageWarnings: e7.DEFAULT_SETTINGS.silenceMultiImageWarnings }, t3), this._updateContainerInnerSize(), this.centerSpringX = new e7.Spring({ initial: 0, springStiffness: this.springStiffness, animationTime: this.animationTime }), this.centerSpringY = new e7.Spring({ initial: 0, springStiffness: this.springStiffness, animationTime: this.animationTime }), this.zoomSpring = new e7.Spring({ exponential: true, initial: 1, springStiffness: this.springStiffness, animationTime: this.animationTime }), this.degreesSpring = new e7.Spring({ initial: t3.initialDegrees, springStiffness: this.springStiffness, animationTime: this.animationTime }), this._oldCenterX = this.centerSpringX.current.value, this._oldCenterY = this.centerSpringY.current.value, this._oldZoom = this.zoomSpring.current.value, this._oldDegrees = this.degreesSpring.current.value, this._setContentBounds(new e7.Rect(0, 0, 1, 1), 1), this.goHome(true), this.update();
    }, e7.Viewport.prototype = { get degrees() {
      return e7.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."), this.getRotation();
    }, set degrees(t3) {
      e7.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."), this.rotateTo(t3);
    }, resetContentSize: function(t3) {
      return e7.console.assert(t3, "[Viewport.resetContentSize] contentSize is required"), e7.console.assert(t3 instanceof e7.Point, "[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"), e7.console.assert(t3.x > 0, "[Viewport.resetContentSize] contentSize.x must be greater than 0"), e7.console.assert(t3.y > 0, "[Viewport.resetContentSize] contentSize.y must be greater than 0"), this._setContentBounds(new e7.Rect(0, 0, 1, t3.y / t3.x), t3.x), this;
    }, setHomeBounds: function(t3, i3) {
      e7.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."), this._setContentBounds(t3, i3);
    }, _setContentBounds: function(t3, i3) {
      e7.console.assert(t3, "[Viewport._setContentBounds] bounds is required"), e7.console.assert(t3 instanceof e7.Rect, "[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"), e7.console.assert(t3.width > 0, "[Viewport._setContentBounds] bounds.width must be greater than 0"), e7.console.assert(t3.height > 0, "[Viewport._setContentBounds] bounds.height must be greater than 0"), this._contentBoundsNoRotate = t3.clone(), this._contentSizeNoRotate = this._contentBoundsNoRotate.getSize().times(i3), this._contentBounds = t3.rotate(this.getRotation()).getBoundingBox(), this._contentSize = this._contentBounds.getSize().times(i3), this._contentAspectRatio = this._contentSize.x / this._contentSize.y, this.viewer && this.viewer.raiseEvent("reset-size", { contentSize: this._contentSizeNoRotate.clone(), contentFactor: i3, homeBounds: this._contentBoundsNoRotate.clone(), contentBounds: this._contentBounds.clone() });
    }, getHomeZoom: function() {
      if (this.defaultZoomLevel) return this.defaultZoomLevel;
      var e8 = this._contentAspectRatio / this.getAspectRatio();
      return (this.homeFillsViewer ? e8 >= 1 ? e8 : 1 : e8 >= 1 ? 1 : e8) / this._contentBounds.width;
    }, getHomeBounds: function() {
      return this.getHomeBoundsNoRotate().rotate(-this.getRotation());
    }, getHomeBoundsNoRotate: function() {
      var t3 = this._contentBounds.getCenter(), i3 = 1 / this.getHomeZoom(), n3 = i3 / this.getAspectRatio();
      return new e7.Rect(t3.x - i3 / 2, t3.y - n3 / 2, i3, n3);
    }, goHome: function(e8) {
      return this.viewer && this.viewer.raiseEvent("home", { immediately: e8 }), this.fitBounds(this.getHomeBounds(), e8);
    }, getMinZoom: function() {
      var e8 = this.getHomeZoom();
      return this.minZoomLevel ? this.minZoomLevel : this.minZoomImageRatio * e8;
    }, getMaxZoom: function() {
      var e8 = this.maxZoomLevel;
      return e8 || (e8 = this._contentSize.x * this.maxZoomPixelRatio / this._containerInnerSize.x, e8 /= this._contentBounds.width), Math.max(e8, this.getHomeZoom());
    }, getAspectRatio: function() {
      return this._containerInnerSize.x / this._containerInnerSize.y;
    }, getContainerSize: function() {
      return new e7.Point(this.containerSize.x, this.containerSize.y);
    }, getMargins: function() {
      return e7.extend({}, this._margins);
    }, setMargins: function(t3) {
      e7.console.assert("object" === e7.type(t3), "[Viewport.setMargins] margins must be an object"), this._margins = e7.extend({ left: 0, top: 0, right: 0, bottom: 0 }, t3), this._updateContainerInnerSize(), this.viewer && this.viewer.forceRedraw();
    }, getBounds: function(e8) {
      return this.getBoundsNoRotate(e8).rotate(-this.getRotation(e8));
    }, getBoundsNoRotate: function(t3) {
      var i3 = this.getCenter(t3), n3 = 1 / this.getZoom(t3), o2 = n3 / this.getAspectRatio();
      return new e7.Rect(i3.x - n3 / 2, i3.y - o2 / 2, n3, o2);
    }, getBoundsWithMargins: function(e8) {
      return this.getBoundsNoRotateWithMargins(e8).rotate(-this.getRotation(e8), this.getCenter(e8));
    }, getBoundsNoRotateWithMargins: function(e8) {
      var t3 = this.getBoundsNoRotate(e8), i3 = this._containerInnerSize.x * this.getZoom(e8);
      return t3.x -= this._margins.left / i3, t3.y -= this._margins.top / i3, t3.width += (this._margins.left + this._margins.right) / i3, t3.height += (this._margins.top + this._margins.bottom) / i3, t3;
    }, getCenter: function(t3) {
      var i3, n3, o2, r2, s2, a2, l2 = new e7.Point(this.centerSpringX.current.value, this.centerSpringY.current.value), c2 = new e7.Point(this.centerSpringX.target.value, this.centerSpringY.target.value);
      return t3 ? l2 : this.zoomPoint ? (i3 = this.pixelFromPoint(this.zoomPoint, true), r2 = (o2 = 1 / (n3 = this.getZoom())) / this.getAspectRatio(), s2 = new e7.Rect(l2.x - o2 / 2, l2.y - r2 / 2, o2, r2), a2 = this._pixelFromPoint(this.zoomPoint, s2).minus(i3).rotate(-this.getRotation(true)).divide(this._containerInnerSize.x * n3), c2.plus(a2)) : c2;
    }, getZoom: function(e8) {
      return e8 ? this.zoomSpring.current.value : this.zoomSpring.target.value;
    }, _applyZoomConstraints: function(e8) {
      return Math.max(Math.min(e8, this.getMaxZoom()), this.getMinZoom());
    }, _applyBoundaryConstraints: function(e8) {
      var t3 = this.viewportToViewerElementRectangle(e8).getBoundingBox(), i3 = this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(), n3 = false, o2 = false;
      if (this.wrapHorizontal) ;
      else {
        var r2, s2, a2, l2 = t3.x + t3.width, c2 = i3.x + i3.width;
        r2 = t3.width > i3.width ? this.visibilityRatio * i3.width : this.visibilityRatio * t3.width, s2 = i3.x - l2 + r2, a2 = c2 - t3.x - r2, r2 > i3.width ? (t3.x += (s2 + a2) / 2, n3 = true) : a2 < 0 ? (t3.x += a2, n3 = true) : s2 > 0 && (t3.x += s2, n3 = true);
      }
      if (this.wrapVertical) ;
      else {
        var h2, u2, d2, p2 = t3.y + t3.height, _2 = i3.y + i3.height;
        h2 = t3.height > i3.height ? this.visibilityRatio * i3.height : this.visibilityRatio * t3.height, u2 = i3.y - p2 + h2, d2 = _2 - t3.y - h2, h2 > i3.height ? (t3.y += (u2 + d2) / 2, o2 = true) : d2 < 0 ? (t3.y += d2, o2 = true) : u2 > 0 && (t3.y += u2, o2 = true);
      }
      var g2 = n3 || o2, m2 = g2 ? this.viewerElementToViewportRectangle(t3) : e8.clone();
      return m2.xConstrained = n3, m2.yConstrained = o2, m2.constraintApplied = g2, m2;
    }, _raiseConstraintsEvent: function(e8) {
      this.viewer && this.viewer.raiseEvent("constrain", { immediately: e8 });
    }, applyConstraints: function(e8) {
      var t3 = this.getZoom(), i3 = this._applyZoomConstraints(t3);
      t3 !== i3 && this.zoomTo(i3, this.zoomPoint, e8);
      var n3 = this.getConstrainedBounds(false);
      return n3.constraintApplied && (this.fitBounds(n3, e8), this._raiseConstraintsEvent(e8)), this;
    }, ensureVisible: function(e8) {
      return this.applyConstraints(e8);
    }, _fitBounds: function(t3, i3) {
      var n3 = (i3 = i3 || {}).immediately || false, o2 = i3.constraints || false, r2 = this.getAspectRatio(), s2 = t3.getCenter(), a2 = new e7.Rect(t3.x, t3.y, t3.width, t3.height, t3.degrees + this.getRotation()).getBoundingBox();
      a2.getAspectRatio() >= r2 ? a2.height = a2.width / r2 : a2.width = a2.height * r2, a2.x = s2.x - a2.width / 2, a2.y = s2.y - a2.height / 2;
      var l2 = 1 / a2.width;
      if (n3) return this.panTo(s2, true), this.zoomTo(l2, null, true), o2 && this.applyConstraints(true), this;
      var c2 = this.getCenter(true), h2 = this.getZoom(true);
      this.panTo(c2, true), this.zoomTo(h2, null, true);
      var u2 = this.getBounds(), d2 = this.getZoom();
      if (0 === d2 || Math.abs(l2 / d2 - 1) < 1e-8) return this.zoomTo(l2, null, true), this.panTo(s2, n3), o2 && this.applyConstraints(false), this;
      if (o2) {
        this.panTo(s2, false), l2 = this._applyZoomConstraints(l2), this.zoomTo(l2, null, false);
        var p2 = this.getConstrainedBounds();
        this.panTo(c2, true), this.zoomTo(h2, null, true), this.fitBounds(p2);
      } else {
        var _2 = a2.rotate(-this.getRotation()).getTopLeft().times(l2).minus(u2.getTopLeft().times(d2)).divide(l2 - d2);
        this.zoomTo(l2, _2, n3);
      }
      return this;
    }, fitBounds: function(e8, t3) {
      return this._fitBounds(e8, { immediately: t3, constraints: false });
    }, fitBoundsWithConstraints: function(e8, t3) {
      return this._fitBounds(e8, { immediately: t3, constraints: true });
    }, fitVertically: function(t3) {
      var i3 = new e7.Rect(this._contentBounds.x + this._contentBounds.width / 2, this._contentBounds.y, 0, this._contentBounds.height);
      return this.fitBounds(i3, t3);
    }, fitHorizontally: function(t3) {
      var i3 = new e7.Rect(this._contentBounds.x, this._contentBounds.y + this._contentBounds.height / 2, this._contentBounds.width, 0);
      return this.fitBounds(i3, t3);
    }, getConstrainedBounds: function(e8) {
      var t3;
      return t3 = this.getBounds(e8), this._applyBoundaryConstraints(t3);
    }, panBy: function(t3, i3) {
      var n3 = new e7.Point(this.centerSpringX.target.value, this.centerSpringY.target.value);
      return this.panTo(n3.plus(t3), i3);
    }, panTo: function(e8, t3) {
      return t3 ? (this.centerSpringX.resetTo(e8.x), this.centerSpringY.resetTo(e8.y)) : (this.centerSpringX.springTo(e8.x), this.centerSpringY.springTo(e8.y)), this.viewer && this.viewer.raiseEvent("pan", { center: e8, immediately: t3 }), this;
    }, zoomBy: function(e8, t3, i3) {
      return this.zoomTo(this.zoomSpring.target.value * e8, t3, i3);
    }, zoomTo: function(t3, i3, n3) {
      var o2 = this;
      return this.zoomPoint = i3 instanceof e7.Point && !isNaN(i3.x) && !isNaN(i3.y) ? i3 : null, n3 ? this._adjustCenterSpringsForZoomPoint(function() {
        o2.zoomSpring.resetTo(t3);
      }) : this.zoomSpring.springTo(t3), this.viewer && this.viewer.raiseEvent("zoom", { zoom: t3, refPoint: i3, immediately: n3 }), this;
    }, setRotation: function(e8, t3) {
      return this.rotateTo(e8, null, t3);
    }, getRotation: function(e8) {
      return e8 ? this.degreesSpring.current.value : this.degreesSpring.target.value;
    }, setRotationWithPivot: function(e8, t3, i3) {
      return this.rotateTo(e8, t3, i3);
    }, rotateTo: function(t3, i3, n3) {
      if (!this.viewer || !this.viewer.drawer.canRotate()) return this;
      if (this.degreesSpring.target.value === t3 && this.degreesSpring.isAtTargetValue()) return this;
      if (this.rotationPivot = i3 instanceof e7.Point && !isNaN(i3.x) && !isNaN(i3.y) ? i3 : null, n3) if (this.rotationPivot) {
        if (!(t3 - this._oldDegrees)) return this.rotationPivot = null, this;
        this._rotateAboutPivot(t3);
      } else this.degreesSpring.resetTo(t3);
      else {
        var o2 = e7.positiveModulo(this.degreesSpring.current.value, 360), r2 = e7.positiveModulo(t3, 360), s2 = r2 - o2;
        s2 > 180 ? r2 -= 360 : s2 < -180 && (r2 += 360);
        var a2 = o2 - r2;
        this.degreesSpring.resetTo(t3 + a2), this.degreesSpring.springTo(t3);
      }
      return this._setContentBounds(this.viewer.world.getHomeBounds(), this.viewer.world.getContentFactor()), this.viewer.forceRedraw(), this.viewer.raiseEvent("rotate", { degrees: t3, immediately: !!n3, pivot: this.rotationPivot || this.getCenter() }), this;
    }, rotateBy: function(e8, t3, i3) {
      return this.rotateTo(this.degreesSpring.target.value + e8, t3, i3);
    }, resize: function(e8, t3) {
      var i3, n3 = this.getBoundsNoRotate(), o2 = n3;
      this.containerSize.x = e8.x, this.containerSize.y = e8.y, this._updateContainerInnerSize(), t3 && (i3 = e8.x / this.containerSize.x, o2.width = n3.width * i3, o2.height = o2.width / this.getAspectRatio()), this.viewer && this.viewer.raiseEvent("resize", { newContainerSize: e8, maintain: t3 });
      var r2 = this.fitBounds(o2, true);
      return this.viewer && this.viewer.raiseEvent("after-resize", { newContainerSize: e8, maintain: t3 }), r2;
    }, _updateContainerInnerSize: function() {
      this._containerInnerSize = new e7.Point(Math.max(1, this.containerSize.x - (this._margins.left + this._margins.right)), Math.max(1, this.containerSize.y - (this._margins.top + this._margins.bottom)));
    }, update: function() {
      var e8 = this;
      this._adjustCenterSpringsForZoomPoint(function() {
        e8.zoomSpring.update();
      }), this.degreesSpring.isAtTargetValue() && (this.rotationPivot = null), this.centerSpringX.update(), this.centerSpringY.update(), this.rotationPivot ? this._rotateAboutPivot(true) : this.degreesSpring.update();
      var t3 = this.centerSpringX.current.value !== this._oldCenterX || this.centerSpringY.current.value !== this._oldCenterY || this.zoomSpring.current.value !== this._oldZoom || this.degreesSpring.current.value !== this._oldDegrees;
      return this._oldCenterX = this.centerSpringX.current.value, this._oldCenterY = this.centerSpringY.current.value, this._oldZoom = this.zoomSpring.current.value, this._oldDegrees = this.degreesSpring.current.value, t3 || !this.zoomSpring.isAtTargetValue() || !this.centerSpringX.isAtTargetValue() || !this.centerSpringY.isAtTargetValue() || !this.degreesSpring.isAtTargetValue();
    }, _rotateAboutPivot: function(e8) {
      var t3 = true === e8, i3 = this.rotationPivot.minus(this.getCenter());
      this.centerSpringX.shiftBy(i3.x), this.centerSpringY.shiftBy(i3.y), t3 ? this.degreesSpring.update() : this.degreesSpring.resetTo(e8);
      var n3 = this.degreesSpring.current.value - this._oldDegrees, o2 = i3.rotate(-1 * n3).times(-1);
      this.centerSpringX.shiftBy(o2.x), this.centerSpringY.shiftBy(o2.y);
    }, _adjustCenterSpringsForZoomPoint: function(e8) {
      if (this.zoomPoint) {
        var t3 = this.pixelFromPoint(this.zoomPoint, true);
        e8();
        var i3 = this.pixelFromPoint(this.zoomPoint, true).minus(t3), n3 = this.deltaPointsFromPixels(i3, true);
        this.centerSpringX.shiftBy(n3.x), this.centerSpringY.shiftBy(n3.y), this.zoomSpring.isAtTargetValue() && (this.zoomPoint = null);
      } else e8();
    }, deltaPixelsFromPointsNoRotate: function(e8, t3) {
      return e8.times(this._containerInnerSize.x * this.getZoom(t3));
    }, deltaPixelsFromPoints: function(e8, t3) {
      return this.deltaPixelsFromPointsNoRotate(e8.rotate(this.getRotation(t3)), t3);
    }, deltaPointsFromPixelsNoRotate: function(e8, t3) {
      return e8.divide(this._containerInnerSize.x * this.getZoom(t3));
    }, deltaPointsFromPixels: function(e8, t3) {
      return this.deltaPointsFromPixelsNoRotate(e8, t3).rotate(-this.getRotation(t3));
    }, pixelFromPointNoRotate: function(e8, t3) {
      return this._pixelFromPointNoRotate(e8, this.getBoundsNoRotate(t3));
    }, pixelFromPoint: function(e8, t3) {
      return this._pixelFromPoint(e8, this.getBoundsNoRotate(t3));
    }, _pixelFromPointNoRotate: function(t3, i3) {
      return t3.minus(i3.getTopLeft()).times(this._containerInnerSize.x / i3.width).plus(new e7.Point(this._margins.left, this._margins.top));
    }, _pixelFromPoint: function(e8, t3) {
      return this._pixelFromPointNoRotate(e8.rotate(this.getRotation(true), this.getCenter(true)), t3);
    }, pointFromPixelNoRotate: function(t3, i3) {
      var n3 = this.getBoundsNoRotate(i3);
      return t3.minus(new e7.Point(this._margins.left, this._margins.top)).divide(this._containerInnerSize.x / n3.width).plus(n3.getTopLeft());
    }, pointFromPixel: function(e8, t3) {
      return this.pointFromPixelNoRotate(e8, t3).rotate(-this.getRotation(t3), this.getCenter(t3));
    }, _viewportToImageDelta: function(t3, i3) {
      var n3 = this._contentBoundsNoRotate.width;
      return new e7.Point(t3 * this._contentSizeNoRotate.x / n3, i3 * this._contentSizeNoRotate.x / n3);
    }, viewportToImageCoordinates: function(t3, i3) {
      if (t3 instanceof e7.Point) return this.viewportToImageCoordinates(t3.x, t3.y);
      if (this.viewer) {
        var n3 = this.viewer.world.getItemCount();
        if (n3 > 1) this.silenceMultiImageWarnings || e7.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");
        else if (1 === n3) {
          return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t3, i3, true);
        }
      }
      return this._viewportToImageDelta(t3 - this._contentBoundsNoRotate.x, i3 - this._contentBoundsNoRotate.y);
    }, _imageToViewportDelta: function(t3, i3) {
      var n3 = this._contentBoundsNoRotate.width;
      return new e7.Point(t3 / this._contentSizeNoRotate.x * n3, i3 / this._contentSizeNoRotate.x * n3);
    }, imageToViewportCoordinates: function(t3, i3) {
      if (t3 instanceof e7.Point) return this.imageToViewportCoordinates(t3.x, t3.y);
      if (this.viewer) {
        var n3 = this.viewer.world.getItemCount();
        if (n3 > 1) this.silenceMultiImageWarnings || e7.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");
        else if (1 === n3) {
          return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t3, i3, true);
        }
      }
      var o2 = this._imageToViewportDelta(t3, i3);
      return o2.x += this._contentBoundsNoRotate.x, o2.y += this._contentBoundsNoRotate.y, o2;
    }, imageToViewportRectangle: function(t3, i3, n3, o2) {
      var r2 = t3;
      if (r2 instanceof e7.Rect || (r2 = new e7.Rect(t3, i3, n3, o2)), this.viewer) {
        var s2 = this.viewer.world.getItemCount();
        if (s2 > 1) this.silenceMultiImageWarnings || e7.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");
        else if (1 === s2) {
          return this.viewer.world.getItemAt(0).imageToViewportRectangle(t3, i3, n3, o2, true);
        }
      }
      var a2 = this.imageToViewportCoordinates(r2.x, r2.y), l2 = this._imageToViewportDelta(r2.width, r2.height);
      return new e7.Rect(a2.x, a2.y, l2.x, l2.y, r2.degrees);
    }, viewportToImageRectangle: function(t3, i3, n3, o2) {
      var r2 = t3;
      if (r2 instanceof e7.Rect || (r2 = new e7.Rect(t3, i3, n3, o2)), this.viewer) {
        var s2 = this.viewer.world.getItemCount();
        if (s2 > 1) this.silenceMultiImageWarnings || e7.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");
        else if (1 === s2) {
          return this.viewer.world.getItemAt(0).viewportToImageRectangle(t3, i3, n3, o2, true);
        }
      }
      var a2 = this.viewportToImageCoordinates(r2.x, r2.y), l2 = this._viewportToImageDelta(r2.width, r2.height);
      return new e7.Rect(a2.x, a2.y, l2.x, l2.y, r2.degrees);
    }, viewerElementToImageCoordinates: function(e8) {
      var t3 = this.pointFromPixel(e8, true);
      return this.viewportToImageCoordinates(t3);
    }, imageToViewerElementCoordinates: function(e8) {
      var t3 = this.imageToViewportCoordinates(e8);
      return this.pixelFromPoint(t3, true);
    }, windowToImageCoordinates: function(t3) {
      e7.console.assert(this.viewer, "[Viewport.windowToImageCoordinates] the viewport must have a viewer.");
      var i3 = t3.minus(e7.getElementPosition(this.viewer.element));
      return this.viewerElementToImageCoordinates(i3);
    }, imageToWindowCoordinates: function(t3) {
      return e7.console.assert(this.viewer, "[Viewport.imageToWindowCoordinates] the viewport must have a viewer."), this.imageToViewerElementCoordinates(t3).plus(e7.getElementPosition(this.viewer.element));
    }, viewerElementToViewportCoordinates: function(e8) {
      return this.pointFromPixel(e8, true);
    }, viewportToViewerElementCoordinates: function(e8) {
      return this.pixelFromPoint(e8, true);
    }, viewerElementToViewportRectangle: function(t3) {
      return e7.Rect.fromSummits(this.pointFromPixel(t3.getTopLeft(), true), this.pointFromPixel(t3.getTopRight(), true), this.pointFromPixel(t3.getBottomLeft(), true));
    }, viewportToViewerElementRectangle: function(t3) {
      return e7.Rect.fromSummits(this.pixelFromPoint(t3.getTopLeft(), true), this.pixelFromPoint(t3.getTopRight(), true), this.pixelFromPoint(t3.getBottomLeft(), true));
    }, windowToViewportCoordinates: function(t3) {
      e7.console.assert(this.viewer, "[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");
      var i3 = t3.minus(e7.getElementPosition(this.viewer.element));
      return this.viewerElementToViewportCoordinates(i3);
    }, viewportToWindowCoordinates: function(t3) {
      return e7.console.assert(this.viewer, "[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."), this.viewportToViewerElementCoordinates(t3).plus(e7.getElementPosition(this.viewer.element));
    }, viewportToImageZoom: function(t3) {
      if (this.viewer) {
        var i3 = this.viewer.world.getItemCount();
        if (i3 > 1) this.silenceMultiImageWarnings || e7.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");
        else if (1 === i3) {
          return this.viewer.world.getItemAt(0).viewportToImageZoom(t3);
        }
      }
      var n3 = this._contentSizeNoRotate.x;
      return t3 * (this._containerInnerSize.x / n3 * this._contentBoundsNoRotate.width);
    }, imageToViewportZoom: function(t3) {
      if (this.viewer) {
        var i3 = this.viewer.world.getItemCount();
        if (i3 > 1) this.silenceMultiImageWarnings || e7.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");
        else if (1 === i3) {
          return this.viewer.world.getItemAt(0).imageToViewportZoom(t3);
        }
      }
      return t3 * (this._contentSizeNoRotate.x / this._containerInnerSize.x / this._contentBoundsNoRotate.width);
    }, toggleFlip: function() {
      return this.setFlip(!this.getFlip()), this;
    }, getFlip: function() {
      return this.flipped;
    }, setFlip: function(e8) {
      return this.flipped === e8 || (this.flipped = e8, this.viewer.navigator && this.viewer.navigator.setFlip(this.getFlip()), this.viewer.forceRedraw(), this.viewer.raiseEvent("flip", { flipped: e8 })), this;
    }, getMaxZoomPixelRatio: function() {
      return this.maxZoomPixelRatio;
    }, setMaxZoomPixelRatio: function(t3, i3 = true, n3 = false) {
      e7.console.assert(!isNaN(t3), "[Viewport.setMaxZoomPixelRatio] ratio must be a number"), isNaN(t3) || (this.maxZoomPixelRatio = t3, i3 && this.getZoom() > this.getMaxZoom() && this.applyConstraints(n3));
    } };
  }(t2), function(e7) {
    e7.TiledImage = function(i3) {
      this._initialized = false, e7.console.assert(i3.tileCache, "[TiledImage] options.tileCache is required"), e7.console.assert(i3.drawer, "[TiledImage] options.drawer is required"), e7.console.assert(i3.viewer, "[TiledImage] options.viewer is required"), e7.console.assert(i3.imageLoader, "[TiledImage] options.imageLoader is required"), e7.console.assert(i3.source, "[TiledImage] options.source is required"), e7.console.assert(!i3.clip || i3.clip instanceof e7.Rect, "[TiledImage] options.clip must be an OpenSeadragon.Rect if present"), e7.EventSource.call(this), this._tileCache = i3.tileCache, delete i3.tileCache, this._drawer = i3.drawer, delete i3.drawer, this._imageLoader = i3.imageLoader, delete i3.imageLoader, i3.clip instanceof e7.Rect && (this._clip = i3.clip.clone()), delete i3.clip;
      var n3 = i3.x || 0;
      delete i3.x;
      var o2 = i3.y || 0;
      delete i3.y, this.normHeight = i3.source.dimensions.y / i3.source.dimensions.x, this.contentAspectX = i3.source.dimensions.x / i3.source.dimensions.y;
      var r2 = 1;
      i3.width ? (r2 = i3.width, delete i3.width, i3.height && (e7.console.error("specifying both width and height to a tiledImage is not supported"), delete i3.height)) : i3.height && (r2 = i3.height / this.normHeight, delete i3.height);
      var s2 = i3.fitBounds;
      delete i3.fitBounds;
      var a2 = i3.fitBoundsPlacement || t2.Placement.CENTER;
      delete i3.fitBoundsPlacement;
      var l2 = i3.degrees || 0;
      delete i3.degrees;
      var c2 = i3.ajaxHeaders;
      delete i3.ajaxHeaders, e7.extend(true, this, { viewer: null, tilesMatrix: {}, coverage: {}, loadingCoverage: {}, lastDrawn: [], lastResetTime: 0, _needsDraw: true, _needsUpdate: true, _hasOpaqueTile: false, _tilesLoading: 0, _tilesToDraw: [], _lastDrawn: [], _isBlending: false, _wasBlending: false, _isTainted: false, springStiffness: e7.DEFAULT_SETTINGS.springStiffness, animationTime: e7.DEFAULT_SETTINGS.animationTime, minZoomImageRatio: e7.DEFAULT_SETTINGS.minZoomImageRatio, wrapHorizontal: e7.DEFAULT_SETTINGS.wrapHorizontal, wrapVertical: e7.DEFAULT_SETTINGS.wrapVertical, immediateRender: e7.DEFAULT_SETTINGS.immediateRender, blendTime: e7.DEFAULT_SETTINGS.blendTime, alwaysBlend: e7.DEFAULT_SETTINGS.alwaysBlend, minPixelRatio: e7.DEFAULT_SETTINGS.minPixelRatio, smoothTileEdgesMinZoom: e7.DEFAULT_SETTINGS.smoothTileEdgesMinZoom, iOSDevice: e7.DEFAULT_SETTINGS.iOSDevice, debugMode: e7.DEFAULT_SETTINGS.debugMode, crossOriginPolicy: e7.DEFAULT_SETTINGS.crossOriginPolicy, ajaxWithCredentials: e7.DEFAULT_SETTINGS.ajaxWithCredentials, placeholderFillStyle: e7.DEFAULT_SETTINGS.placeholderFillStyle, opacity: e7.DEFAULT_SETTINGS.opacity, preload: e7.DEFAULT_SETTINGS.preload, compositeOperation: e7.DEFAULT_SETTINGS.compositeOperation, subPixelRoundingForTransparency: e7.DEFAULT_SETTINGS.subPixelRoundingForTransparency, maxTilesPerFrame: e7.DEFAULT_SETTINGS.maxTilesPerFrame }, i3), this._preload = this.preload, delete this.preload, this._fullyLoaded = false, this._xSpring = new e7.Spring({ initial: n3, springStiffness: this.springStiffness, animationTime: this.animationTime }), this._ySpring = new e7.Spring({ initial: o2, springStiffness: this.springStiffness, animationTime: this.animationTime }), this._scaleSpring = new e7.Spring({ initial: r2, springStiffness: this.springStiffness, animationTime: this.animationTime }), this._degreesSpring = new e7.Spring({ initial: l2, springStiffness: this.springStiffness, animationTime: this.animationTime }), this._updateForScale(), s2 && this.fitBounds(s2, a2, true), this._ownAjaxHeaders = {}, this.setAjaxHeaders(c2, false), this._initialized = true;
    }, e7.extend(e7.TiledImage.prototype, e7.EventSource.prototype, { needsDraw: function() {
      return this._needsDraw;
    }, redraw: function() {
      this._needsDraw = true;
    }, getFullyLoaded: function() {
      return this._fullyLoaded;
    }, _setFullyLoaded: function(e8) {
      e8 !== this._fullyLoaded && (this._fullyLoaded = e8, this.raiseEvent("fully-loaded-change", { fullyLoaded: this._fullyLoaded }));
    }, reset: function() {
      this._tileCache.clearTilesFor(this), this.lastResetTime = e7.now(), this._needsDraw = true;
    }, update: function(e8) {
      let t3 = this._xSpring.update(), i3 = this._ySpring.update(), n3 = this._scaleSpring.update(), o2 = this._degreesSpring.update(), r2 = t3 || i3 || n3 || o2 || this._needsUpdate;
      if (r2 || e8 || !this._fullyLoaded) {
        let e9 = this._updateLevelsForViewport();
        this._setFullyLoaded(e9);
      }
      return this._needsUpdate = false, !!r2 && (this._updateForScale(), this._raiseBoundsChange(), this._needsDraw = true, true);
    }, setDrawn: function() {
      return this._needsDraw = this._isBlending || this._wasBlending, this._needsDraw;
    }, setTainted(e8) {
      this._isTainted = e8;
    }, isTainted() {
      return this._isTainted;
    }, destroy: function() {
      this.reset(), this.source.destroy && this.source.destroy(this.viewer);
    }, getBounds: function(e8) {
      return this.getBoundsNoRotate(e8).rotate(this.getRotation(e8), this._getRotationPoint(e8));
    }, getBoundsNoRotate: function(t3) {
      return t3 ? new e7.Rect(this._xSpring.current.value, this._ySpring.current.value, this._worldWidthCurrent, this._worldHeightCurrent) : new e7.Rect(this._xSpring.target.value, this._ySpring.target.value, this._worldWidthTarget, this._worldHeightTarget);
    }, getWorldBounds: function() {
      return e7.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"), this.getBounds();
    }, getClippedBounds: function(t3) {
      var i3 = this.getBoundsNoRotate(t3);
      if (this._clip) {
        var n3 = (t3 ? this._worldWidthCurrent : this._worldWidthTarget) / this.source.dimensions.x, o2 = this._clip.times(n3);
        i3 = new e7.Rect(i3.x + o2.x, i3.y + o2.y, o2.width, o2.height);
      }
      return i3.rotate(this.getRotation(t3), this._getRotationPoint(t3));
    }, getTileBounds: function(e8, t3, i3) {
      var n3 = this.source.getNumTiles(e8), o2 = (n3.x + t3 % n3.x) % n3.x, r2 = (n3.y + i3 % n3.y) % n3.y, s2 = this.source.getTileBounds(e8, o2, r2);
      return this.getFlip() && (s2.x = Math.max(0, 1 - s2.x - s2.width)), s2.x += (t3 - o2) / n3.x, s2.y += this._worldHeightCurrent / this._worldWidthCurrent * ((i3 - r2) / n3.y), s2;
    }, getContentSize: function() {
      return new e7.Point(this.source.dimensions.x, this.source.dimensions.y);
    }, getSizeInWindowCoordinates: function() {
      var t3 = this.imageToWindowCoordinates(new e7.Point(0, 0)), i3 = this.imageToWindowCoordinates(this.getContentSize());
      return new e7.Point(i3.x - t3.x, i3.y - t3.y);
    }, _viewportToImageDelta: function(t3, i3, n3) {
      var o2 = n3 ? this._scaleSpring.current.value : this._scaleSpring.target.value;
      return new e7.Point(t3 * (this.source.dimensions.x / o2), i3 * (this.source.dimensions.y * this.contentAspectX / o2));
    }, viewportToImageCoordinates: function(t3, i3, n3) {
      var o2;
      return t3 instanceof e7.Point ? (n3 = i3, o2 = t3) : o2 = new e7.Point(t3, i3), o2 = o2.rotate(-this.getRotation(n3), this._getRotationPoint(n3)), n3 ? this._viewportToImageDelta(o2.x - this._xSpring.current.value, o2.y - this._ySpring.current.value) : this._viewportToImageDelta(o2.x - this._xSpring.target.value, o2.y - this._ySpring.target.value);
    }, _imageToViewportDelta: function(t3, i3, n3) {
      var o2 = n3 ? this._scaleSpring.current.value : this._scaleSpring.target.value;
      return new e7.Point(t3 / this.source.dimensions.x * o2, i3 / this.source.dimensions.y / this.contentAspectX * o2);
    }, imageToViewportCoordinates: function(t3, i3, n3) {
      t3 instanceof e7.Point && (n3 = i3, i3 = t3.y, t3 = t3.x);
      var o2 = this._imageToViewportDelta(t3, i3, n3);
      return n3 ? (o2.x += this._xSpring.current.value, o2.y += this._ySpring.current.value) : (o2.x += this._xSpring.target.value, o2.y += this._ySpring.target.value), o2.rotate(this.getRotation(n3), this._getRotationPoint(n3));
    }, imageToViewportRectangle: function(t3, i3, n3, o2, r2) {
      var s2 = t3;
      s2 instanceof e7.Rect ? r2 = i3 : s2 = new e7.Rect(t3, i3, n3, o2);
      var a2 = this.imageToViewportCoordinates(s2.getTopLeft(), r2), l2 = this._imageToViewportDelta(s2.width, s2.height, r2);
      return new e7.Rect(a2.x, a2.y, l2.x, l2.y, s2.degrees + this.getRotation(r2));
    }, viewportToImageRectangle: function(t3, i3, n3, o2, r2) {
      var s2 = t3;
      t3 instanceof e7.Rect ? r2 = i3 : s2 = new e7.Rect(t3, i3, n3, o2);
      var a2 = this.viewportToImageCoordinates(s2.getTopLeft(), r2), l2 = this._viewportToImageDelta(s2.width, s2.height, r2);
      return new e7.Rect(a2.x, a2.y, l2.x, l2.y, s2.degrees - this.getRotation(r2));
    }, viewerElementToImageCoordinates: function(e8) {
      var t3 = this.viewport.pointFromPixel(e8, true);
      return this.viewportToImageCoordinates(t3);
    }, imageToViewerElementCoordinates: function(e8) {
      var t3 = this.imageToViewportCoordinates(e8);
      return this.viewport.pixelFromPoint(t3, true);
    }, windowToImageCoordinates: function(e8) {
      var i3 = e8.minus(t2.getElementPosition(this.viewer.element));
      return this.viewerElementToImageCoordinates(i3);
    }, imageToWindowCoordinates: function(e8) {
      return this.imageToViewerElementCoordinates(e8).plus(t2.getElementPosition(this.viewer.element));
    }, _viewportToTiledImageRectangle: function(t3) {
      var i3 = this._scaleSpring.current.value;
      return t3 = t3.rotate(-this.getRotation(true), this._getRotationPoint(true)), new e7.Rect((t3.x - this._xSpring.current.value) / i3, (t3.y - this._ySpring.current.value) / i3, t3.width / i3, t3.height / i3, t3.degrees);
    }, viewportToImageZoom: function(e8) {
      return this._scaleSpring.current.value * this.viewport._containerInnerSize.x / this.source.dimensions.x * e8;
    }, imageToViewportZoom: function(e8) {
      return e8 / (this._scaleSpring.current.value * this.viewport._containerInnerSize.x / this.source.dimensions.x);
    }, setPosition: function(e8, t3) {
      var i3 = this._xSpring.target.value === e8.x && this._ySpring.target.value === e8.y;
      if (t3) {
        if (i3 && this._xSpring.current.value === e8.x && this._ySpring.current.value === e8.y) return;
        this._xSpring.resetTo(e8.x), this._ySpring.resetTo(e8.y), this._needsDraw = true, this._needsUpdate = true;
      } else {
        if (i3) return;
        this._xSpring.springTo(e8.x), this._ySpring.springTo(e8.y), this._needsDraw = true, this._needsUpdate = true;
      }
      i3 || this._raiseBoundsChange();
    }, setWidth: function(e8, t3) {
      this._setScale(e8, t3);
    }, setHeight: function(e8, t3) {
      this._setScale(e8 / this.normHeight, t3);
    }, setCroppingPolygons: function(t3) {
      var i3 = function(t4) {
        return t4.map(function(t5) {
          try {
            if (function(t6) {
              return t6 instanceof e7.Point || "number" == typeof t6.x && "number" == typeof t6.y;
            }(t5)) return { x: t5.x, y: t5.y };
            throw new Error();
          } catch (e8) {
            throw new Error("A Provided cropping polygon point is not supported");
          }
        });
      };
      try {
        if (!e7.isArray(t3)) throw new Error("Provided cropping polygon is not an array");
        this._croppingPolygons = t3.map(function(e8) {
          return i3(e8);
        }), this._needsDraw = true;
      } catch (t4) {
        e7.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"), e7.console.error(t4), this.resetCroppingPolygons();
      }
    }, resetCroppingPolygons: function() {
      this._croppingPolygons = null, this._needsDraw = true;
    }, fitBounds: function(t3, i3, n3) {
      i3 = i3 || e7.Placement.CENTER;
      var o2 = e7.Placement.properties[i3], r2 = this.contentAspectX, s2 = 0, a2 = 0, l2 = 1, c2 = 1;
      if (this._clip && (r2 = this._clip.getAspectRatio(), l2 = this._clip.width / this.source.dimensions.x, c2 = this._clip.height / this.source.dimensions.y, t3.getAspectRatio() > r2 ? (s2 = this._clip.x / this._clip.height * t3.height, a2 = this._clip.y / this._clip.height * t3.height) : (s2 = this._clip.x / this._clip.width * t3.width, a2 = this._clip.y / this._clip.width * t3.width)), t3.getAspectRatio() > r2) {
        var h2 = t3.height / c2, u2 = 0;
        o2.isHorizontallyCentered ? u2 = (t3.width - t3.height * r2) / 2 : o2.isRight && (u2 = t3.width - t3.height * r2), this.setPosition(new e7.Point(t3.x - s2 + u2, t3.y - a2), n3), this.setHeight(h2, n3);
      } else {
        var d2 = t3.width / l2, p2 = 0;
        o2.isVerticallyCentered ? p2 = (t3.height - t3.width / r2) / 2 : o2.isBottom && (p2 = t3.height - t3.width / r2), this.setPosition(new e7.Point(t3.x - s2, t3.y - a2 + p2), n3), this.setWidth(d2, n3);
      }
    }, getClip: function() {
      return this._clip ? this._clip.clone() : null;
    }, setClip: function(t3) {
      e7.console.assert(!t3 || t3 instanceof e7.Rect, "[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"), t3 instanceof e7.Rect ? this._clip = t3.clone() : this._clip = null, this._needsDraw = true, this.raiseEvent("clip-change");
    }, getFlip: function() {
      return this.flipped;
    }, setFlip: function(e8) {
      this.flipped = e8;
    }, get flipped() {
      return this._flipped;
    }, set flipped(e8) {
      let t3 = this._flipped !== !!e8;
      this._flipped = !!e8, t3 && (this.update(true), this._needsDraw = true, this._raiseBoundsChange());
    }, get wrapHorizontal() {
      return this._wrapHorizontal;
    }, set wrapHorizontal(e8) {
      let t3 = this._wrapHorizontal !== !!e8;
      this._wrapHorizontal = !!e8, this._initialized && t3 && (this.update(true), this._needsDraw = true);
    }, get wrapVertical() {
      return this._wrapVertical;
    }, set wrapVertical(e8) {
      let t3 = this._wrapVertical !== !!e8;
      this._wrapVertical = !!e8, this._initialized && t3 && (this.update(true), this._needsDraw = true);
    }, get debugMode() {
      return this._debugMode;
    }, set debugMode(e8) {
      this._debugMode = !!e8, this._needsDraw = true;
    }, getOpacity: function() {
      return this.opacity;
    }, setOpacity: function(e8) {
      this.opacity = e8;
    }, get opacity() {
      return this._opacity;
    }, set opacity(e8) {
      e8 !== this.opacity && (this._opacity = e8, this._needsDraw = true, this.raiseEvent("opacity-change", { opacity: this.opacity }));
    }, getPreload: function() {
      return this._preload;
    }, setPreload: function(e8) {
      this._preload = !!e8, this._needsDraw = true;
    }, getRotation: function(e8) {
      return e8 ? this._degreesSpring.current.value : this._degreesSpring.target.value;
    }, setRotation: function(e8, t3) {
      this._degreesSpring.target.value === e8 && this._degreesSpring.isAtTargetValue() || (t3 ? this._degreesSpring.resetTo(e8) : this._degreesSpring.springTo(e8), this._needsDraw = true, this._needsUpdate = true, this._raiseBoundsChange());
    }, getDrawArea: function() {
      if (0 === this._opacity && !this._preload) return false;
      var e8 = this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(true));
      if (!this.wrapHorizontal && !this.wrapVertical) {
        var t3 = this._viewportToTiledImageRectangle(this.getClippedBounds(true));
        e8 = e8.intersection(t3);
      }
      return e8;
    }, getTilesToDraw: function() {
      let e8 = this._tilesToDraw.flat();
      return this._updateTilesInViewport(e8), e8 = this._tilesToDraw.flat(), e8.forEach((e9) => {
        e9.tile.beingDrawn = true;
      }), this._lastDrawn = e8, e8;
    }, _getRotationPoint: function(e8) {
      return this.getBoundsNoRotate(e8).getCenter();
    }, get compositeOperation() {
      return this._compositeOperation;
    }, set compositeOperation(e8) {
      e8 !== this._compositeOperation && (this._compositeOperation = e8, this._needsDraw = true, this.raiseEvent("composite-operation-change", { compositeOperation: this._compositeOperation }));
    }, getCompositeOperation: function() {
      return this._compositeOperation;
    }, setCompositeOperation: function(e8) {
      this.compositeOperation = e8;
    }, setAjaxHeaders: function(t3, i3) {
      null === t3 && (t3 = {}), e7.isPlainObject(t3) ? (this._ownAjaxHeaders = t3, this._updateAjaxHeaders(i3)) : console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");
    }, _updateAjaxHeaders: function(t3) {
      if (void 0 === t3 && (t3 = true), e7.isPlainObject(this.viewer.ajaxHeaders) ? this.ajaxHeaders = e7.extend({}, this.viewer.ajaxHeaders, this._ownAjaxHeaders) : this.ajaxHeaders = this._ownAjaxHeaders, t3) {
        var i3, n3, o2, r2;
        for (var s2 in this.tilesMatrix) for (var a2 in i3 = this.source.getNumTiles(s2), this.tilesMatrix[s2]) for (var l2 in n3 = (i3.x + a2 % i3.x) % i3.x, this.tilesMatrix[s2][a2]) if (o2 = (i3.y + l2 % i3.y) % i3.y, (r2 = this.tilesMatrix[s2][a2][l2]).loadWithAjax = this.loadTilesWithAjax, r2.loadWithAjax) {
          var c2 = this.source.getTileAjaxHeaders(s2, n3, o2);
          r2.ajaxHeaders = e7.extend({}, this.ajaxHeaders, c2);
        } else r2.ajaxHeaders = null;
        for (var h2 = 0; h2 < this._imageLoader.jobQueue.length; h2++) {
          var u2 = this._imageLoader.jobQueue[h2];
          u2.loadWithAjax = u2.tile.loadWithAjax, u2.ajaxHeaders = u2.tile.loadWithAjax ? u2.tile.ajaxHeaders : null;
        }
      }
    }, _setScale: function(e8, t3) {
      var i3 = this._scaleSpring.target.value === e8;
      if (t3) {
        if (i3 && this._scaleSpring.current.value === e8) return;
        this._scaleSpring.resetTo(e8), this._updateForScale(), this._needsDraw = true, this._needsUpdate = true;
      } else {
        if (i3) return;
        this._scaleSpring.springTo(e8), this._updateForScale(), this._needsDraw = true, this._needsUpdate = true;
      }
      i3 || this._raiseBoundsChange();
    }, _updateForScale: function() {
      this._worldWidthTarget = this._scaleSpring.target.value, this._worldHeightTarget = this.normHeight * this._scaleSpring.target.value, this._worldWidthCurrent = this._scaleSpring.current.value, this._worldHeightCurrent = this.normHeight * this._scaleSpring.current.value;
    }, _raiseBoundsChange: function() {
      this.raiseEvent("bounds-change");
    }, _isBottomItem: function() {
      return this.viewer.world.getItemAt(0) === this;
    }, _getLevelsInterval: function() {
      var e8 = Math.max(this.source.minLevel, Math.floor(Math.log(this.minZoomImageRatio) / Math.log(2))), t3 = this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0), true).x * this._scaleSpring.current.value, i3 = Math.min(Math.abs(this.source.maxLevel), Math.abs(Math.floor(Math.log(t3 / this.minPixelRatio) / Math.log(2))));
      return i3 = Math.max(i3, this.source.minLevel || 0), { lowestLevel: e8 = Math.min(e8, i3), highestLevel: i3 };
    }, _updateLevelsForViewport: function() {
      var t3 = this._getLevelsInterval(), i3 = t3.lowestLevel, n3 = t3.highestLevel, o2 = [], r2 = this.getDrawArea(), s2 = e7.now();
      if (this._lastDrawn.forEach((e8) => {
        e8.tile.beingDrawn = false;
      }), this._tilesToDraw = [], this._tilesLoading = 0, this.loadingCoverage = {}, !r2) return this._needsDraw = false, this._fullyLoaded;
      var a2 = new Array(n3 - i3 + 1);
      for (let e8 = 0, t4 = n3; t4 >= i3; t4--, e8++) a2[e8] = t4;
      for (let e8 = n3 + 1; e8 <= this.source.maxLevel; e8++) {
        var l2 = this.tilesMatrix[e8] && this.tilesMatrix[e8][0] && this.tilesMatrix[e8][0][0];
        if (l2 && l2.isBottomMost && l2.isRightMost && l2.loaded) {
          a2.push(e8);
          break;
        }
      }
      let c2 = false;
      for (let e8 = 0; e8 < a2.length; e8++) {
        let t4 = a2[e8];
        var h2 = this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(t4), true).x * this._scaleSpring.current.value;
        if (e8 === a2.length - 1 || h2 >= this.minPixelRatio) c2 = true;
        else if (!c2) continue;
        var u2 = this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(t4), false).x * this._scaleSpring.current.value, d2 = this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(), 0)), false).x * this._scaleSpring.current.value, p2 = this.immediateRender ? 1 : d2, _2 = Math.min(1, (h2 - 0.5) / 0.5), g2 = p2 / Math.abs(p2 - u2), m2 = this._updateLevel(t4, _2, g2, r2, s2, o2);
        o2 = m2.bestTiles;
        var f2 = m2.updatedTiles.filter((e9) => e9.loaded), v2 = /* @__PURE__ */ function(e9, t5, i4) {
          return function(n4) {
            return { tile: n4, level: e9, levelOpacity: t5, currentTime: i4 };
          };
        }(t4, _2, s2);
        if (this._tilesToDraw[t4] = f2.map(v2), this._providesCoverage(this.coverage, t4)) break;
      }
      return o2 && o2.length > 0 ? (o2.forEach(function(e8) {
        e8 && !e8.context2D && this._loadTile(e8, s2);
      }, this), this._needsDraw = true, false) : 0 === this._tilesLoading;
    }, _updateTilesInViewport: function(t3) {
      let i3 = e7.now(), n3 = this;
      this._tilesLoading = 0, this._wasBlending = this._isBlending, this._isBlending = false, this.loadingCoverage = {};
      let o2 = t3.length ? t3[0].level : 0;
      if (!this.getDrawArea()) return;
      function r2(e8) {
        let t4 = e8.tile;
        if (t4 && t4.loaded) {
          let r3 = n3._blendTile(t4, t4.x, t4.y, e8.level, e8.levelOpacity, i3, o2);
          n3._isBlending = n3._isBlending || r3, n3._needsDraw = n3._needsDraw || r3 || n3._wasBlending;
        }
      }
      let s2 = 0;
      for (let e8 = 0; e8 < t3.length; e8++) {
        let i4 = t3[e8];
        r2(i4), this._providesCoverage(this.coverage, i4.level) && (s2 = Math.max(s2, i4.level));
      }
      if (s2 > 0) for (let e8 in this._tilesToDraw) e8 < s2 && delete this._tilesToDraw[e8];
    }, _blendTile: function(e8, t3, i3, n3, o2, r2, s2) {
      let a2, l2, c2 = 1e3 * this.blendTime;
      return e8.blendStart || (e8.blendStart = r2), a2 = r2 - e8.blendStart, l2 = c2 ? Math.min(1, a2 / c2) : 1, n3 === s2 && (l2 = 1, a2 = c2), this.alwaysBlend && (l2 *= o2), e8.opacity = l2, 1 === l2 && (this._setCoverage(this.coverage, n3, t3, i3, true), this._hasOpaqueTile = true), a2 < c2;
    }, _updateLevel: function(e8, t3, i3, n3, o2, r2) {
      var s2 = n3.getBoundingBox().getTopLeft(), a2 = n3.getBoundingBox().getBottomRight();
      this.viewer && this.viewer.raiseEvent("update-level", { tiledImage: this, havedrawn: true, level: e8, opacity: t3, visibility: i3, drawArea: n3, topleft: s2, bottomright: a2, currenttime: o2, best: r2 }), this._resetCoverage(this.coverage, e8), this._resetCoverage(this.loadingCoverage, e8);
      var l2 = this._getCornerTiles(e8, s2, a2), c2 = l2.topLeft, h2 = l2.bottomRight, u2 = this.source.getNumTiles(e8), d2 = this.viewport.pixelFromPoint(this.viewport.getCenter());
      this.getFlip() && (h2.x += 1, this.wrapHorizontal || (h2.x = Math.min(h2.x, u2.x - 1)));
      for (var p2 = Math.max(0, (h2.x - c2.x) * (h2.y - c2.y)), _2 = new Array(p2), g2 = 0, m2 = c2.x; m2 <= h2.x; m2++) for (var f2 = c2.y; f2 <= h2.y; f2++) {
        var v2;
        if (this.getFlip()) {
          var A2 = (u2.x + m2 % u2.x) % u2.x;
          v2 = m2 + u2.x - A2 - A2 - 1;
        } else v2 = m2;
        if (null !== n3.intersection(this.getTileBounds(e8, v2, f2))) {
          var b2 = this._updateTile(v2, f2, e8, i3, d2, u2, o2, r2);
          r2 = b2.bestTiles, _2[g2] = b2.tile, g2 += 1;
        }
      }
      return { bestTiles: r2, updatedTiles: _2 };
    }, _positionTile: function(t3, i3, n3, o2, r2) {
      var s2 = t3.bounds.getTopLeft();
      s2.x *= this._scaleSpring.current.value, s2.y *= this._scaleSpring.current.value, s2.x += this._xSpring.current.value, s2.y += this._ySpring.current.value;
      var a2 = t3.bounds.getSize();
      a2.x *= this._scaleSpring.current.value, a2.y *= this._scaleSpring.current.value, t3.positionedBounds.x = s2.x, t3.positionedBounds.y = s2.y, t3.positionedBounds.width = a2.x, t3.positionedBounds.height = a2.y;
      var l2 = n3.pixelFromPointNoRotate(s2, true), c2 = n3.pixelFromPointNoRotate(s2, false), h2 = n3.deltaPixelsFromPointsNoRotate(a2, true), u2 = n3.deltaPixelsFromPointsNoRotate(a2, false), d2 = c2.plus(u2.divide(2)), p2 = o2.squaredDistanceTo(d2);
      this.viewer.drawer.minimumOverlapRequired(this) && (i3 || (h2 = h2.plus(new e7.Point(1, 1))), t3.isRightMost && this.wrapHorizontal && (h2.x += 0.75), t3.isBottomMost && this.wrapVertical && (h2.y += 0.75)), t3.position = l2, t3.size = h2, t3.squaredDistance = p2, t3.visibility = r2;
    }, _updateTile: function(e8, t3, i3, n3, o2, r2, s2, a2) {
      var l2 = this._getTile(e8, t3, i3, s2, r2);
      this.viewer && this.viewer.raiseEvent("update-tile", { tiledImage: this, tile: l2 }), this._setCoverage(this.coverage, i3, e8, t3, false);
      var c2 = l2.loaded || l2.loading || this._isCovered(this.loadingCoverage, i3, e8, t3);
      if (this._setCoverage(this.loadingCoverage, i3, e8, t3, c2), !l2.exists) return { bestTiles: a2, tile: l2 };
      if (l2.loaded && 1 === l2.opacity && this._setCoverage(this.coverage, i3, e8, t3, true), this._positionTile(l2, this.source.tileOverlap, this.viewport, o2, n3), !l2.loaded) if (l2.context2D) this._setTileLoaded(l2);
      else {
        var h2 = this._tileCache.getImageRecord(l2.cacheKey);
        h2 && this._setTileLoaded(l2, h2.getData());
      }
      return l2.loading ? this._tilesLoading++ : c2 || (a2 = this._compareTiles(a2, l2, this.maxTilesPerFrame)), { bestTiles: a2, tile: l2 };
    }, _getCornerTiles: function(t3, i3, n3) {
      var o2, r2, s2, a2;
      this.wrapHorizontal ? (o2 = e7.positiveModulo(i3.x, 1), r2 = e7.positiveModulo(n3.x, 1)) : (o2 = Math.max(0, i3.x), r2 = Math.min(1, n3.x));
      var l2 = 1 / this.source.aspectRatio;
      this.wrapVertical ? (s2 = e7.positiveModulo(i3.y, l2), a2 = e7.positiveModulo(n3.y, l2)) : (s2 = Math.max(0, i3.y), a2 = Math.min(l2, n3.y));
      var c2 = this.source.getTileAtPoint(t3, new e7.Point(o2, s2)), h2 = this.source.getTileAtPoint(t3, new e7.Point(r2, a2)), u2 = this.source.getNumTiles(t3);
      return this.wrapHorizontal && (c2.x += u2.x * Math.floor(i3.x), h2.x += u2.x * Math.floor(n3.x)), this.wrapVertical && (c2.y += u2.y * Math.floor(i3.y / l2), h2.y += u2.y * Math.floor(n3.y / l2)), { topLeft: c2, bottomRight: h2 };
    }, _getTile: function(t3, i3, n3, o2, r2) {
      var s2, a2, l2, c2, h2, u2, d2, p2, _2, g2, m2 = this.tilesMatrix, f2 = this.source;
      return m2[n3] || (m2[n3] = {}), m2[n3][t3] || (m2[n3][t3] = {}), m2[n3][t3][i3] && !m2[n3][t3][i3].flipped == !this.flipped || (s2 = (r2.x + t3 % r2.x) % r2.x, a2 = (r2.y + i3 % r2.y) % r2.y, l2 = this.getTileBounds(n3, t3, i3), c2 = f2.getTileBounds(n3, s2, a2, true), h2 = f2.tileExists(n3, s2, a2), u2 = f2.getTileUrl(n3, s2, a2), d2 = f2.getTilePostData(n3, s2, a2), this.loadTilesWithAjax ? (p2 = f2.getTileAjaxHeaders(n3, s2, a2), e7.isPlainObject(this.ajaxHeaders) && (p2 = e7.extend({}, this.ajaxHeaders, p2))) : p2 = null, _2 = f2.getContext2D ? f2.getContext2D(n3, s2, a2) : void 0, g2 = new e7.Tile(n3, t3, i3, l2, h2, u2, _2, this.loadTilesWithAjax, p2, c2, d2, f2.getTileHashKey(n3, s2, a2, u2, p2, d2)), this.getFlip() ? 0 === s2 && (g2.isRightMost = true) : s2 === r2.x - 1 && (g2.isRightMost = true), a2 === r2.y - 1 && (g2.isBottomMost = true), g2.flipped = this.flipped, m2[n3][t3][i3] = g2), (g2 = m2[n3][t3][i3]).lastTouchTime = o2, g2;
    }, _loadTile: function(e8, t3) {
      var i3 = this;
      e8.loading = true, this._imageLoader.addJob({ src: e8.getUrl(), tile: e8, source: this.source, postData: e8.postData, loadWithAjax: e8.loadWithAjax, ajaxHeaders: e8.ajaxHeaders, crossOriginPolicy: this.crossOriginPolicy, ajaxWithCredentials: this.ajaxWithCredentials, callback: function(n3, o2, r2) {
        i3._onTileLoad(e8, t3, n3, o2, r2);
      }, abort: function() {
        e8.loading = false;
      } });
    }, _onTileLoad: function(t3, i3, n3, o2, r2) {
      if (!n3) return e7.console.error("Tile %s failed to load: %s - error: %s", t3, t3.getUrl(), o2), this.viewer.raiseEvent("tile-load-failed", { tile: t3, tiledImage: this, time: i3, message: o2, tileRequest: r2 }), t3.loading = false, void (t3.exists = false);
      if (t3.exists = true, i3 < this.lastResetTime) return e7.console.warn("Ignoring tile %s loaded before reset: %s", t3, t3.getUrl()), void (t3.loading = false);
      var s2, a2 = this;
      s2 = a2.source.getClosestLevel(), a2._setTileLoaded(t3, n3, s2, r2);
    }, _setTileLoaded: function(t3, i3, n3, o2) {
      var r2 = 0, s2 = false, a2 = this;
      function l2() {
        return s2 && e7.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."), r2++, c2;
      }
      function c2() {
        0 === --r2 && (t3.loading = false, t3.loaded = true, t3.hasTransparency = a2.source.hasTransparency(t3.context2D, t3.getUrl(), t3.ajaxHeaders, t3.postData), t3.context2D || a2._tileCache.cacheTile({ data: i3, tile: t3, cutoff: n3, tiledImage: a2 }), a2.viewer.raiseEvent("tile-ready", { tile: t3, tiledImage: a2, tileRequest: o2 }), a2._needsDraw = true);
      }
      var h2 = l2();
      this.viewer.raiseEvent("tile-loaded", { tile: t3, tiledImage: this, tileRequest: o2, get image() {
        return e7.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."), i3;
      }, data: i3, getCompletionCallback: l2 }), s2 = true, h2();
    }, _compareTiles: function(e8, t3, i3) {
      return e8 ? (e8.push(t3), this._sortTiles(e8), e8.length > i3 && e8.pop(), e8) : [t3];
    }, _sortTiles: function(e8) {
      e8.sort(function(e9, t3) {
        return null === e9 ? 1 : null === t3 ? -1 : e9.visibility === t3.visibility ? e9.squaredDistance - t3.squaredDistance : t3.visibility - e9.visibility;
      });
    }, _providesCoverage: function(e8, t3, i3, n3) {
      var o2, r2, s2, a2;
      if (!e8[t3]) return false;
      if (void 0 === i3 || void 0 === n3) {
        for (s2 in o2 = e8[t3]) if (Object.prototype.hasOwnProperty.call(o2, s2)) {
          for (a2 in r2 = o2[s2]) if (Object.prototype.hasOwnProperty.call(r2, a2) && !r2[a2]) return false;
        }
        return true;
      }
      return void 0 === e8[t3][i3] || void 0 === e8[t3][i3][n3] || true === e8[t3][i3][n3];
    }, _isCovered: function(e8, t3, i3, n3) {
      return void 0 === i3 || void 0 === n3 ? this._providesCoverage(e8, t3 + 1) : this._providesCoverage(e8, t3 + 1, 2 * i3, 2 * n3) && this._providesCoverage(e8, t3 + 1, 2 * i3, 2 * n3 + 1) && this._providesCoverage(e8, t3 + 1, 2 * i3 + 1, 2 * n3) && this._providesCoverage(e8, t3 + 1, 2 * i3 + 1, 2 * n3 + 1);
    }, _setCoverage: function(t3, i3, n3, o2, r2) {
      t3[i3] ? (t3[i3][n3] || (t3[i3][n3] = {}), t3[i3][n3][o2] = r2) : e7.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s", i3);
    }, _resetCoverage: function(e8, t3) {
      e8[t3] = {};
    } });
  }(t2), function(e7) {
    var t3 = function(t4) {
      e7.console.assert(t4, "[TileCache.cacheTile] options is required"), e7.console.assert(t4.tile, "[TileCache.cacheTile] options.tile is required"), e7.console.assert(t4.tiledImage, "[TileCache.cacheTile] options.tiledImage is required"), this.tile = t4.tile, this.tiledImage = t4.tiledImage;
    }, i3 = function(t4) {
      e7.console.assert(t4, "[ImageRecord] options is required"), e7.console.assert(t4.data, "[ImageRecord] options.data is required"), this._tiles = [], t4.create.apply(null, [this, t4.data, t4.ownerTile]), this._destroyImplementation = t4.destroy.bind(null, this), this.getImage = t4.getImage.bind(null, this), this.getData = t4.getData.bind(null, this), this.getRenderedContext = t4.getRenderedContext.bind(null, this);
    };
    i3.prototype = { destroy: function() {
      this._destroyImplementation(), this._tiles = null;
    }, addTile: function(t4) {
      e7.console.assert(t4, "[ImageRecord.addTile] tile is required"), this._tiles.push(t4);
    }, removeTile: function(t4) {
      for (var i4 = 0; i4 < this._tiles.length; i4++) if (this._tiles[i4] === t4) return void this._tiles.splice(i4, 1);
      e7.console.warn("[ImageRecord.removeTile] trying to remove unknown tile", t4);
    }, getTileCount: function() {
      return this._tiles.length;
    } }, e7.TileCache = function(t4) {
      t4 = t4 || {}, this._maxImageCacheCount = t4.maxImageCacheCount || e7.DEFAULT_SETTINGS.maxImageCacheCount, this._tilesLoaded = [], this._imagesLoaded = [], this._imagesLoadedCount = 0;
    }, e7.TileCache.prototype = { numTilesLoaded: function() {
      return this._tilesLoaded.length;
    }, cacheTile: function(n3) {
      e7.console.assert(n3, "[TileCache.cacheTile] options is required"), e7.console.assert(n3.tile, "[TileCache.cacheTile] options.tile is required"), e7.console.assert(n3.tile.cacheKey, "[TileCache.cacheTile] options.tile.cacheKey is required"), e7.console.assert(n3.tiledImage, "[TileCache.cacheTile] options.tiledImage is required");
      var o2 = n3.cutoff || 0, r2 = this._tilesLoaded.length, s2 = this._imagesLoaded[n3.tile.cacheKey];
      if (s2 || (n3.data || (e7.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."), n3.data = n3.image), e7.console.assert(n3.data, "[TileCache.cacheTile] options.data is required to create an ImageRecord"), s2 = this._imagesLoaded[n3.tile.cacheKey] = new i3({ data: n3.data, ownerTile: n3.tile, create: n3.tiledImage.source.createTileCache, destroy: n3.tiledImage.source.destroyTileCache, getImage: n3.tiledImage.source.getTileCacheDataAsImage, getData: n3.tiledImage.source.getTileCacheData, getRenderedContext: n3.tiledImage.source.getTileCacheDataAsContext2D }), this._imagesLoadedCount++), s2.addTile(n3.tile), n3.tile.cacheImageRecord = s2, this._imagesLoadedCount > this._maxImageCacheCount) {
        for (var a2, l2, c2, h2, u2, d2, p2 = null, _2 = -1, g2 = null, m2 = this._tilesLoaded.length - 1; m2 >= 0; m2--) (a2 = (d2 = this._tilesLoaded[m2]).tile).level <= o2 || a2.beingDrawn || (p2 ? (h2 = a2.lastTouchTime, l2 = p2.lastTouchTime, u2 = a2.level, c2 = p2.level, (h2 < l2 || h2 === l2 && u2 > c2) && (p2 = a2, _2 = m2, g2 = d2)) : (p2 = a2, _2 = m2, g2 = d2));
        p2 && _2 >= 0 && (this._unloadTile(g2), r2 = _2);
      }
      this._tilesLoaded[r2] = new t3({ tile: n3.tile, tiledImage: n3.tiledImage });
    }, clearTilesFor: function(t4) {
      var i4;
      e7.console.assert(t4, "[TileCache.clearTilesFor] tiledImage is required");
      for (var n3 = 0; n3 < this._tilesLoaded.length; ++n3) (i4 = this._tilesLoaded[n3]).tiledImage === t4 && (this._unloadTile(i4), this._tilesLoaded.splice(n3, 1), n3--);
    }, getImageRecord: function(t4) {
      return e7.console.assert(t4, "[TileCache.getImageRecord] cacheKey is required"), this._imagesLoaded[t4];
    }, _unloadTile: function(t4) {
      e7.console.assert(t4, "[TileCache._unloadTile] tileRecord is required");
      var i4 = t4.tile, n3 = t4.tiledImage;
      let o2 = i4.getCanvasContext && i4.getCanvasContext();
      i4.unload(), i4.cacheImageRecord = null;
      var r2 = this._imagesLoaded[i4.cacheKey];
      r2 && (r2.removeTile(i4), r2.getTileCount() || (r2.destroy(), delete this._imagesLoaded[i4.cacheKey], this._imagesLoadedCount--, o2 && (o2.canvas.width = 0, o2.canvas.height = 0, n3.viewer.raiseEvent("image-unloaded", { context2D: o2, tile: i4 }))), n3.viewer.raiseEvent("tile-unloaded", { tile: i4, tiledImage: n3 }));
    } };
  }(t2), function(e7) {
    e7.World = function(t3) {
      var i3 = this;
      e7.console.assert(t3.viewer, "[World] options.viewer is required"), e7.EventSource.call(this), this.viewer = t3.viewer, this._items = [], this._needsDraw = false, this._autoRefigureSizes = true, this._needsSizesFigured = false, this._delegatedFigureSizes = function(e8) {
        i3._autoRefigureSizes ? i3._figureSizes() : i3._needsSizesFigured = true;
      }, this._figureSizes();
    }, e7.extend(e7.World.prototype, e7.EventSource.prototype, { addItem: function(t3, i3) {
      if (e7.console.assert(t3, "[World.addItem] item is required"), e7.console.assert(t3 instanceof e7.TiledImage, "[World.addItem] only TiledImages supported at this time"), void 0 !== (i3 = i3 || {}).index) {
        var n3 = Math.max(0, Math.min(this._items.length, i3.index));
        this._items.splice(n3, 0, t3);
      } else this._items.push(t3);
      this._autoRefigureSizes ? this._figureSizes() : this._needsSizesFigured = true, this._needsDraw = true, t3.addHandler("bounds-change", this._delegatedFigureSizes), t3.addHandler("clip-change", this._delegatedFigureSizes), this.raiseEvent("add-item", { item: t3 });
    }, getItemAt: function(t3) {
      return e7.console.assert(void 0 !== t3, "[World.getItemAt] index is required"), this._items[t3];
    }, getIndexOfItem: function(t3) {
      return e7.console.assert(t3, "[World.getIndexOfItem] item is required"), e7.indexOf(this._items, t3);
    }, getItemCount: function() {
      return this._items.length;
    }, setItemIndex: function(t3, i3) {
      e7.console.assert(t3, "[World.setItemIndex] item is required"), e7.console.assert(void 0 !== i3, "[World.setItemIndex] index is required");
      var n3 = this.getIndexOfItem(t3);
      if (i3 >= this._items.length) throw new Error("Index bigger than number of layers.");
      i3 !== n3 && -1 !== n3 && (this._items.splice(n3, 1), this._items.splice(i3, 0, t3), this._needsDraw = true, this.raiseEvent("item-index-change", { item: t3, previousIndex: n3, newIndex: i3 }));
    }, removeItem: function(t3) {
      e7.console.assert(t3, "[World.removeItem] item is required");
      var i3 = e7.indexOf(this._items, t3);
      -1 !== i3 && (t3.removeHandler("bounds-change", this._delegatedFigureSizes), t3.removeHandler("clip-change", this._delegatedFigureSizes), t3.destroy(), this._items.splice(i3, 1), this._figureSizes(), this._needsDraw = true, this._raiseRemoveItem(t3));
    }, removeAll: function() {
      var e8, t3;
      for (this.viewer._cancelPendingImages(), t3 = 0; t3 < this._items.length; t3++) (e8 = this._items[t3]).removeHandler("bounds-change", this._delegatedFigureSizes), e8.removeHandler("clip-change", this._delegatedFigureSizes), e8.destroy();
      var i3 = this._items;
      for (this._items = [], this._figureSizes(), this._needsDraw = true, t3 = 0; t3 < i3.length; t3++) e8 = i3[t3], this._raiseRemoveItem(e8);
    }, resetItems: function() {
      for (var e8 = 0; e8 < this._items.length; e8++) this._items[e8].reset();
    }, update: function(e8) {
      for (var t3 = false, i3 = 0; i3 < this._items.length; i3++) t3 = this._items[i3].update(e8) || t3;
      return t3;
    }, draw: function() {
      this.viewer.drawer.draw(this._items), this._needsDraw = false, this._items.forEach((e8) => {
        this._needsDraw = e8.setDrawn() || this._needsDraw;
      });
    }, needsDraw: function() {
      for (var e8 = 0; e8 < this._items.length; e8++) if (this._items[e8].needsDraw()) return true;
      return this._needsDraw;
    }, getHomeBounds: function() {
      return this._homeBounds.clone();
    }, getContentFactor: function() {
      return this._contentFactor;
    }, setAutoRefigureSizes: function(e8) {
      this._autoRefigureSizes = e8, e8 & this._needsSizesFigured && (this._figureSizes(), this._needsSizesFigured = false);
    }, arrange: function(t3) {
      var i3, n3 = (t3 = t3 || {}).immediately || false, o2 = t3.layout || e7.DEFAULT_SETTINGS.collectionLayout, r2 = t3.rows || e7.DEFAULT_SETTINGS.collectionRows, s2 = t3.columns || e7.DEFAULT_SETTINGS.collectionColumns, a2 = t3.tileSize || e7.DEFAULT_SETTINGS.collectionTileSize, l2 = a2 + (t3.tileMargin || e7.DEFAULT_SETTINGS.collectionTileMargin);
      i3 = !t3.rows && s2 ? s2 : Math.ceil(this._items.length / r2);
      var c2, h2, u2, d2, p2, _2 = 0, g2 = 0;
      this.setAutoRefigureSizes(false);
      for (var m2 = 0; m2 < this._items.length; m2++) m2 && m2 % i3 == 0 && ("horizontal" === o2 ? (g2 += l2, _2 = 0) : (_2 += l2, g2 = 0)), d2 = (u2 = (h2 = (c2 = this._items[m2]).getBounds()).width > h2.height ? a2 : a2 * (h2.width / h2.height)) * (h2.height / h2.width), p2 = new e7.Point(_2 + (a2 - u2) / 2, g2 + (a2 - d2) / 2), c2.setPosition(p2, n3), c2.setWidth(u2, n3), "horizontal" === o2 ? _2 += l2 : g2 += l2;
      this.setAutoRefigureSizes(true);
    }, _figureSizes: function() {
      var t3 = this._homeBounds ? this._homeBounds.clone() : null, i3 = this._contentSize ? this._contentSize.clone() : null, n3 = this._contentFactor || 0;
      if (this._items.length) {
        var o2 = this._items[0], r2 = o2.getBounds();
        this._contentFactor = o2.getContentSize().x / r2.width;
        for (var s2 = o2.getClippedBounds().getBoundingBox(), a2 = s2.x, l2 = s2.y, c2 = s2.x + s2.width, h2 = s2.y + s2.height, u2 = 1; u2 < this._items.length; u2++) r2 = (o2 = this._items[u2]).getBounds(), this._contentFactor = Math.max(this._contentFactor, o2.getContentSize().x / r2.width), s2 = o2.getClippedBounds().getBoundingBox(), a2 = Math.min(a2, s2.x), l2 = Math.min(l2, s2.y), c2 = Math.max(c2, s2.x + s2.width), h2 = Math.max(h2, s2.y + s2.height);
        this._homeBounds = new e7.Rect(a2, l2, c2 - a2, h2 - l2), this._contentSize = new e7.Point(this._homeBounds.width * this._contentFactor, this._homeBounds.height * this._contentFactor);
      } else this._homeBounds = new e7.Rect(0, 0, 1, 1), this._contentSize = new e7.Point(1, 1), this._contentFactor = 1;
      this._contentFactor === n3 && this._homeBounds.equals(t3) && this._contentSize.equals(i3) || this.raiseEvent("metrics-change", {});
    }, _raiseRemoveItem: function(e8) {
      this.raiseEvent("remove-item", { item: e8 });
    } });
  }(t2);
}(eC);
const tC = Mx(eC.exports);
var iC = Object.defineProperty, nC = Object.getOwnPropertyDescriptor, oC = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? nC(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && iC(t2, i2, r2), r2;
};
let rC = class extends le {
  constructor() {
    super(...arguments), this.src2D = "", this._imageFiles = [], this._currentImageIdx = -1, this._currentSyncRotationAngle = 0, this._imageCenter = new tC.Point(0, 0), this._deltaX = 0, this._deltaY = 0, this._minZoomLevel = -1, this._lastDoublePressPointer = { clientX: -1, clientY: -1, id: -1 }, this._lastDoublePressTimeStamp = 0, this._isDown = false, this._viewer = null, this._viewerHomeBounds = new tC.Rect(0, 0, 0, 0, 0), this._checkIfZoomIsInvalid = Wx(() => {
      if (null == this._viewer) return;
      const e6 = this._viewer.viewport;
      e6.getZoom(true) < e6.getMinZoom() && (console.log("Zoom is invalid", e6.getZoom(true)), e6.applyConstraints());
    }, 250), this._checkIfCenterPosIsUpdated = Wx(() => {
      const [e6, t2] = this.getImageCenter();
      this._deltaX == e6 && this._deltaY == t2 || (this._deltaX = e6, this._deltaY = t2, this.dispatchEvent(new CustomEvent("image-shifted", { detail: { deltaX: e6, deltaY: t2 } })));
    }, 15);
  }
  render() {
    return U`
      <div id="image_viewer" @pointermove="${this._handlePointerMove}"></div>
      <div id="overlay"></div>
    `;
  }
  firstUpdated() {
    const e6 = this.renderRoot.querySelector("#image_viewer");
    if (null == e6) return void console.log("coudn't find element #image_viewer");
    this._viewer = tC({ element: e6, autoResize: true, showFullPageControl: false, showZoomControl: false, showHomeControl: false, showNavigator: false, navigatorPosition: "TOP_LEFT", minZoomImageRatio: 1, maxZoomLevel: 100, imageSmoothingEnabled: false, visibilityRatio: 1, constrainDuringPan: true, defaultZoomLevel: 0, placeholderFillStyle: "#FF8800", preserveViewport: true, loadTilesWithAjax: true, imageLoaderLimit: 1, zoomPerScroll: 1.4, gestureSettingsMouse: { scrollToZoom: true, clickToZoom: false, dblClickToZoom: false, pinchToZoom: false, zoomToRefPoint: false }, gestureSettingsPen: { scrollToZoom: true, clickToZoom: false, dblClickToZoom: false, pinchToZoom: false, zoomToRefPoint: false }, gestureSettingsUnknown: { scrollToZoom: true, clickToZoom: false, dblClickToZoom: false, pinchToZoom: false, zoomToRefPoint: false }, preserveOverlays: true }), console.log("Viewer 2D", this._viewer, this.clientHeight, this.clientWidth), this._viewer.addHandler("resize", this._handleImageResizeEvent.bind(this)), this._viewer.addHandler("tile-loaded", this._handleTileLoaded.bind(this)), this._viewer.addHandler("zoom", this._handleZoomChanged.bind(this)), this._viewer.addHandler("rotate", this._checkIfMinZoomChanged.bind(this)), this._viewer.addHandler("update-viewport", this._checkIfCenterPosIsUpdated.bind(this)), this._viewer.addHandler("canvas-press", /* @__PURE__ */ function(e7, t2 = 300) {
      let i2, n2 = 0;
      return function(...o2) {
        n2++, 1 === n2 ? i2 = window.setTimeout(() => {
          n2 = 0;
        }, t2) : (window.clearTimeout(i2), e7(...o2), n2 = 0);
      };
    }(this._handleCanvasDoublePressEvent.bind(this))), this._viewer.addHandler("viewport-change", this._handleViewportChangedEvent.bind(this)), this._viewer.addOverlay(this.hotspotOverlay, new tC.Point(0, 0), tC.Placement.CENTER), this.hotspotOverlay.style.opacity = "0";
    new jx(this.parentElement, "pointerdown").on("single-click", this._handleSingleClickEvent.bind(this)), this.measurementTool.on("change-image-hotspot-visibility", (e7) => this.hotspotOverlay.style.opacity = e7 ? "1" : "0"), this.measurementTool.on("update-image-hotspot-position-requested", this._updateImageHotspotPosition.bind(this));
  }
  connectWithSettings(e6) {
    e6.imageRotation.on("rotation-angle-changed", this.rotateImage.bind(this));
  }
  resize(e6, t2, i2) {
    this.style.height = e6 + "px", this.style.width = t2 + "px", this.style.transform = i2, this._checkIfZoomIsInvalid();
  }
  setImageFiles(e6) {
    this._imageFiles = e6, console.log("Image Files has been set");
  }
  async loadNextImage(e6) {
    if (e6 >= this._imageFiles.length) return void console.log("Image with index", e6, "cannot be loaded because only", this._imageFiles.length, "images exist");
    if (this._currentImageIdx == e6) return;
    if (this._currentImageIdx = e6, null == this._viewer) return;
    const t2 = await this.viewSettings.resolve2dFileURL(this._imageFiles[this._currentImageIdx]);
    this._viewer.open({ type: "image", url: t2 }), console.log("Loaded image", t2);
  }
  rotateImage(e6) {
    this._currentSyncRotationAngle != e6 && (this._currentSyncRotationAngle = e6, null != this._viewer && (this._viewer.viewport.setRotation(this._currentSyncRotationAngle), this._checkIfZoomIsInvalid()));
  }
  updatePointerEventsState(e6) {
    var _a3;
    (_a3 = this._viewer) == null ? void 0 : _a3.setMouseNavEnabled(!e6);
  }
  zoomImage(e6) {
    null != this._viewer && this._viewer.viewport.getZoom() != e6 && (console.log("Zooom image, ", e6), this._viewer.viewport.zoomTo(e6, void 0, true));
  }
  getZoomLevel() {
    return null == this._viewer ? 1 : this._viewer.viewport.getZoom();
  }
  getImageCenter() {
    if (null == this._viewer) return [0, 0];
    const e6 = this._viewer.viewport.imageToViewerElementCoordinates(this._imageCenter);
    return [0.5 * this.clientWidth - e6.x, 0.5 * this.clientHeight - e6.y];
  }
  _handlePointerMove(e6) {
    if (null == this._viewer || this._viewer.isMouseNavEnabled() || e6.pointerId != this._lastDoublePressPointer.id || !this._isDown) return;
    const t2 = e6.clientX - this._lastDoublePressPointer.clientX, i2 = e6.clientY - this._lastDoublePressPointer.clientY;
    0 === t2 && 0 === i2 || (this._lastDoublePressPointer.clientX = e6.clientX, this._lastDoublePressPointer.clientY = e6.clientY, this.dispatchEvent(new CustomEvent("pointer-move-in-disable-mode", { detail: { dx: t2, dy: i2 } })));
  }
  _handlePointerUpAfterDoublePress(e6) {
    this._isDown = false, null == this._viewer || this._viewer.isMouseNavEnabled() || e6.timeStamp - this._lastDoublePressTimeStamp > 700 && this.dispatchEvent(new Event("double-press-completed"));
  }
  _updateImageHotspotPosition(e6, t2) {
    console.log("Hotspot update-image-hotspot-position", e6, t2), null != this._viewer && this._viewer.updateOverlay(this.hotspotOverlay, this._viewer.viewport.imageToViewportCoordinates(e6, t2), tC.Placement.CENTER);
  }
  _handleSingleClickEvent(e6) {
    if (null == this._viewer || !this.measurementTool.isEditModeActive) return void console.log("Single click event: ignoring, viewer null or measurement tool not active.");
    const t2 = this.parentElement.getBoundingClientRect();
    var i2 = this._viewer.viewport.pointFromPixel(new tC.Point(e6.clientX - t2.x, e6.clientY - t2.y)), n2 = this._viewer.viewport.viewportToImageCoordinates(i2);
    this.measurementTool.addPointFromImage(n2.x, n2.y), this._viewer.updateOverlay(this.hotspotOverlay, i2, tC.Placement.CENTER), console.log("Hotspot in image added");
  }
  _handleCanvasDoublePressEvent(e6) {
    this._isDown = true;
    const t2 = e6.originalEvent;
    this._lastDoublePressPointer = { clientX: t2.clientX, clientY: t2.clientX, id: t2.pointerId }, this.dispatchEvent(new CustomEvent("double-press", { detail: { pointerEvent: t2 } })), null != this._viewer && (console.log("Add event handler"), this._lastDoublePressTimeStamp = t2.timeStamp, this.parentElement.addEventListener("pointerup", this._handlePointerUpAfterDoublePress.bind(this), { once: true }));
  }
  _handleViewportChangedEvent() {
    null != this._viewer && (this._viewerHomeBounds.equals(this._viewer.viewport.getHomeBounds()) || (this._viewerHomeBounds = this._viewer.viewport.getHomeBounds(), this.dispatchEvent(new CustomEvent("image-zoom-changed", { detail: { zoomLevel: this._viewer.viewport.getZoom(false) } }))));
  }
  _handleImageResizeEvent() {
    this._checkIfMinZoomChanged();
  }
  _handleTileLoaded(e6) {
    this._checkIfZoomIsInvalid(), this._checkIfMinZoomChanged(), this._checkIfCenterPosIsUpdated();
    const t2 = e6.tiledImage.source.dimensions;
    this._imageCenter.x = 0.5 * t2.x, this._imageCenter.y = 0.5 * t2.y;
  }
  _checkIfMinZoomChanged() {
    null != this._viewer && this._minZoomLevel != this._viewer.viewport.getMinZoom() && (this._minZoomLevel = this._viewer.viewport.getMinZoom(), console.log("emit min zoom changed", this._minZoomLevel), this.dispatchEvent(new CustomEvent("min-zoom-level-changed", { detail: { zoomLevel: this._minZoomLevel } })));
  }
  _handleZoomChanged(e6) {
    null != this._viewer && 1 != e6.immediately ? (console.log("image zoom changed 1", e6.zoom), this._checkIfZoomIsInvalid(), this.dispatchEvent(new CustomEvent("image-zoom-changed", { detail: { zoomLevel: e6.zoom } }))) : console.log("Return zoom", e6.zoom);
  }
};
rC.styles = r`
    :host {
      background-color: black;
    }

    #image_viewer {
      height: inherit;
      width: inherit;
      background-color: transparent;
    }

    .hotspot {
      display: block;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: none;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
      cursor: pointer;
      transition: opacity 0.3s;
      position: relative;
      font-size: 12px;
      padding: 0;
    }

    #overlay {
      display: none;
      background-color: transparent;
      opacity: 0;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: 3px solid rgb(0, 128, 200);
    }
  `, oC([de()], rC.prototype, "src2D", 2), oC([pe("#image_viewer")], rC.prototype, "parentElement", 2), oC([pe("#overlay")], rC.prototype, "hotspotOverlay", 2), oC([de({ type: Object })], rC.prototype, "measurementTool", 2), oC([de({ type: Object })], rC.prototype, "viewSettings", 2), rC = oC([he("viewer-2d")], rC);
const sC = 1, aC = 2, lC = (e6) => (...t2) => ({ _$litDirective$: e6, values: t2 });
let cC = class {
  constructor(e6) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(e6, t2, i2) {
    this._$Ct = e6, this._$AM = t2, this._$Ci = i2;
  }
  _$AS(e6, t2) {
    return this.update(e6, t2);
  }
  update(e6, t2) {
    return this.render(...t2);
  }
}, hC = class extends cC {
  constructor(e6) {
    if (super(e6), this.et = Q, e6.type !== aC) throw Error(this.constructor.directiveName + "() can only be used in child bindings");
  }
  render(e6) {
    if (e6 === Q || null == e6) return this.ft = void 0, this.et = e6;
    if (e6 === H) return e6;
    if ("string" != typeof e6) throw Error(this.constructor.directiveName + "() called with a non-string value");
    if (e6 === this.et) return this.ft;
    this.et = e6;
    const t2 = [e6];
    return t2.raw = t2, this.ft = { _$litType$: this.constructor.resultType, strings: t2, values: [] };
  }
};
hC.directiveName = "unsafeHTML", hC.resultType = 1;
const uC = lC(hC);
let dC = class extends hC {
};
dC.directiveName = "unsafeSVG", dC.resultType = 2;
const pC = lC(dC), _C = () => {
  const e6 = document.createElement("meta");
  return e6.setAttribute("name", "ui5-shared-resources"), e6.setAttribute("content", ""), e6;
}, gC = () => typeof document > "u" ? null : ((e6, t2 = document.body, i2) => {
  let n2 = document.querySelector(e6);
  return n2 || (n2 = i2 ? i2() : document.createElement(e6), t2.insertBefore(n2, t2.firstChild));
})('meta[name="ui5-shared-resources"]', document.head, _C), mC = (e6, t2) => {
  const i2 = e6.split(".");
  let n2 = gC();
  if (!n2) return t2;
  for (let e7 = 0; e7 < i2.length; e7++) {
    const o2 = i2[e7], r2 = e7 === i2.length - 1;
    Object.prototype.hasOwnProperty.call(n2, o2) || (n2[o2] = r2 ? t2 : {}), n2 = n2[o2];
  }
  return n2;
};
var fC = ((e6) => (e6["SAP-icons"] = "SAP-icons-v4", e6.horizon = "SAP-icons-v5", e6["SAP-icons-TNT"] = "tnt", e6.BusinessSuiteInAppSymbols = "business-suite", e6))(fC || {});
const vC = (e6) => fC[e6] ? fC[e6] : e6;
var AC = {}, bC = AC.hasOwnProperty, yC = AC.toString, wC = bC.toString, xC = wC.call(Object), CC = function(e6) {
  var t2, i2;
  return !(!e6 || "[object Object]" !== yC.call(e6)) && (!(t2 = Object.getPrototypeOf(e6)) || "function" == typeof (i2 = bC.call(t2, "constructor") && t2.constructor) && wC.call(i2) === xC);
}, SC = /* @__PURE__ */ Object.create(null), EC = function(e6, t2, i2, n2) {
  var o2, r2, s2, a2, l2, c2, h2 = arguments[2] || {}, u2 = 3, d2 = arguments.length, p2 = arguments[0] || false, _2 = arguments[1] ? void 0 : SC;
  for ("object" != typeof h2 && "function" != typeof h2 && (h2 = {}); u2 < d2; u2++) if (null != (l2 = arguments[u2])) for (a2 in l2) o2 = h2[a2], s2 = l2[a2], "__proto__" !== a2 && h2 !== s2 && (p2 && s2 && (CC(s2) || (r2 = Array.isArray(s2))) ? (r2 ? (r2 = false, c2 = o2 && Array.isArray(o2) ? o2 : []) : c2 = o2 && CC(o2) ? o2 : {}, h2[a2] = EC(p2, arguments[1], c2, s2)) : s2 !== _2 && (h2[a2] = s2));
  return h2;
};
const TC = function(e6, t2) {
  return EC(true, false, ...arguments);
};
let IC = class {
  constructor() {
    this._eventRegistry = /* @__PURE__ */ new Map();
  }
  attachEvent(e6, t2) {
    const i2 = this._eventRegistry, n2 = i2.get(e6);
    Array.isArray(n2) ? n2.includes(t2) || n2.push(t2) : i2.set(e6, [t2]);
  }
  detachEvent(e6, t2) {
    const i2 = this._eventRegistry, n2 = i2.get(e6);
    if (!n2) return;
    const o2 = n2.indexOf(t2);
    -1 !== o2 && n2.splice(o2, 1), 0 === n2.length && i2.delete(e6);
  }
  fireEvent(e6, t2) {
    const i2 = this._eventRegistry.get(e6);
    return i2 ? i2.map((e7) => e7.call(this, t2)) : [];
  }
  fireEventAsync(e6, t2) {
    return Promise.all(this.fireEvent(e6, t2));
  }
  isHandlerAttached(e6, t2) {
    const i2 = this._eventRegistry.get(e6);
    return !!i2 && i2.includes(t2);
  }
  hasListeners(e6) {
    return !!this._eventRegistry.get(e6);
  }
}, MC = class {
  constructor(...e6) {
  }
};
const BC = /* @__PURE__ */ new Map(), RC = /* @__PURE__ */ new Map(), kC = /* @__PURE__ */ new Map(), PC = new IC(), DC = (e6) => `componentFeatureLoad_${e6}`, LC = (e6) => BC.get(e6), FC = (e6) => RC.get(e6), NC = (e6) => {
  PC.fireEvent(DC(e6), void 0);
}, OC = { default: "sap_horizon", all: ["sap_fiori_3", "sap_fiori_3_dark", "sap_fiori_3_hcb", "sap_fiori_3_hcw", "sap_horizon", "sap_horizon_dark", "sap_horizon_hcb", "sap_horizon_hcw", "sap_horizon_exp", "sap_horizon_dark_exp", "sap_horizon_hcb_exp", "sap_horizon_hcw_exp"] }, UC = { default: "en", all: ["ar", "bg", "ca", "cnr", "cs", "cy", "da", "de", "el", "en", "en_GB", "en_US_sappsd", "en_US_saprigi", "en_US_saptrc", "es", "es_MX", "et", "fi", "fr", "fr_CA", "hi", "hr", "hu", "in", "it", "iw", "ja", "kk", "ko", "lt", "lv", "mk", "ms", "nl", "no", "pl", "pt_PT", "pt", "ro", "ru", "sh", "sk", "sl", "sr", "sv", "th", "tr", "uk", "vi", "zh_CN", "zh_TW"] }, zC = { default: "en", all: ["ar", "ar_EG", "ar_SA", "bg", "ca", "cnr", "cs", "da", "de", "de_AT", "de_CH", "el", "el_CY", "en", "en_AU", "en_GB", "en_HK", "en_IE", "en_IN", "en_NZ", "en_PG", "en_SG", "en_ZA", "es", "es_AR", "es_BO", "es_CL", "es_CO", "es_MX", "es_PE", "es_UY", "es_VE", "et", "fa", "fi", "fr", "fr_BE", "fr_CA", "fr_CH", "fr_LU", "he", "hi", "hr", "hu", "id", "it", "it_CH", "ja", "kk", "ko", "lt", "lv", "ms", "mk", "nb", "nl", "nl_BE", "pl", "pt", "pt_PT", "ro", "ru", "ru_UA", "sk", "sl", "sr", "sr_Latn", "sv", "th", "tr", "uk", "vi", "zh_CN", "zh_HK", "zh_SG", "zh_TW"] }, HC = OC.default, QC = OC.all, VC = UC.default, GC = zC.default, qC = zC.all, $C = typeof document > "u", WC = { search: () => $C ? "" : window.location.search }, jC = () => $C ? "" : window.location.href, XC = (e6) => {
  const t2 = ((e7) => {
    const t3 = document.querySelector(`META[name="${e7}"]`);
    return t3 && t3.getAttribute("content");
  })("sap-allowedThemeOrigins");
  return t2 && t2.split(",").some((t3) => "*" === t3 || e6 === t3.trim());
}, YC = (e6) => {
  let t2;
  try {
    if (e6.startsWith(".") || e6.startsWith("/")) t2 = new URL(e6, jC()).toString();
    else {
      const i2 = new URL(e6), n2 = i2.origin;
      t2 = n2 && XC(n2) ? i2.toString() : ((e7, t3) => {
        const i3 = new URL(e7).pathname;
        return new URL(i3, t3).toString();
      })(i2.toString(), jC());
    }
    return t2.endsWith("/") || (t2 = `${t2}/`), `${t2}UI5/`;
  } catch {
  }
};
var KC = ((e6) => (e6.Full = "full", e6.Basic = "basic", e6.Minimal = "minimal", e6.None = "none", e6))(KC || {});
const ZC = new IC(), JC = (e6) => {
  ZC.attachEvent("configurationReset", e6);
};
let eS = false, tS = { animationMode: KC.Full, theme: HC, themeRoot: void 0, rtl: void 0, language: void 0, timezone: void 0, calendarType: void 0, secondaryCalendarType: void 0, noConflict: false, formatSettings: {}, fetchDefaultLanguage: false, defaultFontLoading: true, enableDefaultTooltips: true };
const iS = /* @__PURE__ */ new Map();
iS.set("true", true), iS.set("false", false);
const nS = () => {
  const e6 = new URLSearchParams(WC.search());
  e6.forEach((e7, t2) => {
    const i2 = t2.split("sap-").length;
    0 === i2 || i2 === t2.split("sap-ui-").length || oS(t2, e7, "sap");
  }), e6.forEach((e7, t2) => {
    t2.startsWith("sap-ui") && oS(t2, e7, "sap-ui");
  });
}, oS = (e6, t2, i2) => {
  const n2 = t2.toLowerCase(), o2 = e6.split(`${i2}-`)[1];
  iS.has(t2) && (t2 = iS.get(n2)), "theme" === o2 ? (tS.theme = ((e7, t3) => "theme" === e7 && t3.includes("@") ? t3.split("@")[0] : t3)(o2, t2), t2 && t2.includes("@") && (tS.themeRoot = ((e7) => {
    const t3 = e7.split("@")[1];
    return YC(t3);
  })(t2))) : tS[o2] = t2;
}, rS = () => {
  typeof document > "u" || eS || (sS(), eS = true);
}, sS = (e6) => {
  (() => {
    const e7 = document.querySelector("[data-ui5-config]") || document.querySelector("[data-id='sap-ui-config']");
    let t2;
    if (e7) {
      try {
        t2 = JSON.parse(e7.innerHTML);
      } catch {
        console.warn("Incorrect data-sap-ui-config format. Please use JSON");
      }
      t2 && (tS = TC(tS, t2));
    }
  })(), nS(), (() => {
    const e7 = LC("OpenUI5Support");
    if (!e7 || !e7.isOpenUI5Detected()) return;
    const t2 = e7.getConfigurationSettingsObject();
    tS = TC(tS, t2);
  })();
};
const aS = { version: "2.4.0", major: 2, minor: 4, patch: 0, suffix: "", isNext: false, buildTime: 1730643247 };
let lS = { include: [/^ui5-/], exclude: [] };
const cS = /* @__PURE__ */ new Map(), hS = (e6) => {
  if (!cS.has(e6)) {
    const t2 = lS.include.some((t3) => e6.match(t3)) && !lS.exclude.some((t3) => e6.match(t3));
    cS.set(e6, t2);
  }
  return cS.get(e6);
}, uS = (e6) => {
  const t2 = `v${aS.version.replaceAll(".", "-")}`;
  return e6.replaceAll(/(--_?ui5)([^,:)\s]+)/g, `$1-${t2}$2`);
};
let dS;
const pS = /* @__PURE__ */ new Map(), _S = mC("Runtimes", []), gS = () => {
  if (void 0 === dS) {
    dS = _S.length;
    const e6 = aS;
    _S.push({ ...e6, get scopingSuffix() {
    }, get registeredTags() {
      return wS();
    }, get scopingRules() {
      return lS;
    }, alias: "", description: `Runtime ${dS} - ver ${e6.version}` });
  }
}, mS = () => dS, fS = (e6, t2) => {
  const i2 = `${e6},${t2}`;
  if (pS.has(i2)) return pS.get(i2);
  const n2 = _S[e6], o2 = _S[t2];
  if (!n2 || !o2) throw new Error("Invalid runtime index supplied");
  if (n2.isNext || o2.isNext) return n2.buildTime - o2.buildTime;
  const r2 = n2.major - o2.major;
  if (r2) return r2;
  const s2 = n2.minor - o2.minor;
  if (s2) return s2;
  const a2 = n2.patch - o2.patch;
  if (a2) return a2;
  const l2 = new Intl.Collator(void 0, { numeric: true, sensitivity: "base" }).compare(n2.suffix, o2.suffix);
  return pS.set(i2, l2), l2;
}, vS = mC("Tags", /* @__PURE__ */ new Map()), AS = /* @__PURE__ */ new Set();
let bS, yS = /* @__PURE__ */ new Map();
const wS = () => [...AS.values()], xS = () => {
  const e6 = _S, t2 = mS(), i2 = e6[t2];
  let n2 = "Multiple UI5 Web Components instances detected.";
  e6.length > 1 && (n2 = `${n2}
Loading order (versions before 1.1.0 not listed): ${e6.map((e7) => `
${e7.description}`).join("")}`), [...yS.keys()].forEach((o2) => {
    let r2, s2, a2;
    -1 === o2 ? (r2 = 1, s2 = { description: "Older unknown runtime" }) : (r2 = fS(t2, o2), s2 = e6[o2]), a2 = r2 > 0 ? "an older" : r2 < 0 ? "a newer" : "the same", n2 = `${n2}

"${i2.description}" failed to define ${yS.get(o2).size} tag(s) as they were defined by a runtime of ${a2} version "${s2.description}": ${[...yS.get(o2)].sort().join(", ")}.`, n2 = r2 > 0 ? `${n2}
WARNING! If your code uses features of the above web components, unavailable in ${s2.description}, it might not work as expected!` : `${n2}
Since the above web components were defined by the same or newer version runtime, they should be compatible with your code.`;
  }), n2 = `${n2}

To prevent other runtimes from defining tags that you use, consider using scoping or have third-party libraries use scoping: https://github.com/SAP/ui5-webcomponents/blob/main/docs/2-advanced/03-scoping.md.`, console.warn(n2);
}, CS = /* @__PURE__ */ new Set(), SS = /* @__PURE__ */ new Set(), ES = new IC(), TS = new class {
  constructor() {
    this.list = [], this.lookup = /* @__PURE__ */ new Set();
  }
  add(e6) {
    this.lookup.has(e6) || (this.list.push(e6), this.lookup.add(e6));
  }
  remove(e6) {
    this.lookup.has(e6) && (this.list = this.list.filter((t2) => t2 !== e6), this.lookup.delete(e6));
  }
  shift() {
    const e6 = this.list.shift();
    if (e6) return this.lookup.delete(e6), e6;
  }
  isEmpty() {
    return 0 === this.list.length;
  }
  isAdded(e6) {
    return this.lookup.has(e6);
  }
  process(e6) {
    let t2;
    const i2 = /* @__PURE__ */ new Map();
    for (t2 = this.shift(); t2; ) {
      const n2 = i2.get(t2) || 0;
      if (n2 > 10) throw new Error("Web component processed too many times this task, max allowed is: 10");
      e6(t2), i2.set(t2, n2 + 1), t2 = this.shift();
    }
  }
}();
let IS, MS, BS, RS;
const kS = async (e6) => {
  TS.add(e6), await DS();
}, PS = (e6) => {
  ES.fireEvent("beforeComponentRender", e6), SS.add(e6), e6._render();
}, DS = async () => {
  RS || (RS = new Promise((e6) => {
    window.requestAnimationFrame(() => {
      TS.process(PS), RS = null, e6(), BS || (BS = setTimeout(() => {
        BS = void 0, TS.isEmpty() && FS();
      }, 200));
    });
  })), await RS;
}, LS = async () => {
  await (() => {
    const e6 = wS().map((e7) => customElements.whenDefined(e7));
    return Promise.all(e6);
  })(), await (IS || (IS = new Promise((e6) => {
    MS = e6, window.requestAnimationFrame(() => {
      TS.isEmpty() && (IS = void 0, e6());
    });
  }), IS));
}, FS = () => {
  TS.isEmpty() && MS && (MS(), MS = void 0, IS = void 0);
}, NS = async (e6) => {
  SS.forEach((t2) => {
    const i2 = t2.constructor, n2 = i2.getMetadata().getTag(), o2 = ((e7) => CS.has(e7))(i2), r2 = i2.getMetadata().isLanguageAware(), s2 = i2.getMetadata().isThemeAware();
    (!e6 || e6.tag === n2 || e6.rtlAware && o2 || e6.languageAware && r2 || e6.themeAware && s2) && kS(t2);
  }), await LS();
}, OS = typeof document > "u", US = (e6, t2) => t2 ? `${e6}|${t2}` : e6, zS = (e6, t2, i2 = "", n2) => {
  const o2 = "string" == typeof e6 ? e6 : e6.content, r2 = mS(), s2 = new CSSStyleSheet();
  s2.replaceSync(o2), s2._ui5StyleId = US(t2, i2), n2 && (s2._ui5RuntimeIndex = r2, s2._ui5Theme = n2), document.adoptedStyleSheets = [...document.adoptedStyleSheets, s2];
}, HS = (e6, t2, i2 = "", n2) => {
  const o2 = "string" == typeof e6 ? e6 : e6.content, r2 = mS(), s2 = document.adoptedStyleSheets.find((e7) => e7._ui5StyleId === US(t2, i2));
  if (s2) if (n2) {
    const e7 = s2._ui5RuntimeIndex;
    (s2._ui5Theme !== n2 || ((e8) => void 0 === e8 || 1 === fS(mS(), parseInt(e8)))(e7)) && (s2.replaceSync(o2 || ""), s2._ui5RuntimeIndex = String(r2), s2._ui5Theme = n2);
  } else s2.replaceSync(o2 || "");
}, QS = (e6, t2 = "") => !!OS || !!document.adoptedStyleSheets.find((i2) => i2._ui5StyleId === US(e6, t2)), VS = (e6, t2, i2 = "", n2) => {
  QS(t2, i2) ? HS(e6, t2, i2, n2) : zS(e6, t2, i2, n2);
}, GS = new IC(), qS = "themeRegistered", $S = /* @__PURE__ */ new Map(), WS = /* @__PURE__ */ new Map(), jS = /* @__PURE__ */ new Map(), XS = /* @__PURE__ */ new Set(), YS = /* @__PURE__ */ new Set(), KS = (e6, t2, i2) => {
  WS.set(`${e6}/${t2}`, i2), XS.add(e6), YS.add(t2), ((e7) => {
    GS.fireEvent(qS, e7);
  })(t2);
}, ZS = async (e6, t2, i2) => {
  const n2 = `${e6}_${t2}_${i2 || ""}`, o2 = $S.get(n2);
  if (void 0 !== o2) return o2;
  if (!YS.has(t2)) {
    const i3 = [...YS.values()].join(", ");
    return console.warn(`You have requested a non-registered theme ${t2} - falling back to ${HC}. Registered themes are: ${i3}`), JS(e6, HC);
  }
  const [r2, s2] = await Promise.all([JS(e6, t2), i2 ? JS(e6, i2, true) : void 0]), a2 = ((e7, t3) => {
    if (void 0 === e7) return t3;
    if (void 0 === t3) return e7;
    const i3 = "string" == typeof t3 ? t3 : t3.content;
    return "string" == typeof e7 ? `${e7} ${i3}` : { content: `${e7.content} ${i3}`, packageName: e7.packageName, fileName: e7.fileName };
  })(r2, s2);
  return a2 && $S.set(n2, a2), a2;
}, JS = async (e6, t2, i2 = false) => {
  const n2 = (i2 ? jS : WS).get(`${e6}/${t2}`);
  if (!n2) return void (i2 || console.error(`Theme [${t2}] not registered for package [${e6}]`));
  let o2;
  try {
    o2 = await n2(t2);
  } catch (t3) {
    return void console.error(e6, t3.message);
  }
  return o2._ || o2;
}, eE = () => XS, tE = /* @__PURE__ */ new Set(), iE = () => {
  const e6 = (() => {
    let e7 = document.querySelector(".sapThemeMetaData-Base-baseLib") || document.querySelector(".sapThemeMetaData-UI5-sap-ui-core");
    if (e7) return getComputedStyle(e7).backgroundImage;
    e7 = document.createElement("span"), e7.style.display = "none", e7.classList.add("sapThemeMetaData-Base-baseLib"), document.body.appendChild(e7);
    let t3 = getComputedStyle(e7).backgroundImage;
    return "none" === t3 && (e7.classList.add("sapThemeMetaData-UI5-sap-ui-core"), t3 = getComputedStyle(e7).backgroundImage), document.body.removeChild(e7), t3;
  })();
  if (!e6 || "none" === e6) return;
  const t2 = ((e7) => {
    const t3 = /\(["']?data:text\/plain;utf-8,(.*?)['"]?\)$/i.exec(e7);
    if (t3 && t3.length >= 2) {
      let e8 = t3[1];
      if (e8 = e8.replace(/\\"/g, '"'), "{" !== e8.charAt(0) && "}" !== e8.charAt(e8.length - 1)) try {
        e8 = decodeURIComponent(e8);
      } catch {
        return void (tE.has("decode") || (console.warn("Malformed theme metadata string, unable to decodeURIComponent"), tE.add("decode")));
      }
      try {
        return JSON.parse(e8);
      } catch {
        tE.has("parse") || (console.warn("Malformed theme metadata string, unable to parse JSON"), tE.add("parse"));
      }
    }
  })(e6);
  return t2 ? ((e7) => {
    let t3, i2;
    try {
      t3 = e7.Path.match(/\.([^.]+)\.css_variables$/)[1], i2 = e7.Extends[0];
    } catch {
      return void (tE.has("object") || (console.warn("Malformed theme metadata Object", e7), tE.add("object")));
    }
    return { themeName: t3, baseThemeName: i2 };
  })(t2) : void 0;
}, nE = new IC();
let oE;
JC(() => {
  oE = void 0;
});
const rE = () => (void 0 === oE && (rS(), oE = tS.themeRoot), oE), sE = async (e6) => {
  const t2 = document.querySelector(`[sap-ui-webcomponents-theme="${e6}"]`);
  t2 && document.head.removeChild(t2), await ((e7, t3) => {
    const i2 = document.createElement("link");
    return i2.type = "text/css", i2.rel = "stylesheet", t3 && Object.entries(t3).forEach((e8) => i2.setAttribute(...e8)), i2.href = e7, document.head.appendChild(i2), new Promise((e8) => {
      i2.addEventListener("load", e8), i2.addEventListener("error", e8);
    });
  })(((e7) => `${rE()}Base/baseLib/${e7}/css_variables.css`)(e6), { "sap-ui-webcomponents-theme": e6 });
}, aE = "@ui5/webcomponents-theming", lE = async (e6) => {
  if (!eE().has(aE)) return;
  const t2 = await ZS(aE, e6);
  t2 && VS(t2, "data-ui5-theme-properties", aE, e6);
}, cE = () => {
  ((e6, t2 = "") => {
    document.adoptedStyleSheets = document.adoptedStyleSheets.filter((i2) => i2._ui5StyleId !== US(e6, t2));
  })("data-ui5-theme-properties", aE);
}, hE = async (e6) => {
  const t2 = await (async (e7) => {
    var _a3;
    const t3 = iE();
    if (t3) return t3;
    const i3 = LC("OpenUI5Support");
    if (i3 && i3.isOpenUI5Detected()) {
      if (i3.cssVariablesLoaded()) return { themeName: (_a3 = i3.getConfigurationSettingsObject()) == null ? void 0 : _a3.theme, baseThemeName: "" };
    } else if (rE()) return await sE(e7), iE();
  })(e6);
  t2 && e6 === t2.themeName ? cE() : await lE(e6);
  const i2 = ((e7) => YS.has(e7))(e6) ? e6 : t2 && t2.baseThemeName;
  await (async (e7, t3) => {
    const i3 = [...eE()].map(async (i4) => {
      if (i4 === aE) return;
      const n2 = await ZS(i4, e7, t3);
      n2 && VS(n2, `data-ui5-component-properties-${mS()}`, i4);
    });
    return Promise.all(i3);
  })(i2 || HC, t2 && t2.themeName === e6 ? e6 : void 0), ((e7) => {
    nE.fireEvent("themeLoaded", e7);
  })(e6);
}, uE = { packageName: "@ui5/webcomponents-base", fileName: "FontFace.css", content: `@font-face{font-family:"72";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular.woff2?ui5-webcomponents) format("woff2"),local("72");unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:"72full";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular-full.woff2?ui5-webcomponents) format("woff2"),local('72-full')}@font-face{font-family:"72";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format("woff2"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:"72full";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format("woff2")}@font-face{font-family:'72-Bold';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format("woff2"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Boldfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format("woff2")}@font-face{font-family:'72-Light';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light.woff2?ui5-webcomponents) format("woff2"),local('72-Light');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Lightfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light-full.woff2?ui5-webcomponents) format("woff2")}@font-face{font-family:'72Mono';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular.woff2?ui5-webcomponents) format('woff2'),local('72Mono');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Monofull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:'72Mono-Bold';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold.woff2?ui5-webcomponents) format('woff2'),local('72Mono-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Mono-Boldfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:"72Black";font-style:bold;font-weight:900;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black.woff2?ui5-webcomponents) format("woff2"),local('72Black');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Blackfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:"72-SemiboldDuplex";src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-SemiboldDuplex.woff2?ui5-webcomponents) format("woff2"),local('72-SemiboldDuplex');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}` }, dE = { packageName: "@ui5/webcomponents-base", fileName: "OverrideFontFace.css", content: "@font-face{font-family:'72override';unicode-range:U+0102-0103,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EB7,U+1EB8-1EC7,U+1EC8-1ECB,U+1ECC-1EE3,U+1EE4-1EF1,U+1EF4-1EF7;src:local('Arial'),local('Helvetica'),local('sans-serif')}" };
let pE;
JC(() => {
  pE = void 0;
});
const _E = () => (void 0 === pE && (rS(), pE = tS.defaultFontLoading), pE), gE = () => {
  const e6 = document.querySelector("head>style[data-ui5-font-face]");
  !_E() || e6 || QS("data-ui5-font-face") || zS(uE, "data-ui5-font-face");
}, mE = () => {
  QS("data-ui5-font-face-override") || zS(dE, "data-ui5-font-face-override");
}, fE = { packageName: "@ui5/webcomponents-base", fileName: "SystemCSSVars.css", content: ":root{--_ui5_content_density:cozy}.sapUiSizeCompact,.ui5-content-density-compact,[data-ui5-compact-size]{--_ui5_content_density:compact}" }, vE = typeof document > "u", AE = { get userAgent() {
  return vE ? "" : navigator.userAgent;
}, get touch() {
  return !vE && ("ontouchstart" in window || navigator.maxTouchPoints > 0);
}, get chrome() {
  return !vE && /(Chrome|CriOS)/.test(AE.userAgent);
}, get firefox() {
  return !vE && /Firefox/.test(AE.userAgent);
}, get safari() {
  return !vE && (!AE.chrome && /(Version|PhantomJS)\/(\d+\.\d+).*Safari/.test(AE.userAgent));
}, get webkit() {
  return !vE && /webkit/.test(AE.userAgent);
}, get windows() {
  return !vE && -1 !== navigator.platform.indexOf("Win");
}, get macOS() {
  return !vE && !!navigator.userAgent.match(/Macintosh|Mac OS X/i);
}, get iOS() {
  return !vE && (!!navigator.platform.match(/iPhone|iPad|iPod/) || !(!AE.userAgent.match(/Mac/) || !("ontouchend" in document)));
}, get android() {
  return !vE && (!AE.windows && /Android/.test(AE.userAgent));
}, get androidPhone() {
  return !vE && (AE.android && /(?=android)(?=.*mobile)/i.test(AE.userAgent));
}, get ipad() {
  return !vE && (/ipad/i.test(AE.userAgent) || /Macintosh/i.test(AE.userAgent) && "ontouchend" in document);
}, _isPhone: () => (CE(), AE.touch && !wE) };
let bE, yE, wE;
const xE = () => {
  if (vE || !AE.windows) return false;
  if (void 0 === bE) {
    const e6 = AE.userAgent.match(/Windows NT (\d+).(\d)/);
    bE = e6 ? parseFloat(e6[1]) : 0;
  }
  return bE >= 8;
}, CE = () => {
  if (vE) return false;
  if (void 0 === wE) {
    if (AE.ipad) return void (wE = true);
    if (AE.touch) {
      if (xE()) return void (wE = true);
      if (AE.chrome && AE.android) return void (wE = !/Mobile Safari\/[.0-9]+/.test(AE.userAgent));
      let e6 = window.devicePixelRatio ? window.devicePixelRatio : 1;
      return AE.android && (() => {
        if (vE || !AE.webkit) return false;
        if (void 0 === yE) {
          const e7 = AE.userAgent.match(/(webkit)[ /]([\w.]+)/);
          yE = e7 ? parseFloat(e7[1]) : 0;
        }
        return yE >= 537.1;
      })() && (e6 = 1), void (wE = Math.min(window.screen.width / e6, window.screen.height / e6) >= 600);
    }
    wE = -1 !== AE.userAgent.indexOf("Touch") || AE.android && !AE.androidPhone;
  }
}, SE = () => AE.touch, EE = () => AE.safari, TE = () => AE._isPhone(), IE = () => !vE && (CE(), !((AE.touch || xE()) && wE || TE()) || xE()), ME = () => AE.iOS;
let BE = false;
let RE, kE = false;
const PE = new IC(), DE = async () => {
  if (void 0 !== RE) return RE;
  return RE = new Promise(async (e6) => {
    if (gS(), typeof document > "u") return void e6();
    ((e7) => {
      GS.attachEvent(qS, e7);
    })(LE);
    const t2 = LC("OpenUI5Support"), i2 = !!t2 && t2.isOpenUI5Detected(), n2 = LC("F6Navigation");
    t2 && await t2.init(), n2 && !i2 && n2.init(), await new Promise((e7) => {
      document.body ? e7() : document.addEventListener("DOMContentLoaded", () => {
        e7();
      });
    }), await hE(NE()), t2 && t2.attachListeners(), (() => {
      const e7 = LC("OpenUI5Support");
      (!e7 || !e7.isOpenUI5Detected()) && gE(), mE();
    })(), QS("data-ui5-system-css-vars") || zS(fE, "data-ui5-system-css-vars"), EE() && ME() && !BE && (document.body.addEventListener("touchstart", () => {
    }), BE = true), e6(), kE = true, PE.fireEvent("boot");
  }), RE;
}, LE = (e6) => {
  kE && e6 === NE() && hE(NE());
};
let FE;
JC(() => {
  FE = void 0;
});
const NE = () => (void 0 === FE && (rS(), FE = tS.theme), FE), OE = (e6) => QC.includes(e6);
var UE = ((e6) => (e6.SAPIconsV4 = "SAP-icons-v4", e6.SAPIconsV5 = "SAP-icons-v5", e6.SAPIconsTNTV2 = "tnt-v2", e6.SAPIconsTNTV3 = "tnt-v3", e6.SAPBSIconsV1 = "business-suite-v1", e6.SAPBSIconsV2 = "business-suite-v2", e6))(UE || {});
const zE = /* @__PURE__ */ new Map();
zE.set("SAP-icons", { legacy: "SAP-icons-v4", sap_horizon: "SAP-icons-v5" }), zE.set("tnt", { legacy: "tnt-v2", sap_horizon: "tnt-v3" }), zE.set("business-suite", { legacy: "business-suite-v1", sap_horizon: "business-suite-v2" });
const HE = (e6) => {
  const t2 = (() => {
    var _a3, _b3;
    const e7 = NE();
    return OE(e7) ? !e7.startsWith("sap_horizon") : !((_b3 = (_a3 = iE()) == null ? void 0 : _a3.baseThemeName) == null ? void 0 : _b3.startsWith("sap_horizon"));
  })() ? "legacy" : "sap_horizon";
  return zE.has(e6) ? zE.get(e6)[t2] : e6;
}, QE = /* @__PURE__ */ new Map(), VE = (e6) => {
  const t2 = ((e7) => QE.get(e7))(NE());
  return !e6 && t2 ? vC(t2) : HE(e6 || "SAP-icons");
}, GE = typeof document > "u", qE = new IC(), $E = (e6) => {
  qE.attachEvent("languageChange", e6);
};
let WE, jE;
JC(() => {
  WE = void 0, jE = void 0;
});
const XE = () => (void 0 === WE && (rS(), WE = tS.language), WE), YE = () => (void 0 === jE && (rS(), jE = tS.fetchDefaultLanguage), jE), KE = /^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i;
let ZE = class {
  constructor(e6) {
    const t2 = KE.exec(e6.replace(/_/g, "-"));
    if (null === t2) throw new Error(`The given language ${e6} does not adhere to BCP-47.`);
    this.sLocaleId = e6, this.sLanguage = t2[1] || VC, this.sScript = t2[2] || "", this.sRegion = t2[3] || "", this.sVariant = t2[4] && t2[4].slice(1) || null, this.sExtension = t2[5] && t2[5].slice(1) || null, this.sPrivateUse = t2[6] || null, this.sLanguage && (this.sLanguage = this.sLanguage.toLowerCase()), this.sScript && (this.sScript = this.sScript.toLowerCase().replace(/^[a-z]/, (e7) => e7.toUpperCase())), this.sRegion && (this.sRegion = this.sRegion.toUpperCase());
  }
  getLanguage() {
    return this.sLanguage;
  }
  getScript() {
    return this.sScript;
  }
  getRegion() {
    return this.sRegion;
  }
  getVariant() {
    return this.sVariant;
  }
  getVariantSubtags() {
    return this.sVariant ? this.sVariant.split("-") : [];
  }
  getExtension() {
    return this.sExtension;
  }
  getExtensionSubtags() {
    return this.sExtension ? this.sExtension.slice(2).split("-") : [];
  }
  getPrivateUse() {
    return this.sPrivateUse;
  }
  getPrivateUseSubtags() {
    return this.sPrivateUse ? this.sPrivateUse.slice(2).split("-") : [];
  }
  hasPrivateUseSubtag(e6) {
    return this.getPrivateUseSubtags().indexOf(e6) >= 0;
  }
  toString() {
    const e6 = [this.sLanguage];
    return this.sScript && e6.push(this.sScript), this.sRegion && e6.push(this.sRegion), this.sVariant && e6.push(this.sVariant), this.sExtension && e6.push(this.sExtension), this.sPrivateUse && e6.push(this.sPrivateUse), e6.join("-");
  }
};
const JE = /* @__PURE__ */ new Map(), eT = (e6) => (JE.has(e6) || JE.set(e6, new ZE(e6)), JE.get(e6)), tT = (e6) => {
  const t2 = XE();
  return t2 ? eT(t2) : ((e7) => {
    try {
      if (e7 && "string" == typeof e7) return eT(e7);
    } catch {
    }
    return new ZE(GC);
  })((() => {
    if (GE) return VC;
    const e7 = navigator.languages;
    return e7 && e7[0] || navigator.language || VC;
  })());
}, iT = /^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i, nT = /(?:^|-)(saptrc|sappsd)(?:-|$)/i, oT = { he: "iw", yi: "ji", nb: "no", sr: "sh" }, rT = (e6) => {
  if (!e6) return GC;
  if ("zh_HK" === e6) return "zh_TW";
  const t2 = e6.lastIndexOf("_");
  return t2 >= 0 ? e6.slice(0, t2) : e6 !== GC ? GC : "";
}, sT = /* @__PURE__ */ new Set(), aT = /* @__PURE__ */ new Set(), lT = /* @__PURE__ */ new Map(), cT = /* @__PURE__ */ new Map(), hT = /* @__PURE__ */ new Map(), uT = (e6, t2) => {
  lT.set(e6, t2);
}, dT = (e6, t2) => {
  const i2 = `${e6}/${t2}`;
  return hT.has(i2);
}, pT = (e6, t2) => t2 !== VC && !dT(e6, t2), _T = async (e6) => {
  const t2 = tT().getLanguage(), i2 = tT().getRegion(), n2 = tT().getVariant();
  let o2 = t2 + (i2 ? `-${i2}` : "") + (n2 ? `-${n2}` : "");
  if (pT(e6, o2)) for (o2 = ((e7) => {
    let t3;
    if (!e7) return GC;
    if ("string" == typeof e7 && (t3 = iT.exec(e7.replace(/_/g, "-")))) {
      let e8 = t3[1].toLowerCase(), i3 = t3[3] ? t3[3].toUpperCase() : void 0;
      const n3 = t3[2] ? t3[2].toLowerCase() : void 0, o3 = t3[4] ? t3[4].slice(1) : void 0, r3 = t3[6];
      return e8 = oT[e8] || e8, r3 && (t3 = nT.exec(r3)) || o3 && (t3 = nT.exec(o3)) ? `en_US_${t3[1].toLowerCase()}` : ("zh" === e8 && !i3 && ("hans" === n3 ? i3 = "CN" : "hant" === n3 && (i3 = "TW")), e8 + (i3 ? "_" + i3 + (o3 ? "_" + o3.replace("-", "_") : "") : ""));
    }
    return GC;
  })(o2); pT(e6, o2); ) o2 = rT(o2);
  const r2 = YE();
  if (o2 !== VC || r2) if (dT(e6, o2)) try {
    const t3 = await ((e7, t4) => {
      const i3 = `${e7}/${t4}`, n3 = hT.get(i3);
      return n3 && !cT.get(i3) && cT.set(i3, n3(t4)), cT.get(i3);
    })(e6, o2);
    uT(e6, t3);
  } catch (e7) {
    const t3 = e7;
    aT.has(t3.message) || (aT.add(t3.message), console.error(t3.message));
  }
  else ((e7) => {
    sT.has(e7) || (console.warn(`[${e7}]: Message bundle assets are not configured. Falling back to English texts.`, ` Add \`import "${e7}/dist/Assets.js"\` in your bundle and make sure your build tool supports dynamic imports and JSON imports. See section "Assets" in the documentation for more information.`), sT.add(e7));
  })(e6);
  else uT(e6, null);
};
$E((e6) => {
  const t2 = [...lT.keys()];
  return Promise.all(t2.map(_T));
});
const gT = /('')|'([^']+(?:''[^']*)*)(?:'|$)|\{([0-9]+(?:\s*,[^{}]*)?)\}|[{}]/g, mT = /* @__PURE__ */ new Map();
let fT = class {
  constructor(e6) {
    this.packageName = e6;
  }
  getText(e6, ...t2) {
    if ("string" == typeof e6 && (e6 = { key: e6, defaultText: e6 }), !e6 || !e6.key) return "";
    const i2 = ((e7) => lT.get(e7))(this.packageName);
    i2 && !i2[e6.key] && console.warn(`Key ${e6.key} not found in the i18n bundle, the default text will be used`);
    return ((e7, t3) => (t3 = t3 || [], e7.replace(gT, (e8, i3, n2, o2, r2) => {
      if (i3) return "'";
      if (n2) return n2.replace(/''/g, "'");
      if (o2) {
        const e9 = "string" == typeof o2 ? parseInt(o2) : o2;
        return String(t3[e9]);
      }
      throw new Error(`[i18n]: pattern syntax error at pos ${r2}`);
    })))(i2 && i2[e6.key] ? i2[e6.key] : e6.defaultText || e6.key, t2);
  }
};
const vT = async (e6) => (await _T(e6), ((e7) => {
  if (mT.has(e7)) return mT.get(e7);
  const t2 = new fT(e7);
  return mT.set(e7, t2), t2;
})(e6)), AT = /* @__PURE__ */ new Map(), bT = mC("SVGIcons.registry", /* @__PURE__ */ new Map()), yT = mC("SVGIcons.promises", /* @__PURE__ */ new Map()), wT = "ICON_NOT_FOUND", xT = (e6) => {
  Object.keys(e6.data).forEach((t2) => {
    const i2 = e6.data[t2];
    CT(t2, { pathData: i2.path || i2.paths, ltr: i2.ltr, accData: i2.acc, collection: e6.collection, packageName: e6.packageName });
  });
}, CT = (e6, t2) => {
  const i2 = `${t2.collection}/${e6}`;
  bT.set(i2, { pathData: t2.pathData, ltr: t2.ltr, accData: t2.accData, packageName: t2.packageName, customTemplate: t2.customTemplate, viewBox: t2.viewBox, collection: t2.collection });
}, ST = (e6) => {
  let t2;
  return e6.startsWith("sap-icon://") && (e6 = e6.replace("sap-icon://", "")), [e6, t2] = e6.split("/").reverse(), e6 = e6.replace("icon-", ""), t2 && (t2 = vC(t2)), { name: e6, collection: t2 };
}, ET = (e6) => {
  const { name: t2, collection: i2 } = ST(e6);
  return IT(i2, t2);
}, TT = async (e6) => {
  const { name: t2, collection: i2 } = ST(e6);
  let n2 = wT;
  try {
    n2 = await (async (e7) => {
      if (!yT.has(e7)) {
        if (!AT.has(e7)) throw new Error(`No loader registered for the ${e7} icons collection. Probably you forgot to import the "AllIcons.js" module for the respective package.`);
        const t3 = AT.get(e7);
        yT.set(e7, t3(e7));
      }
      return yT.get(e7);
    })(VE(i2));
  } catch (e7) {
    console.error(e7.message);
  }
  if (n2 === wT) return n2;
  return IT(i2, t2) || (Array.isArray(n2) ? n2.forEach((e7) => {
    xT(e7), ((e8, t3) => {
      zE.has(e8) ? zE.set(e8, { ...t3, ...zE.get(e8) }) : zE.set(e8, t3);
    })(i2, { [e7.themeFamily || "legacy"]: e7.collection });
  }) : xT(n2), IT(i2, t2));
}, IT = (e6, t2) => {
  const i2 = `${VE(e6)}/${t2}`;
  return bT.get(i2);
}, MT = /* @__PURE__ */ new Map(), BT = /* @__PURE__ */ new Map(), RT = /* @__PURE__ */ new Map(), kT = (e6) => {
  if (!MT.has(e6)) {
    const t2 = DT(e6.split("-"));
    MT.set(e6, t2);
  }
  return MT.get(e6);
}, PT = (e6) => {
  if (!BT.has(e6)) {
    const t2 = e6.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
    BT.set(e6, t2);
  }
  return BT.get(e6);
}, DT = (e6) => e6.map((e7, t2) => 0 === t2 ? e7.toLowerCase() : e7.charAt(0).toUpperCase() + e7.slice(1).toLowerCase()).join(""), LT = (e6) => {
  const t2 = RT.get(e6);
  if (t2) return t2;
  const i2 = kT(e6), n2 = i2.charAt(0).toUpperCase() + i2.slice(1);
  return RT.set(e6, n2), n2;
}, FT = (e6) => e6 instanceof HTMLSlotElement ? e6.assignedNodes({ flatten: true }).filter((e7) => e7 instanceof HTMLElement) : [e6], NT = (e6) => e6.reduce((e7, t2) => e7.concat(FT(t2)), []);
let OT = class {
  constructor(e6) {
    this.metadata = e6;
  }
  getInitialState() {
    if (Object.prototype.hasOwnProperty.call(this, "_initialState")) return this._initialState;
    const e6 = {};
    if (this.slotsAreManaged()) {
      const t2 = this.getSlots();
      for (const [i2, n2] of Object.entries(t2)) {
        const t3 = n2.propertyName || i2;
        e6[t3] = [], e6[kT(t3)] = e6[t3];
      }
    }
    return this._initialState = e6, e6;
  }
  static validateSlotValue(e6, t2) {
    return UT(e6, t2);
  }
  getPureTag() {
    return this.metadata.tag || "";
  }
  getFeatures() {
    return this.metadata.features || [];
  }
  getTag() {
    const e6 = this.metadata.tag;
    if (!e6) return "";
    const t2 = ((e7) => {
      hS(e7);
    })(e6);
    return t2 ? `${e6}-${t2}` : e6;
  }
  hasAttribute(e6) {
    const t2 = this.getProperties()[e6];
    return t2.type !== Object && t2.type !== Array && !t2.noAttribute;
  }
  getPropertiesList() {
    return Object.keys(this.getProperties());
  }
  getAttributesList() {
    return this.getPropertiesList().filter(this.hasAttribute.bind(this)).map(PT);
  }
  canSlotText() {
    var _a3;
    return ((_a3 = this.getSlots().default) == null ? void 0 : _a3.type) === Node;
  }
  hasSlots() {
    return !!Object.entries(this.getSlots()).length;
  }
  hasIndividualSlots() {
    return this.slotsAreManaged() && Object.values(this.getSlots()).some((e6) => e6.individualSlots);
  }
  slotsAreManaged() {
    return !!this.metadata.managedSlots;
  }
  supportsF6FastNavigation() {
    return !!this.metadata.fastNavigation;
  }
  getProperties() {
    return this.metadata.properties || (this.metadata.properties = {}), this.metadata.properties;
  }
  getEvents() {
    return this.metadata.events || (this.metadata.events = {}), this.metadata.events;
  }
  getSlots() {
    return this.metadata.slots || (this.metadata.slots = {}), this.metadata.slots;
  }
  isLanguageAware() {
    return !!this.metadata.languageAware;
  }
  isThemeAware() {
    return !!this.metadata.themeAware;
  }
  needsCLDR() {
    return !!this.metadata.cldr;
  }
  getShadowRootOptions() {
    return this.metadata.shadowRootOptions || {};
  }
  isFormAssociated() {
    return !!this.metadata.formAssociated;
  }
  shouldInvalidateOnChildChange(e6, t2, i2) {
    const n2 = this.getSlots()[e6].invalidateOnChildChange;
    if (void 0 === n2) return false;
    if ("boolean" == typeof n2) return n2;
    if ("object" == typeof n2) {
      if ("property" === t2) {
        if (void 0 === n2.properties) return false;
        if ("boolean" == typeof n2.properties) return n2.properties;
        if (Array.isArray(n2.properties)) return n2.properties.includes(i2);
        throw new Error("Wrong format for invalidateOnChildChange.properties: boolean or array is expected");
      }
      if ("slot" === t2) {
        if (void 0 === n2.slots) return false;
        if ("boolean" == typeof n2.slots) return n2.slots;
        if (Array.isArray(n2.slots)) return n2.slots.includes(i2);
        throw new Error("Wrong format for invalidateOnChildChange.slots: boolean or array is expected");
      }
    }
    throw new Error("Wrong format for invalidateOnChildChange: boolean or object is expected");
  }
  getI18n() {
    return this.metadata.i18n || (this.metadata.i18n = {}), this.metadata.i18n;
  }
};
const UT = (e6, t2) => (e6 && FT(e6).forEach((e7) => {
  if (!(e7 instanceof t2.type)) throw new Error(`The element is not of type ${t2.type.toString()}`);
}), e6), zT = (e6) => {
  mC("CustomStyle.eventProvider", new IC()).attachEvent("CustomCSSChange", e6);
};
zT((e6) => {
  NS({ tag: e6 });
});
const HT = (e6) => {
  const t2 = mC("CustomStyle.customCSSFor", {});
  return t2[e6] ? t2[e6].join("") : "";
}, QT = (e6) => Array.isArray(e6) ? e6.filter((e7) => !!e7).flat(10).map((e7) => "string" == typeof e7 ? e7 : e7.content).join(" ") : "string" == typeof e6 ? e6 : e6.content, VT = /* @__PURE__ */ new Map();
zT((e6) => {
  VT.delete(`${e6}_normal`);
});
const GT = /* @__PURE__ */ new Map();
zT((e6) => {
  GT.delete(`${e6}_normal`);
});
const qT = (e6) => {
  const t2 = `${e6.getMetadata().getTag()}_normal`;
  if (!GT.has(t2)) {
    const i2 = ((e7) => {
      const t3 = e7.getMetadata().getTag(), i3 = `${t3}_normal`, n3 = LC("OpenUI5Enablement");
      if (!VT.has(i3)) {
        let o2 = "";
        n3 && (o2 = QT(n3.getBusyIndicatorStyles()));
        const r2 = HT(t3) || "", s2 = `${QT(e7.styles)} ${r2} ${o2}`;
        VT.set(i3, s2);
      }
      return VT.get(i3);
    })(e6), n2 = new CSSStyleSheet();
    n2.replaceSync(i2), GT.set(t2, [n2]);
  }
  return GT.get(t2);
}, $T = [], WT = /* @__PURE__ */ new WeakMap(), jT = ["value-changed", "click"];
let XT;
JC(() => {
  XT = void 0;
});
const YT = () => (void 0 === XT && (rS(), XT = tS.noConflict), XT), KT = (e6) => {
  const t2 = YT();
  return !((e7) => jT.includes(e7))(e6) && (true === t2 || !((e7) => {
    const t3 = YT();
    return !("boolean" != typeof t3 && t3.events && t3.events.includes && t3.events.includes(e7));
  })(e6));
}, ZT = ["disabled", "title", "hidden", "role", "draggable"], JT = (e6) => !(!ZT.includes(e6) && !e6.startsWith("aria")) || ![HTMLElement, Element, Node].some((t2) => t2.prototype.hasOwnProperty(e6)), eI = (e6, t2) => {
  if (e6.length !== t2.length) return false;
  for (let i2 = 0; i2 < e6.length; i2++) if (e6[i2] !== t2[i2]) return false;
  return true;
}, tI = (e6, t2) => {
  const i2 = iI(t2);
  return e6.call(t2, t2, i2, void 0);
}, iI = (e6) => {
  const t2 = e6.constructor, i2 = t2.getMetadata().getPureTag(), n2 = t2.getUniqueDependencies().map((e7) => e7.getMetadata().getPureTag()).filter(hS);
  return hS(i2) && n2.push(i2), n2;
}, nI = (e6) => {
  var _a3, _b3;
  if ((_a3 = e6._internals) == null ? void 0 : _a3.form) {
    if (oI(e6), !e6.name) return void ((_b3 = e6._internals) == null ? void 0 : _b3.setFormValue(null));
    e6._internals.setFormValue(e6.formFormattedValue);
  }
}, oI = async (e6) => {
  var _a3, _b3;
  if ((_a3 = e6._internals) == null ? void 0 : _a3.form) if (e6.formValidity && Object.keys(e6.formValidity).some((e7) => e7)) {
    const t2 = await ((_b3 = e6.formElementAnchor) == null ? void 0 : _b3.call(e6));
    e6._internals.setValidity(e6.formValidity, e6.formValidityMessage, t2);
  } else e6._internals.setValidity({});
}, rI = (e6) => {
  var _a3, _b3;
  (_b3 = (_a3 = e6._internals) == null ? void 0 : _a3.form) == null ? void 0 : _b3.requestSubmit();
}, sI = (e6) => "formFormattedValue" in e6 && "name" in e6, aI = /* @__PURE__ */ new Map(), lI = /* @__PURE__ */ new Map(), cI = /* @__PURE__ */ new Map(), hI = /* @__PURE__ */ new Set();
let uI = false;
const dI = { iw: "he", ji: "yi", in: "id" }, pI = (e6) => {
  uI || (console.warn(`[LocaleData] Supported locale "${e6}" not configured, import the "Assets.js" module from the webcomponents package you are using.`), uI = true);
}, _I = (e6, t2) => {
  aI.set(e6, t2);
}, gI = async (e6, t2, i2) => {
  const n2 = ((e7, t3, i3) => {
    "no" === (e7 = e7 && dI[e7] || e7) && (e7 = "nb"), "zh" === e7 && !t3 && ("Hans" === i3 ? t3 = "CN" : "Hant" === i3 && (t3 = "TW")), ("sh" === e7 || "sr" === e7 && "Latn" === i3) && (e7 = "sr", t3 = "Latn");
    let n3 = `${e7}_${t3}`;
    return qC.includes(n3) ? lI.has(n3) ? n3 : (pI(n3), GC) : (n3 = e7, qC.includes(n3) ? lI.has(n3) ? n3 : (pI(n3), GC) : GC);
  })(e6, t2, i2), o2 = LC("OpenUI5Support");
  if (o2) {
    const e7 = o2.getLocaleDataObject();
    if (e7) return void _I(n2, e7);
  }
  try {
    const e7 = await ((e8) => {
      if (!cI.get(e8)) {
        const t3 = lI.get(e8);
        if (!t3) throw new Error(`CLDR data for locale ${e8} is not loaded!`);
        cI.set(e8, t3(e8));
      }
      return cI.get(e8);
    })(n2);
    _I(n2, e7);
  } catch (e7) {
    const t3 = e7;
    hI.has(t3.message) || (hI.add(t3.message), console.error(t3.message));
  }
};
((e6, t2) => {
  lI.set(e6, t2);
})("en", async () => (await fetch("https://sdk.openui5.org/1.120.17/resources/sap/ui/core/cldr/en.json")).json()), $E(() => {
  const e6 = tT();
  return gI(e6.getLanguage(), e6.getRegion(), e6.getScript());
});
let mI = 0;
const fI = /* @__PURE__ */ new Map(), vI = /* @__PURE__ */ new Map(), AI = { fromAttribute: (e6, t2) => t2 === Boolean ? null !== e6 : t2 === Number ? null === e6 ? void 0 : parseFloat(e6) : e6, toAttribute: (e6, t2) => t2 === Boolean ? e6 ? "" : null : t2 === Object || t2 === Array || null == e6 ? null : String(e6) };
function bI(e6) {
  this._suppressInvalidation || (this.onInvalidation(e6), this._changedState.push(e6), kS(this), this._invalidationEventProvider.fireEvent("invalidate", { ...e6, target: this }));
}
function yI(e6, t2) {
  do {
    const i2 = Object.getOwnPropertyDescriptor(e6, t2);
    if (i2) return i2;
    e6 = Object.getPrototypeOf(e6);
  } while (e6 && e6 !== HTMLElement.prototype);
}
let wI = (_a2 = class extends HTMLElement {
  constructor() {
    super(), this._rendered = false;
    const e6 = this.constructor;
    let t2;
    this._changedState = [], this._suppressInvalidation = true, this._inDOM = false, this._fullyConnected = false, this._childChangeListeners = /* @__PURE__ */ new Map(), this._slotChangeListeners = /* @__PURE__ */ new Map(), this._invalidationEventProvider = new IC(), this._componentStateFinalizedEventProvider = new IC(), this._domRefReadyPromise = new Promise((e7) => {
      t2 = e7;
    }), this._domRefReadyPromise._deferredResolve = t2, this._doNotSyncAttributes = /* @__PURE__ */ new Set(), this._slotsAssignedNodes = /* @__PURE__ */ new WeakMap(), this._state = { ...e6.getMetadata().getInitialState() }, this.initializedProperties = /* @__PURE__ */ new Map(), this.constructor.getMetadata().getPropertiesList().forEach((e7) => {
      if (this.hasOwnProperty(e7)) {
        const t3 = this[e7];
        this.initializedProperties.set(e7, t3);
      }
    }), this._internals = this.attachInternals(), this._initShadowRoot();
  }
  _initShadowRoot() {
    const e6 = this.constructor;
    if (e6._needsShadowDOM()) {
      const t2 = { mode: "open" };
      this.attachShadow({ ...t2, ...e6.getMetadata().getShadowRootOptions() }), e6.getMetadata().slotsAreManaged() && this.shadowRoot.addEventListener("slotchange", this._onShadowRootSlotChange.bind(this));
    }
  }
  _onShadowRootSlotChange(e6) {
    var _a3;
    ((_a3 = e6.target) == null ? void 0 : _a3.getRootNode()) === this.shadowRoot && this._processChildren();
  }
  get _id() {
    return this.__id || (this.__id = "ui5wc_" + ++mI), this.__id;
  }
  render() {
    const e6 = this.constructor.template;
    return tI(e6, this);
  }
  async connectedCallback() {
    const e6 = this.constructor;
    this.setAttribute(e6.getMetadata().getPureTag(), ""), e6.getMetadata().supportsF6FastNavigation() && this.setAttribute("data-sap-ui-fastnavgroup", "true");
    const t2 = e6.getMetadata().slotsAreManaged();
    this._inDOM = true, t2 && (this._startObservingDOMChildren(), await this._processChildren()), this._inDOM && (e6.asyncFinished || await e6.definePromise, PS(this), this._domRefReadyPromise._deferredResolve(), this._fullyConnected = true, this.onEnterDOM());
  }
  disconnectedCallback() {
    const e6 = this.constructor.getMetadata().slotsAreManaged();
    this._inDOM = false, e6 && this._stopObservingDOMChildren(), this._fullyConnected && (this.onExitDOM(), this._fullyConnected = false), this._domRefReadyPromise._deferredResolve(), ((e7) => {
      TS.remove(e7), SS.delete(e7);
    })(this);
  }
  onBeforeRendering() {
  }
  onAfterRendering() {
  }
  onEnterDOM() {
  }
  onExitDOM() {
  }
  _startObservingDOMChildren() {
    const e6 = this.constructor.getMetadata();
    if (!e6.hasSlots()) return;
    const t2 = e6.canSlotText(), i2 = { childList: true, subtree: t2, characterData: t2 };
    ((e7, t3, i3) => {
      const n2 = new MutationObserver(t3);
      WT.set(e7, n2), n2.observe(e7, i3);
    })(this, this._processChildren.bind(this), i2);
  }
  _stopObservingDOMChildren() {
    ((e6) => {
      const t2 = WT.get(e6);
      t2 && (t2.disconnect(), WT.delete(e6));
    })(this);
  }
  async _processChildren() {
    this.constructor.getMetadata().hasSlots() && await this._updateSlots();
  }
  async _updateSlots() {
    const e6 = this.constructor, t2 = e6.getMetadata().getSlots(), i2 = e6.getMetadata().canSlotText(), n2 = Array.from(i2 ? this.childNodes : this.children), o2 = /* @__PURE__ */ new Map(), r2 = /* @__PURE__ */ new Map();
    for (const [e7, i3] of Object.entries(t2)) {
      const t3 = i3.propertyName || e7;
      r2.set(t3, e7), o2.set(t3, [...this._state[t3]]), this._clearSlot(e7, i3);
    }
    const s2 = /* @__PURE__ */ new Map(), a2 = /* @__PURE__ */ new Map(), l2 = n2.map(async (i3, n3) => {
      const o3 = ((e7) => {
        if (!(e7 instanceof HTMLElement)) return "default";
        const t3 = e7.getAttribute("slot");
        if (t3) {
          const e8 = t3.match(/^(.+?)-\d+$/);
          return e8 ? e8[1] : t3;
        }
        return "default";
      })(i3), r3 = t2[o3];
      if (void 0 === r3) {
        if ("default" !== o3) {
          const e7 = Object.keys(t2).join(", ");
          console.warn(`Unknown slotName: ${o3}, ignoring`, i3, `Valid values are: ${e7}`);
        }
        return;
      }
      if (r3.individualSlots) {
        const e7 = (s2.get(o3) || 0) + 1;
        s2.set(o3, e7), i3._individualSlot = `${o3}-${e7}`;
      }
      if (i3 instanceof HTMLElement) {
        const e7 = i3.localName;
        if (e7.includes("-") && !((e8) => $T.some((t3) => e8.startsWith(t3)))(e7)) {
          if (!customElements.get(e7)) {
            const t3 = customElements.whenDefined(e7);
            let i4 = fI.get(e7);
            i4 || (i4 = new Promise((e8) => setTimeout(e8, 1e3)), fI.set(e7, i4)), await Promise.race([t3, i4]);
          }
          customElements.upgrade(i3);
        }
      }
      if (i3 = e6.getMetadata().constructor.validateSlotValue(i3, r3), xI(i3) && r3.invalidateOnChildChange) {
        const e7 = this._getChildChangeListener(o3);
        i3.attachInvalidate.call(i3, e7);
      }
      i3 instanceof HTMLSlotElement && this._attachSlotChange(i3, o3, !!r3.invalidateOnChildChange);
      const l3 = r3.propertyName || o3;
      a2.has(l3) ? a2.get(l3).push({ child: i3, idx: n3 }) : a2.set(l3, [{ child: i3, idx: n3 }]);
    });
    await Promise.all(l2), a2.forEach((e7, t3) => {
      this._state[t3] = e7.sort((e8, t4) => e8.idx - t4.idx).map((e8) => e8.child), this._state[kT(t3)] = this._state[t3];
    });
    let c2 = false;
    for (const [i3, n3] of Object.entries(t2)) {
      const t3 = n3.propertyName || i3;
      eI(o2.get(t3), this._state[t3]) || (bI.call(this, { type: "slot", name: r2.get(t3), reason: "children" }), c2 = true, e6.getMetadata().isFormAssociated() && nI(this));
    }
    c2 || bI.call(this, { type: "slot", name: "default", reason: "textcontent" });
  }
  _clearSlot(e6, t2) {
    const i2 = t2.propertyName || e6;
    this._state[i2].forEach((t3) => {
      if (xI(t3)) {
        const i3 = this._getChildChangeListener(e6);
        t3.detachInvalidate.call(t3, i3);
      }
      t3 instanceof HTMLSlotElement && this._detachSlotChange(t3, e6);
    }), this._state[i2] = [], this._state[kT(i2)] = this._state[i2];
  }
  attachInvalidate(e6) {
    this._invalidationEventProvider.attachEvent("invalidate", e6);
  }
  detachInvalidate(e6) {
    this._invalidationEventProvider.detachEvent("invalidate", e6);
  }
  _onChildChange(e6, t2) {
    this.constructor.getMetadata().shouldInvalidateOnChildChange(e6, t2.type, t2.name) && bI.call(this, { type: "slot", name: e6, reason: "childchange", child: t2.target });
  }
  attributeChangedCallback(e6, t2, i2) {
    let n2;
    if (this._doNotSyncAttributes.has(e6)) return;
    const o2 = this.constructor.getMetadata().getProperties(), r2 = e6.replace(/^ui5-/, ""), s2 = kT(r2);
    if (o2.hasOwnProperty(s2)) {
      const e7 = o2[s2];
      n2 = (e7.converter ?? AI).fromAttribute(i2, e7.type), this[s2] = n2;
    }
  }
  formAssociatedCallback() {
    this.constructor.getMetadata().isFormAssociated() && ((e6) => {
      sI(e6) && nI(e6);
    })(this);
  }
  static get formAssociated() {
    return this.getMetadata().isFormAssociated();
  }
  _updateAttribute(e6, t2) {
    const i2 = this.constructor;
    if (!i2.getMetadata().hasAttribute(e6)) return;
    const n2 = i2.getMetadata().getProperties()[e6], o2 = PT(e6), r2 = (n2.converter || AI).toAttribute(t2, n2.type);
    this._doNotSyncAttributes.add(o2), null == r2 ? this.removeAttribute(o2) : this.setAttribute(o2, r2), this._doNotSyncAttributes.delete(o2);
  }
  _getChildChangeListener(e6) {
    return this._childChangeListeners.has(e6) || this._childChangeListeners.set(e6, this._onChildChange.bind(this, e6)), this._childChangeListeners.get(e6);
  }
  _getSlotChangeListener(e6) {
    return this._slotChangeListeners.has(e6) || this._slotChangeListeners.set(e6, this._onSlotChange.bind(this, e6)), this._slotChangeListeners.get(e6);
  }
  _attachSlotChange(e6, t2, i2) {
    const n2 = this._getSlotChangeListener(t2);
    e6.addEventListener("slotchange", (o2) => {
      if (n2.call(e6, o2), i2) {
        const i3 = this._slotsAssignedNodes.get(e6);
        i3 && i3.forEach((e7) => {
          if (xI(e7)) {
            const i4 = this._getChildChangeListener(t2);
            e7.detachInvalidate.call(e7, i4);
          }
        });
        const n3 = NT([e6]);
        this._slotsAssignedNodes.set(e6, n3), n3.forEach((e7) => {
          if (xI(e7)) {
            const i4 = this._getChildChangeListener(t2);
            e7.attachInvalidate.call(e7, i4);
          }
        });
      }
    });
  }
  _detachSlotChange(e6, t2) {
    e6.removeEventListener("slotchange", this._getSlotChangeListener(t2));
  }
  _onSlotChange(e6) {
    bI.call(this, { type: "slot", name: e6, reason: "slotchange" });
  }
  onInvalidation(e6) {
  }
  updateAttributes() {
    const e6 = this.constructor.getMetadata().getProperties();
    for (const [t2, i2] of Object.entries(e6)) this._updateAttribute(t2, this[t2]);
  }
  _render() {
    const e6 = this.constructor, t2 = e6.getMetadata().hasIndividualSlots();
    this.initializedProperties.size > 0 && (Array.from(this.initializedProperties.entries()).forEach(([e7, t3]) => {
      delete this[e7], this[e7] = t3;
    }), this.initializedProperties.clear()), this._suppressInvalidation = true;
    try {
      this.onBeforeRendering(), this._rendered || this.updateAttributes(), this._componentStateFinalizedEventProvider.fireEvent("componentStateFinalized");
    } finally {
      this._suppressInvalidation = false;
    }
    this._changedState = [], e6._needsShadowDOM() && ((e7) => {
      const t3 = e7.constructor, i2 = e7.shadowRoot, n2 = e7.render();
      i2 ? (i2.adoptedStyleSheets = qT(t3), t3.renderer(n2, i2, { host: e7 })) : console.warn("There is no shadow root to update");
    })(this), this._rendered = true, t2 && this._assignIndividualSlotsToChildren(), this.onAfterRendering();
  }
  _assignIndividualSlotsToChildren() {
    Array.from(this.children).forEach((e6) => {
      e6._individualSlot && e6.setAttribute("slot", e6._individualSlot);
    });
  }
  _waitForDomRef() {
    return this._domRefReadyPromise;
  }
  getDomRef() {
    return "function" == typeof this._getRealDomRef ? this._getRealDomRef() : this.shadowRoot && 0 !== this.shadowRoot.children.length ? this.shadowRoot.children[0] : void 0;
  }
  getFocusDomRef() {
    const e6 = this.getDomRef();
    if (e6) return e6.querySelector("[data-sap-focus-ref]") || e6;
  }
  async getFocusDomRefAsync() {
    return await this._waitForDomRef(), this.getFocusDomRef();
  }
  async focus(e6) {
    await this._waitForDomRef();
    const t2 = this.getFocusDomRef();
    t2 === this ? HTMLElement.prototype.focus.call(this, e6) : t2 && "function" == typeof t2.focus && t2.focus(e6);
  }
  fireEvent(e6, t2, i2 = false, n2 = true) {
    const o2 = this._fireEvent(e6, t2, i2, n2), r2 = LT(e6);
    return r2 !== e6 ? o2 && this._fireEvent(r2, t2, i2, n2) : o2;
  }
  fireDecoratorEvent(e6, t2) {
    const i2 = this.getEventData(e6), n2 = !!i2 && i2.cancelable, o2 = !!i2 && i2.bubbles, r2 = this._fireEvent(e6, t2, n2, o2), s2 = LT(e6);
    return s2 !== e6 ? r2 && this._fireEvent(s2, t2, n2, o2) : r2;
  }
  _fireEvent(e6, t2, i2 = false, n2 = true) {
    const o2 = new CustomEvent(`ui5-${e6}`, { detail: t2, composed: false, bubbles: n2, cancelable: i2 }), r2 = this.dispatchEvent(o2);
    if (KT(e6)) return r2;
    const s2 = new CustomEvent(e6, { detail: t2, composed: false, bubbles: n2, cancelable: i2 });
    return this.dispatchEvent(s2) && r2;
  }
  getEventData(e6) {
    return this.constructor.getMetadata().getEvents()[e6];
  }
  getSlottedNodes(e6) {
    return NT(this[e6]);
  }
  attachComponentStateFinalized(e6) {
    this._componentStateFinalizedEventProvider.attachEvent("componentStateFinalized", e6);
  }
  detachComponentStateFinalized(e6) {
    this._componentStateFinalizedEventProvider.detachEvent("componentStateFinalized", e6);
  }
  get effectiveDir() {
    return ((e6) => {
      CS.add(e6);
    })(this.constructor), ((e6) => e6.matches(":dir(rtl)") ? "rtl" : "ltr")(this);
  }
  get isUI5Element() {
    return true;
  }
  get classes() {
    return {};
  }
  get accessibilityInfo() {
    return {};
  }
  static get observedAttributes() {
    return this.getMetadata().getAttributesList();
  }
  static _needsShadowDOM() {
    return !!this.template || Object.prototype.hasOwnProperty.call(this.prototype, "render");
  }
  static _generateAccessors() {
    const e6 = this.prototype, t2 = this.getMetadata().slotsAreManaged(), i2 = this.getMetadata().getProperties();
    for (const [t3, n2] of Object.entries(i2)) {
      JT(t3) || console.warn(`"${t3}" is not a valid property name. Use a name that does not collide with DOM APIs`);
      const i3 = yI(e6, t3);
      let n3, o2;
      (i3 == null ? void 0 : i3.set) && (n3 = i3.set), (i3 == null ? void 0 : i3.get) && (o2 = i3.get), Object.defineProperty(e6, t3, { get() {
        return o2 ? o2.call(this) : this._state[t3];
      }, set(e7) {
        const i4 = this.constructor, r2 = o2 ? o2.call(this) : this._state[t3];
        r2 !== e7 && (n3 ? n3.call(this, e7) : this._state[t3] = e7, bI.call(this, { type: "property", name: t3, newValue: e7, oldValue: r2 }), this._rendered && this._updateAttribute(t3, e7), i4.getMetadata().isFormAssociated() && nI(this));
      } });
    }
    if (t2) {
      const t3 = this.getMetadata().getSlots();
      for (const [i3, n2] of Object.entries(t3)) {
        JT(i3) || console.warn(`"${i3}" is not a valid property name. Use a name that does not collide with DOM APIs`);
        const t4 = n2.propertyName || i3, o2 = { get() {
          return void 0 !== this._state[t4] ? this._state[t4] : [];
        }, set() {
          throw new Error("Cannot set slot content directly, use the DOM APIs (appendChild, removeChild, etc...)");
        } };
        Object.defineProperty(e6, t4, o2), t4 !== kT(t4) && Object.defineProperty(e6, kT(t4), o2);
      }
    }
  }
  static get dependencies() {
    return [];
  }
  static cacheUniqueDependencies() {
    const e6 = this.dependencies.filter((e7, t2, i2) => i2.indexOf(e7) === t2);
    vI.set(this, e6);
  }
  static getUniqueDependencies() {
    return vI.has(this) || this.cacheUniqueDependencies(), vI.get(this) || [];
  }
  static async onDefine() {
    return Promise.resolve();
  }
  static fetchI18nBundles() {
    return Promise.all(Object.entries(this.getMetadata().getI18n()).map((e6) => {
      const { bundleName: t2 } = e6[1];
      return vT(t2);
    }));
  }
  static fetchCLDR() {
    return this.getMetadata().needsCLDR() ? gI(tT().getLanguage(), tT().getRegion(), tT().getScript()) : Promise.resolve();
  }
  static define() {
    this.definePromise = (async () => {
      await DE();
      const e7 = await Promise.all([this.fetchI18nBundles(), this.fetchCLDR(), this.onDefine()]), [t3] = e7;
      Object.entries(this.getMetadata().getI18n()).forEach((e8, i3) => {
        const n2 = e8[0];
        e8[1].target[n2] = t3[i3];
      }), this.asyncFinished = true;
    })();
    const e6 = this.getMetadata().getTag();
    this.getMetadata().getFeatures().forEach((e7) => {
      FC(e7) && this.cacheUniqueDependencies(), ((e8, t3, i3) => {
        const n2 = kC.get(t3);
        (n2 == null ? void 0 : n2.includes(e8)) || (n2 ? n2.push(e8) : kC.set(t3, [e8]), PC.attachEvent(DC(e8), i3));
      })(e7, this, this.cacheUniqueDependencies.bind(this));
    });
    const t2 = ((e7) => AS.has(e7))(e6), i2 = customElements.get(e6);
    return i2 && !t2 ? ((e7) => {
      let t3 = vS.get(e7);
      void 0 === t3 && (t3 = -1), yS.has(t3) || yS.set(t3, /* @__PURE__ */ new Set()), yS.get(t3).add(e7), bS || (bS = setTimeout(() => {
        xS(), yS = /* @__PURE__ */ new Map(), bS = void 0;
      }, 1e3));
    })(e6) : i2 || (this._generateAccessors(), ((e7) => {
      AS.add(e7), vS.set(e7, mS());
    })(e6), customElements.define(e6, this)), this;
  }
  static getMetadata() {
    if (this.hasOwnProperty("_metadata")) return this._metadata;
    const t2 = [this.metadata];
    let i2 = this;
    for (; i2 !== _a2; ) i2 = Object.getPrototypeOf(i2), t2.unshift(i2.metadata);
    const n2 = TC({}, ...t2);
    return this._metadata = new OT(n2), this._metadata;
  }
  get validity() {
    return this._internals.validity;
  }
  get validationMessage() {
    return this._internals.validationMessage;
  }
  checkValidity() {
    return this._internals.checkValidity();
  }
  reportValidity() {
    return this._internals.reportValidity();
  }
}, _a2.metadata = {}, _a2.styles = "", _a2);
const xI = (e6) => "isUI5Element" in e6, CI = (e6 = {}) => (t2) => {
  if (Object.prototype.hasOwnProperty.call(t2, "metadata") || (t2.metadata = {}), "string" == typeof e6) return void (t2.metadata.tag = e6);
  const { tag: i2, languageAware: n2, themeAware: o2, cldr: r2, fastNavigation: s2, formAssociated: a2, shadowRootOptions: l2, features: c2 } = e6;
  t2.metadata.tag = i2, n2 && (t2.metadata.languageAware = n2), r2 && (t2.metadata.cldr = r2), c2 && (t2.metadata.features = c2), o2 && (t2.metadata.themeAware = o2), s2 && (t2.metadata.fastNavigation = s2), a2 && (t2.metadata.formAssociated = a2), l2 && (t2.metadata.shadowRootOptions = l2), ["renderer", "template", "styles", "dependencies"].forEach((i3) => {
    e6[i3] && Object.defineProperty(t2, i3, { get: () => e6[i3] });
  });
}, SI = (e6) => (t2, i2) => {
  const n2 = t2.constructor;
  Object.prototype.hasOwnProperty.call(n2, "metadata") || (n2.metadata = {});
  const o2 = n2.metadata;
  o2.properties || (o2.properties = {});
  const r2 = o2.properties;
  r2[i2] || (r2[i2] = e6 ?? {});
}, EI = (e6, t2 = {}) => (i2) => {
  Object.prototype.hasOwnProperty.call(i2, "metadata") || (i2.metadata = {});
  const n2 = i2.metadata;
  n2.events || (n2.events = {});
  const o2 = n2.events;
  o2[e6] || (t2.bubbles = !!t2.bubbles, t2.cancelable = !!t2.cancelable, o2[e6] = t2);
}, TI = (e6) => (t2, i2) => {
  const n2 = t2.constructor;
  Object.prototype.hasOwnProperty.call(n2, "metadata") || (n2.metadata = {});
  const o2 = n2.metadata;
  o2.slots || (o2.slots = {});
  const r2 = o2.slots;
  if (e6 && e6.default && r2.default) throw new Error("Only one slot can be the default slot.");
  const s2 = e6 && e6.default ? "default" : i2;
  (e6 = e6 || { type: HTMLElement }).type || (e6.type = HTMLElement), r2[s2] || (r2[s2] = e6), e6.default && (delete r2.default.default, r2.default.propertyName = i2), n2.metadata.managedSlots = true;
}, II = 8, MI = 9, BI = 13, RI = 16, kI = 27, PI = 32, DI = 33, LI = 34, FI = 35, NI = 36, OI = 37, UI = 38, zI = 39, HI = 40, QI = 46, VI = 107, GI = 109, qI = 187, $I = 219, WI = (e6) => (e6.key ? "Enter" === e6.key : e6.keyCode === BI) && !AM(e6), jI = (e6) => (e6.key ? "Spacebar" === e6.key || " " === e6.key : e6.keyCode === PI) && !AM(e6), XI = (e6) => (e6.key ? "Spacebar" === e6.key || " " === e6.key : e6.keyCode === PI) && yM(e6, false, false, true), YI = (e6) => (e6.key ? "ArrowLeft" === e6.key || "Left" === e6.key : e6.keyCode === OI) && !AM(e6), KI = (e6) => (e6.key ? "ArrowRight" === e6.key || "Right" === e6.key : e6.keyCode === zI) && !AM(e6), ZI = (e6) => (e6.key ? "ArrowUp" === e6.key || "Up" === e6.key : e6.keyCode === UI) && !AM(e6), JI = (e6) => (e6.key ? "ArrowDown" === e6.key || "Down" === e6.key : e6.keyCode === HI) && !AM(e6), eM = (e6) => (e6.key ? "ArrowLeft" === e6.key || "Left" === e6.key : e6.keyCode === OI) && yM(e6, true, false, false), tM = (e6) => (e6.key ? "ArrowRight" === e6.key || "Right" === e6.key : e6.keyCode === zI) && yM(e6, true, false, false), iM = (e6) => (e6.key ? "ArrowUp" === e6.key || "Up" === e6.key : e6.keyCode === UI) && yM(e6, true, false, false), nM = (e6) => (e6.key ? "ArrowDown" === e6.key || "Down" === e6.key : e6.keyCode === HI) && yM(e6, true, false, false), oM = (e6) => (e6.key ? "ArrowUp" === e6.key || "Up" === e6.key : e6.keyCode === UI) && yM(e6, false, false, true), rM = (e6) => (e6.key ? "ArrowDown" === e6.key || "Down" === e6.key : e6.keyCode === HI) && yM(e6, false, false, true), sM = (e6) => (e6.key ? "ArrowLeft" === e6.key || "Left" === e6.key : e6.keyCode === OI) && yM(e6, false, false, true), aM = (e6) => (e6.key ? "ArrowRight" === e6.key || "Right" === e6.key : e6.keyCode === zI) && yM(e6, false, false, true), lM = (e6) => (e6.key ? "Home" === e6.key : e6.keyCode === NI) && !AM(e6), cM = (e6) => (e6.key ? "End" === e6.key : e6.keyCode === FI) && !AM(e6), hM = (e6) => (e6.key ? "Escape" === e6.key || "Esc" === e6.key : e6.keyCode === kI) && !AM(e6), uM = (e6) => (e6.key ? "Tab" === e6.key : e6.keyCode === MI) && !AM(e6), dM = (e6) => (e6.key ? "Tab" === e6.key : e6.keyCode === MI) && yM(e6, false, false, true), pM = (e6) => (e6.key ? "Delete" === e6.key : e6.keyCode === QI) && !AM(e6), _M = (e6) => (e6.key ? "PageUp" === e6.key : e6.keyCode === DI) && !AM(e6), gM = (e6) => (e6.key ? "PageDown" === e6.key : e6.keyCode === LI) && !AM(e6), mM = (e6) => (e6.key ? "+" === e6.key : e6.keyCode === qI) || e6.keyCode === VI && !AM(e6), fM = (e6) => (e6.key ? "-" === e6.key : e6.keyCode === $I) || e6.keyCode === GI && !AM(e6), vM = (e6) => "F2" === e6.key && !AM(e6), AM = (e6) => e6.shiftKey || e6.altKey || bM(e6), bM = (e6) => !(!e6.metaKey && !e6.ctrlKey), yM = (e6, t2, i2, n2) => e6.shiftKey === n2 && e6.altKey === i2 && bM(e6) === t2, wM = () => {
  let e6 = document.activeElement;
  for (; e6 && e6.shadowRoot && e6.shadowRoot.activeElement; ) e6 = e6.shadowRoot.activeElement;
  return e6;
};
var xM = ((e6) => (e6.Auto = "Auto", e6.Vertical = "Vertical", e6.Horizontal = "Horizontal", e6.Paging = "Paging", e6))(xM || {}), CM = ((e6) => (e6.Static = "Static", e6.Cyclic = "Cyclic", e6))(CM || {});
let SM = class {
  constructor(e6, t2) {
    if (!e6.isUI5Element) throw new Error("The root web component must be a UI5 Element instance");
    if (this.rootWebComponent = e6, this.rootWebComponent.addEventListener("keydown", this._onkeydown.bind(this)), this._initBound = this._init.bind(this), this.rootWebComponent.attachComponentStateFinalized(this._initBound), "function" != typeof t2.getItemsCallback) throw new Error("getItemsCallback is required");
    this._getItems = t2.getItemsCallback, this._currentIndex = t2.currentIndex || 0, this._rowSize = t2.rowSize || 1, this._behavior = t2.behavior || CM.Static, this._navigationMode = t2.navigationMode || xM.Auto, this._affectedPropertiesNames = t2.affectedPropertiesNames || [], this._skipItemsSize = t2.skipItemsSize || null;
  }
  setCurrentItem(e6) {
    const t2 = this._getItems().indexOf(e6);
    -1 !== t2 ? (this._currentIndex = t2, this._applyTabIndex()) : console.warn("The provided item is not managed by ItemNavigation", e6);
  }
  setRowSize(e6) {
    this._rowSize = e6;
  }
  _init() {
    this._getItems().forEach((e6, t2) => {
      e6.forcedTabIndex = t2 === this._currentIndex ? "0" : "-1";
    });
  }
  _onkeydown(e6) {
    if (!this._canNavigate()) return;
    const t2 = this._navigationMode === xM.Horizontal || this._navigationMode === xM.Auto, i2 = this._navigationMode === xM.Vertical || this._navigationMode === xM.Auto, n2 = "rtl" === this.rootWebComponent.effectiveDir;
    if (n2 && YI(e6) && t2) this._handleRight();
    else if (n2 && KI(e6) && t2) this._handleLeft();
    else if (YI(e6) && t2) this._handleLeft();
    else if (KI(e6) && t2) this._handleRight();
    else if (ZI(e6) && i2) this._handleUp();
    else if (JI(e6) && i2) this._handleDown();
    else if (lM(e6)) this._handleHome();
    else if (cM(e6)) this._handleEnd();
    else if (_M(e6)) this._handlePageUp();
    else {
      if (!gM(e6)) return;
      this._handlePageDown();
    }
    e6.preventDefault(), this._applyTabIndex(), this._focusCurrentItem();
  }
  _handleUp() {
    const e6 = this._getItems().length;
    if (this._currentIndex - this._rowSize >= 0) this._currentIndex -= this._rowSize;
    else if (this._behavior === CM.Cyclic) {
      const t2 = this._currentIndex % this._rowSize;
      let i2 = (0 === t2 ? this._rowSize - 1 : t2 - 1) + (Math.ceil(e6 / this._rowSize) - 1) * this._rowSize;
      i2 > e6 - 1 && (i2 -= this._rowSize), this._currentIndex = i2;
    } else this._currentIndex = 0;
  }
  _handleDown() {
    const e6 = this._getItems().length;
    if (this._currentIndex + this._rowSize < e6) this._currentIndex += this._rowSize;
    else if (this._behavior === CM.Cyclic) {
      const e7 = (this._currentIndex % this._rowSize + 1) % this._rowSize;
      this._currentIndex = e7;
    } else this._currentIndex = e6 - 1;
  }
  _handleLeft() {
    const e6 = this._getItems().length;
    this._currentIndex > 0 ? this._currentIndex -= 1 : this._behavior === CM.Cyclic && (this._currentIndex = e6 - 1);
  }
  _handleRight() {
    const e6 = this._getItems().length;
    this._currentIndex < e6 - 1 ? this._currentIndex += 1 : this._behavior === CM.Cyclic && (this._currentIndex = 0);
  }
  _handleHome() {
    const e6 = this._rowSize > 1 ? this._rowSize : this._getItems().length;
    this._currentIndex -= this._currentIndex % e6;
  }
  _handleEnd() {
    const e6 = this._rowSize > 1 ? this._rowSize : this._getItems().length;
    this._currentIndex += e6 - 1 - this._currentIndex % e6;
  }
  _handlePageUp() {
    this._rowSize > 1 || this._handlePageUpFlat();
  }
  _handlePageDown() {
    this._rowSize > 1 || this._handlePageDownFlat();
  }
  _handlePageUpFlat() {
    null !== this._skipItemsSize && this._currentIndex + 1 > this._skipItemsSize ? this._currentIndex -= this._skipItemsSize : this._currentIndex -= this._currentIndex;
  }
  _handlePageDownFlat() {
    null !== this._skipItemsSize && this._getItems().length - this._currentIndex - 1 > this._skipItemsSize ? this._currentIndex += this._skipItemsSize : this._currentIndex = this._getItems().length - 1;
  }
  _applyTabIndex() {
    const e6 = this._getItems();
    for (let t2 = 0; t2 < e6.length; t2++) e6[t2].forcedTabIndex = t2 === this._currentIndex ? "0" : "-1";
    this._affectedPropertiesNames.forEach((e7) => {
      const t2 = this.rootWebComponent[e7];
      this.rootWebComponent[e7] = Array.isArray(t2) ? [...t2] : { ...t2 };
    });
  }
  _focusCurrentItem() {
    const e6 = this._getCurrentItem();
    e6 && e6.focus();
  }
  _canNavigate() {
    const e6 = this._getCurrentItem(), t2 = wM();
    return e6 && e6 === t2;
  }
  _getCurrentItem() {
    const e6 = this._getItems();
    if (!e6.length) return;
    for (; this._currentIndex >= e6.length; ) this._currentIndex -= this._rowSize;
    this._currentIndex < 0 && (this._currentIndex = 0);
    const t2 = e6[this._currentIndex];
    if (!t2) return;
    if (xI(t2)) return t2.getFocusDomRef();
    const i2 = this.rootWebComponent.getDomRef();
    return i2 && t2.id ? i2.querySelector(`[id="${t2.id}"]`) : void 0;
  }
};
const { I: EM } = ne, TM = () => document.createComment(""), IM = (e6, t2, i2) => {
  var n2;
  const o2 = e6._$AA.parentNode, r2 = void 0 === t2 ? e6._$AB : t2._$AA;
  if (void 0 === i2) {
    const t3 = o2.insertBefore(TM(), r2), n3 = o2.insertBefore(TM(), r2);
    i2 = new EM(t3, n3, e6, e6.options);
  } else {
    const t3 = i2._$AB.nextSibling, s2 = i2._$AM, a2 = s2 !== e6;
    if (a2) {
      let t4;
      null === (n2 = i2._$AQ) || void 0 === n2 || n2.call(i2, e6), i2._$AM = e6, void 0 !== i2._$AP && (t4 = e6._$AU) !== s2._$AU && i2._$AP(t4);
    }
    if (t3 !== r2 || a2) {
      let e7 = i2._$AA;
      for (; e7 !== t3; ) {
        const t4 = e7.nextSibling;
        o2.insertBefore(e7, r2), e7 = t4;
      }
    }
  }
  return i2;
}, MM = (e6, t2, i2 = e6) => (e6._$AI(t2, i2), e6), BM = {}, RM = (e6) => {
  var t2;
  null === (t2 = e6._$AP) || void 0 === t2 || t2.call(e6, false, true);
  let i2 = e6._$AA;
  const n2 = e6._$AB.nextSibling;
  for (; i2 !== n2; ) {
    const e7 = i2.nextSibling;
    i2.remove(), i2 = e7;
  }
}, kM = (e6, t2, i2) => {
  const n2 = /* @__PURE__ */ new Map();
  for (let o2 = t2; o2 <= i2; o2++) n2.set(e6[o2], o2);
  return n2;
}, PM = lC(class extends cC {
  constructor(e6) {
    if (super(e6), e6.type !== aC) throw Error("repeat() can only be used in text expressions");
  }
  ct(e6, t2, i2) {
    let n2;
    void 0 === i2 ? i2 = t2 : void 0 !== t2 && (n2 = t2);
    const o2 = [], r2 = [];
    let s2 = 0;
    for (const t3 of e6) o2[s2] = n2 ? n2(t3, s2) : s2, r2[s2] = i2(t3, s2), s2++;
    return { values: r2, keys: o2 };
  }
  render(e6, t2, i2) {
    return this.ct(e6, t2, i2).values;
  }
  update(e6, [t2, i2, n2]) {
    var o2;
    const r2 = ((e7) => e7._$AH)(e6), { values: s2, keys: a2 } = this.ct(t2, i2, n2);
    if (!Array.isArray(r2)) return this.ut = a2, s2;
    const l2 = null !== (o2 = this.ut) && void 0 !== o2 ? o2 : this.ut = [], c2 = [];
    let h2, u2, d2 = 0, p2 = r2.length - 1, _2 = 0, g2 = s2.length - 1;
    for (; d2 <= p2 && _2 <= g2; ) if (null === r2[d2]) d2++;
    else if (null === r2[p2]) p2--;
    else if (l2[d2] === a2[_2]) c2[_2] = MM(r2[d2], s2[_2]), d2++, _2++;
    else if (l2[p2] === a2[g2]) c2[g2] = MM(r2[p2], s2[g2]), p2--, g2--;
    else if (l2[d2] === a2[g2]) c2[g2] = MM(r2[d2], s2[g2]), IM(e6, c2[g2 + 1], r2[d2]), d2++, g2--;
    else if (l2[p2] === a2[_2]) c2[_2] = MM(r2[p2], s2[_2]), IM(e6, r2[d2], r2[p2]), p2--, _2++;
    else if (void 0 === h2 && (h2 = kM(a2, _2, g2), u2 = kM(l2, d2, p2)), h2.has(l2[d2])) if (h2.has(l2[p2])) {
      const t3 = u2.get(a2[_2]), i3 = void 0 !== t3 ? r2[t3] : null;
      if (null === i3) {
        const t4 = IM(e6, r2[d2]);
        MM(t4, s2[_2]), c2[_2] = t4;
      } else c2[_2] = MM(i3, s2[_2]), IM(e6, r2[d2], i3), r2[t3] = null;
      _2++;
    } else RM(r2[p2]), p2--;
    else RM(r2[d2]), d2++;
    for (; _2 <= g2; ) {
      const t3 = IM(e6, c2[g2 + 1]);
      MM(t3, s2[_2]), c2[_2++] = t3;
    }
    for (; d2 <= p2; ) {
      const e7 = r2[d2++];
      null !== e7 && RM(e7);
    }
    return this.ut = a2, ((e7, t3 = BM) => {
      e7._$AH = t3;
    })(e6, c2), H;
  }
}), DM = lC(class extends cC {
  constructor(e6) {
    var t2;
    if (super(e6), e6.type !== sC || "class" !== e6.name || (null === (t2 = e6.strings) || void 0 === t2 ? void 0 : t2.length) > 2) throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.");
  }
  render(e6) {
    return " " + Object.keys(e6).filter((t2) => e6[t2]).join(" ") + " ";
  }
  update(e6, [t2]) {
    var i2, n2;
    if (void 0 === this.it) {
      this.it = /* @__PURE__ */ new Set(), void 0 !== e6.strings && (this.nt = new Set(e6.strings.join(" ").split(/\s/).filter((e7) => "" !== e7)));
      for (const e7 in t2) t2[e7] && !(null === (i2 = this.nt) || void 0 === i2 ? void 0 : i2.has(e7)) && this.it.add(e7);
      return this.render(t2);
    }
    const o2 = e6.element.classList;
    this.it.forEach((e7) => {
      e7 in t2 || (o2.remove(e7), this.it.delete(e7));
    });
    for (const e7 in t2) {
      const i3 = !!t2[e7];
      i3 === this.it.has(e7) || (null === (n2 = this.nt) || void 0 === n2 ? void 0 : n2.has(e7)) || (i3 ? (o2.add(e7), this.it.add(e7)) : (o2.remove(e7), this.it.delete(e7)));
    }
    return H;
  }
});
const LM = lC(class extends cC {
  constructor(e6) {
    var t2;
    if (super(e6), e6.type !== sC || "style" !== e6.name || (null === (t2 = e6.strings) || void 0 === t2 ? void 0 : t2.length) > 2) throw new Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
  }
  render(e6) {
    return "";
  }
  update(e6, [t2]) {
    const { style: i2 } = e6.element;
    if (void 0 === this._previousStyleProperties) {
      this._previousStyleProperties = /* @__PURE__ */ new Set();
      for (const e7 in t2) this._previousStyleProperties.add(e7);
    }
    this._previousStyleProperties.forEach((e7) => {
      null == t2[e7] && (this._previousStyleProperties.delete(e7), e7.includes("-") ? i2.removeProperty(e7) : i2[e7] = "");
    });
    for (const e7 in t2) {
      const n2 = t2[e7];
      null != n2 && (this._previousStyleProperties.add(e7), e7.includes("-") ? i2.setProperty(e7, n2) : i2[e7] = n2);
    }
    return H;
  }
}), FM = (e6) => null != e6 ? e6 : Q, NM = (e6, ...t2) => {
  const i2 = LC("LitStatic");
  return (i2 ? i2.html : U)(e6, ...t2);
}, OM = (e6, ...t2) => {
  const i2 = LC("LitStatic");
  return (i2 ? i2.svg : z)(e6, ...t2);
}, UM = (e6, t2, i2) => {
  const n2 = LC("OpenUI5Enablement");
  n2 && (e6 = n2.wrapTemplateResultInBusyMarkup(NM, i2.host, e6)), re(e6, t2, i2);
}, zM = (e6, t2, i2) => {
  const n2 = LC("LitStatic");
  if (n2) return n2.unsafeStatic((t2 || []).includes(e6) ? `${e6}-${i2}` : e6);
}, HM = (e6) => (t2, i2) => {
  t2.metadata.i18n || (t2.metadata.i18n = {}), t2.metadata.i18n[i2] = { bundleName: e6, target: t2 };
}, QM = Symbol.for(""), VM = (e6) => {
  if ((null == e6 ? void 0 : e6.r) === QM) return null == e6 ? void 0 : e6._$litStatic$;
}, GM = (e6) => ({ _$litStatic$: e6, r: QM }), qM = /* @__PURE__ */ new Map(), $M = (e6) => (t2, ...i2) => {
  const n2 = i2.length;
  let o2, r2;
  const s2 = [], a2 = [];
  let l2, c2 = 0, h2 = false;
  for (; c2 < n2; ) {
    for (l2 = t2[c2]; c2 < n2 && void 0 !== (r2 = i2[c2], o2 = VM(r2)); ) l2 += o2 + t2[++c2], h2 = true;
    c2 !== n2 && a2.push(r2), s2.push(l2), c2++;
  }
  if (c2 === n2 && s2.push(t2[n2]), h2) {
    const e7 = s2.join("$$lit$$");
    void 0 === (t2 = qM.get(e7)) && (s2.raw = s2, qM.set(e7, t2 = s2)), i2 = a2;
  }
  return e6(t2, ...i2);
}, WM = $M(U), jM = $M(z);
((e6, t2) => {
  BC.set(e6, t2);
})("LitStatic", (_b2 = class {
}, _b2.html = WM, _b2.svg = jM, _b2.unsafeStatic = GM, _b2));
const XM = { key: "AVATAR_TOOLTIP", defaultText: "Avatar" }, YM = { key: "BUSY_INDICATOR_TITLE", defaultText: "Please wait" }, KM = { key: "BUTTON_ARIA_TYPE_ACCEPT", defaultText: "Positive Action" }, ZM = { key: "BUTTON_ARIA_TYPE_REJECT", defaultText: "Negative Action" }, JM = { key: "BUTTON_ARIA_TYPE_EMPHASIZED", defaultText: "Emphasized" }, eB = { key: "COLORPALETTE_CONTAINER_LABEL", defaultText: "Color Palette - Predefined Colors" }, tB = { key: "COLORPALETTE_POPOVER_TITLE", defaultText: "Color Palette" }, iB = { key: "COLORPALETTE_COLOR_LABEL", defaultText: "Color" }, nB = { key: "COLOR_PALETTE_DIALOG_CANCEL_BUTTON", defaultText: "Cancel" }, oB = { key: "COLOR_PALETTE_DIALOG_OK_BUTTON", defaultText: "OK" }, rB = { key: "COLOR_PALETTE_DIALOG_TITLE", defaultText: "Change Color" }, sB = { key: "COLOR_PALETTE_MORE_COLORS_TEXT", defaultText: "More Colors..." }, aB = { key: "COLOR_PALETTE_DEFAULT_COLOR_TEXT", defaultText: "Default Color" }, lB = { key: "COLORPICKER_ALPHA_SLIDER", defaultText: "Alpha control" }, cB = { key: "COLORPICKER_HUE_SLIDER", defaultText: "Hue control" }, hB = { key: "COLORPICKER_HEX", defaultText: "Hexadecimal" }, uB = { key: "COLORPICKER_RED", defaultText: "Red" }, dB = { key: "COLORPICKER_GREEN", defaultText: "Green" }, pB = { key: "COLORPICKER_BLUE", defaultText: "Blue" }, _B = { key: "COLORPICKER_ALPHA", defaultText: "Alpha" }, gB = { key: "DELETE", defaultText: "Delete" }, mB = { key: "GROUP_HEADER_TEXT", defaultText: "Group Header" }, fB = { key: "INPUT_SUGGESTIONS", defaultText: "Suggestions Available" }, vB = { key: "INPUT_SUGGESTIONS_TITLE", defaultText: "Select" }, AB = { key: "INPUT_SUGGESTIONS_ONE_HIT", defaultText: "1 result available" }, bB = { key: "INPUT_SUGGESTIONS_MORE_HITS", defaultText: "{0} results are available" }, yB = { key: "INPUT_SUGGESTIONS_NO_HIT", defaultText: "No results" }, wB = { key: "INPUT_CLEAR_ICON_ACC_NAME", defaultText: "Clear" }, xB = { key: "LIST_ITEM_SELECTED", defaultText: "Selected" }, CB = { key: "LIST_ITEM_NOT_SELECTED", defaultText: "Not Selected" }, SB = { key: "ARIA_LABEL_LIST_ITEM_CHECKBOX", defaultText: "Multiple Selection Mode" }, EB = { key: "ARIA_LABEL_LIST_ITEM_RADIO_BUTTON", defaultText: "Item Selection." }, TB = { key: "ARIA_LABEL_LIST_SELECTABLE", defaultText: "Contains Selectable Items" }, IB = { key: "ARIA_LABEL_LIST_MULTISELECTABLE", defaultText: "Contains Multi-Selectable Items" }, MB = { key: "ARIA_LABEL_LIST_DELETABLE", defaultText: "Contains Deletable Items" }, BB = { key: "INPUT_AVALIABLE_VALUES", defaultText: "Available Values" }, RB = { key: "PANEL_ICON", defaultText: "Expand/Collapse" }, kB = { key: "RESPONSIVE_POPOVER_CLOSE_DIALOG_BUTTON", defaultText: "Decline" }, PB = { key: "SEGMENTEDBUTTON_ARIA_DESCRIPTION", defaultText: "Segmented button group" }, DB = { key: "SEGMENTEDBUTTON_ARIA_DESCRIBEDBY", defaultText: "Press SPACE or ENTER to select an item" }, LB = { key: "SEGMENTEDBUTTONITEM_ARIA_DESCRIPTION", defaultText: "Segmented button" }, FB = { key: "SLIDER_ARIA_DESCRIPTION", defaultText: "Slider handle" }, NB = { key: "LOAD_MORE_TEXT", defaultText: "More" }, OB = { key: "VALUE_STATE_TYPE_ERROR", defaultText: "Value State Error" }, UB = { key: "VALUE_STATE_TYPE_WARNING", defaultText: "Value State Warning" }, zB = { key: "VALUE_STATE_TYPE_SUCCESS", defaultText: "Value State Success" }, HB = { key: "VALUE_STATE_TYPE_INFORMATION", defaultText: "Value State Information" }, QB = { key: "VALUE_STATE_ERROR", defaultText: "Invalid entry" }, VB = { key: "VALUE_STATE_WARNING", defaultText: "Warning issued" }, GB = { key: "VALUE_STATE_INFORMATION", defaultText: "Informative entry" }, qB = { key: "VALUE_STATE_SUCCESS", defaultText: "Entry successfully validated" }, $B = { key: "SLIDER_TOOLTIP_INPUT_DESCRIPTION", defaultText: "Press F2 to enter a value" }, WB = { key: "SLIDER_TOOLTIP_INPUT_LABEL", defaultText: "Current Value" }, jB = { key: "STEPINPUT_DEC_ICON_TITLE", defaultText: "Decrease" }, XB = { key: "STEPINPUT_INC_ICON_TITLE", defaultText: "Increase" }, YB = { key: "DIALOG_HEADER_ARIA_ROLE_DESCRIPTION", defaultText: "Interactive Header" }, KB = { key: "DIALOG_HEADER_ARIA_DESCRIBEDBY_RESIZABLE", defaultText: "Use Shift+Arrow keys to resize" }, ZB = { key: "DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE", defaultText: "Use Arrow keys to move" }, JB = { key: "DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE_RESIZABLE", defaultText: "Use Arrow keys to move, Shift+Arrow keys to resize" }, eR = { key: "LABEL_COLON", defaultText: ":" }, tR = { key: "FORM_CHECKABLE_REQUIRED", defaultText: "Please tick this box if you want to proceed." }, iR = { key: "FORM_SELECTABLE_REQUIRED2", defaultText: "Please select one of these options." }, nR = { key: "FORM_TEXTFIELD_REQUIRED", defaultText: "Please fill in this field." };
let oR;
const rR = () => (void 0 === oR && (rS(), oR = tS.enableDefaultTooltips), oR), sR = /* @__PURE__ */ new WeakMap(), aR = /* @__PURE__ */ new WeakMap(), lR = { attributes: true, childList: true, characterData: true, subtree: true }, cR = (e6) => {
  const t2 = e6;
  return t2.accessibleNameRef ? hR(e6) : t2.accessibleName ? t2.accessibleName : void 0;
}, hR = (e6) => {
  var _a3;
  const t2 = ((_a3 = e6.accessibleNameRef) == null ? void 0 : _a3.split(" ")) ?? [], i2 = e6.getRootNode();
  let n2 = "";
  return t2.forEach((e7, o2) => {
    const r2 = i2.querySelector(`[id='${e7}']`), s2 = `${r2 && r2.textContent ? r2.textContent : ""}`;
    s2 && (n2 += s2, o2 < t2.length - 1 && (n2 += " "));
  }), n2;
}, uR = (e6) => {
  var _a3;
  const t2 = /* @__PURE__ */ new Set();
  return dR(e6).forEach((e7) => {
    t2.add(e7);
  }), (((_a3 = e6.accessibleNameRef) == null ? void 0 : _a3.split(" ")) ?? []).forEach((i2) => {
    const n2 = pR(e6, i2);
    n2 && t2.add(n2);
  }), Array.from(t2);
}, dR = (e6) => {
  const t2 = e6.getRootNode().querySelectorAll(`[for="${e6.id}"]`);
  return Array.from(t2);
}, pR = (e6, t2) => e6.getRootNode().querySelector(`[id='${t2}']`), _R = (e6, t2) => {
  if (aR.has(e6)) return;
  const i2 = uR(e6), n2 = /* @__PURE__ */ ((e7) => (t3) => {
    if (!t3 || "property" !== t3.type || "accessibleNameRef" !== t3.name) return;
    const i3 = aR.get(e7);
    if (!i3) return;
    const n3 = i3.observedElements, o3 = uR(e7);
    n3.forEach((e8) => {
      o3.includes(e8) || mR(i3, e8);
    }), o3.forEach((e8) => {
      n3.includes(e8) || (gR(i3, e8), i3.observedElements.push(e8));
    }), i3 == null ? void 0 : i3.callback();
  })(e6), o2 = { host: e6, observedElements: i2, callback: t2, invalidationCallback: n2 };
  aR.set(e6, o2), e6.attachInvalidate(n2), i2.forEach((e7) => {
    gR(o2, e7);
  }), t2();
}, gR = (e6, t2) => {
  let i2 = sR.get(t2);
  if (!i2) {
    i2 = { observer: null, callbacks: [] };
    const n2 = new MutationObserver(() => {
      i2.callbacks.forEach((e7) => {
        e7();
      });
      const n3 = document.getElementById(t2.id);
      e6.host.id === t2.getAttribute("for") || n3 || mR(e6, t2);
    });
    i2.observer = n2, n2.observe(t2, lR), sR.set(t2, i2);
  }
  i2.callbacks.includes(e6.callback) || i2.callbacks.push(e6.callback);
}, mR = (e6, t2) => {
  var _a3;
  const i2 = sR.get(t2);
  i2 && (i2.callbacks = i2.callbacks.filter((t3) => t3 !== e6.callback), i2.callbacks.length || ((_a3 = i2.observer) == null ? void 0 : _a3.disconnect(), sR.delete(t2))), e6.observedElements = e6.observedElements.filter((e7) => e7 !== t2);
}, fR = (e6) => Array.from(e6).filter((e7) => e7.nodeType !== Node.COMMENT_NODE && (e7.nodeType !== Node.TEXT_NODE || 0 !== (e7.nodeValue || "").trim().length)).length > 0;
function vR(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-segmented-button-item-icon" name="${FM(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-segmented-button-item-icon" name="${FM(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`;
}
function AR(e6, t2, i2) {
  return OM`<title id="${FM(this._id)}-tooltip">${FM(this.effectiveAccessibleName)}</title>`;
}
function bR(e6, t2, i2) {
  return OM`${FM(this.customSvg)}`;
}
function yR(e6, t2, i2, n2, o2) {
  return OM`<path d="${FM(n2)}"></path>`;
}
function wR(e6, t2, i2) {
  return OM`${this.hasIconTooltip ? AR.call(this, e6, t2, i2) : void 0}<g role="presentation">${this.customSvg ? bR.call(this, e6, t2, i2) : void 0}${PM(this.pathData, (e7, t3) => e7._id || t3, (n2, o2) => yR.call(this, e6, t2, i2, n2, o2))}</g>`;
}
var xR;
!function(e6) {
  e6.Image = "Image", e6.Decorative = "Decorative", e6.Interactive = "Interactive";
}(xR || (xR = {}));
const CR = xR, SR = { packageName: "@ui5/webcomponents-theming", fileName: "themes/sap_horizon/parameters-bundle.css.ts", content: ':root{--sapThemeMetaData-Base-baseLib:{"Path": "Base.baseLib.sap_horizon.css_variables","PathPattern": "/%frameworkId%/%libId%/%themeId%/%fileId%.css","Extends": ["baseTheme"],"Tags": ["Fiori_3","LightColorScheme"],"FallbackThemeId": "sap_fiori_3","Engine":{"Name": "theming-engine","Version": "14.0.2"},"Version":{"Build": "11.17.1.20240715084505","Source": "11.17.1"}};--sapBrandColor: #0070f2;--sapHighlightColor: #0064d9;--sapBaseColor: #fff;--sapShellColor: #fff;--sapBackgroundColor: #f5f6f7;--sapFontFamily: "72", "72full", Arial, Helvetica, sans-serif;--sapFontSize: .875rem;--sapTextColor: #1d2d3e;--sapLinkColor: #0064d9;--sapCompanyLogo: none;--sapBackgroundImage: none;--sapBackgroundImageOpacity: 1;--sapBackgroundImageRepeat: false;--sapSelectedColor: #0064d9;--sapHoverColor: #eaecee;--sapActiveColor: #dee2e5;--sapHighlightTextColor: #fff;--sapTitleColor: #1d2d3e;--sapNegativeColor: #aa0808;--sapCriticalColor: #e76500;--sapPositiveColor: #256f3a;--sapInformativeColor: #0070f2;--sapNeutralColor: #788fa6;--sapNegativeElementColor: #f53232;--sapCriticalElementColor: #e76500;--sapPositiveElementColor: #30914c;--sapInformativeElementColor: #0070f2;--sapNeutralElementColor: #788fa6;--sapNegativeTextColor: #aa0808;--sapCriticalTextColor: #b44f00;--sapPositiveTextColor: #256f3a;--sapInformativeTextColor: #0064d9;--sapNeutralTextColor: #1d2d3e;--sapErrorColor: #aa0808;--sapWarningColor: #e76500;--sapSuccessColor: #256f3a;--sapInformationColor: #0070f2;--sapErrorBackground: #ffeaf4;--sapWarningBackground: #fff8d6;--sapSuccessBackground: #f5fae5;--sapInformationBackground: #e1f4ff;--sapNeutralBackground: #eff1f2;--sapErrorBorderColor: #e90b0b;--sapWarningBorderColor: #dd6100;--sapSuccessBorderColor: #30914c;--sapInformationBorderColor: #0070f2;--sapNeutralBorderColor: #788fa6;--sapElement_LineHeight: 2.75rem;--sapElement_Height: 2.25rem;--sapElement_BorderWidth: .0625rem;--sapElement_BorderCornerRadius: .75rem;--sapElement_Compact_LineHeight: 2rem;--sapElement_Compact_Height: 1.625rem;--sapElement_Condensed_LineHeight: 1.5rem;--sapElement_Condensed_Height: 1.375rem;--sapContent_LineHeight: 1.5;--sapContent_IconHeight: 1rem;--sapContent_IconColor: #1d2d3e;--sapContent_ContrastIconColor: #fff;--sapContent_NonInteractiveIconColor: #758ca4;--sapContent_MarkerIconColor: #5d36ff;--sapContent_MarkerTextColor: #046c7a;--sapContent_MeasureIndicatorColor: #556b81;--sapContent_Selected_MeasureIndicatorColor: #0064d9;--sapContent_Placeholderloading_Background: #ccc;--sapContent_Placeholderloading_Gradient: linear-gradient(to right, #ccc 0%, #ccc 20%, #999 50%, #ccc 80%, #ccc 100%);--sapContent_ImagePlaceholderBackground: #eaecee;--sapContent_ImagePlaceholderForegroundColor: #5b738b;--sapContent_RatedColor: #d27700;--sapContent_UnratedColor: #758ca4;--sapContent_BusyColor: #0064d9;--sapContent_FocusColor: #0032a5;--sapContent_FocusStyle: solid;--sapContent_FocusWidth: .125rem;--sapContent_ContrastFocusColor: #fff;--sapContent_ShadowColor: #223548;--sapContent_ContrastShadowColor: #fff;--sapContent_Shadow0: 0 0 .125rem 0 rgba(34,53,72,.2), 0 .125rem .25rem 0 rgba(34,53,72,.2);--sapContent_Shadow1: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .125rem .5rem 0 rgba(34,53,72,.3);--sapContent_Shadow2: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .625rem 1.875rem 0 rgba(34,53,72,.25);--sapContent_Shadow3: 0 0 0 .0625rem rgba(34,53,72,.48), 0 1.25rem 5rem 0 rgba(34,53,72,.25);--sapContent_TextShadow: 0 0 .125rem #fff;--sapContent_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapContent_HeaderShadow: 0 .125rem .125rem 0 rgba(34,53,72,.05), inset 0 -.0625rem 0 0 #d9d9d9;--sapContent_Interaction_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapContent_Selected_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapContent_Negative_Shadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapContent_Critical_Shadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapContent_Positive_Shadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapContent_Informative_Shadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapContent_Neutral_Shadow: inset 0 0 0 .0625rem rgba(120,143,166,.3);--sapContent_SearchHighlightColor: #dafdf5;--sapContent_HelpColor: #188918;--sapContent_LabelColor: #556b82;--sapContent_MonospaceFontFamily: "72Mono", "72Monofull", lucida console, monospace;--sapContent_MonospaceBoldFontFamily: "72Mono-Bold", "72Mono-Boldfull", lucida console, monospace;--sapContent_IconFontFamily: "SAP-icons";--sapContent_DisabledTextColor: rgba(29,45,62,.6);--sapContent_DisabledOpacity: .4;--sapContent_ContrastTextThreshold: .65;--sapContent_ContrastTextColor: #fff;--sapContent_ForegroundColor: #efefef;--sapContent_ForegroundBorderColor: #758ca4;--sapContent_ForegroundTextColor: #1d2d3e;--sapContent_BadgeBackground: #aa0808;--sapContent_BadgeTextColor: #fff;--sapContent_DragAndDropActiveColor: #0064d9;--sapContent_Selected_TextColor: #0064d9;--sapContent_Selected_Background: #fff;--sapContent_Selected_Hover_Background: #e3f0ff;--sapContent_Selected_ForegroundColor: #0064d9;--sapContent_ForcedColorAdjust: none;--sapContent_Illustrative_Color1: #5d36ff;--sapContent_Illustrative_Color2: #0070f2;--sapContent_Illustrative_Color3: #f58b00;--sapContent_Illustrative_Color4: #00144a;--sapContent_Illustrative_Color5: #a9b4be;--sapContent_Illustrative_Color6: #d5dadd;--sapContent_Illustrative_Color7: #ebf8ff;--sapContent_Illustrative_Color8: #fff;--sapContent_Illustrative_Color9: #64edd2;--sapContent_Illustrative_Color10: #ebf8ff;--sapContent_Illustrative_Color11: #f31ded;--sapContent_Illustrative_Color12: #00a800;--sapContent_Illustrative_Color13: #005dc9;--sapContent_Illustrative_Color14: #004da5;--sapContent_Illustrative_Color15: #cc7400;--sapContent_Illustrative_Color16: #3b0ac6;--sapContent_Illustrative_Color17: #00a58a;--sapContent_Illustrative_Color18: #d1efff;--sapContent_Illustrative_Color19: #b8e6ff;--sapContent_Illustrative_Color20: #9eddff;--sapFontLightFamily: "72-Light", "72-Lightfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBoldFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldFamily: "72-Semibold", "72-Semiboldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldDuplexFamily: "72-SemiboldDuplex", "72-SemiboldDuplexfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBlackFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapFontHeaderFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSmallSize: .75rem;--sapFontLargeSize: 1rem;--sapFontHeader1Size: 3rem;--sapFontHeader2Size: 2rem;--sapFontHeader3Size: 1.5rem;--sapFontHeader4Size: 1.25rem;--sapFontHeader5Size: 1rem;--sapFontHeader6Size: .875rem;--sapLink_TextDecoration: none;--sapLink_Hover_Color: #0064d9;--sapLink_Hover_TextDecoration: underline;--sapLink_Active_Color: #0064d9;--sapLink_Active_TextDecoration: none;--sapLink_Visited_Color: #0064d9;--sapLink_InvertedColor: #a6cfff;--sapLink_SubtleColor: #1d2d3e;--sapShell_Background: #eff1f2;--sapShell_BackgroundImage: linear-gradient(to bottom, #eff1f2, #eff1f2);--sapShell_BackgroundImageOpacity: 1;--sapShell_BackgroundImageRepeat: false;--sapShell_BorderColor: #fff;--sapShell_TextColor: #1d2d3e;--sapShell_InteractiveBackground: #eff1f2;--sapShell_InteractiveTextColor: #1d2d3e;--sapShell_InteractiveBorderColor: #556b81;--sapShell_GroupTitleTextColor: #1d2d3e;--sapShell_GroupTitleTextShadow: 0 0 .125rem #fff;--sapShell_Hover_Background: #fff;--sapShell_Active_Background: #fff;--sapShell_Active_TextColor: #0070f2;--sapShell_Selected_Background: #fff;--sapShell_Selected_TextColor: #0070f2;--sapShell_Selected_Hover_Background: #fff;--sapShell_Favicon: none;--sapShell_Navigation_Background: #fff;--sapShell_Navigation_Hover_Background: #fff;--sapShell_Navigation_SelectedColor: #0064d9;--sapShell_Navigation_Selected_TextColor: #0064d9;--sapShell_Navigation_TextColor: #1d2d3e;--sapShell_Navigation_Active_TextColor: #0064d9;--sapShell_Navigation_Active_Background: #fff;--sapShell_Shadow: 0 .125rem .125rem 0 rgba(34,53,72,.15), inset 0 -.0625rem 0 0 rgba(34,53,72,.2);--sapShell_NegativeColor: #aa0808;--sapShell_CriticalColor: #b44f00;--sapShell_PositiveColor: #256f3a;--sapShell_InformativeColor: #0064d9;--sapShell_NeutralColor: #1d2d3e;--sapShell_Assistant_ForegroundColor: #5d36ff;--sapShell_Category_1_Background: #0057d2;--sapShell_Category_1_BorderColor: #0057d2;--sapShell_Category_1_TextColor: #fff;--sapShell_Category_1_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_2_Background: #df1278;--sapShell_Category_2_BorderColor: #df1278;--sapShell_Category_2_TextColor: #fff;--sapShell_Category_2_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_3_Background: #e76500;--sapShell_Category_3_BorderColor: #e76500;--sapShell_Category_3_TextColor: #fff;--sapShell_Category_3_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_4_Background: #7800a4;--sapShell_Category_4_BorderColor: #7800a4;--sapShell_Category_4_TextColor: #fff;--sapShell_Category_4_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_5_Background: #aa2608;--sapShell_Category_5_BorderColor: #aa2608;--sapShell_Category_5_TextColor: #fff;--sapShell_Category_5_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_6_Background: #07838f;--sapShell_Category_6_BorderColor: #07838f;--sapShell_Category_6_TextColor: #fff;--sapShell_Category_6_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_7_Background: #f31ded;--sapShell_Category_7_BorderColor: #f31ded;--sapShell_Category_7_TextColor: #fff;--sapShell_Category_7_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_8_Background: #188918;--sapShell_Category_8_BorderColor: #188918;--sapShell_Category_8_TextColor: #fff;--sapShell_Category_8_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_9_Background: #002a86;--sapShell_Category_9_BorderColor: #002a86;--sapShell_Category_9_TextColor: #fff;--sapShell_Category_9_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_10_Background: #5b738b;--sapShell_Category_10_BorderColor: #5b738b;--sapShell_Category_10_TextColor: #fff;--sapShell_Category_10_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_11_Background: #d20a0a;--sapShell_Category_11_BorderColor: #d20a0a;--sapShell_Category_11_TextColor: #fff;--sapShell_Category_11_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_12_Background: #7858ff;--sapShell_Category_12_BorderColor: #7858ff;--sapShell_Category_12_TextColor: #fff;--sapShell_Category_12_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_13_Background: #a00875;--sapShell_Category_13_BorderColor: #a00875;--sapShell_Category_13_TextColor: #fff;--sapShell_Category_13_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_14_Background: #14565b;--sapShell_Category_14_BorderColor: #14565b;--sapShell_Category_14_TextColor: #fff;--sapShell_Category_14_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_15_Background: #223548;--sapShell_Category_15_BorderColor: #223548;--sapShell_Category_15_TextColor: #fff;--sapShell_Category_15_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_16_Background: #1e592f;--sapShell_Category_16_BorderColor: #1e592f;--sapShell_Category_16_TextColor: #fff;--sapShell_Category_16_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapAssistant_Color1: #5d36ff;--sapAssistant_Color2: #a100c2;--sapAssistant_BackgroundGradient: linear-gradient(#5d36ff, #a100c2);--sapAssistant_Background: #5d36ff;--sapAssistant_BorderColor: #5d36ff;--sapAssistant_TextColor: #fff;--sapAssistant_Hover_Background: #2800cf;--sapAssistant_Hover_BorderColor: #2800cf;--sapAssistant_Hover_TextColor: #fff;--sapAssistant_Active_Background: #fff;--sapAssistant_Active_BorderColor: #5d36ff;--sapAssistant_Active_TextColor: #5d36ff;--sapAssistant_Question_Background: #eae5ff;--sapAssistant_Question_BorderColor: #eae5ff;--sapAssistant_Question_TextColor: #1d2d3e;--sapAssistant_Answer_Background: #eff1f2;--sapAssistant_Answer_BorderColor: #eff1f2;--sapAssistant_Answer_TextColor: #1d2d3e;--sapAvatar_1_Background: #fff3b8;--sapAvatar_1_BorderColor: #fff3b8;--sapAvatar_1_TextColor: #a45d00;--sapAvatar_2_Background: #ffd0e7;--sapAvatar_2_BorderColor: #ffd0e7;--sapAvatar_2_TextColor: #aa0808;--sapAvatar_3_Background: #ffdbe7;--sapAvatar_3_BorderColor: #ffdbe7;--sapAvatar_3_TextColor: #ba066c;--sapAvatar_4_Background: #ffdcf3;--sapAvatar_4_BorderColor: #ffdcf3;--sapAvatar_4_TextColor: #a100c2;--sapAvatar_5_Background: #ded3ff;--sapAvatar_5_BorderColor: #ded3ff;--sapAvatar_5_TextColor: #552cff;--sapAvatar_6_Background: #d1efff;--sapAvatar_6_BorderColor: #d1efff;--sapAvatar_6_TextColor: #0057d2;--sapAvatar_7_Background: #c2fcee;--sapAvatar_7_BorderColor: #c2fcee;--sapAvatar_7_TextColor: #046c7a;--sapAvatar_8_Background: #ebf5cb;--sapAvatar_8_BorderColor: #ebf5cb;--sapAvatar_8_TextColor: #256f3a;--sapAvatar_9_Background: #ddccf0;--sapAvatar_9_BorderColor: #ddccf0;--sapAvatar_9_TextColor: #6c32a9;--sapAvatar_10_Background: #eaecee;--sapAvatar_10_BorderColor: #eaecee;--sapAvatar_10_TextColor: #556b82;--sapButton_Background: #fff;--sapButton_BorderColor: #bcc3ca;--sapButton_BorderWidth: .0625rem;--sapButton_BorderCornerRadius: .5rem;--sapButton_TextColor: #0064d9;--sapButton_Hover_Background: #eaecee;--sapButton_Hover_BorderColor: #bcc3ca;--sapButton_Hover_TextColor: #0064d9;--sapButton_IconColor: #0064d9;--sapButton_Active_Background: #fff;--sapButton_Active_BorderColor: #0064d9;--sapButton_Active_TextColor: #0064d9;--sapButton_Emphasized_Background: #0070f2;--sapButton_Emphasized_BorderColor: #0070f2;--sapButton_Emphasized_TextColor: #fff;--sapButton_Emphasized_Hover_Background: #0064d9;--sapButton_Emphasized_Hover_BorderColor: #0064d9;--sapButton_Emphasized_Hover_TextColor: #fff;--sapButton_Emphasized_Active_Background: #fff;--sapButton_Emphasized_Active_BorderColor: #0064d9;--sapButton_Emphasized_Active_TextColor: #0064d9;--sapButton_Emphasized_TextShadow: transparent;--sapButton_Emphasized_FontWeight: bold;--sapButton_Reject_Background: #ffd6e9;--sapButton_Reject_BorderColor: #ffc2de;--sapButton_Reject_TextColor: #aa0808;--sapButton_Reject_Hover_Background: #ffbddb;--sapButton_Reject_Hover_BorderColor: #ffbddb;--sapButton_Reject_Hover_TextColor: #aa0808;--sapButton_Reject_Active_Background: #fff;--sapButton_Reject_Active_BorderColor: #e90b0b;--sapButton_Reject_Active_TextColor: #aa0808;--sapButton_Reject_Selected_Background: #fff;--sapButton_Reject_Selected_BorderColor: #e90b0b;--sapButton_Reject_Selected_TextColor: #aa0808;--sapButton_Reject_Selected_Hover_Background: #ffbddb;--sapButton_Reject_Selected_Hover_BorderColor: #e90b0b;--sapButton_Accept_Background: #ebf5cb;--sapButton_Accept_BorderColor: #dbeda0;--sapButton_Accept_TextColor: #256f3a;--sapButton_Accept_Hover_Background: #e3f1b6;--sapButton_Accept_Hover_BorderColor: #e3f1b6;--sapButton_Accept_Hover_TextColor: #256f3a;--sapButton_Accept_Active_Background: #fff;--sapButton_Accept_Active_BorderColor: #30914c;--sapButton_Accept_Active_TextColor: #256f3a;--sapButton_Accept_Selected_Background: #fff;--sapButton_Accept_Selected_BorderColor: #30914c;--sapButton_Accept_Selected_TextColor: #256f3a;--sapButton_Accept_Selected_Hover_Background: #e3f1b6;--sapButton_Accept_Selected_Hover_BorderColor: #30914c;--sapButton_Lite_Background: transparent;--sapButton_Lite_BorderColor: transparent;--sapButton_Lite_TextColor: #0064d9;--sapButton_Lite_Hover_Background: #eaecee;--sapButton_Lite_Hover_BorderColor: #bcc3ca;--sapButton_Lite_Hover_TextColor: #0064d9;--sapButton_Lite_Active_Background: #fff;--sapButton_Lite_Active_BorderColor: #0064d9;--sapButton_Selected_Background: #edf6ff;--sapButton_Selected_BorderColor: #0064d9;--sapButton_Selected_TextColor: #0064d9;--sapButton_Selected_Hover_Background: #d9ecff;--sapButton_Selected_Hover_BorderColor: #0064d9;--sapButton_Attention_Background: #fff3b7;--sapButton_Attention_BorderColor: #ffeb84;--sapButton_Attention_TextColor: #b44f00;--sapButton_Attention_Hover_Background: #ffef9e;--sapButton_Attention_Hover_BorderColor: #ffef9e;--sapButton_Attention_Hover_TextColor: #b44f00;--sapButton_Attention_Active_Background: #fff;--sapButton_Attention_Active_BorderColor: #dd6100;--sapButton_Attention_Active_TextColor: #b44f00;--sapButton_Attention_Selected_Background: #fff;--sapButton_Attention_Selected_BorderColor: #dd6100;--sapButton_Attention_Selected_TextColor: #b44f00;--sapButton_Attention_Selected_Hover_Background: #ffef9e;--sapButton_Attention_Selected_Hover_BorderColor: #dd6100;--sapButton_Negative_Background: #f53232;--sapButton_Negative_BorderColor: #f53232;--sapButton_Negative_TextColor: #fff;--sapButton_Negative_Hover_Background: #e90b0b;--sapButton_Negative_Hover_BorderColor: #e90b0b;--sapButton_Negative_Hover_TextColor: #fff;--sapButton_Negative_Active_Background: #fff;--sapButton_Negative_Active_BorderColor: #f53232;--sapButton_Negative_Active_TextColor: #aa0808;--sapButton_Critical_Background: #e76500;--sapButton_Critical_BorderColor: #e76500;--sapButton_Critical_TextColor: #fff;--sapButton_Critical_Hover_Background: #dd6100;--sapButton_Critical_Hover_BorderColor: #dd6100;--sapButton_Critical_Hover_TextColor: #fff;--sapButton_Critical_Active_Background: #fff;--sapButton_Critical_Active_BorderColor: #dd6100;--sapButton_Critical_Active_TextColor: #b44f00;--sapButton_Success_Background: #30914c;--sapButton_Success_BorderColor: #30914c;--sapButton_Success_TextColor: #fff;--sapButton_Success_Hover_Background: #2c8646;--sapButton_Success_Hover_BorderColor: #2c8646;--sapButton_Success_Hover_TextColor: #fff;--sapButton_Success_Active_Background: #fff;--sapButton_Success_Active_BorderColor: #30914c;--sapButton_Success_Active_TextColor: #256f3a;--sapButton_Information_Background: #e8f3ff;--sapButton_Information_BorderColor: #b5d8ff;--sapButton_Information_TextColor: #0064d9;--sapButton_Information_Hover_Background: #d4e8ff;--sapButton_Information_Hover_BorderColor: #b5d8ff;--sapButton_Information_Hover_TextColor: #0064d9;--sapButton_Information_Active_Background: #fff;--sapButton_Information_Active_BorderColor: #0064d9;--sapButton_Information_Active_TextColor: #0064d9;--sapButton_Neutral_Background: #e8f3ff;--sapButton_Neutral_BorderColor: #b5d8ff;--sapButton_Neutral_TextColor: #0064d9;--sapButton_Neutral_Hover_Background: #d4e8ff;--sapButton_Neutral_Hover_BorderColor: #b5d8ff;--sapButton_Neutral_Hover_TextColor: #0064d9;--sapButton_Neutral_Active_Background: #fff;--sapButton_Neutral_Active_BorderColor: #0064d9;--sapButton_Neutral_Active_TextColor: #0064d9;--sapButton_Track_Background: #788fa6;--sapButton_Track_BorderColor: #788fa6;--sapButton_Track_TextColor: #fff;--sapButton_Track_Hover_Background: #637d97;--sapButton_Track_Hover_BorderColor: #637d97;--sapButton_Track_Selected_Background: #0064d9;--sapButton_Track_Selected_BorderColor: #0064d9;--sapButton_Track_Selected_TextColor: #fff;--sapButton_Track_Selected_Hover_Background: #0058c0;--sapButton_Track_Selected_Hover_BorderColor: #0058c0;--sapButton_Handle_Background: #fff;--sapButton_Handle_BorderColor: #fff;--sapButton_Handle_TextColor: #1d2d3e;--sapButton_Handle_Hover_Background: #fff;--sapButton_Handle_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Handle_Selected_Background: #edf6ff;--sapButton_Handle_Selected_BorderColor: #edf6ff;--sapButton_Handle_Selected_TextColor: #0064d9;--sapButton_Handle_Selected_Hover_Background: #edf6ff;--sapButton_Handle_Selected_Hover_BorderColor: rgba(237,246,255,.5);--sapButton_Track_Negative_Background: #f53232;--sapButton_Track_Negative_BorderColor: #f53232;--sapButton_Track_Negative_TextColor: #fff;--sapButton_Track_Negative_Hover_Background: #e90b0b;--sapButton_Track_Negative_Hover_BorderColor: #e90b0b;--sapButton_Handle_Negative_Background: #fff;--sapButton_Handle_Negative_BorderColor: #fff;--sapButton_Handle_Negative_TextColor: #aa0808;--sapButton_Handle_Negative_Hover_Background: #fff;--sapButton_Handle_Negative_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Track_Positive_Background: #30914c;--sapButton_Track_Positive_BorderColor: #30914c;--sapButton_Track_Positive_TextColor: #fff;--sapButton_Track_Positive_Hover_Background: #2c8646;--sapButton_Track_Positive_Hover_BorderColor: #2c8646;--sapButton_Handle_Positive_Background: #fff;--sapButton_Handle_Positive_BorderColor: #fff;--sapButton_Handle_Positive_TextColor: #256f3a;--sapButton_Handle_Positive_Hover_Background: #fff;--sapButton_Handle_Positive_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_TokenBackground: #fff;--sapButton_TokenBorderColor: #bcc3ca;--sapField_Background: #fff;--sapField_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #556b81, #556b81) border-box;--sapField_TextColor: #131e29;--sapField_PlaceholderTextColor: #556b82;--sapField_BorderColor: #556b81;--sapField_HelpBackground: #fff;--sapField_BorderWidth: .0625rem;--sapField_BorderStyle: none;--sapField_BorderCornerRadius: .25rem;--sapField_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapField_Hover_Background: #fff;--sapField_Hover_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #0064d9, #0064d9) border-box;--sapField_Hover_BorderColor: #0064d9;--sapField_Hover_HelpBackground: #fff;--sapField_Hover_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapField_Hover_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_Hover_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_Hover_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_Hover_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapField_Active_BorderColor: #0064d9;--sapField_Focus_Background: #fff;--sapField_Focus_BorderColor: #0032a5;--sapField_Focus_HelpBackground: #fff;--sapField_ReadOnly_Background: #eaecee;--sapField_ReadOnly_BackgroundStyle: 0 100% / .375rem .0625rem repeat-x linear-gradient(90deg, #556b81 0, #556b81 .25rem, transparent .25rem) border-box;--sapField_ReadOnly_BorderColor: #556b81;--sapField_ReadOnly_BorderStyle: none;--sapField_ReadOnly_HelpBackground: #eaecee;--sapField_RequiredColor: #ba066c;--sapField_InvalidColor: #e90b0b;--sapField_InvalidBackground: #ffeaf4;--sapField_InvalidBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #e90b0b, #e90b0b) border-box;--sapField_InvalidBorderWidth: .125rem;--sapField_InvalidBorderStyle: none;--sapField_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_WarningColor: #dd6100;--sapField_WarningBackground: #fff8d6;--sapField_WarningBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #dd6100, #dd6100) border-box;--sapField_WarningBorderWidth: .125rem;--sapField_WarningBorderStyle: none;--sapField_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_SuccessColor: #30914c;--sapField_SuccessBackground: #f5fae5;--sapField_SuccessBackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #30914c, #30914c) border-box;--sapField_SuccessBorderWidth: .0625rem;--sapField_SuccessBorderStyle: none;--sapField_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_InformationColor: #0070f2;--sapField_InformationBackground: #e1f4ff;--sapField_InformationBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #0070f2, #0070f2) border-box;--sapField_InformationBorderWidth: .125rem;--sapField_InformationBorderStyle: none;--sapField_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapGroup_TitleBackground: #fff;--sapGroup_TitleBorderColor: #a8b2bd;--sapGroup_TitleTextColor: #1d2d3e;--sapGroup_Title_FontSize: 1rem;--sapGroup_ContentBackground: #fff;--sapGroup_ContentBorderColor: #d9d9d9;--sapGroup_BorderWidth: .0625rem;--sapGroup_BorderCornerRadius: .5rem;--sapGroup_FooterBackground: transparent;--sapToolbar_Background: #fff;--sapToolbar_SeparatorColor: #d9d9d9;--sapList_HeaderBackground: #fff;--sapList_HeaderBorderColor: #a8b2bd;--sapList_HeaderTextColor: #1d2d3e;--sapList_BorderColor: #e5e5e5;--sapList_BorderWidth: .0625rem;--sapList_TextColor: #1d2d3e;--sapList_Active_TextColor: #1d2d3e;--sapList_Active_Background: #dee2e5;--sapList_SelectionBackgroundColor: #ebf8ff;--sapList_SelectionBorderColor: #0064d9;--sapList_Hover_SelectionBackground: #dcf3ff;--sapList_Background: #fff;--sapList_Hover_Background: #eaecee;--sapList_AlternatingBackground: #f5f6f7;--sapList_GroupHeaderBackground: #fff;--sapList_GroupHeaderBorderColor: #a8b2bd;--sapList_GroupHeaderTextColor: #1d2d3e;--sapList_TableGroupHeaderBackground: #eff1f2;--sapList_TableGroupHeaderBorderColor: #a8b2bd;--sapList_TableGroupHeaderTextColor: #1d2d3e;--sapList_FooterBackground: #fff;--sapList_FooterTextColor: #1d2d3e;--sapList_TableFooterBorder: #a8b2bd;--sapList_TableFixedBorderColor: #8c8c8c;--sapMessage_ErrorBorderColor: #ff8ec4;--sapMessage_WarningBorderColor: #ffe770;--sapMessage_SuccessBorderColor: #cee67e;--sapMessage_InformationBorderColor: #7bcfff;--sapPopover_BorderCornerRadius: .5rem;--sapProgress_Background: #d5dadd;--sapProgress_BorderColor: #d5dadd;--sapProgress_TextColor: #1d2d3e;--sapProgress_FontSize: .875rem;--sapProgress_NegativeBackground: #ffdbec;--sapProgress_NegativeBorderColor: #ffdbec;--sapProgress_NegativeTextColor: #1d2d3e;--sapProgress_CriticalBackground: #fff4bd;--sapProgress_CriticalBorderColor: #fff4bd;--sapProgress_CriticalTextColor: #1d2d3e;--sapProgress_PositiveBackground: #e5f2ba;--sapProgress_PositiveBorderColor: #e5f2ba;--sapProgress_PositiveTextColor: #1d2d3e;--sapProgress_InformationBackground: #cdedff;--sapProgress_InformationBorderColor: #cdedff;--sapProgress_InformationTextColor: #1d2d3e;--sapProgress_Value_Background: #617b94;--sapProgress_Value_BorderColor: #617b94;--sapProgress_Value_TextColor: #788fa6;--sapProgress_Value_NegativeBackground: #f53232;--sapProgress_Value_NegativeBorderColor: #f53232;--sapProgress_Value_NegativeTextColor: #f53232;--sapProgress_Value_CriticalBackground: #e76500;--sapProgress_Value_CriticalBorderColor: #e76500;--sapProgress_Value_CriticalTextColor: #e76500;--sapProgress_Value_PositiveBackground: #30914c;--sapProgress_Value_PositiveBorderColor: #30914c;--sapProgress_Value_PositiveTextColor: #30914c;--sapProgress_Value_InformationBackground: #0070f2;--sapProgress_Value_InformationBorderColor: #0070f2;--sapProgress_Value_InformationTextColor: #0070f2;--sapScrollBar_FaceColor: #7b91a8;--sapScrollBar_TrackColor: #fff;--sapScrollBar_BorderColor: #7b91a8;--sapScrollBar_SymbolColor: #0064d9;--sapScrollBar_Dimension: .75rem;--sapScrollBar_Hover_FaceColor: #5b728b;--sapSlider_Background: #d5dadd;--sapSlider_BorderColor: #d5dadd;--sapSlider_Selected_Background: #0064d9;--sapSlider_Selected_BorderColor: #0064d9;--sapSlider_HandleBackground: #fff;--sapSlider_HandleBorderColor: #b0d5ff;--sapSlider_RangeHandleBackground: #fff;--sapSlider_Hover_HandleBackground: #d9ecff;--sapSlider_Hover_HandleBorderColor: #b0d5ff;--sapSlider_Hover_RangeHandleBackground: #d9ecff;--sapSlider_Active_HandleBackground: #fff;--sapSlider_Active_HandleBorderColor: #0064d9;--sapSlider_Active_RangeHandleBackground: transparent;--sapPageHeader_Background: #fff;--sapPageHeader_BorderColor: #d9d9d9;--sapPageHeader_TextColor: #1d2d3e;--sapPageFooter_Background: #fff;--sapPageFooter_BorderColor: #d9d9d9;--sapPageFooter_TextColor: #1d2d3e;--sapInfobar_Background: #c2fcee;--sapInfobar_Hover_Background: #fff;--sapInfobar_Active_Background: #fff;--sapInfobar_NonInteractive_Background: #f5f6f7;--sapInfobar_TextColor: #046c7a;--sapObjectHeader_Background: #fff;--sapObjectHeader_Hover_Background: #eaecee;--sapObjectHeader_BorderColor: #d9d9d9;--sapObjectHeader_Title_TextColor: #1d2d3e;--sapObjectHeader_Title_FontSize: 1.5rem;--sapObjectHeader_Title_SnappedFontSize: 1.25rem;--sapObjectHeader_Title_FontFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapObjectHeader_Subtitle_TextColor: #556b82;--sapBlockLayer_Background: #000;--sapTile_Background: #fff;--sapTile_Hover_Background: #eaecee;--sapTile_Active_Background: #dee2e5;--sapTile_BorderColor: transparent;--sapTile_BorderCornerRadius: 1rem;--sapTile_TitleTextColor: #1d2d3e;--sapTile_TextColor: #556b82;--sapTile_IconColor: #556b82;--sapTile_SeparatorColor: #ccc;--sapTile_Interactive_BorderColor: #b3b3b3;--sapTile_OverlayBackground: #fff;--sapTile_OverlayForegroundColor: #1d2d3e;--sapAccentColor1: #d27700;--sapAccentColor2: #aa0808;--sapAccentColor3: #ba066c;--sapAccentColor4: #a100c2;--sapAccentColor5: #5d36ff;--sapAccentColor6: #0057d2;--sapAccentColor7: #046c7a;--sapAccentColor8: #256f3a;--sapAccentColor9: #6c32a9;--sapAccentColor10: #5b738b;--sapAccentBackgroundColor1: #fff3b8;--sapAccentBackgroundColor2: #ffd0e7;--sapAccentBackgroundColor3: #ffdbe7;--sapAccentBackgroundColor4: #ffdcf3;--sapAccentBackgroundColor5: #ded3ff;--sapAccentBackgroundColor6: #d1efff;--sapAccentBackgroundColor7: #c2fcee;--sapAccentBackgroundColor8: #ebf5cb;--sapAccentBackgroundColor9: #ddccf0;--sapAccentBackgroundColor10: #eaecee;--sapIndicationColor_1: #840606;--sapIndicationColor_1_Background: #840606;--sapIndicationColor_1_BorderColor: #840606;--sapIndicationColor_1_TextColor: #fff;--sapIndicationColor_1_Hover_Background: #6c0505;--sapIndicationColor_1_Active_Background: #fff;--sapIndicationColor_1_Active_BorderColor: #fb9d9d;--sapIndicationColor_1_Active_TextColor: #840606;--sapIndicationColor_1_Selected_Background: #fff;--sapIndicationColor_1_Selected_BorderColor: #fb9d9d;--sapIndicationColor_1_Selected_TextColor: #840606;--sapIndicationColor_1b: #fb9d9d;--sapIndicationColor_1b_BorderColor: #fb9d9d;--sapIndicationColor_1b_Hover_Background: #fa8585;--sapIndicationColor_2: #aa0808;--sapIndicationColor_2_Background: #aa0808;--sapIndicationColor_2_BorderColor: #aa0808;--sapIndicationColor_2_TextColor: #fff;--sapIndicationColor_2_Hover_Background: #920707;--sapIndicationColor_2_Active_Background: #fff;--sapIndicationColor_2_Active_BorderColor: #fcc4c4;--sapIndicationColor_2_Active_TextColor: #aa0808;--sapIndicationColor_2_Selected_Background: #fff;--sapIndicationColor_2_Selected_BorderColor: #fcc4c4;--sapIndicationColor_2_Selected_TextColor: #aa0808;--sapIndicationColor_2b: #fcc4c4;--sapIndicationColor_2b_BorderColor: #fcc4c4;--sapIndicationColor_2b_Hover_Background: #fbacac;--sapIndicationColor_3: #b95100;--sapIndicationColor_3_Background: #e76500;--sapIndicationColor_3_BorderColor: #e76500;--sapIndicationColor_3_TextColor: #fff;--sapIndicationColor_3_Hover_Background: #d85e00;--sapIndicationColor_3_Active_Background: #fff;--sapIndicationColor_3_Active_BorderColor: #fff2c0;--sapIndicationColor_3_Active_TextColor: #b95100;--sapIndicationColor_3_Selected_Background: #fff;--sapIndicationColor_3_Selected_BorderColor: #fff2c0;--sapIndicationColor_3_Selected_TextColor: #b95100;--sapIndicationColor_3b: #fff2c0;--sapIndicationColor_3b_BorderColor: #fff2c0;--sapIndicationColor_3b_Hover_Background: #ffeda6;--sapIndicationColor_4: #256f3a;--sapIndicationColor_4_Background: #256f3a;--sapIndicationColor_4_BorderColor: #256f3a;--sapIndicationColor_4_TextColor: #fff;--sapIndicationColor_4_Hover_Background: #1f5c30;--sapIndicationColor_4_Active_Background: #fff;--sapIndicationColor_4_Active_BorderColor: #bae8bc;--sapIndicationColor_4_Active_TextColor: #256f3a;--sapIndicationColor_4_Selected_Background: #fff;--sapIndicationColor_4_Selected_BorderColor: #bae8bc;--sapIndicationColor_4_Selected_TextColor: #256f3a;--sapIndicationColor_4b: #bae8bc;--sapIndicationColor_4b_BorderColor: #bae8bc;--sapIndicationColor_4b_Hover_Background: #a7e2a9;--sapIndicationColor_5: #0070f2;--sapIndicationColor_5_Background: #0070f2;--sapIndicationColor_5_BorderColor: #0070f2;--sapIndicationColor_5_TextColor: #fff;--sapIndicationColor_5_Hover_Background: #0064d9;--sapIndicationColor_5_Active_Background: #fff;--sapIndicationColor_5_Active_BorderColor: #d3effd;--sapIndicationColor_5_Active_TextColor: #0070f2;--sapIndicationColor_5_Selected_Background: #fff;--sapIndicationColor_5_Selected_BorderColor: #d3effd;--sapIndicationColor_5_Selected_TextColor: #0070f2;--sapIndicationColor_5b: #d3effd;--sapIndicationColor_5b_BorderColor: #d3effd;--sapIndicationColor_5b_Hover_Background: #bbe6fc;--sapIndicationColor_6: #046c7a;--sapIndicationColor_6_Background: #046c7a;--sapIndicationColor_6_BorderColor: #046c7a;--sapIndicationColor_6_TextColor: #fff;--sapIndicationColor_6_Hover_Background: #035661;--sapIndicationColor_6_Active_Background: #fff;--sapIndicationColor_6_Active_BorderColor: #cdf5ec;--sapIndicationColor_6_Active_TextColor: #046c7a;--sapIndicationColor_6_Selected_Background: #fff;--sapIndicationColor_6_Selected_BorderColor: #cdf5ec;--sapIndicationColor_6_Selected_TextColor: #046c7a;--sapIndicationColor_6b: #cdf5ec;--sapIndicationColor_6b_BorderColor: #cdf5ec;--sapIndicationColor_6b_Hover_Background: #b8f1e4;--sapIndicationColor_7: #5d36ff;--sapIndicationColor_7_Background: #5d36ff;--sapIndicationColor_7_BorderColor: #5d36ff;--sapIndicationColor_7_TextColor: #fff;--sapIndicationColor_7_Hover_Background: #481cff;--sapIndicationColor_7_Active_Background: #fff;--sapIndicationColor_7_Active_BorderColor: #e2dbff;--sapIndicationColor_7_Active_TextColor: #5d36ff;--sapIndicationColor_7_Selected_Background: #fff;--sapIndicationColor_7_Selected_BorderColor: #e2dbff;--sapIndicationColor_7_Selected_TextColor: #5d36ff;--sapIndicationColor_7b: #e2dbff;--sapIndicationColor_7b_BorderColor: #e2dbff;--sapIndicationColor_7b_Hover_Background: #cdc2ff;--sapIndicationColor_8: #a100c2;--sapIndicationColor_8_Background: #a100c2;--sapIndicationColor_8_BorderColor: #a100c2;--sapIndicationColor_8_TextColor: #fff;--sapIndicationColor_8_Hover_Background: #8c00a9;--sapIndicationColor_8_Active_Background: #fff;--sapIndicationColor_8_Active_BorderColor: #f8d6ff;--sapIndicationColor_8_Active_TextColor: #a100c2;--sapIndicationColor_8_Selected_Background: #fff;--sapIndicationColor_8_Selected_BorderColor: #f8d6ff;--sapIndicationColor_8_Selected_TextColor: #a100c2;--sapIndicationColor_8b: #f8d6ff;--sapIndicationColor_8b_BorderColor: #f8d6ff;--sapIndicationColor_8b_Hover_Background: #f4bdff;--sapIndicationColor_9: #1d2d3e;--sapIndicationColor_9_Background: #1d2d3e;--sapIndicationColor_9_BorderColor: #1d2d3e;--sapIndicationColor_9_TextColor: #fff;--sapIndicationColor_9_Hover_Background: #15202d;--sapIndicationColor_9_Active_Background: #fff;--sapIndicationColor_9_Active_BorderColor: #d9d9d9;--sapIndicationColor_9_Active_TextColor: #1d2d3e;--sapIndicationColor_9_Selected_Background: #fff;--sapIndicationColor_9_Selected_BorderColor: #d9d9d9;--sapIndicationColor_9_Selected_TextColor: #1d2d3e;--sapIndicationColor_9b: #fff;--sapIndicationColor_9b_BorderColor: #d9d9d9;--sapIndicationColor_9b_Hover_Background: #f2f2f2;--sapIndicationColor_10: #45484a;--sapIndicationColor_10_Background: #83888b;--sapIndicationColor_10_BorderColor: #83888b;--sapIndicationColor_10_TextColor: #fff;--sapIndicationColor_10_Hover_Background: #767b7e;--sapIndicationColor_10_Active_Background: #fff;--sapIndicationColor_10_Active_BorderColor: #eaecee;--sapIndicationColor_10_Active_TextColor: #45484a;--sapIndicationColor_10_Selected_Background: #fff;--sapIndicationColor_10_Selected_BorderColor: #eaecee;--sapIndicationColor_10_Selected_TextColor: #45484a;--sapIndicationColor_10b: #eaecee;--sapIndicationColor_10b_BorderColor: #eaecee;--sapIndicationColor_10b_Hover_Background: #dcdfe3;--sapLegend_WorkingBackground: #fff;--sapLegend_NonWorkingBackground: #ebebeb;--sapLegend_CurrentDateTime: #a100c2;--sapLegendColor1: #c35500;--sapLegendColor2: #d23a0a;--sapLegendColor3: #df1278;--sapLegendColor4: #840606;--sapLegendColor5: #cc00dc;--sapLegendColor6: #0057d2;--sapLegendColor7: #07838f;--sapLegendColor8: #188918;--sapLegendColor9: #5b738b;--sapLegendColor10: #7800a4;--sapLegendColor11: #a93e00;--sapLegendColor12: #aa2608;--sapLegendColor13: #ba066c;--sapLegendColor14: #8d2a00;--sapLegendColor15: #4e247a;--sapLegendColor16: #002a86;--sapLegendColor17: #035663;--sapLegendColor18: #1e592f;--sapLegendColor19: #1a4796;--sapLegendColor20: #470ced;--sapLegendBackgroundColor1: #ffef9f;--sapLegendBackgroundColor2: #feeae1;--sapLegendBackgroundColor3: #fbf6f8;--sapLegendBackgroundColor4: #fbebeb;--sapLegendBackgroundColor5: #ffe5fe;--sapLegendBackgroundColor6: #d1efff;--sapLegendBackgroundColor7: #c2fcee;--sapLegendBackgroundColor8: #f5fae5;--sapLegendBackgroundColor9: #f5f6f7;--sapLegendBackgroundColor10: #fff0fa;--sapLegendBackgroundColor11: #fff8d6;--sapLegendBackgroundColor12: #fff6f6;--sapLegendBackgroundColor13: #f7ebef;--sapLegendBackgroundColor14: #f1ecd5;--sapLegendBackgroundColor15: #f0e7f8;--sapLegendBackgroundColor16: #ebf8ff;--sapLegendBackgroundColor17: #dafdf5;--sapLegendBackgroundColor18: #ebf5cb;--sapLegendBackgroundColor19: #fafdff;--sapLegendBackgroundColor20: #eceeff;--sapChart_Background: #fff;--sapChart_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapChart_ContrastShadowColor: #fff;--sapChart_ContrastLineColor: #fff;--sapChart_LineColor_1: #e1e6eb;--sapChart_LineColor_2: #768da4;--sapChart_LineColor_3: #000001;--sapChart_Choropleth_Background: #edf0f3;--sapChart_ChoroplethRegion_Background: #758ca4;--sapChart_ChoroplethRegion_BorderColor: #edf0f3;--sapChart_Data_TextColor: #000;--sapChart_Data_ContrastTextColor: #fff;--sapChart_Data_InteractiveColor: #000001;--sapChart_Data_Active_Background: #dee2e5;--sapChart_OrderedColor_1: #3278be;--sapChart_OrderedColor_2: #c87b00;--sapChart_OrderedColor_3: #75980b;--sapChart_OrderedColor_4: #df1278;--sapChart_OrderedColor_5: #8b47d7;--sapChart_OrderedColor_6: #049f9a;--sapChart_OrderedColor_7: #0070f2;--sapChart_OrderedColor_8: #cc00dc;--sapChart_OrderedColor_9: #798c77;--sapChart_OrderedColor_10: #da6c6c;--sapChart_OrderedColor_11: #5d36ff;--sapChart_OrderedColor_12: #a68a5b;--sapChart_Bad: #f53232;--sapChart_Critical: #e26300;--sapChart_Good: #30914c;--sapChart_Neutral: #758ca4;--sapChart_Sequence_1_Plus3: #84b8eb;--sapChart_Sequence_1_Plus3_TextColor: #000;--sapChart_Sequence_1_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus2: #468acd;--sapChart_Sequence_1_Plus2_TextColor: #000;--sapChart_Sequence_1_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus1: #3c8cdd;--sapChart_Sequence_1_Plus1_TextColor: #000;--sapChart_Sequence_1_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1: #3278be;--sapChart_Sequence_1_TextColor: #fff;--sapChart_Sequence_1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_BorderColor: #3278be;--sapChart_Sequence_1_Minus1: #31669c;--sapChart_Sequence_1_Minus1_TextColor: #fff;--sapChart_Sequence_1_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus2: #31669c;--sapChart_Sequence_1_Minus2_TextColor: #fff;--sapChart_Sequence_1_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus3: #204060;--sapChart_Sequence_1_Minus3_TextColor: #fff;--sapChart_Sequence_1_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus4: #19334e;--sapChart_Sequence_1_Minus4_TextColor: #fff;--sapChart_Sequence_1_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus5: #13263a;--sapChart_Sequence_1_Minus5_TextColor: #fff;--sapChart_Sequence_1_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Plus3: #efbf72;--sapChart_Sequence_2_Plus3_TextColor: #000;--sapChart_Sequence_2_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus2: #eaaa44;--sapChart_Sequence_2_Plus2_TextColor: #000;--sapChart_Sequence_2_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus1: #e29419;--sapChart_Sequence_2_Plus1_TextColor: #000;--sapChart_Sequence_2_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2: #c87b00;--sapChart_Sequence_2_TextColor: #000;--sapChart_Sequence_2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_BorderColor: #9f6200;--sapChart_Sequence_2_Minus1: #9f6200;--sapChart_Sequence_2_Minus1_TextColor: #fff;--sapChart_Sequence_2_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus2: #7c4c00;--sapChart_Sequence_2_Minus2_TextColor: #fff;--sapChart_Sequence_2_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus3: #623c00;--sapChart_Sequence_2_Minus3_TextColor: #fff;--sapChart_Sequence_2_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus4: #623c00;--sapChart_Sequence_2_Minus4_TextColor: #fff;--sapChart_Sequence_2_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus5: #2f1d00;--sapChart_Sequence_2_Minus5_TextColor: #fff;--sapChart_Sequence_2_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Plus3: #b9d369;--sapChart_Sequence_3_Plus3_TextColor: #000;--sapChart_Sequence_3_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus2: #a6c742;--sapChart_Sequence_3_Plus2_TextColor: #000;--sapChart_Sequence_3_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus1: #8fad33;--sapChart_Sequence_3_Plus1_TextColor: #000;--sapChart_Sequence_3_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3: #75980b;--sapChart_Sequence_3_TextColor: #000;--sapChart_Sequence_3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_BorderColor: #587208;--sapChart_Sequence_3_Minus1: #587208;--sapChart_Sequence_3_Minus1_TextColor: #fff;--sapChart_Sequence_3_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus2: #3e5106;--sapChart_Sequence_3_Minus2_TextColor: #fff;--sapChart_Sequence_3_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus3: #2c3904;--sapChart_Sequence_3_Minus3_TextColor: #fff;--sapChart_Sequence_3_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus4: #212b03;--sapChart_Sequence_3_Minus4_TextColor: #fff;--sapChart_Sequence_3_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus5: #161c02;--sapChart_Sequence_3_Minus5_TextColor: #fff;--sapChart_Sequence_3_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Plus3: #f473b3;--sapChart_Sequence_4_Plus3_TextColor: #000;--sapChart_Sequence_4_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus2: #f14d9e;--sapChart_Sequence_4_Plus2_TextColor: #000;--sapChart_Sequence_4_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus1: #ee278a;--sapChart_Sequence_4_Plus1_TextColor: #000;--sapChart_Sequence_4_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4: #df1278;--sapChart_Sequence_4_TextColor: #fff;--sapChart_Sequence_4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_BorderColor: #df1278;--sapChart_Sequence_4_Minus1: #b90f64;--sapChart_Sequence_4_Minus1_TextColor: #fff;--sapChart_Sequence_4_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus2: #930c4f;--sapChart_Sequence_4_Minus2_TextColor: #fff;--sapChart_Sequence_4_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus3: #770a40;--sapChart_Sequence_4_Minus3_TextColor: #fff;--sapChart_Sequence_4_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus4: #51072c;--sapChart_Sequence_4_Minus4_TextColor: #fff;--sapChart_Sequence_4_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus5: #3a051f;--sapChart_Sequence_4_Minus5_TextColor: #fff;--sapChart_Sequence_4_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Plus3: #d5bcf0;--sapChart_Sequence_5_Plus3_TextColor: #000;--sapChart_Sequence_5_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus2: #b994e0;--sapChart_Sequence_5_Plus2_TextColor: #000;--sapChart_Sequence_5_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus1: #a679d8;--sapChart_Sequence_5_Plus1_TextColor: #000;--sapChart_Sequence_5_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5: #8b47d7;--sapChart_Sequence_5_TextColor: #fff;--sapChart_Sequence_5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_BorderColor: #8b47d7;--sapChart_Sequence_5_Minus1: #7236b5;--sapChart_Sequence_5_Minus1_TextColor: #fff;--sapChart_Sequence_5_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus2: #5e2c96;--sapChart_Sequence_5_Minus2_TextColor: #fff;--sapChart_Sequence_5_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus3: #522682;--sapChart_Sequence_5_Minus3_TextColor: #fff;--sapChart_Sequence_5_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus4: #46216f;--sapChart_Sequence_5_Minus4_TextColor: #fff;--sapChart_Sequence_5_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus5: #341358;--sapChart_Sequence_5_Minus5_TextColor: #fff;--sapChart_Sequence_5_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Plus3: #64ede9;--sapChart_Sequence_6_Plus3_TextColor: #000;--sapChart_Sequence_6_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus2: #2ee0da;--sapChart_Sequence_6_Plus2_TextColor: #000;--sapChart_Sequence_6_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus1: #05c7c1;--sapChart_Sequence_6_Plus1_TextColor: #000;--sapChart_Sequence_6_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6: #049f9a;--sapChart_Sequence_6_TextColor: #000;--sapChart_Sequence_6_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_BorderColor: #05c7c1;--sapChart_Sequence_6_Minus1: #02837f;--sapChart_Sequence_6_Minus1_TextColor: #fff;--sapChart_Sequence_6_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus2: #006663;--sapChart_Sequence_6_Minus2_TextColor: #fff;--sapChart_Sequence_6_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus3: #00514f;--sapChart_Sequence_6_Minus3_TextColor: #fff;--sapChart_Sequence_6_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus4: #003d3b;--sapChart_Sequence_6_Minus4_TextColor: #fff;--sapChart_Sequence_6_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus5: #002322;--sapChart_Sequence_6_Minus5_TextColor: #fff;--sapChart_Sequence_6_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Plus3: #68aeff;--sapChart_Sequence_7_Plus3_TextColor: #000;--sapChart_Sequence_7_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus2: #4098ff;--sapChart_Sequence_7_Plus2_TextColor: #000;--sapChart_Sequence_7_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus1: #1c85ff;--sapChart_Sequence_7_Plus1_TextColor: #000;--sapChart_Sequence_7_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7: #0070f2;--sapChart_Sequence_7_TextColor: #fff;--sapChart_Sequence_7_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_BorderColor: #0070f2;--sapChart_Sequence_7_Minus1: #0062d3;--sapChart_Sequence_7_Minus1_TextColor: #fff;--sapChart_Sequence_7_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus2: #0054b5;--sapChart_Sequence_7_Minus2_TextColor: #fff;--sapChart_Sequence_7_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus3: #00418c;--sapChart_Sequence_7_Minus3_TextColor: #fff;--sapChart_Sequence_7_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus4: #00244f;--sapChart_Sequence_7_Minus4_TextColor: #fff;--sapChart_Sequence_7_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus5: #001b3a;--sapChart_Sequence_7_Minus5_TextColor: #fff;--sapChart_Sequence_7_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Plus3: #f462ff;--sapChart_Sequence_8_Plus3_TextColor: #000;--sapChart_Sequence_8_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus2: #f034ff;--sapChart_Sequence_8_Plus2_TextColor: #000;--sapChart_Sequence_8_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus1: #ed0bff;--sapChart_Sequence_8_Plus1_TextColor: #000;--sapChart_Sequence_8_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8: #cc00dc;--sapChart_Sequence_8_TextColor: #fff;--sapChart_Sequence_8_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_BorderColor: #cc00dc;--sapChart_Sequence_8_Minus1: #a600b3;--sapChart_Sequence_8_Minus1_TextColor: #fff;--sapChart_Sequence_8_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus2: #80008a;--sapChart_Sequence_8_Minus2_TextColor: #fff;--sapChart_Sequence_8_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus3: #6d0076;--sapChart_Sequence_8_Minus3_TextColor: #fff;--sapChart_Sequence_8_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus4: #56005d;--sapChart_Sequence_8_Minus4_TextColor: #fff;--sapChart_Sequence_8_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus5: #350039;--sapChart_Sequence_8_Minus5_TextColor: #fff;--sapChart_Sequence_8_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Plus3: #bdc6bc;--sapChart_Sequence_9_Plus3_TextColor: #000;--sapChart_Sequence_9_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus2: #b5bfb4;--sapChart_Sequence_9_Plus2_TextColor: #000;--sapChart_Sequence_9_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus1: #97a695;--sapChart_Sequence_9_Plus1_TextColor: #000;--sapChart_Sequence_9_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9: #798c77;--sapChart_Sequence_9_TextColor: #000;--sapChart_Sequence_9_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_BorderColor: #798c77;--sapChart_Sequence_9_Minus1: #667664;--sapChart_Sequence_9_Minus1_TextColor: #fff;--sapChart_Sequence_9_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus2: #536051;--sapChart_Sequence_9_Minus2_TextColor: #fff;--sapChart_Sequence_9_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus3: #404a3f;--sapChart_Sequence_9_Minus3_TextColor: #fff;--sapChart_Sequence_9_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus4: #2d342c;--sapChart_Sequence_9_Minus4_TextColor: #fff;--sapChart_Sequence_9_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus5: #1e231e;--sapChart_Sequence_9_Minus5_TextColor: #fff;--sapChart_Sequence_9_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Plus3: #f1c6c6;--sapChart_Sequence_10_Plus3_TextColor: #000;--sapChart_Sequence_10_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus2: #eaadad;--sapChart_Sequence_10_Plus2_TextColor: #000;--sapChart_Sequence_10_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus1: #e28d8d;--sapChart_Sequence_10_Plus1_TextColor: #000;--sapChart_Sequence_10_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10: #da6c6c;--sapChart_Sequence_10_TextColor: #000;--sapChart_Sequence_10_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_BorderColor: #b75757;--sapChart_Sequence_10_Minus1: #b75757;--sapChart_Sequence_10_Minus1_TextColor: #000;--sapChart_Sequence_10_Minus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Minus2: #9d4343;--sapChart_Sequence_10_Minus2_TextColor: #fff;--sapChart_Sequence_10_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus3: #803737;--sapChart_Sequence_10_Minus3_TextColor: #fff;--sapChart_Sequence_10_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus4: #672c2c;--sapChart_Sequence_10_Minus4_TextColor: #fff;--sapChart_Sequence_10_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus5: #562424;--sapChart_Sequence_10_Minus5_TextColor: #fff;--sapChart_Sequence_10_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Plus3: #c0b0ff;--sapChart_Sequence_11_Plus3_TextColor: #000;--sapChart_Sequence_11_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus2: #9b83ff;--sapChart_Sequence_11_Plus2_TextColor: #000;--sapChart_Sequence_11_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus1: #8669ff;--sapChart_Sequence_11_Plus1_TextColor: #000;--sapChart_Sequence_11_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11: #5d36ff;--sapChart_Sequence_11_TextColor: #fff;--sapChart_Sequence_11_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_BorderColor: #5d36ff;--sapChart_Sequence_11_Minus1: #4b25e7;--sapChart_Sequence_11_Minus1_TextColor: #fff;--sapChart_Sequence_11_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus2: #3a17cd;--sapChart_Sequence_11_Minus2_TextColor: #fff;--sapChart_Sequence_11_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus3: #2f13a8;--sapChart_Sequence_11_Minus3_TextColor: #fff;--sapChart_Sequence_11_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus4: #250f83;--sapChart_Sequence_11_Minus4_TextColor: #fff;--sapChart_Sequence_11_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus5: #2f13a8;--sapChart_Sequence_11_Minus5_TextColor: #fff;--sapChart_Sequence_11_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Plus3: #e4ddcf;--sapChart_Sequence_12_Plus3_TextColor: #000;--sapChart_Sequence_12_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus2: #dacebb;--sapChart_Sequence_12_Plus2_TextColor: #000;--sapChart_Sequence_12_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus1: #c4b293;--sapChart_Sequence_12_Plus1_TextColor: #000;--sapChart_Sequence_12_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12: #a68a5b;--sapChart_Sequence_12_TextColor: #000;--sapChart_Sequence_12_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_BorderColor: #a68a5b;--sapChart_Sequence_12_Minus1: #8c744c;--sapChart_Sequence_12_Minus1_TextColor: #fff;--sapChart_Sequence_12_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus2: #786441;--sapChart_Sequence_12_Minus2_TextColor: #fff;--sapChart_Sequence_12_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus3: #5e4e33;--sapChart_Sequence_12_Minus3_TextColor: #fff;--sapChart_Sequence_12_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus4: #433825;--sapChart_Sequence_12_Minus4_TextColor: #fff;--sapChart_Sequence_12_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus5: #30271a;--sapChart_Sequence_12_Minus5_TextColor: #fff;--sapChart_Sequence_12_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Plus3: #fdcece;--sapChart_Sequence_Bad_Plus3_TextColor: #000;--sapChart_Sequence_Bad_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus2: #fa9d9d;--sapChart_Sequence_Bad_Plus2_TextColor: #000;--sapChart_Sequence_Bad_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus1: #f86c6c;--sapChart_Sequence_Bad_Plus1_TextColor: #000;--sapChart_Sequence_Bad_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad: #f53232;--sapChart_Sequence_Bad_TextColor: #000;--sapChart_Sequence_Bad_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_BorderColor: #f53232;--sapChart_Sequence_Bad_Minus1: #d00a0a;--sapChart_Sequence_Bad_Minus1_TextColor: #fff;--sapChart_Sequence_Bad_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus2: #a90808;--sapChart_Sequence_Bad_Minus2_TextColor: #fff;--sapChart_Sequence_Bad_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus3: #830606;--sapChart_Sequence_Bad_Minus3_TextColor: #fff;--sapChart_Sequence_Bad_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus4: #570404;--sapChart_Sequence_Bad_Minus4_TextColor: #fff;--sapChart_Sequence_Bad_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus5: #320000;--sapChart_Sequence_Bad_Minus5_TextColor: #fff;--sapChart_Sequence_Bad_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Plus3: #ffb881;--sapChart_Sequence_Critical_Plus3_TextColor: #000;--sapChart_Sequence_Critical_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus2: #ff933f;--sapChart_Sequence_Critical_Plus2_TextColor: #000;--sapChart_Sequence_Critical_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus1: #ff760c;--sapChart_Sequence_Critical_Plus1_TextColor: #000;--sapChart_Sequence_Critical_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical: #e26300;--sapChart_Sequence_Critical_TextColor: #000;--sapChart_Sequence_Critical_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_BorderColor: #e26300;--sapChart_Sequence_Critical_Minus1: #c35600;--sapChart_Sequence_Critical_Minus1_TextColor: #fff;--sapChart_Sequence_Critical_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus2: #aa4a00;--sapChart_Sequence_Critical_Minus2_TextColor: #fff;--sapChart_Sequence_Critical_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus3: #903f00;--sapChart_Sequence_Critical_Minus3_TextColor: #fff;--sapChart_Sequence_Critical_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus4: #6d3000;--sapChart_Sequence_Critical_Minus4_TextColor: #fff;--sapChart_Sequence_Critical_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus5: #492000;--sapChart_Sequence_Critical_Minus5_TextColor: #fff;--sapChart_Sequence_Critical_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Plus3: #88d79f;--sapChart_Sequence_Good_Plus3_TextColor: #000;--sapChart_Sequence_Good_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus2: #56c776;--sapChart_Sequence_Good_Plus2_TextColor: #000;--sapChart_Sequence_Good_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus1: #3ab05c;--sapChart_Sequence_Good_Plus1_TextColor: #000;--sapChart_Sequence_Good_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good: #30914c;--sapChart_Sequence_Good_TextColor: #000;--sapChart_Sequence_Good_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_BorderColor: #30914c;--sapChart_Sequence_Good_Minus1: #287a40;--sapChart_Sequence_Good_Minus1_TextColor: #fff;--sapChart_Sequence_Good_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus2: #226736;--sapChart_Sequence_Good_Minus2_TextColor: #fff;--sapChart_Sequence_Good_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus3: #1c542c;--sapChart_Sequence_Good_Minus3_TextColor: #fff;--sapChart_Sequence_Good_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus4: #13391e;--sapChart_Sequence_Good_Minus4_TextColor: #fff;--sapChart_Sequence_Good_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus5: #0a1e10;--sapChart_Sequence_Good_Minus5_TextColor: #fff;--sapChart_Sequence_Good_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Plus3: #edf0f3;--sapChart_Sequence_Neutral_Plus3_TextColor: #000;--sapChart_Sequence_Neutral_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus2: #c2ccd7;--sapChart_Sequence_Neutral_Plus2_TextColor: #000;--sapChart_Sequence_Neutral_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus1: #9aabbc;--sapChart_Sequence_Neutral_Plus1_TextColor: #000;--sapChart_Sequence_Neutral_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral: #758ca4;--sapChart_Sequence_Neutral_TextColor: #000;--sapChart_Sequence_Neutral_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_BorderColor: #758ca4;--sapChart_Sequence_Neutral_Minus1: #5b728b;--sapChart_Sequence_Neutral_Minus1_TextColor: #fff;--sapChart_Sequence_Neutral_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus2: #495e74;--sapChart_Sequence_Neutral_Minus2_TextColor: #fff;--sapChart_Sequence_Neutral_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus3: #364a5f;--sapChart_Sequence_Neutral_Minus3_TextColor: #fff;--sapChart_Sequence_Neutral_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus4: #233649;--sapChart_Sequence_Neutral_Minus4_TextColor: #fff;--sapChart_Sequence_Neutral_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus5: #1a2633;--sapChart_Sequence_Neutral_Minus5_TextColor: #fff;--sapChart_Sequence_Neutral_Minus5_TextShadow: 0 0 .125rem #223548;}\n' }, ER = { packageName: "@ui5/webcomponents", fileName: "themes/sap_horizon/parameters-bundle.css.ts", content: ':root{--ui5-v2-4-0-avatar-hover-box-shadow-offset: 0px 0px 0px .0625rem;--ui5-v2-4-0-avatar-initials-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-border-radius-img-deduction: .0625rem;--_ui5-v2-4-0_avatar_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_focus_width: .0625rem;--_ui5-v2-4-0_avatar_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_overflow_button_focus_offset: .0625rem;--_ui5-v2-4-0_avatar_focus_offset: .1875rem;--ui5-v2-4-0-avatar-initials-border: .0625rem solid var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-border-radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_avatar_fontsize_XS: 1rem;--_ui5-v2-4-0_avatar_fontsize_S: 1.125rem;--_ui5-v2-4-0_avatar_fontsize_M: 1.5rem;--_ui5-v2-4-0_avatar_fontsize_L: 2.25rem;--_ui5-v2-4-0_avatar_fontsize_XL: 3rem;--ui5-v2-4-0-avatar-accent1: var(--sapAvatar_1_Background);--ui5-v2-4-0-avatar-accent2: var(--sapAvatar_2_Background);--ui5-v2-4-0-avatar-accent3: var(--sapAvatar_3_Background);--ui5-v2-4-0-avatar-accent4: var(--sapAvatar_4_Background);--ui5-v2-4-0-avatar-accent5: var(--sapAvatar_5_Background);--ui5-v2-4-0-avatar-accent6: var(--sapAvatar_6_Background);--ui5-v2-4-0-avatar-accent7: var(--sapAvatar_7_Background);--ui5-v2-4-0-avatar-accent8: var(--sapAvatar_8_Background);--ui5-v2-4-0-avatar-accent9: var(--sapAvatar_9_Background);--ui5-v2-4-0-avatar-accent10: var(--sapAvatar_10_Background);--ui5-v2-4-0-avatar-placeholder: var(--sapContent_ImagePlaceholderBackground);--ui5-v2-4-0-avatar-accent1-color: var(--sapAvatar_1_TextColor);--ui5-v2-4-0-avatar-accent2-color: var(--sapAvatar_2_TextColor);--ui5-v2-4-0-avatar-accent3-color: var(--sapAvatar_3_TextColor);--ui5-v2-4-0-avatar-accent4-color: var(--sapAvatar_4_TextColor);--ui5-v2-4-0-avatar-accent5-color: var(--sapAvatar_5_TextColor);--ui5-v2-4-0-avatar-accent6-color: var(--sapAvatar_6_TextColor);--ui5-v2-4-0-avatar-accent7-color: var(--sapAvatar_7_TextColor);--ui5-v2-4-0-avatar-accent8-color: var(--sapAvatar_8_TextColor);--ui5-v2-4-0-avatar-accent9-color: var(--sapAvatar_9_TextColor);--ui5-v2-4-0-avatar-accent10-color: var(--sapAvatar_10_TextColor);--ui5-v2-4-0-avatar-placeholder-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-accent1-border-color: var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-accent2-border-color: var(--sapAvatar_2_BorderColor);--ui5-v2-4-0-avatar-accent3-border-color: var(--sapAvatar_3_BorderColor);--ui5-v2-4-0-avatar-accent4-border-color: var(--sapAvatar_4_BorderColor);--ui5-v2-4-0-avatar-accent5-border-color: var(--sapAvatar_5_BorderColor);--ui5-v2-4-0-avatar-accent6-border-color: var(--sapAvatar_6_BorderColor);--ui5-v2-4-0-avatar-accent7-border-color: var(--sapAvatar_7_BorderColor);--ui5-v2-4-0-avatar-accent8-border-color: var(--sapAvatar_8_BorderColor);--ui5-v2-4-0-avatar-accent9-border-color: var(--sapAvatar_9_BorderColor);--ui5-v2-4-0-avatar-accent10-border-color: var(--sapAvatar_10_BorderColor);--ui5-v2-4-0-avatar-placeholder-border-color: var(--sapContent_ImagePlaceholderBackground);--_ui5-v2-4-0_avatar_icon_XS: var(--_ui5-v2-4-0_avatar_fontsize_XS);--_ui5-v2-4-0_avatar_icon_S: var(--_ui5-v2-4-0_avatar_fontsize_S);--_ui5-v2-4-0_avatar_icon_M: var(--_ui5-v2-4-0_avatar_fontsize_M);--_ui5-v2-4-0_avatar_icon_L: var(--_ui5-v2-4-0_avatar_fontsize_L);--_ui5-v2-4-0_avatar_icon_XL: var(--_ui5-v2-4-0_avatar_fontsize_XL);--_ui5-v2-4-0_avatar_group_button_focus_border: none;--_ui5-v2-4-0_avatar_group_focus_border_radius: .375rem;--_ui5-v2-4-0-tag-height: 1rem;--_ui5-v2-4-0-tag-icon-width: .75rem;--ui5-v2-4-0-tag-text-shadow: var(--sapContent_TextShadow);--ui5-v2-4-0-tag-contrast-text-shadow: var(--sapContent_ContrastTextShadow);--ui5-v2-4-0-tag-information-text-shadow: var(--ui5-v2-4-0-tag-text-shadow);--ui5-v2-4-0-tag-set2-color-scheme-1-color: var(--sapIndicationColor_1);--ui5-v2-4-0-tag-set2-color-scheme-1-background: var(--sapIndicationColor_1b);--ui5-v2-4-0-tag-set2-color-scheme-1-border: var(--sapIndicationColor_1b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-1-hover-background: var(--sapIndicationColor_1b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-color: var(--sapIndicationColor_1_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-1-active-background: var(--sapIndicationColor_1_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-border: var(--sapIndicationColor_1_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-color: var(--sapIndicationColor_2);--ui5-v2-4-0-tag-set2-color-scheme-2-background: var(--sapIndicationColor_2b);--ui5-v2-4-0-tag-set2-color-scheme-2-border: var(--sapIndicationColor_2b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-hover-background: var(--sapIndicationColor_2b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-color: var(--sapIndicationColor_2_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-2-active-background: var(--sapIndicationColor_2_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-border: var(--sapIndicationColor_2_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-color: var(--sapIndicationColor_3);--ui5-v2-4-0-tag-set2-color-scheme-3-background: var(--sapIndicationColor_3b);--ui5-v2-4-0-tag-set2-color-scheme-3-border: var(--sapIndicationColor_3b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-hover-background: var(--sapIndicationColor_3b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-color: var(--sapIndicationColor_3_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-3-active-background: var(--sapIndicationColor_3_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-border: var(--sapIndicationColor_3_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-color: var(--sapIndicationColor_4);--ui5-v2-4-0-tag-set2-color-scheme-4-background: var(--sapIndicationColor_4b);--ui5-v2-4-0-tag-set2-color-scheme-4-border: var(--sapIndicationColor_4b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-hover-background: var(--sapIndicationColor_4b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-color: var(--sapIndicationColor_4_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-4-active-background: var(--sapIndicationColor_4_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-border: var(--sapIndicationColor_4_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-color: var(--sapIndicationColor_5);--ui5-v2-4-0-tag-set2-color-scheme-5-background: var(--sapIndicationColor_5b);--ui5-v2-4-0-tag-set2-color-scheme-5-border: var(--sapIndicationColor_5b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-hover-background: var(--sapIndicationColor_5b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-color: var(--sapIndicationColor_5_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-5-active-background: var(--sapIndicationColor_5_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-border: var(--sapIndicationColor_5_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-color: var(--sapIndicationColor_6);--ui5-v2-4-0-tag-set2-color-scheme-6-background: var(--sapIndicationColor_6b);--ui5-v2-4-0-tag-set2-color-scheme-6-border: var(--sapIndicationColor_6b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-hover-background: var(--sapIndicationColor_6b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-color: var(--sapIndicationColor_6_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-6-active-background: var(--sapIndicationColor_6_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-border: var(--sapIndicationColor_6_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-color: var(--sapIndicationColor_7);--ui5-v2-4-0-tag-set2-color-scheme-7-background: var(--sapIndicationColor_7b);--ui5-v2-4-0-tag-set2-color-scheme-7-border: var(--sapIndicationColor_7b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-hover-background: var(--sapIndicationColor_7b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-color: var(--sapIndicationColor_7_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-7-active-background: var(--sapIndicationColor_7_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-border: var(--sapIndicationColor_7_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-color: var(--sapIndicationColor_8);--ui5-v2-4-0-tag-set2-color-scheme-8-background: var(--sapIndicationColor_8b);--ui5-v2-4-0-tag-set2-color-scheme-8-border: var(--sapIndicationColor_8b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-hover-background: var(--sapIndicationColor_8b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-color: var(--sapIndicationColor_8_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-8-active-background: var(--sapIndicationColor_8_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-border: var(--sapIndicationColor_8_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-9-color: var(--sapIndicationColor_9);--ui5-v2-4-0-tag-set2-color-scheme-9-background: var(--sapIndicationColor_9b);--ui5-v2-4-0-tag-set2-color-scheme-9-border: var(--sapIndicationColor_9b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-color: var(--sapIndicationColor_10);--ui5-v2-4-0-tag-set2-color-scheme-10-background: var(--sapIndicationColor_10b);--ui5-v2-4-0-tag-set2-color-scheme-10-border: var(--sapIndicationColor_10b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-hover-background: var(--sapIndicationColor_10b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-color: var(--sapIndicationColor_10_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-10-active-background: var(--sapIndicationColor_10_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-border: var(--sapIndicationColor_10_Active_BorderColor);--_ui5-v2-4-0-tag-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-min-width_size_l: 1.75rem;--_ui5-v2-4-0-tag-font-size_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_width_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_height_size_l:1.25rem;--_ui5-v2-4-0-tag-icon_height_size_l: 1.25rem;--_ui5-v2-4-0-tag-text_padding_size_l: .125rem .25rem;--_ui5-v2-4-0-tag-text-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-text-padding: .1875rem .25rem;--_ui5-v2-4-0-tag-padding-inline-icon-only: .313rem;--_ui5-v2-4-0-tag-text-transform: none;--_ui5-v2-4-0-tag-icon-gap: .25rem;--_ui5-v2-4-0-tag-font-size: var(--sapFontSize);--_ui5-v2-4-0-tag-font: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0-tag-font-weight: normal;--_ui5-v2-4-0-tag-letter-spacing: normal;--_ui5-v2-4-0_bar_base_height: 2.75rem;--_ui5-v2-4-0_bar_subheader_height: 3rem;--_ui5-v2-4-0_bar-start-container-padding-start: 2rem;--_ui5-v2-4-0_bar-mid-container-padding-start-end: .5rem;--_ui5-v2-4-0_bar-end-container-padding-end: 2rem;--_ui5-v2-4-0_bar-start-container-padding-start_S: 1rem;--_ui5-v2-4-0_bar-start-container-padding-start_XL: 3rem;--_ui5-v2-4-0_bar-end-container-padding-end_S: 1rem;--_ui5-v2-4-0_bar-end-container-padding-end_XL: 3rem;--_ui5-v2-4-0_bar_subheader_margin-top: -.0625rem;--_ui5-v2-4-0_breadcrumbs_margin: 0 0 .5rem 0;--_ui5-v2-4-0_busy_indicator_block_layer: color-mix(in oklch, transparent, var(--sapBlockLayer_Background) 20%);--_ui5-v2-4-0_busy_indicator_color: var(--sapContent_BusyColor);--_ui5-v2-4-0_busy_indicator_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0-calendar-legend-root-padding: .75rem;--_ui5-v2-4-0-calendar-legend-root-width: 18.5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: 0;--_ui5-v2-4-0-calendar-legend-item-root-width: 7.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border: var(--sapContent_FocusWidth) solid var(--sapContent_FocusColor);--_ui5-v2-4-0_card_box_shadow: var(--sapContent_Shadow0);--_ui5-v2-4-0_card_header_border_color: var(--sapTile_SeparatorColor);--_ui5-v2-4-0_card_header_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_card_header_focus_bottom_radius: 0px;--_ui5-v2-4-0_card_header_title_font_weight: normal;--_ui5-v2-4-0_card_header_subtitle_margin_top: .25rem;--_ui5-v2-4-0_card_hover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_card_header_focus_offset: 0px;--_ui5-v2-4-0_card_header_focus_radius: var(--_ui5-v2-4-0_card_border-radius);--_ui5-v2-4-0_card_header_title_font_family: var(--sapFontHeaderFamily);--_ui5-v2-4-0_card_header_title_font_size: var(--sapFontHeader6Size);--_ui5-v2-4-0_card_header_hover_bg: var(--sapTile_Hover_Background);--_ui5-v2-4-0_card_header_active_bg: var(--sapTile_Active_Background);--_ui5-v2-4-0_card_header_border: none;--_ui5-v2-4-0_card_border-radius: var(--sapTile_BorderCornerRadius);--_ui5-v2-4-0_card_header_padding: 1rem 1rem .75rem 1rem;--_ui5-v2-4-0_card_border: none;--ui5-v2-4-0_carousel_background_color_solid: var(--sapGroup_ContentBackground);--ui5-v2-4-0_carousel_background_color_translucent: var(--sapBackgroundColor);--ui5-v2-4-0_carousel_button_size: 2.5rem;--ui5-v2-4-0_carousel_inactive_dot_size: .25rem;--ui5-v2-4-0_carousel_inactive_dot_margin: 0 .375rem;--ui5-v2-4-0_carousel_inactive_dot_border: 1px solid var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_inactive_dot_background: var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_active_dot_border: 1px solid var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_active_dot_background: var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_navigation_button_active_box_shadow: none;--_ui5-v2-4-0_checkbox_box_shadow: none;--_ui5-v2-4-0_checkbox_transition: unset;--_ui5-v2-4-0_checkbox_focus_border: none;--_ui5-v2-4-0_checkbox_border_radius: 0;--_ui5-v2-4-0_checkbox_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_checkbox_outer_hover_background: transparent;--_ui5-v2-4-0_checkbox_inner_width_height: 1.375rem;--_ui5-v2-4-0_checkbox_inner_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_information_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_warning_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_error_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_success_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_default_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_background: var(--sapField_Background);--_ui5-v2-4-0_checkbox_wrapped_focus_padding: .375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_checkbox_compact_wrapper_padding: .5rem;--_ui5-v2-4-0_checkbox_compact_width_height: 2rem;--_ui5-v2-4-0_checkbox_compact_inner_size: 1rem;--_ui5-v2-4-0_checkbox_compact_focus_position: .375rem;--_ui5-v2-4-0_checkbox_label_offset: var(--_ui5-v2-4-0_checkbox_wrapper_padding);--_ui5-v2-4-0_checkbox_disabled_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_checkbox_default_focus_border: none;--_ui5-v2-4-0_checkbox_focus_outline_display: block;--_ui5-v2-4-0_checkbox_wrapper_padding: .6875rem;--_ui5-v2-4-0_checkbox_width_height: 2.75rem;--_ui5-v2-4-0_checkbox_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_checkbox_inner_border: solid var(--sapField_BorderWidth) var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_checkbox_checkmark_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_checkbox_hover_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_hover_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_selected_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_active_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_active_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_readonly_border: var(--sapElement_BorderWidth) var(--sapField_ReadOnly_BorderColor) dashed;--_ui5-v2-4-0_checkbox_inner_error_border: var(--sapField_InvalidBorderWidth) solid var(--sapField_InvalidColor);--_ui5-v2-4-0_checkbox_inner_error_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_warning_border: var(--sapField_WarningBorderWidth) solid var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_checkmark_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_success_border: var(--sapField_SuccessBorderWidth) solid var(--sapField_SuccessColor);--_ui5-v2-4-0_checkbox_inner_success_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_information_color: var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_border: var(--sapField_InformationBorderWidth) solid var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_checkbox_focus_position: .3125rem;--_ui5-v2-4-0_checkbox_focus_border_radius: .5rem;--_ui5-v2-4-0_checkbox_right_focus_distance: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_color-palette-item-after-focus-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-outer-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-inner-border-radius: .1875rem;--_ui5-v2-4-0_color-palette-item-after-not-focus-color: .0625rem solid var(--sapGroup_ContentBackground);--_ui5-v2-4-0_color-palette-item-container-sides-padding: .3125rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .6875rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1.5rem;--_ui5-v2-4-0_color-palette-item-container-padding: var(--_ui5-v2-4-0_color-palette-item-container-sides-padding) var(--_ui5-v2-4-0_color-palette-item-container-rows-padding);--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 9.5rem;--_ui5-v2-4-0_color-palette-button-height: 3rem;--_ui5-v2-4-0_color-palette-item-before-focus-color: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.3125rem;--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-color: .0625rem solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_color-palette-item-selected-focused-border-after: none;--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-before-focus-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-after-focus-border-radius: .3125rem;--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius: .375rem;--_ui5-v2-4-0_color-palette-item-selected-focused-border-before: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border: none;--_ui5-v2-4-0_color-palette-item-selected-focused-border: none;--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset: -.375rem -.375rem;--_ui5-v2-4-0-color-palette-item-mobile-focus-inset: 0px;--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border: none;--_ui5-v2-4-0_color_picker_circle_outer_border: .0625rem solid var(--sapContent_ContrastShadowColor);--_ui5-v2-4-0_color_picker_circle_inner_border: .0625rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_circle_inner_circle_size: .5625rem;--_ui5-v2-4-0_color_picker_slider_handle_box_shadow: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_border: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_hover: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_margin_top: -.1875rem;--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top: var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top);--_ui5-v2-4-0_color_picker_slider_container_margin_top: -11px;--_ui5-v2-4-0_color_picker_slider_handle_inline_focus: 1px solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_datepicker_icon_border: none;--_ui5-v2-4-0-datepicker-hover-background: var(--sapField_Hover_Background);--_ui5-v2-4-0-datepicker_border_radius: .25rem;--_ui5-v2-4-0-datepicker_icon_border_radius: .125rem;--_ui5-v2-4-0_daypicker_item_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_margin: 2px;--_ui5-v2-4-0_daypicker_item_border: none;--_ui5-v2-4-0_daypicker_item_selected_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_daynames_container_height: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_daypicker_item_othermonth_background_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_othermonth_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_othermonth_hover_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_now_inner_border_radius: 0;--_ui5-v2-4-0_daypicker_item_outline_width: 1px;--_ui5-v2-4-0_daypicker_item_outline_offset: 1px;--_ui5-v2-4-0_daypicker_item_now_focus_after_width: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_focus_after_height: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_selected_background: transparent;--_ui5-v2-4-0_daypicker_item_outline_focus_after: none;--_ui5-v2-4-0_daypicker_item_border_focus_after: var(--_ui5-v2-4-0_daypicker_item_outline_width) dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_width_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_height_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_outline: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset_focus_after: var(--_ui5-v2-4-0_daypicker_item_now_outline_offset);--_ui5-v2-4-0_daypicker_item_selected_between_hover_background: var(--sapList_Hover_SelectionBackground);--_ui5-v2-4-0_daypicker_item_now_not_selected_inset: 0;--_ui5-v2-4-0_daypicker_item_now_border_color: var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_border_radios: .25rem;--_ui5-v2-4-0_daypicker_special_day_top: 2.5rem;--_ui5-v2-4-0_daypicker_special_day_before_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_after_border_width: .125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_dot: .375rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.4375rem;--_ui5-v2-4-0_daypicker_item_border_radius: .4375rem;--_ui5-v2-4-0_daypicker_item_focus_border: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_border: .0625rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_not_selected_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_width: .125rem;--_ui5-v2-4-0_daypicker_item_no_selected_inset: .375rem;--_ui5-v2-4-0_daypicker_item_now_border_focus_after: .125rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_now_border_radius_focus_after: .3125rem;--_ui5-v2-4-0_day_picker_item_selected_now_border_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_day_picker_item_selected_now_border_radius_focus: .1875rem;--ui5-v2-4-0-dp-item_withsecondtype_border: .375rem;--_ui5-v2-4-0_daypicker_item_now_border: .125rem solid var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_daypicker_dayname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_weekname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_selected_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_selected_daytext_hover_background: transparent;--_ui5-v2-4-0_daypicker_item_border_radius_item: .5rem;--_ui5-v2-4-0_daypicker_item_border_radius_focus_after: .1875rem;--_ui5-v2-4-0_daypicker_item_selected_between_border: .5rem;--_ui5-v2-4-0_daypicker_item_selected_between_background: var(--sapList_SelectionBackgroundColor);--_ui5-v2-4-0_daypicker_item_selected_between_text_background: transparent;--_ui5-v2-4-0_daypicker_item_selected_between_text_font: var(--sapFontFamily);--_ui5-v2-4-0_daypicker_item_selected_text_font: var(--sapFontBoldFamily);--_ui5-v2-4-0_daypicker_item_now_box_shadow: inset 0 0 0 .35rem var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_selected_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_item_now_selected_outline_offset: -.25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_inset: .25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_border: .0625rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_now_selected_between_border_radius: .1875rem;--_ui5-v2-4-0_daypicker_item_select_between_border: 1px solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_weeekend_filter: brightness(105%);--_ui5-v2-4-0_daypicker_item_selected_hover: var(--sapList_Hover_Background);--_ui5-v2-4-0_daypicker_item_now_inset: .3125rem;--_ui5-v2-4-0-dp-item_withsecondtype_border: .25rem;--_ui5-v2-4-0_daypicker_item_selected__secondary_type_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_two_calendar_item_now_day_text_content: "";--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_width: .125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_radius: .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_focus_border_radius: .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_inset: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_now_border_radius_focus: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_focus_inset: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_select_focus_border_radius: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_inset: .125rem;--_ui5-v2-4-0_daypicker_selected_item_special_day_width: calc(100% - .125rem) ;--_ui5-v2-4-0_daypicker_special_day_border_bottom_radius: .5rem;--_ui5-v2-4-0-daypicker_item_selected_now_border_radius: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_width: calc(100% - .1875rem) ;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 2.4375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_border_radius: .25rem;--_ui5-v2-4-0_daypicker_item_now_focus_margin: 0;--_ui5-v2-4-0_daypicker_special_day_border_top: none;--_ui5-v2-4-0_daypicker_special_day_selected_border_radius_bottom: .25rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 2.125rem;--_ui5-v2-4-0_daypicker_specialday_focused_width: calc(100% - .75rem) ;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 2.3125rem;--_ui5-v2-4-0_daypicker_item_now_specialday_width: calc(100% - .5rem) ;--_ui5-v2-4-0_dialog_header_error_state_icon_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_dialog_header_information_state_icon_color: var(--sapInformativeElementColor);--_ui5-v2-4-0_dialog_header_success_state_icon_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_dialog_header_warning_state_icon_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_dialog_header_state_line_height: .0625rem;--_ui5-v2-4-0_dialog_header_focus_bottom_offset: 2px;--_ui5-v2-4-0_dialog_header_focus_top_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_left_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_right_offset: 1px;--_ui5-v2-4-0_dialog_header_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_file_uploader_value_state_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_file_uploader_hover_border: none;--_ui5-v2-4-0_table_cell_valign: center;--_ui5-v2-4-0_table_cell_min_width: 2.75rem;--_ui5-v2-4-0_table_navigated_cell_width: .1875rem;--_ui5-v2-4-0_table_shadow_border_left: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_top: inset 0 var(--sapContent_FocusWidth) var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_bottom: inset 0 -1px var(--sapContent_FocusColor);--ui5-v2-4-0-form-item-layout: 1fr 2fr;--ui5-v2-4-0-form-item-layout-span1: 1fr 11fr;--ui5-v2-4-0-form-item-layout-span2: 2fr 10fr;--ui5-v2-4-0-form-item-layout-span3: 3fr 9fr;--ui5-v2-4-0-form-item-layout-span4: 4fr 8fr;--ui5-v2-4-0-form-item-layout-span5: 5fr 7fr;--ui5-v2-4-0-form-item-layout-span6: 6fr 6fr;--ui5-v2-4-0-form-item-layout-span7: 7fr 5fr;--ui5-v2-4-0-form-item-layout-span8: 8fr 4fr;--ui5-v2-4-0-form-item-layout-span9: 9fr 3fr;--ui5-v2-4-0-form-item-layout-span10: 10fr 2fr;--ui5-v2-4-0-form-item-layout-span11: 11fr 1fr;--ui5-v2-4-0-form-item-layout-span12: 1fr;--ui5-v2-4-0-form-item-label-justify: end;--ui5-v2-4-0-form-item-label-justify-span12: start;--ui5-v2-4-0-form-item-label-padding: .125rem 0;--ui5-v2-4-0-form-item-label-padding-end: .85rem;--ui5-v2-4-0-form-item-label-padding-span12: .625rem .25rem 0 .25rem;--ui5-v2-4-0-group-header-listitem-background-color: var(--sapList_GroupHeaderBackground);--ui5-v2-4-0-icon-focus-border-radius: .25rem;--_ui5-v2-4-0_input_width: 13.125rem;--_ui5-v2-4-0_input_min_width: 2.75rem;--_ui5-v2-4-0_input_height: var(--sapElement_Height);--_ui5-v2-4-0_input_compact_height: 1.625rem;--_ui5-v2-4-0_input_value_state_error_hover_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_background_color: var(--sapField_Background);--_ui5-v2-4-0_input_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_input_placeholder_style: italic;--_ui5-v2-4-0_input_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_bottom_border_height: 0;--_ui5-v2-4-0_input_bottom_border_color: transparent;--_ui5-v2-4-0_input_focused_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_input_state_border_width: .125rem;--_ui5-v2-4-0_input_information_border_width: .125rem;--_ui5-v2-4-0_input_error_font_weight: normal;--_ui5-v2-4-0_input_warning_font_weight: normal;--_ui5-v2-4-0_input_focus_border_width: 1px;--_ui5-v2-4-0_input_error_warning_font_style: inherit;--_ui5-v2-4-0_input_error_warning_text_indent: 0;--_ui5-v2-4-0_input_disabled_color: var(--sapContent_DisabledTextColor);--_ui5-v2-4-0_input_disabled_font_weight: normal;--_ui5-v2-4-0_input_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0-input_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_input_readonly_border_color: var(--sapField_ReadOnly_BorderColor);--_ui5-v2-4-0_input_readonly_background: var(--sapField_ReadOnly_Background);--_ui5-v2-4-0_input_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_input_icon_min_width: 2.25rem;--_ui5-v2-4-0_input_compact_min_width: 2rem;--_ui5-v2-4-0_input_transition: none;--_ui5-v2-4-0-input-value-state-icon-display: none;--_ui5-v2-4-0_input_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focused_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_value_state_success_border_width: 1px;--_ui5-v2-4-0_input_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0_input_focused_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0-input-value-state-information-border-width: 1px;--_ui5-v2-4-0-input-background-image: none;--ui5-v2-4-0_input_focus_pseudo_element_content: "";--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0-input_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_icon_width: 2.25rem;--_ui5-v2-4-0-input-icons-count: 0;--_ui5-v2-4-0_input_margin_top_bottom: .1875rem;--_ui5-v2-4-0_input_tokenizer_min_width: 3.25rem;--_ui5-v2-4-0-input-border: none;--_ui5-v2-4-0_input_hover_border: none;--_ui5-v2-4-0_input_focus_border_radius: .25rem;--_ui5-v2-4-0_input_readonly_focus_border_radius: .125rem;--_ui5-v2-4-0_input_error_warning_border_style: none;--_ui5-v2-4-0_input_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focus_offset: 0;--_ui5-v2-4-0_input_readonly_focus_offset: .125rem;--_ui5-v2-4-0_input_information_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_custom_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_input_icon_wrapper_height: calc(100% - 1px) ;--_ui5-v2-4-0_input_icon_wrapper_state_height: calc(100% - 2px) ;--_ui5-v2-4-0_input_icon_wrapper_success_state_height: calc(100% - var(--_ui5-v2-4-0_input_value_state_success_border_width));--_ui5-v2-4-0_input_icon_color: var(--sapContent_IconColor);--_ui5-v2-4-0_input_icon_pressed_bg: var(--sapButton_Selected_Background);--_ui5-v2-4-0_input_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_icon_hover_bg: var(--sapField_Focus_Background);--_ui5-v2-4-0_input_icon_pressed_color: var(--sapButton_Active_TextColor);--_ui5-v2-4-0_input_icon_border_radius: .25rem;--_ui5-v2-4-0_input_icon_box_shadow: var(--sapField_Hover_Shadow);--_ui5-v2-4-0_input_icon_border: none;--_ui5-v2-4-0_input_error_icon_box_shadow: var(--sapContent_Negative_Shadow);--_ui5-v2-4-0_input_warning_icon_box_shadow: var(--sapContent_Critical_Shadow);--_ui5-v2-4-0_input_information_icon_box_shadow: var(--sapContent_Informative_Shadow);--_ui5-v2-4-0_input_success_icon_box_shadow: var(--sapContent_Positive_Shadow);--_ui5-v2-4-0_input_icon_error_pressed_color: var(--sapButton_Reject_Selected_TextColor);--_ui5-v2-4-0_input_icon_warning_pressed_color: var(--sapButton_Attention_Selected_TextColor);--_ui5-v2-4-0_input_icon_information_pressed_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_input_icon_success_pressed_color: var(--sapButton_Accept_Selected_TextColor);--_ui5-v2-4-0_link_focus_text_decoration: underline;--_ui5-v2-4-0_link_text_decoration: var(--sapLink_TextDecoration);--_ui5-v2-4-0_link_hover_text_decoration: var(--sapLink_Hover_TextDecoration);--_ui5-v2-4-0_link_focused_hover_text_decoration: none;--_ui5-v2-4-0_link_focused_hover_text_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_active_text_decoration: var(--sapLink_Active_TextDecoration);--_ui5-v2-4-0_link_outline: none;--_ui5-v2-4-0_link_focus_border-radius: .125rem;--_ui5-v2-4-0_link_focus_background_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_link_focus_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_subtle_text_decoration: underline;--_ui5-v2-4-0_link_subtle_text_decoration_hover: none;--ui5-v2-4-0_list_footer_text_color: var(--sapList_FooterTextColor);--ui5-v2-4-0-listitem-background-color: var(--sapList_Background);--ui5-v2-4-0-listitem-border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--ui5-v2-4-0-listitem-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--ui5-v2-4-0-listitem-focused-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_listitembase_focus_width: 1px;--_ui5-v2-4-0-listitembase_disabled_opacity: .5;--_ui5-v2-4-0_product_switch_item_border: none;--ui5-v2-4-0-listitem-active-border-color: var(--sapContent_FocusColor);--_ui5-v2-4-0_menu_item_padding: 0 1rem 0 .75rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: 1rem;--_ui5-v2-4-0_menu_item_additional_text_start_margin: 1rem;--_ui5-v2-4-0_menu_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_monthpicker_item_margin: .0625rem;--_ui5-v2-4-0_monthpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_monthpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_border_radius: .5rem;--_ui5-v2-4-0_message_strip_icon_width: 2.5rem;--_ui5-v2-4-0_message_strip_button_border_width: 0;--_ui5-v2-4-0_message_strip_button_border_style: none;--_ui5-v2-4-0_message_strip_button_border_color: transparent;--_ui5-v2-4-0_message_strip_button_border_radius: 0;--_ui5-v2-4-0_message_strip_padding: .4375rem 2.5rem .4375rem 2.5rem;--_ui5-v2-4-0_message_strip_padding_block_no_icon: .4375rem .4375rem;--_ui5-v2-4-0_message_strip_padding_inline_no_icon: 1rem 2.5rem;--_ui5-v2-4-0_message_strip_button_height: 1.625rem;--_ui5-v2-4-0_message_strip_border_width: 1px;--_ui5-v2-4-0_message_strip_close_button_border: none;--_ui5-v2-4-0_message_strip_icon_top: .4375rem;--_ui5-v2-4-0_message_strip_focus_width: 1px;--_ui5-v2-4-0_message_strip_focus_offset: -2px;--_ui5-v2-4-0_message_strip_close_button_top: .125rem;--_ui5-v2-4-0_message_strip_close_button_color_set_1_background: #eaecee4d;--_ui5-v2-4-0_message_strip_close_button_color_set_2_background: #eaecee80;--_ui5-v2-4-0_message_strip_close_button_color_set_1_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_close_button_color_set_1_hover_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_scheme_1_set_2_background: var(--sapIndicationColor_1b);--_ui5-v2-4-0_message_strip_scheme_1_set_2_border_color: var(--sapIndicationColor_1b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_2_set_2_background: var(--sapIndicationColor_2b);--_ui5-v2-4-0_message_strip_scheme_2_set_2_border_color: var(--sapIndicationColor_2b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_3_set_2_background: var(--sapIndicationColor_3b);--_ui5-v2-4-0_message_strip_scheme_3_set_2_border_color: var(--sapIndicationColor_3b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_4_set_2_background: var(--sapIndicationColor_4b);--_ui5-v2-4-0_message_strip_scheme_4_set_2_border_color: var(--sapIndicationColor_4b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_5_set_2_background: var(--sapIndicationColor_5b);--_ui5-v2-4-0_message_strip_scheme_5_set_2_border_color: var(--sapIndicationColor_5b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_6_set_2_background: var(--sapIndicationColor_6b);--_ui5-v2-4-0_message_strip_scheme_6_set_2_border_color: var(--sapIndicationColor_6b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_7_set_2_background: var(--sapIndicationColor_7b);--_ui5-v2-4-0_message_strip_scheme_7_set_2_border_color: var(--sapIndicationColor_7b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_8_set_2_background: var(--sapIndicationColor_8b);--_ui5-v2-4-0_message_strip_scheme_8_set_2_border_color: var(--sapIndicationColor_8b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_9_set_2_background: var(--sapIndicationColor_9b);--_ui5-v2-4-0_message_strip_scheme_9_set_2_border_color: var(--sapIndicationColor_9b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_10_set_2_background: var(--sapIndicationColor_10b);--_ui5-v2-4-0_message_strip_scheme_10_set_2_border_color: var(--sapIndicationColor_10b_BorderColor);--_ui5-v2-4-0_message_strip_close_button_right: .1875rem;--_ui5-v2-4-0_panel_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_panel_header_height: 2.75rem;--_ui5-v2-4-0_panel_button_root_width: 2.75rem;--_ui5-v2-4-0_panel_button_root_height: 2.75rem;--_ui5-v2-4-0_panel_header_padding_right: .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .25rem;--_ui5-v2-4-0_panel_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_panel_border_bottom: none;--_ui5-v2-4-0_panel_default_header_border: .0625rem solid var(--sapGroup_TitleBorderColor);--_ui5-v2-4-0_panel_outline_offset: -.125rem;--_ui5-v2-4-0_panel_border_radius_expanded: var(--sapElement_BorderCornerRadius) var(--sapElement_BorderCornerRadius) 0 0;--_ui5-v2-4-0_panel_icon_color: var(--sapButton_Lite_TextColor);--_ui5-v2-4-0_panel_focus_offset: 0px;--_ui5-v2-4-0_panel_focus_bottom_offset: -1px;--_ui5-v2-4-0_panel_content_padding: .625rem 1rem;--_ui5-v2-4-0_panel_header_background_color: var(--sapGroup_TitleBackground);--_ui5-v2-4-0_popover_background: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_popover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_popover_no_arrow_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_popup_content_padding_s: 1rem;--_ui5-v2-4-0_popup_content_padding_m_l: 2rem;--_ui5-v2-4-0_popup_content_padding_xl: 3rem;--_ui5-v2-4-0_popup_header_footer_padding_s: 1rem;--_ui5-v2-4-0_popup_header_footer_padding_m_l: 2rem;--_ui5-v2-4-0_popup_header_footer_padding_xl: 3rem;--_ui5-v2-4-0_popup_viewport_margin: 10px;--_ui5-v2-4-0_popup_header_font_weight: 400;--_ui5-v2-4-0_popup_header_prop_header_text_alignment: flex-start;--_ui5-v2-4-0_popup_header_background: var(--sapPageHeader_Background);--_ui5-v2-4-0_popup_header_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_popup_header_border: none;--_ui5-v2-4-0_popup_border_radius: .5rem;--_ui5-v2-4-0_popup_block_layer_background: var(--sapBlockLayer_Background);--_ui5-v2-4-0_popup_block_layer_opacity: .2;--_ui5-v2-4-0_progress_indicator_bar_border_max: none;--_ui5-v2-4-0_progress_indicator_icon_visibility: inline-block;--_ui5-v2-4-0_progress_indicator_side_points_visibility: block;--_ui5-v2-4-0_progress_indicator_padding: 1.25rem 0 .75rem 0;--_ui5-v2-4-0_progress_indicator_padding_novalue: .3125rem;--_ui5-v2-4-0_progress_indicator_padding_end: 1.25rem;--_ui5-v2-4-0_progress_indicator_host_height: unset;--_ui5-v2-4-0_progress_indicator_host_min_height: unset;--_ui5-v2-4-0_progress_indicator_host_box_sizing: border-box;--_ui5-v2-4-0_progress_indicator_root_position: relative;--_ui5-v2-4-0_progress_indicator_root_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_root_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_min_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_overflow: visible;--_ui5-v2-4-0_progress_indicator_bar_height: .625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_position: absolute;--_ui5-v2-4-0_progress_indicator_remaining_bar_width: 100%;--_ui5-v2-4-0_progress_indicator_remaining_bar_overflow: visible;--_ui5-v2-4-0_progress_indicator_icon_position: absolute;--_ui5-v2-4-0_progress_indicator_icon_right_position: -1.25rem;--_ui5-v2-4-0_progress_indicator_value_margin: 0 0 .1875rem 0;--_ui5-v2-4-0_progress_indicator_value_position: absolute;--_ui5-v2-4-0_progress_indicator_value_top_position: -1.3125rem;--_ui5-v2-4-0_progress_indicator_value_left_position: 0;--_ui5-v2-4-0_progress_indicator_background_none: var(--sapProgress_Background);--_ui5-v2-4-0_progress_indicator_background_error: var(--sapProgress_NegativeBackground);--_ui5-v2-4-0_progress_indicator_background_warning: var(--sapProgress_CriticalBackground);--_ui5-v2-4-0_progress_indicator_background_success: var(--sapProgress_PositiveBackground);--_ui5-v2-4-0_progress_indicator_background_information: var(--sapProgress_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_none: var(--sapProgress_Value_Background);--_ui5-v2-4-0_progress_indicator_value_state_error: var(--sapProgress_Value_NegativeBackground);--_ui5-v2-4-0_progress_indicator_value_state_warning: var(--sapProgress_Value_CriticalBackground);--_ui5-v2-4-0_progress_indicator_value_state_success: var(--sapProgress_Value_PositiveBackground);--_ui5-v2-4-0_progress_indicator_value_state_information: var(--sapProgress_Value_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_error_icon_color: var(--sapProgress_Value_NegativeTextColor);--_ui5-v2-4-0_progress_indicator_value_state_warning_icon_color: var(--sapProgress_Value_CriticalTextColor);--_ui5-v2-4-0_progress_indicator_value_state_success_icon_color: var(--sapProgress_Value_PositiveTextColor);--_ui5-v2-4-0_progress_indicator_value_state_information_icon_color: var(--sapProgress_Value_InformationTextColor);--_ui5-v2-4-0_progress_indicator_border: none;--_ui5-v2-4-0_progress_indicator_border_color_error: var(--sapErrorBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_warning: var(--sapWarningBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_success: var(--sapSuccessBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_information: var(--sapInformationBorderColor);--_ui5-v2-4-0_progress_indicator_color: var(--sapField_TextColor);--_ui5-v2-4-0_progress_indicator_bar_color: var(--sapProgress_TextColor);--_ui5-v2-4-0_progress_indicator_icon_size: var(--sapFontLargeSize);--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_rating_indicator_border_radius: .25rem;--_ui5-v2-4-0_rating_indicator_outline_offset: .125rem;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_spacing: .1875rem .1875rem;--_ui5-v2-4-0_segmented_btn_inner_border: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_border_odd_child: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_pressed_border_odd_child: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_segmented_btn_inner_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_segmented_btn_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_segmented_btn_border_color: var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_segmented_btn_hover_box_shadow: none;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_button_base_min_compact_width: 2rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Height);--_ui5-v2-4-0_button_compact_height: 1.625rem;--_ui5-v2-4-0_button_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_button_compact_padding: .4375rem;--_ui5-v2-4-0_button_emphasized_outline: 1px dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focus_offset: 1px;--_ui5-v2-4-0_button_focus_width: 1px;--_ui5-v2-4-0_button_emphasized_focused_border_before: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_emphasized_focused_active_border_color: transparent;--_ui5-v2-4-0_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focused_border_radius: .375rem;--_ui5-v2-4-0_button_focused_inner_border_radius: .375rem;--_ui5-v2-4-0_button_base_min_width: 2.25rem;--_ui5-v2-4-0_button_base_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_only_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_margin: .375rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_button_text_shadow: none;--_ui5-v2-4-0_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_button_pressed_focused_border_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_button_fontFamily: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_button_emphasized_focused_border_color: var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_radio_button_min_width: 2.75rem;--_ui5-v2-4-0_radio_button_hover_fill_error: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_warning: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_success: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_information: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_checked_fill: var(--sapSelectedColor);--_ui5-v2-4-0_radio_button_checked_error_fill: var(--sapField_InvalidColor);--_ui5-v2-4-0_radio_button_checked_success_fill: var(--sapField_SuccessColor);--_ui5-v2-4-0_radio_button_checked_information_fill: var(--sapField_InformationColor);--_ui5-v2-4-0_radio_button_warning_error_border_dash: 0;--_ui5-v2-4-0_radio_button_outer_ring_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_width: var(--sapField_BorderWidth);--_ui5-v2-4-0_radio_button_outer_ring_bg: var(--sapField_Background);--_ui5-v2-4-0_radio_button_outer_ring_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_active_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .6875rem;--_ui5-v2-4-0_radio_button_border: none;--_ui5-v2-4-0_radio_button_focus_outline: block;--_ui5-v2-4-0_radio_button_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_label_offset: 1px;--_ui5-v2-4-0_radio_button_items_align: unset;--_ui5-v2-4-0_radio_button_information_border_width: var(--sapField_InformationBorderWidth);--_ui5-v2-4-0_radio_button_border_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_radio_button_border_radius: .5rem;--_ui5-v2-4-0_radio_button_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_inner_ring_radius: 27.5%;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .6875rem;--_ui5-v2-4-0_radio_button_read_only_border_type: 4,2;--_ui5-v2-4-0_radio_button_inner_ring_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_radio_button_checked_warning_fill: var(--sapField_WarningColor);--_ui5-v2-4-0_radio_button_read_only_inner_ring_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_read_only_border_width: var(--sapElement_BorderWidth);--_ui5-v2-4-0_radio_button_hover_fill: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_radio_button_focus_dist: .375rem;--_ui5-v2-4-0_switch_height: 2.75rem;--_ui5-v2-4-0_switch_foucs_border_size: 1px;--_ui5-v2-4-0-switch-root-border-radius: 0;--_ui5-v2-4-0-switch-root-box-shadow: none;--_ui5-v2-4-0-switch-focus: "";--_ui5-v2-4-0_switch_track_border_radius: .75rem;--_ui5-v2-4-0-switch-track-border: 1px solid;--_ui5-v2-4-0_switch_track_transition: none;--_ui5-v2-4-0_switch_handle_border_radius: 1rem;--_ui5-v2-4-0-switch-handle-icon-display: none;--_ui5-v2-4-0-switch-slider-texts-display: inline;--_ui5-v2-4-0_switch_width: 3.5rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.875rem;--_ui5-v2-4-0_switch_focus_outline: none;--_ui5-v2-4-0_switch_root_after_outline: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_switch_root_after_boreder: none;--_ui5-v2-4-0_switch_root_after_boreder_radius: 1rem;--_ui5-v2-4-0_switch_root_outline_top: .5rem;--_ui5-v2-4-0_switch_root_outline_bottom: .5rem;--_ui5-v2-4-0_switch_root_outline_left: .375rem;--_ui5-v2-4-0_switch_root_outline_right: .375rem;--_ui5-v2-4-0_switch_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.625rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(-100%) translateX(1.625rem);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(-100%) translateX(1.875rem);--_ui5-v2-4-0_switch_track_width: 2.5rem;--_ui5-v2-4-0_switch_track_height: 1.5rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.875rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.5rem;--_ui5-v2-4-0_switch_track_active_background_color: var(--sapButton_Track_Selected_Background);--_ui5-v2-4-0_switch_track_inactive_background_color: var(--sapButton_Track_Background);--_ui5-v2-4-0_switch_track_hover_active_background_color: var(--sapButton_Track_Selected_Hover_Background);--_ui5-v2-4-0_switch_track_hover_inactive_background_color: var(--sapButton_Track_Hover_Background);--_ui5-v2-4-0_switch_track_active_border_color: var(--sapButton_Track_Selected_BorderColor);--_ui5-v2-4-0_switch_track_inactive_border_color: var(--sapButton_Track_BorderColor);--_ui5-v2-4-0_switch_track_hover_active_border_color: var(--sapButton_Track_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_track_hover_inactive_border_color: var(--sapButton_Track_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_accept_background_color: var(--sapButton_Track_Positive_Background);--_ui5-v2-4-0_switch_track_semantic_reject_background_color: var(--sapButton_Track_Negative_Background);--_ui5-v2-4-0_switch_track_semantic_hover_accept_background_color: var(--sapButton_Track_Positive_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_hover_reject_background_color: var(--sapButton_Track_Negative_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_accept_border_color: var(--sapButton_Track_Positive_BorderColor);--_ui5-v2-4-0_switch_track_semantic_reject_border_color: var(--sapButton_Track_Negative_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_accept_border_color: var(--sapButton_Track_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_reject_border_color: var(--sapButton_Track_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_track_icon_display: inline-block;--_ui5-v2-4-0_switch_handle_width: 1.5rem;--_ui5-v2-4-0_switch_handle_height: 1.25rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_border: var(--_ui5-v2-4-0_switch_handle_border_width) solid var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_border_width: .125rem;--_ui5-v2-4-0_switch_handle_active_background_color: var(--sapButton_Handle_Selected_Background);--_ui5-v2-4-0_switch_handle_inactive_background_color: var(--sapButton_Handle_Background);--_ui5-v2-4-0_switch_handle_hover_active_background_color: var(--sapButton_Handle_Selected_Hover_Background);--_ui5-v2-4-0_switch_handle_hover_inactive_background_color: var(--sapButton_Handle_Hover_Background);--_ui5-v2-4-0_switch_handle_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_hover_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_hover_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_accept_background_color: var(--sapButton_Handle_Positive_Background);--_ui5-v2-4-0_switch_handle_semantic_reject_background_color: var(--sapButton_Handle_Negative_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_background_color: var(--sapButton_Handle_Positive_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_background_color: var(--sapButton_Handle_Negative_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_left: .0625rem;--_ui5-v2-4-0_switch_text_font_family: var(--sapContent_IconFontFamily);--_ui5-v2-4-0_switch_text_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_switch_text_width: 1.25rem;--_ui5-v2-4-0_switch_text_with_label_font_family: "72-Condensed-Bold" , "72" , "72full" , Arial, Helvetica, sans-serif;--_ui5-v2-4-0_switch_text_with_label_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_switch_text_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_text_inactive_left: .1875rem;--_ui5-v2-4-0_switch_text_inactive_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_inactive_right: auto;--_ui5-v2-4-0_switch_text_inactive_right_alternate: 0;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_switch_text_active_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_active_right: auto;--_ui5-v2-4-0_switch_text_active_color: var(--sapButton_Handle_Selected_TextColor);--_ui5-v2-4-0_switch_text_inactive_color: var(--sapButton_Handle_TextColor);--_ui5-v2-4-0_switch_text_semantic_accept_color: var(--sapButton_Handle_Positive_TextColor);--_ui5-v2-4-0_switch_text_semantic_reject_color: var(--sapButton_Handle_Negative_TextColor);--_ui5-v2-4-0_switch_text_overflow: hidden;--_ui5-v2-4-0_switch_text_z_index: 1;--_ui5-v2-4-0_switch_text_hidden: hidden;--_ui5-v2-4-0_switch_text_min_width: none;--_ui5-v2-4-0_switch_icon_width: 1rem;--_ui5-v2-4-0_switch_icon_height: 1rem;--_ui5-v2-4-0_select_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_select_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_select_state_error_warning_border_style: solid;--_ui5-v2-4-0_select_state_error_warning_border_width: .125rem;--_ui5-v2-4-0_select_focus_width: 1px;--_ui5-v2-4-0_select_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_select_hover_icon_left_border: none;--_ui5-v2-4-0_select_option_focus_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_split_button_host_transparent_hover_background: transparent;--_ui5-v2-4-0_split_button_transparent_disabled_background: transparent;--_ui5-v2-4-0_split_button_host_default_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_host_attention_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_button_host_emphasized_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_button_host_positive_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_button_host_negative_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_button_host_transparent_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_split_text_button_border_color: transparent;--_ui5-v2-4-0_split_text_button_background_color: transparent;--_ui5-v2-4-0_split_text_button_emphasized_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_split_text_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_arrow_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_arrow_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_arrow_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_split_button_focused_border_radius: .375rem;--_ui5-v2-4-0_split_button_hover_border_radius: var(--_ui5-v2-4-0_button_border_radius);--_ui5-v2-4-0_split_button_middle_separator_width: 0;--_ui5-v2-4-0_split_button_middle_separator_left: -.0625rem;--_ui5-v2-4-0_split_button_middle_separator_hover_display: none;--_ui5-v2-4-0_split_button_text_button_width: 2.375rem;--_ui5-v2-4-0_split_button_text_button_right_border_width: .0625rem;--_ui5-v2-4-0_split_button_transparent_hover_background: var(--sapButton_Lite_Hover_Background);--_ui5-v2-4-0_split_button_transparent_hover_color: var(--sapButton_TextColor);--_ui5-v2-4-0_split_button_host_transparent_hover_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_inner_focused_border_radius_outer: .375rem;--_ui5-v2-4-0_split_button_inner_focused_border_radius_inner: .375rem;--_ui5-v2-4-0_split_button_emphasized_separator_color: transparent;--_ui5-v2-4-0_split_button_positive_separator_color: transparent;--_ui5-v2-4-0_split_button_negative_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color_default: var(--sapButton_Attention_TextColor);--_ui5-v2-4-0_split_text_button_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_right: none;--_ui5-v2-4-0_split_text_button_positive_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_middle_separator_hover_display_emphasized: none;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_header_height_text_only: var(--_ui5-v2-4-0_tc_item_text_only_height);--_ui5-v2-4-0_tc_header_height_text_with_additional_text: var(--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height);--_ui5-v2-4-0_tc_header_box_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_tc_header_background: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_header_background_translucent: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_content_background: var(--sapBackgroundColor);--_ui5-v2-4-0_tc_content_background_translucent: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_headeritem_padding: 1rem;--_ui5-v2-4-0_tc_headerItem_additional_text_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_tc_headerItem_text_selected_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_text_selected_hover_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_additional_text_font_weight: normal;--_ui5-v2-4-0_tc_headerItem_neutral_color: var(--sapNeutralTextColor);--_ui5-v2-4-0_tc_headerItem_positive_color: var(--sapPositiveTextColor);--_ui5-v2-4-0_tc_headerItem_negative_color: var(--sapNegativeTextColor);--_ui5-v2-4-0_tc_headerItem_critical_color: var(--sapCriticalTextColor);--_ui5-v2-4-0_tc_headerItem_neutral_border_color: var(--sapNeutralElementColor);--_ui5-v2-4-0_tc_headerItem_positive_border_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_tc_headerItem_negative_border_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_tc_headerItem_critical_border_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_tc_headerItem_neutral_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_neutral_color);--_ui5-v2-4-0_tc_headerItem_positive_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_positive_color);--_ui5-v2-4-0_tc_headerItem_negative_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_negative_color);--_ui5-v2-4-0_tc_headerItem_critical_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_critical_color);--_ui5-v2-4-0_tc_headerItem_transition: none;--_ui5-v2-4-0_tc_headerItem_hover_border_visibility: hidden;--_ui5-v2-4-0_tc_headerItemContent_border_radius: .125rem .125rem 0 0;--_ui5-v2-4-0_tc_headerItemContent_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_neutral_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_positive_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_negative_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_critical_border_bg: transparent;--_ui5-v2-4-0_tc_headerItemContent_border_height: 0;--_ui5-v2-4-0_tc_headerItemContent_focus_offset: 1rem;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_left: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_right: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_top: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_bottom: 0px;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_left: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_right: .625rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_top: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_bottom: .75rem;--_ui5-v2-4-0_tc_headerItemContent_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_default_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_focus_border_radius: 0;--_ui5-v2-4-0_tc_headerItemSemanticIcon_display: none;--_ui5-v2-4-0_tc_headerItemSemanticIcon_size: .75rem;--_ui5-v2-4-0_tc_mixedMode_itemText_font_family: var(--sapFontFamily);--_ui5-v2-4-0_tc_mixedMode_itemText_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_tc_mixedMode_itemText_font_weight: normal;--_ui5-v2-4-0_tc_overflowItem_positive_color: var(--sapPositiveColor);--_ui5-v2-4-0_tc_overflowItem_negative_color: var(--sapNegativeColor);--_ui5-v2-4-0_tc_overflowItem_critical_color: var(--sapCriticalColor);--_ui5-v2-4-0_tc_overflowItem_focus_offset: .125rem;--_ui5-v2-4-0_tc_overflowItem_extraIndent: 0rem;--_ui5-v2-4-0_tc_headerItemIcon_positive_selected_background: var(--sapPositiveColor);--_ui5-v2-4-0_tc_headerItemIcon_negative_selected_background: var(--sapNegativeColor);--_ui5-v2-4-0_tc_headerItemIcon_critical_selected_background: var(--sapCriticalColor);--_ui5-v2-4-0_tc_headerItemIcon_neutral_selected_background: var(--sapNeutralColor);--_ui5-v2-4-0_tc_headerItemIcon_semantic_selected_color: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_header_border_bottom: .0625rem solid var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_headerItemContent_border_bottom: .1875rem solid var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_default_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_current_color: CurrentColor;--_ui5-v2-4-0_tc_content_border_bottom: .0625rem solid var(--sapObjectHeader_BorderColor);--_ui5-v2-4-0_tc_headerItem_expand_button_margin_inline_start: 0rem;--_ui5-v2-4-0_tc_headerItem_single_click_expand_button_margin_inline_start: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_border_radius: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_separator_display: inline-block;--_ui5-v2-4-0_tc_headerItem_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_tc_headerItem_focus_border_offset: -5px;--_ui5-v2-4-0_tc_headerItemIcon_focus_border_radius: 50%;--_ui5-v2-4-0_tc_headerItem_focus_border_radius: .375rem;--_ui5-v2-4-0_tc_headeritem_text_font_weight: bold;--_ui5-v2-4-0_tc_headerItem_focus_offset: 1px;--_ui5-v2-4-0_tc_headerItem_text_hover_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_border: .125rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_selected_background: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_background_color: var(--sapContent_Selected_Background);--_ui5-v2-4-0_tc_headerItemIcon_selected_color: var(--sapContent_ContrastIconColor);--_ui5-v2-4-0_tc_mixedMode_itemText_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflow_text_color: var(--sapTextColor);--_ui5-v2-4-0_text_max_lines: initial;--_ui5-v2-4-0_textarea_state_border_width: .125rem;--_ui5-v2-4-0_textarea_information_border_width: .125rem;--_ui5-v2-4-0_textarea_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0_textarea_error_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_textarea_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_disabled_opacity: .4;--_ui5-v2-4-0_textarea_focus_pseudo_element_content: "";--_ui5-v2-4-0_textarea_min_height: 2.25rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .5625rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .4375rem;--_ui5-v2-4-0_textarea_exceeded_text_height: 1rem;--_ui5-v2-4-0_textarea_hover_border: none;--_ui5-v2-4-0_textarea_focus_border_radius: .25rem;--_ui5-v2-4-0_textarea_error_warning_border_style: none;--_ui5-v2-4-0_textarea_line_height: 1.5;--_ui5-v2-4-0_textarea_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_textarea_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_textarea_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_textarea_focus_offset: 0;--_ui5-v2-4-0_textarea_readonly_focus_offset: 1px;--_ui5-v2-4-0_textarea_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_textarea_value_state_focus_offset: 1px;--_ui5-v2-4-0_textarea_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_success_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_warning_error_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_information_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .375rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .4375rem;--_ui5-v2-4-0_textarea_padding_top_information: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .4375rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .625rem;--_ui5-v2-4-0_textarea_readonly_border_style: dashed;--_ui5-v2-4-0_time_picker_border: .0625rem solid transparent;--_ui5-v2-4-0-time_picker_border_radius: .25rem;--_ui5-v2-4-0_toast_vertical_offset: 3rem;--_ui5-v2-4-0_toast_horizontal_offset: 2rem;--_ui5-v2-4-0_toast_background: var(--sapList_Background);--_ui5-v2-4-0_toast_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_toast_offset_width: -.1875rem;--_ui5-v2-4-0_toggle_button_pressed_focussed: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_pressed_focussed_hovered: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_selected_positive_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_negative_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_attention_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_emphasized_pressed_focussed_hovered: var(--sapContent_FocusColor);--_ui5-v2-4-0_toggle_button_emphasized_text_shadow: none;--_ui5-v2-4-0_yearpicker_item_margin: .0625rem;--_ui5-v2-4-0_yearpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_yearpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_width: 6.25rem;--_ui5-v2-4-0_calendar_header_middle_button_flex: 1 1 auto;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_display: block;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_top_offset: .125rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_left_offset: .125rem;--_ui5-v2-4-0_calendar_header_arrow_button_border: none;--_ui5-v2-4-0_calendar_header_arrow_button_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_button_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_calendar_header_arrow_button_box_shadow: 0 0 .125rem 0 rgb(85 107 130 / 72%);--_ui5-v2-4-0_calendar_header_middle_button_focus_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_background: transparent;--_ui5-v2-4-0_calendar_header_middle_button_focus_outline: .125rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_background: transparent;--_ui5-v2-4-0_token_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_token_right_margin: .3125rem;--_ui5-v2-4-0_token_padding: .25rem 0;--_ui5-v2-4-0_token_left_padding: .3125rem;--_ui5-v2-4-0_token_focused_selected_border: 1px solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_focus_offset: -.25rem;--_ui5-v2-4-0_token_focus_outline_width: .0625rem;--_ui5-v2-4-0_token_hover_border_color: var(--sapButton_TokenBorderColor);--_ui5-v2-4-0_token_selected_focus_outline: none;--_ui5-v2-4-0_token_focus_outline: none;--_ui5-v2-4-0_token_outline_offset: .125rem;--_ui5-v2-4-0_token_selected_hover_border_color: var(--sapButton_Selected_BorderColor);--ui5-v2-4-0_token_focus_pseudo_element_content: "";--_ui5-v2-4-0_token_border_radius: .375rem;--_ui5-v2-4-0_token_focus_outline_border_radius: .5rem;--_ui5-v2-4-0_token_text_color: var(--sapTextColor);--_ui5-v2-4-0_token_selected_text_font_family: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_token_selected_internal_border_bottom: .125rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_selected_internal_border_bottom_radius: .1875rem;--_ui5-v2-4-0_token_text_icon_top: .0625rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.375rem;--_ui5-v2-4-0_token_readonly_padding: .25rem .3125rem;--_ui5-v2-4-0_tokenizer-popover_offset: .3125rem;--_ui5-v2-4-0_tokenizer_n_more_text_color: var(--sapLinkColor);--_ui5-v2-4-0-multi_combobox_token_margin_top: 1px;--_ui5-v2-4-0_slider_progress_container_dot_background: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_progress_border: none;--_ui5-v2-4-0_slider_padding: 1.406rem 1.0625rem;--_ui5-v2-4-0_slider_inner_height: .25rem;--_ui5-v2-4-0_slider_outer_height: 1.6875rem;--_ui5-v2-4-0_slider_progress_border_radius: .25rem;--_ui5-v2-4-0_slider_tickmark_bg: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_handle_margin_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2));--_ui5-v2-4-0_slider_handle_outline_offset: .075rem;--_ui5-v2-4-0_slider_progress_outline: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_progress_outline_offset: -.8125rem;--_ui5-v2-4-0_slider_disabled_opacity: .4;--_ui5-v2-4-0_slider_tooltip_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_range_slider_handle_background_focus: transparent;--_ui5-v2-4-0_slider_progress_box_sizing: content-box;--_ui5-v2-4-0_range_slider_focus_outline_width: 100%;--_ui5-v2-4-0_slider_progress_outline_offset_left: 0;--_ui5-v2-4-0_range_slider_focus_outline_radius: 0;--_ui5-v2-4-0_slider_progress_container_top: 0;--_ui5-v2-4-0_slider_progress_height: 100%;--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_active_progress_left: 0;--_ui5-v2-4-0_slider_active_progress_top: 0;--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top: var(--_ui5-v2-4-0_slider_progress_container_top);--_ui5-v2-4-0_slider_no_tickmarks_progress_height: var(--_ui5-v2-4-0_slider_progress_height);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border: var(--_ui5-v2-4-0_slider_active_progress_border);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left: var(--_ui5-v2-4-0_slider_active_progress_left);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top: var(--_ui5-v2-4-0_slider_active_progress_top);--_ui5-v2-4-0_slider_handle_focus_visibility: none;--_ui5-v2-4-0_slider_handle_icon_size: 1rem;--_ui5-v2-4-0_slider_progress_container_background: var(--sapSlider_Background);--_ui5-v2-4-0_slider_progress_container_dot_display: block;--_ui5-v2-4-0_slider_inner_min_width: 4rem;--_ui5-v2-4-0_slider_progress_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_before_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_after_background: var(--sapContent_MeasureIndicatorColor);--_ui5-v2-4-0_slider_handle_background: var(--sapSlider_HandleBackground);--_ui5-v2-4-0_slider_handle_icon_display: inline-block;--_ui5-v2-4-0_slider_handle_border: .0625rem solid var(--sapSlider_HandleBorderColor);--_ui5-v2-4-0_slider_handle_border_radius: .5rem;--_ui5-v2-4-0_slider_handle_height: 1.5rem;--_ui5-v2-4-0_slider_handle_width: 2rem;--_ui5-v2-4-0_slider_handle_top: -.625rem;--_ui5-v2-4-0_slider_handle_font_family: "SAP-icons";--_ui5-v2-4-0_slider_handle_hover_border: .0625rem solid var(--sapSlider_Hover_HandleBorderColor);--_ui5-v2-4-0_slider_handle_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_handle_background_focus: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_slider_handle_outline: none;--_ui5-v2-4-0_slider_handle_hover_background: var(--sapSlider_Hover_HandleBackground);--_ui5-v2-4-0_slider_tooltip_background: var(--sapField_Focus_Background);--_ui5-v2-4-0_slider_tooltip_border: none;--_ui5-v2-4-0_slider_tooltip_border_radius: .5rem;--_ui5-v2-4-0_slider_tooltip_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_range_slider_legacy_progress_focus_display: none;--_ui5-v2-4-0_range_slider_progress_focus_display: block;--_ui5-v2-4-0_slider_tickmark_in_range_bg: var(--sapSlider_Selected_BorderColor);--_ui5-v2-4-0_slider_label_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_min_width: 2rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_tooltip_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_tooltip_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_slider_handle_focus_width: 1px;--_ui5-v2-4-0_slider_start_end_point_size: .5rem;--_ui5-v2-4-0_slider_start_end_point_left: -.75rem;--_ui5-v2-4-0_slider_start_end_point_top: -.125rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_slider_tooltip_border_box: border-box;--_ui5-v2-4-0_range_slider_handle_active_background: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_range_slider_active_handle_icon_display: none;--_ui5-v2-4-0_range_slider_progress_focus_top: -15px;--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_range_slider_progress_focus_padding: 0 1rem 0 1rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_root_hover_handle_icon_display: inline-block;--_ui5-v2-4-0_range_slider_root_hover_handle_bg: var(--_ui5-v2-4-0_slider_handle_hover_background);--_ui5-v2-4-0_range_slider_root_active_handle_icon_display: none;--_ui5-v2-4-0_slider_tickmark_height: .5rem;--_ui5-v2-4-0_slider_tickmark_top: -2px;--_ui5-v2-4-0_slider_handle_box_sizing: border-box;--_ui5-v2-4-0_range_slider_handle_background: var(--sapSlider_RangeHandleBackground);--_ui5-v2-4-0_slider_tooltip_bottom: 2rem;--_ui5-v2-4-0_value_state_message_border: none;--_ui5-v2-4-0_value_state_header_border: none;--_ui5-v2-4-0_input_value_state_icon_offset: .5rem;--_ui5-v2-4-0_value_state_header_box_shadow_error: inset 0 -.0625rem var(--sapField_InvalidColor);--_ui5-v2-4-0_value_state_header_box_shadow_information: inset 0 -.0625rem var(--sapField_InformationColor);--_ui5-v2-4-0_value_state_header_box_shadow_success: inset 0 -.0625rem var(--sapField_SuccessColor);--_ui5-v2-4-0_value_state_header_box_shadow_warning: inset 0 -.0625rem var(--sapField_WarningColor);--_ui5-v2-4-0_value_state_message_icon_offset_phone: 1rem;--_ui5-v2-4-0_value_state_header_border_bottom: none;--_ui5-v2-4-0_input_value_state_icon_display: inline-block;--_ui5-v2-4-0_value_state_message_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_header_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_message_popover_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_value_state_message_icon_width: 1rem;--_ui5-v2-4-0_value_state_message_icon_height: 1rem;--_ui5-v2-4-0_value_state_header_offset: -.25rem;--_ui5-v2-4-0_value_state_message_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_value_state_message_padding_phone: .5rem .5rem .5rem 2.375rem;--_ui5-v2-4-0_value_state_message_line_height: 1.125rem;--_ui5-v2-4-0-toolbar-padding-left: .5rem;--_ui5-v2-4-0-toolbar-padding-right: .5rem;--_ui5-v2-4-0-toolbar-item-margin-left: 0;--_ui5-v2-4-0-toolbar-item-margin-right: .25rem;--_ui5-v2-4-0_step_input_min_width: 7.25rem;--_ui5-v2-4-0_step_input_padding: 2.5rem;--_ui5-v2-4-0_step_input_input_error_background_color: inherit;--_ui5-v2-4-0-step_input_button_state_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_step_input_border_style: none;--_ui5-v2-4-0_step_input_border_style_hover: none;--_ui5-v2-4-0_step_input_button_background_color: transparent;--_ui5-v2-4-0_step_input_input_border: none;--_ui5-v2-4-0_step_input_input_margin_top: 0;--_ui5-v2-4-0_step_input_button_display: inline-flex;--_ui5-v2-4-0_step_input_button_left: 0;--_ui5-v2-4-0_step_input_button_right: 0;--_ui5-v2-4-0_step_input_input_border_focused_after: .125rem solid #0070f2;--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after: 0;--_ui5-v2-4-0_step_input_input_border_radius_focused_after: .25rem;--_ui5-v2-4-0_step_input_input_information_border_color_focused_after: var(--sapField_InformationColor);--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after: var(--sapField_WarningColor);--_ui5-v2-4-0_step_input_input_success_border_color_focused_after: var(--sapField_SuccessColor);--_ui5-v2-4-0_step_input_input_error_border_color_focused_after: var(--sapField_InvalidColor);--_ui5-v2-4-0_step_input_disabled_button_background: none;--_ui5-v2-4-0_step_input_border_color_hover: none;--_ui5-v2-4-0_step_input_border_hover: none;--_ui5-v2-4-0_input_input_background_color: transparent;--_ui5-v2-4-0_load_more_padding: 0;--_ui5-v2-4-0_load_more_border: 1px top solid transparent;--_ui5-v2-4-0_load_more_border_radius: none;--_ui5-v2-4-0_load_more_outline_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_load_more_border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--_ui5-v2-4-0_calendar_height: 24.5rem;--_ui5-v2-4-0_calendar_width: 20rem;--_ui5-v2-4-0_calendar_padding: 1rem;--_ui5-v2-4-0_calendar_left_right_padding: .5rem;--_ui5-v2-4-0_calendar_top_bottom_padding: 1rem;--_ui5-v2-4-0_calendar_header_height: 3rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2.5rem;--_ui5-v2-4-0_calendar_header_padding: .25rem 0;--_ui5-v2-4-0_checkbox_root_side_padding: .6875rem;--_ui5-v2-4-0_checkbox_icon_size: 1rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .75rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2.75rem;--_ui5-v2-4-0_day_picker_item_width: 2.25rem;--_ui5-v2-4-0_day_picker_item_height: 2.875rem;--_ui5-v2-4-0_day_picker_empty_height: 3rem;--_ui5-v2-4-0_day_picker_item_justify_content: space-between;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1.8125rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .4375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-offset: -.125rem;--_ui5-v2-4-0-calendar-legend-item-box-margin: .25rem;--_ui5-v2-4-0-calendar-legend-item-box-inner-margin: .5rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .3125rem .6875rem;--_ui5-v2-4-0_datetime_picker_width: 40.0625rem;--_ui5-v2-4-0_datetime_picker_height: 25rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 19.5rem;--_ui5-v2-4-0_datetime_timeview_padding: 1rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 24.5rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 0;--_ui5-v2-4-0_dialog_content_min_height: 2.75rem;--_ui5-v2-4-0_dialog_footer_height: 2.75rem;--_ui5-v2-4-0_input_inner_padding: 0 .625rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .25rem 0 .625rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .1875rem;--_ui5-v2-4-0_list_no_data_height: 3rem;--_ui5-v2-4-0_list_item_cb_margin_right: 0;--_ui5-v2-4-0_list_item_title_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_item_img_size: 3rem;--_ui5-v2-4-0_list_item_img_top_margin: .5rem;--_ui5-v2-4-0_list_item_img_bottom_margin: .5rem;--_ui5-v2-4-0_list_item_img_hn_margin: .75rem;--_ui5-v2-4-0_list_item_dropdown_base_height: 2.5rem;--_ui5-v2-4-0_list_item_base_height: var(--sapElement_LineHeight);--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1.125rem;--_ui5-v2-4-0_list_item_icon_padding-inline-end: .5rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_group_header_list_item_height: 2.75rem;--_ui5-v2-4-0_list_busy_row_height: 3rem;--_ui5-v2-4-0_month_picker_item_height: 3rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_form_item_min_height: 2.813rem;--_ui5-v2-4-0_form_item_padding: .65rem;--_ui5-v2-4-0-form-group-heading-height: 2.75rem;--_ui5-v2-4-0_popup_default_header_height: 2.75rem;--_ui5-v2-4-0_year_picker_item_height: 3rem;--_ui5-v2-4-0_tokenizer_padding: .25rem;--_ui5-v2-4-0_token_height: 1.625rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .25rem .5rem;--_ui5-v2-4-0_token_wrapper_right_padding: .3125rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_tl_bubble_padding: 1rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -1.625rem;--_ui5-v2-4-0_tl_padding: 1rem 1rem 1rem .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: 1.625rem;--_ui5-v2-4-0_switch_focus_width_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_switch_focus_height_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_tc_item_text: 3rem;--_ui5-v2-4-0_tc_item_height: 4.75rem;--_ui5-v2-4-0_tc_item_text_only_height: 2.75rem;--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height: 3.75rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_icon_circle_size: 2.75rem;--_ui5-v2-4-0_tc_item_icon_size: 1.25rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .375rem;--_ui5-v2-4-0_textarea_margin: .25rem 0;--_ui5-v2-4-0_radio_button_height: 2.75rem;--_ui5-v2-4-0_radio_button_label_side_padding: .875rem;--_ui5-v2-4-0_radio_button_inner_size: 2.75rem;--_ui5-v2-4-0_radio_button_svg_size: 1.375rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.75rem;--ui5-v2-4-0_side_navigation_item_height: 2.75rem;--_ui5-v2-4-0-tree-indent-step: 1.5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2.75rem;--_ui5-v2-4-0-tree-toggle-box-height: 2.25rem;--_ui5-v2-4-0-tree-toggle-icon-size: 1.0625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -1.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -1.625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1.875rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -1.9375rem;--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% + 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_before_height: 100%;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.9375rem;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% + .375rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: 100%;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 1.5rem) ;--_ui5-v2-4-0-toolbar-separator-height: 2rem;--_ui5-v2-4-0-toolbar-height: 2.75rem;--_ui5-v2-4-0_toolbar_overflow_padding: .25rem .5rem;--_ui5-v2-4-0_table_cell_padding: .25rem .5rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_split_button_middle_separator_top: .625rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-height: 1.75rem;--_ui5-v2-4-0_color-palette-item-hover-height: 2.25rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 12rem;--_ui5-v2-4-0_textarea_padding_top: .5rem;--_ui5-v2-4-0_textarea_padding_bottom: .4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .5rem}[dir=rtl]{--_ui5-v2-4-0_table_shadow_border_left: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_icon_transform_scale: scale(-1, 1);--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: -.5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem .125rem 0 0;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem .25rem 0 0;--_ui5-v2-4-0_popover_downward_arrow_margin: -.4375rem .125rem 0 0;--_ui5-v2-4-0_popover_left_arrow_margin: .1875rem -.375rem 0 0;--_ui5-v2-4-0_dialog_resize_cursor:sw-resize;--_ui5-v2-4-0_menu_submenu_margin_offset: 0 -.25rem;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: 0 .25rem;--_ui5-v2-4-0-menu_item_icon_float: left;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: auto;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem}[data-ui5-compact-size],.ui5-content-density-compact,.sapUiSizeCompact{--_ui5-v2-4-0_input_min_width: 2rem;--_ui5-v2-4-0_input_icon_width: 2rem;--_ui5-v2-4-0_input_information_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_custom_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .1875rem .25rem;--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_radio_button_min_width: 2rem;--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .5rem;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .5rem;--_ui5-v2-4-0_radio_button_focus_dist: .1875rem;--_ui5-v2-4-0_switch_height: 2rem;--_ui5-v2-4-0_switch_width: 3rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.75rem;--_ui5-v2-4-0_switch_root_outline_top: .25rem;--_ui5-v2-4-0_switch_root_outline_bottom: .25rem;--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.375rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(1.375rem) translateX(-100%);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(1.875rem) translateX(-100%);--_ui5-v2-4-0_switch_track_width: 2rem;--_ui5-v2-4-0_switch_track_height: 1.25rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.75rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_width: 1.25rem;--_ui5-v2-4-0_switch_handle_height: 1rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1rem;--_ui5-v2-4-0_switch_text_font_size: var(--sapFontSize);--_ui5-v2-4-0_switch_text_width: 1rem;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .4375rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .125rem;--_ui5-v2-4-0_textarea_exceeded_text_height: .375rem;--_ui5-v2-4-0_textarea_min_height: 1.625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .0625rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .125rem;--_ui5-v2-4-0_textarea_padding_top_information: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .125rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .5rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.25rem;--_ui5-v2-4-0_tokenizer-popover_offset: .1875rem;--_ui5-v2-4-0_slider_handle_icon_size: .875rem;--_ui5-v2-4-0_slider_padding: 1rem 1.0625rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_top: -.8125rem;--_ui5-v2-4-0_slider_tooltip_bottom: 1.75rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_bar_base_height: 2.5rem;--_ui5-v2-4-0_bar_subheader_height: 2.25rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_button_base_padding: .4375rem;--_ui5-v2-4-0_button_base_min_width: 2rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_calendar_height: 18rem;--_ui5-v2-4-0_calendar_width: 17.75rem;--_ui5-v2-4-0_calendar_left_right_padding: .25rem;--_ui5-v2-4-0_calendar_top_bottom_padding: .5rem;--_ui5-v2-4-0_calendar_header_height: 2rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2rem;--_ui5-v2-4-0_calendar_header_padding: 0;--_ui5-v2-4-0-calendar-legend-root-padding: .5rem;--_ui5-v2-4-0-calendar-legend-root-width: 16.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: -.125rem;--_ui5-v2-4-0_checkbox_root_side_padding: var(--_ui5-v2-4-0_checkbox_wrapped_focus_padding);--_ui5-v2-4-0_checkbox_width_height: var(--_ui5-v2-4-0_checkbox_compact_width_height);--_ui5-v2-4-0_checkbox_wrapper_padding: var(--_ui5-v2-4-0_checkbox_compact_wrapper_padding);--_ui5-v2-4-0_checkbox_inner_width_height: var(--_ui5-v2-4-0_checkbox_compact_inner_size);--_ui5-v2-4-0_checkbox_icon_size: .75rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .5rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_day_picker_item_width: 2rem;--_ui5-v2-4-0_day_picker_item_height: 2rem;--_ui5-v2-4-0_day_picker_empty_height: 2.125rem;--_ui5-v2-4-0_day_picker_item_justify_content: flex-end;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .5rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: .75rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .5rem;--_ui5-v2-4-0_daypicker_special_day_top: 1.625rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 1.25rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 1rem;--_ui5-v2-4-0_datetime_picker_height: 20.5rem;--_ui5-v2-4-0_datetime_picker_width: 35.5rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 18.5rem;--_ui5-v2-4-0_datetime_timeview_padding: .5rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 21.125rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 3.125rem;--_ui5-v2-4-0_dialog_content_min_height: 2.5rem;--_ui5-v2-4-0_dialog_footer_height: 2.5rem;--_ui5-v2-4-0_form_item_min_height: 2rem;--_ui5-v2-4-0_form_item_padding: .25rem;--_ui5-v2-4-0-form-group-heading-height: 2rem;--_ui5-v2-4-0_input_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_input_inner_padding: 0 .5rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .2rem 0 .5rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .125rem;--_ui5-v2-4-0_input_icon_min_width: var(--_ui5-v2-4-0_input_compact_min_width);--_ui5-v2-4-0_menu_item_padding: 0 .75rem 0 .5rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: .75rem;--_ui5-v2-4-0_popup_default_header_height: 2.5rem;--_ui5-v2-4-0_textarea_margin: .1875rem 0;--_ui5-v2-4-0_list_no_data_height: 2rem;--_ui5-v2-4-0_list_item_cb_margin_right: .5rem;--_ui5-v2-4-0_list_item_title_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_img_top_margin: .55rem;--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_dropdown_base_height: 2rem;--_ui5-v2-4-0_list_item_base_height: 2rem;--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_list_busy_row_height: 2rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_month_picker_item_height: 2rem;--_ui5-v2-4-0_year_picker_item_height: 2rem;--_ui5-v2-4-0_panel_header_height: 2rem;--_ui5-v2-4-0_panel_button_root_height: 2rem;--_ui5-v2-4-0_panel_button_root_width: 2.5rem;--_ui5-v2-4-0_token_height: 1.25rem;--_ui5-v2-4-0_token_right_margin: .25rem;--_ui5-v2-4-0_token_left_padding: .25rem;--_ui5-v2-4-0_token_readonly_padding: .125rem .25rem;--_ui5-v2-4-0_token_focus_offset: -.125rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .375rem .375rem;--_ui5-v2-4-0_token_wrapper_right_padding: .25rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_token_outline_offset: -.125rem;--_ui5-v2-4-0_tl_bubble_padding: .5rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -.5rem;--_ui5-v2-4-0_tl_padding: .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: .5rem;--_ui5-v2-4-0_tc_item_text: 2rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .3125rem;--_ui5-v2-4-0_tc_item_height: 4rem;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_item_icon_circle_size: 2rem;--_ui5-v2-4-0_tc_item_icon_size: 1rem;--_ui5-v2-4-0_radio_button_height: 2rem;--_ui5-v2-4-0_radio_button_label_side_padding: .5rem;--_ui5-v2-4-0_radio_button_inner_size: 2rem;--_ui5-v2-4-0_radio_button_svg_size: 1rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.5rem;--ui5-v2-4-0_side_navigation_item_height: 2rem;--_ui5-v2-4-0_slider_handle_height: 1.25rem;--_ui5-v2-4-0_slider_handle_width: 1.5rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_progress_outline_offset: -.625rem;--_ui5-v2-4-0_slider_outer_height: 1.3125rem;--_ui5-v2-4-0_step_input_min_width: 6rem;--_ui5-v2-4-0_step_input_padding: 2rem;--_ui5-v2-4-0-tree-indent-step: .5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2rem;--_ui5-v2-4-0-tree-toggle-box-height: 1.5rem;--_ui5-v2-4-0-tree-toggle-icon-size: .8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -.75rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -.8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_height: calc(100% - 1.25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% + .9375rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% - .75rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.8625rem;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: calc(100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% - .625rem) ;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 2.5rem) ;--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height: calc(100% + 1.5rem) ;--_ui5-v2-4-0_timeline_tlgi_horizontal_line_placeholder_before_width: var(--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height);--_ui5-v2-4-0_timeline_tlgi_horizontal_compact_root_margin_left: .5rem;--_ui5-v2-4-0_timeline_tlgi_compact_root_gap: .5rem;--_ui5-v2-4-0_timeline_tlgi_root_horizontal_height: 19.375rem;--_ui5-v2-4-0_vsd_header_container: 2.5rem;--_ui5-v2-4-0_vsd_sub_header_container_height: 2rem;--_ui5-v2-4-0_vsd_header_height: 4rem;--_ui5-v2-4-0_vsd_expand_content_height: 25.4375rem;--_ui5-v2-4-0-toolbar-separator-height: 1.5rem;--_ui5-v2-4-0-toolbar-height: 2rem;--_ui5-v2-4-0_toolbar_overflow_padding: .1875rem .375rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_textarea_padding_top: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom: .125rem;--_ui5-v2-4-0_checkbox_focus_position: .25rem;--_ui5-v2-4-0_split_button_middle_separator_top: .3125rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0_slider_handle_top: -.5rem;--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: .125rem;--_ui5-v2-4-0_color-palette-item-height: 1.25rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1rem;--_ui5-v2-4-0_color-palette-item-container-sides-padding: .1875rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .8125rem;--_ui5-v2-4-0_color-palette-item-hover-height: 1.625rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 8.75rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .1875rem .5rem;--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 7.5rem;--_ui5-v2-4-0_color-palette-button-height: 2rem;--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.25rem;--_ui5-v2-4-0_color_picker_slider_container_margin_top: -9px;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 1.5625rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 1.3125rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: .25rem;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: -.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .4375rem}:root,[dir=ltr]{--_ui5-v2-4-0_rotation_90deg: rotate(90deg);--_ui5-v2-4-0_rotation_minus_90deg: rotate(-90deg);--_ui5-v2-4-0_icon_transform_scale: none;--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: .5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem 0 0 .1875rem;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem 0 0 -.375rem;--_ui5-v2-4-0_popover_downward_arrow_margin: -.375rem 0 0 .125rem;--_ui5-v2-4-0_popover_left_arrow_margin: .125rem 0 0 .25rem;--_ui5-v2-4-0_dialog_resize_cursor: se-resize;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem 0 0 .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: 0 .5rem .5rem 0;--_ui5-v2-4-0_menu_submenu_margin_offset: -.25rem 0;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: .25rem 0;--_ui5-v2-4-0-menu_item_icon_float: right;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: -.125rem}\n' };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const TR = { packageName: "@ui5/webcomponents", fileName: "themes/Icon.css.ts", content: ':host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([hidden]){display:none}:host([invalid]){display:none}:host(:not([hidden]).ui5_hovered){opacity:.7}:host{display:inline-block;width:1rem;height:1rem;color:var(--sapContent_IconColor);fill:currentColor;outline:none}:host([design="Contrast"]){color:var(--sapContent_ContrastIconColor)}:host([design="Critical"]){color:var(--sapCriticalElementColor)}:host([design="Information"]){color:var(--sapInformativeElementColor)}:host([design="Negative"]){color:var(--sapNegativeElementColor)}:host([design="Neutral"]){color:var(--sapNeutralElementColor)}:host([design="NonInteractive"]){color:var(--sapContent_NonInteractiveIconColor)}:host([design="Positive"]){color:var(--sapPositiveElementColor)}:host([mode="Interactive"][desktop]) .ui5-icon-root:focus,:host([mode="Interactive"]) .ui5-icon-root:focus-visible{outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--ui5-v2-4-0-icon-focus-border-radius)}.ui5-icon-root{display:flex;height:100%;width:100%;outline:none;vertical-align:top}:host([mode="Interactive"]){cursor:pointer}.ui5-icon-root:not([dir=ltr]){transform:var(--_ui5-v2-4-0_icon_transform_scale);transform-origin:center}\n' };
var IR = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let MR = class extends wI {
  constructor() {
    super(...arguments), this.design = "Default", this.showTooltip = false, this.mode = "Image", this.pathData = [], this.invalid = false;
  }
  _onkeydown(e6) {
    this.mode === CR.Interactive && (WI(e6) && this.fireDecoratorEvent("click"), jI(e6) && e6.preventDefault());
  }
  _onkeyup(e6) {
    this.mode === CR.Interactive && jI(e6) && this.fireDecoratorEvent("click");
  }
  get _dir() {
    return this.ltr ? "ltr" : void 0;
  }
  get effectiveAriaHidden() {
    return this.mode === CR.Decorative ? "true" : void 0;
  }
  get _tabIndex() {
    return this.mode === CR.Interactive ? "0" : void 0;
  }
  get effectiveAccessibleRole() {
    switch (this.mode) {
      case CR.Interactive:
        return "button";
      case CR.Decorative:
        return "presentation";
      default:
        return "img";
    }
  }
  onEnterDOM() {
    IE() && this.setAttribute("desktop", "");
  }
  async onBeforeRendering() {
    const e6 = this.name;
    if (!e6) return console.warn("Icon name property is required", this);
    let t2 = ET(e6);
    if (t2 || (t2 = await TT(e6)), !t2) return this.invalid = true, console.warn(`Required icon is not registered. Invalid icon name: ${this.name}`);
    if ("ICON_NOT_FOUND" === t2) return this.invalid = true, console.warn(`Required icon is not registered. You can either import the icon as a module in order to use it e.g. "@ui5/webcomponents-icons/dist/${e6.replace("sap-icon://", "")}.js", or setup a JSON build step and import "@ui5/webcomponents-icons/dist/AllIcons.js".`);
    if (this.viewBox = t2.viewBox || "0 0 512 512", t2.customTemplate && (t2.pathData = [], this.customSvg = tI(t2.customTemplate, this)), this.invalid = false, this.pathData = Array.isArray(t2.pathData) ? t2.pathData : [t2.pathData], this.accData = t2.accData, this.ltr = t2.ltr, this.packageName = t2.packageName, this.accessibleName) this.effectiveAccessibleName = this.accessibleName;
    else if (this.accData) {
      const e7 = await vT(this.packageName);
      this.effectiveAccessibleName = e7.getText(this.accData) || void 0;
    } else this.effectiveAccessibleName = void 0;
  }
  get hasIconTooltip() {
    return this.showTooltip && this.effectiveAccessibleName;
  }
};
IR([SI()], MR.prototype, "design", void 0), IR([SI()], MR.prototype, "name", void 0), IR([SI()], MR.prototype, "accessibleName", void 0), IR([SI({ type: Boolean })], MR.prototype, "showTooltip", void 0), IR([SI()], MR.prototype, "mode", void 0), IR([SI({ type: Array })], MR.prototype, "pathData", void 0), IR([SI({ type: Object, noAttribute: true })], MR.prototype, "accData", void 0), IR([SI({ type: Boolean })], MR.prototype, "invalid", void 0), IR([SI({ noAttribute: true })], MR.prototype, "effectiveAccessibleName", void 0), MR = IR([CI({ tag: "ui5-icon", languageAware: true, themeAware: true, renderer: UM, template: function(e6, t2, i2) {
  return NM`<svg class="ui5-icon-root" part="root" tabindex="${FM(this._tabIndex)}" dir="${FM(this._dir)}" viewBox="${FM(this.viewBox)}" role="${FM(this.effectiveAccessibleRole)}" focusable="false" preserveAspectRatio="xMidYMid meet" aria-label="${FM(this.effectiveAccessibleName)}" aria-hidden=${FM(this.effectiveAriaHidden)} xmlns="http://www.w3.org/2000/svg" @keydown=${this._onkeydown} @keyup=${this._onkeyup}>${wR.call(this, e6, t2, i2)}</svg>`;
}, styles: TR }), EI("click", { bubbles: true })], MR), MR.define();
const BR = MR;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const RR = { packageName: "@ui5/webcomponents", fileName: "themes/SegmentedButtonItem.css.ts", content: ':host{vertical-align:middle}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-segmented-button-item-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:.0625rem solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-segmented-button-item-icon{color:inherit;flex-shrink:0;padding-inline-end:.375rem}:host([icon-only]) .ui5-segmented-button-item-icon{padding-inline-end:0}:host([icon-only]) .ui5-segmented-button-item-root{min-width:auto;padding:0}:host([icon-only]) .ui5-segmented-button-item-text{display:none}.ui5-segmented-button-item-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not([icon-end])) .ui5-segmented-button-item-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-icon][icon-end]) .ui5-segmented-button-item-text{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only])) .ui5-segmented-button-item-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]){pointer-events:none}:host([desktop]:not([active])) .ui5-segmented-button-item-root:focus-within:after,:host(:not([active])) .ui5-segmented-button-item-root:focus-visible:after,:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}.ui5-segmented-button-item-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([active][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([active]) .ui5-segmented-button-item-root:focus-visible:after,:host([selected][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([selected]) .ui5-segmented-button-item-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([desktop]:not(:last-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:last-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([desktop]:not(:first-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:first-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}\n' };
var kR, PR = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let DR = kR = class extends wI {
  get ariaDescription() {
    return kR.i18nBundle.getText(LB);
  }
  constructor() {
    super(), this.disabled = false, this.selected = false, this.iconOnly = false, this.nonInteractive = false, this.posInSet = 0, this.sizeOfSet = 0;
  }
  _onclick(e6) {
    this.disabled && (e6.preventDefault(), e6.stopPropagation()), this.selected = !this.selected;
  }
  onEnterDOM() {
    IE() && this.setAttribute("desktop", "");
  }
  onBeforeRendering() {
    this.iconOnly = !fR(this.text);
  }
  _onkeyup(e6) {
    XI(e6) && e6.preventDefault();
  }
  get tabIndexValue() {
    if (this.disabled) return;
    const e6 = this.getAttribute("tabindex");
    return e6 || this.forcedTabIndex;
  }
  get ariaLabelText() {
    return cR(this);
  }
  get showIconTooltip() {
    return rR() && this.iconOnly && !this.tooltip;
  }
};
PR([SI({ type: Boolean })], DR.prototype, "disabled", void 0), PR([SI({ type: Boolean })], DR.prototype, "selected", void 0), PR([SI()], DR.prototype, "tooltip", void 0), PR([SI()], DR.prototype, "accessibleName", void 0), PR([SI()], DR.prototype, "accessibleNameRef", void 0), PR([SI()], DR.prototype, "icon", void 0), PR([SI({ type: Boolean })], DR.prototype, "iconOnly", void 0), PR([SI({ type: Boolean })], DR.prototype, "nonInteractive", void 0), PR([SI({ noAttribute: true })], DR.prototype, "forcedTabIndex", void 0), PR([SI({ type: Number })], DR.prototype, "posInSet", void 0), PR([SI({ type: Number })], DR.prototype, "sizeOfSet", void 0), PR([TI({ type: Node, default: true })], DR.prototype, "text", void 0), PR([HM("@ui5/webcomponents")], DR, "i18nBundle", void 0), DR = kR = PR([CI({ tag: "ui5-segmented-button-item", renderer: UM, template: function(e6, t2, i2) {
  return NM`<li role="option" aria-roledescription="${FM(this.ariaDescription)}" aria-posinset="${FM(this.posInSet)}" aria-setsize="${FM(this.sizeOfSet)}" aria-selected="${FM(this.selected)}" class="ui5-segmented-button-item-root" aria-disabled="${FM(this.disabled)}" data-sap-focus-ref @click=${this._onclick} @keyup=${this._onkeyup} tabindex=${FM(this.tabIndexValue)} aria-label="${FM(this.ariaLabelText)}" title="${FM(this.tooltip)}">${this.icon ? vR.call(this, e6, t2, i2) : void 0}<span id="${FM(this._id)}-content" class="ui5-segmented-button-item-text"><bdi><slot></slot></bdi></span></li>`;
}, styles: RR, dependencies: [BR] })], DR), DR.define();
const LR = DR;
var FR;
!function(e6) {
  e6.Single = "Single", e6.Multiple = "Multiple";
}(FR || (FR = {}));
const NR = FR;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const OR = { packageName: "@ui5/webcomponents", fileName: "themes/SegmentedButton.css.ts", content: ":host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block;min-width:calc(var(--_ui5-v2-4-0_segmented_btn_items_count) * var(--_ui5-v2-4-0_button_base_min_width))}.ui5-segmented-button-root{width:inherit;display:grid;grid-template-columns:repeat(var(--_ui5-v2-4-0_segmented_btn_items_count),minmax(var(--_ui5-v2-4-0_button_base_min_width),1fr));margin:0;padding:0;background-color:var(--sapButton_Background);border-radius:var(--sapButton_BorderCornerRadius);box-shadow:inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item]){border-radius:var(--_ui5-v2-4-0_segmented_btn_inner_border_radius);border-color:var(--_ui5-v2-4-0_segmented_btn_border_color);background-color:var(--_ui5-v2-4-0_segmented_btn_background_color);height:var(--_ui5-v2-4-0_button_base_height);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:initial}::slotted([ui5-segmented-button-item]:hover){z-index:2;box-shadow:var(--_ui5-v2-4-0_segmented_btn_hover_box_shadow);border-color:var(--sapButton_Hover_BorderColor);background-color:var(--sapButton_Hover_Background)}::slotted([ui5-segmented-button-item][selected]),::slotted([ui5-segmented-button-item][active]){border-color:var(--sapButton_Selected_BorderColor);background-color:var(--sapButton_Selected_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item][selected]:hover){border-color:var(--sapButton_Selected_Hover_BorderColor);background-color:var(--sapButton_Selected_Hover_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item]:last-child){border-start-end-radius:var(--sapButton_BorderCornerRadius);border-end-end-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:first-child){border-start-start-radius:var(--sapButton_BorderCornerRadius);border-end-start-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:not(:first-child)){border-left-width:var(--_ui5-v2-4-0_segmented_btn_item_border_left);border-right-width:var(--_ui5-v2-4-0_segmented_btn_item_border_right)}::slotted([ui5-segmented-button-item][active]:not([active]):hover){border-color:var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item][active]:hover){border-color:var(--sapButton_Selected_BorderColor)}\n" };
var UR, zR = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let HR = UR = class extends wI {
  constructor() {
    super(), this.selectionMode = "Single", this._itemNavigation = new SM(this, { getItemsCallback: () => this.navigatableItems }), this.hasPreviouslyFocusedItem = false;
  }
  onBeforeRendering() {
    const e6 = this.getSlottedNodes("items");
    e6.forEach((e7, t2, i2) => {
      e7.posInSet = t2 + 1, e7.sizeOfSet = i2.length;
    }), this.normalizeSelection(), this.style.setProperty(uS("--_ui5_segmented_btn_items_count"), `${e6.length}`);
  }
  normalizeSelection() {
    if (this.items.length) switch (this.selectionMode) {
      case NR.Single: {
        const e6 = this.selectedItems, t2 = this._selectedItem ? e6.indexOf(this._selectedItem) : -1;
        this._selectedItem && e6.length > 1 && e6.splice(t2, 1);
        const i2 = e6.pop() || this.items[0];
        this._applySingleSelection(i2);
        break;
      }
    }
  }
  _selectItem(e6) {
    const t2 = e6.target, i2 = t2.hasAttribute("ui5-segmented-button-item");
    if (!t2.disabled && t2 !== this.getDomRef() && i2) {
      if (this.selectionMode === NR.Multiple) e6 instanceof KeyboardEvent && (t2.selected = !t2.selected);
      else this._applySingleSelection(t2);
      return this.fireDecoratorEvent("selection-change", { selectedItems: this.selectedItems }), this._itemNavigation.setCurrentItem(t2), this;
    }
  }
  _applySingleSelection(e6) {
    this.items.forEach((e7) => {
      e7.selected = false;
    }), e6.selected = true, this._selectedItem = e6;
  }
  _onclick(e6) {
    this._selectItem(e6);
  }
  _onkeydown(e6) {
    WI(e6) ? this._selectItem(e6) : jI(e6) && e6.preventDefault();
  }
  _onkeyup(e6) {
    jI(e6) && this._selectItem(e6);
  }
  _onmousedown(e6) {
    const t2 = e6.target;
    t2.hasAttribute("ui5-segmented-button-item") && (this._itemNavigation.setCurrentItem(t2), this.hasPreviouslyFocusedItem = true);
  }
  _onfocusin(e6) {
    this.hasPreviouslyFocusedItem ? this._itemNavigation.setCurrentItem(e6.target) : this.selectedItems.length && (this._itemNavigation.setCurrentItem(this.selectedItems[0]), this.selectedItems[0].focus(), this.hasPreviouslyFocusedItem = true);
  }
  get selectedItems() {
    return this.items.filter((e6) => e6.selected);
  }
  get navigatableItems() {
    return this.getSlottedNodes("items").filter((e6) => !e6.disabled);
  }
  get ariaDescribedBy() {
    return UR.i18nBundle.getText(DB);
  }
  get ariaDescription() {
    return UR.i18nBundle.getText(PB);
  }
};
var QR;
zR([SI()], HR.prototype, "accessibleName", void 0), zR([SI()], HR.prototype, "selectionMode", void 0), zR([TI({ type: HTMLElement, invalidateOnChildChange: true, default: true })], HR.prototype, "items", void 0), zR([HM("@ui5/webcomponents")], HR, "i18nBundle", void 0), HR = UR = zR([CI({ tag: "ui5-segmented-button", languageAware: true, renderer: UM, template: function(e6, t2, i2) {
  return NM`<ul @click="${this._onclick}" @mousedown="${this._onmousedown}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @focusin="${this._onfocusin}" class="ui5-segmented-button-root" role="listbox" aria-multiselectable="true" aria-describedby="${FM(this._id)}-invisibleText" aria-roledescription=${FM(this.ariaDescription)} aria-label=${FM(this.accessibleName)}><slot></slot><span id="${FM(this._id)}-invisibleText" class="ui5-hidden-text">${FM(this.ariaDescribedBy)}</span></ul>`;
}, styles: OR, dependencies: [LR] }), EI("selection-change", { detail: { selectedItems: { type: Array } }, bubbles: true })], HR), HR.define(), function(e6) {
  e6.Default = "Default", e6.Positive = "Positive", e6.Negative = "Negative", e6.Transparent = "Transparent", e6.Emphasized = "Emphasized", e6.Attention = "Attention";
}(QR || (QR = {}));
const VR = QR;
var GR;
!function(e6) {
  e6.Button = "Button", e6.Submit = "Submit", e6.Reset = "Reset";
}(GR || (GR = {}));
const qR = GR;
function $R(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-button-icon" name="${FM(this.icon)}" mode="${FM(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-button-icon" name="${FM(this.icon)}" mode="${FM(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`;
}
function WR(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-button-end-icon" name="${FM(this.endIcon)}" mode="${FM(this.endIconMode)}" part="endIcon"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-button-end-icon" name="${FM(this.endIcon)}" mode="${FM(this.endIconMode)}" part="endIcon"></ui5-icon>`;
}
function jR(e6, t2, i2) {
  return NM`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${FM(this.buttonTypeText)}</span>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const XR = { packageName: "@ui5/webcomponents", fileName: "themes/Button.css.ts", content: ':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-button-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:1px solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-button-icon,.ui5-button-end-icon{color:inherit;flex-shrink:0}.ui5-button-end-icon{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([icon-only]:not([has-end-icon])) .ui5-button-root{min-width:auto;padding:0}:host([icon-only]) .ui5-button-text{display:none}.ui5-button-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not(:empty)) .ui5-button-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-end-icon]:not([has-icon]):empty) .ui5-button-end-icon{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only]):not([has-end-icon])) .ui5-button-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]:active){pointer-events:none}:host([desktop]:not([active])) .ui5-button-root:focus-within:after,:host(:not([active])) .ui5-button-root:focus-visible:after,:host([desktop][active][design="Emphasized"]) .ui5-button-root:focus-within:after,:host([active][design="Emphasized"]) .ui5-button-root:focus-visible:after,:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:before,:host([design="Emphasized"]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_emphasized_focused_border_before);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}.ui5-button-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([ui5-button][active]:not([disabled]):not([non-interactive])){background-image:none;background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([design="Positive"]){background-color:var(--sapButton_Accept_Background);border-color:var(--sapButton_Accept_BorderColor);color:var(--sapButton_Accept_TextColor)}:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Accept_Hover_Background);border-color:var(--sapButton_Accept_Hover_BorderColor);color:var(--sapButton_Accept_Hover_TextColor)}:host([ui5-button][design="Positive"][active]:not([non-interactive])){background-color:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Active_TextColor)}:host([design="Negative"]){background-color:var(--sapButton_Reject_Background);border-color:var(--sapButton_Reject_BorderColor);color:var(--sapButton_Reject_TextColor)}:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Reject_Hover_Background);border-color:var(--sapButton_Reject_Hover_BorderColor);color:var(--sapButton_Reject_Hover_TextColor)}:host([ui5-button][design="Negative"][active]:not([non-interactive])){background-color:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Attention"]){background-color:var(--sapButton_Attention_Background);border-color:var(--sapButton_Attention_BorderColor);color:var(--sapButton_Attention_TextColor)}:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Attention_Hover_Background);border-color:var(--sapButton_Attention_Hover_BorderColor);color:var(--sapButton_Attention_Hover_TextColor)}:host([ui5-button][design="Attention"][active]:not([non-interactive])){background-color:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Emphasized"]){background-color:var(--sapButton_Emphasized_Background);border-color:var(--sapButton_Emphasized_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_TextColor);font-family:var(--sapFontBoldFamily )}:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Emphasized_Hover_Background);border-color:var(--sapButton_Emphasized_Hover_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_Hover_TextColor)}:host([ui5-button][design="Empasized"][active]:not([non-interactive])){background-color:var(--sapButton_Emphasized_Active_Background);border-color:var(--sapButton_Emphasized_Active_BorderColor);color:var(--sapButton_Emphasized_Active_TextColor)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color);outline:none}:host([design="Emphasized"][desktop][active]:not([non-interactive])) .ui5-button-root:focus-within:after,:host([design="Emphasized"][active]:not([non-interactive])) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_active_border_color)}:host([design="Transparent"]){background-color:var(--sapButton_Lite_Background);color:var(--sapButton_Lite_TextColor);border-color:var(--sapButton_Lite_BorderColor)}:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Lite_Hover_Background);border-color:var(--sapButton_Lite_Hover_BorderColor);color:var(--sapButton_Lite_Hover_TextColor)}:host([ui5-button][design="Transparent"][active]:not([non-interactive])){background-color:var(--sapButton_Lite_Active_Background);border-color:var(--sapButton_Lite_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([ui5-segmented-button-item][active][desktop]) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item][active]) .ui5-button-root:focus-visible:after,:host([pressed][desktop]) .ui5-button-root:focus-within:after,:host([pressed]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([ui5-segmented-button-item][desktop]:not(:last-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:last-child)) .ui5-button-root:focus-visible:after{border-top-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([ui5-segmented-button-item][desktop]:not(:first-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:first-child)) .ui5-button-root:focus-visible:after{border-top-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}\n' };
var YR, KR = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let ZR = false, JR = null, ek = YR = class extends wI {
  constructor() {
    super(), this.design = "Default", this.disabled = false, this.submits = false, this.accessibilityAttributes = {}, this.type = "Button", this.accessibleRole = "Button", this.active = false, this.iconOnly = false, this.hasIcon = false, this.hasEndIcon = false, this.nonInteractive = false, this._iconSettings = {}, this.forcedTabIndex = "0", this._isTouch = false, this._cancelAction = false, this._deactivate = () => {
      JR && JR._setActiveState(false);
    }, ZR || (document.addEventListener("mouseup", this._deactivate), ZR = true);
    this._ontouchstart = { handleEvent: () => {
      this.nonInteractive || this._setActiveState(true);
    }, passive: true };
  }
  onEnterDOM() {
    IE() && this.setAttribute("desktop", "");
  }
  async onBeforeRendering() {
    this.hasIcon = !!this.icon, this.hasEndIcon = !!this.endIcon, this.iconOnly = this.isIconOnly, this.buttonTitle = this.tooltip || await this.getDefaultTooltip();
  }
  _onclick() {
    var _a3;
    this.nonInteractive || (this._isSubmit && rI(this), this._isReset && ((e6) => {
      var _a4, _b3;
      (_b3 = (_a4 = e6._internals) == null ? void 0 : _a4.form) == null ? void 0 : _b3.reset();
    })(this), EE() && ((_a3 = this.getDomRef()) == null ? void 0 : _a3.focus()));
  }
  _onmousedown() {
    this.nonInteractive || (this._setActiveState(true), JR = this);
  }
  _ontouchend(e6) {
    this.disabled && (e6.preventDefault(), e6.stopPropagation()), this.active && this._setActiveState(false), JR && JR._setActiveState(false);
  }
  _onkeydown(e6) {
    this._cancelAction = ((e7) => "Shift" === e7.key || e7.keyCode === RI)(e6) || hM(e6), jI(e6) || WI(e6) ? this._setActiveState(true) : this._cancelAction && this._setActiveState(false);
  }
  _onkeyup(e6) {
    this._cancelAction && e6.preventDefault(), (jI(e6) || WI(e6)) && this.active && this._setActiveState(false);
  }
  _onfocusout() {
    this.nonInteractive || this.active && this._setActiveState(false);
  }
  _setActiveState(e6) {
    !this.fireDecoratorEvent("_active-state-change") || (this.active = e6);
  }
  get _hasPopup() {
    return this.accessibilityAttributes.hasPopup;
  }
  get hasButtonType() {
    return this.design !== VR.Default && this.design !== VR.Transparent;
  }
  get iconMode() {
    return this.icon ? CR.Decorative : "";
  }
  get endIconMode() {
    return this.endIcon ? CR.Decorative : "";
  }
  get isIconOnly() {
    return !fR(this.text);
  }
  static typeTextMappings() {
    return { Positive: KM, Negative: ZM, Emphasized: JM };
  }
  getDefaultTooltip() {
    if (rR()) return (async (e6) => {
      if (!e6) return;
      let t2 = ET(e6);
      return t2 || (t2 = await TT(e6)), t2 && t2 !== wT && t2.accData ? (await vT(t2.packageName)).getText(t2.accData) : void 0;
    })(this.icon);
  }
  get buttonTypeText() {
    return YR.i18nBundle.getText(YR.typeTextMappings()[this.design]);
  }
  get effectiveAccRole() {
    return this.accessibleRole.toLowerCase();
  }
  get tabIndexValue() {
    if (this.disabled) return;
    const e6 = this.getAttribute("tabindex");
    return e6 || (this.nonInteractive ? "-1" : this.forcedTabIndex);
  }
  get showIconTooltip() {
    return rR() && this.iconOnly && !this.tooltip;
  }
  get ariaLabelText() {
    return cR(this);
  }
  get ariaDescribedbyText() {
    return this.hasButtonType ? "ui5-button-hiddenText-type" : void 0;
  }
  get _isSubmit() {
    return this.type === qR.Submit || this.submits;
  }
  get _isReset() {
    return this.type === qR.Reset;
  }
};
KR([SI()], ek.prototype, "design", void 0), KR([SI({ type: Boolean })], ek.prototype, "disabled", void 0), KR([SI()], ek.prototype, "icon", void 0), KR([SI()], ek.prototype, "endIcon", void 0), KR([SI({ type: Boolean })], ek.prototype, "submits", void 0), KR([SI()], ek.prototype, "tooltip", void 0), KR([SI()], ek.prototype, "accessibleName", void 0), KR([SI()], ek.prototype, "accessibleNameRef", void 0), KR([SI({ type: Object })], ek.prototype, "accessibilityAttributes", void 0), KR([SI()], ek.prototype, "type", void 0), KR([SI()], ek.prototype, "accessibleRole", void 0), KR([SI({ type: Boolean })], ek.prototype, "active", void 0), KR([SI({ type: Boolean })], ek.prototype, "iconOnly", void 0), KR([SI({ type: Boolean })], ek.prototype, "hasIcon", void 0), KR([SI({ type: Boolean })], ek.prototype, "hasEndIcon", void 0), KR([SI({ type: Boolean })], ek.prototype, "nonInteractive", void 0), KR([SI({ noAttribute: true })], ek.prototype, "buttonTitle", void 0), KR([SI({ type: Object })], ek.prototype, "_iconSettings", void 0), KR([SI({ noAttribute: true })], ek.prototype, "forcedTabIndex", void 0), KR([SI({ type: Boolean })], ek.prototype, "_isTouch", void 0), KR([SI({ type: Boolean, noAttribute: true })], ek.prototype, "_cancelAction", void 0), KR([TI({ type: Node, default: true })], ek.prototype, "text", void 0), KR([HM("@ui5/webcomponents")], ek, "i18nBundle", void 0), ek = YR = KR([CI({ tag: "ui5-button", formAssociated: true, languageAware: true, renderer: UM, template: function(e6, t2, i2) {
  return NM`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${FM(this.tabIndexValue)} aria-expanded="${FM(this.accessibilityAttributes.expanded)}" aria-controls="${FM(this.accessibilityAttributes.controls)}" aria-haspopup="${FM(this._hasPopup)}" aria-label="${FM(this.ariaLabelText)}" aria-describedby="${FM(this.ariaDescribedbyText)}" title="${FM(this.buttonTitle)}" part="button" role="${FM(this.effectiveAccRole)}">${this.icon ? $R.call(this, e6, t2, i2) : void 0}<span id="${FM(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon ? WR.call(this, e6, t2, i2) : void 0}${this.hasButtonType ? jR.call(this, e6, t2, i2) : void 0}</button> `;
}, styles: XR, dependencies: [BR], shadowRootOptions: { delegatesFocus: true } }), EI("click", { bubbles: true }), EI("_active-state-change", { bubbles: true, cancelable: true })], ek), ek.define();
const tk = ek, ik = { key: "ICON_ADD", defaultText: "Add" }, nk = { key: "ICON_DECLINE", defaultText: "Decline" }, ok = { key: "ICON_ERROR", defaultText: "Error" };
CT("decline", { pathData: "M86 109l22-23q5-5 12-5 6 0 11 5l124 125L380 86q5-5 11-5 7 0 12 5l22 23q6 5 6 11t-6 12L301 256l124 125q6 5 6 11 0 5-6 11l-22 23q-8 5-12 5-3 0-11-5L255 301 131 426q-5 5-11 5-4 0-12-5l-22-23q-6-6-6-11 0-6 6-11l124-125L86 132q-6-6-6-12t6-11z", ltr: false, accData: nk, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("decline", { pathData: "M292 256l117 116q7 7 7 18 0 12-7.5 19t-18.5 7q-9 0-18-7L256 292 140 409q-9 7-18 7-11 0-18.5-7.5T96 390t7-18l117-116-117-116q-7-7-7-18t7.5-18.5T122 96t18 7l116 117 116-117q7-7 18-7t18.5 7.5T416 122t-7 18z", ltr: false, accData: nk, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("unit", { pathData: "M369.154 238q-11 0-18-8l-16-16-41 40 17 17q8 8 8 18t-8 18q-7 7-18 7t-18-7l-17-17-40 40 17 17q8 8 7.5 18t-7.5 18q-7 7-18 7t-18-7l-17-17-92 93h370V89l-90 89 17 17q8 8 8 18t-8 17q-7 8-18 8zm-340 271q-11 0-18-7 0-1-.5-1t-.5-1q-6-6-6-16t6-17l457-457 2-2q8-6 16-6 5 0 9 2l8 4q0 1 .5 1t.5 1q10 10 7 22v452q0 11-7 18t-18 7h-456zm381-101h-108l108-109v109z", ltr: false, collection: "tnt-v2", packageName: "@ui5/webcomponents-icons-tnt" });
CT("unit", { pathData: "M199 448l-45-45-77 77h403V77l-77 77 45 45-23 23-45-45-22 22 45 45-23 23-45-45-22 23 44 45-22 22-45-45-23 23 45 45-22 22-45-44-23 22 45 45-23 23-45-45-22 22 45 45zm217-90l-58 58h58v-58zM512 0v512H0zm-64 281v167H281z", ltr: false, collection: "tnt-v3", packageName: "@ui5/webcomponents-icons-tnt" });
CT("measure", { pathData: "M0 208V64h512v32h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96H96v80q0 16-16 16t-16-16V96H32v112q0 16-16 16T0 208zm0 112h304l25-49q2-5 7-5t7 5l25 49h144v32H384l16 32h112v32h-96l10 21q1 2 1 4t-1.5 4.5-6.5 2.5H253q-5 0-6.5-2.5T245 441t1-4l10-21H0v-32h272l16-32H0v-32zm292 96h88l-44-88z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("measure", { pathData: "M454 96q24 0 41 17t17 41v160q0 23-17 40t-41 17h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T442 320h12q7 0 7-6V154q0-7-7-7h-38v51q0 11-7.5 18.5T390 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T275 198v-51h-38v51q0 11-7.5 18.5T211 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T96 198v-51H58q-7 0-7 7v160q0 6 7 6h108q11 0 18.5 7.5T192 346t-7.5 18-18.5 7H58q-24 0-41-17T0 314V154q0-24 17-41t41-17h396zm-75 280q5 7 5 14 0 11-7.5 18.5T358 416H250q-11 0-18.5-7.5T224 390q0-7 5-14l54-77q8-11 21-11t21 11z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("chart-axis", { pathData: "M487.5 408q9 10 9 23t-9 23l-61 53q-5 5-11 5t-11-5-5-11.5 5-11.5l44-36h-336q-14 0-23-9.5t-9-22.5V80l-37 43q-5 5-11.5 5t-11.5-5-5-11 5-11l52-60q10-9 23-9t23 9l53 60q5 5 5 11t-5 11-11.5 5-11.5-5l-36-43v313l225-225-57 5q-16-2-16-16 0-7 4.5-11.5t10.5-4.5l80-6q13 1 22.5 10t9.5 22l-5 81q0 6-4.5 10.5t-10.5 4.5q-17 0-17-16l5-56-224 225h313l-44-37q-5-5-5-11.5t5-11.5 11-5 11 5z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("chart-axis", { pathData: "M505 391q7 7 7 19 0 11-7 18l-77 76q-8 8-18 8-11 0-18.5-7.5T384 486q0-10 8-18l33-33H102q-11 0-18-7t-7-18V87l-33 34q-7 7-18 7t-18.5-7.5T0 102q0-10 8-18L84 7q9-7 19-7 9 0 18 7l76 77q8 7 8 18t-7.5 18.5T179 128t-18-7l-33-34v261l233-233h-47q-11 0-18.5-7T288 90t7.5-18.5T314 64h108q11 0 18.5 7.5T448 90v108q0 11-7.5 18.5T422 224t-18-7.5-7-18.5v-47L164 384h261l-33-33q-8-8-8-18 0-11 7.5-18.5T410 307q10 0 18 8z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("rotate", { pathData: "M200 59q5 5 5 11 0 5-5 12l-54 54q-5 5-12 5-6 0-11-4.5t-5-11.5q0-5 5-12l27-27H80q-20 0-34 14t-14 34v77q0 16-16 16T0 211v-77q0-33 23.5-56.5T80 54h70l-27-27q-5-5-5-11t5-11q4-5 11-5 8 0 12 5zm296 133q16 0 16 16v288q0 16-16 16H208q-16 0-16-16V208q0-16 16-16h288zm-16 288V224H224v256h256z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
function rk(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-button-icon" name="${FM(this.icon)}" mode="${FM(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-button-icon" name="${FM(this.icon)}" mode="${FM(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`;
}
function sk(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-button-end-icon" name="${FM(this.endIcon)}" mode="${FM(this.endIconMode)}" part="endIcon"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-button-end-icon" name="${FM(this.endIcon)}" mode="${FM(this.endIconMode)}" part="endIcon"></ui5-icon>`;
}
function ak(e6, t2, i2) {
  return NM`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${FM(this.buttonTypeText)}</span>`;
}
CT("rotate", { pathData: "M486 192q11 0 18.5 7.5T512 218v268q0 11-7.5 18.5T486 512H218q-11 0-18.5-7.5T192 486V218q0-11 7.5-18.5T218 192h268zm-25 51H243v218h218V243zM217 62q7 7 7 18t-7 18l-55 54q-8 8-18 8-11 0-18.5-7.5T118 134q0-10 8-18l11-10H90q-17 0-28 11t-11 27v86q0 11-7 18.5T26 256t-18.5-7.5T0 230v-86q0-37 26-63.5T90 54h47l-11-10q-8-8-8-18 0-11 7.5-18.5T144 0q10 0 18 8z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const lk = { packageName: "@ui5/webcomponents", fileName: "themes/ToggleButton.css.ts", content: ':host(:not([hidden])){display:inline-block}:host([design="Emphasized"]:not([pressed])){text-shadow:var(--_ui5-v2-4-0_toggle_button_emphasized_text_shadow)}:host([pressed]),:host([design="Default"][pressed]),:host([design="Transparent"][pressed]),:host([design="Emphasized"][pressed]){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor);text-shadow:none}:host([pressed]:hover),:host([pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Default"][pressed]:hover),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Transparent"][pressed]:hover),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Emphasized"][pressed]:hover),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Selected_Hover_Background);border-color:var(--sapButton_Selected_Hover_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([active]:not([disabled])),:host([design="Default"][active]:not([disabled])),:host([design="Transparent"][active]:not([disabled])),:host([design="Emphasized"][active]:not([disabled])){background:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([design="Negative"][pressed]){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][active]:not([disabled])){background:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Negative"][pressed][active]:hover),:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Reject_Selected_Hover_Background);border-color:var(--sapButton_Reject_Selected_Hover_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Positive"][pressed]){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][active]:not([disabled])){background:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed][active]:hover),:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Accept_Selected_Hover_Background);border-color:var(--sapButton_Accept_Selected_Hover_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Attention"][pressed]){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][active]:not([disabled])){background:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Attention"][pressed][active]:hover),:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Attention_Selected_Hover_Background);border-color:var(--sapButton_Attention_Selected_Hover_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}\n' };
var ck = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let hk = class extends tk {
  constructor() {
    super(...arguments), this.pressed = false;
  }
  _onclick() {
    this.pressed = !this.pressed, EE() && this.getDomRef().focus();
  }
  _onkeyup(e6) {
    XI(e6) ? e6.preventDefault() : super._onkeyup(e6);
  }
};
ck([SI({ type: Boolean })], hk.prototype, "pressed", void 0), hk = ck([CI({ tag: "ui5-toggle-button", template: function(e6, t2, i2) {
  return NM`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  aria-pressed="${FM(this.pressed)}"  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${FM(this.tabIndexValue)} aria-expanded="${FM(this.accessibilityAttributes.expanded)}" aria-controls="${FM(this.accessibilityAttributes.controls)}" aria-haspopup="${FM(this._hasPopup)}" aria-label="${FM(this.ariaLabelText)}" aria-describedby="${FM(this.ariaDescribedbyText)}" title="${FM(this.buttonTitle)}" part="button" role="${FM(this.effectiveAccRole)}">${this.icon ? rk.call(this, e6, t2, i2) : void 0}<span id="${FM(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon ? sk.call(this, e6, t2, i2) : void 0}${this.hasButtonType ? ak.call(this, e6, t2, i2) : void 0}</button> `;
}, styles: [tk.styles, lk] })], hk), hk.define();
const uk = () => {
  const e6 = wM();
  return e6 && "function" == typeof e6.focus ? e6 : null;
}, dk = (e6, t2) => {
  let i2 = e6;
  if (i2.shadowRoot && (i2 = Array.from(i2.shadowRoot.children).find((e7) => "style" !== e7.localName), !i2)) return false;
  if (i2 === t2) return true;
  const n2 = "slot" === i2.localName ? i2.assignedNodes() : i2.children;
  return !!n2 && Array.from(n2).some((e7) => dk(e7, t2));
}, pk = (e6, t2) => {
  let i2, n2;
  if (e6 instanceof MouseEvent) i2 = e6.clientX, n2 = e6.clientY;
  else {
    const t3 = e6.touches[0];
    i2 = t3.clientX, n2 = t3.clientY;
  }
  return ((e7, t3, i3) => e7 >= i3.left && e7 <= i3.right && t3 >= i3.top && t3 <= i3.bottom)(i2, n2, t2);
};
const _k = (e6) => {
  const t2 = e6.parentElement || e6.getRootNode && e6.getRootNode().host;
  return t2 && (function(e7) {
    return "isUI5Element" in e7 && "_show" in e7;
  }(t2) || t2 === document.documentElement) ? t2 : _k(t2);
}, gk = (e6, t2, i2) => Math.min(Math.max(e6, t2), Math.max(t2, i2)), mk = (e6) => {
  const t2 = getComputedStyle(e6);
  return ["size", "inline-size"].indexOf(t2.containerType) > -1 || ["transform", "perspective"].indexOf(t2.willChange) > -1 || ["layout", "paint", "strict", "content"].indexOf(t2.contain) > -1 || t2.transform && "none" !== t2.transform || t2.perspective && "none" !== t2.perspective || t2.backdropFilter && "none" !== t2.backdropFilter;
}, fk = typeof document > "u", vk = () => fk || document.body.classList.contains("ui5-content-native-scrollbars") ? "" : "::-webkit-scrollbar:horizontal {\n	height: var(--sapScrollBar_Dimension);\n}\n\n::-webkit-scrollbar:vertical {\n	width: var(--sapScrollBar_Dimension);\n}\n\n::-webkit-scrollbar {\n	background-color: var(--sapScrollBar_TrackColor);\n	border-left: none;\n}\n\n::-webkit-scrollbar-thumb {\n	border-radius: var(--sapElement_BorderCornerRadius);\n	background-color: var(--sapScrollBar_FaceColor);\n}\n\n::-webkit-scrollbar-thumb:hover {\n	background-color: var(--sapScrollBar_Hover_FaceColor);\n}\n\n::-webkit-scrollbar-corner {\n	background-color: var(--sapScrollBar_TrackColor);\n}", Ak = (e6) => e6.parentElement ? e6.parentNode : e6.parentNode.host, bk = { toAttribute: (e6) => e6 instanceof HTMLElement ? null : e6, fromAttribute: (e6) => e6 }, yk = (e6) => "SLOT" !== e6.nodeName && (e6.offsetWidth <= 0 && e6.offsetHeight <= 0 || e6.style && "hidden" === e6.style.visibility), wk = /^(?:a|area)$/i, xk = /^(?:input|select|textarea|button)$/i, Ck = (e6) => {
  if (e6.disabled) return false;
  const t2 = e6.getAttribute("tabindex");
  return null != t2 ? parseInt(t2) >= 0 : xk.test(e6.nodeName) || wk.test(e6.nodeName) && !!e6.href;
}, Sk = (e6) => e6.hasAttribute("data-ui5-focus-trap"), Ek = async (e6, t2) => !e6 || yk(e6) ? null : Ik(e6, true), Tk = (e6) => e6.hasAttribute("data-ui5-focus-redirect") || !yk(e6), Ik = async (e6, t2, i2) => {
  let n2, o2, r2, s2 = -1;
  for (e6.shadowRoot ? n2 = t2 ? e6.shadowRoot.firstChild : e6.shadowRoot.lastChild : e6 instanceof HTMLSlotElement && e6.assignedNodes() ? (o2 = e6.assignedNodes(), s2 = t2 ? 0 : o2.length - 1, n2 = o2[s2]) : n2 = t2 ? e6.firstElementChild : e6.lastElementChild; n2; ) {
    const e7 = n2;
    if (xI(n2) && (n2 = await n2.getFocusDomRefAsync()), !n2) return null;
    if (1 === n2.nodeType && Tk(n2) && !Sk(n2)) {
      if (Ck(n2)) return n2 && "function" == typeof n2.focus ? n2 : null;
      if (r2 = await Ik(n2, t2), r2) return r2 && "function" == typeof r2.focus ? r2 : null;
    }
    n2 = t2 ? e7.nextSibling : e7.previousSibling, o2 && !o2[s2].contains(n2) && (s2 = t2 ? s2 + 1 : s2 - 1, n2 = o2[s2]);
  }
  return null;
};
let Mk;
const Bk = /* @__PURE__ */ new Map(), Rk = () => (Mk || (Mk = new window.ResizeObserver((e6) => {
  window.requestAnimationFrame(() => {
    e6.forEach((e7) => {
      const t2 = Bk.get(e7.target);
      t2 && Promise.all(t2.map((e8) => e8()));
    });
  });
})), Mk);
let kk = class {
  static register(e6, t2) {
    let i2 = e6;
    xI(i2) && (i2 = i2.getDomRef()), i2 instanceof HTMLElement ? ((e7, t3) => {
      const i3 = Bk.get(e7) || [];
      i3.length || Rk().observe(e7), Bk.set(e7, [...i3, t3]);
    })(i2, t2) : console.warn("Cannot register ResizeHandler for element", e6);
  }
  static deregister(e6, t2) {
    let i2 = e6;
    xI(i2) && (i2 = i2.getDomRef()), i2 instanceof HTMLElement ? ((e7, t3) => {
      const i3 = Bk.get(e7) || [];
      if (0 === i3.length) return;
      const n2 = i3.filter((e8) => e8 !== t3);
      0 === n2.length ? (Rk().unobserve(e7), Bk.delete(e7)) : Bk.set(e7, n2);
    })(i2, t2) : console.warn("Cannot deregister ResizeHandler for element", e6);
  }
};
const Pk = /* @__PURE__ */ new Map(), Dk = /* @__PURE__ */ new Map();
Dk.set("S", [0, 599]), Dk.set("M", [600, 1023]), Dk.set("L", [1024, 1439]), Dk.set("XL", [1440, 1 / 0]);
var Lk = ((e6) => (e6.RANGE_4STEPS = "4Step", e6))(Lk || {});
const Fk = { RANGESETS: Lk, initRangeSet: (e6, t2) => {
  Pk.set(e6, t2);
}, getCurrentRange: (e6, t2 = window.innerWidth) => {
  let i2, n2 = Pk.get(e6);
  n2 || (n2 = Pk.get("4Step"));
  const o2 = Math.floor(t2);
  return n2.forEach((e7, t3) => {
    o2 >= e7[0] && o2 <= e7[1] && (i2 = t3);
  }), i2 || [...n2.keys()][0];
} };
var Nk;
Fk.initRangeSet(Fk.RANGESETS.RANGE_4STEPS, Dk), function(e6) {
  e6.H1 = "H1", e6.H2 = "H2", e6.H3 = "H3", e6.H4 = "H4", e6.H5 = "H5", e6.H6 = "H6";
}(Nk || (Nk = {}));
const Ok = Nk;
function Uk(e6, t2, i2) {
  return NM`<h1 class="ui5-title-root"><span id="${FM(this._id)}-inner"><slot></slot></span></h1>`;
}
function zk(e6, t2, i2) {
  return NM`<h2 class="ui5-title-root"><span id="${FM(this._id)}-inner"><slot></slot></span></h2>`;
}
function Hk(e6, t2, i2) {
  return NM`<h3 class="ui5-title-root"><span id="${FM(this._id)}-inner"><slot></slot></span></h3>`;
}
function Qk(e6, t2, i2) {
  return NM`<h4 class="ui5-title-root"><span id="${FM(this._id)}-inner"><slot></slot></span></h4>`;
}
function Vk(e6, t2, i2) {
  return NM`<h5 class="ui5-title-root"><span id="${FM(this._id)}-inner"><slot></slot></span></h5>`;
}
function Gk(e6, t2, i2) {
  return NM`<h6 class="ui5-title-root"><span id="${FM(this._id)}-inner"><slot></slot></span></h6>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const qk = { packageName: "@ui5/webcomponents", fileName: "themes/Title.css.ts", content: ':host(:not([hidden])){display:block;cursor:text}:host{max-width:100%;color:var(--sapGroup_TitleTextColor);font-size:var(--sapFontHeader5Size);font-family:"72override",var(--sapFontHeaderFamily);text-shadow:var(--sapContent_TextShadow)}.ui5-title-root{display:inline-block;position:relative;font-weight:400;font-size:inherit;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;max-width:100%;vertical-align:bottom;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;margin:0;cursor:inherit}:host{white-space:pre-line}:host([wrapping-type="None"]){white-space:nowrap}.ui5-title-root,:host ::slotted(*){white-space:inherit}::slotted(*){font-size:inherit;font-family:inherit;text-shadow:inherit}:host([size="H1"]){font-size:var(--sapFontHeader1Size)}:host([size="H2"]){font-size:var(--sapFontHeader2Size)}:host([size="H3"]){font-size:var(--sapFontHeader3Size)}:host([size="H4"]){font-size:var(--sapFontHeader4Size)}:host([size="H5"]){font-size:var(--sapFontHeader5Size)}:host([size="H6"]){font-size:var(--sapFontHeader6Size)}\n' };
var $k = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let Wk = class extends wI {
  constructor() {
    super(...arguments), this.wrappingType = "Normal", this.level = "H2", this.size = "H5";
  }
  get h1() {
    return this.level === Ok.H1;
  }
  get h2() {
    return this.level === Ok.H2;
  }
  get h3() {
    return this.level === Ok.H3;
  }
  get h4() {
    return this.level === Ok.H4;
  }
  get h5() {
    return this.level === Ok.H5;
  }
  get h6() {
    return this.level === Ok.H6;
  }
};
$k([SI()], Wk.prototype, "wrappingType", void 0), $k([SI()], Wk.prototype, "level", void 0), $k([SI()], Wk.prototype, "size", void 0), Wk = $k([CI({ tag: "ui5-title", renderer: UM, template: function(e6, t2, i2) {
  return NM`${this.h1 ? Uk.call(this, e6, t2, i2) : void 0}${this.h2 ? zk.call(this, e6, t2, i2) : void 0}${this.h3 ? Hk.call(this, e6, t2, i2) : void 0}${this.h4 ? Qk.call(this, e6, t2, i2) : void 0}${this.h5 ? Vk.call(this, e6, t2, i2) : void 0}${this.h6 ? Gk.call(this, e6, t2, i2) : void 0}`;
}, styles: qk })], Wk), Wk.define();
const jk = Wk;
var Xk;
!function(e6) {
  e6.None = "None", e6.Dialog = "Dialog", e6.AlertDialog = "AlertDialog";
}(Xk || (Xk = {}));
const Yk = Xk, Kk = mC("OpenedPopupsRegistry", { openedRegistry: [] }), Zk = (e6, t2 = []) => {
  Kk.openedRegistry.some((t3) => t3.instance === e6) || Kk.openedRegistry.push({ instance: e6, parentPopovers: t2 }), nP(), 1 === Kk.openedRegistry.length && tP();
}, Jk = (e6) => {
  Kk.openedRegistry = Kk.openedRegistry.filter((t2) => t2.instance !== e6), nP(), Kk.openedRegistry.length || iP();
}, eP = (e6) => {
  Kk.openedRegistry.length && hM(e6) && (e6.stopPropagation(), Kk.openedRegistry[Kk.openedRegistry.length - 1].instance.closePopup(true));
}, tP = () => {
  document.addEventListener("keydown", eP);
}, iP = () => {
  document.removeEventListener("keydown", eP);
}, nP = () => {
  let e6, t2 = false;
  for (let i2 = Kk.openedRegistry.length - 1; i2 >= 0; i2--) e6 = Kk.openedRegistry[i2].instance, !t2 && e6.isModal ? (e6.isTopModalPopup = true, t2 = true) : e6.isTopModalPopup = false;
};
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const oP = { packageName: "@ui5/webcomponents", fileName: "themes/Popup.css.ts", content: ":host{min-width:1px;overflow:visible;border:none;inset:unset;margin:0;padding:0}\n" };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const rP = { packageName: "@ui5/webcomponents", fileName: "themes/PopupBlockLayer.css.ts", content: ".ui5-block-layer{position:fixed;z-index:-1;display:none;inset:-500px;outline:none;pointer-events:all}\n" };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const sP = { packageName: "@ui5/webcomponents", fileName: "themes/PopupGlobal.css.ts", content: ".ui5-popup-scroll-blocker{overflow:hidden}\n" };
var aP, lP = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
QS("data-ui5-popup-scroll-blocker") || zS(sP, "data-ui5-popup-scroll-blocker");
const cP = /* @__PURE__ */ new Set();
let hP = aP = class extends wI {
  constructor() {
    super(), this.preventFocusRestore = false, this.accessibleRole = "Dialog", this.preventInitialFocus = false, this.isTopModalPopup = false, this.onPhone = false, this.onDesktop = false, this._opened = false, this._open = false, this._resizeHandler = this._resize.bind(this), this._getRealDomRef = () => this.shadowRoot.querySelector("[root-element]");
  }
  onBeforeRendering() {
    this.onPhone = TE(), this.onDesktop = IE();
  }
  onAfterRendering() {
    LS().then(() => {
      this._updateMediaRange();
    });
  }
  onEnterDOM() {
    this.setAttribute("popover", "manual"), kk.register(this, this._resizeHandler), IE() && this.setAttribute("desktop", ""), this.tabIndex = -1, this.open && this.showPopover();
  }
  onExitDOM() {
    this._opened && (aP.unblockPageScrolling(this), this._removeOpenedPopup()), kk.deregister(this, this._resizeHandler);
  }
  set open(e6) {
    this._open !== e6 && (this._open = e6, e6 ? this.openPopup() : this.closePopup());
  }
  get open() {
    return this._open;
  }
  async openPopup() {
    if (this._opened) return;
    !this.fireDecoratorEvent("before-open", {}) || this._opened || (this._opened = true, this.isModal && aP.blockPageScrolling(this), this._focusedElementBeforeOpen = uk(), this._show(), this.getDomRef() && this._updateMediaRange(), this._addOpenedPopup(), this.open = true, await this.applyInitialFocus(), await LS(), await this.applyInitialFocus(), this.isConnected && this.fireDecoratorEvent("open", {}));
  }
  _resize() {
    this._updateMediaRange();
  }
  _preventBlockLayerFocus(e6) {
    e6.preventDefault();
  }
  static blockPageScrolling(e6) {
    cP.add(e6), 1 === cP.size && document.documentElement.classList.add("ui5-popup-scroll-blocker");
  }
  static unblockPageScrolling(e6) {
    cP.delete(e6), 0 === cP.size && document.documentElement.classList.remove("ui5-popup-scroll-blocker");
  }
  _scroll(e6) {
    this.fireDecoratorEvent("scroll", { scrollTop: e6.target.scrollTop, targetRef: e6.target });
  }
  _onkeydown(e6) {
    const t2 = e6.target === this._root && dM(e6), i2 = WI(e6) && !this.open;
    (t2 || i2) && e6.preventDefault();
  }
  _onfocusout(e6) {
    e6.relatedTarget || (this._shouldFocusRoot = true);
  }
  _onmousedown(e6) {
    this.shadowRoot.contains(e6.target) ? this._shouldFocusRoot = true : this._shouldFocusRoot = false;
  }
  _onmouseup() {
    this._shouldFocusRoot && (AE.chrome && this._root.focus(), this._shouldFocusRoot = false);
  }
  async forwardToFirst() {
    const e6 = await Ek(this);
    e6 ? e6.focus() : this._root.focus();
  }
  async forwardToLast() {
    const e6 = await (async (e7) => !e7 || yk(e7) ? null : Ik(e7, false))(this);
    e6 ? e6.focus() : this._root.focus();
  }
  async applyInitialFocus() {
    this.preventInitialFocus || await this.applyFocus();
  }
  async applyFocus() {
    if (this.querySelector("[autofocus]")) return;
    if (await this._waitForDomRef(), this.getRootNode() === this) return;
    let e6;
    this.initialFocus && (e6 = this.getRootNode().getElementById(this.initialFocus) || document.getElementById(this.initialFocus)), e6 = e6 || await Ek(this) || this._root, e6 && (e6 === this._root && (e6.tabIndex = -1), e6.focus());
  }
  isFocusWithin() {
    return ((e6) => {
      const t2 = uk();
      return !!t2 && dk(e6, t2);
    })(this._root);
  }
  _updateMediaRange() {
    this.mediaRange = Fk.getCurrentRange(Fk.RANGESETS.RANGE_4STEPS, this.getDomRef().offsetWidth);
  }
  _addOpenedPopup() {
    Zk(this);
  }
  closePopup(e6 = false, t2 = false, i2 = false) {
    if (!this._opened) return;
    !this.fireDecoratorEvent("before-close", { escPressed: e6 }) || (this._opened = false, this.isModal && aP.unblockPageScrolling(this), this.hide(), this.open = false, t2 || this._removeOpenedPopup(), this.preventFocusRestore || i2 || this.resetFocus(), this.fireDecoratorEvent("close", {}));
  }
  _removeOpenedPopup() {
    Jk(this);
  }
  resetFocus() {
    this._focusedElementBeforeOpen && (this._focusedElementBeforeOpen.focus(), this._focusedElementBeforeOpen = null);
  }
  _show() {
    this.isConnected && (this.setAttribute("popover", "manual"), this.showPopover());
  }
  hide() {
    this.isConnected && this.hidePopover();
  }
  get _ariaLabel() {
    return cR(this);
  }
  get _root() {
    return this.shadowRoot.querySelector(".ui5-popup-root");
  }
  get _role() {
    return this.accessibleRole === Yk.None ? void 0 : this.accessibleRole.toLowerCase();
  }
  get _ariaModal() {
    return this.accessibleRole === Yk.None ? void 0 : "true";
  }
  get contentDOM() {
    return this.shadowRoot.querySelector(".ui5-popup-content");
  }
  get styles() {
    return { root: {}, content: {} };
  }
  get classes() {
    return { root: { "ui5-popup-root": true }, content: { "ui5-popup-content": true } };
  }
};
lP([SI()], hP.prototype, "initialFocus", void 0), lP([SI({ type: Boolean })], hP.prototype, "preventFocusRestore", void 0), lP([SI()], hP.prototype, "accessibleName", void 0), lP([SI()], hP.prototype, "accessibleNameRef", void 0), lP([SI()], hP.prototype, "accessibleRole", void 0), lP([SI()], hP.prototype, "mediaRange", void 0), lP([SI({ type: Boolean })], hP.prototype, "preventInitialFocus", void 0), lP([SI({ type: Boolean, noAttribute: true })], hP.prototype, "isTopModalPopup", void 0), lP([TI({ type: HTMLElement, default: true })], hP.prototype, "content", void 0), lP([SI({ type: Boolean })], hP.prototype, "onPhone", void 0), lP([SI({ type: Boolean })], hP.prototype, "onDesktop", void 0), lP([SI({ type: Boolean })], hP.prototype, "open", null), hP = aP = lP([CI({ renderer: UM, styles: [oP, rP], template: function(e6, t2, i2) {
  return NM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${LM(this.styles.root)}" class="${DM(this.classes.root)}" role="${FM(this._role)}" aria-modal="${FM(this._ariaModal)}" aria-label="${FM(this._ariaLabel)}" aria-labelledby="${FM(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><div style="${LM(this.styles.content)}" class="${DM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div><span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`;
}, dependencies: [jk] }), EI("before-open", { cancelable: true }), EI("open"), EI("before-close", { detail: { escPressed: { type: Boolean } }, cancelable: true }), EI("close"), EI("scroll", { bubbles: true })], hP);
const uP = hP;
var dP;
!function(e6) {
  e6.Start = "Start", e6.End = "End", e6.Top = "Top", e6.Bottom = "Bottom";
}(dP || (dP = {}));
const pP = dP;
var _P;
!function(e6) {
  e6.Center = "Center", e6.Top = "Top", e6.Bottom = "Bottom", e6.Stretch = "Stretch";
}(_P || (_P = {}));
const gP = _P;
var mP;
!function(e6) {
  e6.Center = "Center", e6.Start = "Start", e6.End = "End", e6.Stretch = "Stretch";
}(mP || (mP = {}));
const fP = mP;
let vP;
const AP = [], bP = () => {
  AP.forEach((e6) => {
    e6.instance.reposition();
  });
}, yP = () => {
  vP = setInterval(() => {
    bP(), "IFRAME" === wM().tagName && SP().reverse().forEach((e6) => e6.instance.closePopup(false, false, true));
  }, 300);
}, wP = (e6) => {
  const t2 = [...Kk.openedRegistry];
  if (0 === t2.length) return;
  if (NP(t2[t2.length - 1].instance)) for (let i2 = t2.length - 1; -1 !== i2; i2--) {
    const n2 = t2[i2].instance;
    if (n2.isModal || n2.isOpenerClicked(e6)) return;
    if (pk(e6, n2.getBoundingClientRect())) break;
    n2.closePopup();
  }
}, xP = (e6) => {
  const t2 = EP(e6);
  var i2;
  Zk(e6, t2), AP.push({ instance: e6, parentPopovers: t2 }), (i2 = e6) && i2.shadowRoot.addEventListener("scroll", bP, { capture: true }), 1 === AP.length && (document.addEventListener("scroll", bP, { capture: true }), document.addEventListener("mousedown", wP), yP());
}, CP = (e6) => {
  const t2 = [e6];
  for (let i3 = 0; i3 < AP.length; i3++) {
    const n2 = AP[i3].parentPopovers.indexOf(e6);
    AP[i3].parentPopovers.length > 0 && n2 > -1 && t2.push(AP[i3].instance);
  }
  for (let e7 = t2.length - 1; e7 >= 0; e7--) for (let n2 = 0; n2 < AP.length; n2++) {
    let o2 = -1;
    if (t2[e7] === AP[n2].instance && (o2 = n2), o2 >= 0) {
      Jk(AP[o2].instance), (i2 = AP[o2].instance) && i2.shadowRoot.removeEventListener("scroll", bP, { capture: true });
      AP.splice(o2, 1)[0].instance.closePopup(false, true);
    }
  }
  var i2;
  AP.length || (document.removeEventListener("scroll", bP, { capture: true }), document.removeEventListener("mousedown", wP), clearInterval(vP));
}, SP = () => AP, EP = (e6) => {
  let t2 = e6.parentNode;
  const i2 = [];
  for (; t2 && t2.parentNode; ) {
    for (let e7 = 0; e7 < AP.length; e7++) t2 === AP[e7].instance && i2.push(t2);
    t2 = t2.parentNode;
  }
  return i2;
};
function TP(e6, t2, i2) {
  return NM`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length ? IP.call(this, e6, t2, i2) : MP.call(this, e6, t2, i2)}</header>`;
}
function IP(e6, t2, i2) {
  return NM`<slot name="header"></slot>`;
}
function MP(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-title", t2, i2)} level="H1" class="ui5-popup-header-text">${FM(this.headerText)}</${zM("ui5-title", t2, i2)}>` : NM`<ui5-title level="H1" class="ui5-popup-header-text">${FM(this.headerText)}</ui5-title>`;
}
function BP(e6, t2, i2) {
  return NM`${this.footer.length ? RP.call(this, e6, t2, i2) : void 0}`;
}
function RP(e6, t2, i2) {
  return NM`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const kP = { packageName: "@ui5/webcomponents", fileName: "themes/PopupsCommon.css.ts", content: ':host{position:fixed;background:var(--sapGroup_ContentBackground);border-radius:var(--_ui5-v2-4-0_popup_border_radius);min-height:2rem;box-sizing:border-box}:host([open]){display:flex}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;flex:1 1 auto;outline:none}.ui5-popup-root .ui5-popup-header-root{color:var(--sapPageHeader_TextColor);box-shadow:var(--_ui5-v2-4-0_popup_header_shadow);border-bottom:var(--_ui5-v2-4-0_popup_header_border)}.ui5-popup-content{color:var(--sapTextColor);flex:auto}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-header-root,.ui5-popup-footer-root,:host([header-text]) .ui5-popup-header-text{margin:0;display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--_ui5-v2-4-0_popup_header_font_weight)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{min-height:var(--_ui5-v2-4-0_popup_default_header_height);max-height:var(--_ui5-v2-4-0_popup_default_header_height);line-height:var(--_ui5-v2-4-0_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([no-scrolling]) .ui5-popup-content{overflow:hidden}:host([media-range="S"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_s)}:host([media-range="M"]) .ui5-popup-content,:host([media-range="L"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_m_l)}:host([media-range="XL"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--_ui5-v2-4-0_popup_header_background)}:host([media-range="S"]) .ui5-popup-header-root,:host([media-range="S"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_s);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_s)}:host([media-range="M"]) .ui5-popup-header-root,:host([media-range="L"]) .ui5-popup-header-root,:host([media-range="M"]) .ui5-popup-footer-root,:host([media-range="L"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l)}:host([media-range="XL"]) .ui5-popup-header-root,:host([media-range="XL"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_xl);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_xl)}\n' };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const PP = { packageName: "@ui5/webcomponents", fileName: "themes/Popover.css.ts", content: ':host{box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);background-color:var(--_ui5-v2-4-0_popover_background);max-width:calc(100vw - (100vw - 100%) - 2 * var(--_ui5-v2-4-0_popup_viewport_margin))}:host([hide-arrow]){box-shadow:var(--_ui5-v2-4-0_popover_no_arrow_box_shadow)}:host([opened][actual-placement="Top"]){margin-top:var(--_ui5-v2-4-0-popover-margin-bottom)}:host([opened][actual-placement="Bottom"]){margin-top:var(--_ui5-v2-4-0-popover-margin-top)}:host([actual-placement="Bottom"]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5rem}:host([actual-placement="Bottom"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_upward_arrow_margin)}:host([actual-placement="Start"]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement="Start"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_right_arrow_margin)}:host([actual-placement="Top"]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement="Top"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_downward_arrow_margin)}:host(:not([actual-placement])) .ui5-popover-arrow,:host([actual-placement="End"]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement])) .ui5-popover-arrow:after,:host([actual-placement="End"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_left_arrow_margin)}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}.ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:"";display:block;width:.7rem;height:.7rem;background-color:var(--_ui5-v2-4-0_popover_background);box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);transform:rotate(-45deg)}:host([modal])::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}:host([modal]) .ui5-block-layer{display:block}\n' };
var DP, LP = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let FP = DP = class extends uP {
  static get VIEWPORT_MARGIN() {
    return 10;
  }
  constructor() {
    super(), this.placement = "End", this.horizontalAlign = "Center", this.verticalAlign = "Center", this.modal = false, this.hideArrow = false, this.allowTargetOverlap = false, this.disableScrolling = false, this.arrowTranslateX = 0, this.arrowTranslateY = 0, this.actualPlacement = "End";
  }
  set opener(e6) {
    this._opener !== e6 && (this._opener = e6, e6 && this.open && this.openPopup());
  }
  get opener() {
    return this._opener;
  }
  async openPopup() {
    if (this._opened) return;
    const e6 = this.getOpenerHTMLElement(this.opener);
    if (e6) {
      if (this.isOpenerOutsideViewport(e6.getBoundingClientRect())) return await LS(), this.open = false, void this.fireDecoratorEvent("close");
      this._openerRect = e6.getBoundingClientRect(), await super.openPopup();
    } else console.warn("Valid opener id is required. It must be defined before opening the popover.");
  }
  isOpenerClicked(e6) {
    const t2 = e6.target;
    if (t2 === this._opener) return true;
    const i2 = t2;
    return !(!i2.getFocusDomRef || i2.getFocusDomRef() !== this._opener) || e6.composedPath().indexOf(this._opener) > -1;
  }
  _addOpenedPopup() {
    xP(this);
  }
  _removeOpenedPopup() {
    CP(this);
  }
  getOpenerHTMLElement(e6) {
    if (void 0 === e6 || e6 instanceof HTMLElement) return e6;
    const t2 = this.getRootNode();
    return t2 instanceof Document ? t2.getElementById(e6) : document.getElementById(e6);
  }
  shouldCloseDueToOverflow(e6, t2) {
    const i2 = { Start: t2.right, End: t2.left, Top: t2.top, Bottom: t2.bottom }, n2 = this.getOpenerHTMLElement(this.opener), o2 = _k(n2);
    let r2 = false, s2 = false;
    if (o2 instanceof DP) {
      const e7 = o2.contentDOM.getBoundingClientRect();
      r2 = t2.top > e7.top + e7.height, s2 = t2.top + t2.height < e7.top;
    }
    return i2[e6] < 0 || i2[e6] + 32 > o2.innerHeight || r2 || s2;
  }
  shouldCloseDueToNoOpener(e6) {
    return 0 === e6.top && 0 === e6.bottom && 0 === e6.left && 0 === e6.right;
  }
  isOpenerOutsideViewport(e6) {
    return e6.bottom < 0 || e6.top > window.innerHeight || e6.right < 0 || e6.left > window.innerWidth;
  }
  _resize() {
    super._resize(), this.open && this.reposition();
  }
  reposition() {
    this._show();
  }
  async _show() {
    super._show();
    const e6 = this.getOpenerHTMLElement(this.opener);
    if (e6 && this._isUI5Element(e6) && !e6.getDomRef()) return;
    this._opened || this._showOutsideViewport();
    const t2 = this.getPopoverSize();
    let i2;
    if (0 === t2.width || 0 === t2.height) return;
    if (this.open && (this._openerRect = e6.getBoundingClientRect()), i2 = this._oldPlacement && this.shouldCloseDueToNoOpener(this._openerRect) && this.isFocusWithin() ? this._oldPlacement : this.calcPlacement(this._openerRect, t2), this._preventRepositionAndClose || this.isOpenerOutsideViewport(this._openerRect)) return await this._waitForDomRef(), this.closePopup();
    this._oldPlacement = i2, this.actualPlacement = i2.placement;
    let n2 = gk(this._left, DP.VIEWPORT_MARGIN, document.documentElement.clientWidth - t2.width - DP.VIEWPORT_MARGIN);
    this.actualPlacement === pP.End && (n2 = Math.max(n2, this._left));
    let o2 = gk(this._top, DP.VIEWPORT_MARGIN, document.documentElement.clientHeight - t2.height - DP.VIEWPORT_MARGIN);
    this.actualPlacement === pP.Bottom && (o2 = Math.max(o2, this._top)), this.arrowTranslateX = i2.arrow.x, this.arrowTranslateY = i2.arrow.y, o2 = this._adjustForIOSKeyboard(o2), Object.assign(this.style, { top: `${o2}px`, left: `${n2}px` }), this.horizontalAlign === fP.Stretch && this._width && (this.style.width = this._width), this.verticalAlign === gP.Stretch && this._height && (this.style.height = this._height);
  }
  _adjustForIOSKeyboard(e6) {
    if (!ME()) return e6;
    const t2 = Math.ceil(this.getBoundingClientRect().top);
    return e6 + (Number.parseInt(this.style.top || "0") - t2);
  }
  _getContainingBlockClientLocation() {
    let e6 = Ak(this);
    for (; e6; ) {
      if (mk(e6)) return e6.getBoundingClientRect();
      e6 = Ak(e6);
    }
    return { left: 0, top: 0 };
  }
  getPopoverSize() {
    const e6 = this.getBoundingClientRect();
    return { width: e6.width, height: e6.height };
  }
  _showOutsideViewport() {
    Object.assign(this.style, { top: "-10000px", left: "-10000px" });
  }
  _isUI5Element(e6) {
    return "isUI5Element" in e6;
  }
  get arrowDOM() {
    return this.shadowRoot.querySelector(".ui5-popover-arrow");
  }
  calcPlacement(e6, t2) {
    let i2 = DP.VIEWPORT_MARGIN, n2 = 0;
    const o2 = this.allowTargetOverlap, r2 = document.documentElement.clientWidth, s2 = document.documentElement.clientHeight;
    let a2 = s2, l2 = r2;
    const c2 = this.getActualPlacement(e6, t2);
    this._preventRepositionAndClose = this.shouldCloseDueToNoOpener(e6) || this.shouldCloseDueToOverflow(c2, e6);
    const h2 = c2 === pP.Top || c2 === pP.Bottom;
    this.horizontalAlign === fP.Stretch && h2 ? (t2.width = e6.width, this._width = `${e6.width}px`) : this.verticalAlign !== gP.Stretch || h2 || (t2.height = e6.height, this._height = `${e6.height}px`);
    const u2 = this.hideArrow ? 0 : 8;
    switch (c2) {
      case pP.Top:
        i2 = this.getVerticalLeft(e6, t2), n2 = Math.max(e6.top - t2.height - u2, 0), o2 || (a2 = e6.top - u2);
        break;
      case pP.Bottom:
        i2 = this.getVerticalLeft(e6, t2), n2 = e6.bottom + u2, o2 ? n2 = Math.max(Math.min(n2, s2 - t2.height), 0) : a2 = s2 - e6.bottom - u2;
        break;
      case pP.Start:
        i2 = Math.max(e6.left - t2.width - u2, 0), n2 = this.getHorizontalTop(e6, t2), o2 || (l2 = e6.left - u2);
        break;
      case pP.End:
        i2 = e6.left + e6.width + u2, n2 = this.getHorizontalTop(e6, t2), o2 ? i2 = Math.max(Math.min(i2, r2 - t2.width), 0) : l2 = r2 - e6.right - u2;
    }
    h2 ? t2.width > r2 || i2 < DP.VIEWPORT_MARGIN ? i2 = DP.VIEWPORT_MARGIN : i2 + t2.width > r2 - DP.VIEWPORT_MARGIN && (i2 = r2 - DP.VIEWPORT_MARGIN - t2.width) : t2.height > s2 || n2 < DP.VIEWPORT_MARGIN ? n2 = DP.VIEWPORT_MARGIN : n2 + t2.height > s2 - DP.VIEWPORT_MARGIN && (n2 = s2 - DP.VIEWPORT_MARGIN - t2.height), this._maxHeight = Math.round(a2 - DP.VIEWPORT_MARGIN), this._maxWidth = Math.round(l2 - DP.VIEWPORT_MARGIN), (void 0 === this._left || Math.abs(this._left - i2) > 1.5) && (this._left = Math.round(i2)), (void 0 === this._top || Math.abs(this._top - n2) > 1.5) && (this._top = Math.round(n2));
    const d2 = Number.parseInt(window.getComputedStyle(this).getPropertyValue("border-radius"));
    return { arrow: this.getArrowPosition(e6, t2, i2, n2, h2, d2), top: this._top, left: this._left, placement: c2 };
  }
  getArrowPosition(e6, t2, i2, n2, o2, r2) {
    const s2 = this._actualHorizontalAlign;
    let a2 = s2 === fP.Center || s2 === fP.Stretch;
    s2 === fP.End && i2 <= e6.left && (a2 = true), s2 === fP.Start && i2 + t2.width >= e6.left + e6.width && (a2 = true);
    let l2 = 0;
    o2 && a2 && (l2 = e6.left + e6.width / 2 - i2 - t2.width / 2);
    let c2 = 0;
    o2 || (c2 = e6.top + e6.height / 2 - n2 - t2.height / 2);
    const h2 = t2.height / 2 - r2 - 4;
    c2 = gk(c2, -h2, h2);
    const u2 = t2.width / 2 - r2 - 4;
    return l2 = gk(l2, -u2, u2), { x: Math.round(l2), y: Math.round(c2) };
  }
  fallbackPlacement(e6, t2, i2, n2) {
    return i2.left > n2.width ? pP.Start : e6 - i2.right > i2.left ? pP.End : t2 - i2.bottom > n2.height ? pP.Bottom : t2 - i2.bottom < i2.top ? pP.Top : void 0;
  }
  getActualPlacement(e6, t2) {
    const i2 = this.placement;
    let n2 = i2;
    const o2 = document.documentElement.clientWidth, r2 = document.documentElement.clientHeight;
    switch (i2) {
      case pP.Top:
        e6.top < t2.height && e6.top < r2 - e6.bottom && (n2 = pP.Bottom);
        break;
      case pP.Bottom:
        r2 - e6.bottom < t2.height && r2 - e6.bottom < e6.top && (n2 = pP.Top);
        break;
      case pP.Start:
        e6.left < t2.width && (n2 = this.fallbackPlacement(o2, r2, e6, t2) || i2);
        break;
      case pP.End:
        o2 - e6.right < t2.width && (n2 = this.fallbackPlacement(o2, r2, e6, t2) || i2);
    }
    return n2;
  }
  getVerticalLeft(e6, t2) {
    const i2 = this._actualHorizontalAlign;
    let n2 = DP.VIEWPORT_MARGIN;
    switch (i2) {
      case fP.Center:
      case fP.Stretch:
        n2 = e6.left - (t2.width - e6.width) / 2;
        break;
      case fP.Start:
        n2 = e6.left;
        break;
      case fP.End:
        n2 = e6.right - t2.width;
    }
    return n2;
  }
  getHorizontalTop(e6, t2) {
    let i2 = 0;
    switch (this.verticalAlign) {
      case gP.Center:
      case gP.Stretch:
        i2 = e6.top - (t2.height - e6.height) / 2;
        break;
      case gP.Top:
        i2 = e6.top;
        break;
      case gP.Bottom:
        i2 = e6.bottom - t2.height;
    }
    return i2;
  }
  get isModal() {
    return this.modal;
  }
  get _ariaLabelledBy() {
    if (!this._ariaLabel && this._displayHeader) return "ui5-popup-header";
  }
  get styles() {
    return { ...super.styles, root: { "max-height": this._maxHeight ? `${this._maxHeight}px` : "", "max-width": this._maxWidth ? `${this._maxWidth}px` : "" }, arrow: { transform: `translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)` } };
  }
  get classes() {
    const e6 = super.classes;
    return e6.root["ui5-popover-root"] = true, e6;
  }
  get _displayHeader() {
    return !(!this.header.length && !this.headerText);
  }
  get _displayFooter() {
    return true;
  }
  get _actualHorizontalAlign() {
    if ("rtl" === this.effectiveDir) {
      if (this.horizontalAlign === fP.Start) return fP.End;
      if (this.horizontalAlign === fP.End) return fP.Start;
    }
    return this.horizontalAlign;
  }
};
LP([SI()], FP.prototype, "headerText", void 0), LP([SI()], FP.prototype, "placement", void 0), LP([SI()], FP.prototype, "horizontalAlign", void 0), LP([SI()], FP.prototype, "verticalAlign", void 0), LP([SI({ type: Boolean })], FP.prototype, "modal", void 0), LP([SI({ type: Boolean })], FP.prototype, "hideArrow", void 0), LP([SI({ type: Boolean })], FP.prototype, "allowTargetOverlap", void 0), LP([SI({ type: Boolean })], FP.prototype, "disableScrolling", void 0), LP([SI({ type: Number, noAttribute: true })], FP.prototype, "arrowTranslateX", void 0), LP([SI({ type: Number, noAttribute: true })], FP.prototype, "arrowTranslateY", void 0), LP([SI()], FP.prototype, "actualPlacement", void 0), LP([SI({ type: Number, noAttribute: true })], FP.prototype, "_maxHeight", void 0), LP([SI({ type: Number, noAttribute: true })], FP.prototype, "_maxWidth", void 0), LP([TI({ type: HTMLElement })], FP.prototype, "header", void 0), LP([TI({ type: HTMLElement })], FP.prototype, "footer", void 0), LP([SI({ converter: bk })], FP.prototype, "opener", null), FP = DP = LP([CI({ tag: "ui5-popover", styles: [uP.styles, kP, PP, vk()], template: function(e6, t2, i2) {
  return NM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${LM(this.styles.root)}" class="${DM(this.classes.root)}" role="${FM(this._role)}" aria-modal="${FM(this._ariaModal)}" aria-label="${FM(this._ariaLabel)}" aria-labelledby="${FM(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${LM(this.styles.arrow)}"></span>${this._displayHeader ? TP.call(this, e6, t2, i2) : void 0}<div style="${LM(this.styles.content)}" class="${DM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter ? BP.call(this, e6, t2, i2) : void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `;
} })], FP);
const NP = (e6) => "opener" in e6;
FP.define();
const OP = FP;
var UP = Object.defineProperty, zP = Object.getOwnPropertyDescriptor, HP = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? zP(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && UP(t2, i2, r2), r2;
};
let QP = class extends le {
  constructor() {
    super(...arguments), this.isColumnMode = false;
  }
  render() {
    return U`
      <div
        id="toolBar"
        class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}"
      >
        <div
          id="btnBar"
          class="${this.isColumnMode ? "hor-orientation" : "ver-orientation"}"
        >
          <slot @slotchange=${this._handleSlotChange}></slot>
        </pv-tool-area>
      </div>
    `;
  }
  _handleSlotChange(e6) {
    console.log("Slot changed", e6);
  }
};
QP.styles = r`
    :host {
      max-height: 100%;
      max-width: 100%;
      --size: 13.5rem;
    }

    #btnBar.hor-orientation{
      width: 100%;
      flex-direction: row;
    }

    #btnBar.ver-orientation{
      height: 100%;
      flex-direction: column;
    }

    #btnBar
    {
      display: flex;
      gap: 0.25rem;
      pointer-events: auto;
    }

    #toolBar.hor-orientation{
      width: calc(100% - 1rem);
      height: var(--size);
      flex-direction: row;
    }

    #toolBar.ver-orientation{
      height: calc(100% - 1rem);
      width: var(--size);
      flex-direction: column;
    }

    #toolBar {
      display: flex;
      gap: 0.5625rem;
      left: 0.5rem;
      top: 0.5rem;
      position: absolute;
      pointer-events: none;
    }

    #toolBar.hor-orientation pv-tool-area{
      height: 100%;
    }

    #toolBar.ver-orientation pv-tool-area{
      width: 100%;
    }

    ui5-toggle-button{
      height: 2.5rem;
      width: 2.5rem;
    }

    ui5-toggle-button ui5-icon{
      height: 85%;
      width: 85%;
    }

    ui5-icon {
      stroke:black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%)
    }
  `, HP([de({ type: Boolean })], QP.prototype, "isColumnMode", 2), QP = HP([he("pv-menu")], QP);
var VP = Object.defineProperty, GP = Object.getOwnPropertyDescriptor, qP = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? GP(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && VP(t2, i2, r2), r2;
};
let $P = class extends le {
  constructor() {
    super(...arguments), this.title = "", this.icon = "", this.idx = 0;
  }
  render() {
    return U`
      <ui5-button
        data-index=${this.idx}
        tooltip=${this.title}
        id="tool-button"
        @click="${this._togglePopover}"
        icon=${this.icon}
      >
      </ui5-button>
      <ui5-popover id="tool-popover" header-text="${this.title}">
        <slot></slot>
      </ui5-popover>
    `;
  }
  _togglePopover() {
    null !== this.toolPopover ? (void 0 === this.toolPopover.opener && (this.toolPopover.opener = this.toolButton), this.toolPopover.open = !this.toolPopover.open) : console.warn("Popover not found.");
  }
  updated(e6) {
    super.updated(e6);
  }
};
$P.styles = r`
    :host {
      max-height: 100%;
      max-width: 100%;
    }
  `, qP([de()], $P.prototype, "title", 2), qP([de()], $P.prototype, "icon", 2), qP([de()], $P.prototype, "idx", 2), qP([pe("#tool-popover")], $P.prototype, "toolPopover", 2), qP([pe("#tool-button")], $P.prototype, "toolButton", 2), $P = qP([he("pv-menu-item")], $P), KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const WP = { packageName: "@ui5/webcomponents", fileName: "themes/Label.css.ts", content: ':host(:not([hidden])){display:inline-flex}:host{max-width:100%;color:var(--sapContent_LabelColor);font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;cursor:text}.ui5-label-root{width:100%;cursor:inherit}:host{white-space:normal}:host([wrapping-type="None"]){white-space:nowrap}:host([wrapping-type="None"]) .ui5-label-root{display:inline-flex}:host([wrapping-type="None"]) .ui5-label-text-wrapper{text-overflow:ellipsis;overflow:hidden;display:inline-block;vertical-align:top;flex:0 1 auto;min-width:0}:host([show-colon]) .ui5-label-required-colon:before{content:attr(data-colon)}:host([required]) .ui5-label-required-colon:after{content:"*";color:var(--sapField_RequiredColor);font-size:1.25rem;font-weight:700;position:relative;font-style:normal;vertical-align:middle;line-height:0}.ui5-label-text-wrapper{padding-inline-end:.075rem}:host([required][show-colon]) .ui5-label-required-colon:after{margin-inline-start:.125rem}:host([show-colon]) .ui5-label-required-colon{margin-inline-start:-.05rem;white-space:pre}\n' };
var jP, XP = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let YP = jP = class extends wI {
  constructor() {
    super(...arguments), this.showColon = false, this.required = false, this.wrappingType = "Normal";
  }
  _onclick() {
    if (!this.for) return;
    const e6 = this.getRootNode().querySelector(`[id="${this.for}"]`);
    e6 && e6.focus();
  }
  get _colonSymbol() {
    return jP.i18nBundle.getText(eR);
  }
};
XP([SI()], YP.prototype, "for", void 0), XP([SI({ type: Boolean })], YP.prototype, "showColon", void 0), XP([SI({ type: Boolean })], YP.prototype, "required", void 0), XP([SI()], YP.prototype, "wrappingType", void 0), XP([HM("@ui5/webcomponents")], YP, "i18nBundle", void 0), YP = jP = XP([CI({ tag: "ui5-label", renderer: UM, template: function(e6, t2, i2) {
  return NM`<label class="ui5-label-root" @click=${this._onclick}><span class="ui5-label-text-wrapper"><slot></slot></span><span aria-hidden="true" class="ui5-label-required-colon" data-colon="${FM(this._colonSymbol)}"></span></label>`;
}, styles: WP, languageAware: true })], YP), YP.define();
const KP = YP;
var ZP = ((e6) => (e6.None = "None", e6.Positive = "Positive", e6.Critical = "Critical", e6.Negative = "Negative", e6.Information = "Information", e6))(ZP || {});
CT("accept", { pathData: "M456 94q5 5 5 11 0 4-2 8L237 439q-4 8-8.5 8.5t-5.5.5q-7 0-12-5L60 276q-5-5-5-10l.5-3.5L61 254l25-25q6-6 12-6t11 6l96 96q5 5 12 5l4.5-.5 8.5-8.5L405 72q4-7 8.5-7.5t5.5-.5q6 0 11 4z", ltr: true, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("accept", { pathData: "M187 416q-12 0-20-9L71 299q-7-7-7-17 0-11 7.5-18.5T90 256q12 0 19 9l77 87 217-247q8-9 19-9t18.5 7.5T448 122q0 10-6 16L206 407q-7 9-19 9z", ltr: true, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("complete", { pathData: "M492 25q4 4 4 9 0 3-2 7L309 313q-3 6-7 6.5t-5 .5q-6 0-10-4L162 177q-4-5-4-9 0-5 4-9l21-21q5-5 10-5t9 5l80 80q4 4 9 4 1 0 5-.5t7-7.5L449 7q3-6 7-6.5t5-.5q5 0 9 4zm-60 295h32v128q0 14-9.5 23t-22.5 9H48q-14 0-23-9t-9-23V64q0-13 9-22.5T48 32h128v32H48v384h384V320z", ltr: true, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("complete", { pathData: "M438 224q11 0 18.5 7.5T464 250v140q0 38-26 64t-64 26H106q-38 0-64-26t-26-64V122q0-38 26-64t64-26h237q11 0 18 7.5t7 18.5-7 18-18 7H106q-16 0-27.5 11.5T67 122v268q0 16 11.5 27.5T106 429h268q16 0 27.5-11.5T413 390V250q0-11 7-18.5t18-7.5zm32-192q11 0 18.5 7.5T496 58t-7 17L257 312q-6 8-18 8-10 0-18-8l-70-71q-7-7-7-18t7.5-18 18.5-7 18 7l51 53L452 40q8-8 18-8z", ltr: true, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("border", { pathData: "M448 32q13 0 22.5 9t9.5 23v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-14 9-23t23-9h384zm0 32H64v384h384V64z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("border", { pathData: "M390 480H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268q38 0 64 26t26 64v268q0 38-26 64t-64 26zM122 83q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122q0-17-11-28t-28-11H122z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("tri-state", { pathData: "M448 32q13 0 22.5 9.5T480 64v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-13 9-22.5T64 32h384zm0 32H64v384h384V64zM160 345V169q0-8 8-8h176q8 0 8 8v176q0 8-8 8H168q-8 0-8-8z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("tri-state", { pathData: "M390 32q38 0 64 26t26 64v268q0 38-26 64t-64 26H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268zm39 90q0-17-11-28t-28-11H122q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122zm-77 38v192H160V160h192z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const JP = { packageName: "@ui5/webcomponents", fileName: "themes/CheckBox.css.ts", content: '.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host(:not([hidden])){display:inline-block}:host{overflow:hidden;max-width:100%;outline:none;border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);transition:var(--_ui5-v2-4-0_checkbox_transition);cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host([disabled]){cursor:default}:host([disabled]) .ui5-checkbox-root{opacity:var(--_ui5-v2-4-0_checkbox_disabled_opacity)}:host([disabled]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_disabled_border_color)}:host([disabled]) .ui5-checkbox-label{color:var(--_ui5-v2-4-0_checkbox_disabled_label_color)}:host([readonly]:not([value-state="Critical"]):not([value-state="Negative"])) .ui5-checkbox-inner{background:var(--sapField_ReadOnly_Background);border:var(--_ui5-v2-4-0_checkbox_inner_readonly_border);color:var(--sapField_TextColor)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root{min-height:auto;box-sizing:border-box;align-items:flex-start;padding-top:var(--_ui5-v2-4-0_checkbox_root_side_padding);padding-bottom:var(--_ui5-v2-4-0_checkbox_root_side_padding)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root .ui5-checkbox-label{overflow-wrap:break-word;align-self:center}:host([desktop][text]:not([wrapping-type="None"])) .ui5-checkbox-root:focus:before,.ui5-checkbox-root[text]:focus-visible:before{inset-block:var(--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block)}:host([value-state="Negative"]) .ui5-checkbox-inner,:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InvalidBackground);border:var(--_ui5-v2-4-0_checkbox_inner_error_border);color:var(--sapField_InvalidColor)}:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_error_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-inner,:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_WarningBackground);border:var(--_ui5-v2-4-0_checkbox_inner_warning_border);color:var(--_ui5-v2-4-0_checkbox_inner_warning_color)}:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_warning_background_hover)}:host([value-state="Information"]) .ui5-checkbox-inner,:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InformationBackground);border:var(--_ui5-v2-4-0_checkbox_inner_information_border);color:var(--_ui5-v2-4-0_checkbox_inner_information_color)}:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_information_background_hover)}:host([value-state="Positive"]) .ui5-checkbox-inner,:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_SuccessBackground);border:var(--_ui5-v2-4-0_checkbox_inner_success_border);color:var(--sapField_SuccessColor)}:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_success_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-icon,:host([value-state="Critical"][indeterminate]) .ui5-checkbox-inner:after{color:var(--_ui5-v2-4-0_checkbox_checkmark_warning_color)}.ui5-checkbox-root{position:relative;display:inline-flex;align-items:center;width:100%;min-height:var(--_ui5-v2-4-0_checkbox_width_height);min-width:var(--_ui5-v2-4-0_checkbox_width_height);padding:0 var(--_ui5-v2-4-0_checkbox_wrapper_padding);outline:none;transition:var(--_ui5-v2-4-0_checkbox_transition);border:var(--_ui5-v2-4-0_checkbox_default_focus_border);border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);box-sizing:border-box}:host([desktop]) .ui5-checkbox-root:focus:before,.ui5-checkbox-root:focus-visible:before{display:var(--_ui5-v2-4-0_checkbox_focus_outline_display);content:"";position:absolute;inset-inline:var(--_ui5-v2-4-0_checkbox_focus_position);inset-block:var(--_ui5-v2-4-0_checkbox_focus_position);border:var(--_ui5-v2-4-0_checkbox_focus_outline);border-radius:var(--_ui5-v2-4-0_checkbox_focus_border_radius)}:host([text]) .ui5-checkbox-root{padding-inline-end:var(--_ui5-v2-4-0_checkbox_right_focus_distance)}:host([text]) .ui5-checkbox-root:focus:before,:host([text]) .ui5-checkbox-root:focus-visible:before{inset-inline-end:0}:host(:hover:not([disabled])){background:var(--_ui5-v2-4-0_checkbox_outer_hover_background)}.ui5-checkbox--hoverable .ui5-checkbox-label:hover{color:var(--_ui5-v2-4-0_checkbox_label_color)}:host(:not([active]):not([checked]):not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active]):not([checked])[value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_border_color)}:host(:not([active])[checked]:not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active])[checked][value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color)}:host([checked]:not([value-state])) .ui5-checkbox-inner,:host([checked][value-state="None"]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color)}:host([active]:not([checked]):not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active]:not([checked])[value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_active_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}:host([active][checked]:not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active][checked][value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}.ui5-checkbox-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);border:var(--_ui5-v2-4-0_checkbox_inner_border);border-radius:var(--_ui5-v2-4-0_checkbox_inner_border_radius);background:var(--_ui5-v2-4-0_checkbox_inner_background);color:var(--_ui5-v2-4-0_checkbox_checkmark_color);box-sizing:border-box;position:relative;cursor:inherit}:host([indeterminate][checked]) .ui5-checkbox-inner:after{content:"";background-color:currentColor;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:var(--_ui5-v2-4-0_checkbox_partially_icon_size);height:var(--_ui5-v2-4-0_checkbox_partially_icon_size)}:host input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit}.ui5-checkbox-root .ui5-checkbox-label{margin-inline-start:var(--_ui5-v2-4-0_checkbox_label_offset);cursor:inherit;text-overflow:ellipsis;overflow:hidden;pointer-events:none;color:var(--_ui5-v2-4-0_checkbox_label_color)}.ui5-checkbox-icon{width:var(--_ui5-v2-4-0_checkbox_icon_size);height:var(--_ui5-v2-4-0_checkbox_icon_size);color:currentColor;cursor:inherit;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}:host([display-only]){cursor:default}:host([display-only]) .ui5-checkbox-display-only-icon-inner [ui5-icon]{color:var(--sapTextColor)}:host([display-only]) .ui5-checkbox-display-only-icon-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);display:flex;align-items:center;justify-content:center}\n' };
function eD(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-checkbox-display-only-icon-inner"><${zM("ui5-icon", t2, i2)} aria-hidden="true" name=${FM(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></${zM("ui5-icon", t2, i2)}></div>` : NM`<div class="ui5-checkbox-display-only-icon-inner"><ui5-icon aria-hidden="true" name=${FM(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></ui5-icon></div>`;
}
function tD(e6, t2, i2) {
  return NM`<div id="${FM(this._id)}-CbBg" class="ui5-checkbox-inner">${this.isCompletelyChecked ? iD.call(this, e6, t2, i2) : void 0}</div>`;
}
function iD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></ui5-icon>`;
}
function nD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-label", t2, i2)} part="label" id="${FM(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${FM(this.wrappingType)}">${FM(this.text)}</${zM("ui5-label", t2, i2)}>` : NM`<ui5-label part="label" id="${FM(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${FM(this.wrappingType)}">${FM(this.text)}</ui5-label>`;
}
function oD(e6, t2, i2) {
  return NM`<span id="${FM(this._id)}-descr" class="ui5-hidden-text">${FM(this.valueStateText)}</span>`;
}
var rD, sD = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let aD, lD = false, cD = rD = class extends wI {
  get formValidityMessage() {
    return rD.i18nBundle.getText(tR);
  }
  get formValidity() {
    return { valueMissing: this.required && !this.checked };
  }
  async formElementAnchor() {
    return this.getFocusDomRefAsync();
  }
  get formFormattedValue() {
    return this.checked ? "on" : null;
  }
  constructor() {
    super(), this.disabled = false, this.readonly = false, this.displayOnly = false, this.required = false, this.indeterminate = false, this.checked = false, this.valueState = "None", this.wrappingType = "Normal", this.active = false, this._deactivate = () => {
      aD && (aD.active = false);
    }, lD || (document.addEventListener("mouseup", this._deactivate), lD = true);
  }
  onEnterDOM() {
    IE() && this.setAttribute("desktop", "");
  }
  _onclick() {
    this.toggle();
  }
  _onmousedown() {
    this.readonly || this.disabled || (this.active = true, aD = this);
  }
  _onmouseup() {
    this.active = false;
  }
  _onfocusout() {
    this.active = false;
  }
  _onkeydown(e6) {
    jI(e6) && e6.preventDefault(), this.readonly || this.disabled || (WI(e6) && this.toggle(), this.active = true);
  }
  _onkeyup(e6) {
    jI(e6) && this.toggle(), this.active = false;
  }
  toggle() {
    if (this.canToggle()) {
      const e6 = { checked: this.checked, indeterminate: this.indeterminate };
      this.indeterminate ? (this.indeterminate = false, this.checked = true) : this.checked = !this.checked;
      const t2 = !this.fireDecoratorEvent("change"), i2 = !this.fireDecoratorEvent("value-changed");
      (t2 || i2) && (this.checked = e6.checked, this.indeterminate = e6.indeterminate);
    }
    return this;
  }
  canToggle() {
    return !(this.disabled || this.readonly || this.displayOnly);
  }
  valueStateTextMappings() {
    return { Negative: rD.i18nBundle.getText(QB), Critical: rD.i18nBundle.getText(VB), Positive: rD.i18nBundle.getText(qB) };
  }
  get ariaLabelText() {
    return cR(this);
  }
  get classes() {
    return { main: { "ui5-checkbox--hoverable": !this.disabled && !this.readonly && IE() } };
  }
  get ariaReadonly() {
    return this.readonly || this.displayOnly ? "true" : void 0;
  }
  get effectiveAriaDisabled() {
    return this.disabled ? "true" : void 0;
  }
  get effectiveAriaChecked() {
    return this.indeterminate && this.checked ? "mixed" : this.checked;
  }
  get ariaLabelledBy() {
    if (!this.ariaLabelText) return this.text ? `${this._id}-label` : void 0;
  }
  get ariaDescribedBy() {
    return this.hasValueState ? `${this._id}-descr` : void 0;
  }
  get hasValueState() {
    return this.valueState !== ZP.None;
  }
  get valueStateText() {
    if (this.valueState !== ZP.None && this.valueState !== ZP.Information) return this.valueStateTextMappings()[this.valueState];
  }
  get effectiveTabIndex() {
    const e6 = this.getAttribute("tabindex");
    return this.disabled || this.displayOnly ? void 0 : e6 || "0";
  }
  get isCompletelyChecked() {
    return this.checked && !this.indeterminate;
  }
  get isDisplayOnly() {
    return this.displayOnly && !this.disabled;
  }
  get displayOnlyIcon() {
    return this.isCompletelyChecked ? "complete" : this.checked && this.indeterminate ? "tri-state" : "border";
  }
};
sD([SI()], cD.prototype, "accessibleNameRef", void 0), sD([SI()], cD.prototype, "accessibleName", void 0), sD([SI({ type: Boolean })], cD.prototype, "disabled", void 0), sD([SI({ type: Boolean })], cD.prototype, "readonly", void 0), sD([SI({ type: Boolean })], cD.prototype, "displayOnly", void 0), sD([SI({ type: Boolean })], cD.prototype, "required", void 0), sD([SI({ type: Boolean })], cD.prototype, "indeterminate", void 0), sD([SI({ type: Boolean })], cD.prototype, "checked", void 0), sD([SI()], cD.prototype, "text", void 0), sD([SI()], cD.prototype, "valueState", void 0), sD([SI()], cD.prototype, "wrappingType", void 0), sD([SI()], cD.prototype, "name", void 0), sD([SI({ type: Boolean })], cD.prototype, "active", void 0), sD([HM("@ui5/webcomponents")], cD, "i18nBundle", void 0), cD = rD = sD([CI({ tag: "ui5-checkbox", languageAware: true, formAssociated: true, renderer: UM, template: function(e6, t2, i2) {
  return NM`<div class="ui5-checkbox-root ${DM(this.classes.main)}" role="checkbox" part="root" aria-checked="${FM(this.effectiveAriaChecked)}" aria-readonly="${FM(this.ariaReadonly)}" aria-disabled="${FM(this.effectiveAriaDisabled)}" aria-label="${FM(this.ariaLabelText)}" aria-labelledby="${FM(this.ariaLabelledBy)}" aria-describedby="${FM(this.ariaDescribedBy)}" aria-required="${FM(this.required)}" tabindex="${FM(this.effectiveTabIndex)}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click="${this._onclick}" @focusout="${this._onfocusout}">${this.isDisplayOnly ? eD.call(this, e6, t2, i2) : tD.call(this, e6, t2, i2)}<input id="${FM(this._id)}-CB" type='checkbox' ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.disabled}" tabindex="-1" aria-hidden="true" data-sap-no-tab-ref />${this.text ? nD.call(this, e6, t2, i2) : void 0}${this.hasValueState ? oD.call(this, e6, t2, i2) : void 0}</div>`;
}, styles: JP, dependencies: [KP, BR] }), EI("change", { bubbles: true, cancelable: true }), EI("value-changed", { bubbles: true, cancelable: true })], cD), cD.define();
const hD = cD;
function uD(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-cp-default-color-button-wrapper"><${zM("ui5-button", t2, i2)} class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${FM(this.colorPaletteDefaultColorText)}</${zM("ui5-button", t2, i2)}><div class="ui5-cp-separator"></div></div>` : NM`<div class="ui5-cp-default-color-button-wrapper"><ui5-button class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${FM(this.colorPaletteDefaultColorText)}</ui5-button><div class="ui5-cp-separator"></div></div>`;
}
function dD(e6, t2, i2, n2, o2) {
  return NM`<slot name="${FM(n2._individualSlot)}"></slot>`;
}
function pD(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><${zM("ui5-button", t2, i2)} design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${FM(this.colorPaletteMoreColorsText)}</${zM("ui5-button", t2, i2)}></div>` : NM`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><ui5-button design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${FM(this.colorPaletteMoreColorsText)}</ui5-button></div>`;
}
function _D(e6, t2, i2) {
  return NM`<div class="ui5-cp-recent-colors-wrapper"><div class="ui5-cp-separator"></div><div class="ui5-cp-recent-colors-container" @keydown="${this._onRecentColorsContainerKeyDown}">${PM(this.recentColors, (e7, t3) => e7._id || t3, (n2, o2) => gD.call(this, e6, t2, i2, n2, o2))}</div></div>`;
}
function gD(e6, t2, i2, n2, o2) {
  return i2 ? NM`<${zM("ui5-color-palette-item", t2, i2)} value="${FM(n2)}"></${zM("ui5-color-palette-item", t2, i2)}>` : NM`<ui5-color-palette-item value="${FM(n2)}"></ui5-color-palette-item>`;
}
function mD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-dialog", t2, i2)} header-text="${FM(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><${zM("ui5-color-picker", t2, i2)}></${zM("ui5-color-picker", t2, i2)}></div><div slot="footer" class="ui5-cp-dialog-footer"><${zM("ui5-button", t2, i2)} design="Emphasized" @click="${this._chooseCustomColor}">${FM(this.colorPaletteDialogOKButton)}</${zM("ui5-button", t2, i2)}><${zM("ui5-button", t2, i2)} design="Transparent" @click="${this._closeDialog}">${FM(this.colorPaletteCancelButton)}</${zM("ui5-button", t2, i2)}></div></${zM("ui5-dialog", t2, i2)}>` : NM`<ui5-dialog header-text="${FM(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><ui5-color-picker></ui5-color-picker></div><div slot="footer" class="ui5-cp-dialog-footer"><ui5-button design="Emphasized" @click="${this._chooseCustomColor}">${FM(this.colorPaletteDialogOKButton)}</ui5-button><ui5-button design="Transparent" @click="${this._closeDialog}">${FM(this.colorPaletteCancelButton)}</ui5-button></div></ui5-dialog>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const fD = { packageName: "@ui5/webcomponents", fileName: "themes/ColorPaletteItem.css.ts", content: ':host(:not([hidden])){height:var(--_ui5-v2-4-0_color-palette-item-height);width:var(--_ui5-v2-4-0_color-palette-item-height);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:var(--_ui5-v2-4-0_color-palette-item-outer-border-radius);display:inline-block;margin:var(--_ui5-v2-4-0_color-palette-item-margin);box-sizing:border-box}:host(:not([_disabled]):hover),:host([selected]){height:var(--_ui5-v2-4-0_color-palette-item-hover-height);width:var(--_ui5-v2-4-0_color-palette-item-hover-height);margin:var(--_ui5-v2-4-0_color-palette-item-hover-margin);border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius)}:host(:not([hidden])[on-phone]){width:calc(100% - .5rem);padding-block-start:calc(100% - .625rem);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:.25rem;display:inline-block;margin:.625rem;height:0;max-width:4.5rem;max-height:4.5rem}:host([selected][on-phone]){padding-block-start:calc(100% - .125rem);width:100%;margin:0}.ui5-cp-item{position:relative;box-sizing:border-box;border-radius:var(--_ui5-v2-4-0_color-palette-item-inner-border-radius);width:100%;height:100%}:host(:not([_disabled]):not([on-phone]):hover) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius)}:host(:not([_disabled])[on-phone]) .ui5-cp-item{border-radius:.1875rem}.ui5-cp-item:hover:not(:focus),:host([selected]:not([on-phone])) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius);box-sizing:border-box}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus,:host([selected]:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item{border:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border)}:host([selected]) .ui5-cp-item:focus,:host(:not([_disabled])) .ui5-cp-item:focus{outline:none}:host(:not([_disabled]):not([on-phone]):focus) .ui5-cp-item{pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):focus:not(:hover)) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host([selected]:not([_disabled]):not([on-phone]):not(:focus):not(:hover)) .ui5-cp-item:after,:host([selected]:not([_disabled]):not([on-phone]):not(:focus):hover) .ui5-cp-item:after,:host(:not([selected]):not([on-phone]):hover) .ui5-cp-item:after{content:"";box-sizing:border-box;position:absolute;inset:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset) - .0625rem);border:var(--_ui5-v2-4-0_color-palette-item-after-not-focus-color);border-radius:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius) + .0625rem);pointer-events:none}:host(:not([_disabled]):not([on-phone]):not([selected]):not(:hover)) .ui5-cp-item:focus:not(:hover):after{border:var(--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border)}:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before,:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:hover:before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border-before);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before,:host(:not([disabled])) .ui5-cp-item:focus-visible:after{content:"";box-sizing:border-box;position:absolute;pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius)}:host(:not([disabled])) .ui5-cp-item:focus-visible:after{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border)}\n' };
var vD, AD = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let bD = vD = class extends wI {
  constructor() {
    super(), this.value = "", this.selected = false, this.forcedTabIndex = "-1", this.onPhone = false, this._disabled = false;
  }
  onBeforeRendering() {
    this._disabled = !this.value, this.onPhone = TE(), this.setAttribute("style", `background-color: ${this.value}`);
    const e6 = this.offsetHeight + 4;
    this.style.setProperty(uS("--_ui5_color_palette_item_height"), `${e6}px`);
  }
  get colorLabel() {
    return vD.i18nBundle.getText(iB);
  }
  get styles() {
    return { root: { "background-color": this.value } };
  }
  get classes() {
    return { root: { "ui5-cp-item": true } };
  }
};
AD([SI()], bD.prototype, "value", void 0), AD([SI({ type: Boolean })], bD.prototype, "selected", void 0), AD([SI({ noAttribute: true })], bD.prototype, "forcedTabIndex", void 0), AD([SI({ type: Number })], bD.prototype, "index", void 0), AD([SI({ type: Boolean })], bD.prototype, "onPhone", void 0), AD([SI({ type: Boolean })], bD.prototype, "_disabled", void 0), AD([HM("@ui5/webcomponents")], bD, "i18nBundle", void 0), bD = vD = AD([CI({ tag: "ui5-color-palette-item", renderer: UM, styles: fD, template: function(e6, t2, i2) {
  return NM`<div class="${DM(this.classes.root)}" style="${LM(this.styles.root)}" value="${FM(this.value)}" tabindex="${FM(this.forcedTabIndex)}" role="button" aria-label="${FM(this.colorLabel)} - ${FM(this.index)}: ${FM(this.value)}" title="${FM(this.colorLabel)} - ${FM(this.index)}: ${FM(this.value)}" ?disabled="${this._disabled}"></div>`;
}, shadowRootOptions: { delegatesFocus: true } })], bD), bD.define();
const yD = bD;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const wD = { packageName: "@ui5/webcomponents", fileName: "themes/ColorPalette.css.ts", content: ":host(:not([hidden])){display:inline-block}:host(:not([hidden])[popup-mode]),:host(:not([hidden])[on-phone]){width:100%;overflow:hidden}.ui5-cp-root{display:flex;flex-direction:column}.ui5-cp-root.ui5-cp-root-phone,.ui5-cp-separator,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper,.ui5-cp-recent-colors-wrapper{width:100%}.ui5-cp-root.ui5-cp-root-phone .ui5-cp-item-container{padding:.375rem .625rem;width:100%;max-width:100%;max-height:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-default-color-button,.ui5-cp-root-phone .ui5-cp-more-colors,.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper{height:2.875rem}.ui5-cp-root-phone .ui5-cp-item-container{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center}.ui5-cp-root-phone .ui5-cp-recent-colors-container{padding:.375rem .625rem;display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center;width:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-recent-colors-wrapper{max-width:100%;padding:0;display:flex;justify-content:center;flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden}.ui5-cp-recent-colors-wrapper{display:flex;align-items:center;flex-direction:column;gap:.25rem}.ui5-cp-root.ui5-cp-root-phone{display:flex}.ui5-cp-item-container{display:flex;max-width:var(--_ui5-v2-4-0_color-palette-row-width);flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden;padding:var(--_ui5-v2-4-0_color-palette-swatch-container-padding)}.ui5-cp-more-colors,.ui5-cp-default-color-button{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);text-align:center;border:none}.ui5-cp-more-colors-wrapper,.ui5-cp-default-color-button-wrapper{display:flex;flex-direction:column}.ui5-cp-separator{height:.0625rem;background:var(--sapToolbar_SeparatorColor)}.ui5-cp-default-color-button,.ui5-cp-more-colors{padding:.0625rem}\n" };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const xD = { packageName: "@ui5/webcomponents", fileName: "themes/ColorPaletteDialog.css.ts", content: ".ui5-cp-dialog-content{display:flex;justify-content:center;align-items:center;margin:1rem 0}.ui5-cp-dialog-footer{width:100%;display:flex;justify-content:flex-end;margin:.1875rem 1rem}.ui5-cp-dialog-footer [ui5-button]:first-child{margin-right:1rem}\n" };
var CD, SD = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let ED = CD = class extends wI {
  constructor() {
    super(), this.showRecentColors = false, this.showMoreColors = false, this.showDefaultColor = false, this.popupMode = false, this.onPhone = false, this._shouldFocusRecentColors = false, this._itemNavigation = new SM(this, { getItemsCallback: () => this.displayedColors, rowSize: this.rowSize, behavior: CM.Cyclic }), this._itemNavigationRecentColors = new SM(this, { getItemsCallback: () => this.recentColorsElements, rowSize: this.rowSize, behavior: CM.Static }), this._recentColors = [];
  }
  onBeforeRendering() {
    this._ensureSingleSelectionOrDeselectAll();
    const e6 = this.selectedItem;
    if (e6 && !this.showRecentColors && (this._selectedColor = e6.value), this.displayedColors.forEach((e7, t2) => {
      e7.index = t2 + 1;
    }), this.showMoreColors) {
      const e7 = FC("ColorPaletteMoreColors");
      e7.i18nBundle = CD.i18nBundle, e7 && (this.moreColorsFeature = new e7());
    }
    this.onPhone = TE();
  }
  get _effectiveShowMoreColors() {
    return !(!this.showMoreColors || !this.moreColorsFeature);
  }
  onAfterRendering() {
    if (this.hasRecentColors && this._shouldFocusRecentColors) {
      this.selectedItem && (this.selectedItem.selected = false);
      const e6 = this.recentColorsElements[0];
      e6.selected = true, this._currentlySelected = e6, this._currentlySelected.focus(), this._shouldFocusRecentColors = false;
    }
  }
  selectColor(e6) {
    e6.value && (e6.focus(), this.displayedColors.includes(e6) && this._itemNavigation.setCurrentItem(e6), this._setColor(e6.value));
  }
  _setColor(e6) {
    this._selectedColor = e6, this._recentColors[0] !== this._selectedColor && (this._recentColors.includes(this._selectedColor) ? this._recentColors.unshift(this._recentColors.splice(this._recentColors.indexOf(this._selectedColor), 1)[0]) : this._addRecentColor(this._selectedColor)), this.fireDecoratorEvent("item-click", { color: this._selectedColor });
  }
  get effectiveColorItems() {
    let e6 = this.colors;
    return this.popupMode && (e6 = this.getSlottedNodes("colors")), e6;
  }
  _ensureSingleSelectionOrDeselectAll() {
    let e6;
    this.allColorsInPalette.forEach((t2) => {
      t2.selected && (e6 && (e6.selected = false), e6 = t2);
    });
  }
  _onclick(e6) {
    this.handleSelection(e6.target);
  }
  _onkeyup(e6) {
    const t2 = e6.target;
    jI(e6) && (e6.preventDefault(), this.handleSelection(t2));
  }
  _onkeydown(e6) {
    const t2 = e6.target;
    WI(e6) && this.handleSelection(t2), jI(e6) && e6.preventDefault();
  }
  handleSelection(e6) {
    e6.hasAttribute("ui5-color-palette-item") && e6.value && (this._shouldFocusRecentColors = false, this.selectColor(e6), this.recentColorsElements.includes(e6) ? (this.recentColorsElements[0].selected = true, this.recentColorsElements[0].focus(), this._currentlySelected = this.recentColorsElements[0]) : (this.allColorsInPalette.forEach((t2) => {
      t2.selected = t2 === e6;
    }), this._currentlySelected = e6), this._ensureSingleSelectionOrDeselectAll());
  }
  _handleDefaultColorClick(e6) {
    e6.preventDefault(), this._onDefaultColorClick();
  }
  _onDefaultColorKeyUp(e6) {
    jI(e6) && this._handleDefaultColorClick(e6);
  }
  _onDefaultColorKeyDown(e6) {
    if (uM(e6) && this.popupMode && this._handleDefaultColorClick(e6), WI(e6) && this._handleDefaultColorClick(e6), JI(e6)) e6.stopPropagation(), this.focusColorElement(this.colorPaletteNavigationElements[1], this._itemNavigation);
    else if (ZI(e6)) {
      e6.stopPropagation();
      const t2 = this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length - 1];
      if (this.hasRecentColors) this.focusColorElement(t2, this._itemNavigationRecentColors);
      else if (this.showMoreColors) t2.focus();
      else {
        const e7 = this.displayedColors.length % this.rowSize * this.rowSize;
        this.focusColorElement(this.displayedColors[e7], this._itemNavigation);
      }
    }
  }
  _onMoreColorsKeyDown(e6) {
    const t2 = e6.target, i2 = this.colorPaletteNavigationElements.indexOf(t2), n2 = this.displayedColors.length % this.rowSize * this.rowSize;
    ZI(e6) ? (e6.stopPropagation(), this.focusColorElement(this.displayedColors[n2], this._itemNavigation)) : JI(e6) && (e6.stopPropagation(), this.hasRecentColors ? this.focusColorElement(this.colorPaletteNavigationElements[i2 + 1], this._itemNavigationRecentColors) : this.showDefaultColor ? this.firstFocusableElement.focus() : this.focusColorElement(this.displayedColors[0], this._itemNavigation));
  }
  _isUpOrDownNavigatableColorPaletteItem(e6) {
    return (ZI(e6) || JI(e6)) && this._currentlySelected && this.colorPaletteNavigationElements.includes(this._currentlySelected);
  }
  _onColorContainerKeyDown(e6) {
    const t2 = e6.target, i2 = this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length - 1];
    if (this._isUpOrDownNavigatableColorPaletteItem(e6) && (this._currentlySelected = void 0), uM(e6) && this.popupMode && (e6.preventDefault(), this.selectColor(t2)), ZI(e6) && t2 === this.displayedColors[0] && this.colorPaletteNavigationElements.length > 1) e6.stopPropagation(), this.showDefaultColor ? this.firstFocusableElement.focus() : !this.showDefaultColor && this.hasRecentColors ? this.focusColorElement(i2, this._itemNavigationRecentColors) : !this.showDefaultColor && this.showMoreColors && i2.focus();
    else if (JI(e6) && t2 === this.displayedColors[this.displayedColors.length - 1] && this.colorPaletteNavigationElements.length > 1) {
      e6.stopPropagation();
      const t3 = this.showDefaultColor && !this.showMoreColors && this.hasRecentColors || !this.showDefaultColor && !this.showMoreColors && this.hasRecentColors;
      this.showDefaultColor && this.showMoreColors ? this.colorPaletteNavigationElements[2].focus() : !this.showDefaultColor || this.showMoreColors || this.showRecentColors && this.recentColors[0] ? t3 ? this.focusColorElement(i2, this._itemNavigationRecentColors) : !this.showDefaultColor && this.showMoreColors && this.colorPaletteNavigationElements[1].focus() : this.firstFocusableElement.focus();
    }
  }
  _onRecentColorsContainerKeyDown(e6) {
    if (this._isUpOrDownNavigatableColorPaletteItem(e6) && (this._currentlySelected = void 0), ZI(e6)) {
      if (this.showMoreColors) {
        const e7 = this.showDefaultColor ? 2 : 1;
        this.colorPaletteNavigationElements[e7].focus();
      } else if (!this.showMoreColors && this.colorPaletteNavigationElements.length > 1) {
        const t2 = this.displayedColors.length % this.rowSize * this.rowSize;
        e6.stopPropagation(), this.focusColorElement(this.displayedColors[t2], this._itemNavigation);
      }
    } else JI(e6) && (this.showDefaultColor ? this.firstFocusableElement.focus() : (e6.stopPropagation(), this.focusColorElement(this.displayedColors[0], this._itemNavigation)));
  }
  focusColorElement(e6, t2) {
    t2.setCurrentItem(e6), t2._focusCurrentItem();
  }
  get firstFocusableElement() {
    return this.colorPaletteNavigationElements[0];
  }
  _chooseCustomColor() {
    const e6 = this.getColorPicker();
    this._setColor(e6.value), this._closeDialog(), this._shouldFocusRecentColors = true;
  }
  _addRecentColor(e6) {
    this.showRecentColors && !this._recentColors.includes(e6) && (this._recentColors.unshift(e6), this._recentColors.length > this.rowSize && this._recentColors.pop());
  }
  _closeDialog() {
    this._getDialog().open = false;
  }
  _openMoreColorsDialog() {
    this._getDialog().open = true;
  }
  _onDefaultColorClick() {
    this.defaultColor && (this._setColor(this.defaultColor), this._addRecentColor(this.defaultColor), this.selectedItem && (this.selectedItem.selected = false, this._currentlySelected = void 0));
  }
  get selectedItem() {
    return this.allColorsInPalette.find((e6) => e6.selected);
  }
  get allColorsInPalette() {
    return [...this.effectiveColorItems, ...this.recentColorsElements];
  }
  get colorPaletteDialogTitle() {
    var _a3;
    return (_a3 = this.moreColorsFeature) == null ? void 0 : _a3.colorPaletteDialogTitle;
  }
  get colorPaletteDialogOKButton() {
    var _a3;
    return (_a3 = this.moreColorsFeature) == null ? void 0 : _a3.colorPaletteDialogOKButton;
  }
  get colorPaletteCancelButton() {
    var _a3;
    return (_a3 = this.moreColorsFeature) == null ? void 0 : _a3.colorPaletteCancelButton;
  }
  get selectedColor() {
    return this._selectedColor;
  }
  get displayedColors() {
    return this.getSlottedNodes("colors").filter((e6) => e6.value).slice(0, 15);
  }
  get colorContainerLabel() {
    return CD.i18nBundle.getText(eB);
  }
  get colorPaletteMoreColorsText() {
    return CD.i18nBundle.getText(sB);
  }
  get colorPaletteDefaultColorText() {
    return CD.i18nBundle.getText(aB);
  }
  get _showMoreColors() {
    return this.showMoreColors && this.moreColorsFeature;
  }
  get rowSize() {
    return 5;
  }
  get hasRecentColors() {
    return this.showRecentColors && this.recentColors[0];
  }
  get recentColors() {
    for (this._recentColors.length > this.rowSize && (this._recentColors = this._recentColors.slice(0, this.rowSize)); this._recentColors.length < this.rowSize; ) this._recentColors.push("");
    return this._recentColors;
  }
  get recentColorsElements() {
    const e6 = this.getDomRef();
    return e6 ? Array.from(e6.querySelectorAll(".ui5-cp-recent-colors-wrapper [ui5-color-palette-item]")).filter((e7) => "" !== e7.value) : [];
  }
  get colorPaletteNavigationElements() {
    const e6 = [], t2 = this.shadowRoot.querySelector(".ui5-cp-root");
    return this._currentlySelected && e6.push(this._currentlySelected), this.showDefaultColor && e6.push(t2.querySelector(".ui5-cp-default-color-button")), e6.push(this.displayedColors[0]), this.showMoreColors && e6.push(t2.querySelector(".ui5-cp-more-colors")), this.showRecentColors && this.recentColorsElements.length && e6.push(this.recentColorsElements[0]), e6;
  }
  get classes() {
    return { colorPaletteRoot: { "ui5-cp-root": true, "ui5-cp-root-phone": TE() } };
  }
  _getDialog() {
    return this.shadowRoot.querySelector("[ui5-dialog]");
  }
  getColorPicker() {
    return this._getDialog().content[0].querySelector("[ui5-color-picker]");
  }
};
SD([SI({ type: Boolean })], ED.prototype, "showRecentColors", void 0), SD([SI({ type: Boolean })], ED.prototype, "showMoreColors", void 0), SD([SI({ type: Boolean })], ED.prototype, "showDefaultColor", void 0), SD([SI()], ED.prototype, "defaultColor", void 0), SD([SI()], ED.prototype, "_selectedColor", void 0), SD([SI({ type: Boolean })], ED.prototype, "popupMode", void 0), SD([SI({ type: Boolean })], ED.prototype, "onPhone", void 0), SD([TI({ default: true, type: HTMLElement, invalidateOnChildChange: true, individualSlots: true })], ED.prototype, "colors", void 0), SD([HM("@ui5/webcomponents")], ED, "i18nBundle", void 0), ED = CD = SD([CI({ tag: "ui5-color-palette", renderer: UM, features: ["ColorPaletteMoreColors"], template: function(e6, t2, i2) {
  return NM`<div class="${DM(this.classes.colorPaletteRoot)}" @click=${this._onclick} @keyup=${this._onkeyup} @keydown=${this._onkeydown}>${this.showDefaultColor ? uD.call(this, e6, t2, i2) : void 0}<div class="ui5-cp-item-container" role="region" aria-label="${FM(this.colorContainerLabel)}" @keydown="${this._onColorContainerKeyDown}">${PM(this.displayedColors, (e7, t3) => e7._id || t3, (n2, o2) => dD.call(this, e6, t2, i2, n2, o2))}</div>${this._showMoreColors ? pD.call(this, e6, t2, i2) : void 0}${this.showRecentColors ? _D.call(this, e6, t2, i2) : void 0}</div>${this._effectiveShowMoreColors ? mD.call(this, e6, t2, i2) : void 0} `;
}, styles: [wD, xD], get dependencies() {
  const e6 = FC("ColorPaletteMoreColors");
  return [yD, tk].concat(e6 ? e6.dependencies : []);
} }), EI("item-click", { detail: { color: { type: String } } })], ED), ED.define();
const TD = ED;
function ID(e6, t2, i2, n2, o2) {
  return NM`<slot name="${FM(n2._individualSlot)}"></slot>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const MD = { packageName: "@ui5/webcomponents", fileName: "themes/ColorPalettePopover.css.ts", content: ".ui5-cp-header{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);display:flex;align-items:center}.ui5-cp-footer{width:100%;display:flex;justify-content:flex-end;align-items:center;margin:.1875rem 0}[ui5-responsive-popover]::part(content){padding:0}.ui5-cp-item-container{padding:.3125rem .6875rem}\n" };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const BD = { packageName: "@ui5/webcomponents", fileName: "themes/ResponsivePopoverCommon.css.ts", content: '.input-root-phone{flex:1;position:relative;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color);border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box}.input-root-phone [inner-input]{padding:0 .5rem;width:100%;height:100%}.input-root-phone [inner-input]:focus{background-color:var(--sapField_Focus_Background)}.input-root-phone:focus-within:before{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}.input-root-phone [value-state=Negative] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Positive] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Critical] .inputIcon[data-ui5-compact-size]{padding:.1875rem .5rem}[inner-input]{background:transparent;color:inherit;border:none;font-style:normal;-webkit-appearance:none;-moz-appearance:textfield;line-height:normal;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;min-width:3rem;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}[inner-input]::selection,[inner-input]::-moz-selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}[inner-input]::-webkit-input-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}[inner-input]::-moz-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}.input-root-phone[value-state]:not([value-state=None]){border-width:var(--_ui5-v2-4-0_input_state_border_width)}.input-root-phone[value-state=Negative] [inner-input],.input-root-phone[value-state=Critical] [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style)}.input-root-phone[value-state=Negative] [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}.input-root-phone[value-state=Negative]:not([readonly]){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}.input-root-phone[value-state=Negative]:not([readonly]):not([disabled]),.input-root-phone[value-state=Critical]:not([readonly]):not([disabled]),.input-root-phone[value-state=Information]:not([readonly]):not([disabled]){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}.input-root-phone[value-state=Critical]:not([readonly]){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}.input-root-phone[value-state=Positive]:not([readonly]){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width)}.input-root-phone[value-state=Positive]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}.input-root-phone[value-state=Positive]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}.input-root-phone[value-state=Information]:not([readonly]){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width)}.input-root-phone[value-state=Information]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}.ui5-multi-combobox-toggle-button{margin-left:.5rem}.ui5-responsive-popover-header{width:100%;min-height:2.5rem;display:flex;flex-direction:column}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header .row{box-sizing:border-box;padding:.25rem 1rem;min-height:2.5rem;display:flex;justify-content:center;align-items:center;font-size:var(--sapFontHeader5Size)}.ui5-responsive-popover-footer{display:flex;justify-content:flex-end;padding:.25rem 0;width:100%}.ui5-responsive-popover-close-btn{position:absolute;right:1rem}\n' };
function RD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-dialog", t2, i2)} root-element accessible-name=${FM(this.accessibleName)} accessible-name-ref=${FM(this.accessibleNameRef)} accessible-role=${FM(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${FM(this.initialFocus)}" @ui5-before-open="${FM(this._beforeDialogOpen)}" @ui5-open="${FM(this._propagateDialogEvent)}" @ui5-before-close="${FM(this._propagateDialogEvent)}" @ui5-close="${FM(this._afterDialogClose)}" exportparts="content, header, footer" .open=${FM(this.open)}>${this._hideHeader ? void 0 : kD.call(this, e6, t2, i2)}<slot></slot><slot slot="footer" name="footer"></slot></${zM("ui5-dialog", t2, i2)}>` : NM`<ui5-dialog root-element accessible-name=${FM(this.accessibleName)} accessible-name-ref=${FM(this.accessibleNameRef)} accessible-role=${FM(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${FM(this.initialFocus)}" @ui5-before-open="${FM(this._beforeDialogOpen)}" @ui5-open="${FM(this._propagateDialogEvent)}" @ui5-before-close="${FM(this._propagateDialogEvent)}" @ui5-close="${FM(this._afterDialogClose)}" exportparts="content, header, footer" .open=${FM(this.open)}>${this._hideHeader ? void 0 : kD.call(this, e6, t2, i2)}<slot></slot><slot slot="footer" name="footer"></slot></ui5-dialog>`;
}
function kD(e6, t2, i2) {
  return NM`${this.header.length ? PD.call(this, e6, t2, i2) : DD.call(this, e6, t2, i2)}`;
}
function PD(e6, t2, i2) {
  return NM`<slot slot="header" name="header"></slot>`;
}
function DD(e6, t2, i2) {
  return NM`<div class="${DM(this.classes.header)}" slot="header">${this.headerText ? LD.call(this, e6, t2, i2) : void 0}${this._hideCloseButton ? void 0 : FD.call(this, e6, t2, i2)}</div>`;
}
function LD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-title", t2, i2)} level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${FM(this.headerText)}</${zM("ui5-title", t2, i2)}>` : NM`<ui5-title level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${FM(this.headerText)}</ui5-title>`;
}
function FD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-button", t2, i2)} icon="decline" design="Transparent" accessible-name="${FM(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></${zM("ui5-button", t2, i2)}>` : NM`<ui5-button icon="decline" design="Transparent" accessible-name="${FM(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></ui5-button>`;
}
function ND(e6, t2, i2) {
  return NM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${LM(this.styles.root)}" class="${DM(this.classes.root)}" role="${FM(this._role)}" aria-modal="${FM(this._ariaModal)}" aria-label="${FM(this._ariaLabel)}" aria-labelledby="${FM(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${LM(this.styles.arrow)}"></span>${this._displayHeader ? OD.call(this, e6, t2, i2) : void 0}<div style="${LM(this.styles.content)}" class="${DM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter ? HD.call(this, e6, t2, i2) : void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`;
}
function OD(e6, t2, i2) {
  return NM`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length ? UD.call(this, e6, t2, i2) : zD.call(this, e6, t2, i2)}</header>`;
}
function UD(e6, t2, i2) {
  return NM`<slot name="header"></slot>`;
}
function zD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-title", t2, i2)} level="H1" class="ui5-popup-header-text">${FM(this.headerText)}</${zM("ui5-title", t2, i2)}>` : NM`<ui5-title level="H1" class="ui5-popup-header-text">${FM(this.headerText)}</ui5-title>`;
}
function HD(e6, t2, i2) {
  return NM`${this.footer.length ? QD.call(this, e6, t2, i2) : void 0}`;
}
function QD(e6, t2, i2) {
  return NM`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`;
}
CT("resize-corner", { pathData: "M384 160v32q0 12-10 22L182 406q-10 10-22 10h-32zM224 416l160-160v32q0 12-10 22l-96 96q-10 10-22 10h-32zm160-64v32q0 12-10 22t-22 10h-32z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("resize-corner", { pathData: "M282 416q-11 0-18.5-7.5T256 390t7-18l109-109q7-7 18-7t18.5 7.5T416 282t-7 18L300 409q-7 7-18 7zm-160 0q-11 0-18.5-7.5T96 390t7-18l269-269q7-7 18-7t18.5 7.5T416 122t-7 18L140 409q-7 7-18 7z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("error", { pathData: "M512 256q0 53-20.5 100t-55 81.5-81 54.5-99.5 20-100-20.5-81.5-55T20 355 0 256q0-54 20-100.5t55-81T156.5 20 256 0t99.5 20T437 75t55 81.5 20 99.5zM399 364q3-3 3-6t-3-6l-86-86q-3-3-3-6t3-6l81-81q3-3 3-6t-3-6l-37-37q-2-2-6-2t-6 2l-83 82q-1 3-6 3-3 0-6-3l-84-83q-1-2-6-2-4 0-6 2l-37 37q-3 3-3 6t3 6l83 82q3 3 3 6t-3 6l-83 82q-2 2-2.5 4.5l-.5 2.5q0 3 3 5l36 37q4 2 6 2 4 0 6-2l85-84q2-2 6-2t6 2l88 88q4 2 6 2t6-2z", ltr: false, accData: ok, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("error", { pathData: "M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm45 256l74-73q9-11 9-23 0-13-9.5-22.5T352 128q-12 0-23 9l-73 74-73-74q-10-9-23-9t-22.5 9.5T128 160q0 12 9 23l74 73-74 73q-9 10-9 23t9.5 22.5T160 384t23-9l73-74 73 74q11 9 23 9 13 0 22.5-9.5T384 352t-9-23z", ltr: false, accData: ok, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("alert", { pathData: "M501 374q5 10 7.5 19.5T512 412v5q0 31-23 47t-50 16H74q-13 0-26-4t-23.5-12-17-20T0 417q0-13 4-22.5t9-20.5L198 38q21-38 61-38 38 0 59 38zM257 127q-13 0-23.5 8T223 161q1 7 2 12 3 25 4.5 48t3.5 61q0 11 7.5 16t16.5 5q22 0 23-21l2-36 9-85q0-18-10.5-26t-23.5-8zm0 299q20 0 31.5-12t11.5-32q0-19-11.5-31T257 339t-31.5 12-11.5 31q0 20 11.5 32t31.5 12z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("alert", { pathData: "M505 399q7 13 7 27 0 21-15.5 37.5T456 480H56q-25 0-40.5-16.5T0 426q0-14 7-27L208 59q8-14 21-20.5t27-6.5 27 6.5T304 59zm-249 17q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9zm32-240q0-14-9-23t-23-9-23 9-9 23v96q0 14 9 23t23 9 23-9 9-23v-96z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("sys-enter-2", { pathData: "M512 256q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256t20.5-100 55-81.5T157 20t99-20q53 0 100 20t81.5 54.5T492 156t20 100zm-118-87q2-4 2-7t-3-6l-36-36q-3-4-8-4t-8 5L237 294h-4l-70-52q-4-3-7-3t-4.5 2-2.5 3l-29 41q-3 3-3 6 0 5 5 8l113 95q2 2 7 2t8-4z", ltr: true, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("sys-enter-2", { pathData: "M256 0q53 0 100 20t81.5 54.5T492 156t20 100-20 100-54.5 81.5T356 492t-100 20-100-20-81.5-54.5T20 356 0 256t20-100 54.5-81.5T156 20 256 0zm150 183q10-9 10-23 0-13-9.5-22.5T384 128t-22 9L186 308l-68-63q-9-9-22-9t-22.5 9.5T64 268q0 15 10 24l90 83q11 9 22 9 13 0 22-9z", ltr: true, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("information", { pathData: "M0 256q0-53 20.5-100t55-81.5T157 20t99-20q54 0 100.5 20t81 55 54.5 81.5 20 99.5q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256zm226-89q14 11 30 11 17 0 29.5-11.5T298 138q0-19-13-31-12-12-29-12-19 0-30.5 12.5T214 138q0 17 12 29zm-34 201v33h128v-33h-32V215q0-6-7-6h-88v31h32v128h-33z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
function VD(e6, t2, i2) {
  return NM`<header><div class="ui5-popup-header-root" id="ui5-popup-header" role="group" aria-describedby=${FM(this.effectiveAriaDescribedBy)} aria-roledescription=${FM(this.ariaRoleDescriptionHeaderText)} tabindex="${FM(this._headerTabIndex)}" @keydown="${this._onDragOrResizeKeyDown}" @mousedown="${this._onDragMouseDown}" part="header" state="${FM(this.state)}">${this.hasValueState ? GD.call(this, e6, t2, i2) : void 0}${this.header.length ? qD.call(this, e6, t2, i2) : $D.call(this, e6, t2, i2)}${this.resizable ? WD.call(this, e6, t2, i2) : YD.call(this, e6, t2, i2)}</div></header>`;
}
function GD(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-dialog-value-state-icon" name="${FM(this._dialogStateIcon)}"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-dialog-value-state-icon" name="${FM(this._dialogStateIcon)}"></ui5-icon>`;
}
function qD(e6, t2, i2) {
  return NM`<slot name="header"></slot>`;
}
function $D(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-title", t2, i2)} level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${FM(this.headerText)}</${zM("ui5-title", t2, i2)}>` : NM`<ui5-title level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${FM(this.headerText)}</ui5-title>`;
}
function WD(e6, t2, i2) {
  return NM`${this.draggable ? jD.call(this, e6, t2, i2) : XD.call(this, e6, t2, i2)}`;
}
function jD(e6, t2, i2) {
  return NM`<span id="${FM(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${FM(this.ariaDescribedByHeaderTextDraggableAndResizable)}</span>`;
}
function XD(e6, t2, i2) {
  return NM`<span id="${FM(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${FM(this.ariaDescribedByHeaderTextResizable)}</span>`;
}
function YD(e6, t2, i2) {
  return NM`${this.draggable ? KD.call(this, e6, t2, i2) : void 0}`;
}
function KD(e6, t2, i2) {
  return NM`<span id="${FM(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${FM(this.ariaDescribedByHeaderTextDraggable)}</span>`;
}
function ZD(e6, t2, i2) {
  return NM`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`;
}
function JD(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><${zM("ui5-icon", t2, i2)} name="resize-corner"></${zM("ui5-icon", t2, i2)}></div>` : NM`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><ui5-icon name="resize-corner"></ui5-icon></div>`;
}
CT("information", { pathData: "M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm32 224q0-14-9-23t-23-9-23 9-9 23v160q0 14 9 23t23 9 23-9 9-23V224zm-32-64q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const eL = { packageName: "@ui5/webcomponents", fileName: "themes/Dialog.css.ts", content: '.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{min-width:20rem;min-height:6rem;max-height:94%;max-width:90%;flex-direction:column;box-shadow:var(--sapContent_Shadow3);border-radius:var(--sapElement_BorderCornerRadius)}:host([stretch]){width:90%;height:94%}:host([stretch][on-phone]){width:100%;height:100%;max-height:100%;max-width:100%;border-radius:0}:host([draggable]) .ui5-popup-header-root,:host([draggable]) ::slotted([slot="header"]){cursor:move}:host([draggable]) .ui5-popup-header-root *{cursor:auto}:host([draggable]) .ui5-popup-root{user-select:text}::slotted([slot="header"]){max-width:100%}.ui5-popup-root{display:flex;flex-direction:column;max-width:100vw}.ui5-popup-header-root{position:relative}.ui5-popup-header-root:before{content:"";position:absolute;inset-block-start:auto;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;height:var(--_ui5-v2-4-0_dialog_header_state_line_height);background:var(--sapObjectHeader_BorderColor)}:host([state="Negative"]) .ui5-popup-header-root:before{background:var(--sapErrorBorderColor)}:host([state="Information"]) .ui5-popup-header-root:before{background:var(--sapInformationBorderColor)}:host([state="Positive"]) .ui5-popup-header-root:before{background:var(--sapSuccessBorderColor)}:host([state="Critical"]) .ui5-popup-header-root:before{background:var(--sapWarningBorderColor)}.ui5-dialog-value-state-icon{margin-inline-end:.5rem;flex-shrink:0}:host([state="Negative"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_error_state_icon_color)}:host([state="Information"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_information_state_icon_color)}:host([state="Positive"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_success_state_icon_color)}:host([state="Critical"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_warning_state_icon_color)}.ui5-popup-header-root{outline:none}:host([desktop]) .ui5-popup-header-root:focus:after,.ui5-popup-header-root:focus-visible:after{content:"";position:absolute;left:var(--_ui5-v2-4-0_dialog_header_focus_left_offset);bottom:var(--_ui5-v2-4-0_dialog_header_focus_bottom_offset);right:var(--_ui5-v2-4-0_dialog_header_focus_right_offset);top:var(--_ui5-v2-4-0_dialog_header_focus_top_offset);border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_dialog_header_border_radius) var(--_ui5-v2-4-0_dialog_header_border_radius) 0 0;pointer-events:none}:host([stretch]) .ui5-popup-content{width:100%;height:100%}.ui5-popup-content{min-height:var(--_ui5-v2-4-0_dialog_content_min_height);flex:1 1 auto}.ui5-popup-resize-handle{position:absolute;bottom:-.5rem;inset-inline-end:-.5rem;cursor:var(--_ui5-v2-4-0_dialog_resize_cursor);width:1.5rem;height:1.5rem;border-radius:50%}.ui5-popup-resize-handle [ui5-icon]{color:var(--sapButton_Lite_TextColor)}::slotted([slot="footer"]){height:var(--_ui5-v2-4-0_dialog_footer_height)}::slotted([slot="footer"][ui5-bar][design="Footer"]){border-top:none}::slotted([slot="header"][ui5-bar]){box-shadow:none}::slotted([slot="footer"][ui5-toolbar]){border:0}:host::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}.ui5-block-layer{display:block}\n' };
var tL, iL = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const nL = 16, oL = { [ZP.Negative]: "error", [ZP.Critical]: "alert", [ZP.Positive]: "sys-enter-2", [ZP.Information]: "information" };
let rL = tL = class extends uP {
  constructor() {
    super(), this.stretch = false, this.draggable = false, this.resizable = false, this.state = "None", this._draggedOrResized = false, this._revertSize = () => {
      Object.assign(this.style, { top: "", left: "", width: "", height: "" });
    }, this._screenResizeHandler = this._screenResize.bind(this), this._dragMouseMoveHandler = this._onDragMouseMove.bind(this), this._dragMouseUpHandler = this._onDragMouseUp.bind(this), this._resizeMouseMoveHandler = this._onResizeMouseMove.bind(this), this._resizeMouseUpHandler = this._onResizeMouseUp.bind(this), this._dragStartHandler = this._handleDragStart.bind(this);
  }
  static _isHeader(e6) {
    return e6.classList.contains("ui5-popup-header-root") || "header" === e6.getAttribute("slot");
  }
  get isModal() {
    return true;
  }
  get _ariaLabelledBy() {
    let e6;
    return this.headerText && !this._ariaLabel && (e6 = "ui5-popup-header-text"), e6;
  }
  get ariaRoleDescriptionHeaderText() {
    return this.resizable || this.draggable ? tL.i18nBundle.getText(YB) : void 0;
  }
  get effectiveAriaDescribedBy() {
    return this.resizable || this.draggable ? `${this._id}-descr` : void 0;
  }
  get ariaDescribedByHeaderTextResizable() {
    return tL.i18nBundle.getText(KB);
  }
  get ariaDescribedByHeaderTextDraggable() {
    return tL.i18nBundle.getText(ZB);
  }
  get ariaDescribedByHeaderTextDraggableAndResizable() {
    return tL.i18nBundle.getText(JB);
  }
  get _displayHeader() {
    return this.header.length || this.headerText || this.draggable || this.resizable;
  }
  get _movable() {
    return !this.stretch && this.onDesktop && (this.draggable || this.resizable);
  }
  get _headerTabIndex() {
    return this._movable ? "0" : void 0;
  }
  get _showResizeHandle() {
    return this.resizable && this.onDesktop;
  }
  get _minHeight() {
    let e6 = Number.parseInt(window.getComputedStyle(this.contentDOM).minHeight);
    const t2 = this._root.querySelector(".ui5-popup-header-root");
    t2 && (e6 += t2.offsetHeight);
    const i2 = this._root.querySelector(".ui5-popup-footer-root");
    return i2 && (e6 += i2.offsetHeight), e6;
  }
  get hasValueState() {
    return this.state !== ZP.None;
  }
  get _dialogStateIcon() {
    return oL[this.state];
  }
  get _role() {
    if (this.accessibleRole !== Yk.None) return this.state === ZP.Negative || this.state === ZP.Critical ? Yk.AlertDialog.toLowerCase() : this.accessibleRole.toLowerCase();
  }
  _show() {
    super._show(), this._center();
  }
  onBeforeRendering() {
    super.onBeforeRendering(), this._isRTL = "rtl" === this.effectiveDir;
  }
  onEnterDOM() {
    super.onEnterDOM(), this._attachScreenResizeHandler(), this.addEventListener("dragstart", this._dragStartHandler);
  }
  onExitDOM() {
    super.onExitDOM(), this._detachScreenResizeHandler(), this.removeEventListener("dragstart", this._dragStartHandler);
  }
  _resize() {
    super._resize(), this._draggedOrResized || this._center();
  }
  _screenResize() {
    this._center();
  }
  _attachScreenResizeHandler() {
    this._screenResizeHandlerAttached || (window.addEventListener("resize", this._screenResizeHandler), this._screenResizeHandlerAttached = true);
  }
  _detachScreenResizeHandler() {
    this._screenResizeHandlerAttached && (window.removeEventListener("resize", this._screenResizeHandler), this._screenResizeHandlerAttached = false);
  }
  _center() {
    const e6 = window.innerHeight - this.offsetHeight, t2 = window.innerWidth - this.offsetWidth;
    Object.assign(this.style, { top: `${Math.round(e6 / 2)}px`, left: `${Math.round(t2 / 2)}px` });
  }
  _onDragMouseDown(e6) {
    if (!this._movable || !this.draggable || !tL._isHeader(e6.target)) return;
    const { top: t2, left: i2 } = this.getBoundingClientRect(), { width: n2, height: o2 } = window.getComputedStyle(this);
    Object.assign(this.style, { top: `${t2}px`, left: `${i2}px`, width: Math.round(100 * Number.parseFloat(n2)) / 100 + "px", height: Math.round(100 * Number.parseFloat(o2)) / 100 + "px" }), this._x = e6.clientX, this._y = e6.clientY, this._draggedOrResized = true, this._attachMouseDragHandlers();
  }
  _onDragMouseMove(e6) {
    e6.preventDefault();
    const { clientX: t2, clientY: i2 } = e6, n2 = this._x - t2, o2 = this._y - i2, { left: r2, top: s2 } = this.getBoundingClientRect();
    Object.assign(this.style, { left: `${Math.floor(r2 - n2)}px`, top: `${Math.floor(s2 - o2)}px` }), this._x = t2, this._y = i2;
  }
  _onDragMouseUp() {
    delete this._x, delete this._y, this._detachMouseDragHandlers();
  }
  _onDragOrResizeKeyDown(e6) {
    this._movable && tL._isHeader(e6.target) && (this.draggable && [ZI, JI, YI, KI].some((t2) => t2(e6)) ? this._dragWithEvent(e6) : this.resizable && [oM, rM, sM, aM].some((t2) => t2(e6)) && this._resizeWithEvent(e6));
  }
  _dragWithEvent(e6) {
    const { top: t2, left: i2, width: n2, height: o2 } = this.getBoundingClientRect();
    let r2 = 0, s2 = "top";
    switch (true) {
      case ZI(e6):
        r2 = t2 - nL, s2 = "top";
        break;
      case JI(e6):
        r2 = t2 + nL, s2 = "top";
        break;
      case YI(e6):
        r2 = i2 - nL, s2 = "left";
        break;
      case KI(e6):
        r2 = i2 + nL, s2 = "left";
    }
    r2 = gk(r2, 0, "left" === s2 ? window.innerWidth - n2 : window.innerHeight - o2), this.style[s2] = `${r2}px`;
  }
  _resizeWithEvent(e6) {
    this._draggedOrResized = true, this.addEventListener("ui5-before-close", this._revertSize, { once: true });
    const { top: t2, left: i2 } = this.getBoundingClientRect(), n2 = window.getComputedStyle(this), o2 = Number.parseFloat(n2.minWidth), r2 = window.innerWidth - i2, s2 = window.innerHeight - t2;
    let a2 = Number.parseFloat(n2.width), l2 = Number.parseFloat(n2.height);
    switch (true) {
      case oM(e6):
        l2 -= nL;
        break;
      case rM(e6):
        l2 += nL;
        break;
      case sM(e6):
        a2 -= nL;
        break;
      case aM(e6):
        a2 += nL;
    }
    a2 = gk(a2, o2, r2), l2 = gk(l2, this._minHeight, s2), Object.assign(this.style, { width: `${a2}px`, height: `${l2}px` });
  }
  _attachMouseDragHandlers() {
    window.addEventListener("mousemove", this._dragMouseMoveHandler), window.addEventListener("mouseup", this._dragMouseUpHandler);
  }
  _detachMouseDragHandlers() {
    window.removeEventListener("mousemove", this._dragMouseMoveHandler), window.removeEventListener("mouseup", this._dragMouseUpHandler);
  }
  _onResizeMouseDown(e6) {
    if (!this._movable || !this.resizable) return;
    e6.preventDefault();
    const { top: t2, left: i2 } = this.getBoundingClientRect(), { width: n2, height: o2, minWidth: r2 } = window.getComputedStyle(this);
    this._initialX = e6.clientX, this._initialY = e6.clientY, this._initialWidth = Number.parseFloat(n2), this._initialHeight = Number.parseFloat(o2), this._initialTop = t2, this._initialLeft = i2, this._minWidth = Number.parseFloat(r2), this._cachedMinHeight = this._minHeight, Object.assign(this.style, { top: `${t2}px`, left: `${i2}px` }), this._draggedOrResized = true, this._attachMouseResizeHandlers();
  }
  _onResizeMouseMove(e6) {
    const { clientX: t2, clientY: i2 } = e6;
    let n2, o2;
    this._isRTL ? (n2 = gk(this._initialWidth - (t2 - this._initialX), this._minWidth, this._initialLeft + this._initialWidth), o2 = gk(this._initialLeft + (t2 - this._initialX), 0, this._initialX + this._initialWidth - this._minWidth)) : n2 = gk(this._initialWidth + (t2 - this._initialX), this._minWidth, window.innerWidth - this._initialLeft);
    const r2 = gk(this._initialHeight + (i2 - this._initialY), this._cachedMinHeight, window.innerHeight - this._initialTop);
    Object.assign(this.style, { height: `${r2}px`, width: `${n2}px`, left: o2 ? `${o2}px` : void 0 });
  }
  _onResizeMouseUp() {
    delete this._initialX, delete this._initialY, delete this._initialWidth, delete this._initialHeight, delete this._initialTop, delete this._initialLeft, delete this._minWidth, delete this._cachedMinHeight, this._detachMouseResizeHandlers();
  }
  _handleDragStart(e6) {
    this.draggable && e6.preventDefault();
  }
  _attachMouseResizeHandlers() {
    window.addEventListener("mousemove", this._resizeMouseMoveHandler), window.addEventListener("mouseup", this._resizeMouseUpHandler), this.addEventListener("ui5-before-close", this._revertSize, { once: true });
  }
  _detachMouseResizeHandlers() {
    window.removeEventListener("mousemove", this._resizeMouseMoveHandler), window.removeEventListener("mouseup", this._resizeMouseUpHandler);
  }
};
iL([SI()], rL.prototype, "headerText", void 0), iL([SI({ type: Boolean })], rL.prototype, "stretch", void 0), iL([SI({ type: Boolean })], rL.prototype, "draggable", void 0), iL([SI({ type: Boolean })], rL.prototype, "resizable", void 0), iL([SI()], rL.prototype, "state", void 0), iL([TI()], rL.prototype, "header", void 0), iL([TI()], rL.prototype, "footer", void 0), iL([HM("@ui5/webcomponents")], rL, "i18nBundle", void 0), rL = tL = iL([CI({ tag: "ui5-dialog", template: function(e6, t2, i2) {
  return NM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${LM(this.styles.root)}" class="${DM(this.classes.root)}" role="${FM(this._role)}" aria-modal="${FM(this._ariaModal)}" aria-label="${FM(this._ariaLabel)}" aria-labelledby="${FM(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span>${this._displayHeader ? VD.call(this, e6, t2, i2) : void 0}<div style="${LM(this.styles.content)}" class="${DM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this.footer.length ? ZD.call(this, e6, t2, i2) : void 0}${this._showResizeHandle ? JD.call(this, e6, t2, i2) : void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `;
}, styles: [uP.styles, kP, eL, vk()], dependencies: [BR, ...uP.dependencies] })], rL), rL.define();
const sL = rL;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const aL = { packageName: "@ui5/webcomponents", fileName: "themes/ResponsivePopover.css.ts", content: ":host{--_ui5-v2-4-0_input_width: 100%;min-width:6.25rem;min-height:2rem}:host([on-phone]){display:contents}.ui5-responsive-popover-header{height:var(--_ui5-v2-4-0-responsive_popover_header_height);display:flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment);align-items:center;width:100%}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header-no-title{justify-content:flex-end}\n" };
var lL, cL = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let hL = lL = class extends OP {
  constructor() {
    super(), this.contentOnlyOnDesktop = false, this._hideHeader = false, this._hideCloseButton = false;
  }
  async openPopup() {
    TE() ? this._dialog && (this._dialog.open = true) : await super.openPopup();
  }
  async _show() {
    if (!TE()) return super._show();
  }
  closePopup(e6 = false, t2 = false, i2 = false) {
    var _a3;
    TE() ? (_a3 = this._dialog) == null ? void 0 : _a3.closePopup(e6, t2, i2) : super.closePopup(e6, t2, i2);
  }
  toggle(e6) {
    this.open ? this.closePopup() : (this.opener = e6, this.open = true);
  }
  get classes() {
    const e6 = super.classes;
    return e6.header = { "ui5-responsive-popover-header": true, "ui5-responsive-popover-header-no-title": !this.headerText }, e6;
  }
  get _dialog() {
    return this.shadowRoot.querySelector("[ui5-dialog]");
  }
  get contentDOM() {
    return TE() ? this._dialog.contentDOM : super.contentDOM;
  }
  get _isPhone() {
    return TE();
  }
  get _displayHeader() {
    return (TE() || !this.contentOnlyOnDesktop) && super._displayHeader;
  }
  get _displayFooter() {
    return TE() || !this.contentOnlyOnDesktop;
  }
  get _closeDialogAriaLabel() {
    return lL.i18nBundle.getText(kB);
  }
  _beforeDialogOpen(e6) {
    this._opened = true, this.open = true, this._propagateDialogEvent(e6);
  }
  _afterDialogClose(e6) {
    this._opened = false, this.open = false, this._propagateDialogEvent(e6);
  }
  _propagateDialogEvent(e6) {
    const t2 = e6.type.replace("ui5-", "");
    this.fireDecoratorEvent(t2, e6.detail);
  }
  get isModal() {
    return TE() ? this._dialog.isModal : super.isModal;
  }
};
cL([SI({ type: Boolean })], hL.prototype, "contentOnlyOnDesktop", void 0), cL([SI({ type: Boolean })], hL.prototype, "_hideHeader", void 0), cL([SI({ type: Boolean })], hL.prototype, "_hideCloseButton", void 0), cL([HM("@ui5/webcomponents")], hL, "i18nBundle", void 0), hL = lL = cL([CI({ tag: "ui5-responsive-popover", styles: [OP.styles, aL], template: function(e6, t2, i2) {
  return NM`${this._isPhone ? RD.call(this, e6, t2, i2) : ND.call(this, e6, t2, i2)}`;
}, dependencies: [...OP.dependencies, tk, sL] })], hL), hL.define();
const uL = hL;
var dL, pL = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let _L = dL = class extends wI {
  constructor() {
    super(), this.showRecentColors = false, this.showMoreColors = false, this.showDefaultColor = false, this.open = false;
  }
  get responsivePopover() {
    return this.shadowRoot.querySelector("[ui5-responsive-popover]");
  }
  get respPopover() {
    return this.shadowRoot.querySelector("[ui5-responsive-popover]");
  }
  closePopover() {
    this.open = false;
  }
  onAfterClose() {
    this.closePopover(), this.fireDecoratorEvent("close");
  }
  onAfterOpen() {
    var _a3;
    const e6 = this._colorPalette;
    e6._currentlySelected ? (_a3 = e6._currentlySelected) == null ? void 0 : _a3.focus() : e6.showRecentColors && e6.recentColorsElements.length ? e6.recentColorsElements[0].focus() : e6.showDefaultColor && e6.colorPaletteNavigationElements[0].focus(), e6.allColorsInPalette.forEach((e7) => {
      const t2 = e7.offsetHeight + 4;
      e7.style.setProperty(uS("--_ui5_color_palette_item_height"), `${t2}px`);
    });
  }
  onSelectedColor(e6) {
    this.closePopover(), this.fireDecoratorEvent("item-click", e6.detail);
  }
  get _colorPalette() {
    return this.responsivePopover.content[0].querySelector("[ui5-color-palette]");
  }
  isOpen() {
    return this.open;
  }
  get colorPaletteColors() {
    return this.getSlottedNodes("colors");
  }
  get _colorPaletteTitle() {
    return dL.i18nBundle.getText(tB);
  }
  get _cancelButtonLabel() {
    return dL.i18nBundle.getText(nB);
  }
  get _open() {
    return this.open || void 0;
  }
};
pL([SI({ type: Boolean })], _L.prototype, "showRecentColors", void 0), pL([SI({ type: Boolean })], _L.prototype, "showMoreColors", void 0), pL([SI({ type: Boolean })], _L.prototype, "showDefaultColor", void 0), pL([SI()], _L.prototype, "defaultColor", void 0), pL([SI({ type: Boolean })], _L.prototype, "open", void 0), pL([SI({ converter: bk })], _L.prototype, "opener", void 0), pL([TI({ default: true, type: HTMLElement, individualSlots: true })], _L.prototype, "colors", void 0), pL([HM("@ui5/webcomponents")], _L, "i18nBundle", void 0), _L = dL = pL([CI({ tag: "ui5-color-palette-popover", renderer: UM, styles: [BD, MD], template: function(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-responsive-popover", t2, i2)} hide-arrow content-only-on-desktop placement="Bottom" .opener="${FM(this.opener)}" ?open="${this._open}" @ui5-close="${FM(this.onAfterClose)}" @ui5-open="${FM(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><${zM("ui5-title", t2, i2)} level="H1" wrapping-type="None">${FM(this._colorPaletteTitle)}</${zM("ui5-title", t2, i2)}></div><div><${zM("ui5-color-palette", t2, i2)} ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${FM(this.defaultColor)}" popup-mode @ui5-item-click="${FM(this.onSelectedColor)}">${PM(this.colorPaletteColors, (e7, t3) => e7._id || t3, (n2, o2) => ID.call(this, e6, t2, i2, n2, o2))}</${zM("ui5-color-palette", t2, i2)}></div><div slot="footer" class="ui5-cp-footer"><${zM("ui5-button", t2, i2)} design="Transparent" @click="${this.closePopover}">${FM(this._cancelButtonLabel)}</${zM("ui5-button", t2, i2)}></div></${zM("ui5-responsive-popover", t2, i2)}>` : NM`<ui5-responsive-popover hide-arrow content-only-on-desktop placement="Bottom" .opener="${FM(this.opener)}" ?open="${this._open}" @ui5-close="${FM(this.onAfterClose)}" @ui5-open="${FM(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><ui5-title level="H1" wrapping-type="None">${FM(this._colorPaletteTitle)}</ui5-title></div><div><ui5-color-palette ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${FM(this.defaultColor)}" popup-mode @ui5-item-click="${FM(this.onSelectedColor)}">${PM(this.colorPaletteColors, (e7, t3) => e7._id || t3, (n2, o2) => ID.call(this, e6, t2, i2, n2, o2))}</ui5-color-palette></div><div slot="footer" class="ui5-cp-footer"><ui5-button design="Transparent" @click="${this.closePopover}">${FM(this._cancelButtonLabel)}</ui5-button></div></ui5-responsive-popover>`;
}, dependencies: [uL, tk, jk, TD] }), EI("item-click", { detail: { color: { type: String } }, bubbles: true }), EI("close", { bubbles: true })], _L), _L.define();
const gL = /* @__PURE__ */ new Map([["aliceblue", "f0f8ff"], ["antiquewhite", "faebd7"], ["aqua", "00ffff"], ["aquamarine", "7fffd4"], ["azure", "f0ffff"], ["beige", "f5f5dc"], ["bisque", "ffe4c4"], ["black", "000000"], ["blanchedalmond", "ffebcd"], ["blue", "0000ff"], ["blueviolet", "8a2be2"], ["brown", "a52a2a"], ["burlywood", "deb887"], ["cadetblue", "5f9ea0"], ["chartreuse", "7fff00"], ["chocolate", "d2691e"], ["coral", "ff7f50"], ["cornflowerblue", "6495ed"], ["cornsilk", "fff8dc"], ["crimson", "dc143c"], ["cyan", "00ffff"], ["darkblue", "00008b"], ["darkcyan", "008b8b"], ["darkgoldenrod", "b8860b"], ["darkgray", "a9a9a9"], ["darkgrey", "a9a9a9"], ["darkgreen", "006400"], ["darkkhaki", "bdb76b"], ["darkmagenta", "8b008b"], ["darkolivegreen", "556b2f"], ["darkorange", "ff8c00"], ["darkorchid", "9932cc"], ["darkred", "8b0000"], ["darksalmon", "e9967a"], ["darkseagreen", "8fbc8f"], ["darkslateblue", "483d8b"], ["darkslategray", "2f4f4f"], ["darkslategrey", "2f4f4f"], ["darkturquoise", "00ced1"], ["darkviolet", "9400d3"], ["deeppink", "ff1493"], ["deepskyblue", "00bfff"], ["dimgray", "696969"], ["dimgrey", "696969"], ["dodgerblue", "1e90ff"], ["firebrick", "b22222"], ["floralwhite", "fffaf0"], ["forestgreen", "228b22"], ["fuchsia", "ff00ff"], ["gainsboro", "dcdcdc"], ["ghostwhite", "f8f8ff"], ["gold", "ffd700"], ["goldenrod", "daa520"], ["gray", "808080"], ["grey", "808080"], ["green", "008000"], ["greenyellow", "adff2f"], ["honeydew", "f0fff0"], ["hotpink", "ff69b4"], ["indianred", "cd5c5c"], ["indigo", "4b0082"], ["ivory", "fffff0"], ["khaki", "f0e68c"], ["lavender", "e6e6fa"], ["lavenderblush", "fff0f5"], ["lawngreen", "7cfc00"], ["lemonchiffon", "fffacd"], ["lightblue", "add8e6"], ["lightcoral", "f08080"], ["lightcyan", "e0ffff"], ["lightgoldenrodyellow", "fafad2"], ["lightgray", "d3d3d3"], ["lightgrey", "d3d3d3"], ["lightgreen", "90ee90"], ["lightpink", "ffb6c1"], ["lightsalmon", "ffa07a"], ["lightseagreen", "20b2aa"], ["lightskyblue", "87cefa"], ["lightslategray", "778899"], ["lightslategrey", "778899"], ["lightsteelblue", "b0c4de"], ["lightyellow", "ffffe0"], ["lime", "00ff00"], ["limegreen", "32cd32"], ["linen", "faf0e6"], ["magenta", "ff00ff"], ["maroon", "800000"], ["mediumaquamarine", "66cdaa"], ["mediumblue", "0000cd"], ["mediumorchid", "ba55d3"], ["mediumpurple", "9370db"], ["mediumseagreen", "3cb371"], ["mediumslateblue", "7b68ee"], ["mediumspringgreen", "00fa9a"], ["mediumturquoise", "48d1cc"], ["mediumvioletred", "c71585"], ["midnightblue", "191970"], ["mintcream", "f5fffa"], ["mistyrose", "ffe4e1"], ["moccasin", "ffe4b5"], ["navajowhite", "ffdead"], ["navy", "000080"], ["oldlace", "fdf5e6"], ["olive", "808000"], ["olivedrab", "6b8e23"], ["orange", "ffa500"], ["orangered", "ff4500"], ["orchid", "da70d6"], ["palegoldenrod", "eee8aa"], ["palegreen", "98fb98"], ["paleturquoise", "afeeee"], ["palevioletred", "db7093"], ["papayawhip", "ffefd5"], ["peachpuff", "ffdab9"], ["peru", "cd853f"], ["pink", "ffc0cb"], ["plum", "dda0dd"], ["powderblue", "b0e0e6"], ["purple", "800080"], ["red", "ff0000"], ["rosybrown", "bc8f8f"], ["royalblue", "4169e1"], ["saddlebrown", "8b4513"], ["salmon", "fa8072"], ["sandybrown", "f4a460"], ["seagreen", "2e8b57"], ["seashell", "fff5ee"], ["sienna", "a0522d"], ["silver", "c0c0c0"], ["skyblue", "87ceeb"], ["slateblue", "6a5acd"], ["slategray", "708090"], ["slategrey", "708090"], ["snow", "fffafa"], ["springgreen", "00ff7f"], ["steelblue", "4682b4"], ["tan", "d2b48c"], ["teal", "008080"], ["thistle", "d8bfd8"], ["tomato", "ff6347"], ["turquoise", "40e0d0"], ["violet", "ee82ee"], ["wheat", "f5deb3"], ["white", "ffffff"], ["whitesmoke", "f5f5f5"], ["yellow", "ffff00"], ["yellowgreen", "9acd32"], ["transparent", "00000000"]]), mL = (e6) => e6.startsWith("rgba") ? fL(e6) : e6.startsWith("rgb") ? vL(e6) : (0 === e6.indexOf("#") && (e6 = 4 === e6.length ? `${e6[1]}${e6[1]}${e6[2]}${e6[2]}${e6[3]}${e6[3]}` : e6.slice(1, e6.length)), gL.has(e6) && (e6 = gL.get(e6)), bL(e6)), fL = (e6) => {
  const t2 = e6.indexOf("("), i2 = [];
  for (let t3 = 0; t3 < e6.length; t3++) "," === e6[t3] && i2.push(t3);
  return { r: parseInt(e6.slice(t2 + 1, i2[0]).trim()), g: parseInt(e6.slice(i2[0] + 1, i2[1]).trim()), b: parseInt(e6.slice(i2[1] + 1, i2[2]).trim()) };
}, vL = (e6) => {
  const t2 = e6.indexOf("("), i2 = e6.indexOf(")"), n2 = [];
  for (let t3 = 0; t3 < e6.length; t3++) "," === e6[t3] && n2.push(t3);
  return { r: parseInt(e6.slice(t2 + 1, n2[0]).trim()), g: parseInt(e6.slice(n2[0] + 1, n2[1]).trim()), b: parseInt(e6.slice(n2[1] + 1, i2).trim()) };
}, AL = (e6) => {
  let t2, i2, n2, o2 = 100 * e6.s, r2 = 100 * e6.l;
  o2 > 100 ? o2 = 1 : o2 < 0 ? o2 = 0 : o2 /= 100, r2 > 100 ? r2 = 1 : r2 < 0 ? r2 = 0 : r2 /= 100;
  const s2 = e6.h, a2 = o2 * (1 - Math.abs(2 * r2 - 1)), l2 = 255 * (r2 - 0.5 * a2), c2 = l2 + 255 * (a2 * (1 - Math.abs(s2 / 60 % 2 - 1))), h2 = l2 + 255 * a2;
  switch (Math.floor(s2 / 60)) {
    case 0:
      t2 = h2, i2 = c2, n2 = l2;
      break;
    case 1:
      t2 = c2, i2 = h2, n2 = l2;
      break;
    case 2:
      t2 = l2, i2 = h2, n2 = c2;
      break;
    case 3:
      t2 = l2, i2 = c2, n2 = h2;
      break;
    case 4:
      t2 = c2, i2 = l2, n2 = h2;
      break;
    case 5:
      t2 = h2, i2 = l2, n2 = c2;
      break;
    default:
      t2 = 0, i2 = 0, n2 = 0;
  }
  return { r: Math.round(t2), g: Math.round(i2), b: Math.round(n2) };
}, bL = (e6) => ({ r: parseInt(e6.substr(0, 2), 16), g: parseInt(e6.substr(2, 2), 16), b: parseInt(e6.substr(4, 2), 16) });
var yL = /[\x00-\x2b\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff\u2028\u2029]/g, wL = /[\x00-\x08\x0b\x0c\x0e-\x1f\x7f-\x9f]/, xL = { "<": "&lt;", ">": "&gt;", "&": "&amp;", '"': "&quot;" }, CL = function(e6) {
  var t2 = xL[e6];
  return t2 || (t2 = wL.test(e6) ? "&#xfffd;" : "&#x" + (e6.charCodeAt(0).toString(16) + ";"), xL[e6] = t2), t2;
};
CT("not-editable", { pathData: "M443 104q5 7 5 12 0 6-5 11L118 453q-4 4-8 4L0 480l22-110q0-5 4-9L352 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L52 381l46 46zm158 116l32 32-66 63 66 66-32 32-63-66-65 66-33-32 66-66-66-63 33-32 65 64z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
var SL;
CT("not-editable", { pathData: "M504 94q7 7 7 18t-7 18L130 504q-8 8-18 8H26q-11 0-18.5-7.5T0 486v-86q0-9 7-18L381 8q8-8 18-8 12 0 18 8zM363 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50zm56 356q7 7 7 18t-7.5 18.5T486 512q-10 0-18-8l-37-37-38 37q-8 8-18 8-11 0-18.5-7.5T349 486q0-10 8-18l38-37-38-38q-8-8-8-18 0-11 7.5-18.5T375 349q10 0 18 8l38 37 37-37q8-8 18-8 11 0 18.5 7.5T512 375t-7 18l-38 38z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), function(e6) {
  e6.Text = "Text", e6.Email = "Email", e6.Number = "Number", e6.Password = "Password", e6.Tel = "Tel", e6.URL = "URL", e6.Search = "Search";
}(SL || (SL = {}));
const EL = SL;
function TL(e6, t2, i2) {
  return i2 ? NM`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><${zM("ui5-icon", t2, i2)} part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${FM(this.clearIconAccessibleName)}"></${zM("ui5-icon", t2, i2)}></div>` : NM`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><ui5-icon part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${FM(this.clearIconAccessibleName)}"></ui5-icon></div>`;
}
function IL(e6, t2, i2) {
  return NM`<div class="ui5-input-icon-root"><slot name="icon"></slot></div>`;
}
function ML(e6, t2, i2) {
  return NM`<span id="suggestionsText" class="ui5-hidden-text">${FM(this.suggestionsText)}</span><span id="selectionText" class="ui5-hidden-text" aria-live="polite" role="status"></span><span id="suggestionsCount" class="ui5-hidden-text" aria-live="polite">${FM(this.availableSuggestionsCount)}</span>`;
}
function BL(e6, t2, i2) {
  return NM`<span id="descr" class="ui5-hidden-text">${FM(this.accInfo.input.ariaDescription)}</span>`;
}
function RL(e6, t2, i2) {
  return NM`<span id="valueStateDesc" class="ui5-hidden-text">${FM(this.ariaValueStateHiddenText)}</span>`;
}
function kL(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-responsive-popover", t2, i2)} class="${DM(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${LM(this.styles.suggestionsPopover)}" @ui5-open="${FM(this._afterOpenPicker)}" @ui5-close="${FM(this._afterClosePicker)}" @ui5-scroll="${FM(this._scroll)}" .open=${FM(this.open)} .opener=${FM(this)} accessible-name="${FM(this._popupLabel)}">${this._isPhone ? PL.call(this, e6, t2, i2) : void 0}${this._isPhone ? void 0 : OL.call(this, e6, t2, i2)}<${zM("ui5-list", t2, i2)} separators="${FM(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${FM(this._handleSuggestionItemPress)}" @ui5-selection-change="${FM(this._handleSelectionChange)}"><slot></slot></${zM("ui5-list", t2, i2)}>${this._isPhone ? VL.call(this, e6, t2, i2) : void 0}</${zM("ui5-responsive-popover", t2, i2)}>` : NM`<ui5-responsive-popover class="${DM(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${LM(this.styles.suggestionsPopover)}" @ui5-open="${FM(this._afterOpenPicker)}" @ui5-close="${FM(this._afterClosePicker)}" @ui5-scroll="${FM(this._scroll)}" .open=${FM(this.open)} .opener=${FM(this)} accessible-name="${FM(this._popupLabel)}">${this._isPhone ? PL.call(this, e6, t2, i2) : void 0}${this._isPhone ? void 0 : OL.call(this, e6, t2, i2)}<ui5-list separators="${FM(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${FM(this._handleSuggestionItemPress)}" @ui5-selection-change="${FM(this._handleSelectionChange)}"><slot></slot></ui5-list>${this._isPhone ? VL.call(this, e6, t2, i2) : void 0}</ui5-responsive-popover>`;
}
function PL(e6, t2, i2) {
  return i2 ? NM`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${FM(this._headerTitleText)}</span><${zM("ui5-button", t2, i2)} class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></${zM("ui5-button", t2, i2)}></div><div class="row"><div class="input-root-phone native-input-wrapper"><${zM("ui5-input", t2, i2)} class="ui5-input-inner-phone" type="${FM(this.inputType)}" .value="${FM(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${FM(this.placeholder)}" @ui5-input="${FM(this._handleInput)}" @ui5-change="${FM(this._handleChange)}"></${zM("ui5-input", t2, i2)}></div></div></div>${this.hasValueStateMessage ? DL.call(this, e6, t2, i2) : void 0}` : NM`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${FM(this._headerTitleText)}</span><ui5-button class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></ui5-button></div><div class="row"><div class="input-root-phone native-input-wrapper"><ui5-input class="ui5-input-inner-phone" type="${FM(this.inputType)}" .value="${FM(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${FM(this.placeholder)}" @ui5-input="${FM(this._handleInput)}" @ui5-change="${FM(this._handleChange)}"></ui5-input></div></div></div>${this.hasValueStateMessage ? DL.call(this, e6, t2, i2) : void 0}`;
}
function DL(e6, t2, i2) {
  return i2 ? NM`<div class="${DM(this.classes.popoverValueState)}" style="${LM(this.styles.suggestionPopoverHeader)}"><${zM("ui5-icon", t2, i2)} class="ui5-input-value-state-message-icon" name="${FM(this._valueStateMessageInputIcon)}"></${zM("ui5-icon", t2, i2)}>${this.open ? LL.call(this, e6, t2, i2) : void 0}</div>` : NM`<div class="${DM(this.classes.popoverValueState)}" style="${LM(this.styles.suggestionPopoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${FM(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open ? LL.call(this, e6, t2, i2) : void 0}</div>`;
}
function LL(e6, t2, i2) {
  return NM`${this.shouldDisplayDefaultValueStateMessage ? FL.call(this, e6, t2, i2) : NL.call(this, e6, t2, i2)}`;
}
function FL(e6, t2, i2) {
  return NM`${FM(this.valueStateText)}`;
}
function NL(e6, t2, i2) {
  return NM`<slot name="valueStateMessage"></slot>`;
}
function OL(e6, t2, i2) {
  return NM`${this.hasValueStateMessage ? UL.call(this, e6, t2, i2) : void 0}`;
}
function UL(e6, t2, i2) {
  return i2 ? NM`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${DM(this.classes.popoverValueState)}" style=${LM(this.styles.suggestionPopoverHeader)}><${zM("ui5-icon", t2, i2)} class="ui5-input-value-state-message-icon" name="${FM(this._valueStateMessageInputIcon)}"></${zM("ui5-icon", t2, i2)}>${this.open ? zL.call(this, e6, t2, i2) : void 0}</div>` : NM`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${DM(this.classes.popoverValueState)}" style=${LM(this.styles.suggestionPopoverHeader)}><ui5-icon class="ui5-input-value-state-message-icon" name="${FM(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open ? zL.call(this, e6, t2, i2) : void 0}</div>`;
}
function zL(e6, t2, i2) {
  return NM`${this.shouldDisplayDefaultValueStateMessage ? HL.call(this, e6, t2, i2) : QL.call(this, e6, t2, i2)}`;
}
function HL(e6, t2, i2) {
  return NM`${FM(this.valueStateText)}`;
}
function QL(e6, t2, i2) {
  return NM`<slot name="valueStateMessage"></slot>`;
}
function VL(e6, t2, i2) {
  return i2 ? NM`<div slot="footer" class="ui5-responsive-popover-footer"><${zM("ui5-button", t2, i2)} design="Transparent" @click="${this._closePicker}">OK</${zM("ui5-button", t2, i2)}></div>` : NM`<div slot="footer" class="ui5-responsive-popover-footer"><ui5-button design="Transparent" @click="${this._closePicker}">OK</ui5-button></div>`;
}
function GL(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-popover", t2, i2)} skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${FM(this._valueStatePopoverHorizontalAlign)}" .opener=${FM(this)} .open=${FM(this.valueStateOpen)} @ui5-close="${FM(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${DM(this.classes.popoverValueState)}" style="${LM(this.styles.popoverHeader)}"><${zM("ui5-icon", t2, i2)} class="ui5-input-value-state-message-icon" name="${FM(this._valueStateMessageInputIcon)}"></${zM("ui5-icon", t2, i2)}>${this.valueStateOpen ? qL.call(this, e6, t2, i2) : void 0}</div></${zM("ui5-popover", t2, i2)}>` : NM`<ui5-popover skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${FM(this._valueStatePopoverHorizontalAlign)}" .opener=${FM(this)} .open=${FM(this.valueStateOpen)} @ui5-close="${FM(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${DM(this.classes.popoverValueState)}" style="${LM(this.styles.popoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${FM(this._valueStateMessageInputIcon)}"></ui5-icon>${this.valueStateOpen ? qL.call(this, e6, t2, i2) : void 0}</div></ui5-popover>`;
}
function qL(e6, t2, i2) {
  return NM`${this.shouldDisplayDefaultValueStateMessage ? $L.call(this, e6, t2, i2) : WL.call(this, e6, t2, i2)}`;
}
function $L(e6, t2, i2) {
  return NM`${FM(this.valueStateText)}`;
}
function WL(e6, t2, i2) {
  return NM`<slot name="valueStateMessage"></slot>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const jL = { packageName: "@ui5/webcomponents", fileName: "themes/Input.css.ts", content: ':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host(:not([hidden])){display:inline-block}:host{width:var(--_ui5-v2-4-0_input_width);min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);font-style:normal;border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box;text-align:start;transition:var(--_ui5-v2-4-0_input_transition);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color)}:host(:not([readonly])),:host([readonly][disabled]){box-shadow:var(--sapField_Shadow)}:host([focused]:not([opened])){border-color:var(--_ui5-v2-4-0_input_focused_border_color);background-color:var(--sapField_Focus_Background)}.ui5-input-focusable-element{position:relative}:host([focused]:not([opened])) .ui5-input-focusable-element:after{content:var(--ui5-v2-4-0_input_focus_pseudo_element_content);position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--_ui5-v2-4-0_input_focus_outline_color);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}:host([focused][readonly]:not([opened])) .ui5-input-focusable-element:after{top:var(--_ui5-v2-4-0_input_readonly_focus_offset);bottom:var(--_ui5-v2-4-0_input_readonly_focus_offset);left:var(--_ui5-v2-4-0_input_readonly_focus_offset);right:var(--_ui5-v2-4-0_input_readonly_focus_offset);border-radius:var(--_ui5-v2-4-0_input_readonly_focus_border_radius)}.ui5-input-root:before{content:"";position:absolute;width:calc(100% - 2px);left:1px;bottom:-2px;border-bottom-left-radius:8px;border-bottom-right-radius:8px;height:var(--_ui5-v2-4-0_input_bottom_border_height);transition:var(--_ui5-v2-4-0_input_transition);background-color:var(--_ui5-v2-4-0_input_bottom_border_color)}.ui5-input-root{width:100%;height:100%;position:relative;background:transparent;display:inline-block;outline:none;box-sizing:border-box;color:inherit;transition:border-color .2s ease-in-out;border-radius:var(--_ui5-v2-4-0_input_border_radius);overflow:hidden}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([disabled]) .ui5-input-root:before,:host([readonly]) .ui5-input-root:before{content:none}[inner-input]{background:transparent;color:inherit;border:none;font-style:inherit;-webkit-appearance:none;-moz-appearance:textfield;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;width:100%;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;text-align:inherit}[inner-input][inner-input-with-icon]{padding:var(--_ui5-v2-4-0_input_inner_padding_with_icon)}[inner-input][type=search]::-webkit-search-decoration,[inner-input][type=search]::-webkit-search-cancel-button,[inner-input][type=search]::-webkit-search-results-button,[inner-input][type=search]::-webkit-search-results-decoration{display:none}.ui5-input-value-state-icon{height:100%;display:var(--_ui5-v2-4-0-input-value-state-icon-display);align-items:center}.ui5-input-value-state-icon>svg{margin-right:8px}[inner-input]::selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}:host([disabled]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([disabled]) [inner-input]::-moz-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-moz-placeholder{visibility:hidden}[inner-input]::-webkit-input-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}[inner-input]::-moz-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}:host([value-state="Negative"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Negative"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-webkit-input-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-moz-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Positive"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Positive"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}.ui5-input-content{height:100%;box-sizing:border-box;display:flex;flex-direction:row;justify-content:flex-end;overflow:hidden;outline:none;background:transparent;color:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([value-state="None"]:not([readonly]):hover),:host(:not([value-state]):not([readonly]):hover){border:var(--_ui5-v2-4-0_input_hover_border);border-color:var(--_ui5-v2-4-0_input_focused_border_color);box-shadow:var(--sapField_Hover_Shadow);background:var(--sapField_Hover_BackgroundStyle);background-color:var(--sapField_Hover_Background)}:host(:not([value-state]):not([readonly])[focused]:not([opened]):hover),:host([value-state="None"]:not([readonly])[focused]:not([opened]):hover){box-shadow:none}:host([focused]):not([opened]) .ui5-input-root:before{content:none}:host(:not([readonly]):not([disabled])[value-state]:not([value-state="None"])){border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]) [inner-input],:host([value-state="Critical"]) [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style);text-indent:var(--_ui5-v2-4-0_input_error_warning_text_indent)}:host([value-state="Negative"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}:host([value-state="Critical"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_warning_font_weight)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}:host([value-state="Negative"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0-input-value-state-error-border-botom-color)}:host([value-state="Negative"]:not([readonly]):not([focused]):hover),:host([value-state="Negative"]:not([readonly])[focused][opened]:hover){background-color:var(--_ui5-v2-4-0_input_value_state_error_hover_background);box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])),:host([value-state="Critical"]:not([readonly]):not([disabled])),:host([value-state="Information"]:not([readonly]):not([disabled])){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}:host([value-state="Critical"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_warning_border_botom_color)}:host([value-state="Critical"]:not([readonly]):not([focused]):hover),:host([value-state="Critical"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}:host([value-state="Positive"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_success_border_botom_color)}:host([value-state="Positive"]:not([readonly]):not([focused]):hover),:host([value-state="Positive"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Information"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}:host([value-state="Information"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_success_information_border_botom_color)}:host([value-state="Information"]:not([readonly]):not([focused]):hover),:host([value-state="Information"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_InformationShadow)}.ui5-input-icon-root{min-width:var(--_ui5-v2-4-0_input_icon_min_width);height:100%;display:flex;justify-content:center;align-items:center}::slotted([ui5-icon][slot="icon"]){align-self:start;padding:var(--_ui5-v2-4-0_input_custom_icon_padding);box-sizing:content-box!important}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Negative"][focused]) .inputIcon,:host([value-state="Critical"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_focused_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host([value-state="Information"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_focused_icon_padding)}:host([value-state="Negative"]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_icon_padding)}:host([value-state="Negative"][focused]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"][focused]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding)}:host([value-state="Information"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_icon_padding)}:host([value-state="Information"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_focused_icon_padding)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}.ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_height);padding:0;width:var(--_ui5-v2-4-0_input_icon_width);min-width:var(--_ui5-v2-4-0_input_icon_width);display:flex;justify-content:center;align-items:center;box-sizing:border-box}:host([value-state]:not([value-state="None"]):not([value-state="Positive"])) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_state_height);vertical-align:top}:host([value-state="Positive"]) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_success_state_height)}[ui5-icon].ui5-input-clear-icon{padding:0;color:inherit}[inner-input]::-webkit-outer-spin-button,[inner-input]::-webkit-inner-spin-button{-webkit-appearance:inherit;margin:inherit}\n' };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const XL = { packageName: "@ui5/webcomponents", fileName: "themes/ValueStateMessage.css.ts", content: '.ui5-valuestatemessage-popover{border-radius:var(--_ui5-v2-4-0_value_state_message_popover_border_radius);box-shadow:var(--_ui5-v2-4-0_value_state_message_popover_box_shadow)}.ui5-input-value-state-message-icon{width:var(--_ui5-v2-4-0_value_state_message_icon_width);height:var(--_ui5-v2-4-0_value_state_message_icon_height);display:var(--_ui5-v2-4-0_input_value_state_icon_display);position:absolute;padding-right:.375rem}.ui5-valuestatemessage-root .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_input_value_state_icon_offset)}.ui5-input-value-state-message-icon[name=error]{color:var(--sapNegativeElementColor)}.ui5-input-value-state-message-icon[name=alert]{color:var(--sapCriticalElementColor)}.ui5-input-value-state-message-icon[name=success]{color:var(--sapPositiveElementColor)}.ui5-input-value-state-message-icon[name=information]{color:var(--sapInformativeElementColor)}.ui5-valuestatemessage-root{box-sizing:border-box;display:inline-block;color:var(--sapTextColor);font-size:var(--sapFontSmallSize);font-family:"72override",var(--sapFontFamily);height:auto;padding:var(--_ui5-v2-4-0_value_state_message_padding);overflow:hidden;text-overflow:ellipsis;min-width:6.25rem;border:var(--_ui5-v2-4-0_value_state_message_border);line-height:var(--_ui5-v2-4-0_value_state_message_line_height)}[ui5-responsive-popover] .ui5-valuestatemessage-header,[ui5-popover] .ui5-valuestatemessage-header{min-height:2rem}[ui5-responsive-popover] .ui5-valuestatemessage-header{padding:var(--_ui5-v2-4-0_value_state_header_padding);border:var(--_ui5-v2-4-0_value_state_header_border);border-bottom:var(--_ui5-v2-4-0_value_state_header_border_bottom);flex-grow:1;position:relative}.ui5-valuestatemessage--success{background:var(--sapSuccessBackground)}.ui5-valuestatemessage--warning{background:var(--sapWarningBackground)}.ui5-valuestatemessage--error{background:var(--sapErrorBackground)}.ui5-valuestatemessage--information{background:var(--sapInformationBackground)}.ui5-responsive-popover-header[focused],.ui5-responsive-popover-header:focus{outline-offset:var(--_ui5-v2-4-0_value_state_header_offset);outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor)}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(content){padding:0}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(footer){min-height:0}.ui5-valuestatemessage-popover::part(header),.ui5-popover-with-value-state-header::part(header),.ui5-popover-with-value-state-header-phone::part(header){margin-bottom:0}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-root{padding:var(--_ui5-v2-4-0_value_state_message_padding_phone);width:100%}.ui5-popover-with-value-state-header-phone .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_value_state_message_icon_offset_phone)}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-header{position:relative;flex:none;top:0;left:0}.ui5-popover-with-value-state-header-phone::part(content){padding:0;overflow:hidden;display:flex;flex-direction:column}.ui5-popover-with-value-state-header-phone [ui5-list]{overflow:auto}[ui5-responsive-popover] .ui5-valuestatemessage--error{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_error)}[ui5-responsive-popover] .ui5-valuestatemessage--information{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_information)}[ui5-responsive-popover] .ui5-valuestatemessage--success{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_success)}[ui5-responsive-popover] .ui5-valuestatemessage--warning{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_warning)}[ui5-responsive-popover].ui5-popover-with-value-state-header .ui5-valuestatemessage-root:has(+[ui5-list]:empty){box-shadow:none}\n' };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const YL = { packageName: "@ui5/webcomponents", fileName: "themes/Suggestions.css.ts", content: ".ui5-suggestions-popover{box-shadow:var(--sapContent_Shadow1)}.ui5-suggestions-popover::part(header),.ui5-suggestions-popover::part(content){padding:0}.ui5-suggestions-popover::part(footer){padding:0 1rem}.input-root-phone.native-input-wrapper{display:contents}.input-root-phone.native-input-wrapper:before{display:none}.native-input-wrapper .ui5-input-inner-phone{margin:0}\n" };
var KL, ZL, JL, eF = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
!function(e6) {
  e6.CHANGE = "change", e6.INPUT = "input", e6.SELECTION_CHANGE = "selection-change";
}(ZL || (ZL = {})), function(e6) {
  e6.ACTION_ENTER = "enter", e6.ACTION_USER_INPUT = "input";
}(JL || (JL = {}));
let tF = KL = class extends wI {
  get formValidityMessage() {
    return KL.i18nBundle.getText(nR);
  }
  get _effectiveShowSuggestions() {
    return !(!this.showSuggestions || !this.Suggestions);
  }
  get formValidity() {
    return { valueMissing: this.required && !this.value };
  }
  async formElementAnchor() {
    return this.getFocusDomRefAsync();
  }
  get formFormattedValue() {
    return this.value;
  }
  constructor() {
    super(), this.disabled = false, this.highlight = false, this.readonly = false, this.required = false, this.noTypeahead = false, this.type = "Text", this.value = "", this._innerValue = "", this.valueState = "None", this.showSuggestions = false, this.showClearIcon = false, this.open = false, this._effectiveShowClearIcon = false, this.focused = false, this.valueStateOpen = false, this._isValueStateFocused = false, this._inputAccInfo = {}, this._nativeInputAttributes = {}, this._inputIconFocused = false, this.hasSuggestionItemSelected = false, this.valueBeforeItemSelection = "", this.valueBeforeSelectionStart = "", this.previousValue = "", this.firstRendering = true, this.typedInValue = "", this.lastConfirmedValue = "", this.isTyping = false, this._isLatestValueFromSuggestions = false, this._handleResizeBound = this._handleResize.bind(this), this._keepInnerValue = false, this._focusedAfterClear = false;
  }
  onEnterDOM() {
    kk.register(this, this._handleResizeBound), _R(this, this._updateAssociatedLabelsTexts.bind(this));
  }
  onExitDOM() {
    kk.deregister(this, this._handleResizeBound), ((e6) => {
      const t2 = aR.get(e6);
      t2 && ([...t2.observedElements].forEach((e7) => {
        mR(t2, e7);
      }), e6.detachInvalidate(t2.invalidationCallback), aR.delete(e6));
    })(this);
  }
  _highlightSuggestionItem(e6) {
    var _a3;
    e6.markupText = this.typedInValue ? (_a3 = this.Suggestions) == null ? void 0 : _a3.hightlightInput(e6.text || "", this.typedInValue) : (e6.text || "").replace(yL, CL);
  }
  _isGroupItem(e6) {
    return e6.hasAttribute("ui5-suggestion-item-group");
  }
  onBeforeRendering() {
    this._keepInnerValue || (this._innerValue = null === this.value ? "" : this.value), this.showSuggestions && (this.enableSuggestions(), this._flattenItems.forEach((e7) => {
      var _a3;
      e7.hasAttribute("ui5-suggestion-item") ? this._highlightSuggestionItem(e7) : this._isGroupItem(e7) && ((_a3 = e7.items) == null ? void 0 : _a3.forEach((e8) => {
        this._highlightSuggestionItem(e8);
      }));
    })), this._effectiveShowClearIcon = this.showClearIcon && !!this.value && !this.readonly && !this.disabled, this.style.setProperty(uS("--_ui5-input-icons-count"), `${this.iconsCount}`);
    const e6 = !!this._flattenItems.length, t2 = !!this.value, i2 = this.shadowRoot.querySelector("input") === wM();
    this.shouldDisplayOnlyValueStateMessage ? this.openValueStatePopover() : this.closeValueStatePopover();
    this.disabled || this.readonly ? this.open = false : this._isPhone || (this.open = e6 && (this.open || t2 && i2 && this.isTyping));
    const n2 = this.value, o2 = this.getInputDOMRefSync();
    if (!o2 || !n2) return;
    const r2 = o2.selectionEnd - o2.selectionStart;
    if (this._shouldAutocomplete && !AE.android && !AE.androidPhone && !r2 && !this._isKeyNavigation) {
      const e7 = this._getFirstMatchingItem(n2);
      e7 && this._handleTypeAhead(e7);
    }
  }
  onAfterRendering() {
    var _a3;
    const e6 = this.getInputDOMRefSync();
    this.showSuggestions && ((_a3 = this.Suggestions) == null ? void 0 : _a3._getPicker()) && (this._listWidth = this.Suggestions._getListWidth()), this._performTextSelection && (e6.value !== this._innerValue && (e6.value = this._innerValue), this.typedInValue.length && this.value.length && e6.setSelectionRange(this.typedInValue.length, this.value.length), this.fireDecoratorEvent("type-ahead")), this._performTextSelection = false;
  }
  _onkeydown(e6) {
    return this._isKeyNavigation = true, this._shouldAutocomplete = !this.noTypeahead && !(((e7) => (e7.key ? "Backspace" === e7.key : e7.keyCode === II) && !AM(e7))(e6) || pM(e6) || hM(e6)), ZI(e6) ? this._handleUp(e6) : JI(e6) ? this._handleDown(e6) : jI(e6) ? this._handleSpace(e6) : uM(e6) ? this._handleTab() : WI(e6) ? this._handleEnter(e6) : _M(e6) ? this._handlePageUp(e6) : gM(e6) ? this._handlePageDown(e6) : lM(e6) ? this._handleHome(e6) : cM(e6) ? this._handleEnd(e6) : hM(e6) ? this._handleEscape() : (this.showSuggestions && this._clearPopoverFocusAndSelection(), this._keyDown = true, void (this._isKeyNavigation = false));
  }
  _onkeyup(e6) {
    pM(e6) && (this.value = e6.target.value), this._keyDown = false;
  }
  _handleUp(e6) {
    var _a3;
    ((_a3 = this.Suggestions) == null ? void 0 : _a3.isOpened()) && this.Suggestions.onUp(e6);
  }
  _handleDown(e6) {
    var _a3;
    ((_a3 = this.Suggestions) == null ? void 0 : _a3.isOpened()) && this.Suggestions.onDown(e6);
  }
  _handleSpace(e6) {
    this.Suggestions && this.Suggestions.onSpace(e6);
  }
  _handleTab() {
    this.Suggestions && this.previousValue !== this.value && this.Suggestions.onTab();
  }
  _handleEnter(e6) {
    var _a3;
    const t2 = !!((_a3 = this.Suggestions) == null ? void 0 : _a3.onEnter(e6)), i2 = this.getInputDOMRefSync(), n2 = this._selectableItems.find((e7) => e7.text === this.value);
    if (n2) {
      const e7 = n2.text || "";
      i2.setSelectionRange(e7.length, e7.length), t2 || (this.fireSelectionChange(n2, true), this.acceptSuggestion(n2, true), this.open = false);
    }
    if (!this._isPhone || this._flattenItems.length || this.isTypeNumber || i2.setSelectionRange(this.value.length, this.value.length), !t2) return this.lastConfirmedValue = this.value, void (this._internals.form && rI(this));
    this.focused = true;
  }
  _handlePageUp(e6) {
    var _a3;
    this._isSuggestionsFocused ? (_a3 = this.Suggestions) == null ? void 0 : _a3.onPageUp(e6) : e6.preventDefault();
  }
  _handlePageDown(e6) {
    var _a3;
    this._isSuggestionsFocused ? (_a3 = this.Suggestions) == null ? void 0 : _a3.onPageDown(e6) : e6.preventDefault();
  }
  _handleHome(e6) {
    var _a3;
    this._isSuggestionsFocused && ((_a3 = this.Suggestions) == null ? void 0 : _a3.onHome(e6));
  }
  _handleEnd(e6) {
    var _a3;
    this._isSuggestionsFocused && ((_a3 = this.Suggestions) == null ? void 0 : _a3.onEnd(e6));
  }
  _handleEscape() {
    var _a3;
    const e6 = this.showSuggestions && !!this.Suggestions && this.open, t2 = this.getInputDOMRefSync(), i2 = t2.selectionEnd - t2.selectionStart > 0;
    if (this.isTyping = false, e6) {
      if (e6 && ((_a3 = this.Suggestions) == null ? void 0 : _a3._isItemOnTarget())) return this.value = this.typedInValue || this.valueBeforeSelectionStart, void (this.focused = true);
      i2 && (this.value = this.typedInValue), this._isValueStateFocused && (this._isValueStateFocused = false, this.focused = true);
    } else this.value = this.lastConfirmedValue ? this.lastConfirmedValue : this.previousValue;
  }
  _onfocusin(e6) {
    this.focused = true, this._focusedAfterClear || (this.previousValue = this.value), this.valueBeforeSelectionStart = this.value, this._inputIconFocused = !!e6.target && e6.target === this.querySelector("[ui5-icon]"), this._focusedAfterClear = false;
  }
  innerFocusIn() {
  }
  _onfocusout(e6) {
    var _a3;
    const t2 = e6.relatedTarget;
    ((_a3 = this.Suggestions) == null ? void 0 : _a3._getPicker().contains(t2)) || this.contains(t2) || this.getSlottedNodes("valueStateMessage").some((e7) => e7.contains(t2)) || (this._keepInnerValue = false, this.focused = false, this.showClearIcon && !this._effectiveShowClearIcon && (this._clearIconClicked = false, this._handleChange()), this.open = false, this._clearPopoverFocusAndSelection(), this._clearIconClicked || (this.previousValue = ""), this.lastConfirmedValue = "", this.isTyping = false);
  }
  _clearPopoverFocusAndSelection() {
    var _a3, _b3;
    this.showSuggestions && this.Suggestions && (this._isValueStateFocused = false, this.hasSuggestionItemSelected = false, (_a3 = this.Suggestions) == null ? void 0 : _a3._deselectItems(), (_b3 = this.Suggestions) == null ? void 0 : _b3._clearItemFocus());
  }
  _click() {
    TE() && !this.readonly && this.Suggestions && (this.blur(), this.open = true);
  }
  _handleChange() {
    var _a3;
    if (this._clearIconClicked) return void (this._clearIconClicked = false);
    const e6 = () => {
      this.fireDecoratorEvent(ZL.CHANGE), this.previousValue = this.value, this.typedInValue = this.value;
    };
    this.previousValue !== this.getInputDOMRefSync().value && (((_a3 = this.Suggestions) == null ? void 0 : _a3._getPicker().open) && this._flattenItems.some((e7) => e7.hasAttribute("ui5-suggestion-item") && e7.selected) ? this._changeToBeFired = true : e6());
  }
  _clear() {
    const e6 = this.value;
    this.value = "";
    this.fireDecoratorEvent(ZL.INPUT, { inputType: "" }) ? this._isPhone || (this.fireResetSelectionChange(), this.focus(), this._focusedAfterClear = true) : this.value = e6;
  }
  _iconMouseDown() {
    this._clearIconClicked = true;
  }
  _scroll(e6) {
    this.fireDecoratorEvent("suggestion-scroll", { scrollTop: e6.detail.scrollTop, scrollContainer: e6.detail.targetRef });
  }
  _handleSelect() {
    this.fireDecoratorEvent("select", {});
  }
  _handleInput(e6) {
    const t2 = this.getInputDOMRefSync(), i2 = this.value && this.isTypeNumber && !t2.value, n2 = e6.inputType || e6.detail && e6.detail.inputType || "";
    this._keepInnerValue = false;
    if (this._shouldAutocomplete = !["deleteWordBackward", "deleteWordForward", "deleteSoftLineBackward", "deleteSoftLineForward", "deleteEntireSoftLine", "deleteHardLineBackward", "deleteHardLineForward", "deleteByDrag", "deleteByCut", "deleteContent", "deleteContentBackward", "deleteContentForward", "historyUndo"].includes(n2) && !this.noTypeahead, e6 instanceof InputEvent) {
      const t3 = this.isTypeNumber && ("deleteContentForward" === e6.inputType || "deleteContentBackward" === e6.inputType) && !e6.target.value.includes(".") && this.value.includes("."), n3 = i2 && "e" === e6.data, o2 = i2 && this.value.startsWith("-") && 2 === this.value.length && ("deleteContentForward" === e6.inputType || "deleteContentBackward" === e6.inputType);
      (t3 || n3 || o2) && (this.value = e6.target.value, this._keepInnerValue = true);
    }
    e6.target === t2 && (this.focused = true, e6.stopImmediatePropagation()), this.fireEventByAction(JL.ACTION_ENTER, e6), this.hasSuggestionItemSelected = false, this._isValueStateFocused = false, this.Suggestions && this.Suggestions.updateSelectedItemPosition(-1), this.isTyping = true;
  }
  _startsWithMatchingItems(e6) {
    return t2 = e6, i2 = this._selectableItems, n2 = "text", i2.filter((e7) => (e7[n2] || "").toLowerCase().startsWith(t2.toLowerCase()));
    var t2, i2, n2;
  }
  _getFirstMatchingItem(e6) {
    if (!this._flattenItems.length) return;
    const t2 = this._startsWithMatchingItems(e6).filter((e7) => !this._isGroupItem(e7));
    return t2.length ? t2[0] : void 0;
  }
  _handleSelectionChange(e6) {
    var _a3;
    (_a3 = this.Suggestions) == null ? void 0 : _a3.onItemPress(e6);
  }
  _handleTypeAhead(e6) {
    const t2 = e6.text ? e6.text : "";
    this._innerValue = t2, this.value = t2, this._performTextSelection = true, this._shouldAutocomplete = false;
  }
  _handleResize() {
    this._inputWidth = this.offsetWidth;
  }
  _updateAssociatedLabelsTexts() {
    this._associatedLabelsTexts = ((e6) => {
      const t2 = [];
      if (dR(e6).forEach((e7) => {
        const i2 = e7.textContent;
        i2 && t2.push(i2);
      }), t2.length) return t2.join(" ");
    })(this), this._accessibleLabelsRefTexts = hR(this);
  }
  _closePicker() {
    this.open = false;
  }
  _afterOpenPicker() {
    TE() && this.getInputDOMRef().focus(), this._handlePickerAfterOpen();
  }
  _afterClosePicker() {
    this.announceSelectedItem(), TE() && (this.blur(), this.focused = false), this._changeToBeFired && (this.fireDecoratorEvent(ZL.CHANGE), this._changeToBeFired = false), this.open = false, this.isTyping = false, this.hasSuggestionItemSelected && this.focus(), this._handlePickerAfterClose();
  }
  _handlePickerAfterOpen() {
    var _a3;
    (_a3 = this.Suggestions) == null ? void 0 : _a3._onOpen(), this.fireDecoratorEvent("open");
  }
  _handlePickerAfterClose() {
    var _a3;
    (_a3 = this.Suggestions) == null ? void 0 : _a3._onClose(), this.fireDecoratorEvent("close");
  }
  openValueStatePopover() {
    this.valueStateOpen = true;
  }
  closeValueStatePopover() {
    this.valueStateOpen = false;
  }
  _handleValueStatePopoverAfterClose() {
    this.valueStateOpen = false;
  }
  _getValueStatePopover() {
    return this.shadowRoot.querySelector("[ui5-popover]");
  }
  enableSuggestions() {
    if (this.Suggestions) return;
    const e6 = FC("InputSuggestions");
    e6.i18nBundle = KL.i18nBundle, e6 && (this.Suggestions = new e6(this, "suggestionItems", true, false));
  }
  acceptSuggestion(e6, t2) {
    if (this._isGroupItem(e6)) return;
    const i2 = this.typedInValue || this.value, n2 = e6.text || "", o2 = t2 ? this.valueBeforeItemSelection !== n2 : i2 !== n2;
    this.hasSuggestionItemSelected = true, this.value = n2, o2 && this.previousValue !== n2 && (this.valueBeforeItemSelection = n2, this.lastConfirmedValue = n2, this._performTextSelection = true, this.fireDecoratorEvent(ZL.CHANGE), this.typedInValue = this.value, this.previousValue = this.value), this.valueBeforeSelectionStart = "", this.isTyping = false, this.open = false;
  }
  updateValueOnSelect(e6) {
    const t2 = this._isGroupItem(e6) ? this.valueBeforeSelectionStart : e6.text;
    this.value = t2 || "", this._performTextSelection = true;
  }
  fireEventByAction(e6, t2) {
    const i2 = this.value, n2 = this.getInputDOMRefSync();
    if (this.disabled || this.readonly) return;
    const o2 = this.getInputValue(), r2 = e6 === JL.ACTION_ENTER;
    if (this.value = o2, this.typedInValue = o2, this.valueBeforeSelectionStart = o2, r2) {
      const e7 = t2.inputType || "";
      !this.fireDecoratorEvent(ZL.INPUT, { inputType: e7 }) && (this.value = i2, n2 && (n2.value = i2)), this.fireDecoratorEvent("value-changed"), this.fireResetSelectionChange();
    }
  }
  getInputValue() {
    return this.getDomRef() ? this.getInputDOMRef().value : "";
  }
  getInputDOMRef() {
    return TE() && this.Suggestions ? this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone") : this.nativeInput;
  }
  getInputDOMRefSync() {
    var _a3;
    return TE() && ((_a3 = this.Suggestions) == null ? void 0 : _a3._getPicker()) ? this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone").shadowRoot.querySelector("input") : this.nativeInput;
  }
  get nativeInput() {
    const e6 = this.getDomRef();
    return e6 ? e6.querySelector("input") : null;
  }
  get nativeInputWidth() {
    return this.nativeInput ? this.nativeInput.offsetWidth : 0;
  }
  isSuggestionsScrollable() {
    var _a3;
    return this.Suggestions ? (_a3 = this.Suggestions) == null ? void 0 : _a3._isScrollable() : Promise.resolve(false);
  }
  onItemMouseDown(e6) {
    e6.preventDefault();
  }
  onItemSelected(e6, t2) {
    !t2 && !(e6 == null ? void 0 : e6.focused) && this.valueBeforeItemSelection !== e6.text && this.fireSelectionChange(e6, true), this.acceptSuggestion(e6, t2);
  }
  _handleSuggestionItemPress(e6) {
    var _a3;
    (_a3 = this.Suggestions) == null ? void 0 : _a3.onItemPress(e6);
  }
  onItemSelect(e6) {
    this.valueBeforeItemSelection = this.value, this.updateValueOnSelect(e6), this.announceSelectedItem(), this.fireSelectionChange(e6, true);
  }
  get _flattenItems() {
    return this.getSlottedNodes("suggestionItems").flatMap((e6) => this._isGroupItem(e6) ? [e6, ...e6.items] : [e6]);
  }
  get _selectableItems() {
    return this._flattenItems.filter((e6) => !this._isGroupItem(e6));
  }
  get valueStateTypeMappings() {
    return { Positive: KL.i18nBundle.getText(zB), Information: KL.i18nBundle.getText(HB), Negative: KL.i18nBundle.getText(OB), Critical: KL.i18nBundle.getText(UB) };
  }
  valueStateTextMappings() {
    return { Positive: KL.i18nBundle.getText(qB), Information: KL.i18nBundle.getText(GB), Negative: KL.i18nBundle.getText(QB), Critical: KL.i18nBundle.getText(VB) };
  }
  announceSelectedItem() {
    const e6 = this.shadowRoot.querySelector("#selectionText");
    e6 && (e6.textContent = this.itemSelectionAnnounce);
  }
  fireSelectionChange(e6, t2) {
    this.Suggestions && (this.fireDecoratorEvent(ZL.SELECTION_CHANGE, { item: e6 }), this._isLatestValueFromSuggestions = t2);
  }
  fireResetSelectionChange() {
    this._isLatestValueFromSuggestions && this.fireSelectionChange(null, false);
  }
  get _readonly() {
    return this.readonly && !this.disabled;
  }
  get _headerTitleText() {
    return KL.i18nBundle.getText(vB);
  }
  get clearIconAccessibleName() {
    return KL.i18nBundle.getText(wB);
  }
  get _popupLabel() {
    return KL.i18nBundle.getText(BB);
  }
  get inputType() {
    return this.type.toLowerCase();
  }
  get isTypeNumber() {
    return this.type === EL.Number;
  }
  get suggestionsTextId() {
    return this.showSuggestions ? "suggestionsText" : "";
  }
  get valueStateTextId() {
    return this.hasValueState ? "valueStateDesc" : "";
  }
  get accInfo() {
    const e6 = this.showSuggestions ? "dialog" : void 0, t2 = this.showSuggestions ? "list" : void 0, i2 = this._inputAccInfo.ariaDescribedBy ? `${this.suggestionsTextId} ${this.valueStateTextId} ${this._inputAccInfo.ariaDescribedBy}`.trim() : `${this.suggestionsTextId} ${this.valueStateTextId}`.trim();
    return { input: { ariaRoledescription: this._inputAccInfo && (this._inputAccInfo.ariaRoledescription || void 0), ariaDescribedBy: i2 || void 0, ariaInvalid: this.valueState === ZP.Negative ? "true" : void 0, ariaHasPopup: this._inputAccInfo.ariaHasPopup ? this._inputAccInfo.ariaHasPopup : e6, ariaAutoComplete: this._inputAccInfo.ariaAutoComplete ? this._inputAccInfo.ariaAutoComplete : t2, role: this._inputAccInfo && this._inputAccInfo.role, ariaControls: this._inputAccInfo && this._inputAccInfo.ariaControls, ariaExpanded: this._inputAccInfo && this._inputAccInfo.ariaExpanded, ariaDescription: this._inputAccInfo && this._inputAccInfo.ariaDescription, ariaLabel: this._inputAccInfo && this._inputAccInfo.ariaLabel || this._accessibleLabelsRefTexts || this.accessibleName || this._associatedLabelsTexts || void 0 } };
  }
  get nativeInputAttributes() {
    return { min: this.isTypeNumber ? this._nativeInputAttributes.min : void 0, max: this.isTypeNumber ? this._nativeInputAttributes.max : void 0, step: this.isTypeNumber ? this._nativeInputAttributes.step || "any" : void 0 };
  }
  get ariaValueStateHiddenText() {
    if (!this.hasValueState) return;
    const e6 = this.valueState !== ZP.None ? this.valueStateTypeMappings[this.valueState] : "";
    return this.shouldDisplayDefaultValueStateMessage ? this.valueStateText ? `${e6} ${this.valueStateText}` : e6 : `${e6}`.concat(" ", this.valueStateMessage.map((e7) => e7.textContent).join(" "));
  }
  get itemSelectionAnnounce() {
    return this.Suggestions ? this.Suggestions.itemSelectionAnnounce : "";
  }
  get iconsCount() {
    return (this.icon ? this.icon.length : 0) + (Number(this._effectiveShowClearIcon) ?? 0);
  }
  get classes() {
    return { popover: { "ui5-suggestions-popover": this.showSuggestions, "ui5-popover-with-value-state-header-phone": this._isPhone && this.showSuggestions && this.hasValueStateMessage, "ui5-popover-with-value-state-header": !this._isPhone && this.showSuggestions && this.hasValueStateMessage }, popoverValueState: { "ui5-valuestatemessage-root": true, "ui5-valuestatemessage-header": true, "ui5-valuestatemessage--success": this.valueState === ZP.Positive, "ui5-valuestatemessage--error": this.valueState === ZP.Negative, "ui5-valuestatemessage--warning": this.valueState === ZP.Critical, "ui5-valuestatemessage--information": this.valueState === ZP.Information } };
  }
  get styles() {
    const e6 = parseInt(getComputedStyle(document.documentElement).fontSize);
    return { popoverHeader: { "max-width": this._inputWidth ? `${this._inputWidth}px` : "" }, suggestionPopoverHeader: { display: 0 === this._listWidth ? "none" : "inline-block", width: this._listWidth ? `${this._listWidth}px` : "" }, suggestionsPopover: { "min-width": this._inputWidth ? `${this._inputWidth}px` : "", "max-width": this._inputWidth && this._inputWidth / e6 > 40 ? `${this._inputWidth}px` : "40rem" }, innerInput: { padding: "" } };
  }
  get suggestionSeparators() {
    return "None";
  }
  get shouldDisplayOnlyValueStateMessage() {
    return this.hasValueStateMessage && !this.readonly && !this.open && this.focused;
  }
  get shouldDisplayDefaultValueStateMessage() {
    return !this.valueStateMessage.length && this.hasValueStateMessage;
  }
  get hasValueState() {
    return this.valueState !== ZP.None;
  }
  get hasValueStateMessage() {
    return this.hasValueState && this.valueState !== ZP.Positive && (!this._inputIconFocused || !(!this._isPhone || !this.Suggestions));
  }
  get valueStateText() {
    return this.valueState !== ZP.None ? this.valueStateTextMappings()[this.valueState] : void 0;
  }
  get suggestionsText() {
    return KL.i18nBundle.getText(fB);
  }
  get availableSuggestionsCount() {
    var _a3;
    if (this.showSuggestions && (this.value || ((_a3 = this.Suggestions) == null ? void 0 : _a3.isOpened()))) {
      const e6 = this._selectableItems;
      switch (e6.length) {
        case 0:
          return KL.i18nBundle.getText(yB);
        case 1:
          return KL.i18nBundle.getText(AB);
        default:
          return KL.i18nBundle.getText(bB, e6.length);
      }
    }
  }
  get step() {
    return this.isTypeNumber ? "any" : void 0;
  }
  get _isPhone() {
    return TE();
  }
  get _isSuggestionsFocused() {
    var _a3;
    return !this.focused && ((_a3 = this.Suggestions) == null ? void 0 : _a3.isOpened());
  }
  get _placeholder() {
    return this.placeholder;
  }
  get _valueStateInputIcon() {
    const e6 = { Negative: '<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20ZM7.70711 13.7071C7.31658 14.0976 6.68342 14.0976 6.29289 13.7071C5.90237 13.3166 5.90237 12.6834 6.29289 12.2929L8.58579 10L6.29289 7.70711C5.90237 7.31658 5.90237 6.68342 6.29289 6.29289C6.68342 5.90237 7.31658 5.90237 7.70711 6.29289L10 8.58579L12.2929 6.29289C12.6834 5.90237 13.3166 5.90237 13.7071 6.29289C14.0976 6.68342 14.0976 7.31658 13.7071 7.70711L11.4142 10L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L10 11.4142L7.70711 13.7071Z" fill="#EE3939"/>', Critical: '<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M11.8619 0.49298C11.6823 0.187541 11.3544 0 11 0C10.6456 0 10.3177 0.187541 10.1381 0.49298L0.138066 17.493C-0.0438112 17.8022 -0.0461447 18.1851 0.13195 18.4965C0.310046 18.8079 0.641283 19 1 19H21C21.3587 19 21.69 18.8079 21.868 18.4965C22.0461 18.1851 22.0438 17.8022 21.8619 17.493L11.8619 0.49298ZM11 6C11.5523 6 12 6.44772 12 7V10C12 10.5523 11.5523 11 11 11C10.4477 11 10 10.5523 10 10V7C10 6.44772 10.4477 6 11 6ZM11 16C11.8284 16 12.5 15.3284 12.5 14.5C12.5 13.6716 11.8284 13 11 13C10.1716 13 9.5 13.6716 9.5 14.5C9.5 15.3284 10.1716 16 11 16Z" fill="#F58B00"/>', Positive: '<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M0 10C0 15.5228 4.47715 20 10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10ZM14.7071 6.29289C14.3166 5.90237 13.6834 5.90237 13.2929 6.29289L8 11.5858L6.70711 10.2929C6.31658 9.90237 5.68342 9.90237 5.29289 10.2929C4.90237 10.6834 4.90237 11.3166 5.29289 11.7071L7.29289 13.7071C7.68342 14.0976 8.31658 14.0976 8.70711 13.7071L14.7071 7.70711C15.0976 7.31658 15.0976 6.68342 14.7071 6.29289Z" fill="#36A41D"/>', Information: '<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M3 0C1.34315 0 0 1.34315 0 3V15C0 16.6569 1.34315 18 3 18H15C16.6569 18 18 16.6569 18 15V3C18 1.34315 16.6569 0 15 0H3ZM9 6.5C9.82843 6.5 10.5 5.82843 10.5 5C10.5 4.17157 9.82843 3.5 9 3.5C8.17157 3.5 7.5 4.17157 7.5 5C7.5 5.82843 8.17157 6.5 9 6.5ZM9 8.5C9.55228 8.5 10 8.94772 10 9.5V13.5C10 14.0523 9.55228 14.5 9 14.5C8.44771 14.5 8 14.0523 8 13.5V9.5C8 8.94772 8.44771 8.5 9 8.5Z" fill="#1B90FF"/>' };
    return this.valueState !== ZP.None ? `
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="20" viewBox="0 0 20 20" fill="none">
				${e6[this.valueState]};
			</svg>
			` : "";
  }
  get _valueStatePopoverHorizontalAlign() {
    return "rtl" !== this.effectiveDir ? "Start" : "End";
  }
  get _valueStateMessageInputIcon() {
    return this.valueState !== ZP.None ? { Negative: "error", Critical: "alert", Positive: "sys-enter-2", Information: "information" }[this.valueState] : "";
  }
  getCaretPosition() {
    return ((e6) => {
      let t2 = 0;
      return (e6.selectionStart || 0 === e6.selectionStart) && (t2 = "backward" === e6.selectionDirection ? e6.selectionStart : e6.selectionEnd), t2;
    })(this.nativeInput);
  }
  setCaretPosition(e6) {
    ((e7, t2) => {
      e7.selectionStart ? (e7.focus(), e7.setSelectionRange(t2, t2)) : e7.focus();
    })(this.nativeInput, e6);
  }
  removeFractionalPart(e6) {
    return e6.includes(".") ? e6.slice(0, e6.indexOf(".")) : e6.includes(",") ? e6.slice(0, e6.indexOf(",")) : e6;
  }
};
eF([SI({ type: Boolean })], tF.prototype, "disabled", void 0), eF([SI({ type: Boolean })], tF.prototype, "highlight", void 0), eF([SI()], tF.prototype, "placeholder", void 0), eF([SI({ type: Boolean })], tF.prototype, "readonly", void 0), eF([SI({ type: Boolean })], tF.prototype, "required", void 0), eF([SI({ type: Boolean })], tF.prototype, "noTypeahead", void 0), eF([SI()], tF.prototype, "type", void 0), eF([SI()], tF.prototype, "value", void 0), eF([SI({ noAttribute: true })], tF.prototype, "_innerValue", void 0), eF([SI()], tF.prototype, "valueState", void 0), eF([SI()], tF.prototype, "name", void 0), eF([SI({ type: Boolean })], tF.prototype, "showSuggestions", void 0), eF([SI({ type: Number })], tF.prototype, "maxlength", void 0), eF([SI()], tF.prototype, "accessibleName", void 0), eF([SI()], tF.prototype, "accessibleNameRef", void 0), eF([SI({ type: Boolean })], tF.prototype, "showClearIcon", void 0), eF([SI({ type: Boolean })], tF.prototype, "open", void 0), eF([SI({ type: Boolean })], tF.prototype, "_effectiveShowClearIcon", void 0), eF([SI({ type: Boolean })], tF.prototype, "focused", void 0), eF([SI({ type: Boolean })], tF.prototype, "valueStateOpen", void 0), eF([SI({ type: Boolean })], tF.prototype, "_isValueStateFocused", void 0), eF([SI({ type: Object })], tF.prototype, "_inputAccInfo", void 0), eF([SI({ type: Object })], tF.prototype, "_nativeInputAttributes", void 0), eF([SI({ type: Number })], tF.prototype, "_inputWidth", void 0), eF([SI({ type: Number })], tF.prototype, "_listWidth", void 0), eF([SI({ type: Boolean, noAttribute: true })], tF.prototype, "_inputIconFocused", void 0), eF([SI({ noAttribute: true })], tF.prototype, "_associatedLabelsTexts", void 0), eF([SI({ noAttribute: true })], tF.prototype, "_accessibleLabelsRefTexts", void 0), eF([TI({ type: HTMLElement, default: true })], tF.prototype, "suggestionItems", void 0), eF([TI()], tF.prototype, "icon", void 0), eF([TI({ type: HTMLElement, invalidateOnChildChange: true })], tF.prototype, "valueStateMessage", void 0), eF([HM("@ui5/webcomponents")], tF, "i18nBundle", void 0), tF = KL = eF([CI({ tag: "ui5-input", languageAware: true, formAssociated: true, renderer: UM, template: function(e6, t2, i2) {
  return NM`<div class="ui5-input-root ui5-input-focusable-element" part="root" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}"><div class="ui5-input-content"><input id="inner" part="input" class="ui5-input-inner" style="${LM(this.styles.innerInput)}" type="${FM(this.inputType)}" inner-input ?inner-input-with-icon="${this.icon.length}" ?disabled="${this.disabled}" ?readonly="${this._readonly}" .value="${FM(this._innerValue)}" placeholder="${FM(this._placeholder)}" maxlength="${FM(this.maxlength)}" role="${FM(this.accInfo.input.role)}" aria-controls="${FM(this.accInfo.input.ariaControls)}" aria-invalid="${FM(this.accInfo.input.ariaInvalid)}" aria-haspopup="${FM(this.accInfo.input.ariaHasPopup)}" aria-describedby="${FM(this.accInfo.input.ariaDescribedBy)}" aria-roledescription="${FM(this.accInfo.input.ariaRoledescription)}" aria-autocomplete="${FM(this.accInfo.input.ariaAutoComplete)}" aria-expanded="${FM(this.accInfo.input.ariaExpanded)}" aria-label="${FM(this.accInfo.input.ariaLabel)}" aria-required="${FM(this.required)}" autocomplete="off" @input="${this._handleInput}" @change="${this._handleChange}" @select="${this._handleSelect}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click=${this._click} @focusin=${this.innerFocusIn} data-sap-focus-ref step="${FM(this.nativeInputAttributes.step)}" min="${FM(this.nativeInputAttributes.min)}" max="${FM(this.nativeInputAttributes.max)}" />${this._effectiveShowClearIcon ? TL.call(this, e6, t2, i2) : void 0}${this.icon.length ? IL.call(this, e6, t2, i2) : void 0}<div class="ui5-input-value-state-icon">${uC(this._valueStateInputIcon)}</div>${this._effectiveShowSuggestions ? ML.call(this, e6, t2, i2) : void 0}${this.accInfo.input.ariaDescription ? BL.call(this, e6, t2, i2) : void 0}${this.hasValueState ? RL.call(this, e6, t2, i2) : void 0}</div></div>${this._effectiveShowSuggestions ? kL.call(this, e6, t2, i2) : void 0}${this.hasValueStateMessage ? GL.call(this, e6, t2, i2) : void 0} `;
}, styles: [jL, BD, XL, YL], features: ["InputSuggestions"], get dependencies() {
  const e6 = FC("InputSuggestions");
  return [OP, uL, BR].concat(e6 ? e6.dependencies : []);
} }), EI("change", { bubbles: true }), EI("value-changed", { bubbles: true }), EI("input", { bubbles: true, cancelable: true }), EI("select", { bubbles: true }), EI("selection-change", { detail: { item: { type: HTMLElement } }, bubbles: true }), EI("type-ahead", { bubbles: true }), EI("suggestion-scroll", { detail: { scrollTop: { type: Number }, scrollContainer: { type: HTMLElement } }, bubbles: true }), EI("open", { bubbles: true }), EI("close", { bubbles: true })], tF), tF.define();
const iF = tF;
CT("direction-arrows", { pathData: "M507 244q5 5 5 12 0 6-5 11L394 379q-5 5-12 5-6 0-11-5t-5-11V144q0-12 10-15 2-1 6-1 8 0 12 4zM135 129q10 3 10 15v224q0 6-4.5 11t-11.5 5q-6 0-11-5L5 267q-5-5-5-11 0-7 5-12l113-112q4-4 11-4 4 0 6 1z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("direction-arrows", { pathData: "M504 237q8 8 8 19t-8 19L395 377q-7 7-17 7t-18-7.5-8-18.5V154q0-11 8-18.5t19-7.5q9 0 16 7zM135 128q11 0 18 7.5t7 18.5v204q0 12-8 19t-18 7-17-7L8 275q-8-8-8-19t8-19l109-102q7-7 18-7z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const nF = { packageName: "@ui5/webcomponents", fileName: "themes/SliderBase.css.ts", content: '.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([disabled]){opacity:var(--_ui5-v2-4-0_slider_disabled_opacity);cursor:default;pointer-events:none}:host{box-sizing:border-box;cursor:pointer;vertical-align:top;width:100%}:host(:not([hidden])){display:inline-block}.ui5-slider-root{box-sizing:border-box;height:3.3125rem;outline:none;padding:var(--_ui5-v2-4-0_slider_padding);touch-action:none}.ui5-slider-inner{background-repeat:no-repeat;position:relative;min-width:var(--_ui5-v2-4-0_slider_inner_min_width);height:100%}.ui5-slider-progress-container{width:100%;background:var(--_ui5-v2-4-0_slider_progress_container_background);border:var(--_ui5-v2-4-0_slider_progress_border);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_inner_height);position:relative;box-sizing:var(--_ui5-v2-4-0_slider_progress_box_sizing);top:var(--_ui5-v2-4-0_slider_progress_container_top)}.ui5-slider-progress-container:before,.ui5-slider-progress-container:after{display:var(--_ui5-v2-4-0_slider_progress_container_dot_display);content:"";position:absolute;border-radius:50%;width:var(--_ui5-v2-4-0_slider_start_end_point_size);height:var(--_ui5-v2-4-0_slider_start_end_point_size);top:var(--_ui5-v2-4-0_slider_start_end_point_top)}.ui5-slider-progress-container:before{inset-inline-start:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_before_background);border:var(--_ui5-v2-4-0_slider_progress_before_border)}.ui5-slider-progress-container:after{inset-inline-end:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_after_background);border:var(--_ui5-v2-4-0_slider_progress_after_border)}.ui5-slider-progress{background:var(--_ui5-v2-4-0_slider_progress_background);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_progress_height);position:relative;outline:none;box-sizing:border-box;border:var(--_ui5-v2-4-0_slider_active_progress_border);left:var(--_ui5-v2-4-0_slider_active_progress_left);top:var(--_ui5-v2-4-0_slider_active_progress_top)}.ui5-slider-tickmarks{list-style:none;padding:0;margin:0;top:var(--_ui5-v2-4-0_slider_tickmark_top);display:flex;box-sizing:border-box;width:100%;justify-content:space-between;position:absolute;z-index:1}.ui5-slider-tickmarks li{height:var(--_ui5-v2-4-0_slider_tickmark_height);border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_bg)}.ui5-slider-handle{background:var(--_ui5-v2-4-0_slider_handle_background);border:var(--_ui5-v2-4-0_slider_handle_border);border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);position:relative;outline:none;height:var(--_ui5-v2-4-0_slider_handle_height);width:var(--_ui5-v2-4-0_slider_handle_width);box-sizing:var(--_ui5-v2-4-0_slider_handle_box_sizing);display:flex;justify-content:center;align-items:center;z-index:2}[slider-icon]{display:var(--_ui5-v2-4-0_slider_handle_icon_display);color:var(--sapContent_Selected_ForegroundColor);width:var(--_ui5-v2-4-0_slider_handle_icon_size);height:var(--_ui5-v2-4-0_slider_handle_icon_size)}.ui5-slider-root .ui5-slider-handle:focus [slider-icon]{display:var(--_ui5-v2-4-0_range_slider_active_handle_icon_display)}.ui5-slider-progress-container:hover~.ui5-slider-handle:not(:focus),.ui5-slider-handle:hover{background:var(--_ui5-v2-4-0_slider_handle_hover_background);border:var(--_ui5-v2-4-0_slider_handle_hover_border)}.ui5-slider-root:focus .ui5-slider-inner .ui5-slider-handle,.ui5-slider-handle:focus{outline:var(--_ui5-v2-4-0_slider_handle_outline);outline-offset:var(--_ui5-v2-4-0_slider_handle_outline_offset);border:var(--_ui5-v2-4-0_slider_handle_focus_border);background:var(--_ui5-v2-4-0_slider_handle_background_focus)}.ui5-slider-handle.ui5-slider-handle--start:focus,.ui5-slider-handle--end:focus{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-root:focus:hover .ui5-slider-handle,.ui5-slider-handle:focus:hover{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-handle-container{position:absolute;margin-inline-start:calc(-1 * var(--_ui5-v2-4-0_slider_handle_width) / 2);top:var(--_ui5-v2-4-0_slider_handle_top)}:host(:not([hidden])) .ui5-slider-handle-container .ui5-slider-tooltip{display:flex;font-family:var(--sapFontFamily);justify-content:center;align-items:center;visibility:hidden;position:absolute;left:50%;transform:translate(-50%);bottom:var(--_ui5-v2-4-0_slider_tooltip_bottom);background:var(--_ui5-v2-4-0_slider_tooltip_background);border:var(--_ui5-v2-4-0_slider_tooltip_border);border-radius:var(--_ui5-v2-4-0_slider_tooltip_border_radius);box-shadow:var(--_ui5-v2-4-0_slider_tooltip_box_shadow);font-size:var(--_ui5-v2-4-0_slider_tooltip_fontsize);color:var(--_ui5-v2-4-0_slider_tooltip_color);height:var(--_ui5-v2-4-0_slider_tooltip_height);min-width:var(--_ui5-v2-4-0_slider_tooltip_min_width);padding:var(--_ui5-v2-4-0_slider_tooltip_padding);box-sizing:var(--_ui5-v2-4-0_slider_tooltip_border_box)}:host(:not([hidden])):host([editable-tooltip]) .ui5-slider-handle-container .ui5-slider-tooltip{border:none;background:none;box-shadow:none}:host([editable-tooltip]) .ui5-slider-tooltip{padding:0;box-shadow:none}.ui5-slider-tooltip [ui5-input]{width:100%;text-align:center}.ui5-slider-tooltip-value{position:relative;display:flex;justify-content:center;align-items:center}.ui5-slider-labels{position:absolute;top:1.25rem;margin:0;padding:0;white-space:nowrap}.ui5-slider-labels li{position:relative;list-style:none;padding-top:.3125rem;height:1rem;margin:0;text-align:center;display:inline-block;color:var(--_ui5-v2-4-0_slider_label_color);font-family:var(--sapFontFamily);font-size:var(--_ui5-v2-4-0_slider_label_fontsize);padding-top:0;box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;vertical-align:top}.ui5-slider-hidden-labels li:not(:first-child):not(:last-child){visibility:hidden}.ui5-slider-handle:focus .ui5-slider-tooltip{bottom:var(--_ui5-v2-4-0_slider_handle_focused_tooltip_distance)}.ui5-slider-tickmarks li.ui5-slider-tickmark-in-range{border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_in_range_bg)}:host([show-tickmarks]) .ui5-slider-progress{height:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_height);border:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border);left:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left);top:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top)}:host([show-tickmarks]) .ui5-slider-progress-container{top:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top)}.ui5-slider-handle:focus:after{content:"";display:var(--_ui5-v2-4-0_slider_handle_focus_visibility);width:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);height:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);border:var(--sapContent_FocusWidth) dotted var(--sapContent_FocusColor);position:absolute;border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);pointer-events:none}\n' };
var oF, rF = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let sF = oF = class extends wI {
  async formElementAnchor() {
    return this.getFocusDomRefAsync();
  }
  constructor() {
    super(), this.min = 0, this.max = 100, this.step = 1, this.labelInterval = 0, this.showTickmarks = false, this.showTooltip = false, this.editableTooltip = false, this.disabled = false, this.value = 0, this._tooltipVisibility = "hidden", this._labelsOverlapping = false, this._hiddenTickmarks = false, this._isInputValueValid = false, this.notResized = false, this._isUserInteraction = false, this._isInnerElementFocusing = false, this._labelWidth = 0, this._resizeHandler = this._handleResize.bind(this), this._moveHandler = this._handleMove.bind(this), this._upHandler = this._handleUp.bind(this), this._stateStorage = { step: void 0, min: void 0, max: void 0, labelInterval: void 0 };
    this._ontouchstart = { handleEvent: (e6) => {
      this._onmousedown(e6);
    }, passive: true };
  }
  _handleMove(e6) {
  }
  _handleUp(e6) {
  }
  _onmousedown(e6) {
  }
  _handleActionKeyPress(e6) {
  }
  _updateInputValue() {
  }
  static get ACTION_KEYS() {
    return [YI, KI, ZI, JI, eM, tM, iM, nM, mM, fM, lM, cM, _M, gM, hM];
  }
  static get MIN_SPACE_BETWEEN_TICKMARKS() {
    return 8;
  }
  static get TOOLTIP_VISIBILITY() {
    return { VISIBLE: "visible", HIDDEN: "hidden" };
  }
  static get renderer() {
    return UM;
  }
  static get styles() {
    return nF;
  }
  get classes() {
    return { root: { "ui5-slider-root-phone": TE() }, labelContainer: { "ui5-slider-hidden-labels": this._labelsOverlapping } };
  }
  onEnterDOM() {
    kk.register(this, this._resizeHandler);
  }
  onExitDOM() {
    kk.deregister(this, this._resizeHandler);
  }
  onAfterRendering() {
    this.notResized && this._resizeHandler();
  }
  _onmouseover() {
    this.showTooltip && (this._tooltipVisibility = oF.TOOLTIP_VISIBILITY.VISIBLE);
  }
  _onmouseout() {
    this.showTooltip && !this.shadowRoot.activeElement && (this._tooltipVisibility = oF.TOOLTIP_VISIBILITY.HIDDEN);
  }
  _onkeydown(e6) {
    const t2 = e6.target;
    vM(e6) && t2.classList.contains("ui5-slider-handle") && t2.parentNode.querySelector(".ui5-slider-handle-container ui5-input").focus(), this.disabled || 0 === this._effectiveStep || t2.hasAttribute("ui5-slider-handle") || oF._isActionKey(e6) && t2 && !t2.hasAttribute("ui5-input") && (e6.preventDefault(), this._isUserInteraction = true, this._handleActionKeyPress(e6));
  }
  _onInputKeydown(e6) {
    const t2 = e6.target;
    vM(e6) && t2.hasAttribute("ui5-input") && t2.parentNode.parentNode.querySelector(".ui5-slider-handle").focus(), WI(e6) && (this._updateInputValue(), this._updateValueFromInput(e6));
  }
  _onInputChange() {
    this._valueOnInteractionStart !== this.value && this.fireEvent("change");
  }
  _onInputInput() {
    this.fireEvent("input");
  }
  _updateValueFromInput(e6) {
    const t2 = e6.target, i2 = parseFloat(t2.value);
    this._isInputValueValid = i2 >= this._effectiveMin && i2 <= this._effectiveMax, this._isInputValueValid && (this.value = i2);
  }
  _onKeyupBase() {
    this.disabled || (this._isUserInteraction = false);
  }
  _preserveFocus(e6) {
    this._isInnerElementFocusing = e6;
  }
  _isFocusing() {
    return this._isInnerElementFocusing;
  }
  _preventFocusOut() {
    this.focusInnerElement();
  }
  focusInnerElement() {
    this.focus();
  }
  _handleResize() {
    if (!this.showTickmarks) return;
    this.notResized = false;
    if (this._spaceBetweenTickmarks() < oF.MIN_SPACE_BETWEEN_TICKMARKS ? (this._hiddenTickmarks = true, this._labelsOverlapping = true) : this._hiddenTickmarks = false, this.labelInterval <= 0 || this._hiddenTickmarks) return;
    const e6 = this.shadowRoot.querySelectorAll(".ui5-slider-labels li");
    this._labelsOverlapping = [...e6].some((e7) => e7.scrollWidth > e7.clientWidth);
  }
  handleDownBase(e6) {
    const t2 = this._effectiveMin, i2 = this._effectiveMax, n2 = this.getBoundingClientRect(), o2 = this.directionStart, r2 = this._effectiveStep, s2 = oF.getValueFromInteraction(e6, r2, t2, i2, n2, o2);
    return this._isUserInteraction = true, window.addEventListener("mouseup", this._upHandler), window.addEventListener("touchend", this._upHandler), SE() && e6 instanceof TouchEvent ? window.addEventListener("touchmove", this._moveHandler) : window.addEventListener("mousemove", this._moveHandler), this._handleFocusOnMouseDown(e6), s2;
  }
  _handleFocusOnMouseDown(e6) {
    const t2 = this.shadowRoot.activeElement, i2 = e6.target;
    t2 && t2 === i2 || i2.hasAttribute("ui5-input") || (this._preserveFocus(true), this.focusInnerElement());
  }
  handleUpBase() {
    window.removeEventListener("mouseup", this._upHandler), window.removeEventListener("touchend", this._upHandler), window.removeEventListener("mousemove", this._moveHandler), window.removeEventListener("touchmove", this._moveHandler), this._isUserInteraction = false, this._preserveFocus(false);
  }
  updateStateStorageAndFireInputEvent(e6) {
    this.storePropertyState(e6), this._isUserInteraction && this.fireDecoratorEvent("input");
  }
  static _isActionKey(e6) {
    return this.ACTION_KEYS.some((t2) => t2(e6));
  }
  static clipValue(e6, t2, i2) {
    return e6 = Math.min(Math.max(e6, t2), i2);
  }
  static getValueFromInteraction(e6, t2, i2, n2, o2, r2) {
    const s2 = this.getPageXValueFromEvent(e6), a2 = this.computedValueFromPageX(s2, i2, n2, o2, r2), l2 = this.getSteppedValue(a2, t2, i2);
    return this.clipValue(l2, i2, n2);
  }
  static getSteppedValue(e6, t2, i2) {
    const n2 = Math.abs((e6 - i2) % t2);
    if (0 === t2 || 0 === n2) return e6;
    e6 = 2 * n2 >= t2 ? e6 + t2 - n2 : e6 - n2;
    const o2 = oF._getDecimalPrecisionOfNumber(t2);
    return Number(e6.toFixed(o2));
  }
  static getPageXValueFromEvent(e6) {
    return SE() && e6 instanceof TouchEvent ? e6.targetTouches && e6.targetTouches.length > 0 ? e6.targetTouches[0].pageX : 0 : e6.pageX;
  }
  static computedValueFromPageX(e6, t2, i2, n2, o2) {
    return t2 + ("left" === o2 ? e6 - n2[o2] : n2[o2] - e6) / n2.width * (i2 - t2);
  }
  static _getDecimalPrecisionOfNumber(e6) {
    if (Number.isInteger(e6)) return 0;
    const t2 = String(e6).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
    return !t2 || t2.length < 2 ? 0 : Math.max(0, (t2[1] ? t2[1].length : 0) - (t2[2] ? Number(t2[2]) : 0));
  }
  isCurrentStateOutdated() {
    return Object.entries(this._stateStorage).some(([e6, t2]) => this[e6] !== t2);
  }
  getStoredPropertyState(e6) {
    return this._stateStorage[e6];
  }
  isPropertyUpdated(...e6) {
    return e6.some((e7) => this.getStoredPropertyState(e7) !== this[e7]);
  }
  storePropertyState(...e6) {
    e6.forEach((e7) => {
      this._stateStorage[e7] = this[e7];
    });
  }
  get directionStart() {
    return "rtl" === this.effectiveDir ? "right" : "left";
  }
  _createLabels() {
    if (!this.labelInterval || !this.showTickmarks) return;
    const e6 = this.labelInterval, t2 = this._effectiveStep, i2 = (this._effectiveMax - this._effectiveMin) / (t2 * e6);
    if (i2 === this._oldNumberOfLabels && this._oldMin === this._effectiveMin && this._oldMax === this._effectiveMax) return;
    this._oldMin = this._effectiveMin, this._oldMax = this._effectiveMax, this._oldNumberOfLabels = i2, this._labelWidth = 100 / i2, this._labelValues = [];
    const n2 = oF._getDecimalPrecisionOfNumber(t2);
    for (let o2 = 0; o2 <= i2; o2++) {
      const i3 = (o2 * t2 * e6 + this._effectiveMin).toFixed(n2);
      this._labelValues.push(i3);
    }
  }
  _handleActionKeyPressBase(e6, t2) {
    const i2 = oF._isIncreaseValueAction(e6, this.directionStart), n2 = oF._isBigStepAction(e6), o2 = this[t2], r2 = this._effectiveMin, s2 = this._effectiveMax;
    let a2 = this._effectiveStep;
    return a2 = n2 && (s2 - r2) / a2 > 10 ? (s2 - r2) / 10 : a2, cM(e6) ? s2 - o2 : lM(e6) ? -1 * (o2 - r2) : i2 ? a2 : -1 * a2;
  }
  static _isIncreaseValueAction(e6, t2) {
    return "right" === t2 ? ZI(e6) || iM(e6) || YI(e6) || eM(e6) || mM(e6) || _M(e6) : ZI(e6) || iM(e6) || KI(e6) || tM(e6) || mM(e6) || _M(e6);
  }
  static _isBigStepAction(e6) {
    return nM(e6) || iM(e6) || eM(e6) || tM(e6) || _M(e6) || gM(e6);
  }
  get _tickmarksCount() {
    return (this._effectiveMax - this._effectiveMin) / this._effectiveStep;
  }
  _spaceBetweenTickmarks() {
    return this.getBoundingClientRect().width / this._tickmarksCount;
  }
  _validateStep(e6) {
    0 === e6 && console.warn("The 'step' property must be a positive float number"), e6 < 0 && console.warn("The 'step' property must be a positive float number. The provided negative number has been converted to its positve equivalent"), Number.isNaN(e6) && console.warn("The 'step' property must be a positive float number. It has been set to its default value of 1");
  }
  get _labels() {
    return this._labelValues || [];
  }
  get _effectiveStep() {
    let e6 = this.step;
    return e6 < 0 && (e6 = Math.abs(e6)), Number.isNaN(e6) && (e6 = 1), e6;
  }
  get _effectiveMin() {
    return Math.min(this.min, this.max);
  }
  get _effectiveMax() {
    return Math.max(this.min, this.max);
  }
  get _tabIndex() {
    return this.disabled ? "-1" : "0";
  }
  get _ariaDescribedByHandleText() {
    return this.editableTooltip ? "ui5-slider-InputDesc" : void 0;
  }
  get _ariaLabelledByHandleText() {
    return this.accessibleName ? "ui5-slider-accName ui5-slider-sliderDesc" : "ui5-slider-sliderDesc";
  }
  get _ariaDescribedByInputText() {
    return "";
  }
  get _ariaLabelledByInputText() {
    return "";
  }
};
rF([SI({ type: Number })], sF.prototype, "min", void 0), rF([SI({ type: Number })], sF.prototype, "max", void 0), rF([SI()], sF.prototype, "name", void 0), rF([SI({ type: Number })], sF.prototype, "step", void 0), rF([SI({ type: Number })], sF.prototype, "labelInterval", void 0), rF([SI({ type: Boolean })], sF.prototype, "showTickmarks", void 0), rF([SI({ type: Boolean })], sF.prototype, "showTooltip", void 0), rF([SI({ type: Boolean })], sF.prototype, "editableTooltip", void 0), rF([SI({ type: Boolean })], sF.prototype, "disabled", void 0), rF([SI()], sF.prototype, "accessibleName", void 0), rF([SI({ type: Number })], sF.prototype, "value", void 0), rF([SI()], sF.prototype, "_tooltipVisibility", void 0), rF([SI({ type: Boolean })], sF.prototype, "_labelsOverlapping", void 0), rF([SI({ type: Boolean })], sF.prototype, "_hiddenTickmarks", void 0), rF([SI({ type: Boolean })], sF.prototype, "_isInputValueValid", void 0), sF = oF = rF([EI("change", { bubbles: true }), EI("input", { bubbles: true })], sF);
const aF = sF;
function lF(e6, t2, i2) {
  return NM`${this.showTickmarks ? cF.call(this, e6, t2, i2) : void 0}`;
}
function cF(e6, t2, i2) {
  return NM`<ul class="ui5-slider-tickmarks">${PM(this.tickmarksObject, (e7, t3) => e7._id || t3, (n2, o2) => hF.call(this, e6, t2, i2, n2, o2))}</ul>${this.labelInterval ? pF.call(this, e6, t2, i2) : void 0}`;
}
function hF(e6, t2, i2, n2, o2) {
  return NM`${n2 ? uF.call(this, e6, t2, i2, n2, o2) : dF.call(this, e6, t2, i2, n2, o2)}`;
}
function uF(e6, t2, i2, n2, o2) {
  return NM`<li class="ui5-slider-tickmark ui5-slider-tickmark-in-range"></li>`;
}
function dF(e6, t2, i2, n2, o2) {
  return NM`<li class="ui5-slider-tickmark"></li>`;
}
function pF(e6, t2, i2) {
  return NM`<ul class="ui5-slider-labels ${DM(this.classes.labelContainer)}" style="${LM(this.styles.labelContainer)}">${PM(this._labels, (e7, t3) => e7._id || t3, (n2, o2) => _F.call(this, e6, t2, i2, n2, o2))}</ul>`;
}
function _F(e6, t2, i2, n2, o2) {
  return NM`<li style="${LM(this.styles.label)}">${FM(n2)}</li>`;
}
function gF(e6, t2, i2) {
  return NM`<div class="ui5-slider-tooltip" style="${LM(this.styles.tooltip)}">${this.editableTooltip ? mF.call(this, e6, t2, i2) : fF.call(this, e6, t2, i2)}</div>`;
}
function mF(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-input", t2, i2)} value="${FM(this._tooltipInputValue)}" value-state="${FM(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${FM(this._onInputChange)}" @ui5-input="${FM(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></${zM("ui5-input", t2, i2)}>` : NM`<ui5-input value="${FM(this._tooltipInputValue)}" value-state="${FM(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${FM(this._onInputChange)}" @ui5-input="${FM(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></ui5-input>`;
}
function fF(e6, t2, i2) {
  return NM`<span class="ui5-slider-tooltip-value">${FM(this.tooltipValue)}</span>`;
}
function vF(e6, t2, i2) {
  return NM`<span id="ui5-slider-accName" class="ui5-hidden-text">${FM(this.accessibleName)}</span>`;
}
function AF(e6, t2, i2) {
  return NM`<span id="ui5-slider-InputDesc" class="ui5-hidden-text">${FM(this._ariaDescribedByInputText)}</span><span id="ui5-slider-InputLabel" class="ui5-hidden-text">${FM(this._ariaLabelledByInputText)}</span>`;
}
var bF, yF = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let wF = bF = class extends aF {
  get formFormattedValue() {
    return this.value.toString();
  }
  constructor() {
    super(), this.value = 0, this._progressPercentage = 0, this._handlePositionFromStart = 0, this._tooltipInputValue = this.value.toString(), this._tooltipInputValueState = "None", this._stateStorage.value = void 0, this._lastValidInputValue = this.min.toString();
  }
  onBeforeRendering() {
    this.editableTooltip && this._updateInputValue(), this.isCurrentStateOutdated() && (this.notResized = true, this.syncUIAndState(), this._updateHandleAndProgress(this.value));
  }
  syncUIAndState() {
    this.isPropertyUpdated("step") && (this._validateStep(this.step), this.storePropertyState("step")), this.isPropertyUpdated("min", "max", "value") && (this.storePropertyState("min", "max"), this.value = aF.clipValue(this.value, this._effectiveMin, this._effectiveMax), this.updateStateStorageAndFireInputEvent("value"), this.storePropertyState("value")), this.labelInterval && this.showTickmarks && this._createLabels(), this.isPropertyUpdated("labelInterval") && this.storePropertyState("labelInterval");
  }
  _onmousedown(e6) {
    if (this.disabled || 0 === this.step || e6.target.hasAttribute("ui5-input")) return;
    const t2 = this.handleDownBase(e6);
    this._valueOnInteractionStart = this.value, void 0 === this._valueInitial && (this._valueInitial = this.value);
    const i2 = this.constructor;
    this._isHandlePressed(i2.getPageXValueFromEvent(e6)) || (this._updateHandleAndProgress(t2), this.value = t2, this.updateStateStorageAndFireInputEvent("value"));
  }
  _onfocusin() {
    void 0 === this._valueInitial && (this._valueInitial = this.value), this.showTooltip && (this._tooltipVisibility = aF.TOOLTIP_VISIBILITY.VISIBLE);
  }
  _onfocusout(e6) {
    var _a3;
    this._isFocusing() ? this._preventFocusOut() : (this._valueInitial = void 0, this.showTooltip && !((_a3 = e6.relatedTarget) == null ? void 0 : _a3.hasAttribute("ui5-input")) && (this._tooltipVisibility = aF.TOOLTIP_VISIBILITY.HIDDEN));
  }
  _handleMove(e6) {
    if (e6.target.hasAttribute("ui5-input")) return;
    if (e6.preventDefault(), this.disabled || 0 === this._effectiveStep) return;
    const t2 = this.constructor.getValueFromInteraction(e6, this._effectiveStep, this._effectiveMin, this._effectiveMax, this.getBoundingClientRect(), this.directionStart);
    this._updateHandleAndProgress(t2), this.value = t2, this.updateStateStorageAndFireInputEvent("value");
  }
  _handleUp(e6) {
    e6.target.hasAttribute("ui5-input") || (this._valueOnInteractionStart !== this.value && this.fireDecoratorEvent("change"), this.handleUpBase(), this._valueOnInteractionStart = void 0);
  }
  _onInputFocusOut(e6) {
    const t2 = this.shadowRoot.querySelector("[ui5-input]");
    this._tooltipVisibility = aF.TOOLTIP_VISIBILITY.HIDDEN, this._updateValueFromInput(e6), this._isInputValueValid || (t2.value = this._lastValidInputValue, this._isInputValueValid = true, this._tooltipInputValueState = "None");
  }
  _updateInputValue() {
    const e6 = this.shadowRoot.querySelector("[ui5-input]");
    if (e6) {
      if (this._isInputValueValid = parseFloat(e6.value) >= this.min && parseFloat(e6.value) <= this.max, !this._isInputValueValid) return this._tooltipInputValue = this._lastValidInputValue, this._isInputValueValid = true, void (this._tooltipInputValueState = "Negative");
      this._tooltipInputValue = this.value.toString(), this._lastValidInputValue = this._tooltipInputValue, this._tooltipInputValueState = "None";
    }
  }
  _isHandlePressed(e6) {
    const t2 = this._sliderHandle.getBoundingClientRect();
    return e6 >= t2.left && e6 <= t2.right;
  }
  _updateHandleAndProgress(e6) {
    const t2 = this._effectiveMax, i2 = this._effectiveMin;
    this._progressPercentage = (e6 - i2) / (t2 - i2), this._handlePositionFromStart = 100 * this._progressPercentage;
  }
  _handleActionKeyPress(e6) {
    const t2 = this._effectiveMin, i2 = this._effectiveMax, n2 = this.value, o2 = this.constructor, r2 = hM(e6) ? this._valueInitial : o2.clipValue(this._handleActionKeyPressBase(e6, "value") + n2, t2, i2);
    r2 !== n2 && (this._updateHandleAndProgress(r2), this.value = r2, this.updateStateStorageAndFireInputEvent("value"));
  }
  get inputValue() {
    return this.value.toString();
  }
  get styles() {
    return { progress: { transform: `scaleX(${this._progressPercentage})`, "transform-origin": `${this.directionStart} top` }, handle: { [this.directionStart]: `${this._handlePositionFromStart}%` }, label: { width: `${this._labelWidth}%` }, labelContainer: { width: "100%", [this.directionStart]: `-${this._labelWidth / 2}%` }, tooltip: { visibility: `${this._tooltipVisibility}` } };
  }
  get _sliderHandle() {
    return this.shadowRoot.querySelector(".ui5-slider-handle");
  }
  get tooltipValue() {
    const e6 = this.constructor._getDecimalPrecisionOfNumber(this._effectiveStep);
    return this.value.toFixed(e6);
  }
  get _ariaDisabled() {
    return this.disabled || void 0;
  }
  get _ariaLabelledByText() {
    return bF.i18nBundle.getText(FB);
  }
  get _ariaDescribedByInputText() {
    return bF.i18nBundle.getText($B);
  }
  get _ariaLabelledByInputText() {
    return bF.i18nBundle.getText(WB);
  }
  get tickmarksObject() {
    const e6 = this._tickmarksCount, t2 = [];
    if (this._hiddenTickmarks) return [true, false];
    for (let i2 = 0; i2 <= e6; i2++) t2.push(this._effectiveMin + i2 * this.step <= this.value);
    return t2;
  }
};
yF([SI({ type: Number })], wF.prototype, "value", void 0), yF([HM("@ui5/webcomponents")], wF, "i18nBundle", void 0), wF = bF = yF([CI({ tag: "ui5-slider", languageAware: true, formAssociated: true, template: function(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-slider-root ${DM(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step ? lF.call(this, e6, t2, i2) : void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${LM(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${LM(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${FM(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${FM(this.min)}" aria-valuemax="${FM(this.max)}" aria-valuenow="${FM(this.value)}" aria-labelledby="${FM(this._ariaLabelledByHandleText)}" aria-disabled="${FM(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${FM(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><${zM("ui5-icon", t2, i2)} name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></${zM("ui5-icon", t2, i2)}></div>${this.showTooltip ? gF.call(this, e6, t2, i2) : void 0}</div></div>${this.accessibleName ? vF.call(this, e6, t2, i2) : void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${FM(this._ariaLabelledByText)}</span>${this.editableTooltip ? AF.call(this, e6, t2, i2) : void 0}</div> ` : NM`<div class="ui5-slider-root ${DM(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step ? lF.call(this, e6, t2, i2) : void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${LM(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${LM(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${FM(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${FM(this.min)}" aria-valuemax="${FM(this.max)}" aria-valuenow="${FM(this.value)}" aria-labelledby="${FM(this._ariaLabelledByHandleText)}" aria-disabled="${FM(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${FM(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><ui5-icon name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></ui5-icon></div>${this.showTooltip ? gF.call(this, e6, t2, i2) : void 0}</div></div>${this.accessibleName ? vF.call(this, e6, t2, i2) : void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${FM(this._ariaLabelledByText)}</span>${this.editableTooltip ? AF.call(this, e6, t2, i2) : void 0}</div> `;
}, dependencies: [BR, iF] })], wF), wF.define();
const xF = wF;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const CF = { packageName: "@ui5/webcomponents", fileName: "themes/ColorPicker.css.ts", content: ':host(:not([hidden])){display:inline-block}.ui5-color-picker-root{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.ui5-color-picker-main-color{width:16rem;height:16rem;position:relative;margin-bottom:1.5rem;border:1px solid var(--sapContent_ForegroundBorderColor);background-size:100%;background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0)),-webkit-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0)),-moz-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:linear-gradient(left,#000,#0000),linear-gradient(top,#fff0,#fff);background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-webkit-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-moz-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:linear-gradient(left,#000,#0000,#fff),linear-gradient(top,#80808000,gray);user-select:none;-moz-user-select:none}.ui5-color-picker-circle{position:absolute;box-sizing:border-box;width:13px;height:13px;border:var(--_ui5-v2-4-0_color_picker_circle_outer_border);border-radius:.6875rem;pointer-events:none}.ui5-color-picker-circle:after{content:"";position:absolute;width:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);height:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);border:var(--_ui5-v2-4-0_color_picker_circle_inner_border);border-radius:.9375rem;pointer-events:none}.ui5-color-picker-sliders-wrapper{width:calc(100% - 11px);margin-left:-10px}[ui5-slider]{--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_progress_box_sizing: content-box}[ui5-slider]::part(handle){width:.9375rem;height:1.5rem;background:transparent;box-sizing:border-box}[ui5-slider]::part(handle-container){margin-inline-start:-2px;margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top)}[ui5-slider]::part(handle-container):focus-within{margin-inline-start:unset;margin-top:unset}[ui5-slider]::part(handle):after{content:"";border:2px solid #fff;display:block;height:1.25rem;border-radius:1rem;width:100%;box-sizing:border-box}[ui5-slider]::part(root-container){padding:1rem 0}[ui5-slider]::part(progress-container){width:calc(100% + 11px);height:18px;position:absolute;margin-top:var(--_ui5-v2-4-0_color_picker_slider_container_margin_top);border-radius:0;border:1px solid var(--sapField_BorderColor)}[ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-size:100%;background-image:-webkit-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(left,red,#ff0,#0f0,#0ff,#00f,#f0f,red);background-color:none}[ui5-slider].ui5-color-picker-alpha-slider::part(progress-container){background-image:-webkit-linear-gradient(left,rgba(65,120,13,0),var(--ui5-v2-4-0_Color_Picker_Progress_Container_Color)),url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}[ui5-slider]::part(progress-bar){background:transparent}.ui5-color-picker-current-color{width:100%;display:flex;justify-content:space-around;align-items:center}.ui5-color-picker-colors-wrapper{display:flex;flex-wrap:nowrap;height:1.5rem;border:1px solid var(--sapField_BorderColor)}.ui5-color-picker-white,.ui5-color-picker-color{width:3.1rem;background:#fff;display:block}.ui5-color-picker-color{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}.ui5-color-picker-color-inner{width:100%;height:100%}.ui5-color-picker-hex-input-wrapper{display:flex;align-items:center;flex-wrap:nowrap}.ui5-color-picker-hex-input{width:4.5rem;min-width:4.5rem;margin-left:.2rem}.ui5-color-picker-rgb-wrapper{display:flex;justify-content:space-around;width:100%}.ui5-color-picker-rgb{display:flex;flex-direction:column;align-items:center;margin-top:1rem}.ui5-color-picker-rgb-input{width:2.5rem;min-width:2.5rem;text-align:center}.ui5-color-picker-hue-slider::part(progress-container):before,.ui5-color-picker-alpha-slider::part(progress-container):before,.ui5-color-picker-hue-slider::part(progress-container):after,.ui5-color-picker-alpha-slider::part(progress-container):after,[ui5-slider].ui5-color-picker-hue-slider::part(icon-slider),[ui5-slider].ui5-color-picker-alpha-slider::part(icon-slider){display:none}.ui5-color-picker-alpha-slider::part(handle),.ui5-color-picker-hue-slider::part(handle){box-shadow:var(--_ui5-v2-4-0_color_picker_slider_handle_box_shadow);border:var(--_ui5-v2-4-0_color_picker_slider_handle_border)}.ui5-color-picker-alpha-slider::part(handle):hover,.ui5-color-picker-hue-slider::part(handle):hover{border:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_hover)}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{outline:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_focus);outline-offset:.0625rem}.ui5-color-picker-alpha-slider::part(handle):focus:before,.ui5-color-picker-hue-slider::part(handle):focus:before{content:"";border:var(--_ui5-v2-4-0_color_picker_slider_handle_inline_focus);display:block;height:1.625rem;border-radius:1rem;width:1.05rem;box-sizing:border-box;position:absolute;inset:-3px -3px 2px}.ui5-color-picker-alpha-slider::part(handle):before,.ui5-color-picker-hue-slider::part(handle):before{display:none}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top)}:dir(rtl) [ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-image:-webkit-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(right,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}:dir(rtl) .ui5-color-picker-alpha-slider::part(handle),:dir(rtl) .ui5-color-picker-hue-slider::part(handle){--_ui5-v2-4-0_slider_handle_margin_left: 0}:dir(rtl) .ui5-color-picker-sliders-wrapper{margin-left:10px}\n' };
var SF, EF = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
const TF = 6.5;
let IF = SF = class extends wI {
  async formElementAnchor() {
    return this.getFocusDomRefAsync();
  }
  get formFormattedValue() {
    return this.value;
  }
  constructor() {
    super(), this.value = "rgba(255,255,255,1)", this.hex = "ffffff", this._value = mL(this.value), this._alpha = 1, this._hue = 0, this._isSelectedColorChanged = false, this._isHueValueChanged = false, this._wrongHEX = false, this._selectedCoordinates = { x: 249.5, y: 249.5 }, this._mainValue = { r: 255, g: 0, b: 0 }, this.selectedHue = 0, this.mouseDown = false, this.mouseIn = false;
  }
  onBeforeRendering() {
    this._value = mL(this.value);
    const e6 = `rgba(${this._value.r},${this._value.g},${this._value.b},1)`;
    this._setHex(), this._setValues(), this.style.setProperty(uS("--ui5_Color_Picker_Progress_Container_Color"), e6);
  }
  _handleMouseDown(e6) {
    this.mouseDown = true, this.mouseIn = true, this._changeSelectedColor(e6.offsetX, e6.offsetY);
  }
  _handleMouseUp() {
    this.mouseDown = false;
  }
  _handleMouseOut(e6) {
    if (!this.mouseIn || !this.mouseDown) return;
    const t2 = e6.target, i2 = t2.offsetHeight, n2 = t2.offsetWidth, o2 = e6.offsetX <= 0, r2 = e6.offsetY <= 0, s2 = e6.offsetY >= t2.offsetHeight, a2 = e6.offsetX >= t2.offsetWidth;
    let l2, c2;
    l2 = o2 ? 0 : a2 ? n2 : e6.offsetX, c2 = r2 ? 0 : s2 ? i2 : e6.offsetY, this._changeSelectedColor(l2, c2), this.mouseIn = false, this.mouseDown = false;
  }
  _handleMouseMove(e6) {
    this.mouseDown && this.mouseIn && this._changeSelectedColor(e6.offsetX, e6.offsetY);
  }
  _handleAlphaInput(e6) {
    const t2 = e6.target.value;
    this._alpha = parseFloat(t2), Number.isNaN(this._alpha) && (this._alpha = 1), this._isHueValueChanged = true, this._setColor(this._value);
  }
  _handleHueInput(e6) {
    this.selectedHue = e6.target.value, this._hue = this.selectedHue, this._setMainColor(this._hue), this._isHueValueChanged = true;
    const t2 = this._selectedCoordinates.x + TF, i2 = this._selectedCoordinates.y + TF, n2 = this._calculateColorFromCoordinates(t2, i2);
    n2 && this._setColor(AL(n2));
  }
  _handleHEXChange(e6) {
    const t2 = new RegExp("^[<0-9 abcdef]+$"), i2 = e6.target;
    let n2 = i2.value.toLowerCase();
    3 === n2.length && (n2 = `${n2[0]}${n2[0]}${n2[1]}${n2[1]}${n2[2]}${n2[2]}`);
    const o2 = 6 === n2.length && t2.test(n2);
    o2 && i2.value !== n2 && (this._wrongHEX = false, i2.value = n2), n2 !== this.hex && (this.hex = n2, o2 ? (this._wrongHEX = false, this._setColor(bL(this.hex))) : this._wrongHEX = true);
  }
  _handleRGBInputsChange(e6) {
    const t2 = e6.target, i2 = parseInt(t2.value) || 0;
    let n2;
    switch (t2.id) {
      case "red":
        n2 = { ...this._value, r: i2 };
        break;
      case "green":
        n2 = { ...this._value, g: i2 };
        break;
      case "blue":
        n2 = { ...this._value, b: i2 };
        break;
      default:
        n2 = { ...this._value };
    }
    this._setColor(n2);
  }
  _setMainColor(e6) {
    this._mainValue = e6 <= 255 ? { r: 255, g: e6, b: 0 } : e6 <= 510 ? { r: 255 - (e6 - 255), g: 255, b: 0 } : e6 <= 765 ? { r: 0, g: 255, b: e6 - 510 } : e6 <= 1020 ? { r: 0, g: 765 - (e6 - 255), b: 255 } : e6 <= 1275 ? { r: e6 - 1020, g: 0, b: 255 } : { r: 255, g: 0, b: 1275 - (e6 - 255) };
  }
  _handleAlphaChange() {
    this._alpha = this._alpha < 0 ? 0 : this._alpha, this._alpha = this._alpha > 1 ? 1 : this._alpha;
  }
  _changeSelectedColor(e6, t2) {
    this._selectedCoordinates = { x: e6 - TF, y: t2 - TF }, this._isSelectedColorChanged = true;
    const i2 = this._calculateColorFromCoordinates(e6, t2);
    i2 && this._setColor(AL(i2));
  }
  _onkeydown(e6) {
    WI(e6) && this._handleHEXChange(e6);
  }
  _calculateColorFromCoordinates(e6, t2) {
    const i2 = this._hue / 4.251, n2 = 1 - +(Math.round(parseFloat(t2 / 256 + "e+2")) + "e-2"), o2 = +(Math.round(parseFloat(e6 / 256 + "e+2")) + "e-2");
    if (n2 && o2) return { h: i2, s: n2, l: o2 };
  }
  _setColor(e6 = { r: 0, g: 0, b: 0 }) {
    this.value = `rgba(${e6.r}, ${e6.g}, ${e6.b}, ${this._alpha})`, this._wrongHEX = !this.isValidRGBColor(e6), this.fireDecoratorEvent("change");
  }
  isValidRGBColor(e6) {
    return e6.r >= 0 && e6.r <= 255 && e6.g >= 0 && e6.g <= 255 && e6.b >= 0 && e6.b <= 255;
  }
  _setHex() {
    let e6 = this._value.r.toString(16), t2 = this._value.g.toString(16), i2 = this._value.b.toString(16);
    1 === e6.length && (e6 = `0${e6}`), 1 === t2.length && (t2 = `0${t2}`), 1 === i2.length && (i2 = `0${i2}`), this.hex = e6 + t2 + i2;
  }
  _setValues() {
    const e6 = ((e7) => {
      const t2 = e7.r / 255, i2 = e7.g / 255, n2 = e7.b / 255, o2 = Math.max(t2, i2, n2), r2 = Math.min(t2, i2, n2), s2 = o2 - r2;
      let a2, l2 = 0;
      0 === s2 ? l2 = 0 : o2 === t2 ? l2 = (i2 - n2) / s2 % 6 * 60 : o2 === i2 ? l2 = 60 * ((n2 - t2) / s2 + 2) : o2 === n2 && (l2 = 60 * ((t2 - i2) / s2 + 4));
      const c2 = (o2 + r2) / 2;
      return a2 = 0 === s2 ? 0 : s2 / (1 - Math.abs(2 * c2 - 1)), { h: l2, s: a2, l: c2 };
    })(this._value);
    this._selectedCoordinates = { x: 2.56 * Math.round(100 * e6.l) - TF, y: 256 - 2.56 * Math.round(100 * e6.s) - TF }, this._isSelectedColorChanged ? this._isSelectedColorChanged = false : this._isHueValueChanged ? (this._isHueValueChanged = false, this._hue = this.selectedHue ? this.selectedHue : this._hue) : this._hue = Math.round(4.25 * e6.h), this._setMainColor(this._hue);
  }
  get hueSliderLabel() {
    return SF.i18nBundle.getText(cB);
  }
  get alphaSliderLabel() {
    return SF.i18nBundle.getText(lB);
  }
  get hexInputLabel() {
    return SF.i18nBundle.getText(hB);
  }
  get redInputLabel() {
    return SF.i18nBundle.getText(uB);
  }
  get greenInputLabel() {
    return SF.i18nBundle.getText(dB);
  }
  get blueInputLabel() {
    return SF.i18nBundle.getText(pB);
  }
  get alphaInputLabel() {
    return SF.i18nBundle.getText(_B);
  }
  get inputsDisabled() {
    return !!this._wrongHEX || void 0;
  }
  get hexInputErrorState() {
    return this._wrongHEX ? "Error" : void 0;
  }
  get styles() {
    return { mainColor: { "background-color": `rgb(${this._mainValue.r}, ${this._mainValue.g}, ${this._mainValue.b})` }, circle: { left: `${this._selectedCoordinates.x}px`, top: `${this._selectedCoordinates.y}px` }, colorSpan: { "background-color": `rgba(${this._value.r}, ${this._value.g}, ${this._value.b}, ${this._alpha})` } };
  }
};
EF([SI()], IF.prototype, "value", void 0), EF([SI()], IF.prototype, "name", void 0), EF([SI({ noAttribute: true })], IF.prototype, "hex", void 0), EF([SI({ type: Object })], IF.prototype, "_mainValue", void 0), EF([SI({ type: Object })], IF.prototype, "_value", void 0), EF([SI({ type: Object })], IF.prototype, "_selectedCoordinates", void 0), EF([SI({ type: Number })], IF.prototype, "_alpha", void 0), EF([SI({ type: Number })], IF.prototype, "_hue", void 0), EF([SI({ type: Boolean })], IF.prototype, "_isSelectedColorChanged", void 0), EF([SI({ type: Boolean })], IF.prototype, "_isHueValueChanged", void 0), EF([SI({ type: Boolean })], IF.prototype, "_wrongHEX", void 0), EF([HM("@ui5/webcomponents")], IF, "i18nBundle", void 0), IF = SF = EF([CI({ tag: "ui5-color-picker", renderer: UM, formAssociated: true, styles: CF, template: function(e6, t2, i2) {
  return i2 ? NM`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${LM(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${LM(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><${zM("ui5-slider", t2, i2)} disabled="${FM(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${FM(this._hue)}" accessible-name="${FM(this.hueSliderLabel)}" @ui5-input="${FM(this._handleHueInput)}"></${zM("ui5-slider", t2, i2)}><${zM("ui5-slider", t2, i2)} disabled="${FM(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${FM(this._alpha)}" accessible-name="${FM(this.alphaSliderLabel)}" @ui5-input="${FM(this._handleAlphaInput)}"></${zM("ui5-slider", t2, i2)}></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${LM(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><${zM("ui5-label", t2, i2)}>Hex</${zM("ui5-label", t2, i2)}><${zM("ui5-input", t2, i2)} class="ui5-color-picker-hex-input" value="${FM(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${FM(this.hexInputLabel)}" @ui5-change="${FM(this._handleHEXChange)}" value-state="${FM(this.hexInputErrorState)}"></${zM("ui5-input", t2, i2)}></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${FM(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><${zM("ui5-input", t2, i2)} id="red" class="ui5-color-picker-rgb-input" disabled="${FM(this.inputsDisabled)}" accessible-name="${FM(this.redInputLabel)}" value="${FM(this._value.r)}"></${zM("ui5-input", t2, i2)}><${zM("ui5-label", t2, i2)}>R</${zM("ui5-label", t2, i2)}></div><div class="ui5-color-picker-rgb"><${zM("ui5-input", t2, i2)} id="green" class="ui5-color-picker-rgb-input" disabled="${FM(this.inputsDisabled)}" accessible-name="${FM(this.greenInputLabel)}" value="${FM(this._value.g)}"></${zM("ui5-input", t2, i2)}><${zM("ui5-label", t2, i2)}>G</${zM("ui5-label", t2, i2)}></div><div class="ui5-color-picker-rgb"><${zM("ui5-input", t2, i2)} id="blue" class="ui5-color-picker-rgb-input" disabled="${FM(this.inputsDisabled)}" accessible-name="${FM(this.blueInputLabel)}" value="${FM(this._value.b)}"></${zM("ui5-input", t2, i2)}><${zM("ui5-label", t2, i2)}>B</${zM("ui5-label", t2, i2)}></div><div class="ui5-color-picker-rgb"><${zM("ui5-input", t2, i2)} id="alpha" disabled="${FM(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${FM(this._alpha)}" accessible-name="${FM(this.alphaInputLabel)}" @ui5-input="${FM(this._handleAlphaInput)}" @ui5-change="${FM(this._handleAlphaChange)}"></${zM("ui5-input", t2, i2)}><${zM("ui5-label", t2, i2)}>A</${zM("ui5-label", t2, i2)}></div></div></section>` : NM`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${LM(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${LM(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><ui5-slider disabled="${FM(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${FM(this._hue)}" accessible-name="${FM(this.hueSliderLabel)}" @ui5-input="${FM(this._handleHueInput)}"></ui5-slider><ui5-slider disabled="${FM(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${FM(this._alpha)}" accessible-name="${FM(this.alphaSliderLabel)}" @ui5-input="${FM(this._handleAlphaInput)}"></ui5-slider></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${LM(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><ui5-label>Hex</ui5-label><ui5-input class="ui5-color-picker-hex-input" value="${FM(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${FM(this.hexInputLabel)}" @ui5-change="${FM(this._handleHEXChange)}" value-state="${FM(this.hexInputErrorState)}"></ui5-input></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${FM(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><ui5-input id="red" class="ui5-color-picker-rgb-input" disabled="${FM(this.inputsDisabled)}" accessible-name="${FM(this.redInputLabel)}" value="${FM(this._value.r)}"></ui5-input><ui5-label>R</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="green" class="ui5-color-picker-rgb-input" disabled="${FM(this.inputsDisabled)}" accessible-name="${FM(this.greenInputLabel)}" value="${FM(this._value.g)}"></ui5-input><ui5-label>G</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="blue" class="ui5-color-picker-rgb-input" disabled="${FM(this.inputsDisabled)}" accessible-name="${FM(this.blueInputLabel)}" value="${FM(this._value.b)}"></ui5-input><ui5-label>B</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="alpha" disabled="${FM(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${FM(this._alpha)}" accessible-name="${FM(this.alphaInputLabel)}" @ui5-input="${FM(this._handleAlphaInput)}" @ui5-change="${FM(this._handleAlphaChange)}"></ui5-input><ui5-label>A</ui5-label></div></div></section>`;
}, dependencies: [iF, xF, KP], shadowRootOptions: { delegatesFocus: true } }), EI("change", { bubbles: true })], IF), IF.define();
const MF = IF;
class BF extends MC {
  static get dependencies() {
    return [sL, tk, MF];
  }
  get colorPaletteDialogTitle() {
    return BF.i18nBundle.getText(rB);
  }
  get colorPaletteDialogOKButton() {
    return BF.i18nBundle.getText(oB);
  }
  get colorPaletteCancelButton() {
    return BF.i18nBundle.getText(nB);
  }
}
function RF(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-step-icon ui5-step-dec" title="${FM(this.decIconTitle)}"><${zM("ui5-icon", t2, i2)} id="${FM(this._id)}-dec" name="${FM(this.decIconName)}" tabindex="-1" accessible-name="${FM(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></${zM("ui5-icon", t2, i2)}></div>` : NM`<div class="ui5-step-icon ui5-step-dec" title="${FM(this.decIconTitle)}"><ui5-icon id="${FM(this._id)}-dec" name="${FM(this.decIconName)}" tabindex="-1" accessible-name="${FM(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></ui5-icon></div>`;
}
function kF(e6, t2, i2) {
  return NM`<slot name="valueStateMessage" slot="valueStateMessage"></slot>`;
}
function PF(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-step-icon ui5-step-inc" title="${FM(this.incIconTitle)}"><${zM("ui5-icon", t2, i2)} id="${FM(this._id)}-inc" name="${FM(this.incIconName)}" tabindex="-1" accessible-name="${FM(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></${zM("ui5-icon", t2, i2)}></div>` : NM`<div class="ui5-step-icon ui5-step-inc" title="${FM(this.incIconTitle)}"><ui5-icon id="${FM(this._id)}-inc" name="${FM(this.incIconName)}" tabindex="-1" accessible-name="${FM(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></ui5-icon></div>`;
}
(async (e6, t2) => {
  var _a3, _b3;
  await Promise.all(((_a3 = t2.dependencies) == null ? void 0 : _a3.map((e7) => e7.define())) || []), await ((_b3 = t2.define) == null ? void 0 : _b3.call(t2)), RC.set(e6, t2), NC(e6);
})("ColorPaletteMoreColors", BF);
CT("less", { pathData: "M464 224q16 0 16 16v32q0 16-16 16H48q-6 0-11-4.5T32 272v-32q0-7 5-11.5t11-4.5h416z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("less", { pathData: "M454 275H58q-11 0-18.5-7T32 250t7.5-18.5T58 224h396q11 0 18.5 7.5T480 250t-7.5 18-18.5 7z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
CT("add", { pathData: "M32 240q0-7 5-11.5t11-4.5h176V48q0-7 5-11.5t11-4.5h32q16 0 16 16v176h176q16 0 16 16v32q0 16-16 16H288v176q0 16-16 16h-32q-6 0-11-4.5t-5-11.5V288H48q-6 0-11-4.5T32 272v-32z", ltr: false, accData: ik, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("add", { pathData: "M454 230q11 0 18.5 7.5T480 256t-7.5 18.5T454 282H282v172q0 11-7.5 18.5T256 480t-18.5-7.5T230 454V282H58q-11 0-18.5-7.5T32 256t7.5-18.5T58 230h172V58q0-11 7.5-18.5T256 32t18.5 7.5T282 58v172h172z", ltr: false, accData: ik, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const DF = { packageName: "@ui5/webcomponents", fileName: "themes/StepInput.css.ts", content: ':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host(:not([hidden])){display:inline-block;width:100%;line-height:normal;letter-spacing:normal;word-spacing:normal}:host{--ui5-v2-4-0_input_focus_pseudo_element_content: none;color:var(--sapField_TextColor);background-color:var(--sapField_Background);border:var(--_ui5-v2-4-0_step_input_border_style);border-radius:var(--sapField_BorderCornerRadius);box-sizing:border-box;height:var(--_ui5-v2-4-0_input_height);position:relative;margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;min-width:var(--_ui5-v2-4-0_step_input_min_width);text-align:right;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host .ui5-step-input-input{text-align:inherit;height:inherit}:host(:not([value-state]):not([readonly]):not([disabled])){box-shadow:none}:host(:not([value-state]):not([readonly]):not([disabled]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0_step_input_border_color_hover);border:var(--_ui5-v2-4-0_step_input_border_hover)}:host(:not([value-state]):not([readonly]):not([disabled]):not([focused]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):not([focused]):hover){background-color:var(--sapField_Hover_Background);border:var(--_ui5-v2-4-0_step_input_border_style_hover);box-shadow:var(--sapField_Hover_Shadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InformationShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):hover),:host([value-state="Negative"]:not([readonly]):not([disabled]):hover),:host([value-state="Information"]:not([readonly]):not([disabled]):hover),:host([value-state="Critical"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0-step_input_button_state_hover_background_color)}:host(:not([value-state]):not([readonly]):not([disabled])[focused]),:host([value-state="None"]:not([readonly]):not([disabled])[focused]),:host([value-state="Positive"]:not([readonly]):not([disabled])[focused]),:host([value-state="Negative"]:not([readonly]):not([disabled])[focused]),:host([value-state="Information"]:not([readonly]):not([disabled])[focused]),:host([value-state="Critical"]:not([readonly]):not([disabled])[focused]){background-color:var(--sapField_Focus_Background)}:host([value-state="Positive"]:not([readonly]):not([disabled])):after,:host([value-state="Negative"]:not([readonly]):not([disabled])):after,:host([value-state="None"]:not([readonly]):not([disabled])):after,:host([value-state="Information"]:not([readonly]):not([disabled])):after,:host([value-state="Critical"]:not([readonly]):not([disabled])):after{position:absolute;content:"";inset:-1px;outline:none;pointer-events:none;border-radius:var(--sapField_BorderCornerRadius);border-style:var(--_ui5-v2-4-0_input_error_warning_border_style);z-index:1;border-width:0px}:host([value-state="Information"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InformationColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state="Critical"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_WarningColor);border-width:2px}:host([value-state="Positive"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_SuccessColor);border-width:1px}:host([value-state="Negative"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InvalidColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state]):after{border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input{background-color:var(--_ui5-v2-4-0_input_input_background_color)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input:hover{background-color:var(--_ui5-v2-4-0_step_input_input_error_background_color)}:host([value-state]:not([value-state="None"]) .ui5-step-input-input[focused]){outline:none}:host .ui5-step-input-input{width:100%;color:inherit;background-color:inherit;border:var(--_ui5-v2-4-0_step_input_input_border);box-sizing:border-box;vertical-align:top;margin-top:var(--_ui5-v2-4-0_step_input_input_margin_top);min-width:var(--_ui5-v2-4-0_step_input_min_width);padding-inline-start:var(--_ui5-v2-4-0_step_input_padding);padding-inline-end:var(--_ui5-v2-4-0_step_input_padding);position:relative;outline:none;line-height:inherit;letter-spacing:inherit;word-spacing:inherit}:host .ui5-step-input-input[readonly]{padding:0}:host .ui5-step-input-input:hover,:host .ui5-step-input-input[focused]{box-shadow:none}:host .ui5-step-input-root{white-space:nowrap;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;height:inherit}:host .ui5-step-input-input[text-align=left]{text-align:left}:host .ui5-step-input-input[text-align=center]{text-align:center}:host .ui5-step-input-input[text-align=right]{text-align:right}:host .ui5-step-icon{position:absolute;display:var(--_ui5-v2-4-0_step_input_button_display);height:2rem;height:100%;background-color:var(--_ui5-v2-4-0_step_input_button_background_color);z-index:0}:host .ui5-step-icon[focused]{border:none;outline:none}:host .ui5-step-icon.ui5-step-dec{left:var(--_ui5-v2-4-0_step_input_button_left);z-index:1}:host .ui5-step-icon.ui5-step-inc{right:var(--_ui5-v2-4-0_step_input_button_right)}:host .ui5-step-icon *:not([clickable]),:host .ui5-step-icon *:not([clickable]):active,:host .ui5-step-icon *:not([clickable]):hover{opacity:.5;background-color:transparent;color:var(--sapContent_IconColor)}:host .ui5-step-icon :not([clickable]) *:hover,:host .ui5-step-icon :not([clickable]) *:active{background-color:var(--sapField_Background);color:var(--sapContent_IconColor)}:host .ui5-step-input-input[focused]:after{position:absolute;content:"";border:var(--_ui5-v2-4-0_step_input_input_border_focused_after);top:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);right:0;bottom:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);border-radius:var(--_ui5-v2-4-0_step_input_input_border_radius_focused_after);left:0;outline:none;pointer-events:none;z-index:1}:host .ui5-step-input-input[focused]{outline:none}:host([value-state="Information"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_information_border_color_focused_after)}:host([value-state="Critical"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after)}:host([value-state="Positive"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_success_border_color_focused_after)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_error_border_color_focused_after)}:host .ui5-step-input-input::-webkit-outer-spin-button,:host .ui5-step-input-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}:host([disabled]) .ui5-step-icon{background-color:var(--_ui5-v2-4-0_step_input_disabled_button_background)}:host([disabled]) .ui5-step-icon [ui5-icon]{color:var(--sapField_ReadOnly_BorderColor)}\n' };
var LF, FF = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let NF = LF = class extends wI {
  constructor() {
    super(...arguments), this.value = 0, this.step = 1, this.valueState = "None", this.required = false, this.disabled = false, this.readonly = false, this.valuePrecision = 0, this._decIconDisabled = false, this._incIconDisabled = false, this.focused = false, this._inputFocused = false, this._previousValue = this.value, this._waitTimeout = 500, this._speed = 120, this._spinStarted = false;
  }
  async formElementAnchor() {
    var _a3;
    return (_a3 = await this.getFocusDomRefAsync()) == null ? void 0 : _a3.getFocusDomRefAsync();
  }
  get formFormattedValue() {
    return this.value.toString();
  }
  get type() {
    return EL.Number;
  }
  get decIconTitle() {
    return LF.i18nBundle.getText(jB);
  }
  get decIconName() {
    return "less";
  }
  get incIconTitle() {
    return LF.i18nBundle.getText(XB);
  }
  get incIconName() {
    return "add";
  }
  get _decIconClickable() {
    return !this._decIconDisabled && !this.readonly && !this.disabled;
  }
  get _incIconClickable() {
    return !this._incIconDisabled && !this.readonly && !this.disabled;
  }
  get _isFocused() {
    return this.focused;
  }
  get _displayValue() {
    return 0 === this.value || Number.isInteger(this.value) ? this.value.toFixed(this.valuePrecision) : this.input && this.value === Number(this.input.value) ? this.input.value : this.value.toString();
  }
  get accInfo() {
    return { ariaRequired: this.required, ariaLabel: cR(this) };
  }
  get inputAttributes() {
    return { min: void 0 === this.min ? void 0 : this.min, max: void 0 === this.max ? void 0 : this.max, step: this.step };
  }
  onBeforeRendering() {
    this._setButtonState(), void 0 === this._previousValue && (this._previousValue = this.value);
  }
  get input() {
    return this.shadowRoot.querySelector("[ui5-input]");
  }
  get innerInput() {
    return this.input.shadowRoot.querySelector("input");
  }
  get inputOuter() {
    return this.shadowRoot.querySelector(".ui5-step-input-input");
  }
  _onButtonFocusOut() {
    setTimeout(() => {
      this._inputFocused || this.inputOuter.removeAttribute("focused");
    }, 0);
  }
  _onInputFocusIn() {
    this._inputFocused = true, this.value !== this._previousValue && (this._previousValue = this.value);
  }
  _onInputFocusOut() {
    this._inputFocused = false, this._onInputChange();
  }
  _setButtonState() {
    this._decIconDisabled = void 0 !== this.min && this.value <= this.min, this._incIconDisabled = void 0 !== this.max && this.value >= this.max;
  }
  _validate() {
    void 0 === this._initialValueState && (this._initialValueState = this.valueState), this._updateValueState();
  }
  _updateValueState() {
    const e6 = (void 0 === this.min || Number(this.input.value) >= this.min) && (void 0 === this.max || Number(this.input.value) <= this.max), t2 = this._isValueWithCorrectPrecision, i2 = this.valueState, n2 = e6 && t2;
    this.valueState = n2 ? ZP.None : ZP.Negative;
    !this.fireDecoratorEvent("value-state-change", { valueState: this.valueState, valid: n2 }) && (this.valueState = i2);
  }
  _preciseValue(e6) {
    const t2 = 10 ** this.valuePrecision;
    return Math.round(e6 * t2) / t2;
  }
  _fireChangeEvent() {
    this._previousValue !== this.value && (this._previousValue = this.value, this.fireDecoratorEvent("change", { value: this.value }));
  }
  _modifyValue(e6, t2 = false) {
    let i2;
    i2 = this.value + e6, void 0 !== this.min && i2 < this.min && (i2 = this.min), void 0 !== this.max && i2 > this.max && (i2 = this.max), i2 = this._preciseValue(i2), i2 !== this.value && (this.value = i2, this.input.value = i2.toFixed(this.valuePrecision), this._validate(), this._setButtonState(), this.focused = true, this.inputOuter.setAttribute("focused", ""), t2 ? this._fireChangeEvent() : this.input.focus());
  }
  _incValue(e6) {
    this._incIconClickable && e6.isTrusted && !this.disabled && !this.readonly && (this._modifyValue(this.step, true), this._previousValue = this.value);
  }
  _decValue(e6) {
    this._decIconClickable && e6.isTrusted && !this.disabled && !this.readonly && (this._modifyValue(-this.step, true), this._previousValue = this.value);
  }
  get _isValueWithCorrectPrecision() {
    const e6 = this.input.value.includes(".") ? "." : ",", t2 = this.input.value.split(e6);
    return (t2.length > 1 ? t2[1].length : 0) === this.valuePrecision;
  }
  _onInputChange() {
    this._setDefaultInputValueIfNeeded();
    const e6 = Number(this.input.value);
    this._isValueChanged(e6) && this._updateValueAndValidate(e6);
  }
  _setDefaultInputValueIfNeeded() {
    if ("" === this.input.value) {
      const e6 = (this.min || 0).toFixed(this.valuePrecision);
      this.input.value = e6, this.innerInput.value = e6;
    }
  }
  _isValueChanged(e6) {
    const t2 = this._isValueWithCorrectPrecision, i2 = t2 && this.valueState === ZP.Negative;
    return this.value !== this._previousValue || this.value !== e6 || 0 === e6 || !t2 || i2;
  }
  _updateValueAndValidate(e6) {
    this.value = e6, this._validate(), this._setButtonState(), this._fireChangeEvent();
  }
  _onfocusin() {
    this.focused = true;
  }
  _onfocusout() {
    this.focused = false;
  }
  _onkeydown(e6) {
    let t2 = true;
    this.disabled || this.readonly || (WI(e6) ? this._onInputChange() : (ZI(e6) ? this._modifyValue(this.step) : JI(e6) ? this._modifyValue(-this.step) : hM(e6) ? (this.value = this._previousValue, this.input.value = this.value.toFixed(this.valuePrecision)) : void 0 !== this.max && (((e7) => (e7.key ? "PageUp" === e7.key : e7.keyCode === DI) && yM(e7, false, false, true))(e6) || ((e7) => (e7.key ? "ArrowUp" === e7.key || "Up" === e7.key : e7.keyCode === UI) && yM(e7, true, false, true))(e6)) ? this._modifyValue(this.max - this.value) : void 0 !== this.min && (((e7) => (e7.key ? "PageDown" === e7.key : e7.keyCode === LI) && yM(e7, false, false, true))(e6) || ((e7) => (e7.key ? "ArrowDown" === e7.key || "Down" === e7.key : e7.keyCode === HI) && yM(e7, true, false, true))(e6)) ? this._modifyValue(this.min - this.value) : iM(e6) || nM(e6) || oM(e6) || rM(e6) || (t2 = false), t2 && e6.preventDefault()));
  }
  _decSpin() {
    this._decIconDisabled || this._spinValue(false, true);
  }
  _incSpin() {
    this._incIconDisabled || this._spinValue(true, true);
  }
  _calcWaitTimeout() {
    return this._speed *= 0.8, this._waitTimeout = this._waitTimeout - this._speed < 50 ? 50 : this._waitTimeout - this._speed, this._waitTimeout;
  }
  _spinValue(e6, t2 = false) {
    t2 && (this._waitTimeout = 500, this._speed = 120, this._btnDown = true), this._spinTimeoutId = setTimeout(() => {
      this._btnDown && (this._spinStarted = true, this._modifyValue(e6 ? this.step : -this.step), this._setButtonState(), !this._incIconDisabled && e6 || !this._decIconDisabled && !e6 ? this._spinValue(e6) : (this._resetSpin(), this._fireChangeEvent()));
    }, this._calcWaitTimeout());
  }
  _resetSpin() {
    clearTimeout(this._spinTimeoutId), this._btnDown = false, this._spinStarted = false;
  }
  _resetSpinOut() {
    this._btnDown && (this._resetSpin(), this._fireChangeEvent());
  }
};
FF([SI({ type: Number })], NF.prototype, "value", void 0), FF([SI({ type: Number })], NF.prototype, "min", void 0), FF([SI({ type: Number })], NF.prototype, "max", void 0), FF([SI({ type: Number })], NF.prototype, "step", void 0), FF([SI()], NF.prototype, "valueState", void 0), FF([SI({ type: Boolean })], NF.prototype, "required", void 0), FF([SI({ type: Boolean })], NF.prototype, "disabled", void 0), FF([SI({ type: Boolean })], NF.prototype, "readonly", void 0), FF([SI()], NF.prototype, "placeholder", void 0), FF([SI()], NF.prototype, "name", void 0), FF([SI({ type: Number })], NF.prototype, "valuePrecision", void 0), FF([SI()], NF.prototype, "accessibleName", void 0), FF([SI()], NF.prototype, "accessibleNameRef", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_decIconDisabled", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_incIconDisabled", void 0), FF([SI({ type: Boolean })], NF.prototype, "focused", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_inputFocused", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_previousValue", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_waitTimeout", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_speed", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_btnDown", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_spinTimeoutId", void 0), FF([SI({ noAttribute: true })], NF.prototype, "_spinStarted", void 0), FF([TI()], NF.prototype, "valueStateMessage", void 0), FF([HM("@ui5/webcomponents")], NF, "i18nBundle", void 0), NF = LF = FF([CI({ tag: "ui5-step-input", formAssociated: true, renderer: UM, styles: DF, template: function(e6, t2, i2) {
  return i2 ? NM`<div id="${FM(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly ? void 0 : RF.call(this, e6, t2, i2)}<${zM("ui5-input", t2, i2)} id="${FM(this._id)}-inner" class="ui5-step-input-input" placeholder="${FM(this.placeholder)}" type="${FM(this.type)}" value="${FM(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${FM(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${FM(this.accInfo)}" ._nativeInputAttributes="${FM(this.inputAttributes)}" @ui5-change="${FM(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length ? kF.call(this, e6, t2, i2) : void 0}</${zM("ui5-input", t2, i2)}>${this.readonly ? void 0 : PF.call(this, e6, t2, i2)}</div>` : NM`<div id="${FM(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly ? void 0 : RF.call(this, e6, t2, i2)}<ui5-input id="${FM(this._id)}-inner" class="ui5-step-input-input" placeholder="${FM(this.placeholder)}" type="${FM(this.type)}" value="${FM(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${FM(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${FM(this.accInfo)}" ._nativeInputAttributes="${FM(this.inputAttributes)}" @ui5-change="${FM(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length ? kF.call(this, e6, t2, i2) : void 0}</ui5-input>${this.readonly ? void 0 : PF.call(this, e6, t2, i2)}</div>`;
}, dependencies: [BR, iF] }), EI("change", { bubbles: true }), EI("value-state-change", { detail: { valueState: { type: String }, valid: { type: Boolean } }, bubbles: true, cancelable: true })], NF), NF.define();
var OF = Object.defineProperty, UF = Object.getOwnPropertyDescriptor, zF = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? UF(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && OF(t2, i2, r2), r2;
};
let HF = class extends le {
  constructor() {
    super(...arguments), this.isColumnMode = false;
  }
  render() {
    return U`
      <div
        id="layout"
        class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}"
      >
        <div class="input-row">
          <ui5-label show-colon>Show Axes</ui5-label>
          <ui5-checkbox
            ?checked="${this.environmentSettings.showAxes}"
            @change="${this._handleShowAxesStateChanged}"
          ></ui5-checkbox>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}"
        ></div>
        <div>
          <div class="input-row">
              <ui5-label show-colon for="color-palette-current"
                >Background Color</ui5-label
              >
              <ui5-color-palette-item
                value=${this.environmentSettings.backgroundColor[0]}
              @click=${this._toggleColorPalette}
                id="color-palette-current"
              ></ui5-color-palette-item>
          </div>
          <ui5-color-palette-popover
            id="colorPalettePopover"
            show-more-colors=""
            @item-click=${this._handleColorChanged}
          >
            <ui5-color-palette-item value="#444444"></ui5-color-palette-item>
            <ui5-color-palette-item value="lightpink"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(216,124,172)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#6c666d"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(55,81,95)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#0072bb"></ui5-color-palette-item>
            <ui5-color-palette-item value="powderblue"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(143,201,58)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(195,172,206)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="orange"></ui5-color-palette-item>
          </ui5-color-palette-popover>
          <div class="input-row">
            <ui5-label show-colon>Gradient Effect</ui5-label>
            <ui5-checkbox
              ?checked="${this.environmentSettings.applyGradient}"
              @change="${this._handleApplyGradientStateChanged}"
            ></ui5-checkbox>
          </div>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}"
        ></div>
        <div class="input-row">
          <ui5-label show-colon>Light [%]</ui5-label>
          <ui5-step-input
            value="100"
            min="0"
            max="500"
            step="10"
            @change="${this._handleBrightnessChanged}"
          ></ui5-step-input>
        </div>
      </div>
    `;
  }
  _toggleColorPalette() {
    null !== this.colorPalettePopover && (void 0 === this.colorPalettePopover.opener && (this.colorPalettePopover.opener = this.colorPaletteToggle), this.colorPalettePopover.open = !this.colorPalettePopover.open);
  }
  _handleColorChanged(e6) {
    this.environmentSettings.backgroundColor = e6.detail.color, this.requestUpdate();
  }
  _handleShowAxesStateChanged(e6) {
    this.environmentSettings.showAxes = e6.target.checked;
  }
  _handleApplyGradientStateChanged(e6) {
    this.environmentSettings.applyGradient = e6.target.checked;
  }
  _handleBrightnessChanged(e6) {
    this.environmentSettings.brightness = e6.detail.value / 100;
  }
};
HF.styles = r`
    :host {
      height: 100%;
      width: 100%;
    }

    #divider.ver-orientation {
      border-top: 0.05rem solid darkgrey;
    }

    #divider.hor-orientation {
      border-left: 0.05rem solid darkgrey;
    }

    #layout.ver-orientation {
      flex-direction: column;
    }

    #layout.hor-orientation {
      flex-direction: row;
    }

    #layout {
      position: relative;
      display: flex;
      align-items: stretch;
      gap: 0.5rem;
    }

    .input-row {
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .ver-orientation > .input-row {
      width: 11rem;
    }
  `, zF([de({ type: Boolean })], HF.prototype, "isColumnMode", 2), zF([de({ type: Object })], HF.prototype, "environmentSettings", 2), zF([pe("#colorPalettePopover")], HF.prototype, "colorPalettePopover", 2), zF([pe("#color-palette-current")], HF.prototype, "colorPaletteToggle", 2), HF = zF([he("environment-settings")], HF);
var QF = Object.defineProperty, VF = Object.getOwnPropertyDescriptor, GF = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? VF(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && QF(t2, i2, r2), r2;
};
let qF = class extends le {
  constructor() {
    super(...arguments), this.isColumnMode = false, this.isAutoRotationDisabled = false, this._userAutoRotationOn = false;
  }
  render() {
    return U`
    <div id="layout" class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}">
      <div>    
        <ui5-title level="H5">3D</ui5-title>
        <div class = "input-row" >
          <ui5-label for="xOrientation" show-colon>X [&deg;]</ui5-label>
          <ui5-step-input id="xOrientation" value="0" min="0" max="359" step="10" @change="${this.handleXOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="yOrientation" show-colon>Y [&deg;]</ui5-label>
          <ui5-step-input id="yOrientation" value="0" min="0" max="359" step="10" @change="${this.handleYOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="zOrientation" show-colon>Z [&deg;]</ui5-label>
          <ui5-step-input id="zOrientation" value="0" min="0" max="359" step="10" @change="${this.handleZOrientationChanged}"></ui5-step-input>
        </div>
      </div>
      <div id="divider" class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}"></div>
      <div>    
        <ui5-title level="H5">2D</ui5-title>
        <div class = "input-row" >
          <ui5-label show-colon>Auto Rotation</ui5-label>
          <ui5-checkbox id= "autoRotationCheckbox" 
             text="${this.imageRotationSettings.isAutoRotationActivated ? "On" : "Off"}"
             ?checked="${this.imageRotationSettings.isAutoRotationActivated}" 
             ?disabled="${this.isAutoRotationDisabled}" 
             @change="${this._handleAutoRotationStateChanged}"></ui5-checkbox>
        </div>
        <div class = "input-row"  >
          <ui5-label for="imageAngle" show-colon>&phi; [&deg;]</ui5-label>
          <ui5-step-input id="imageAngle"
           value="${this.imageRotationSettings.isAutoRotationActivated ? this.imageRotationSettings.autoRotationAngle : this.imageRotationSettings.userSetRotationAngle}"
            min="-180" max="180" step="10" 
            ?disabled="${this.imageRotationSettings.isAutoRotationActivated}"
            @change="${this._handleRotationValueChanged}"></ui5-step-input>
        </div>
      </div>
    </div>
        `;
  }
  firstUpdated() {
    this.imageRotationSettings.on("rotation-angle-changed", () => this.requestUpdate());
  }
  updated(e6) {
    super.updated(e6), e6.has("isAutoRotationDisabled") && (this.isAutoRotationDisabled ? (this._userAutoRotationOn = this.imageRotationSettings.isAutoRotationActivated, this.imageRotationSettings.isAutoRotationActivated = true) : this.imageRotationSettings.isAutoRotationActivated != this._userAutoRotationOn && (this.imageRotationSettings.isAutoRotationActivated = this._userAutoRotationOn));
  }
  _handleRotationValueChanged(e6) {
    this.imageRotationSettings.isAutoRotationActivated || (this.imageRotationSettings.userSetRotationAngle = e6.detail.value);
  }
  _handleAutoRotationStateChanged(e6) {
    const t2 = e6.target.checked;
    this.imageRotationSettings.isAutoRotationActivated != t2 && (this.imageRotationSettings.isAutoRotationActivated = t2);
  }
  _handleDegreeInput(e6) {
    return t2 = e6.detail.value, i2 = 0, n2 = 359, Math.min(Math.max(Number(t2), i2), n2) * Math.PI / 180;
    var t2, i2, n2;
  }
  handleXOrientationChanged(e6) {
    this.modelOrientationSettings.xOrientationInRad = this._handleDegreeInput(e6);
  }
  handleYOrientationChanged(e6) {
    this.modelOrientationSettings.yOrientationInRad = this._handleDegreeInput(e6);
  }
  handleZOrientationChanged(e6) {
    this.modelOrientationSettings.zOrientationInRad = this._handleDegreeInput(e6);
  }
};
qF.styles = r`
        :host {
          height: 100%;
          width: 100%;
        }

        #divider.ver-orientation {
          border-top: 0.05rem solid darkgrey;
        }

        #divider.hor-orientation {
          border-left: 0.05rem solid darkgrey;
        }

        #layout.ver-orientation{
          flex-direction: column;
        }

        #layout.hor-orientation{
          flex-direction: row;
        }

        #layout{
          position: relative;
          display: flex;
          align-items: stretch;
          gap: 1rem;
        }

        .input-row{
          position: relative;
          display: flex;
          align-items: center;
          width: 11rem; 
          gap: 1rem;
        }
      `, GF([de({ type: Boolean })], qF.prototype, "isColumnMode", 2), GF([de({ type: Boolean })], qF.prototype, "isAutoRotationDisabled", 2), GF([de({ type: Object })], qF.prototype, "imageRotationSettings", 2), GF([de({ type: Object })], qF.prototype, "modelOrientationSettings", 2), qF = GF([he("rotation-settings")], qF);
const $F = /* @__PURE__ */ new WeakMap();
let WF = class e5 {
  static get tasks() {
    return $F;
  }
  static enqueue(e6, t2) {
    $F.has(e6) || $F.set(e6, []), $F.get(e6).push(t2);
  }
  static run(t2, i2) {
    return $F.has(t2) || $F.set(t2, []), i2().then(() => {
      const i3 = $F.get(t2);
      if (i3.length > 0) return e5.run(t2, i3.shift());
      $F.delete(t2);
    });
  }
  static push(t2, i2) {
    $F.get(t2) ? e5.enqueue(t2, i2) : e5.run(t2, i2);
  }
};
const jF = (e6) => {
  let t2, i2, n2, o2 = null, r2 = false;
  const s2 = new Promise((s3, a2) => {
    n2 = (i3) => {
      o2 = o2 || i3;
      const a3 = i3 - o2, l2 = e6.duration - a3;
      if (a3 <= e6.duration) {
        const i4 = 1 - l2 / e6.duration;
        e6.advance(i4), r2 || (t2 = requestAnimationFrame(n2));
      } else e6.advance(1), s3();
    }, i2 = () => {
      r2 = true, cancelAnimationFrame(t2), a2(new Error("animation stopped"));
    };
  }).catch((e7) => e7);
  return WF.push(e6.element, () => ("function" == typeof e6.beforeStart && e6.beforeStart(), requestAnimationFrame(n2), new Promise((e7) => {
    s2.then(() => e7());
  }))), { promise: () => s2, stop: () => i2 };
};
let XF;
JC(() => {
  XF = void 0;
});
const YF = () => (void 0 === XF && (rS(), XF = tS.animationMode), XF);
CT("slim-arrow-right", { pathData: "M357.5 233q10 10 10 23t-10 23l-165 165q-6 5-12 5-5 0-11-5-5-6-5-11 0-6 5-12l160-159q3-3 3-6t-3-6l-159-159q-5-5-5-11t5-11 11-5 11 5z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
function KF(e6, t2, i2) {
  return NM`<div class="ui5-panel-heading-wrapper${DM(this.classes.stickyHeaderClass)}" role="${FM(this.headingWrapperRole)}" aria-level="${FM(this.headingWrapperAriaLevel)}"><div @click="${this._headerClick}" @keydown="${this._headerKeyDown}" @keyup="${this._headerKeyUp}" class="ui5-panel-header" tabindex="${FM(this.headerTabIndex)}" role="${FM(this.accInfo.role)}" aria-expanded="${FM(this.accInfo.ariaExpanded)}" aria-controls="${FM(this.accInfo.ariaControls)}" aria-labelledby="${FM(this.accInfo.ariaLabelledby)}" part="header">${this.fixed ? void 0 : ZF.call(this, e6, t2, i2)}${this._hasHeader ? tN.call(this, e6, t2, i2) : iN.call(this, e6, t2, i2)}</div></div>`;
}
function ZF(e6, t2, i2) {
  return NM`<div class="ui5-panel-header-button-root">${this._hasHeader ? JF.call(this, e6, t2, i2) : eN.call(this, e6, t2, i2)}</div>`;
}
function JF(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-button", t2, i2)} design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${FM(this.accInfo.button.accessibilityAttributes)} tooltip="${FM(this.accInfo.button.title)}" accessible-name="${FM(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><${zM("ui5-icon", t2, i2)} class="ui5-panel-header-icon ${DM(this.classes.headerBtn)}" name="slim-arrow-right"></${zM("ui5-icon", t2, i2)}></div></${zM("ui5-button", t2, i2)}>` : NM`<ui5-button design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${FM(this.accInfo.button.accessibilityAttributes)} tooltip="${FM(this.accInfo.button.title)}" accessible-name="${FM(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><ui5-icon class="ui5-panel-header-icon ${DM(this.classes.headerBtn)}" name="slim-arrow-right"></ui5-icon></div></ui5-button>`;
}
function eN(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-panel-header-button ui5-panel-header-icon ${DM(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${FM(this.toggleButtonTitle)}"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-panel-header-button ui5-panel-header-icon ${DM(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${FM(this.toggleButtonTitle)}"></ui5-icon>`;
}
function tN(e6, t2, i2) {
  return NM`<slot name="header"></slot>`;
}
function iN(e6, t2, i2) {
  return NM`<div id="${FM(this._id)}-header-title" class="ui5-panel-header-title">${FM(this.headerText)}</div>`;
}
CT("slim-arrow-right", { pathData: "M186 416q-11 0-18.5-7.5T160 390q0-10 8-18l121-116-121-116q-8-8-8-18 0-11 7.5-18.5T186 96q10 0 17 7l141 134q8 8 8 19t-8 19L203 409q-7 7-17 7z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const nN = { packageName: "@ui5/webcomponents", fileName: "themes/Panel.css.ts", content: '.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:block}:host{font-family:"72override",var(--sapFontFamily);background-color:var(--sapGroup_TitleBackground);border-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([collapsed])){border-bottom:var(--_ui5-v2-4-0_panel_border_bottom)}:host([fixed]) .ui5-panel-header{padding-left:1rem}.ui5-panel-header{min-height:var(--_ui5-v2-4-0_panel_header_height);width:100%;position:relative;display:flex;justify-content:flex-start;align-items:center;outline:none;box-sizing:border-box;padding-right:var(--_ui5-v2-4-0_panel_header_padding_right);font-family:"72override",var(--sapFontHeaderFamily);font-size:var(--sapGroup_Title_FontSize);font-weight:400;color:var(--sapGroup_TitleTextColor)}.ui5-panel-header-icon{color:var(--_ui5-v2-4-0_panel_icon_color)}.ui5-panel-header-button-animated{transition:transform .4s ease-out}:host(:not([_has-header]):not([fixed])) .ui5-panel-header{cursor:pointer}:host(:not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--_ui5-v2-4-0_panel_focus_border);border-radius:var(--_ui5-v2-4-0_panel_border_radius);top:var(--_ui5-v2-4-0_panel_focus_offset);bottom:var(--_ui5-v2-4-0_panel_focus_bottom_offset);left:var(--_ui5-v2-4-0_panel_focus_offset);right:var(--_ui5-v2-4-0_panel_focus_offset)}:host(:not([collapsed]):not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{border-radius:var(--_ui5-v2-4-0_panel_border_radius_expanded)}:host(:not([collapsed])) .ui5-panel-header-button:not(.ui5-panel-header-button-with-icon),:host(:not([collapsed])) .ui5-panel-header-icon-wrapper [ui5-icon]{transform:var(--_ui5-v2-4-0_panel_toggle_btn_rotation)}:host([fixed]) .ui5-panel-header-title{width:100%}.ui5-panel-heading-wrapper.ui5-panel-heading-wrapper-sticky{position:sticky;top:0;background-color:var(--_ui5-v2-4-0_panel_header_background_color);z-index:100;border-radius:var(--_ui5-v2-4-0_panel_border_radius)}.ui5-panel-header-title{width:calc(100% - var(--_ui5-v2-4-0_panel_button_root_width));overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui5-panel-content{padding:var(--_ui5-v2-4-0_panel_content_padding);background-color:var(--sapGroup_ContentBackground);outline:none;border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius);overflow:auto}.ui5-panel-header-button-root{display:flex;justify-content:center;align-items:center;flex-shrink:0;width:var(--_ui5-v2-4-0_panel_button_root_width);height:var(--_ui5-v2-4-0_panel_button_root_height);padding:var(--_ui5-v2-4-0_panel_header_button_wrapper_padding);box-sizing:border-box}:host([fixed]:not([collapsed]):not([_has-header])) .ui5-panel-header,:host([collapsed]) .ui5-panel-header{border-bottom:.0625rem solid var(--sapGroup_TitleBorderColor)}:host([collapsed]) .ui5-panel-header{border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([fixed]):not([collapsed])) .ui5-panel-header{border-bottom:var(--_ui5-v2-4-0_panel_default_header_border)}[ui5-button].ui5-panel-header-button{display:flex;justify-content:center;align-items:center;min-width:initial;height:100%;width:100%}.ui5-panel-header-icon-wrapper{display:flex;justify-content:center;align-items:center}.ui5-panel-header-icon-wrapper,.ui5-panel-header-icon-wrapper .ui5-panel-header-icon{color:inherit}.ui5-panel-header-icon-wrapper,[ui5-button].ui5-panel-header-button-with-icon [ui5-icon]{pointer-events:none}.ui5-panel-root{height:100%;display:flex;flex-direction:column}\n' };
var oN, rN = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let sN = oN = class extends wI {
  constructor() {
    super(...arguments), this.fixed = false, this.collapsed = false, this.noAnimation = false, this.accessibleRole = "Form", this.headerLevel = "H2", this.stickyHeader = false, this.useAccessibleNameForToggleButton = false, this._hasHeader = false, this._contentExpanded = false, this._animationRunning = false;
  }
  onBeforeRendering() {
    this._animationRunning || (this._contentExpanded = !this.collapsed), this._hasHeader = !!this.header.length;
  }
  shouldToggle(e6) {
    return !this.header.length || e6.classList.contains("ui5-panel-header-button");
  }
  shouldNotAnimate() {
    return this.noAnimation || YF() === KC.None;
  }
  _headerClick(e6) {
    this.shouldToggle(e6.target) && this._toggleOpen();
  }
  _toggleButtonClick(e6) {
    0 === e6.x && 0 === e6.y && e6.stopImmediatePropagation();
  }
  _headerKeyDown(e6) {
    this.shouldToggle(e6.target) && (WI(e6) && e6.preventDefault(), jI(e6) && e6.preventDefault());
  }
  _headerKeyUp(e6) {
    this.shouldToggle(e6.target) && (WI(e6) && this._toggleOpen(), jI(e6) && this._toggleOpen());
  }
  _toggleOpen() {
    if (this.fixed) return;
    if (this.collapsed = !this.collapsed, this.shouldNotAnimate()) return void this.fireDecoratorEvent("toggle");
    this._animationRunning = true;
    const e6 = this.getDomRef().querySelectorAll(".ui5-panel-content"), t2 = [];
    [].forEach.call(e6, (e7) => {
      this.collapsed ? t2.push(((e8) => {
        let t3, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2, d2;
        const p2 = jF({ beforeStart: () => {
          const p3 = e8;
          t3 = getComputedStyle(p3), i2 = parseFloat(t3.paddingTop), n2 = parseFloat(t3.paddingBottom), o2 = parseFloat(t3.marginTop), r2 = parseFloat(t3.marginBottom), s2 = parseFloat(t3.height), a2 = p3.style.overflow, l2 = p3.style.paddingTop, c2 = p3.style.paddingBottom, h2 = p3.style.marginTop, u2 = p3.style.marginBottom, d2 = p3.style.height, p3.style.overflow = "hidden";
        }, duration: 400, element: e8, advance: (t4) => {
          e8.style.paddingTop = i2 - i2 * t4 + "px", e8.style.paddingBottom = n2 - n2 * t4 + "px", e8.style.marginTop = o2 - o2 * t4 + "px", e8.style.marginBottom = r2 - r2 * t4 + "px", e8.style.height = s2 - s2 * t4 + "px";
        } });
        return p2.promise().then((t4) => {
          t4 instanceof Error || (e8.style.overflow = a2, e8.style.paddingTop = l2, e8.style.paddingBottom = c2, e8.style.marginTop = h2, e8.style.marginBottom = u2, e8.style.height = d2, e8.style.display = "none");
        }), p2;
      })(e7).promise()) : t2.push(((e8) => {
        let t3, i2, n2, o2, r2, s2, a2, l2, c2, h2, u2, d2;
        const p2 = jF({ beforeStart: () => {
          e8.style.display = "block", t3 = getComputedStyle(e8), i2 = parseFloat(t3.paddingTop), n2 = parseFloat(t3.paddingBottom), o2 = parseFloat(t3.marginTop), r2 = parseFloat(t3.marginBottom), s2 = parseFloat(t3.height), a2 = e8.style.overflow, l2 = e8.style.paddingTop, c2 = e8.style.paddingBottom, h2 = e8.style.marginTop, u2 = e8.style.marginBottom, d2 = e8.style.height, e8.style.overflow = "hidden", e8.style.paddingTop = "0", e8.style.paddingBottom = "0", e8.style.marginTop = "0", e8.style.marginBottom = "0", e8.style.height = "0";
        }, duration: 400, element: e8, advance: (t4) => {
          e8.style.display = "block", e8.style.paddingTop = i2 * t4 + "px", e8.style.paddingBottom = n2 * t4 + "px", e8.style.marginTop = o2 * t4 + "px", e8.style.marginBottom = r2 * t4 + "px", e8.style.height = s2 * t4 + "px";
        } });
        return p2.promise().then(() => {
          e8.style.overflow = a2, e8.style.paddingTop = l2, e8.style.paddingBottom = c2, e8.style.marginTop = h2, e8.style.marginBottom = u2, e8.style.height = d2;
        }), p2;
      })(e7).promise());
    }), Promise.all(t2).then(() => {
      this._animationRunning = false, this._contentExpanded = !this.collapsed, this.fireDecoratorEvent("toggle");
    });
  }
  _headerOnTarget(e6) {
    return e6.classList.contains("sapMPanelWrappingDiv");
  }
  get classes() {
    return { headerBtn: { "ui5-panel-header-button-animated": !this.shouldNotAnimate() }, stickyHeaderClass: { "ui5-panel-heading-wrapper-sticky": this.stickyHeader } };
  }
  get toggleButtonTitle() {
    return oN.i18nBundle.getText(RB);
  }
  get expanded() {
    return !this.collapsed;
  }
  get accRole() {
    return this.accessibleRole.toLowerCase();
  }
  get effectiveAccessibleName() {
    return "string" == typeof this.accessibleName && this.accessibleName.length ? this.accessibleName : void 0;
  }
  get accInfo() {
    return { button: { accessibilityAttributes: { expanded: this.expanded }, title: this.toggleButtonTitle, ariaLabelButton: !this.nonFocusableButton && this.useAccessibleNameForToggleButton ? this.effectiveAccessibleName : void 0 }, ariaExpanded: this.nonFixedInternalHeader ? this.expanded : void 0, ariaControls: this.nonFixedInternalHeader ? `${this._id}-content` : void 0, ariaLabelledby: this.nonFocusableButton ? this.ariaLabelledbyReference : void 0, role: this.nonFixedInternalHeader ? "button" : void 0 };
  }
  get ariaLabelledbyReference() {
    return this.nonFocusableButton && this.headerText && !this.fixed ? `${this._id}-header-title` : void 0;
  }
  get fixedPanelAriaLabelledbyReference() {
    return this.fixed && !this.effectiveAccessibleName ? `${this._id}-header-title` : void 0;
  }
  get headerAriaLevel() {
    return this.headerLevel.slice(1);
  }
  get headerTabIndex() {
    return this.header.length || this.fixed ? "-1" : "0";
  }
  get headingWrapperAriaLevel() {
    return this._hasHeader ? void 0 : this.headerAriaLevel;
  }
  get headingWrapperRole() {
    return this._hasHeader ? void 0 : "heading";
  }
  get nonFixedInternalHeader() {
    return !this._hasHeader && !this.fixed;
  }
  get hasHeaderOrHeaderText() {
    return this._hasHeader || this.headerText;
  }
  get nonFocusableButton() {
    return !this.header.length;
  }
  get styles() {
    return { content: { display: this._contentExpanded ? "block" : "none" } };
  }
};
rN([SI()], sN.prototype, "headerText", void 0), rN([SI({ type: Boolean })], sN.prototype, "fixed", void 0), rN([SI({ type: Boolean })], sN.prototype, "collapsed", void 0), rN([SI({ type: Boolean })], sN.prototype, "noAnimation", void 0), rN([SI()], sN.prototype, "accessibleRole", void 0), rN([SI()], sN.prototype, "headerLevel", void 0), rN([SI()], sN.prototype, "accessibleName", void 0), rN([SI({ type: Boolean })], sN.prototype, "stickyHeader", void 0), rN([SI({ type: Boolean })], sN.prototype, "useAccessibleNameForToggleButton", void 0), rN([SI({ type: Boolean })], sN.prototype, "_hasHeader", void 0), rN([SI({ type: Boolean, noAttribute: true })], sN.prototype, "_contentExpanded", void 0), rN([SI({ type: Boolean, noAttribute: true })], sN.prototype, "_animationRunning", void 0), rN([TI()], sN.prototype, "header", void 0), rN([HM("@ui5/webcomponents")], sN, "i18nBundle", void 0), sN = oN = rN([CI({ tag: "ui5-panel", fastNavigation: true, languageAware: true, renderer: UM, template: function(e6, t2, i2) {
  return NM`<div class="ui5-panel-root" role="${FM(this.accRole)}" aria-label="${FM(this.effectiveAccessibleName)}" aria-labelledby="${FM(this.fixedPanelAriaLabelledbyReference)}">${this.hasHeaderOrHeaderText ? KF.call(this, e6, t2, i2) : void 0}<div class="ui5-panel-content" id="${FM(this._id)}-content" tabindex="-1" style="${LM(this.styles.content)}" part="content"><slot></slot></div></div>`;
}, styles: nN, dependencies: [tk, BR] }), EI("toggle", { bubbles: true })], sN), sN.define();
let aN = null, lN = false;
const cN = /* @__PURE__ */ new Set(), hN = /* @__PURE__ */ new Set(), uN = (e6) => {
  !e6.dataTransfer || !(e6.target instanceof HTMLElement) || hN.has(e6.target) || (aN = e6.target);
}, dN = () => {
  aN = null;
}, pN = () => {
  aN = null;
}, _N = (e6) => {
  cN.add(e6), lN || lN || (document.body.addEventListener("dragstart", uN), document.body.addEventListener("dragend", dN), document.body.addEventListener("drop", pN));
}, gN = (e6) => {
  cN.delete(e6), 0 === cN.size && lN && (document.body.removeEventListener("dragstart", uN), document.body.removeEventListener("dragend", dN), document.body.removeEventListener("drop", pN), lN = false);
}, mN = () => aN;
var fN = ((e6) => (e6.On = "On", e6.Before = "Before", e6.After = "After", e6))(fN || {}), vN = ((e6) => (e6.Vertical = "Vertical", e6.Horizontal = "Horizontal", e6))(vN || {});
const AN = (e6, t2, i2, n2) => {
  const o2 = Math.abs(e6 - t2), r2 = Math.abs(e6 - i2), s2 = Math.abs(e6 - n2);
  let a2 = [];
  switch (Math.min(o2, r2, s2)) {
    case o2:
      a2 = [fN.Before];
      break;
    case r2:
      a2 = [fN.On, o2 < s2 ? fN.Before : fN.After];
      break;
    case s2:
      a2 = [fN.After];
  }
  return a2;
}, bN = (e6, t2, i2) => {
  let n2 = Number.POSITIVE_INFINITY, o2 = null;
  for (let r3 = 0; r3 < e6.length; r3++) {
    const s3 = e6[r3], { left: a3, width: l3, top: c3, height: h3 } = s3.getBoundingClientRect();
    let u3;
    u3 = i2 === vN.Vertical ? c3 + h3 / 2 : a3 + l3 / 2;
    const d2 = Math.abs(t2 - u3);
    d2 < n2 && (n2 = d2, o2 = s3);
  }
  if (!o2) return null;
  const { width: r2, height: s2, left: a2, right: l2, top: c2, bottom: h2 } = o2.getBoundingClientRect();
  let u2;
  return u2 = i2 === vN.Vertical ? AN(t2, c2, c2 + s2 / 2, h2) : AN(t2, a2, a2 + r2 / 2, l2), { element: o2, placements: u2 };
}, yN = (e6) => {
  let t2 = e6;
  return e6.shadowRoot && e6.shadowRoot.activeElement && (t2 = e6.shadowRoot.activeElement), t2;
};
let wN = null;
var xN;
!function(e6) {
  e6.None = "None", e6.Single = "Single", e6.SingleStart = "SingleStart", e6.SingleEnd = "SingleEnd", e6.SingleAuto = "SingleAuto", e6.Multiple = "Multiple", e6.Delete = "Delete";
}(xN || (xN = {}));
const CN = xN;
var SN;
!function(e6) {
  e6.Button = "Button", e6.Scroll = "Scroll", e6.None = "None";
}(SN || (SN = {}));
const EN = SN;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const TN = { packageName: "@ui5/webcomponents", fileName: "themes/DropIndicator.css.ts", content: ':host{position:absolute;pointer-events:none;z-index:99}:host([orientation="Vertical"]) .ui5-di-needle{width:.125rem;height:100%;inset-block:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Vertical"]){margin-left:-.0625rem}:host([orientation="Horizontal"]) .ui5-di-needle{height:.125rem;width:100%;inset-inline:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Horizontal"]){margin-top:-.0625rem}:host([orientation="Horizontal"][placement="Before"][first]){margin-top:.3125rem}:host([orientation="Horizontal"][placement="After"][last]){margin-top:-.3125rem}:host([orientation="Vertical"]) .ui5-di-needle:before{left:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host([orientation="Horizontal"]) .ui5-di-needle:before{top:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host .ui5-di-rect{border:.125rem solid var(--sapContent_DragAndDropActiveColor);position:absolute;inset:0}:host .ui5-di-rect:before{content:" ";position:absolute;inset:0;background:var(--sapContent_DragAndDropActiveColor);opacity:.05}\n' };
var IN = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let MN = class extends wI {
  get _positionProperty() {
    return this.orientation === vN.Vertical ? "left" : "top";
  }
  constructor() {
    super(), this.targetReference = null, this.ownerReference = null, this.placement = "Before", this.orientation = "Vertical";
  }
  onAfterRendering() {
    if (!this.targetReference || !this.ownerReference) return void Object.assign(this.style, { display: "none" });
    const { left: e6, width: t2, right: i2, top: n2, bottom: o2, height: r2 } = this.targetReference.getBoundingClientRect(), { top: s2, height: a2 } = this.ownerReference.getBoundingClientRect(), l2 = { display: "", [this._positionProperty]: "", width: "", height: "" };
    let c2 = 0, h2 = false, u2 = false;
    if (this.orientation === vN.Vertical) {
      switch (this.placement) {
        case fN.Before:
          c2 = e6;
          break;
        case fN.On:
          l2.width = `${t2}px`, c2 = e6;
          break;
        case fN.After:
          c2 = i2;
      }
      l2.height = `${r2}px`;
    }
    if (this.orientation === vN.Horizontal) {
      switch (this.placement) {
        case fN.Before:
          c2 = n2;
          break;
        case fN.On:
          l2.height = `${r2}px`, c2 = n2;
          break;
        case fN.After:
          c2 = o2;
      }
      l2.width = `${t2}px`, c2 -= s2, c2 <= 0 && (u2 = true), c2 >= a2 && (h2 = true);
    }
    l2[this._positionProperty] = `${c2}px`, this.toggleAttribute("first", u2), this.toggleAttribute("last", h2), Object.assign(this.style, l2);
  }
  get classes() {
    return { root: { "ui5-di-rect": this.placement === fN.On, "ui5-di-needle": this.placement !== fN.On } };
  }
};
IN([SI({ type: Object })], MN.prototype, "targetReference", void 0), IN([SI({ type: Object })], MN.prototype, "ownerReference", void 0), IN([SI()], MN.prototype, "placement", void 0), IN([SI()], MN.prototype, "orientation", void 0), MN = IN([CI({ tag: "ui5-drop-indicator", renderer: UM, styles: TN, template: function(e6, t2, i2) {
  return NM`<div class="${DM(this.classes.root)}"></div>`;
}, dependencies: [] })], MN), MN.define();
const BN = MN;
var RN;
!function(e6) {
  e6.All = "All", e6.Inner = "Inner", e6.None = "None";
}(RN || (RN = {}));
const kN = RN;
var PN;
!function(e6) {
  e6.Top = "Top", e6.Bottom = "Bottom";
}(PN || (PN = {}));
const DN = PN;
function LN(e6, t2, i2) {
  return NM`<div class="ui5-busy-indicator-busy-area" title="${FM(this.ariaTitle)}" tabindex="0" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuetext="Busy" aria-labelledby="${FM(this.labelId)}" data-sap-focus-ref>${this.textPosition.top ? FN.call(this, e6, t2, i2) : void 0}<div class="ui5-busy-indicator-circles-wrapper"><div class="ui5-busy-indicator-circle circle-animation-0"></div><div class="ui5-busy-indicator-circle circle-animation-1"></div><div class="ui5-busy-indicator-circle circle-animation-2"></div></div>${this.textPosition.bottom ? ON.call(this, e6, t2, i2) : void 0}</div>`;
}
function FN(e6, t2, i2) {
  return NM`${this.text ? NN.call(this, e6, t2, i2) : void 0}`;
}
function NN(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-label", t2, i2)} id="${FM(this._id)}-label" class="ui5-busy-indicator-text">${FM(this.text)}</${zM("ui5-label", t2, i2)}>` : NM`<ui5-label id="${FM(this._id)}-label" class="ui5-busy-indicator-text">${FM(this.text)}</ui5-label>`;
}
function ON(e6, t2, i2) {
  return NM`${this.text ? UN.call(this, e6, t2, i2) : void 0}`;
}
function UN(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-label", t2, i2)} id="${FM(this._id)}-label" class="ui5-busy-indicator-text">${FM(this.text)}</${zM("ui5-label", t2, i2)}>` : NM`<ui5-label id="${FM(this._id)}-label" class="ui5-busy-indicator-text">${FM(this.text)}</ui5-label>`;
}
function zN(e6, t2, i2) {
  return NM`<span data-ui5-focus-redirect tabindex="0" @focusin="${this._redirectFocus}"></span>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const HN = { packageName: "@ui5/webcomponents", fileName: "themes/BusyIndicator.css.ts", content: ':host(:not([hidden])){display:inline-block}:host([_is-busy]){color:var(--_ui5-v2-4-0_busy_indicator_color)}:host([size="S"]) .ui5-busy-indicator-root{min-width:1.625rem;min-height:.5rem}:host([size="S"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:1.75rem}:host([size="S"]) .ui5-busy-indicator-circle{width:.5rem;height:.5rem}:host([size="S"]) .ui5-busy-indicator-circle:first-child,:host([size="S"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.0625rem}:host(:not([size])) .ui5-busy-indicator-root,:host([size="M"]) .ui5-busy-indicator-root{min-width:3.375rem;min-height:1rem}:host([size="M"]) .ui5-busy-indicator-circle:first-child,:host([size="M"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.1875rem}:host(:not([size])[text]:not([text=""])) .ui5-busy-indicator-root,:host([size="M"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:2.25rem}:host(:not([size])) .ui5-busy-indicator-circle,:host([size="M"]) .ui5-busy-indicator-circle{width:1rem;height:1rem}:host([size="L"]) .ui5-busy-indicator-root{min-width:6.5rem;min-height:2rem}:host([size="L"]) .ui5-busy-indicator-circle:first-child,:host([size="L"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.25rem}:host([size="L"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:3.25rem}:host([size="L"]) .ui5-busy-indicator-circle{width:2rem;height:2rem}.ui5-busy-indicator-root{display:flex;justify-content:center;align-items:center;position:relative;background-color:inherit;height:inherit;border-radius:inherit}.ui5-busy-indicator-busy-area{position:absolute;z-index:99;inset:0;display:flex;justify-content:center;align-items:center;background-color:inherit;flex-direction:column;border-radius:inherit}:host(:not(:empty)) .ui5-busy-indicator-busy-area{background-color:var(--_ui5-v2-4-0_busy_indicator_block_layer)}:host([desktop]) .ui5-busy-indicator-busy-area:focus,.ui5-busy-indicator-busy-area:focus-visible{outline:var(--_ui5-v2-4-0_busy_indicator_focus_outline);outline-offset:-2px}.ui5-busy-indicator-circles-wrapper{line-height:0}.ui5-busy-indicator-circle{display:inline-block;background-color:currentColor;border-radius:50%}.ui5-busy-indicator-circle:before{content:"";width:100%;height:100%;border-radius:100%}.circle-animation-0{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11)}.circle-animation-1{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.2s}.circle-animation-2{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.4s}.ui5-busy-indicator-text{width:100%;text-align:center}:host([text-placement="Top"]) .ui5-busy-indicator-text{margin-bottom:.5rem}:host(:not([text-placement])) .ui5-busy-indicator-text,:host([text-placement="Bottom"]) .ui5-busy-indicator-text{margin-top:.5rem}@keyframes grow{0%,50%,to{-webkit-transform:scale(.5);-moz-transform:scale(.5);transform:scale(.5)}25%{-webkit-transform:scale(1);-moz-transform:scale(1);transform:scale(1)}}\n' };
var QN, VN = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let GN = QN = class extends wI {
  constructor() {
    super(), this.size = "M", this.active = false, this.delay = 1e3, this.textPlacement = "Bottom", this._isBusy = false, this._keydownHandler = this._handleKeydown.bind(this), this._preventEventHandler = this._preventEvent.bind(this);
  }
  onEnterDOM() {
    this.addEventListener("keydown", this._keydownHandler, { capture: true }), this.addEventListener("keyup", this._preventEventHandler, { capture: true }), IE() && this.setAttribute("desktop", "");
  }
  onExitDOM() {
    this._busyTimeoutId && (clearTimeout(this._busyTimeoutId), delete this._busyTimeoutId), this.removeEventListener("keydown", this._keydownHandler, true), this.removeEventListener("keyup", this._preventEventHandler, true);
  }
  get ariaTitle() {
    return QN.i18nBundle.getText(YM);
  }
  get labelId() {
    return this.text ? `${this._id}-label` : void 0;
  }
  get classes() {
    return { root: { "ui5-busy-indicator-root": true } };
  }
  get textPosition() {
    return { top: this.text && this.textPlacement === DN.Top, bottom: this.text && this.textPlacement === DN.Bottom };
  }
  onBeforeRendering() {
    this.active ? this._isBusy || this._busyTimeoutId || (this._busyTimeoutId = setTimeout(() => {
      delete this._busyTimeoutId, this._isBusy = true;
    }, Math.max(0, this.delay))) : (this._busyTimeoutId && (clearTimeout(this._busyTimeoutId), delete this._busyTimeoutId), this._isBusy = false);
  }
  _handleKeydown(e6) {
    this._isBusy && (e6.stopImmediatePropagation(), uM(e6) && (this.focusForward = true, this.shadowRoot.querySelector("[data-ui5-focus-redirect]").focus(), this.focusForward = false));
  }
  _preventEvent(e6) {
    this._isBusy && e6.stopImmediatePropagation();
  }
  _redirectFocus(e6) {
    this.focusForward || (e6.preventDefault(), this.shadowRoot.querySelector(".ui5-busy-indicator-busy-area").focus());
  }
};
VN([SI()], GN.prototype, "text", void 0), VN([SI()], GN.prototype, "size", void 0), VN([SI({ type: Boolean })], GN.prototype, "active", void 0), VN([SI({ type: Number })], GN.prototype, "delay", void 0), VN([SI()], GN.prototype, "textPlacement", void 0), VN([SI({ type: Boolean })], GN.prototype, "_isBusy", void 0), VN([HM("@ui5/webcomponents")], GN, "i18nBundle", void 0), GN = QN = VN([CI({ tag: "ui5-busy-indicator", languageAware: true, styles: HN, renderer: UM, template: function(e6, t2, i2) {
  return NM`<div class="${DM(this.classes.root)}">${this._isBusy ? LN.call(this, e6, t2, i2) : void 0}<slot></slot>${this._isBusy ? zN.call(this, e6, t2, i2) : void 0}</div> `;
}, dependencies: [KP] })], GN), GN.define();
const qN = GN;
function $N(e6, t2, i2) {
  return NM`<slot name="header" />`;
}
function WN(e6, t2, i2) {
  return NM`<header id="${FM(this.headerID)}" class="ui5-list-header">${FM(this.headerText)}</header>`;
}
function jN(e6, t2, i2) {
  return NM`<div id="${FM(this._id)}-before" tabindex="0" role="none" class="ui5-list-focusarea"></div>`;
}
function XN(e6, t2, i2) {
  return NM`<li tabindex="0" id="${FM(this._id)}-nodata" class="ui5-list-nodata"><div id="${FM(this._id)}-nodata-text" class="ui5-list-nodata-text">${FM(this.noDataText)}</div></li>`;
}
function YN(e6, t2, i2) {
  return NM`<div growing-button part="growing-button"><div part="growing-button-inner" tabindex="0" role="button" id="${FM(this._id)}-growing-btn" aria-labelledby="${FM(this._id)}-growingButton-text" ?active="${this._loadMoreActive}" @click="${this._onLoadMoreClick}" @keydown="${this._onLoadMoreKeydown}" @keyup="${this._onLoadMoreKeyup}" @mousedown="${this._onLoadMoreMousedown}" @mouseup="${this._onLoadMoreMouseup}" growing-button-inner>${this.loading ? KN.call(this, e6, t2, i2) : void 0}<span id="${FM(this._id)}-growingButton-text" growing-button-text>${FM(this._growingButtonText)}</span></div></div>`;
}
function KN(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-busy-indicator", t2, i2)} delay="${FM(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></${zM("ui5-busy-indicator", t2, i2)}>` : NM`<ui5-busy-indicator delay="${FM(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></ui5-busy-indicator>`;
}
function ZN(e6, t2, i2) {
  return NM`<footer id="${FM(this._id)}-footer" class="ui5-list-footer">${FM(this.footerText)}</footer>`;
}
function JN(e6, t2, i2) {
  return NM`<div id="${FM(this._id)}-after" tabindex="0" role="none" class="ui5-list-focusarea"></div>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const eO = { packageName: "@ui5/webcomponents", fileName: "themes/List.css.ts", content: '.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}[growing-button]{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_load_more_padding);border-top:1px solid var(--sapList_BorderColor);border-bottom:var(--_ui5-v2-4-0_load_more_border-bottom);box-sizing:border-box;cursor:pointer;outline:none}[growing-button-inner]{display:flex;align-items:center;justify-content:center;flex-direction:row;min-height:var(--_ui5-v2-4-0_load_more_text_height);width:100%;color:var(--sapButton_TextColor);background-color:var(--sapList_Background);border:var(--_ui5-v2-4-0_load_more_border);border-radius:var(--_ui5-v2-4-0_load_more_border_radius);box-sizing:border-box}[growing-button-inner]:focus-visible{outline:var(--_ui5-v2-4-0_load_more_outline_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);outline-offset:-.125rem;border-color:transparent}[growing-button-inner]:hover{background-color:var(--sapList_Hover_Background)}[growing-button-inner]:active,[growing-button-inner][active]{background-color:var(--sapList_Active_Background);border-color:var(--sapList_Active_Background)}[growing-button-inner]:active>*,[growing-button-inner][active]>*{color:var(--sapList_Active_TextColor)}[growing-button-text],[growing-button-subtext]{text-align:center;font-family:"72override",var(--sapFontFamily);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box}[growing-button-text]{height:var(--_ui5-v2-4-0_load_more_text_height);padding:.875rem 1rem 1rem;font-size:var(--_ui5-v2-4-0_load_more_text_font_size);font-weight:700}:host([loading]) .ui5-list-growing-button-busy-indicator:not([_is-busy]){display:none}:host([loading]) .ui5-list-growing-button-busy-indicator[_is-busy]+[growing-button-text]{padding-left:.5rem}[growing-button-subtext]{font-size:var(--sapFontSize);padding:var(--_ui5-v2-4-0_load_more_desc_padding)}:host(:not([hidden])){display:block;max-width:100%;width:100%;-webkit-tap-highlight-color:transparent}:host([indent]) .ui5-list-root{padding:2rem}:host([separators="None"]) .ui5-list-nodata{border-bottom:0}.ui5-list-root,.ui5-list-busy-indicator{width:100%;height:100%;position:relative;box-sizing:border-box}.ui5-list-scroll-container{overflow:auto;height:100%;width:100%}.ui5-list-ul{list-style-type:none;padding:0;margin:0}.ui5-list-ul:focus{outline:none}.ui5-list-focusarea{position:fixed}.ui5-list-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;font-size:var(--sapFontHeader4Size);font-family:"72override",var(--sapFontFamily);color:var(--sapGroup_TitleTextColor);height:3rem;line-height:3rem;padding:0 1rem;background-color:var(--sapGroup_TitleBackground);border-bottom:1px solid var(--sapGroup_TitleBorderColor)}.ui5-list-footer{height:2rem;box-sizing:border-box;-webkit-text-size-adjust:none;font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);line-height:2rem;background-color:var(--sapList_FooterBackground);color:var(--ui5-v2-4-0_list_footer_text_color);padding:0 1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-list-nodata{list-style-type:none;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;color:var(--sapTextColor);background-color:var(--sapList_Background);border-bottom:1px solid var(--sapList_BorderColor);padding:0 1rem!important;outline:none;height:var(--_ui5-v2-4-0_list_no_data_height);font-size:var(--_ui5-v2-4-0_list_no_data_font_size);font-family:"72override",var(--sapFontFamily)}.ui5-list-nodata:focus:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none;top:calc(50% + .125rem)}.ui5-list-nodata-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([growing="Scroll"]) .ui5-list-end-marker{display:inline-block}\n' };
function tO(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-li-group-header", t2, i2)} ?focused="${this.focused}" part="header">${this.hasFormattedHeader ? iO.call(this, e6, t2, i2) : nO.call(this, e6, t2, i2)}</${zM("ui5-li-group-header", t2, i2)}>` : NM`<ui5-li-group-header ?focused="${this.focused}" part="header">${this.hasFormattedHeader ? iO.call(this, e6, t2, i2) : nO.call(this, e6, t2, i2)}</ui5-li-group-header>`;
}
function iO(e6, t2, i2) {
  return NM`<slot name="header"></slot>`;
}
function nO(e6, t2, i2) {
  return NM`${FM(this.headerText)}`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const oO = { packageName: "@ui5/webcomponents", fileName: "themes/ListItemGroup.css.ts", content: ".ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}.ui5-group-li-root{width:100%;height:100%;position:relative;box-sizing:border-box;padding:0;margin:0;list-style-type:none}\n" };
CT("edit", { pathData: "M475 104q5 7 5 12 0 6-5 11L150 453q-4 4-8 4L32 480l22-110q0-5 4-9L384 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L84 381l46 46z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
var rO;
CT("edit", { pathData: "M505 94q7 9 7 18 0 11-6 17L130 505q-7 7-18 7H26q-11 0-18.5-7.5T0 486v-86q1-5 1.5-8.5T6 384L382 7q9-7 18-7t18 7zM364 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" }), function(e6) {
  e6.None = "None", e6.Positive = "Positive", e6.Critical = "Critical", e6.Negative = "Negative", e6.Information = "Information";
}(rO || (rO = {}));
const sO = rO;
var aO;
!function(e6) {
  e6.Inactive = "Inactive", e6.Active = "Active", e6.Detail = "Detail", e6.Navigation = "Navigation";
}(aO || (aO = {}));
const lO = aO, cO = (e6, t2) => {
  const i2 = t2 || [];
  return e6 && e6.forEach((e7) => {
    if (e7.nodeType === Node.TEXT_NODE || e7.nodeType === Node.COMMENT_NODE) return;
    const t3 = e7;
    if (!t3.hasAttribute("data-sap-no-tab-ref")) if (((e8) => {
      if (!e8 || e8.hasAttribute("data-sap-no-tab-ref") || yk(e8)) return false;
      const t4 = e8.getAttribute("tabindex");
      if (null != t4) return parseInt(t4) >= 0;
      const i3 = e8.nodeName.toLowerCase();
      return !("a" !== i3 && !/^(input|select|textarea|button|object)$/.test(i3) || e8.disabled);
    })(t3) && i2.push(t3), "SLOT" === t3.tagName) cO(t3.assignedNodes(), i2);
    else {
      const e8 = t3.shadowRoot ? t3.shadowRoot.children : t3.children;
      cO([...e8], i2);
    }
  }), i2;
};
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const hO = { packageName: "@ui5/webcomponents", fileName: "themes/ListItemBase.css.ts", content: ':host{box-sizing:border-box;height:var(--_ui5-v2-4-0_list_item_base_height);background-color:var(--ui5-v2-4-0-listitem-background-color);border-bottom:.0625rem solid transparent}:host(:not([hidden])){display:block}:host([disabled]){opacity:var(--_ui5-v2-4-0-listitembase_disabled_opacity);pointer-events:none}:host([actionable]:not([disabled]):not([ui5-li-group-header])){cursor:pointer}:host([has-border]){border-bottom:var(--ui5-v2-4-0-listitem-border-bottom)}:host([selected]){background-color:var(--sapList_SelectionBackgroundColor);border-bottom:var(--ui5-v2-4-0-listitem-selected-border-bottom)}:host([actionable]:not([active]):not([selected]):not([ui5-li-group-header]):hover){background-color:var(--sapList_Hover_Background)}:host([actionable][selected]:not([active],[data-moving]):hover){background-color:var(--sapList_Hover_SelectionBackground)}:host([active][actionable]:not([data-moving])),:host([active][actionable][selected]:not([data-moving])){background-color:var(--sapList_Active_Background)}:host([desktop]:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root.ui5-li--focusable:after,:host(:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus-visible:after,:host([desktop]:not([data-moving])) .ui5-li-root .ui5-li-content:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root .ui5-li-content:after,:host(:not([data-moving])) .ui5-li-root .ui5-li-content:focus-visible:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none}.ui5-li-root{position:relative;display:flex;align-items:center;width:100%;height:100%;padding:var(--_ui5-v2-4-0_list_item_base_padding);box-sizing:border-box;background-color:inherit}.ui5-li-root.ui5-li--focusable{outline:none}.ui5-li-content{display:flex;align-items:center;flex:auto;overflow:hidden;max-width:100%;font-family:"72override",var(--sapFontFamily);color:var(--sapList_TextColor)}.ui5-li-content .ui5-li-title{color:var(--sapList_TextColor);font-size:var(--_ui5-v2-4-0_list_item_title_size)}.ui5-li-text-wrapper{display:flex;flex-direction:row;justify-content:space-between;flex:auto;min-width:1px;line-height:normal}\n' };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const uO = { packageName: "@ui5/webcomponents", fileName: "themes/DraggableElement.css.ts", content: "[draggable=true]{cursor:grab!important}[draggable=true][data-moving]{cursor:grabbing!important;opacity:var(--sapContent_DisabledOpacity)}\n" };
var dO = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let pO = class extends wI {
  constructor() {
    super(...arguments), this.selected = false, this.movable = false, this.hasBorder = false, this.disabled = false, this.focused = false, this.actionable = false;
  }
  onEnterDOM() {
    IE() && this.setAttribute("desktop", "");
  }
  onBeforeRendering() {
    this.actionable = true;
  }
  _onfocusin(e6) {
    this.fireDecoratorEvent("_request-tabindex-change", e6), e6.target === this.getFocusDomRef() && this.fireDecoratorEvent("_focused", e6);
  }
  _onkeydown(e6) {
    return uM(e6) ? this._handleTabNext(e6) : dM(e6) ? this._handleTabPrevious(e6) : void (this.getFocusDomRef().matches(":has(:focus-within)") || (jI(e6) && e6.preventDefault(), WI(e6) && this.fireItemPress(e6)));
  }
  _onkeyup(e6) {
    this.getFocusDomRef().matches(":has(:focus-within)") || jI(e6) && this.fireItemPress(e6);
  }
  _onclick(e6) {
    this.getFocusDomRef().matches(":has(:focus-within)") || this.fireItemPress(e6);
  }
  fireItemPress(e6) {
    !this.disabled && this._pressable && (WI(e6) && e6.preventDefault(), this.fireDecoratorEvent("_press", { item: this, selected: this.selected, key: e6.key }));
  }
  _handleTabNext(e6) {
    this.shouldForwardTabAfter() && (this.fireDecoratorEvent("_forward-after") || e6.preventDefault());
  }
  _handleTabPrevious(e6) {
    const t2 = e6.target;
    this.shouldForwardTabBefore(t2) && this.fireDecoratorEvent("_forward-before");
  }
  shouldForwardTabAfter() {
    const e6 = ((e7) => cO([...e7.children]))(this.getFocusDomRef());
    return 0 === e6.length || e6[e6.length - 1] === wM();
  }
  shouldForwardTabBefore(e6) {
    return this.getFocusDomRef() === e6;
  }
  get classes() {
    return { main: { "ui5-li-root": true, "ui5-li--focusable": this._focusable } };
  }
  get _ariaDisabled() {
    return !!this.disabled || void 0;
  }
  get _focusable() {
    return !this.disabled;
  }
  get _pressable() {
    return true;
  }
  get hasConfigurableMode() {
    return false;
  }
  get _effectiveTabIndex() {
    return this._focusable ? this.selected ? 0 : this.forcedTabIndex : -1;
  }
};
dO([SI({ type: Boolean })], pO.prototype, "selected", void 0), dO([SI({ type: Boolean })], pO.prototype, "movable", void 0), dO([SI({ type: Boolean })], pO.prototype, "hasBorder", void 0), dO([SI()], pO.prototype, "forcedTabIndex", void 0), dO([SI({ type: Boolean })], pO.prototype, "disabled", void 0), dO([SI({ type: Boolean })], pO.prototype, "focused", void 0), dO([SI({ type: Boolean })], pO.prototype, "actionable", void 0), pO = dO([CI({ renderer: UM, styles: [hO, uO] }), EI("_request-tabindex-change", { bubbles: true }), EI("_press", { bubbles: true }), EI("_focused", { bubbles: true }), EI("_forward-after", { bubbles: true, cancelable: true }), EI("_forward-before", { bubbles: true })], pO);
const _O = pO;
class gO {
  static hasGroup(e6) {
    return this.groups.has(e6);
  }
  static getGroup(e6) {
    return this.groups.get(e6);
  }
  static getCheckedRadioFromGroup(e6) {
    return this.checkedRadios.get(e6);
  }
  static removeGroup(e6) {
    return this.checkedRadios.delete(e6), this.groups.delete(e6);
  }
  static addToGroup(e6, t2) {
    this.hasGroup(t2) ? (this.enforceSingleSelection(e6, t2), this.getGroup(t2) && this.getGroup(t2).push(e6)) : this.createGroup(e6, t2), this.updateTabOrder(t2);
  }
  static removeFromGroup(e6, t2) {
    const i2 = this.getGroup(t2);
    if (!i2) return;
    const n2 = this.getCheckedRadioFromGroup(t2);
    i2.forEach((t3, i3, n3) => {
      if (e6._id === t3._id) return n3.splice(i3, 1);
    }), n2 === e6 && this.checkedRadios.set(t2, null), i2.length || this.removeGroup(t2), this.updateTabOrder(t2);
  }
  static createGroup(e6, t2) {
    e6.checked && this.checkedRadios.set(t2, e6), this.groups.set(t2, [e6]);
  }
  static selectNextItem(e6, t2) {
    const i2 = this.getGroup(t2);
    if (!i2) return;
    const n2 = i2.length, o2 = i2.indexOf(e6);
    if (n2 <= 1) return;
    const r2 = this._nextSelectable(o2, i2);
    r2 && this.updateSelectionInGroup(r2, t2);
  }
  static updateFormValidity(e6) {
    const t2 = this.getGroup(e6);
    if (!t2) return;
    const i2 = t2.some((e7) => e7.required), n2 = t2.some((e7) => e7.checked);
    t2.forEach((e7) => {
      e7._groupChecked = n2, e7._groupRequired = i2;
    });
  }
  static updateTabOrder(e6) {
    const t2 = this.getGroup(e6);
    if (!t2) return;
    const i2 = t2.some((e7) => e7.checked);
    t2.filter((e7) => !e7.disabled).forEach((e7, t3) => {
      e7._tabIndex = i2 ? e7.checked ? "0" : "-1" : 0 === t3 ? "0" : "-1";
    });
  }
  static selectPreviousItem(e6, t2) {
    const i2 = this.getGroup(t2);
    if (!i2) return;
    const n2 = i2.length, o2 = i2.indexOf(e6);
    if (n2 <= 1) return;
    const r2 = this._previousSelectable(o2, i2);
    r2 && this.updateSelectionInGroup(r2, t2);
  }
  static selectItem(e6, t2) {
    this.updateSelectionInGroup(e6, t2), this.updateTabOrder(t2);
  }
  static updateSelectionInGroup(e6, t2) {
    const i2 = this.getCheckedRadioFromGroup(t2);
    i2 && this._deselectRadio(i2), this._selectRadio(e6), this.checkedRadios.set(t2, e6);
  }
  static _deselectRadio(e6) {
    e6 && (e6.checked = false);
  }
  static _selectRadio(e6) {
    e6 && (e6.focus(), e6.checked = true, e6._checked = true, e6.fireDecoratorEvent("change"));
  }
  static _nextSelectable(e6, t2) {
    if (!t2) return null;
    let i2 = null;
    if (e6 === t2.length - 1) {
      if (t2[0].disabled || t2[0].readonly) return this._nextSelectable(1, t2);
      i2 = t2[0];
    } else {
      if (t2[e6 + 1].disabled || t2[e6 + 1].readonly) return this._nextSelectable(e6 + 1, t2);
      i2 = t2[e6 + 1];
    }
    return i2;
  }
  static _previousSelectable(e6, t2) {
    const i2 = t2.length;
    let n2 = null;
    if (0 === e6) {
      if (t2[i2 - 1].disabled || t2[i2 - 1].readonly) return this._previousSelectable(i2 - 1, t2);
      n2 = t2[i2 - 1];
    } else {
      if (t2[e6 - 1].disabled || t2[e6 - 1].readonly) return this._previousSelectable(e6 - 1, t2);
      n2 = t2[e6 - 1];
    }
    return n2;
  }
  static enforceSingleSelection(e6, t2) {
    const i2 = this.getCheckedRadioFromGroup(t2);
    e6.checked ? i2 ? e6 !== i2 && (this._deselectRadio(i2), this.checkedRadios.set(t2, e6)) : this.checkedRadios.set(t2, e6) : e6 === i2 && this.checkedRadios.set(t2, null), this.updateTabOrder(t2), this.updateFormValidity(t2);
  }
  static get groups() {
    return this._groups || (this._groups = /* @__PURE__ */ new Map()), this._groups;
  }
  static get checkedRadios() {
    return this._checkedRadios || (this._checkedRadios = /* @__PURE__ */ new Map()), this._checkedRadios;
  }
}
function mO(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-label", t2, i2)} id="${FM(this._id)}-label" class="ui5-radio-label" for="${FM(this._id)}" wrapping-type="${FM(this.wrappingType)}">${FM(this.text)}</${zM("ui5-label", t2, i2)}>` : NM`<ui5-label id="${FM(this._id)}-label" class="ui5-radio-label" for="${FM(this._id)}" wrapping-type="${FM(this.wrappingType)}">${FM(this.text)}</ui5-label>`;
}
function fO(e6, t2, i2) {
  return NM`<span id="${FM(this._id)}-descr" class="ui5-hidden-text">${FM(this.valueStateText)}</span>`;
}
function vO(e6, t2, i2) {
  return OM`<circle part="outer-ring" class="ui5-radio-svg-outer" cx="50%" cy="50%" r="50%" /><circle part="inner-ring" class="ui5-radio-svg-inner" cx="50%" cy="50%" />`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const AO = { packageName: "@ui5/webcomponents", fileName: "themes/RadioButton.css.ts", content: '.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_radio_button_min_width);max-width:100%;text-overflow:ellipsis;overflow:hidden;color:var(--_ui5-v2-4-0_radio_button_color);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([disabled])) .ui5-radio-root{cursor:pointer}:host([checked]){color:var(--_ui5-v2-4-0_radio_button_checked_fill)}:host([checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_inner_ring_color)}:host([checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_color)}:host([disabled]) .ui5-radio-root{color:var(--_ui5-v2-4-0_radio_button_color);opacity:var(--sapContent_DisabledOpacity)}:host([disabled][checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_color)}:host(:not([disabled])[desktop]) .ui5-radio-root:focus:before,:host(:not([disabled])) .ui5-radio-root:focus-visible:before{content:"";display:var(--_ui5-v2-4-0_radio_button_focus_outline);position:absolute;inset:var(--_ui5-v2-4-0_radio_button_focus_dist);pointer-events:none;border:var(--_ui5-v2-4-0_radio_button_border_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_hover_color)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])[checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}.ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer,:host([checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill)}:host([active][checked]:not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}:host([active]:not([checked]):not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_active_color)}:host([text]) .ui5-radio-root{padding-inline-end:var(--_ui5-v2-4-0_radio_button_border_width)}:host([text][desktop]) .ui5-radio-root:focus:before,:host([text]) .ui5-radio-root:focus-visible:before{inset-inline-end:0px}:host([text]) .ui5-radio-inner{padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label)}:host([checked][readonly]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_read_only_inner_ring_color)}:host([readonly]) .ui5-radio-root .ui5-radio-svg-outer{fill:var(--sapField_ReadOnly_Background);stroke:var(--sapField_ReadOnly_BorderColor);stroke-dasharray:var(--_ui5-v2-4-0_radio_button_read_only_border_type);stroke-width:var(--_ui5-v2-4-0_radio_button_read_only_border_width)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-svg-outer{stroke-width:var(--sapField_InvalidBorderWidth)}:host([value-state="Information"]) .ui5-radio-svg-outer{stroke-width:var(--_ui5-v2-4-0_radio_button_information_border_width)}:host([value-state="Negative"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_error_fill)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InvalidColor);fill:var(--sapField_InvalidBackground)}:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_error)}:host([value-state="Critical"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_warning_fill)}:host([value-state="Critical"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_WarningColor);fill:var(--sapField_WarningBackground)}:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_warning)}:host([value-state="Positive"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_success_fill)}:host([value-state="Positive"]) .ui5-radio-svg-outer,:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_SuccessColor);fill:var(--sapField_SuccessBackground)}:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_success)}:host([value-state="Information"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_information_fill)}:host([value-state="Information"]) .ui5-radio-svg-outer,:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InformationColor);fill:var(--sapField_InformationBackground)}:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_information)}:host([value-state="Negative"]) .ui5-radio-root,:host([value-state="Critical"]) .ui5-radio-root,:host([value-state="Information"]) .ui5-radio-root{stroke-dasharray:var(--_ui5-v2-4-0_radio_button_warning_error_border_dash)}.ui5-radio-root{height:auto;position:relative;display:inline-flex;flex-wrap:nowrap;outline:none;max-width:100%;box-sizing:border-box;border:var(--_ui5-v2-4-0_radio_button_border);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}.ui5-radio-inner{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding);flex-shrink:0;height:var(--_ui5-v2-4-0_radio_button_inner_size);font-size:1rem;pointer-events:none;vertical-align:top}.ui5-radio-inner{outline:none}.ui5-radio-inner input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit;margin:0}[ui5-label].ui5-radio-label{display:flex;align-items:center;padding-inline-end:var(--_ui5-v2-4-0_radio_button_label_offset);padding-block:var(--_ui5-v2-4-0_radio_button_label_side_padding);vertical-align:top;max-width:100%;pointer-events:none;color:var(--_ui5-v2-4-0_radio_button_label_color);overflow-wrap:break-word}:host([wrapping-type="None"][text]) .ui5-radio-root{height:var(--_ui5-v2-4-0_radio_button_height)}:host([wrapping-type="None"][text]) [ui5-label].ui5-radio-label{text-overflow:ellipsis;overflow:hidden}.ui5-radio-svg{height:var(--_ui5-v2-4-0_radio_button_svg_size);width:var(--_ui5-v2-4-0_radio_button_svg_size);overflow:visible;pointer-events:none}.ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_outer_ring_bg);stroke:currentColor;stroke-width:var(--_ui5-v2-4-0_radio_button_outer_ring_width)}.ui5-radio-svg-inner{fill:none;r:var(--_ui5-v2-4-0_radio_button_inner_ring_radius)}.ui5-radio-svg-outer,.ui5-radio-svg-inner{flex-shrink:0}:host(.ui5-li-singlesel-radiobtn) .ui5-radio-root .ui5-radio-inner .ui5-radio-svg-outer{fill:var(--sapList_Background)}\n' };
var bO, yO = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let wO, xO = false, CO = bO = class extends wI {
  get formValidityMessage() {
    return bO.i18nBundle.getText(iR);
  }
  get formValidity() {
    return { valueMissing: this._groupRequired && !this._groupChecked };
  }
  async formElementAnchor() {
    return this.getFocusDomRefAsync();
  }
  get formFormattedValue() {
    return this.checked ? this.value || "on" : null;
  }
  constructor() {
    super(), this.disabled = false, this.readonly = false, this.required = false, this.checked = false, this.valueState = "None", this.value = "", this.wrappingType = "Normal", this.active = false, this._groupChecked = false, this._groupRequired = false, this._name = "", this._checked = false, this._deactivate = () => {
      wO && (wO.active = false);
    }, xO || (document.addEventListener("mouseup", this._deactivate), xO = true);
  }
  onAfterRendering() {
    this.syncGroup();
  }
  onEnterDOM() {
    IE() && this.setAttribute("desktop", "");
  }
  onExitDOM() {
    this.syncGroup(true);
  }
  syncGroup(e6) {
    const t2 = this._name, i2 = this.name, n2 = this._checked, o2 = this.checked;
    e6 && gO.removeFromGroup(this, t2), i2 !== t2 ? (t2 && gO.removeFromGroup(this, t2), i2 && gO.addToGroup(this, i2)) : i2 && this.isConnected && gO.enforceSingleSelection(this, i2), this.name && o2 !== n2 && gO.updateTabOrder(this.name), this._name = this.name || "", this._checked = this.checked;
  }
  _onclick() {
    return this.toggle();
  }
  _handleDown(e6) {
    const t2 = this.name;
    t2 && (e6.preventDefault(), gO.selectNextItem(this, t2));
  }
  _handleUp(e6) {
    const t2 = this.name;
    t2 && (e6.preventDefault(), gO.selectPreviousItem(this, t2));
  }
  _onkeydown(e6) {
    if (jI(e6)) return this.active = true, e6.preventDefault();
    if (WI(e6)) return this.active = true, this.toggle();
    const t2 = "rtl" === this.effectiveDir;
    (JI(e6) || !t2 && KI(e6) || t2 && YI(e6)) && this._handleDown(e6), (ZI(e6) || !t2 && YI(e6) || t2 && KI(e6)) && this._handleUp(e6);
  }
  _onkeyup(e6) {
    jI(e6) && this.toggle(), this.active = false;
  }
  _onmousedown() {
    this.active = true, wO = this;
  }
  _onmouseup() {
    this.active = false;
  }
  _onfocusout() {
    this.active = false;
  }
  toggle() {
    return this.canToggle() ? this.name ? (gO.selectItem(this, this.name), this) : (this.checked = !this.checked, this.fireDecoratorEvent("change"), this) : this;
  }
  canToggle() {
    return !(this.disabled || this.readonly || this.checked);
  }
  get classes() {
    return { inner: { "ui5-radio-inner--hoverable": !this.disabled && !this.readonly && IE() } };
  }
  get effectiveAriaDisabled() {
    return this.disabled ? "true" : null;
  }
  get ariaLabelText() {
    return [cR(this), this.text].filter(Boolean).join(" ");
  }
  get effectiveAriaDescribedBy() {
    return this.hasValueState ? `${this._id}-descr` : void 0;
  }
  get hasValueState() {
    return this.valueState !== ZP.None;
  }
  get valueStateText() {
    switch (this.valueState) {
      case ZP.Negative:
        return bO.i18nBundle.getText(QB);
      case ZP.Critical:
        return bO.i18nBundle.getText(VB);
      case ZP.Positive:
        return bO.i18nBundle.getText(qB);
      case ZP.Information:
        return bO.i18nBundle.getText(GB);
      default:
        return "";
    }
  }
  get effectiveTabIndex() {
    const e6 = this.getAttribute("tabindex");
    return this.disabled ? "-1" : this.name ? this._tabIndex : e6 || "0";
  }
};
yO([SI({ type: Boolean })], CO.prototype, "disabled", void 0), yO([SI({ type: Boolean })], CO.prototype, "readonly", void 0), yO([SI({ type: Boolean })], CO.prototype, "required", void 0), yO([SI({ type: Boolean })], CO.prototype, "checked", void 0), yO([SI()], CO.prototype, "text", void 0), yO([SI()], CO.prototype, "valueState", void 0), yO([SI()], CO.prototype, "name", void 0), yO([SI()], CO.prototype, "value", void 0), yO([SI()], CO.prototype, "wrappingType", void 0), yO([SI()], CO.prototype, "accessibleName", void 0), yO([SI()], CO.prototype, "accessibleNameRef", void 0), yO([SI()], CO.prototype, "_tabIndex", void 0), yO([SI({ type: Boolean })], CO.prototype, "active", void 0), yO([SI({ type: Boolean, noAttribute: true })], CO.prototype, "_groupChecked", void 0), yO([SI({ type: Boolean, noAttribute: true })], CO.prototype, "_groupRequired", void 0), yO([HM("@ui5/webcomponents")], CO, "i18nBundle", void 0), CO = bO = yO([CI({ tag: "ui5-radio-button", languageAware: true, formAssociated: true, renderer: UM, template: function(e6, t2, i2) {
  return NM`<div class="ui5-radio-root" role="radio" aria-checked="${FM(this.checked)}" aria-disabled="${FM(this.effectiveAriaDisabled)}" aria-describedby="${FM(this.effectiveAriaDescribedBy)}" aria-label="${FM(this.ariaLabelText)}" tabindex="${FM(this.effectiveTabIndex)}" @click="${this._onclick}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @focusout="${this._onfocusout}"><div class='ui5-radio-inner ${DM(this.classes.inner)}'><svg class="ui5-radio-svg" focusable="false" aria-hidden="true">${vO.call(this, e6, t2, i2)}</svg><input type='radio' ?required="${this.required}" ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.effectiveAriaDisabled}" name="${FM(this.name)}"  data-sap-no-tab-ref/></div>${this.text ? mO.call(this, e6, t2, i2) : void 0}${this.hasValueState ? fO.call(this, e6, t2, i2) : void 0}</div>`;
}, styles: AO, dependencies: [KP] }), EI("change", { bubbles: true })], CO), CO.define();
const SO = CO;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const EO = { packageName: "@ui5/webcomponents", fileName: "themes/ListItem.css.ts", content: '.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([navigated]) .ui5-li-root .ui5-li-navigated{width:.1875rem;position:absolute;right:0;top:0;bottom:0;background-color:var(--sapList_SelectionBorderColor)}:host([active][actionable]) .ui5-li-root .ui5-li-icon{color:var(--sapList_Active_TextColor)}:host([active][actionable]) .ui5-li-title,:host([active][actionable]) .ui5-li-desc,:host([active][actionable]) .ui5-li-additional-text{color:var(--sapList_Active_TextColor)}:host([additional-text-state="Critical"]) .ui5-li-additional-text{color:var(--sapCriticalTextColor)}:host([additional-text-state="Positive"]) .ui5-li-additional-text{color:var(--sapPositiveTextColor)}:host([additional-text-state="Negative"]) .ui5-li-additional-text{color:var(--sapNegativeTextColor)}:host([additional-text-state="Information"]) .ui5-li-additional-text{color:var(--sapInformativeTextColor)}:host([has-title][description]){height:5rem}:host([has-title][image]){height:5rem}:host([_has-image]){height:5rem}:host([image]) .ui5-li-content{height:3rem}::slotted(img[slot="image"]){width:var(--_ui5-v2-4-0_list_item_img_size);height:var(--_ui5-v2-4-0_list_item_img_size);border-radius:var(--ui5-v2-4-0-avatar-border-radius);object-fit:contain}:host([description]) .ui5-li-root{padding:1rem}:host([description]) .ui5-li-content{height:3rem}:host([has-title][description]) .ui5-li-title{padding-bottom:.375rem}.ui5-li-text-wrapper{flex-direction:column}:host([description]) .ui5-li-text-wrapper{height:100%;justify-content:space-between;padding:.125rem 0}.ui5-li-description-info-wrapper{display:flex;justify-content:space-between}.ui5-li-additional-text,:host(:not([wrapping-type="Normal"])) .ui5-li-title,.ui5-li-desc{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host([wrapping-type="Normal"]){height:auto}:host([wrapping-type="Normal"]) .ui5-li-content{margin:var(--_ui5-v2-4-0_list_item_content_vertical_offset) 0}.ui5-li-desc{color:var(--sapContent_LabelColor);font-size:var(--sapFontSize)}:host([description]) .ui5-li-additional-text{align-self:flex-end}.ui5-li-image{min-width:var(--_ui5-v2-4-0_list_item_img_size);min-height:var(--_ui5-v2-4-0_list_item_img_size);margin-top:var(--_ui5-v2-4-0_list_item_img_top_margin);margin-bottom:var(--_ui5-v2-4-0_list_item_img_bottom_margin);margin-inline-end:var(--_ui5-v2-4-0_list_item_img_hn_margin)}.ui5-li-icon{min-width:var(--_ui5-v2-4-0_list_item_icon_size);min-height:var(--_ui5-v2-4-0_list_item_icon_size);color:var(--sapContent_NonInteractiveIconColor);padding-inline-end:var(--_ui5-v2-4-0_list_item_icon_padding-inline-end)}.ui5-li-detailbtn,.ui5-li-deletebtn{display:flex;align-items:center;margin-left:var(--_ui5-v2-4-0_list_buttons_left_space)}.ui5-li-multisel-cb,.ui5-li-singlesel-radiobtn{flex-shrink:0}:host([description]) .ui5-li-singlesel-radiobtn{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([description]) .ui5-li-multisel-cb{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([_selection-mode="SingleStart"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="Multiple"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="SingleEnd"]) .ui5-li-root{padding-inline:1rem 0}:host [ui5-checkbox].ui5-li-singlesel-radiobtn{margin-right:var(--_ui5-v2-4-0_list_item_cb_margin_right)}.ui5-li-highlight{position:absolute;width:.375rem;bottom:0;left:0;top:0;border-inline-end:.0625rem solid var(--ui5-v2-4-0-listitem-background-color);box-sizing:border-box}:host([highlight="Negative"]) .ui5-li-highlight{background:var(--sapNegativeTextColor)}:host([highlight="Critical"]) .ui5-li-highlight{background:var(--sapCriticalTextColor)}:host([highlight="Positive"]) .ui5-li-highlight{background:var(--sapPositiveTextColor)}:host([highlight="Information"]) .ui5-li-highlight{background:var(--sapInformativeTextColor)}\n' };
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const TO = { packageName: "@ui5/webcomponents", fileName: "themes/ListItemAdditionalText.css.ts", content: ".ui5-li-additional-text{margin:0 .25rem;color:var(--sapNeutralTextColor);font-size:var(--sapFontSize);min-width:3.75rem;text-align:end;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\n" };
var IO, MO = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let BO = IO = class extends _O {
  constructor() {
    super(), this.type = "Active", this.accessibilityAttributes = {}, this.navigated = false, this.active = false, this.highlight = "None", this.accessibleRole = "ListItem", this._selectionMode = "None", this.deactivateByKey = (e6) => {
      WI(e6) && this.deactivate();
    }, this.deactivate = () => {
      this.active && (this.active = false);
    };
    this._ontouchstart = { handleEvent: () => {
      this._onmousedown();
    }, passive: true };
  }
  onBeforeRendering() {
    super.onBeforeRendering(), this.actionable = (this.type === lO.Active || this.type === lO.Navigation) && this._selectionMode !== CN.Delete;
  }
  onEnterDOM() {
    super.onEnterDOM(), document.addEventListener("mouseup", this.deactivate), document.addEventListener("touchend", this.deactivate), document.addEventListener("keyup", this.deactivateByKey);
  }
  onExitDOM() {
    document.removeEventListener("mouseup", this.deactivate), document.removeEventListener("keyup", this.deactivateByKey), document.removeEventListener("touchend", this.deactivate);
  }
  async _onkeydown(e6) {
    if ((jI(e6) || WI(e6)) && this._isTargetSelfFocusDomRef(e6)) return;
    super._onkeydown(e6);
    const t2 = this.type === lO.Active, i2 = this.typeNavigation;
    if ((jI(e6) || WI(e6)) && (t2 || i2) && this.activate(), vM(e6)) {
      const e7 = wM(), t3 = this.getFocusDomRef();
      if (e7 === t3) {
        const e8 = await Ek(t3);
        e8 == null ? void 0 : e8.focus();
      } else t3.focus();
    }
  }
  _onkeyup(e6) {
    super._onkeyup(e6), (jI(e6) || WI(e6)) && this.deactivate(), this.modeDelete && pM(e6) && this.onDelete();
  }
  _onmousedown() {
    this.activate();
  }
  _onmouseup() {
    this.getFocusDomRef().matches(":has(:focus-within)") || this.deactivate();
  }
  _ontouchend() {
    this._onmouseup();
  }
  _onfocusin(e6) {
    super._onfocusin(e6), e6.target !== this.getFocusDomRef() && this.deactivate();
  }
  _onfocusout(e6) {
    e6.target === this.getFocusDomRef() && this.deactivate();
  }
  _ondragstart(e6) {
    e6.dataTransfer && e6.target === this._listItem && (this.setAttribute("data-moving", ""), e6.dataTransfer.dropEffect = "move", e6.dataTransfer.effectAllowed = "move");
  }
  _ondragend(e6) {
    e6.target === this._listItem && this.removeAttribute("data-moving");
  }
  _isTargetSelfFocusDomRef(e6) {
    return e6.target !== this.getFocusDomRef();
  }
  onMultiSelectionComponentPress(e6) {
    this.isInactive || this.fireDecoratorEvent("_selection-requested", { item: this, selected: e6.target.checked, selectionComponentPressed: true });
  }
  onSingleSelectionComponentPress(e6) {
    this.isInactive || this.fireDecoratorEvent("_selection-requested", { item: this, selected: !e6.target.checked, selectionComponentPressed: true });
  }
  activate() {
    this.type !== lO.Active && this.type !== lO.Navigation || (this.active = true);
  }
  onDelete() {
    this.fireDecoratorEvent("_selection-requested", { item: this, selectionComponentPressed: false });
  }
  onDetailClick() {
    this.fireDecoratorEvent("detail-click", { item: this, selected: this.selected });
  }
  fireItemPress(e6) {
    this.isInactive || super.fireItemPress(e6);
  }
  get isInactive() {
    return this.type === lO.Inactive || this.type === lO.Detail;
  }
  get placeSelectionElementBefore() {
    return this._selectionMode === CN.Multiple || this._selectionMode === CN.SingleStart;
  }
  get placeSelectionElementAfter() {
    return !this.placeSelectionElementBefore && (this._selectionMode === CN.SingleEnd || this._selectionMode === CN.Delete);
  }
  get modeSingleSelect() {
    return [CN.SingleStart, CN.SingleEnd, CN.Single].includes(this._selectionMode);
  }
  get modeMultiple() {
    return this._selectionMode === CN.Multiple;
  }
  get modeDelete() {
    return this._selectionMode === CN.Delete;
  }
  get renderDeleteButton() {
    return this.modeDelete;
  }
  get typeDetail() {
    return this.type === lO.Detail;
  }
  get typeNavigation() {
    return this.type === lO.Navigation;
  }
  get typeActive() {
    return this.type === lO.Active;
  }
  get _ariaSelected() {
    if (this.modeMultiple || this.modeSingleSelect) return this.selected;
  }
  get listItemAccessibleRole() {
    return this.accessibleRole.toLowerCase();
  }
  get ariaSelectedText() {
    let e6;
    return void 0 !== this._ariaSelected && (e6 = this._ariaSelected ? IO.i18nBundle.getText(xB) : IO.i18nBundle.getText(CB)), e6;
  }
  get deleteText() {
    return IO.i18nBundle.getText(gB);
  }
  get hasDeleteButtonSlot() {
    return !!this.deleteButton.length;
  }
  get _accessibleNameRef() {
    return this.accessibleName ? `${this._id}-invisibleText` : `${this._id}-content ${this._id}-invisibleText`;
  }
  get _accInfo() {
    return { role: this.listItemAccessibleRole, ariaExpanded: void 0, ariaLevel: void 0, ariaLabel: IO.i18nBundle.getText(SB), ariaLabelRadioButton: IO.i18nBundle.getText(EB), ariaSelectedText: this.ariaSelectedText, ariaHaspopup: this.accessibilityAttributes.hasPopup, setsize: this.accessibilityAttributes.ariaSetsize, posinset: this.accessibilityAttributes.ariaPosinset, tooltip: this.tooltip };
  }
  get _hasHighlightColor() {
    return this.highlight !== sO.None;
  }
  get hasConfigurableMode() {
    return true;
  }
  get _listItem() {
    return this.shadowRoot.querySelector("li");
  }
};
MO([SI()], BO.prototype, "type", void 0), MO([SI({ type: Object })], BO.prototype, "accessibilityAttributes", void 0), MO([SI({ type: Boolean })], BO.prototype, "navigated", void 0), MO([SI()], BO.prototype, "tooltip", void 0), MO([SI({ type: Boolean })], BO.prototype, "active", void 0), MO([SI()], BO.prototype, "highlight", void 0), MO([SI({ type: Boolean })], BO.prototype, "selected", void 0), MO([SI()], BO.prototype, "accessibleRole", void 0), MO([SI()], BO.prototype, "_selectionMode", void 0), MO([TI()], BO.prototype, "deleteButton", void 0), MO([HM("@ui5/webcomponents")], BO, "i18nBundle", void 0), BO = IO = MO([CI({ languageAware: true, styles: [_O.styles, TO, EO], dependencies: [tk, SO, hD] }), EI("detail-click", { bubbles: true }), EI("_focused", { bubbles: true }), EI("_selection-requested", { bubbles: true })], BO);
const RO = BO;
function kO(e6, t2, i2) {
  return NM`<slot></slot>`;
}
function PO(e6, t2, i2) {
  return NM`${this.icon ? DO.call(this, e6, t2, i2) : void 0}${this.initials ? LO.call(this, e6, t2, i2) : void 0}`;
}
function DO(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} class="ui5-avatar-icon" name="${FM(this.icon)}"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon class="ui5-avatar-icon" name="${FM(this.icon)}"></ui5-icon>`;
}
function LO(e6, t2, i2) {
  return i2 ? NM`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${FM(this.validInitials)}</span><${zM("ui5-icon", t2, i2)} class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${FM(this.fallbackIcon)}"></${zM("ui5-icon", t2, i2)}>` : NM`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${FM(this.validInitials)}</span><ui5-icon class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${FM(this.fallbackIcon)}"></ui5-icon>`;
}
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const FO = { packageName: "@ui5/webcomponents", fileName: "themes/Avatar.css.ts", content: ':host(:not([hidden])){display:inline-block;box-sizing:border-box;position:relative;font-family:"72override",var(--sapFontFamily)}:host(:not([hidden]).ui5_hovered){opacity:.7}:host([interactive]:not([disabled])){cursor:pointer}:host([interactive]:not([hidden]):active){background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([interactive]:not([hidden]):not([disabled]):not(:active):hover){box-shadow:var(--ui5-v2-4-0-avatar-hover-box-shadow-offset)}:host([interactive][desktop]:not([hidden])) .ui5-avatar-root:focus,:host([interactive]:not([hidden])) .ui5-avatar-root:focus-visible{outline:var(--_ui5-v2-4-0_avatar_outline);outline-offset:var(--_ui5-v2-4-0_avatar_focus_offset)}:host([disabled]){opacity:var(--sapContent_DisabledOpacity)}:host{height:3rem;width:3rem;border-radius:50%;border:var(--ui5-v2-4-0-avatar-initials-border);outline:none;color:var(--ui5-v2-4-0-avatar-initials-color)}.ui5-avatar-root{display:flex;align-items:center;justify-content:center;outline:none;height:100%;width:100%;border-radius:inherit}:host([_size="XS"]),:host([size="XS"]){height:2rem;width:2rem;min-height:2rem;min-width:2rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XS)}:host(:not([size])),:host([_size="S"]),:host([size="S"]){min-height:3rem;min-width:3rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_S)}:host([_size="M"]),:host([size="M"]){min-height:4rem;min-width:4rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_M)}:host([_size="L"]),:host([size="L"]){min-height:5rem;min-width:5rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_L)}:host([_size="XL"]),:host([size="XL"]){min-height:7rem;min-width:7rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XL)}:host .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_fontsize_S);width:var(--_ui5-v2-4-0_avatar_fontsize_S);color:inherit}:host([_size="XS"]) .ui5-avatar-icon,:host([size="XS"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XS);width:var(--_ui5-v2-4-0_avatar_icon_XS)}:host([_size="S"]) .ui5-avatar-icon,:host([size="S"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_S);width:var(--_ui5-v2-4-0_avatar_icon_S)}:host([_size="M"]) .ui5-avatar-icon,:host([size="M"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_M);width:var(--_ui5-v2-4-0_avatar_icon_M)}:host([_size="L"]) .ui5-avatar-icon,:host([size="L"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_L);width:var(--_ui5-v2-4-0_avatar_icon_L)}:host([_size="XL"]) .ui5-avatar-icon,:host([size="XL"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XL);width:var(--_ui5-v2-4-0_avatar_icon_XL)}::slotted(*){border-radius:50%;width:100%;height:100%;pointer-events:none}:host([shape="Square"]){border-radius:var(--ui5-v2-4-0-avatar-border-radius)}:host([shape="Square"]) ::slotted(*){border-radius:calc(var(--ui5-v2-4-0-avatar-border-radius) - var(--ui5-v2-4-0-avatar-border-radius-img-deduction))}:host(:not([color-scheme])),:host(:not([_has-image])),:host([_color-scheme="Accent6"]),:host([ui5-avatar][color-scheme="Accent6"]){background-color:var(--ui5-v2-4-0-avatar-accent6);color:var(--ui5-v2-4-0-avatar-accent6-color);border-color:var(--ui5-v2-4-0-avatar-accent6-border-color)}:host([_color-scheme="Accent1"]),:host([ui5-avatar][color-scheme="Accent1"]){background-color:var(--ui5-v2-4-0-avatar-accent1);color:var(--ui5-v2-4-0-avatar-accent1-color);border-color:var(--ui5-v2-4-0-avatar-accent1-border-color)}:host([_color-scheme="Accent2"]),:host([ui5-avatar][color-scheme="Accent2"]){background-color:var(--ui5-v2-4-0-avatar-accent2);color:var(--ui5-v2-4-0-avatar-accent2-color);border-color:var(--ui5-v2-4-0-avatar-accent2-border-color)}:host([_color-scheme="Accent3"]),:host([ui5-avatar][color-scheme="Accent3"]){background-color:var(--ui5-v2-4-0-avatar-accent3);color:var(--ui5-v2-4-0-avatar-accent3-color);border-color:var(--ui5-v2-4-0-avatar-accent3-border-color)}:host([_color-scheme="Accent4"]),:host([ui5-avatar][color-scheme="Accent4"]){background-color:var(--ui5-v2-4-0-avatar-accent4);color:var(--ui5-v2-4-0-avatar-accent4-color);border-color:var(--ui5-v2-4-0-avatar-accent4-border-color)}:host([_color-scheme="Accent5"]),:host([ui5-avatar][color-scheme="Accent5"]){background-color:var(--ui5-v2-4-0-avatar-accent5);color:var(--ui5-v2-4-0-avatar-accent5-color);border-color:var(--ui5-v2-4-0-avatar-accent5-border-color)}:host([_color-scheme="Accent7"]),:host([ui5-avatar][color-scheme="Accent7"]){background-color:var(--ui5-v2-4-0-avatar-accent7);color:var(--ui5-v2-4-0-avatar-accent7-color);border-color:var(--ui5-v2-4-0-avatar-accent7-border-color)}:host([_color-scheme="Accent8"]),:host([ui5-avatar][color-scheme="Accent8"]){background-color:var(--ui5-v2-4-0-avatar-accent8);color:var(--ui5-v2-4-0-avatar-accent8-color);border-color:var(--ui5-v2-4-0-avatar-accent8-border-color)}:host([_color-scheme="Accent9"]),:host([ui5-avatar][color-scheme="Accent9"]){background-color:var(--ui5-v2-4-0-avatar-accent9);color:var(--ui5-v2-4-0-avatar-accent9-color);border-color:var(--ui5-v2-4-0-avatar-accent9-border-color)}:host([_color-scheme="Accent10"]),:host([ui5-avatar][color-scheme="Accent10"]){background-color:var(--ui5-v2-4-0-avatar-accent10);color:var(--ui5-v2-4-0-avatar-accent10-color);border-color:var(--ui5-v2-4-0-avatar-accent10-border-color)}:host([_color-scheme="Placeholder"]),:host([ui5-avatar][color-scheme="Placeholder"]){background-color:var(--ui5-v2-4-0-avatar-placeholder);color:var(--ui5-v2-4-0-avatar-placeholder-color);border-color:var(--ui5-v2-4-0-avatar-placeholder-border-color)}:host([_has-image]){color:var(--ui5-v2-4-0-avatar-accent10-color);background-color:transparent;vertical-align:middle}.ui5-avatar-initials{color:inherit}.ui5-avatar-icon~.ui5-avatar-initials,.ui5-avatar-icon~.ui5-avatar-icon-fallback{display:none}.ui5-avatar-fallback-icon-hidden{display:none}.ui5-avatar-initials-hidden{position:absolute;visibility:hidden;z-index:0;pointer-events:none}::slotted([slot="badge"]){position:absolute;bottom:0;right:0;width:1.125rem;height:1.125rem;font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSmallSize);color:var(--sapBackgroundColor);--_ui5-v2-4-0-tag-height: 1.125rem;--_ui5-v2-4-0-tag-border-radius: 50%}:host([_size="L"]) ::slotted([slot="badge"]),:host([size="L"]) ::slotted([slot="badge"]){width:1.25rem;height:1.25rem;--_ui5-v2-4-0-tag-height: 1.25rem;--_ui5-v2-4-0-tag-icon-width: .875rem}:host([_size="XL"]) ::slotted([slot="badge"]),:host([size="XL"]) ::slotted([slot="badge"]){width:1.75rem;height:1.75rem;--_ui5-v2-4-0-tag-height: 1.75rem;--_ui5-v2-4-0-tag-icon-width: 1rem}:host([shape="Square"]) ::slotted([slot="badge"]){bottom:-.125rem;right:-.125rem}:host([_size="L"][shape="Square"]) ::slotted([slot="badge"]),:host([size="L"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.1875rem;right:-.1875rem}:host([_size="XL"][shape="Square"]) ::slotted([slot="badge"]),:host([size="XL"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.25rem;right:-.25rem}\n' };
CT("employee", { pathData: "M448 512H64V384q0-26 10-49.5t27.5-41T142 266t50-10h64q-27 0-50-10t-40.5-27.5T138 178t-10-50q0-26 10-49.5t27.5-41T206 10t50-10q26 0 49.5 10t41 27.5 27.5 41 10 49.5q0 27-10 50t-27.5 40.5-41 27.5-49.5 10h64q26 0 49.5 10t41 27.5 27.5 41 10 49.5v128zM256 224q40 0 68-28t28-68-28-68-68-28-68 28-28 68 28 68 68 28zM96 384v96h320v-96q0-40-28-68t-68-28H192q-40 0-68 28t-28 68zm192 32v-32h96v32h-96z", ltr: false, collection: "SAP-icons-v4", packageName: "@ui5/webcomponents-icons" });
CT("employee", { pathData: "M326 352q11 0 18.5 7.5T352 378t-7.5 18-18.5 7h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T314 352h12zm16-97q48 23 77 67.5t29 99.5v32q0 11-7.5 18.5T422 480H90q-11 0-18.5-7.5T64 454v-32q0-55 29-99.5t77-67.5l-5-4q-18-18-27.5-41.5T128 160q0-27 10-50t27.5-40.5 41-27.5T256 32t49.5 10.5 41 28T374 111t10 49q0 27-11 52t-31 43zm-112 86l-25-15q-13-7-13-19v-6q-34 17-55.5 49T115 422v7h115v-88zm-51-181q0 32 22.5 54.5T256 237t54.5-22.5T333 160t-22.5-54.5T256 83t-54.5 22.5T179 160zm218 262q0-40-21.5-72T320 301v6q0 12-13 19l-26 15v88h116v-7z", ltr: false, collection: "SAP-icons-v5", packageName: "@ui5/webcomponents-icons" });
var NO, OO = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let UO = NO = class extends wI {
  constructor() {
    super(), this.disabled = false, this.interactive = false, this.fallbackIcon = "employee", this.shape = "Circle", this.size = "S", this.colorScheme = "Accent6", this._colorScheme = "Accent6", this.accessibilityAttributes = {}, this._hasImage = false, this._handleResizeBound = this.handleResize.bind(this);
  }
  get tabindex() {
    return this.forcedTabIndex || (this._interactive ? "0" : "-1");
  }
  get effectiveSize() {
    return this.getAttribute("size");
  }
  get "ffectiveBackgroundColor"() {
    return this.getAttribute("color-scheme") || this._colorScheme;
  }
  get _role() {
    return this._interactive ? "button" : "img";
  }
  get _ariaHasPopup() {
    return this._getAriaHasPopup();
  }
  get _interactive() {
    return this.interactive && !this.disabled;
  }
  get validInitials() {
    return this.initials && /^[a-zA-Z--]{1,3}$/.test(this.initials) ? this.initials : null;
  }
  get accessibleNameText() {
    return this.accessibleName ? this.accessibleName : NO.i18nBundle.getText(XM) || void 0;
  }
  get hasImage() {
    return this._hasImage = !!this.image.length, this._hasImage;
  }
  get initialsContainer() {
    return this.getDomRef().querySelector(".ui5-avatar-initials");
  }
  get fallBackIconDomRef() {
    return this.getDomRef().querySelector(".ui5-avatar-icon-fallback");
  }
  onBeforeRendering() {
    this._onclick = this._interactive ? this._onClickHandler.bind(this) : void 0;
  }
  async onAfterRendering() {
    await LS(), this.initials && !this.icon && this._checkInitials();
  }
  onEnterDOM() {
    IE() && this.setAttribute("desktop", ""), this.initialsContainer && kk.register(this.initialsContainer, this._handleResizeBound);
  }
  onExitDOM() {
    this.initialsContainer && kk.deregister(this.initialsContainer, this._handleResizeBound);
  }
  handleResize() {
    this.initials && !this.icon && this._checkInitials();
  }
  _checkInitials() {
    const e6 = this.getDomRef(), t2 = e6.querySelector(".ui5-avatar-initials");
    this.validInitials && t2 && t2.scrollWidth <= e6.scrollWidth ? this.showInitials() : this.showFallbackIcon();
  }
  showFallbackIcon() {
    var _a3, _b3;
    (_a3 = this.initialsContainer) == null ? void 0 : _a3.classList.add("ui5-avatar-initials-hidden"), (_b3 = this.fallBackIconDomRef) == null ? void 0 : _b3.classList.remove("ui5-avatar-fallback-icon-hidden");
  }
  showInitials() {
    var _a3, _b3;
    (_a3 = this.initialsContainer) == null ? void 0 : _a3.classList.remove("ui5-avatar-initials-hidden"), (_b3 = this.fallBackIconDomRef) == null ? void 0 : _b3.classList.add("ui5-avatar-fallback-icon-hidden");
  }
  _onClickHandler(e6) {
    e6.stopPropagation(), this._fireClick();
  }
  _onkeydown(e6) {
    this._interactive && (WI(e6) && this._fireClick(), jI(e6) && e6.preventDefault());
  }
  _onkeyup(e6) {
    this._interactive && !e6.shiftKey && jI(e6) && this._fireClick();
  }
  _fireClick() {
    this.fireDecoratorEvent("click");
  }
  _getAriaHasPopup() {
    const e6 = this.accessibilityAttributes.hasPopup;
    if (this._interactive && e6) return e6;
  }
};
OO([SI({ type: Boolean })], UO.prototype, "disabled", void 0), OO([SI({ type: Boolean })], UO.prototype, "interactive", void 0), OO([SI()], UO.prototype, "icon", void 0), OO([SI()], UO.prototype, "fallbackIcon", void 0), OO([SI()], UO.prototype, "initials", void 0), OO([SI()], UO.prototype, "shape", void 0), OO([SI()], UO.prototype, "size", void 0), OO([SI()], UO.prototype, "colorScheme", void 0), OO([SI()], UO.prototype, "_colorScheme", void 0), OO([SI()], UO.prototype, "accessibleName", void 0), OO([SI({ type: Object })], UO.prototype, "accessibilityAttributes", void 0), OO([SI({ noAttribute: true })], UO.prototype, "forcedTabIndex", void 0), OO([SI({ type: Boolean })], UO.prototype, "_hasImage", void 0), OO([TI({ type: HTMLElement, default: true })], UO.prototype, "image", void 0), OO([TI()], UO.prototype, "badge", void 0), OO([HM("@ui5/webcomponents")], UO, "i18nBundle", void 0), UO = NO = OO([CI({ tag: "ui5-avatar", languageAware: true, renderer: UM, styles: FO, template: function(e6, t2, i2) {
  return NM`<div class="ui5-avatar-root" tabindex="${FM(this.tabindex)}" data-sap-focus-ref @keyup=${this._onkeyup} @keydown=${this._onkeydown} @click=${this._onclick} role="${FM(this._role)}" aria-haspopup="${FM(this._ariaHasPopup)}" aria-label="${FM(this.accessibleNameText)}" fallback-icon="${FM(this.fallbackIcon)}">${this.hasImage ? kO.call(this, e6, t2, i2) : PO.call(this, e6, t2, i2)}<slot name="badge"></slot></div>`;
}, dependencies: [BR] }), EI("click", { bubbles: true })], UO), UO.define();
const zO = UO;
function HO(e6, t2, i2) {
  return NM`${this.modeSingleSelect ? QO.call(this, e6, t2, i2) : void 0}${this.modeMultiple ? VO.call(this, e6, t2, i2) : void 0}${this.renderDeleteButton ? GO.call(this, e6, t2, i2) : void 0}`;
}
function QO(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-radio-button", t2, i2)} part="radio" ?disabled="${this.isInactive}" accessible-name="${FM(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${FM(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${FM(this.onSingleSelectionComponentPress)}"></${zM("ui5-radio-button", t2, i2)}>` : NM`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${FM(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${FM(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${FM(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`;
}
function VO(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-checkbox", t2, i2)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${FM(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${FM(this._accInfo.ariaLabel)}" @ui5-change="${FM(this.onMultiSelectionComponentPress)}"></${zM("ui5-checkbox", t2, i2)}>` : NM`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${FM(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${FM(this._accInfo.ariaLabel)}" @ui5-change="${FM(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`;
}
function GO(e6, t2, i2) {
  return NM`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot ? qO.call(this, e6, t2, i2) : $O.call(this, e6, t2, i2)}</div>`;
}
function qO(e6, t2, i2) {
  return NM`<slot name="deleteButton"></slot>`;
}
function $O(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-button", t2, i2)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${FM(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${FM(this.deleteText)}"></${zM("ui5-button", t2, i2)}>` : NM`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${FM(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${FM(this.deleteText)}"></ui5-button>`;
}
function WO(e6, t2, i2) {
  return NM`<div class="ui5-li-highlight"></div>`;
}
function jO(e6, t2, i2) {
  return NM`<div class="ui5-li-image"><slot name="image"></slot></div>`;
}
function XO(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} part="icon" name="${FM(this.icon)}" class="ui5-li-icon" mode="Decorative"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon part="icon" name="${FM(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`;
}
function YO(e6, t2, i2) {
  return NM`<div class="ui5-li-description-info-wrapper"><span part="description" class="ui5-li-desc">${FM(this.description)}</span>${this.additionalText ? KO.call(this, e6, t2, i2) : void 0}</div>`;
}
function KO(e6, t2, i2) {
  return NM`<span part="additional-text" class="ui5-li-additional-text">${FM(this.additionalText)}</span>`;
}
function ZO(e6, t2, i2) {
  return NM`<span class="ui5-hidden-text">${FM(this.type)}</span>`;
}
function JO(e6, t2, i2) {
  return NM`${this.additionalText ? eU.call(this, e6, t2, i2) : void 0}`;
}
function eU(e6, t2, i2) {
  return NM`<span part="additional-text" class="ui5-li-additional-text">${FM(this.additionalText)}</span>`;
}
function tU(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} part="icon" name="${FM(this.icon)}" class="ui5-li-icon" mode="Decorative"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon part="icon" name="${FM(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`;
}
function iU(e6, t2, i2) {
  return i2 ? NM`<div class="ui5-li-detailbtn"><${zM("ui5-button", t2, i2)} part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></${zM("ui5-button", t2, i2)}></div>` : NM`<div class="ui5-li-detailbtn"><ui5-button part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></ui5-button></div>`;
}
function nU(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-icon", t2, i2)} name ="slim-arrow-right"></${zM("ui5-icon", t2, i2)}>` : NM`<ui5-icon name ="slim-arrow-right"></ui5-icon>`;
}
function oU(e6, t2, i2) {
  return NM`<div class="ui5-li-navigated"></div>`;
}
function rU(e6, t2, i2) {
  return NM`${this.modeSingleSelect ? sU.call(this, e6, t2, i2) : void 0}${this.modeMultiple ? aU.call(this, e6, t2, i2) : void 0}${this.renderDeleteButton ? lU.call(this, e6, t2, i2) : void 0}`;
}
function sU(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-radio-button", t2, i2)} part="radio" ?disabled="${this.isInactive}" accessible-name="${FM(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${FM(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${FM(this.onSingleSelectionComponentPress)}"></${zM("ui5-radio-button", t2, i2)}>` : NM`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${FM(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${FM(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${FM(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`;
}
function aU(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-checkbox", t2, i2)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${FM(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${FM(this._accInfo.ariaLabel)}" @ui5-change="${FM(this.onMultiSelectionComponentPress)}"></${zM("ui5-checkbox", t2, i2)}>` : NM`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${FM(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${FM(this._accInfo.ariaLabel)}" @ui5-change="${FM(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`;
}
function lU(e6, t2, i2) {
  return NM`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot ? cU.call(this, e6, t2, i2) : hU.call(this, e6, t2, i2)}</div>`;
}
function cU(e6, t2, i2) {
  return NM`<slot name="deleteButton"></slot>`;
}
function hU(e6, t2, i2) {
  return i2 ? NM`<${zM("ui5-button", t2, i2)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${FM(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${FM(this.deleteText)}"></${zM("ui5-button", t2, i2)}>` : NM`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${FM(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${FM(this.deleteText)}"></ui5-button>`;
}
var uU = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let dU = class extends RO {
  constructor() {
    super(...arguments), this.iconEnd = false, this.additionalTextState = "None", this.movable = false, this.wrappingType = "None", this.hasTitle = false, this._hasImage = false;
  }
  onBeforeRendering() {
    super.onBeforeRendering(), this.hasTitle = !!this.textContent, this._hasImage = this.hasImage;
  }
  get displayIconBegin() {
    return !(!this.icon || this.iconEnd);
  }
  get displayIconEnd() {
    return !(!this.icon || !this.iconEnd);
  }
  get hasImage() {
    return !!this.image.length;
  }
};
uU([SI()], dU.prototype, "description", void 0), uU([SI()], dU.prototype, "icon", void 0), uU([SI({ type: Boolean })], dU.prototype, "iconEnd", void 0), uU([SI()], dU.prototype, "additionalText", void 0), uU([SI()], dU.prototype, "additionalTextState", void 0), uU([SI({ type: Boolean })], dU.prototype, "movable", void 0), uU([SI()], dU.prototype, "accessibleName", void 0), uU([SI()], dU.prototype, "wrappingType", void 0), uU([SI({ type: Boolean })], dU.prototype, "hasTitle", void 0), uU([SI({ type: Boolean })], dU.prototype, "_hasImage", void 0), uU([TI()], dU.prototype, "image", void 0), dU = uU([CI({ tag: "ui5-li", template: function(e6, t2, i2) {
  return NM`<li part="native-li" data-sap-focus-ref tabindex="${FM(this._effectiveTabIndex)}" class="${DM(this.classes.main)}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}" @keyup="${this._onkeyup}" @keydown="${this._onkeydown}" @mouseup="${this._onmouseup}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" @click="${this._onclick}" draggable="${FM(this.movable)}" @dragstart="${this._ondragstart}" @dragend="${this._ondragend}" role="${FM(this._accInfo.role)}" aria-expanded="${FM(this._accInfo.ariaExpanded)}" title="${FM(this._accInfo.tooltip)}" aria-level="${FM(this._accInfo.ariaLevel)}" aria-haspopup="${FM(this._accInfo.ariaHaspopup)}" aria-posinset="${FM(this._accInfo.posinset)}" aria-setsize="${FM(this._accInfo.setsize)}" aria-describedby="${FM(this._id)}-invisibleText-describedby" aria-labelledby="${FM(this._accessibleNameRef)}" aria-disabled="${FM(this._ariaDisabled)}" aria-selected="${FM(this._accInfo.ariaSelected)}" aria-checked="${FM(this._accInfo.ariaChecked)}" aria-owns="${FM(this._accInfo.ariaOwns)}" aria-keyshortcuts="${FM(this._accInfo.ariaKeyShortcuts)}">${this.placeSelectionElementBefore ? HO.call(this, e6, t2, i2) : void 0}${this._hasHighlightColor ? WO.call(this, e6, t2, i2) : void 0}<div part="content" id="${FM(this._id)}-content" class="ui5-li-content">${this.hasImage ? jO.call(this, e6, t2, i2) : void 0}${this.displayIconBegin ? XO.call(this, e6, t2, i2) : void 0}<div class="ui5-li-text-wrapper"><span part="title" class="ui5-li-title"><slot></slot></span>${this.description ? YO.call(this, e6, t2, i2) : void 0}${this.typeActive ? void 0 : ZO.call(this, e6, t2, i2)}</div>${this.description ? void 0 : JO.call(this, e6, t2, i2)}</div>${this.displayIconEnd ? tU.call(this, e6, t2, i2) : void 0}${this.typeDetail ? iU.call(this, e6, t2, i2) : void 0}${this.typeNavigation ? nU.call(this, e6, t2, i2) : void 0}${this.navigated ? oU.call(this, e6, t2, i2) : void 0}${this.placeSelectionElementAfter ? rU.call(this, e6, t2, i2) : void 0}<span id="${FM(this._id)}-invisibleText" class="ui5-hidden-text">${FM(this._accInfo.listItemAriaLabel)}${FM(this.accessibleName)}</span><span id="${FM(this._id)}-invisibleText-describedby" class="ui5-hidden-text">${FM(this._accInfo.ariaSelectedText)}</span></li> `;
}, dependencies: [...RO.dependencies, BR, zO] })], dU), dU.define();
const pU = dU;
KS("@ui5/webcomponents-theming", "sap_horizon", async () => SR), KS("@ui5/webcomponents", "sap_horizon", async () => ER);
const _U = { packageName: "@ui5/webcomponents", fileName: "themes/ListItemGroupHeader.css.ts", content: ".ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}:host([has-border]){border-bottom:var(--sapList_BorderWidth) solid var(--sapList_GroupHeaderBorderColor)}:host([actionable]:not([disabled])){cursor:default}.ui5-li-root.ui5-ghli-root{padding-top:.5rem;color:currentColor;font-size:var(--sapFontHeader6Size);font-weight:400;line-height:2rem;margin:0}.ui5-ghli-title{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700;font-family:var(--sapFontHeaderFamily)}.ui5-li-content{width:100%}\n" };
var gU, mU = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let fU = gU = class extends _O {
  get groupItem() {
    return true;
  }
  get _pressable() {
    return false;
  }
  get groupHeaderText() {
    return gU.i18nBundle.getText(mB);
  }
  get ariaLabelText() {
    return [this.textContent, this.accessibleName].filter(Boolean).join(" ");
  }
};
mU([SI()], fU.prototype, "accessibleName", void 0), mU([HM("@ui5/webcomponents")], fU, "i18nBundle", void 0), fU = gU = mU([CI({ tag: "ui5-li-group-header", languageAware: true, template: function(e6, t2, i2) {
  return NM`<ul part="native-li" tabindex="${FM(this.forcedTabIndex)}" class="ui5-ghli-root ${DM(this.classes.main)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" aria-label="${FM(this.ariaLabelText)}" aria-roledescription="${FM(this.groupHeaderText)}" role="group"><div id="${FM(this._id)}-content" class="ui5-li-content"><span class="ui5-ghli-title"><slot></slot></span></div></ul>`;
}, styles: [_O.styles, _U] })], fU), fU.define();
const vU = fU;
var AU = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let bU = class extends wI {
  constructor() {
    super(...arguments), this.focused = false;
  }
  onEnterDOM() {
    _N(this);
  }
  onExitDOM() {
    gN(this);
  }
  get groupHeaderItem() {
    return this.shadowRoot.querySelector("[ui5-li-group-header]");
  }
  get hasHeader() {
    return !!this.headerText || this.hasFormattedHeader;
  }
  get hasFormattedHeader() {
    return !!this.header.length;
  }
  get isListItemGroup() {
    return true;
  }
  get dropIndicatorDOM() {
    return this.shadowRoot.querySelector("[ui5-drop-indicator]");
  }
  _ondragenter(e6) {
    e6.preventDefault();
  }
  _ondragleave(e6) {
    e6.relatedTarget instanceof Node && this.shadowRoot.contains(e6.relatedTarget) || (this.dropIndicatorDOM.targetReference = null);
  }
  _ondragover(e6) {
    const t2 = mN();
    if (!(e6.target instanceof HTMLElement && t2)) return;
    const i2 = bN(this.items, e6.clientY, vN.Vertical);
    if (!i2) return void (this.dropIndicatorDOM.targetReference = null);
    let n2 = i2.placements;
    i2.element === t2 && (n2 = n2.filter((e7) => e7 !== fN.On));
    n2.some((n3) => !this.fireDecoratorEvent("move-over", { source: { element: t2 }, destination: { element: i2.element, placement: n3 } }) && (e6.preventDefault(), this.dropIndicatorDOM.targetReference = i2.element, this.dropIndicatorDOM.placement = n3, true)) || (this.dropIndicatorDOM.targetReference = null);
  }
  _ondrop(e6) {
    e6.preventDefault(), this.fireDecoratorEvent("move", { source: { element: mN() }, destination: { element: this.dropIndicatorDOM.targetReference, placement: this.dropIndicatorDOM.placement } }), this.dropIndicatorDOM.targetReference = null;
  }
};
AU([SI()], bU.prototype, "headerText", void 0), AU([SI()], bU.prototype, "headerAccessibleName", void 0), AU([TI({ default: true, invalidateOnChildChange: true, type: HTMLElement })], bU.prototype, "items", void 0), AU([SI({ type: Boolean })], bU.prototype, "focused", void 0), AU([TI({ type: HTMLElement })], bU.prototype, "header", void 0), bU = AU([CI({ tag: "ui5-li-group", renderer: UM, languageAware: true, template: function(e6, t2, i2) {
  return i2 ? NM`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader ? tO.call(this, e6, t2, i2) : void 0}<slot></slot><${zM("ui5-drop-indicator", t2, i2)} orientation="Horizontal" .ownerReference="${FM(this)}"></${zM("ui5-drop-indicator", t2, i2)}></ul>` : NM`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader ? tO.call(this, e6, t2, i2) : void 0}<slot></slot><ui5-drop-indicator orientation="Horizontal" .ownerReference="${FM(this)}"></ui5-drop-indicator></ul>`;
}, styles: [oO], dependencies: [pU, vU, BN] }), EI("move-over", { detail: { source: { type: Object }, destination: { type: Object } }, bubbles: true, cancelable: true }), EI("move", { detail: { source: { type: Object }, destination: { type: Object } }, bubbles: true })], bU), bU.define();
const yU = bU;
var wU, xU = function(e6, t2, i2, n2) {
  var o2, r2 = arguments.length, s2 = r2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, i2) : n2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s2 = Reflect.decorate(e6, t2, i2, n2);
  else for (var a2 = e6.length - 1; a2 >= 0; a2--) (o2 = e6[a2]) && (s2 = (r2 < 3 ? o2(s2) : r2 > 3 ? o2(t2, i2, s2) : o2(t2, i2)) || s2);
  return r2 > 3 && s2 && Object.defineProperty(t2, i2, s2), s2;
};
let CU = wU = class extends wI {
  constructor() {
    super(), this.indent = false, this.selectionMode = "None", this.separators = "All", this.growing = "None", this.loading = false, this.loadingDelay = 1e3, this.accessibleRole = "List", this._inViewport = false, this._loadMoreActive = false, this._previouslyFocusedItem = null, this._forwardingFocus = false, this.resizeListenerAttached = false, this.listEndObserved = false, this._itemNavigation = new SM(this, { skipItemsSize: 10, navigationMode: xM.Vertical, getItemsCallback: () => this.getEnabledItems() }), this._handleResize = this.checkListInViewport.bind(this), this._handleResize = this.checkListInViewport.bind(this), this.initialIntersection = true, this.onItemFocusedBound = this.onItemFocused.bind(this), this.onForwardAfterBound = this.onForwardAfter.bind(this), this.onForwardBeforeBound = this.onForwardBefore.bind(this), this.onItemTabIndexChangeBound = this.onItemTabIndexChange.bind(this);
  }
  get listItems() {
    return this.getItems();
  }
  onEnterDOM() {
    _N(this);
  }
  onExitDOM() {
    this.unobserveListEnd(), this.resizeListenerAttached = false, kk.deregister(this.getDomRef(), this._handleResize), gN(this);
  }
  onBeforeRendering() {
    this.detachGroupHeaderEvents(), this.prepareListItems();
  }
  onAfterRendering() {
    this.attachGroupHeaderEvents(), this.growsOnScroll ? this.observeListEnd() : this.listEndObserved && this.unobserveListEnd(), this.grows && (this.checkListInViewport(), this.attachForResize());
  }
  attachGroupHeaderEvents() {
    this.getItems().forEach((e6) => {
      e6.hasAttribute("ui5-li-group-header") && (e6.addEventListener("ui5-_focused", this.onItemFocusedBound), e6.addEventListener("ui5-_forward-after", this.onForwardAfterBound), e6.addEventListener("ui5-_forward-before", this.onForwardBeforeBound), e6.addEventListener("ui5-_tabindex-change", this.onItemTabIndexChangeBound));
    });
  }
  detachGroupHeaderEvents() {
    this.getItems().forEach((e6) => {
      e6.hasAttribute("ui5-li-group-header") && (e6.removeEventListener("ui5-_focused", this.onItemFocusedBound), e6.removeEventListener("ui5-_forward-after", this.onForwardAfterBound), e6.removeEventListener("ui5-_forward-before", this.onForwardBeforeBound), e6.removeEventListener("ui5-_tabindex-change", this.onItemTabIndexChangeBound));
    });
  }
  attachForResize() {
    this.resizeListenerAttached || (this.resizeListenerAttached = true, kk.register(this.getDomRef(), this._handleResize));
  }
  get shouldRenderH1() {
    return !this.header.length && this.headerText;
  }
  get headerID() {
    return `${this._id}-header`;
  }
  get modeLabelID() {
    return `${this._id}-modeLabel`;
  }
  get listEndDOM() {
    return this.shadowRoot.querySelector(".ui5-list-end-marker");
  }
  get dropIndicatorDOM() {
    return this.shadowRoot.querySelector("[ui5-drop-indicator]");
  }
  get hasData() {
    return 0 !== this.getItems().length;
  }
  get showBusyIndicatorOverlay() {
    return !this.growsWithButton && this.loading;
  }
  get showNoDataText() {
    return !this.hasData && this.noDataText;
  }
  get isDelete() {
    return this.selectionMode === CN.Delete;
  }
  get isSingleSelect() {
    return [CN.Single, CN.SingleStart, CN.SingleEnd, CN.SingleAuto].includes(this.selectionMode);
  }
  get isMultiple() {
    return this.selectionMode === CN.Multiple;
  }
  get ariaLabelledBy() {
    if (this.accessibleNameRef || this.accessibleName) return;
    const e6 = [];
    return (this.isMultiple || this.isSingleSelect || this.isDelete) && e6.push(this.modeLabelID), this.shouldRenderH1 && e6.push(this.headerID), e6.length ? e6.join(" ") : void 0;
  }
  get ariaLabelTxt() {
    return cR(this);
  }
  get ariaLabelModeText() {
    if (this.hasData) {
      if (this.isMultiple) return wU.i18nBundle.getText(IB);
      if (this.isSingleSelect) return wU.i18nBundle.getText(TB);
      if (this.isDelete) return wU.i18nBundle.getText(MB);
    }
    return "";
  }
  get grows() {
    return this.growing !== EN.None;
  }
  get growsOnScroll() {
    return this.growing === EN.Scroll;
  }
  get growsWithButton() {
    return this.growing === EN.Button;
  }
  get _growingButtonText() {
    return this.growingButtonText || wU.i18nBundle.getText(NB);
  }
  get listAccessibleRole() {
    return this.accessibleRole.toLowerCase();
  }
  get classes() {
    return { root: { "ui5-list-root": true } };
  }
  prepareListItems() {
    const e6 = this.getItemsForProcessing();
    e6.forEach((t2, i2) => {
      const n2 = i2 === e6.length - 1, o2 = this.separators === kN.All || this.separators === kN.Inner && !n2;
      t2.hasConfigurableMode && (t2._selectionMode = this.selectionMode), t2.hasBorder = o2;
    });
  }
  async observeListEnd() {
    this.listEndObserved || (await LS(), this.getIntersectionObserver().observe(this.listEndDOM), this.listEndObserved = true);
  }
  unobserveListEnd() {
    this.growingIntersectionObserver && (this.growingIntersectionObserver.disconnect(), this.growingIntersectionObserver = null, this.listEndObserved = false);
  }
  onInteresection(e6) {
    this.initialIntersection ? this.initialIntersection = false : e6.forEach((e7) => {
      e7.isIntersecting && ((e8, t2) => {
        wN && clearTimeout(wN), wN = setTimeout(() => {
          wN = null, e8();
        }, t2);
      })(this.loadMore.bind(this), 250);
    });
  }
  onSelectionRequested(e6) {
    const t2 = this.getSelectedItems();
    let i2 = false;
    if (this.selectionMode !== CN.None && this[`handle${this.selectionMode}`] && (i2 = this[`handle${this.selectionMode}`](e6.detail.item, !!e6.detail.selected)), i2) {
      !this.fireDecoratorEvent("selection-change", { selectedItems: this.getSelectedItems(), previouslySelectedItems: t2, selectionComponentPressed: e6.detail.selectionComponentPressed, targetItem: e6.detail.item, key: e6.detail.key }) && this._revertSelection(t2);
    }
  }
  handleSingle(e6) {
    return !e6.selected && (this.deselectSelectedItems(), e6.selected = true, true);
  }
  handleSingleStart(e6) {
    return this.handleSingle(e6);
  }
  handleSingleEnd(e6) {
    return this.handleSingle(e6);
  }
  handleSingleAuto(e6) {
    return this.handleSingle(e6);
  }
  handleMultiple(e6, t2) {
    return e6.selected = t2, true;
  }
  handleDelete(e6) {
    return this.fireDecoratorEvent("item-delete", { item: e6 }), true;
  }
  deselectSelectedItems() {
    this.getSelectedItems().forEach((e6) => {
      e6.selected = false;
    });
  }
  getSelectedItems() {
    return this.getItems().filter((e6) => e6.selected);
  }
  getEnabledItems() {
    return this.getItems().filter((e6) => e6._focusable);
  }
  getItems() {
    const e6 = [];
    return this.getSlottedNodes("items").forEach((t2) => {
      if ("isListItemGroup" in t2) {
        const i2 = [t2.groupHeaderItem, ...t2.items].filter(Boolean);
        e6.push(...i2);
      } else e6.push(t2);
    }), e6;
  }
  getItemsForProcessing() {
    return this.getItems();
  }
  _revertSelection(e6) {
    this.getItems().forEach((t2) => {
      const i2 = -1 !== e6.indexOf(t2), n2 = t2.shadowRoot.querySelector(".ui5-li-multisel-cb"), o2 = t2.shadowRoot.querySelector(".ui5-li-singlesel-radiobtn");
      t2.selected = i2, n2 ? n2.checked = i2 : o2 && (o2.checked = i2);
    });
  }
  _onkeydown(e6) {
    ((e7) => yM(e7, true, false, false))(e6) ? this._moveItem(e6.target, e6) : uM(e6) && this._handleTabNext(e6);
  }
  _moveItem(e6, t2) {
    if (!e6 || !e6.movable) return;
    const i2 = ((e7, t3, i3) => {
      let n3 = e7.indexOf(t3);
      const o2 = [];
      switch (i3.key) {
        case "ArrowLeft":
        case "ArrowUp":
          n3--, n3 >= 0 && o2.push({ element: e7[n3], placement: fN.Before });
          break;
        case "ArrowRight":
        case "ArrowDown":
          n3++, n3 < e7.length && o2.push({ element: e7[n3], placement: fN.After });
          break;
        case "Home":
          e7.forEach((e8) => {
            o2.push({ element: e8, placement: fN.Before });
          });
          break;
        case "End":
          e7.reverse().forEach((e8) => {
            o2.push({ element: e8, placement: fN.After });
          });
      }
      return o2;
    })(this.items, e6, t2);
    if (!i2.length) return;
    t2.preventDefault();
    const n2 = i2.find(({ element: i3, placement: n3 }) => !this.fireDecoratorEvent("move-over", { originalEvent: t2, source: { element: e6 }, destination: { element: i3, placement: n3 } }));
    n2 && (this.fireDecoratorEvent("move", { originalEvent: t2, source: { element: e6 }, destination: { element: n2.element, placement: n2.placement } }), e6.focus());
  }
  _onLoadMoreKeydown(e6) {
    jI(e6) && (e6.preventDefault(), this._loadMoreActive = true), WI(e6) && (this._onLoadMoreClick(), this._loadMoreActive = true), uM(e6) && this.focusAfterElement(), dM(e6) && (this.getPreviouslyFocusedItem() ? this.focusPreviouslyFocusedItem() : this.focusFirstItem(), e6.preventDefault());
  }
  _onLoadMoreKeyup(e6) {
    jI(e6) && this._onLoadMoreClick(), this._loadMoreActive = false;
  }
  _onLoadMoreMousedown() {
    this._loadMoreActive = true;
  }
  _onLoadMoreMouseup() {
    this._loadMoreActive = false;
  }
  _onLoadMoreClick() {
    this.loadMore();
  }
  checkListInViewport() {
    this._inViewport = ((e6) => {
      const t2 = e6.getBoundingClientRect();
      return t2.top >= 0 && t2.left >= 0 && t2.bottom <= (window.innerHeight || document.documentElement.clientHeight) && t2.right <= (window.innerWidth || document.documentElement.clientWidth);
    })(this.getDomRef());
  }
  loadMore() {
    this.fireDecoratorEvent("load-more");
  }
  _handleTabNext(e6) {
    yN(e6.target);
  }
  _onfocusin(e6) {
    const t2 = yN(e6.target);
    if (this.isForwardElement(t2)) {
      if (!this.getPreviouslyFocusedItem()) return this.growsWithButton && this.isForwardAfterElement(t2) ? this.focusGrowingButton() : this.focusFirstItem(), void e6.stopImmediatePropagation();
      if (!this.getForwardingFocus()) {
        if (this.growsWithButton && this.isForwardAfterElement(t2)) return this.focusGrowingButton(), void e6.stopImmediatePropagation();
        this.focusPreviouslyFocusedItem(), e6.stopImmediatePropagation();
      }
      this.setForwardingFocus(false);
    } else e6.stopImmediatePropagation();
  }
  _ondragenter(e6) {
    e6.preventDefault();
  }
  _ondragleave(e6) {
    e6.relatedTarget instanceof Node && this.shadowRoot.contains(e6.relatedTarget) || (this.dropIndicatorDOM.targetReference = null);
  }
  _ondragover(e6) {
    const t2 = mN();
    if (!(e6.target instanceof HTMLElement && t2)) return;
    const i2 = bN(this.items, e6.clientY, vN.Vertical);
    if (!i2) return void (this.dropIndicatorDOM.targetReference = null);
    let n2 = i2.placements;
    i2.element === t2 && (n2 = n2.filter((e7) => e7 !== fN.On));
    n2.some((n3) => !this.fireDecoratorEvent("move-over", { originalEvent: e6, source: { element: t2 }, destination: { element: i2.element, placement: n3 } }) && (e6.preventDefault(), this.dropIndicatorDOM.targetReference = i2.element, this.dropIndicatorDOM.placement = n3, true)) || (this.dropIndicatorDOM.targetReference = null);
  }
  _ondrop(e6) {
    e6.preventDefault();
    const t2 = mN();
    this.fireDecoratorEvent("move", { originalEvent: e6, source: { element: t2 }, destination: { element: this.dropIndicatorDOM.targetReference, placement: this.dropIndicatorDOM.placement } }), this.dropIndicatorDOM.targetReference = null, t2.focus();
  }
  isForwardElement(e6) {
    const t2 = e6.id, i2 = this.getBeforeElement();
    return !!(this._id === t2 || i2 && i2.id === t2) || this.isForwardAfterElement(e6);
  }
  isForwardAfterElement(e6) {
    const t2 = e6.id, i2 = this.getAfterElement();
    return i2 && i2.id === t2;
  }
  onItemTabIndexChange(e6) {
    const t2 = e6.target;
    this._itemNavigation.setCurrentItem(t2);
  }
  onItemFocused(e6) {
    const t2 = e6.target;
    if (e6.stopPropagation(), this._itemNavigation.setCurrentItem(t2), this.fireDecoratorEvent("item-focused", { item: t2 }), this.selectionMode === CN.SingleAuto) {
      const i2 = { item: t2, selectionComponentPressed: false, selected: true, key: e6.detail.key };
      this.onSelectionRequested({ detail: i2 });
    }
  }
  onItemPress(e6) {
    const t2 = e6.detail.item;
    if (this.fireDecoratorEvent("item-click", { item: t2 }) && this.selectionMode !== CN.Delete) {
      const i2 = { item: t2, selectionComponentPressed: false, selected: !t2.selected, key: e6.detail.key };
      this.onSelectionRequested({ detail: i2 });
    }
  }
  onItemClose(e6) {
    var _a3;
    const t2 = e6.target;
    ((t2 == null ? void 0 : t2.hasAttribute("ui5-li-notification")) || (t2 == null ? void 0 : t2.hasAttribute("ui5-li-notification-group"))) && this.fireDecoratorEvent("item-close", { item: (_a3 = e6.detail) == null ? void 0 : _a3.item });
  }
  onItemToggle(e6) {
    this.fireDecoratorEvent("item-toggle", { item: e6.detail.item });
  }
  onForwardBefore(e6) {
    this.setPreviouslyFocusedItem(e6.target), this.focusBeforeElement(), e6.stopPropagation();
  }
  onForwardAfter(e6) {
    this.setPreviouslyFocusedItem(e6.target), this.growsWithButton ? (this.focusGrowingButton(), e6.preventDefault()) : this.focusAfterElement(), e6.stopPropagation();
  }
  focusBeforeElement() {
    this.setForwardingFocus(true), this.getBeforeElement().focus();
  }
  focusAfterElement() {
    this.setForwardingFocus(true), this.getAfterElement().focus();
  }
  focusGrowingButton() {
    const e6 = this.getGrowingButton();
    e6 && e6.focus();
  }
  getGrowingButton() {
    return this.shadowRoot.querySelector(`[id="${this._id}-growing-btn"]`);
  }
  focusFirstItem() {
    const e6 = this.getFirstItem((e7) => e7._focusable);
    e6 && e6.focus();
  }
  focusPreviouslyFocusedItem() {
    const e6 = this.getPreviouslyFocusedItem();
    e6 && e6.focus();
  }
  focusFirstSelectedItem() {
    const e6 = this.getFirstItem((e7) => e7.selected && e7._focusable);
    e6 && e6.focus();
  }
  focusItem(e6) {
    this._itemNavigation.setCurrentItem(e6), e6.focus();
  }
  onFocusRequested(e6) {
    setTimeout(() => {
      this.setPreviouslyFocusedItem(e6.target), this.focusPreviouslyFocusedItem();
    }, 0);
  }
  setForwardingFocus(e6) {
    this._forwardingFocus = e6;
  }
  getForwardingFocus() {
    return this._forwardingFocus;
  }
  setPreviouslyFocusedItem(e6) {
    this._previouslyFocusedItem = e6;
  }
  getPreviouslyFocusedItem() {
    return this._previouslyFocusedItem;
  }
  getFirstItem(e6) {
    const t2 = this.getItems();
    let i2 = null;
    if (!e6) return t2.length ? t2[0] : null;
    for (let n2 = 0; n2 < t2.length; n2++) if (e6(t2[n2])) {
      i2 = t2[n2];
      break;
    }
    return i2;
  }
  getAfterElement() {
    return this._afterElement || (this._afterElement = this.shadowRoot.querySelector(`[id="${this._id}-after"]`)), this._afterElement;
  }
  getBeforeElement() {
    return this._beforeElement || (this._beforeElement = this.shadowRoot.querySelector(`[id="${this._id}-before"]`)), this._beforeElement;
  }
  getIntersectionObserver() {
    return this.growingIntersectionObserver || (this.growingIntersectionObserver = new IntersectionObserver(this.onInteresection.bind(this), { root: null, rootMargin: "0px", threshold: 1 })), this.growingIntersectionObserver;
  }
};
xU([SI()], CU.prototype, "headerText", void 0), xU([SI()], CU.prototype, "footerText", void 0), xU([SI({ type: Boolean })], CU.prototype, "indent", void 0), xU([SI()], CU.prototype, "selectionMode", void 0), xU([SI()], CU.prototype, "noDataText", void 0), xU([SI()], CU.prototype, "separators", void 0), xU([SI()], CU.prototype, "growing", void 0), xU([SI()], CU.prototype, "growingButtonText", void 0), xU([SI({ type: Boolean })], CU.prototype, "loading", void 0), xU([SI({ type: Number })], CU.prototype, "loadingDelay", void 0), xU([SI()], CU.prototype, "accessibleName", void 0), xU([SI()], CU.prototype, "accessibleNameRef", void 0), xU([SI()], CU.prototype, "accessibleRole", void 0), xU([SI({ type: Boolean })], CU.prototype, "_inViewport", void 0), xU([SI({ type: Boolean })], CU.prototype, "_loadMoreActive", void 0), xU([TI({ type: HTMLElement, default: true, invalidateOnChildChange: true })], CU.prototype, "items", void 0), xU([TI()], CU.prototype, "header", void 0), xU([HM("@ui5/webcomponents")], CU, "i18nBundle", void 0), CU = wU = xU([CI({ tag: "ui5-list", fastNavigation: true, renderer: UM, template: function(e6, t2, i2) {
  return i2 ? NM`<div class="${DM(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${FM(this.onItemPress)} @ui5-close=${FM(this.onItemClose)} @ui5-toggle=${FM(this.onItemToggle)} @ui5-_request-tabindex-change=${FM(this.onItemTabIndexChange)} @ui5-_focused=${FM(this.onItemFocused)} @ui5-_forward-after=${FM(this.onForwardAfter)} @ui5-_forward-before=${FM(this.onForwardBefore)} @ui5-_selection-requested=${FM(this.onSelectionRequested)} @ui5-_focus-requested=${FM(this.onFocusRequested)}><${zM("ui5-busy-indicator", t2, i2)} id="${FM(this._id)}-busyIndicator" delay="${FM(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length ? $N.call(this, e6, t2, i2) : void 0}${this.shouldRenderH1 ? WN.call(this, e6, t2, i2) : void 0}${this.hasData ? jN.call(this, e6, t2, i2) : void 0}<span id="${FM(this._id)}-modeLabel" class="ui5-hidden-text">${FM(this.ariaLabelModeText)}</span><ul id="${FM(this._id)}-listUl" class="ui5-list-ul" role="${FM(this.listAccessibleRole)}" aria-label="${FM(this.ariaLabelTxt)}" aria-labelledby="${FM(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText ? XN.call(this, e6, t2, i2) : void 0}</ul>${this.growsWithButton ? YN.call(this, e6, t2, i2) : void 0}${this.footerText ? ZN.call(this, e6, t2, i2) : void 0}${this.hasData ? JN.call(this, e6, t2, i2) : void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><${zM("ui5-drop-indicator", t2, i2)} orientation="Horizontal" .ownerReference="${FM(this)}"></${zM("ui5-drop-indicator", t2, i2)}></${zM("ui5-busy-indicator", t2, i2)}></div> ` : NM`<div class="${DM(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${FM(this.onItemPress)} @ui5-close=${FM(this.onItemClose)} @ui5-toggle=${FM(this.onItemToggle)} @ui5-_request-tabindex-change=${FM(this.onItemTabIndexChange)} @ui5-_focused=${FM(this.onItemFocused)} @ui5-_forward-after=${FM(this.onForwardAfter)} @ui5-_forward-before=${FM(this.onForwardBefore)} @ui5-_selection-requested=${FM(this.onSelectionRequested)} @ui5-_focus-requested=${FM(this.onFocusRequested)}><ui5-busy-indicator id="${FM(this._id)}-busyIndicator" delay="${FM(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length ? $N.call(this, e6, t2, i2) : void 0}${this.shouldRenderH1 ? WN.call(this, e6, t2, i2) : void 0}${this.hasData ? jN.call(this, e6, t2, i2) : void 0}<span id="${FM(this._id)}-modeLabel" class="ui5-hidden-text">${FM(this.ariaLabelModeText)}</span><ul id="${FM(this._id)}-listUl" class="ui5-list-ul" role="${FM(this.listAccessibleRole)}" aria-label="${FM(this.ariaLabelTxt)}" aria-labelledby="${FM(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText ? XN.call(this, e6, t2, i2) : void 0}</ul>${this.growsWithButton ? YN.call(this, e6, t2, i2) : void 0}${this.footerText ? ZN.call(this, e6, t2, i2) : void 0}${this.hasData ? JN.call(this, e6, t2, i2) : void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><ui5-drop-indicator orientation="Horizontal" .ownerReference="${FM(this)}"></ui5-drop-indicator></ui5-busy-indicator></div> `;
}, styles: [eO, vk()], dependencies: [qN, BN, yU] }), EI("item-click", { detail: { item: { type: HTMLElement } }, bubbles: true, cancelable: true }), EI("item-close", { detail: { item: { type: HTMLElement } }, bubbles: true }), EI("item-toggle", { detail: { item: { type: HTMLElement } }, bubbles: true }), EI("item-delete", { detail: { item: { type: HTMLElement } }, bubbles: true }), EI("selection-change", { detail: { selectedItems: { type: Array }, previouslySelectedItems: { type: Array }, targetItem: { type: HTMLElement }, selectionComponentPressed: { type: Boolean }, key: { type: String } }, bubbles: true, cancelable: true }), EI("load-more", { bubbles: true }), EI("item-focused", { detail: { item: { type: HTMLElement } }, bubbles: true }), EI("move-over", { detail: { originalEvent: { type: Event }, source: { type: Object }, destination: { type: Object } }, bubbles: true, cancelable: true }), EI("move", { detail: { originalEvent: { type: Event }, source: { type: Object }, destination: { type: Object } }, bubbles: true })], CU), CU.define();
var SU = Object.defineProperty, EU = Object.getOwnPropertyDescriptor, TU = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? EU(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && SU(t2, i2, r2), r2;
};
let IU = class extends le {
  constructor() {
    super(...arguments), this.isColumnMode = true;
  }
  render() {
    return U`
      <div
        id="layout"
        class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}"
      >
        <div class="row">
          <div class="alignCenter">
            <ui5-label level="H1">&Sigma;:</ui5-label>
            <ui5-label>
              ${this.measurementTool.measuredLength.toFixed(1)}
            </ui5-label>
            <ui5-label> mm</ui5-label>
          </div>
        </div>
        <div class="row">
          <div class="alignCenter">
            <ui5-button @click="${this._handleNewPathClicked}">
              ${this.measurementTool.numPoints > 0 ? "Reset" : "New"}
            </ui5-button>
          </div>
          <div class="alignCenter">
            <ui5-button
              ?disabled="${!this.measurementTool.isEditModeActive && 0 == this.measurementTool.numPoints}"
              @click="${this._handleUpdateEditStateClicked}"
            >
              ${this.measurementTool.isEditModeActive ? "Stop" : "Continue"}
            </ui5-button>
          </div>
        </div>
      </div>
    `;
  }
  firstUpdated() {
    this.measurementTool.on("update-requested", () => this.requestUpdate());
  }
  updated(e6) {
    super.updated(e6);
  }
  _handleNewPathClicked() {
    this.measurementTool.resetPoints(), this.measurementTool.isEditModeActive = true, this.requestUpdate();
  }
  _handleUpdateEditStateClicked() {
    this.measurementTool.isEditModeActive = !this.measurementTool.isEditModeActive, this.requestUpdate();
  }
};
IU.styles = r`
    :host {
      min-width: 15em;
      height: 100%;
      width: 100%;
    }

    #layout.ver-orientation {
      flex-direction: column;
      width: 100%;
    }

    #layout.hor-orientation {
      flex-direction: row;
      height: 100%;
    }

    #layout {
      position: relative;
      min-width: 15em;
      display: flex;
      align-items: stretch;
      flex-direction: column;
      gap: 1rem;
    }

    .row {
      display: flex;
      flex: 1;
      flex-direction: row;
      gap: 1rem;
      justify-content: space-between;
      width: 100%;
    }

    .alignCenter {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    ui5-button {
      padding: 0.25rem;
    }

    ui5-label {
      --sapFontSize: 15;
    }
  `, TU([de({ type: Boolean })], IU.prototype, "isColumnMode", 2), TU([de({ type: Object })], IU.prototype, "measurementTool", 2), IU = TU([he("measurement-tool")], IU);
var MU = Object.defineProperty, BU = Object.getOwnPropertyDescriptor, RU = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? BU(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && MU(t2, i2, r2), r2;
};
const kU = { doubleview: () => pC('<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view">\n	<g>	\n		<path d="M28.347,56.693h226.771v4h-226.77z"/>\n		<path d="M28.347,56.693v170.079h4v-170.079z"/>\n		<path d="M255.118,226.772h-226.771v4h226.77z"/>\n		<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n	</g>\n	<g>\n		<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n			c-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945\n			c-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791\n			c1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112\n			h-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>\n		<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427\n			c1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426\n			c-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688\n			s2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478\n			L100.871,151.478z"/>\n	</g>\n	<g>\n		<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246\n			c0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002\n			c-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645\n			s5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931\n			c1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245\n			V152.283z"/>\n		<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436\n			c1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437\n			c-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689\n			c1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23\n			L214.226,152.23z"/>\n	</g>\n	<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>\n</g>\n'), "doubleview-mobile": () => pC('<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_mobile">\n		<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>\n	<g>\n		<path d="M132.829,84.75c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057c-1.177,1.863-2.969,3.365-5.373,4.505\n			c-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946c-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848\n			c1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791c1.79,0,3.213-0.334,4.267-0.999\n			c1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111h-14.541v-8.061h26.657v6.533\n			l-7.639,8.217C128.853,81.617,131.197,82.873,132.829,84.75z"/>\n		<path d="M140.547,66.233h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427\n			c1.722,2.775,2.582,6.023,2.582,9.746c0,3.723-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426\n			c-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V66.233z M157.564,94.786c3.16,0,5.697-0.896,7.611-2.687s2.871-4.267,2.871-7.428\n			c0-3.161-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229L157.564,94.786L157.564,94.786z"/>\n	</g>\n	<g>\n		<path d="M135.532,208.976v8.281H106.78v-6.541l13.821-12.924c1.337-1.268,2.233-2.349,2.691-3.246\n			c0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002\n			c-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.392,3.464-4.273,6.066-5.646\n			c2.602-1.372,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.163,0.916,3.852,2.227,5.063,3.932\n			c1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.776-2.524,3.791-4.985,6.041l-6.965,6.436\n			H135.532z"/>\n		<path d="M140.493,180.33h17.461c4.045,0,7.631,0.756,10.762,2.27c3.131,1.512,5.559,3.658,7.281,6.436\n			c1.724,2.78,2.584,6.033,2.584,9.762s-0.86,6.98-2.584,9.761c-1.724,2.778-4.15,4.923-7.281,6.437\n			c-3.131,1.512-6.717,2.268-10.762,2.268h-17.461V180.33z M157.535,208.923c3.164,0,5.705-0.896,7.623-2.69\n			c1.916-1.794,2.873-4.271,2.873-7.438c0-3.166-0.957-5.645-2.873-7.438c-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597\n			V208.923z"/>\n	</g>\n	<line stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>\n</g>'), singleview: () => pC('<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g>	\n	<path d="M28.347,56.693h226.771v4h-226.77z"/>\n	<path d="M28.347,56.693v170.079h4v-170.079z"/>\n	<path d="M255.118,226.772h-226.771v4h226.77z"/>\n	<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n</g>\n<g>\n	<path d="M84.09,100.5c1.634,1.879,2.45,4.154,2.45,6.822c0,2.179-0.588,4.198-1.765,6.058c-1.177,1.863-2.968,3.364-5.373,4.505\n		c-2.406,1.141-5.383,1.712-8.93,1.712c-2.6,0-5.172-0.316-7.718-0.949c-2.547-0.631-4.75-1.527-6.612-2.686l3.793-7.851\n		c1.44,0.985,3.063,1.739,4.873,2.266c1.809,0.526,3.59,0.791,5.348,0.791c1.791,0,3.213-0.333,4.267-1.002\n		c1.054-0.666,1.58-1.614,1.58-2.845c0-2.388-1.879-3.582-5.637-3.582h-4.372v-6.586l6.585-7.111h-14.54v-8.061h26.657v6.533\n		l-7.639,8.218C80.113,97.366,82.458,98.622,84.09,100.5z"/>\n	<path d="M91.808,81.982h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.269,6.427\n		c1.721,2.775,2.581,6.023,2.581,9.746s-0.86,6.972-2.581,9.746c-1.72,2.775-4.145,4.918-7.269,6.427\n		c-3.126,1.511-6.709,2.266-10.747,2.266H91.808V81.982z M108.824,110.536c3.161,0,5.697-0.895,7.612-2.686\n		c1.914-1.792,2.871-4.268,2.871-7.428c0-3.161-0.957-5.637-2.871-7.428c-1.915-1.792-4.451-2.687-7.612-2.687h-6.585v20.229\n		H108.824z"/>\n</g>\n<g>\n	<line stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721" x1="36.324" y1="220.789" x2="249.128" y2="61.185"/>\n</g>\n<g>\n	<path d="M184.332,193.225v8.282H155.58v-6.541l13.821-12.926c1.337-1.266,2.233-2.349,2.69-3.244\n		c0.457-0.897,0.686-1.803,0.686-2.717c0-1.194-0.402-2.127-1.212-2.797c-0.81-0.668-1.987-1.004-3.535-1.004\n		c-1.37,0-2.629,0.309-3.771,0.924c-1.145,0.618-2.084,1.506-2.822,2.666l-7.755-4.326c1.44-2.392,3.464-4.272,6.065-5.646\n		c2.604-1.371,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.164,0.916,3.852,2.226,5.063,3.932\n		c1.216,1.706,1.824,3.686,1.824,5.934c0,2.004-0.433,3.896-1.295,5.672c-0.861,1.776-2.523,3.791-4.984,6.041l-6.965,6.437H184.332\n		L184.332,193.225z"/>\n	<path d="M189.292,164.58h17.461c4.045,0,7.632,0.756,10.763,2.269c3.13,1.513,5.558,3.657,7.28,6.437\n		c1.724,2.778,2.584,6.031,2.584,9.76c0,3.729-0.86,6.981-2.584,9.762c-1.724,2.777-4.15,4.923-7.28,6.436\n		c-3.131,1.512-6.718,2.269-10.763,2.269h-17.461V164.58z M206.333,193.171c3.164,0,5.705-0.896,7.621-2.689\n		c1.918-1.794,2.875-4.271,2.875-7.439c0-3.164-0.957-5.644-2.875-7.438c-1.916-1.794-4.457-2.691-7.621-2.691h-6.599v20.26h6.599\n		V193.171z"/>\n</g>\n'), "singleview-mobile": () => pC('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g>\n    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">\n        <path d="M84.09,100.5C85.724,102.379 86.54,104.654 86.54,107.322C86.54,109.501 85.952,111.52 84.775,113.38C83.598,115.243 81.807,116.744 79.402,117.885C76.996,119.026 74.019,119.597 70.472,119.597C67.872,119.597 65.3,119.281 62.754,118.648C60.207,118.017 58.004,117.121 56.142,115.962L59.935,108.111C61.375,109.096 62.998,109.85 64.808,110.377C66.617,110.903 68.398,111.168 70.156,111.168C71.947,111.168 73.369,110.835 74.423,110.166C75.477,109.5 76.003,108.552 76.003,107.321C76.003,104.933 74.124,103.739 70.366,103.739L65.994,103.739L65.994,97.153L72.579,90.042L58.039,90.042L58.039,81.981L84.696,81.981L84.696,88.514L77.057,96.732C80.113,97.366 82.458,98.622 84.09,100.5Z" style="fill-rule:nonzero;"/>\n    </g>\n    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">\n        <path d="M91.808,81.982L109.246,81.982C113.284,81.982 116.867,82.738 119.993,84.248C123.117,85.758 125.542,87.901 127.262,90.675C128.983,93.45 129.843,96.698 129.843,100.421C129.843,104.144 128.983,107.393 127.262,110.167C125.542,112.942 123.117,115.085 119.993,116.594C116.867,118.105 113.284,118.86 109.246,118.86L91.808,118.86L91.808,81.982ZM108.824,110.536C111.985,110.536 114.521,109.641 116.436,107.85C118.35,106.058 119.307,103.582 119.307,100.422C119.307,97.261 118.35,94.785 116.436,92.994C114.521,91.202 111.985,90.307 108.824,90.307L102.239,90.307L102.239,110.536L108.824,110.536Z" style="fill-rule:nonzero;"/>\n    </g>\n</g>\n<g transform="matrix(0.992491,-0.32133,0.25458,0.992398,-36.1177,47.6794)">\n    <g>\n        <path d="M36.324,220.789L249.128,61.185" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721"/>\n    </g>\n</g>\n<g>\n    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">\n        <path d="M184.332,193.225L184.332,201.507L155.58,201.507L155.58,194.966L169.401,182.04C170.738,180.774 171.634,179.691 172.091,178.796C172.548,177.899 172.777,176.993 172.777,176.079C172.777,174.885 172.375,173.952 171.565,173.282C170.755,172.614 169.578,172.278 168.03,172.278C166.66,172.278 165.401,172.587 164.259,173.202C163.114,173.82 162.175,174.708 161.437,175.868L153.682,171.542C155.122,169.15 157.146,167.27 159.747,165.896C162.351,164.525 165.427,163.838 168.979,163.838C171.792,163.838 174.282,164.295 176.444,165.209C178.608,166.125 180.296,167.435 181.507,169.141C182.723,170.847 183.331,172.827 183.331,175.075C183.331,177.079 182.898,178.971 182.036,180.747C181.175,182.523 179.513,184.538 177.052,186.788L170.087,193.225L184.332,193.225Z" style="fill-rule:nonzero;"/>\n    </g>\n    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">\n        <path d="M189.292,164.58L206.753,164.58C210.798,164.58 214.385,165.336 217.516,166.849C220.646,168.362 223.074,170.506 224.796,173.286C226.52,176.064 227.38,179.317 227.38,183.046C227.38,186.775 226.52,190.027 224.796,192.808C223.072,195.585 220.646,197.731 217.516,199.244C214.385,200.756 210.798,201.513 206.753,201.513L189.292,201.513L189.292,164.58ZM206.333,193.171C209.497,193.171 212.038,192.275 213.954,190.482C215.872,188.688 216.829,186.211 216.829,183.043C216.829,179.879 215.872,177.399 213.954,175.605C212.038,173.811 209.497,172.914 206.333,172.914L199.734,172.914L199.734,193.174L206.333,193.174L206.333,193.171Z" style="fill-rule:nonzero;"/>\n    </g>\n</g>\n<g>\n    <rect x="56.693" y="28.347" width="170.079" height="226.771" stroke-width="4" fill="none"/>\n</g>\n'), "doubleview-synced": () => pC('<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_synced">\n	<g>	\n		<path d="M28.347,56.693h226.771v4h-226.77z"/>\n		<path d="M28.347,56.693v170.079h4v-170.079z"/>\n		<path d="M255.118,226.772h-226.771v4h226.77z"/>\n		<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n	</g>\n	<g>\n		<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n			c-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945\n			c-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791\n			c1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112\n			h-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>\n		<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427\n			c1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426\n			c-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688\n			s2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478\n			L100.871,151.478z"/>\n	</g>\n	<g>\n		<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246\n			c0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002\n			c-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645\n			s5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931\n			c1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245\n			V152.283z"/>\n		<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436\n			c1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437\n			c-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689\n			c1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23\n			L214.226,152.23z"/>\n	</g>\n	<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>\n	<path d="M171.183,87.604c-4.617-7.616-11.391-13.276-19.449-16.142c-9.447-3.359-19.521-2.491-28.371,2.445\n		c-8.85,4.936-15.413,13.347-18.481,23.685l8.746,3.109c2.31-7.78,7.25-14.11,13.911-17.827c6.661-3.715,14.245-4.369,21.354-1.84\n		c5.717,2.034,10.555,5.953,14.004,11.192l-7.537,4.204l10.929,7.769l10.935,7.771l0.679-14.248l0.684-14.244L171.183,87.604z"/>\n	<path d="M112.281,195.862c4.618,7.616,11.388,13.276,19.45,16.144c9.446,3.357,19.522,2.49,28.372-2.445\n		s15.413-13.348,18.479-23.686l-8.744-3.108c-2.31,7.78-7.25,14.11-13.91,17.825c-6.66,3.716-14.246,4.369-21.355,1.844\n		c-5.716-2.035-10.552-5.955-14.002-11.193l7.538-4.203l-10.931-7.77l-10.933-7.771l-0.679,14.246l-0.684,14.248L112.281,195.862z"\n		/>\n</g>\n'), "doubleview-synced-mobile": () => pC('<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_synced_mobile">\n		<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>\n	<g>\n		<path d="M132.829,70.578c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n			c-1.177,1.863-2.969,3.365-5.373,4.505c-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946\n			c-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848c1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791\n			c1.79,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111\n			h-14.541V52.06h26.657v6.533l-7.639,8.217C128.853,67.444,131.197,68.7,132.829,70.578z"/>\n		<path d="M140.547,52.06h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427\n			c1.722,2.775,2.582,6.023,2.582,9.746s-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426\n			c-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V52.06z M157.564,80.613c3.16,0,5.697-0.896,7.611-2.687\n			c1.914-1.791,2.871-4.267,2.871-7.428s-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229\n			L157.564,80.613L157.564,80.613z"/>\n	</g>\n	<g>\n		<path d="M135.532,223.15v8.282H106.78v-6.542l13.821-12.924c1.337-1.268,2.233-2.348,2.691-3.246\n			c0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002\n			c-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.391,3.464-4.273,6.066-5.646\n			c2.602-1.372,5.68-2.057,9.232-2.057c2.813,0,5.303,0.457,7.465,1.371c2.163,0.915,3.852,2.226,5.063,3.931\n			c1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.436\n			H135.532z"/>\n		<path d="M140.493,194.503h17.461c4.045,0,7.631,0.756,10.762,2.269s5.559,3.658,7.281,6.437c1.724,2.779,2.584,6.033,2.584,9.761\n			c0,3.729-0.86,6.981-2.584,9.761c-1.724,2.777-4.15,4.923-7.281,6.436s-6.717,2.269-10.762,2.269h-17.461V194.503z\n			 M157.535,223.097c3.164,0,5.705-0.896,7.623-2.69c1.916-1.794,2.873-4.271,2.873-7.438s-0.957-5.646-2.873-7.438\n			c-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597V223.097z"/>\n	</g>\n	<line  stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>\n	<path d="M195.861,171.183c7.616-4.617,13.276-11.391,16.143-19.449c3.359-9.447,2.492-19.521-2.444-28.371\n		c-4.937-8.85-13.349-15.413-23.685-18.481l-3.109,8.746c7.779,2.31,14.109,7.249,17.826,13.911\n		c3.716,6.661,4.369,14.245,1.841,21.354c-2.034,5.717-5.953,10.555-11.192,14.004l-4.203-7.537l-7.77,10.929l-7.771,10.935\n		l14.248,0.679l14.243,0.684L195.861,171.183z"/>\n	<path d="M87.603,112.282c-7.616,4.617-13.276,11.388-16.143,19.449c-3.358,9.446-2.49,19.522,2.445,28.372\n		c4.936,8.85,13.347,15.413,23.685,18.479l3.109-8.744c-7.78-2.31-14.11-7.25-17.826-13.91c-3.715-6.66-4.369-14.245-1.843-21.354\n		c2.035-5.717,5.955-10.553,11.193-14.002l4.204,7.538l7.769-10.932l7.771-10.933l-14.246-0.679l-14.247-0.685L87.603,112.282z"/>\n</g>\n'), rotation: () => pC('<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="Ebene_2_Kopie">\n\n	<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.347" y1="255.121" x2="28.347" y2="28.344"/>\n\n	<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="255.119" y2="255.121"/>\n\n	<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="221.982" y2="61.482"/>\n	<g>\n		<path d="M202.653,96.368l-7.829,7.829c4.909,5.954,8.646,12.978,10.756,20.852c8.142,30.384-10.805,61.953-42.229,70.373\n			l-3.644-13.592l-28.735,27.984l38.878,9.863l-3.643-13.596c37.303-9.994,59.748-47.629,50.031-83.89\n			C213.609,112.381,208.876,103.672,202.653,96.368z"/>\n		<path d="M177.707,90.202l8.084-8.083c-15.77-9.456-35.422-12.758-54.826-7.559c-17.677,4.736-32.636,15.802-42.119,31.156\n			l9.388,5.8c8-12.952,20.639-22.291,35.587-26.297C149.246,81.085,164.847,83.297,177.707,90.202z"/>\n	</g>\n</g>\n</svg>\n'), measure: () => pC('<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n\n<g>\n	<g>\n		<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="56.692" y1="204.288" x2="56.692" y2="232.538"/>\n		\n			<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="113.385" y1="204.288" x2="113.385" y2="232.538"/>\n		<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="170.08" y1="204.288" x2="170.08" y2="232.538"/>\n		\n			<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="141.732" y1="204.287" x2="141.732" y2="221.237"/>\n		<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="85.039" y1="204.287" x2="85.039" y2="221.237"/>\n		<g>\n			<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M216.394,246.657l-24.545-42.369H14.173v56.5\n				h226.772c0.127,0,0.25-0.008,0.375-0.01C231.4,260.901,221.707,255.827,216.394,246.657z"/>\n		</g>\n	</g>\n	<g>\n		<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="173.365" y1="59.376" x2="148.816" y2="73.501"/>\n		\n			<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="201.71" y1="108.308" x2="177.164" y2="122.434"/>\n		\n			<line fill="none"  stroke-width="10" stroke-miterlimit="10" x1="230.056" y1="157.242" x2="205.509" y2="171.368"/>\n		\n			<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="215.884" y1="132.773" x2="201.156" y2="141.25"/>\n		<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="187.539" y1="83.841" x2="172.808" y2="92.317"/>\n		<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M265.49,218.408L265.49,218.408L152.105,22.677\n			l-49.099,28.25l113.388,195.73c7.828,13.511,25.162,18.142,38.721,10.342C268.673,249.198,273.316,231.92,265.49,218.408z\n			 M240.945,246.663c-7.826,0-14.172-6.324-14.172-14.124c0-7.801,6.346-14.125,14.172-14.125c7.828,0,14.174,6.324,14.174,14.125\n			C255.119,240.338,248.773,246.663,240.945,246.663z"/>\n	</g>\n</g>\n'), environment3D: () => pC('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="surface1">\n    <g fill="none" stroke-width="50px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M2295,1430.47C2294.8,1429.26 2294.51,1428.1 2294.31,1426.95C2294.21,1426.36 2294.08,1425.69 2293.96,1425.1C2293.86,1424.6 2293.74,1424.01 2293.66,1423.54C2293.41,1422.38 2293.22,1421.19 2292.94,1420C2291.88,1415.51 2290.47,1410.96 2288.78,1406.45C2287.06,1401.87 2285.05,1397.3 2282.7,1392.72C2280.36,1388.17 2277.69,1383.63 2274.71,1379.05C2271.73,1374.5 2268.43,1369.95 2264.83,1365.36C2261.22,1360.83 2257.3,1356.31 2253.1,1351.81C2248.91,1347.32 2244.39,1342.81 2239.58,1338.37C2234.77,1333.92 2229.66,1329.53 2224.28,1325.18C2218.91,1320.8 2213.21,1316.46 2207.28,1312.21C2201.33,1307.95 2195.1,1303.7 2188.62,1299.54C2182.14,1295.39 2175.37,1291.28 2168.35,1287.26C2164.85,1285.24 2161.28,1283.26 2157.64,1281.27C2154.01,1279.32 2150.3,1277.33 2146.55,1275.4C2142.8,1273.48 2138.96,1271.57 2135.09,1269.67C2131.21,1267.78 2127.27,1265.92 2123.28,1264.09C2119.28,1262.23 2115.22,1260.38 2111.1,1258.6C2106.98,1256.77 2102.83,1255.02 2098.61,1253.23C2094.37,1251.48 2090.09,1249.73 2085.76,1248.03C2081.42,1246.31 2077.03,1244.64 2072.59,1243C2068.15,1241.33 2063.66,1239.71 2059.12,1238.12C2054.55,1236.51 2049.95,1234.95 2045.31,1233.41C2040.67,1231.85 2035.98,1230.37 2031.24,1228.87C2026.5,1227.39 2021.69,1225.93 2016.87,1224.53C2012.03,1223.09 2007.15,1221.68 2002.23,1220.32C1997.28,1218.97 1992.31,1217.67 1987.28,1216.38C1982.27,1215.07 1977.21,1213.8 1972.1,1212.59C1967.01,1211.37 1961.87,1210.16 1956.69,1208.99C1951.52,1207.83 1946.29,1206.73 1941.03,1205.65C1935.77,1204.55 1930.46,1203.49 1925.13,1202.45C1919.79,1201.43 1914.42,1200.51 1909.01,1199.57C1903.59,1198.63 1898.14,1197.73 1892.66,1196.85C1887.18,1195.99 1881.67,1195.15 1876.13,1194.38C1870.58,1193.57 1865,1192.87 1859.41,1192.16C1853.8,1191.46 1848.13,1190.76 1842.47,1190.14C1836.79,1189.53 1831.1,1188.94 1825.37,1188.42C1819.64,1187.86 1813.87,1187.38 1808.09,1186.94C1802.31,1186.48 1796.5,1186.08 1790.65,1185.73C1784.82,1185.35 1778.98,1185.03 1773.08,1184.74C1767.18,1184.45 1761.27,1184.22 1755.34,1184.04C1749.42,1183.87 1743.48,1183.72 1737.5,1183.64C1731.52,1183.53 1725.49,1183.5 1719.5,1183.5C1713.49,1183.5 1707.49,1183.55 1701.51,1183.64C1695.51,1183.72 1689.57,1183.87 1683.65,1184.04C1677.72,1184.22 1671.79,1184.45 1665.91,1184.76C1660.03,1185.03 1654.17,1185.31 1648.34,1185.7C1642.49,1186.08 1636.68,1186.48 1630.9,1186.94C1625.1,1187.38 1619.36,1187.86 1613.63,1188.42C1607.91,1188.94 1602.22,1189.52 1596.54,1190.14C1590.86,1190.76 1585.21,1191.44 1579.6,1192.16C1573.99,1192.86 1568.43,1193.57 1562.87,1194.38C1557.32,1195.15 1551.81,1195.99 1546.31,1196.87C1540.85,1197.73 1535.41,1198.63 1530,1199.57C1524.59,1200.53 1519.21,1201.48 1513.86,1202.49C1508.54,1203.49 1503.23,1204.55 1497.96,1205.67C1492.7,1206.73 1487.48,1207.83 1482.28,1208.99C1477.11,1210.17 1471.96,1211.37 1466.85,1212.59C1461.76,1213.82 1456.7,1215.11 1451.69,1216.39C1446.67,1217.67 1441.71,1219 1436.77,1220.36C1431.86,1221.71 1426.97,1223.09 1422.12,1224.53C1417.28,1225.94 1412.51,1227.39 1407.75,1228.87C1403.01,1230.37 1398.3,1231.86 1393.68,1233.41C1389.04,1234.96 1384.43,1236.53 1379.87,1238.15C1375.33,1239.72 1370.84,1241.35 1366.4,1243.02C1361.96,1244.66 1357.58,1246.33 1353.24,1248.05C1348.9,1249.75 1344.62,1251.5 1340.39,1253.25C1336.15,1255.02 1331.99,1256.78 1327.87,1258.6C1323.77,1260.4 1319.71,1262.24 1315.71,1264.1C1311.72,1265.93 1307.77,1267.8 1303.88,1269.69C1300.01,1271.58 1296.19,1273.48 1292.44,1275.4C1288.69,1277.33 1284.99,1279.33 1281.35,1281.29C1277.71,1283.26 1274.15,1285.29 1270.64,1287.31C1263.62,1291.3 1256.86,1295.41 1250.37,1299.56C1243.89,1303.73 1237.64,1307.95 1231.69,1312.23C1225.76,1316.44 1220.07,1320.84 1214.69,1325.2C1209.31,1329.56 1204.2,1333.93 1199.39,1338.37C1194.6,1342.83 1190.08,1347.33 1185.88,1351.84C1181.67,1356.32 1177.77,1360.84 1174.16,1365.38C1170.56,1369.96 1167.26,1374.51 1164.28,1379.07C1161.3,1383.65 1158.63,1388.18 1156.29,1392.78C1153.94,1397.3 1151.92,1401.89 1150.19,1406.47C1148.48,1410.97 1147.11,1415.52 1146.05,1420.03C1145.77,1421.19 1145.6,1422.38 1145.35,1423.5C1145.22,1424.12 1145.1,1424.79 1144.98,1425.36C1144.88,1425.88 1144.76,1426.44 1144.68,1426.93C1144.46,1428.1 1144.19,1429.26 1143.99,1430.48C1143.79,1431.76 1143.66,1433.12 1143.51,1434.49C1143.66,1435.86 1143.79,1437.25 1143.99,1438.55C1144.19,1439.75 1144.48,1440.87 1144.68,1442.05C1144.8,1442.62 1144.91,1443.29 1145.03,1443.88C1145.13,1444.41 1145.25,1445 1145.35,1445.46C1145.6,1446.6 1145.77,1447.8 1146.05,1449.01C1147.11,1453.49 1148.52,1458.03 1150.21,1462.53C1151.93,1467.13 1153.94,1471.7 1156.29,1476.28C1158.63,1480.82 1161.3,1485.35 1164.28,1489.97C1167.26,1494.49 1170.56,1499.07 1174.16,1503.64C1177.77,1508.16 1181.69,1512.69 1185.89,1517.2C1190.1,1521.68 1194.6,1526.17 1199.41,1530.63C1204.22,1535.12 1209.33,1539.46 1214.71,1543.82C1220.09,1548.2 1225.78,1552.54 1231.73,1556.78C1237.66,1561.06 1243.89,1565.31 1250.37,1569.46C1256.86,1573.63 1263.62,1577.72 1270.64,1581.74C1274.15,1583.73 1277.71,1585.75 1281.37,1587.71C1284.99,1589.68 1288.69,1591.67 1292.44,1593.58C1296.19,1595.51 1300.03,1597.42 1303.9,1599.3C1307.79,1601.19 1311.72,1603.08 1315.73,1604.91C1319.71,1606.74 1323.79,1608.62 1327.89,1610.39C1332.01,1612.24 1336.16,1613.97 1340.39,1615.74C1344.62,1617.5 1348.91,1619.25 1353.25,1620.95C1357.58,1622.66 1361.96,1624.35 1366.4,1626C1370.84,1627.65 1375.33,1629.28 1379.89,1630.9C1384.45,1632.49 1389.04,1634.05 1393.68,1635.6C1398.32,1637.16 1403.03,1638.64 1407.75,1640.1C1412.51,1641.63 1417.28,1643.04 1422.12,1644.48C1426.97,1645.91 1431.86,1647.33 1436.78,1648.68C1441.73,1650.03 1446.68,1651.37 1451.69,1652.62C1456.72,1653.94 1461.78,1655.19 1466.89,1656.41C1471.98,1657.64 1477.12,1658.85 1482.3,1659.98C1487.49,1661.19 1492.7,1662.24 1497.96,1663.33C1503.23,1664.45 1508.54,1665.51 1513.86,1666.55C1519.21,1667.57 1524.59,1668.47 1530,1669.41C1535.41,1670.35 1540.85,1671.28 1546.31,1672.13C1551.81,1672.99 1557.32,1673.81 1562.87,1674.63C1568.41,1675.4 1573.99,1676.11 1579.6,1676.83C1585.21,1677.55 1590.86,1678.23 1596.52,1678.87C1602.2,1679.49 1607.9,1680.04 1613.63,1680.59C1619.36,1681.13 1625.1,1681.63 1630.88,1682.07C1636.68,1682.49 1642.49,1682.92 1648.34,1683.29C1654.17,1683.66 1660.03,1683.99 1665.91,1684.25C1671.79,1684.55 1677.72,1684.75 1683.65,1684.94C1689.57,1685.14 1695.51,1685.23 1701.5,1685.36C1707.48,1685.44 1713.47,1685.5 1719.49,1685.5C1725.49,1685.5 1731.5,1685.44 1737.48,1685.36C1743.46,1685.23 1749.42,1685.14 1755.34,1684.94C1761.25,1684.75 1767.18,1684.55 1773.06,1684.25C1778.96,1683.99 1784.82,1683.7 1790.65,1683.31C1796.5,1682.94 1802.31,1682.51 1808.09,1682.08C1813.87,1681.63 1819.64,1681.13 1825.37,1680.59C1831.08,1680.04 1836.77,1679.5 1842.47,1678.87C1848.13,1678.23 1853.78,1677.58 1859.39,1676.85C1865,1676.14 1870.57,1675.4 1876.13,1674.63C1881.67,1673.81 1887.18,1672.99 1892.66,1672.13C1898.14,1671.28 1903.59,1670.35 1909.01,1669.41C1914.42,1668.47 1919.79,1667.54 1925.13,1666.53C1930.46,1665.51 1935.77,1664.45 1941.03,1663.33C1946.29,1662.25 1951.52,1661.19 1956.71,1659.98C1961.88,1658.83 1967.03,1657.64 1972.14,1656.41C1977.23,1655.17 1982.29,1653.94 1987.32,1652.59C1992.33,1651.35 1997.3,1650 2002.23,1648.65C2007.15,1647.29 2012.03,1645.91 2016.87,1644.46C2021.71,1643.04 2026.5,1641.63 2031.24,1640.1C2035.98,1638.65 2040.67,1637.16 2045.33,1635.6C2049.97,1634.05 2054.58,1632.49 2059.12,1630.87C2063.66,1629.26 2068.15,1627.65 2072.59,1625.98C2077.04,1624.35 2081.42,1622.66 2085.76,1620.95C2090.09,1619.25 2094.38,1617.5 2098.61,1615.74C2102.84,1613.97 2107,1612.25 2111.12,1610.39C2115.22,1608.62 2119.3,1606.74 2123.28,1604.91C2127.29,1603.08 2131.22,1601.19 2135.09,1599.3C2138.98,1597.4 2142.8,1595.53 2146.57,1593.58C2150.32,1591.67 2154.01,1589.68 2157.64,1587.71C2161.28,1585.75 2164.86,1583.73 2168.36,1581.71C2175.37,1577.69 2182.14,1573.61 2188.62,1569.44C2195.1,1565.29 2201.33,1561.09 2207.3,1556.81C2213.23,1552.59 2218.92,1548.2 2224.32,1543.82C2229.68,1539.46 2234.79,1535.1 2239.6,1530.64C2244.41,1526.17 2248.91,1521.68 2253.12,1517.2C2257.34,1512.69 2261.22,1508.17 2264.83,1503.65C2268.43,1499.09 2271.73,1494.5 2274.71,1489.97C2277.69,1485.35 2280.36,1480.83 2282.7,1476.27C2285.05,1471.7 2287.09,1467.13 2288.8,1462.55C2290.49,1458.05 2291.88,1453.49 2292.95,1449.01C2293.22,1447.81 2293.41,1446.62 2293.66,1445.54C2293.78,1444.9 2293.89,1444.23 2294.03,1443.64C2294.13,1443.13 2294.24,1442.59 2294.31,1442.08C2294.51,1440.91 2294.81,1439.76 2295,1438.57C2295.22,1437.26 2295.33,1435.88 2295.5,1434.53C2295.33,1433.12 2295.2,1431.74 2295,1430.47Z" />\n    </g>\n    <path d="M179.539,220.301C179.539,239.078 165.082,254.301 147.246,254.301C129.41,254.301 114.953,239.078 114.953,220.301C114.953,201.527 129.41,186.305 147.246,186.305C165.082,186.305 179.539,201.527 179.539,220.301Z"/>\n    <g fill="none" stroke-width= "40px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1996.5,1434.49C1996.5,1329.76 1938.43,1238.62 1852.76,1191.41C1849.2,1190.98 1845.65,1190.53 1842.1,1190.14C1836.42,1189.53 1830.71,1188.94 1824.98,1188.42C1819.23,1187.86 1813.49,1187.38 1807.69,1186.94C1801.89,1186.48 1796.1,1186.08 1790.24,1185.73C1784.39,1185.35 1778.53,1185.03 1772.63,1184.74C1766.75,1184.45 1760.82,1184.22 1754.89,1184.04C1748.96,1183.87 1742.99,1183.72 1737.01,1183.64C1731.01,1183.53 1724.98,1183.5 1718.99,1183.5C1712.99,1183.5 1706.97,1183.55 1700.98,1183.64C1695,1183.72 1689.03,1183.87 1683.1,1184.04C1677.19,1184.22 1671.26,1184.45 1665.34,1184.76C1659.46,1185.03 1653.58,1185.31 1647.75,1185.7C1641.9,1186.08 1636.09,1186.48 1630.3,1186.94C1624.5,1187.38 1618.74,1187.86 1613.01,1188.42C1607.28,1188.94 1601.56,1189.52 1595.88,1190.14C1592.33,1190.53 1588.82,1190.96 1585.26,1191.39C1499.57,1238.62 1441.51,1329.76 1441.51,1434.49C1441.51,1539.24 1499.56,1630.38 1585.25,1677.59C1588.78,1678.01 1592.33,1678.47 1595.88,1678.87C1601.58,1679.49 1607.29,1680.04 1613.02,1680.59C1618.75,1681.13 1624.52,1681.63 1630.3,1682.07C1636.09,1682.49 1641.9,1682.92 1647.77,1683.29C1653.6,1683.66 1659.46,1683.99 1665.36,1684.25C1671.26,1684.55 1677.19,1684.75 1683.12,1684.94C1689.05,1685.14 1695,1685.23 1700.99,1685.36C1706.97,1685.44 1712.99,1685.5 1719,1685.5C1725,1685.5 1731.01,1685.44 1737.01,1685.36C1742.99,1685.23 1748.97,1685.14 1754.89,1684.94C1760.82,1684.75 1766.75,1684.55 1772.64,1684.25C1778.53,1683.99 1784.4,1683.7 1790.24,1683.31C1796.1,1682.94 1801.91,1682.51 1807.71,1682.08C1813.49,1681.63 1819.25,1681.13 1825,1680.59C1830.71,1680.04 1836.42,1679.5 1842.1,1678.87C1845.67,1678.48 1849.2,1678.02 1852.74,1677.61C1938.43,1630.39 1996.5,1539.24 1996.5,1434.49Z"/>\n    </g>\n    <g stroke-width="25px" transform="matrix(0.235243,0,0,0.245462,-256.696,-129.858)">\n        <path d="M1117.26,774.021L1495.79,554.41L1876.76,773.989L1498.22,993.616L1117.26,774.021M1883.5,773.989L1495.75,550.495L1110.5,774.021L1498.25,997.499L1883.5,773.989" />\n    </g>\n    <g transform="matrix(-0.233169,0,0,0.245462,188.517,69.5886)">\n        <path d="M0.007,0.005L0.007,369.922" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1513.49,1036.5L1513.49,1193.24" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.116585,-0.212577,-0.20193,0.122731,188.644,67.8623)">\n        <path d="M-0.003,0.003L-0.005,441.736" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1480.51,1033.5L1480.51,1202.4" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.11662,0.212556,0.201158,0.122262,2.826,67.8637)">\n        <path d="M0.002,-0.008L0.004,441.726" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.233169,0,0,0.245462,2.91461,67.6249)">\n        <path d="M0.002,0L0.002,439.254" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.116585,0.212577,0.20193,0.122731,3.4509,175.859)">\n        <path d="M0.005,-0.006L0.003,116.931" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n</g>\n') };
for (const e6 in kU) CT(e6, { pathData: "", collection: "custom", packageName: "custom", viewBox: "0 0 284 284", customTemplate: kU[e6] });
let PU = class extends le {
  constructor() {
    super(...arguments), this.currentViewModeIndex = 2, this.isColumnMode = false;
  }
  render() {
    return U`
      <ui5-segmented-button
        id="viewModeBtn"
        class="${this.isColumnMode ? "ver-orientation" : "hor-orientation"}"
        @selection-change="${this._handleSelectionChanged}"
      >
        <ui5-segmented-button-item
          tooltip="One View Mode"
          ?selected=${0 == this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode ? "custom/singleview-mobile" : "custom/singleview"}"
            class="${this.isColumnMode ? "rotated-icon" : ""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Sync Mode"
          ?selected=${1 == this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode ? "custom/doubleview-synced-mobile" : "custom/doubleview-synced"}"
            class="${this.isColumnMode ? "rotated-icon" : ""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Navigation Mode"
          ?selected=${2 == this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode ? "custom/doubleview-mobile" : "custom/doubleview"}"
            class="${this.isColumnMode ? "rotated-icon" : ""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
      </ui5-segmented-button>

      <pv-menu ?isColumnMode=${this.isColumnMode}>
        <pv-menu-item
          icon="chart-axis"
          title="3D Environment"
          idx="1"
        >
          <environment-settings
            ?isColumnMode=${this.isColumnMode}
            .environmentSettings="${this.viewerSettings.environment3D}"
          >
          </environment-settings>
        </pv-menu-item>
        <pv-menu-item icon="rotate" title="Rotation Settings" idx="2">
          <rotation-settings
            ?isColumnMode=${this.isColumnMode}
            ?isAutoRotationDisabled="${this.currentViewModeIndex < 2}"
            .imageRotationSettings="${this.viewerSettings.imageRotation}"
            .modelOrientationSettings="${this.viewerSettings.modelOrientation}"
          >
          </rotation-settings>
        </pv-menu-item>
        <pv-menu-item icon="measure" title="Measurement Tool" idx="3">
          <measurement-tool
            ?isColumnMode=${this.isColumnMode}
            .measurementTool="${this.viewerSettings.measurementTool}"
          ></measurement-tool>
        </pv-menu-item>
      </pv-menu>
    `;
  }
  _handleSelectionChanged(e6) {
    const t2 = e6.detail.selectedItems[0], i2 = t2.getAttribute("pos-in-set") ?? t2.ariaPosInSet;
    null == i2 && console.warn("Selected item does not have an ariaPosInSet property. Check your segmented button implementation.", t2);
    const n2 = parseInt(null == i2 ? "" : i2, 10) - 1;
    n2 != this.currentViewModeIndex && (this.currentViewModeIndex = n2, this.dispatchEvent(new CustomEvent("view-mode-changed", { detail: { viewIndex: n2 } })));
  }
};
PU.styles = r`
    :host {
      height: 100%;
      width: 100%;
      --_ui5_button_base_padding: 0px;
    }

    .rotated-icon {
      transform: rotate(-90deg);
    }

    .hor-orientation {
      left: 50%;
    }

    .ver-orientation {
      top: 50%;
    }

    #viewModeBtn.hor-orientation {
      bottom: 1%;
      transform: translateX(-50%);
    }

    #viewModeBtn.ver-orientation {
      right: 1%;
      transform-origin: 100% 0;
      transform: rotate(90deg) translateX(50%);
    }

    #viewModeBtn {
      position: absolute;
      pointer-events: auto;
    }

    ui5-segmented-button-item {
      height: 3.5rem;
      padding: 1px 1px 1px 1px;
    }

    ui5-icon {
      width: 3.5rem;
      height: 3.5rem;
      stroke: black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%);
    }
  `, RU([de({ type: Number })], PU.prototype, "currentViewModeIndex", 2), RU([de({ type: Boolean })], PU.prototype, "isColumnMode", 2), RU([de({ type: Object })], PU.prototype, "viewerSettings", 2), PU = RU([he("control-panel")], PU);
class DU {
  constructor(e6, t2, i2) {
    this.focalLengthInPx = e6, this._sensorWidthInPx = t2, this._sensorHeightInPx = i2, 0 == this._sensorHeightInPx || 0 == this._sensorWidthInPx ? this.aspectRatio = -1 : this.aspectRatio = t2 / i2, this.fovInRad = this._sensorHeightInPx / this.focalLengthInPx, this.cx = 0.5 * (this._sensorWidthInPx - 1), this.cy = 0.5 * (this._sensorHeightInPx - 1);
  }
  equals(e6) {
    return e6.focalLengthInPx == this.focalLengthInPx && e6.cx == this.cx && e6.cy == this.cy;
  }
}
class LU extends $x.EventEmitter {
  constructor() {
    super(), this.isValid = false, this.sensorMap = /* @__PURE__ */ new Map(), this.sensorIds = [], this.imageFiles = [], this.camPosesInChunk = [], this.transformationChunkToWorld = new Kn(), this._xhttp = new XMLHttpRequest(), this._xmlDoc = null, this._xhttp.onload = this._extractInformation.bind(this);
  }
  readFromFile(e6) {
    this._xhttp.open("GET", e6, true), this._xhttp.send();
  }
  _extractInformation() {
    this.isValid = false, 200 == this._xhttp.status ? (this._xmlDoc = this._xhttp.responseXML, null != this._xmlDoc ? this._extractIntrinsicCameraInformation() ? this._extractExtrinsicCameraInformation() ? (this.isValid = true, this.emit("scanInformationExtracted")) : console.log("Coudn't extract extrinisc camera information from xml document") : console.log("Coudn't extract intrinsic camera information from xml document") : console.log("Xml of scaninformation is not valid")) : console.log("Coudn't read xml file");
  }
  _extractIntrinsicCameraInformation() {
    if (null == this._xmlDoc) return false;
    const e6 = this._xmlDoc.getElementsByTagName("sensor");
    if (0 == e6.length) return console.log("No sensors found in xml document"), false;
    for (let t2 = 0; t2 < e6.length; t2++) {
      const i2 = e6[t2].getAttribute("id");
      if (null == i2) return console.log(`Sensor Element in xml doesn't contain key "id"`, t2, e6[t2]), false;
      const n2 = FU(e6[t2], "calibration");
      if (null == n2) return false;
      const o2 = FU(n2, "resolution");
      if (null == o2) return false;
      const r2 = NU(o2, "width"), s2 = NU(o2, "height");
      if (null == r2 || null == s2) return console.log("XML Document doesn't contain information about sensor width and height"), false;
      const a2 = FU(n2, "f");
      if (null == a2 || null == a2.textContent) return console.log("XML Document doesn't contain information about the field of view", a2), false;
      const l2 = Number(a2.textContent);
      if (Number.isNaN(l2) || l2 <= 0) return console.log("XML Document doesn't contain valid information about the field of view:", l2), false;
      this.sensorMap.set(i2, new DU(l2, r2, s2));
    }
    return true;
  }
  _extractExtrinsicCameraInformation() {
    return null != this._xmlDoc && (this._extractChunkToWorldCoorTransformation() ? !!this._extractCamPoses() || (console.log("Coudn't extract cam poses information from xml document"), false) : (console.log("Coudn't extract transformation chunk to world coordinate system from xml document"), false));
  }
  _extractChunkToWorldCoorTransformation() {
    if (null == this._xmlDoc) return false;
    const e6 = function(e7, t3) {
      const i3 = e7.getElementsByTagName(t3);
      return 0 == i3.length ? (console.log("XML Document doesn't contain valid element with name", t3), null) : i3[i3.length - 1];
    }(this._xmlDoc, "transform");
    if (null == e6) return false;
    const t2 = FU(e6, "rotation");
    if (null == t2 || null == t2.textContent) return console.log("XML Document doesn't contain valid information about the rotation between chunk and world coordinate system", t2), false;
    const i2 = t2.textContent.split(" ").map((e7) => Number(e7));
    if (9 != i2.length) return console.log("Rotation part of chunk doesn't contain 9 numbers:", i2), false;
    var n2 = new Wi();
    n2.fromArray(i2).transpose();
    const o2 = FU(e6, "scale");
    if (null == o2 || null == o2.textContent) return console.log("XML Document doesn't contain valid information about the scaling between chunk and world coordinate system", o2), false;
    const r2 = Number(o2.textContent);
    if (r2 <= 0) return console.log("Scalefactor in xml document is not valid: ", r2), false;
    n2.multiplyScalar(r2);
    const s2 = FU(e6, "translation");
    if (null == s2 || null == s2.textContent) return console.log("XML Document doesn't contain valid information about the translation between chunk and world coordinate system", s2), false;
    const a2 = s2.textContent.split(" ").map((e7) => Number(e7));
    if (3 != a2.length) return console.log("Translation part of chunk doesn't contain 3 numbers:", a2), false;
    const l2 = new yn(a2[0], a2[1], a2[2]);
    return this.transformationChunkToWorld.setFromMatrix3(n2), this.transformationChunkToWorld.setPosition(l2), true;
  }
  _extractCamPoses() {
    if (null == this._xmlDoc) return false;
    const e6 = this._xmlDoc.getElementsByTagName("camera");
    if (0 == e6.length) return console.log("No cameras found in xml document"), false;
    this.imageFiles.length = e6.length, this.camPosesInChunk.length = e6.length, this.sensorIds.length = e6.length;
    for (let t2 = 0; t2 < e6.length; t2++) {
      const i2 = e6[t2].getAttribute("label");
      if (null == i2) return console.log(`Camera Element in xml doesn't contain key "label"`, t2, e6[t2]), false;
      this.imageFiles[t2] = i2;
      const n2 = e6[t2].getAttribute("sensor_id");
      if (null == n2) return console.log(`Camera Element in xml doesn't contain key "sensor_id"`, t2, e6[t2]), false;
      if (0 == this.sensorMap.has(n2)) return console.log("Sensor with id", n2, "doesn't exist in xml file"), false;
      this.sensorIds[t2] = n2;
      const o2 = FU(e6[t2], "transform");
      if (null == o2 || null == o2.textContent) return console.log("Camera Element in xml doesn't contain transformationElement", t2, e6[t2]), false;
      const r2 = o2.textContent.split(" ").map((e7) => Number(e7));
      if (16 != r2.length) return console.log("cam pose doesn't contain 16 numbers:", t2, r2), false;
      this.camPosesInChunk[t2] = new Kn(), this.camPosesInChunk[t2].fromArray(r2).transpose();
    }
    return true;
  }
}
function FU(e6, t2) {
  const i2 = e6.getElementsByTagName(t2);
  return 0 == i2.length ? (console.log("XML Document doesn't contain valid element with name", t2), null) : i2[0];
}
function NU(e6, t2) {
  const i2 = e6.getAttribute(t2);
  return i2 ? Number(i2) : null;
}
class OU extends $x.EventEmitter {
  constructor() {
    super(...arguments), this.poses = [], this.normedPositions = [], this._sensorMap = /* @__PURE__ */ new Map(), this._sensorIds = [], this._camPosesInChunk = [], this._chunkToWorldTransform = new Kn(), this._isYupTransformApplied = true, this._additionalRotation = new Kn();
  }
  init(e6, t2, i2) {
    this._sensorMap = e6.sensorMap, this._sensorIds = e6.sensorIds, this._camPosesInChunk = e6.camPosesInChunk, this._chunkToWorldTransform = e6.transformationChunkToWorld, this._isYupTransformApplied = t2, this._additionalRotation = this._additionalRotation.makeRotationFromEuler(i2), this._calculateCamPosesInWorldCoor();
  }
  setIsYupTransformApplied(e6) {
    e6 != this._isYupTransformApplied && (this._isYupTransformApplied = e6, this._calculateCamPosesInWorldCoor(), this.emit("camera-parameters-changed"));
  }
  setAdditionalRotation(e6) {
    console.log("Set additional rotation"), this._additionalRotation = this._additionalRotation.makeRotationFromEuler(e6.angleInRad), this._calculateCamPosesInWorldCoor(), this.emit("camera-parameters-changed");
  }
  getImageSensor(e6) {
    const t2 = this._sensorIds[e6];
    return this._sensorMap.get(t2);
  }
  getCameraPose(e6) {
    return e6 < this.poses.length && e6 >= 0 ? this.poses[e6] : new Kn();
  }
  getSyncSettingsOfNextBestImage(e6) {
    let t2 = e6.position.clone().normalize(), i2 = Number.MAX_VALUE, n2 = -1;
    for (let e7 = 0; e7 < this.normedPositions.length; e7++) {
      const o3 = Math.acos(t2.dot(this.normedPositions[e7]));
      o3 < i2 && (i2 = o3, n2 = e7);
    }
    if (-1 == n2) return [null, null];
    let o2 = new yn(), r2 = new yn(), s2 = new yn();
    this.poses[n2].extractBasis(o2, r2, s2);
    const a2 = Math.acos(-s2.y);
    let l2 = Math.atan2(-s2.x, -s2.z), c2 = new yn(Math.cos(l2), 0, -Math.sin(l2)), h2 = new yn(-Math.cos(a2) * Math.sin(l2), Math.sin(a2), -Math.cos(a2) * Math.cos(l2)), u2 = new $i();
    u2.x = o2.dot(c2), u2.y = o2.dot(h2), u2.normalize();
    const d2 = 180 * Math.atan2(u2.y, u2.x) / Math.PI;
    let p2 = new yn();
    p2.setFromMatrixPosition(this.poses[n2]);
    const _2 = p2.length();
    let g2 = { theta: l2, phi: a2, radius: _2, toString() {
      return `${this.theta}rad ${this.phi}rad ${this.radius}m`;
    } }, m2 = new yn();
    m2.x = p2.x - _2 * Math.sin(a2) * Math.sin(l2), m2.y = p2.y - _2 * Math.cos(a2), m2.z = p2.z - _2 * Math.sin(a2) * Math.cos(l2);
    const f2 = this._sensorIds[n2], v2 = this._sensorMap.get(f2);
    let A2 = 0.25 * Math.PI, b2 = 1;
    null != v2 && (A2 = v2.fovInRad, b2 = v2.aspectRatio);
    return [{ imageIdx: n2, rotationAngle: -d2, imageAspectRatio: b2 }, { orbitPos: g2, cameraTarget: by(m2), fovInRad: A2 }];
  }
  _calculateCamPosesInWorldCoor() {
    var e6 = this._chunkToWorldTransform.clone();
    if (this._isYupTransformApplied) {
      var t2 = new Kn();
      t2.makeRotationX(0.5 * -Math.PI), e6.premultiply(t2);
    }
    let i2 = new yn(), n2 = new bn(), o2 = new yn();
    this.poses.length = this._camPosesInChunk.length, this.normedPositions.length = this._camPosesInChunk.length;
    for (let t3 = 0; t3 < this._camPosesInChunk.length; t3++) {
      let s2 = new Kn();
      s2.multiplyMatrices(e6, this._camPosesInChunk[t3]), s2.premultiply(this._additionalRotation), s2.decompose(i2, n2, o2);
      var r2 = new yn(1, 1, 1);
      i2.multiplyScalar(1e3);
      let a2 = new Kn();
      a2.compose(i2, n2, r2), this.poses[t3] = a2;
      let l2 = new yn();
      l2.setFromMatrixPosition(a2), this.normedPositions[t3] = l2.normalize();
    }
  }
}
class UU {
  constructor() {
    this.angleInRad = new ao(0, 0, 0, "YXZ");
  }
  angleInRadAsString() {
    return `${this.angleInRad.z}rad ${this.angleInRad.x}rad ${this.angleInRad.y}rad`;
  }
  equals(e6) {
    return e6.angleInRadAsString() == this.angleInRadAsString();
  }
  set x(e6) {
    this.angleInRad.x = e6;
  }
  get x() {
    return this.angleInRad.x;
  }
  set y(e6) {
    this.angleInRad.y = e6;
  }
  get y() {
    return this.angleInRad.y;
  }
  set z(e6) {
    this.angleInRad.z = e6;
  }
  get z() {
    return this.angleInRad.x;
  }
}
function zU(e6) {
  return `rgb(${e6.r}, ${e6.g}, ${e6.b})`;
}
class HU extends $x.EventEmitter {
  constructor() {
    super(...arguments), this._eulerOrientation = new UU();
  }
  set xOrientationInRad(e6) {
    this._eulerOrientation.x != e6 && (this._eulerOrientation.x = e6, this.emit("model-orientation-changed", this.eulerOrientationYXZInRad));
  }
  set yOrientationInRad(e6) {
    this._eulerOrientation.y != e6 && (this._eulerOrientation.y = e6, this.emit("model-orientation-changed", this.eulerOrientationYXZInRad));
  }
  set zOrientationInRad(e6) {
    this._eulerOrientation.z != e6 && (this._eulerOrientation.z = e6, this.emit("model-orientation-changed", this.eulerOrientationYXZInRad));
  }
  get eulerOrientationYXZInRad() {
    return this._eulerOrientation;
  }
}
class QU extends $x.EventEmitter {
  constructor() {
    super(...arguments), this._autoRotationAngle = 0, this._userSetRotationAngle = 0, this._isAutoRotationActivated = false;
  }
  set autoRotationAngle(e6) {
    this._autoRotationAngle != e6 && (this._autoRotationAngle = e6, this._isAutoRotationActivated && this.emit("rotation-angle-changed", this._autoRotationAngle));
  }
  get autoRotationAngle() {
    return this._autoRotationAngle;
  }
  set userSetRotationAngle(e6) {
    this._userSetRotationAngle != e6 && (this._userSetRotationAngle = e6, this._isAutoRotationActivated || this.emit("rotation-angle-changed", this._userSetRotationAngle));
  }
  get userSetRotationAngle() {
    return this._userSetRotationAngle;
  }
  set isAutoRotationActivated(e6) {
    this._isAutoRotationActivated != e6 && (this._isAutoRotationActivated = e6, this._isAutoRotationActivated ? this.emit("rotation-angle-changed", this._autoRotationAngle) : this.emit("rotation-angle-changed", this._userSetRotationAngle, false));
  }
  get isAutoRotationActivated() {
    return this._isAutoRotationActivated;
  }
}
class VU extends $x.EventEmitter {
  constructor() {
    super(...arguments), this._showAxes = true, this._backgroundColor = "#444444", this._gradientColor = "#b9b9b9", this._applyGradient = true, this._brightness = 1;
  }
  set showAxes(e6) {
    this._showAxes != e6 && (this._showAxes = e6, this.emit("change-axes-visibility-requested", this._showAxes));
  }
  get showAxes() {
    return this._showAxes;
  }
  set backgroundColor(e6) {
    const t2 = mL(e6), i2 = zU(t2);
    if (console.log("Set backgroundcolor", t2, i2), this._backgroundColor == i2) return;
    this._backgroundColor = i2;
    const n2 = { r: Math.min(2.5 * t2.r, 255), g: Math.min(2.5 * t2.g, 255), b: Math.min(2.5 * t2.b, 255) };
    this._gradientColor = zU(n2), console.log("Set gradient color", n2, this._gradientColor), this._applyGradient ? this.emit("change-viewer-background-color-requested", this._backgroundColor, this._gradientColor) : this.emit("change-viewer-background-color-requested", this._backgroundColor, "");
  }
  get backgroundColor() {
    return this._applyGradient ? [this._backgroundColor, this._gradientColor] : [this._backgroundColor, ""];
  }
  set applyGradient(e6) {
    this._applyGradient != e6 && (this._applyGradient = e6, this._applyGradient ? this.emit("change-viewer-background-color-requested", this._backgroundColor, this._gradientColor) : this.emit("change-viewer-background-color-requested", this._backgroundColor, ""));
  }
  get applyGradient() {
    return this._applyGradient;
  }
  set brightness(e6) {
    this._brightness != e6 && (this._brightness = e6, this.emit("change-exposure-requested", this._brightness));
  }
}
class GU extends $x.EventEmitter {
  constructor() {
    super(...arguments), this._isEditModeActive = false, this._measurementPoints = [], this._measuredLength = 0, this._currentOrientation = new ao(), this._currentTranslation = new yn(), this._imageSensor = null, this._imageCamOrientation = new Kn(), this._measurementDistances = [], this._sceneElementGroup = new Il();
  }
  set imageSensor(e6) {
    this._imageSensor && e6.equals(this._imageSensor) || (this._imageSensor = e6);
  }
  set imageCamOrientation(e6) {
    this._imageCamOrientation.equals(e6) || (this._imageCamOrientation = e6);
  }
  get sceneElementGroup() {
    return this._sceneElementGroup;
  }
  set isEditModeActive(e6) {
    this._isEditModeActive != e6 && (this._isEditModeActive = e6);
  }
  get isEditModeActive() {
    return this._isEditModeActive;
  }
  get numPoints() {
    return this._measurementPoints.length;
  }
  get measuredLength() {
    return this._measuredLength;
  }
  set translation(e6) {
    e6.equals(this._currentTranslation) || (this._measurementDistances.forEach((t2) => {
      t2.translate(e6);
    }), this._currentTranslation = e6.clone());
  }
  set eulerOrientation(e6) {
    this._currentOrientation.equals(e6.angleInRad) || (this._currentOrientation = e6.angleInRad.clone(), this._measurementDistances.forEach((e7) => {
      e7.changeSceneOrientation(this._currentOrientation);
    }), this._measurementPoints.forEach((e7) => {
      e7.updatePosition(this._currentOrientation);
    }));
  }
  addPointFromImage(e6, t2) {
    if (null == this._imageSensor) return void console.warn("Cannot add point from image, since image sensor is null.");
    let i2 = new yn();
    i2.x = e6 - this._imageSensor.cx, i2.y = t2 - this._imageSensor.cy, i2.z = this._imageSensor.focalLengthInPx;
    let n2 = new Wi();
    n2.setFromMatrix4(this._imageCamOrientation), console.log("Cam orientation in World", this._imageCamOrientation), i2.applyMatrix3(n2);
    let o2 = i2.normalize(), r2 = new yn();
    r2.setFromMatrixPosition(this._imageCamOrientation), this.emit("calculate-hotspot-requested", r2, o2);
  }
  addPointFrom3DScene(e6, t2, i2 = true) {
    const n2 = this._measurementPoints.length, o2 = new yn(e6.x, e6.y, e6.z), r2 = new yn(t2.x, t2.y, t2.z), s2 = new jU(n2, o2, r2, this._currentOrientation);
    if (s2.on("hotspot-selected", this._updateHotspotInImage.bind(this)), s2.on("hotspot-focus-changed", (e7) => this.emit("change-image-hotspot-visibility", e7)), this._measurementPoints.push(s2), n2 > 0) {
      const e7 = new $U(this._measurementDistances.length, this._measurementPoints[n2 - 1], s2, this._currentTranslation, this._currentOrientation);
      this._measuredLength += e7.distance, this._sceneElementGroup.add(e7.sceneElement), this._measurementDistances.push(e7), this.emit("hotspot-added", e7.annotationElement), this.emit("update-requested");
    }
    this.emit("hotspot-added", s2.domElement), i2 && this._updateHotspotInImage(s2.positionInSceneCoor), window.setTimeout(() => s2.domElement.focus(), 0);
  }
  resetPoints() {
    this._measurementPoints.forEach((e6) => {
      e6.delete();
    }), this._measurementPoints = [], this._measuredLength = 0, this._measurementDistances.forEach((e6) => {
      e6.reset();
    }), this.emit("update-requested");
  }
  showPoints() {
    this._measurementPoints.forEach((e6) => {
      e6.show();
    }), this._measurementDistances.forEach((e6) => {
      e6.show();
    }), this.emit("scene-update-requested");
  }
  hidePoints() {
    this._measurementDistances.forEach((e6) => {
      e6.hide();
    }), this._measurementPoints.forEach((e6) => {
      e6.hide();
    }), this.emit("scene-update-requested");
  }
  _updateHotspotInImage(e6) {
    if (null == this._imageSensor) return void console.warn("Cannot update hotspot in image: image sensor null.");
    const t2 = this._imageSensor, i2 = this._imageCamOrientation.clone(), n2 = new yn().setFromMatrixPosition(i2);
    n2.add(this._currentTranslation), i2.setPosition(n2), i2.invert();
    const o2 = new yn().addVectors(e6, this._currentTranslation);
    let r2 = new gn(o2.x, o2.y, o2.z, 1).applyMatrix4(i2), s2 = new yn(r2.x / r2.w, r2.y / r2.w, r2.z / r2.w), a2 = s2.x / s2.z * t2.focalLengthInPx + t2.cx, l2 = s2.y / s2.z * t2.focalLengthInPx + t2.cy;
    a2 > 0 && l2 > 0 && this.emit("update-image-hotspot-position-requested", a2, l2);
  }
}
class qU {
  constructor() {
    this._lineGeometry = new ur(), this._translation = new yn(), this._pointsInModelCoor = [], this._lineMaterial = new oh({ color: 16777215, gapSize: 0.1, dashSize: 0.1 }), this._lineMaterial.transparent = true, this._lineMaterial.depthTest = false, this._distanceLine = new Fc(this._lineGeometry, this._lineMaterial);
  }
  get lineElement() {
    return this._distanceLine;
  }
  addPoint(e6, t2, i2) {
    const n2 = new Kn().makeRotationFromEuler(i2).invert(), o2 = e6.clone().applyMatrix4(n2);
    this._pointsInModelCoor.push(o2), this._lineGeometry.setFromPoints(this._pointsInModelCoor), this._lineGeometry.applyMatrix4(new Kn().makeRotationFromEuler(i2)), this._lineGeometry.translate(t2.x, t2.y, t2.z), this._distanceLine.computeLineDistances(), this._translation = t2;
  }
  addPointInModelCoor(e6, t2, i2) {
    this._pointsInModelCoor.push(e6), this._lineGeometry.setFromPoints(this._pointsInModelCoor), this._lineGeometry.applyMatrix4(new Kn().makeRotationFromEuler(i2)), this._lineGeometry.translate(t2.x, t2.y, t2.z), this._distanceLine.computeLineDistances(), this._translation = t2;
  }
  setTranslation(e6) {
    this._lineGeometry.translate(-this._translation.x + e6.x, -this._translation.y + e6.y, -this._translation.z + e6.z), this._translation = e6;
  }
  setEulerOrientation(e6) {
    this._lineGeometry.setFromPoints(this._pointsInModelCoor), this._lineGeometry.applyMatrix4(new Kn().makeRotationFromEuler(e6)), this._lineGeometry.translate(this._translation.x, this._translation.y, this._translation.z), this._distanceLine.computeLineDistances();
  }
  set opacity(e6) {
    this._lineMaterial.opacity = e6;
  }
  show() {
    this._distanceLine.visible = true;
  }
  hide() {
    this._distanceLine.visible = false;
  }
  reset() {
    this._pointsInModelCoor.length = 0, this._lineGeometry.setFromPoints(this._pointsInModelCoor), this._distanceLine.removeFromParent();
  }
}
class $U {
  constructor(e6, t2, i2, n2, o2) {
    this._sceneLineElement = new qU(), this._numVisiblePoints = 0, this._isHidden = false;
    const r2 = t2.distanceTo(i2), s2 = new yn().addVectors(t2.positionInSceneCoor, i2.positionInSceneCoor).multiplyScalar(0.5), a2 = new yn().addVectors(t2.normalInSceneCoor, i2.normalInSceneCoor).multiplyScalar(0.5);
    this._distanceAnnotation = new XU(e6, r2, s2, a2, o2), this._sceneLineElement.addPointInModelCoor(t2.positionInModelCoor, n2, o2), this._sceneLineElement.addPointInModelCoor(i2.positionInModelCoor, n2, o2);
    const l2 = new MutationObserver(this._handlePointVisibilityChanged.bind(this));
    l2.observe(t2.domElement, { attributes: true }), l2.observe(i2.domElement, { attributes: true }), this._numVisiblePoints = Number(t2.domElement.hasAttribute("data-visible")) + Number(i2.domElement.hasAttribute("data-visible"));
  }
  get distance() {
    return this._distanceAnnotation.distance;
  }
  get sceneElement() {
    return this._sceneLineElement.lineElement;
  }
  get annotationElement() {
    return this._distanceAnnotation.domElement;
  }
  translate(e6) {
    this._sceneLineElement.setTranslation(e6);
  }
  changeSceneOrientation(e6) {
    this._sceneLineElement.setEulerOrientation(e6), this._distanceAnnotation.updatePosition(e6);
  }
  show() {
    this._sceneLineElement.show(), this._distanceAnnotation.show(), this._isHidden = false, this._updateAnnotationVisibility();
  }
  hide() {
    this._isHidden = true, this._distanceAnnotation.hide(), this._sceneLineElement.hide();
  }
  reset() {
    this._sceneLineElement.reset(), this._distanceAnnotation.delete();
  }
  _handlePointVisibilityChanged(e6) {
    for (const t2 of e6) if ("attributes" === t2.type && "data-visible" === t2.attributeName) {
      const e7 = t2.target;
      this._numVisiblePoints += e7.hasAttribute("data-visible") ? 1 : -1;
    }
    this._isHidden || this._updateAnnotationVisibility();
  }
  _updateAnnotationVisibility() {
    this._numVisiblePoints <= 0 ? (this._distanceAnnotation.hide(), this._sceneLineElement.opacity = 0.25) : (this._distanceAnnotation.show(), this._sceneLineElement.opacity = 1);
  }
}
class WU extends $x.EventEmitter {
  constructor(e6, t2, i2) {
    super();
    const n2 = new Kn().makeRotationFromEuler(i2).invert();
    this._positionInSceneCoor = e6, this._positionInModelCoor = this._positionInSceneCoor.clone().applyMatrix4(n2), this._normalInSceneCoor = t2, this._normalInModelCoor = this._normalInSceneCoor.clone().applyMatrix4(n2), this._domElement = document.createElement("button"), this._domElement.dataset.visibilityAttribute = "visible", this._domElement.style.display = "block", this._domElement.dataset.position = this.positionInSceneCoorAsString, this._domElement.dataset.normal = this.normalInSceneCoorAsString, this._domElement.addEventListener("focus", this._handleFocusChanged.bind(this)), this._domElement.addEventListener("blur", this._handleFocusChanged.bind(this));
  }
  get domElement() {
    return this._domElement;
  }
  get positionInModelCoor() {
    return this._positionInModelCoor;
  }
  get positionInSceneCoor() {
    return this._positionInSceneCoor;
  }
  get normalInSceneCoor() {
    return this._normalInSceneCoor;
  }
  get positionInSceneCoorAsString() {
    return `${this._positionInSceneCoor.x}m ${this._positionInSceneCoor.y}m ${this._positionInSceneCoor.z}m`;
  }
  get normalInSceneCoorAsString() {
    return `${this._normalInSceneCoor.x}m ${this._normalInSceneCoor.y}m ${this._normalInSceneCoor.z}m`;
  }
  updatePosition(e6) {
    this._positionInSceneCoor = this._positionInModelCoor.clone().applyEuler(e6), this._normalInSceneCoor = this._normalInModelCoor.clone().applyEuler(e6), this.domElement.dataset.position = this.positionInSceneCoorAsString, this.domElement.dataset.normal = this.normalInSceneCoorAsString, this.domElement.dispatchEvent(new Event("hotspot-position-changed"));
  }
  show() {
    this.domElement.style.display = "block";
  }
  hide() {
    this.domElement.style.display = "none";
  }
  delete() {
    var _a3;
    (_a3 = this.domElement.parentNode) == null ? void 0 : _a3.removeChild(this.domElement);
  }
  _handleFocusChanged(e6) {
    this.emit("hotspot-focus-changed", "focus" == e6.type);
  }
}
class jU extends WU {
  constructor(e6, t2, i2, n2) {
    super(t2, i2, n2), this._domElement.slot = "hotspot-measurementpoint" + e6, this.domElement.classList.add("hotspot"), this.domElement.textContent = e6.toString(), this.domElement.addEventListener("click", (e7) => {
      e7.stopPropagation(), this.emit("hotspot-selected", this.positionInSceneCoor);
    });
  }
  distanceTo(e6) {
    return this.positionInModelCoor.distanceTo(e6.positionInModelCoor);
  }
}
class XU extends WU {
  constructor(e6, t2, i2, n2, o2) {
    super(i2, n2, o2), this._distance = 0, this._distance = t2, this._domElement.slot = "hotspot-distance-annotation" + e6, this.domElement.classList.add("annotation"), this.domElement.textContent = t2.toFixed(1) + " mm";
  }
  get distance() {
    return this._distance;
  }
}
class YU {
  constructor(e6, t2) {
    this.projectRoot = e6, this.imageType = t2, this.skyBoxImage = null;
  }
  resolve2dFileURL(e6) {
    return new Promise((t2, i2) => {
      t2(this.projectRoot + e6 + this.imageType);
    });
  }
}
var KU = Object.defineProperty, ZU = Object.getOwnPropertyDescriptor, JU = (e6, t2, i2, n2) => {
  for (var o2, r2 = n2 > 1 ? void 0 : n2 ? ZU(t2, i2) : t2, s2 = e6.length - 1; s2 >= 0; s2--) (o2 = e6[s2]) && (r2 = (n2 ? o2(t2, i2, r2) : o2(r2)) || r2);
  return n2 && r2 && KU(t2, i2, r2), r2;
};
let ez = class extends le {
  constructor() {
    super(), this.isYupTransformApplied = false, this.src3D = "", this.src2D = "", this.srcScanInformation = "", this._scanInformation = new LU(), this._imageCamera = new OU(), this._syncSettings2DViewer = null, this._syncSettings3DViewer = null, this._viewerAspectRatio = 1, this._viewModeIndex = 2, this._isInit = false, this._isColumnDir = false, this._viewerSettings = { imageRotation: new QU(), modelOrientation: new HU(), measurementTool: new GU(), environment3D: new VU() }, this._viewerSettings.modelOrientation.on("model-orientation-changed", (e6) => this._imageCamera.setAdditionalRotation(e6)), this._scanInformation.on("scanInformationExtracted", this._handleScanInformationExtracted.bind(this)), this._imageCamera.on("camera-parameters-changed", this._updateViewer.bind(this)), this._resizeObserver = new ResizeObserver(this._handleViewerResizeEvent.bind(this)), null == this.viewSettings && (this.viewSettings = new YU(this.src2D, ".png"));
  }
  render() {
    return U`
      <div id="viewerBase">
        <viewer-3d id="viewer3D" 
          src=${this.src3D}
          camera-controls  disable-tap
          camera-orbit="0deg 90deg auto" max-camera-orbit="Infinity 157.5deg auto"  min-camera-orbit="-Infinity 22.5deg auto" camera-target="0m 0m 0m"
          exposure="1.2" shadow-intensity="0" alt="Leptinotarsa" min-field-of-view='0deg' max-field-of-view='18deg'  interaction-prompt="none"
          skybox-image ="${this.viewSettings.skyBoxImage}"
          .measurementTool ="${this._viewerSettings.measurementTool}"
          @fov-based-zoom-changed ="${this._handleFovBasedZoomChanged}"
          @cam-orbit-angle-changed = "${this._updateViewer}"
          @dblclick = "${this._updateOneViewSyncMode}"  > 
        </viewer-3d>
        <viewer-2d id="viewer2D" src2D=${this.src2D} 
          .measurementTool ="${this._viewerSettings.measurementTool}"
          .viewSettings ="${this.viewSettings}"
          @image-zoom-changed ="${this._handleImageZoomChanged}"
          @image-shifted ="${this._handleImageShifted}"
          @min-zoom-level-changed ="${this._handleImageMinZoomLevelChanged}"
          @double-press= "${this._updateOneViewSyncMode}"
          @pointer-move-in-disable-mode =  "${this._handlePointerMoveOnImageInDisableMode}"
          @double-press-completed = "${this._updateOneViewSyncMode}" >  
        </viewer-2d>
        <control-panel id="controls" ?isColumnMode=${this._isColumnDir}
        .viewerSettings ="${this._viewerSettings}"
         @view-mode-changed = "${this._handleViewModeChanged}">
        </control-panel>
      </div>
    `;
  }
  connectedCallback() {
    super.connectedCallback();
  }
  disconnectedCallback() {
    this._resizeObserver.disconnect(), super.disconnectedCallback();
  }
  firstUpdated() {
    this._resizeObserver.observe(this.viewerBase), this.viewer2DElement.connectWithSettings(this._viewerSettings), this.viewer3DElement.connectWithSettings(this._viewerSettings);
  }
  updated(e6) {
    super.updated(e6), e6.has("srcScanInformation") && (this._isInit = false, this._scanInformation.readFromFile(this.srcScanInformation)), e6.has("isYupTransformApplied") && this._imageCamera.setIsYupTransformApplied(this.isYupTransformApplied);
  }
  _handleViewModeChanged(e6) {
    if (this._viewModeIndex == e6.detail.viewIndex) return;
    const t2 = this._viewModeIndex;
    this._viewModeIndex = e6.detail.viewIndex, 0 == t2 && (this._activateAndShow2DViewer(), this._updateViewerSize()), 2 != t2 && 2 != this._viewModeIndex || this._changeSyncMode(), 0 == this._viewModeIndex && this._updateViewerSize();
  }
  _handlePointerMoveOnImageInDisableMode(e6) {
    this._viewModeIndex > 0 || this.viewer3DElement.rotateModel(e6.detail.dx, e6.detail.dy);
  }
  _handleScanInformationExtracted() {
    this._imageCamera.init(this._scanInformation, this.isYupTransformApplied, this._viewerSettings.modelOrientation.eulerOrientationYXZInRad.angleInRad), this.viewer2DElement.setImageFiles(this._scanInformation.imageFiles), this.viewer3DElement.loaded && this._updateViewer();
  }
  _activateAndShow2DViewer() {
    this.viewer2DElement.style.cursor = "auto", this.viewer2DElement.style.opacity = "1", this.viewer2DElement.style.zIndex = "2", this.viewer2DElement.updatePointerEventsState(false);
  }
  _deactivateAndHide2DViewer() {
    this.viewer2DElement.style.opacity = "0", this.viewer2DElement.style.zIndex = "0", this.viewer2DElement.updatePointerEventsState(true), this.viewer2DElement.style.cursor = "grabbing";
  }
  _updateOneViewSyncMode() {
    this._viewModeIndex > 0 || ("0" === this.viewer2DElement.style.opacity ? this._activateAndShow2DViewer() : this._deactivateAndHide2DViewer());
  }
  _handleViewerResizeEvent() {
    this._updateViewerSize();
  }
  _updateViewerSize() {
    if (0 == this._viewModeIndex) {
      if (this._viewerAspectRatio = this.viewerBase.offsetWidth / this.viewerBase.offsetHeight, this.viewer3DElement.resize(this.viewerBase.offsetHeight, this.viewerBase.offsetWidth), this.viewer2DElement.resize(this.viewerBase.offsetHeight, this.viewerBase.offsetWidth, "translate(0,0)"), null == this._syncSettings2DViewer || null == this._syncSettings3DViewer) return;
      const e7 = this._syncSettings2DViewer.imageAspectRatio / this._viewerAspectRatio, t3 = this._syncSettings3DViewer.fovInRad * e7;
      return this.viewer3DElement.setReferenceFieldOfView(t3, this._viewModeIndex < 2), void this._synchronize3DViewer();
    }
    if (this._isColumnDir = this.viewerBase.offsetHeight > this.viewerBase.offsetWidth, null != this._syncSettings2DViewer) {
      let e7 = this._syncSettings2DViewer.imageAspectRatio * this.viewerBase.offsetHeight / this.viewerBase.offsetWidth;
      this._isColumnDir = e7 > 1;
    }
    let e6 = this.viewerBase.offsetWidth, t2 = 0.5 * this.viewerBase.offsetHeight, i2 = "translate(0,100%)";
    if (this._isColumnDir || (e6 = 0.5 * this.viewerBase.offsetWidth, t2 = this.viewerBase.offsetHeight, i2 = "translate(100%,0)"), this._viewerAspectRatio = e6 / t2, this.viewer3DElement.resize(t2, e6), this.viewer2DElement.resize(t2, e6, i2), this.requestUpdate(), null == this._syncSettings2DViewer || null == this._syncSettings3DViewer) return;
    const n2 = this._syncSettings2DViewer.imageAspectRatio / this._viewerAspectRatio, o2 = this._syncSettings3DViewer.fovInRad * n2;
    this.viewer3DElement.setReferenceFieldOfView(o2, true), this._synchronize3DViewer();
  }
  _changeSyncMode() {
    this._viewModeIndex < 2 ? (this.viewer3DElement.updateRadiusMode(true), this._synchronize3DViewer(), this.viewer3DElement.disablePan = true) : (this.viewer3DElement.disablePan = false, this.viewer3DElement.updateRadiusMode(false), this.viewer3DElement.setViewerOffset(0, 0));
  }
  _handleFovBasedZoomChanged(e6) {
    2 != this._viewModeIndex && this.viewer2DElement.zoomImage(e6.detail.zoomLevel);
  }
  _handleImageZoomChanged(e6) {
    this._viewModeIndex < 2 && this.viewer3DElement.zoomTo(e6.detail.zoomLevel);
  }
  _handleImageMinZoomLevelChanged(e6) {
    this.viewer3DElement.setMinZoomLevel(e6.detail.zoomLevel);
  }
  _handleImageShifted(e6) {
    this._viewModeIndex < 2 && this.viewer3DElement.setViewerOffset(e6.detail.deltaX, e6.detail.deltaY);
  }
  _updateViewer() {
    const e6 = this.viewer3DElement.getCamera();
    if ([this._syncSettings2DViewer, this._syncSettings3DViewer] = this._imageCamera.getSyncSettingsOfNextBestImage(e6), null == this._syncSettings2DViewer || null == this._syncSettings3DViewer) return;
    this._viewerSettings.imageRotation.autoRotationAngle = this._syncSettings2DViewer.rotationAngle;
    const t2 = this._syncSettings2DViewer.imageIdx;
    this.viewer2DElement.loadNextImage(t2);
    const i2 = this._imageCamera.getImageSensor(t2);
    null == i2 ? console.log("There is no sensor to the image index ", t2) : this._viewerSettings.measurementTool.imageSensor = i2, this._viewerSettings.measurementTool.imageCamOrientation = this._imageCamera.getCameraPose(t2);
    const n2 = this._syncSettings2DViewer.imageAspectRatio / this._viewerAspectRatio, o2 = this._syncSettings3DViewer.fovInRad * n2;
    this._isInit ? this.viewer3DElement.setReferenceFieldOfView(o2, this._viewModeIndex < 2) : (this.viewer3DElement.setReferenceFieldOfView(o2, true), this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos), this._updateViewerSize(), this._isInit = true), this._viewModeIndex < 2 && this._synchronize3DViewer();
  }
  _synchronize3DViewer() {
    null != this._syncSettings3DViewer && null != this._syncSettings2DViewer && (this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos), this.viewer3DElement.cameraTarget = this._syncSettings3DViewer.cameraTarget.toString(), this.viewer3DElement.zoomTo(this.viewer2DElement.getZoomLevel()));
  }
};
ez.styles = r`
    :host {
      width: 100%;
      height: 100%;
      display: flex; 
      justify-content: center;
      align-items: center
    }

    #viewerBase {
        position: relative;
        border: 2px solid blue;
        width: 100%;
        height: 100%;
        min-height: 400px;
        border: 0;
        background-color: lightgray
    }
    
    #viewer2D {
      position: absolute;
      left: 0;
      right: 0;
      z-index: 2;
      opacity: 1;
    }

    #viewer3D {
      position: absolute;
      z-index: 1;
      overflow: hidden
    }

    #controls {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0;
      right: 0;
      z-index: 5;
      pointer-events: none;
    }

    .hotspot{
        display: block;
        width: 20px;
        height: 20px;
        border-radius: 20px;
        border: none;
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
        box-sizing: border-box;
        cursor: pointer;
        transition: opacity 0.3s;
        position: relative;
        font-size: 12px;
        padding: 0
    }

    .hotspot:not([data-visible]) {
        background: transparent;
        border: 3px solid #fff;
        box-shadow: none;
        pointer-events: none;
    }

    .hotspot:focus {
        border: 3px solid rgb(0, 128, 200);
        outline: none;
        padding: 0;
    }

    .hotspot > * {
        opacity: 1;
    }

    .annotation{
        background: rgba(0, 0, 0,0.75);
        color: rgba(255, 255, 255);
        border-radius: 5px;
        border: 0;
        box-shadow: 0;
        width: max-content;
        padding: 0.25em 0.5em
    }

  `, JU([de({ type: Boolean })], ez.prototype, "isYupTransformApplied", 2), JU([de()], ez.prototype, "src3D", 2), JU([de()], ez.prototype, "src2D", 2), JU([de()], ez.prototype, "srcScanInformation", 2), JU([de({ type: Object })], ez.prototype, "viewSettings", 2), JU([pe("#viewerBase")], ez.prototype, "viewerBase", 2), JU([pe("#viewer3D")], ez.prototype, "viewer3DElement", 2), JU([pe("#viewer2D")], ez.prototype, "viewer2DElement", 2), JU([pe("#controls")], ez.prototype, "controlsElement", 2), ez = JU([he("photogrammetry-viewer")], ez);
export {
  ez as PhotogrammetryViewer
};
