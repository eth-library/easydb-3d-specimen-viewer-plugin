var I0e=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var mQe=I0e((YQe,Nce)=>{function T0e(a,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in a)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(a,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();function Qne(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var QN={exports:{}},q2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AK;function M0e(){if(AK)return q2;AK=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var A in s)A!=="key"&&(l[A]=s[A])}else l=s;return s=l.ref,{$$typeof:a,type:r,key:u,ref:s!==void 0?s:null,props:l}}return q2.Fragment=e,q2.jsx=i,q2.jsxs=i,q2}var pK;function R0e(){return pK||(pK=1,QN.exports=M0e()),QN.exports}var hu=R0e(),NN={exports:{}},Pr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fK;function D0e(){if(fK)return Pr;fK=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.iterator;function C(ge){return ge===null||typeof ge!="object"?null:(ge=x&&ge[x]||ge["@@iterator"],typeof ge=="function"?ge:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,L={};function U(ge,Ee,ke){this.props=ge,this.context=Ee,this.refs=L,this.updater=ke||I}U.prototype.isReactComponent={},U.prototype.setState=function(ge,Ee){if(typeof ge!="object"&&typeof ge!="function"&&ge!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ge,Ee,"setState")},U.prototype.forceUpdate=function(ge){this.updater.enqueueForceUpdate(this,ge,"forceUpdate")};function P(){}P.prototype=U.prototype;function H(ge,Ee,ke){this.props=ge,this.context=Ee,this.refs=L,this.updater=ke||I}var N=H.prototype=new P;N.constructor=H,F(N,U.prototype),N.isPureReactComponent=!0;var z=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function J(ge,Ee,ke,je,Ie,ze){return ke=ze.ref,{$$typeof:a,type:ge,key:Ee,ref:ke!==void 0?ke:null,props:ze}}function ie(ge,Ee){return J(ge.type,Ee,void 0,void 0,void 0,ge.props)}function ee(ge){return typeof ge=="object"&&ge!==null&&ge.$$typeof===a}function re(ge){var Ee={"=":"=0",":":"=2"};return"$"+ge.replace(/[=:]/g,function(ke){return Ee[ke]})}var se=/\/+/g;function ue(ge,Ee){return typeof ge=="object"&&ge!==null&&ge.key!=null?re(""+ge.key):Ee.toString(36)}function fe(){}function pe(ge){switch(ge.status){case"fulfilled":return ge.value;case"rejected":throw ge.reason;default:switch(typeof ge.status=="string"?ge.then(fe,fe):(ge.status="pending",ge.then(function(Ee){ge.status==="pending"&&(ge.status="fulfilled",ge.value=Ee)},function(Ee){ge.status==="pending"&&(ge.status="rejected",ge.reason=Ee)})),ge.status){case"fulfilled":return ge.value;case"rejected":throw ge.reason}}throw ge}function xe(ge,Ee,ke,je,Ie){var ze=typeof ge;(ze==="undefined"||ze==="boolean")&&(ge=null);var ht=!1;if(ge===null)ht=!0;else switch(ze){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(ge.$$typeof){case a:case e:ht=!0;break;case b:return ht=ge._init,xe(ht(ge._payload),Ee,ke,je,Ie)}}if(ht)return Ie=Ie(ge),ht=je===""?"."+ue(ge,0):je,z(Ie)?(ke="",ht!=null&&(ke=ht.replace(se,"$&/")+"/"),xe(Ie,Ee,ke,"",function(Nt){return Nt})):Ie!=null&&(ee(Ie)&&(Ie=ie(Ie,ke+(Ie.key==null||ge&&ge.key===Ie.key?"":(""+Ie.key).replace(se,"$&/")+"/")+ht)),Ee.push(Ie)),1;ht=0;var lt=je===""?".":je+":";if(z(ge))for(var yt=0;yt<ge.length;yt++)je=ge[yt],ze=lt+ue(je,yt),ht+=xe(je,Ee,ke,ze,Ie);else if(yt=C(ge),typeof yt=="function")for(ge=yt.call(ge),yt=0;!(je=ge.next()).done;)je=je.value,ze=lt+ue(je,yt++),ht+=xe(je,Ee,ke,ze,Ie);else if(ze==="object"){if(typeof ge.then=="function")return xe(pe(ge),Ee,ke,je,Ie);throw Ee=String(ge),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(ge).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.")}return ht}function ce(ge,Ee,ke){if(ge==null)return ge;var je=[],Ie=0;return xe(ge,je,"","",function(ze){return Ee.call(ke,ze,Ie++)}),je}function _e(ge){if(ge._status===-1){var Ee=ge._result;Ee=Ee(),Ee.then(function(ke){(ge._status===0||ge._status===-1)&&(ge._status=1,ge._result=ke)},function(ke){(ge._status===0||ge._status===-1)&&(ge._status=2,ge._result=ke)}),ge._status===-1&&(ge._status=0,ge._result=Ee)}if(ge._status===1)return ge._result.default;throw ge._result}var ye=typeof reportError=="function"?reportError:function(ge){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ge=="object"&&ge!==null&&typeof ge.message=="string"?String(ge.message):String(ge),error:ge});if(!window.dispatchEvent(Ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ge);return}console.error(ge)};function Oe(){}return Pr.Children={map:ce,forEach:function(ge,Ee,ke){ce(ge,function(){Ee.apply(this,arguments)},ke)},count:function(ge){var Ee=0;return ce(ge,function(){Ee++}),Ee},toArray:function(ge){return ce(ge,function(Ee){return Ee})||[]},only:function(ge){if(!ee(ge))throw Error("React.Children.only expected to receive a single React element child.");return ge}},Pr.Component=U,Pr.Fragment=i,Pr.Profiler=s,Pr.PureComponent=H,Pr.StrictMode=r,Pr.Suspense=g,Pr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Pr.__COMPILER_RUNTIME={__proto__:null,c:function(ge){return W.H.useMemoCache(ge)}},Pr.cache=function(ge){return function(){return ge.apply(null,arguments)}},Pr.cloneElement=function(ge,Ee,ke){if(ge==null)throw Error("The argument must be a React element, but you passed "+ge+".");var je=F({},ge.props),Ie=ge.key,ze=void 0;if(Ee!=null)for(ht in Ee.ref!==void 0&&(ze=void 0),Ee.key!==void 0&&(Ie=""+Ee.key),Ee)!j.call(Ee,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&Ee.ref===void 0||(je[ht]=Ee[ht]);var ht=arguments.length-2;if(ht===1)je.children=ke;else if(1<ht){for(var lt=Array(ht),yt=0;yt<ht;yt++)lt[yt]=arguments[yt+2];je.children=lt}return J(ge.type,Ie,void 0,void 0,ze,je)},Pr.createContext=function(ge){return ge={$$typeof:u,_currentValue:ge,_currentValue2:ge,_threadCount:0,Provider:null,Consumer:null},ge.Provider=ge,ge.Consumer={$$typeof:l,_context:ge},ge},Pr.createElement=function(ge,Ee,ke){var je,Ie={},ze=null;if(Ee!=null)for(je in Ee.key!==void 0&&(ze=""+Ee.key),Ee)j.call(Ee,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(Ie[je]=Ee[je]);var ht=arguments.length-2;if(ht===1)Ie.children=ke;else if(1<ht){for(var lt=Array(ht),yt=0;yt<ht;yt++)lt[yt]=arguments[yt+2];Ie.children=lt}if(ge&&ge.defaultProps)for(je in ht=ge.defaultProps,ht)Ie[je]===void 0&&(Ie[je]=ht[je]);return J(ge,ze,void 0,void 0,null,Ie)},Pr.createRef=function(){return{current:null}},Pr.forwardRef=function(ge){return{$$typeof:A,render:ge}},Pr.isValidElement=ee,Pr.lazy=function(ge){return{$$typeof:b,_payload:{_status:-1,_result:ge},_init:_e}},Pr.memo=function(ge,Ee){return{$$typeof:_,type:ge,compare:Ee===void 0?null:Ee}},Pr.startTransition=function(ge){var Ee=W.T,ke={};W.T=ke;try{var je=ge(),Ie=W.S;Ie!==null&&Ie(ke,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Oe,ye)}catch(ze){ye(ze)}finally{W.T=Ee}},Pr.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Pr.use=function(ge){return W.H.use(ge)},Pr.useActionState=function(ge,Ee,ke){return W.H.useActionState(ge,Ee,ke)},Pr.useCallback=function(ge,Ee){return W.H.useCallback(ge,Ee)},Pr.useContext=function(ge){return W.H.useContext(ge)},Pr.useDebugValue=function(){},Pr.useDeferredValue=function(ge,Ee){return W.H.useDeferredValue(ge,Ee)},Pr.useEffect=function(ge,Ee,ke){var je=W.H;if(typeof ke=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return je.useEffect(ge,Ee)},Pr.useId=function(){return W.H.useId()},Pr.useImperativeHandle=function(ge,Ee,ke){return W.H.useImperativeHandle(ge,Ee,ke)},Pr.useInsertionEffect=function(ge,Ee){return W.H.useInsertionEffect(ge,Ee)},Pr.useLayoutEffect=function(ge,Ee){return W.H.useLayoutEffect(ge,Ee)},Pr.useMemo=function(ge,Ee){return W.H.useMemo(ge,Ee)},Pr.useOptimistic=function(ge,Ee){return W.H.useOptimistic(ge,Ee)},Pr.useReducer=function(ge,Ee,ke){return W.H.useReducer(ge,Ee,ke)},Pr.useRef=function(ge){return W.H.useRef(ge)},Pr.useState=function(ge){return W.H.useState(ge)},Pr.useSyncExternalStore=function(ge,Ee,ke){return W.H.useSyncExternalStore(ge,Ee,ke)},Pr.useTransition=function(){return W.H.useTransition()},Pr.version="19.1.0",Pr}var gK;function Tz(){return gK||(gK=1,NN.exports=D0e()),NN.exports}var Ce=Tz();const Ye=Qne(Ce),F0e=T0e({__proto__:null,default:Ye},[Ce]);var HN={exports:{}},$2={},zN={exports:{}},GN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mK;function U0e(){return mK||(mK=1,function(a){function e(ce,_e){var ye=ce.length;ce.push(_e);e:for(;0<ye;){var Oe=ye-1>>>1,ge=ce[Oe];if(0<s(ge,_e))ce[Oe]=_e,ce[ye]=ge,ye=Oe;else break e}}function i(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var _e=ce[0],ye=ce.pop();if(ye!==_e){ce[0]=ye;e:for(var Oe=0,ge=ce.length,Ee=ge>>>1;Oe<Ee;){var ke=2*(Oe+1)-1,je=ce[ke],Ie=ke+1,ze=ce[Ie];if(0>s(je,ye))Ie<ge&&0>s(ze,je)?(ce[Oe]=ze,ce[Ie]=ye,Oe=Ie):(ce[Oe]=je,ce[ke]=ye,Oe=ke);else if(Ie<ge&&0>s(ze,ye))ce[Oe]=ze,ce[Ie]=ye,Oe=Ie;else break e}}return _e}function s(ce,_e){var ye=ce.sortIndex-_e.sortIndex;return ye!==0?ye:ce.id-_e.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var u=Date,A=u.now();a.unstable_now=function(){return u.now()-A}}var g=[],_=[],b=1,x=null,C=3,I=!1,F=!1,L=!1,U=!1,P=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function z(ce){for(var _e=i(_);_e!==null;){if(_e.callback===null)r(_);else if(_e.startTime<=ce)r(_),_e.sortIndex=_e.expirationTime,e(g,_e);else break;_e=i(_)}}function W(ce){if(L=!1,z(ce),!F)if(i(g)!==null)F=!0,j||(j=!0,ue());else{var _e=i(_);_e!==null&&xe(W,_e.startTime-ce)}}var j=!1,J=-1,ie=5,ee=-1;function re(){return U?!0:!(a.unstable_now()-ee<ie)}function se(){if(U=!1,j){var ce=a.unstable_now();ee=ce;var _e=!0;try{e:{F=!1,L&&(L=!1,H(J),J=-1),I=!0;var ye=C;try{t:{for(z(ce),x=i(g);x!==null&&!(x.expirationTime>ce&&re());){var Oe=x.callback;if(typeof Oe=="function"){x.callback=null,C=x.priorityLevel;var ge=Oe(x.expirationTime<=ce);if(ce=a.unstable_now(),typeof ge=="function"){x.callback=ge,z(ce),_e=!0;break t}x===i(g)&&r(g),z(ce)}else r(g);x=i(g)}if(x!==null)_e=!0;else{var Ee=i(_);Ee!==null&&xe(W,Ee.startTime-ce),_e=!1}}break e}finally{x=null,C=ye,I=!1}_e=void 0}}finally{_e?ue():j=!1}}}var ue;if(typeof N=="function")ue=function(){N(se)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,pe=fe.port2;fe.port1.onmessage=se,ue=function(){pe.postMessage(null)}}else ue=function(){P(se,0)};function xe(ce,_e){J=P(function(){ce(a.unstable_now())},_e)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ce){ce.callback=null},a.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<ce?Math.floor(1e3/ce):5},a.unstable_getCurrentPriorityLevel=function(){return C},a.unstable_next=function(ce){switch(C){case 1:case 2:case 3:var _e=3;break;default:_e=C}var ye=C;C=_e;try{return ce()}finally{C=ye}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(ce,_e){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ye=C;C=ce;try{return _e()}finally{C=ye}},a.unstable_scheduleCallback=function(ce,_e,ye){var Oe=a.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Oe+ye:Oe):ye=Oe,ce){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ye+ge,ce={id:b++,callback:_e,priorityLevel:ce,startTime:ye,expirationTime:ge,sortIndex:-1},ye>Oe?(ce.sortIndex=ye,e(_,ce),i(g)===null&&ce===i(_)&&(L?(H(J),J=-1):L=!0,xe(W,ye-Oe))):(ce.sortIndex=ge,e(g,ce),F||I||(F=!0,j||(j=!0,ue()))),ce},a.unstable_shouldYield=re,a.unstable_wrapCallback=function(ce){var _e=C;return function(){var ye=C;C=_e;try{return ce.apply(this,arguments)}finally{C=ye}}}}(GN)),GN}var _K;function k0e(){return _K||(_K=1,zN.exports=U0e()),zN.exports}var VN={exports:{}},Lh={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vK;function L0e(){if(vK)return Lh;vK=1;var a=Tz();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,_,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:g,containerInfo:_,implementation:b}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Lh.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Lh.createPortal=function(g,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return l(g,_,null,b)},Lh.flushSync=function(g){var _=u.T,b=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=_,r.p=b,r.d.f()}},Lh.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},Lh.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Lh.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var b=_.as,x=A(b,_.crossOrigin),C=typeof _.integrity=="string"?_.integrity:void 0,I=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:x,integrity:C,fetchPriority:I}):b==="script"&&r.d.X(g,{crossOrigin:x,integrity:C,fetchPriority:I,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Lh.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=A(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},Lh.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,x=A(b,_.crossOrigin);r.d.L(g,b,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Lh.preloadModule=function(g,_){if(typeof g=="string")if(_){var b=A(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},Lh.requestFormReset=function(g){r.d.r(g)},Lh.unstable_batchedUpdates=function(g,_){return g(_)},Lh.useFormState=function(g,_,b){return u.H.useFormState(g,_,b)},Lh.useFormStatus=function(){return u.H.useHostTransitionStatus()},Lh.version="19.1.0",Lh}var yK;function Nne(){if(yK)return VN.exports;yK=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),VN.exports=L0e(),VN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bK;function P0e(){if(bK)return $2;bK=1;var a=k0e(),e=Tz(),i=Nne();function r(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function l(m){var y=m,T=m;if(m.alternate)for(;y.return;)y=y.return;else{m=y;do y=m,(y.flags&4098)!==0&&(T=y.return),m=y.return;while(m)}return y.tag===3?T:null}function u(m){if(m.tag===13){var y=m.memoizedState;if(y===null&&(m=m.alternate,m!==null&&(y=m.memoizedState)),y!==null)return y.dehydrated}return null}function A(m){if(l(m)!==m)throw Error(r(188))}function g(m){var y=m.alternate;if(!y){if(y=l(m),y===null)throw Error(r(188));return y!==m?null:m}for(var T=m,k=y;;){var q=T.return;if(q===null)break;var Y=q.alternate;if(Y===null){if(k=q.return,k!==null){T=k;continue}break}if(q.child===Y.child){for(Y=q.child;Y;){if(Y===T)return A(q),m;if(Y===k)return A(q),y;Y=Y.sibling}throw Error(r(188))}if(T.return!==k.return)T=q,k=Y;else{for(var be=!1,Ue=q.child;Ue;){if(Ue===T){be=!0,T=q,k=Y;break}if(Ue===k){be=!0,k=q,T=Y;break}Ue=Ue.sibling}if(!be){for(Ue=Y.child;Ue;){if(Ue===T){be=!0,T=Y,k=q;break}if(Ue===k){be=!0,k=Y,T=q;break}Ue=Ue.sibling}if(!be)throw Error(r(189))}}if(T.alternate!==k)throw Error(r(190))}if(T.tag!==3)throw Error(r(188));return T.stateNode.current===T?m:y}function _(m){var y=m.tag;if(y===5||y===26||y===27||y===6)return m;for(m=m.child;m!==null;){if(y=_(m),y!==null)return y;m=m.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),N=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function ue(m){return m===null||typeof m!="object"?null:(m=se&&m[se]||m["@@iterator"],typeof m=="function"?m:null)}var fe=Symbol.for("react.client.reference");function pe(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===fe?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case F:return"Fragment";case U:return"Profiler";case L:return"StrictMode";case W:return"Suspense";case j:return"SuspenseList";case ee:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case I:return"Portal";case N:return(m.displayName||"Context")+".Provider";case H:return(m._context.displayName||"Context")+".Consumer";case z:var y=m.render;return m=m.displayName,m||(m=y.displayName||y.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case J:return y=m.displayName||null,y!==null?y:pe(m.type)||"Memo";case ie:y=m._payload,m=m._init;try{return pe(m(y))}catch{}}return null}var xe=Array.isArray,ce=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Oe=[],ge=-1;function Ee(m){return{current:m}}function ke(m){0>ge||(m.current=Oe[ge],Oe[ge]=null,ge--)}function je(m,y){ge++,Oe[ge]=m.current,m.current=y}var Ie=Ee(null),ze=Ee(null),ht=Ee(null),lt=Ee(null);function yt(m,y){switch(je(ht,y),je(ze,m),je(Ie,null),y.nodeType){case 9:case 11:m=(m=y.documentElement)&&(m=m.namespaceURI)?BM(m):0;break;default:if(m=y.tagName,y=y.namespaceURI)y=BM(y),m=IM(y,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}ke(Ie),je(Ie,m)}function Nt(){ke(Ie),ke(ze),ke(ht)}function zt(m){m.memoizedState!==null&&je(lt,m);var y=Ie.current,T=IM(y,m.type);y!==T&&(je(ze,m),je(Ie,T))}function ei(m){ze.current===m&&(ke(Ie),ke(ze)),lt.current===m&&(ke(lt),I0._currentValue=ye)}var it=Object.prototype.hasOwnProperty,Dt=a.unstable_scheduleCallback,Be=a.unstable_cancelCallback,li=a.unstable_shouldYield,bt=a.unstable_requestPaint,Wt=a.unstable_now,qe=a.unstable_getCurrentPriorityLevel,pt=a.unstable_ImmediatePriority,At=a.unstable_UserBlockingPriority,Se=a.unstable_NormalPriority,me=a.unstable_LowPriority,$e=a.unstable_IdlePriority,Ct=a.log,wt=a.unstable_setDisableYieldValue,ft=null,Ot=null;function Gt(m){if(typeof Ct=="function"&&wt(m),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(ft,m)}catch{}}var si=Math.clz32?Math.clz32:gi,$t=Math.log,ti=Math.LN2;function gi(m){return m>>>=0,m===0?32:31-($t(m)/ti|0)|0}var mi=256,Oi=4194304;function Bi(m){var y=m&42;if(y!==0)return y;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function ln(m,y,T){var k=m.pendingLanes;if(k===0)return 0;var q=0,Y=m.suspendedLanes,be=m.pingedLanes;m=m.warmLanes;var Ue=k&134217727;return Ue!==0?(k=Ue&~Y,k!==0?q=Bi(k):(be&=Ue,be!==0?q=Bi(be):T||(T=Ue&~m,T!==0&&(q=Bi(T))))):(Ue=k&~Y,Ue!==0?q=Bi(Ue):be!==0?q=Bi(be):T||(T=k&~m,T!==0&&(q=Bi(T)))),q===0?0:y!==0&&y!==q&&(y&Y)===0&&(Y=q&-q,T=y&-y,Y>=T||Y===32&&(T&4194048)!==0)?y:q}function Ji(m,y){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&y)===0}function Vi(m,y){switch(m){case 1:case 2:case 4:case 8:case 64:return y+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function at(){var m=mi;return mi<<=1,(mi&4194048)===0&&(mi=256),m}function Ti(){var m=Oi;return Oi<<=1,(Oi&62914560)===0&&(Oi=4194304),m}function Pt(m){for(var y=[],T=0;31>T;T++)y.push(m);return y}function Xt(m,y){m.pendingLanes|=y,y!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function Mi(m,y,T,k,q,Y){var be=m.pendingLanes;m.pendingLanes=T,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=T,m.entangledLanes&=T,m.errorRecoveryDisabledLanes&=T,m.shellSuspendCounter=0;var Ue=m.entanglements,rt=m.expirationTimes,Ft=m.hiddenUpdates;for(T=be&~T;0<T;){var di=31-si(T),fi=1<<di;Ue[di]=0,rt[di]=-1;var Yt=Ft[di];if(Yt!==null)for(Ft[di]=null,di=0;di<Yt.length;di++){var ii=Yt[di];ii!==null&&(ii.lane&=-536870913)}T&=~fi}k!==0&&Ii(m,k,0),Y!==0&&q===0&&m.tag!==0&&(m.suspendedLanes|=Y&~(be&~y))}function Ii(m,y,T){m.pendingLanes|=y,m.suspendedLanes&=~y;var k=31-si(y);m.entangledLanes|=y,m.entanglements[k]=m.entanglements[k]|1073741824|T&4194090}function Fi(m,y){var T=m.entangledLanes|=y;for(m=m.entanglements;T;){var k=31-si(T),q=1<<k;q&y|m[k]&y&&(m[k]|=y),T&=~q}}function vn(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function Xn(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function Tn(){var m=_e.p;return m!==0?m:(m=window.event,m===void 0?32:Lx(m.type))}function cr(m,y){var T=_e.p;try{return _e.p=m,y()}finally{_e.p=T}}var gr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+gr,$n="__reactProps$"+gr,co="__reactContainer$"+gr,Ka="__reactEvents$"+gr,Zu="__reactListeners$"+gr,fl="__reactHandles$"+gr,Ql="__reactResources$"+gr,Nc="__reactMarker$"+gr;function eh(m){delete m[Xr],delete m[$n],delete m[Ka],delete m[Zu],delete m[fl]}function Hc(m){var y=m[Xr];if(y)return y;for(var T=m.parentNode;T;){if(y=T[co]||T[Xr]){if(T=y.alternate,y.child!==null||T!==null&&T.child!==null)for(m=RM(m);m!==null;){if(T=m[Xr])return T;m=RM(m)}return y}m=T,T=m.parentNode}return null}function Fs(m){if(m=m[Xr]||m[co]){var y=m.tag;if(y===5||y===6||y===13||y===26||y===27||y===3)return m}return null}function ys(m){var y=m.tag;if(y===5||y===26||y===27||y===6)return m.stateNode;throw Error(r(33))}function Nl(m){var y=m[Ql];return y||(y=m[Ql]={hoistableStyles:new Map,hoistableScripts:new Map}),y}function Hi(m){m[Nc]=!0}var gl=new Set,oa={};function uo(m,y){Le(m,y),Le(m+"Capture",y)}function Le(m,y){for(oa[m]=y,m=0;m<y.length;m++)gl.add(y[m])}var Et=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},kt={};function St(m){return it.call(kt,m)?!0:it.call(Vt,m)?!1:Et.test(m)?kt[m]=!0:(Vt[m]=!0,!1)}function pi(m,y,T){if(St(y))if(T===null)m.removeAttribute(y);else{switch(typeof T){case"undefined":case"function":case"symbol":m.removeAttribute(y);return;case"boolean":var k=y.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){m.removeAttribute(y);return}}m.setAttribute(y,""+T)}}function Ui(m,y,T){if(T===null)m.removeAttribute(y);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(y);return}m.setAttribute(y,""+T)}}function ki(m,y,T,k){if(k===null)m.removeAttribute(T);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(T);return}m.setAttributeNS(y,T,""+k)}}var Ci,yn;function en(m){if(Ci===void 0)try{throw Error()}catch(T){var y=T.stack.trim().match(/\n( *(at )?)/);Ci=y&&y[1]||"",yn=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ci+m+yn}var Qi=!1;function Wn(m,y){if(!m||Qi)return"";Qi=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(y){var fi=function(){throw Error()};if(Object.defineProperty(fi.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fi,[])}catch(ii){var Yt=ii}Reflect.construct(m,[],fi)}else{try{fi.call()}catch(ii){Yt=ii}m.call(fi.prototype)}}else{try{throw Error()}catch(ii){Yt=ii}(fi=m())&&typeof fi.catch=="function"&&fi.catch(function(){})}}catch(ii){if(ii&&Yt&&typeof ii.stack=="string")return[ii.stack,Yt.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var q=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");q&&q.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=k.DetermineComponentFrameRoot(),be=Y[0],Ue=Y[1];if(be&&Ue){var rt=be.split(`
`),Ft=Ue.split(`
`);for(q=k=0;k<rt.length&&!rt[k].includes("DetermineComponentFrameRoot");)k++;for(;q<Ft.length&&!Ft[q].includes("DetermineComponentFrameRoot");)q++;if(k===rt.length||q===Ft.length)for(k=rt.length-1,q=Ft.length-1;1<=k&&0<=q&&rt[k]!==Ft[q];)q--;for(;1<=k&&0<=q;k--,q--)if(rt[k]!==Ft[q]){if(k!==1||q!==1)do if(k--,q--,0>q||rt[k]!==Ft[q]){var di=`
`+rt[k].replace(" at new "," at ");return m.displayName&&di.includes("<anonymous>")&&(di=di.replace("<anonymous>",m.displayName)),di}while(1<=k&&0<=q);break}}}finally{Qi=!1,Error.prepareStackTrace=T}return(T=m?m.displayName||m.name:"")?en(T):""}function Cr(m){switch(m.tag){case 26:case 27:case 5:return en(m.type);case 16:return en("Lazy");case 13:return en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return Wn(m.type,!1);case 11:return Wn(m.type.render,!1);case 1:return Wn(m.type,!0);case 31:return en("Activity");default:return""}}function Yr(m){try{var y="";do y+=Cr(m),m=m.return;while(m);return y}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function sr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function xn(m){var y=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Xi(m){var y=xn(m)?"checked":"value",T=Object.getOwnPropertyDescriptor(m.constructor.prototype,y),k=""+m[y];if(!m.hasOwnProperty(y)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var q=T.get,Y=T.set;return Object.defineProperty(m,y,{configurable:!0,get:function(){return q.call(this)},set:function(be){k=""+be,Y.call(this,be)}}),Object.defineProperty(m,y,{enumerable:T.enumerable}),{getValue:function(){return k},setValue:function(be){k=""+be},stopTracking:function(){m._valueTracker=null,delete m[y]}}}}function jn(m){m._valueTracker||(m._valueTracker=Xi(m))}function ar(m){if(!m)return!1;var y=m._valueTracker;if(!y)return!0;var T=y.getValue(),k="";return m&&(k=xn(m)?m.checked?"true":"false":m.value),m=k,m!==T?(y.setValue(m),!0):!1}function Wo(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var Ua=/[\n"\\]/g;function fn(m){return m.replace(Ua,function(y){return"\\"+y.charCodeAt(0).toString(16)+" "})}function Xa(m,y,T,k,q,Y,be,Ue){m.name="",be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?m.type=be:m.removeAttribute("type"),y!=null?be==="number"?(y===0&&m.value===""||m.value!=y)&&(m.value=""+sr(y)):m.value!==""+sr(y)&&(m.value=""+sr(y)):be!=="submit"&&be!=="reset"||m.removeAttribute("value"),y!=null?Ss(m,be,sr(y)):T!=null?Ss(m,be,sr(T)):k!=null&&m.removeAttribute("value"),q==null&&Y!=null&&(m.defaultChecked=!!Y),q!=null&&(m.checked=q&&typeof q!="function"&&typeof q!="symbol"),Ue!=null&&typeof Ue!="function"&&typeof Ue!="symbol"&&typeof Ue!="boolean"?m.name=""+sr(Ue):m.removeAttribute("name")}function Er(m,y,T,k,q,Y,be,Ue){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(m.type=Y),y!=null||T!=null){if(!(Y!=="submit"&&Y!=="reset"||y!=null))return;T=T!=null?""+sr(T):"",y=y!=null?""+sr(y):T,Ue||y===m.value||(m.value=y),m.defaultValue=y}k=k??q,k=typeof k!="function"&&typeof k!="symbol"&&!!k,m.checked=Ue?m.checked:!!k,m.defaultChecked=!!k,be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"&&(m.name=be)}function Ss(m,y,T){y==="number"&&Wo(m.ownerDocument)===m||m.defaultValue===""+T||(m.defaultValue=""+T)}function Qs(m,y,T,k){if(m=m.options,y){y={};for(var q=0;q<T.length;q++)y["$"+T[q]]=!0;for(T=0;T<m.length;T++)q=y.hasOwnProperty("$"+m[T].value),m[T].selected!==q&&(m[T].selected=q),q&&k&&(m[T].defaultSelected=!0)}else{for(T=""+sr(T),y=null,q=0;q<m.length;q++){if(m[q].value===T){m[q].selected=!0,k&&(m[q].defaultSelected=!0);return}y!==null||m[q].disabled||(y=m[q])}y!==null&&(y.selected=!0)}}function ns(m,y,T){if(y!=null&&(y=""+sr(y),y!==m.value&&(m.value=y),T==null)){m.defaultValue!==y&&(m.defaultValue=y);return}m.defaultValue=T!=null?""+sr(T):""}function So(m,y,T,k){if(y==null){if(k!=null){if(T!=null)throw Error(r(92));if(xe(k)){if(1<k.length)throw Error(r(93));k=k[0]}T=k}T==null&&(T=""),y=T}T=sr(y),m.defaultValue=T,k=m.textContent,k===T&&k!==""&&k!==null&&(m.value=k)}function Ya(m,y){if(y){var T=m.firstChild;if(T&&T===m.lastChild&&T.nodeType===3){T.nodeValue=y;return}}m.textContent=y}var aa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(m,y,T){var k=y.indexOf("--")===0;T==null||typeof T=="boolean"||T===""?k?m.setProperty(y,""):y==="float"?m.cssFloat="":m[y]="":k?m.setProperty(y,T):typeof T!="number"||T===0||aa.has(y)?y==="float"?m.cssFloat=T:m[y]=(""+T).trim():m[y]=T+"px"}function _u(m,y,T){if(y!=null&&typeof y!="object")throw Error(r(62));if(m=m.style,T!=null){for(var k in T)!T.hasOwnProperty(k)||y!=null&&y.hasOwnProperty(k)||(k.indexOf("--")===0?m.setProperty(k,""):k==="float"?m.cssFloat="":m[k]="");for(var q in y)k=y[q],y.hasOwnProperty(q)&&T[q]!==k&&zc(m,q,k)}else for(var Y in y)y.hasOwnProperty(Y)&&zc(m,Y,y[Y])}function Wh(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function th(m){return kA.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}var LA=null;function ih(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var pc=null,vu=null;function Ja(m){var y=Fs(m);if(y&&(m=y.stateNode)){var T=m[$n]||null;e:switch(m=y.stateNode,y.type){case"input":if(Xa(m,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name),y=T.name,T.type==="radio"&&y!=null){for(T=m;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll('input[name="'+fn(""+y)+'"][type="radio"]'),y=0;y<T.length;y++){var k=T[y];if(k!==m&&k.form===m.form){var q=k[$n]||null;if(!q)throw Error(r(90));Xa(k,q.value,q.defaultValue,q.defaultValue,q.checked,q.defaultChecked,q.type,q.name)}}for(y=0;y<T.length;y++)k=T[y],k.form===m.form&&ar(k)}break e;case"textarea":ns(m,T.value,T.defaultValue);break e;case"select":y=T.value,y!=null&&Qs(m,!!T.multiple,y,!1)}}}var PA=!1;function Uf(m,y,T){if(PA)return m(y,T);PA=!0;try{var k=m(y);return k}finally{if(PA=!1,(pc!==null||vu!==null)&&(dt(),pc&&(y=pc,m=vu,vu=pc=null,Ja(y),m)))for(y=0;y<m.length;y++)Ja(m[y])}}function Kh(m,y){var T=m.stateNode;if(T===null)return null;var k=T[$n]||null;if(k===null)return null;T=k[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(m=m.type,k=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!k;break e;default:m=!1}if(m)return null;if(T&&typeof T!="function")throw Error(r(231,y,typeof T));return T}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$d=!1;if(jo)try{var yu={};Object.defineProperty(yu,"passive",{get:function(){$d=!0}}),window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{$d=!1}var ml=null,nh=null,_l=null;function _p(){if(_l)return _l;var m,y=nh,T=y.length,k,q="value"in ml?ml.value:ml.textContent,Y=q.length;for(m=0;m<T&&y[m]===q[m];m++);var be=T-m;for(k=1;k<=be&&y[T-k]===q[Y-k];k++);return _l=q.slice(m,1<k?1-k:void 0)}function Xh(m){var y=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&y===13&&(m=13)):m=y,m===10&&(m=13),32<=m||m===13?m:0}function Hl(){return!0}function bu(){return!1}function Uo(m){function y(T,k,q,Y,be){this._reactName=T,this._targetInst=q,this.type=k,this.nativeEvent=Y,this.target=be,this.currentTarget=null;for(var Ue in m)m.hasOwnProperty(Ue)&&(T=m[Ue],this[Ue]=T?T(Y):Y[Ue]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?Hl:bu,this.isPropagationStopped=bu,this}return b(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Hl)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Hl)},persist:function(){},isPersistent:Hl}),y}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yh=Uo(vl),ko=b({},vl,{view:0,detail:0}),la=Uo(ko),Jh,Zh,Gc,rh=b({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ed,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Gc&&(Gc&&m.type==="mousemove"?(Jh=m.screenX-Gc.screenX,Zh=m.screenY-Gc.screenY):Zh=Jh=0,Gc=m),Jh)},movementY:function(m){return"movementY"in m?m.movementY:Zh}}),ca=Uo(rh),Lo=b({},rh,{dataTransfer:0}),Bo=Uo(Lo),Vc=b({},ko,{relatedTarget:0}),fc=Uo(Vc),Ns=b({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),bs=Uo(Ns),Ng=b({},vl,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Hg=Uo(Ng),zg=b({},vl,{data:0}),Is=Uo(zg),Gg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jw(m){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(m):(m=vp[m])?!!y[m]:!1}function ed(){return jw}var rb=b({},ko,{key:function(m){if(m.key){var y=Gg[m.key]||m.key;if(y!=="Unidentified")return y}return m.type==="keypress"?(m=Xh(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Jm[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ed,charCode:function(m){return m.type==="keypress"?Xh(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Xh(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Kw=Uo(rb),yp=b({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=Uo(yp),sb=b({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ed}),ob=Uo(sb),kf=b({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zm=Uo(kf),sh=b({},rh,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),ka=Uo(sh),qc=b({},vl,{newState:0,oldState:0}),yl=Uo(qc),jv=[9,13,27,32],td=jo&&"CompositionEvent"in window,oh=null;jo&&"documentMode"in document&&(oh=document.documentMode);var $c=jo&&"TextEvent"in window&&!oh,ua=jo&&(!td||oh&&8<oh&&11>=oh),zl=" ",Lf=!1;function Wc(m,y){switch(m){case"keyup":return jv.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ds(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var jd=!1;function Cn(m,y){switch(m){case"compositionend":return ds(y);case"keypress":return y.which!==32?null:(Lf=!0,zl);case"textInput":return m=y.data,m===zl&&Lf?null:m;default:return null}}function On(m,y){if(jd)return m==="compositionend"||!td&&Wc(m,y)?(m=_p(),_l=nh=ml=null,jd=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return ua&&y.locale!=="ko"?null:y.data;default:return null}}var Kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(m){var y=m&&m.nodeName&&m.nodeName.toLowerCase();return y==="input"?!!Kv[m.type]:y==="textarea"}function Kd(m,y,T,k){pc?vu?vu.push(k):vu=[k]:pc=k,y=Sx(y,"onChange"),0<y.length&&(T=new Yh("onChange","change",null,T,k),m.push({event:T,listeners:y}))}var Hs=null,qg=null;function Xv(m){JS(m,0)}function $g(m){var y=ys(m);if(ar(y))return m}function Pf(m,y){if(m==="change")return y}var wu=!1;if(jo){var Yv;if(jo){var Qr="oninput"in document;if(!Qr){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),Qr=typeof xu.oninput=="function"}Yv=Qr}else Yv=!1;wu=Yv&&(!document.documentMode||9<document.documentMode)}function Gl(){Hs&&(Hs.detachEvent("onpropertychange",bp),qg=Hs=null)}function bp(m){if(m.propertyName==="value"&&$g(qg)){var y=[];Kd(y,qg,m,ih(m)),Uf(Xv,y)}}function Xw(m,y,T){m==="focusin"?(Gl(),Hs=y,qg=T,Hs.attachEvent("onpropertychange",bp)):m==="focusout"&&Gl()}function Yw(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return $g(qg)}function e_(m,y){if(m==="click")return $g(y)}function t_(m,y){if(m==="input"||m==="change")return $g(y)}function Jv(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var Sr=typeof Object.is=="function"?Object.is:Jv;function Fr(m,y){if(Sr(m,y))return!0;if(typeof m!="object"||m===null||typeof y!="object"||y===null)return!1;var T=Object.keys(m),k=Object.keys(y);if(T.length!==k.length)return!1;for(k=0;k<T.length;k++){var q=T[k];if(!it.call(y,q)||!Sr(m[q],y[q]))return!1}return!0}function ab(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Io(m,y){var T=ab(m);m=0;for(var k;T;){if(T.nodeType===3){if(k=m+T.textContent.length,m<=y&&k>=y)return{node:T,offset:y-m};m=k}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=ab(T)}}function i_(m,y){return m&&y?m===y?!0:m&&m.nodeType===3?!1:y&&y.nodeType===3?i_(m,y.parentNode):"contains"in m?m.contains(y):m.compareDocumentPosition?!!(m.compareDocumentPosition(y)&16):!1:!1}function Zv(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var y=Wo(m.document);y instanceof m.HTMLIFrameElement;){try{var T=typeof y.contentWindow.location.href=="string"}catch{T=!1}if(T)m=y.contentWindow;else break;y=Wo(m.document)}return y}function ha(m){var y=m&&m.nodeName&&m.nodeName.toLowerCase();return y&&(y==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||y==="textarea"||m.contentEditable==="true")}var Ke=jo&&"documentMode"in document&&11>=document.documentMode,OA=null,Vl=null,da=null,La=!1;function bl(m,y,T){var k=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;La||OA==null||OA!==Wo(k)||(k=OA,"selectionStart"in k&&ha(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),da&&Fr(da,k)||(da=k,k=Sx(Vl,"onSelect"),0<k.length&&(y=new Yh("onSelect","select",null,y,T),m.push({event:y,listeners:k}),y.target=OA)))}function ql(m,y){var T={};return T[m.toLowerCase()]=y.toLowerCase(),T["Webkit"+m]="webkit"+y,T["Moz"+m]="moz"+y,T}var Cu={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionrun:ql("Transition","TransitionRun"),transitionstart:ql("Transition","TransitionStart"),transitioncancel:ql("Transition","TransitionCancel"),transitionend:ql("Transition","TransitionEnd")},Xd={},jc={};jo&&(jc=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function gc(m){if(Xd[m])return Xd[m];if(!Cu[m])return m;var y=Cu[m],T;for(T in y)if(y.hasOwnProperty(T)&&T in jc)return Xd[m]=y[T];return m}var Kc=gc("animationend"),ah=gc("animationiteration"),lh=gc("animationstart"),n_=gc("transitionrun"),r_=gc("transitionstart"),QA=gc("transitioncancel"),s_=gc("transitionend"),o_=new Map,wp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wp.push("scrollEnd");function mc(m,y){o_.set(m,y),uo(y,[m])}var _c=new WeakMap;function Po(m,y){if(typeof m=="object"&&m!==null){var T=_c.get(m);return T!==void 0?T:(y={value:m,source:y,stack:Yr(y)},_c.set(m,y),y)}return{value:m,source:y,stack:Yr(y)}}var vc=[],id=0,Oo=0;function Of(){for(var m=id,y=Oo=id=0;y<m;){var T=vc[y];vc[y++]=null;var k=vc[y];vc[y++]=null;var q=vc[y];vc[y++]=null;var Y=vc[y];if(vc[y++]=null,k!==null&&q!==null){var be=k.pending;be===null?q.next=q:(q.next=be.next,be.next=q),k.pending=q}Y!==0&&nn(T,q,Y)}}function Ko(m,y,T,k){vc[id++]=m,vc[id++]=y,vc[id++]=T,vc[id++]=k,Oo|=k,m.lanes|=k,m=m.alternate,m!==null&&(m.lanes|=k)}function Wg(m,y,T,k){return Ko(m,y,T,k),NA(m)}function ch(m,y){return Ko(m,null,null,y),NA(m)}function nn(m,y,T){m.lanes|=T;var k=m.alternate;k!==null&&(k.lanes|=T);for(var q=!1,Y=m.return;Y!==null;)Y.childLanes|=T,k=Y.alternate,k!==null&&(k.childLanes|=T),Y.tag===22&&(m=Y.stateNode,m===null||m._visibility&1||(q=!0)),m=Y,Y=Y.return;return m.tag===3?(Y=m.stateNode,q&&y!==null&&(q=31-si(T),m=Y.hiddenUpdates,k=m[q],k===null?m[q]=[y]:k.push(y),y.lane=T|536870912),Y):null}function NA(m){if(50<md)throw md=0,E=null,Error(r(185));for(var y=m.return;y!==null;)m=y,y=m.return;return m.tag===3?m.stateNode:null}var ho={};function Jw(m,y,T,k){this.tag=m,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yc(m,y,T,k){return new Jw(m,y,T,k)}function bc(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Eu(m,y){var T=m.alternate;return T===null?(T=yc(m.tag,y,m.key,m.mode),T.elementType=m.elementType,T.type=m.type,T.stateNode=m.stateNode,T.alternate=m,m.alternate=T):(T.pendingProps=y,T.type=m.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=m.flags&65011712,T.childLanes=m.childLanes,T.lanes=m.lanes,T.child=m.child,T.memoizedProps=m.memoizedProps,T.memoizedState=m.memoizedState,T.updateQueue=m.updateQueue,y=m.dependencies,T.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},T.sibling=m.sibling,T.index=m.index,T.ref=m.ref,T.refCleanup=m.refCleanup,T}function wc(m,y){m.flags&=65011714;var T=m.alternate;return T===null?(m.childLanes=0,m.lanes=y,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=T.childLanes,m.lanes=T.lanes,m.child=T.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=T.memoizedProps,m.memoizedState=T.memoizedState,m.updateQueue=T.updateQueue,m.type=T.type,y=T.dependencies,m.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),m}function jg(m,y,T,k,q,Y){var be=0;if(k=m,typeof m=="function")bc(m)&&(be=1);else if(typeof m=="string")be=nP(m,T,Ie.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case ee:return m=yc(31,T,y,q),m.elementType=ee,m.lanes=Y,m;case F:return HA(T.children,q,Y,y);case L:be=8,q|=24;break;case U:return m=yc(12,T,y,q|2),m.elementType=U,m.lanes=Y,m;case W:return m=yc(13,T,y,q),m.elementType=W,m.lanes=Y,m;case j:return m=yc(19,T,y,q),m.elementType=j,m.lanes=Y,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case P:case N:be=10;break e;case H:be=9;break e;case z:be=11;break e;case J:be=14;break e;case ie:be=16,k=null;break e}be=29,T=Error(r(130,m===null?"null":typeof m,"")),k=null}return y=yc(be,T,y,q),y.elementType=m,y.type=k,y.lanes=Y,y}function HA(m,y,T,k){return m=yc(7,m,k,y),m.lanes=T,m}function Za(m,y,T){return m=yc(6,m,null,y),m.lanes=T,m}function Qf(m,y,T){return y=yc(4,m.children!==null?m.children:[],m.key,y),y.lanes=T,y.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},y}var Kg=[],Nf=0,Yd=null,Su=0,Aa=[],Pa=0,xp=null,Jd=1,nd="";function Xc(m,y){Kg[Nf++]=Su,Kg[Nf++]=Yd,Yd=m,Su=y}function e0(m,y,T){Aa[Pa++]=Jd,Aa[Pa++]=nd,Aa[Pa++]=xp,xp=m;var k=Jd;m=nd;var q=32-si(k)-1;k&=~(1<<q),T+=1;var Y=32-si(y)+q;if(30<Y){var be=q-q%5;Y=(k&(1<<be)-1).toString(32),k>>=be,q-=be,Jd=1<<32-si(y)+q|T<<q|k,nd=Y+m}else Jd=1<<Y|T<<q|k,nd=m}function rs(m){m.return!==null&&(Xc(m,1),e0(m,1,0))}function a_(m){for(;m===Yd;)Yd=Kg[--Nf],Kg[Nf]=null,Su=Kg[--Nf],Kg[Nf]=null;for(;m===xp;)xp=Aa[--Pa],Aa[Pa]=null,nd=Aa[--Pa],Aa[Pa]=null,Jd=Aa[--Pa],Aa[Pa]=null}var pa=null,Zs=null,gn=!1,wl=null,el=!1,Hf=Error(r(519));function Qo(m){var y=Error(r(418,""));throw zA(Po(y,m)),Hf}function Cp(m){var y=m.stateNode,T=m.type,k=m.memoizedProps;switch(y[Xr]=m,y[$n]=k,T){case"dialog":Lr("cancel",y),Lr("close",y);break;case"iframe":case"object":case"embed":Lr("load",y);break;case"video":case"audio":for(T=0;T<k_.length;T++)Lr(k_[T],y);break;case"source":Lr("error",y);break;case"img":case"image":case"link":Lr("error",y),Lr("load",y);break;case"details":Lr("toggle",y);break;case"input":Lr("invalid",y),Er(y,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),jn(y);break;case"select":Lr("invalid",y);break;case"textarea":Lr("invalid",y),So(y,k.value,k.defaultValue,k.children),jn(y)}T=k.children,typeof T!="string"&&typeof T!="number"&&typeof T!="bigint"||y.textContent===""+T||k.suppressHydrationWarning===!0||iB(y.textContent,T)?(k.popover!=null&&(Lr("beforetoggle",y),Lr("toggle",y)),k.onScroll!=null&&Lr("scroll",y),k.onScrollEnd!=null&&Lr("scrollend",y),k.onClick!=null&&(y.onclick=_d),y=!0):y=!1,y||Qo(m)}function Zd(m){for(pa=m.return;pa;)switch(pa.tag){case 5:case 13:el=!1;return;case 27:case 3:el=!0;return;default:pa=pa.return}}function uh(m){if(m!==pa)return!1;if(!gn)return Zd(m),gn=!0,!1;var y=m.tag,T;if((T=y!==3&&y!==27)&&((T=y===5)&&(T=m.type,T=!(T!=="form"&&T!=="button")||nB(m.type,m.memoizedProps)),T=!T),T&&Zs&&Qo(m),Zd(m),y===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,y=0;m;){if(m.nodeType===8)if(T=m.data,T==="/$"){if(y===0){Zs=ep(m.nextSibling);break e}y--}else T!=="$"&&T!=="$!"&&T!=="$?"||y++;m=m.nextSibling}Zs=null}}else y===27?(y=Zs,pm(m.type)?(m=aB,aB=null,Zs=m):Zs=y):Zs=pa?ep(m.stateNode.nextSibling):null;return!0}function Ep(){Zs=pa=null,gn=!1}function Xg(){var m=wl;return m!==null&&(mo===null?mo=m:mo.push.apply(mo,m),wl=null),m}function zA(m){wl===null?wl=[m]:wl.push(m)}var l_=Ee(null),eA=null,hh=null;function No(m,y,T){je(l_,y._currentValue),y._currentValue=T}function rd(m){m._currentValue=l_.current,ke(l_)}function sd(m,y,T){for(;m!==null;){var k=m.alternate;if((m.childLanes&y)!==y?(m.childLanes|=y,k!==null&&(k.childLanes|=y)):k!==null&&(k.childLanes&y)!==y&&(k.childLanes|=y),m===T)break;m=m.return}}function Sp(m,y,T,k){var q=m.child;for(q!==null&&(q.return=m);q!==null;){var Y=q.dependencies;if(Y!==null){var be=q.child;Y=Y.firstContext;e:for(;Y!==null;){var Ue=Y;Y=q;for(var rt=0;rt<y.length;rt++)if(Ue.context===y[rt]){Y.lanes|=T,Ue=Y.alternate,Ue!==null&&(Ue.lanes|=T),sd(Y.return,T,m),k||(be=null);break e}Y=Ue.next}}else if(q.tag===18){if(be=q.return,be===null)throw Error(r(341));be.lanes|=T,Y=be.alternate,Y!==null&&(Y.lanes|=T),sd(be,T,m),be=null}else be=q.child;if(be!==null)be.return=q;else for(be=q;be!==null;){if(be===m){be=null;break}if(q=be.sibling,q!==null){q.return=be.return,be=q;break}be=be.return}q=be}}function GA(m,y,T,k){m=null;for(var q=y,Y=!1;q!==null;){if(!Y){if((q.flags&524288)!==0)Y=!0;else if((q.flags&262144)!==0)break}if(q.tag===10){var be=q.alternate;if(be===null)throw Error(r(387));if(be=be.memoizedProps,be!==null){var Ue=q.type;Sr(q.pendingProps.value,be.value)||(m!==null?m.push(Ue):m=[Ue])}}else if(q===lt.current){if(be=q.alternate,be===null)throw Error(r(387));be.memoizedState.memoizedState!==q.memoizedState.memoizedState&&(m!==null?m.push(I0):m=[I0])}q=q.return}m!==null&&Sp(y,m,T,k),y.flags|=262144}function an(m){for(m=m.firstContext;m!==null;){if(!Sr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function _n(m){eA=m,hh=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function $l(m){return Wl(eA,m)}function Us(m,y){return eA===null&&_n(m),Wl(m,y)}function Wl(m,y){var T=y._currentValue;if(y={context:y,memoizedValue:T,next:null},hh===null){if(m===null)throw Error(r(308));hh=y,m.dependencies={lanes:0,firstContext:y},m.flags|=524288}else hh=hh.next=y;return T}var t0=typeof AbortController<"u"?AbortController:function(){var m=[],y=this.signal={aborted:!1,addEventListener:function(T,k){m.push(k)}};this.abort=function(){y.aborted=!0,m.forEach(function(T){return T()})}},zf=a.unstable_scheduleCallback,eo=a.unstable_NormalPriority,ks={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ls(){return{controller:new t0,data:new Map,refCount:0}}function Bp(m){m.refCount--,m.refCount===0&&zf(eo,function(){m.controller.abort()})}var Yg=null,fa=0,Bu=0,Oa=null;function c_(m,y){if(Yg===null){var T=Yg=[];fa=0,Bu=wx(),Oa={status:"pending",value:void 0,then:function(k){T.push(k)}}}return fa++,y.then(VA,VA),y}function VA(){if(--fa===0&&Yg!==null){Oa!==null&&(Oa.status="fulfilled");var m=Yg;Yg=null,Bu=0,Oa=null;for(var y=0;y<m.length;y++)(0,m[y])()}}function xc(m,y){var T=[],k={status:"pending",value:null,reason:null,then:function(q){T.push(q)}};return m.then(function(){k.status="fulfilled",k.value=y;for(var q=0;q<T.length;q++)(0,T[q])(y)},function(q){for(k.status="rejected",k.reason=q,q=0;q<T.length;q++)(0,T[q])(void 0)}),k}var Iu=ce.S;ce.S=function(m,y){typeof y=="object"&&y!==null&&typeof y.then=="function"&&c_(m,y),Iu!==null&&Iu(m,y)};var to=Ee(null);function ga(){var m=to.current;return m!==null?m:En.pooledCache}function Jg(m,y){y===null?je(to,to.current):je(to,y.pool)}function Ip(){var m=ga();return m===null?null:{parent:ks._currentValue,pool:m}}var In=Error(r(460)),u_=Error(r(474)),tA=Error(r(542)),Zg={then:function(){}};function h_(m){return m=m.status,m==="fulfilled"||m==="rejected"}function Gf(){}function qA(m,y,T){switch(T=m[T],T===void 0?m.push(y):T!==y&&(y.then(Gf,Gf),y=T),y.status){case"fulfilled":return y.value;case"rejected":throw m=y.reason,As(m),m;default:if(typeof y.status=="string")y.then(Gf,Gf);else{if(m=En,m!==null&&100<m.shellSuspendCounter)throw Error(r(482));m=y,m.status="pending",m.then(function(k){if(y.status==="pending"){var q=y;q.status="fulfilled",q.value=k}},function(k){if(y.status==="pending"){var q=y;q.status="rejected",q.reason=k}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw m=y.reason,As(m),m}throw em=y,In}}var em=null;function d_(){if(em===null)throw Error(r(459));var m=em;return em=null,m}function As(m){if(m===In||m===tA)throw Error(r(483))}var od=!1;function ad(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function iA(m,y){m=m.updateQueue,y.updateQueue===m&&(y.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function To(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function dh(m,y,T){var k=m.updateQueue;if(k===null)return null;if(k=k.shared,(ss&2)!==0){var q=k.pending;return q===null?y.next=y:(y.next=q.next,q.next=y),k.pending=y,y=NA(m),nn(m,null,T),y}return Ko(m,k,y,T),NA(m)}function tm(m,y,T){if(y=y.updateQueue,y!==null&&(y=y.shared,(T&4194048)!==0)){var k=y.lanes;k&=m.pendingLanes,T|=k,y.lanes=T,Fi(m,T)}}function jl(m,y){var T=m.updateQueue,k=m.alternate;if(k!==null&&(k=k.updateQueue,T===k)){var q=null,Y=null;if(T=T.firstBaseUpdate,T!==null){do{var be={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};Y===null?q=Y=be:Y=Y.next=be,T=T.next}while(T!==null);Y===null?q=Y=y:Y=Y.next=y}else q=Y=y;T={baseState:k.baseState,firstBaseUpdate:q,lastBaseUpdate:Y,shared:k.shared,callbacks:k.callbacks},m.updateQueue=T;return}m=T.lastBaseUpdate,m===null?T.firstBaseUpdate=y:m.next=y,T.lastBaseUpdate=y}var i0=!1;function Yc(){if(i0){var m=Oa;if(m!==null)throw m}}function Jc(m,y,T,k){i0=!1;var q=m.updateQueue;od=!1;var Y=q.firstBaseUpdate,be=q.lastBaseUpdate,Ue=q.shared.pending;if(Ue!==null){q.shared.pending=null;var rt=Ue,Ft=rt.next;rt.next=null,be===null?Y=Ft:be.next=Ft,be=rt;var di=m.alternate;di!==null&&(di=di.updateQueue,Ue=di.lastBaseUpdate,Ue!==be&&(Ue===null?di.firstBaseUpdate=Ft:Ue.next=Ft,di.lastBaseUpdate=rt))}if(Y!==null){var fi=q.baseState;be=0,di=Ft=rt=null,Ue=Y;do{var Yt=Ue.lane&-536870913,ii=Yt!==Ue.lane;if(ii?(Wi&Yt)===Yt:(k&Yt)===Yt){Yt!==0&&Yt===Bu&&(i0=!0),di!==null&&(di=di.next={lane:0,tag:Ue.tag,payload:Ue.payload,callback:null,next:null});e:{var Gn=m,Un=Ue;Yt=y;var qs=T;switch(Un.tag){case 1:if(Gn=Un.payload,typeof Gn=="function"){fi=Gn.call(qs,fi,Yt);break e}fi=Gn;break e;case 3:Gn.flags=Gn.flags&-65537|128;case 0:if(Gn=Un.payload,Yt=typeof Gn=="function"?Gn.call(qs,fi,Yt):Gn,Yt==null)break e;fi=b({},fi,Yt);break e;case 2:od=!0}}Yt=Ue.callback,Yt!==null&&(m.flags|=64,ii&&(m.flags|=8192),ii=q.callbacks,ii===null?q.callbacks=[Yt]:ii.push(Yt))}else ii={lane:Yt,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},di===null?(Ft=di=ii,rt=fi):di=di.next=ii,be|=Yt;if(Ue=Ue.next,Ue===null){if(Ue=q.shared.pending,Ue===null)break;ii=Ue,Ue=ii.next,ii.next=null,q.lastBaseUpdate=ii,q.shared.pending=null}}while(!0);di===null&&(rt=fi),q.baseState=rt,q.firstBaseUpdate=Ft,q.lastBaseUpdate=di,Y===null&&(q.shared.lanes=0),ms|=be,m.lanes=be,m.memoizedState=fi}}function tl(m,y){if(typeof m!="function")throw Error(r(191,m));m.call(y)}function zs(m,y){var T=m.callbacks;if(T!==null)for(m.callbacks=null,m=0;m<T.length;m++)tl(T[m],y)}var Ho=Ee(null),Vf=Ee(0);function lb(m,y){m=vh,je(Vf,m),je(Ho,y),vh=m|y.baseLanes}function il(){je(Vf,vh),je(Ho,Ho.current)}function ld(){vh=Vf.current,ke(Ho),ke(Vf)}var Tp=0,mr=null,jr=null,Gs=null,Mp=!1,Rp=!1,$A=!1,n0=0,Qa=0,Mn=null,Yi=0;function ws(){throw Error(r(321))}function im(m,y){if(y===null)return!1;for(var T=0;T<y.length&&T<m.length;T++)if(!Sr(m[T],y[T]))return!1;return!0}function Tu(m,y,T,k,q,Y){return Tp=Y,mr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,ce.H=m===null||m.memoizedState===null?fx:gx,$A=!1,Y=T(k,q),$A=!1,Rp&&(Y=ex(y,T,k,q)),Zw(m),Y}function Zw(m){ce.H=x_;var y=jr!==null&&jr.next!==null;if(Tp=0,Gs=jr=mr=null,Mp=!1,Qa=0,Mn=null,y)throw Error(r(300));m===null||Kr||(m=m.dependencies,m!==null&&an(m)&&(Kr=!0))}function ex(m,y,T,k){mr=m;var q=0;do{if(Rp&&(Mn=null),Qa=0,Rp=!1,25<=q)throw Error(r(301));if(q+=1,Gs=jr=null,m.updateQueue!=null){var Y=m.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}ce.H=qS,Y=y(T,k)}while(Rp);return Y}function VS(){var m=ce.H,y=m.useState()[0];return y=typeof y.then=="function"?$f(y):y,m=m.useState()[0],(jr!==null?jr.memoizedState:null)!==m&&(mr.flags|=1024),y}function qf(){var m=n0!==0;return n0=0,m}function cb(m,y,T){y.updateQueue=m.updateQueue,y.flags&=-2053,m.lanes&=~T}function ub(m){if(Mp){for(m=m.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}Mp=!1}Tp=0,Gs=jr=mr=null,Rp=!1,Qa=n0=0,Mn=null}function Zc(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gs===null?mr.memoizedState=Gs=m:Gs=Gs.next=m,Gs}function io(){if(jr===null){var m=mr.alternate;m=m!==null?m.memoizedState:null}else m=jr.next;var y=Gs===null?mr.memoizedState:Gs.next;if(y!==null)Gs=y,jr=m;else{if(m===null)throw mr.alternate===null?Error(r(467)):Error(r(310));jr=m,m={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Gs===null?mr.memoizedState=Gs=m:Gs=Gs.next=m}return Gs}function r0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $f(m){var y=Qa;return Qa+=1,Mn===null&&(Mn=[]),m=qA(Mn,m,y),y=mr,(Gs===null?y.memoizedState:Gs.next)===null&&(y=y.alternate,ce.H=y===null||y.memoizedState===null?fx:gx),m}function A_(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return $f(m);if(m.$$typeof===N)return $l(m)}throw Error(r(438,String(m)))}function p_(m){var y=null,T=mr.updateQueue;if(T!==null&&(y=T.memoCache),y==null){var k=mr.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(y={data:k.data.map(function(q){return q.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),T===null&&(T=r0(),mr.updateQueue=T),T.memoCache=y,T=y.data[y.index],T===void 0)for(T=y.data[y.index]=Array(m),k=0;k<m;k++)T[k]=re;return y.index++,T}function cd(m,y){return typeof y=="function"?y(m):y}function nm(m){var y=io();return f_(y,jr,m)}function f_(m,y,T){var k=m.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=T;var q=m.baseQueue,Y=k.pending;if(Y!==null){if(q!==null){var be=q.next;q.next=Y.next,Y.next=be}y.baseQueue=q=Y,k.pending=null}if(Y=m.baseState,q===null)m.memoizedState=Y;else{y=q.next;var Ue=be=null,rt=null,Ft=y,di=!1;do{var fi=Ft.lane&-536870913;if(fi!==Ft.lane?(Wi&fi)===fi:(Tp&fi)===fi){var Yt=Ft.revertLane;if(Yt===0)rt!==null&&(rt=rt.next={lane:0,revertLane:0,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null}),fi===Bu&&(di=!0);else if((Tp&Yt)===Yt){Ft=Ft.next,Yt===Bu&&(di=!0);continue}else fi={lane:0,revertLane:Ft.revertLane,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null},rt===null?(Ue=rt=fi,be=Y):rt=rt.next=fi,mr.lanes|=Yt,ms|=Yt;fi=Ft.action,$A&&T(Y,fi),Y=Ft.hasEagerState?Ft.eagerState:T(Y,fi)}else Yt={lane:fi,revertLane:Ft.revertLane,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null},rt===null?(Ue=rt=Yt,be=Y):rt=rt.next=Yt,mr.lanes|=fi,ms|=fi;Ft=Ft.next}while(Ft!==null&&Ft!==y);if(rt===null?be=Y:rt.next=Ue,!Sr(Y,m.memoizedState)&&(Kr=!0,di&&(T=Oa,T!==null)))throw T;m.memoizedState=Y,m.baseState=be,m.baseQueue=rt,k.lastRenderedState=Y}return q===null&&(k.lanes=0),[m.memoizedState,k.dispatch]}function WA(m){var y=io(),T=y.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=m;var k=T.dispatch,q=T.pending,Y=y.memoizedState;if(q!==null){T.pending=null;var be=q=q.next;do Y=m(Y,be.action),be=be.next;while(be!==q);Sr(Y,y.memoizedState)||(Kr=!0),y.memoizedState=Y,y.baseQueue===null&&(y.baseState=Y),T.lastRenderedState=Y}return[Y,k]}function Dp(m,y,T){var k=mr,q=io(),Y=gn;if(Y){if(T===void 0)throw Error(r(407));T=T()}else T=y();var be=!Sr((jr||q).memoizedState,T);be&&(q.memoizedState=T,Kr=!0),q=q.queue;var Ue=Ab.bind(null,k,q,m);if(rm(2048,8,Ue,[m]),q.getSnapshot!==y||be||Gs!==null&&Gs.memoizedState.tag&1){if(k.flags|=2048,Fp(9,__(),db.bind(null,k,q,T,y),null),En===null)throw Error(r(349));Y||(Tp&124)!==0||hb(k,y,T)}return T}function hb(m,y,T){m.flags|=16384,m={getSnapshot:y,value:T},y=mr.updateQueue,y===null?(y=r0(),mr.updateQueue=y,y.stores=[m]):(T=y.stores,T===null?y.stores=[m]:T.push(m))}function db(m,y,T,k){y.value=T,y.getSnapshot=k,g_(y)&&pb(m)}function Ab(m,y,T){return T(function(){g_(y)&&pb(m)})}function g_(m){var y=m.getSnapshot;m=m.value;try{var T=y();return!Sr(m,T)}catch{return!0}}function pb(m){var y=ch(m,2);y!==null&&K(y,m,2)}function s0(m){var y=Zc();if(typeof m=="function"){var T=m;if(m=T(),$A){Gt(!0);try{T()}finally{Gt(!1)}}}return y.memoizedState=y.baseState=m,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cd,lastRenderedState:m},y}function fb(m,y,T,k){return m.baseState=T,f_(m,jr,typeof k=="function"?k:cd)}function tx(m,y,T,k,q){if(w_(m))throw Error(r(485));if(m=y.action,m!==null){var Y={payload:q,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(be){Y.listeners.push(be)}};ce.T!==null?T(!0):Y.isTransition=!1,k(Y),T=y.pending,T===null?(Y.next=y.pending=Y,ix(y,Y)):(Y.next=T.next,y.pending=T.next=Y)}}function ix(m,y){var T=y.action,k=y.payload,q=m.state;if(y.isTransition){var Y=ce.T,be={};ce.T=be;try{var Ue=T(q,k),rt=ce.S;rt!==null&&rt(be,Ue),gb(m,y,Ue)}catch(Ft){o0(m,y,Ft)}finally{ce.T=Y}}else try{Y=T(q,k),gb(m,y,Y)}catch(Ft){o0(m,y,Ft)}}function gb(m,y,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(k){mb(m,y,k)},function(k){return o0(m,y,k)}):mb(m,y,T)}function mb(m,y,T){y.status="fulfilled",y.value=T,a0(y),m.state=T,y=m.pending,y!==null&&(T=y.next,T===y?m.pending=null:(T=T.next,y.next=T,ix(m,T)))}function o0(m,y,T){var k=m.pending;if(m.pending=null,k!==null){k=k.next;do y.status="rejected",y.reason=T,a0(y),y=y.next;while(y!==k)}m.action=null}function a0(m){m=m.listeners;for(var y=0;y<m.length;y++)(0,m[y])()}function m_(m,y){return y}function _b(m,y){if(gn){var T=En.formState;if(T!==null){e:{var k=mr;if(gn){if(Zs){t:{for(var q=Zs,Y=el;q.nodeType!==8;){if(!Y){q=null;break t}if(q=ep(q.nextSibling),q===null){q=null;break t}}Y=q.data,q=Y==="F!"||Y==="F"?q:null}if(q){Zs=ep(q.nextSibling),k=q.data==="F!";break e}}Qo(k)}k=!1}k&&(y=T[0])}}return T=Zc(),T.memoizedState=T.baseState=y,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m_,lastRenderedState:y},T.queue=k,T=Ax.bind(null,mr,k),k.dispatch=T,k=s0(!1),Y=Eb.bind(null,mr,!1,k.queue),k=Zc(),q={state:y,dispatch:null,action:m,pending:null},k.queue=q,T=tx.bind(null,mr,q,Y,T),q.dispatch=T,k.memoizedState=m,[y,T,!1]}function vb(m){var y=io();return yb(y,jr,m)}function yb(m,y,T){if(y=f_(m,y,m_)[0],m=nm(cd)[0],typeof y=="object"&&y!==null&&typeof y.then=="function")try{var k=$f(y)}catch(be){throw be===In?tA:be}else k=y;y=io();var q=y.queue,Y=q.dispatch;return T!==y.memoizedState&&(mr.flags|=2048,Fp(9,__(),nx.bind(null,q,T),null)),[k,Y,m]}function nx(m,y){m.action=y}function l0(m){var y=io(),T=jr;if(T!==null)return yb(y,T,m);io(),y=y.memoizedState,T=io();var k=T.queue.dispatch;return T.memoizedState=m,[y,k,!1]}function Fp(m,y,T,k){return m={tag:m,create:T,deps:k,inst:y,next:null},y=mr.updateQueue,y===null&&(y=r0(),mr.updateQueue=y),T=y.lastEffect,T===null?y.lastEffect=m.next=m:(k=T.next,T.next=m,m.next=k,y.lastEffect=m),m}function __(){return{destroy:void 0,resource:void 0}}function bb(){return io().memoizedState}function v_(m,y,T,k){var q=Zc();k=k===void 0?null:k,mr.flags|=m,q.memoizedState=Fp(1|y,__(),T,k)}function rm(m,y,T,k){var q=io();k=k===void 0?null:k;var Y=q.memoizedState.inst;jr!==null&&k!==null&&im(k,jr.memoizedState.deps)?q.memoizedState=Fp(y,Y,T,k):(mr.flags|=m,q.memoizedState=Fp(1|y,Y,T,k))}function Wf(m,y){v_(8390656,8,m,y)}function ma(m,y){rm(2048,8,m,y)}function _a(m,y){return rm(4,2,m,y)}function y_(m,y){return rm(4,4,m,y)}function rx(m,y){if(typeof y=="function"){m=m();var T=y(m);return function(){typeof T=="function"?T():y(null)}}if(y!=null)return m=m(),y.current=m,function(){y.current=null}}function sx(m,y,T){T=T!=null?T.concat([m]):null,rm(4,4,rx.bind(null,y,m),T)}function wb(){}function ox(m,y){var T=io();y=y===void 0?null:y;var k=T.memoizedState;return y!==null&&im(y,k[1])?k[0]:(T.memoizedState=[m,y],m)}function ax(m,y){var T=io();y=y===void 0?null:y;var k=T.memoizedState;if(y!==null&&im(y,k[1]))return k[0];if(k=m(),$A){Gt(!0);try{m()}finally{Gt(!1)}}return T.memoizedState=[k,y],k}function c0(m,y,T){return T===void 0||(Tp&1073741824)!==0?m.memoizedState=y:(m.memoizedState=T,m=Q(),mr.lanes|=m,ms|=m,T)}function lx(m,y,T,k){return Sr(T,y)?T:Ho.current!==null?(m=c0(m,T,k),Sr(m,y)||(Kr=!0),m):(Tp&42)===0?(Kr=!0,m.memoizedState=T):(m=Q(),mr.lanes|=m,ms|=m,y)}function cx(m,y,T,k,q){var Y=_e.p;_e.p=Y!==0&&8>Y?Y:8;var be=ce.T,Ue={};ce.T=Ue,Eb(m,!1,y,T);try{var rt=q(),Ft=ce.S;if(Ft!==null&&Ft(Ue,rt),rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var di=xc(rt,k);b_(m,y,di,M(m))}else b_(m,y,k,M(m))}catch(fi){b_(m,y,{then:function(){},status:"rejected",reason:fi},M())}finally{_e.p=Y,ce.T=be}}function Ah(){}function u0(m,y,T,k){if(m.tag!==5)throw Error(r(476));var q=h0(m).queue;cx(m,q,y,ye,T===null?Ah:function(){return xb(m),T(k)})}function h0(m){var y=m.memoizedState;if(y!==null)return y;y={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cd,lastRenderedState:ye},next:null};var T={};return y.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cd,lastRenderedState:T},next:null},m.memoizedState=y,m=m.alternate,m!==null&&(m.memoizedState=y),y}function xb(m){var y=h0(m).next.queue;b_(m,y,{},M())}function d0(){return $l(I0)}function Cb(){return io().memoizedState}function ux(){return io().memoizedState}function hx(m){for(var y=m.return;y!==null;){switch(y.tag){case 24:case 3:var T=M();m=To(T);var k=dh(y,m,T);k!==null&&(K(k,y,T),tm(k,y,T)),y={cache:Ls()},m.payload=y;return}y=y.return}}function dx(m,y,T){var k=M();T={lane:k,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},w_(m)?px(y,T):(T=Wg(m,y,T,k),T!==null&&(K(T,m,k),xl(T,y,k)))}function Ax(m,y,T){var k=M();b_(m,y,T,k)}function b_(m,y,T,k){var q={lane:k,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(w_(m))px(y,q);else{var Y=m.alternate;if(m.lanes===0&&(Y===null||Y.lanes===0)&&(Y=y.lastRenderedReducer,Y!==null))try{var be=y.lastRenderedState,Ue=Y(be,T);if(q.hasEagerState=!0,q.eagerState=Ue,Sr(Ue,be))return Ko(m,y,q,0),En===null&&Of(),!1}catch{}finally{}if(T=Wg(m,y,q,k),T!==null)return K(T,m,k),xl(T,y,k),!0}return!1}function Eb(m,y,T,k){if(k={lane:2,revertLane:wx(),action:k,hasEagerState:!1,eagerState:null,next:null},w_(m)){if(y)throw Error(r(479))}else y=Wg(m,T,k,2),y!==null&&K(y,m,2)}function w_(m){var y=m.alternate;return m===mr||y!==null&&y===mr}function px(m,y){Rp=Mp=!0;var T=m.pending;T===null?y.next=y:(y.next=T.next,T.next=y),m.pending=y}function xl(m,y,T){if((T&4194048)!==0){var k=y.lanes;k&=m.pendingLanes,T|=k,y.lanes=T,Fi(m,T)}}var x_={readContext:$l,use:A_,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useLayoutEffect:ws,useInsertionEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useSyncExternalStore:ws,useId:ws,useHostTransitionStatus:ws,useFormState:ws,useActionState:ws,useOptimistic:ws,useMemoCache:ws,useCacheRefresh:ws},fx={readContext:$l,use:A_,useCallback:function(m,y){return Zc().memoizedState=[m,y===void 0?null:y],m},useContext:$l,useEffect:Wf,useImperativeHandle:function(m,y,T){T=T!=null?T.concat([m]):null,v_(4194308,4,rx.bind(null,y,m),T)},useLayoutEffect:function(m,y){return v_(4194308,4,m,y)},useInsertionEffect:function(m,y){v_(4,2,m,y)},useMemo:function(m,y){var T=Zc();y=y===void 0?null:y;var k=m();if($A){Gt(!0);try{m()}finally{Gt(!1)}}return T.memoizedState=[k,y],k},useReducer:function(m,y,T){var k=Zc();if(T!==void 0){var q=T(y);if($A){Gt(!0);try{T(y)}finally{Gt(!1)}}}else q=y;return k.memoizedState=k.baseState=q,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:q},k.queue=m,m=m.dispatch=dx.bind(null,mr,m),[k.memoizedState,m]},useRef:function(m){var y=Zc();return m={current:m},y.memoizedState=m},useState:function(m){m=s0(m);var y=m.queue,T=Ax.bind(null,mr,y);return y.dispatch=T,[m.memoizedState,T]},useDebugValue:wb,useDeferredValue:function(m,y){var T=Zc();return c0(T,m,y)},useTransition:function(){var m=s0(!1);return m=cx.bind(null,mr,m.queue,!0,!1),Zc().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,y,T){var k=mr,q=Zc();if(gn){if(T===void 0)throw Error(r(407));T=T()}else{if(T=y(),En===null)throw Error(r(349));(Wi&124)!==0||hb(k,y,T)}q.memoizedState=T;var Y={value:T,getSnapshot:y};return q.queue=Y,Wf(Ab.bind(null,k,Y,m),[m]),k.flags|=2048,Fp(9,__(),db.bind(null,k,Y,T,y),null),T},useId:function(){var m=Zc(),y=En.identifierPrefix;if(gn){var T=nd,k=Jd;T=(k&~(1<<32-si(k)-1)).toString(32)+T,y=""+y+"R"+T,T=n0++,0<T&&(y+="H"+T.toString(32)),y+=""}else T=Yi++,y=""+y+"r"+T.toString(32)+"";return m.memoizedState=y},useHostTransitionStatus:d0,useFormState:_b,useActionState:_b,useOptimistic:function(m){var y=Zc();y.memoizedState=y.baseState=m;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=T,y=Eb.bind(null,mr,!0,T),T.dispatch=y,[m,y]},useMemoCache:p_,useCacheRefresh:function(){return Zc().memoizedState=hx.bind(null,mr)}},gx={readContext:$l,use:A_,useCallback:ox,useContext:$l,useEffect:ma,useImperativeHandle:sx,useInsertionEffect:_a,useLayoutEffect:y_,useMemo:ax,useReducer:nm,useRef:bb,useState:function(){return nm(cd)},useDebugValue:wb,useDeferredValue:function(m,y){var T=io();return lx(T,jr.memoizedState,m,y)},useTransition:function(){var m=nm(cd)[0],y=io().memoizedState;return[typeof m=="boolean"?m:$f(m),y]},useSyncExternalStore:Dp,useId:Cb,useHostTransitionStatus:d0,useFormState:vb,useActionState:vb,useOptimistic:function(m,y){var T=io();return fb(T,jr,m,y)},useMemoCache:p_,useCacheRefresh:ux},qS={readContext:$l,use:A_,useCallback:ox,useContext:$l,useEffect:ma,useImperativeHandle:sx,useInsertionEffect:_a,useLayoutEffect:y_,useMemo:ax,useReducer:WA,useRef:bb,useState:function(){return WA(cd)},useDebugValue:wb,useDeferredValue:function(m,y){var T=io();return jr===null?c0(T,m,y):lx(T,jr.memoizedState,m,y)},useTransition:function(){var m=WA(cd)[0],y=io().memoizedState;return[typeof m=="boolean"?m:$f(m),y]},useSyncExternalStore:Dp,useId:Cb,useHostTransitionStatus:d0,useFormState:l0,useActionState:l0,useOptimistic:function(m,y){var T=io();return jr!==null?fb(T,jr,m,y):(T.baseState=m,[m,T.queue.dispatch])},useMemoCache:p_,useCacheRefresh:ux},jf=null,Kf=0;function jA(m){var y=Kf;return Kf+=1,jf===null&&(jf=[]),qA(jf,m,y)}function nA(m,y){y=y.props.ref,m.ref=y!==void 0?y:null}function Kl(m,y){throw y.$$typeof===x?Error(r(525)):(m=Object.prototype.toString.call(y),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":m)))}function mx(m){var y=m._init;return y(m._payload)}function _x(m){function y(Bt,gt){if(m){var Ht=Bt.deletions;Ht===null?(Bt.deletions=[gt],Bt.flags|=16):Ht.push(gt)}}function T(Bt,gt){if(!m)return null;for(;gt!==null;)y(Bt,gt),gt=gt.sibling;return null}function k(Bt){for(var gt=new Map;Bt!==null;)Bt.key!==null?gt.set(Bt.key,Bt):gt.set(Bt.index,Bt),Bt=Bt.sibling;return gt}function q(Bt,gt){return Bt=Eu(Bt,gt),Bt.index=0,Bt.sibling=null,Bt}function Y(Bt,gt,Ht){return Bt.index=Ht,m?(Ht=Bt.alternate,Ht!==null?(Ht=Ht.index,Ht<gt?(Bt.flags|=67108866,gt):Ht):(Bt.flags|=67108866,gt)):(Bt.flags|=1048576,gt)}function be(Bt){return m&&Bt.alternate===null&&(Bt.flags|=67108866),Bt}function Ue(Bt,gt,Ht,Ai){return gt===null||gt.tag!==6?(gt=Za(Ht,Bt.mode,Ai),gt.return=Bt,gt):(gt=q(gt,Ht),gt.return=Bt,gt)}function rt(Bt,gt,Ht,Ai){var sn=Ht.type;return sn===F?di(Bt,gt,Ht.props.children,Ai,Ht.key):gt!==null&&(gt.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===ie&&mx(sn)===gt.type)?(gt=q(gt,Ht.props),nA(gt,Ht),gt.return=Bt,gt):(gt=jg(Ht.type,Ht.key,Ht.props,null,Bt.mode,Ai),nA(gt,Ht),gt.return=Bt,gt)}function Ft(Bt,gt,Ht,Ai){return gt===null||gt.tag!==4||gt.stateNode.containerInfo!==Ht.containerInfo||gt.stateNode.implementation!==Ht.implementation?(gt=Qf(Ht,Bt.mode,Ai),gt.return=Bt,gt):(gt=q(gt,Ht.children||[]),gt.return=Bt,gt)}function di(Bt,gt,Ht,Ai,sn){return gt===null||gt.tag!==7?(gt=HA(Ht,Bt.mode,Ai,sn),gt.return=Bt,gt):(gt=q(gt,Ht),gt.return=Bt,gt)}function fi(Bt,gt,Ht){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return gt=Za(""+gt,Bt.mode,Ht),gt.return=Bt,gt;if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case C:return Ht=jg(gt.type,gt.key,gt.props,null,Bt.mode,Ht),nA(Ht,gt),Ht.return=Bt,Ht;case I:return gt=Qf(gt,Bt.mode,Ht),gt.return=Bt,gt;case ie:var Ai=gt._init;return gt=Ai(gt._payload),fi(Bt,gt,Ht)}if(xe(gt)||ue(gt))return gt=HA(gt,Bt.mode,Ht,null),gt.return=Bt,gt;if(typeof gt.then=="function")return fi(Bt,jA(gt),Ht);if(gt.$$typeof===N)return fi(Bt,Us(Bt,gt),Ht);Kl(Bt,gt)}return null}function Yt(Bt,gt,Ht,Ai){var sn=gt!==null?gt.key:null;if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint")return sn!==null?null:Ue(Bt,gt,""+Ht,Ai);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case C:return Ht.key===sn?rt(Bt,gt,Ht,Ai):null;case I:return Ht.key===sn?Ft(Bt,gt,Ht,Ai):null;case ie:return sn=Ht._init,Ht=sn(Ht._payload),Yt(Bt,gt,Ht,Ai)}if(xe(Ht)||ue(Ht))return sn!==null?null:di(Bt,gt,Ht,Ai,null);if(typeof Ht.then=="function")return Yt(Bt,gt,jA(Ht),Ai);if(Ht.$$typeof===N)return Yt(Bt,gt,Us(Bt,Ht),Ai);Kl(Bt,Ht)}return null}function ii(Bt,gt,Ht,Ai,sn){if(typeof Ai=="string"&&Ai!==""||typeof Ai=="number"||typeof Ai=="bigint")return Bt=Bt.get(Ht)||null,Ue(gt,Bt,""+Ai,sn);if(typeof Ai=="object"&&Ai!==null){switch(Ai.$$typeof){case C:return Bt=Bt.get(Ai.key===null?Ht:Ai.key)||null,rt(gt,Bt,Ai,sn);case I:return Bt=Bt.get(Ai.key===null?Ht:Ai.key)||null,Ft(gt,Bt,Ai,sn);case ie:var yr=Ai._init;return Ai=yr(Ai._payload),ii(Bt,gt,Ht,Ai,sn)}if(xe(Ai)||ue(Ai))return Bt=Bt.get(Ht)||null,di(gt,Bt,Ai,sn,null);if(typeof Ai.then=="function")return ii(Bt,gt,Ht,jA(Ai),sn);if(Ai.$$typeof===N)return ii(Bt,gt,Ht,Us(gt,Ai),sn);Kl(gt,Ai)}return null}function Gn(Bt,gt,Ht,Ai){for(var sn=null,yr=null,bn=gt,kn=gt=0,ol=null;bn!==null&&kn<Ht.length;kn++){bn.index>kn?(ol=bn,bn=null):ol=bn.sibling;var ls=Yt(Bt,bn,Ht[kn],Ai);if(ls===null){bn===null&&(bn=ol);break}m&&bn&&ls.alternate===null&&y(Bt,bn),gt=Y(ls,gt,kn),yr===null?sn=ls:yr.sibling=ls,yr=ls,bn=ol}if(kn===Ht.length)return T(Bt,bn),gn&&Xc(Bt,kn),sn;if(bn===null){for(;kn<Ht.length;kn++)bn=fi(Bt,Ht[kn],Ai),bn!==null&&(gt=Y(bn,gt,kn),yr===null?sn=bn:yr.sibling=bn,yr=bn);return gn&&Xc(Bt,kn),sn}for(bn=k(bn);kn<Ht.length;kn++)ol=ii(bn,Bt,kn,Ht[kn],Ai),ol!==null&&(m&&ol.alternate!==null&&bn.delete(ol.key===null?kn:ol.key),gt=Y(ol,gt,kn),yr===null?sn=ol:yr.sibling=ol,yr=ol);return m&&bn.forEach(function(Zp){return y(Bt,Zp)}),gn&&Xc(Bt,kn),sn}function Un(Bt,gt,Ht,Ai){if(Ht==null)throw Error(r(151));for(var sn=null,yr=null,bn=gt,kn=gt=0,ol=null,ls=Ht.next();bn!==null&&!ls.done;kn++,ls=Ht.next()){bn.index>kn?(ol=bn,bn=null):ol=bn.sibling;var Zp=Yt(Bt,bn,ls.value,Ai);if(Zp===null){bn===null&&(bn=ol);break}m&&bn&&Zp.alternate===null&&y(Bt,bn),gt=Y(Zp,gt,kn),yr===null?sn=Zp:yr.sibling=Zp,yr=Zp,bn=ol}if(ls.done)return T(Bt,bn),gn&&Xc(Bt,kn),sn;if(bn===null){for(;!ls.done;kn++,ls=Ht.next())ls=fi(Bt,ls.value,Ai),ls!==null&&(gt=Y(ls,gt,kn),yr===null?sn=ls:yr.sibling=ls,yr=ls);return gn&&Xc(Bt,kn),sn}for(bn=k(bn);!ls.done;kn++,ls=Ht.next())ls=ii(bn,Bt,kn,ls.value,Ai),ls!==null&&(m&&ls.alternate!==null&&bn.delete(ls.key===null?kn:ls.key),gt=Y(ls,gt,kn),yr===null?sn=ls:yr.sibling=ls,yr=ls);return m&&bn.forEach(function(wB){return y(Bt,wB)}),gn&&Xc(Bt,kn),sn}function qs(Bt,gt,Ht,Ai){if(typeof Ht=="object"&&Ht!==null&&Ht.type===F&&Ht.key===null&&(Ht=Ht.props.children),typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case C:e:{for(var sn=Ht.key;gt!==null;){if(gt.key===sn){if(sn=Ht.type,sn===F){if(gt.tag===7){T(Bt,gt.sibling),Ai=q(gt,Ht.props.children),Ai.return=Bt,Bt=Ai;break e}}else if(gt.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===ie&&mx(sn)===gt.type){T(Bt,gt.sibling),Ai=q(gt,Ht.props),nA(Ai,Ht),Ai.return=Bt,Bt=Ai;break e}T(Bt,gt);break}else y(Bt,gt);gt=gt.sibling}Ht.type===F?(Ai=HA(Ht.props.children,Bt.mode,Ai,Ht.key),Ai.return=Bt,Bt=Ai):(Ai=jg(Ht.type,Ht.key,Ht.props,null,Bt.mode,Ai),nA(Ai,Ht),Ai.return=Bt,Bt=Ai)}return be(Bt);case I:e:{for(sn=Ht.key;gt!==null;){if(gt.key===sn)if(gt.tag===4&&gt.stateNode.containerInfo===Ht.containerInfo&&gt.stateNode.implementation===Ht.implementation){T(Bt,gt.sibling),Ai=q(gt,Ht.children||[]),Ai.return=Bt,Bt=Ai;break e}else{T(Bt,gt);break}else y(Bt,gt);gt=gt.sibling}Ai=Qf(Ht,Bt.mode,Ai),Ai.return=Bt,Bt=Ai}return be(Bt);case ie:return sn=Ht._init,Ht=sn(Ht._payload),qs(Bt,gt,Ht,Ai)}if(xe(Ht))return Gn(Bt,gt,Ht,Ai);if(ue(Ht)){if(sn=ue(Ht),typeof sn!="function")throw Error(r(150));return Ht=sn.call(Ht),Un(Bt,gt,Ht,Ai)}if(typeof Ht.then=="function")return qs(Bt,gt,jA(Ht),Ai);if(Ht.$$typeof===N)return qs(Bt,gt,Us(Bt,Ht),Ai);Kl(Bt,Ht)}return typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint"?(Ht=""+Ht,gt!==null&&gt.tag===6?(T(Bt,gt.sibling),Ai=q(gt,Ht),Ai.return=Bt,Bt=Ai):(T(Bt,gt),Ai=Za(Ht,Bt.mode,Ai),Ai.return=Bt,Bt=Ai),be(Bt)):T(Bt,gt)}return function(Bt,gt,Ht,Ai){try{Kf=0;var sn=qs(Bt,gt,Ht,Ai);return jf=null,sn}catch(bn){if(bn===In||bn===tA)throw bn;var yr=yc(29,bn,null,Bt.mode);return yr.lanes=Ai,yr.return=Bt,yr}finally{}}}var Up=_x(!0),A0=_x(!1),Cc=Ee(null),ph=null;function kp(m){var y=m.alternate;je(va,va.current&1),je(Cc,m),ph===null&&(y===null||Ho.current!==null||y.memoizedState!==null)&&(ph=m)}function vx(m){if(m.tag===22){if(je(va,va.current),je(Cc,m),ph===null){var y=m.alternate;y!==null&&y.memoizedState!==null&&(ph=m)}}else nl()}function nl(){je(va,va.current),je(Cc,Cc.current)}function fh(m){ke(Cc),ph===m&&(ph=null),ke(va)}var va=Ee(0);function C_(m){for(var y=m;y!==null;){if(y.tag===13){var T=y.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||oB(T)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===m)break;for(;y.sibling===null;){if(y.return===null||y.return===m)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}function sm(m,y,T,k){y=m.memoizedState,T=T(k,y),T=T==null?y:b({},y,T),m.memoizedState=T,m.lanes===0&&(m.updateQueue.baseState=T)}var p0={enqueueSetState:function(m,y,T){m=m._reactInternals;var k=M(),q=To(k);q.payload=y,T!=null&&(q.callback=T),y=dh(m,q,k),y!==null&&(K(y,m,k),tm(y,m,k))},enqueueReplaceState:function(m,y,T){m=m._reactInternals;var k=M(),q=To(k);q.tag=1,q.payload=y,T!=null&&(q.callback=T),y=dh(m,q,k),y!==null&&(K(y,m,k),tm(y,m,k))},enqueueForceUpdate:function(m,y){m=m._reactInternals;var T=M(),k=To(T);k.tag=2,y!=null&&(k.callback=y),y=dh(m,k,T),y!==null&&(K(y,m,T),tm(y,m,T))}};function yx(m,y,T,k,q,Y,be){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(k,Y,be):y.prototype&&y.prototype.isPureReactComponent?!Fr(T,k)||!Fr(q,Y):!0}function Xf(m,y,T,k){m=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(T,k),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(T,k),y.state!==m&&p0.enqueueReplaceState(y,y.state,null)}function Na(m,y){var T=y;if("ref"in y){T={};for(var k in y)k!=="ref"&&(T[k]=y[k])}if(m=m.defaultProps){T===y&&(T=b({},T));for(var q in m)T[q]===void 0&&(T[q]=m[q])}return T}var Xl=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)};function om(m){Xl(m)}function ud(m){console.error(m)}function Lp(m){Xl(m)}function Pp(m,y){try{var T=m.onUncaughtError;T(y.value,{componentStack:y.stack})}catch(k){setTimeout(function(){throw k})}}function E_(m,y,T){try{var k=m.onCaughtError;k(T.value,{componentStack:T.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch(q){setTimeout(function(){throw q})}}function Yl(m,y,T){return T=To(T),T.tag=3,T.payload={element:null},T.callback=function(){Pp(m,y)},T}function Mu(m){return m=To(m),m.tag=3,m}function Op(m,y,T,k){var q=T.type.getDerivedStateFromError;if(typeof q=="function"){var Y=k.value;m.payload=function(){return q(Y)},m.callback=function(){E_(y,T,k)}}var be=T.stateNode;be!==null&&typeof be.componentDidCatch=="function"&&(m.callback=function(){E_(y,T,k),typeof q!="function"&&(Lu===null?Lu=new Set([this]):Lu.add(this));var Ue=k.stack;this.componentDidCatch(k.value,{componentStack:Ue!==null?Ue:""})})}function rA(m,y,T,k,q){if(T.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(y=T.alternate,y!==null&&GA(y,T,q,!0),T=Cc.current,T!==null){switch(T.tag){case 13:return ph===null?Zn():T.alternate===null&&gs===0&&(gs=3),T.flags&=-257,T.flags|=65536,T.lanes=q,k===Zg?T.flags|=16384:(y=T.updateQueue,y===null?T.updateQueue=new Set([k]):y.add(k),Tb(m,k,q)),!1;case 22:return T.flags|=65536,k===Zg?T.flags|=16384:(y=T.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([k])},T.updateQueue=y):(T=y.retryQueue,T===null?y.retryQueue=new Set([k]):T.add(k)),Tb(m,k,q)),!1}throw Error(r(435,T.tag))}return Tb(m,k,q),Zn(),!1}if(gn)return y=Cc.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=q,k!==Hf&&(m=Error(r(422),{cause:k}),zA(Po(m,T)))):(k!==Hf&&(y=Error(r(423),{cause:k}),zA(Po(y,T))),m=m.current.alternate,m.flags|=65536,q&=-q,m.lanes|=q,k=Po(k,T),q=Yl(m.stateNode,k,q),jl(m,q),gs!==4&&(gs=2)),!1;var Y=Error(r(520),{cause:k});if(Y=Po(Y,T),hA===null?hA=[Y]:hA.push(Y),gs!==4&&(gs=2),y===null)return!0;k=Po(k,T),T=y;do{switch(T.tag){case 3:return T.flags|=65536,m=q&-q,T.lanes|=m,m=Yl(T.stateNode,k,m),jl(T,m),!1;case 1:if(y=T.type,Y=T.stateNode,(T.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Lu===null||!Lu.has(Y))))return T.flags|=65536,q&=-q,T.lanes|=q,q=Mu(q),Op(q,m,T,k),jl(T,q),!1}T=T.return}while(T!==null);return!1}var hd=Error(r(461)),Kr=!1;function zo(m,y,T,k){y.child=m===null?A0(y,null,T,k):Up(y,m.child,T,k)}function KA(m,y,T,k,q){T=T.render;var Y=y.ref;if("ref"in k){var be={};for(var Ue in k)Ue!=="ref"&&(be[Ue]=k[Ue])}else be=k;return _n(y),k=Tu(m,y,T,be,Y,q),Ue=qf(),m!==null&&!Kr?(cb(m,y,q),Ec(m,y,q)):(gn&&Ue&&rs(y),y.flags|=1,zo(m,y,k,q),y.child)}function S_(m,y,T,k,q){if(m===null){var Y=T.type;return typeof Y=="function"&&!bc(Y)&&Y.defaultProps===void 0&&T.compare===null?(y.tag=15,y.type=Y,Jl(m,y,Y,k,q)):(m=jg(T.type,null,k,y,y.mode,q),m.ref=y.ref,m.return=y,y.child=m)}if(Y=m.child,!dd(m,q)){var be=Y.memoizedProps;if(T=T.compare,T=T!==null?T:Fr,T(be,k)&&m.ref===y.ref)return Ec(m,y,q)}return y.flags|=1,m=Eu(Y,k),m.ref=y.ref,m.return=y,y.child=m}function Jl(m,y,T,k,q){if(m!==null){var Y=m.memoizedProps;if(Fr(Y,k)&&m.ref===y.ref)if(Kr=!1,y.pendingProps=k=Y,dd(m,q))(m.flags&131072)!==0&&(Kr=!0);else return y.lanes=m.lanes,Ec(m,y,q)}return gh(m,y,T,k,q)}function Cl(m,y,T){var k=y.pendingProps,q=k.children,Y=m!==null?m.memoizedState:null;if(k.mode==="hidden"){if((y.flags&128)!==0){if(k=Y!==null?Y.baseLanes|T:T,m!==null){for(q=y.child=m.child,Y=0;q!==null;)Y=Y|q.lanes|q.childLanes,q=q.sibling;y.childLanes=Y&~k}else y.childLanes=0,y.child=null;return Jr(m,y,k,T)}if((T&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},m!==null&&Jg(y,Y!==null?Y.cachePool:null),Y!==null?lb(y,Y):il(),vx(y);else return y.lanes=y.childLanes=536870912,Jr(m,y,Y!==null?Y.baseLanes|T:T,T)}else Y!==null?(Jg(y,Y.cachePool),lb(y,Y),nl(),y.memoizedState=null):(m!==null&&Jg(y,null),il(),nl());return zo(m,y,q,T),y.child}function Jr(m,y,T,k){var q=ga();return q=q===null?null:{parent:ks._currentValue,pool:q},y.memoizedState={baseLanes:T,cachePool:q},m!==null&&Jg(y,null),il(),vx(y),m!==null&&GA(m,y,k,!0),null}function eu(m,y){var T=y.ref;if(T===null)m!==null&&m.ref!==null&&(y.flags|=4194816);else{if(typeof T!="function"&&typeof T!="object")throw Error(r(284));(m===null||m.ref!==T)&&(y.flags|=4194816)}}function gh(m,y,T,k,q){return _n(y),T=Tu(m,y,T,k,void 0,q),k=qf(),m!==null&&!Kr?(cb(m,y,q),Ec(m,y,q)):(gn&&k&&rs(y),y.flags|=1,zo(m,y,T,q),y.child)}function B_(m,y,T,k,q,Y){return _n(y),y.updateQueue=null,T=ex(y,k,T,q),Zw(m),k=qf(),m!==null&&!Kr?(cb(m,y,Y),Ec(m,y,Y)):(gn&&k&&rs(y),y.flags|=1,zo(m,y,T,Y),y.child)}function tu(m,y,T,k,q){if(_n(y),y.stateNode===null){var Y=ho,be=T.contextType;typeof be=="object"&&be!==null&&(Y=$l(be)),Y=new T(k,Y),y.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=p0,y.stateNode=Y,Y._reactInternals=y,Y=y.stateNode,Y.props=k,Y.state=y.memoizedState,Y.refs={},ad(y),be=T.contextType,Y.context=typeof be=="object"&&be!==null?$l(be):ho,Y.state=y.memoizedState,be=T.getDerivedStateFromProps,typeof be=="function"&&(sm(y,T,be,k),Y.state=y.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(be=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),be!==Y.state&&p0.enqueueReplaceState(Y,Y.state,null),Jc(y,k,Y,q),Yc(),Y.state=y.memoizedState),typeof Y.componentDidMount=="function"&&(y.flags|=4194308),k=!0}else if(m===null){Y=y.stateNode;var Ue=y.memoizedProps,rt=Na(T,Ue);Y.props=rt;var Ft=Y.context,di=T.contextType;be=ho,typeof di=="object"&&di!==null&&(be=$l(di));var fi=T.getDerivedStateFromProps;di=typeof fi=="function"||typeof Y.getSnapshotBeforeUpdate=="function",Ue=y.pendingProps!==Ue,di||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(Ue||Ft!==be)&&Xf(y,Y,k,be),od=!1;var Yt=y.memoizedState;Y.state=Yt,Jc(y,k,Y,q),Yc(),Ft=y.memoizedState,Ue||Yt!==Ft||od?(typeof fi=="function"&&(sm(y,T,fi,k),Ft=y.memoizedState),(rt=od||yx(y,T,rt,k,Yt,Ft,be))?(di||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(y.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=k,y.memoizedState=Ft),Y.props=k,Y.state=Ft,Y.context=be,k=rt):(typeof Y.componentDidMount=="function"&&(y.flags|=4194308),k=!1)}else{Y=y.stateNode,iA(m,y),be=y.memoizedProps,di=Na(T,be),Y.props=di,fi=y.pendingProps,Yt=Y.context,Ft=T.contextType,rt=ho,typeof Ft=="object"&&Ft!==null&&(rt=$l(Ft)),Ue=T.getDerivedStateFromProps,(Ft=typeof Ue=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(be!==fi||Yt!==rt)&&Xf(y,Y,k,rt),od=!1,Yt=y.memoizedState,Y.state=Yt,Jc(y,k,Y,q),Yc();var ii=y.memoizedState;be!==fi||Yt!==ii||od||m!==null&&m.dependencies!==null&&an(m.dependencies)?(typeof Ue=="function"&&(sm(y,T,Ue,k),ii=y.memoizedState),(di=od||yx(y,T,di,k,Yt,ii,rt)||m!==null&&m.dependencies!==null&&an(m.dependencies))?(Ft||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(k,ii,rt),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(k,ii,rt)),typeof Y.componentDidUpdate=="function"&&(y.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof Y.componentDidUpdate!="function"||be===m.memoizedProps&&Yt===m.memoizedState||(y.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||be===m.memoizedProps&&Yt===m.memoizedState||(y.flags|=1024),y.memoizedProps=k,y.memoizedState=ii),Y.props=k,Y.state=ii,Y.context=rt,k=di):(typeof Y.componentDidUpdate!="function"||be===m.memoizedProps&&Yt===m.memoizedState||(y.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||be===m.memoizedProps&&Yt===m.memoizedState||(y.flags|=1024),k=!1)}return Y=k,eu(m,y),k=(y.flags&128)!==0,Y||k?(Y=y.stateNode,T=k&&typeof T.getDerivedStateFromError!="function"?null:Y.render(),y.flags|=1,m!==null&&k?(y.child=Up(y,m.child,null,q),y.child=Up(y,null,T,q)):zo(m,y,T,q),y.memoizedState=Y.state,m=y.child):m=Ec(m,y,q),m}function Yf(m,y,T,k){return Ep(),y.flags|=256,zo(m,y,T,k),y.child}var I_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function am(m){return{baseLanes:m,cachePool:Ip()}}function Qp(m,y,T){return m=m!==null?m.childLanes&~T:0,y&&(m|=nu),m}function f0(m,y,T){var k=y.pendingProps,q=!1,Y=(y.flags&128)!==0,be;if((be=Y)||(be=m!==null&&m.memoizedState===null?!1:(va.current&2)!==0),be&&(q=!0,y.flags&=-129),be=(y.flags&32)!==0,y.flags&=-33,m===null){if(gn){if(q?kp(y):nl(),gn){var Ue=Zs,rt;if(rt=Ue){e:{for(rt=Ue,Ue=el;rt.nodeType!==8;){if(!Ue){Ue=null;break e}if(rt=ep(rt.nextSibling),rt===null){Ue=null;break e}}Ue=rt}Ue!==null?(y.memoizedState={dehydrated:Ue,treeContext:xp!==null?{id:Jd,overflow:nd}:null,retryLane:536870912,hydrationErrors:null},rt=yc(18,null,null,0),rt.stateNode=Ue,rt.return=y,y.child=rt,pa=y,Zs=null,rt=!0):rt=!1}rt||Qo(y)}if(Ue=y.memoizedState,Ue!==null&&(Ue=Ue.dehydrated,Ue!==null))return oB(Ue)?y.lanes=32:y.lanes=536870912,null;fh(y)}return Ue=k.children,k=k.fallback,q?(nl(),q=y.mode,Ue=lm({mode:"hidden",children:Ue},q),k=HA(k,q,T,null),Ue.return=y,k.return=y,Ue.sibling=k,y.child=Ue,q=y.child,q.memoizedState=am(T),q.childLanes=Qp(m,be,T),y.memoizedState=I_,k):(kp(y),Jf(y,Ue))}if(rt=m.memoizedState,rt!==null&&(Ue=rt.dehydrated,Ue!==null)){if(Y)y.flags&256?(kp(y),y.flags&=-257,y=XA(m,y,T)):y.memoizedState!==null?(nl(),y.child=m.child,y.flags|=128,y=null):(nl(),q=k.fallback,Ue=y.mode,k=lm({mode:"visible",children:k.children},Ue),q=HA(q,Ue,T,null),q.flags|=2,k.return=y,q.return=y,k.sibling=q,y.child=k,Up(y,m.child,null,T),k=y.child,k.memoizedState=am(T),k.childLanes=Qp(m,be,T),y.memoizedState=I_,y=q);else if(kp(y),oB(Ue)){if(be=Ue.nextSibling&&Ue.nextSibling.dataset,be)var Ft=be.dgst;be=Ft,k=Error(r(419)),k.stack="",k.digest=be,zA({value:k,source:null,stack:null}),y=XA(m,y,T)}else if(Kr||GA(m,y,T,!1),be=(T&m.childLanes)!==0,Kr||be){if(be=En,be!==null&&(k=T&-T,k=(k&42)!==0?1:vn(k),k=(k&(be.suspendedLanes|T))!==0?0:k,k!==0&&k!==rt.retryLane))throw rt.retryLane=k,ch(m,k),K(be,m,k),hd;Ue.data==="$?"||Zn(),y=XA(m,y,T)}else Ue.data==="$?"?(y.flags|=192,y.child=m.child,y=null):(m=rt.treeContext,Zs=ep(Ue.nextSibling),pa=y,gn=!0,wl=null,el=!1,m!==null&&(Aa[Pa++]=Jd,Aa[Pa++]=nd,Aa[Pa++]=xp,Jd=m.id,nd=m.overflow,xp=y),y=Jf(y,k.children),y.flags|=4096);return y}return q?(nl(),q=k.fallback,Ue=y.mode,rt=m.child,Ft=rt.sibling,k=Eu(rt,{mode:"hidden",children:k.children}),k.subtreeFlags=rt.subtreeFlags&65011712,Ft!==null?q=Eu(Ft,q):(q=HA(q,Ue,T,null),q.flags|=2),q.return=y,k.return=y,k.sibling=q,y.child=k,k=q,q=y.child,Ue=m.child.memoizedState,Ue===null?Ue=am(T):(rt=Ue.cachePool,rt!==null?(Ft=ks._currentValue,rt=rt.parent!==Ft?{parent:Ft,pool:Ft}:rt):rt=Ip(),Ue={baseLanes:Ue.baseLanes|T,cachePool:rt}),q.memoizedState=Ue,q.childLanes=Qp(m,be,T),y.memoizedState=I_,k):(kp(y),T=m.child,m=T.sibling,T=Eu(T,{mode:"visible",children:k.children}),T.return=y,T.sibling=null,m!==null&&(be=y.deletions,be===null?(y.deletions=[m],y.flags|=16):be.push(m)),y.child=T,y.memoizedState=null,T)}function Jf(m,y){return y=lm({mode:"visible",children:y},m.mode),y.return=m,m.child=y}function lm(m,y){return m=yc(22,m,null,y),m.lanes=0,m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},m}function XA(m,y,T){return Up(y,m.child,null,T),m=Jf(y,y.pendingProps.children),m.flags|=2,y.memoizedState=null,m}function cm(m,y,T){m.lanes|=y;var k=m.alternate;k!==null&&(k.lanes|=y),sd(m.return,y,T)}function T_(m,y,T,k,q){var Y=m.memoizedState;Y===null?m.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:k,tail:T,tailMode:q}:(Y.isBackwards=y,Y.rendering=null,Y.renderingStartTime=0,Y.last=k,Y.tail=T,Y.tailMode=q)}function Np(m,y,T){var k=y.pendingProps,q=k.revealOrder,Y=k.tail;if(zo(m,y,k.children,T),k=va.current,(k&2)!==0)k=k&1|2,y.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=y.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&cm(m,T,y);else if(m.tag===19)cm(m,T,y);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===y)break e;for(;m.sibling===null;){if(m.return===null||m.return===y)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}k&=1}switch(je(va,k),q){case"forwards":for(T=y.child,q=null;T!==null;)m=T.alternate,m!==null&&C_(m)===null&&(q=T),T=T.sibling;T=q,T===null?(q=y.child,y.child=null):(q=T.sibling,T.sibling=null),T_(y,!1,q,T,Y);break;case"backwards":for(T=null,q=y.child,y.child=null;q!==null;){if(m=q.alternate,m!==null&&C_(m)===null){y.child=q;break}m=q.sibling,q.sibling=T,T=q,q=m}T_(y,!0,T,null,Y);break;case"together":T_(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Ec(m,y,T){if(m!==null&&(y.dependencies=m.dependencies),ms|=y.lanes,(T&y.childLanes)===0)if(m!==null){if(GA(m,y,T,!1),(T&y.childLanes)===0)return null}else return null;if(m!==null&&y.child!==m.child)throw Error(r(153));if(y.child!==null){for(m=y.child,T=Eu(m,m.pendingProps),y.child=T,T.return=y;m.sibling!==null;)m=m.sibling,T=T.sibling=Eu(m,m.pendingProps),T.return=y;T.sibling=null}return y.child}function dd(m,y){return(m.lanes&y)!==0?!0:(m=m.dependencies,!!(m!==null&&an(m)))}function Sb(m,y,T){switch(y.tag){case 3:yt(y,y.stateNode.containerInfo),No(y,ks,m.memoizedState.cache),Ep();break;case 27:case 5:zt(y);break;case 4:yt(y,y.stateNode.containerInfo);break;case 10:No(y,y.type,y.memoizedProps.value);break;case 13:var k=y.memoizedState;if(k!==null)return k.dehydrated!==null?(kp(y),y.flags|=128,null):(T&y.child.childLanes)!==0?f0(m,y,T):(kp(y),m=Ec(m,y,T),m!==null?m.sibling:null);kp(y);break;case 19:var q=(m.flags&128)!==0;if(k=(T&y.childLanes)!==0,k||(GA(m,y,T,!1),k=(T&y.childLanes)!==0),q){if(k)return Np(m,y,T);y.flags|=128}if(q=y.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),je(va,va.current),k)break;return null;case 22:case 23:return y.lanes=0,Cl(m,y,T);case 24:No(y,ks,m.memoizedState.cache)}return Ec(m,y,T)}function bx(m,y,T){if(m!==null)if(m.memoizedProps!==y.pendingProps)Kr=!0;else{if(!dd(m,T)&&(y.flags&128)===0)return Kr=!1,Sb(m,y,T);Kr=(m.flags&131072)!==0}else Kr=!1,gn&&(y.flags&1048576)!==0&&e0(y,Su,y.index);switch(y.lanes=0,y.tag){case 16:e:{m=y.pendingProps;var k=y.elementType,q=k._init;if(k=q(k._payload),y.type=k,typeof k=="function")bc(k)?(m=Na(k,m),y.tag=1,y=tu(null,y,k,m,T)):(y.tag=0,y=gh(null,y,k,m,T));else{if(k!=null){if(q=k.$$typeof,q===z){y.tag=11,y=KA(null,y,k,m,T);break e}else if(q===J){y.tag=14,y=S_(null,y,k,m,T);break e}}throw y=pe(k)||k,Error(r(306,y,""))}}return y;case 0:return gh(m,y,y.type,y.pendingProps,T);case 1:return k=y.type,q=Na(k,y.pendingProps),tu(m,y,k,q,T);case 3:e:{if(yt(y,y.stateNode.containerInfo),m===null)throw Error(r(387));k=y.pendingProps;var Y=y.memoizedState;q=Y.element,iA(m,y),Jc(y,k,null,T);var be=y.memoizedState;if(k=be.cache,No(y,ks,k),k!==Y.cache&&Sp(y,[ks],T,!0),Yc(),k=be.element,Y.isDehydrated)if(Y={element:k,isDehydrated:!1,cache:be.cache},y.updateQueue.baseState=Y,y.memoizedState=Y,y.flags&256){y=Yf(m,y,k,T);break e}else if(k!==q){q=Po(Error(r(424)),y),zA(q),y=Yf(m,y,k,T);break e}else{switch(m=y.stateNode.containerInfo,m.nodeType){case 9:m=m.body;break;default:m=m.nodeName==="HTML"?m.ownerDocument.body:m}for(Zs=ep(m.firstChild),pa=y,gn=!0,wl=null,el=!0,T=A0(y,null,k,T),y.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling}else{if(Ep(),k===q){y=Ec(m,y,T);break e}zo(m,y,k,T)}y=y.child}return y;case 26:return eu(m,y),m===null?(T=lB(y.type,null,y.pendingProps,null))?y.memoizedState=T:gn||(T=y.type,m=y.pendingProps,k=Ix(ht.current).createElement(T),k[Xr]=y,k[$n]=m,Ha(k,T,m),Hi(k),y.stateNode=k):y.memoizedState=lB(y.type,m.memoizedProps,y.pendingProps,m.memoizedState),null;case 27:return zt(y),m===null&&gn&&(k=y.stateNode=DM(y.type,y.pendingProps,ht.current),pa=y,el=!0,q=Zs,pm(y.type)?(aB=q,Zs=ep(k.firstChild)):Zs=q),zo(m,y,y.pendingProps.children,T),eu(m,y),m===null&&(y.flags|=4194304),y.child;case 5:return m===null&&gn&&((q=k=Zs)&&(k=KL(k,y.type,y.pendingProps,el),k!==null?(y.stateNode=k,pa=y,Zs=ep(k.firstChild),el=!1,q=!0):q=!1),q||Qo(y)),zt(y),q=y.type,Y=y.pendingProps,be=m!==null?m.memoizedProps:null,k=Y.children,nB(q,Y)?k=null:be!==null&&nB(q,be)&&(y.flags|=32),y.memoizedState!==null&&(q=Tu(m,y,VS,null,null,T),I0._currentValue=q),eu(m,y),zo(m,y,k,T),y.child;case 6:return m===null&&gn&&((m=T=Zs)&&(T=XL(T,y.pendingProps,el),T!==null?(y.stateNode=T,pa=y,Zs=null,m=!0):m=!1),m||Qo(y)),null;case 13:return f0(m,y,T);case 4:return yt(y,y.stateNode.containerInfo),k=y.pendingProps,m===null?y.child=Up(y,null,k,T):zo(m,y,k,T),y.child;case 11:return KA(m,y,y.type,y.pendingProps,T);case 7:return zo(m,y,y.pendingProps,T),y.child;case 8:return zo(m,y,y.pendingProps.children,T),y.child;case 12:return zo(m,y,y.pendingProps.children,T),y.child;case 10:return k=y.pendingProps,No(y,y.type,k.value),zo(m,y,k.children,T),y.child;case 9:return q=y.type._context,k=y.pendingProps.children,_n(y),q=$l(q),k=k(q),y.flags|=1,zo(m,y,k,T),y.child;case 14:return S_(m,y,y.type,y.pendingProps,T);case 15:return Jl(m,y,y.type,y.pendingProps,T);case 19:return Np(m,y,T);case 31:return k=y.pendingProps,T=y.mode,k={mode:k.mode,children:k.children},m===null?(T=lm(k,T),T.ref=y.ref,y.child=T,T.return=y,y=T):(T=Eu(m.child,k),T.ref=y.ref,y.child=T,T.return=y,y=T),y;case 22:return Cl(m,y,T);case 24:return _n(y),k=$l(ks),m===null?(q=ga(),q===null&&(q=En,Y=Ls(),q.pooledCache=Y,Y.refCount++,Y!==null&&(q.pooledCacheLanes|=T),q=Y),y.memoizedState={parent:k,cache:q},ad(y),No(y,ks,q)):((m.lanes&T)!==0&&(iA(m,y),Jc(y,null,null,T),Yc()),q=m.memoizedState,Y=y.memoizedState,q.parent!==k?(q={parent:k,cache:k},y.memoizedState=q,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=q),No(y,ks,k)):(k=Y.cache,No(y,ks,k),k!==q.cache&&Sp(y,[ks],T,!0))),zo(m,y,y.pendingProps.children,T),y.child;case 29:throw y.pendingProps}throw Error(r(156,y.tag))}function Ru(m){m.flags|=4}function mh(m,y){if(y.type!=="stylesheet"||(y.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!hB(y)){if(y=Cc.current,y!==null&&((Wi&4194048)===Wi?ph!==null:(Wi&62914560)!==Wi&&(Wi&536870912)===0||y!==ph))throw em=Zg,u_;m.flags|=8192}}function Zf(m,y){y!==null&&(m.flags|=4),m.flags&16384&&(y=m.tag!==22?Ti():536870912,m.lanes|=y,sl|=y)}function _h(m,y){if(!gn)switch(m.tailMode){case"hidden":y=m.tail;for(var T=null;y!==null;)y.alternate!==null&&(T=y),y=y.sibling;T===null?m.tail=null:T.sibling=null;break;case"collapsed":T=m.tail;for(var k=null;T!==null;)T.alternate!==null&&(k=T),T=T.sibling;k===null?y||m.tail===null?m.tail=null:m.tail.sibling=null:k.sibling=null}}function Ts(m){var y=m.alternate!==null&&m.alternate.child===m.child,T=0,k=0;if(y)for(var q=m.child;q!==null;)T|=q.lanes|q.childLanes,k|=q.subtreeFlags&65011712,k|=q.flags&65011712,q.return=m,q=q.sibling;else for(q=m.child;q!==null;)T|=q.lanes|q.childLanes,k|=q.subtreeFlags,k|=q.flags,q.return=m,q=q.sibling;return m.subtreeFlags|=k,m.childLanes=T,y}function M_(m,y,T){var k=y.pendingProps;switch(a_(y),y.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ts(y),null;case 1:return Ts(y),null;case 3:return T=y.stateNode,k=null,m!==null&&(k=m.memoizedState.cache),y.memoizedState.cache!==k&&(y.flags|=2048),rd(ks),Nt(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(m===null||m.child===null)&&(uh(y)?Ru(y):m===null||m.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Xg())),Ts(y),null;case 26:return T=y.memoizedState,m===null?(Ru(y),T!==null?(Ts(y),mh(y,T)):(Ts(y),y.flags&=-16777217)):T?T!==m.memoizedState?(Ru(y),Ts(y),mh(y,T)):(Ts(y),y.flags&=-16777217):(m.memoizedProps!==k&&Ru(y),Ts(y),y.flags&=-16777217),null;case 27:ei(y),T=ht.current;var q=y.type;if(m!==null&&y.stateNode!=null)m.memoizedProps!==k&&Ru(y);else{if(!k){if(y.stateNode===null)throw Error(r(166));return Ts(y),null}m=Ie.current,uh(y)?Cp(y):(m=DM(q,k,T),y.stateNode=m,Ru(y))}return Ts(y),null;case 5:if(ei(y),T=y.type,m!==null&&y.stateNode!=null)m.memoizedProps!==k&&Ru(y);else{if(!k){if(y.stateNode===null)throw Error(r(166));return Ts(y),null}if(m=Ie.current,uh(y))Cp(y);else{switch(q=Ix(ht.current),m){case 1:m=q.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:m=q.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":m=q.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":m=q.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":m=q.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof k.is=="string"?q.createElement("select",{is:k.is}):q.createElement("select"),k.multiple?m.multiple=!0:k.size&&(m.size=k.size);break;default:m=typeof k.is=="string"?q.createElement(T,{is:k.is}):q.createElement(T)}}m[Xr]=y,m[$n]=k;e:for(q=y.child;q!==null;){if(q.tag===5||q.tag===6)m.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===y)break e;for(;q.sibling===null;){if(q.return===null||q.return===y)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}y.stateNode=m;e:switch(Ha(m,T,k),T){case"button":case"input":case"select":case"textarea":m=!!k.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Ru(y)}}return Ts(y),y.flags&=-16777217,null;case 6:if(m&&y.stateNode!=null)m.memoizedProps!==k&&Ru(y);else{if(typeof k!="string"&&y.stateNode===null)throw Error(r(166));if(m=ht.current,uh(y)){if(m=y.stateNode,T=y.memoizedProps,k=null,q=pa,q!==null)switch(q.tag){case 27:case 5:k=q.memoizedProps}m[Xr]=y,m=!!(m.nodeValue===T||k!==null&&k.suppressHydrationWarning===!0||iB(m.nodeValue,T)),m||Qo(y)}else m=Ix(m).createTextNode(k),m[Xr]=y,y.stateNode=m}return Ts(y),null;case 13:if(k=y.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(q=uh(y),k!==null&&k.dehydrated!==null){if(m===null){if(!q)throw Error(r(318));if(q=y.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(r(317));q[Xr]=y}else Ep(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Ts(y),q=!1}else q=Xg(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=q),q=!0;if(!q)return y.flags&256?(fh(y),y):(fh(y),null)}if(fh(y),(y.flags&128)!==0)return y.lanes=T,y;if(T=k!==null,m=m!==null&&m.memoizedState!==null,T){k=y.child,q=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(q=k.alternate.memoizedState.cachePool.pool);var Y=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(Y=k.memoizedState.cachePool.pool),Y!==q&&(k.flags|=2048)}return T!==m&&T&&(y.child.flags|=8192),Zf(y,y.updateQueue),Ts(y),null;case 4:return Nt(),m===null&&ZS(y.stateNode.containerInfo),Ts(y),null;case 10:return rd(y.type),Ts(y),null;case 19:if(ke(va),q=y.memoizedState,q===null)return Ts(y),null;if(k=(y.flags&128)!==0,Y=q.rendering,Y===null)if(k)_h(q,!1);else{if(gs!==0||m!==null&&(m.flags&128)!==0)for(m=y.child;m!==null;){if(Y=C_(m),Y!==null){for(y.flags|=128,_h(q,!1),m=Y.updateQueue,y.updateQueue=m,Zf(y,m),y.subtreeFlags=0,m=T,T=y.child;T!==null;)wc(T,m),T=T.sibling;return je(va,va.current&1|2),y.child}m=m.sibling}q.tail!==null&&Wt()>jp&&(y.flags|=128,k=!0,_h(q,!1),y.lanes=4194304)}else{if(!k)if(m=C_(Y),m!==null){if(y.flags|=128,k=!0,m=m.updateQueue,y.updateQueue=m,Zf(y,m),_h(q,!0),q.tail===null&&q.tailMode==="hidden"&&!Y.alternate&&!gn)return Ts(y),null}else 2*Wt()-q.renderingStartTime>jp&&T!==536870912&&(y.flags|=128,k=!0,_h(q,!1),y.lanes=4194304);q.isBackwards?(Y.sibling=y.child,y.child=Y):(m=q.last,m!==null?m.sibling=Y:y.child=Y,q.last=Y)}return q.tail!==null?(y=q.tail,q.rendering=y,q.tail=y.sibling,q.renderingStartTime=Wt(),y.sibling=null,m=va.current,je(va,k?m&1|2:m&1),y):(Ts(y),null);case 22:case 23:return fh(y),ld(),k=y.memoizedState!==null,m!==null?m.memoizedState!==null!==k&&(y.flags|=8192):k&&(y.flags|=8192),k?(T&536870912)!==0&&(y.flags&128)===0&&(Ts(y),y.subtreeFlags&6&&(y.flags|=8192)):Ts(y),T=y.updateQueue,T!==null&&Zf(y,T.retryQueue),T=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==T&&(y.flags|=2048),m!==null&&ke(to),null;case 24:return T=null,m!==null&&(T=m.memoizedState.cache),y.memoizedState.cache!==T&&(y.flags|=2048),rd(ks),Ts(y),null;case 25:return null;case 30:return null}throw Error(r(156,y.tag))}function Du(m,y){switch(a_(y),y.tag){case 1:return m=y.flags,m&65536?(y.flags=m&-65537|128,y):null;case 3:return rd(ks),Nt(),m=y.flags,(m&65536)!==0&&(m&128)===0?(y.flags=m&-65537|128,y):null;case 26:case 27:case 5:return ei(y),null;case 13:if(fh(y),m=y.memoizedState,m!==null&&m.dehydrated!==null){if(y.alternate===null)throw Error(r(340));Ep()}return m=y.flags,m&65536?(y.flags=m&-65537|128,y):null;case 19:return ke(va),null;case 4:return Nt(),null;case 10:return rd(y.type),null;case 22:case 23:return fh(y),ld(),m!==null&&ke(to),m=y.flags,m&65536?(y.flags=m&-65537|128,y):null;case 24:return rd(ks),null;case 25:return null;default:return null}}function Bb(m,y){switch(a_(y),y.tag){case 3:rd(ks),Nt();break;case 26:case 27:case 5:ei(y);break;case 4:Nt();break;case 13:fh(y);break;case 19:ke(va);break;case 10:rd(y.type);break;case 22:case 23:fh(y),ld(),m!==null&&ke(to);break;case 24:rd(ks)}}function sA(m,y){try{var T=y.updateQueue,k=T!==null?T.lastEffect:null;if(k!==null){var q=k.next;T=q;do{if((T.tag&m)===m){k=void 0;var Y=T.create,be=T.inst;k=Y(),be.destroy=k}T=T.next}while(T!==q)}}catch(Ue){kr(y,y.return,Ue)}}function Ad(m,y,T){try{var k=y.updateQueue,q=k!==null?k.lastEffect:null;if(q!==null){var Y=q.next;k=Y;do{if((k.tag&m)===m){var be=k.inst,Ue=be.destroy;if(Ue!==void 0){be.destroy=void 0,q=y;var rt=T,Ft=Ue;try{Ft()}catch(di){kr(q,rt,di)}}}k=k.next}while(k!==Y)}}catch(di){kr(y,y.return,di)}}function Sc(m){var y=m.updateQueue;if(y!==null){var T=m.stateNode;try{zs(y,T)}catch(k){kr(m,m.return,k)}}}function El(m,y,T){T.props=Na(m.type,m.memoizedProps),T.state=m.memoizedState;try{T.componentWillUnmount()}catch(k){kr(m,y,k)}}function Ao(m,y){try{var T=m.ref;if(T!==null){switch(m.tag){case 26:case 27:case 5:var k=m.stateNode;break;case 30:k=m.stateNode;break;default:k=m.stateNode}typeof T=="function"?m.refCleanup=T(k):T.current=k}}catch(q){kr(m,y,q)}}function ps(m,y){var T=m.ref,k=m.refCleanup;if(T!==null)if(typeof k=="function")try{k()}catch(q){kr(m,y,q)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(q){kr(m,y,q)}else T.current=null}function Jn(m){var y=m.type,T=m.memoizedProps,k=m.stateNode;try{e:switch(y){case"button":case"input":case"select":case"textarea":T.autoFocus&&k.focus();break e;case"img":T.src?k.src=T.src:T.srcSet&&(k.srcset=T.srcSet)}}catch(q){kr(m,m.return,q)}}function Ms(m,y,T){try{var k=m.stateNode;Bx(k,m.type,T,y),k[$n]=y}catch(q){kr(m,m.return,q)}}function Vs(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&pm(m.type)||m.tag===4}function oA(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Vs(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&pm(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Fu(m,y,T){var k=m.tag;if(k===5||k===6)m=m.stateNode,y?(T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T).insertBefore(m,y):(y=T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T,y.appendChild(m),T=T._reactRootContainer,T!=null||y.onclick!==null||(y.onclick=_d));else if(k!==4&&(k===27&&pm(m.type)&&(T=m.stateNode,y=null),m=m.child,m!==null))for(Fu(m,y,T),m=m.sibling;m!==null;)Fu(m,y,T),m=m.sibling}function Bc(m,y,T){var k=m.tag;if(k===5||k===6)m=m.stateNode,y?T.insertBefore(m,y):T.appendChild(m);else if(k!==4&&(k===27&&pm(m.type)&&(T=m.stateNode),m=m.child,m!==null))for(Bc(m,y,T),m=m.sibling;m!==null;)Bc(m,y,T),m=m.sibling}function aA(m){var y=m.stateNode,T=m.memoizedProps;try{for(var k=m.type,q=y.attributes;q.length;)y.removeAttributeNode(q[0]);Ha(y,k,T),y[Xr]=m,y[$n]=T}catch(Y){kr(m,m.return,Y)}}var Sl=!1,Ps=!1,um=!1,Hp=typeof WeakSet=="function"?WeakSet:Set,xs=null;function zp(m,y){if(m=m.containerInfo,w0=Ux,m=Zv(m),ha(m)){if("selectionStart"in m)var T={start:m.selectionStart,end:m.selectionEnd};else e:{T=(T=m.ownerDocument)&&T.defaultView||window;var k=T.getSelection&&T.getSelection();if(k&&k.rangeCount!==0){T=k.anchorNode;var q=k.anchorOffset,Y=k.focusNode;k=k.focusOffset;try{T.nodeType,Y.nodeType}catch{T=null;break e}var be=0,Ue=-1,rt=-1,Ft=0,di=0,fi=m,Yt=null;t:for(;;){for(var ii;fi!==T||q!==0&&fi.nodeType!==3||(Ue=be+q),fi!==Y||k!==0&&fi.nodeType!==3||(rt=be+k),fi.nodeType===3&&(be+=fi.nodeValue.length),(ii=fi.firstChild)!==null;)Yt=fi,fi=ii;for(;;){if(fi===m)break t;if(Yt===T&&++Ft===q&&(Ue=be),Yt===Y&&++di===k&&(rt=be),(ii=fi.nextSibling)!==null)break;fi=Yt,Yt=fi.parentNode}fi=ii}T=Ue===-1||rt===-1?null:{start:Ue,end:rt}}else T=null}T=T||{start:0,end:0}}else T=null;for(x0={focusedElem:m,selectionRange:T},Ux=!1,xs=y;xs!==null;)if(y=xs,m=y.child,(y.subtreeFlags&1024)!==0&&m!==null)m.return=y,xs=m;else for(;xs!==null;){switch(y=xs,Y=y.alternate,m=y.flags,y.tag){case 0:break;case 11:case 15:break;case 1:if((m&1024)!==0&&Y!==null){m=void 0,T=y,q=Y.memoizedProps,Y=Y.memoizedState,k=T.stateNode;try{var Gn=Na(T.type,q,T.elementType===T.type);m=k.getSnapshotBeforeUpdate(Gn,Y),k.__reactInternalSnapshotBeforeUpdate=m}catch(Un){kr(T,T.return,Un)}}break;case 3:if((m&1024)!==0){if(m=y.stateNode.containerInfo,T=m.nodeType,T===9)sB(m);else if(T===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":sB(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=y.sibling,m!==null){m.return=y.return,xs=m;break}xs=y.return}}function pd(m,y,T){var k=T.flags;switch(T.tag){case 0:case 11:case 15:cA(m,T),k&4&&sA(5,T);break;case 1:if(cA(m,T),k&4)if(m=T.stateNode,y===null)try{m.componentDidMount()}catch(be){kr(T,T.return,be)}else{var q=Na(T.type,y.memoizedProps);y=y.memoizedState;try{m.componentDidUpdate(q,y,m.__reactInternalSnapshotBeforeUpdate)}catch(be){kr(T,T.return,be)}}k&64&&Sc(T),k&512&&Ao(T,T.return);break;case 3:if(cA(m,T),k&64&&(m=T.updateQueue,m!==null)){if(y=null,T.child!==null)switch(T.child.tag){case 27:case 5:y=T.child.stateNode;break;case 1:y=T.child.stateNode}try{zs(m,y)}catch(be){kr(T,T.return,be)}}break;case 27:y===null&&k&4&&aA(T);case 26:case 5:cA(m,T),y===null&&k&4&&Jn(T),k&512&&Ao(T,T.return);break;case 12:cA(m,T);break;case 13:cA(m,T),k&4&&R_(m,T),k&64&&(m=T.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(T=_M.bind(null,T),YL(m,T))));break;case 22:if(k=T.memoizedState!==null||Sl,!k){y=y!==null&&y.memoizedState!==null||Ps,q=Sl;var Y=Ps;Sl=k,(Ps=y)&&!Y?Bl(m,T,(T.subtreeFlags&8772)!==0):cA(m,T),Sl=q,Ps=Y}break;case 30:break;default:cA(m,T)}}function YA(m){var y=m.alternate;y!==null&&(m.alternate=null,YA(y)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(y=m.stateNode,y!==null&&eh(y)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var fs=null,rl=!1;function fd(m,y,T){for(T=T.child;T!==null;)ya(m,y,T),T=T.sibling}function ya(m,y,T){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(ft,T)}catch{}switch(T.tag){case 26:Ps||ps(T,y),fd(m,y,T),T.memoizedState?T.memoizedState.count--:T.stateNode&&(T=T.stateNode,T.parentNode.removeChild(T));break;case 27:Ps||ps(T,y);var k=fs,q=rl;pm(T.type)&&(fs=T.stateNode,rl=!1),fd(m,y,T),Lb(T.stateNode),fs=k,rl=q;break;case 5:Ps||ps(T,y);case 6:if(k=fs,q=rl,fs=null,fd(m,y,T),fs=k,rl=q,fs!==null)if(rl)try{(fs.nodeType===9?fs.body:fs.nodeName==="HTML"?fs.ownerDocument.body:fs).removeChild(T.stateNode)}catch(Y){kr(T,y,Y)}else try{fs.removeChild(T.stateNode)}catch(Y){kr(T,y,Y)}break;case 18:fs!==null&&(rl?(m=fs,MM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,T.stateNode),Vb(m)):MM(fs,T.stateNode));break;case 4:k=fs,q=rl,fs=T.stateNode.containerInfo,rl=!0,fd(m,y,T),fs=k,rl=q;break;case 0:case 11:case 14:case 15:Ps||Ad(2,T,y),Ps||Ad(4,T,y),fd(m,y,T);break;case 1:Ps||(ps(T,y),k=T.stateNode,typeof k.componentWillUnmount=="function"&&El(T,y,k)),fd(m,y,T);break;case 21:fd(m,y,T);break;case 22:Ps=(k=Ps)||T.memoizedState!==null,fd(m,y,T),Ps=k;break;default:fd(m,y,T)}}function R_(m,y){if(y.memoizedState===null&&(m=y.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Vb(m)}catch(T){kr(y,y.return,T)}}function g0(m){switch(m.tag){case 13:case 19:var y=m.stateNode;return y===null&&(y=m.stateNode=new Hp),y;case 22:return m=m.stateNode,y=m._retryCache,y===null&&(y=m._retryCache=new Hp),y;default:throw Error(r(435,m.tag))}}function lA(m,y){var T=g0(m);y.forEach(function(k){var q=GL.bind(null,m,k);T.has(k)||(T.add(k),k.then(q,q))})}function po(m,y){var T=y.deletions;if(T!==null)for(var k=0;k<T.length;k++){var q=T[k],Y=m,be=y,Ue=be;e:for(;Ue!==null;){switch(Ue.tag){case 27:if(pm(Ue.type)){fs=Ue.stateNode,rl=!1;break e}break;case 5:fs=Ue.stateNode,rl=!1;break e;case 3:case 4:fs=Ue.stateNode.containerInfo,rl=!0;break e}Ue=Ue.return}if(fs===null)throw Error(r(160));ya(Y,be,q),fs=null,rl=!1,Y=q.alternate,Y!==null&&(Y.return=null),q.return=null}if(y.subtreeFlags&13878)for(y=y.child;y!==null;)Ib(y,m),y=y.sibling}var Uu=null;function Ib(m,y){var T=m.alternate,k=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:po(y,m),Ic(m),k&4&&(Ad(3,m,m.return),sA(3,m),Ad(5,m,m.return));break;case 1:po(y,m),Ic(m),k&512&&(Ps||T===null||ps(T,T.return)),k&64&&Sl&&(m=m.updateQueue,m!==null&&(k=m.callbacks,k!==null&&(T=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=T===null?k:T.concat(k))));break;case 26:var q=Uu;if(po(y,m),Ic(m),k&512&&(Ps||T===null||ps(T,T.return)),k&4){var Y=T!==null?T.memoizedState:null;if(k=m.memoizedState,T===null)if(k===null)if(m.stateNode===null){e:{k=m.type,T=m.memoizedProps,q=q.ownerDocument||q;t:switch(k){case"title":Y=q.getElementsByTagName("title")[0],(!Y||Y[Nc]||Y[Xr]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=q.createElement(k),q.head.insertBefore(Y,q.querySelector("head > title"))),Ha(Y,k,T),Y[Xr]=m,Hi(Y),k=Y;break e;case"link":var be=Rx("link","href",q).get(k+(T.href||""));if(be){for(var Ue=0;Ue<be.length;Ue++)if(Y=be[Ue],Y.getAttribute("href")===(T.href==null||T.href===""?null:T.href)&&Y.getAttribute("rel")===(T.rel==null?null:T.rel)&&Y.getAttribute("title")===(T.title==null?null:T.title)&&Y.getAttribute("crossorigin")===(T.crossOrigin==null?null:T.crossOrigin)){be.splice(Ue,1);break t}}Y=q.createElement(k),Ha(Y,k,T),q.head.appendChild(Y);break;case"meta":if(be=Rx("meta","content",q).get(k+(T.content||""))){for(Ue=0;Ue<be.length;Ue++)if(Y=be[Ue],Y.getAttribute("content")===(T.content==null?null:""+T.content)&&Y.getAttribute("name")===(T.name==null?null:T.name)&&Y.getAttribute("property")===(T.property==null?null:T.property)&&Y.getAttribute("http-equiv")===(T.httpEquiv==null?null:T.httpEquiv)&&Y.getAttribute("charset")===(T.charSet==null?null:T.charSet)){be.splice(Ue,1);break t}}Y=q.createElement(k),Ha(Y,k,T),q.head.appendChild(Y);break;default:throw Error(r(468,k))}Y[Xr]=m,Hi(Y),k=Y}m.stateNode=k}else PM(q,m.type,m.stateNode);else m.stateNode=gm(q,k,m.memoizedProps);else Y!==k?(Y===null?T.stateNode!==null&&(T=T.stateNode,T.parentNode.removeChild(T)):Y.count--,k===null?PM(q,m.type,m.stateNode):gm(q,k,m.memoizedProps)):k===null&&m.stateNode!==null&&Ms(m,m.memoizedProps,T.memoizedProps)}break;case 27:po(y,m),Ic(m),k&512&&(Ps||T===null||ps(T,T.return)),T!==null&&k&4&&Ms(m,m.memoizedProps,T.memoizedProps);break;case 5:if(po(y,m),Ic(m),k&512&&(Ps||T===null||ps(T,T.return)),m.flags&32){q=m.stateNode;try{Ya(q,"")}catch(ii){kr(m,m.return,ii)}}k&4&&m.stateNode!=null&&(q=m.memoizedProps,Ms(m,q,T!==null?T.memoizedProps:q)),k&1024&&(um=!0);break;case 6:if(po(y,m),Ic(m),k&4){if(m.stateNode===null)throw Error(r(162));k=m.memoizedProps,T=m.stateNode;try{T.nodeValue=k}catch(ii){kr(m,m.return,ii)}}break;case 3:if(B0=null,q=Uu,Uu=Tx(y.containerInfo),po(y,m),Uu=q,Ic(m),k&4&&T!==null&&T.memoizedState.isDehydrated)try{Vb(y.containerInfo)}catch(ii){kr(m,m.return,ii)}um&&(um=!1,Mo(m));break;case 4:k=Uu,Uu=Tx(m.stateNode.containerInfo),po(y,m),Ic(m),Uu=k;break;case 12:po(y,m),Ic(m);break;case 13:po(y,m),Ic(m),m.child.flags&8192&&m.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(F_=Wt()),k&4&&(k=m.updateQueue,k!==null&&(m.updateQueue=null,lA(m,k)));break;case 22:q=m.memoizedState!==null;var rt=T!==null&&T.memoizedState!==null,Ft=Sl,di=Ps;if(Sl=Ft||q,Ps=di||rt,po(y,m),Ps=di,Sl=Ft,Ic(m),k&8192)e:for(y=m.stateNode,y._visibility=q?y._visibility&-2:y._visibility|1,q&&(T===null||rt||Sl||Ps||Zl(m)),T=null,y=m;;){if(y.tag===5||y.tag===26){if(T===null){rt=T=y;try{if(Y=rt.stateNode,q)be=Y.style,typeof be.setProperty=="function"?be.setProperty("display","none","important"):be.display="none";else{Ue=rt.stateNode;var fi=rt.memoizedProps.style,Yt=fi!=null&&fi.hasOwnProperty("display")?fi.display:null;Ue.style.display=Yt==null||typeof Yt=="boolean"?"":(""+Yt).trim()}}catch(ii){kr(rt,rt.return,ii)}}}else if(y.tag===6){if(T===null){rt=y;try{rt.stateNode.nodeValue=q?"":rt.memoizedProps}catch(ii){kr(rt,rt.return,ii)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===m)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===m)break e;for(;y.sibling===null;){if(y.return===null||y.return===m)break e;T===y&&(T=null),y=y.return}T===y&&(T=null),y.sibling.return=y.return,y=y.sibling}k&4&&(k=m.updateQueue,k!==null&&(T=k.retryQueue,T!==null&&(k.retryQueue=null,lA(m,T))));break;case 19:po(y,m),Ic(m),k&4&&(k=m.updateQueue,k!==null&&(m.updateQueue=null,lA(m,k)));break;case 30:break;case 21:break;default:po(y,m),Ic(m)}}function Ic(m){var y=m.flags;if(y&2){try{for(var T,k=m.return;k!==null;){if(Vs(k)){T=k;break}k=k.return}if(T==null)throw Error(r(160));switch(T.tag){case 27:var q=T.stateNode,Y=oA(m);Bc(m,Y,q);break;case 5:var be=T.stateNode;T.flags&32&&(Ya(be,""),T.flags&=-33);var Ue=oA(m);Bc(m,Ue,be);break;case 3:case 4:var rt=T.stateNode.containerInfo,Ft=oA(m);Fu(m,Ft,rt);break;default:throw Error(r(161))}}catch(di){kr(m,m.return,di)}m.flags&=-3}y&4096&&(m.flags&=-4097)}function Mo(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var y=m;Mo(y),y.tag===5&&y.flags&1024&&y.stateNode.reset(),m=m.sibling}}function cA(m,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)pd(m,y.alternate,y),y=y.sibling}function Zl(m){for(m=m.child;m!==null;){var y=m;switch(y.tag){case 0:case 11:case 14:case 15:Ad(4,y,y.return),Zl(y);break;case 1:ps(y,y.return);var T=y.stateNode;typeof T.componentWillUnmount=="function"&&El(y,y.return,T),Zl(y);break;case 27:Lb(y.stateNode);case 26:case 5:ps(y,y.return),Zl(y);break;case 22:y.memoizedState===null&&Zl(y);break;case 30:Zl(y);break;default:Zl(y)}m=m.sibling}}function Bl(m,y,T){for(T=T&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var k=y.alternate,q=m,Y=y,be=Y.flags;switch(Y.tag){case 0:case 11:case 15:Bl(q,Y,T),sA(4,Y);break;case 1:if(Bl(q,Y,T),k=Y,q=k.stateNode,typeof q.componentDidMount=="function")try{q.componentDidMount()}catch(Ft){kr(k,k.return,Ft)}if(k=Y,q=k.updateQueue,q!==null){var Ue=k.stateNode;try{var rt=q.shared.hiddenCallbacks;if(rt!==null)for(q.shared.hiddenCallbacks=null,q=0;q<rt.length;q++)tl(rt[q],Ue)}catch(Ft){kr(k,k.return,Ft)}}T&&be&64&&Sc(Y),Ao(Y,Y.return);break;case 27:aA(Y);case 26:case 5:Bl(q,Y,T),T&&k===null&&be&4&&Jn(Y),Ao(Y,Y.return);break;case 12:Bl(q,Y,T);break;case 13:Bl(q,Y,T),T&&be&4&&R_(q,Y);break;case 22:Y.memoizedState===null&&Bl(q,Y,T),Ao(Y,Y.return);break;case 30:break;default:Bl(q,Y,T)}y=y.sibling}}function fo(m,y){var T=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),m=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(m=y.memoizedState.cachePool.pool),m!==T&&(m!=null&&m.refCount++,T!=null&&Bp(T))}function eg(m,y){m=null,y.alternate!==null&&(m=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==m&&(y.refCount++,m!=null&&Bp(m))}function ku(m,y,T,k){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)go(m,y,T,k),y=y.sibling}function go(m,y,T,k){var q=y.flags;switch(y.tag){case 0:case 11:case 15:ku(m,y,T,k),q&2048&&sA(9,y);break;case 1:ku(m,y,T,k);break;case 3:ku(m,y,T,k),q&2048&&(m=null,y.alternate!==null&&(m=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==m&&(y.refCount++,m!=null&&Bp(m)));break;case 12:if(q&2048){ku(m,y,T,k),m=y.stateNode;try{var Y=y.memoizedProps,be=Y.id,Ue=Y.onPostCommit;typeof Ue=="function"&&Ue(be,y.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(rt){kr(y,y.return,rt)}}else ku(m,y,T,k);break;case 13:ku(m,y,T,k);break;case 23:break;case 22:Y=y.stateNode,be=y.alternate,y.memoizedState!==null?Y._visibility&2?ku(m,y,T,k):no(m,y):Y._visibility&2?ku(m,y,T,k):(Y._visibility|=2,Gp(m,y,T,k,(y.subtreeFlags&10256)!==0)),q&2048&&fo(be,y);break;case 24:ku(m,y,T,k),q&2048&&eg(y.alternate,y);break;default:ku(m,y,T,k)}}function Gp(m,y,T,k,q){for(q=q&&(y.subtreeFlags&10256)!==0,y=y.child;y!==null;){var Y=m,be=y,Ue=T,rt=k,Ft=be.flags;switch(be.tag){case 0:case 11:case 15:Gp(Y,be,Ue,rt,q),sA(8,be);break;case 23:break;case 22:var di=be.stateNode;be.memoizedState!==null?di._visibility&2?Gp(Y,be,Ue,rt,q):no(Y,be):(di._visibility|=2,Gp(Y,be,Ue,rt,q)),q&&Ft&2048&&fo(be.alternate,be);break;case 24:Gp(Y,be,Ue,rt,q),q&&Ft&2048&&eg(be.alternate,be);break;default:Gp(Y,be,Ue,rt,q)}y=y.sibling}}function no(m,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var T=m,k=y,q=k.flags;switch(k.tag){case 22:no(T,k),q&2048&&fo(k.alternate,k);break;case 24:no(T,k),q&2048&&eg(k.alternate,k);break;default:no(T,k)}y=y.sibling}}var Il=8192;function ec(m){if(m.subtreeFlags&Il)for(m=m.child;m!==null;)gd(m),m=m.sibling}function gd(m){switch(m.tag){case 26:ec(m),m.flags&Il&&m.memoizedState!==null&&QM(Uu,m.memoizedState,m.memoizedProps);break;case 5:ec(m);break;case 3:case 4:var y=Uu;Uu=Tx(m.stateNode.containerInfo),ec(m),Uu=y;break;case 22:m.memoizedState===null&&(y=m.alternate,y!==null&&y.memoizedState!==null?(y=Il,Il=16777216,ec(m),Il=y):ec(m));break;default:ec(m)}}function hm(m){var y=m.alternate;if(y!==null&&(m=y.child,m!==null)){y.child=null;do y=m.sibling,m.sibling=null,m=y;while(m!==null)}}function Vp(m){var y=m.deletions;if((m.flags&16)!==0){if(y!==null)for(var T=0;T<y.length;T++){var k=y[T];xs=k,$p(k,m)}hm(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)qp(m),m=m.sibling}function qp(m){switch(m.tag){case 0:case 11:case 15:Vp(m),m.flags&2048&&Ad(9,m,m.return);break;case 3:Vp(m);break;case 12:Vp(m);break;case 22:var y=m.stateNode;m.memoizedState!==null&&y._visibility&2&&(m.return===null||m.return.tag!==13)?(y._visibility&=-3,uA(m)):Vp(m);break;default:Vp(m)}}function uA(m){var y=m.deletions;if((m.flags&16)!==0){if(y!==null)for(var T=0;T<y.length;T++){var k=y[T];xs=k,$p(k,m)}hm(m)}for(m=m.child;m!==null;){switch(y=m,y.tag){case 0:case 11:case 15:Ad(8,y,y.return),uA(y);break;case 22:T=y.stateNode,T._visibility&2&&(T._visibility&=-3,uA(y));break;default:uA(y)}m=m.sibling}}function $p(m,y){for(;xs!==null;){var T=xs;switch(T.tag){case 0:case 11:case 15:Ad(8,T,y);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var k=T.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:Bp(T.memoizedState.cache)}if(k=T.child,k!==null)k.return=T,xs=k;else e:for(T=m;xs!==null;){k=xs;var q=k.sibling,Y=k.return;if(YA(k),k===T){xs=null;break e}if(q!==null){q.return=Y,xs=q;break e}xs=Y}}}var D_={getCacheForType:function(m){var y=$l(ks),T=y.data.get(m);return T===void 0&&(T=m(),y.data.set(m,T)),T}},JA=typeof WeakMap=="function"?WeakMap:Map,ss=0,En=null,cn=null,Wi=0,rn=0,_r=null,Xo=!1,iu=!1,Wp=!1,vh=0,gs=0,ms=0,Tl=0,yh=0,nu=0,sl=0,hA=null,mo=null,bh=!1,F_=0,jp=1/0,dA=null,Lu=null,Rs=0,ba=null,wh=null,Pu=0,U_=0,dm=null,tg=null,md=0,E=null;function M(){if((ss&2)!==0&&Wi!==0)return Wi&-Wi;if(ce.T!==null){var m=Bu;return m!==0?m:wx()}return Tn()}function Q(){nu===0&&(nu=(Wi&536870912)===0||gn?at():536870912);var m=Cc.current;return m!==null&&(m.flags|=32),nu}function K(m,y,T){(m===En&&(rn===2||rn===9)||m.cancelPendingCommit!==null)&&(vi(m,0),tt(m,Wi,nu,!1)),Xt(m,T),((ss&2)===0||m!==En)&&(m===En&&((ss&2)===0&&(Tl|=T),gs===4&&tt(m,Wi,nu,!1)),Kp(m))}function ne(m,y,T){if((ss&6)!==0)throw Error(r(327));var k=!T&&(y&124)===0&&(y&m.expiredLanes)===0||Ji(m,y),q=k?oi(m,y):ri(m,y,!0),Y=k;do{if(q===0){iu&&!k&&tt(m,y,0,!1);break}else{if(T=m.current.alternate,Y&&!Qe(T)){q=ri(m,y,!1),Y=!1;continue}if(q===2){if(Y=y,m.errorRecoveryDisabledLanes&Y)var be=0;else be=m.pendingLanes&-536870913,be=be!==0?be:be&536870912?536870912:0;if(be!==0){y=be;e:{var Ue=m;q=hA;var rt=Ue.current.memoizedState.isDehydrated;if(rt&&(vi(Ue,be).flags|=256),be=ri(Ue,be,!1),be!==2){if(Wp&&!rt){Ue.errorRecoveryDisabledLanes|=Y,Tl|=Y,q=4;break e}Y=mo,mo=q,Y!==null&&(mo===null?mo=Y:mo.push.apply(mo,Y))}q=be}if(Y=!1,q!==2)continue}}if(q===1){vi(m,0),tt(m,y,0,!0);break}e:{switch(k=m,Y=q,Y){case 0:case 1:throw Error(r(345));case 4:if((y&4194048)!==y)break;case 6:tt(k,y,nu,!Xo);break e;case 2:mo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((y&62914560)===y&&(q=F_+300-Wt(),10<q)){if(tt(k,y,nu,!Xo),ln(k,0,!0)!==0)break e;k.timeoutHandle=rB(he.bind(null,k,T,mo,dA,bh,y,nu,Tl,sl,Xo,Y,2,-0,0),q);break e}he(k,T,mo,dA,bh,y,nu,Tl,sl,Xo,Y,0,-0,0)}}break}while(!0);Kp(m)}function he(m,y,T,k,q,Y,be,Ue,rt,Ft,di,fi,Yt,ii){if(m.timeoutHandle=-1,fi=y.subtreeFlags,(fi&8192||(fi&16785408)===16785408)&&(Ob={stylesheets:null,count:0,unsuspend:OM},gd(y),fi=NM(),fi!==null)){m.cancelPendingCommit=fi(as.bind(null,m,y,Y,T,k,q,be,Ue,rt,di,1,Yt,ii)),tt(m,Y,be,!Ft);return}as(m,y,Y,T,k,q,be,Ue,rt)}function Qe(m){for(var y=m;;){var T=y.tag;if((T===0||T===11||T===15)&&y.flags&16384&&(T=y.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var k=0;k<T.length;k++){var q=T[k],Y=q.getSnapshot;q=q.value;try{if(!Sr(Y(),q))return!1}catch{return!1}}if(T=y.child,y.subtreeFlags&16384&&T!==null)T.return=y,y=T;else{if(y===m)break;for(;y.sibling===null;){if(y.return===null||y.return===m)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function tt(m,y,T,k){y&=~yh,y&=~Tl,m.suspendedLanes|=y,m.pingedLanes&=~y,k&&(m.warmLanes|=y),k=m.expirationTimes;for(var q=y;0<q;){var Y=31-si(q),be=1<<Y;k[Y]=-1,q&=~be}T!==0&&Ii(m,T,y)}function dt(){return(ss&6)===0?(Rb(0),!1):!0}function ni(){if(cn!==null){if(rn===0)var m=cn.return;else m=cn,hh=eA=null,ub(m),jf=null,Kf=0,m=cn;for(;m!==null;)Bb(m.alternate,m),m=m.return;cn=null}}function vi(m,y){var T=m.timeoutHandle;T!==-1&&(m.timeoutHandle=-1,WL(T)),T=m.cancelPendingCommit,T!==null&&(m.cancelPendingCommit=null,T()),ni(),En=m,cn=T=Eu(m.current,null),Wi=y,rn=0,_r=null,Xo=!1,iu=Ji(m,y),Wp=!1,sl=nu=yh=Tl=ms=gs=0,mo=hA=null,bh=!1,(y&8)!==0&&(y|=y&32);var k=m.entangledLanes;if(k!==0)for(m=m.entanglements,k&=y;0<k;){var q=31-si(k),Y=1<<q;y|=m[q],k&=~Y}return vh=y,Of(),T}function zi(m,y){mr=null,ce.H=x_,y===In||y===tA?(y=d_(),rn=3):y===u_?(y=d_(),rn=4):rn=y===hd?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,_r=y,cn===null&&(gs=1,Pp(m,Po(y,m.current)))}function Di(){var m=ce.H;return ce.H=x_,m===null?x_:m}function Sn(){var m=ce.A;return ce.A=D_,m}function Zn(){gs=4,Xo||(Wi&4194048)!==Wi&&Cc.current!==null||(iu=!0),(ms&134217727)===0&&(Tl&134217727)===0||En===null||tt(En,Wi,nu,!1)}function ri(m,y,T){var k=ss;ss|=2;var q=Di(),Y=Sn();(En!==m||Wi!==y)&&(dA=null,vi(m,y)),y=!1;var be=gs;e:do try{if(rn!==0&&cn!==null){var Ue=cn,rt=_r;switch(rn){case 8:ni(),be=6;break e;case 3:case 2:case 9:case 6:Cc.current===null&&(y=!0);var Ft=rn;if(rn=0,_r=null,vr(m,Ue,rt,Ft),T&&iu){be=0;break e}break;default:Ft=rn,rn=0,_r=null,vr(m,Ue,rt,Ft)}}Qt(),be=gs;break}catch(di){zi(m,di)}while(!0);return y&&m.shellSuspendCounter++,hh=eA=null,ss=k,ce.H=q,ce.A=Y,cn===null&&(En=null,Wi=0,Of()),be}function Qt(){for(;cn!==null;)Rn(cn)}function oi(m,y){var T=ss;ss|=2;var k=Di(),q=Sn();En!==m||Wi!==y?(dA=null,jp=Wt()+500,vi(m,y)):iu=Ji(m,y);e:do try{if(rn!==0&&cn!==null){y=cn;var Y=_r;t:switch(rn){case 1:rn=0,_r=null,vr(m,y,Y,1);break;case 2:case 9:if(h_(Y)){rn=0,_r=null,Qn(y);break}y=function(){rn!==2&&rn!==9||En!==m||(rn=7),Kp(m)},Y.then(y,y);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:h_(Y)?(rn=0,_r=null,Qn(y)):(rn=0,_r=null,vr(m,y,Y,7));break;case 5:var be=null;switch(cn.tag){case 26:be=cn.memoizedState;case 5:case 27:var Ue=cn;if(!be||hB(be)){rn=0,_r=null;var rt=Ue.sibling;if(rt!==null)cn=rt;else{var Ft=Ue.return;Ft!==null?(cn=Ft,Dn(Ft)):cn=null}break t}}rn=0,_r=null,vr(m,y,Y,5);break;case 6:rn=0,_r=null,vr(m,y,Y,6);break;case 8:ni(),gs=6;break e;default:throw Error(r(462))}}qi();break}catch(di){zi(m,di)}while(!0);return hh=eA=null,ce.H=k,ce.A=q,ss=T,cn!==null?0:(En=null,Wi=0,Of(),gs)}function qi(){for(;cn!==null&&!li();)Rn(cn)}function Rn(m){var y=bx(m.alternate,m,vh);m.memoizedProps=m.pendingProps,y===null?Dn(m):cn=y}function Qn(m){var y=m,T=y.alternate;switch(y.tag){case 15:case 0:y=B_(T,y,y.pendingProps,y.type,void 0,Wi);break;case 11:y=B_(T,y,y.pendingProps,y.type.render,y.ref,Wi);break;case 5:ub(y);default:Bb(T,y),y=cn=wc(y,vh),y=bx(T,y,vh)}m.memoizedProps=m.pendingProps,y===null?Dn(m):cn=y}function vr(m,y,T,k){hh=eA=null,ub(y),jf=null,Kf=0;var q=y.return;try{if(rA(m,q,y,T,Wi)){gs=1,Pp(m,Po(T,m.current)),cn=null;return}}catch(Y){if(q!==null)throw cn=q,Y;gs=1,Pp(m,Po(T,m.current)),cn=null;return}y.flags&32768?(gn||k===1?m=!0:iu||(Wi&536870912)!==0?m=!1:(Xo=m=!0,(k===2||k===9||k===3||k===6)&&(k=Cc.current,k!==null&&k.tag===13&&(k.flags|=16384))),os(y,m)):Dn(y)}function Dn(m){var y=m;do{if((y.flags&32768)!==0){os(y,Xo);return}m=y.return;var T=M_(y.alternate,y,vh);if(T!==null){cn=T;return}if(y=y.sibling,y!==null){cn=y;return}cn=y=m}while(y!==null);gs===0&&(gs=5)}function os(m,y){do{var T=Du(m.alternate,m);if(T!==null){T.flags&=32767,cn=T;return}if(T=m.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!y&&(m=m.sibling,m!==null)){cn=m;return}cn=m=T}while(m!==null);gs=6,cn=null}function as(m,y,T,k,q,Y,be,Ue,rt){m.cancelPendingCommit=null;do Ur();while(Rs!==0);if((ss&6)!==0)throw Error(r(327));if(y!==null){if(y===m.current)throw Error(r(177));if(Y=y.lanes|y.childLanes,Y|=Oo,Mi(m,T,Y,be,Ue,rt),m===En&&(cn=En=null,Wi=0),wh=y,ba=m,Pu=T,U_=Y,dm=q,tg=k,(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,VL(Se,function(){return xh(),null})):(m.callbackNode=null,m.callbackPriority=0),k=(y.flags&13878)!==0,(y.subtreeFlags&13878)!==0||k){k=ce.T,ce.T=null,q=_e.p,_e.p=2,be=ss,ss|=4;try{zp(m,y,T)}finally{ss=be,_e.p=q,ce.T=k}}Rs=1,_s(),Nn(),ur()}}function _s(){if(Rs===1){Rs=0;var m=ba,y=wh,T=(y.flags&13878)!==0;if((y.subtreeFlags&13878)!==0||T){T=ce.T,ce.T=null;var k=_e.p;_e.p=2;var q=ss;ss|=4;try{Ib(y,m);var Y=x0,be=Zv(m.containerInfo),Ue=Y.focusedElem,rt=Y.selectionRange;if(be!==Ue&&Ue&&Ue.ownerDocument&&i_(Ue.ownerDocument.documentElement,Ue)){if(rt!==null&&ha(Ue)){var Ft=rt.start,di=rt.end;if(di===void 0&&(di=Ft),"selectionStart"in Ue)Ue.selectionStart=Ft,Ue.selectionEnd=Math.min(di,Ue.value.length);else{var fi=Ue.ownerDocument||document,Yt=fi&&fi.defaultView||window;if(Yt.getSelection){var ii=Yt.getSelection(),Gn=Ue.textContent.length,Un=Math.min(rt.start,Gn),qs=rt.end===void 0?Un:Math.min(rt.end,Gn);!ii.extend&&Un>qs&&(be=qs,qs=Un,Un=be);var Bt=Io(Ue,Un),gt=Io(Ue,qs);if(Bt&&gt&&(ii.rangeCount!==1||ii.anchorNode!==Bt.node||ii.anchorOffset!==Bt.offset||ii.focusNode!==gt.node||ii.focusOffset!==gt.offset)){var Ht=fi.createRange();Ht.setStart(Bt.node,Bt.offset),ii.removeAllRanges(),Un>qs?(ii.addRange(Ht),ii.extend(gt.node,gt.offset)):(Ht.setEnd(gt.node,gt.offset),ii.addRange(Ht))}}}}for(fi=[],ii=Ue;ii=ii.parentNode;)ii.nodeType===1&&fi.push({element:ii,left:ii.scrollLeft,top:ii.scrollTop});for(typeof Ue.focus=="function"&&Ue.focus(),Ue=0;Ue<fi.length;Ue++){var Ai=fi[Ue];Ai.element.scrollLeft=Ai.left,Ai.element.scrollTop=Ai.top}}Ux=!!w0,x0=w0=null}finally{ss=q,_e.p=k,ce.T=T}}m.current=y,Rs=2}}function Nn(){if(Rs===2){Rs=0;var m=ba,y=wh,T=(y.flags&8772)!==0;if((y.subtreeFlags&8772)!==0||T){T=ce.T,ce.T=null;var k=_e.p;_e.p=2;var q=ss;ss|=4;try{pd(m,y.alternate,y)}finally{ss=q,_e.p=k,ce.T=T}}Rs=3}}function ur(){if(Rs===4||Rs===3){Rs=0,bt();var m=ba,y=wh,T=Pu,k=tg;(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?Rs=5:(Rs=0,wh=ba=null,_o(m,m.pendingLanes));var q=m.pendingLanes;if(q===0&&(Lu=null),Xn(T),y=y.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(ft,y,void 0,(y.current.flags&128)===128)}catch{}if(k!==null){y=ce.T,q=_e.p,_e.p=2,ce.T=null;try{for(var Y=m.onRecoverableError,be=0;be<k.length;be++){var Ue=k[be];Y(Ue.value,{componentStack:Ue.stack})}}finally{ce.T=y,_e.p=q}}(Pu&3)!==0&&Ur(),Kp(m),q=m.pendingLanes,(T&4194090)!==0&&(q&42)!==0?m===E?md++:(md=0,E=m):md=0,Rb(0)}}function _o(m,y){(m.pooledCacheLanes&=y)===0&&(y=m.pooledCache,y!=null&&(m.pooledCache=null,Bp(y)))}function Ur(m){return _s(),Nn(),ur(),xh()}function xh(){if(Rs!==5)return!1;var m=ba,y=U_;U_=0;var T=Xn(Pu),k=ce.T,q=_e.p;try{_e.p=32>T?32:T,ce.T=null,T=dm,dm=null;var Y=ba,be=Pu;if(Rs=0,wh=ba=null,Pu=0,(ss&6)!==0)throw Error(r(331));var Ue=ss;if(ss|=4,qp(Y.current),go(Y,Y.current,be,T),ss=Ue,Rb(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(ft,Y)}catch{}return!0}finally{_e.p=q,ce.T=k,_o(m,y)}}function ZA(m,y,T){y=Po(T,y),y=Yl(m.stateNode,y,2),m=dh(m,y,2),m!==null&&(Xt(m,2),Kp(m))}function kr(m,y,T){if(m.tag===3)ZA(m,m,T);else for(;y!==null;){if(y.tag===3){ZA(y,m,T);break}else if(y.tag===1){var k=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Lu===null||!Lu.has(k))){m=Po(T,m),T=Mu(2),k=dh(y,T,2),k!==null&&(Op(T,k,y,m),Xt(k,2),Kp(k));break}}y=y.return}}function Tb(m,y,T){var k=m.pingCache;if(k===null){k=m.pingCache=new JA;var q=new Set;k.set(y,q)}else q=k.get(y),q===void 0&&(q=new Set,k.set(y,q));q.has(T)||(Wp=!0,q.add(T),m=m0.bind(null,m,y,T),y.then(m,m))}function m0(m,y,T){var k=m.pingCache;k!==null&&k.delete(y),m.pingedLanes|=m.suspendedLanes&T,m.warmLanes&=~T,En===m&&(Wi&T)===T&&(gs===4||gs===3&&(Wi&62914560)===Wi&&300>Wt()-F_?(ss&2)===0&&vi(m,0):yh|=T,sl===Wi&&(sl=0)),Kp(m)}function Mb(m,y){y===0&&(y=Ti()),m=ch(m,y),m!==null&&(Xt(m,y),Kp(m))}function _M(m){var y=m.memoizedState,T=0;y!==null&&(T=y.retryLane),Mb(m,T)}function GL(m,y){var T=0;switch(m.tag){case 13:var k=m.stateNode,q=m.memoizedState;q!==null&&(T=q.retryLane);break;case 19:k=m.stateNode;break;case 22:k=m.stateNode._retryCache;break;default:throw Error(r(314))}k!==null&&k.delete(y),Mb(m,T)}function VL(m,y){return Dt(m,y)}var Am=null,_0=null,$S=!1,v0=!1,WS=!1,ig=0;function Kp(m){m!==_0&&m.next===null&&(_0===null?Am=_0=m:_0=_0.next=m),v0=!0,$S||($S=!0,jS())}function Rb(m,y){if(!WS&&v0){WS=!0;do for(var T=!1,k=Am;k!==null;){if(m!==0){var q=k.pendingLanes;if(q===0)var Y=0;else{var be=k.suspendedLanes,Ue=k.pingedLanes;Y=(1<<31-si(42|m)+1)-1,Y&=q&~(be&~Ue),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(T=!0,bM(k,Y))}else Y=Wi,Y=ln(k,k===En?Y:0,k.cancelPendingCommit!==null||k.timeoutHandle!==-1),(Y&3)===0||Ji(k,Y)||(T=!0,bM(k,Y));k=k.next}while(T);WS=!1}}function qL(){Zr()}function Zr(){v0=$S=!1;var m=0;ig!==0&&($L()&&(m=ig),ig=0);for(var y=Wt(),T=null,k=Am;k!==null;){var q=k.next,Y=vM(k,y);Y===0?(k.next=null,T===null?Am=q:T.next=q,q===null&&(_0=T)):(T=k,(m!==0||(Y&3)!==0)&&(v0=!0)),k=q}Rb(m)}function vM(m,y){for(var T=m.suspendedLanes,k=m.pingedLanes,q=m.expirationTimes,Y=m.pendingLanes&-62914561;0<Y;){var be=31-si(Y),Ue=1<<be,rt=q[be];rt===-1?((Ue&T)===0||(Ue&k)!==0)&&(q[be]=Vi(Ue,y)):rt<=y&&(m.expiredLanes|=Ue),Y&=~Ue}if(y=En,T=Wi,T=ln(m,m===y?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),k=m.callbackNode,T===0||m===y&&(rn===2||rn===9)||m.cancelPendingCommit!==null)return k!==null&&k!==null&&Be(k),m.callbackNode=null,m.callbackPriority=0;if((T&3)===0||Ji(m,T)){if(y=T&-T,y===m.callbackPriority)return y;switch(k!==null&&Be(k),Xn(T)){case 2:case 8:T=At;break;case 32:T=Se;break;case 268435456:T=$e;break;default:T=Se}return k=yM.bind(null,m),T=Dt(T,k),m.callbackPriority=y,m.callbackNode=T,y}return k!==null&&k!==null&&Be(k),m.callbackPriority=2,m.callbackNode=null,2}function yM(m,y){if(Rs!==0&&Rs!==5)return m.callbackNode=null,m.callbackPriority=0,null;var T=m.callbackNode;if(Ur()&&m.callbackNode!==T)return null;var k=Wi;return k=ln(m,m===En?k:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),k===0?null:(ne(m,k,y),vM(m,Wt()),m.callbackNode!=null&&m.callbackNode===T?yM.bind(null,m):null)}function bM(m,y){if(Ur())return null;ne(m,y,!0)}function jS(){qr(function(){(ss&6)!==0?Dt(pt,qL):Zr()})}function wx(){return ig===0&&(ig=at()),ig}function xx(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:th(""+m)}function KS(m,y){var T=y.ownerDocument.createElement("input");return T.name=y.name,T.value=y.value,m.id&&T.setAttribute("form",m.id),y.parentNode.insertBefore(T,y),m=new FormData(m),T.parentNode.removeChild(T),m}function XS(m,y,T,k,q){if(y==="submit"&&T&&T.stateNode===q){var Y=xx((q[$n]||null).action),be=k.submitter;be&&(y=(y=be[$n]||null)?xx(y.formAction):be.getAttribute("formAction"),y!==null&&(Y=y,be=null));var Ue=new Yh("action","action",null,k,q);m.push({event:Ue,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(ig!==0){var rt=be?KS(q,be):new FormData(q);u0(T,{pending:!0,data:rt,method:q.method,action:Y},null,rt)}}else typeof Y=="function"&&(Ue.preventDefault(),rt=be?KS(q,be):new FormData(q),u0(T,{pending:!0,data:rt,method:q.method,action:Y},Y,rt))},currentTarget:q}]})}}for(var y0=0;y0<wp.length;y0++){var Cx=wp[y0],Ex=Cx.toLowerCase(),YS=Cx[0].toUpperCase()+Cx.slice(1);mc(Ex,"on"+YS)}mc(Kc,"onAnimationEnd"),mc(ah,"onAnimationIteration"),mc(lh,"onAnimationStart"),mc("dblclick","onDoubleClick"),mc("focusin","onFocus"),mc("focusout","onBlur"),mc(n_,"onTransitionRun"),mc(r_,"onTransitionStart"),mc(QA,"onTransitionCancel"),mc(s_,"onTransitionEnd"),Le("onMouseEnter",["mouseout","mouseover"]),Le("onMouseLeave",["mouseout","mouseover"]),Le("onPointerEnter",["pointerout","pointerover"]),Le("onPointerLeave",["pointerout","pointerover"]),uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),uo("onBeforeInput",["compositionend","keypress","textInput","paste"]),uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var k_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(k_));function JS(m,y){y=(y&4)!==0;for(var T=0;T<m.length;T++){var k=m[T],q=k.event;k=k.listeners;e:{var Y=void 0;if(y)for(var be=k.length-1;0<=be;be--){var Ue=k[be],rt=Ue.instance,Ft=Ue.currentTarget;if(Ue=Ue.listener,rt!==Y&&q.isPropagationStopped())break e;Y=Ue,q.currentTarget=Ft;try{Y(q)}catch(di){Xl(di)}q.currentTarget=null,Y=rt}else for(be=0;be<k.length;be++){if(Ue=k[be],rt=Ue.instance,Ft=Ue.currentTarget,Ue=Ue.listener,rt!==Y&&q.isPropagationStopped())break e;Y=Ue,q.currentTarget=Ft;try{Y(q)}catch(di){Xl(di)}q.currentTarget=null,Y=rt}}}}function Lr(m,y){var T=y[Ka];T===void 0&&(T=y[Ka]=new Set);var k=m+"__bubble";T.has(k)||(xM(y,m,2,!1),T.add(k))}function Db(m,y,T){var k=0;y&&(k|=4),xM(T,m,k,y)}var Fb="_reactListening"+Math.random().toString(36).slice(2);function ZS(m){if(!m[Fb]){m[Fb]=!0,gl.forEach(function(T){T!=="selectionchange"&&(wM.has(T)||Db(T,!1,m),Db(T,!0,m))});var y=m.nodeType===9?m:m.ownerDocument;y===null||y[Fb]||(y[Fb]=!0,Db("selectionchange",!1,y))}}function xM(m,y,T,k){switch(Lx(y)){case 2:var q=Hb;break;case 8:q=Ou;break;default:q=kx}T=q.bind(null,y,T,m),q=void 0,!$d||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(q=!0),k?q!==void 0?m.addEventListener(y,T,{capture:!0,passive:q}):m.addEventListener(y,T,!0):q!==void 0?m.addEventListener(y,T,{passive:q}):m.addEventListener(y,T,!1)}function eB(m,y,T,k,q){var Y=k;if((y&1)===0&&(y&2)===0&&k!==null)e:for(;;){if(k===null)return;var be=k.tag;if(be===3||be===4){var Ue=k.stateNode.containerInfo;if(Ue===q)break;if(be===4)for(be=k.return;be!==null;){var rt=be.tag;if((rt===3||rt===4)&&be.stateNode.containerInfo===q)return;be=be.return}for(;Ue!==null;){if(be=Hc(Ue),be===null)return;if(rt=be.tag,rt===5||rt===6||rt===26||rt===27){k=Y=be;continue e}Ue=Ue.parentNode}}k=k.return}Uf(function(){var Ft=Y,di=ih(T),fi=[];e:{var Yt=o_.get(m);if(Yt!==void 0){var ii=Yh,Gn=m;switch(m){case"keypress":if(Xh(T)===0)break e;case"keydown":case"keyup":ii=Kw;break;case"focusin":Gn="focus",ii=fc;break;case"focusout":Gn="blur",ii=fc;break;case"beforeblur":case"afterblur":ii=fc;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ii=ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ii=Bo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ii=ob;break;case Kc:case ah:case lh:ii=bs;break;case s_:ii=Zm;break;case"scroll":case"scrollend":ii=la;break;case"wheel":ii=ka;break;case"copy":case"cut":case"paste":ii=Hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ii=Wd;break;case"toggle":case"beforetoggle":ii=yl}var Un=(y&4)!==0,qs=!Un&&(m==="scroll"||m==="scrollend"),Bt=Un?Yt!==null?Yt+"Capture":null:Yt;Un=[];for(var gt=Ft,Ht;gt!==null;){var Ai=gt;if(Ht=Ai.stateNode,Ai=Ai.tag,Ai!==5&&Ai!==26&&Ai!==27||Ht===null||Bt===null||(Ai=Kh(gt,Bt),Ai!=null&&Un.push(Ub(gt,Ai,Ht))),qs)break;gt=gt.return}0<Un.length&&(Yt=new ii(Yt,Gn,null,T,di),fi.push({event:Yt,listeners:Un}))}}if((y&7)===0){e:{if(Yt=m==="mouseover"||m==="pointerover",ii=m==="mouseout"||m==="pointerout",Yt&&T!==LA&&(Gn=T.relatedTarget||T.fromElement)&&(Hc(Gn)||Gn[co]))break e;if((ii||Yt)&&(Yt=di.window===di?di:(Yt=di.ownerDocument)?Yt.defaultView||Yt.parentWindow:window,ii?(Gn=T.relatedTarget||T.toElement,ii=Ft,Gn=Gn?Hc(Gn):null,Gn!==null&&(qs=l(Gn),Un=Gn.tag,Gn!==qs||Un!==5&&Un!==27&&Un!==6)&&(Gn=null)):(ii=null,Gn=Ft),ii!==Gn)){if(Un=ca,Ai="onMouseLeave",Bt="onMouseEnter",gt="mouse",(m==="pointerout"||m==="pointerover")&&(Un=Wd,Ai="onPointerLeave",Bt="onPointerEnter",gt="pointer"),qs=ii==null?Yt:ys(ii),Ht=Gn==null?Yt:ys(Gn),Yt=new Un(Ai,gt+"leave",ii,T,di),Yt.target=qs,Yt.relatedTarget=Ht,Ai=null,Hc(di)===Ft&&(Un=new Un(Bt,gt+"enter",Gn,T,di),Un.target=Ht,Un.relatedTarget=qs,Ai=Un),qs=Ai,ii&&Gn)t:{for(Un=ii,Bt=Gn,gt=0,Ht=Un;Ht;Ht=b0(Ht))gt++;for(Ht=0,Ai=Bt;Ai;Ai=b0(Ai))Ht++;for(;0<gt-Ht;)Un=b0(Un),gt--;for(;0<Ht-gt;)Bt=b0(Bt),Ht--;for(;gt--;){if(Un===Bt||Bt!==null&&Un===Bt.alternate)break t;Un=b0(Un),Bt=b0(Bt)}Un=null}else Un=null;ii!==null&&tB(fi,Yt,ii,Un,!1),Gn!==null&&qs!==null&&tB(fi,qs,Gn,Un,!0)}}e:{if(Yt=Ft?ys(Ft):window,ii=Yt.nodeName&&Yt.nodeName.toLowerCase(),ii==="select"||ii==="input"&&Yt.type==="file")var sn=Pf;else if(Vg(Yt))if(wu)sn=t_;else{sn=Yw;var yr=Xw}else ii=Yt.nodeName,!ii||ii.toLowerCase()!=="input"||Yt.type!=="checkbox"&&Yt.type!=="radio"?Ft&&Wh(Ft.elementType)&&(sn=Pf):sn=e_;if(sn&&(sn=sn(m,Ft))){Kd(fi,sn,T,di);break e}yr&&yr(m,Yt,Ft),m==="focusout"&&Ft&&Yt.type==="number"&&Ft.memoizedProps.value!=null&&Ss(Yt,"number",Yt.value)}switch(yr=Ft?ys(Ft):window,m){case"focusin":(Vg(yr)||yr.contentEditable==="true")&&(OA=yr,Vl=Ft,da=null);break;case"focusout":da=Vl=OA=null;break;case"mousedown":La=!0;break;case"contextmenu":case"mouseup":case"dragend":La=!1,bl(fi,T,di);break;case"selectionchange":if(Ke)break;case"keydown":case"keyup":bl(fi,T,di)}var bn;if(td)e:{switch(m){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else jd?Wc(m,T)&&(kn="onCompositionEnd"):m==="keydown"&&T.keyCode===229&&(kn="onCompositionStart");kn&&(ua&&T.locale!=="ko"&&(jd||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&jd&&(bn=_p()):(ml=di,nh="value"in ml?ml.value:ml.textContent,jd=!0)),yr=Sx(Ft,kn),0<yr.length&&(kn=new Is(kn,m,null,T,di),fi.push({event:kn,listeners:yr}),bn?kn.data=bn:(bn=ds(T),bn!==null&&(kn.data=bn)))),(bn=$c?Cn(m,T):On(m,T))&&(kn=Sx(Ft,"onBeforeInput"),0<kn.length&&(yr=new Is("onBeforeInput","beforeinput",null,T,di),fi.push({event:yr,listeners:kn}),yr.data=bn)),XS(fi,m,Ft,T,di)}JS(fi,y)})}function Ub(m,y,T){return{instance:m,listener:y,currentTarget:T}}function Sx(m,y){for(var T=y+"Capture",k=[];m!==null;){var q=m,Y=q.stateNode;if(q=q.tag,q!==5&&q!==26&&q!==27||Y===null||(q=Kh(m,T),q!=null&&k.unshift(Ub(m,q,Y)),q=Kh(m,y),q!=null&&k.push(Ub(m,q,Y))),m.tag===3)return k;m=m.return}return[]}function b0(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function tB(m,y,T,k,q){for(var Y=y._reactName,be=[];T!==null&&T!==k;){var Ue=T,rt=Ue.alternate,Ft=Ue.stateNode;if(Ue=Ue.tag,rt!==null&&rt===k)break;Ue!==5&&Ue!==26&&Ue!==27||Ft===null||(rt=Ft,q?(Ft=Kh(T,Y),Ft!=null&&be.unshift(Ub(T,Ft,rt))):q||(Ft=Kh(T,Y),Ft!=null&&be.push(Ub(T,Ft,rt)))),T=T.return}be.length!==0&&m.push({event:y,listeners:be})}var CM=/\r\n?/g,EM=/\u0000|\uFFFD/g;function SM(m){return(typeof m=="string"?m:""+m).replace(CM,`
`).replace(EM,"")}function iB(m,y){return y=SM(y),SM(m)===y}function _d(){}function Os(m,y,T,k,q,Y){switch(T){case"children":typeof k=="string"?y==="body"||y==="textarea"&&k===""||Ya(m,k):(typeof k=="number"||typeof k=="bigint")&&y!=="body"&&Ya(m,""+k);break;case"className":Ui(m,"class",k);break;case"tabIndex":Ui(m,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(m,T,k);break;case"style":_u(m,k,Y);break;case"data":if(y!=="object"){Ui(m,"data",k);break}case"src":case"href":if(k===""&&(y!=="a"||T!=="href")){m.removeAttribute(T);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){m.removeAttribute(T);break}k=th(""+k),m.setAttribute(T,k);break;case"action":case"formAction":if(typeof k=="function"){m.setAttribute(T,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(T==="formAction"?(y!=="input"&&Os(m,y,"name",q.name,q,null),Os(m,y,"formEncType",q.formEncType,q,null),Os(m,y,"formMethod",q.formMethod,q,null),Os(m,y,"formTarget",q.formTarget,q,null)):(Os(m,y,"encType",q.encType,q,null),Os(m,y,"method",q.method,q,null),Os(m,y,"target",q.target,q,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){m.removeAttribute(T);break}k=th(""+k),m.setAttribute(T,k);break;case"onClick":k!=null&&(m.onclick=_d);break;case"onScroll":k!=null&&Lr("scroll",m);break;case"onScrollEnd":k!=null&&Lr("scrollend",m);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(T=k.__html,T!=null){if(q.children!=null)throw Error(r(60));m.innerHTML=T}}break;case"multiple":m.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":m.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){m.removeAttribute("xlink:href");break}T=th(""+k),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?m.setAttribute(T,""+k):m.removeAttribute(T);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?m.setAttribute(T,""):m.removeAttribute(T);break;case"capture":case"download":k===!0?m.setAttribute(T,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?m.setAttribute(T,k):m.removeAttribute(T);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?m.setAttribute(T,k):m.removeAttribute(T);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?m.removeAttribute(T):m.setAttribute(T,k);break;case"popover":Lr("beforetoggle",m),Lr("toggle",m),pi(m,"popover",k);break;case"xlinkActuate":ki(m,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":ki(m,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":ki(m,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":ki(m,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":ki(m,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":ki(m,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":ki(m,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":ki(m,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":ki(m,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":pi(m,"is",k);break;case"innerText":case"textContent":break;default:(!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=jh.get(T)||T,pi(m,T,k))}}function ng(m,y,T,k,q,Y){switch(T){case"style":_u(m,k,Y);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(T=k.__html,T!=null){if(q.children!=null)throw Error(r(60));m.innerHTML=T}}break;case"children":typeof k=="string"?Ya(m,k):(typeof k=="number"||typeof k=="bigint")&&Ya(m,""+k);break;case"onScroll":k!=null&&Lr("scroll",m);break;case"onScrollEnd":k!=null&&Lr("scrollend",m);break;case"onClick":k!=null&&(m.onclick=_d);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(T))e:{if(T[0]==="o"&&T[1]==="n"&&(q=T.endsWith("Capture"),y=T.slice(2,q?T.length-7:void 0),Y=m[$n]||null,Y=Y!=null?Y[T]:null,typeof Y=="function"&&m.removeEventListener(y,Y,q),typeof k=="function")){typeof Y!="function"&&Y!==null&&(T in m?m[T]=null:m.hasAttribute(T)&&m.removeAttribute(T)),m.addEventListener(y,k,q);break e}T in m?m[T]=k:k===!0?m.setAttribute(T,""):pi(m,T,k)}}}function Ha(m,y,T){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lr("error",m),Lr("load",m);var k=!1,q=!1,Y;for(Y in T)if(T.hasOwnProperty(Y)){var be=T[Y];if(be!=null)switch(Y){case"src":k=!0;break;case"srcSet":q=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:Os(m,y,Y,be,T,null)}}q&&Os(m,y,"srcSet",T.srcSet,T,null),k&&Os(m,y,"src",T.src,T,null);return;case"input":Lr("invalid",m);var Ue=Y=be=q=null,rt=null,Ft=null;for(k in T)if(T.hasOwnProperty(k)){var di=T[k];if(di!=null)switch(k){case"name":q=di;break;case"type":be=di;break;case"checked":rt=di;break;case"defaultChecked":Ft=di;break;case"value":Y=di;break;case"defaultValue":Ue=di;break;case"children":case"dangerouslySetInnerHTML":if(di!=null)throw Error(r(137,y));break;default:Os(m,y,k,di,T,null)}}Er(m,Y,Ue,rt,Ft,be,q,!1),jn(m);return;case"select":Lr("invalid",m),k=be=Y=null;for(q in T)if(T.hasOwnProperty(q)&&(Ue=T[q],Ue!=null))switch(q){case"value":Y=Ue;break;case"defaultValue":be=Ue;break;case"multiple":k=Ue;default:Os(m,y,q,Ue,T,null)}y=Y,T=be,m.multiple=!!k,y!=null?Qs(m,!!k,y,!1):T!=null&&Qs(m,!!k,T,!0);return;case"textarea":Lr("invalid",m),Y=q=k=null;for(be in T)if(T.hasOwnProperty(be)&&(Ue=T[be],Ue!=null))switch(be){case"value":k=Ue;break;case"defaultValue":q=Ue;break;case"children":Y=Ue;break;case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(91));break;default:Os(m,y,be,Ue,T,null)}So(m,k,q,Y),jn(m);return;case"option":for(rt in T)if(T.hasOwnProperty(rt)&&(k=T[rt],k!=null))switch(rt){case"selected":m.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Os(m,y,rt,k,T,null)}return;case"dialog":Lr("beforetoggle",m),Lr("toggle",m),Lr("cancel",m),Lr("close",m);break;case"iframe":case"object":Lr("load",m);break;case"video":case"audio":for(k=0;k<k_.length;k++)Lr(k_[k],m);break;case"image":Lr("error",m),Lr("load",m);break;case"details":Lr("toggle",m);break;case"embed":case"source":case"link":Lr("error",m),Lr("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ft in T)if(T.hasOwnProperty(Ft)&&(k=T[Ft],k!=null))switch(Ft){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:Os(m,y,Ft,k,T,null)}return;default:if(Wh(y)){for(di in T)T.hasOwnProperty(di)&&(k=T[di],k!==void 0&&ng(m,y,di,k,T,void 0));return}}for(Ue in T)T.hasOwnProperty(Ue)&&(k=T[Ue],k!=null&&Os(m,y,Ue,k,T,null))}function Bx(m,y,T,k){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var q=null,Y=null,be=null,Ue=null,rt=null,Ft=null,di=null;for(ii in T){var fi=T[ii];if(T.hasOwnProperty(ii)&&fi!=null)switch(ii){case"checked":break;case"value":break;case"defaultValue":rt=fi;default:k.hasOwnProperty(ii)||Os(m,y,ii,null,k,fi)}}for(var Yt in k){var ii=k[Yt];if(fi=T[Yt],k.hasOwnProperty(Yt)&&(ii!=null||fi!=null))switch(Yt){case"type":Y=ii;break;case"name":q=ii;break;case"checked":Ft=ii;break;case"defaultChecked":di=ii;break;case"value":be=ii;break;case"defaultValue":Ue=ii;break;case"children":case"dangerouslySetInnerHTML":if(ii!=null)throw Error(r(137,y));break;default:ii!==fi&&Os(m,y,Yt,ii,k,fi)}}Xa(m,be,Ue,rt,Ft,di,Y,q);return;case"select":ii=be=Ue=Yt=null;for(Y in T)if(rt=T[Y],T.hasOwnProperty(Y)&&rt!=null)switch(Y){case"value":break;case"multiple":ii=rt;default:k.hasOwnProperty(Y)||Os(m,y,Y,null,k,rt)}for(q in k)if(Y=k[q],rt=T[q],k.hasOwnProperty(q)&&(Y!=null||rt!=null))switch(q){case"value":Yt=Y;break;case"defaultValue":Ue=Y;break;case"multiple":be=Y;default:Y!==rt&&Os(m,y,q,Y,k,rt)}y=Ue,T=be,k=ii,Yt!=null?Qs(m,!!T,Yt,!1):!!k!=!!T&&(y!=null?Qs(m,!!T,y,!0):Qs(m,!!T,T?[]:"",!1));return;case"textarea":ii=Yt=null;for(Ue in T)if(q=T[Ue],T.hasOwnProperty(Ue)&&q!=null&&!k.hasOwnProperty(Ue))switch(Ue){case"value":break;case"children":break;default:Os(m,y,Ue,null,k,q)}for(be in k)if(q=k[be],Y=T[be],k.hasOwnProperty(be)&&(q!=null||Y!=null))switch(be){case"value":Yt=q;break;case"defaultValue":ii=q;break;case"children":break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:q!==Y&&Os(m,y,be,q,k,Y)}ns(m,Yt,ii);return;case"option":for(var Gn in T)if(Yt=T[Gn],T.hasOwnProperty(Gn)&&Yt!=null&&!k.hasOwnProperty(Gn))switch(Gn){case"selected":m.selected=!1;break;default:Os(m,y,Gn,null,k,Yt)}for(rt in k)if(Yt=k[rt],ii=T[rt],k.hasOwnProperty(rt)&&Yt!==ii&&(Yt!=null||ii!=null))switch(rt){case"selected":m.selected=Yt&&typeof Yt!="function"&&typeof Yt!="symbol";break;default:Os(m,y,rt,Yt,k,ii)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Un in T)Yt=T[Un],T.hasOwnProperty(Un)&&Yt!=null&&!k.hasOwnProperty(Un)&&Os(m,y,Un,null,k,Yt);for(Ft in k)if(Yt=k[Ft],ii=T[Ft],k.hasOwnProperty(Ft)&&Yt!==ii&&(Yt!=null||ii!=null))switch(Ft){case"children":case"dangerouslySetInnerHTML":if(Yt!=null)throw Error(r(137,y));break;default:Os(m,y,Ft,Yt,k,ii)}return;default:if(Wh(y)){for(var qs in T)Yt=T[qs],T.hasOwnProperty(qs)&&Yt!==void 0&&!k.hasOwnProperty(qs)&&ng(m,y,qs,void 0,k,Yt);for(di in k)Yt=k[di],ii=T[di],!k.hasOwnProperty(di)||Yt===ii||Yt===void 0&&ii===void 0||ng(m,y,di,Yt,k,ii);return}}for(var Bt in T)Yt=T[Bt],T.hasOwnProperty(Bt)&&Yt!=null&&!k.hasOwnProperty(Bt)&&Os(m,y,Bt,null,k,Yt);for(fi in k)Yt=k[fi],ii=T[fi],!k.hasOwnProperty(fi)||Yt===ii||Yt==null&&ii==null||Os(m,y,fi,Yt,k,ii)}var w0=null,x0=null;function Ix(m){return m.nodeType===9?m:m.ownerDocument}function BM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IM(m,y){if(m===0)switch(y){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&y==="foreignObject"?0:m}function nB(m,y){return m==="textarea"||m==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.children=="bigint"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var kb=null;function $L(){var m=window.event;return m&&m.type==="popstate"?m===kb?!1:(kb=m,!0):(kb=null,!1)}var rB=typeof setTimeout=="function"?setTimeout:void 0,WL=typeof clearTimeout=="function"?clearTimeout:void 0,TM=typeof Promise=="function"?Promise:void 0,qr=typeof queueMicrotask=="function"?queueMicrotask:typeof TM<"u"?function(m){return TM.resolve(null).then(m).catch(jL)}:rB;function jL(m){setTimeout(function(){throw m})}function pm(m){return m==="head"}function MM(m,y){var T=y,k=0,q=0;do{var Y=T.nextSibling;if(m.removeChild(T),Y&&Y.nodeType===8)if(T=Y.data,T==="/$"){if(0<k&&8>k){T=k;var be=m.ownerDocument;if(T&1&&Lb(be.documentElement),T&2&&Lb(be.body),T&4)for(T=be.head,Lb(T),be=T.firstChild;be;){var Ue=be.nextSibling,rt=be.nodeName;be[Nc]||rt==="SCRIPT"||rt==="STYLE"||rt==="LINK"&&be.rel.toLowerCase()==="stylesheet"||T.removeChild(be),be=Ue}}if(q===0){m.removeChild(Y),Vb(y);return}q--}else T==="$"||T==="$?"||T==="$!"?q++:k=T.charCodeAt(0)-48;else k=0;T=Y}while(T);Vb(y)}function sB(m){var y=m.firstChild;for(y&&y.nodeType===10&&(y=y.nextSibling);y;){var T=y;switch(y=y.nextSibling,T.nodeName){case"HTML":case"HEAD":case"BODY":sB(T),eh(T);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(T.rel.toLowerCase()==="stylesheet")continue}m.removeChild(T)}}function KL(m,y,T,k){for(;m.nodeType===1;){var q=T;if(m.nodeName.toLowerCase()!==y.toLowerCase()){if(!k&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(k){if(!m[Nc])switch(y){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(Y=m.getAttribute("rel"),Y==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(Y!==q.rel||m.getAttribute("href")!==(q.href==null||q.href===""?null:q.href)||m.getAttribute("crossorigin")!==(q.crossOrigin==null?null:q.crossOrigin)||m.getAttribute("title")!==(q.title==null?null:q.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(Y=m.getAttribute("src"),(Y!==(q.src==null?null:q.src)||m.getAttribute("type")!==(q.type==null?null:q.type)||m.getAttribute("crossorigin")!==(q.crossOrigin==null?null:q.crossOrigin))&&Y&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(y==="input"&&m.type==="hidden"){var Y=q.name==null?null:""+q.name;if(q.type==="hidden"&&m.getAttribute("name")===Y)return m}else return m;if(m=ep(m.nextSibling),m===null)break}return null}function XL(m,y,T){if(y==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!T||(m=ep(m.nextSibling),m===null))return null;return m}function oB(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState==="complete"}function YL(m,y){var T=m.ownerDocument;if(m.data!=="$?"||T.readyState==="complete")y();else{var k=function(){y(),T.removeEventListener("DOMContentLoaded",k)};T.addEventListener("DOMContentLoaded",k),m._reactRetry=k}}function ep(m){for(;m!=null;m=m.nextSibling){var y=m.nodeType;if(y===1||y===3)break;if(y===8){if(y=m.data,y==="$"||y==="$!"||y==="$?"||y==="F!"||y==="F")break;if(y==="/$")return null}}return m}var aB=null;function RM(m){m=m.previousSibling;for(var y=0;m;){if(m.nodeType===8){var T=m.data;if(T==="$"||T==="$!"||T==="$?"){if(y===0)return m;y--}else T==="/$"&&y++}m=m.previousSibling}return null}function DM(m,y,T){switch(y=Ix(T),m){case"html":if(m=y.documentElement,!m)throw Error(r(452));return m;case"head":if(m=y.head,!m)throw Error(r(453));return m;case"body":if(m=y.body,!m)throw Error(r(454));return m;default:throw Error(r(451))}}function Lb(m){for(var y=m.attributes;y.length;)m.removeAttributeNode(y[0]);eh(m)}var AA=new Map,FM=new Set;function Tx(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var rg=_e.d;_e.d={f:JL,r:UM,D:ZL,C:eP,L:LM,m:tP,X:pA,S:iP,M:E0};function JL(){var m=rg.f(),y=dt();return m||y}function UM(m){var y=Fs(m);y!==null&&y.tag===5&&y.type==="form"?xb(y):rg.r(m)}var C0=typeof document>"u"?null:document;function kM(m,y,T){var k=C0;if(k&&typeof y=="string"&&y){var q=fn(y);q='link[rel="'+m+'"][href="'+q+'"]',typeof T=="string"&&(q+='[crossorigin="'+T+'"]'),FM.has(q)||(FM.add(q),m={rel:m,crossOrigin:T,href:y},k.querySelector(q)===null&&(y=k.createElement("link"),Ha(y,"link",m),Hi(y),k.head.appendChild(y)))}}function ZL(m){rg.D(m),kM("dns-prefetch",m,null)}function eP(m,y){rg.C(m,y),kM("preconnect",m,y)}function LM(m,y,T){rg.L(m,y,T);var k=C0;if(k&&m&&y){var q='link[rel="preload"][as="'+fn(y)+'"]';y==="image"&&T&&T.imageSrcSet?(q+='[imagesrcset="'+fn(T.imageSrcSet)+'"]',typeof T.imageSizes=="string"&&(q+='[imagesizes="'+fn(T.imageSizes)+'"]')):q+='[href="'+fn(m)+'"]';var Y=q;switch(y){case"style":Y=L_(m);break;case"script":Y=S0(m)}AA.has(Y)||(m=b({rel:"preload",href:y==="image"&&T&&T.imageSrcSet?void 0:m,as:y},T),AA.set(Y,m),k.querySelector(q)!==null||y==="style"&&k.querySelector(P_(Y))||y==="script"&&k.querySelector(Pb(Y))||(y=k.createElement("link"),Ha(y,"link",m),Hi(y),k.head.appendChild(y)))}}function tP(m,y){rg.m(m,y);var T=C0;if(T&&m){var k=y&&typeof y.as=="string"?y.as:"script",q='link[rel="modulepreload"][as="'+fn(k)+'"][href="'+fn(m)+'"]',Y=q;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=S0(m)}if(!AA.has(Y)&&(m=b({rel:"modulepreload",href:m},y),AA.set(Y,m),T.querySelector(q)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(T.querySelector(Pb(Y)))return}k=T.createElement("link"),Ha(k,"link",m),Hi(k),T.head.appendChild(k)}}}function iP(m,y,T){rg.S(m,y,T);var k=C0;if(k&&m){var q=Nl(k).hoistableStyles,Y=L_(m);y=y||"default";var be=q.get(Y);if(!be){var Ue={loading:0,preload:null};if(be=k.querySelector(P_(Y)))Ue.loading=5;else{m=b({rel:"stylesheet",href:m,"data-precedence":y},T),(T=AA.get(Y))&&cB(m,T);var rt=be=k.createElement("link");Hi(rt),Ha(rt,"link",m),rt._p=new Promise(function(Ft,di){rt.onload=Ft,rt.onerror=di}),rt.addEventListener("load",function(){Ue.loading|=1}),rt.addEventListener("error",function(){Ue.loading|=2}),Ue.loading|=4,fA(be,y,k)}be={type:"stylesheet",instance:be,count:1,state:Ue},q.set(Y,be)}}}function pA(m,y){rg.X(m,y);var T=C0;if(T&&m){var k=Nl(T).hoistableScripts,q=S0(m),Y=k.get(q);Y||(Y=T.querySelector(Pb(q)),Y||(m=b({src:m,async:!0},y),(y=AA.get(q))&&uB(m,y),Y=T.createElement("script"),Hi(Y),Ha(Y,"link",m),T.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},k.set(q,Y))}}function E0(m,y){rg.M(m,y);var T=C0;if(T&&m){var k=Nl(T).hoistableScripts,q=S0(m),Y=k.get(q);Y||(Y=T.querySelector(Pb(q)),Y||(m=b({src:m,async:!0,type:"module"},y),(y=AA.get(q))&&uB(m,y),Y=T.createElement("script"),Hi(Y),Ha(Y,"link",m),T.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},k.set(q,Y))}}function lB(m,y,T,k){var q=(q=ht.current)?Tx(q):null;if(!q)throw Error(r(446));switch(m){case"meta":case"title":return null;case"style":return typeof T.precedence=="string"&&typeof T.href=="string"?(y=L_(T.href),T=Nl(q).hoistableStyles,k=T.get(y),k||(k={type:"style",instance:null,count:0,state:null},T.set(y,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(T.rel==="stylesheet"&&typeof T.href=="string"&&typeof T.precedence=="string"){m=L_(T.href);var Y=Nl(q).hoistableStyles,be=Y.get(m);if(be||(q=q.ownerDocument||q,be={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(m,be),(Y=q.querySelector(P_(m)))&&!Y._p&&(be.instance=Y,be.state.loading=5),AA.has(m)||(T={rel:"preload",as:"style",href:T.href,crossOrigin:T.crossOrigin,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy},AA.set(m,T),Y||fm(q,m,T,be.state))),y&&k===null)throw Error(r(528,""));return be}if(y&&k!==null)throw Error(r(529,""));return null;case"script":return y=T.async,T=T.src,typeof T=="string"&&y&&typeof y!="function"&&typeof y!="symbol"?(y=S0(T),T=Nl(q).hoistableScripts,k=T.get(y),k||(k={type:"script",instance:null,count:0,state:null},T.set(y,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,m))}}function L_(m){return'href="'+fn(m)+'"'}function P_(m){return'link[rel="stylesheet"]['+m+"]"}function Mx(m){return b({},m,{"data-precedence":m.precedence,precedence:null})}function fm(m,y,T,k){m.querySelector('link[rel="preload"][as="style"]['+y+"]")?k.loading=1:(y=m.createElement("link"),k.preload=y,y.addEventListener("load",function(){return k.loading|=1}),y.addEventListener("error",function(){return k.loading|=2}),Ha(y,"link",T),Hi(y),m.head.appendChild(y))}function S0(m){return'[src="'+fn(m)+'"]'}function Pb(m){return"script[async]"+m}function gm(m,y,T){if(y.count++,y.instance===null)switch(y.type){case"style":var k=m.querySelector('style[data-href~="'+fn(T.href)+'"]');if(k)return y.instance=k,Hi(k),k;var q=b({},T,{"data-href":T.href,"data-precedence":T.precedence,href:null,precedence:null});return k=(m.ownerDocument||m).createElement("style"),Hi(k),Ha(k,"style",q),fA(k,T.precedence,m),y.instance=k;case"stylesheet":q=L_(T.href);var Y=m.querySelector(P_(q));if(Y)return y.state.loading|=4,y.instance=Y,Hi(Y),Y;k=Mx(T),(q=AA.get(q))&&cB(k,q),Y=(m.ownerDocument||m).createElement("link"),Hi(Y);var be=Y;return be._p=new Promise(function(Ue,rt){be.onload=Ue,be.onerror=rt}),Ha(Y,"link",k),y.state.loading|=4,fA(Y,T.precedence,m),y.instance=Y;case"script":return Y=S0(T.src),(q=m.querySelector(Pb(Y)))?(y.instance=q,Hi(q),q):(k=T,(q=AA.get(Y))&&(k=b({},T),uB(k,q)),m=m.ownerDocument||m,q=m.createElement("script"),Hi(q),Ha(q,"link",k),m.head.appendChild(q),y.instance=q);case"void":return null;default:throw Error(r(443,y.type))}else y.type==="stylesheet"&&(y.state.loading&4)===0&&(k=y.instance,y.state.loading|=4,fA(k,T.precedence,m));return y.instance}function fA(m,y,T){for(var k=T.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),q=k.length?k[k.length-1]:null,Y=q,be=0;be<k.length;be++){var Ue=k[be];if(Ue.dataset.precedence===y)Y=Ue;else if(Y!==q)break}Y?Y.parentNode.insertBefore(m,Y.nextSibling):(y=T.nodeType===9?T.head:T,y.insertBefore(m,y.firstChild))}function cB(m,y){m.crossOrigin==null&&(m.crossOrigin=y.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=y.referrerPolicy),m.title==null&&(m.title=y.title)}function uB(m,y){m.crossOrigin==null&&(m.crossOrigin=y.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=y.referrerPolicy),m.integrity==null&&(m.integrity=y.integrity)}var B0=null;function Rx(m,y,T){if(B0===null){var k=new Map,q=B0=new Map;q.set(T,k)}else q=B0,k=q.get(T),k||(k=new Map,q.set(T,k));if(k.has(m))return k;for(k.set(m,null),T=T.getElementsByTagName(m),q=0;q<T.length;q++){var Y=T[q];if(!(Y[Nc]||Y[Xr]||m==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var be=Y.getAttribute(y)||"";be=m+be;var Ue=k.get(be);Ue?Ue.push(Y):k.set(be,[Y])}}return k}function PM(m,y,T){m=m.ownerDocument||m,m.head.insertBefore(T,y==="title"?m.querySelector("head > title"):null)}function nP(m,y,T){if(T===1||y.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof y.precedence!="string"||typeof y.href!="string"||y.href==="")break;return!0;case"link":if(typeof y.rel!="string"||typeof y.href!="string"||y.href===""||y.onLoad||y.onError)break;switch(y.rel){case"stylesheet":return m=y.disabled,typeof y.precedence=="string"&&m==null;default:return!0}case"script":if(y.async&&typeof y.async!="function"&&typeof y.async!="symbol"&&!y.onLoad&&!y.onError&&y.src&&typeof y.src=="string")return!0}return!1}function hB(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}var Ob=null;function OM(){}function QM(m,y,T){if(Ob===null)throw Error(r(475));var k=Ob;if(y.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var q=L_(T.href),Y=m.querySelector(P_(q));if(Y){m=Y._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(k.count++,k=Qb.bind(k),m.then(k,k)),y.state.loading|=4,y.instance=Y,Hi(Y);return}Y=m.ownerDocument||m,T=Mx(T),(q=AA.get(q))&&cB(T,q),Y=Y.createElement("link"),Hi(Y);var be=Y;be._p=new Promise(function(Ue,rt){be.onload=Ue,be.onerror=rt}),Ha(Y,"link",T),y.instance=Y}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(y,m),(m=y.state.preload)&&(y.state.loading&3)===0&&(k.count++,y=Qb.bind(k),m.addEventListener("load",y),m.addEventListener("error",y))}}function NM(){if(Ob===null)throw Error(r(475));var m=Ob;return m.stylesheets&&m.count===0&&Dx(m,m.stylesheets),0<m.count?function(y){var T=setTimeout(function(){if(m.stylesheets&&Dx(m,m.stylesheets),m.unsuspend){var k=m.unsuspend;m.unsuspend=null,k()}},6e4);return m.unsuspend=y,function(){m.unsuspend=null,clearTimeout(T)}}:null}function Qb(){if(this.count--,this.count===0){if(this.stylesheets)Dx(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var Nb=null;function Dx(m,y){m.stylesheets=null,m.unsuspend!==null&&(m.count++,Nb=new Map,y.forEach(HM,m),Nb=null,Qb.call(m))}function HM(m,y){if(!(y.state.loading&4)){var T=Nb.get(m);if(T)var k=T.get(null);else{T=new Map,Nb.set(m,T);for(var q=m.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<q.length;Y++){var be=q[Y];(be.nodeName==="LINK"||be.getAttribute("media")!=="not all")&&(T.set(be.dataset.precedence,be),k=be)}k&&T.set(null,k)}q=y.instance,be=q.getAttribute("data-precedence"),Y=T.get(be)||k,Y===k&&T.set(null,q),T.set(be,q),this.count++,k=Qb.bind(this),q.addEventListener("load",k),q.addEventListener("error",k),Y?Y.parentNode.insertBefore(q,Y.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(q,m.firstChild)),y.state.loading|=4}}var I0={$$typeof:N,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function zM(m,y,T,k,q,Y,be,Ue){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.hiddenUpdates=Pt(null),this.identifierPrefix=k,this.onUncaughtError=q,this.onCaughtError=Y,this.onRecoverableError=be,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ue,this.incompleteTransitions=new Map}function dB(m,y,T,k,q,Y,be,Ue,rt,Ft,di,fi){return m=new zM(m,y,T,be,Ue,rt,Ft,fi),y=1,Y===!0&&(y|=24),Y=yc(3,null,null,y),m.current=Y,Y.stateNode=m,y=Ls(),y.refCount++,m.pooledCache=y,y.refCount++,Y.memoizedState={element:k,isDehydrated:T,cache:y},ad(Y),m}function AB(m){return m?(m=ho,m):ho}function pB(m,y,T,k,q,Y){q=AB(q),k.context===null?k.context=q:k.pendingContext=q,k=To(y),k.payload={element:T},Y=Y===void 0?null:Y,Y!==null&&(k.callback=Y),T=dh(m,k,y),T!==null&&(K(T,m,y),tm(T,m,y))}function fB(m,y){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var T=m.retryLane;m.retryLane=T!==0&&T<y?T:y}}function Fx(m,y){fB(m,y),(m=m.alternate)&&fB(m,y)}function gB(m){if(m.tag===13){var y=ch(m,67108864);y!==null&&K(y,m,67108864),Fx(m,67108864)}}var Ux=!0;function Hb(m,y,T,k){var q=ce.T;ce.T=null;var Y=_e.p;try{_e.p=2,kx(m,y,T,k)}finally{_e.p=Y,ce.T=q}}function Ou(m,y,T,k){var q=ce.T;ce.T=null;var Y=_e.p;try{_e.p=8,kx(m,y,T,k)}finally{_e.p=Y,ce.T=q}}function kx(m,y,T,k){if(Ux){var q=zb(k);if(q===null)eB(m,y,k,gA,T),Px(m,k);else if(GM(q,m,y,T,k))k.stopPropagation();else if(Px(m,k),y&4&&-1<_B.indexOf(m)){for(;q!==null;){var Y=Fs(q);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var be=Bi(Y.pendingLanes);if(be!==0){var Ue=Y;for(Ue.pendingLanes|=2,Ue.entangledLanes|=2;be;){var rt=1<<31-si(be);Ue.entanglements[1]|=rt,be&=~rt}Kp(Y),(ss&6)===0&&(jp=Wt()+500,Rb(0))}}break;case 13:Ue=ch(Y,2),Ue!==null&&K(Ue,Y,2),dt(),Fx(Y,2)}if(Y=zb(k),Y===null&&eB(m,y,k,gA,T),Y===q)break;q=Y}q!==null&&k.stopPropagation()}else eB(m,y,k,null,T)}}function zb(m){return m=ih(m),Gb(m)}var gA=null;function Gb(m){if(gA=null,m=Hc(m),m!==null){var y=l(m);if(y===null)m=null;else{var T=y.tag;if(T===13){if(m=u(y),m!==null)return m;m=null}else if(T===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;m=null}else y!==m&&(m=null)}}return gA=m,null}function Lx(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case pt:return 2;case At:return 8;case Se:case me:return 32;case $e:return 268435456;default:return 32}default:return 32}}var mB=!1,sg=null,Xp=null,Yp=null,O_=new Map,Ch=new Map,mm=[],_B="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Px(m,y){switch(m){case"focusin":case"focusout":sg=null;break;case"dragenter":case"dragleave":Xp=null;break;case"mouseover":case"mouseout":Yp=null;break;case"pointerover":case"pointerout":O_.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ch.delete(y.pointerId)}}function T0(m,y,T,k,q,Y){return m===null||m.nativeEvent!==Y?(m={blockedOn:y,domEventName:T,eventSystemFlags:k,nativeEvent:Y,targetContainers:[q]},y!==null&&(y=Fs(y),y!==null&&gB(y)),m):(m.eventSystemFlags|=k,y=m.targetContainers,q!==null&&y.indexOf(q)===-1&&y.push(q),m)}function GM(m,y,T,k,q){switch(y){case"focusin":return sg=T0(sg,m,y,T,k,q),!0;case"dragenter":return Xp=T0(Xp,m,y,T,k,q),!0;case"mouseover":return Yp=T0(Yp,m,y,T,k,q),!0;case"pointerover":var Y=q.pointerId;return O_.set(Y,T0(O_.get(Y)||null,m,y,T,k,q)),!0;case"gotpointercapture":return Y=q.pointerId,Ch.set(Y,T0(Ch.get(Y)||null,m,y,T,k,q)),!0}return!1}function vB(m){var y=Hc(m.target);if(y!==null){var T=l(y);if(T!==null){if(y=T.tag,y===13){if(y=u(T),y!==null){m.blockedOn=y,cr(m.priority,function(){if(T.tag===13){var k=M();k=vn(k);var q=ch(T,k);q!==null&&K(q,T,k),Fx(T,k)}});return}}else if(y===3&&T.stateNode.current.memoizedState.isDehydrated){m.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Eh(m){if(m.blockedOn!==null)return!1;for(var y=m.targetContainers;0<y.length;){var T=zb(m.nativeEvent);if(T===null){T=m.nativeEvent;var k=new T.constructor(T.type,T);LA=k,T.target.dispatchEvent(k),LA=null}else return y=Fs(T),y!==null&&gB(y),m.blockedOn=T,!1;y.shift()}return!0}function Jp(m,y,T){Eh(m)&&T.delete(y)}function Ox(){mB=!1,sg!==null&&Eh(sg)&&(sg=null),Xp!==null&&Eh(Xp)&&(Xp=null),Yp!==null&&Eh(Yp)&&(Yp=null),O_.forEach(Jp),Ch.forEach(Jp)}function _m(m,y){m.blockedOn===y&&(m.blockedOn=null,mB||(mB=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ox)))}var M0=null;function VM(m){M0!==m&&(M0=m,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){M0===m&&(M0=null);for(var y=0;y<m.length;y+=3){var T=m[y],k=m[y+1],q=m[y+2];if(typeof k!="function"){if(Gb(k||T)===null)continue;break}var Y=Fs(T);Y!==null&&(m.splice(y,3),y-=3,u0(Y,{pending:!0,data:q,method:T.method,action:k},k,q))}}))}function Vb(m){function y(rt){return _m(rt,m)}sg!==null&&_m(sg,m),Xp!==null&&_m(Xp,m),Yp!==null&&_m(Yp,m),O_.forEach(y),Ch.forEach(y);for(var T=0;T<mm.length;T++){var k=mm[T];k.blockedOn===m&&(k.blockedOn=null)}for(;0<mm.length&&(T=mm[0],T.blockedOn===null);)vB(T),T.blockedOn===null&&mm.shift();if(T=(m.ownerDocument||m).$$reactFormReplay,T!=null)for(k=0;k<T.length;k+=3){var q=T[k],Y=T[k+1],be=q[$n]||null;if(typeof Y=="function")be||VM(T);else if(be){var Ue=null;if(Y&&Y.hasAttribute("formAction")){if(q=Y,be=Y[$n]||null)Ue=be.formAction;else if(Gb(q)!==null)continue}else Ue=be.action;typeof Ue=="function"?T[k+1]=Ue:(T.splice(k,3),k-=3),VM(T)}}}function yB(m){this._internalRoot=m}qb.prototype.render=yB.prototype.render=function(m){var y=this._internalRoot;if(y===null)throw Error(r(409));var T=y.current,k=M();pB(T,k,m,y,null,null)},qb.prototype.unmount=yB.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var y=m.containerInfo;pB(m.current,2,null,m,null,null),dt(),y[co]=null}};function qb(m){this._internalRoot=m}qb.prototype.unstable_scheduleHydration=function(m){if(m){var y=Tn();m={blockedOn:null,target:m,priority:y};for(var T=0;T<mm.length&&y!==0&&y<mm[T].priority;T++);mm.splice(T,0,m),T===0&&vB(m)}};var bB=e.version;if(bB!=="19.1.0")throw Error(r(527,bB,"19.1.0"));_e.findDOMNode=function(m){var y=m._reactInternals;if(y===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=g(y),m=m!==null?_(m):null,m=m===null?null:m.stateNode,m};var og={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var R0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!R0.isDisabled&&R0.supportsFiber)try{ft=R0.inject(og),Ot=R0}catch{}}return $2.createRoot=function(m,y){if(!s(m))throw Error(r(299));var T=!1,k="",q=om,Y=ud,be=Lp,Ue=null;return y!=null&&(y.unstable_strictMode===!0&&(T=!0),y.identifierPrefix!==void 0&&(k=y.identifierPrefix),y.onUncaughtError!==void 0&&(q=y.onUncaughtError),y.onCaughtError!==void 0&&(Y=y.onCaughtError),y.onRecoverableError!==void 0&&(be=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(Ue=y.unstable_transitionCallbacks)),y=dB(m,1,!1,null,null,T,k,q,Y,be,Ue,null),m[co]=y.current,ZS(m),new yB(y)},$2.hydrateRoot=function(m,y,T){if(!s(m))throw Error(r(299));var k=!1,q="",Y=om,be=ud,Ue=Lp,rt=null,Ft=null;return T!=null&&(T.unstable_strictMode===!0&&(k=!0),T.identifierPrefix!==void 0&&(q=T.identifierPrefix),T.onUncaughtError!==void 0&&(Y=T.onUncaughtError),T.onCaughtError!==void 0&&(be=T.onCaughtError),T.onRecoverableError!==void 0&&(Ue=T.onRecoverableError),T.unstable_transitionCallbacks!==void 0&&(rt=T.unstable_transitionCallbacks),T.formState!==void 0&&(Ft=T.formState)),y=dB(m,1,!0,y,T??null,k,q,Y,be,Ue,rt,Ft),y.context=AB(null),T=y.current,k=M(),k=vn(k),q=To(k),q.callback=null,dh(T,q,k),T=k,y.current.lanes=T,Xt(y,T),Kp(y),m[co]=y.current,ZS(m),new qb(y)},$2.version="19.1.0",$2}var wK;function O0e(){if(wK)return HN.exports;wK=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),HN.exports=P0e(),HN.exports}var Mz=O0e();/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const jT="172",j1={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},K1={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Hne=0,tH=1,zne=2,Q0e=3,Gne=0,Ok=1,WI=2,Sg=3,If=0,mu=1,Ll=2,Dg=0,pw=1,iH=2,nH=3,rH=4,Vne=5,Fy=100,qne=101,$ne=102,Wne=103,jne=104,Kne=200,Xne=201,Yne=202,Jne=203,BU=204,IU=205,Zne=206,ere=207,tre=208,ire=209,nre=210,rre=211,sre=212,ore=213,are=214,TU=0,MU=1,RU=2,Sw=3,DU=4,FU=5,UU=6,kU=7,KT=0,lre=1,cre=2,xf=0,Rz=1,Dz=2,Fz=3,Qk=4,ure=5,Uz=6,aS=7,sH="attached",hre="detached",qy=300,Gv=301,$y=302,Bw=303,pT=304,TS=306,Vd=1e3,$o=1001,Vv=1002,Da=1003,zw=1004,N0e=1004,qm=1005,H0e=1005,Or=1006,Lv=1007,z0e=1007,Ju=1008,oH=1008,$a=1009,Nk=1010,Hk=1011,lS=1012,XT=1013,jm=1014,ra=1015,Ol=1016,zk=1017,Gk=1018,Iw=1020,kz=35902,Lz=1021,Pz=1022,lo=1023,Oz=1024,Qz=1025,fw=1026,Tw=1027,Fv=1028,YT=1029,Oy=1030,Vk=1031,G0e=1032,qk=1033,jI=33776,JE=33777,KI=33778,ZE=33779,fT=35840,LU=35841,gT=35842,PU=35843,mT=36196,_T=37492,vT=37496,cS=37808,OU=37809,QU=37810,NU=37811,uS=37812,HU=37813,zU=37814,GU=37815,VU=37816,qU=37817,$U=37818,WU=37819,jU=37820,KU=37821,eS=36492,XU=36494,yT=36495,Nz=36283,YU=36284,JU=36285,ZU=36286,hS=2200,gw=2201,bT=2202,Mw=2300,Rw=2301,tU=2302,ow=2400,aw=2401,wT=2402,$k=2500,Hz=2501,dre=0,zz=1,ek=2,Are=3200,Gz=3201,V0e=3202,q0e=3203,tb=0,pre=1,dp="",rr="srgb",Co="srgb-linear",xT="linear",oo="srgb",$0e=0,X1=7680,W0e=7681,j0e=7682,K0e=7683,X0e=34055,Y0e=34056,J0e=5386,Z0e=512,eye=513,tye=514,iye=515,nye=516,rye=517,sye=518,aH=519,fre=512,gre=513,mre=514,Vz=515,_re=516,vre=517,yre=518,bre=519,CT=35044,oye=35048,aye=35040,lye=35045,cye=35049,uye=35041,hye=35046,dye=35050,Aye=35042,pye="100",lH="300 es",Mg=2e3,ET=2001;class FA{addEventListener(e,i){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(i)===-1&&r[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const l=s.indexOf(i);l!==-1&&s.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const s=r.slice(0);for(let l=0,u=s.length;l<u;l++)s[l].call(this,e);e.target=null}}}const Ph=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let xK=1234567;const mw=Math.PI/180,dS=180/Math.PI;function gp(){const a=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ph[a&255]+Ph[a>>8&255]+Ph[a>>16&255]+Ph[a>>24&255]+"-"+Ph[e&255]+Ph[e>>8&255]+"-"+Ph[e>>16&15|64]+Ph[e>>24&255]+"-"+Ph[i&63|128]+Ph[i>>8&255]+"-"+Ph[i>>16&255]+Ph[i>>24&255]+Ph[r&255]+Ph[r>>8&255]+Ph[r>>16&255]+Ph[r>>24&255]).toLowerCase()}function pr(a,e,i){return Math.max(e,Math.min(i,a))}function qz(a,e){return(a%e+e)%e}function fye(a,e,i,r,s){return r+(a-e)*(s-r)/(i-e)}function gye(a,e,i){return a!==e?(i-a)/(e-a):0}function XI(a,e,i){return(1-i)*a+i*e}function mye(a,e,i,r){return XI(a,e,1-Math.exp(-i*r))}function _ye(a,e=1){return e-Math.abs(qz(a,e*2)-e)}function vye(a,e,i){return a<=e?0:a>=i?1:(a=(a-e)/(i-e),a*a*(3-2*a))}function yye(a,e,i){return a<=e?0:a>=i?1:(a=(a-e)/(i-e),a*a*a*(a*(a*6-15)+10))}function bye(a,e){return a+Math.floor(Math.random()*(e-a+1))}function wye(a,e){return a+Math.random()*(e-a)}function xye(a){return a*(.5-Math.random())}function Cye(a){a!==void 0&&(xK=a);let e=xK+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Eye(a){return a*mw}function Sye(a){return a*dS}function Bye(a){return(a&a-1)===0&&a!==0}function Iye(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Tye(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function Mye(a,e,i,r,s){const l=Math.cos,u=Math.sin,A=l(i/2),g=u(i/2),_=l((e+r)/2),b=u((e+r)/2),x=l((e-r)/2),C=u((e-r)/2),I=l((r-e)/2),F=u((r-e)/2);switch(s){case"XYX":a.set(A*b,g*x,g*C,A*_);break;case"YZY":a.set(g*C,A*b,g*x,A*_);break;case"ZXZ":a.set(g*x,g*C,A*b,A*_);break;case"XZX":a.set(A*b,g*F,g*I,A*_);break;case"YXY":a.set(g*I,A*b,g*F,A*_);break;case"ZYZ":a.set(g*F,g*I,A*b,A*_);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function zd(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return a/4294967295;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int32Array:return Math.max(a/2147483647,-1);case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw new Error("Invalid component type.")}}function Mr(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return Math.round(a*4294967295);case Uint16Array:return Math.round(a*65535);case Uint8Array:return Math.round(a*255);case Int32Array:return Math.round(a*2147483647);case Int16Array:return Math.round(a*32767);case Int8Array:return Math.round(a*127);default:throw new Error("Invalid component type.")}}const uc={DEG2RAD:mw,RAD2DEG:dS,generateUUID:gp,clamp:pr,euclideanModulo:qz,mapLinear:fye,inverseLerp:gye,lerp:XI,damp:mye,pingpong:_ye,smoothstep:vye,smootherstep:yye,randInt:bye,randFloat:wye,randFloatSpread:xye,seededRandom:Cye,degToRad:Eye,radToDeg:Sye,isPowerOfTwo:Bye,ceilPowerOfTwo:Iye,floorPowerOfTwo:Tye,setQuaternionFromProperEuler:Mye,normalize:Mr,denormalize:zd};class ci{constructor(e=0,i=0){ci.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,i){return this.x=e,this.y=i,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const i=this.x,r=this.y,s=e.elements;return this.x=s[0]*i+s[3]*r+s[6],this.y=s[1]*i+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,i){return this.x=pr(this.x,e.x,i.x),this.y=pr(this.y,e.y,i.y),this}clampScalar(e,i){return this.x=pr(this.x,e,i),this.y=pr(this.y,e,i),this}clampLength(e,i){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pr(r,e,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const r=this.dot(e)/i;return Math.acos(pr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,r=this.y-e.y;return i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this}lerpVectors(e,i,r){return this.x=e.x+(i.x-e.x)*r,this.y=e.y+(i.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this}rotateAround(e,i){const r=Math.cos(i),s=Math.sin(i),l=this.x-e.x,u=this.y-e.y;return this.x=l*r-u*s+e.x,this.y=l*s+u*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class nr{constructor(e,i,r,s,l,u,A,g,_){nr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,i,r,s,l,u,A,g,_)}set(e,i,r,s,l,u,A,g,_){const b=this.elements;return b[0]=e,b[1]=s,b[2]=A,b[3]=i,b[4]=l,b[5]=g,b[6]=r,b[7]=u,b[8]=_,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const i=this.elements,r=e.elements;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],this}extractBasis(e,i,r){return e.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const i=e.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const r=e.elements,s=i.elements,l=this.elements,u=r[0],A=r[3],g=r[6],_=r[1],b=r[4],x=r[7],C=r[2],I=r[5],F=r[8],L=s[0],U=s[3],P=s[6],H=s[1],N=s[4],z=s[7],W=s[2],j=s[5],J=s[8];return l[0]=u*L+A*H+g*W,l[3]=u*U+A*N+g*j,l[6]=u*P+A*z+g*J,l[1]=_*L+b*H+x*W,l[4]=_*U+b*N+x*j,l[7]=_*P+b*z+x*J,l[2]=C*L+I*H+F*W,l[5]=C*U+I*N+F*j,l[8]=C*P+I*z+F*J,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=e,i[4]*=e,i[7]*=e,i[2]*=e,i[5]*=e,i[8]*=e,this}determinant(){const e=this.elements,i=e[0],r=e[1],s=e[2],l=e[3],u=e[4],A=e[5],g=e[6],_=e[7],b=e[8];return i*u*b-i*A*_-r*l*b+r*A*g+s*l*_-s*u*g}invert(){const e=this.elements,i=e[0],r=e[1],s=e[2],l=e[3],u=e[4],A=e[5],g=e[6],_=e[7],b=e[8],x=b*u-A*_,C=A*g-b*l,I=_*l-u*g,F=i*x+r*C+s*I;if(F===0)return this.set(0,0,0,0,0,0,0,0,0);const L=1/F;return e[0]=x*L,e[1]=(s*_-b*r)*L,e[2]=(A*r-s*u)*L,e[3]=C*L,e[4]=(b*i-s*g)*L,e[5]=(s*l-A*i)*L,e[6]=I*L,e[7]=(r*g-_*i)*L,e[8]=(u*i-r*l)*L,this}transpose(){let e;const i=this.elements;return e=i[1],i[1]=i[3],i[3]=e,e=i[2],i[2]=i[6],i[6]=e,e=i[5],i[5]=i[7],i[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const i=this.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this}setUvTransform(e,i,r,s,l,u,A){const g=Math.cos(l),_=Math.sin(l);return this.set(r*g,r*_,-r*(g*u+_*A)+u+e,-s*_,s*g,-s*(-_*u+g*A)+A+i,0,0,1),this}scale(e,i){return this.premultiply(qN.makeScale(e,i)),this}rotate(e){return this.premultiply(qN.makeRotation(-e)),this}translate(e,i){return this.premultiply(qN.makeTranslation(e,i)),this}makeTranslation(e,i){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,i,0,0,1),this}makeRotation(e){const i=Math.cos(e),r=Math.sin(e);return this.set(i,-r,0,r,i,0,0,0,1),this}makeScale(e,i){return this.set(e,0,0,0,i,0,0,0,1),this}equals(e){const i=this.elements,r=e.elements;for(let s=0;s<9;s++)if(i[s]!==r[s])return!1;return!0}fromArray(e,i=0){for(let r=0;r<9;r++)this.elements[r]=e[r+i];return this}toArray(e=[],i=0){const r=this.elements;return e[i]=r[0],e[i+1]=r[1],e[i+2]=r[2],e[i+3]=r[3],e[i+4]=r[4],e[i+5]=r[5],e[i+6]=r[6],e[i+7]=r[7],e[i+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const qN=new nr;function wre(a){for(let e=a.length-1;e>=0;--e)if(a[e]>=65535)return!0;return!1}const Rye={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function GE(a,e){return new Rye[a](e)}function ST(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function xre(){const a=ST("canvas");return a.style.display="block",a}const CK={};function NE(a){a in CK||(CK[a]=!0,console.warn(a))}function Dye(a,e,i){return new Promise(function(r,s){function l(){switch(a.clientWaitSync(e,a.SYNC_FLUSH_COMMANDS_BIT,0)){case a.WAIT_FAILED:s();break;case a.TIMEOUT_EXPIRED:setTimeout(l,i);break;default:r()}}setTimeout(l,i)})}function Fye(a){const e=a.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Uye(a){const e=a.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const EK=new nr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),SK=new nr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function kye(){const a={enabled:!0,workingColorSpace:Co,spaces:{},convert:function(s,l,u){return this.enabled===!1||l===u||!l||!u||(this.spaces[l].transfer===oo&&(s.r=Pv(s.r),s.g=Pv(s.g),s.b=Pv(s.b)),this.spaces[l].primaries!==this.spaces[u].primaries&&(s.applyMatrix3(this.spaces[l].toXYZ),s.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===oo&&(s.r=tS(s.r),s.g=tS(s.g),s.b=tS(s.b))),s},fromWorkingColorSpace:function(s,l){return this.convert(s,this.workingColorSpace,l)},toWorkingColorSpace:function(s,l){return this.convert(s,l,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===dp?xT:this.spaces[s].transfer},getLuminanceCoefficients:function(s,l=this.workingColorSpace){return s.fromArray(this.spaces[l].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,l,u){return s.copy(this.spaces[l].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],r=[.3127,.329];return a.define({[Co]:{primaries:e,whitePoint:r,transfer:xT,toXYZ:EK,fromXYZ:SK,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:rr},outputColorSpaceConfig:{drawingBufferColorSpace:rr}},[rr]:{primaries:e,whitePoint:r,transfer:oo,toXYZ:EK,fromXYZ:SK,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:rr}}}),a}const lr=kye();function Pv(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function tS(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}let KC;class Cre{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{KC===void 0&&(KC=ST("canvas")),KC.width=e.width,KC.height=e.height;const r=KC.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=KC}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const i=ST("canvas");i.width=e.width,i.height=e.height;const r=i.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),l=s.data;for(let u=0;u<l.length;u++)l[u]=Pv(l[u]/255)*255;return r.putImageData(s,0,0),i}else if(e.data){const i=e.data.slice(0);for(let r=0;r<i.length;r++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[r]=Math.floor(Pv(i[r]/255)*255):i[r]=Pv(i[r]);return{data:i,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Lye=0;class Qy{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Lye++}),this.uuid=gp(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let l;if(Array.isArray(s)){l=[];for(let u=0,A=s.length;u<A;u++)s[u].isDataTexture?l.push($N(s[u].image)):l.push($N(s[u]))}else l=$N(s);r.url=l}return i||(e.images[this.uuid]=r),r}}function $N(a){return typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap?Cre.getDataURL(a):a.data?{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Pye=0,Js=class iU extends FA{constructor(e=iU.DEFAULT_IMAGE,i=iU.DEFAULT_MAPPING,r=$o,s=$o,l=Or,u=Ju,A=lo,g=$a,_=iU.DEFAULT_ANISOTROPY,b=dp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Pye++}),this.uuid=gp(),this.name="",this.source=new Qy(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=l,this.minFilter=u,this.anisotropy=_,this.format=A,this.internalFormat=null,this.type=g,this.offset=new ci(0,0),this.repeat=new ci(1,1),this.center=new ci(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=b,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==qy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vd:e.x=e.x-Math.floor(e.x);break;case $o:e.x=e.x<0?0:1;break;case Vv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Vd:e.y=e.y-Math.floor(e.y);break;case $o:e.y=e.y<0?0:1;break;case Vv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Js.DEFAULT_IMAGE=null;Js.DEFAULT_MAPPING=qy;Js.DEFAULT_ANISOTROPY=1;class Vr{constructor(e=0,i=0,r=0,s=1){Vr.prototype.isVector4=!0,this.x=e,this.y=i,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,i,r,s){return this.x=e,this.y=i,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this.w=e.w+i.w,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this.w+=e.w*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this.w=e.w-i.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const i=this.x,r=this.y,s=this.z,l=this.w,u=e.elements;return this.x=u[0]*i+u[4]*r+u[8]*s+u[12]*l,this.y=u[1]*i+u[5]*r+u[9]*s+u[13]*l,this.z=u[2]*i+u[6]*r+u[10]*s+u[14]*l,this.w=u[3]*i+u[7]*r+u[11]*s+u[15]*l,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const i=Math.sqrt(1-e.w*e.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/i,this.y=e.y/i,this.z=e.z/i),this}setAxisAngleFromRotationMatrix(e){let i,r,s,l;const g=e.elements,_=g[0],b=g[4],x=g[8],C=g[1],I=g[5],F=g[9],L=g[2],U=g[6],P=g[10];if(Math.abs(b-C)<.01&&Math.abs(x-L)<.01&&Math.abs(F-U)<.01){if(Math.abs(b+C)<.1&&Math.abs(x+L)<.1&&Math.abs(F+U)<.1&&Math.abs(_+I+P-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const N=(_+1)/2,z=(I+1)/2,W=(P+1)/2,j=(b+C)/4,J=(x+L)/4,ie=(F+U)/4;return N>z&&N>W?N<.01?(r=0,s=.707106781,l=.707106781):(r=Math.sqrt(N),s=j/r,l=J/r):z>W?z<.01?(r=.707106781,s=0,l=.707106781):(s=Math.sqrt(z),r=j/s,l=ie/s):W<.01?(r=.707106781,s=.707106781,l=0):(l=Math.sqrt(W),r=J/l,s=ie/l),this.set(r,s,l,i),this}let H=Math.sqrt((U-F)*(U-F)+(x-L)*(x-L)+(C-b)*(C-b));return Math.abs(H)<.001&&(H=1),this.x=(U-F)/H,this.y=(x-L)/H,this.z=(C-b)/H,this.w=Math.acos((_+I+P-1)/2),this}setFromMatrixPosition(e){const i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this.w=i[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,i){return this.x=pr(this.x,e.x,i.x),this.y=pr(this.y,e.y,i.y),this.z=pr(this.z,e.z,i.z),this.w=pr(this.w,e.w,i.w),this}clampScalar(e,i){return this.x=pr(this.x,e,i),this.y=pr(this.y,e,i),this.z=pr(this.z,e,i),this.w=pr(this.w,e,i),this}clampLength(e,i){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pr(r,e,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this.w+=(e.w-this.w)*i,this}lerpVectors(e,i,r){return this.x=e.x+(i.x-e.x)*r,this.y=e.y+(i.y-e.y)*r,this.z=e.z+(i.z-e.z)*r,this.w=e.w+(i.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this.w=e[i+3],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e[i+3]=this.w,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this.w=e.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Wk extends FA{constructor(e=1,i=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=i,this.depth=1,this.scissor=new Vr(0,0,e,i),this.scissorTest=!1,this.viewport=new Vr(0,0,e,i);const s={width:e,height:i,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Or,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const l=new Js(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);l.flipY=!1,l.generateMipmaps=r.generateMipmaps,l.internalFormat=r.internalFormat,this.textures=[];const u=r.count;for(let A=0;A<u;A++)this.textures[A]=l.clone(),this.textures[A].isRenderTargetTexture=!0,this.textures[A].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,i,r=1){if(this.width!==e||this.height!==i||this.depth!==r){this.width=e,this.height=i,this.depth=r;for(let s=0,l=this.textures.length;s<l;s++)this.textures[s].image.width=e,this.textures[s].image.height=i,this.textures[s].image.depth=r;this.dispose()}this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,s=e.textures.length;r<s;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const i=Object.assign({},e.texture.image);return this.texture.source=new Qy(i),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class qd extends Wk{constructor(e=1,i=1,r={}){super(e,i,r),this.isWebGLRenderTarget=!0}}class JT extends Js{constructor(e=null,i=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:i,height:r,depth:s},this.magFilter=Da,this.minFilter=Da,this.wrapR=$o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Oye extends qd{constructor(e=1,i=1,r=1,s={}){super(e,i,s),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new JT(null,e,i,r),this.texture.isRenderTargetTexture=!0}}class ZT extends Js{constructor(e=null,i=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:i,height:r,depth:s},this.magFilter=Da,this.minFilter=Da,this.wrapR=$o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qye extends qd{constructor(e=1,i=1,r=1,s={}){super(e,i,s),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new ZT(null,e,i,r),this.texture.isRenderTargetTexture=!0}}class Ys{constructor(e=0,i=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=i,this._z=r,this._w=s}static slerpFlat(e,i,r,s,l,u,A){let g=r[s+0],_=r[s+1],b=r[s+2],x=r[s+3];const C=l[u+0],I=l[u+1],F=l[u+2],L=l[u+3];if(A===0){e[i+0]=g,e[i+1]=_,e[i+2]=b,e[i+3]=x;return}if(A===1){e[i+0]=C,e[i+1]=I,e[i+2]=F,e[i+3]=L;return}if(x!==L||g!==C||_!==I||b!==F){let U=1-A;const P=g*C+_*I+b*F+x*L,H=P>=0?1:-1,N=1-P*P;if(N>Number.EPSILON){const W=Math.sqrt(N),j=Math.atan2(W,P*H);U=Math.sin(U*j)/W,A=Math.sin(A*j)/W}const z=A*H;if(g=g*U+C*z,_=_*U+I*z,b=b*U+F*z,x=x*U+L*z,U===1-A){const W=1/Math.sqrt(g*g+_*_+b*b+x*x);g*=W,_*=W,b*=W,x*=W}}e[i]=g,e[i+1]=_,e[i+2]=b,e[i+3]=x}static multiplyQuaternionsFlat(e,i,r,s,l,u){const A=r[s],g=r[s+1],_=r[s+2],b=r[s+3],x=l[u],C=l[u+1],I=l[u+2],F=l[u+3];return e[i]=A*F+b*x+g*I-_*C,e[i+1]=g*F+b*C+_*x-A*I,e[i+2]=_*F+b*I+A*C-g*x,e[i+3]=b*F-A*x-g*C-_*I,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,i,r,s){return this._x=e,this._y=i,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,i=!0){const r=e._x,s=e._y,l=e._z,u=e._order,A=Math.cos,g=Math.sin,_=A(r/2),b=A(s/2),x=A(l/2),C=g(r/2),I=g(s/2),F=g(l/2);switch(u){case"XYZ":this._x=C*b*x+_*I*F,this._y=_*I*x-C*b*F,this._z=_*b*F+C*I*x,this._w=_*b*x-C*I*F;break;case"YXZ":this._x=C*b*x+_*I*F,this._y=_*I*x-C*b*F,this._z=_*b*F-C*I*x,this._w=_*b*x+C*I*F;break;case"ZXY":this._x=C*b*x-_*I*F,this._y=_*I*x+C*b*F,this._z=_*b*F+C*I*x,this._w=_*b*x-C*I*F;break;case"ZYX":this._x=C*b*x-_*I*F,this._y=_*I*x+C*b*F,this._z=_*b*F-C*I*x,this._w=_*b*x+C*I*F;break;case"YZX":this._x=C*b*x+_*I*F,this._y=_*I*x+C*b*F,this._z=_*b*F-C*I*x,this._w=_*b*x-C*I*F;break;case"XZY":this._x=C*b*x-_*I*F,this._y=_*I*x-C*b*F,this._z=_*b*F+C*I*x,this._w=_*b*x+C*I*F;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,i){const r=i/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const i=e.elements,r=i[0],s=i[4],l=i[8],u=i[1],A=i[5],g=i[9],_=i[2],b=i[6],x=i[10],C=r+A+x;if(C>0){const I=.5/Math.sqrt(C+1);this._w=.25/I,this._x=(b-g)*I,this._y=(l-_)*I,this._z=(u-s)*I}else if(r>A&&r>x){const I=2*Math.sqrt(1+r-A-x);this._w=(b-g)/I,this._x=.25*I,this._y=(s+u)/I,this._z=(l+_)/I}else if(A>x){const I=2*Math.sqrt(1+A-r-x);this._w=(l-_)/I,this._x=(s+u)/I,this._y=.25*I,this._z=(g+b)/I}else{const I=2*Math.sqrt(1+x-r-A);this._w=(u-s)/I,this._x=(l+_)/I,this._y=(g+b)/I,this._z=.25*I}return this._onChangeCallback(),this}setFromUnitVectors(e,i){let r=e.dot(i)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*i.z-e.z*i.y,this._y=e.z*i.x-e.x*i.z,this._z=e.x*i.y-e.y*i.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pr(this.dot(e),-1,1)))}rotateTowards(e,i){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,i/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,i){const r=e._x,s=e._y,l=e._z,u=e._w,A=i._x,g=i._y,_=i._z,b=i._w;return this._x=r*b+u*A+s*_-l*g,this._y=s*b+u*g+l*A-r*_,this._z=l*b+u*_+r*g-s*A,this._w=u*b-r*A-s*g-l*_,this._onChangeCallback(),this}slerp(e,i){if(i===0)return this;if(i===1)return this.copy(e);const r=this._x,s=this._y,l=this._z,u=this._w;let A=u*e._w+r*e._x+s*e._y+l*e._z;if(A<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,A=-A):this.copy(e),A>=1)return this._w=u,this._x=r,this._y=s,this._z=l,this;const g=1-A*A;if(g<=Number.EPSILON){const I=1-i;return this._w=I*u+i*this._w,this._x=I*r+i*this._x,this._y=I*s+i*this._y,this._z=I*l+i*this._z,this.normalize(),this}const _=Math.sqrt(g),b=Math.atan2(_,A),x=Math.sin((1-i)*b)/_,C=Math.sin(i*b)/_;return this._w=u*x+this._w*C,this._x=r*x+this._x*C,this._y=s*x+this._y*C,this._z=l*x+this._z*C,this._onChangeCallback(),this}slerpQuaternions(e,i,r){return this.copy(e).slerp(i,r)}random(){const e=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),l=Math.sqrt(r);return this.set(s*Math.sin(e),s*Math.cos(e),l*Math.sin(i),l*Math.cos(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,i=0){return this._x=e[i],this._y=e[i+1],this._z=e[i+2],this._w=e[i+3],this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._w,e}fromBufferAttribute(e,i){return this._x=e.getX(i),this._y=e.getY(i),this._z=e.getZ(i),this._w=e.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Fe{constructor(e=0,i=0,r=0){Fe.prototype.isVector3=!0,this.x=e,this.y=i,this.z=r}set(e,i,r){return r===void 0&&(r=this.z),this.x=e,this.y=i,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,i){return this.x=e.x*i.x,this.y=e.y*i.y,this.z=e.z*i.z,this}applyEuler(e){return this.applyQuaternion(BK.setFromEuler(e))}applyAxisAngle(e,i){return this.applyQuaternion(BK.setFromAxisAngle(e,i))}applyMatrix3(e){const i=this.x,r=this.y,s=this.z,l=e.elements;return this.x=l[0]*i+l[3]*r+l[6]*s,this.y=l[1]*i+l[4]*r+l[7]*s,this.z=l[2]*i+l[5]*r+l[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const i=this.x,r=this.y,s=this.z,l=e.elements,u=1/(l[3]*i+l[7]*r+l[11]*s+l[15]);return this.x=(l[0]*i+l[4]*r+l[8]*s+l[12])*u,this.y=(l[1]*i+l[5]*r+l[9]*s+l[13])*u,this.z=(l[2]*i+l[6]*r+l[10]*s+l[14])*u,this}applyQuaternion(e){const i=this.x,r=this.y,s=this.z,l=e.x,u=e.y,A=e.z,g=e.w,_=2*(u*s-A*r),b=2*(A*i-l*s),x=2*(l*r-u*i);return this.x=i+g*_+u*x-A*b,this.y=r+g*b+A*_-l*x,this.z=s+g*x+l*b-u*_,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const i=this.x,r=this.y,s=this.z,l=e.elements;return this.x=l[0]*i+l[4]*r+l[8]*s,this.y=l[1]*i+l[5]*r+l[9]*s,this.z=l[2]*i+l[6]*r+l[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,i){return this.x=pr(this.x,e.x,i.x),this.y=pr(this.y,e.y,i.y),this.z=pr(this.z,e.z,i.z),this}clampScalar(e,i){return this.x=pr(this.x,e,i),this.y=pr(this.y,e,i),this.z=pr(this.z,e,i),this}clampLength(e,i){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pr(r,e,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this}lerpVectors(e,i,r){return this.x=e.x+(i.x-e.x)*r,this.y=e.y+(i.y-e.y)*r,this.z=e.z+(i.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,i){const r=e.x,s=e.y,l=e.z,u=i.x,A=i.y,g=i.z;return this.x=s*g-l*A,this.y=l*u-r*g,this.z=r*A-s*u,this}projectOnVector(e){const i=e.lengthSq();if(i===0)return this.set(0,0,0);const r=e.dot(this)/i;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return WN.copy(this).projectOnVector(e),this.sub(WN)}reflect(e){return this.sub(WN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const r=this.dot(e)/i;return Math.acos(pr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return i*i+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,i,r){const s=Math.sin(i)*e;return this.x=s*Math.sin(r),this.y=Math.cos(i)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,i,r){return this.x=e*Math.sin(i),this.y=r,this.z=e*Math.cos(i),this}setFromMatrixPosition(e){const i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(e){const i=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=i,this.y=r,this.z=s,this}setFromMatrixColumn(e,i){return this.fromArray(e.elements,i*4)}setFromMatrix3Column(e,i){return this.fromArray(e.elements,i*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,i=Math.random()*2-1,r=Math.sqrt(1-i*i);return this.x=r*Math.cos(e),this.y=i,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const WN=new Fe,BK=new Ys;class ia{constructor(e=new Fe(1/0,1/0,1/0),i=new Fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromArray(e){this.makeEmpty();for(let i=0,r=e.length;i<r;i+=3)this.expandByPoint(yg.fromArray(e,i));return this}setFromBufferAttribute(e){this.makeEmpty();for(let i=0,r=e.count;i<r;i++)this.expandByPoint(yg.fromBufferAttribute(e,i));return this}setFromPoints(e){this.makeEmpty();for(let i=0,r=e.length;i<r;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){const r=yg.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,i=!1){return this.makeEmpty(),this.expandByObject(e,i)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,i=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const l=r.getAttribute("position");if(i===!0&&l!==void 0&&e.isInstancedMesh!==!0)for(let u=0,A=l.count;u<A;u++)e.isMesh===!0?e.getVertexPosition(u,yg):yg.fromBufferAttribute(l,u),yg.applyMatrix4(e.matrixWorld),this.expandByPoint(yg);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),AD.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),AD.copy(r.boundingBox)),AD.applyMatrix4(e.matrixWorld),this.union(AD)}const s=e.children;for(let l=0,u=s.length;l<u;l++)this.expandByObject(s[l],i);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,yg),yg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let i,r;return e.normal.x>0?(i=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(i=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(i+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(i+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(i+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(i+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),i<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(W2),pD.subVectors(this.max,W2),XC.subVectors(e.a,W2),YC.subVectors(e.b,W2),JC.subVectors(e.c,W2),my.subVectors(YC,XC),_y.subVectors(JC,YC),B1.subVectors(XC,JC);let i=[0,-my.z,my.y,0,-_y.z,_y.y,0,-B1.z,B1.y,my.z,0,-my.x,_y.z,0,-_y.x,B1.z,0,-B1.x,-my.y,my.x,0,-_y.y,_y.x,0,-B1.y,B1.x,0];return!jN(i,XC,YC,JC,pD)||(i=[1,0,0,0,1,0,0,0,1],!jN(i,XC,YC,JC,pD))?!1:(fD.crossVectors(my,_y),i=[fD.x,fD.y,fD.z],jN(i,XC,YC,JC,pD))}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yg).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(yg).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(cv[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cv[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cv[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cv[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cv[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cv[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cv[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cv[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cv),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cv=[new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe],yg=new Fe,AD=new ia,XC=new Fe,YC=new Fe,JC=new Fe,my=new Fe,_y=new Fe,B1=new Fe,W2=new Fe,pD=new Fe,fD=new Fe,I1=new Fe;function jN(a,e,i,r,s){for(let l=0,u=a.length-3;l<=u;l+=3){I1.fromArray(a,l);const A=s.x*Math.abs(I1.x)+s.y*Math.abs(I1.y)+s.z*Math.abs(I1.z),g=e.dot(I1),_=i.dot(I1),b=r.dot(I1);if(Math.max(-Math.max(g,_,b),Math.min(g,_,b))>A)return!1}return!0}const Nye=new ia,j2=new Fe,KN=new Fe;class dc{constructor(e=new Fe,i=-1){this.isSphere=!0,this.center=e,this.radius=i}set(e,i){return this.center.copy(e),this.radius=i,this}setFromPoints(e,i){const r=this.center;i!==void 0?r.copy(i):Nye.setFromPoints(e).getCenter(r);let s=0;for(let l=0,u=e.length;l<u;l++)s=Math.max(s,r.distanceToSquared(e[l]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const i=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=i*i}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,i){const r=this.center.distanceToSquared(e);return i.copy(e),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;j2.subVectors(e,this.center);const i=j2.lengthSq();if(i>this.radius*this.radius){const r=Math.sqrt(i),s=(r-this.radius)*.5;this.center.addScaledVector(j2,s/r),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(KN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(j2.copy(e.center).add(KN)),this.expandByPoint(j2.copy(e.center).sub(KN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const uv=new Fe,XN=new Fe,gD=new Fe,vy=new Fe,YN=new Fe,mD=new Fe,JN=new Fe;class Gw{constructor(e=new Fe,i=new Fe(0,0,-1)){this.origin=e,this.direction=i}set(e,i){return this.origin.copy(e),this.direction.copy(i),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,i){return i.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,uv)),this}closestPointToPoint(e,i){i.subVectors(e,this.origin);const r=i.dot(this.direction);return r<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const i=uv.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(uv.copy(this.origin).addScaledVector(this.direction,i),uv.distanceToSquared(e))}distanceSqToSegment(e,i,r,s){XN.copy(e).add(i).multiplyScalar(.5),gD.copy(i).sub(e).normalize(),vy.copy(this.origin).sub(XN);const l=e.distanceTo(i)*.5,u=-this.direction.dot(gD),A=vy.dot(this.direction),g=-vy.dot(gD),_=vy.lengthSq(),b=Math.abs(1-u*u);let x,C,I,F;if(b>0)if(x=u*g-A,C=u*A-g,F=l*b,x>=0)if(C>=-F)if(C<=F){const L=1/b;x*=L,C*=L,I=x*(x+u*C+2*A)+C*(u*x+C+2*g)+_}else C=l,x=Math.max(0,-(u*C+A)),I=-x*x+C*(C+2*g)+_;else C=-l,x=Math.max(0,-(u*C+A)),I=-x*x+C*(C+2*g)+_;else C<=-F?(x=Math.max(0,-(-u*l+A)),C=x>0?-l:Math.min(Math.max(-l,-g),l),I=-x*x+C*(C+2*g)+_):C<=F?(x=0,C=Math.min(Math.max(-l,-g),l),I=C*(C+2*g)+_):(x=Math.max(0,-(u*l+A)),C=x>0?l:Math.min(Math.max(-l,-g),l),I=-x*x+C*(C+2*g)+_);else C=u>0?-l:l,x=Math.max(0,-(u*C+A)),I=-x*x+C*(C+2*g)+_;return r&&r.copy(this.origin).addScaledVector(this.direction,x),s&&s.copy(XN).addScaledVector(gD,C),I}intersectSphere(e,i){uv.subVectors(e.center,this.origin);const r=uv.dot(this.direction),s=uv.dot(uv)-r*r,l=e.radius*e.radius;if(s>l)return null;const u=Math.sqrt(l-s),A=r-u,g=r+u;return g<0?null:A<0?this.at(g,i):this.at(A,i)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const i=e.normal.dot(this.direction);if(i===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/i;return r>=0?r:null}intersectPlane(e,i){const r=this.distanceToPlane(e);return r===null?null:this.at(r,i)}intersectsPlane(e){const i=e.distanceToPoint(this.origin);return i===0||e.normal.dot(this.direction)*i<0}intersectBox(e,i){let r,s,l,u,A,g;const _=1/this.direction.x,b=1/this.direction.y,x=1/this.direction.z,C=this.origin;return _>=0?(r=(e.min.x-C.x)*_,s=(e.max.x-C.x)*_):(r=(e.max.x-C.x)*_,s=(e.min.x-C.x)*_),b>=0?(l=(e.min.y-C.y)*b,u=(e.max.y-C.y)*b):(l=(e.max.y-C.y)*b,u=(e.min.y-C.y)*b),r>u||l>s||((l>r||isNaN(r))&&(r=l),(u<s||isNaN(s))&&(s=u),x>=0?(A=(e.min.z-C.z)*x,g=(e.max.z-C.z)*x):(A=(e.max.z-C.z)*x,g=(e.min.z-C.z)*x),r>g||A>s)||((A>r||r!==r)&&(r=A),(g<s||s!==s)&&(s=g),s<0)?null:this.at(r>=0?r:s,i)}intersectsBox(e){return this.intersectBox(e,uv)!==null}intersectTriangle(e,i,r,s,l){YN.subVectors(i,e),mD.subVectors(r,e),JN.crossVectors(YN,mD);let u=this.direction.dot(JN),A;if(u>0){if(s)return null;A=1}else if(u<0)A=-1,u=-u;else return null;vy.subVectors(this.origin,e);const g=A*this.direction.dot(mD.crossVectors(vy,mD));if(g<0)return null;const _=A*this.direction.dot(YN.cross(vy));if(_<0||g+_>u)return null;const b=-A*vy.dot(JN);return b<0?null:this.at(b/u,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ki{constructor(e,i,r,s,l,u,A,g,_,b,x,C,I,F,L,U){Ki.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,i,r,s,l,u,A,g,_,b,x,C,I,F,L,U)}set(e,i,r,s,l,u,A,g,_,b,x,C,I,F,L,U){const P=this.elements;return P[0]=e,P[4]=i,P[8]=r,P[12]=s,P[1]=l,P[5]=u,P[9]=A,P[13]=g,P[2]=_,P[6]=b,P[10]=x,P[14]=C,P[3]=I,P[7]=F,P[11]=L,P[15]=U,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ki().fromArray(this.elements)}copy(e){const i=this.elements,r=e.elements;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this}copyPosition(e){const i=this.elements,r=e.elements;return i[12]=r[12],i[13]=r[13],i[14]=r[14],this}setFromMatrix3(e){const i=e.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(e,i,r){return e.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,i,r){return this.set(e.x,i.x,r.x,0,e.y,i.y,r.y,0,e.z,i.z,r.z,0,0,0,0,1),this}extractRotation(e){const i=this.elements,r=e.elements,s=1/ZC.setFromMatrixColumn(e,0).length(),l=1/ZC.setFromMatrixColumn(e,1).length(),u=1/ZC.setFromMatrixColumn(e,2).length();return i[0]=r[0]*s,i[1]=r[1]*s,i[2]=r[2]*s,i[3]=0,i[4]=r[4]*l,i[5]=r[5]*l,i[6]=r[6]*l,i[7]=0,i[8]=r[8]*u,i[9]=r[9]*u,i[10]=r[10]*u,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(e){const i=this.elements,r=e.x,s=e.y,l=e.z,u=Math.cos(r),A=Math.sin(r),g=Math.cos(s),_=Math.sin(s),b=Math.cos(l),x=Math.sin(l);if(e.order==="XYZ"){const C=u*b,I=u*x,F=A*b,L=A*x;i[0]=g*b,i[4]=-g*x,i[8]=_,i[1]=I+F*_,i[5]=C-L*_,i[9]=-A*g,i[2]=L-C*_,i[6]=F+I*_,i[10]=u*g}else if(e.order==="YXZ"){const C=g*b,I=g*x,F=_*b,L=_*x;i[0]=C+L*A,i[4]=F*A-I,i[8]=u*_,i[1]=u*x,i[5]=u*b,i[9]=-A,i[2]=I*A-F,i[6]=L+C*A,i[10]=u*g}else if(e.order==="ZXY"){const C=g*b,I=g*x,F=_*b,L=_*x;i[0]=C-L*A,i[4]=-u*x,i[8]=F+I*A,i[1]=I+F*A,i[5]=u*b,i[9]=L-C*A,i[2]=-u*_,i[6]=A,i[10]=u*g}else if(e.order==="ZYX"){const C=u*b,I=u*x,F=A*b,L=A*x;i[0]=g*b,i[4]=F*_-I,i[8]=C*_+L,i[1]=g*x,i[5]=L*_+C,i[9]=I*_-F,i[2]=-_,i[6]=A*g,i[10]=u*g}else if(e.order==="YZX"){const C=u*g,I=u*_,F=A*g,L=A*_;i[0]=g*b,i[4]=L-C*x,i[8]=F*x+I,i[1]=x,i[5]=u*b,i[9]=-A*b,i[2]=-_*b,i[6]=I*x+F,i[10]=C-L*x}else if(e.order==="XZY"){const C=u*g,I=u*_,F=A*g,L=A*_;i[0]=g*b,i[4]=-x,i[8]=_*b,i[1]=C*x+L,i[5]=u*b,i[9]=I*x-F,i[2]=F*x-I,i[6]=A*b,i[10]=L*x+C}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Hye,e,zye)}lookAt(e,i,r){const s=this.elements;return lp.subVectors(e,i),lp.lengthSq()===0&&(lp.z=1),lp.normalize(),yy.crossVectors(r,lp),yy.lengthSq()===0&&(Math.abs(r.z)===1?lp.x+=1e-4:lp.z+=1e-4,lp.normalize(),yy.crossVectors(r,lp)),yy.normalize(),_D.crossVectors(lp,yy),s[0]=yy.x,s[4]=_D.x,s[8]=lp.x,s[1]=yy.y,s[5]=_D.y,s[9]=lp.y,s[2]=yy.z,s[6]=_D.z,s[10]=lp.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const r=e.elements,s=i.elements,l=this.elements,u=r[0],A=r[4],g=r[8],_=r[12],b=r[1],x=r[5],C=r[9],I=r[13],F=r[2],L=r[6],U=r[10],P=r[14],H=r[3],N=r[7],z=r[11],W=r[15],j=s[0],J=s[4],ie=s[8],ee=s[12],re=s[1],se=s[5],ue=s[9],fe=s[13],pe=s[2],xe=s[6],ce=s[10],_e=s[14],ye=s[3],Oe=s[7],ge=s[11],Ee=s[15];return l[0]=u*j+A*re+g*pe+_*ye,l[4]=u*J+A*se+g*xe+_*Oe,l[8]=u*ie+A*ue+g*ce+_*ge,l[12]=u*ee+A*fe+g*_e+_*Ee,l[1]=b*j+x*re+C*pe+I*ye,l[5]=b*J+x*se+C*xe+I*Oe,l[9]=b*ie+x*ue+C*ce+I*ge,l[13]=b*ee+x*fe+C*_e+I*Ee,l[2]=F*j+L*re+U*pe+P*ye,l[6]=F*J+L*se+U*xe+P*Oe,l[10]=F*ie+L*ue+U*ce+P*ge,l[14]=F*ee+L*fe+U*_e+P*Ee,l[3]=H*j+N*re+z*pe+W*ye,l[7]=H*J+N*se+z*xe+W*Oe,l[11]=H*ie+N*ue+z*ce+W*ge,l[15]=H*ee+N*fe+z*_e+W*Ee,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[4]*=e,i[8]*=e,i[12]*=e,i[1]*=e,i[5]*=e,i[9]*=e,i[13]*=e,i[2]*=e,i[6]*=e,i[10]*=e,i[14]*=e,i[3]*=e,i[7]*=e,i[11]*=e,i[15]*=e,this}determinant(){const e=this.elements,i=e[0],r=e[4],s=e[8],l=e[12],u=e[1],A=e[5],g=e[9],_=e[13],b=e[2],x=e[6],C=e[10],I=e[14],F=e[3],L=e[7],U=e[11],P=e[15];return F*(+l*g*x-s*_*x-l*A*C+r*_*C+s*A*I-r*g*I)+L*(+i*g*I-i*_*C+l*u*C-s*u*I+s*_*b-l*g*b)+U*(+i*_*x-i*A*I-l*u*x+r*u*I+l*A*b-r*_*b)+P*(-s*A*b-i*g*x+i*A*C+s*u*x-r*u*C+r*g*b)}transpose(){const e=this.elements;let i;return i=e[1],e[1]=e[4],e[4]=i,i=e[2],e[2]=e[8],e[8]=i,i=e[6],e[6]=e[9],e[9]=i,i=e[3],e[3]=e[12],e[12]=i,i=e[7],e[7]=e[13],e[13]=i,i=e[11],e[11]=e[14],e[14]=i,this}setPosition(e,i,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=i,s[14]=r),this}invert(){const e=this.elements,i=e[0],r=e[1],s=e[2],l=e[3],u=e[4],A=e[5],g=e[6],_=e[7],b=e[8],x=e[9],C=e[10],I=e[11],F=e[12],L=e[13],U=e[14],P=e[15],H=x*U*_-L*C*_+L*g*I-A*U*I-x*g*P+A*C*P,N=F*C*_-b*U*_-F*g*I+u*U*I+b*g*P-u*C*P,z=b*L*_-F*x*_+F*A*I-u*L*I-b*A*P+u*x*P,W=F*x*g-b*L*g-F*A*C+u*L*C+b*A*U-u*x*U,j=i*H+r*N+s*z+l*W;if(j===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const J=1/j;return e[0]=H*J,e[1]=(L*C*l-x*U*l-L*s*I+r*U*I+x*s*P-r*C*P)*J,e[2]=(A*U*l-L*g*l+L*s*_-r*U*_-A*s*P+r*g*P)*J,e[3]=(x*g*l-A*C*l-x*s*_+r*C*_+A*s*I-r*g*I)*J,e[4]=N*J,e[5]=(b*U*l-F*C*l+F*s*I-i*U*I-b*s*P+i*C*P)*J,e[6]=(F*g*l-u*U*l-F*s*_+i*U*_+u*s*P-i*g*P)*J,e[7]=(u*C*l-b*g*l+b*s*_-i*C*_-u*s*I+i*g*I)*J,e[8]=z*J,e[9]=(F*x*l-b*L*l-F*r*I+i*L*I+b*r*P-i*x*P)*J,e[10]=(u*L*l-F*A*l+F*r*_-i*L*_-u*r*P+i*A*P)*J,e[11]=(b*A*l-u*x*l-b*r*_+i*x*_+u*r*I-i*A*I)*J,e[12]=W*J,e[13]=(b*L*s-F*x*s+F*r*C-i*L*C-b*r*U+i*x*U)*J,e[14]=(F*A*s-u*L*s-F*r*g+i*L*g+u*r*U-i*A*U)*J,e[15]=(u*x*s-b*A*s+b*r*g-i*x*g-u*r*C+i*A*C)*J,this}scale(e){const i=this.elements,r=e.x,s=e.y,l=e.z;return i[0]*=r,i[4]*=s,i[8]*=l,i[1]*=r,i[5]*=s,i[9]*=l,i[2]*=r,i[6]*=s,i[10]*=l,i[3]*=r,i[7]*=s,i[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(i,r,s))}makeTranslation(e,i,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,i,0,0,1,r,0,0,0,1),this}makeRotationX(e){const i=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,i,-r,0,0,r,i,0,0,0,0,1),this}makeRotationY(e){const i=Math.cos(e),r=Math.sin(e);return this.set(i,0,r,0,0,1,0,0,-r,0,i,0,0,0,0,1),this}makeRotationZ(e){const i=Math.cos(e),r=Math.sin(e);return this.set(i,-r,0,0,r,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,i){const r=Math.cos(i),s=Math.sin(i),l=1-r,u=e.x,A=e.y,g=e.z,_=l*u,b=l*A;return this.set(_*u+r,_*A-s*g,_*g+s*A,0,_*A+s*g,b*A+r,b*g-s*u,0,_*g-s*A,b*g+s*u,l*g*g+r,0,0,0,0,1),this}makeScale(e,i,r){return this.set(e,0,0,0,0,i,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,i,r,s,l,u){return this.set(1,r,l,0,e,1,u,0,i,s,1,0,0,0,0,1),this}compose(e,i,r){const s=this.elements,l=i._x,u=i._y,A=i._z,g=i._w,_=l+l,b=u+u,x=A+A,C=l*_,I=l*b,F=l*x,L=u*b,U=u*x,P=A*x,H=g*_,N=g*b,z=g*x,W=r.x,j=r.y,J=r.z;return s[0]=(1-(L+P))*W,s[1]=(I+z)*W,s[2]=(F-N)*W,s[3]=0,s[4]=(I-z)*j,s[5]=(1-(C+P))*j,s[6]=(U+H)*j,s[7]=0,s[8]=(F+N)*J,s[9]=(U-H)*J,s[10]=(1-(C+L))*J,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,i,r){const s=this.elements;let l=ZC.set(s[0],s[1],s[2]).length();const u=ZC.set(s[4],s[5],s[6]).length(),A=ZC.set(s[8],s[9],s[10]).length();this.determinant()<0&&(l=-l),e.x=s[12],e.y=s[13],e.z=s[14],bg.copy(this);const _=1/l,b=1/u,x=1/A;return bg.elements[0]*=_,bg.elements[1]*=_,bg.elements[2]*=_,bg.elements[4]*=b,bg.elements[5]*=b,bg.elements[6]*=b,bg.elements[8]*=x,bg.elements[9]*=x,bg.elements[10]*=x,i.setFromRotationMatrix(bg),r.x=l,r.y=u,r.z=A,this}makePerspective(e,i,r,s,l,u,A=Mg){const g=this.elements,_=2*l/(i-e),b=2*l/(r-s),x=(i+e)/(i-e),C=(r+s)/(r-s);let I,F;if(A===Mg)I=-(u+l)/(u-l),F=-2*u*l/(u-l);else if(A===ET)I=-u/(u-l),F=-u*l/(u-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+A);return g[0]=_,g[4]=0,g[8]=x,g[12]=0,g[1]=0,g[5]=b,g[9]=C,g[13]=0,g[2]=0,g[6]=0,g[10]=I,g[14]=F,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(e,i,r,s,l,u,A=Mg){const g=this.elements,_=1/(i-e),b=1/(r-s),x=1/(u-l),C=(i+e)*_,I=(r+s)*b;let F,L;if(A===Mg)F=(u+l)*x,L=-2*x;else if(A===ET)F=l*x,L=-1*x;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+A);return g[0]=2*_,g[4]=0,g[8]=0,g[12]=-C,g[1]=0,g[5]=2*b,g[9]=0,g[13]=-I,g[2]=0,g[6]=0,g[10]=L,g[14]=-F,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(e){const i=this.elements,r=e.elements;for(let s=0;s<16;s++)if(i[s]!==r[s])return!1;return!0}fromArray(e,i=0){for(let r=0;r<16;r++)this.elements[r]=e[r+i];return this}toArray(e=[],i=0){const r=this.elements;return e[i]=r[0],e[i+1]=r[1],e[i+2]=r[2],e[i+3]=r[3],e[i+4]=r[4],e[i+5]=r[5],e[i+6]=r[6],e[i+7]=r[7],e[i+8]=r[8],e[i+9]=r[9],e[i+10]=r[10],e[i+11]=r[11],e[i+12]=r[12],e[i+13]=r[13],e[i+14]=r[14],e[i+15]=r[15],e}}const ZC=new Fe,bg=new Ki,Hye=new Fe(0,0,0),zye=new Fe(1,1,1),yy=new Fe,_D=new Fe,lp=new Fe,IK=new Ki,TK=new Ys;class hl{constructor(e=0,i=0,r=0,s=hl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,s=this._order){return this._x=e,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){const s=e.elements,l=s[0],u=s[4],A=s[8],g=s[1],_=s[5],b=s[9],x=s[2],C=s[6],I=s[10];switch(i){case"XYZ":this._y=Math.asin(pr(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-b,I),this._z=Math.atan2(-u,l)):(this._x=Math.atan2(C,_),this._z=0);break;case"YXZ":this._x=Math.asin(-pr(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(A,I),this._z=Math.atan2(g,_)):(this._y=Math.atan2(-x,l),this._z=0);break;case"ZXY":this._x=Math.asin(pr(C,-1,1)),Math.abs(C)<.9999999?(this._y=Math.atan2(-x,I),this._z=Math.atan2(-u,_)):(this._y=0,this._z=Math.atan2(g,l));break;case"ZYX":this._y=Math.asin(-pr(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(C,I),this._z=Math.atan2(g,l)):(this._x=0,this._z=Math.atan2(-u,_));break;case"YZX":this._z=Math.asin(pr(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-b,_),this._y=Math.atan2(-x,l)):(this._x=0,this._y=Math.atan2(A,I));break;case"XZY":this._z=Math.asin(-pr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(C,_),this._y=Math.atan2(A,l)):(this._x=Math.atan2(-b,I),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return IK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(IK,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return TK.setFromEuler(this),this.setFromQuaternion(TK,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}hl.DEFAULT_ORDER="XYZ";class AS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Gye=0;const MK=new Fe,eE=new Ys,hv=new Ki,vD=new Fe,K2=new Fe,Vye=new Fe,qye=new Ys,RK=new Fe(1,0,0),DK=new Fe(0,1,0),FK=new Fe(0,0,1),UK={type:"added"},$ye={type:"removed"},tE={type:"childadded",child:null},ZN={type:"childremoved",child:null};class xr extends FA{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gye++}),this.uuid=gp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xr.DEFAULT_UP.clone();const e=new Fe,i=new hl,r=new Ys,s=new Fe(1,1,1);function l(){r.setFromEuler(i,!1)}function u(){i.setFromQuaternion(r,void 0,!1)}i._onChange(l),r._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ki},normalMatrix:{value:new nr}}),this.matrix=new Ki,this.matrixWorld=new Ki,this.matrixAutoUpdate=xr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new AS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return eE.setFromAxisAngle(e,i),this.quaternion.multiply(eE),this}rotateOnWorldAxis(e,i){return eE.setFromAxisAngle(e,i),this.quaternion.premultiply(eE),this}rotateX(e){return this.rotateOnAxis(RK,e)}rotateY(e){return this.rotateOnAxis(DK,e)}rotateZ(e){return this.rotateOnAxis(FK,e)}translateOnAxis(e,i){return MK.copy(e).applyQuaternion(this.quaternion),this.position.add(MK.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(RK,e)}translateY(e){return this.translateOnAxis(DK,e)}translateZ(e){return this.translateOnAxis(FK,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(hv.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?vD.copy(e):vD.set(e,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),K2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hv.lookAt(K2,vD,this.up):hv.lookAt(vD,K2,this.up),this.quaternion.setFromRotationMatrix(hv),s&&(hv.extractRotation(s.matrixWorld),eE.setFromRotationMatrix(hv),this.quaternion.premultiply(eE.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(UK),tE.child=e,this.dispatchEvent(tE),tE.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent($ye),ZN.child=e,this.dispatchEvent(ZN),ZN.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),hv.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),hv.multiply(e.parent.matrixWorld)),e.applyMatrix4(hv),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(UK),tE.child=e,this.dispatchEvent(tE),tE.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const u=this.children[r].getObjectByProperty(e,i);if(u!==void 0)return u}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(K2,e,Vye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(K2,qye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(e)}traverseAncestors(e){const i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].updateWorldMatrix(!1,!0)}}toJSON(e){const i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(A=>({boxInitialized:A.boxInitialized,boxMin:A.box.min.toArray(),boxMax:A.box.max.toArray(),sphereInitialized:A.sphereInitialized,sphereRadius:A.sphere.radius,sphereCenter:A.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function l(A,g){return A[g.uuid]===void 0&&(A[g.uuid]=g.toJSON(e)),g.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=l(e.geometries,this.geometry);const A=this.geometry.parameters;if(A!==void 0&&A.shapes!==void 0){const g=A.shapes;if(Array.isArray(g))for(let _=0,b=g.length;_<b;_++){const x=g[_];l(e.shapes,x)}else l(e.shapes,g)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const A=[];for(let g=0,_=this.material.length;g<_;g++)A.push(l(e.materials,this.material[g]));s.material=A}else s.material=l(e.materials,this.material);if(this.children.length>0){s.children=[];for(let A=0;A<this.children.length;A++)s.children.push(this.children[A].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let A=0;A<this.animations.length;A++){const g=this.animations[A];s.animations.push(l(e.animations,g))}}if(i){const A=u(e.geometries),g=u(e.materials),_=u(e.textures),b=u(e.images),x=u(e.shapes),C=u(e.skeletons),I=u(e.animations),F=u(e.nodes);A.length>0&&(r.geometries=A),g.length>0&&(r.materials=g),_.length>0&&(r.textures=_),b.length>0&&(r.images=b),x.length>0&&(r.shapes=x),C.length>0&&(r.skeletons=C),I.length>0&&(r.animations=I),F.length>0&&(r.nodes=F)}return r.object=s,r;function u(A){const g=[];for(const _ in A){const b=A[_];delete b.metadata,g.push(b)}return g}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}xr.DEFAULT_UP=new Fe(0,1,0);xr.DEFAULT_MATRIX_AUTO_UPDATE=!0;xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const wg=new Fe,dv=new Fe,e6=new Fe,Av=new Fe,iE=new Fe,nE=new Fe,kK=new Fe,t6=new Fe,i6=new Fe,n6=new Fe,r6=new Vr,s6=new Vr,o6=new Vr;class zh{constructor(e=new Fe,i=new Fe,r=new Fe){this.a=e,this.b=i,this.c=r}static getNormal(e,i,r,s){s.subVectors(r,i),wg.subVectors(e,i),s.cross(wg);const l=s.lengthSq();return l>0?s.multiplyScalar(1/Math.sqrt(l)):s.set(0,0,0)}static getBarycoord(e,i,r,s,l){wg.subVectors(s,i),dv.subVectors(r,i),e6.subVectors(e,i);const u=wg.dot(wg),A=wg.dot(dv),g=wg.dot(e6),_=dv.dot(dv),b=dv.dot(e6),x=u*_-A*A;if(x===0)return l.set(0,0,0),null;const C=1/x,I=(_*g-A*b)*C,F=(u*b-A*g)*C;return l.set(1-I-F,F,I)}static containsPoint(e,i,r,s){return this.getBarycoord(e,i,r,s,Av)===null?!1:Av.x>=0&&Av.y>=0&&Av.x+Av.y<=1}static getInterpolation(e,i,r,s,l,u,A,g){return this.getBarycoord(e,i,r,s,Av)===null?(g.x=0,g.y=0,"z"in g&&(g.z=0),"w"in g&&(g.w=0),null):(g.setScalar(0),g.addScaledVector(l,Av.x),g.addScaledVector(u,Av.y),g.addScaledVector(A,Av.z),g)}static getInterpolatedAttribute(e,i,r,s,l,u){return r6.setScalar(0),s6.setScalar(0),o6.setScalar(0),r6.fromBufferAttribute(e,i),s6.fromBufferAttribute(e,r),o6.fromBufferAttribute(e,s),u.setScalar(0),u.addScaledVector(r6,l.x),u.addScaledVector(s6,l.y),u.addScaledVector(o6,l.z),u}static isFrontFacing(e,i,r,s){return wg.subVectors(r,i),dv.subVectors(e,i),wg.cross(dv).dot(s)<0}set(e,i,r){return this.a.copy(e),this.b.copy(i),this.c.copy(r),this}setFromPointsAndIndices(e,i,r,s){return this.a.copy(e[i]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,i,r,s){return this.a.fromBufferAttribute(e,i),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wg.subVectors(this.c,this.b),dv.subVectors(this.a,this.b),wg.cross(dv).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zh.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return zh.getBarycoord(e,this.a,this.b,this.c,i)}getInterpolation(e,i,r,s,l){return zh.getInterpolation(e,this.a,this.b,this.c,i,r,s,l)}containsPoint(e){return zh.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zh.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,i){const r=this.a,s=this.b,l=this.c;let u,A;iE.subVectors(s,r),nE.subVectors(l,r),t6.subVectors(e,r);const g=iE.dot(t6),_=nE.dot(t6);if(g<=0&&_<=0)return i.copy(r);i6.subVectors(e,s);const b=iE.dot(i6),x=nE.dot(i6);if(b>=0&&x<=b)return i.copy(s);const C=g*x-b*_;if(C<=0&&g>=0&&b<=0)return u=g/(g-b),i.copy(r).addScaledVector(iE,u);n6.subVectors(e,l);const I=iE.dot(n6),F=nE.dot(n6);if(F>=0&&I<=F)return i.copy(l);const L=I*_-g*F;if(L<=0&&_>=0&&F<=0)return A=_/(_-F),i.copy(r).addScaledVector(nE,A);const U=b*F-I*x;if(U<=0&&x-b>=0&&I-F>=0)return kK.subVectors(l,s),A=(x-b)/(x-b+(I-F)),i.copy(s).addScaledVector(kK,A);const P=1/(U+L+C);return u=L*P,A=C*P,i.copy(r).addScaledVector(iE,u).addScaledVector(nE,A)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ere={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},by={h:0,s:0,l:0},yD={h:0,s:0,l:0};function a6(a,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?a+(e-a)*6*i:i<1/2?e:i<2/3?a+(e-a)*6*(2/3-i):a}class Si{constructor(e,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,i,r)}set(e,i,r){if(i===void 0&&r===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,i,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=rr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,lr.toWorkingColorSpace(this,i),this}setRGB(e,i,r,s=lr.workingColorSpace){return this.r=e,this.g=i,this.b=r,lr.toWorkingColorSpace(this,s),this}setHSL(e,i,r,s=lr.workingColorSpace){if(e=qz(e,1),i=pr(i,0,1),r=pr(r,0,1),i===0)this.r=this.g=this.b=r;else{const l=r<=.5?r*(1+i):r+i-r*i,u=2*r-l;this.r=a6(u,l,e+1/3),this.g=a6(u,l,e),this.b=a6(u,l,e-1/3)}return lr.toWorkingColorSpace(this,s),this}setStyle(e,i=rr){function r(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let l;const u=s[1],A=s[2];switch(u){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return r(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,i);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return r(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,i);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return r(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=s[1],u=l.length;if(u===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,i);if(u===6)return this.setHex(parseInt(l,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e,i=rr){const r=Ere[e.toLowerCase()];return r!==void 0?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pv(e.r),this.g=Pv(e.g),this.b=Pv(e.b),this}copyLinearToSRGB(e){return this.r=tS(e.r),this.g=tS(e.g),this.b=tS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rr){return lr.fromWorkingColorSpace(Oh.copy(this),e),Math.round(pr(Oh.r*255,0,255))*65536+Math.round(pr(Oh.g*255,0,255))*256+Math.round(pr(Oh.b*255,0,255))}getHexString(e=rr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=lr.workingColorSpace){lr.fromWorkingColorSpace(Oh.copy(this),i);const r=Oh.r,s=Oh.g,l=Oh.b,u=Math.max(r,s,l),A=Math.min(r,s,l);let g,_;const b=(A+u)/2;if(A===u)g=0,_=0;else{const x=u-A;switch(_=b<=.5?x/(u+A):x/(2-u-A),u){case r:g=(s-l)/x+(s<l?6:0);break;case s:g=(l-r)/x+2;break;case l:g=(r-s)/x+4;break}g/=6}return e.h=g,e.s=_,e.l=b,e}getRGB(e,i=lr.workingColorSpace){return lr.fromWorkingColorSpace(Oh.copy(this),i),e.r=Oh.r,e.g=Oh.g,e.b=Oh.b,e}getStyle(e=rr){lr.fromWorkingColorSpace(Oh.copy(this),e);const i=Oh.r,r=Oh.g,s=Oh.b;return e!==rr?`color(${e} ${i.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(e,i,r){return this.getHSL(by),this.setHSL(by.h+e,by.s+i,by.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,r){return this.r=e.r+(i.r-e.r)*r,this.g=e.g+(i.g-e.g)*r,this.b=e.b+(i.b-e.b)*r,this}lerpHSL(e,i){this.getHSL(by),e.getHSL(yD);const r=XI(by.h,yD.h,i),s=XI(by.s,yD.s,i),l=XI(by.l,yD.l,i);return this.setHSL(r,s,l),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const i=this.r,r=this.g,s=this.b,l=e.elements;return this.r=l[0]*i+l[3]*r+l[6]*s,this.g=l[1]*i+l[4]*r+l[7]*s,this.b=l[2]*i+l[5]*r+l[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Oh=new Si;Si.NAMES=Ere;let Wye=0,dl=class extends FA{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Wye++}),this.uuid=gp(),this.name="",this.type="Material",this.blending=pw,this.side=If,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=BU,this.blendDst=IU,this.blendEquation=Fy,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Si(0,0,0),this.blendAlpha=0,this.depthFunc=Sw,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=aH,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=X1,this.stencilZFail=X1,this.stencilZPass=X1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const i in e){const r=e[i];if(r===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const s=this[i];if(s===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[i]=r}}toJSON(e){const i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==pw&&(r.blending=this.blending),this.side!==If&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==BU&&(r.blendSrc=this.blendSrc),this.blendDst!==IU&&(r.blendDst=this.blendDst),this.blendEquation!==Fy&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Sw&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==aH&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==X1&&(r.stencilFail=this.stencilFail),this.stencilZFail!==X1&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==X1&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(l){const u=[];for(const A in l){const g=l[A];delete g.metadata,u.push(g)}return u}if(i){const l=s(e.textures),u=s(e.images);l.length>0&&(r.textures=l),u.length>0&&(r.images=u)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const i=e.clippingPlanes;let r=null;if(i!==null){const s=i.length;r=new Array(s);for(let l=0;l!==s;++l)r[l]=i[l].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class Pc extends dl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.combine=KT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Rv=jye();function jye(){const a=new ArrayBuffer(4),e=new Float32Array(a),i=new Uint32Array(a),r=new Uint32Array(512),s=new Uint32Array(512);for(let g=0;g<256;++g){const _=g-127;_<-27?(r[g]=0,r[g|256]=32768,s[g]=24,s[g|256]=24):_<-14?(r[g]=1024>>-_-14,r[g|256]=1024>>-_-14|32768,s[g]=-_-1,s[g|256]=-_-1):_<=15?(r[g]=_+15<<10,r[g|256]=_+15<<10|32768,s[g]=13,s[g|256]=13):_<128?(r[g]=31744,r[g|256]=64512,s[g]=24,s[g|256]=24):(r[g]=31744,r[g|256]=64512,s[g]=13,s[g|256]=13)}const l=new Uint32Array(2048),u=new Uint32Array(64),A=new Uint32Array(64);for(let g=1;g<1024;++g){let _=g<<13,b=0;for(;(_&8388608)===0;)_<<=1,b-=8388608;_&=-8388609,b+=947912704,l[g]=_|b}for(let g=1024;g<2048;++g)l[g]=939524096+(g-1024<<13);for(let g=1;g<31;++g)u[g]=g<<23;u[31]=1199570944,u[32]=2147483648;for(let g=33;g<63;++g)u[g]=2147483648+(g-32<<23);u[63]=3347054592;for(let g=1;g<64;++g)g!==32&&(A[g]=1024);return{floatView:e,uint32View:i,baseTable:r,shiftTable:s,mantissaTable:l,exponentTable:u,offsetTable:A}}function BA(a){Math.abs(a)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),a=pr(a,-65504,65504),Rv.floatView[0]=a;const e=Rv.uint32View[0],i=e>>23&511;return Rv.baseTable[i]+((e&8388607)>>Rv.shiftTable[i])}function DI(a){const e=a>>10;return Rv.uint32View[0]=Rv.mantissaTable[Rv.offsetTable[e]+(a&1023)]+Rv.exponentTable[e],Rv.floatView[0]}const FI={toHalfFloat:BA,fromHalfFloat:DI},lc=new Fe,bD=new ci;class fr{constructor(e,i,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=e!==void 0?e.length/i:0,this.normalized=r,this.usage=CT,this.updateRanges=[],this.gpuType=ra,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,i,r){e*=this.itemSize,r*=i.itemSize;for(let s=0,l=this.itemSize;s<l;s++)this.array[e+s]=i.array[r+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let i=0,r=this.count;i<r;i++)bD.fromBufferAttribute(this,i),bD.applyMatrix3(e),this.setXY(i,bD.x,bD.y);else if(this.itemSize===3)for(let i=0,r=this.count;i<r;i++)lc.fromBufferAttribute(this,i),lc.applyMatrix3(e),this.setXYZ(i,lc.x,lc.y,lc.z);return this}applyMatrix4(e){for(let i=0,r=this.count;i<r;i++)lc.fromBufferAttribute(this,i),lc.applyMatrix4(e),this.setXYZ(i,lc.x,lc.y,lc.z);return this}applyNormalMatrix(e){for(let i=0,r=this.count;i<r;i++)lc.fromBufferAttribute(this,i),lc.applyNormalMatrix(e),this.setXYZ(i,lc.x,lc.y,lc.z);return this}transformDirection(e){for(let i=0,r=this.count;i<r;i++)lc.fromBufferAttribute(this,i),lc.transformDirection(e),this.setXYZ(i,lc.x,lc.y,lc.z);return this}set(e,i=0){return this.array.set(e,i),this}getComponent(e,i){let r=this.array[e*this.itemSize+i];return this.normalized&&(r=zd(r,this.array)),r}setComponent(e,i,r){return this.normalized&&(r=Mr(r,this.array)),this.array[e*this.itemSize+i]=r,this}getX(e){let i=this.array[e*this.itemSize];return this.normalized&&(i=zd(i,this.array)),i}setX(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize]=i,this}getY(e){let i=this.array[e*this.itemSize+1];return this.normalized&&(i=zd(i,this.array)),i}setY(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize+1]=i,this}getZ(e){let i=this.array[e*this.itemSize+2];return this.normalized&&(i=zd(i,this.array)),i}setZ(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize+2]=i,this}getW(e){let i=this.array[e*this.itemSize+3];return this.normalized&&(i=zd(i,this.array)),i}setW(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize+3]=i,this}setXY(e,i,r){return e*=this.itemSize,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array)),this.array[e+0]=i,this.array[e+1]=r,this}setXYZ(e,i,r,s){return e*=this.itemSize,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array),s=Mr(s,this.array)),this.array[e+0]=i,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,i,r,s,l){return e*=this.itemSize,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array),s=Mr(s,this.array),l=Mr(l,this.array)),this.array[e+0]=i,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==CT&&(e.usage=this.usage),e}}class Kye extends fr{constructor(e,i,r){super(new Int8Array(e),i,r)}}class Xye extends fr{constructor(e,i,r){super(new Uint8Array(e),i,r)}}class Yye extends fr{constructor(e,i,r){super(new Uint8ClampedArray(e),i,r)}}class Jye extends fr{constructor(e,i,r){super(new Int16Array(e),i,r)}}class jk extends fr{constructor(e,i,r){super(new Uint16Array(e),i,r)}}class Zye extends fr{constructor(e,i,r){super(new Int32Array(e),i,r)}}class $z extends fr{constructor(e,i,r){super(new Uint32Array(e),i,r)}}class ebe extends fr{constructor(e,i,r){super(new Uint16Array(e),i,r),this.isFloat16BufferAttribute=!0}getX(e){let i=DI(this.array[e*this.itemSize]);return this.normalized&&(i=zd(i,this.array)),i}setX(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize]=BA(i),this}getY(e){let i=DI(this.array[e*this.itemSize+1]);return this.normalized&&(i=zd(i,this.array)),i}setY(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize+1]=BA(i),this}getZ(e){let i=DI(this.array[e*this.itemSize+2]);return this.normalized&&(i=zd(i,this.array)),i}setZ(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize+2]=BA(i),this}getW(e){let i=DI(this.array[e*this.itemSize+3]);return this.normalized&&(i=zd(i,this.array)),i}setW(e,i){return this.normalized&&(i=Mr(i,this.array)),this.array[e*this.itemSize+3]=BA(i),this}setXY(e,i,r){return e*=this.itemSize,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array)),this.array[e+0]=BA(i),this.array[e+1]=BA(r),this}setXYZ(e,i,r,s){return e*=this.itemSize,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array),s=Mr(s,this.array)),this.array[e+0]=BA(i),this.array[e+1]=BA(r),this.array[e+2]=BA(s),this}setXYZW(e,i,r,s,l){return e*=this.itemSize,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array),s=Mr(s,this.array),l=Mr(l,this.array)),this.array[e+0]=BA(i),this.array[e+1]=BA(r),this.array[e+2]=BA(s),this.array[e+3]=BA(l),this}}class Ni extends fr{constructor(e,i,r){super(new Float32Array(e),i,r)}}let tbe=0;const pf=new Ki,l6=new xr,rE=new Fe,cp=new ia,X2=new ia,uu=new Fe;class Ln extends FA{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tbe++}),this.uuid=gp(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wre(e)?$z:jk)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,i){return this.attributes[e]=i,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,i,r=0){this.groups.push({start:e,count:i,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}applyMatrix4(e){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(e),i.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const l=new nr().getNormalMatrix(e);r.applyNormalMatrix(l),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return pf.makeRotationFromQuaternion(e),this.applyMatrix4(pf),this}rotateX(e){return pf.makeRotationX(e),this.applyMatrix4(pf),this}rotateY(e){return pf.makeRotationY(e),this.applyMatrix4(pf),this}rotateZ(e){return pf.makeRotationZ(e),this.applyMatrix4(pf),this}translate(e,i,r){return pf.makeTranslation(e,i,r),this.applyMatrix4(pf),this}scale(e,i,r){return pf.makeScale(e,i,r),this.applyMatrix4(pf),this}lookAt(e){return l6.lookAt(e),l6.updateMatrix(),this.applyMatrix4(l6.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rE).negate(),this.translate(rE.x,rE.y,rE.z),this}setFromPoints(e){const i=this.getAttribute("position");if(i===void 0){const r=[];for(let s=0,l=e.length;s<l;s++){const u=e[s];r.push(u.x,u.y,u.z||0)}this.setAttribute("position",new Ni(r,3))}else{const r=Math.min(e.length,i.count);for(let s=0;s<r;s++){const l=e[s];i.setXYZ(s,l.x,l.y,l.z||0)}e.length>i.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),i.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ia);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Fe(-1/0,-1/0,-1/0),new Fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),i)for(let r=0,s=i.length;r<s;r++){const l=i[r];cp.setFromBufferAttribute(l),this.morphTargetsRelative?(uu.addVectors(this.boundingBox.min,cp.min),this.boundingBox.expandByPoint(uu),uu.addVectors(this.boundingBox.max,cp.max),this.boundingBox.expandByPoint(uu)):(this.boundingBox.expandByPoint(cp.min),this.boundingBox.expandByPoint(cp.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dc);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Fe,1/0);return}if(e){const r=this.boundingSphere.center;if(cp.setFromBufferAttribute(e),i)for(let l=0,u=i.length;l<u;l++){const A=i[l];X2.setFromBufferAttribute(A),this.morphTargetsRelative?(uu.addVectors(cp.min,X2.min),cp.expandByPoint(uu),uu.addVectors(cp.max,X2.max),cp.expandByPoint(uu)):(cp.expandByPoint(X2.min),cp.expandByPoint(X2.max))}cp.getCenter(r);let s=0;for(let l=0,u=e.count;l<u;l++)uu.fromBufferAttribute(e,l),s=Math.max(s,r.distanceToSquared(uu));if(i)for(let l=0,u=i.length;l<u;l++){const A=i[l],g=this.morphTargetsRelative;for(let _=0,b=A.count;_<b;_++)uu.fromBufferAttribute(A,_),g&&(rE.fromBufferAttribute(e,_),uu.add(rE)),s=Math.max(s,r.distanceToSquared(uu))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,i=this.attributes;if(e===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=i.position,s=i.normal,l=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fr(new Float32Array(4*r.count),4));const u=this.getAttribute("tangent"),A=[],g=[];for(let ie=0;ie<r.count;ie++)A[ie]=new Fe,g[ie]=new Fe;const _=new Fe,b=new Fe,x=new Fe,C=new ci,I=new ci,F=new ci,L=new Fe,U=new Fe;function P(ie,ee,re){_.fromBufferAttribute(r,ie),b.fromBufferAttribute(r,ee),x.fromBufferAttribute(r,re),C.fromBufferAttribute(l,ie),I.fromBufferAttribute(l,ee),F.fromBufferAttribute(l,re),b.sub(_),x.sub(_),I.sub(C),F.sub(C);const se=1/(I.x*F.y-F.x*I.y);isFinite(se)&&(L.copy(b).multiplyScalar(F.y).addScaledVector(x,-I.y).multiplyScalar(se),U.copy(x).multiplyScalar(I.x).addScaledVector(b,-F.x).multiplyScalar(se),A[ie].add(L),A[ee].add(L),A[re].add(L),g[ie].add(U),g[ee].add(U),g[re].add(U))}let H=this.groups;H.length===0&&(H=[{start:0,count:e.count}]);for(let ie=0,ee=H.length;ie<ee;++ie){const re=H[ie],se=re.start,ue=re.count;for(let fe=se,pe=se+ue;fe<pe;fe+=3)P(e.getX(fe+0),e.getX(fe+1),e.getX(fe+2))}const N=new Fe,z=new Fe,W=new Fe,j=new Fe;function J(ie){W.fromBufferAttribute(s,ie),j.copy(W);const ee=A[ie];N.copy(ee),N.sub(W.multiplyScalar(W.dot(ee))).normalize(),z.crossVectors(j,ee);const se=z.dot(g[ie])<0?-1:1;u.setXYZW(ie,N.x,N.y,N.z,se)}for(let ie=0,ee=H.length;ie<ee;++ie){const re=H[ie],se=re.start,ue=re.count;for(let fe=se,pe=se+ue;fe<pe;fe+=3)J(e.getX(fe+0)),J(e.getX(fe+1)),J(e.getX(fe+2))}}computeVertexNormals(){const e=this.index,i=this.getAttribute("position");if(i!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new fr(new Float32Array(i.count*3),3),this.setAttribute("normal",r);else for(let C=0,I=r.count;C<I;C++)r.setXYZ(C,0,0,0);const s=new Fe,l=new Fe,u=new Fe,A=new Fe,g=new Fe,_=new Fe,b=new Fe,x=new Fe;if(e)for(let C=0,I=e.count;C<I;C+=3){const F=e.getX(C+0),L=e.getX(C+1),U=e.getX(C+2);s.fromBufferAttribute(i,F),l.fromBufferAttribute(i,L),u.fromBufferAttribute(i,U),b.subVectors(u,l),x.subVectors(s,l),b.cross(x),A.fromBufferAttribute(r,F),g.fromBufferAttribute(r,L),_.fromBufferAttribute(r,U),A.add(b),g.add(b),_.add(b),r.setXYZ(F,A.x,A.y,A.z),r.setXYZ(L,g.x,g.y,g.z),r.setXYZ(U,_.x,_.y,_.z)}else for(let C=0,I=i.count;C<I;C+=3)s.fromBufferAttribute(i,C+0),l.fromBufferAttribute(i,C+1),u.fromBufferAttribute(i,C+2),b.subVectors(u,l),x.subVectors(s,l),b.cross(x),r.setXYZ(C+0,b.x,b.y,b.z),r.setXYZ(C+1,b.x,b.y,b.z),r.setXYZ(C+2,b.x,b.y,b.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let i=0,r=e.count;i<r;i++)uu.fromBufferAttribute(e,i),uu.normalize(),e.setXYZ(i,uu.x,uu.y,uu.z)}toNonIndexed(){function e(A,g){const _=A.array,b=A.itemSize,x=A.normalized,C=new _.constructor(g.length*b);let I=0,F=0;for(let L=0,U=g.length;L<U;L++){A.isInterleavedBufferAttribute?I=g[L]*A.data.stride+A.offset:I=g[L]*b;for(let P=0;P<b;P++)C[F++]=_[I++]}return new fr(C,b,x)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new Ln,r=this.index.array,s=this.attributes;for(const A in s){const g=s[A],_=e(g,r);i.setAttribute(A,_)}const l=this.morphAttributes;for(const A in l){const g=[],_=l[A];for(let b=0,x=_.length;b<x;b++){const C=_[b],I=e(C,r);g.push(I)}i.morphAttributes[A]=g}i.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let A=0,g=u.length;A<g;A++){const _=u[A];i.addGroup(_.start,_.count,_.materialIndex)}return i}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const g=this.parameters;for(const _ in g)g[_]!==void 0&&(e[_]=g[_]);return e}e.data={attributes:{}};const i=this.index;i!==null&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const r=this.attributes;for(const g in r){const _=r[g];e.data.attributes[g]=_.toJSON(e.data)}const s={};let l=!1;for(const g in this.morphAttributes){const _=this.morphAttributes[g],b=[];for(let x=0,C=_.length;x<C;x++){const I=_[x];b.push(I.toJSON(e.data))}b.length>0&&(s[g]=b,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const A=this.boundingSphere;return A!==null&&(e.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(i));const s=e.attributes;for(const _ in s){const b=s[_];this.setAttribute(_,b.clone(i))}const l=e.morphAttributes;for(const _ in l){const b=[],x=l[_];for(let C=0,I=x.length;C<I;C++)b.push(x[C].clone(i));this.morphAttributes[_]=b}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let _=0,b=u.length;_<b;_++){const x=u[_];this.addGroup(x.start,x.count,x.materialIndex)}const A=e.boundingBox;A!==null&&(this.boundingBox=A.clone());const g=e.boundingSphere;return g!==null&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const LK=new Ki,T1=new Gw,wD=new dc,PK=new Fe,xD=new Fe,CD=new Fe,ED=new Fe,c6=new Fe,SD=new Fe,OK=new Fe,BD=new Fe;class Dr extends xr{constructor(e=new Ln,i=new Pc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,r=Object.keys(i);if(r.length>0){const s=i[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=s.length;l<u;l++){const A=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=l}}}}getVertexPosition(e,i){const r=this.geometry,s=r.attributes.position,l=r.morphAttributes.position,u=r.morphTargetsRelative;i.fromBufferAttribute(s,e);const A=this.morphTargetInfluences;if(l&&A){SD.set(0,0,0);for(let g=0,_=l.length;g<_;g++){const b=A[g],x=l[g];b!==0&&(c6.fromBufferAttribute(x,e),u?SD.addScaledVector(c6,b):SD.addScaledVector(c6.sub(i),b))}i.add(SD)}return i}raycast(e,i){const r=this.geometry,s=this.material,l=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),wD.copy(r.boundingSphere),wD.applyMatrix4(l),T1.copy(e.ray).recast(e.near),!(wD.containsPoint(T1.origin)===!1&&(T1.intersectSphere(wD,PK)===null||T1.origin.distanceToSquared(PK)>(e.far-e.near)**2))&&(LK.copy(l).invert(),T1.copy(e.ray).applyMatrix4(LK),!(r.boundingBox!==null&&T1.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,i,T1)))}_computeIntersections(e,i,r){let s;const l=this.geometry,u=this.material,A=l.index,g=l.attributes.position,_=l.attributes.uv,b=l.attributes.uv1,x=l.attributes.normal,C=l.groups,I=l.drawRange;if(A!==null)if(Array.isArray(u))for(let F=0,L=C.length;F<L;F++){const U=C[F],P=u[U.materialIndex],H=Math.max(U.start,I.start),N=Math.min(A.count,Math.min(U.start+U.count,I.start+I.count));for(let z=H,W=N;z<W;z+=3){const j=A.getX(z),J=A.getX(z+1),ie=A.getX(z+2);s=ID(this,P,e,r,_,b,x,j,J,ie),s&&(s.faceIndex=Math.floor(z/3),s.face.materialIndex=U.materialIndex,i.push(s))}}else{const F=Math.max(0,I.start),L=Math.min(A.count,I.start+I.count);for(let U=F,P=L;U<P;U+=3){const H=A.getX(U),N=A.getX(U+1),z=A.getX(U+2);s=ID(this,u,e,r,_,b,x,H,N,z),s&&(s.faceIndex=Math.floor(U/3),i.push(s))}}else if(g!==void 0)if(Array.isArray(u))for(let F=0,L=C.length;F<L;F++){const U=C[F],P=u[U.materialIndex],H=Math.max(U.start,I.start),N=Math.min(g.count,Math.min(U.start+U.count,I.start+I.count));for(let z=H,W=N;z<W;z+=3){const j=z,J=z+1,ie=z+2;s=ID(this,P,e,r,_,b,x,j,J,ie),s&&(s.faceIndex=Math.floor(z/3),s.face.materialIndex=U.materialIndex,i.push(s))}}else{const F=Math.max(0,I.start),L=Math.min(g.count,I.start+I.count);for(let U=F,P=L;U<P;U+=3){const H=U,N=U+1,z=U+2;s=ID(this,u,e,r,_,b,x,H,N,z),s&&(s.faceIndex=Math.floor(U/3),i.push(s))}}}}function ibe(a,e,i,r,s,l,u,A){let g;if(e.side===mu?g=r.intersectTriangle(u,l,s,!0,A):g=r.intersectTriangle(s,l,u,e.side===If,A),g===null)return null;BD.copy(A),BD.applyMatrix4(a.matrixWorld);const _=i.ray.origin.distanceTo(BD);return _<i.near||_>i.far?null:{distance:_,point:BD.clone(),object:a}}function ID(a,e,i,r,s,l,u,A,g,_){a.getVertexPosition(A,xD),a.getVertexPosition(g,CD),a.getVertexPosition(_,ED);const b=ibe(a,e,i,r,xD,CD,ED,OK);if(b){const x=new Fe;zh.getBarycoord(OK,xD,CD,ED,x),s&&(b.uv=zh.getInterpolatedAttribute(s,A,g,_,x,new ci)),l&&(b.uv1=zh.getInterpolatedAttribute(l,A,g,_,x,new ci)),u&&(b.normal=zh.getInterpolatedAttribute(u,A,g,_,x,new Fe),b.normal.dot(r.direction)>0&&b.normal.multiplyScalar(-1));const C={a:A,b:g,c:_,normal:new Fe,materialIndex:0};zh.getNormal(xD,CD,ED,C.normal),b.face=C,b.barycoord=x}return b}class Og extends Ln{constructor(e=1,i=1,r=1,s=1,l=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:i,depth:r,widthSegments:s,heightSegments:l,depthSegments:u};const A=this;s=Math.floor(s),l=Math.floor(l),u=Math.floor(u);const g=[],_=[],b=[],x=[];let C=0,I=0;F("z","y","x",-1,-1,r,i,e,u,l,0),F("z","y","x",1,-1,r,i,-e,u,l,1),F("x","z","y",1,1,e,r,i,s,u,2),F("x","z","y",1,-1,e,r,-i,s,u,3),F("x","y","z",1,-1,e,i,r,s,l,4),F("x","y","z",-1,-1,e,i,-r,s,l,5),this.setIndex(g),this.setAttribute("position",new Ni(_,3)),this.setAttribute("normal",new Ni(b,3)),this.setAttribute("uv",new Ni(x,2));function F(L,U,P,H,N,z,W,j,J,ie,ee){const re=z/J,se=W/ie,ue=z/2,fe=W/2,pe=j/2,xe=J+1,ce=ie+1;let _e=0,ye=0;const Oe=new Fe;for(let ge=0;ge<ce;ge++){const Ee=ge*se-fe;for(let ke=0;ke<xe;ke++){const je=ke*re-ue;Oe[L]=je*H,Oe[U]=Ee*N,Oe[P]=pe,_.push(Oe.x,Oe.y,Oe.z),Oe[L]=0,Oe[U]=0,Oe[P]=j>0?1:-1,b.push(Oe.x,Oe.y,Oe.z),x.push(ke/J),x.push(1-ge/ie),_e+=1}}for(let ge=0;ge<ie;ge++)for(let Ee=0;Ee<J;Ee++){const ke=C+Ee+xe*ge,je=C+Ee+xe*(ge+1),Ie=C+(Ee+1)+xe*(ge+1),ze=C+(Ee+1)+xe*ge;g.push(ke,je,ze),g.push(je,Ie,ze),ye+=6}A.addGroup(I,ye,ee),I+=ye,C+=_e}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Og(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pS(a){const e={};for(const i in a){e[i]={};for(const r in a[i]){const s=a[i][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][r]=null):e[i][r]=s.clone():Array.isArray(s)?e[i][r]=s.slice():e[i][r]=s}}return e}function Ud(a){const e={};for(let i=0;i<a.length;i++){const r=pS(a[i]);for(const s in r)e[s]=r[s]}return e}function nbe(a){const e=[];for(let i=0;i<a.length;i++)e.push(a[i].clone());return e}function Sre(a){const e=a.getRenderTarget();return e===null?a.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:lr.workingColorSpace}const Wz={clone:pS,merge:Ud};var rbe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,sbe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class qh extends dl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rbe,this.fragmentShader=sbe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pS(e.uniforms),this.uniformsGroups=nbe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const i=super.toJSON(e);i.glslVersion=this.glslVersion,i.uniforms={};for(const s in this.uniforms){const u=this.uniforms[s].value;u&&u.isTexture?i.uniforms[s]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?i.uniforms[s]={type:"c",value:u.getHex()}:u&&u.isVector2?i.uniforms[s]={type:"v2",value:u.toArray()}:u&&u.isVector3?i.uniforms[s]={type:"v3",value:u.toArray()}:u&&u.isVector4?i.uniforms[s]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?i.uniforms[s]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?i.uniforms[s]={type:"m4",value:u.toArray()}:i.uniforms[s]={value:u}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(i.extensions=r),i}}class Kk extends xr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ki,this.projectionMatrix=new Ki,this.projectionMatrixInverse=new Ki,this.coordinateSystem=Mg}copy(e,i){return super.copy(e,i),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,i){super.updateWorldMatrix(e,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const wy=new Fe,QK=new ci,NK=new ci;class xo extends Kk{constructor(e=50,i=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const i=.5*this.getFilmHeight()/e;this.fov=dS*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(mw*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return dS*2*Math.atan(Math.tan(mw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,i,r){wy.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(wy.x,wy.y).multiplyScalar(-e/wy.z),wy.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(wy.x,wy.y).multiplyScalar(-e/wy.z)}getViewSize(e,i){return this.getViewBounds(e,QK,NK),i.subVectors(NK,QK)}setViewOffset(e,i,r,s,l,u){this.aspect=e/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=s,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let i=e*Math.tan(mw*.5*this.fov)/this.zoom,r=2*i,s=this.aspect*r,l=-.5*s;const u=this.view;if(this.view!==null&&this.view.enabled){const g=u.fullWidth,_=u.fullHeight;l+=u.offsetX*s/g,i-=u.offsetY*r/_,s*=u.width/g,r*=u.height/_}const A=this.filmOffset;A!==0&&(l+=e*A/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+s,i,i-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const sE=-90,oE=1;class tk extends xr{constructor(e,i,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new xo(sE,oE,e,i);s.layers=this.layers,this.add(s);const l=new xo(sE,oE,e,i);l.layers=this.layers,this.add(l);const u=new xo(sE,oE,e,i);u.layers=this.layers,this.add(u);const A=new xo(sE,oE,e,i);A.layers=this.layers,this.add(A);const g=new xo(sE,oE,e,i);g.layers=this.layers,this.add(g);const _=new xo(sE,oE,e,i);_.layers=this.layers,this.add(_)}updateCoordinateSystem(){const e=this.coordinateSystem,i=this.children.concat(),[r,s,l,u,A,g]=i;for(const _ of i)this.remove(_);if(e===Mg)r.up.set(0,1,0),r.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),A.up.set(0,1,0),A.lookAt(0,0,1),g.up.set(0,1,0),g.lookAt(0,0,-1);else if(e===ET)r.up.set(0,-1,0),r.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),A.up.set(0,-1,0),A.lookAt(0,0,1),g.up.set(0,-1,0),g.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const _ of i)this.add(_),_.updateMatrixWorld()}update(e,i){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[l,u,A,g,_,b]=this.children,x=e.getRenderTarget(),C=e.getActiveCubeFace(),I=e.getActiveMipmapLevel(),F=e.xr.enabled;e.xr.enabled=!1;const L=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,s),e.render(i,l),e.setRenderTarget(r,1,s),e.render(i,u),e.setRenderTarget(r,2,s),e.render(i,A),e.setRenderTarget(r,3,s),e.render(i,g),e.setRenderTarget(r,4,s),e.render(i,_),r.texture.generateMipmaps=L,e.setRenderTarget(r,5,s),e.render(i,b),e.setRenderTarget(x,C,I),e.xr.enabled=F,r.texture.needsPMREMUpdate=!0}}class eM extends Js{constructor(e,i,r,s,l,u,A,g,_,b){e=e!==void 0?e:[],i=i!==void 0?i:Gv,super(e,i,r,s,l,u,A,g,_,b),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Xk extends qd{constructor(e=1,i={}){super(e,e,i),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},s=[r,r,r,r,r,r];this.texture=new eM(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Or}fromEquirectangularTexture(e,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Og(5,5,5),l=new qh({name:"CubemapFromEquirect",uniforms:pS(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:mu,blending:Dg});l.uniforms.tEquirect.value=i;const u=new Dr(s,l),A=i.minFilter;return i.minFilter===Ju&&(i.minFilter=Or),new tk(1,10,this).update(e,u),i.minFilter=A,u.geometry.dispose(),u.material.dispose(),this}clear(e,i,r,s){const l=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(i,r,s);e.setRenderTarget(l)}}class Yk{constructor(e,i=25e-5){this.isFogExp2=!0,this.name="",this.color=new Si(e),this.density=i}clone(){return new Yk(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Jk{constructor(e,i=1,r=1e3){this.isFog=!0,this.name="",this.color=new Si(e),this.near=i,this.far=r}clone(){return new Jk(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Tf extends xr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new hl,this.environmentIntensity=1,this.environmentRotation=new hl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,i){return super.copy(e,i),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const i=super.toJSON(e);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}class tM{constructor(e,i){this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=e!==void 0?e.length/i:0,this.usage=CT,this.updateRanges=[],this.version=0,this.uuid=gp()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,i,r){e*=this.stride,r*=i.stride;for(let s=0,l=this.stride;s<l;s++)this.array[e+s]=i.array[r+s];return this}set(e,i=0){return this.array.set(e,i),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gp()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(i,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gp()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Rd=new Fe;class Wy{constructor(e,i,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let i=0,r=this.data.count;i<r;i++)Rd.fromBufferAttribute(this,i),Rd.applyMatrix4(e),this.setXYZ(i,Rd.x,Rd.y,Rd.z);return this}applyNormalMatrix(e){for(let i=0,r=this.count;i<r;i++)Rd.fromBufferAttribute(this,i),Rd.applyNormalMatrix(e),this.setXYZ(i,Rd.x,Rd.y,Rd.z);return this}transformDirection(e){for(let i=0,r=this.count;i<r;i++)Rd.fromBufferAttribute(this,i),Rd.transformDirection(e),this.setXYZ(i,Rd.x,Rd.y,Rd.z);return this}getComponent(e,i){let r=this.array[e*this.data.stride+this.offset+i];return this.normalized&&(r=zd(r,this.array)),r}setComponent(e,i,r){return this.normalized&&(r=Mr(r,this.array)),this.data.array[e*this.data.stride+this.offset+i]=r,this}setX(e,i){return this.normalized&&(i=Mr(i,this.array)),this.data.array[e*this.data.stride+this.offset]=i,this}setY(e,i){return this.normalized&&(i=Mr(i,this.array)),this.data.array[e*this.data.stride+this.offset+1]=i,this}setZ(e,i){return this.normalized&&(i=Mr(i,this.array)),this.data.array[e*this.data.stride+this.offset+2]=i,this}setW(e,i){return this.normalized&&(i=Mr(i,this.array)),this.data.array[e*this.data.stride+this.offset+3]=i,this}getX(e){let i=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(i=zd(i,this.array)),i}getY(e){let i=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(i=zd(i,this.array)),i}getZ(e){let i=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(i=zd(i,this.array)),i}getW(e){let i=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(i=zd(i,this.array)),i}setXY(e,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=r,this}setXYZ(e,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array),s=Mr(s,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,i,r,s,l){return e=e*this.data.stride+this.offset,this.normalized&&(i=Mr(i,this.array),r=Mr(r,this.array),s=Mr(s,this.array),l=Mr(l,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[s+l])}return new fr(new this.array.constructor(i),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Wy(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[s+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class jz extends dl{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Si(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let aE;const Y2=new Fe,lE=new Fe,cE=new Fe,uE=new ci,J2=new ci,Bre=new Ki,TD=new Fe,Z2=new Fe,MD=new Fe,HK=new ci,u6=new ci,zK=new ci;class Ire extends xr{constructor(e=new jz){if(super(),this.isSprite=!0,this.type="Sprite",aE===void 0){aE=new Ln;const i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new tM(i,5);aE.setIndex([0,1,2,0,2,3]),aE.setAttribute("position",new Wy(r,3,0,!1)),aE.setAttribute("uv",new Wy(r,2,3,!1))}this.geometry=aE,this.material=e,this.center=new ci(.5,.5)}raycast(e,i){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lE.setFromMatrixScale(this.matrixWorld),Bre.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cE.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&lE.multiplyScalar(-cE.z);const r=this.material.rotation;let s,l;r!==0&&(l=Math.cos(r),s=Math.sin(r));const u=this.center;RD(TD.set(-.5,-.5,0),cE,u,lE,s,l),RD(Z2.set(.5,-.5,0),cE,u,lE,s,l),RD(MD.set(.5,.5,0),cE,u,lE,s,l),HK.set(0,0),u6.set(1,0),zK.set(1,1);let A=e.ray.intersectTriangle(TD,Z2,MD,!1,Y2);if(A===null&&(RD(Z2.set(-.5,.5,0),cE,u,lE,s,l),u6.set(0,1),A=e.ray.intersectTriangle(TD,MD,Z2,!1,Y2),A===null))return;const g=e.ray.origin.distanceTo(Y2);g<e.near||g>e.far||i.push({distance:g,point:Y2.clone(),uv:zh.getInterpolation(Y2,TD,Z2,MD,HK,u6,zK,new ci),face:null,object:this})}copy(e,i){return super.copy(e,i),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function RD(a,e,i,r,s,l){uE.subVectors(a,i).addScalar(.5).multiply(r),s!==void 0?(J2.x=l*uE.x-s*uE.y,J2.y=s*uE.x+l*uE.y):J2.copy(uE),a.copy(e),a.x+=J2.x,a.y+=J2.y,a.applyMatrix4(Bre)}const DD=new Fe,GK=new Fe;class Tre extends xr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const i=e.levels;for(let r=0,s=i.length;r<s;r++){const l=i[r];this.addLevel(l.object.clone(),l.distance,l.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,i=0,r=0){i=Math.abs(i);const s=this.levels;let l;for(l=0;l<s.length&&!(i<s[l].distance);l++);return s.splice(l,0,{distance:i,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const i=this.levels;for(let r=0;r<i.length;r++)if(i[r].distance===e){const s=i.splice(r,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const i=this.levels;if(i.length>0){let r,s;for(r=1,s=i.length;r<s;r++){let l=i[r].distance;if(i[r].object.visible&&(l-=l*i[r].hysteresis),e<l)break}return i[r-1].object}return null}raycast(e,i){if(this.levels.length>0){DD.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(DD);this.getObjectForDistance(s).raycast(e,i)}}update(e){const i=this.levels;if(i.length>1){DD.setFromMatrixPosition(e.matrixWorld),GK.setFromMatrixPosition(this.matrixWorld);const r=DD.distanceTo(GK)/e.zoom;i[0].object.visible=!0;let s,l;for(s=1,l=i.length;s<l;s++){let u=i[s].distance;if(i[s].object.visible&&(u-=u*i[s].hysteresis),r>=u)i[s-1].object.visible=!1,i[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<l;s++)i[s].object.visible=!1}}toJSON(e){const i=super.toJSON(e);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];const r=this.levels;for(let s=0,l=r.length;s<l;s++){const u=r[s];i.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return i}}const VK=new Fe,qK=new Vr,$K=new Vr,obe=new Fe,WK=new Ki,FD=new Fe,h6=new dc,jK=new Ki,d6=new Gw;class Zk extends Dr{constructor(e,i){super(e,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=sH,this.bindMatrix=new Ki,this.bindMatrixInverse=new Ki,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ia),this.boundingBox.makeEmpty();const i=e.getAttribute("position");for(let r=0;r<i.count;r++)this.getVertexPosition(r,FD),this.boundingBox.expandByPoint(FD)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new dc),this.boundingSphere.makeEmpty();const i=e.getAttribute("position");for(let r=0;r<i.count;r++)this.getVertexPosition(r,FD),this.boundingSphere.expandByPoint(FD)}copy(e,i){return super.copy(e,i),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,i){const r=this.material,s=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),h6.copy(this.boundingSphere),h6.applyMatrix4(s),e.ray.intersectsSphere(h6)!==!1&&(jK.copy(s).invert(),d6.copy(e.ray).applyMatrix4(jK),!(this.boundingBox!==null&&d6.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,i,d6)))}getVertexPosition(e,i){return super.getVertexPosition(e,i),this.applyBoneTransform(e,i),i}bind(e,i){this.skeleton=e,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vr,i=this.geometry.attributes.skinWeight;for(let r=0,s=i.count;r<s;r++){e.fromBufferAttribute(i,r);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),i.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===sH?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===hre?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,i){const r=this.skeleton,s=this.geometry;qK.fromBufferAttribute(s.attributes.skinIndex,e),$K.fromBufferAttribute(s.attributes.skinWeight,e),VK.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let l=0;l<4;l++){const u=$K.getComponent(l);if(u!==0){const A=qK.getComponent(l);WK.multiplyMatrices(r.bones[A].matrixWorld,r.boneInverses[A]),i.addScaledVector(obe.copy(VK).applyMatrix4(WK),u)}}return i.applyMatrix4(this.bindMatrixInverse)}}class fS extends xr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Cf extends Js{constructor(e=null,i=1,r=1,s,l,u,A,g,_=Da,b=Da,x,C){super(null,u,A,g,_,b,s,l,x,C),this.isDataTexture=!0,this.image={data:e,width:i,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const KK=new Ki,abe=new Ki;class MS{constructor(e=[],i=[]){this.uuid=gp(),this.bones=e.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),i.length===0)this.calculateInverses();else if(e.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new Ki)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,i=this.bones.length;e<i;e++){const r=new Ki;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,i=this.bones.length;e<i;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,i=this.bones.length;e<i;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,i=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let l=0,u=e.length;l<u;l++){const A=e[l]?e[l].matrixWorld:abe;KK.multiplyMatrices(A,i[l]),KK.toArray(r,l*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new MS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const i=new Float32Array(e*e*4);i.set(this.boneMatrices);const r=new Cf(i,e,e,lo,ra);return r.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=r,this}getBoneByName(e){for(let i=0,r=this.bones.length;i<r;i++){const s=this.bones[i];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,i){this.uuid=e.uuid;for(let r=0,s=e.bones.length;r<s;r++){const l=e.bones[r];let u=i[l];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),u=new fS),this.bones.push(u),this.boneInverses.push(new Ki().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const i=this.bones,r=this.boneInverses;for(let s=0,l=i.length;s<l;s++){const u=i[s];e.bones.push(u.uuid);const A=r[s];e.boneInverses.push(A.toArray())}return e}}class jy extends fr{constructor(e,i,r,s=1){super(e,i,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const hE=new Ki,XK=new Ki,UD=[],YK=new ia,lbe=new Ki,eI=new Dr,tI=new dc;class Kz extends Dr{constructor(e,i,r){super(e,i),this.isInstancedMesh=!0,this.instanceMatrix=new jy(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<r;s++)this.setMatrixAt(s,lbe)}computeBoundingBox(){const e=this.geometry,i=this.count;this.boundingBox===null&&(this.boundingBox=new ia),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<i;r++)this.getMatrixAt(r,hE),YK.copy(e.boundingBox).applyMatrix4(hE),this.boundingBox.union(YK)}computeBoundingSphere(){const e=this.geometry,i=this.count;this.boundingSphere===null&&(this.boundingSphere=new dc),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<i;r++)this.getMatrixAt(r,hE),tI.copy(e.boundingSphere).applyMatrix4(hE),this.boundingSphere.union(tI)}copy(e,i){return super.copy(e,i),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,i){i.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,i){i.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,i){const r=i.morphTargetInfluences,s=this.morphTexture.source.data.data,l=r.length+1,u=e*l+1;for(let A=0;A<r.length;A++)r[A]=s[u+A]}raycast(e,i){const r=this.matrixWorld,s=this.count;if(eI.geometry=this.geometry,eI.material=this.material,eI.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),tI.copy(this.boundingSphere),tI.applyMatrix4(r),e.ray.intersectsSphere(tI)!==!1))for(let l=0;l<s;l++){this.getMatrixAt(l,hE),XK.multiplyMatrices(r,hE),eI.matrixWorld=XK,eI.raycast(e,UD);for(let u=0,A=UD.length;u<A;u++){const g=UD[u];g.instanceId=l,g.object=this,i.push(g)}UD.length=0}}setColorAt(e,i){this.instanceColor===null&&(this.instanceColor=new jy(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),i.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,i){i.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,i){const r=i.morphTargetInfluences,s=r.length+1;this.morphTexture===null&&(this.morphTexture=new Cf(new Float32Array(s*this.count),s,this.count,Fv,ra));const l=this.morphTexture.source.data.data;let u=0;for(let _=0;_<r.length;_++)u+=r[_];const A=this.geometry.morphTargetsRelative?1:1-u,g=s*e;l[g]=A,l.set(r,g+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const A6=new Fe,cbe=new Fe,ube=new nr;class Iv{constructor(e=new Fe(1,0,0),i=0){this.isPlane=!0,this.normal=e,this.constant=i}set(e,i){return this.normal.copy(e),this.constant=i,this}setComponents(e,i,r,s){return this.normal.set(e,i,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,i){return this.normal.copy(e),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(e,i,r){const s=A6.subVectors(r,i).cross(cbe.subVectors(e,i)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,i){return i.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,i){const r=e.delta(A6),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/s;return l<0||l>1?null:i.copy(e.start).addScaledVector(r,l)}intersectsLine(e){const i=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return i<0&&r>0||r<0&&i>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,i){const r=i||ube.getNormalMatrix(e),s=this.coplanarPoint(A6).applyMatrix4(e),l=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const M1=new dc,kD=new Fe;class iM{constructor(e=new Iv,i=new Iv,r=new Iv,s=new Iv,l=new Iv,u=new Iv){this.planes=[e,i,r,s,l,u]}set(e,i,r,s,l,u){const A=this.planes;return A[0].copy(e),A[1].copy(i),A[2].copy(r),A[3].copy(s),A[4].copy(l),A[5].copy(u),this}copy(e){const i=this.planes;for(let r=0;r<6;r++)i[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,i=Mg){const r=this.planes,s=e.elements,l=s[0],u=s[1],A=s[2],g=s[3],_=s[4],b=s[5],x=s[6],C=s[7],I=s[8],F=s[9],L=s[10],U=s[11],P=s[12],H=s[13],N=s[14],z=s[15];if(r[0].setComponents(g-l,C-_,U-I,z-P).normalize(),r[1].setComponents(g+l,C+_,U+I,z+P).normalize(),r[2].setComponents(g+u,C+b,U+F,z+H).normalize(),r[3].setComponents(g-u,C-b,U-F,z-H).normalize(),r[4].setComponents(g-A,C-x,U-L,z-N).normalize(),i===Mg)r[5].setComponents(g+A,C+x,U+L,z+N).normalize();else if(i===ET)r[5].setComponents(A,x,L,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),M1.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const i=e.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),M1.copy(i.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(M1)}intersectsSprite(e){return M1.center.set(0,0,0),M1.radius=.7071067811865476,M1.applyMatrix4(e.matrixWorld),this.intersectsSphere(M1)}intersectsSphere(e){const i=this.planes,r=e.center,s=-e.radius;for(let l=0;l<6;l++)if(i[l].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const i=this.planes;for(let r=0;r<6;r++){const s=i[r];if(kD.x=s.normal.x>0?e.max.x:e.min.x,kD.y=s.normal.y>0?e.max.y:e.min.y,kD.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(kD)<0)return!1}return!0}containsPoint(e){const i=this.planes;for(let r=0;r<6;r++)if(i[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function p6(a,e){return a-e}function hbe(a,e){return a.z-e.z}function dbe(a,e){return e.z-a.z}class Abe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,i,r,s){const l=this.pool,u=this.list;this.index>=l.length&&l.push({start:-1,count:-1,z:-1,index:-1});const A=l[this.index];u.push(A),this.index++,A.start=e,A.count=i,A.z=r,A.index=s}reset(){this.list.length=0,this.index=0}}const CA=new Ki,pbe=new Si(1,1,1),f6=new iM,LD=new ia,R1=new dc,iI=new Fe,JK=new Fe,fbe=new Fe,g6=new Abe,Qh=new Dr,PD=[];function gbe(a,e,i=0){const r=e.itemSize;if(a.isInterleavedBufferAttribute||a.array.constructor!==e.array.constructor){const s=a.count;for(let l=0;l<s;l++)for(let u=0;u<r;u++)e.setComponent(l+i,u,a.getComponent(l,u))}else e.array.set(a.array,i*r);e.needsUpdate=!0}function D1(a,e){if(a.constructor!==e.constructor){const i=Math.min(a.length,e.length);for(let r=0;r<i;r++)e[r]=a[r]}else{const i=Math.min(a.length,e.length);e.set(new a.constructor(a.buffer,0,i))}}class Mre extends Dr{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,i,r=i*2,s){super(new Ln,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=i,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const i=new Float32Array(e*e*4),r=new Cf(i,e,e,lo,ra);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const i=new Uint32Array(e*e),r=new Cf(i,e,e,YT,jm);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const i=new Float32Array(e*e*4).fill(1),r=new Cf(i,e,e,lo,ra);r.colorSpace=lr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const i=this.geometry,r=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in e.attributes){const u=e.getAttribute(l),{array:A,itemSize:g,normalized:_}=u,b=new A.constructor(r*g),x=new fr(b,g,_);i.setAttribute(l,x)}if(e.getIndex()!==null){const l=r>65535?new Uint32Array(s):new Uint16Array(s);i.setIndex(new fr(l,1))}this._geometryInitialized=!0}}_validateGeometry(e){const i=this.geometry;if(!!e.getIndex()!=!!i.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in i.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=e.getAttribute(r),l=i.getAttribute(r);if(s.itemSize!==l.itemSize||s.normalized!==l.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const i=this._instanceInfo;if(e<0||e>=i.length||i[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const i=this._geometryInfo;if(e<0||e>=i.length||i[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ia);const e=this.boundingBox,i=this._instanceInfo;e.makeEmpty();for(let r=0,s=i.length;r<s;r++){if(i[r].active===!1)continue;const l=i[r].geometryIndex;this.getMatrixAt(r,CA),this.getBoundingBoxAt(l,LD).applyMatrix4(CA),e.union(LD)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dc);const e=this.boundingSphere,i=this._instanceInfo;e.makeEmpty();for(let r=0,s=i.length;r<s;r++){if(i[r].active===!1)continue;const l=i[r].geometryIndex;this.getMatrixAt(r,CA),this.getBoundingSphereAt(l,R1).applyMatrix4(CA),e.union(R1)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(p6),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=r):(s=this._instanceInfo.length,this._instanceInfo.push(r));const l=this._matricesTexture;CA.identity().toArray(l.image.data,s*16),l.needsUpdate=!0;const u=this._colorsTexture;return u&&(pbe.toArray(u.image.data,s*4),u.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,i=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},l=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=i===-1?e.getAttribute("position").count:i;const u=e.getIndex();if(u!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=r===-1?u.count:r),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let g;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(p6),g=this._availableGeometryIds.shift(),l[g]=s):(g=this._geometryCount,this._geometryCount++,l.push(s)),this.setGeometryAt(g,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,g}setGeometryAt(e,i){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(i);const r=this.geometry,s=r.getIndex()!==null,l=r.getIndex(),u=i.getIndex(),A=this._geometryInfo[e];if(s&&u.count>A.reservedIndexCount||i.attributes.position.count>A.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const g=A.vertexStart,_=A.reservedVertexCount;A.vertexCount=i.getAttribute("position").count;for(const b in r.attributes){const x=i.getAttribute(b),C=r.getAttribute(b);gbe(x,C,g);const I=x.itemSize;for(let F=x.count,L=_;F<L;F++){const U=g+F;for(let P=0;P<I;P++)C.setComponent(U,P,0)}C.needsUpdate=!0,C.addUpdateRange(g*I,_*I)}if(s){const b=A.indexStart,x=A.reservedIndexCount;A.indexCount=i.getIndex().count;for(let C=0;C<u.count;C++)l.setX(b+C,g+u.getX(C));for(let C=u.count,I=x;C<I;C++)l.setX(b+C,g);l.needsUpdate=!0,l.addUpdateRange(b,A.reservedIndexCount)}return A.start=s?A.indexStart:A.vertexStart,A.count=s?A.indexCount:A.vertexCount,A.boundingBox=null,i.boundingBox!==null&&(A.boundingBox=i.boundingBox.clone()),A.boundingSphere=null,i.boundingSphere!==null&&(A.boundingSphere=i.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const i=this._geometryInfo;if(e>=i.length||i[e].active===!1)return this;const r=this._instanceInfo;for(let s=0,l=r.length;s<l;s++)r[s].geometryIndex===e&&this.deleteInstance(s);return i[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,i=0;const r=this._geometryInfo,s=r.map((u,A)=>A).sort((u,A)=>r[u].vertexStart-r[A].vertexStart),l=this.geometry;for(let u=0,A=r.length;u<A;u++){const g=s[u],_=r[g];if(_.active!==!1){if(l.index!==null){if(_.indexStart!==i){const{indexStart:b,vertexStart:x,reservedIndexCount:C}=_,I=l.index,F=I.array,L=e-x;for(let U=b;U<b+C;U++)F[U]=F[U]+L;I.array.copyWithin(i,b,b+C),I.addUpdateRange(i,C),_.indexStart=i}i+=_.reservedIndexCount}if(_.vertexStart!==e){const{vertexStart:b,reservedVertexCount:x}=_,C=l.attributes;for(const I in C){const F=C[I],{array:L,itemSize:U}=F;L.copyWithin(e*U,b*U,(b+x)*U),F.addUpdateRange(e*U,x*U)}_.vertexStart=e}e+=_.reservedVertexCount,_.start=l.index?_.indexStart:_.vertexStart,this._nextIndexStart=l.index?_.indexStart+_.reservedIndexCount:0,this._nextVertexStart=_.vertexStart+_.reservedVertexCount}}return this}getBoundingBoxAt(e,i){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const l=new ia,u=r.index,A=r.attributes.position;for(let g=s.start,_=s.start+s.count;g<_;g++){let b=g;u&&(b=u.getX(b)),l.expandByPoint(iI.fromBufferAttribute(A,b))}s.boundingBox=l}return i.copy(s.boundingBox),i}getBoundingSphereAt(e,i){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const l=new dc;this.getBoundingBoxAt(e,LD),LD.getCenter(l.center);const u=r.index,A=r.attributes.position;let g=0;for(let _=s.start,b=s.start+s.count;_<b;_++){let x=_;u&&(x=u.getX(x)),iI.fromBufferAttribute(A,x),g=Math.max(g,l.center.distanceToSquared(iI))}l.radius=Math.sqrt(g),s.boundingSphere=l}return i.copy(s.boundingSphere),i}setMatrixAt(e,i){this.validateInstanceId(e);const r=this._matricesTexture,s=this._matricesTexture.image.data;return i.toArray(s,e*16),r.needsUpdate=!0,this}getMatrixAt(e,i){return this.validateInstanceId(e),i.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,i){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),i.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,i){return this.validateInstanceId(e),i.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,i){return this.validateInstanceId(e),this._instanceInfo[e].visible===i?this:(this._instanceInfo[e].visible=i,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,i){return this.validateInstanceId(e),this.validateGeometryId(i),this._instanceInfo[e].geometryIndex=i,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,i={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return i.vertexStart=r.vertexStart,i.vertexCount=r.vertexCount,i.reservedVertexCount=r.reservedVertexCount,i.indexStart=r.indexStart,i.indexCount=r.indexCount,i.reservedIndexCount=r.reservedIndexCount,i.start=r.start,i.count=r.count,i}setInstanceCount(e){const i=this._availableInstanceIds,r=this._instanceInfo;for(i.sort(p6);i[i.length-1]===r.length;)r.pop(),i.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),l=new Int32Array(e);D1(this._multiDrawCounts,s),D1(this._multiDrawStarts,l),this._multiDrawCounts=s,this._multiDrawStarts=l,this._maxInstanceCount=e;const u=this._indirectTexture,A=this._matricesTexture,g=this._colorsTexture;u.dispose(),this._initIndirectTexture(),D1(u.image.data,this._indirectTexture.image.data),A.dispose(),this._initMatricesTexture(),D1(A.image.data,this._matricesTexture.image.data),g&&(g.dispose(),this._initColorsTexture(),D1(g.image.data,this._colorsTexture.image.data))}setGeometrySize(e,i){const r=[...this._geometryInfo].filter(A=>A.active);if(Math.max(...r.map(A=>A.vertexStart+A.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${i}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(g=>g.indexStart+g.reservedIndexCount))>i)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${i}. Cannot shrink further.`);const l=this.geometry;l.dispose(),this._maxVertexCount=e,this._maxIndexCount=i,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ln,this._initializeGeometry(l));const u=this.geometry;l.index&&D1(l.index.array,u.index.array);for(const A in l.attributes)D1(l.attributes[A].array,u.attributes[A].array)}raycast(e,i){const r=this._instanceInfo,s=this._geometryInfo,l=this.matrixWorld,u=this.geometry;Qh.material=this.material,Qh.geometry.index=u.index,Qh.geometry.attributes=u.attributes,Qh.geometry.boundingBox===null&&(Qh.geometry.boundingBox=new ia),Qh.geometry.boundingSphere===null&&(Qh.geometry.boundingSphere=new dc);for(let A=0,g=r.length;A<g;A++){if(!r[A].visible||!r[A].active)continue;const _=r[A].geometryIndex,b=s[_];Qh.geometry.setDrawRange(b.start,b.count),this.getMatrixAt(A,Qh.matrixWorld).premultiply(l),this.getBoundingBoxAt(_,Qh.geometry.boundingBox),this.getBoundingSphereAt(_,Qh.geometry.boundingSphere),Qh.raycast(e,PD);for(let x=0,C=PD.length;x<C;x++){const I=PD[x];I.object=this,I.batchId=A,i.push(I)}PD.length=0}Qh.material=null,Qh.geometry.index=null,Qh.geometry.attributes={},Qh.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(i=>({...i,boundingBox:i.boundingBox!==null?i.boundingBox.clone():null,boundingSphere:i.boundingSphere!==null?i.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(i=>({...i})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,i,r,s,l){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=s.getIndex(),A=u===null?1:u.array.BYTES_PER_ELEMENT,g=this._instanceInfo,_=this._multiDrawStarts,b=this._multiDrawCounts,x=this._geometryInfo,C=this.perObjectFrustumCulled,I=this._indirectTexture,F=I.image.data;C&&(CA.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),f6.setFromProjectionMatrix(CA,e.coordinateSystem));let L=0;if(this.sortObjects){CA.copy(this.matrixWorld).invert(),iI.setFromMatrixPosition(r.matrixWorld).applyMatrix4(CA),JK.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(CA);for(let H=0,N=g.length;H<N;H++)if(g[H].visible&&g[H].active){const z=g[H].geometryIndex;this.getMatrixAt(H,CA),this.getBoundingSphereAt(z,R1).applyMatrix4(CA);let W=!1;if(C&&(W=!f6.intersectsSphere(R1)),!W){const j=x[z],J=fbe.subVectors(R1.center,iI).dot(JK);g6.push(j.start,j.count,J,H)}}const U=g6.list,P=this.customSort;P===null?U.sort(l.transparent?dbe:hbe):P.call(this,U,r);for(let H=0,N=U.length;H<N;H++){const z=U[H];_[L]=z.start*A,b[L]=z.count,F[L]=z.index,L++}g6.reset()}else for(let U=0,P=g.length;U<P;U++)if(g[U].visible&&g[U].active){const H=g[U].geometryIndex;let N=!1;if(C&&(this.getMatrixAt(U,CA),this.getBoundingSphereAt(H,R1).applyMatrix4(CA),N=!f6.intersectsSphere(R1)),!N){const z=x[H];_[L]=z.start*A,b[L]=z.count,F[L]=U,L++}}I.needsUpdate=!0,this._multiDrawCount=L,this._visibilityChanged=!1}onBeforeShadow(e,i,r,s,l,u){this.onBeforeRender(e,null,s,l,u)}}class Ac extends dl{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Si(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ik=new Fe,nk=new Fe,ZK=new Ki,nI=new Gw,OD=new dc,m6=new Fe,eX=new Fe;class Mf extends xr{constructor(e=new Ln,i=new Ac){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const i=e.attributes.position,r=[0];for(let s=1,l=i.count;s<l;s++)ik.fromBufferAttribute(i,s-1),nk.fromBufferAttribute(i,s),r[s]=r[s-1],r[s]+=ik.distanceTo(nk);e.setAttribute("lineDistance",new Ni(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,i){const r=this.geometry,s=this.matrixWorld,l=e.params.Line.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),OD.copy(r.boundingSphere),OD.applyMatrix4(s),OD.radius+=l,e.ray.intersectsSphere(OD)===!1)return;ZK.copy(s).invert(),nI.copy(e.ray).applyMatrix4(ZK);const A=l/((this.scale.x+this.scale.y+this.scale.z)/3),g=A*A,_=this.isLineSegments?2:1,b=r.index,C=r.attributes.position;if(b!==null){const I=Math.max(0,u.start),F=Math.min(b.count,u.start+u.count);for(let L=I,U=F-1;L<U;L+=_){const P=b.getX(L),H=b.getX(L+1),N=QD(this,e,nI,g,P,H);N&&i.push(N)}if(this.isLineLoop){const L=b.getX(F-1),U=b.getX(I),P=QD(this,e,nI,g,L,U);P&&i.push(P)}}else{const I=Math.max(0,u.start),F=Math.min(C.count,u.start+u.count);for(let L=I,U=F-1;L<U;L+=_){const P=QD(this,e,nI,g,L,L+1);P&&i.push(P)}if(this.isLineLoop){const L=QD(this,e,nI,g,F-1,I);L&&i.push(L)}}}updateMorphTargets(){const i=this.geometry.morphAttributes,r=Object.keys(i);if(r.length>0){const s=i[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=s.length;l<u;l++){const A=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=l}}}}}function QD(a,e,i,r,s,l){const u=a.geometry.attributes.position;if(ik.fromBufferAttribute(u,s),nk.fromBufferAttribute(u,l),i.distanceSqToSegment(ik,nk,m6,eX)>r)return;m6.applyMatrix4(a.matrixWorld);const g=e.ray.origin.distanceTo(m6);if(!(g<e.near||g>e.far))return{distance:g,point:eX.clone().applyMatrix4(a.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:a}}const tX=new Fe,iX=new Fe;class mp extends Mf{constructor(e,i){super(e,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const i=e.attributes.position,r=[];for(let s=0,l=i.count;s<l;s+=2)tX.fromBufferAttribute(i,s),iX.fromBufferAttribute(i,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+tX.distanceTo(iX);e.setAttribute("lineDistance",new Ni(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Xz extends Mf{constructor(e,i){super(e,i),this.isLineLoop=!0,this.type="LineLoop"}}class Ny extends dl{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Si(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const nX=new Ki,cH=new Gw,ND=new dc,HD=new Fe;class iS extends xr{constructor(e=new Ln,i=new Ny){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,i){const r=this.geometry,s=this.matrixWorld,l=e.params.Points.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ND.copy(r.boundingSphere),ND.applyMatrix4(s),ND.radius+=l,e.ray.intersectsSphere(ND)===!1)return;nX.copy(s).invert(),cH.copy(e.ray).applyMatrix4(nX);const A=l/((this.scale.x+this.scale.y+this.scale.z)/3),g=A*A,_=r.index,x=r.attributes.position;if(_!==null){const C=Math.max(0,u.start),I=Math.min(_.count,u.start+u.count);for(let F=C,L=I;F<L;F++){const U=_.getX(F);HD.fromBufferAttribute(x,U),rX(HD,U,g,s,e,i,this)}}else{const C=Math.max(0,u.start),I=Math.min(x.count,u.start+u.count);for(let F=C,L=I;F<L;F++)HD.fromBufferAttribute(x,F),rX(HD,F,g,s,e,i,this)}}updateMorphTargets(){const i=this.geometry.morphAttributes,r=Object.keys(i);if(r.length>0){const s=i[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=s.length;l<u;l++){const A=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=l}}}}}function rX(a,e,i,r,s,l,u){const A=cH.distanceSqToPoint(a);if(A<i){const g=new Fe;cH.closestPointToPoint(a,g),g.applyMatrix4(r);const _=s.ray.origin.distanceTo(g);if(_<s.near||_>s.far)return;l.push({distance:_,distanceToRay:Math.sqrt(A),point:g,index:e,face:null,faceIndex:null,barycoord:null,object:u})}}class Ap extends xr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Rre extends Js{constructor(e,i,r,s,l,u,A,g,_){super(e,i,r,s,l,u,A,g,_),this.isVideoTexture=!0,this.minFilter=u!==void 0?u:Or,this.magFilter=l!==void 0?l:Or,this.generateMipmaps=!1;const b=this;function x(){b.needsUpdate=!0,e.requestVideoFrameCallback(x)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(x)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class mbe extends Js{constructor(e,i){super({width:e,height:i}),this.isFramebufferTexture=!0,this.magFilter=Da,this.minFilter=Da,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ov extends Js{constructor(e,i,r,s,l,u,A,g,_,b,x,C){super(null,u,A,g,_,b,s,l,x,C),this.isCompressedTexture=!0,this.image={width:i,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Dre extends Ov{constructor(e,i,r,s,l,u){super(e,i,r,l,u),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=$o,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Fre extends Ov{constructor(e,i,r){super(void 0,e[0].width,e[0].height,i,r,Gv),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Ure extends Js{constructor(e,i,r,s,l,u,A,g,_){super(e,i,r,s,l,u,A,g,_),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Yz extends Js{constructor(e,i,r,s,l,u,A,g,_,b=fw){if(b!==fw&&b!==Tw)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&b===fw&&(r=jm),r===void 0&&b===Tw&&(r=Iw),super(null,s,l,u,A,g,b,r,_),this.isDepthTexture=!0,this.image={width:e,height:i},this.magFilter=A!==void 0?A:Da,this.minFilter=g!==void 0?g:Da,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const i=super.toJSON(e);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}class Df{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,i){const r=this.getUtoTmapping(e);return this.getPoint(r,i)}getPoints(e=5){const i=[];for(let r=0;r<=e;r++)i.push(this.getPoint(r/e));return i}getSpacedPoints(e=5){const i=[];for(let r=0;r<=e;r++)i.push(this.getPointAt(r/e));return i}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const i=[];let r,s=this.getPoint(0),l=0;i.push(0);for(let u=1;u<=e;u++)r=this.getPoint(u/e),l+=r.distanceTo(s),i.push(l),s=r;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,i){const r=this.getLengths();let s=0;const l=r.length;let u;i?u=i:u=e*r[l-1];let A=0,g=l-1,_;for(;A<=g;)if(s=Math.floor(A+(g-A)/2),_=r[s]-u,_<0)A=s+1;else if(_>0)g=s-1;else{g=s;break}if(s=g,r[s]===u)return s/(l-1);const b=r[s],C=r[s+1]-b,I=(u-b)/C;return(s+I)/(l-1)}getTangent(e,i){let s=e-1e-4,l=e+1e-4;s<0&&(s=0),l>1&&(l=1);const u=this.getPoint(s),A=this.getPoint(l),g=i||(u.isVector2?new ci:new Fe);return g.copy(A).sub(u).normalize(),g}getTangentAt(e,i){const r=this.getUtoTmapping(e);return this.getTangent(r,i)}computeFrenetFrames(e,i){const r=new Fe,s=[],l=[],u=[],A=new Fe,g=new Ki;for(let I=0;I<=e;I++){const F=I/e;s[I]=this.getTangentAt(F,new Fe)}l[0]=new Fe,u[0]=new Fe;let _=Number.MAX_VALUE;const b=Math.abs(s[0].x),x=Math.abs(s[0].y),C=Math.abs(s[0].z);b<=_&&(_=b,r.set(1,0,0)),x<=_&&(_=x,r.set(0,1,0)),C<=_&&r.set(0,0,1),A.crossVectors(s[0],r).normalize(),l[0].crossVectors(s[0],A),u[0].crossVectors(s[0],l[0]);for(let I=1;I<=e;I++){if(l[I]=l[I-1].clone(),u[I]=u[I-1].clone(),A.crossVectors(s[I-1],s[I]),A.length()>Number.EPSILON){A.normalize();const F=Math.acos(pr(s[I-1].dot(s[I]),-1,1));l[I].applyMatrix4(g.makeRotationAxis(A,F))}u[I].crossVectors(s[I],l[I])}if(i===!0){let I=Math.acos(pr(l[0].dot(l[e]),-1,1));I/=e,s[0].dot(A.crossVectors(l[0],l[e]))>0&&(I=-I);for(let F=1;F<=e;F++)l[F].applyMatrix4(g.makeRotationAxis(s[F],I*F)),u[F].crossVectors(s[F],l[F])}return{tangents:s,normals:l,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class eL extends Df{constructor(e=0,i=0,r=1,s=1,l=0,u=Math.PI*2,A=!1,g=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=i,this.xRadius=r,this.yRadius=s,this.aStartAngle=l,this.aEndAngle=u,this.aClockwise=A,this.aRotation=g}getPoint(e,i=new ci){const r=i,s=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const u=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=s;for(;l>s;)l-=s;l<Number.EPSILON&&(u?l=0:l=s),this.aClockwise===!0&&!u&&(l===s?l=-s:l=l-s);const A=this.aStartAngle+e*l;let g=this.aX+this.xRadius*Math.cos(A),_=this.aY+this.yRadius*Math.sin(A);if(this.aRotation!==0){const b=Math.cos(this.aRotation),x=Math.sin(this.aRotation),C=g-this.aX,I=_-this.aY;g=C*b-I*x+this.aX,_=C*x+I*b+this.aY}return r.set(g,_)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class kre extends eL{constructor(e,i,r,s,l,u){super(e,i,r,r,s,l,u),this.isArcCurve=!0,this.type="ArcCurve"}}function Jz(){let a=0,e=0,i=0,r=0;function s(l,u,A,g){a=l,e=A,i=-3*l+3*u-2*A-g,r=2*l-2*u+A+g}return{initCatmullRom:function(l,u,A,g,_){s(u,A,_*(A-l),_*(g-u))},initNonuniformCatmullRom:function(l,u,A,g,_,b,x){let C=(u-l)/_-(A-l)/(_+b)+(A-u)/b,I=(A-u)/b-(g-u)/(b+x)+(g-A)/x;C*=b,I*=b,s(u,A,C,I)},calc:function(l){const u=l*l,A=u*l;return a+e*l+i*u+r*A}}}const zD=new Fe,_6=new Jz,v6=new Jz,y6=new Jz;class Lre extends Df{constructor(e=[],i=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=i,this.curveType=r,this.tension=s}getPoint(e,i=new Fe){const r=i,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e;let A=Math.floor(u),g=u-A;this.closed?A+=A>0?0:(Math.floor(Math.abs(A)/l)+1)*l:g===0&&A===l-1&&(A=l-2,g=1);let _,b;this.closed||A>0?_=s[(A-1)%l]:(zD.subVectors(s[0],s[1]).add(s[0]),_=zD);const x=s[A%l],C=s[(A+1)%l];if(this.closed||A+2<l?b=s[(A+2)%l]:(zD.subVectors(s[l-1],s[l-2]).add(s[l-1]),b=zD),this.curveType==="centripetal"||this.curveType==="chordal"){const I=this.curveType==="chordal"?.5:.25;let F=Math.pow(_.distanceToSquared(x),I),L=Math.pow(x.distanceToSquared(C),I),U=Math.pow(C.distanceToSquared(b),I);L<1e-4&&(L=1),F<1e-4&&(F=L),U<1e-4&&(U=L),_6.initNonuniformCatmullRom(_.x,x.x,C.x,b.x,F,L,U),v6.initNonuniformCatmullRom(_.y,x.y,C.y,b.y,F,L,U),y6.initNonuniformCatmullRom(_.z,x.z,C.z,b.z,F,L,U)}else this.curveType==="catmullrom"&&(_6.initCatmullRom(_.x,x.x,C.x,b.x,this.tension),v6.initCatmullRom(_.y,x.y,C.y,b.y,this.tension),y6.initCatmullRom(_.z,x.z,C.z,b.z,this.tension));return r.set(_6.calc(g),v6.calc(g),y6.calc(g)),r}copy(e){super.copy(e),this.points=[];for(let i=0,r=e.points.length;i<r;i++){const s=e.points[i];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,r=this.points.length;i<r;i++){const s=this.points[i];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,r=e.points.length;i<r;i++){const s=e.points[i];this.points.push(new Fe().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function sX(a,e,i,r,s){const l=(r-e)*.5,u=(s-i)*.5,A=a*a,g=a*A;return(2*i-2*r+l+u)*g+(-3*i+3*r-2*l-u)*A+l*a+i}function _be(a,e){const i=1-a;return i*i*e}function vbe(a,e){return 2*(1-a)*a*e}function ybe(a,e){return a*a*e}function YI(a,e,i,r){return _be(a,e)+vbe(a,i)+ybe(a,r)}function bbe(a,e){const i=1-a;return i*i*i*e}function wbe(a,e){const i=1-a;return 3*i*i*a*e}function xbe(a,e){return 3*(1-a)*a*a*e}function Cbe(a,e){return a*a*a*e}function JI(a,e,i,r,s){return bbe(a,e)+wbe(a,i)+xbe(a,r)+Cbe(a,s)}class Zz extends Df{constructor(e=new ci,i=new ci,r=new ci,s=new ci){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=i,this.v2=r,this.v3=s}getPoint(e,i=new ci){const r=i,s=this.v0,l=this.v1,u=this.v2,A=this.v3;return r.set(JI(e,s.x,l.x,u.x,A.x),JI(e,s.y,l.y,u.y,A.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Pre extends Df{constructor(e=new Fe,i=new Fe,r=new Fe,s=new Fe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=i,this.v2=r,this.v3=s}getPoint(e,i=new Fe){const r=i,s=this.v0,l=this.v1,u=this.v2,A=this.v3;return r.set(JI(e,s.x,l.x,u.x,A.x),JI(e,s.y,l.y,u.y,A.y),JI(e,s.z,l.z,u.z,A.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class e7 extends Df{constructor(e=new ci,i=new ci){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=i}getPoint(e,i=new ci){const r=i;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new ci){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ore extends Df{constructor(e=new Fe,i=new Fe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=i}getPoint(e,i=new Fe){const r=i;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new Fe){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class t7 extends Df{constructor(e=new ci,i=new ci,r=new ci){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=i,this.v2=r}getPoint(e,i=new ci){const r=i,s=this.v0,l=this.v1,u=this.v2;return r.set(YI(e,s.x,l.x,u.x),YI(e,s.y,l.y,u.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class i7 extends Df{constructor(e=new Fe,i=new Fe,r=new Fe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=i,this.v2=r}getPoint(e,i=new Fe){const r=i,s=this.v0,l=this.v1,u=this.v2;return r.set(YI(e,s.x,l.x,u.x),YI(e,s.y,l.y,u.y),YI(e,s.z,l.z,u.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class n7 extends Df{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,i=new ci){const r=i,s=this.points,l=(s.length-1)*e,u=Math.floor(l),A=l-u,g=s[u===0?u:u-1],_=s[u],b=s[u>s.length-2?s.length-1:u+1],x=s[u>s.length-3?s.length-1:u+2];return r.set(sX(A,g.x,_.x,b.x,x.x),sX(A,g.y,_.y,b.y,x.y)),r}copy(e){super.copy(e),this.points=[];for(let i=0,r=e.points.length;i<r;i++){const s=e.points[i];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,r=this.points.length;i<r;i++){const s=this.points[i];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,r=e.points.length;i<r;i++){const s=e.points[i];this.points.push(new ci().fromArray(s))}return this}}var rk=Object.freeze({__proto__:null,ArcCurve:kre,CatmullRomCurve3:Lre,CubicBezierCurve:Zz,CubicBezierCurve3:Pre,EllipseCurve:eL,LineCurve:e7,LineCurve3:Ore,QuadraticBezierCurve:t7,QuadraticBezierCurve3:i7,SplineCurve:n7});class Qre extends Df{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(i)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new rk[r](i,e))}return this}getPoint(e,i){const r=e*this.getLength(),s=this.getCurveLengths();let l=0;for(;l<s.length;){if(s[l]>=r){const u=s[l]-r,A=this.curves[l],g=A.getLength(),_=g===0?0:1-u/g;return A.getPointAt(_,i)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let i=0;for(let r=0,s=this.curves.length;r<s;r++)i+=this.curves[r].getLength(),e.push(i);return this.cacheLengths=e,e}getSpacedPoints(e=40){const i=[];for(let r=0;r<=e;r++)i.push(this.getPoint(r/e));return this.autoClose&&i.push(i[0]),i}getPoints(e=12){const i=[];let r;for(let s=0,l=this.curves;s<l.length;s++){const u=l[s],A=u.isEllipseCurve?e*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?e*u.points.length:e,g=u.getPoints(A);for(let _=0;_<g.length;_++){const b=g[_];r&&r.equals(b)||(i.push(b),r=b)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(e){super.copy(e),this.curves=[];for(let i=0,r=e.curves.length;i<r;i++){const s=e.curves[i];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let i=0,r=this.curves.length;i<r;i++){const s=this.curves[i];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let i=0,r=e.curves.length;i<r;i++){const s=e.curves[i];this.curves.push(new rk[s.type]().fromJSON(s))}return this}}class BT extends Qre{constructor(e){super(),this.type="Path",this.currentPoint=new ci,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let i=1,r=e.length;i<r;i++)this.lineTo(e[i].x,e[i].y);return this}moveTo(e,i){return this.currentPoint.set(e,i),this}lineTo(e,i){const r=new e7(this.currentPoint.clone(),new ci(e,i));return this.curves.push(r),this.currentPoint.set(e,i),this}quadraticCurveTo(e,i,r,s){const l=new t7(this.currentPoint.clone(),new ci(e,i),new ci(r,s));return this.curves.push(l),this.currentPoint.set(r,s),this}bezierCurveTo(e,i,r,s,l,u){const A=new Zz(this.currentPoint.clone(),new ci(e,i),new ci(r,s),new ci(l,u));return this.curves.push(A),this.currentPoint.set(l,u),this}splineThru(e){const i=[this.currentPoint.clone()].concat(e),r=new n7(i);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,i,r,s,l,u){const A=this.currentPoint.x,g=this.currentPoint.y;return this.absarc(e+A,i+g,r,s,l,u),this}absarc(e,i,r,s,l,u){return this.absellipse(e,i,r,r,s,l,u),this}ellipse(e,i,r,s,l,u,A,g){const _=this.currentPoint.x,b=this.currentPoint.y;return this.absellipse(e+_,i+b,r,s,l,u,A,g),this}absellipse(e,i,r,s,l,u,A,g){const _=new eL(e,i,r,s,l,u,A,g);if(this.curves.length>0){const x=_.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(_);const b=_.getPoint(1);return this.currentPoint.copy(b),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class nM extends Ln{constructor(e=[new ci(0,-.5),new ci(.5,0),new ci(0,.5)],i=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:i,phiStart:r,phiLength:s},i=Math.floor(i),s=pr(s,0,Math.PI*2);const l=[],u=[],A=[],g=[],_=[],b=1/i,x=new Fe,C=new ci,I=new Fe,F=new Fe,L=new Fe;let U=0,P=0;for(let H=0;H<=e.length-1;H++)switch(H){case 0:U=e[H+1].x-e[H].x,P=e[H+1].y-e[H].y,I.x=P*1,I.y=-U,I.z=P*0,L.copy(I),I.normalize(),g.push(I.x,I.y,I.z);break;case e.length-1:g.push(L.x,L.y,L.z);break;default:U=e[H+1].x-e[H].x,P=e[H+1].y-e[H].y,I.x=P*1,I.y=-U,I.z=P*0,F.copy(I),I.x+=L.x,I.y+=L.y,I.z+=L.z,I.normalize(),g.push(I.x,I.y,I.z),L.copy(F)}for(let H=0;H<=i;H++){const N=r+H*b*s,z=Math.sin(N),W=Math.cos(N);for(let j=0;j<=e.length-1;j++){x.x=e[j].x*z,x.y=e[j].y,x.z=e[j].x*W,u.push(x.x,x.y,x.z),C.x=H/i,C.y=j/(e.length-1),A.push(C.x,C.y);const J=g[3*j+0]*z,ie=g[3*j+1],ee=g[3*j+0]*W;_.push(J,ie,ee)}}for(let H=0;H<i;H++)for(let N=0;N<e.length-1;N++){const z=N+H*e.length,W=z,j=z+e.length,J=z+e.length+1,ie=z+1;l.push(W,j,ie),l.push(J,ie,j)}this.setIndex(l),this.setAttribute("position",new Ni(u,3)),this.setAttribute("uv",new Ni(A,2)),this.setAttribute("normal",new Ni(_,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nM(e.points,e.segments,e.phiStart,e.phiLength)}}class tL extends nM{constructor(e=1,i=1,r=4,s=8){const l=new BT;l.absarc(0,-i/2,e,Math.PI*1.5,0),l.absarc(0,i/2,e,0,Math.PI*.5),super(l.getPoints(r),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:i,capSegments:r,radialSegments:s}}static fromJSON(e){return new tL(e.radius,e.length,e.capSegments,e.radialSegments)}}class iL extends Ln{constructor(e=1,i=32,r=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:i,thetaStart:r,thetaLength:s},i=Math.max(3,i);const l=[],u=[],A=[],g=[],_=new Fe,b=new ci;u.push(0,0,0),A.push(0,0,1),g.push(.5,.5);for(let x=0,C=3;x<=i;x++,C+=3){const I=r+x/i*s;_.x=e*Math.cos(I),_.y=e*Math.sin(I),u.push(_.x,_.y,_.z),A.push(0,0,1),b.x=(u[C]/e+1)/2,b.y=(u[C+1]/e+1)/2,g.push(b.x,b.y)}for(let x=1;x<=i;x++)l.push(x,x+1,0);this.setIndex(l),this.setAttribute("position",new Ni(u,3)),this.setAttribute("normal",new Ni(A,3)),this.setAttribute("uv",new Ni(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iL(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class RS extends Ln{constructor(e=1,i=1,r=1,s=32,l=1,u=!1,A=0,g=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:i,height:r,radialSegments:s,heightSegments:l,openEnded:u,thetaStart:A,thetaLength:g};const _=this;s=Math.floor(s),l=Math.floor(l);const b=[],x=[],C=[],I=[];let F=0;const L=[],U=r/2;let P=0;H(),u===!1&&(e>0&&N(!0),i>0&&N(!1)),this.setIndex(b),this.setAttribute("position",new Ni(x,3)),this.setAttribute("normal",new Ni(C,3)),this.setAttribute("uv",new Ni(I,2));function H(){const z=new Fe,W=new Fe;let j=0;const J=(i-e)/r;for(let ie=0;ie<=l;ie++){const ee=[],re=ie/l,se=re*(i-e)+e;for(let ue=0;ue<=s;ue++){const fe=ue/s,pe=fe*g+A,xe=Math.sin(pe),ce=Math.cos(pe);W.x=se*xe,W.y=-re*r+U,W.z=se*ce,x.push(W.x,W.y,W.z),z.set(xe,J,ce).normalize(),C.push(z.x,z.y,z.z),I.push(fe,1-re),ee.push(F++)}L.push(ee)}for(let ie=0;ie<s;ie++)for(let ee=0;ee<l;ee++){const re=L[ee][ie],se=L[ee+1][ie],ue=L[ee+1][ie+1],fe=L[ee][ie+1];(e>0||ee!==0)&&(b.push(re,se,fe),j+=3),(i>0||ee!==l-1)&&(b.push(se,ue,fe),j+=3)}_.addGroup(P,j,0),P+=j}function N(z){const W=F,j=new ci,J=new Fe;let ie=0;const ee=z===!0?e:i,re=z===!0?1:-1;for(let ue=1;ue<=s;ue++)x.push(0,U*re,0),C.push(0,re,0),I.push(.5,.5),F++;const se=F;for(let ue=0;ue<=s;ue++){const pe=ue/s*g+A,xe=Math.cos(pe),ce=Math.sin(pe);J.x=ee*ce,J.y=U*re,J.z=ee*xe,x.push(J.x,J.y,J.z),C.push(0,re,0),j.x=xe*.5+.5,j.y=ce*.5*re+.5,I.push(j.x,j.y),F++}for(let ue=0;ue<s;ue++){const fe=W+ue,pe=se+ue;z===!0?b.push(pe,pe+1,fe):b.push(pe+1,pe,fe),ie+=3}_.addGroup(P,ie,z===!0?1:2),P+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RS(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nL extends RS{constructor(e=1,i=1,r=32,s=1,l=!1,u=0,A=Math.PI*2){super(0,e,i,r,s,l,u,A),this.type="ConeGeometry",this.parameters={radius:e,height:i,radialSegments:r,heightSegments:s,openEnded:l,thetaStart:u,thetaLength:A}}static fromJSON(e){return new nL(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ib extends Ln{constructor(e=[],i=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:i,radius:r,detail:s};const l=[],u=[];A(s),_(r),b(),this.setAttribute("position",new Ni(l,3)),this.setAttribute("normal",new Ni(l.slice(),3)),this.setAttribute("uv",new Ni(u,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function A(H){const N=new Fe,z=new Fe,W=new Fe;for(let j=0;j<i.length;j+=3)I(i[j+0],N),I(i[j+1],z),I(i[j+2],W),g(N,z,W,H)}function g(H,N,z,W){const j=W+1,J=[];for(let ie=0;ie<=j;ie++){J[ie]=[];const ee=H.clone().lerp(z,ie/j),re=N.clone().lerp(z,ie/j),se=j-ie;for(let ue=0;ue<=se;ue++)ue===0&&ie===j?J[ie][ue]=ee:J[ie][ue]=ee.clone().lerp(re,ue/se)}for(let ie=0;ie<j;ie++)for(let ee=0;ee<2*(j-ie)-1;ee++){const re=Math.floor(ee/2);ee%2===0?(C(J[ie][re+1]),C(J[ie+1][re]),C(J[ie][re])):(C(J[ie][re+1]),C(J[ie+1][re+1]),C(J[ie+1][re]))}}function _(H){const N=new Fe;for(let z=0;z<l.length;z+=3)N.x=l[z+0],N.y=l[z+1],N.z=l[z+2],N.normalize().multiplyScalar(H),l[z+0]=N.x,l[z+1]=N.y,l[z+2]=N.z}function b(){const H=new Fe;for(let N=0;N<l.length;N+=3){H.x=l[N+0],H.y=l[N+1],H.z=l[N+2];const z=U(H)/2/Math.PI+.5,W=P(H)/Math.PI+.5;u.push(z,1-W)}F(),x()}function x(){for(let H=0;H<u.length;H+=6){const N=u[H+0],z=u[H+2],W=u[H+4],j=Math.max(N,z,W),J=Math.min(N,z,W);j>.9&&J<.1&&(N<.2&&(u[H+0]+=1),z<.2&&(u[H+2]+=1),W<.2&&(u[H+4]+=1))}}function C(H){l.push(H.x,H.y,H.z)}function I(H,N){const z=H*3;N.x=e[z+0],N.y=e[z+1],N.z=e[z+2]}function F(){const H=new Fe,N=new Fe,z=new Fe,W=new Fe,j=new ci,J=new ci,ie=new ci;for(let ee=0,re=0;ee<l.length;ee+=9,re+=6){H.set(l[ee+0],l[ee+1],l[ee+2]),N.set(l[ee+3],l[ee+4],l[ee+5]),z.set(l[ee+6],l[ee+7],l[ee+8]),j.set(u[re+0],u[re+1]),J.set(u[re+2],u[re+3]),ie.set(u[re+4],u[re+5]),W.copy(H).add(N).add(z).divideScalar(3);const se=U(W);L(j,re+0,H,se),L(J,re+2,N,se),L(ie,re+4,z,se)}}function L(H,N,z,W){W<0&&H.x===1&&(u[N]=H.x-1),z.x===0&&z.z===0&&(u[N]=W/2/Math.PI+.5)}function U(H){return Math.atan2(H.z,-H.x)}function P(H){return Math.atan2(-H.y,Math.sqrt(H.x*H.x+H.z*H.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ib(e.vertices,e.indices,e.radius,e.details)}}class rL extends ib{constructor(e=1,i=0){const r=(1+Math.sqrt(5))/2,s=1/r,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(l,u,e,i),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new rL(e.radius,e.detail)}}const GD=new Fe,VD=new Fe,b6=new Fe,qD=new zh;class Nre extends Ln{constructor(e=null,i=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:i},e!==null){const s=Math.pow(10,4),l=Math.cos(mw*i),u=e.getIndex(),A=e.getAttribute("position"),g=u?u.count:A.count,_=[0,0,0],b=["a","b","c"],x=new Array(3),C={},I=[];for(let F=0;F<g;F+=3){u?(_[0]=u.getX(F),_[1]=u.getX(F+1),_[2]=u.getX(F+2)):(_[0]=F,_[1]=F+1,_[2]=F+2);const{a:L,b:U,c:P}=qD;if(L.fromBufferAttribute(A,_[0]),U.fromBufferAttribute(A,_[1]),P.fromBufferAttribute(A,_[2]),qD.getNormal(b6),x[0]=`${Math.round(L.x*s)},${Math.round(L.y*s)},${Math.round(L.z*s)}`,x[1]=`${Math.round(U.x*s)},${Math.round(U.y*s)},${Math.round(U.z*s)}`,x[2]=`${Math.round(P.x*s)},${Math.round(P.y*s)},${Math.round(P.z*s)}`,!(x[0]===x[1]||x[1]===x[2]||x[2]===x[0]))for(let H=0;H<3;H++){const N=(H+1)%3,z=x[H],W=x[N],j=qD[b[H]],J=qD[b[N]],ie=`${z}_${W}`,ee=`${W}_${z}`;ee in C&&C[ee]?(b6.dot(C[ee].normal)<=l&&(I.push(j.x,j.y,j.z),I.push(J.x,J.y,J.z)),C[ee]=null):ie in C||(C[ie]={index0:_[H],index1:_[N],normal:b6.clone()})}}for(const F in C)if(C[F]){const{index0:L,index1:U}=C[F];GD.fromBufferAttribute(A,L),VD.fromBufferAttribute(A,U),I.push(GD.x,GD.y,GD.z),I.push(VD.x,VD.y,VD.z)}this.setAttribute("position",new Ni(I,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class _w extends BT{constructor(e){super(e),this.uuid=gp(),this.type="Shape",this.holes=[]}getPointsHoles(e){const i=[];for(let r=0,s=this.holes.length;r<s;r++)i[r]=this.holes[r].getPoints(e);return i}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let i=0,r=e.holes.length;i<r;i++){const s=e.holes[i];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let i=0,r=this.holes.length;i<r;i++){const s=this.holes[i];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let i=0,r=e.holes.length;i<r;i++){const s=e.holes[i];this.holes.push(new BT().fromJSON(s))}return this}}const Ebe={triangulate:function(a,e,i=2){const r=e&&e.length,s=r?e[0]*i:a.length;let l=Hre(a,0,s,i,!0);const u=[];if(!l||l.next===l.prev)return u;let A,g,_,b,x,C,I;if(r&&(l=Mbe(a,e,l,i)),a.length>80*i){A=_=a[0],g=b=a[1];for(let F=i;F<s;F+=i)x=a[F],C=a[F+1],x<A&&(A=x),C<g&&(g=C),x>_&&(_=x),C>b&&(b=C);I=Math.max(_-A,b-g),I=I!==0?32767/I:0}return IT(l,u,i,A,g,I,0),u}};function Hre(a,e,i,r,s){let l,u;if(s===Hbe(a,e,i,r)>0)for(l=e;l<i;l+=r)u=oX(l,a[l],a[l+1],u);else for(l=i-r;l>=e;l-=r)u=oX(l,a[l],a[l+1],u);return u&&sL(u,u.next)&&(MT(u),u=u.next),u}function Dw(a,e){if(!a)return a;e||(e=a);let i=a,r;do if(r=!1,!i.steiner&&(sL(i,i.next)||ja(i.prev,i,i.next)===0)){if(MT(i),i=e=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==e);return e}function IT(a,e,i,r,s,l,u){if(!a)return;!u&&l&&kbe(a,r,s,l);let A=a,g,_;for(;a.prev!==a.next;){if(g=a.prev,_=a.next,l?Bbe(a,r,s,l):Sbe(a)){e.push(g.i/i|0),e.push(a.i/i|0),e.push(_.i/i|0),MT(a),a=_.next,A=_.next;continue}if(a=_,a===A){u?u===1?(a=Ibe(Dw(a),e,i),IT(a,e,i,r,s,l,2)):u===2&&Tbe(a,e,i,r,s,l):IT(Dw(a),e,i,r,s,l,1);break}}}function Sbe(a){const e=a.prev,i=a,r=a.next;if(ja(e,i,r)>=0)return!1;const s=e.x,l=i.x,u=r.x,A=e.y,g=i.y,_=r.y,b=s<l?s<u?s:u:l<u?l:u,x=A<g?A<_?A:_:g<_?g:_,C=s>l?s>u?s:u:l>u?l:u,I=A>g?A>_?A:_:g>_?g:_;let F=r.next;for(;F!==e;){if(F.x>=b&&F.x<=C&&F.y>=x&&F.y<=I&&VE(s,A,l,g,u,_,F.x,F.y)&&ja(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function Bbe(a,e,i,r){const s=a.prev,l=a,u=a.next;if(ja(s,l,u)>=0)return!1;const A=s.x,g=l.x,_=u.x,b=s.y,x=l.y,C=u.y,I=A<g?A<_?A:_:g<_?g:_,F=b<x?b<C?b:C:x<C?x:C,L=A>g?A>_?A:_:g>_?g:_,U=b>x?b>C?b:C:x>C?x:C,P=uH(I,F,e,i,r),H=uH(L,U,e,i,r);let N=a.prevZ,z=a.nextZ;for(;N&&N.z>=P&&z&&z.z<=H;){if(N.x>=I&&N.x<=L&&N.y>=F&&N.y<=U&&N!==s&&N!==u&&VE(A,b,g,x,_,C,N.x,N.y)&&ja(N.prev,N,N.next)>=0||(N=N.prevZ,z.x>=I&&z.x<=L&&z.y>=F&&z.y<=U&&z!==s&&z!==u&&VE(A,b,g,x,_,C,z.x,z.y)&&ja(z.prev,z,z.next)>=0))return!1;z=z.nextZ}for(;N&&N.z>=P;){if(N.x>=I&&N.x<=L&&N.y>=F&&N.y<=U&&N!==s&&N!==u&&VE(A,b,g,x,_,C,N.x,N.y)&&ja(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;z&&z.z<=H;){if(z.x>=I&&z.x<=L&&z.y>=F&&z.y<=U&&z!==s&&z!==u&&VE(A,b,g,x,_,C,z.x,z.y)&&ja(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function Ibe(a,e,i){let r=a;do{const s=r.prev,l=r.next.next;!sL(s,l)&&zre(s,r,r.next,l)&&TT(s,l)&&TT(l,s)&&(e.push(s.i/i|0),e.push(r.i/i|0),e.push(l.i/i|0),MT(r),MT(r.next),r=a=l),r=r.next}while(r!==a);return Dw(r)}function Tbe(a,e,i,r,s,l){let u=a;do{let A=u.next.next;for(;A!==u.prev;){if(u.i!==A.i&&Obe(u,A)){let g=Gre(u,A);u=Dw(u,u.next),g=Dw(g,g.next),IT(u,e,i,r,s,l,0),IT(g,e,i,r,s,l,0);return}A=A.next}u=u.next}while(u!==a)}function Mbe(a,e,i,r){const s=[];let l,u,A,g,_;for(l=0,u=e.length;l<u;l++)A=e[l]*r,g=l<u-1?e[l+1]*r:a.length,_=Hre(a,A,g,r,!1),_===_.next&&(_.steiner=!0),s.push(Pbe(_));for(s.sort(Rbe),l=0;l<s.length;l++)i=Dbe(s[l],i);return i}function Rbe(a,e){return a.x-e.x}function Dbe(a,e){const i=Fbe(a,e);if(!i)return e;const r=Gre(i,a);return Dw(r,r.next),Dw(i,i.next)}function Fbe(a,e){let i=e,r=-1/0,s;const l=a.x,u=a.y;do{if(u<=i.y&&u>=i.next.y&&i.next.y!==i.y){const C=i.x+(u-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(C<=l&&C>r&&(r=C,s=i.x<i.next.x?i:i.next,C===l))return s}i=i.next}while(i!==e);if(!s)return null;const A=s,g=s.x,_=s.y;let b=1/0,x;i=s;do l>=i.x&&i.x>=g&&l!==i.x&&VE(u<_?l:r,u,g,_,u<_?r:l,u,i.x,i.y)&&(x=Math.abs(u-i.y)/(l-i.x),TT(i,a)&&(x<b||x===b&&(i.x>s.x||i.x===s.x&&Ube(s,i)))&&(s=i,b=x)),i=i.next;while(i!==A);return s}function Ube(a,e){return ja(a.prev,a,e.prev)<0&&ja(e.next,a,a.next)<0}function kbe(a,e,i,r){let s=a;do s.z===0&&(s.z=uH(s.x,s.y,e,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==a);s.prevZ.nextZ=null,s.prevZ=null,Lbe(s)}function Lbe(a){let e,i,r,s,l,u,A,g,_=1;do{for(i=a,a=null,l=null,u=0;i;){for(u++,r=i,A=0,e=0;e<_&&(A++,r=r.nextZ,!!r);e++);for(g=_;A>0||g>0&&r;)A!==0&&(g===0||!r||i.z<=r.z)?(s=i,i=i.nextZ,A--):(s=r,r=r.nextZ,g--),l?l.nextZ=s:a=s,s.prevZ=l,l=s;i=r}l.nextZ=null,_*=2}while(u>1);return a}function uH(a,e,i,r,s){return a=(a-i)*s|0,e=(e-r)*s|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function Pbe(a){let e=a,i=a;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==a);return i}function VE(a,e,i,r,s,l,u,A){return(s-u)*(e-A)>=(a-u)*(l-A)&&(a-u)*(r-A)>=(i-u)*(e-A)&&(i-u)*(l-A)>=(s-u)*(r-A)}function Obe(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!Qbe(a,e)&&(TT(a,e)&&TT(e,a)&&Nbe(a,e)&&(ja(a.prev,a,e.prev)||ja(a,e.prev,e))||sL(a,e)&&ja(a.prev,a,a.next)>0&&ja(e.prev,e,e.next)>0)}function ja(a,e,i){return(e.y-a.y)*(i.x-e.x)-(e.x-a.x)*(i.y-e.y)}function sL(a,e){return a.x===e.x&&a.y===e.y}function zre(a,e,i,r){const s=WD(ja(a,e,i)),l=WD(ja(a,e,r)),u=WD(ja(i,r,a)),A=WD(ja(i,r,e));return!!(s!==l&&u!==A||s===0&&$D(a,i,e)||l===0&&$D(a,r,e)||u===0&&$D(i,a,r)||A===0&&$D(i,e,r))}function $D(a,e,i){return e.x<=Math.max(a.x,i.x)&&e.x>=Math.min(a.x,i.x)&&e.y<=Math.max(a.y,i.y)&&e.y>=Math.min(a.y,i.y)}function WD(a){return a>0?1:a<0?-1:0}function Qbe(a,e){let i=a;do{if(i.i!==a.i&&i.next.i!==a.i&&i.i!==e.i&&i.next.i!==e.i&&zre(i,i.next,a,e))return!0;i=i.next}while(i!==a);return!1}function TT(a,e){return ja(a.prev,a,a.next)<0?ja(a,e,a.next)>=0&&ja(a,a.prev,e)>=0:ja(a,e,a.prev)<0||ja(a,a.next,e)<0}function Nbe(a,e){let i=a,r=!1;const s=(a.x+e.x)/2,l=(a.y+e.y)/2;do i.y>l!=i.next.y>l&&i.next.y!==i.y&&s<(i.next.x-i.x)*(l-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==a);return r}function Gre(a,e){const i=new hH(a.i,a.x,a.y),r=new hH(e.i,e.x,e.y),s=a.next,l=e.prev;return a.next=e,e.prev=a,i.next=s,s.prev=i,r.next=i,i.prev=r,l.next=r,r.prev=l,r}function oX(a,e,i,r){const s=new hH(a,e,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function MT(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function hH(a,e,i){this.i=a,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hbe(a,e,i,r){let s=0;for(let l=e,u=i-r;l<i;l+=r)s+=(a[u]-a[l])*(a[l+1]+a[u+1]),u=l;return s}class Fg{static area(e){const i=e.length;let r=0;for(let s=i-1,l=0;l<i;s=l++)r+=e[s].x*e[l].y-e[l].x*e[s].y;return r*.5}static isClockWise(e){return Fg.area(e)<0}static triangulateShape(e,i){const r=[],s=[],l=[];aX(e),lX(r,e);let u=e.length;i.forEach(aX);for(let g=0;g<i.length;g++)s.push(u),u+=i[g].length,lX(r,i[g]);const A=Ebe.triangulate(r,s);for(let g=0;g<A.length;g+=3)l.push(A.slice(g,g+3));return l}}function aX(a){const e=a.length;e>2&&a[e-1].equals(a[0])&&a.pop()}function lX(a,e){for(let i=0;i<e.length;i++)a.push(e[i].x),a.push(e[i].y)}class oL extends Ln{constructor(e=new _w([new ci(.5,.5),new ci(-.5,.5),new ci(-.5,-.5),new ci(.5,-.5)]),i={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:i},e=Array.isArray(e)?e:[e];const r=this,s=[],l=[];for(let A=0,g=e.length;A<g;A++){const _=e[A];u(_)}this.setAttribute("position",new Ni(s,3)),this.setAttribute("uv",new Ni(l,2)),this.computeVertexNormals();function u(A){const g=[],_=i.curveSegments!==void 0?i.curveSegments:12,b=i.steps!==void 0?i.steps:1,x=i.depth!==void 0?i.depth:1;let C=i.bevelEnabled!==void 0?i.bevelEnabled:!0,I=i.bevelThickness!==void 0?i.bevelThickness:.2,F=i.bevelSize!==void 0?i.bevelSize:I-.1,L=i.bevelOffset!==void 0?i.bevelOffset:0,U=i.bevelSegments!==void 0?i.bevelSegments:3;const P=i.extrudePath,H=i.UVGenerator!==void 0?i.UVGenerator:zbe;let N,z=!1,W,j,J,ie;P&&(N=P.getSpacedPoints(b),z=!0,C=!1,W=P.computeFrenetFrames(b,!1),j=new Fe,J=new Fe,ie=new Fe),C||(U=0,I=0,F=0,L=0);const ee=A.extractPoints(_);let re=ee.shape;const se=ee.holes;if(!Fg.isClockWise(re)){re=re.reverse();for(let it=0,Dt=se.length;it<Dt;it++){const Be=se[it];Fg.isClockWise(Be)&&(se[it]=Be.reverse())}}const fe=Fg.triangulateShape(re,se),pe=re;for(let it=0,Dt=se.length;it<Dt;it++){const Be=se[it];re=re.concat(Be)}function xe(it,Dt,Be){return Dt||console.error("THREE.ExtrudeGeometry: vec does not exist"),it.clone().addScaledVector(Dt,Be)}const ce=re.length,_e=fe.length;function ye(it,Dt,Be){let li,bt,Wt;const qe=it.x-Dt.x,pt=it.y-Dt.y,At=Be.x-it.x,Se=Be.y-it.y,me=qe*qe+pt*pt,$e=qe*Se-pt*At;if(Math.abs($e)>Number.EPSILON){const Ct=Math.sqrt(me),wt=Math.sqrt(At*At+Se*Se),ft=Dt.x-pt/Ct,Ot=Dt.y+qe/Ct,Gt=Be.x-Se/wt,si=Be.y+At/wt,$t=((Gt-ft)*Se-(si-Ot)*At)/(qe*Se-pt*At);li=ft+qe*$t-it.x,bt=Ot+pt*$t-it.y;const ti=li*li+bt*bt;if(ti<=2)return new ci(li,bt);Wt=Math.sqrt(ti/2)}else{let Ct=!1;qe>Number.EPSILON?At>Number.EPSILON&&(Ct=!0):qe<-Number.EPSILON?At<-Number.EPSILON&&(Ct=!0):Math.sign(pt)===Math.sign(Se)&&(Ct=!0),Ct?(li=-pt,bt=qe,Wt=Math.sqrt(me)):(li=qe,bt=pt,Wt=Math.sqrt(me/2))}return new ci(li/Wt,bt/Wt)}const Oe=[];for(let it=0,Dt=pe.length,Be=Dt-1,li=it+1;it<Dt;it++,Be++,li++)Be===Dt&&(Be=0),li===Dt&&(li=0),Oe[it]=ye(pe[it],pe[Be],pe[li]);const ge=[];let Ee,ke=Oe.concat();for(let it=0,Dt=se.length;it<Dt;it++){const Be=se[it];Ee=[];for(let li=0,bt=Be.length,Wt=bt-1,qe=li+1;li<bt;li++,Wt++,qe++)Wt===bt&&(Wt=0),qe===bt&&(qe=0),Ee[li]=ye(Be[li],Be[Wt],Be[qe]);ge.push(Ee),ke=ke.concat(Ee)}for(let it=0;it<U;it++){const Dt=it/U,Be=I*Math.cos(Dt*Math.PI/2),li=F*Math.sin(Dt*Math.PI/2)+L;for(let bt=0,Wt=pe.length;bt<Wt;bt++){const qe=xe(pe[bt],Oe[bt],li);lt(qe.x,qe.y,-Be)}for(let bt=0,Wt=se.length;bt<Wt;bt++){const qe=se[bt];Ee=ge[bt];for(let pt=0,At=qe.length;pt<At;pt++){const Se=xe(qe[pt],Ee[pt],li);lt(Se.x,Se.y,-Be)}}}const je=F+L;for(let it=0;it<ce;it++){const Dt=C?xe(re[it],ke[it],je):re[it];z?(J.copy(W.normals[0]).multiplyScalar(Dt.x),j.copy(W.binormals[0]).multiplyScalar(Dt.y),ie.copy(N[0]).add(J).add(j),lt(ie.x,ie.y,ie.z)):lt(Dt.x,Dt.y,0)}for(let it=1;it<=b;it++)for(let Dt=0;Dt<ce;Dt++){const Be=C?xe(re[Dt],ke[Dt],je):re[Dt];z?(J.copy(W.normals[it]).multiplyScalar(Be.x),j.copy(W.binormals[it]).multiplyScalar(Be.y),ie.copy(N[it]).add(J).add(j),lt(ie.x,ie.y,ie.z)):lt(Be.x,Be.y,x/b*it)}for(let it=U-1;it>=0;it--){const Dt=it/U,Be=I*Math.cos(Dt*Math.PI/2),li=F*Math.sin(Dt*Math.PI/2)+L;for(let bt=0,Wt=pe.length;bt<Wt;bt++){const qe=xe(pe[bt],Oe[bt],li);lt(qe.x,qe.y,x+Be)}for(let bt=0,Wt=se.length;bt<Wt;bt++){const qe=se[bt];Ee=ge[bt];for(let pt=0,At=qe.length;pt<At;pt++){const Se=xe(qe[pt],Ee[pt],li);z?lt(Se.x,Se.y+N[b-1].y,N[b-1].x+Be):lt(Se.x,Se.y,x+Be)}}}Ie(),ze();function Ie(){const it=s.length/3;if(C){let Dt=0,Be=ce*Dt;for(let li=0;li<_e;li++){const bt=fe[li];yt(bt[2]+Be,bt[1]+Be,bt[0]+Be)}Dt=b+U*2,Be=ce*Dt;for(let li=0;li<_e;li++){const bt=fe[li];yt(bt[0]+Be,bt[1]+Be,bt[2]+Be)}}else{for(let Dt=0;Dt<_e;Dt++){const Be=fe[Dt];yt(Be[2],Be[1],Be[0])}for(let Dt=0;Dt<_e;Dt++){const Be=fe[Dt];yt(Be[0]+ce*b,Be[1]+ce*b,Be[2]+ce*b)}}r.addGroup(it,s.length/3-it,0)}function ze(){const it=s.length/3;let Dt=0;ht(pe,Dt),Dt+=pe.length;for(let Be=0,li=se.length;Be<li;Be++){const bt=se[Be];ht(bt,Dt),Dt+=bt.length}r.addGroup(it,s.length/3-it,1)}function ht(it,Dt){let Be=it.length;for(;--Be>=0;){const li=Be;let bt=Be-1;bt<0&&(bt=it.length-1);for(let Wt=0,qe=b+U*2;Wt<qe;Wt++){const pt=ce*Wt,At=ce*(Wt+1),Se=Dt+li+pt,me=Dt+bt+pt,$e=Dt+bt+At,Ct=Dt+li+At;Nt(Se,me,$e,Ct)}}}function lt(it,Dt,Be){g.push(it),g.push(Dt),g.push(Be)}function yt(it,Dt,Be){zt(it),zt(Dt),zt(Be);const li=s.length/3,bt=H.generateTopUV(r,s,li-3,li-2,li-1);ei(bt[0]),ei(bt[1]),ei(bt[2])}function Nt(it,Dt,Be,li){zt(it),zt(Dt),zt(li),zt(Dt),zt(Be),zt(li);const bt=s.length/3,Wt=H.generateSideWallUV(r,s,bt-6,bt-3,bt-2,bt-1);ei(Wt[0]),ei(Wt[1]),ei(Wt[3]),ei(Wt[1]),ei(Wt[2]),ei(Wt[3])}function zt(it){s.push(g[it*3+0]),s.push(g[it*3+1]),s.push(g[it*3+2])}function ei(it){l.push(it.x),l.push(it.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),i=this.parameters.shapes,r=this.parameters.options;return Gbe(i,r,e)}static fromJSON(e,i){const r=[];for(let l=0,u=e.shapes.length;l<u;l++){const A=i[e.shapes[l]];r.push(A)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new rk[s.type]().fromJSON(s)),new oL(r,e.options)}}const zbe={generateTopUV:function(a,e,i,r,s){const l=e[i*3],u=e[i*3+1],A=e[r*3],g=e[r*3+1],_=e[s*3],b=e[s*3+1];return[new ci(l,u),new ci(A,g),new ci(_,b)]},generateSideWallUV:function(a,e,i,r,s,l){const u=e[i*3],A=e[i*3+1],g=e[i*3+2],_=e[r*3],b=e[r*3+1],x=e[r*3+2],C=e[s*3],I=e[s*3+1],F=e[s*3+2],L=e[l*3],U=e[l*3+1],P=e[l*3+2];return Math.abs(A-b)<Math.abs(u-_)?[new ci(u,1-g),new ci(_,1-x),new ci(C,1-F),new ci(L,1-P)]:[new ci(A,1-g),new ci(b,1-x),new ci(I,1-F),new ci(U,1-P)]}};function Gbe(a,e,i){if(i.shapes=[],Array.isArray(a))for(let r=0,s=a.length;r<s;r++){const l=a[r];i.shapes.push(l.uuid)}else i.shapes.push(a.uuid);return i.options=Object.assign({},e),e.extrudePath!==void 0&&(i.options.extrudePath=e.extrudePath.toJSON()),i}class aL extends ib{constructor(e=1,i=0){const r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,l,e,i),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new aL(e.radius,e.detail)}}class rM extends ib{constructor(e=1,i=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,s,e,i),this.type="OctahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new rM(e.radius,e.detail)}}class UA extends Ln{constructor(e=1,i=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:i,widthSegments:r,heightSegments:s};const l=e/2,u=i/2,A=Math.floor(r),g=Math.floor(s),_=A+1,b=g+1,x=e/A,C=i/g,I=[],F=[],L=[],U=[];for(let P=0;P<b;P++){const H=P*C-u;for(let N=0;N<_;N++){const z=N*x-l;F.push(z,-H,0),L.push(0,0,1),U.push(N/A),U.push(1-P/g)}}for(let P=0;P<g;P++)for(let H=0;H<A;H++){const N=H+_*P,z=H+_*(P+1),W=H+1+_*(P+1),j=H+1+_*P;I.push(N,z,j),I.push(z,W,j)}this.setIndex(I),this.setAttribute("position",new Ni(F,3)),this.setAttribute("normal",new Ni(L,3)),this.setAttribute("uv",new Ni(U,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UA(e.width,e.height,e.widthSegments,e.heightSegments)}}class lL extends Ln{constructor(e=.5,i=1,r=32,s=1,l=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:i,thetaSegments:r,phiSegments:s,thetaStart:l,thetaLength:u},r=Math.max(3,r),s=Math.max(1,s);const A=[],g=[],_=[],b=[];let x=e;const C=(i-e)/s,I=new Fe,F=new ci;for(let L=0;L<=s;L++){for(let U=0;U<=r;U++){const P=l+U/r*u;I.x=x*Math.cos(P),I.y=x*Math.sin(P),g.push(I.x,I.y,I.z),_.push(0,0,1),F.x=(I.x/i+1)/2,F.y=(I.y/i+1)/2,b.push(F.x,F.y)}x+=C}for(let L=0;L<s;L++){const U=L*(r+1);for(let P=0;P<r;P++){const H=P+U,N=H,z=H+r+1,W=H+r+2,j=H+1;A.push(N,z,j),A.push(z,W,j)}}this.setIndex(A),this.setAttribute("position",new Ni(g,3)),this.setAttribute("normal",new Ni(_,3)),this.setAttribute("uv",new Ni(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lL(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cL extends Ln{constructor(e=new _w([new ci(0,.5),new ci(-.5,-.5),new ci(.5,-.5)]),i=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:i};const r=[],s=[],l=[],u=[];let A=0,g=0;if(Array.isArray(e)===!1)_(e);else for(let b=0;b<e.length;b++)_(e[b]),this.addGroup(A,g,b),A+=g,g=0;this.setIndex(r),this.setAttribute("position",new Ni(s,3)),this.setAttribute("normal",new Ni(l,3)),this.setAttribute("uv",new Ni(u,2));function _(b){const x=s.length/3,C=b.extractPoints(i);let I=C.shape;const F=C.holes;Fg.isClockWise(I)===!1&&(I=I.reverse());for(let U=0,P=F.length;U<P;U++){const H=F[U];Fg.isClockWise(H)===!0&&(F[U]=H.reverse())}const L=Fg.triangulateShape(I,F);for(let U=0,P=F.length;U<P;U++){const H=F[U];I=I.concat(H)}for(let U=0,P=I.length;U<P;U++){const H=I[U];s.push(H.x,H.y,0),l.push(0,0,1),u.push(H.x,H.y)}for(let U=0,P=L.length;U<P;U++){const H=L[U],N=H[0]+x,z=H[1]+x,W=H[2]+x;r.push(N,z,W),g+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),i=this.parameters.shapes;return Vbe(i,e)}static fromJSON(e,i){const r=[];for(let s=0,l=e.shapes.length;s<l;s++){const u=i[e.shapes[s]];r.push(u)}return new cL(r,e.curveSegments)}}function Vbe(a,e){if(e.shapes=[],Array.isArray(a))for(let i=0,r=a.length;i<r;i++){const s=a[i];e.shapes.push(s.uuid)}else e.shapes.push(a.uuid);return e}class DS extends Ln{constructor(e=1,i=32,r=16,s=0,l=Math.PI*2,u=0,A=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:i,heightSegments:r,phiStart:s,phiLength:l,thetaStart:u,thetaLength:A},i=Math.max(3,Math.floor(i)),r=Math.max(2,Math.floor(r));const g=Math.min(u+A,Math.PI);let _=0;const b=[],x=new Fe,C=new Fe,I=[],F=[],L=[],U=[];for(let P=0;P<=r;P++){const H=[],N=P/r;let z=0;P===0&&u===0?z=.5/i:P===r&&g===Math.PI&&(z=-.5/i);for(let W=0;W<=i;W++){const j=W/i;x.x=-e*Math.cos(s+j*l)*Math.sin(u+N*A),x.y=e*Math.cos(u+N*A),x.z=e*Math.sin(s+j*l)*Math.sin(u+N*A),F.push(x.x,x.y,x.z),C.copy(x).normalize(),L.push(C.x,C.y,C.z),U.push(j+z,1-N),H.push(_++)}b.push(H)}for(let P=0;P<r;P++)for(let H=0;H<i;H++){const N=b[P][H+1],z=b[P][H],W=b[P+1][H],j=b[P+1][H+1];(P!==0||u>0)&&I.push(N,z,j),(P!==r-1||g<Math.PI)&&I.push(z,W,j)}this.setIndex(I),this.setAttribute("position",new Ni(F,3)),this.setAttribute("normal",new Ni(L,3)),this.setAttribute("uv",new Ni(U,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DS(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class uL extends ib{constructor(e=1,i=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,s,e,i),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new uL(e.radius,e.detail)}}class hL extends Ln{constructor(e=1,i=.4,r=12,s=48,l=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:i,radialSegments:r,tubularSegments:s,arc:l},r=Math.floor(r),s=Math.floor(s);const u=[],A=[],g=[],_=[],b=new Fe,x=new Fe,C=new Fe;for(let I=0;I<=r;I++)for(let F=0;F<=s;F++){const L=F/s*l,U=I/r*Math.PI*2;x.x=(e+i*Math.cos(U))*Math.cos(L),x.y=(e+i*Math.cos(U))*Math.sin(L),x.z=i*Math.sin(U),A.push(x.x,x.y,x.z),b.x=e*Math.cos(L),b.y=e*Math.sin(L),C.subVectors(x,b).normalize(),g.push(C.x,C.y,C.z),_.push(F/s),_.push(I/r)}for(let I=1;I<=r;I++)for(let F=1;F<=s;F++){const L=(s+1)*I+F-1,U=(s+1)*(I-1)+F-1,P=(s+1)*(I-1)+F,H=(s+1)*I+F;u.push(L,U,H),u.push(U,P,H)}this.setIndex(u),this.setAttribute("position",new Ni(A,3)),this.setAttribute("normal",new Ni(g,3)),this.setAttribute("uv",new Ni(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hL(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dL extends Ln{constructor(e=1,i=.4,r=64,s=8,l=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:i,tubularSegments:r,radialSegments:s,p:l,q:u},r=Math.floor(r),s=Math.floor(s);const A=[],g=[],_=[],b=[],x=new Fe,C=new Fe,I=new Fe,F=new Fe,L=new Fe,U=new Fe,P=new Fe;for(let N=0;N<=r;++N){const z=N/r*l*Math.PI*2;H(z,l,u,e,I),H(z+.01,l,u,e,F),U.subVectors(F,I),P.addVectors(F,I),L.crossVectors(U,P),P.crossVectors(L,U),L.normalize(),P.normalize();for(let W=0;W<=s;++W){const j=W/s*Math.PI*2,J=-i*Math.cos(j),ie=i*Math.sin(j);x.x=I.x+(J*P.x+ie*L.x),x.y=I.y+(J*P.y+ie*L.y),x.z=I.z+(J*P.z+ie*L.z),g.push(x.x,x.y,x.z),C.subVectors(x,I).normalize(),_.push(C.x,C.y,C.z),b.push(N/r),b.push(W/s)}}for(let N=1;N<=r;N++)for(let z=1;z<=s;z++){const W=(s+1)*(N-1)+(z-1),j=(s+1)*N+(z-1),J=(s+1)*N+z,ie=(s+1)*(N-1)+z;A.push(W,j,ie),A.push(j,J,ie)}this.setIndex(A),this.setAttribute("position",new Ni(g,3)),this.setAttribute("normal",new Ni(_,3)),this.setAttribute("uv",new Ni(b,2));function H(N,z,W,j,J){const ie=Math.cos(N),ee=Math.sin(N),re=W/z*N,se=Math.cos(re);J.x=j*(2+se)*.5*ie,J.y=j*(2+se)*ee*.5,J.z=j*Math.sin(re)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dL(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class AL extends Ln{constructor(e=new i7(new Fe(-1,-1,0),new Fe(-1,1,0),new Fe(1,1,0)),i=64,r=1,s=8,l=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:i,radius:r,radialSegments:s,closed:l};const u=e.computeFrenetFrames(i,l);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const A=new Fe,g=new Fe,_=new ci;let b=new Fe;const x=[],C=[],I=[],F=[];L(),this.setIndex(F),this.setAttribute("position",new Ni(x,3)),this.setAttribute("normal",new Ni(C,3)),this.setAttribute("uv",new Ni(I,2));function L(){for(let N=0;N<i;N++)U(N);U(l===!1?i:0),H(),P()}function U(N){b=e.getPointAt(N/i,b);const z=u.normals[N],W=u.binormals[N];for(let j=0;j<=s;j++){const J=j/s*Math.PI*2,ie=Math.sin(J),ee=-Math.cos(J);g.x=ee*z.x+ie*W.x,g.y=ee*z.y+ie*W.y,g.z=ee*z.z+ie*W.z,g.normalize(),C.push(g.x,g.y,g.z),A.x=b.x+r*g.x,A.y=b.y+r*g.y,A.z=b.z+r*g.z,x.push(A.x,A.y,A.z)}}function P(){for(let N=1;N<=i;N++)for(let z=1;z<=s;z++){const W=(s+1)*(N-1)+(z-1),j=(s+1)*N+(z-1),J=(s+1)*N+z,ie=(s+1)*(N-1)+z;F.push(W,j,ie),F.push(j,J,ie)}}function H(){for(let N=0;N<=i;N++)for(let z=0;z<=s;z++)_.x=N/i,_.y=z/s,I.push(_.x,_.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new AL(new rk[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Vre extends Ln{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const i=[],r=new Set,s=new Fe,l=new Fe;if(e.index!==null){const u=e.attributes.position,A=e.index;let g=e.groups;g.length===0&&(g=[{start:0,count:A.count,materialIndex:0}]);for(let _=0,b=g.length;_<b;++_){const x=g[_],C=x.start,I=x.count;for(let F=C,L=C+I;F<L;F+=3)for(let U=0;U<3;U++){const P=A.getX(F+U),H=A.getX(F+(U+1)%3);s.fromBufferAttribute(u,P),l.fromBufferAttribute(u,H),cX(s,l,r)===!0&&(i.push(s.x,s.y,s.z),i.push(l.x,l.y,l.z))}}}else{const u=e.attributes.position;for(let A=0,g=u.count/3;A<g;A++)for(let _=0;_<3;_++){const b=3*A+_,x=3*A+(_+1)%3;s.fromBufferAttribute(u,b),l.fromBufferAttribute(u,x),cX(s,l,r)===!0&&(i.push(s.x,s.y,s.z),i.push(l.x,l.y,l.z))}}this.setAttribute("position",new Ni(i,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function cX(a,e,i){const r=`${a.x},${a.y},${a.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${a.x},${a.y},${a.z}`;return i.has(r)===!0||i.has(s)===!0?!1:(i.add(r),i.add(s),!0)}var uX=Object.freeze({__proto__:null,BoxGeometry:Og,CapsuleGeometry:tL,CircleGeometry:iL,ConeGeometry:nL,CylinderGeometry:RS,DodecahedronGeometry:rL,EdgesGeometry:Nre,ExtrudeGeometry:oL,IcosahedronGeometry:aL,LatheGeometry:nM,OctahedronGeometry:rM,PlaneGeometry:UA,PolyhedronGeometry:ib,RingGeometry:lL,ShapeGeometry:cL,SphereGeometry:DS,TetrahedronGeometry:uL,TorusGeometry:hL,TorusKnotGeometry:dL,TubeGeometry:AL,WireframeGeometry:Vre});class qre extends dl{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Si(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class $re extends qh{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fw extends dl{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Si(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tb,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ff extends Fw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ci(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Si(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Si(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Si(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class nS extends dl{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Si(16777215),this.specular=new Si(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tb,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.combine=KT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wre extends dl{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Si(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tb,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class jre extends dl{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tb,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class r7 extends dl{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tb,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.combine=KT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sM extends dl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Are,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class pL extends dl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Kre extends dl{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Si(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tb,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xre extends Ac{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function lw(a,e,i){return!a||!i&&a.constructor===e?a:typeof e.BYTES_PER_ELEMENT=="number"?new e(a):Array.prototype.slice.call(a)}function Yre(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Jre(a){function e(s,l){return a[s]-a[l]}const i=a.length,r=new Array(i);for(let s=0;s!==i;++s)r[s]=s;return r.sort(e),r}function dH(a,e,i){const r=a.length,s=new a.constructor(r);for(let l=0,u=0;u!==r;++l){const A=i[l]*e;for(let g=0;g!==e;++g)s[u++]=a[A+g]}return s}function s7(a,e,i,r){let s=1,l=a[0];for(;l!==void 0&&l[r]===void 0;)l=a[s++];if(l===void 0)return;let u=l[r];if(u!==void 0)if(Array.isArray(u))do u=l[r],u!==void 0&&(e.push(l.time),i.push.apply(i,u)),l=a[s++];while(l!==void 0);else if(u.toArray!==void 0)do u=l[r],u!==void 0&&(e.push(l.time),u.toArray(i,i.length)),l=a[s++];while(l!==void 0);else do u=l[r],u!==void 0&&(e.push(l.time),i.push(u)),l=a[s++];while(l!==void 0)}function qbe(a,e,i,r,s=30){const l=a.clone();l.name=e;const u=[];for(let g=0;g<l.tracks.length;++g){const _=l.tracks[g],b=_.getValueSize(),x=[],C=[];for(let I=0;I<_.times.length;++I){const F=_.times[I]*s;if(!(F<i||F>=r)){x.push(_.times[I]);for(let L=0;L<b;++L)C.push(_.values[I*b+L])}}x.length!==0&&(_.times=lw(x,_.times.constructor),_.values=lw(C,_.values.constructor),u.push(_))}l.tracks=u;let A=1/0;for(let g=0;g<l.tracks.length;++g)A>l.tracks[g].times[0]&&(A=l.tracks[g].times[0]);for(let g=0;g<l.tracks.length;++g)l.tracks[g].shift(-1*A);return l.resetDuration(),l}function $be(a,e=0,i=a,r=30){r<=0&&(r=30);const s=i.tracks.length,l=e/r;for(let u=0;u<s;++u){const A=i.tracks[u],g=A.ValueTypeName;if(g==="bool"||g==="string")continue;const _=a.tracks.find(function(P){return P.name===A.name&&P.ValueTypeName===g});if(_===void 0)continue;let b=0;const x=A.getValueSize();A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=x/3);let C=0;const I=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(C=I/3);const F=A.times.length-1;let L;if(l<=A.times[0]){const P=b,H=x-b;L=A.values.slice(P,H)}else if(l>=A.times[F]){const P=F*x+b,H=P+x-b;L=A.values.slice(P,H)}else{const P=A.createInterpolant(),H=b,N=x-b;P.evaluate(l),L=P.resultBuffer.slice(H,N)}g==="quaternion"&&new Ys().fromArray(L).normalize().conjugate().toArray(L);const U=_.times.length;for(let P=0;P<U;++P){const H=P*I+C;if(g==="quaternion")Ys.multiplyQuaternionsFlat(_.values,H,L,0,_.values,H);else{const N=I-C*2;for(let z=0;z<N;++z)_.values[H+z]-=L[z]}}}return a.blendMode=Hz,a}const Wbe={convertArray:lw,isTypedArray:Yre,getKeyframeOrder:Jre,sortedArray:dH,flattenJSON:s7,subclip:qbe,makeClipAdditive:$be};class FS{constructor(e,i,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new i.constructor(r),this.sampleValues=i,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const i=this.parameterPositions;let r=this._cachedIndex,s=i[r],l=i[r-1];e:{t:{let u;i:{n:if(!(e<s)){for(let A=r+2;;){if(s===void 0){if(e<l)break n;return r=i.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===A)break;if(l=s,s=i[++r],e<s)break t}u=i.length;break i}if(!(e>=l)){const A=i[1];e<A&&(r=2,l=A);for(let g=r-2;;){if(l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===g)break;if(s=l,l=i[--r-1],e>=l)break t}u=r,r=0;break i}break e}for(;r<u;){const A=r+u>>>1;e<i[A]?u=A:r=A+1}if(s=i[r],l=i[r-1],l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=i.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,l,s)}return this.interpolate_(r,l,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const i=this.resultBuffer,r=this.sampleValues,s=this.valueSize,l=e*s;for(let u=0;u!==s;++u)i[u]=r[l+u];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Zre extends FS{constructor(e,i,r,s){super(e,i,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ow,endingEnd:ow}}intervalChanged_(e,i,r){const s=this.parameterPositions;let l=e-2,u=e+1,A=s[l],g=s[u];if(A===void 0)switch(this.getSettings_().endingStart){case aw:l=e,A=2*i-r;break;case wT:l=s.length-2,A=i+s[l]-s[l+1];break;default:l=e,A=r}if(g===void 0)switch(this.getSettings_().endingEnd){case aw:u=e,g=2*r-i;break;case wT:u=1,g=r+s[1]-s[0];break;default:u=e-1,g=i}const _=(r-i)*.5,b=this.valueSize;this._weightPrev=_/(i-A),this._weightNext=_/(g-r),this._offsetPrev=l*b,this._offsetNext=u*b}interpolate_(e,i,r,s){const l=this.resultBuffer,u=this.sampleValues,A=this.valueSize,g=e*A,_=g-A,b=this._offsetPrev,x=this._offsetNext,C=this._weightPrev,I=this._weightNext,F=(r-i)/(s-i),L=F*F,U=L*F,P=-C*U+2*C*L-C*F,H=(1+C)*U+(-1.5-2*C)*L+(-.5+C)*F+1,N=(-1-I)*U+(1.5+I)*L+.5*F,z=I*U-I*L;for(let W=0;W!==A;++W)l[W]=P*u[b+W]+H*u[_+W]+N*u[g+W]+z*u[x+W];return l}}class o7 extends FS{constructor(e,i,r,s){super(e,i,r,s)}interpolate_(e,i,r,s){const l=this.resultBuffer,u=this.sampleValues,A=this.valueSize,g=e*A,_=g-A,b=(r-i)/(s-i),x=1-b;for(let C=0;C!==A;++C)l[C]=u[_+C]*x+u[g+C]*b;return l}}class ese extends FS{constructor(e,i,r,s){super(e,i,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qg{constructor(e,i,r,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=lw(i,this.TimeBufferType),this.values=lw(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const i=e.constructor;let r;if(i.toJSON!==this.toJSON)r=i.toJSON(e);else{r={name:e.name,times:lw(e.times,Array),values:lw(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new ese(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new o7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Zre(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let i;switch(e){case Mw:i=this.InterpolantFactoryMethodDiscrete;break;case Rw:i=this.InterpolantFactoryMethodLinear;break;case tU:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Mw;case this.InterpolantFactoryMethodLinear:return Rw;case this.InterpolantFactoryMethodSmooth:return tU}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const i=this.times;for(let r=0,s=i.length;r!==s;++r)i[r]+=e}return this}scale(e){if(e!==1){const i=this.times;for(let r=0,s=i.length;r!==s;++r)i[r]*=e}return this}trim(e,i){const r=this.times,s=r.length;let l=0,u=s-1;for(;l!==s&&r[l]<e;)++l;for(;u!==-1&&r[u]>i;)--u;if(++u,l!==0||u!==s){l>=u&&(u=Math.max(u,1),l=u-1);const A=this.getValueSize();this.times=r.slice(l,u),this.values=this.values.slice(l*A,u*A)}return this}validate(){let e=!0;const i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,l=r.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let A=0;A!==l;A++){const g=r[A];if(typeof g=="number"&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,A,g),e=!1;break}if(u!==null&&u>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,A,g,u),e=!1;break}u=g}if(s!==void 0&&Yre(s))for(let A=0,g=s.length;A!==g;++A){const _=s[A];if(isNaN(_)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,A,_),e=!1;break}}return e}optimize(){const e=this.times.slice(),i=this.values.slice(),r=this.getValueSize(),s=this.getInterpolation()===tU,l=e.length-1;let u=1;for(let A=1;A<l;++A){let g=!1;const _=e[A],b=e[A+1];if(_!==b&&(A!==1||_!==e[0]))if(s)g=!0;else{const x=A*r,C=x-r,I=x+r;for(let F=0;F!==r;++F){const L=i[x+F];if(L!==i[C+F]||L!==i[I+F]){g=!0;break}}}if(g){if(A!==u){e[u]=e[A];const x=A*r,C=u*r;for(let I=0;I!==r;++I)i[C+I]=i[x+I]}++u}}if(l>0){e[u]=e[l];for(let A=l*r,g=u*r,_=0;_!==r;++_)i[g+_]=i[A+_];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=i.slice(0,u*r)):(this.times=e,this.values=i),this}clone(){const e=this.times.slice(),i=this.values.slice(),r=this.constructor,s=new r(this.name,e,i);return s.createInterpolant=this.createInterpolant,s}}Qg.prototype.TimeBufferType=Float32Array;Qg.prototype.ValueBufferType=Float32Array;Qg.prototype.DefaultInterpolation=Rw;class Vw extends Qg{constructor(e,i,r){super(e,i,r)}}Vw.prototype.ValueTypeName="bool";Vw.prototype.ValueBufferType=Array;Vw.prototype.DefaultInterpolation=Mw;Vw.prototype.InterpolantFactoryMethodLinear=void 0;Vw.prototype.InterpolantFactoryMethodSmooth=void 0;class a7 extends Qg{}a7.prototype.ValueTypeName="color";class Ky extends Qg{}Ky.prototype.ValueTypeName="number";class tse extends FS{constructor(e,i,r,s){super(e,i,r,s)}interpolate_(e,i,r,s){const l=this.resultBuffer,u=this.sampleValues,A=this.valueSize,g=(r-i)/(s-i);let _=e*A;for(let b=_+A;_!==b;_+=4)Ys.slerpFlat(l,0,u,_-A,u,_,g);return l}}class qv extends Qg{InterpolantFactoryMethodLinear(e){return new tse(this.times,this.values,this.getValueSize(),e)}}qv.prototype.ValueTypeName="quaternion";qv.prototype.InterpolantFactoryMethodSmooth=void 0;class qw extends Qg{constructor(e,i,r){super(e,i,r)}}qw.prototype.ValueTypeName="string";qw.prototype.ValueBufferType=Array;qw.prototype.DefaultInterpolation=Mw;qw.prototype.InterpolantFactoryMethodLinear=void 0;qw.prototype.InterpolantFactoryMethodSmooth=void 0;class Xy extends Qg{}Xy.prototype.ValueTypeName="vector";class Uw{constructor(e="",i=-1,r=[],s=$k){this.name=e,this.tracks=r,this.duration=i,this.blendMode=s,this.uuid=gp(),this.duration<0&&this.resetDuration()}static parse(e){const i=[],r=e.tracks,s=1/(e.fps||1);for(let u=0,A=r.length;u!==A;++u)i.push(Kbe(r[u]).scale(s));const l=new this(e.name,e.duration,i,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const i=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:i,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,u=r.length;l!==u;++l)i.push(Qg.toJSON(r[l]));return s}static CreateFromMorphTargetSequence(e,i,r,s){const l=i.length,u=[];for(let A=0;A<l;A++){let g=[],_=[];g.push((A+l-1)%l,A,(A+1)%l),_.push(0,1,0);const b=Jre(g);g=dH(g,1,b),_=dH(_,1,b),!s&&g[0]===0&&(g.push(l),_.push(_[0])),u.push(new Ky(".morphTargetInfluences["+i[A].name+"]",g,_).scale(1/r))}return new this(e,-1,u)}static findByName(e,i){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===i)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,i,r){const s={},l=/^([\w-]*?)([\d]+)$/;for(let A=0,g=e.length;A<g;A++){const _=e[A],b=_.name.match(l);if(b&&b.length>1){const x=b[1];let C=s[x];C||(s[x]=C=[]),C.push(_)}}const u=[];for(const A in s)u.push(this.CreateFromMorphTargetSequence(A,s[A],i,r));return u}static parseAnimation(e,i){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(x,C,I,F,L){if(I.length!==0){const U=[],P=[];s7(I,U,P,F),U.length!==0&&L.push(new x(C,U,P))}},s=[],l=e.name||"default",u=e.fps||30,A=e.blendMode;let g=e.length||-1;const _=e.hierarchy||[];for(let x=0;x<_.length;x++){const C=_[x].keys;if(!(!C||C.length===0))if(C[0].morphTargets){const I={};let F;for(F=0;F<C.length;F++)if(C[F].morphTargets)for(let L=0;L<C[F].morphTargets.length;L++)I[C[F].morphTargets[L]]=-1;for(const L in I){const U=[],P=[];for(let H=0;H!==C[F].morphTargets.length;++H){const N=C[F];U.push(N.time),P.push(N.morphTarget===L?1:0)}s.push(new Ky(".morphTargetInfluence["+L+"]",U,P))}g=I.length*u}else{const I=".bones["+i[x].name+"]";r(Xy,I+".position",C,"pos",s),r(qv,I+".quaternion",C,"rot",s),r(Xy,I+".scale",C,"scl",s)}}return s.length===0?null:new this(l,g,s,A)}resetDuration(){const e=this.tracks;let i=0;for(let r=0,s=e.length;r!==s;++r){const l=this.tracks[r];i=Math.max(i,l.times[l.times.length-1])}return this.duration=i,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let i=0;i<this.tracks.length;i++)e=e&&this.tracks[i].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function jbe(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ky;case"vector":case"vector2":case"vector3":case"vector4":return Xy;case"color":return a7;case"quaternion":return qv;case"bool":case"boolean":return Vw;case"string":return qw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function Kbe(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=jbe(a.type);if(a.times===void 0){const i=[],r=[];s7(a.keys,i,r,"value"),a.times=i,a.values=r}return e.parse!==void 0?e.parse(a):new e(a.name,a.times,a.values,a.interpolation)}const Uv={enabled:!1,files:{},add:function(a,e){this.enabled!==!1&&(this.files[a]=e)},get:function(a){if(this.enabled!==!1)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class fL{constructor(e,i,r){const s=this;let l=!1,u=0,A=0,g;const _=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=r,this.itemStart=function(b){A++,l===!1&&s.onStart!==void 0&&s.onStart(b,u,A),l=!0},this.itemEnd=function(b){u++,s.onProgress!==void 0&&s.onProgress(b,u,A),u===A&&(l=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(b){s.onError!==void 0&&s.onError(b)},this.resolveURL=function(b){return g?g(b):b},this.setURLModifier=function(b){return g=b,this},this.addHandler=function(b,x){return _.push(b,x),this},this.removeHandler=function(b){const x=_.indexOf(b);return x!==-1&&_.splice(x,2),this},this.getHandler=function(b){for(let x=0,C=_.length;x<C;x+=2){const I=_[x],F=_[x+1];if(I.global&&(I.lastIndex=0),I.test(b))return F}return null}}}const qE=new fL;class sa{constructor(e){this.manager=e!==void 0?e:qE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){const r=this;return new Promise(function(s,l){r.load(e,s,i,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}sa.DEFAULT_MATERIAL_NAME="__DEFAULT";const pv={};class Xbe extends Error{constructor(e,i){super(e),this.response=i}}class Al extends sa{constructor(e){super(e)}load(e,i,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=Uv.get(e);if(l!==void 0)return this.manager.itemStart(e),setTimeout(()=>{i&&i(l),this.manager.itemEnd(e)},0),l;if(pv[e]!==void 0){pv[e].push({onLoad:i,onProgress:r,onError:s});return}pv[e]=[],pv[e].push({onLoad:i,onProgress:r,onError:s});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),A=this.mimeType,g=this.responseType;fetch(u).then(_=>{if(_.status===200||_.status===0){if(_.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||_.body===void 0||_.body.getReader===void 0)return _;const b=pv[e],x=_.body.getReader(),C=_.headers.get("X-File-Size")||_.headers.get("Content-Length"),I=C?parseInt(C):0,F=I!==0;let L=0;const U=new ReadableStream({start(P){H();function H(){x.read().then(({done:N,value:z})=>{if(N)P.close();else{L+=z.byteLength;const W=new ProgressEvent("progress",{lengthComputable:F,loaded:L,total:I});for(let j=0,J=b.length;j<J;j++){const ie=b[j];ie.onProgress&&ie.onProgress(W)}P.enqueue(z),H()}},N=>{P.error(N)})}}});return new Response(U)}else throw new Xbe(`fetch for "${_.url}" responded with ${_.status}: ${_.statusText}`,_)}).then(_=>{switch(g){case"arraybuffer":return _.arrayBuffer();case"blob":return _.blob();case"document":return _.text().then(b=>new DOMParser().parseFromString(b,A));case"json":return _.json();default:if(A===void 0)return _.text();{const x=/charset="?([^;"\s]*)"?/i.exec(A),C=x&&x[1]?x[1].toLowerCase():void 0,I=new TextDecoder(C);return _.arrayBuffer().then(F=>I.decode(F))}}}).then(_=>{Uv.add(e,_);const b=pv[e];delete pv[e];for(let x=0,C=b.length;x<C;x++){const I=b[x];I.onLoad&&I.onLoad(_)}}).catch(_=>{const b=pv[e];if(b===void 0)throw this.manager.itemError(e),_;delete pv[e];for(let x=0,C=b.length;x<C;x++){const I=b[x];I.onError&&I.onError(_)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ybe extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=new Al(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(A){try{i(l.parse(JSON.parse(A)))}catch(g){s?s(g):console.error(g),l.manager.itemError(e)}},r,s)}parse(e){const i=[];for(let r=0;r<e.length;r++){const s=Uw.parse(e[r]);i.push(s)}return i}}class Jbe extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=[],A=new Ov,g=new Al(this.manager);g.setPath(this.path),g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setWithCredentials(l.withCredentials);let _=0;function b(x){g.load(e[x],function(C){const I=l.parse(C,!0);u[x]={width:I.width,height:I.height,format:I.format,mipmaps:I.mipmaps},_+=1,_===6&&(I.mipmapCount===1&&(A.minFilter=Or),A.image=u,A.format=I.format,A.needsUpdate=!0,i&&i(A))},r,s)}if(Array.isArray(e))for(let x=0,C=e.length;x<C;++x)b(x);else g.load(e,function(x){const C=l.parse(x,!0);if(C.isCubemap){const I=C.mipmaps.length/C.mipmapCount;for(let F=0;F<I;F++){u[F]={mipmaps:[]};for(let L=0;L<C.mipmapCount;L++)u[F].mipmaps.push(C.mipmaps[F*C.mipmapCount+L]),u[F].format=C.format,u[F].width=C.width,u[F].height=C.height}A.image=u}else A.image.width=C.width,A.image.height=C.height,A.mipmaps=C.mipmaps;C.mipmapCount===1&&(A.minFilter=Or),A.format=C.format,A.needsUpdate=!0,i&&i(A)},r,s);return A}}class RT extends sa{constructor(e){super(e)}load(e,i,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,u=Uv.get(e);if(u!==void 0)return l.manager.itemStart(e),setTimeout(function(){i&&i(u),l.manager.itemEnd(e)},0),u;const A=ST("img");function g(){b(),Uv.add(e,this),i&&i(this),l.manager.itemEnd(e)}function _(x){b(),s&&s(x),l.manager.itemError(e),l.manager.itemEnd(e)}function b(){A.removeEventListener("load",g,!1),A.removeEventListener("error",_,!1)}return A.addEventListener("load",g,!1),A.addEventListener("error",_,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(A.crossOrigin=this.crossOrigin),l.manager.itemStart(e),A.src=e,A}}class Zbe extends sa{constructor(e){super(e)}load(e,i,r,s){const l=new eM;l.colorSpace=rr;const u=new RT(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let A=0;function g(_){u.load(e[_],function(b){l.images[_]=b,A++,A===6&&(l.needsUpdate=!0,i&&i(l))},void 0,s)}for(let _=0;_<e.length;++_)g(_);return l}}class ise extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=new Cf,A=new Al(this.manager);return A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(l.withCredentials),A.load(e,function(g){let _;try{_=l.parse(g)}catch(b){if(s!==void 0)s(b);else{console.error(b);return}}_.image!==void 0?u.image=_.image:_.data!==void 0&&(u.image.width=_.width,u.image.height=_.height,u.image.data=_.data),u.wrapS=_.wrapS!==void 0?_.wrapS:$o,u.wrapT=_.wrapT!==void 0?_.wrapT:$o,u.magFilter=_.magFilter!==void 0?_.magFilter:Or,u.minFilter=_.minFilter!==void 0?_.minFilter:Or,u.anisotropy=_.anisotropy!==void 0?_.anisotropy:1,_.colorSpace!==void 0&&(u.colorSpace=_.colorSpace),_.flipY!==void 0&&(u.flipY=_.flipY),_.format!==void 0&&(u.format=_.format),_.type!==void 0&&(u.type=_.type),_.mipmaps!==void 0&&(u.mipmaps=_.mipmaps,u.minFilter=Ju),_.mipmapCount===1&&(u.minFilter=Or),_.generateMipmaps!==void 0&&(u.generateMipmaps=_.generateMipmaps),u.needsUpdate=!0,i&&i(u,_)},r,s),u}}class gL extends sa{constructor(e){super(e)}load(e,i,r,s){const l=new Js,u=new RT(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(A){l.image=A,l.needsUpdate=!0,i!==void 0&&i(l)},r,s),l}}class nb extends xr{constructor(e,i=1){super(),this.isLight=!0,this.type="Light",this.color=new Si(e),this.intensity=i}dispose(){}copy(e,i){return super.copy(e,i),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const i=super.toJSON(e);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(i.object.target=this.target.uuid),i}}class nse extends nb{constructor(e,i,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Si(i)}copy(e,i){return super.copy(e,i),this.groundColor.copy(e.groundColor),this}}const w6=new Ki,hX=new Fe,dX=new Fe;class l7{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ci(512,512),this.map=null,this.mapPass=null,this.matrix=new Ki,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iM,this._frameExtents=new ci(1,1),this._viewportCount=1,this._viewports=[new Vr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const i=this.camera,r=this.matrix;hX.setFromMatrixPosition(e.matrixWorld),i.position.copy(hX),dX.setFromMatrixPosition(e.target.matrixWorld),i.lookAt(dX),i.updateMatrixWorld(),w6.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(w6),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(w6)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class e1e extends l7{constructor(){super(new xo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const i=this.camera,r=dS*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,l=e.distance||i.far;(r!==i.fov||s!==i.aspect||l!==i.far)&&(i.fov=r,i.aspect=s,i.far=l,i.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class mL extends nb{constructor(e,i,r=0,s=Math.PI/3,l=0,u=2){super(e,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.target=new xr,this.distance=r,this.angle=s,this.penumbra=l,this.decay=u,this.map=null,this.shadow=new e1e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const AX=new Ki,rI=new Fe,x6=new Fe;class t1e extends l7{constructor(){super(new xo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ci(4,2),this._viewportCount=6,this._viewports=[new Vr(2,1,1,1),new Vr(0,1,1,1),new Vr(3,1,1,1),new Vr(1,1,1,1),new Vr(3,0,1,1),new Vr(1,0,1,1)],this._cubeDirections=[new Fe(1,0,0),new Fe(-1,0,0),new Fe(0,0,1),new Fe(0,0,-1),new Fe(0,1,0),new Fe(0,-1,0)],this._cubeUps=[new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,0,1),new Fe(0,0,-1)]}updateMatrices(e,i=0){const r=this.camera,s=this.matrix,l=e.distance||r.far;l!==r.far&&(r.far=l,r.updateProjectionMatrix()),rI.setFromMatrixPosition(e.matrixWorld),r.position.copy(rI),x6.copy(r.position),x6.add(this._cubeDirections[i]),r.up.copy(this._cubeUps[i]),r.lookAt(x6),r.updateMatrixWorld(),s.makeTranslation(-rI.x,-rI.y,-rI.z),AX.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AX)}}class gS extends nb{constructor(e,i,r=0,s=2){super(e,i),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new t1e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class DA extends Kk{constructor(e=-1,i=1,r=1,s=-1,l=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=i,this.top=r,this.bottom=s,this.near=l,this.far=u,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,i,r,s,l,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=s,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let l=r-e,u=r+e,A=s+i,g=s-i;if(this.view!==null&&this.view.enabled){const _=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=_*this.view.offsetX,u=l+_*this.view.width,A-=b*this.view.offsetY,g=A-b*this.view.height}this.projectionMatrix.makeOrthographic(l,u,A,g,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}class i1e extends l7{constructor(){super(new DA(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oM extends nb{constructor(e,i){super(e,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.target=new xr,this.shadow=new i1e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class c7 extends nb{constructor(e,i){super(e,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class rse extends nb{constructor(e,i,r=10,s=10){super(e,i),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const i=super.toJSON(e);return i.object.width=this.width,i.object.height=this.height,i}}class sse{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Fe)}set(e){for(let i=0;i<9;i++)this.coefficients[i].copy(e[i]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,i){const r=e.x,s=e.y,l=e.z,u=this.coefficients;return i.copy(u[0]).multiplyScalar(.282095),i.addScaledVector(u[1],.488603*s),i.addScaledVector(u[2],.488603*l),i.addScaledVector(u[3],.488603*r),i.addScaledVector(u[4],1.092548*(r*s)),i.addScaledVector(u[5],1.092548*(s*l)),i.addScaledVector(u[6],.315392*(3*l*l-1)),i.addScaledVector(u[7],1.092548*(r*l)),i.addScaledVector(u[8],.546274*(r*r-s*s)),i}getIrradianceAt(e,i){const r=e.x,s=e.y,l=e.z,u=this.coefficients;return i.copy(u[0]).multiplyScalar(.886227),i.addScaledVector(u[1],2*.511664*s),i.addScaledVector(u[2],2*.511664*l),i.addScaledVector(u[3],2*.511664*r),i.addScaledVector(u[4],2*.429043*r*s),i.addScaledVector(u[5],2*.429043*s*l),i.addScaledVector(u[6],.743125*l*l-.247708),i.addScaledVector(u[7],2*.429043*r*l),i.addScaledVector(u[8],.429043*(r*r-s*s)),i}add(e){for(let i=0;i<9;i++)this.coefficients[i].add(e.coefficients[i]);return this}addScaledSH(e,i){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],i);return this}scale(e){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(e);return this}lerp(e,i){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],i);return this}equals(e){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(e.coefficients[i]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,i=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(e,i+s*3);return this}toArray(e=[],i=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(e,i+s*3);return e}static getBasisAt(e,i){const r=e.x,s=e.y,l=e.z;i[0]=.282095,i[1]=.488603*s,i[2]=.488603*l,i[3]=.488603*r,i[4]=1.092548*r*s,i[5]=1.092548*s*l,i[6]=.315392*(3*l*l-1),i[7]=1.092548*r*l,i[8]=.546274*(r*r-s*s)}}class u7 extends nb{constructor(e=new sse,i=1){super(void 0,i),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const i=super.toJSON(e);return i.object.sh=this.sh.toArray(),i}}class _L extends sa{constructor(e){super(e),this.textures={}}load(e,i,r,s){const l=this,u=new Al(l.manager);u.setPath(l.path),u.setRequestHeader(l.requestHeader),u.setWithCredentials(l.withCredentials),u.load(e,function(A){try{i(l.parse(JSON.parse(A)))}catch(g){s?s(g):console.error(g),l.manager.itemError(e)}},r,s)}parse(e){const i=this.textures;function r(l){return i[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),i[l]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Si().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const l in e.uniforms){const u=e.uniforms[l];switch(s.uniforms[l]={},u.type){case"t":s.uniforms[l].value=r(u.value);break;case"c":s.uniforms[l].value=new Si().setHex(u.value);break;case"v2":s.uniforms[l].value=new ci().fromArray(u.value);break;case"v3":s.uniforms[l].value=new Fe().fromArray(u.value);break;case"v4":s.uniforms[l].value=new Vr().fromArray(u.value);break;case"m3":s.uniforms[l].value=new nr().fromArray(u.value);break;case"m4":s.uniforms[l].value=new Ki().fromArray(u.value);break;default:s.uniforms[l].value=u.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const l in e.extensions)s.extensions[l]=e.extensions[l];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=r(e.map)),e.matcap!==void 0&&(s.matcap=r(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let l=e.normalScale;Array.isArray(l)===!1&&(l=[l,l]),s.normalScale=new ci().fromArray(l)}return e.displacementMap!==void 0&&(s.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=r(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new ci().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=r(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return _L.createMaterialFromType(e)}static createMaterialFromType(e){const i={ShadowMaterial:qre,SpriteMaterial:jz,RawShaderMaterial:$re,ShaderMaterial:qh,PointsMaterial:Ny,MeshPhysicalMaterial:Ff,MeshStandardMaterial:Fw,MeshPhongMaterial:nS,MeshToonMaterial:Wre,MeshNormalMaterial:jre,MeshLambertMaterial:r7,MeshDepthMaterial:sM,MeshDistanceMaterial:pL,MeshBasicMaterial:Pc,MeshMatcapMaterial:Kre,LineDashedMaterial:Xre,LineBasicMaterial:Ac,Material:dl};return new i[e]}}class Qv{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let i="";for(let r=0,s=e.length;r<s;r++)i+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(e){const i=e.lastIndexOf("/");return i===-1?"./":e.slice(0,i+1)}static resolveURL(e,i){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(e)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:i+e)}}class h7 extends Ln{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ose extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=new Al(l.manager);u.setPath(l.path),u.setRequestHeader(l.requestHeader),u.setWithCredentials(l.withCredentials),u.load(e,function(A){try{i(l.parse(JSON.parse(A)))}catch(g){s?s(g):console.error(g),l.manager.itemError(e)}},r,s)}parse(e){const i={},r={};function s(I,F){if(i[F]!==void 0)return i[F];const U=I.interleavedBuffers[F],P=l(I,U.buffer),H=GE(U.type,P),N=new tM(H,U.stride);return N.uuid=U.uuid,i[F]=N,N}function l(I,F){if(r[F]!==void 0)return r[F];const U=I.arrayBuffers[F],P=new Uint32Array(U).buffer;return r[F]=P,P}const u=e.isInstancedBufferGeometry?new h7:new Ln,A=e.data.index;if(A!==void 0){const I=GE(A.type,A.array);u.setIndex(new fr(I,1))}const g=e.data.attributes;for(const I in g){const F=g[I];let L;if(F.isInterleavedBufferAttribute){const U=s(e.data,F.data);L=new Wy(U,F.itemSize,F.offset,F.normalized)}else{const U=GE(F.type,F.array),P=F.isInstancedBufferAttribute?jy:fr;L=new P(U,F.itemSize,F.normalized)}F.name!==void 0&&(L.name=F.name),F.usage!==void 0&&L.setUsage(F.usage),u.setAttribute(I,L)}const _=e.data.morphAttributes;if(_)for(const I in _){const F=_[I],L=[];for(let U=0,P=F.length;U<P;U++){const H=F[U];let N;if(H.isInterleavedBufferAttribute){const z=s(e.data,H.data);N=new Wy(z,H.itemSize,H.offset,H.normalized)}else{const z=GE(H.type,H.array);N=new fr(z,H.itemSize,H.normalized)}H.name!==void 0&&(N.name=H.name),L.push(N)}u.morphAttributes[I]=L}e.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const x=e.data.groups||e.data.drawcalls||e.data.offsets;if(x!==void 0)for(let I=0,F=x.length;I!==F;++I){const L=x[I];u.addGroup(L.start,L.count,L.materialIndex)}const C=e.data.boundingSphere;if(C!==void 0){const I=new Fe;C.center!==void 0&&I.fromArray(C.center),u.boundingSphere=new dc(I,C.radius)}return e.name&&(u.name=e.name),e.userData&&(u.userData=e.userData),u}}class n1e extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=this.path===""?Qv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||u;const A=new Al(this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(g){let _=null;try{_=JSON.parse(g)}catch(x){s!==void 0&&s(x),console.error("THREE:ObjectLoader: Can't parse "+e+".",x.message);return}const b=_.metadata;if(b===void 0||b.type===void 0||b.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}l.parse(_,i)},r,s)}async loadAsync(e,i){const r=this,s=this.path===""?Qv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const l=new Al(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials);const u=await l.loadAsync(e,i),A=JSON.parse(u),g=A.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(A)}parse(e,i){const r=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,s),u=this.parseImages(e.images,function(){i!==void 0&&i(_)}),A=this.parseTextures(e.textures,u),g=this.parseMaterials(e.materials,A),_=this.parseObject(e.object,l,g,A,r),b=this.parseSkeletons(e.skeletons,_);if(this.bindSkeletons(_,b),this.bindLightTargets(_),i!==void 0){let x=!1;for(const C in u)if(u[C].data instanceof HTMLImageElement){x=!0;break}x===!1&&i(_)}return _}async parseAsync(e){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),l=await this.parseImagesAsync(e.images),u=this.parseTextures(e.textures,l),A=this.parseMaterials(e.materials,u),g=this.parseObject(e.object,s,A,u,i),_=this.parseSkeletons(e.skeletons,g);return this.bindSkeletons(g,_),this.bindLightTargets(g),g}parseShapes(e){const i={};if(e!==void 0)for(let r=0,s=e.length;r<s;r++){const l=new _w().fromJSON(e[r]);i[l.uuid]=l}return i}parseSkeletons(e,i){const r={},s={};if(i.traverse(function(l){l.isBone&&(s[l.uuid]=l)}),e!==void 0)for(let l=0,u=e.length;l<u;l++){const A=new MS().fromJSON(e[l],s);r[A.uuid]=A}return r}parseGeometries(e,i){const r={};if(e!==void 0){const s=new ose;for(let l=0,u=e.length;l<u;l++){let A;const g=e[l];switch(g.type){case"BufferGeometry":case"InstancedBufferGeometry":A=s.parse(g);break;default:g.type in uX?A=uX[g.type].fromJSON(g,i):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${g.type}"`)}A.uuid=g.uuid,g.name!==void 0&&(A.name=g.name),g.userData!==void 0&&(A.userData=g.userData),r[g.uuid]=A}}return r}parseMaterials(e,i){const r={},s={};if(e!==void 0){const l=new _L;l.setTextures(i);for(let u=0,A=e.length;u<A;u++){const g=e[u];r[g.uuid]===void 0&&(r[g.uuid]=l.parse(g)),s[g.uuid]=r[g.uuid]}}return s}parseAnimations(e){const i={};if(e!==void 0)for(let r=0;r<e.length;r++){const s=e[r],l=Uw.parse(s);i[l.uuid]=l}return i}parseImages(e,i){const r=this,s={};let l;function u(g){return r.manager.itemStart(g),l.load(g,function(){r.manager.itemEnd(g)},void 0,function(){r.manager.itemError(g),r.manager.itemEnd(g)})}function A(g){if(typeof g=="string"){const _=g,b=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(_)?_:r.resourcePath+_;return u(b)}else return g.data?{data:GE(g.type,g.data),width:g.width,height:g.height}:null}if(e!==void 0&&e.length>0){const g=new fL(i);l=new RT(g),l.setCrossOrigin(this.crossOrigin);for(let _=0,b=e.length;_<b;_++){const x=e[_],C=x.url;if(Array.isArray(C)){const I=[];for(let F=0,L=C.length;F<L;F++){const U=C[F],P=A(U);P!==null&&(P instanceof HTMLImageElement?I.push(P):I.push(new Cf(P.data,P.width,P.height)))}s[x.uuid]=new Qy(I)}else{const I=A(x.url);s[x.uuid]=new Qy(I)}}}return s}async parseImagesAsync(e){const i=this,r={};let s;async function l(u){if(typeof u=="string"){const A=u,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(A)?A:i.resourcePath+A;return await s.loadAsync(g)}else return u.data?{data:GE(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){s=new RT(this.manager),s.setCrossOrigin(this.crossOrigin);for(let u=0,A=e.length;u<A;u++){const g=e[u],_=g.url;if(Array.isArray(_)){const b=[];for(let x=0,C=_.length;x<C;x++){const I=_[x],F=await l(I);F!==null&&(F instanceof HTMLImageElement?b.push(F):b.push(new Cf(F.data,F.width,F.height)))}r[g.uuid]=new Qy(b)}else{const b=await l(g.url);r[g.uuid]=new Qy(b)}}}return r}parseTextures(e,i){function r(l,u){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),u[l])}const s={};if(e!==void 0)for(let l=0,u=e.length;l<u;l++){const A=e[l];A.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',A.uuid),i[A.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",A.image);const g=i[A.image],_=g.data;let b;Array.isArray(_)?(b=new eM,_.length===6&&(b.needsUpdate=!0)):(_&&_.data?b=new Cf:b=new Js,_&&(b.needsUpdate=!0)),b.source=g,b.uuid=A.uuid,A.name!==void 0&&(b.name=A.name),A.mapping!==void 0&&(b.mapping=r(A.mapping,r1e)),A.channel!==void 0&&(b.channel=A.channel),A.offset!==void 0&&b.offset.fromArray(A.offset),A.repeat!==void 0&&b.repeat.fromArray(A.repeat),A.center!==void 0&&b.center.fromArray(A.center),A.rotation!==void 0&&(b.rotation=A.rotation),A.wrap!==void 0&&(b.wrapS=r(A.wrap[0],pX),b.wrapT=r(A.wrap[1],pX)),A.format!==void 0&&(b.format=A.format),A.internalFormat!==void 0&&(b.internalFormat=A.internalFormat),A.type!==void 0&&(b.type=A.type),A.colorSpace!==void 0&&(b.colorSpace=A.colorSpace),A.minFilter!==void 0&&(b.minFilter=r(A.minFilter,fX)),A.magFilter!==void 0&&(b.magFilter=r(A.magFilter,fX)),A.anisotropy!==void 0&&(b.anisotropy=A.anisotropy),A.flipY!==void 0&&(b.flipY=A.flipY),A.generateMipmaps!==void 0&&(b.generateMipmaps=A.generateMipmaps),A.premultiplyAlpha!==void 0&&(b.premultiplyAlpha=A.premultiplyAlpha),A.unpackAlignment!==void 0&&(b.unpackAlignment=A.unpackAlignment),A.compareFunction!==void 0&&(b.compareFunction=A.compareFunction),A.userData!==void 0&&(b.userData=A.userData),s[A.uuid]=b}return s}parseObject(e,i,r,s,l){let u;function A(C){return i[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",C),i[C]}function g(C){if(C!==void 0){if(Array.isArray(C)){const I=[];for(let F=0,L=C.length;F<L;F++){const U=C[F];r[U]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",U),I.push(r[U])}return I}return r[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",C),r[C]}}function _(C){return s[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",C),s[C]}let b,x;switch(e.type){case"Scene":u=new Tf,e.background!==void 0&&(Number.isInteger(e.background)?u.background=new Si(e.background):u.background=_(e.background)),e.environment!==void 0&&(u.environment=_(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?u.fog=new Jk(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(u.fog=new Yk(e.fog.color,e.fog.density)),e.fog.name!==""&&(u.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(u.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(u.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&u.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":u=new xo(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(u.focus=e.focus),e.zoom!==void 0&&(u.zoom=e.zoom),e.filmGauge!==void 0&&(u.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(u.filmOffset=e.filmOffset),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"OrthographicCamera":u=new DA(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(u.zoom=e.zoom),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"AmbientLight":u=new c7(e.color,e.intensity);break;case"DirectionalLight":u=new oM(e.color,e.intensity),u.target=e.target||"";break;case"PointLight":u=new gS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":u=new rse(e.color,e.intensity,e.width,e.height);break;case"SpotLight":u=new mL(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),u.target=e.target||"";break;case"HemisphereLight":u=new nse(e.color,e.groundColor,e.intensity);break;case"LightProbe":u=new u7().fromJSON(e);break;case"SkinnedMesh":b=A(e.geometry),x=g(e.material),u=new Zk(b,x),e.bindMode!==void 0&&(u.bindMode=e.bindMode),e.bindMatrix!==void 0&&u.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(u.skeleton=e.skeleton);break;case"Mesh":b=A(e.geometry),x=g(e.material),u=new Dr(b,x);break;case"InstancedMesh":b=A(e.geometry),x=g(e.material);const C=e.count,I=e.instanceMatrix,F=e.instanceColor;u=new Kz(b,x,C),u.instanceMatrix=new jy(new Float32Array(I.array),16),F!==void 0&&(u.instanceColor=new jy(new Float32Array(F.array),F.itemSize));break;case"BatchedMesh":b=A(e.geometry),x=g(e.material),u=new Mre(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,x),u.geometry=b,u.perObjectFrustumCulled=e.perObjectFrustumCulled,u.sortObjects=e.sortObjects,u._drawRanges=e.drawRanges,u._reservedRanges=e.reservedRanges,u._visibility=e.visibility,u._active=e.active,u._bounds=e.bounds.map(L=>{const U=new ia;U.min.fromArray(L.boxMin),U.max.fromArray(L.boxMax);const P=new dc;return P.radius=L.sphereRadius,P.center.fromArray(L.sphereCenter),{boxInitialized:L.boxInitialized,box:U,sphereInitialized:L.sphereInitialized,sphere:P}}),u._maxInstanceCount=e.maxInstanceCount,u._maxVertexCount=e.maxVertexCount,u._maxIndexCount=e.maxIndexCount,u._geometryInitialized=e.geometryInitialized,u._geometryCount=e.geometryCount,u._matricesTexture=_(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(u._colorsTexture=_(e.colorsTexture.uuid));break;case"LOD":u=new Tre;break;case"Line":u=new Mf(A(e.geometry),g(e.material));break;case"LineLoop":u=new Xz(A(e.geometry),g(e.material));break;case"LineSegments":u=new mp(A(e.geometry),g(e.material));break;case"PointCloud":case"Points":u=new iS(A(e.geometry),g(e.material));break;case"Sprite":u=new Ire(g(e.material));break;case"Group":u=new Ap;break;case"Bone":u=new fS;break;default:u=new xr}if(u.uuid=e.uuid,e.name!==void 0&&(u.name=e.name),e.matrix!==void 0?(u.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=e.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(e.position!==void 0&&u.position.fromArray(e.position),e.rotation!==void 0&&u.rotation.fromArray(e.rotation),e.quaternion!==void 0&&u.quaternion.fromArray(e.quaternion),e.scale!==void 0&&u.scale.fromArray(e.scale)),e.up!==void 0&&u.up.fromArray(e.up),e.castShadow!==void 0&&(u.castShadow=e.castShadow),e.receiveShadow!==void 0&&(u.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(u.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(u.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(u.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(u.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(u.visible=e.visible),e.frustumCulled!==void 0&&(u.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(u.renderOrder=e.renderOrder),e.userData!==void 0&&(u.userData=e.userData),e.layers!==void 0&&(u.layers.mask=e.layers),e.children!==void 0){const C=e.children;for(let I=0;I<C.length;I++)u.add(this.parseObject(C[I],i,r,s,l))}if(e.animations!==void 0){const C=e.animations;for(let I=0;I<C.length;I++){const F=C[I];u.animations.push(l[F])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(u.autoUpdate=e.autoUpdate);const C=e.levels;for(let I=0;I<C.length;I++){const F=C[I],L=u.getObjectByProperty("uuid",F.object);L!==void 0&&u.addLevel(L,F.distance,F.hysteresis)}}return u}bindSkeletons(e,i){Object.keys(i).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const s=i[r.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(s,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(i){if(i.isDirectionalLight||i.isSpotLight){const r=i.target,s=e.getObjectByProperty("uuid",r);s!==void 0?i.target=s:i.target=new xr}})}}const r1e={UVMapping:qy,CubeReflectionMapping:Gv,CubeRefractionMapping:$y,EquirectangularReflectionMapping:Bw,EquirectangularRefractionMapping:pT,CubeUVReflectionMapping:TS},pX={RepeatWrapping:Vd,ClampToEdgeWrapping:$o,MirroredRepeatWrapping:Vv},fX={NearestFilter:Da,NearestMipmapNearestFilter:zw,NearestMipmapLinearFilter:qm,LinearFilter:Or,LinearMipmapNearestFilter:Lv,LinearMipmapLinearFilter:Ju};class ase extends sa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,i,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,u=Uv.get(e);if(u!==void 0){if(l.manager.itemStart(e),u.then){u.then(_=>{i&&i(_),l.manager.itemEnd(e)}).catch(_=>{s&&s(_)});return}return setTimeout(function(){i&&i(u),l.manager.itemEnd(e)},0),u}const A={};A.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",A.headers=this.requestHeader;const g=fetch(e,A).then(function(_){return _.blob()}).then(function(_){return createImageBitmap(_,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(_){return Uv.add(e,_),i&&i(_),l.manager.itemEnd(e),_}).catch(function(_){s&&s(_),Uv.remove(e),l.manager.itemError(e),l.manager.itemEnd(e)});Uv.add(e,g),l.manager.itemStart(e)}}let jD;class d7{static getContext(){return jD===void 0&&(jD=new(window.AudioContext||window.webkitAudioContext)),jD}static setContext(e){jD=e}}class s1e extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=new Al(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(g){try{const _=g.slice(0);d7.getContext().decodeAudioData(_,function(x){i(x)}).catch(A)}catch(_){A(_)}},r,s);function A(g){s?s(g):console.error(g),l.manager.itemError(e)}}}const gX=new Ki,mX=new Ki,F1=new Ki;class o1e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const i=this._cache;if(i.focus!==e.focus||i.fov!==e.fov||i.aspect!==e.aspect*this.aspect||i.near!==e.near||i.far!==e.far||i.zoom!==e.zoom||i.eyeSep!==this.eyeSep){i.focus=e.focus,i.fov=e.fov,i.aspect=e.aspect*this.aspect,i.near=e.near,i.far=e.far,i.zoom=e.zoom,i.eyeSep=this.eyeSep,F1.copy(e.projectionMatrix);const s=i.eyeSep/2,l=s*i.near/i.focus,u=i.near*Math.tan(mw*i.fov*.5)/i.zoom;let A,g;mX.elements[12]=-s,gX.elements[12]=s,A=-u*i.aspect+l,g=u*i.aspect+l,F1.elements[0]=2*i.near/(g-A),F1.elements[8]=(g+A)/(g-A),this.cameraL.projectionMatrix.copy(F1),A=-u*i.aspect-l,g=u*i.aspect-l,F1.elements[0]=2*i.near/(g-A),F1.elements[8]=(g+A)/(g-A),this.cameraR.projectionMatrix.copy(F1)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(mX),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(gX)}}class lse extends xo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class A7{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_X(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=_X();e=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=e}return e}}function _X(){return performance.now()}const U1=new Fe,vX=new Ys,a1e=new Fe,k1=new Fe;class l1e extends xr{constructor(){super(),this.type="AudioListener",this.context=d7.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new A7}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const i=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(U1,vX,a1e),k1.set(0,0,-1).applyQuaternion(vX),i.positionX){const s=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(U1.x,s),i.positionY.linearRampToValueAtTime(U1.y,s),i.positionZ.linearRampToValueAtTime(U1.z,s),i.forwardX.linearRampToValueAtTime(k1.x,s),i.forwardY.linearRampToValueAtTime(k1.y,s),i.forwardZ.linearRampToValueAtTime(k1.z,s),i.upX.linearRampToValueAtTime(r.x,s),i.upY.linearRampToValueAtTime(r.y,s),i.upZ.linearRampToValueAtTime(r.z,s)}else i.setPosition(U1.x,U1.y,U1.z),i.setOrientation(k1.x,k1.y,k1.z,r.x,r.y,r.z)}}class cse extends xr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,i){return super.copy(e,i),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const L1=new Fe,yX=new Ys,c1e=new Fe,P1=new Fe;class u1e extends cse{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,i,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(L1,yX,c1e),P1.set(0,0,1).applyQuaternion(yX);const i=this.panner;if(i.positionX){const r=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(L1.x,r),i.positionY.linearRampToValueAtTime(L1.y,r),i.positionZ.linearRampToValueAtTime(L1.z,r),i.orientationX.linearRampToValueAtTime(P1.x,r),i.orientationY.linearRampToValueAtTime(P1.y,r),i.orientationZ.linearRampToValueAtTime(P1.z,r)}else i.setPosition(L1.x,L1.y,L1.z),i.setOrientation(P1.x,P1.y,P1.z)}}class h1e{constructor(e,i=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const i=this.getFrequencyData();for(let r=0;r<i.length;r++)e+=i[r];return e/i.length}}class use{constructor(e,i,r){this.binding=e,this.valueSize=r;let s,l,u;switch(i){case"quaternion":s=this._slerp,l=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,l=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,l=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=l,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,i){const r=this.buffer,s=this.valueSize,l=e*s+s;let u=this.cumulativeWeight;if(u===0){for(let A=0;A!==s;++A)r[l+A]=r[A];u=i}else{u+=i;const A=i/u;this._mixBufferRegion(r,l,0,A,s)}this.cumulativeWeight=u}accumulateAdditive(e){const i=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,s,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const i=this.valueSize,r=this.buffer,s=e*i+i,l=this.cumulativeWeight,u=this.cumulativeWeightAdditive,A=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){const g=i*this._origIndex;this._mixBufferRegion(r,s,g,1-l,i)}u>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*i,1,i);for(let g=i,_=i+i;g!==_;++g)if(r[g]!==r[g+i]){A.setValue(r,s);break}}saveOriginalState(){const e=this.binding,i=this.buffer,r=this.valueSize,s=r*this._origIndex;e.getValue(i,s);for(let l=r,u=s;l!==u;++l)i[l]=i[s+l%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,i=e+this.valueSize;for(let r=e;r<i;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[i+r]=this.buffer[e+r]}_select(e,i,r,s,l){if(s>=.5)for(let u=0;u!==l;++u)e[i+u]=e[r+u]}_slerp(e,i,r,s){Ys.slerpFlat(e,i,e,i,e,r,s)}_slerpAdditive(e,i,r,s,l){const u=this._workIndex*l;Ys.multiplyQuaternionsFlat(e,u,e,i,e,r),Ys.slerpFlat(e,i,e,i,e,u,s)}_lerp(e,i,r,s,l){const u=1-s;for(let A=0;A!==l;++A){const g=i+A;e[g]=e[g]*u+e[r+A]*s}}_lerpAdditive(e,i,r,s,l){for(let u=0;u!==l;++u){const A=i+u;e[A]=e[A]+e[r+u]*s}}}const p7="\\[\\]\\.:\\/",d1e=new RegExp("["+p7+"]","g"),f7="[^"+p7+"]",A1e="[^"+p7.replace("\\.","")+"]",p1e=/((?:WC+[\/:])*)/.source.replace("WC",f7),f1e=/(WCOD+)?/.source.replace("WCOD",A1e),g1e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",f7),m1e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",f7),_1e=new RegExp("^"+p1e+f1e+g1e+m1e+"$"),v1e=["material","materials","bones","map"];class y1e{constructor(e,i,r){const s=r||Rr.parseTrackName(i);this._targetGroup=e,this._bindings=e.subscribe_(i,s)}getValue(e,i){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(e,i)}setValue(e,i){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,l=r.length;s!==l;++s)r[s].setValue(e,i)}bind(){const e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=e.length;i!==r;++i)e[i].bind()}unbind(){const e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=e.length;i!==r;++i)e[i].unbind()}}class Rr{constructor(e,i,r){this.path=i,this.parsedPath=r||Rr.parseTrackName(i),this.node=Rr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new Rr.Composite(e,i,r):new Rr(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(d1e,"")}static parseTrackName(e){const i=_1e.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const l=r.nodeName.substring(s+1);v1e.indexOf(l)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=l)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){const r=function(l){for(let u=0;u<l.length;u++){const A=l[u];if(A.name===i||A.uuid===i)return A;const g=r(A.children);if(g)return g}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){const r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)e[i++]=r[s]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){const r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)r[s]=e[i++]}_setValue_array_setNeedsUpdate(e,i){const r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)r[s]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){const r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)r[s]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let l=i.propertyIndex;if(e||(e=Rr.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let _=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let b=0;b<e.length;b++)if(e[b].name===_){_=b;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(_!==void 0){if(e[_]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[_]}}const u=e[s];if(u===void 0){const _=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+_+"."+s+" but it wasn't found.",e);return}let A=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?A=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(A=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(l!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[l]!==void 0&&(l=e.morphTargetDictionary[l])}g=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=l}else u.fromArray!==void 0&&u.toArray!==void 0?(g=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(g=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=s;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][A]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rr.Composite=y1e;Rr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Rr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Rr.prototype.GetterByBindingType=[Rr.prototype._getValue_direct,Rr.prototype._getValue_array,Rr.prototype._getValue_arrayElement,Rr.prototype._getValue_toArray];Rr.prototype.SetterByBindingTypeAndVersioning=[[Rr.prototype._setValue_direct,Rr.prototype._setValue_direct_setNeedsUpdate,Rr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_array,Rr.prototype._setValue_array_setNeedsUpdate,Rr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_arrayElement,Rr.prototype._setValue_arrayElement_setNeedsUpdate,Rr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_fromArray,Rr.prototype._setValue_fromArray_setNeedsUpdate,Rr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class b1e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gp(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,s=arguments.length;r!==s;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){const e=this._objects,i=this._indicesByUUID,r=this._paths,s=this._parsedPaths,l=this._bindings,u=l.length;let A,g=e.length,_=this.nCachedObjects_;for(let b=0,x=arguments.length;b!==x;++b){const C=arguments[b],I=C.uuid;let F=i[I];if(F===void 0){F=g++,i[I]=F,e.push(C);for(let L=0,U=u;L!==U;++L)l[L].push(new Rr(C,r[L],s[L]))}else if(F<_){A=e[F];const L=--_,U=e[L];i[U.uuid]=F,e[F]=U,i[I]=L,e[L]=C;for(let P=0,H=u;P!==H;++P){const N=l[P],z=N[L];let W=N[F];N[F]=z,W===void 0&&(W=new Rr(C,r[P],s[P])),N[L]=W}}else e[F]!==A&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=_}remove(){const e=this._objects,i=this._indicesByUUID,r=this._bindings,s=r.length;let l=this.nCachedObjects_;for(let u=0,A=arguments.length;u!==A;++u){const g=arguments[u],_=g.uuid,b=i[_];if(b!==void 0&&b>=l){const x=l++,C=e[x];i[C.uuid]=b,e[b]=C,i[_]=x,e[x]=g;for(let I=0,F=s;I!==F;++I){const L=r[I],U=L[x],P=L[b];L[b]=U,L[x]=P}}}this.nCachedObjects_=l}uncache(){const e=this._objects,i=this._indicesByUUID,r=this._bindings,s=r.length;let l=this.nCachedObjects_,u=e.length;for(let A=0,g=arguments.length;A!==g;++A){const _=arguments[A],b=_.uuid,x=i[b];if(x!==void 0)if(delete i[b],x<l){const C=--l,I=e[C],F=--u,L=e[F];i[I.uuid]=x,e[x]=I,i[L.uuid]=C,e[C]=L,e.pop();for(let U=0,P=s;U!==P;++U){const H=r[U],N=H[C],z=H[F];H[x]=N,H[C]=z,H.pop()}}else{const C=--u,I=e[C];C>0&&(i[I.uuid]=x),e[x]=I,e.pop();for(let F=0,L=s;F!==L;++F){const U=r[F];U[x]=U[C],U.pop()}}}this.nCachedObjects_=l}subscribe_(e,i){const r=this._bindingsIndicesByPath;let s=r[e];const l=this._bindings;if(s!==void 0)return l[s];const u=this._paths,A=this._parsedPaths,g=this._objects,_=g.length,b=this.nCachedObjects_,x=new Array(_);s=l.length,r[e]=s,u.push(e),A.push(i),l.push(x);for(let C=b,I=g.length;C!==I;++C){const F=g[C];x[C]=new Rr(F,e,i)}return x}unsubscribe_(e){const i=this._bindingsIndicesByPath,r=i[e];if(r!==void 0){const s=this._paths,l=this._parsedPaths,u=this._bindings,A=u.length-1,g=u[A],_=e[A];i[_]=r,u[r]=g,u.pop(),l[r]=l[A],l.pop(),s[r]=s[A],s.pop()}}}class hse{constructor(e,i,r=null,s=i.blendMode){this._mixer=e,this._clip=i,this._localRoot=r,this.blendMode=s;const l=i.tracks,u=l.length,A=new Array(u),g={endingStart:ow,endingEnd:ow};for(let _=0;_!==u;++_){const b=l[_].createInterpolant(null);A[_]=b,b.settings=g}this._interpolantSettings=g,this._interpolants=A,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=gw,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,i){return this.loop=e,this.repetitions=i,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,i,r){if(e.fadeOut(i),this.fadeIn(i),r){const s=this._clip.duration,l=e._clip.duration,u=l/s,A=s/l;e.warp(1,u,i),this.warp(A,1,i)}return this}crossFadeTo(e,i,r){return e.crossFadeFrom(this,i,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,i,r){const s=this._mixer,l=s.time,u=this.timeScale;let A=this._timeScaleInterpolant;A===null&&(A=s._lendControlInterpolant(),this._timeScaleInterpolant=A);const g=A.parameterPositions,_=A.sampleValues;return g[0]=l,g[1]=l+r,_[0]=e/u,_[1]=i/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,i,r,s){if(!this.enabled){this._updateWeight(e);return}const l=this._startTime;if(l!==null){const g=(e-l)*r;g<0||r===0?i=0:(this._startTime=null,i=r*g)}i*=this._updateTimeScale(e);const u=this._updateTime(i),A=this._updateWeight(e);if(A>0){const g=this._interpolants,_=this._propertyBindings;switch(this.blendMode){case Hz:for(let b=0,x=g.length;b!==x;++b)g[b].evaluate(u),_[b].accumulateAdditive(A);break;case $k:default:for(let b=0,x=g.length;b!==x;++b)g[b].evaluate(u),_[b].accumulate(s,A)}}}_updateWeight(e){let i=0;if(this.enabled){i=this.weight;const r=this._weightInterpolant;if(r!==null){const s=r.evaluate(e)[0];i*=s,e>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(e){let i=0;if(!this.paused){i=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const s=r.evaluate(e)[0];i*=s,e>r.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(e){const i=this._clip.duration,r=this.loop;let s=this.time+e,l=this._loopCount;const u=r===bT;if(e===0)return l===-1?s:u&&(l&1)===1?i-s:s;if(r===hS){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=i)s=i;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(l===-1&&(e>=0?(l=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),s>=i||s<0){const A=Math.floor(s/i);s-=i*A,l+=Math.abs(A);const g=this.repetitions-l;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?i:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(g===1){const _=e<0;this._setEndings(_,!_,u)}else this._setEndings(!1,!1,u);this._loopCount=l,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:A})}}else this.time=s;if(u&&(l&1)===1)return i-s}return s}_setEndings(e,i,r){const s=this._interpolantSettings;r?(s.endingStart=aw,s.endingEnd=aw):(e?s.endingStart=this.zeroSlopeAtStart?aw:ow:s.endingStart=wT,i?s.endingEnd=this.zeroSlopeAtEnd?aw:ow:s.endingEnd=wT)}_scheduleFading(e,i,r){const s=this._mixer,l=s.time;let u=this._weightInterpolant;u===null&&(u=s._lendControlInterpolant(),this._weightInterpolant=u);const A=u.parameterPositions,g=u.sampleValues;return A[0]=l,g[0]=i,A[1]=l+e,g[1]=r,this}}const w1e=new Float32Array(1);class dse extends FA{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,i){const r=e._localRoot||this._root,s=e._clip.tracks,l=s.length,u=e._propertyBindings,A=e._interpolants,g=r.uuid,_=this._bindingsByRootAndName;let b=_[g];b===void 0&&(b={},_[g]=b);for(let x=0;x!==l;++x){const C=s[x],I=C.name;let F=b[I];if(F!==void 0)++F.referenceCount,u[x]=F;else{if(F=u[x],F!==void 0){F._cacheIndex===null&&(++F.referenceCount,this._addInactiveBinding(F,g,I));continue}const L=i&&i._propertyBindings[x].binding.parsedPath;F=new use(Rr.create(r,I,L),C.ValueTypeName,C.getValueSize()),++F.referenceCount,this._addInactiveBinding(F,g,I),u[x]=F}A[x].resultBuffer=F.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,s=e._clip.uuid,l=this._actionsByClip[s];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,s,r)}const i=e._propertyBindings;for(let r=0,s=i.length;r!==s;++r){const l=i[r];l.useCount++===0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const i=e._propertyBindings;for(let r=0,s=i.length;r!==s;++r){const l=i[r];--l.useCount===0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const i=e._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(e,i,r){const s=this._actions,l=this._actionsByClip;let u=l[i];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[i]=u;else{const A=u.knownActions;e._byClipCacheIndex=A.length,A.push(e)}e._cacheIndex=s.length,s.push(e),u.actionByRoot[r]=e}_removeInactiveAction(e){const i=this._actions,r=i[i.length-1],s=e._cacheIndex;r._cacheIndex=s,i[s]=r,i.pop(),e._cacheIndex=null;const l=e._clip.uuid,u=this._actionsByClip,A=u[l],g=A.knownActions,_=g[g.length-1],b=e._byClipCacheIndex;_._byClipCacheIndex=b,g[b]=_,g.pop(),e._byClipCacheIndex=null;const x=A.actionByRoot,C=(e._localRoot||this._root).uuid;delete x[C],g.length===0&&delete u[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const i=e._propertyBindings;for(let r=0,s=i.length;r!==s;++r){const l=i[r];--l.referenceCount===0&&this._removeInactiveBinding(l)}}_lendAction(e){const i=this._actions,r=e._cacheIndex,s=this._nActiveActions++,l=i[s];e._cacheIndex=s,i[s]=e,l._cacheIndex=r,i[r]=l}_takeBackAction(e){const i=this._actions,r=e._cacheIndex,s=--this._nActiveActions,l=i[s];e._cacheIndex=s,i[s]=e,l._cacheIndex=r,i[r]=l}_addInactiveBinding(e,i,r){const s=this._bindingsByRootAndName,l=this._bindings;let u=s[i];u===void 0&&(u={},s[i]=u),u[r]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const i=this._bindings,r=e.binding,s=r.rootNode.uuid,l=r.path,u=this._bindingsByRootAndName,A=u[s],g=i[i.length-1],_=e._cacheIndex;g._cacheIndex=_,i[_]=g,i.pop(),delete A[l],Object.keys(A).length===0&&delete u[s]}_lendBinding(e){const i=this._bindings,r=e._cacheIndex,s=this._nActiveBindings++,l=i[s];e._cacheIndex=s,i[s]=e,l._cacheIndex=r,i[r]=l}_takeBackBinding(e){const i=this._bindings,r=e._cacheIndex,s=--this._nActiveBindings,l=i[s];e._cacheIndex=s,i[s]=e,l._cacheIndex=r,i[r]=l}_lendControlInterpolant(){const e=this._controlInterpolants,i=this._nActiveControlInterpolants++;let r=e[i];return r===void 0&&(r=new o7(new Float32Array(2),new Float32Array(2),1,w1e),r.__cacheIndex=i,e[i]=r),r}_takeBackControlInterpolant(e){const i=this._controlInterpolants,r=e.__cacheIndex,s=--this._nActiveControlInterpolants,l=i[s];e.__cacheIndex=s,i[s]=e,l.__cacheIndex=r,i[r]=l}clipAction(e,i,r){const s=i||this._root,l=s.uuid;let u=typeof e=="string"?Uw.findByName(s,e):e;const A=u!==null?u.uuid:e,g=this._actionsByClip[A];let _=null;if(r===void 0&&(u!==null?r=u.blendMode:r=$k),g!==void 0){const x=g.actionByRoot[l];if(x!==void 0&&x.blendMode===r)return x;_=g.knownActions[0],u===null&&(u=_._clip)}if(u===null)return null;const b=new hse(this,u,i,r);return this._bindAction(b,_),this._addInactiveAction(b,A,l),b}existingAction(e,i){const r=i||this._root,s=r.uuid,l=typeof e=="string"?Uw.findByName(r,e):e,u=l?l.uuid:e,A=this._actionsByClip[u];return A!==void 0&&A.actionByRoot[s]||null}stopAllAction(){const e=this._actions,i=this._nActiveActions;for(let r=i-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const i=this._actions,r=this._nActiveActions,s=this.time+=e,l=Math.sign(e),u=this._accuIndex^=1;for(let _=0;_!==r;++_)i[_]._update(s,e,l,u);const A=this._bindings,g=this._nActiveBindings;for(let _=0;_!==g;++_)A[_].apply(u);return this}setTime(e){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const i=this._actions,r=e.uuid,s=this._actionsByClip,l=s[r];if(l!==void 0){const u=l.knownActions;for(let A=0,g=u.length;A!==g;++A){const _=u[A];this._deactivateAction(_);const b=_._cacheIndex,x=i[i.length-1];_._cacheIndex=null,_._byClipCacheIndex=null,x._cacheIndex=b,i[b]=x,i.pop(),this._removeInactiveBindingsForAction(_)}delete s[r]}}uncacheRoot(e){const i=e.uuid,r=this._actionsByClip;for(const u in r){const A=r[u].actionByRoot,g=A[i];g!==void 0&&(this._deactivateAction(g),this._removeInactiveAction(g))}const s=this._bindingsByRootAndName,l=s[i];if(l!==void 0)for(const u in l){const A=l[u];A.restoreOriginalState(),this._removeInactiveBinding(A)}}uncacheAction(e,i){const r=this.existingAction(e,i);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class x1e extends Wk{constructor(e=1,i=1,r=1,s={}){super(e,i,s),this.isRenderTarget3D=!0,this.depth=r,this.texture=new ZT(null,e,i,r),this.texture.isRenderTargetTexture=!0}}class C1e extends Wk{constructor(e=1,i=1,r=1,s={}){super(e,i,s),this.isRenderTargetArray=!0,this.depth=r,this.texture=new JT(null,e,i,r),this.texture.isRenderTargetTexture=!0}}class g7{constructor(e){this.value=e}clone(){return new g7(this.value.clone===void 0?this.value:this.value.clone())}}let E1e=0;class S1e extends FA{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:E1e++}),this.name="",this.usage=CT,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const i=this.uniforms.indexOf(e);return i!==-1&&this.uniforms.splice(i,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const i=e.uniforms;this.uniforms.length=0;for(let r=0,s=i.length;r<s;r++){const l=Array.isArray(i[r])?i[r]:[i[r]];for(let u=0;u<l.length;u++)this.uniforms.push(l[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class B1e extends tM{constructor(e,i,r=1){super(e,i),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const i=super.clone(e);return i.meshPerAttribute=this.meshPerAttribute,i}toJSON(e){const i=super.toJSON(e);return i.isInstancedInterleavedBuffer=!0,i.meshPerAttribute=this.meshPerAttribute,i}}class I1e{constructor(e,i,r,s,l){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=i,this.itemSize=r,this.elementSize=s,this.count=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,i){return this.type=e,this.elementSize=i,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const bX=new Ki;class m7{constructor(e,i,r=0,s=1/0){this.ray=new Gw(e,i),this.near=r,this.far=s,this.camera=null,this.layers=new AS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,i){this.ray.set(e,i)}setFromCamera(e,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}setFromXRController(e){return bX.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(bX),this}intersectObject(e,i=!0,r=[]){return AH(e,this,r,i),r.sort(wX),r}intersectObjects(e,i=!0,r=[]){for(let s=0,l=e.length;s<l;s++)AH(e[s],this,r,i);return r.sort(wX),r}}function wX(a,e){return a.distance-e.distance}function AH(a,e,i,r){let s=!0;if(a.layers.test(e.layers)&&a.raycast(e,i)===!1&&(s=!1),s===!0&&r===!0){const l=a.children;for(let u=0,A=l.length;u<A;u++)AH(l[u],e,i,!0)}}class vw{constructor(e=1,i=0,r=0){return this.radius=e,this.phi=i,this.theta=r,this}set(e,i,r){return this.radius=e,this.phi=i,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=pr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,r){return this.radius=Math.sqrt(e*e+i*i+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(pr(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class T1e{constructor(e=1,i=0,r=0){return this.radius=e,this.theta=i,this.y=r,this}set(e,i,r){return this.radius=e,this.theta=i,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=i,this}clone(){return new this.constructor().copy(this)}}class _7{constructor(e,i,r,s){_7.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,i,r,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,i=0){for(let r=0;r<4;r++)this.elements[r]=e[r+i];return this}set(e,i,r,s){const l=this.elements;return l[0]=e,l[2]=i,l[1]=r,l[3]=s,this}}const xX=new ci;class M1e{constructor(e=new ci(1/0,1/0),i=new ci(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromPoints(e){this.makeEmpty();for(let i=0,r=e.length;i<r;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){const r=xX.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xX).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const CX=new Fe,KD=new Fe;class R1e{constructor(e=new Fe,i=new Fe){this.start=e,this.end=i}set(e,i){return this.start.copy(e),this.end.copy(i),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,i){return this.delta(i).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,i){CX.subVectors(e,this.start),KD.subVectors(this.end,this.start);const r=KD.dot(KD);let l=KD.dot(CX)/r;return i&&(l=pr(l,0,1)),l}closestPointToPoint(e,i,r){const s=this.closestPointToPointParameter(e,i);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const EX=new Fe;class D1e extends xr{constructor(e,i){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=i,this.type="SpotLightHelper";const r=new Ln,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,A=1,g=32;u<g;u++,A++){const _=u/g*Math.PI*2,b=A/g*Math.PI*2;s.push(Math.cos(_),Math.sin(_),1,Math.cos(b),Math.sin(b),1)}r.setAttribute("position",new Ni(s,3));const l=new Ac({fog:!1,toneMapped:!1});this.cone=new mp(r,l),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),EX.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(EX),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xy=new Fe,XD=new Ki,C6=new Ki;class F1e extends mp{constructor(e){const i=Ase(e),r=new Ln,s=[],l=[],u=new Si(0,0,1),A=new Si(0,1,0);for(let _=0;_<i.length;_++){const b=i[_];b.parent&&b.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),l.push(u.r,u.g,u.b),l.push(A.r,A.g,A.b))}r.setAttribute("position",new Ni(s,3)),r.setAttribute("color",new Ni(l,3));const g=new Ac({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,g),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=i,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const i=this.bones,r=this.geometry,s=r.getAttribute("position");C6.copy(this.root.matrixWorld).invert();for(let l=0,u=0;l<i.length;l++){const A=i[l];A.parent&&A.parent.isBone&&(XD.multiplyMatrices(C6,A.matrixWorld),xy.setFromMatrixPosition(XD),s.setXYZ(u,xy.x,xy.y,xy.z),XD.multiplyMatrices(C6,A.parent.matrixWorld),xy.setFromMatrixPosition(XD),s.setXYZ(u+1,xy.x,xy.y,xy.z),u+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ase(a){const e=[];a.isBone===!0&&e.push(a);for(let i=0;i<a.children.length;i++)e.push.apply(e,Ase(a.children[i]));return e}class U1e extends Dr{constructor(e,i,r){const s=new DS(i,4,2),l=new Pc({wireframe:!0,fog:!1,toneMapped:!1});super(s,l),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const k1e=new Fe,SX=new Si,BX=new Si;class L1e extends xr{constructor(e,i,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const s=new rM(i);s.rotateY(Math.PI*.5),this.material=new Pc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const l=s.getAttribute("position"),u=new Float32Array(l.count*3);s.setAttribute("color",new fr(u,3)),this.add(new Dr(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const i=e.geometry.getAttribute("color");SX.copy(this.light.color),BX.copy(this.light.groundColor);for(let r=0,s=i.count;r<s;r++){const l=r<s/2?SX:BX;i.setXYZ(r,l.r,l.g,l.b)}i.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(k1e.setFromMatrixPosition(this.light.matrixWorld).negate())}}class P1e extends mp{constructor(e=10,i=10,r=4473924,s=8947848){r=new Si(r),s=new Si(s);const l=i/2,u=e/i,A=e/2,g=[],_=[];for(let C=0,I=0,F=-A;C<=i;C++,F+=u){g.push(-A,0,F,A,0,F),g.push(F,0,-A,F,0,A);const L=C===l?r:s;L.toArray(_,I),I+=3,L.toArray(_,I),I+=3,L.toArray(_,I),I+=3,L.toArray(_,I),I+=3}const b=new Ln;b.setAttribute("position",new Ni(g,3)),b.setAttribute("color",new Ni(_,3));const x=new Ac({vertexColors:!0,toneMapped:!1});super(b,x),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class O1e extends mp{constructor(e=10,i=16,r=8,s=64,l=4473924,u=8947848){l=new Si(l),u=new Si(u);const A=[],g=[];if(i>1)for(let x=0;x<i;x++){const C=x/i*(Math.PI*2),I=Math.sin(C)*e,F=Math.cos(C)*e;A.push(0,0,0),A.push(I,0,F);const L=x&1?l:u;g.push(L.r,L.g,L.b),g.push(L.r,L.g,L.b)}for(let x=0;x<r;x++){const C=x&1?l:u,I=e-e/r*x;for(let F=0;F<s;F++){let L=F/s*(Math.PI*2),U=Math.sin(L)*I,P=Math.cos(L)*I;A.push(U,0,P),g.push(C.r,C.g,C.b),L=(F+1)/s*(Math.PI*2),U=Math.sin(L)*I,P=Math.cos(L)*I,A.push(U,0,P),g.push(C.r,C.g,C.b)}}const _=new Ln;_.setAttribute("position",new Ni(A,3)),_.setAttribute("color",new Ni(g,3));const b=new Ac({vertexColors:!0,toneMapped:!1});super(_,b),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const IX=new Fe,YD=new Fe,TX=new Fe;class Q1e extends xr{constructor(e,i,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",i===void 0&&(i=1);let s=new Ln;s.setAttribute("position",new Ni([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));const l=new Ac({fog:!1,toneMapped:!1});this.lightPlane=new Mf(s,l),this.add(this.lightPlane),s=new Ln,s.setAttribute("position",new Ni([0,0,0,0,0,1],3)),this.targetLine=new Mf(s,l),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),IX.setFromMatrixPosition(this.light.matrixWorld),YD.setFromMatrixPosition(this.light.target.matrixWorld),TX.subVectors(YD,IX),this.lightPlane.lookAt(YD),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(YD),this.targetLine.scale.z=TX.length()}}const JD=new Fe,ul=new Kk;class N1e extends mp{constructor(e){const i=new Ln,r=new Ac({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],l=[],u={};A("n1","n2"),A("n2","n4"),A("n4","n3"),A("n3","n1"),A("f1","f2"),A("f2","f4"),A("f4","f3"),A("f3","f1"),A("n1","f1"),A("n2","f2"),A("n3","f3"),A("n4","f4"),A("p","n1"),A("p","n2"),A("p","n3"),A("p","n4"),A("u1","u2"),A("u2","u3"),A("u3","u1"),A("c","t"),A("p","c"),A("cn1","cn2"),A("cn3","cn4"),A("cf1","cf2"),A("cf3","cf4");function A(F,L){g(F),g(L)}function g(F){s.push(0,0,0),l.push(0,0,0),u[F]===void 0&&(u[F]=[]),u[F].push(s.length/3-1)}i.setAttribute("position",new Ni(s,3)),i.setAttribute("color",new Ni(l,3)),super(i,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const _=new Si(16755200),b=new Si(16711680),x=new Si(43775),C=new Si(16777215),I=new Si(3355443);this.setColors(_,b,x,C,I)}setColors(e,i,r,s,l){const A=this.geometry.getAttribute("color");A.setXYZ(0,e.r,e.g,e.b),A.setXYZ(1,e.r,e.g,e.b),A.setXYZ(2,e.r,e.g,e.b),A.setXYZ(3,e.r,e.g,e.b),A.setXYZ(4,e.r,e.g,e.b),A.setXYZ(5,e.r,e.g,e.b),A.setXYZ(6,e.r,e.g,e.b),A.setXYZ(7,e.r,e.g,e.b),A.setXYZ(8,e.r,e.g,e.b),A.setXYZ(9,e.r,e.g,e.b),A.setXYZ(10,e.r,e.g,e.b),A.setXYZ(11,e.r,e.g,e.b),A.setXYZ(12,e.r,e.g,e.b),A.setXYZ(13,e.r,e.g,e.b),A.setXYZ(14,e.r,e.g,e.b),A.setXYZ(15,e.r,e.g,e.b),A.setXYZ(16,e.r,e.g,e.b),A.setXYZ(17,e.r,e.g,e.b),A.setXYZ(18,e.r,e.g,e.b),A.setXYZ(19,e.r,e.g,e.b),A.setXYZ(20,e.r,e.g,e.b),A.setXYZ(21,e.r,e.g,e.b),A.setXYZ(22,e.r,e.g,e.b),A.setXYZ(23,e.r,e.g,e.b),A.setXYZ(24,i.r,i.g,i.b),A.setXYZ(25,i.r,i.g,i.b),A.setXYZ(26,i.r,i.g,i.b),A.setXYZ(27,i.r,i.g,i.b),A.setXYZ(28,i.r,i.g,i.b),A.setXYZ(29,i.r,i.g,i.b),A.setXYZ(30,i.r,i.g,i.b),A.setXYZ(31,i.r,i.g,i.b),A.setXYZ(32,r.r,r.g,r.b),A.setXYZ(33,r.r,r.g,r.b),A.setXYZ(34,r.r,r.g,r.b),A.setXYZ(35,r.r,r.g,r.b),A.setXYZ(36,r.r,r.g,r.b),A.setXYZ(37,r.r,r.g,r.b),A.setXYZ(38,s.r,s.g,s.b),A.setXYZ(39,s.r,s.g,s.b),A.setXYZ(40,l.r,l.g,l.b),A.setXYZ(41,l.r,l.g,l.b),A.setXYZ(42,l.r,l.g,l.b),A.setXYZ(43,l.r,l.g,l.b),A.setXYZ(44,l.r,l.g,l.b),A.setXYZ(45,l.r,l.g,l.b),A.setXYZ(46,l.r,l.g,l.b),A.setXYZ(47,l.r,l.g,l.b),A.setXYZ(48,l.r,l.g,l.b),A.setXYZ(49,l.r,l.g,l.b),A.needsUpdate=!0}update(){const e=this.geometry,i=this.pointMap,r=1,s=1;ul.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const l=this.camera.coordinateSystem===Mg?-1:0;Ul("c",i,e,ul,0,0,l),Ul("t",i,e,ul,0,0,1),Ul("n1",i,e,ul,-1,-1,l),Ul("n2",i,e,ul,r,-1,l),Ul("n3",i,e,ul,-1,s,l),Ul("n4",i,e,ul,r,s,l),Ul("f1",i,e,ul,-1,-1,1),Ul("f2",i,e,ul,r,-1,1),Ul("f3",i,e,ul,-1,s,1),Ul("f4",i,e,ul,r,s,1),Ul("u1",i,e,ul,r*.7,s*1.1,l),Ul("u2",i,e,ul,-1*.7,s*1.1,l),Ul("u3",i,e,ul,0,s*2,l),Ul("cf1",i,e,ul,-1,0,1),Ul("cf2",i,e,ul,r,0,1),Ul("cf3",i,e,ul,0,-1,1),Ul("cf4",i,e,ul,0,s,1),Ul("cn1",i,e,ul,-1,0,l),Ul("cn2",i,e,ul,r,0,l),Ul("cn3",i,e,ul,0,-1,l),Ul("cn4",i,e,ul,0,s,l),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ul(a,e,i,r,s,l,u){JD.set(s,l,u).unproject(r);const A=e[a];if(A!==void 0){const g=i.getAttribute("position");for(let _=0,b=A.length;_<b;_++)g.setXYZ(A[_],JD.x,JD.y,JD.z)}}const ZD=new ia;class H1e extends mp{constructor(e,i=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),l=new Ln;l.setIndex(new fr(r,1)),l.setAttribute("position",new fr(s,3)),super(l,new Ac({color:i,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ZD.setFromObject(this.object),ZD.isEmpty())return;const i=ZD.min,r=ZD.max,s=this.geometry.attributes.position,l=s.array;l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=i.x,l[4]=r.y,l[5]=r.z,l[6]=i.x,l[7]=i.y,l[8]=r.z,l[9]=r.x,l[10]=i.y,l[11]=r.z,l[12]=r.x,l[13]=r.y,l[14]=i.z,l[15]=i.x,l[16]=r.y,l[17]=i.z,l[18]=i.x,l[19]=i.y,l[20]=i.z,l[21]=r.x,l[22]=i.y,l[23]=i.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,i){return super.copy(e,i),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class z1e extends mp{constructor(e,i=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new Ln;l.setIndex(new fr(r,1)),l.setAttribute("position",new Ni(s,3)),super(l,new Ac({color:i,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class G1e extends Mf{constructor(e,i=1,r=16776960){const s=r,l=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new Ln;u.setAttribute("position",new Ni(l,3)),u.computeBoundingSphere(),super(u,new Ac({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=i;const A=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],g=new Ln;g.setAttribute("position",new Ni(A,3)),g.computeBoundingSphere(),this.add(new Dr(g,new Pc({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const MX=new Fe;let eF,E6;class V1e extends xr{constructor(e=new Fe(0,0,1),i=new Fe(0,0,0),r=1,s=16776960,l=r*.2,u=l*.2){super(),this.type="ArrowHelper",eF===void 0&&(eF=new Ln,eF.setAttribute("position",new Ni([0,0,0,0,1,0],3)),E6=new RS(0,.5,1,5,1),E6.translate(0,-.5,0)),this.position.copy(i),this.line=new Mf(eF,new Ac({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Dr(E6,new Pc({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,l,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{MX.set(e.z,0,-e.x).normalize();const i=Math.acos(e.y);this.quaternion.setFromAxisAngle(MX,i)}}setLength(e,i=e*.2,r=i*.2){this.line.scale.set(1,Math.max(1e-4,e-i),1),this.line.updateMatrix(),this.cone.scale.set(r,i,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class q1e extends mp{constructor(e=1){const i=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Ln;s.setAttribute("position",new Ni(i,3)),s.setAttribute("color",new Ni(r,3));const l=new Ac({vertexColors:!0,toneMapped:!1});super(s,l),this.type="AxesHelper"}setColors(e,i,r){const s=new Si,l=this.geometry.attributes.color.array;return s.set(e),s.toArray(l,0),s.toArray(l,3),s.set(i),s.toArray(l,6),s.toArray(l,9),s.set(r),s.toArray(l,12),s.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $1e{constructor(){this.type="ShapePath",this.color=new Si,this.subPaths=[],this.currentPath=null}moveTo(e,i){return this.currentPath=new BT,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,i),this}lineTo(e,i){return this.currentPath.lineTo(e,i),this}quadraticCurveTo(e,i,r,s){return this.currentPath.quadraticCurveTo(e,i,r,s),this}bezierCurveTo(e,i,r,s,l,u){return this.currentPath.bezierCurveTo(e,i,r,s,l,u),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function i(P){const H=[];for(let N=0,z=P.length;N<z;N++){const W=P[N],j=new _w;j.curves=W.curves,H.push(j)}return H}function r(P,H){const N=H.length;let z=!1;for(let W=N-1,j=0;j<N;W=j++){let J=H[W],ie=H[j],ee=ie.x-J.x,re=ie.y-J.y;if(Math.abs(re)>Number.EPSILON){if(re<0&&(J=H[j],ee=-ee,ie=H[W],re=-re),P.y<J.y||P.y>ie.y)continue;if(P.y===J.y){if(P.x===J.x)return!0}else{const se=re*(P.x-J.x)-ee*(P.y-J.y);if(se===0)return!0;if(se<0)continue;z=!z}}else{if(P.y!==J.y)continue;if(ie.x<=P.x&&P.x<=J.x||J.x<=P.x&&P.x<=ie.x)return!0}}return z}const s=Fg.isClockWise,l=this.subPaths;if(l.length===0)return[];let u,A,g;const _=[];if(l.length===1)return A=l[0],g=new _w,g.curves=A.curves,_.push(g),_;let b=!s(l[0].getPoints());b=e?!b:b;const x=[],C=[];let I=[],F=0,L;C[F]=void 0,I[F]=[];for(let P=0,H=l.length;P<H;P++)A=l[P],L=A.getPoints(),u=s(L),u=e?!u:u,u?(!b&&C[F]&&F++,C[F]={s:new _w,p:L},C[F].s.curves=A.curves,b&&F++,I[F]=[]):I[F].push({h:A,p:L[0]});if(!C[0])return i(l);if(C.length>1){let P=!1,H=0;for(let N=0,z=C.length;N<z;N++)x[N]=[];for(let N=0,z=C.length;N<z;N++){const W=I[N];for(let j=0;j<W.length;j++){const J=W[j];let ie=!0;for(let ee=0;ee<C.length;ee++)r(J.p,C[ee].p)&&(N!==ee&&H++,ie?(ie=!1,x[ee].push(J)):P=!0);ie&&x[N].push(J)}}H>0&&P===!1&&(I=x)}let U;for(let P=0,H=C.length;P<H;P++){g=C[P].s,_.push(g),U=I[P];for(let N=0,z=U.length;N<z;N++)g.holes.push(U[N].h)}return _}}class W1e extends FA{constructor(e,i=null){super(),this.object=e,this.domElement=i,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function j1e(a,e){const i=a.image&&a.image.width?a.image.width/a.image.height:1;return i>e?(a.repeat.x=1,a.repeat.y=i/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2):(a.repeat.x=e/i,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0),a}function K1e(a,e){const i=a.image&&a.image.width?a.image.width/a.image.height:1;return i>e?(a.repeat.x=e/i,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0):(a.repeat.x=1,a.repeat.y=i/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2),a}function X1e(a){return a.repeat.x=1,a.repeat.y=1,a.offset.x=0,a.offset.y=0,a}function pH(a,e,i,r){const s=Y1e(r);switch(i){case Lz:return a*e;case Oz:return a*e;case Qz:return a*e*2;case Fv:return a*e/s.components*s.byteLength;case YT:return a*e/s.components*s.byteLength;case Oy:return a*e*2/s.components*s.byteLength;case Vk:return a*e*2/s.components*s.byteLength;case Pz:return a*e*3/s.components*s.byteLength;case lo:return a*e*4/s.components*s.byteLength;case qk:return a*e*4/s.components*s.byteLength;case jI:case JE:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case KI:case ZE:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case LU:case PU:return Math.max(a,16)*Math.max(e,8)/4;case fT:case gT:return Math.max(a,8)*Math.max(e,8)/2;case mT:case _T:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case vT:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case cS:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case OU:return Math.floor((a+4)/5)*Math.floor((e+3)/4)*16;case QU:return Math.floor((a+4)/5)*Math.floor((e+4)/5)*16;case NU:return Math.floor((a+5)/6)*Math.floor((e+4)/5)*16;case uS:return Math.floor((a+5)/6)*Math.floor((e+5)/6)*16;case HU:return Math.floor((a+7)/8)*Math.floor((e+4)/5)*16;case zU:return Math.floor((a+7)/8)*Math.floor((e+5)/6)*16;case GU:return Math.floor((a+7)/8)*Math.floor((e+7)/8)*16;case VU:return Math.floor((a+9)/10)*Math.floor((e+4)/5)*16;case qU:return Math.floor((a+9)/10)*Math.floor((e+5)/6)*16;case $U:return Math.floor((a+9)/10)*Math.floor((e+7)/8)*16;case WU:return Math.floor((a+9)/10)*Math.floor((e+9)/10)*16;case jU:return Math.floor((a+11)/12)*Math.floor((e+9)/10)*16;case KU:return Math.floor((a+11)/12)*Math.floor((e+11)/12)*16;case eS:case XU:case yT:return Math.ceil(a/4)*Math.ceil(e/4)*16;case Nz:case YU:return Math.ceil(a/4)*Math.ceil(e/4)*8;case JU:case ZU:return Math.ceil(a/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}function Y1e(a){switch(a){case $a:case Nk:return{byteLength:1,components:1};case lS:case Hk:case Ol:return{byteLength:2,components:1};case zk:case Gk:return{byteLength:2,components:4};case jm:case XT:case ra:return{byteLength:4,components:1};case kz:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${a}.`)}const J1e={contain:j1e,cover:K1e,fill:X1e,getByteLength:pH};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jT);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function pse(){let a=null,e=!1,i=null,r=null;function s(l,u){i(l,u),r=a.requestAnimationFrame(s)}return{start:function(){e!==!0&&i!==null&&(r=a.requestAnimationFrame(s),e=!0)},stop:function(){a.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(l){i=l},setContext:function(l){a=l}}}function Z1e(a){const e=new WeakMap;function i(A,g){const _=A.array,b=A.usage,x=_.byteLength,C=a.createBuffer();a.bindBuffer(g,C),a.bufferData(g,_,b),A.onUploadCallback();let I;if(_ instanceof Float32Array)I=a.FLOAT;else if(_ instanceof Uint16Array)A.isFloat16BufferAttribute?I=a.HALF_FLOAT:I=a.UNSIGNED_SHORT;else if(_ instanceof Int16Array)I=a.SHORT;else if(_ instanceof Uint32Array)I=a.UNSIGNED_INT;else if(_ instanceof Int32Array)I=a.INT;else if(_ instanceof Int8Array)I=a.BYTE;else if(_ instanceof Uint8Array)I=a.UNSIGNED_BYTE;else if(_ instanceof Uint8ClampedArray)I=a.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);return{buffer:C,type:I,bytesPerElement:_.BYTES_PER_ELEMENT,version:A.version,size:x}}function r(A,g,_){const b=g.array,x=g.updateRanges;if(a.bindBuffer(_,A),x.length===0)a.bufferSubData(_,0,b);else{x.sort((I,F)=>I.start-F.start);let C=0;for(let I=1;I<x.length;I++){const F=x[C],L=x[I];L.start<=F.start+F.count+1?F.count=Math.max(F.count,L.start+L.count-F.start):(++C,x[C]=L)}x.length=C+1;for(let I=0,F=x.length;I<F;I++){const L=x[I];a.bufferSubData(_,L.start*b.BYTES_PER_ELEMENT,b,L.start,L.count)}g.clearUpdateRanges()}g.onUploadCallback()}function s(A){return A.isInterleavedBufferAttribute&&(A=A.data),e.get(A)}function l(A){A.isInterleavedBufferAttribute&&(A=A.data);const g=e.get(A);g&&(a.deleteBuffer(g.buffer),e.delete(A))}function u(A,g){if(A.isInterleavedBufferAttribute&&(A=A.data),A.isGLBufferAttribute){const b=e.get(A);(!b||b.version<A.version)&&e.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version});return}const _=e.get(A);if(_===void 0)e.set(A,i(A,g));else if(_.version<A.version){if(_.size!==A.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(_.buffer,A,g),_.version=A.version}}return{get:s,remove:l,update:u}}var ewe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,twe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,iwe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,nwe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rwe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,swe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,owe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,awe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,lwe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,cwe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,uwe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,hwe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,dwe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Awe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,pwe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fwe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,gwe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,mwe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_we=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,vwe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ywe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,bwe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,wwe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,xwe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Cwe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ewe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Swe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Bwe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Iwe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Twe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Mwe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Rwe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Dwe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Fwe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Uwe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,kwe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Lwe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Pwe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Owe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Qwe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Nwe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Hwe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,zwe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Gwe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Vwe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,qwe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$we=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Wwe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jwe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Kwe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Xwe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ywe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Jwe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Zwe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,exe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,txe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,ixe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,nxe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rxe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sxe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,oxe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,axe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,lxe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cxe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uxe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,hxe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,dxe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Axe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,pxe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,fxe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,gxe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,mxe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_xe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,vxe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yxe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,bxe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,wxe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,xxe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Cxe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Exe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Sxe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Bxe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ixe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Txe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Mxe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Rxe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Dxe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Fxe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Uxe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,kxe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Lxe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Pxe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Oxe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Qxe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Nxe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Hxe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,zxe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Gxe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Vxe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,qxe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$xe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Wxe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,jxe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Kxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Xxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Yxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Jxe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Zxe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,eCe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iCe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rCe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sCe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,oCe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,aCe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,lCe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,cCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uCe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hCe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dCe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ACe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,pCe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fCe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gCe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mCe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_Ce=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vCe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yCe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,bCe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wCe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xCe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,CCe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ECe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SCe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BCe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ICe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TCe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MCe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,RCe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DCe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tr={alphahash_fragment:ewe,alphahash_pars_fragment:twe,alphamap_fragment:iwe,alphamap_pars_fragment:nwe,alphatest_fragment:rwe,alphatest_pars_fragment:swe,aomap_fragment:owe,aomap_pars_fragment:awe,batching_pars_vertex:lwe,batching_vertex:cwe,begin_vertex:uwe,beginnormal_vertex:hwe,bsdfs:dwe,iridescence_fragment:Awe,bumpmap_pars_fragment:pwe,clipping_planes_fragment:fwe,clipping_planes_pars_fragment:gwe,clipping_planes_pars_vertex:mwe,clipping_planes_vertex:_we,color_fragment:vwe,color_pars_fragment:ywe,color_pars_vertex:bwe,color_vertex:wwe,common:xwe,cube_uv_reflection_fragment:Cwe,defaultnormal_vertex:Ewe,displacementmap_pars_vertex:Swe,displacementmap_vertex:Bwe,emissivemap_fragment:Iwe,emissivemap_pars_fragment:Twe,colorspace_fragment:Mwe,colorspace_pars_fragment:Rwe,envmap_fragment:Dwe,envmap_common_pars_fragment:Fwe,envmap_pars_fragment:Uwe,envmap_pars_vertex:kwe,envmap_physical_pars_fragment:$we,envmap_vertex:Lwe,fog_vertex:Pwe,fog_pars_vertex:Owe,fog_fragment:Qwe,fog_pars_fragment:Nwe,gradientmap_pars_fragment:Hwe,lightmap_pars_fragment:zwe,lights_lambert_fragment:Gwe,lights_lambert_pars_fragment:Vwe,lights_pars_begin:qwe,lights_toon_fragment:Wwe,lights_toon_pars_fragment:jwe,lights_phong_fragment:Kwe,lights_phong_pars_fragment:Xwe,lights_physical_fragment:Ywe,lights_physical_pars_fragment:Jwe,lights_fragment_begin:Zwe,lights_fragment_maps:exe,lights_fragment_end:txe,logdepthbuf_fragment:ixe,logdepthbuf_pars_fragment:nxe,logdepthbuf_pars_vertex:rxe,logdepthbuf_vertex:sxe,map_fragment:oxe,map_pars_fragment:axe,map_particle_fragment:lxe,map_particle_pars_fragment:cxe,metalnessmap_fragment:uxe,metalnessmap_pars_fragment:hxe,morphinstance_vertex:dxe,morphcolor_vertex:Axe,morphnormal_vertex:pxe,morphtarget_pars_vertex:fxe,morphtarget_vertex:gxe,normal_fragment_begin:mxe,normal_fragment_maps:_xe,normal_pars_fragment:vxe,normal_pars_vertex:yxe,normal_vertex:bxe,normalmap_pars_fragment:wxe,clearcoat_normal_fragment_begin:xxe,clearcoat_normal_fragment_maps:Cxe,clearcoat_pars_fragment:Exe,iridescence_pars_fragment:Sxe,opaque_fragment:Bxe,packing:Ixe,premultiplied_alpha_fragment:Txe,project_vertex:Mxe,dithering_fragment:Rxe,dithering_pars_fragment:Dxe,roughnessmap_fragment:Fxe,roughnessmap_pars_fragment:Uxe,shadowmap_pars_fragment:kxe,shadowmap_pars_vertex:Lxe,shadowmap_vertex:Pxe,shadowmask_pars_fragment:Oxe,skinbase_vertex:Qxe,skinning_pars_vertex:Nxe,skinning_vertex:Hxe,skinnormal_vertex:zxe,specularmap_fragment:Gxe,specularmap_pars_fragment:Vxe,tonemapping_fragment:qxe,tonemapping_pars_fragment:$xe,transmission_fragment:Wxe,transmission_pars_fragment:jxe,uv_pars_fragment:Kxe,uv_pars_vertex:Xxe,uv_vertex:Yxe,worldpos_vertex:Jxe,background_vert:Zxe,background_frag:eCe,backgroundCube_vert:tCe,backgroundCube_frag:iCe,cube_vert:nCe,cube_frag:rCe,depth_vert:sCe,depth_frag:oCe,distanceRGBA_vert:aCe,distanceRGBA_frag:lCe,equirect_vert:cCe,equirect_frag:uCe,linedashed_vert:hCe,linedashed_frag:dCe,meshbasic_vert:ACe,meshbasic_frag:pCe,meshlambert_vert:fCe,meshlambert_frag:gCe,meshmatcap_vert:mCe,meshmatcap_frag:_Ce,meshnormal_vert:vCe,meshnormal_frag:yCe,meshphong_vert:bCe,meshphong_frag:wCe,meshphysical_vert:xCe,meshphysical_frag:CCe,meshtoon_vert:ECe,meshtoon_frag:SCe,points_vert:BCe,points_frag:ICe,shadow_vert:TCe,shadow_frag:MCe,sprite_vert:RCe,sprite_frag:DCe},Zi={common:{diffuse:{value:new Si(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new nr},alphaMap:{value:null},alphaMapTransform:{value:new nr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new nr}},envmap:{envMap:{value:null},envMapRotation:{value:new nr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new nr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new nr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new nr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new nr},normalScale:{value:new ci(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new nr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new nr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new nr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new nr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Si(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Si(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new nr},alphaTest:{value:0},uvTransform:{value:new nr}},sprite:{diffuse:{value:new Si(16777215)},opacity:{value:1},center:{value:new ci(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new nr},alphaMap:{value:null},alphaMapTransform:{value:new nr},alphaTest:{value:0}}},Ig={basic:{uniforms:Ud([Zi.common,Zi.specularmap,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.fog]),vertexShader:Tr.meshbasic_vert,fragmentShader:Tr.meshbasic_frag},lambert:{uniforms:Ud([Zi.common,Zi.specularmap,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.fog,Zi.lights,{emissive:{value:new Si(0)}}]),vertexShader:Tr.meshlambert_vert,fragmentShader:Tr.meshlambert_frag},phong:{uniforms:Ud([Zi.common,Zi.specularmap,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.fog,Zi.lights,{emissive:{value:new Si(0)},specular:{value:new Si(1118481)},shininess:{value:30}}]),vertexShader:Tr.meshphong_vert,fragmentShader:Tr.meshphong_frag},standard:{uniforms:Ud([Zi.common,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.roughnessmap,Zi.metalnessmap,Zi.fog,Zi.lights,{emissive:{value:new Si(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tr.meshphysical_vert,fragmentShader:Tr.meshphysical_frag},toon:{uniforms:Ud([Zi.common,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.gradientmap,Zi.fog,Zi.lights,{emissive:{value:new Si(0)}}]),vertexShader:Tr.meshtoon_vert,fragmentShader:Tr.meshtoon_frag},matcap:{uniforms:Ud([Zi.common,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.fog,{matcap:{value:null}}]),vertexShader:Tr.meshmatcap_vert,fragmentShader:Tr.meshmatcap_frag},points:{uniforms:Ud([Zi.points,Zi.fog]),vertexShader:Tr.points_vert,fragmentShader:Tr.points_frag},dashed:{uniforms:Ud([Zi.common,Zi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tr.linedashed_vert,fragmentShader:Tr.linedashed_frag},depth:{uniforms:Ud([Zi.common,Zi.displacementmap]),vertexShader:Tr.depth_vert,fragmentShader:Tr.depth_frag},normal:{uniforms:Ud([Zi.common,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,{opacity:{value:1}}]),vertexShader:Tr.meshnormal_vert,fragmentShader:Tr.meshnormal_frag},sprite:{uniforms:Ud([Zi.sprite,Zi.fog]),vertexShader:Tr.sprite_vert,fragmentShader:Tr.sprite_frag},background:{uniforms:{uvTransform:{value:new nr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tr.background_vert,fragmentShader:Tr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new nr}},vertexShader:Tr.backgroundCube_vert,fragmentShader:Tr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tr.cube_vert,fragmentShader:Tr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tr.equirect_vert,fragmentShader:Tr.equirect_frag},distanceRGBA:{uniforms:Ud([Zi.common,Zi.displacementmap,{referencePosition:{value:new Fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tr.distanceRGBA_vert,fragmentShader:Tr.distanceRGBA_frag},shadow:{uniforms:Ud([Zi.lights,Zi.fog,{color:{value:new Si(0)},opacity:{value:1}}]),vertexShader:Tr.shadow_vert,fragmentShader:Tr.shadow_frag}};Ig.physical={uniforms:Ud([Ig.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new nr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new nr},clearcoatNormalScale:{value:new ci(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new nr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new nr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new nr},sheen:{value:0},sheenColor:{value:new Si(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new nr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new nr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new nr},transmissionSamplerSize:{value:new ci},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new nr},attenuationDistance:{value:0},attenuationColor:{value:new Si(0)},specularColor:{value:new Si(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new nr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new nr},anisotropyVector:{value:new ci},anisotropyMap:{value:null},anisotropyMapTransform:{value:new nr}}]),vertexShader:Tr.meshphysical_vert,fragmentShader:Tr.meshphysical_frag};const tF={r:0,b:0,g:0},O1=new hl,FCe=new Ki;function UCe(a,e,i,r,s,l,u){const A=new Si(0);let g=l===!0?0:1,_,b,x=null,C=0,I=null;function F(N){let z=N.isScene===!0?N.background:null;return z&&z.isTexture&&(z=(N.backgroundBlurriness>0?i:e).get(z)),z}function L(N){let z=!1;const W=F(N);W===null?P(A,g):W&&W.isColor&&(P(W,1),z=!0);const j=a.xr.getEnvironmentBlendMode();j==="additive"?r.buffers.color.setClear(0,0,0,1,u):j==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,u),(a.autoClear||z)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil))}function U(N,z){const W=F(z);W&&(W.isCubeTexture||W.mapping===TS)?(b===void 0&&(b=new Dr(new Og(1,1,1),new qh({name:"BackgroundCubeMaterial",uniforms:pS(Ig.backgroundCube.uniforms),vertexShader:Ig.backgroundCube.vertexShader,fragmentShader:Ig.backgroundCube.fragmentShader,side:mu,depthTest:!1,depthWrite:!1,fog:!1})),b.geometry.deleteAttribute("normal"),b.geometry.deleteAttribute("uv"),b.onBeforeRender=function(j,J,ie){this.matrixWorld.copyPosition(ie.matrixWorld)},Object.defineProperty(b.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(b)),O1.copy(z.backgroundRotation),O1.x*=-1,O1.y*=-1,O1.z*=-1,W.isCubeTexture&&W.isRenderTargetTexture===!1&&(O1.y*=-1,O1.z*=-1),b.material.uniforms.envMap.value=W,b.material.uniforms.flipEnvMap.value=W.isCubeTexture&&W.isRenderTargetTexture===!1?-1:1,b.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,b.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,b.material.uniforms.backgroundRotation.value.setFromMatrix4(FCe.makeRotationFromEuler(O1)),b.material.toneMapped=lr.getTransfer(W.colorSpace)!==oo,(x!==W||C!==W.version||I!==a.toneMapping)&&(b.material.needsUpdate=!0,x=W,C=W.version,I=a.toneMapping),b.layers.enableAll(),N.unshift(b,b.geometry,b.material,0,0,null)):W&&W.isTexture&&(_===void 0&&(_=new Dr(new UA(2,2),new qh({name:"BackgroundMaterial",uniforms:pS(Ig.background.uniforms),vertexShader:Ig.background.vertexShader,fragmentShader:Ig.background.fragmentShader,side:If,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),Object.defineProperty(_.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(_)),_.material.uniforms.t2D.value=W,_.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,_.material.toneMapped=lr.getTransfer(W.colorSpace)!==oo,W.matrixAutoUpdate===!0&&W.updateMatrix(),_.material.uniforms.uvTransform.value.copy(W.matrix),(x!==W||C!==W.version||I!==a.toneMapping)&&(_.material.needsUpdate=!0,x=W,C=W.version,I=a.toneMapping),_.layers.enableAll(),N.unshift(_,_.geometry,_.material,0,0,null))}function P(N,z){N.getRGB(tF,Sre(a)),r.buffers.color.setClear(tF.r,tF.g,tF.b,z,u)}function H(){b!==void 0&&(b.geometry.dispose(),b.material.dispose()),_!==void 0&&(_.geometry.dispose(),_.material.dispose())}return{getClearColor:function(){return A},setClearColor:function(N,z=1){A.set(N),g=z,P(A,g)},getClearAlpha:function(){return g},setClearAlpha:function(N){g=N,P(A,g)},render:L,addToRenderList:U,dispose:H}}function kCe(a,e){const i=a.getParameter(a.MAX_VERTEX_ATTRIBS),r={},s=C(null);let l=s,u=!1;function A(re,se,ue,fe,pe){let xe=!1;const ce=x(fe,ue,se);l!==ce&&(l=ce,_(l.object)),xe=I(re,fe,ue,pe),xe&&F(re,fe,ue,pe),pe!==null&&e.update(pe,a.ELEMENT_ARRAY_BUFFER),(xe||u)&&(u=!1,z(re,se,ue,fe),pe!==null&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.get(pe).buffer))}function g(){return a.createVertexArray()}function _(re){return a.bindVertexArray(re)}function b(re){return a.deleteVertexArray(re)}function x(re,se,ue){const fe=ue.wireframe===!0;let pe=r[re.id];pe===void 0&&(pe={},r[re.id]=pe);let xe=pe[se.id];xe===void 0&&(xe={},pe[se.id]=xe);let ce=xe[fe];return ce===void 0&&(ce=C(g()),xe[fe]=ce),ce}function C(re){const se=[],ue=[],fe=[];for(let pe=0;pe<i;pe++)se[pe]=0,ue[pe]=0,fe[pe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:se,enabledAttributes:ue,attributeDivisors:fe,object:re,attributes:{},index:null}}function I(re,se,ue,fe){const pe=l.attributes,xe=se.attributes;let ce=0;const _e=ue.getAttributes();for(const ye in _e)if(_e[ye].location>=0){const ge=pe[ye];let Ee=xe[ye];if(Ee===void 0&&(ye==="instanceMatrix"&&re.instanceMatrix&&(Ee=re.instanceMatrix),ye==="instanceColor"&&re.instanceColor&&(Ee=re.instanceColor)),ge===void 0||ge.attribute!==Ee||Ee&&ge.data!==Ee.data)return!0;ce++}return l.attributesNum!==ce||l.index!==fe}function F(re,se,ue,fe){const pe={},xe=se.attributes;let ce=0;const _e=ue.getAttributes();for(const ye in _e)if(_e[ye].location>=0){let ge=xe[ye];ge===void 0&&(ye==="instanceMatrix"&&re.instanceMatrix&&(ge=re.instanceMatrix),ye==="instanceColor"&&re.instanceColor&&(ge=re.instanceColor));const Ee={};Ee.attribute=ge,ge&&ge.data&&(Ee.data=ge.data),pe[ye]=Ee,ce++}l.attributes=pe,l.attributesNum=ce,l.index=fe}function L(){const re=l.newAttributes;for(let se=0,ue=re.length;se<ue;se++)re[se]=0}function U(re){P(re,0)}function P(re,se){const ue=l.newAttributes,fe=l.enabledAttributes,pe=l.attributeDivisors;ue[re]=1,fe[re]===0&&(a.enableVertexAttribArray(re),fe[re]=1),pe[re]!==se&&(a.vertexAttribDivisor(re,se),pe[re]=se)}function H(){const re=l.newAttributes,se=l.enabledAttributes;for(let ue=0,fe=se.length;ue<fe;ue++)se[ue]!==re[ue]&&(a.disableVertexAttribArray(ue),se[ue]=0)}function N(re,se,ue,fe,pe,xe,ce){ce===!0?a.vertexAttribIPointer(re,se,ue,pe,xe):a.vertexAttribPointer(re,se,ue,fe,pe,xe)}function z(re,se,ue,fe){L();const pe=fe.attributes,xe=ue.getAttributes(),ce=se.defaultAttributeValues;for(const _e in xe){const ye=xe[_e];if(ye.location>=0){let Oe=pe[_e];if(Oe===void 0&&(_e==="instanceMatrix"&&re.instanceMatrix&&(Oe=re.instanceMatrix),_e==="instanceColor"&&re.instanceColor&&(Oe=re.instanceColor)),Oe!==void 0){const ge=Oe.normalized,Ee=Oe.itemSize,ke=e.get(Oe);if(ke===void 0)continue;const je=ke.buffer,Ie=ke.type,ze=ke.bytesPerElement,ht=Ie===a.INT||Ie===a.UNSIGNED_INT||Oe.gpuType===XT;if(Oe.isInterleavedBufferAttribute){const lt=Oe.data,yt=lt.stride,Nt=Oe.offset;if(lt.isInstancedInterleavedBuffer){for(let zt=0;zt<ye.locationSize;zt++)P(ye.location+zt,lt.meshPerAttribute);re.isInstancedMesh!==!0&&fe._maxInstanceCount===void 0&&(fe._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let zt=0;zt<ye.locationSize;zt++)U(ye.location+zt);a.bindBuffer(a.ARRAY_BUFFER,je);for(let zt=0;zt<ye.locationSize;zt++)N(ye.location+zt,Ee/ye.locationSize,Ie,ge,yt*ze,(Nt+Ee/ye.locationSize*zt)*ze,ht)}else{if(Oe.isInstancedBufferAttribute){for(let lt=0;lt<ye.locationSize;lt++)P(ye.location+lt,Oe.meshPerAttribute);re.isInstancedMesh!==!0&&fe._maxInstanceCount===void 0&&(fe._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let lt=0;lt<ye.locationSize;lt++)U(ye.location+lt);a.bindBuffer(a.ARRAY_BUFFER,je);for(let lt=0;lt<ye.locationSize;lt++)N(ye.location+lt,Ee/ye.locationSize,Ie,ge,Ee*ze,Ee/ye.locationSize*lt*ze,ht)}}else if(ce!==void 0){const ge=ce[_e];if(ge!==void 0)switch(ge.length){case 2:a.vertexAttrib2fv(ye.location,ge);break;case 3:a.vertexAttrib3fv(ye.location,ge);break;case 4:a.vertexAttrib4fv(ye.location,ge);break;default:a.vertexAttrib1fv(ye.location,ge)}}}}H()}function W(){ie();for(const re in r){const se=r[re];for(const ue in se){const fe=se[ue];for(const pe in fe)b(fe[pe].object),delete fe[pe];delete se[ue]}delete r[re]}}function j(re){if(r[re.id]===void 0)return;const se=r[re.id];for(const ue in se){const fe=se[ue];for(const pe in fe)b(fe[pe].object),delete fe[pe];delete se[ue]}delete r[re.id]}function J(re){for(const se in r){const ue=r[se];if(ue[re.id]===void 0)continue;const fe=ue[re.id];for(const pe in fe)b(fe[pe].object),delete fe[pe];delete ue[re.id]}}function ie(){ee(),u=!0,l!==s&&(l=s,_(l.object))}function ee(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:A,reset:ie,resetDefaultState:ee,dispose:W,releaseStatesOfGeometry:j,releaseStatesOfProgram:J,initAttributes:L,enableAttribute:U,disableUnusedAttributes:H}}function LCe(a,e,i){let r;function s(_){r=_}function l(_,b){a.drawArrays(r,_,b),i.update(b,r,1)}function u(_,b,x){x!==0&&(a.drawArraysInstanced(r,_,b,x),i.update(b,r,x))}function A(_,b,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,_,0,b,0,x);let I=0;for(let F=0;F<x;F++)I+=b[F];i.update(I,r,1)}function g(_,b,x,C){if(x===0)return;const I=e.get("WEBGL_multi_draw");if(I===null)for(let F=0;F<_.length;F++)u(_[F],b[F],C[F]);else{I.multiDrawArraysInstancedWEBGL(r,_,0,b,0,C,0,x);let F=0;for(let L=0;L<x;L++)F+=b[L]*C[L];i.update(F,r,1)}}this.setMode=s,this.render=l,this.renderInstances=u,this.renderMultiDraw=A,this.renderMultiDrawInstances=g}function PCe(a,e,i,r){let s;function l(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const J=e.get("EXT_texture_filter_anisotropic");s=a.getParameter(J.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function u(J){return!(J!==lo&&r.convert(J)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT))}function A(J){const ie=J===Ol&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(J!==$a&&r.convert(J)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE)&&J!==ra&&!ie)}function g(J){if(J==="highp"){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";J="mediump"}return J==="mediump"&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let _=i.precision!==void 0?i.precision:"highp";const b=g(_);b!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",b,"instead."),_=b);const x=i.logarithmicDepthBuffer===!0,C=i.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),I=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),F=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),L=a.getParameter(a.MAX_TEXTURE_SIZE),U=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),P=a.getParameter(a.MAX_VERTEX_ATTRIBS),H=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),N=a.getParameter(a.MAX_VARYING_VECTORS),z=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),W=F>0,j=a.getParameter(a.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:l,getMaxPrecision:g,textureFormatReadable:u,textureTypeReadable:A,precision:_,logarithmicDepthBuffer:x,reverseDepthBuffer:C,maxTextures:I,maxVertexTextures:F,maxTextureSize:L,maxCubemapSize:U,maxAttributes:P,maxVertexUniforms:H,maxVaryings:N,maxFragmentUniforms:z,vertexTextures:W,maxSamples:j}}function OCe(a){const e=this;let i=null,r=0,s=!1,l=!1;const u=new Iv,A=new nr,g={value:null,needsUpdate:!1};this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(x,C){const I=x.length!==0||C||r!==0||s;return s=C,r=x.length,I},this.beginShadows=function(){l=!0,b(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(x,C){i=b(x,C,0)},this.setState=function(x,C,I){const F=x.clippingPlanes,L=x.clipIntersection,U=x.clipShadows,P=a.get(x);if(!s||F===null||F.length===0||l&&!U)l?b(null):_();else{const H=l?0:r,N=H*4;let z=P.clippingState||null;g.value=z,z=b(F,C,N,I);for(let W=0;W!==N;++W)z[W]=i[W];P.clippingState=z,this.numIntersection=L?this.numPlanes:0,this.numPlanes+=H}};function _(){g.value!==i&&(g.value=i,g.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function b(x,C,I,F){const L=x!==null?x.length:0;let U=null;if(L!==0){if(U=g.value,F!==!0||U===null){const P=I+L*4,H=C.matrixWorldInverse;A.getNormalMatrix(H),(U===null||U.length<P)&&(U=new Float32Array(P));for(let N=0,z=I;N!==L;++N,z+=4)u.copy(x[N]).applyMatrix4(H,A),u.normal.toArray(U,z),U[z+3]=u.constant}g.value=U,g.needsUpdate=!0}return e.numPlanes=L,e.numIntersection=0,U}}function QCe(a){let e=new WeakMap;function i(u,A){return A===Bw?u.mapping=Gv:A===pT&&(u.mapping=$y),u}function r(u){if(u&&u.isTexture){const A=u.mapping;if(A===Bw||A===pT)if(e.has(u)){const g=e.get(u).texture;return i(g,u.mapping)}else{const g=u.image;if(g&&g.height>0){const _=new Xk(g.height);return _.fromEquirectangularTexture(a,u),e.set(u,_),u.addEventListener("dispose",s),i(_.texture,u.mapping)}else return null}}return u}function s(u){const A=u.target;A.removeEventListener("dispose",s);const g=e.get(A);g!==void 0&&(e.delete(A),g.dispose())}function l(){e=new WeakMap}return{get:r,dispose:l}}const $E=4,RX=[.125,.215,.35,.446,.526,.582],rw=20,S6=new DA,DX=new Si;let B6=null,I6=0,T6=0,M6=!1;const Y1=(1+Math.sqrt(5))/2,dE=1/Y1,FX=[new Fe(-Y1,dE,0),new Fe(Y1,dE,0),new Fe(-dE,0,Y1),new Fe(dE,0,Y1),new Fe(0,Y1,-dE),new Fe(0,Y1,dE),new Fe(-1,1,-1),new Fe(1,1,-1),new Fe(-1,1,1),new Fe(1,1,1)];class fH{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,i=0,r=.1,s=100){B6=this._renderer.getRenderTarget(),I6=this._renderer.getActiveCubeFace(),T6=this._renderer.getActiveMipmapLevel(),M6=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,s,l),i>0&&this._blur(l,0,0,i),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,i=null){return this._fromTexture(e,i)}fromCubemap(e,i=null){return this._fromTexture(e,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=LX(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kX(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(B6,I6,T6),this._renderer.xr.enabled=M6,e.scissorTest=!1,iF(e,0,0,e.width,e.height)}_fromTexture(e,i){e.mapping===Gv||e.mapping===$y?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),B6=this._renderer.getRenderTarget(),I6=this._renderer.getActiveCubeFace(),T6=this._renderer.getActiveMipmapLevel(),M6=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=i||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,r={magFilter:Or,minFilter:Or,generateMipmaps:!1,type:Ol,format:lo,colorSpace:Co,depthBuffer:!1},s=UX(e,i,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=UX(e,i,r);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=NCe(l)),this._blurMaterial=HCe(l,e,i)}return s}_compileMaterial(e){const i=new Dr(this._lodPlanes[0],e);this._renderer.compile(i,S6)}_sceneToCubeUV(e,i,r,s){const A=new xo(90,1,i,r),g=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],b=this._renderer,x=b.autoClear,C=b.toneMapping;b.getClearColor(DX),b.toneMapping=xf,b.autoClear=!1;const I=new Pc({name:"PMREM.Background",side:mu,depthWrite:!1,depthTest:!1}),F=new Dr(new Og,I);let L=!1;const U=e.background;U?U.isColor&&(I.color.copy(U),e.background=null,L=!0):(I.color.copy(DX),L=!0);for(let P=0;P<6;P++){const H=P%3;H===0?(A.up.set(0,g[P],0),A.lookAt(_[P],0,0)):H===1?(A.up.set(0,0,g[P]),A.lookAt(0,_[P],0)):(A.up.set(0,g[P],0),A.lookAt(0,0,_[P]));const N=this._cubeSize;iF(s,H*N,P>2?N:0,N,N),b.setRenderTarget(s),L&&b.render(F,A),b.render(e,A)}F.geometry.dispose(),F.material.dispose(),b.toneMapping=C,b.autoClear=x,e.background=U}_textureToCubeUV(e,i){const r=this._renderer,s=e.mapping===Gv||e.mapping===$y;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=LX()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kX());const l=s?this._cubemapMaterial:this._equirectMaterial,u=new Dr(this._lodPlanes[0],l),A=l.uniforms;A.envMap.value=e;const g=this._cubeSize;iF(i,0,0,3*g,2*g),r.setRenderTarget(i),r.render(u,S6)}_applyPMREM(e){const i=this._renderer,r=i.autoClear;i.autoClear=!1;const s=this._lodPlanes.length;for(let l=1;l<s;l++){const u=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),A=FX[(s-l-1)%FX.length];this._blur(e,l-1,l,u,A)}i.autoClear=r}_blur(e,i,r,s,l){const u=this._pingPongRenderTarget;this._halfBlur(e,u,i,r,s,"latitudinal",l),this._halfBlur(u,e,r,r,s,"longitudinal",l)}_halfBlur(e,i,r,s,l,u,A){const g=this._renderer,_=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const b=3,x=new Dr(this._lodPlanes[s],_),C=_.uniforms,I=this._sizeLods[r]-1,F=isFinite(l)?Math.PI/(2*I):2*Math.PI/(2*rw-1),L=l/F,U=isFinite(l)?1+Math.floor(b*L):rw;U>rw&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${U} samples when the maximum is set to ${rw}`);const P=[];let H=0;for(let J=0;J<rw;++J){const ie=J/L,ee=Math.exp(-ie*ie/2);P.push(ee),J===0?H+=ee:J<U&&(H+=2*ee)}for(let J=0;J<P.length;J++)P[J]=P[J]/H;C.envMap.value=e.texture,C.samples.value=U,C.weights.value=P,C.latitudinal.value=u==="latitudinal",A&&(C.poleAxis.value=A);const{_lodMax:N}=this;C.dTheta.value=F,C.mipInt.value=N-r;const z=this._sizeLods[s],W=3*z*(s>N-$E?s-N+$E:0),j=4*(this._cubeSize-z);iF(i,W,j,3*z,2*z),g.setRenderTarget(i),g.render(x,S6)}}function NCe(a){const e=[],i=[],r=[];let s=a;const l=a-$E+1+RX.length;for(let u=0;u<l;u++){const A=Math.pow(2,s);i.push(A);let g=1/A;u>a-$E?g=RX[u-a+$E-1]:u===0&&(g=0),r.push(g);const _=1/(A-2),b=-_,x=1+_,C=[b,b,x,b,x,x,b,b,x,x,b,x],I=6,F=6,L=3,U=2,P=1,H=new Float32Array(L*F*I),N=new Float32Array(U*F*I),z=new Float32Array(P*F*I);for(let j=0;j<I;j++){const J=j%3*2/3-1,ie=j>2?0:-1,ee=[J,ie,0,J+2/3,ie,0,J+2/3,ie+1,0,J,ie,0,J+2/3,ie+1,0,J,ie+1,0];H.set(ee,L*F*j),N.set(C,U*F*j);const re=[j,j,j,j,j,j];z.set(re,P*F*j)}const W=new Ln;W.setAttribute("position",new fr(H,L)),W.setAttribute("uv",new fr(N,U)),W.setAttribute("faceIndex",new fr(z,P)),e.push(W),s>$E&&s--}return{lodPlanes:e,sizeLods:i,sigmas:r}}function UX(a,e,i){const r=new qd(a,e,i);return r.texture.mapping=TS,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function iF(a,e,i,r,s){a.viewport.set(e,i,r,s),a.scissor.set(e,i,r,s)}function HCe(a,e,i){const r=new Float32Array(rw),s=new Fe(0,1,0);return new qh({name:"SphericalGaussianBlur",defines:{n:rw,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:v7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Dg,depthTest:!1,depthWrite:!1})}function kX(){return new qh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:v7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Dg,depthTest:!1,depthWrite:!1})}function LX(){return new qh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:v7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Dg,depthTest:!1,depthWrite:!1})}function v7(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zCe(a){let e=new WeakMap,i=null;function r(A){if(A&&A.isTexture){const g=A.mapping,_=g===Bw||g===pT,b=g===Gv||g===$y;if(_||b){let x=e.get(A);const C=x!==void 0?x.texture.pmremVersion:0;if(A.isRenderTargetTexture&&A.pmremVersion!==C)return i===null&&(i=new fH(a)),x=_?i.fromEquirectangular(A,x):i.fromCubemap(A,x),x.texture.pmremVersion=A.pmremVersion,e.set(A,x),x.texture;if(x!==void 0)return x.texture;{const I=A.image;return _&&I&&I.height>0||b&&I&&s(I)?(i===null&&(i=new fH(a)),x=_?i.fromEquirectangular(A):i.fromCubemap(A),x.texture.pmremVersion=A.pmremVersion,e.set(A,x),A.addEventListener("dispose",l),x.texture):null}}}return A}function s(A){let g=0;const _=6;for(let b=0;b<_;b++)A[b]!==void 0&&g++;return g===_}function l(A){const g=A.target;g.removeEventListener("dispose",l);const _=e.get(g);_!==void 0&&(e.delete(g),_.dispose())}function u(){e=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:r,dispose:u}}function GCe(a){const e={};function i(r){if(e[r]!==void 0)return e[r];let s;switch(r){case"WEBGL_depth_texture":s=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=a.getExtension(r)}return e[r]=s,s}return{has:function(r){return i(r)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(r){const s=i(r);return s===null&&NE("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function VCe(a,e,i,r){const s={},l=new WeakMap;function u(x){const C=x.target;C.index!==null&&e.remove(C.index);for(const F in C.attributes)e.remove(C.attributes[F]);C.removeEventListener("dispose",u),delete s[C.id];const I=l.get(C);I&&(e.remove(I),l.delete(C)),r.releaseStatesOfGeometry(C),C.isInstancedBufferGeometry===!0&&delete C._maxInstanceCount,i.memory.geometries--}function A(x,C){return s[C.id]===!0||(C.addEventListener("dispose",u),s[C.id]=!0,i.memory.geometries++),C}function g(x){const C=x.attributes;for(const I in C)e.update(C[I],a.ARRAY_BUFFER)}function _(x){const C=[],I=x.index,F=x.attributes.position;let L=0;if(I!==null){const H=I.array;L=I.version;for(let N=0,z=H.length;N<z;N+=3){const W=H[N+0],j=H[N+1],J=H[N+2];C.push(W,j,j,J,J,W)}}else if(F!==void 0){const H=F.array;L=F.version;for(let N=0,z=H.length/3-1;N<z;N+=3){const W=N+0,j=N+1,J=N+2;C.push(W,j,j,J,J,W)}}else return;const U=new(wre(C)?$z:jk)(C,1);U.version=L;const P=l.get(x);P&&e.remove(P),l.set(x,U)}function b(x){const C=l.get(x);if(C){const I=x.index;I!==null&&C.version<I.version&&_(x)}else _(x);return l.get(x)}return{get:A,update:g,getWireframeAttribute:b}}function qCe(a,e,i){let r;function s(C){r=C}let l,u;function A(C){l=C.type,u=C.bytesPerElement}function g(C,I){a.drawElements(r,I,l,C*u),i.update(I,r,1)}function _(C,I,F){F!==0&&(a.drawElementsInstanced(r,I,l,C*u,F),i.update(I,r,F))}function b(C,I,F){if(F===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,I,0,l,C,0,F);let U=0;for(let P=0;P<F;P++)U+=I[P];i.update(U,r,1)}function x(C,I,F,L){if(F===0)return;const U=e.get("WEBGL_multi_draw");if(U===null)for(let P=0;P<C.length;P++)_(C[P]/u,I[P],L[P]);else{U.multiDrawElementsInstancedWEBGL(r,I,0,l,C,0,L,0,F);let P=0;for(let H=0;H<F;H++)P+=I[H]*L[H];i.update(P,r,1)}}this.setMode=s,this.setIndex=A,this.render=g,this.renderInstances=_,this.renderMultiDraw=b,this.renderMultiDrawInstances=x}function $Ce(a){const e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(l,u,A){switch(i.calls++,u){case a.TRIANGLES:i.triangles+=A*(l/3);break;case a.LINES:i.lines+=A*(l/2);break;case a.LINE_STRIP:i.lines+=A*(l-1);break;case a.LINE_LOOP:i.lines+=A*l;break;case a.POINTS:i.points+=A*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function s(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:s,update:r}}function WCe(a,e,i){const r=new WeakMap,s=new Vr;function l(u,A,g){const _=u.morphTargetInfluences,b=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,x=b!==void 0?b.length:0;let C=r.get(A);if(C===void 0||C.count!==x){let re=function(){ie.dispose(),r.delete(A),A.removeEventListener("dispose",re)};var I=re;C!==void 0&&C.texture.dispose();const F=A.morphAttributes.position!==void 0,L=A.morphAttributes.normal!==void 0,U=A.morphAttributes.color!==void 0,P=A.morphAttributes.position||[],H=A.morphAttributes.normal||[],N=A.morphAttributes.color||[];let z=0;F===!0&&(z=1),L===!0&&(z=2),U===!0&&(z=3);let W=A.attributes.position.count*z,j=1;W>e.maxTextureSize&&(j=Math.ceil(W/e.maxTextureSize),W=e.maxTextureSize);const J=new Float32Array(W*j*4*x),ie=new JT(J,W,j,x);ie.type=ra,ie.needsUpdate=!0;const ee=z*4;for(let se=0;se<x;se++){const ue=P[se],fe=H[se],pe=N[se],xe=W*j*4*se;for(let ce=0;ce<ue.count;ce++){const _e=ce*ee;F===!0&&(s.fromBufferAttribute(ue,ce),J[xe+_e+0]=s.x,J[xe+_e+1]=s.y,J[xe+_e+2]=s.z,J[xe+_e+3]=0),L===!0&&(s.fromBufferAttribute(fe,ce),J[xe+_e+4]=s.x,J[xe+_e+5]=s.y,J[xe+_e+6]=s.z,J[xe+_e+7]=0),U===!0&&(s.fromBufferAttribute(pe,ce),J[xe+_e+8]=s.x,J[xe+_e+9]=s.y,J[xe+_e+10]=s.z,J[xe+_e+11]=pe.itemSize===4?s.w:1)}}C={count:x,texture:ie,size:new ci(W,j)},r.set(A,C),A.addEventListener("dispose",re)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)g.getUniforms().setValue(a,"morphTexture",u.morphTexture,i);else{let F=0;for(let U=0;U<_.length;U++)F+=_[U];const L=A.morphTargetsRelative?1:1-F;g.getUniforms().setValue(a,"morphTargetBaseInfluence",L),g.getUniforms().setValue(a,"morphTargetInfluences",_)}g.getUniforms().setValue(a,"morphTargetsTexture",C.texture,i),g.getUniforms().setValue(a,"morphTargetsTextureSize",C.size)}return{update:l}}function jCe(a,e,i,r){let s=new WeakMap;function l(g){const _=r.render.frame,b=g.geometry,x=e.get(g,b);if(s.get(x)!==_&&(e.update(x),s.set(x,_)),g.isInstancedMesh&&(g.hasEventListener("dispose",A)===!1&&g.addEventListener("dispose",A),s.get(g)!==_&&(i.update(g.instanceMatrix,a.ARRAY_BUFFER),g.instanceColor!==null&&i.update(g.instanceColor,a.ARRAY_BUFFER),s.set(g,_))),g.isSkinnedMesh){const C=g.skeleton;s.get(C)!==_&&(C.update(),s.set(C,_))}return x}function u(){s=new WeakMap}function A(g){const _=g.target;_.removeEventListener("dispose",A),i.remove(_.instanceMatrix),_.instanceColor!==null&&i.remove(_.instanceColor)}return{update:l,dispose:u}}const fse=new Js,PX=new Yz(1,1),gse=new JT,mse=new ZT,_se=new eM,OX=[],QX=[],NX=new Float32Array(16),HX=new Float32Array(9),zX=new Float32Array(4);function US(a,e,i){const r=a[0];if(r<=0||r>0)return a;const s=e*i;let l=OX[s];if(l===void 0&&(l=new Float32Array(s),OX[s]=l),e!==0){r.toArray(l,0);for(let u=1,A=0;u!==e;++u)A+=i,a[u].toArray(l,A)}return l}function Oc(a,e){if(a.length!==e.length)return!1;for(let i=0,r=a.length;i<r;i++)if(a[i]!==e[i])return!1;return!0}function Qc(a,e){for(let i=0,r=e.length;i<r;i++)a[i]=e[i]}function vL(a,e){let i=QX[e];i===void 0&&(i=new Int32Array(e),QX[e]=i);for(let r=0;r!==e;++r)i[r]=a.allocateTextureUnit();return i}function KCe(a,e){const i=this.cache;i[0]!==e&&(a.uniform1f(this.addr,e),i[0]=e)}function XCe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(a.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Oc(i,e))return;a.uniform2fv(this.addr,e),Qc(i,e)}}function YCe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(a.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(e.r!==void 0)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(a.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Oc(i,e))return;a.uniform3fv(this.addr,e),Qc(i,e)}}function JCe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(a.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Oc(i,e))return;a.uniform4fv(this.addr,e),Qc(i,e)}}function ZCe(a,e){const i=this.cache,r=e.elements;if(r===void 0){if(Oc(i,e))return;a.uniformMatrix2fv(this.addr,!1,e),Qc(i,e)}else{if(Oc(i,r))return;zX.set(r),a.uniformMatrix2fv(this.addr,!1,zX),Qc(i,r)}}function eEe(a,e){const i=this.cache,r=e.elements;if(r===void 0){if(Oc(i,e))return;a.uniformMatrix3fv(this.addr,!1,e),Qc(i,e)}else{if(Oc(i,r))return;HX.set(r),a.uniformMatrix3fv(this.addr,!1,HX),Qc(i,r)}}function tEe(a,e){const i=this.cache,r=e.elements;if(r===void 0){if(Oc(i,e))return;a.uniformMatrix4fv(this.addr,!1,e),Qc(i,e)}else{if(Oc(i,r))return;NX.set(r),a.uniformMatrix4fv(this.addr,!1,NX),Qc(i,r)}}function iEe(a,e){const i=this.cache;i[0]!==e&&(a.uniform1i(this.addr,e),i[0]=e)}function nEe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(a.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Oc(i,e))return;a.uniform2iv(this.addr,e),Qc(i,e)}}function rEe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(a.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Oc(i,e))return;a.uniform3iv(this.addr,e),Qc(i,e)}}function sEe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(a.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Oc(i,e))return;a.uniform4iv(this.addr,e),Qc(i,e)}}function oEe(a,e){const i=this.cache;i[0]!==e&&(a.uniform1ui(this.addr,e),i[0]=e)}function aEe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(a.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Oc(i,e))return;a.uniform2uiv(this.addr,e),Qc(i,e)}}function lEe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(a.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Oc(i,e))return;a.uniform3uiv(this.addr,e),Qc(i,e)}}function cEe(a,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(a.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Oc(i,e))return;a.uniform4uiv(this.addr,e),Qc(i,e)}}function uEe(a,e,i){const r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(a.uniform1i(this.addr,s),r[0]=s);let l;this.type===a.SAMPLER_2D_SHADOW?(PX.compareFunction=Vz,l=PX):l=fse,i.setTexture2D(e||l,s)}function hEe(a,e,i){const r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(a.uniform1i(this.addr,s),r[0]=s),i.setTexture3D(e||mse,s)}function dEe(a,e,i){const r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(a.uniform1i(this.addr,s),r[0]=s),i.setTextureCube(e||_se,s)}function AEe(a,e,i){const r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(a.uniform1i(this.addr,s),r[0]=s),i.setTexture2DArray(e||gse,s)}function pEe(a){switch(a){case 5126:return KCe;case 35664:return XCe;case 35665:return YCe;case 35666:return JCe;case 35674:return ZCe;case 35675:return eEe;case 35676:return tEe;case 5124:case 35670:return iEe;case 35667:case 35671:return nEe;case 35668:case 35672:return rEe;case 35669:case 35673:return sEe;case 5125:return oEe;case 36294:return aEe;case 36295:return lEe;case 36296:return cEe;case 35678:case 36198:case 36298:case 36306:case 35682:return uEe;case 35679:case 36299:case 36307:return hEe;case 35680:case 36300:case 36308:case 36293:return dEe;case 36289:case 36303:case 36311:case 36292:return AEe}}function fEe(a,e){a.uniform1fv(this.addr,e)}function gEe(a,e){const i=US(e,this.size,2);a.uniform2fv(this.addr,i)}function mEe(a,e){const i=US(e,this.size,3);a.uniform3fv(this.addr,i)}function _Ee(a,e){const i=US(e,this.size,4);a.uniform4fv(this.addr,i)}function vEe(a,e){const i=US(e,this.size,4);a.uniformMatrix2fv(this.addr,!1,i)}function yEe(a,e){const i=US(e,this.size,9);a.uniformMatrix3fv(this.addr,!1,i)}function bEe(a,e){const i=US(e,this.size,16);a.uniformMatrix4fv(this.addr,!1,i)}function wEe(a,e){a.uniform1iv(this.addr,e)}function xEe(a,e){a.uniform2iv(this.addr,e)}function CEe(a,e){a.uniform3iv(this.addr,e)}function EEe(a,e){a.uniform4iv(this.addr,e)}function SEe(a,e){a.uniform1uiv(this.addr,e)}function BEe(a,e){a.uniform2uiv(this.addr,e)}function IEe(a,e){a.uniform3uiv(this.addr,e)}function TEe(a,e){a.uniform4uiv(this.addr,e)}function MEe(a,e,i){const r=this.cache,s=e.length,l=vL(i,s);Oc(r,l)||(a.uniform1iv(this.addr,l),Qc(r,l));for(let u=0;u!==s;++u)i.setTexture2D(e[u]||fse,l[u])}function REe(a,e,i){const r=this.cache,s=e.length,l=vL(i,s);Oc(r,l)||(a.uniform1iv(this.addr,l),Qc(r,l));for(let u=0;u!==s;++u)i.setTexture3D(e[u]||mse,l[u])}function DEe(a,e,i){const r=this.cache,s=e.length,l=vL(i,s);Oc(r,l)||(a.uniform1iv(this.addr,l),Qc(r,l));for(let u=0;u!==s;++u)i.setTextureCube(e[u]||_se,l[u])}function FEe(a,e,i){const r=this.cache,s=e.length,l=vL(i,s);Oc(r,l)||(a.uniform1iv(this.addr,l),Qc(r,l));for(let u=0;u!==s;++u)i.setTexture2DArray(e[u]||gse,l[u])}function UEe(a){switch(a){case 5126:return fEe;case 35664:return gEe;case 35665:return mEe;case 35666:return _Ee;case 35674:return vEe;case 35675:return yEe;case 35676:return bEe;case 5124:case 35670:return wEe;case 35667:case 35671:return xEe;case 35668:case 35672:return CEe;case 35669:case 35673:return EEe;case 5125:return SEe;case 36294:return BEe;case 36295:return IEe;case 36296:return TEe;case 35678:case 36198:case 36298:case 36306:case 35682:return MEe;case 35679:case 36299:case 36307:return REe;case 35680:case 36300:case 36308:case 36293:return DEe;case 36289:case 36303:case 36311:case 36292:return FEe}}class kEe{constructor(e,i,r){this.id=e,this.addr=r,this.cache=[],this.type=i.type,this.setValue=pEe(i.type)}}class LEe{constructor(e,i,r){this.id=e,this.addr=r,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=UEe(i.type)}}class PEe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,i,r){const s=this.seq;for(let l=0,u=s.length;l!==u;++l){const A=s[l];A.setValue(e,i[A.id],r)}}}const R6=/(\w+)(\])?(\[|\.)?/g;function GX(a,e){a.seq.push(e),a.map[e.id]=e}function OEe(a,e,i){const r=a.name,s=r.length;for(R6.lastIndex=0;;){const l=R6.exec(r),u=R6.lastIndex;let A=l[1];const g=l[2]==="]",_=l[3];if(g&&(A=A|0),_===void 0||_==="["&&u+2===s){GX(i,_===void 0?new kEe(A,a,e):new LEe(A,a,e));break}else{let x=i.map[A];x===void 0&&(x=new PEe(A),GX(i,x)),i=x}}}class nU{constructor(e,i){this.seq=[],this.map={};const r=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const l=e.getActiveUniform(i,s),u=e.getUniformLocation(i,l.name);OEe(l,u,this)}}setValue(e,i,r,s){const l=this.map[i];l!==void 0&&l.setValue(e,r,s)}setOptional(e,i,r){const s=i[r];s!==void 0&&this.setValue(e,r,s)}static upload(e,i,r,s){for(let l=0,u=i.length;l!==u;++l){const A=i[l],g=r[A.id];g.needsUpdate!==!1&&A.setValue(e,g.value,s)}}static seqWithValue(e,i){const r=[];for(let s=0,l=e.length;s!==l;++s){const u=e[s];u.id in i&&r.push(u)}return r}}function VX(a,e,i){const r=a.createShader(e);return a.shaderSource(r,i),a.compileShader(r),r}const QEe=37297;let NEe=0;function HEe(a,e){const i=a.split(`
`),r=[],s=Math.max(e-6,0),l=Math.min(e+6,i.length);for(let u=s;u<l;u++){const A=u+1;r.push(`${A===e?">":" "} ${A}: ${i[u]}`)}return r.join(`
`)}const qX=new nr;function zEe(a){lr._getMatrix(qX,lr.workingColorSpace,a);const e=`mat3( ${qX.elements.map(i=>i.toFixed(4))} )`;switch(lr.getTransfer(a)){case xT:return[e,"LinearTransferOETF"];case oo:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",a),[e,"LinearTransferOETF"]}}function $X(a,e,i){const r=a.getShaderParameter(e,a.COMPILE_STATUS),s=a.getShaderInfoLog(e).trim();if(r&&s==="")return"";const l=/ERROR: 0:(\d+)/.exec(s);if(l){const u=parseInt(l[1]);return i.toUpperCase()+`

`+s+`

`+HEe(a.getShaderSource(e),u)}else return s}function GEe(a,e){const i=zEe(e);return[`vec4 ${a}( vec4 value ) {`,`	return ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );`,"}"].join(`
`)}function VEe(a,e){let i;switch(e){case Rz:i="Linear";break;case Dz:i="Reinhard";break;case Fz:i="Cineon";break;case Qk:i="ACESFilmic";break;case Uz:i="AgX";break;case aS:i="Neutral";break;case ure:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+a+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const nF=new Fe;function qEe(){lr.getLuminanceCoefficients(nF);const a=nF.x.toFixed(4),e=nF.y.toFixed(4),i=nF.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${a}, ${e}, ${i} );`,"	return dot( weights, rgb );","}"].join(`
`)}function $Ee(a){return[a.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",a.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(UI).join(`
`)}function WEe(a){const e=[];for(const i in a){const r=a[i];r!==!1&&e.push("#define "+i+" "+r)}return e.join(`
`)}function jEe(a,e){const i={},r=a.getProgramParameter(e,a.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const l=a.getActiveAttrib(e,s),u=l.name;let A=1;l.type===a.FLOAT_MAT2&&(A=2),l.type===a.FLOAT_MAT3&&(A=3),l.type===a.FLOAT_MAT4&&(A=4),i[u]={type:l.type,location:a.getAttribLocation(e,u),locationSize:A}}return i}function UI(a){return a!==""}function WX(a,e){const i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jX(a,e){return a.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const KEe=/^[ \t]*#include +<([\w\d./]+)>/gm;function gH(a){return a.replace(KEe,YEe)}const XEe=new Map;function YEe(a,e){let i=Tr[e];if(i===void 0){const r=XEe.get(e);if(r!==void 0)i=Tr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return gH(i)}const JEe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function KX(a){return a.replace(JEe,ZEe)}function ZEe(a,e,i,r){let s="";for(let l=parseInt(e);l<parseInt(i);l++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return s}function XX(a){let e=`precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	precision ${a.precision} sampler3D;
	precision ${a.precision} sampler2DArray;
	precision ${a.precision} sampler2DShadow;
	precision ${a.precision} samplerCubeShadow;
	precision ${a.precision} sampler2DArrayShadow;
	precision ${a.precision} isampler2D;
	precision ${a.precision} isampler3D;
	precision ${a.precision} isamplerCube;
	precision ${a.precision} isampler2DArray;
	precision ${a.precision} usampler2D;
	precision ${a.precision} usampler3D;
	precision ${a.precision} usamplerCube;
	precision ${a.precision} usampler2DArray;
	`;return a.precision==="highp"?e+=`
#define HIGH_PRECISION`:a.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function eSe(a){let e="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===Ok?e="SHADOWMAP_TYPE_PCF":a.shadowMapType===WI?e="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===Sg&&(e="SHADOWMAP_TYPE_VSM"),e}function tSe(a){let e="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case Gv:case $y:e="ENVMAP_TYPE_CUBE";break;case TS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function iSe(a){let e="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case $y:e="ENVMAP_MODE_REFRACTION";break}return e}function nSe(a){let e="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case KT:e="ENVMAP_BLENDING_MULTIPLY";break;case lre:e="ENVMAP_BLENDING_MIX";break;case cre:e="ENVMAP_BLENDING_ADD";break}return e}function rSe(a){const e=a.envMapCubeUVHeight;if(e===null)return null;const i=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:r,maxMip:i}}function sSe(a,e,i,r){const s=a.getContext(),l=i.defines;let u=i.vertexShader,A=i.fragmentShader;const g=eSe(i),_=tSe(i),b=iSe(i),x=nSe(i),C=rSe(i),I=$Ee(i),F=WEe(l),L=s.createProgram();let U,P,H=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(U=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,F].filter(UI).join(`
`),U.length>0&&(U+=`
`),P=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,F].filter(UI).join(`
`),P.length>0&&(P+=`
`)):(U=[XX(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,F,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+b:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+g:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(UI).join(`
`),P=[XX(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,F,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+_:"",i.envMap?"#define "+b:"",i.envMap?"#define "+x:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+g:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==xf?"#define TONE_MAPPING":"",i.toneMapping!==xf?Tr.tonemapping_pars_fragment:"",i.toneMapping!==xf?VEe("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Tr.colorspace_pars_fragment,GEe("linearToOutputTexel",i.outputColorSpace),qEe(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(UI).join(`
`)),u=gH(u),u=WX(u,i),u=jX(u,i),A=gH(A),A=WX(A,i),A=jX(A,i),u=KX(u),A=KX(A),i.isRawShaderMaterial!==!0&&(H=`#version 300 es
`,U=[I,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+U,P=["#define varying in",i.glslVersion===lH?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===lH?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+P);const N=H+U+u,z=H+P+A,W=VX(s,s.VERTEX_SHADER,N),j=VX(s,s.FRAGMENT_SHADER,z);s.attachShader(L,W),s.attachShader(L,j),i.index0AttributeName!==void 0?s.bindAttribLocation(L,0,i.index0AttributeName):i.morphTargets===!0&&s.bindAttribLocation(L,0,"position"),s.linkProgram(L);function J(se){if(a.debug.checkShaderErrors){const ue=s.getProgramInfoLog(L).trim(),fe=s.getShaderInfoLog(W).trim(),pe=s.getShaderInfoLog(j).trim();let xe=!0,ce=!0;if(s.getProgramParameter(L,s.LINK_STATUS)===!1)if(xe=!1,typeof a.debug.onShaderError=="function")a.debug.onShaderError(s,L,W,j);else{const _e=$X(s,W,"vertex"),ye=$X(s,j,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(L,s.VALIDATE_STATUS)+`

Material Name: `+se.name+`
Material Type: `+se.type+`

Program Info Log: `+ue+`
`+_e+`
`+ye)}else ue!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ue):(fe===""||pe==="")&&(ce=!1);ce&&(se.diagnostics={runnable:xe,programLog:ue,vertexShader:{log:fe,prefix:U},fragmentShader:{log:pe,prefix:P}})}s.deleteShader(W),s.deleteShader(j),ie=new nU(s,L),ee=jEe(s,L)}let ie;this.getUniforms=function(){return ie===void 0&&J(this),ie};let ee;this.getAttributes=function(){return ee===void 0&&J(this),ee};let re=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return re===!1&&(re=s.getProgramParameter(L,QEe)),re},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(L),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=NEe++,this.cacheKey=e,this.usedTimes=1,this.program=L,this.vertexShader=W,this.fragmentShader=j,this}let oSe=0;class aSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.vertexShader,r=e.fragmentShader,s=this._getShaderStage(i),l=this._getShaderStage(r),u=this._getShaderCacheForMaterial(e);return u.has(s)===!1&&(u.add(s),s.usedTimes++),u.has(l)===!1&&(u.add(l),l.usedTimes++),this}remove(e){const i=this.materialCache.get(e);for(const r of i)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const i=this.materialCache;let r=i.get(e);return r===void 0&&(r=new Set,i.set(e,r)),r}_getShaderStage(e){const i=this.shaderCache;let r=i.get(e);return r===void 0&&(r=new lSe(e),i.set(e,r)),r}}class lSe{constructor(e){this.id=oSe++,this.code=e,this.usedTimes=0}}function cSe(a,e,i,r,s,l,u){const A=new AS,g=new aSe,_=new Set,b=[],x=s.logarithmicDepthBuffer,C=s.vertexTextures;let I=s.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function L(ee){return _.add(ee),ee===0?"uv":`uv${ee}`}function U(ee,re,se,ue,fe){const pe=ue.fog,xe=fe.geometry,ce=ee.isMeshStandardMaterial?ue.environment:null,_e=(ee.isMeshStandardMaterial?i:e).get(ee.envMap||ce),ye=_e&&_e.mapping===TS?_e.image.height:null,Oe=F[ee.type];ee.precision!==null&&(I=s.getMaxPrecision(ee.precision),I!==ee.precision&&console.warn("THREE.WebGLProgram.getParameters:",ee.precision,"not supported, using",I,"instead."));const ge=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,Ee=ge!==void 0?ge.length:0;let ke=0;xe.morphAttributes.position!==void 0&&(ke=1),xe.morphAttributes.normal!==void 0&&(ke=2),xe.morphAttributes.color!==void 0&&(ke=3);let je,Ie,ze,ht;if(Oe){const Tn=Ig[Oe];je=Tn.vertexShader,Ie=Tn.fragmentShader}else je=ee.vertexShader,Ie=ee.fragmentShader,g.update(ee),ze=g.getVertexShaderID(ee),ht=g.getFragmentShaderID(ee);const lt=a.getRenderTarget(),yt=a.state.buffers.depth.getReversed(),Nt=fe.isInstancedMesh===!0,zt=fe.isBatchedMesh===!0,ei=!!ee.map,it=!!ee.matcap,Dt=!!_e,Be=!!ee.aoMap,li=!!ee.lightMap,bt=!!ee.bumpMap,Wt=!!ee.normalMap,qe=!!ee.displacementMap,pt=!!ee.emissiveMap,At=!!ee.metalnessMap,Se=!!ee.roughnessMap,me=ee.anisotropy>0,$e=ee.clearcoat>0,Ct=ee.dispersion>0,wt=ee.iridescence>0,ft=ee.sheen>0,Ot=ee.transmission>0,Gt=me&&!!ee.anisotropyMap,si=$e&&!!ee.clearcoatMap,$t=$e&&!!ee.clearcoatNormalMap,ti=$e&&!!ee.clearcoatRoughnessMap,gi=wt&&!!ee.iridescenceMap,mi=wt&&!!ee.iridescenceThicknessMap,Oi=ft&&!!ee.sheenColorMap,Bi=ft&&!!ee.sheenRoughnessMap,ln=!!ee.specularMap,Ji=!!ee.specularColorMap,Vi=!!ee.specularIntensityMap,at=Ot&&!!ee.transmissionMap,Ti=Ot&&!!ee.thicknessMap,Pt=!!ee.gradientMap,Xt=!!ee.alphaMap,Mi=ee.alphaTest>0,Ii=!!ee.alphaHash,Fi=!!ee.extensions;let vn=xf;ee.toneMapped&&(lt===null||lt.isXRRenderTarget===!0)&&(vn=a.toneMapping);const Xn={shaderID:Oe,shaderType:ee.type,shaderName:ee.name,vertexShader:je,fragmentShader:Ie,defines:ee.defines,customVertexShaderID:ze,customFragmentShaderID:ht,isRawShaderMaterial:ee.isRawShaderMaterial===!0,glslVersion:ee.glslVersion,precision:I,batching:zt,batchingColor:zt&&fe._colorsTexture!==null,instancing:Nt,instancingColor:Nt&&fe.instanceColor!==null,instancingMorph:Nt&&fe.morphTexture!==null,supportsVertexTextures:C,outputColorSpace:lt===null?a.outputColorSpace:lt.isXRRenderTarget===!0?lt.texture.colorSpace:Co,alphaToCoverage:!!ee.alphaToCoverage,map:ei,matcap:it,envMap:Dt,envMapMode:Dt&&_e.mapping,envMapCubeUVHeight:ye,aoMap:Be,lightMap:li,bumpMap:bt,normalMap:Wt,displacementMap:C&&qe,emissiveMap:pt,normalMapObjectSpace:Wt&&ee.normalMapType===pre,normalMapTangentSpace:Wt&&ee.normalMapType===tb,metalnessMap:At,roughnessMap:Se,anisotropy:me,anisotropyMap:Gt,clearcoat:$e,clearcoatMap:si,clearcoatNormalMap:$t,clearcoatRoughnessMap:ti,dispersion:Ct,iridescence:wt,iridescenceMap:gi,iridescenceThicknessMap:mi,sheen:ft,sheenColorMap:Oi,sheenRoughnessMap:Bi,specularMap:ln,specularColorMap:Ji,specularIntensityMap:Vi,transmission:Ot,transmissionMap:at,thicknessMap:Ti,gradientMap:Pt,opaque:ee.transparent===!1&&ee.blending===pw&&ee.alphaToCoverage===!1,alphaMap:Xt,alphaTest:Mi,alphaHash:Ii,combine:ee.combine,mapUv:ei&&L(ee.map.channel),aoMapUv:Be&&L(ee.aoMap.channel),lightMapUv:li&&L(ee.lightMap.channel),bumpMapUv:bt&&L(ee.bumpMap.channel),normalMapUv:Wt&&L(ee.normalMap.channel),displacementMapUv:qe&&L(ee.displacementMap.channel),emissiveMapUv:pt&&L(ee.emissiveMap.channel),metalnessMapUv:At&&L(ee.metalnessMap.channel),roughnessMapUv:Se&&L(ee.roughnessMap.channel),anisotropyMapUv:Gt&&L(ee.anisotropyMap.channel),clearcoatMapUv:si&&L(ee.clearcoatMap.channel),clearcoatNormalMapUv:$t&&L(ee.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ti&&L(ee.clearcoatRoughnessMap.channel),iridescenceMapUv:gi&&L(ee.iridescenceMap.channel),iridescenceThicknessMapUv:mi&&L(ee.iridescenceThicknessMap.channel),sheenColorMapUv:Oi&&L(ee.sheenColorMap.channel),sheenRoughnessMapUv:Bi&&L(ee.sheenRoughnessMap.channel),specularMapUv:ln&&L(ee.specularMap.channel),specularColorMapUv:Ji&&L(ee.specularColorMap.channel),specularIntensityMapUv:Vi&&L(ee.specularIntensityMap.channel),transmissionMapUv:at&&L(ee.transmissionMap.channel),thicknessMapUv:Ti&&L(ee.thicknessMap.channel),alphaMapUv:Xt&&L(ee.alphaMap.channel),vertexTangents:!!xe.attributes.tangent&&(Wt||me),vertexColors:ee.vertexColors,vertexAlphas:ee.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,pointsUvs:fe.isPoints===!0&&!!xe.attributes.uv&&(ei||Xt),fog:!!pe,useFog:ee.fog===!0,fogExp2:!!pe&&pe.isFogExp2,flatShading:ee.flatShading===!0,sizeAttenuation:ee.sizeAttenuation===!0,logarithmicDepthBuffer:x,reverseDepthBuffer:yt,skinning:fe.isSkinnedMesh===!0,morphTargets:xe.morphAttributes.position!==void 0,morphNormals:xe.morphAttributes.normal!==void 0,morphColors:xe.morphAttributes.color!==void 0,morphTargetsCount:Ee,morphTextureStride:ke,numDirLights:re.directional.length,numPointLights:re.point.length,numSpotLights:re.spot.length,numSpotLightMaps:re.spotLightMap.length,numRectAreaLights:re.rectArea.length,numHemiLights:re.hemi.length,numDirLightShadows:re.directionalShadowMap.length,numPointLightShadows:re.pointShadowMap.length,numSpotLightShadows:re.spotShadowMap.length,numSpotLightShadowsWithMaps:re.numSpotLightShadowsWithMaps,numLightProbes:re.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:ee.dithering,shadowMapEnabled:a.shadowMap.enabled&&se.length>0,shadowMapType:a.shadowMap.type,toneMapping:vn,decodeVideoTexture:ei&&ee.map.isVideoTexture===!0&&lr.getTransfer(ee.map.colorSpace)===oo,decodeVideoTextureEmissive:pt&&ee.emissiveMap.isVideoTexture===!0&&lr.getTransfer(ee.emissiveMap.colorSpace)===oo,premultipliedAlpha:ee.premultipliedAlpha,doubleSided:ee.side===Ll,flipSided:ee.side===mu,useDepthPacking:ee.depthPacking>=0,depthPacking:ee.depthPacking||0,index0AttributeName:ee.index0AttributeName,extensionClipCullDistance:Fi&&ee.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Fi&&ee.extensions.multiDraw===!0||zt)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:ee.customProgramCacheKey()};return Xn.vertexUv1s=_.has(1),Xn.vertexUv2s=_.has(2),Xn.vertexUv3s=_.has(3),_.clear(),Xn}function P(ee){const re=[];if(ee.shaderID?re.push(ee.shaderID):(re.push(ee.customVertexShaderID),re.push(ee.customFragmentShaderID)),ee.defines!==void 0)for(const se in ee.defines)re.push(se),re.push(ee.defines[se]);return ee.isRawShaderMaterial===!1&&(H(re,ee),N(re,ee),re.push(a.outputColorSpace)),re.push(ee.customProgramCacheKey),re.join()}function H(ee,re){ee.push(re.precision),ee.push(re.outputColorSpace),ee.push(re.envMapMode),ee.push(re.envMapCubeUVHeight),ee.push(re.mapUv),ee.push(re.alphaMapUv),ee.push(re.lightMapUv),ee.push(re.aoMapUv),ee.push(re.bumpMapUv),ee.push(re.normalMapUv),ee.push(re.displacementMapUv),ee.push(re.emissiveMapUv),ee.push(re.metalnessMapUv),ee.push(re.roughnessMapUv),ee.push(re.anisotropyMapUv),ee.push(re.clearcoatMapUv),ee.push(re.clearcoatNormalMapUv),ee.push(re.clearcoatRoughnessMapUv),ee.push(re.iridescenceMapUv),ee.push(re.iridescenceThicknessMapUv),ee.push(re.sheenColorMapUv),ee.push(re.sheenRoughnessMapUv),ee.push(re.specularMapUv),ee.push(re.specularColorMapUv),ee.push(re.specularIntensityMapUv),ee.push(re.transmissionMapUv),ee.push(re.thicknessMapUv),ee.push(re.combine),ee.push(re.fogExp2),ee.push(re.sizeAttenuation),ee.push(re.morphTargetsCount),ee.push(re.morphAttributeCount),ee.push(re.numDirLights),ee.push(re.numPointLights),ee.push(re.numSpotLights),ee.push(re.numSpotLightMaps),ee.push(re.numHemiLights),ee.push(re.numRectAreaLights),ee.push(re.numDirLightShadows),ee.push(re.numPointLightShadows),ee.push(re.numSpotLightShadows),ee.push(re.numSpotLightShadowsWithMaps),ee.push(re.numLightProbes),ee.push(re.shadowMapType),ee.push(re.toneMapping),ee.push(re.numClippingPlanes),ee.push(re.numClipIntersection),ee.push(re.depthPacking)}function N(ee,re){A.disableAll(),re.supportsVertexTextures&&A.enable(0),re.instancing&&A.enable(1),re.instancingColor&&A.enable(2),re.instancingMorph&&A.enable(3),re.matcap&&A.enable(4),re.envMap&&A.enable(5),re.normalMapObjectSpace&&A.enable(6),re.normalMapTangentSpace&&A.enable(7),re.clearcoat&&A.enable(8),re.iridescence&&A.enable(9),re.alphaTest&&A.enable(10),re.vertexColors&&A.enable(11),re.vertexAlphas&&A.enable(12),re.vertexUv1s&&A.enable(13),re.vertexUv2s&&A.enable(14),re.vertexUv3s&&A.enable(15),re.vertexTangents&&A.enable(16),re.anisotropy&&A.enable(17),re.alphaHash&&A.enable(18),re.batching&&A.enable(19),re.dispersion&&A.enable(20),re.batchingColor&&A.enable(21),ee.push(A.mask),A.disableAll(),re.fog&&A.enable(0),re.useFog&&A.enable(1),re.flatShading&&A.enable(2),re.logarithmicDepthBuffer&&A.enable(3),re.reverseDepthBuffer&&A.enable(4),re.skinning&&A.enable(5),re.morphTargets&&A.enable(6),re.morphNormals&&A.enable(7),re.morphColors&&A.enable(8),re.premultipliedAlpha&&A.enable(9),re.shadowMapEnabled&&A.enable(10),re.doubleSided&&A.enable(11),re.flipSided&&A.enable(12),re.useDepthPacking&&A.enable(13),re.dithering&&A.enable(14),re.transmission&&A.enable(15),re.sheen&&A.enable(16),re.opaque&&A.enable(17),re.pointsUvs&&A.enable(18),re.decodeVideoTexture&&A.enable(19),re.decodeVideoTextureEmissive&&A.enable(20),re.alphaToCoverage&&A.enable(21),ee.push(A.mask)}function z(ee){const re=F[ee.type];let se;if(re){const ue=Ig[re];se=Wz.clone(ue.uniforms)}else se=ee.uniforms;return se}function W(ee,re){let se;for(let ue=0,fe=b.length;ue<fe;ue++){const pe=b[ue];if(pe.cacheKey===re){se=pe,++se.usedTimes;break}}return se===void 0&&(se=new sSe(a,re,ee,l),b.push(se)),se}function j(ee){if(--ee.usedTimes===0){const re=b.indexOf(ee);b[re]=b[b.length-1],b.pop(),ee.destroy()}}function J(ee){g.remove(ee)}function ie(){g.dispose()}return{getParameters:U,getProgramCacheKey:P,getUniforms:z,acquireProgram:W,releaseProgram:j,releaseShaderCache:J,programs:b,dispose:ie}}function uSe(){let a=new WeakMap;function e(u){return a.has(u)}function i(u){let A=a.get(u);return A===void 0&&(A={},a.set(u,A)),A}function r(u){a.delete(u)}function s(u,A,g){a.get(u)[A]=g}function l(){a=new WeakMap}return{has:e,get:i,remove:r,update:s,dispose:l}}function hSe(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.material.id!==e.material.id?a.material.id-e.material.id:a.z!==e.z?a.z-e.z:a.id-e.id}function YX(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.z!==e.z?e.z-a.z:a.id-e.id}function JX(){const a=[];let e=0;const i=[],r=[],s=[];function l(){e=0,i.length=0,r.length=0,s.length=0}function u(x,C,I,F,L,U){let P=a[e];return P===void 0?(P={id:x.id,object:x,geometry:C,material:I,groupOrder:F,renderOrder:x.renderOrder,z:L,group:U},a[e]=P):(P.id=x.id,P.object=x,P.geometry=C,P.material=I,P.groupOrder=F,P.renderOrder=x.renderOrder,P.z=L,P.group=U),e++,P}function A(x,C,I,F,L,U){const P=u(x,C,I,F,L,U);I.transmission>0?r.push(P):I.transparent===!0?s.push(P):i.push(P)}function g(x,C,I,F,L,U){const P=u(x,C,I,F,L,U);I.transmission>0?r.unshift(P):I.transparent===!0?s.unshift(P):i.unshift(P)}function _(x,C){i.length>1&&i.sort(x||hSe),r.length>1&&r.sort(C||YX),s.length>1&&s.sort(C||YX)}function b(){for(let x=e,C=a.length;x<C;x++){const I=a[x];if(I.id===null)break;I.id=null,I.object=null,I.geometry=null,I.material=null,I.group=null}}return{opaque:i,transmissive:r,transparent:s,init:l,push:A,unshift:g,finish:b,sort:_}}function dSe(){let a=new WeakMap;function e(r,s){const l=a.get(r);let u;return l===void 0?(u=new JX,a.set(r,[u])):s>=l.length?(u=new JX,l.push(u)):u=l[s],u}function i(){a=new WeakMap}return{get:e,dispose:i}}function ASe(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new Fe,color:new Si};break;case"SpotLight":i={position:new Fe,direction:new Fe,color:new Si,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Fe,color:new Si,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Fe,skyColor:new Si,groundColor:new Si};break;case"RectAreaLight":i={color:new Si,position:new Fe,halfWidth:new Fe,halfHeight:new Fe};break}return a[e.id]=i,i}}}function pSe(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci};break;case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[e.id]=i,i}}}let fSe=0;function gSe(a,e){return(e.castShadow?2:0)-(a.castShadow?2:0)+(e.map?1:0)-(a.map?1:0)}function mSe(a){const e=new ASe,i=pSe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let _=0;_<9;_++)r.probe.push(new Fe);const s=new Fe,l=new Ki,u=new Ki;function A(_){let b=0,x=0,C=0;for(let ee=0;ee<9;ee++)r.probe[ee].set(0,0,0);let I=0,F=0,L=0,U=0,P=0,H=0,N=0,z=0,W=0,j=0,J=0;_.sort(gSe);for(let ee=0,re=_.length;ee<re;ee++){const se=_[ee],ue=se.color,fe=se.intensity,pe=se.distance,xe=se.shadow&&se.shadow.map?se.shadow.map.texture:null;if(se.isAmbientLight)b+=ue.r*fe,x+=ue.g*fe,C+=ue.b*fe;else if(se.isLightProbe){for(let ce=0;ce<9;ce++)r.probe[ce].addScaledVector(se.sh.coefficients[ce],fe);J++}else if(se.isDirectionalLight){const ce=e.get(se);if(ce.color.copy(se.color).multiplyScalar(se.intensity),se.castShadow){const _e=se.shadow,ye=i.get(se);ye.shadowIntensity=_e.intensity,ye.shadowBias=_e.bias,ye.shadowNormalBias=_e.normalBias,ye.shadowRadius=_e.radius,ye.shadowMapSize=_e.mapSize,r.directionalShadow[I]=ye,r.directionalShadowMap[I]=xe,r.directionalShadowMatrix[I]=se.shadow.matrix,H++}r.directional[I]=ce,I++}else if(se.isSpotLight){const ce=e.get(se);ce.position.setFromMatrixPosition(se.matrixWorld),ce.color.copy(ue).multiplyScalar(fe),ce.distance=pe,ce.coneCos=Math.cos(se.angle),ce.penumbraCos=Math.cos(se.angle*(1-se.penumbra)),ce.decay=se.decay,r.spot[L]=ce;const _e=se.shadow;if(se.map&&(r.spotLightMap[W]=se.map,W++,_e.updateMatrices(se),se.castShadow&&j++),r.spotLightMatrix[L]=_e.matrix,se.castShadow){const ye=i.get(se);ye.shadowIntensity=_e.intensity,ye.shadowBias=_e.bias,ye.shadowNormalBias=_e.normalBias,ye.shadowRadius=_e.radius,ye.shadowMapSize=_e.mapSize,r.spotShadow[L]=ye,r.spotShadowMap[L]=xe,z++}L++}else if(se.isRectAreaLight){const ce=e.get(se);ce.color.copy(ue).multiplyScalar(fe),ce.halfWidth.set(se.width*.5,0,0),ce.halfHeight.set(0,se.height*.5,0),r.rectArea[U]=ce,U++}else if(se.isPointLight){const ce=e.get(se);if(ce.color.copy(se.color).multiplyScalar(se.intensity),ce.distance=se.distance,ce.decay=se.decay,se.castShadow){const _e=se.shadow,ye=i.get(se);ye.shadowIntensity=_e.intensity,ye.shadowBias=_e.bias,ye.shadowNormalBias=_e.normalBias,ye.shadowRadius=_e.radius,ye.shadowMapSize=_e.mapSize,ye.shadowCameraNear=_e.camera.near,ye.shadowCameraFar=_e.camera.far,r.pointShadow[F]=ye,r.pointShadowMap[F]=xe,r.pointShadowMatrix[F]=se.shadow.matrix,N++}r.point[F]=ce,F++}else if(se.isHemisphereLight){const ce=e.get(se);ce.skyColor.copy(se.color).multiplyScalar(fe),ce.groundColor.copy(se.groundColor).multiplyScalar(fe),r.hemi[P]=ce,P++}}U>0&&(a.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Zi.LTC_FLOAT_1,r.rectAreaLTC2=Zi.LTC_FLOAT_2):(r.rectAreaLTC1=Zi.LTC_HALF_1,r.rectAreaLTC2=Zi.LTC_HALF_2)),r.ambient[0]=b,r.ambient[1]=x,r.ambient[2]=C;const ie=r.hash;(ie.directionalLength!==I||ie.pointLength!==F||ie.spotLength!==L||ie.rectAreaLength!==U||ie.hemiLength!==P||ie.numDirectionalShadows!==H||ie.numPointShadows!==N||ie.numSpotShadows!==z||ie.numSpotMaps!==W||ie.numLightProbes!==J)&&(r.directional.length=I,r.spot.length=L,r.rectArea.length=U,r.point.length=F,r.hemi.length=P,r.directionalShadow.length=H,r.directionalShadowMap.length=H,r.pointShadow.length=N,r.pointShadowMap.length=N,r.spotShadow.length=z,r.spotShadowMap.length=z,r.directionalShadowMatrix.length=H,r.pointShadowMatrix.length=N,r.spotLightMatrix.length=z+W-j,r.spotLightMap.length=W,r.numSpotLightShadowsWithMaps=j,r.numLightProbes=J,ie.directionalLength=I,ie.pointLength=F,ie.spotLength=L,ie.rectAreaLength=U,ie.hemiLength=P,ie.numDirectionalShadows=H,ie.numPointShadows=N,ie.numSpotShadows=z,ie.numSpotMaps=W,ie.numLightProbes=J,r.version=fSe++)}function g(_,b){let x=0,C=0,I=0,F=0,L=0;const U=b.matrixWorldInverse;for(let P=0,H=_.length;P<H;P++){const N=_[P];if(N.isDirectionalLight){const z=r.directional[x];z.direction.setFromMatrixPosition(N.matrixWorld),s.setFromMatrixPosition(N.target.matrixWorld),z.direction.sub(s),z.direction.transformDirection(U),x++}else if(N.isSpotLight){const z=r.spot[I];z.position.setFromMatrixPosition(N.matrixWorld),z.position.applyMatrix4(U),z.direction.setFromMatrixPosition(N.matrixWorld),s.setFromMatrixPosition(N.target.matrixWorld),z.direction.sub(s),z.direction.transformDirection(U),I++}else if(N.isRectAreaLight){const z=r.rectArea[F];z.position.setFromMatrixPosition(N.matrixWorld),z.position.applyMatrix4(U),u.identity(),l.copy(N.matrixWorld),l.premultiply(U),u.extractRotation(l),z.halfWidth.set(N.width*.5,0,0),z.halfHeight.set(0,N.height*.5,0),z.halfWidth.applyMatrix4(u),z.halfHeight.applyMatrix4(u),F++}else if(N.isPointLight){const z=r.point[C];z.position.setFromMatrixPosition(N.matrixWorld),z.position.applyMatrix4(U),C++}else if(N.isHemisphereLight){const z=r.hemi[L];z.direction.setFromMatrixPosition(N.matrixWorld),z.direction.transformDirection(U),L++}}}return{setup:A,setupView:g,state:r}}function ZX(a){const e=new mSe(a),i=[],r=[];function s(b){_.camera=b,i.length=0,r.length=0}function l(b){i.push(b)}function u(b){r.push(b)}function A(){e.setup(i)}function g(b){e.setupView(i,b)}const _={lightsArray:i,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:_,setupLights:A,setupLightsView:g,pushLight:l,pushShadow:u}}function _Se(a){let e=new WeakMap;function i(s,l=0){const u=e.get(s);let A;return u===void 0?(A=new ZX(a),e.set(s,[A])):l>=u.length?(A=new ZX(a),u.push(A)):A=u[l],A}function r(){e=new WeakMap}return{get:i,dispose:r}}const vSe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ySe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function bSe(a,e,i){let r=new iM;const s=new ci,l=new ci,u=new Vr,A=new sM({depthPacking:Gz}),g=new pL,_={},b=i.maxTextureSize,x={[If]:mu,[mu]:If,[Ll]:Ll},C=new qh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ci},radius:{value:4}},vertexShader:vSe,fragmentShader:ySe}),I=C.clone();I.defines.HORIZONTAL_PASS=1;const F=new Ln;F.setAttribute("position",new fr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const L=new Dr(F,C),U=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ok;let P=this.type;this.render=function(j,J,ie){if(U.enabled===!1||U.autoUpdate===!1&&U.needsUpdate===!1||j.length===0)return;const ee=a.getRenderTarget(),re=a.getActiveCubeFace(),se=a.getActiveMipmapLevel(),ue=a.state;ue.setBlending(Dg),ue.buffers.color.setClear(1,1,1,1),ue.buffers.depth.setTest(!0),ue.setScissorTest(!1);const fe=P!==Sg&&this.type===Sg,pe=P===Sg&&this.type!==Sg;for(let xe=0,ce=j.length;xe<ce;xe++){const _e=j[xe],ye=_e.shadow;if(ye===void 0){console.warn("THREE.WebGLShadowMap:",_e,"has no shadow.");continue}if(ye.autoUpdate===!1&&ye.needsUpdate===!1)continue;s.copy(ye.mapSize);const Oe=ye.getFrameExtents();if(s.multiply(Oe),l.copy(ye.mapSize),(s.x>b||s.y>b)&&(s.x>b&&(l.x=Math.floor(b/Oe.x),s.x=l.x*Oe.x,ye.mapSize.x=l.x),s.y>b&&(l.y=Math.floor(b/Oe.y),s.y=l.y*Oe.y,ye.mapSize.y=l.y)),ye.map===null||fe===!0||pe===!0){const Ee=this.type!==Sg?{minFilter:Da,magFilter:Da}:{};ye.map!==null&&ye.map.dispose(),ye.map=new qd(s.x,s.y,Ee),ye.map.texture.name=_e.name+".shadowMap",ye.camera.updateProjectionMatrix()}a.setRenderTarget(ye.map),a.clear();const ge=ye.getViewportCount();for(let Ee=0;Ee<ge;Ee++){const ke=ye.getViewport(Ee);u.set(l.x*ke.x,l.y*ke.y,l.x*ke.z,l.y*ke.w),ue.viewport(u),ye.updateMatrices(_e,Ee),r=ye.getFrustum(),z(J,ie,ye.camera,_e,this.type)}ye.isPointLightShadow!==!0&&this.type===Sg&&H(ye,ie),ye.needsUpdate=!1}P=this.type,U.needsUpdate=!1,a.setRenderTarget(ee,re,se)};function H(j,J){const ie=e.update(L);C.defines.VSM_SAMPLES!==j.blurSamples&&(C.defines.VSM_SAMPLES=j.blurSamples,I.defines.VSM_SAMPLES=j.blurSamples,C.needsUpdate=!0,I.needsUpdate=!0),j.mapPass===null&&(j.mapPass=new qd(s.x,s.y)),C.uniforms.shadow_pass.value=j.map.texture,C.uniforms.resolution.value=j.mapSize,C.uniforms.radius.value=j.radius,a.setRenderTarget(j.mapPass),a.clear(),a.renderBufferDirect(J,null,ie,C,L,null),I.uniforms.shadow_pass.value=j.mapPass.texture,I.uniforms.resolution.value=j.mapSize,I.uniforms.radius.value=j.radius,a.setRenderTarget(j.map),a.clear(),a.renderBufferDirect(J,null,ie,I,L,null)}function N(j,J,ie,ee){let re=null;const se=ie.isPointLight===!0?j.customDistanceMaterial:j.customDepthMaterial;if(se!==void 0)re=se;else if(re=ie.isPointLight===!0?g:A,a.localClippingEnabled&&J.clipShadows===!0&&Array.isArray(J.clippingPlanes)&&J.clippingPlanes.length!==0||J.displacementMap&&J.displacementScale!==0||J.alphaMap&&J.alphaTest>0||J.map&&J.alphaTest>0){const ue=re.uuid,fe=J.uuid;let pe=_[ue];pe===void 0&&(pe={},_[ue]=pe);let xe=pe[fe];xe===void 0&&(xe=re.clone(),pe[fe]=xe,J.addEventListener("dispose",W)),re=xe}if(re.visible=J.visible,re.wireframe=J.wireframe,ee===Sg?re.side=J.shadowSide!==null?J.shadowSide:J.side:re.side=J.shadowSide!==null?J.shadowSide:x[J.side],re.alphaMap=J.alphaMap,re.alphaTest=J.alphaTest,re.map=J.map,re.clipShadows=J.clipShadows,re.clippingPlanes=J.clippingPlanes,re.clipIntersection=J.clipIntersection,re.displacementMap=J.displacementMap,re.displacementScale=J.displacementScale,re.displacementBias=J.displacementBias,re.wireframeLinewidth=J.wireframeLinewidth,re.linewidth=J.linewidth,ie.isPointLight===!0&&re.isMeshDistanceMaterial===!0){const ue=a.properties.get(re);ue.light=ie}return re}function z(j,J,ie,ee,re){if(j.visible===!1)return;if(j.layers.test(J.layers)&&(j.isMesh||j.isLine||j.isPoints)&&(j.castShadow||j.receiveShadow&&re===Sg)&&(!j.frustumCulled||r.intersectsObject(j))){j.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,j.matrixWorld);const fe=e.update(j),pe=j.material;if(Array.isArray(pe)){const xe=fe.groups;for(let ce=0,_e=xe.length;ce<_e;ce++){const ye=xe[ce],Oe=pe[ye.materialIndex];if(Oe&&Oe.visible){const ge=N(j,Oe,ee,re);j.onBeforeShadow(a,j,J,ie,fe,ge,ye),a.renderBufferDirect(ie,null,fe,ge,j,ye),j.onAfterShadow(a,j,J,ie,fe,ge,ye)}}}else if(pe.visible){const xe=N(j,pe,ee,re);j.onBeforeShadow(a,j,J,ie,fe,xe,null),a.renderBufferDirect(ie,null,fe,xe,j,null),j.onAfterShadow(a,j,J,ie,fe,xe,null)}}const ue=j.children;for(let fe=0,pe=ue.length;fe<pe;fe++)z(ue[fe],J,ie,ee,re)}function W(j){j.target.removeEventListener("dispose",W);for(const ie in _){const ee=_[ie],re=j.target.uuid;re in ee&&(ee[re].dispose(),delete ee[re])}}}const wSe={[TU]:MU,[RU]:UU,[DU]:kU,[Sw]:FU,[MU]:TU,[UU]:RU,[kU]:DU,[FU]:Sw};function xSe(a,e){function i(){let at=!1;const Ti=new Vr;let Pt=null;const Xt=new Vr(0,0,0,0);return{setMask:function(Mi){Pt!==Mi&&!at&&(a.colorMask(Mi,Mi,Mi,Mi),Pt=Mi)},setLocked:function(Mi){at=Mi},setClear:function(Mi,Ii,Fi,vn,Xn){Xn===!0&&(Mi*=vn,Ii*=vn,Fi*=vn),Ti.set(Mi,Ii,Fi,vn),Xt.equals(Ti)===!1&&(a.clearColor(Mi,Ii,Fi,vn),Xt.copy(Ti))},reset:function(){at=!1,Pt=null,Xt.set(-1,0,0,0)}}}function r(){let at=!1,Ti=!1,Pt=null,Xt=null,Mi=null;return{setReversed:function(Ii){if(Ti!==Ii){const Fi=e.get("EXT_clip_control");Ti?Fi.clipControlEXT(Fi.LOWER_LEFT_EXT,Fi.ZERO_TO_ONE_EXT):Fi.clipControlEXT(Fi.LOWER_LEFT_EXT,Fi.NEGATIVE_ONE_TO_ONE_EXT);const vn=Mi;Mi=null,this.setClear(vn)}Ti=Ii},getReversed:function(){return Ti},setTest:function(Ii){Ii?lt(a.DEPTH_TEST):yt(a.DEPTH_TEST)},setMask:function(Ii){Pt!==Ii&&!at&&(a.depthMask(Ii),Pt=Ii)},setFunc:function(Ii){if(Ti&&(Ii=wSe[Ii]),Xt!==Ii){switch(Ii){case TU:a.depthFunc(a.NEVER);break;case MU:a.depthFunc(a.ALWAYS);break;case RU:a.depthFunc(a.LESS);break;case Sw:a.depthFunc(a.LEQUAL);break;case DU:a.depthFunc(a.EQUAL);break;case FU:a.depthFunc(a.GEQUAL);break;case UU:a.depthFunc(a.GREATER);break;case kU:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}Xt=Ii}},setLocked:function(Ii){at=Ii},setClear:function(Ii){Mi!==Ii&&(Ti&&(Ii=1-Ii),a.clearDepth(Ii),Mi=Ii)},reset:function(){at=!1,Pt=null,Xt=null,Mi=null,Ti=!1}}}function s(){let at=!1,Ti=null,Pt=null,Xt=null,Mi=null,Ii=null,Fi=null,vn=null,Xn=null;return{setTest:function(Tn){at||(Tn?lt(a.STENCIL_TEST):yt(a.STENCIL_TEST))},setMask:function(Tn){Ti!==Tn&&!at&&(a.stencilMask(Tn),Ti=Tn)},setFunc:function(Tn,cr,gr){(Pt!==Tn||Xt!==cr||Mi!==gr)&&(a.stencilFunc(Tn,cr,gr),Pt=Tn,Xt=cr,Mi=gr)},setOp:function(Tn,cr,gr){(Ii!==Tn||Fi!==cr||vn!==gr)&&(a.stencilOp(Tn,cr,gr),Ii=Tn,Fi=cr,vn=gr)},setLocked:function(Tn){at=Tn},setClear:function(Tn){Xn!==Tn&&(a.clearStencil(Tn),Xn=Tn)},reset:function(){at=!1,Ti=null,Pt=null,Xt=null,Mi=null,Ii=null,Fi=null,vn=null,Xn=null}}}const l=new i,u=new r,A=new s,g=new WeakMap,_=new WeakMap;let b={},x={},C=new WeakMap,I=[],F=null,L=!1,U=null,P=null,H=null,N=null,z=null,W=null,j=null,J=new Si(0,0,0),ie=0,ee=!1,re=null,se=null,ue=null,fe=null,pe=null;const xe=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ce=!1,_e=0;const ye=a.getParameter(a.VERSION);ye.indexOf("WebGL")!==-1?(_e=parseFloat(/^WebGL (\d)/.exec(ye)[1]),ce=_e>=1):ye.indexOf("OpenGL ES")!==-1&&(_e=parseFloat(/^OpenGL ES (\d)/.exec(ye)[1]),ce=_e>=2);let Oe=null,ge={};const Ee=a.getParameter(a.SCISSOR_BOX),ke=a.getParameter(a.VIEWPORT),je=new Vr().fromArray(Ee),Ie=new Vr().fromArray(ke);function ze(at,Ti,Pt,Xt){const Mi=new Uint8Array(4),Ii=a.createTexture();a.bindTexture(at,Ii),a.texParameteri(at,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(at,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let Fi=0;Fi<Pt;Fi++)at===a.TEXTURE_3D||at===a.TEXTURE_2D_ARRAY?a.texImage3D(Ti,0,a.RGBA,1,1,Xt,0,a.RGBA,a.UNSIGNED_BYTE,Mi):a.texImage2D(Ti+Fi,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,Mi);return Ii}const ht={};ht[a.TEXTURE_2D]=ze(a.TEXTURE_2D,a.TEXTURE_2D,1),ht[a.TEXTURE_CUBE_MAP]=ze(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),ht[a.TEXTURE_2D_ARRAY]=ze(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),ht[a.TEXTURE_3D]=ze(a.TEXTURE_3D,a.TEXTURE_3D,1,1),l.setClear(0,0,0,1),u.setClear(1),A.setClear(0),lt(a.DEPTH_TEST),u.setFunc(Sw),bt(!1),Wt(tH),lt(a.CULL_FACE),Be(Dg);function lt(at){b[at]!==!0&&(a.enable(at),b[at]=!0)}function yt(at){b[at]!==!1&&(a.disable(at),b[at]=!1)}function Nt(at,Ti){return x[at]!==Ti?(a.bindFramebuffer(at,Ti),x[at]=Ti,at===a.DRAW_FRAMEBUFFER&&(x[a.FRAMEBUFFER]=Ti),at===a.FRAMEBUFFER&&(x[a.DRAW_FRAMEBUFFER]=Ti),!0):!1}function zt(at,Ti){let Pt=I,Xt=!1;if(at){Pt=C.get(Ti),Pt===void 0&&(Pt=[],C.set(Ti,Pt));const Mi=at.textures;if(Pt.length!==Mi.length||Pt[0]!==a.COLOR_ATTACHMENT0){for(let Ii=0,Fi=Mi.length;Ii<Fi;Ii++)Pt[Ii]=a.COLOR_ATTACHMENT0+Ii;Pt.length=Mi.length,Xt=!0}}else Pt[0]!==a.BACK&&(Pt[0]=a.BACK,Xt=!0);Xt&&a.drawBuffers(Pt)}function ei(at){return F!==at?(a.useProgram(at),F=at,!0):!1}const it={[Fy]:a.FUNC_ADD,[qne]:a.FUNC_SUBTRACT,[$ne]:a.FUNC_REVERSE_SUBTRACT};it[Wne]=a.MIN,it[jne]=a.MAX;const Dt={[Kne]:a.ZERO,[Xne]:a.ONE,[Yne]:a.SRC_COLOR,[BU]:a.SRC_ALPHA,[nre]:a.SRC_ALPHA_SATURATE,[tre]:a.DST_COLOR,[Zne]:a.DST_ALPHA,[Jne]:a.ONE_MINUS_SRC_COLOR,[IU]:a.ONE_MINUS_SRC_ALPHA,[ire]:a.ONE_MINUS_DST_COLOR,[ere]:a.ONE_MINUS_DST_ALPHA,[rre]:a.CONSTANT_COLOR,[sre]:a.ONE_MINUS_CONSTANT_COLOR,[ore]:a.CONSTANT_ALPHA,[are]:a.ONE_MINUS_CONSTANT_ALPHA};function Be(at,Ti,Pt,Xt,Mi,Ii,Fi,vn,Xn,Tn){if(at===Dg){L===!0&&(yt(a.BLEND),L=!1);return}if(L===!1&&(lt(a.BLEND),L=!0),at!==Vne){if(at!==U||Tn!==ee){if((P!==Fy||z!==Fy)&&(a.blendEquation(a.FUNC_ADD),P=Fy,z=Fy),Tn)switch(at){case pw:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case iH:a.blendFunc(a.ONE,a.ONE);break;case nH:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case rH:a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",at);break}else switch(at){case pw:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case iH:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case nH:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case rH:a.blendFunc(a.ZERO,a.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",at);break}H=null,N=null,W=null,j=null,J.set(0,0,0),ie=0,U=at,ee=Tn}return}Mi=Mi||Ti,Ii=Ii||Pt,Fi=Fi||Xt,(Ti!==P||Mi!==z)&&(a.blendEquationSeparate(it[Ti],it[Mi]),P=Ti,z=Mi),(Pt!==H||Xt!==N||Ii!==W||Fi!==j)&&(a.blendFuncSeparate(Dt[Pt],Dt[Xt],Dt[Ii],Dt[Fi]),H=Pt,N=Xt,W=Ii,j=Fi),(vn.equals(J)===!1||Xn!==ie)&&(a.blendColor(vn.r,vn.g,vn.b,Xn),J.copy(vn),ie=Xn),U=at,ee=!1}function li(at,Ti){at.side===Ll?yt(a.CULL_FACE):lt(a.CULL_FACE);let Pt=at.side===mu;Ti&&(Pt=!Pt),bt(Pt),at.blending===pw&&at.transparent===!1?Be(Dg):Be(at.blending,at.blendEquation,at.blendSrc,at.blendDst,at.blendEquationAlpha,at.blendSrcAlpha,at.blendDstAlpha,at.blendColor,at.blendAlpha,at.premultipliedAlpha),u.setFunc(at.depthFunc),u.setTest(at.depthTest),u.setMask(at.depthWrite),l.setMask(at.colorWrite);const Xt=at.stencilWrite;A.setTest(Xt),Xt&&(A.setMask(at.stencilWriteMask),A.setFunc(at.stencilFunc,at.stencilRef,at.stencilFuncMask),A.setOp(at.stencilFail,at.stencilZFail,at.stencilZPass)),pt(at.polygonOffset,at.polygonOffsetFactor,at.polygonOffsetUnits),at.alphaToCoverage===!0?lt(a.SAMPLE_ALPHA_TO_COVERAGE):yt(a.SAMPLE_ALPHA_TO_COVERAGE)}function bt(at){re!==at&&(at?a.frontFace(a.CW):a.frontFace(a.CCW),re=at)}function Wt(at){at!==Hne?(lt(a.CULL_FACE),at!==se&&(at===tH?a.cullFace(a.BACK):at===zne?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):yt(a.CULL_FACE),se=at}function qe(at){at!==ue&&(ce&&a.lineWidth(at),ue=at)}function pt(at,Ti,Pt){at?(lt(a.POLYGON_OFFSET_FILL),(fe!==Ti||pe!==Pt)&&(a.polygonOffset(Ti,Pt),fe=Ti,pe=Pt)):yt(a.POLYGON_OFFSET_FILL)}function At(at){at?lt(a.SCISSOR_TEST):yt(a.SCISSOR_TEST)}function Se(at){at===void 0&&(at=a.TEXTURE0+xe-1),Oe!==at&&(a.activeTexture(at),Oe=at)}function me(at,Ti,Pt){Pt===void 0&&(Oe===null?Pt=a.TEXTURE0+xe-1:Pt=Oe);let Xt=ge[Pt];Xt===void 0&&(Xt={type:void 0,texture:void 0},ge[Pt]=Xt),(Xt.type!==at||Xt.texture!==Ti)&&(Oe!==Pt&&(a.activeTexture(Pt),Oe=Pt),a.bindTexture(at,Ti||ht[at]),Xt.type=at,Xt.texture=Ti)}function $e(){const at=ge[Oe];at!==void 0&&at.type!==void 0&&(a.bindTexture(at.type,null),at.type=void 0,at.texture=void 0)}function Ct(){try{a.compressedTexImage2D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function wt(){try{a.compressedTexImage3D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function ft(){try{a.texSubImage2D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function Ot(){try{a.texSubImage3D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function Gt(){try{a.compressedTexSubImage2D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function si(){try{a.compressedTexSubImage3D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function $t(){try{a.texStorage2D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function ti(){try{a.texStorage3D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function gi(){try{a.texImage2D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function mi(){try{a.texImage3D.apply(a,arguments)}catch(at){console.error("THREE.WebGLState:",at)}}function Oi(at){je.equals(at)===!1&&(a.scissor(at.x,at.y,at.z,at.w),je.copy(at))}function Bi(at){Ie.equals(at)===!1&&(a.viewport(at.x,at.y,at.z,at.w),Ie.copy(at))}function ln(at,Ti){let Pt=_.get(Ti);Pt===void 0&&(Pt=new WeakMap,_.set(Ti,Pt));let Xt=Pt.get(at);Xt===void 0&&(Xt=a.getUniformBlockIndex(Ti,at.name),Pt.set(at,Xt))}function Ji(at,Ti){const Xt=_.get(Ti).get(at);g.get(Ti)!==Xt&&(a.uniformBlockBinding(Ti,Xt,at.__bindingPointIndex),g.set(Ti,Xt))}function Vi(){a.disable(a.BLEND),a.disable(a.CULL_FACE),a.disable(a.DEPTH_TEST),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SCISSOR_TEST),a.disable(a.STENCIL_TEST),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ONE,a.ZERO),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendColor(0,0,0,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(a.LESS),u.setReversed(!1),a.clearDepth(1),a.stencilMask(4294967295),a.stencilFunc(a.ALWAYS,0,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.clearStencil(0),a.cullFace(a.BACK),a.frontFace(a.CCW),a.polygonOffset(0,0),a.activeTexture(a.TEXTURE0),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),b={},Oe=null,ge={},x={},C=new WeakMap,I=[],F=null,L=!1,U=null,P=null,H=null,N=null,z=null,W=null,j=null,J=new Si(0,0,0),ie=0,ee=!1,re=null,se=null,ue=null,fe=null,pe=null,je.set(0,0,a.canvas.width,a.canvas.height),Ie.set(0,0,a.canvas.width,a.canvas.height),l.reset(),u.reset(),A.reset()}return{buffers:{color:l,depth:u,stencil:A},enable:lt,disable:yt,bindFramebuffer:Nt,drawBuffers:zt,useProgram:ei,setBlending:Be,setMaterial:li,setFlipSided:bt,setCullFace:Wt,setLineWidth:qe,setPolygonOffset:pt,setScissorTest:At,activeTexture:Se,bindTexture:me,unbindTexture:$e,compressedTexImage2D:Ct,compressedTexImage3D:wt,texImage2D:gi,texImage3D:mi,updateUBOMapping:ln,uniformBlockBinding:Ji,texStorage2D:$t,texStorage3D:ti,texSubImage2D:ft,texSubImage3D:Ot,compressedTexSubImage2D:Gt,compressedTexSubImage3D:si,scissor:Oi,viewport:Bi,reset:Vi}}function CSe(a,e,i,r,s,l,u){const A=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new ci,b=new WeakMap;let x;const C=new WeakMap;let I=!1;try{I=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function F(Se,me){return I?new OffscreenCanvas(Se,me):ST("canvas")}function L(Se,me,$e){let Ct=1;const wt=At(Se);if((wt.width>$e||wt.height>$e)&&(Ct=$e/Math.max(wt.width,wt.height)),Ct<1)if(typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Se instanceof ImageBitmap||typeof VideoFrame<"u"&&Se instanceof VideoFrame){const ft=Math.floor(Ct*wt.width),Ot=Math.floor(Ct*wt.height);x===void 0&&(x=F(ft,Ot));const Gt=me?F(ft,Ot):x;return Gt.width=ft,Gt.height=Ot,Gt.getContext("2d").drawImage(Se,0,0,ft,Ot),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+wt.width+"x"+wt.height+") to ("+ft+"x"+Ot+")."),Gt}else return"data"in Se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+wt.width+"x"+wt.height+")."),Se;return Se}function U(Se){return Se.generateMipmaps}function P(Se){a.generateMipmap(Se)}function H(Se){return Se.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:Se.isWebGL3DRenderTarget?a.TEXTURE_3D:Se.isWebGLArrayRenderTarget||Se.isCompressedArrayTexture?a.TEXTURE_2D_ARRAY:a.TEXTURE_2D}function N(Se,me,$e,Ct,wt=!1){if(Se!==null){if(a[Se]!==void 0)return a[Se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Se+"'")}let ft=me;if(me===a.RED&&($e===a.FLOAT&&(ft=a.R32F),$e===a.HALF_FLOAT&&(ft=a.R16F),$e===a.UNSIGNED_BYTE&&(ft=a.R8)),me===a.RED_INTEGER&&($e===a.UNSIGNED_BYTE&&(ft=a.R8UI),$e===a.UNSIGNED_SHORT&&(ft=a.R16UI),$e===a.UNSIGNED_INT&&(ft=a.R32UI),$e===a.BYTE&&(ft=a.R8I),$e===a.SHORT&&(ft=a.R16I),$e===a.INT&&(ft=a.R32I)),me===a.RG&&($e===a.FLOAT&&(ft=a.RG32F),$e===a.HALF_FLOAT&&(ft=a.RG16F),$e===a.UNSIGNED_BYTE&&(ft=a.RG8)),me===a.RG_INTEGER&&($e===a.UNSIGNED_BYTE&&(ft=a.RG8UI),$e===a.UNSIGNED_SHORT&&(ft=a.RG16UI),$e===a.UNSIGNED_INT&&(ft=a.RG32UI),$e===a.BYTE&&(ft=a.RG8I),$e===a.SHORT&&(ft=a.RG16I),$e===a.INT&&(ft=a.RG32I)),me===a.RGB_INTEGER&&($e===a.UNSIGNED_BYTE&&(ft=a.RGB8UI),$e===a.UNSIGNED_SHORT&&(ft=a.RGB16UI),$e===a.UNSIGNED_INT&&(ft=a.RGB32UI),$e===a.BYTE&&(ft=a.RGB8I),$e===a.SHORT&&(ft=a.RGB16I),$e===a.INT&&(ft=a.RGB32I)),me===a.RGBA_INTEGER&&($e===a.UNSIGNED_BYTE&&(ft=a.RGBA8UI),$e===a.UNSIGNED_SHORT&&(ft=a.RGBA16UI),$e===a.UNSIGNED_INT&&(ft=a.RGBA32UI),$e===a.BYTE&&(ft=a.RGBA8I),$e===a.SHORT&&(ft=a.RGBA16I),$e===a.INT&&(ft=a.RGBA32I)),me===a.RGB&&$e===a.UNSIGNED_INT_5_9_9_9_REV&&(ft=a.RGB9_E5),me===a.RGBA){const Ot=wt?xT:lr.getTransfer(Ct);$e===a.FLOAT&&(ft=a.RGBA32F),$e===a.HALF_FLOAT&&(ft=a.RGBA16F),$e===a.UNSIGNED_BYTE&&(ft=Ot===oo?a.SRGB8_ALPHA8:a.RGBA8),$e===a.UNSIGNED_SHORT_4_4_4_4&&(ft=a.RGBA4),$e===a.UNSIGNED_SHORT_5_5_5_1&&(ft=a.RGB5_A1)}return(ft===a.R16F||ft===a.R32F||ft===a.RG16F||ft===a.RG32F||ft===a.RGBA16F||ft===a.RGBA32F)&&e.get("EXT_color_buffer_float"),ft}function z(Se,me){let $e;return Se?me===null||me===jm||me===Iw?$e=a.DEPTH24_STENCIL8:me===ra?$e=a.DEPTH32F_STENCIL8:me===lS&&($e=a.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):me===null||me===jm||me===Iw?$e=a.DEPTH_COMPONENT24:me===ra?$e=a.DEPTH_COMPONENT32F:me===lS&&($e=a.DEPTH_COMPONENT16),$e}function W(Se,me){return U(Se)===!0||Se.isFramebufferTexture&&Se.minFilter!==Da&&Se.minFilter!==Or?Math.log2(Math.max(me.width,me.height))+1:Se.mipmaps!==void 0&&Se.mipmaps.length>0?Se.mipmaps.length:Se.isCompressedTexture&&Array.isArray(Se.image)?me.mipmaps.length:1}function j(Se){const me=Se.target;me.removeEventListener("dispose",j),ie(me),me.isVideoTexture&&b.delete(me)}function J(Se){const me=Se.target;me.removeEventListener("dispose",J),re(me)}function ie(Se){const me=r.get(Se);if(me.__webglInit===void 0)return;const $e=Se.source,Ct=C.get($e);if(Ct){const wt=Ct[me.__cacheKey];wt.usedTimes--,wt.usedTimes===0&&ee(Se),Object.keys(Ct).length===0&&C.delete($e)}r.remove(Se)}function ee(Se){const me=r.get(Se);a.deleteTexture(me.__webglTexture);const $e=Se.source,Ct=C.get($e);delete Ct[me.__cacheKey],u.memory.textures--}function re(Se){const me=r.get(Se);if(Se.depthTexture&&(Se.depthTexture.dispose(),r.remove(Se.depthTexture)),Se.isWebGLCubeRenderTarget)for(let Ct=0;Ct<6;Ct++){if(Array.isArray(me.__webglFramebuffer[Ct]))for(let wt=0;wt<me.__webglFramebuffer[Ct].length;wt++)a.deleteFramebuffer(me.__webglFramebuffer[Ct][wt]);else a.deleteFramebuffer(me.__webglFramebuffer[Ct]);me.__webglDepthbuffer&&a.deleteRenderbuffer(me.__webglDepthbuffer[Ct])}else{if(Array.isArray(me.__webglFramebuffer))for(let Ct=0;Ct<me.__webglFramebuffer.length;Ct++)a.deleteFramebuffer(me.__webglFramebuffer[Ct]);else a.deleteFramebuffer(me.__webglFramebuffer);if(me.__webglDepthbuffer&&a.deleteRenderbuffer(me.__webglDepthbuffer),me.__webglMultisampledFramebuffer&&a.deleteFramebuffer(me.__webglMultisampledFramebuffer),me.__webglColorRenderbuffer)for(let Ct=0;Ct<me.__webglColorRenderbuffer.length;Ct++)me.__webglColorRenderbuffer[Ct]&&a.deleteRenderbuffer(me.__webglColorRenderbuffer[Ct]);me.__webglDepthRenderbuffer&&a.deleteRenderbuffer(me.__webglDepthRenderbuffer)}const $e=Se.textures;for(let Ct=0,wt=$e.length;Ct<wt;Ct++){const ft=r.get($e[Ct]);ft.__webglTexture&&(a.deleteTexture(ft.__webglTexture),u.memory.textures--),r.remove($e[Ct])}r.remove(Se)}let se=0;function ue(){se=0}function fe(){const Se=se;return Se>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Se+" texture units while this GPU supports only "+s.maxTextures),se+=1,Se}function pe(Se){const me=[];return me.push(Se.wrapS),me.push(Se.wrapT),me.push(Se.wrapR||0),me.push(Se.magFilter),me.push(Se.minFilter),me.push(Se.anisotropy),me.push(Se.internalFormat),me.push(Se.format),me.push(Se.type),me.push(Se.generateMipmaps),me.push(Se.premultiplyAlpha),me.push(Se.flipY),me.push(Se.unpackAlignment),me.push(Se.colorSpace),me.join()}function xe(Se,me){const $e=r.get(Se);if(Se.isVideoTexture&&qe(Se),Se.isRenderTargetTexture===!1&&Se.version>0&&$e.__version!==Se.version){const Ct=Se.image;if(Ct===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ct.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ie($e,Se,me);return}}i.bindTexture(a.TEXTURE_2D,$e.__webglTexture,a.TEXTURE0+me)}function ce(Se,me){const $e=r.get(Se);if(Se.version>0&&$e.__version!==Se.version){Ie($e,Se,me);return}i.bindTexture(a.TEXTURE_2D_ARRAY,$e.__webglTexture,a.TEXTURE0+me)}function _e(Se,me){const $e=r.get(Se);if(Se.version>0&&$e.__version!==Se.version){Ie($e,Se,me);return}i.bindTexture(a.TEXTURE_3D,$e.__webglTexture,a.TEXTURE0+me)}function ye(Se,me){const $e=r.get(Se);if(Se.version>0&&$e.__version!==Se.version){ze($e,Se,me);return}i.bindTexture(a.TEXTURE_CUBE_MAP,$e.__webglTexture,a.TEXTURE0+me)}const Oe={[Vd]:a.REPEAT,[$o]:a.CLAMP_TO_EDGE,[Vv]:a.MIRRORED_REPEAT},ge={[Da]:a.NEAREST,[zw]:a.NEAREST_MIPMAP_NEAREST,[qm]:a.NEAREST_MIPMAP_LINEAR,[Or]:a.LINEAR,[Lv]:a.LINEAR_MIPMAP_NEAREST,[Ju]:a.LINEAR_MIPMAP_LINEAR},Ee={[fre]:a.NEVER,[bre]:a.ALWAYS,[gre]:a.LESS,[Vz]:a.LEQUAL,[mre]:a.EQUAL,[yre]:a.GEQUAL,[_re]:a.GREATER,[vre]:a.NOTEQUAL};function ke(Se,me){if(me.type===ra&&e.has("OES_texture_float_linear")===!1&&(me.magFilter===Or||me.magFilter===Lv||me.magFilter===qm||me.magFilter===Ju||me.minFilter===Or||me.minFilter===Lv||me.minFilter===qm||me.minFilter===Ju)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),a.texParameteri(Se,a.TEXTURE_WRAP_S,Oe[me.wrapS]),a.texParameteri(Se,a.TEXTURE_WRAP_T,Oe[me.wrapT]),(Se===a.TEXTURE_3D||Se===a.TEXTURE_2D_ARRAY)&&a.texParameteri(Se,a.TEXTURE_WRAP_R,Oe[me.wrapR]),a.texParameteri(Se,a.TEXTURE_MAG_FILTER,ge[me.magFilter]),a.texParameteri(Se,a.TEXTURE_MIN_FILTER,ge[me.minFilter]),me.compareFunction&&(a.texParameteri(Se,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(Se,a.TEXTURE_COMPARE_FUNC,Ee[me.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(me.magFilter===Da||me.minFilter!==qm&&me.minFilter!==Ju||me.type===ra&&e.has("OES_texture_float_linear")===!1)return;if(me.anisotropy>1||r.get(me).__currentAnisotropy){const $e=e.get("EXT_texture_filter_anisotropic");a.texParameterf(Se,$e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(me.anisotropy,s.getMaxAnisotropy())),r.get(me).__currentAnisotropy=me.anisotropy}}}function je(Se,me){let $e=!1;Se.__webglInit===void 0&&(Se.__webglInit=!0,me.addEventListener("dispose",j));const Ct=me.source;let wt=C.get(Ct);wt===void 0&&(wt={},C.set(Ct,wt));const ft=pe(me);if(ft!==Se.__cacheKey){wt[ft]===void 0&&(wt[ft]={texture:a.createTexture(),usedTimes:0},u.memory.textures++,$e=!0),wt[ft].usedTimes++;const Ot=wt[Se.__cacheKey];Ot!==void 0&&(wt[Se.__cacheKey].usedTimes--,Ot.usedTimes===0&&ee(me)),Se.__cacheKey=ft,Se.__webglTexture=wt[ft].texture}return $e}function Ie(Se,me,$e){let Ct=a.TEXTURE_2D;(me.isDataArrayTexture||me.isCompressedArrayTexture)&&(Ct=a.TEXTURE_2D_ARRAY),me.isData3DTexture&&(Ct=a.TEXTURE_3D);const wt=je(Se,me),ft=me.source;i.bindTexture(Ct,Se.__webglTexture,a.TEXTURE0+$e);const Ot=r.get(ft);if(ft.version!==Ot.__version||wt===!0){i.activeTexture(a.TEXTURE0+$e);const Gt=lr.getPrimaries(lr.workingColorSpace),si=me.colorSpace===dp?null:lr.getPrimaries(me.colorSpace),$t=me.colorSpace===dp||Gt===si?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,me.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,me.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,$t);let ti=L(me.image,!1,s.maxTextureSize);ti=pt(me,ti);const gi=l.convert(me.format,me.colorSpace),mi=l.convert(me.type);let Oi=N(me.internalFormat,gi,mi,me.colorSpace,me.isVideoTexture);ke(Ct,me);let Bi;const ln=me.mipmaps,Ji=me.isVideoTexture!==!0,Vi=Ot.__version===void 0||wt===!0,at=ft.dataReady,Ti=W(me,ti);if(me.isDepthTexture)Oi=z(me.format===Tw,me.type),Vi&&(Ji?i.texStorage2D(a.TEXTURE_2D,1,Oi,ti.width,ti.height):i.texImage2D(a.TEXTURE_2D,0,Oi,ti.width,ti.height,0,gi,mi,null));else if(me.isDataTexture)if(ln.length>0){Ji&&Vi&&i.texStorage2D(a.TEXTURE_2D,Ti,Oi,ln[0].width,ln[0].height);for(let Pt=0,Xt=ln.length;Pt<Xt;Pt++)Bi=ln[Pt],Ji?at&&i.texSubImage2D(a.TEXTURE_2D,Pt,0,0,Bi.width,Bi.height,gi,mi,Bi.data):i.texImage2D(a.TEXTURE_2D,Pt,Oi,Bi.width,Bi.height,0,gi,mi,Bi.data);me.generateMipmaps=!1}else Ji?(Vi&&i.texStorage2D(a.TEXTURE_2D,Ti,Oi,ti.width,ti.height),at&&i.texSubImage2D(a.TEXTURE_2D,0,0,0,ti.width,ti.height,gi,mi,ti.data)):i.texImage2D(a.TEXTURE_2D,0,Oi,ti.width,ti.height,0,gi,mi,ti.data);else if(me.isCompressedTexture)if(me.isCompressedArrayTexture){Ji&&Vi&&i.texStorage3D(a.TEXTURE_2D_ARRAY,Ti,Oi,ln[0].width,ln[0].height,ti.depth);for(let Pt=0,Xt=ln.length;Pt<Xt;Pt++)if(Bi=ln[Pt],me.format!==lo)if(gi!==null)if(Ji){if(at)if(me.layerUpdates.size>0){const Mi=pH(Bi.width,Bi.height,me.format,me.type);for(const Ii of me.layerUpdates){const Fi=Bi.data.subarray(Ii*Mi/Bi.data.BYTES_PER_ELEMENT,(Ii+1)*Mi/Bi.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,Pt,0,0,Ii,Bi.width,Bi.height,1,gi,Fi)}me.clearLayerUpdates()}else i.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,Pt,0,0,0,Bi.width,Bi.height,ti.depth,gi,Bi.data)}else i.compressedTexImage3D(a.TEXTURE_2D_ARRAY,Pt,Oi,Bi.width,Bi.height,ti.depth,0,Bi.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ji?at&&i.texSubImage3D(a.TEXTURE_2D_ARRAY,Pt,0,0,0,Bi.width,Bi.height,ti.depth,gi,mi,Bi.data):i.texImage3D(a.TEXTURE_2D_ARRAY,Pt,Oi,Bi.width,Bi.height,ti.depth,0,gi,mi,Bi.data)}else{Ji&&Vi&&i.texStorage2D(a.TEXTURE_2D,Ti,Oi,ln[0].width,ln[0].height);for(let Pt=0,Xt=ln.length;Pt<Xt;Pt++)Bi=ln[Pt],me.format!==lo?gi!==null?Ji?at&&i.compressedTexSubImage2D(a.TEXTURE_2D,Pt,0,0,Bi.width,Bi.height,gi,Bi.data):i.compressedTexImage2D(a.TEXTURE_2D,Pt,Oi,Bi.width,Bi.height,0,Bi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ji?at&&i.texSubImage2D(a.TEXTURE_2D,Pt,0,0,Bi.width,Bi.height,gi,mi,Bi.data):i.texImage2D(a.TEXTURE_2D,Pt,Oi,Bi.width,Bi.height,0,gi,mi,Bi.data)}else if(me.isDataArrayTexture)if(Ji){if(Vi&&i.texStorage3D(a.TEXTURE_2D_ARRAY,Ti,Oi,ti.width,ti.height,ti.depth),at)if(me.layerUpdates.size>0){const Pt=pH(ti.width,ti.height,me.format,me.type);for(const Xt of me.layerUpdates){const Mi=ti.data.subarray(Xt*Pt/ti.data.BYTES_PER_ELEMENT,(Xt+1)*Pt/ti.data.BYTES_PER_ELEMENT);i.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,Xt,ti.width,ti.height,1,gi,mi,Mi)}me.clearLayerUpdates()}else i.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,ti.width,ti.height,ti.depth,gi,mi,ti.data)}else i.texImage3D(a.TEXTURE_2D_ARRAY,0,Oi,ti.width,ti.height,ti.depth,0,gi,mi,ti.data);else if(me.isData3DTexture)Ji?(Vi&&i.texStorage3D(a.TEXTURE_3D,Ti,Oi,ti.width,ti.height,ti.depth),at&&i.texSubImage3D(a.TEXTURE_3D,0,0,0,0,ti.width,ti.height,ti.depth,gi,mi,ti.data)):i.texImage3D(a.TEXTURE_3D,0,Oi,ti.width,ti.height,ti.depth,0,gi,mi,ti.data);else if(me.isFramebufferTexture){if(Vi)if(Ji)i.texStorage2D(a.TEXTURE_2D,Ti,Oi,ti.width,ti.height);else{let Pt=ti.width,Xt=ti.height;for(let Mi=0;Mi<Ti;Mi++)i.texImage2D(a.TEXTURE_2D,Mi,Oi,Pt,Xt,0,gi,mi,null),Pt>>=1,Xt>>=1}}else if(ln.length>0){if(Ji&&Vi){const Pt=At(ln[0]);i.texStorage2D(a.TEXTURE_2D,Ti,Oi,Pt.width,Pt.height)}for(let Pt=0,Xt=ln.length;Pt<Xt;Pt++)Bi=ln[Pt],Ji?at&&i.texSubImage2D(a.TEXTURE_2D,Pt,0,0,gi,mi,Bi):i.texImage2D(a.TEXTURE_2D,Pt,Oi,gi,mi,Bi);me.generateMipmaps=!1}else if(Ji){if(Vi){const Pt=At(ti);i.texStorage2D(a.TEXTURE_2D,Ti,Oi,Pt.width,Pt.height)}at&&i.texSubImage2D(a.TEXTURE_2D,0,0,0,gi,mi,ti)}else i.texImage2D(a.TEXTURE_2D,0,Oi,gi,mi,ti);U(me)&&P(Ct),Ot.__version=ft.version,me.onUpdate&&me.onUpdate(me)}Se.__version=me.version}function ze(Se,me,$e){if(me.image.length!==6)return;const Ct=je(Se,me),wt=me.source;i.bindTexture(a.TEXTURE_CUBE_MAP,Se.__webglTexture,a.TEXTURE0+$e);const ft=r.get(wt);if(wt.version!==ft.__version||Ct===!0){i.activeTexture(a.TEXTURE0+$e);const Ot=lr.getPrimaries(lr.workingColorSpace),Gt=me.colorSpace===dp?null:lr.getPrimaries(me.colorSpace),si=me.colorSpace===dp||Ot===Gt?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,me.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,me.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,si);const $t=me.isCompressedTexture||me.image[0].isCompressedTexture,ti=me.image[0]&&me.image[0].isDataTexture,gi=[];for(let Xt=0;Xt<6;Xt++)!$t&&!ti?gi[Xt]=L(me.image[Xt],!0,s.maxCubemapSize):gi[Xt]=ti?me.image[Xt].image:me.image[Xt],gi[Xt]=pt(me,gi[Xt]);const mi=gi[0],Oi=l.convert(me.format,me.colorSpace),Bi=l.convert(me.type),ln=N(me.internalFormat,Oi,Bi,me.colorSpace),Ji=me.isVideoTexture!==!0,Vi=ft.__version===void 0||Ct===!0,at=wt.dataReady;let Ti=W(me,mi);ke(a.TEXTURE_CUBE_MAP,me);let Pt;if($t){Ji&&Vi&&i.texStorage2D(a.TEXTURE_CUBE_MAP,Ti,ln,mi.width,mi.height);for(let Xt=0;Xt<6;Xt++){Pt=gi[Xt].mipmaps;for(let Mi=0;Mi<Pt.length;Mi++){const Ii=Pt[Mi];me.format!==lo?Oi!==null?Ji?at&&i.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi,0,0,Ii.width,Ii.height,Oi,Ii.data):i.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi,ln,Ii.width,Ii.height,0,Ii.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ji?at&&i.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi,0,0,Ii.width,Ii.height,Oi,Bi,Ii.data):i.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi,ln,Ii.width,Ii.height,0,Oi,Bi,Ii.data)}}}else{if(Pt=me.mipmaps,Ji&&Vi){Pt.length>0&&Ti++;const Xt=At(gi[0]);i.texStorage2D(a.TEXTURE_CUBE_MAP,Ti,ln,Xt.width,Xt.height)}for(let Xt=0;Xt<6;Xt++)if(ti){Ji?at&&i.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,gi[Xt].width,gi[Xt].height,Oi,Bi,gi[Xt].data):i.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,ln,gi[Xt].width,gi[Xt].height,0,Oi,Bi,gi[Xt].data);for(let Mi=0;Mi<Pt.length;Mi++){const Fi=Pt[Mi].image[Xt].image;Ji?at&&i.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi+1,0,0,Fi.width,Fi.height,Oi,Bi,Fi.data):i.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi+1,ln,Fi.width,Fi.height,0,Oi,Bi,Fi.data)}}else{Ji?at&&i.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,Oi,Bi,gi[Xt]):i.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,ln,Oi,Bi,gi[Xt]);for(let Mi=0;Mi<Pt.length;Mi++){const Ii=Pt[Mi];Ji?at&&i.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi+1,0,0,Oi,Bi,Ii.image[Xt]):i.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Mi+1,ln,Oi,Bi,Ii.image[Xt])}}}U(me)&&P(a.TEXTURE_CUBE_MAP),ft.__version=wt.version,me.onUpdate&&me.onUpdate(me)}Se.__version=me.version}function ht(Se,me,$e,Ct,wt,ft){const Ot=l.convert($e.format,$e.colorSpace),Gt=l.convert($e.type),si=N($e.internalFormat,Ot,Gt,$e.colorSpace),$t=r.get(me),ti=r.get($e);if(ti.__renderTarget=me,!$t.__hasExternalTextures){const gi=Math.max(1,me.width>>ft),mi=Math.max(1,me.height>>ft);wt===a.TEXTURE_3D||wt===a.TEXTURE_2D_ARRAY?i.texImage3D(wt,ft,si,gi,mi,me.depth,0,Ot,Gt,null):i.texImage2D(wt,ft,si,gi,mi,0,Ot,Gt,null)}i.bindFramebuffer(a.FRAMEBUFFER,Se),Wt(me)?A.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,Ct,wt,ti.__webglTexture,0,bt(me)):(wt===a.TEXTURE_2D||wt>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&wt<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,Ct,wt,ti.__webglTexture,ft),i.bindFramebuffer(a.FRAMEBUFFER,null)}function lt(Se,me,$e){if(a.bindRenderbuffer(a.RENDERBUFFER,Se),me.depthBuffer){const Ct=me.depthTexture,wt=Ct&&Ct.isDepthTexture?Ct.type:null,ft=z(me.stencilBuffer,wt),Ot=me.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Gt=bt(me);Wt(me)?A.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Gt,ft,me.width,me.height):$e?a.renderbufferStorageMultisample(a.RENDERBUFFER,Gt,ft,me.width,me.height):a.renderbufferStorage(a.RENDERBUFFER,ft,me.width,me.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,Ot,a.RENDERBUFFER,Se)}else{const Ct=me.textures;for(let wt=0;wt<Ct.length;wt++){const ft=Ct[wt],Ot=l.convert(ft.format,ft.colorSpace),Gt=l.convert(ft.type),si=N(ft.internalFormat,Ot,Gt,ft.colorSpace),$t=bt(me);$e&&Wt(me)===!1?a.renderbufferStorageMultisample(a.RENDERBUFFER,$t,si,me.width,me.height):Wt(me)?A.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,$t,si,me.width,me.height):a.renderbufferStorage(a.RENDERBUFFER,si,me.width,me.height)}}a.bindRenderbuffer(a.RENDERBUFFER,null)}function yt(Se,me){if(me&&me.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(a.FRAMEBUFFER,Se),!(me.depthTexture&&me.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ct=r.get(me.depthTexture);Ct.__renderTarget=me,(!Ct.__webglTexture||me.depthTexture.image.width!==me.width||me.depthTexture.image.height!==me.height)&&(me.depthTexture.image.width=me.width,me.depthTexture.image.height=me.height,me.depthTexture.needsUpdate=!0),xe(me.depthTexture,0);const wt=Ct.__webglTexture,ft=bt(me);if(me.depthTexture.format===fw)Wt(me)?A.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,wt,0,ft):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,wt,0);else if(me.depthTexture.format===Tw)Wt(me)?A.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,wt,0,ft):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,wt,0);else throw new Error("Unknown depthTexture format")}function Nt(Se){const me=r.get(Se),$e=Se.isWebGLCubeRenderTarget===!0;if(me.__boundDepthTexture!==Se.depthTexture){const Ct=Se.depthTexture;if(me.__depthDisposeCallback&&me.__depthDisposeCallback(),Ct){const wt=()=>{delete me.__boundDepthTexture,delete me.__depthDisposeCallback,Ct.removeEventListener("dispose",wt)};Ct.addEventListener("dispose",wt),me.__depthDisposeCallback=wt}me.__boundDepthTexture=Ct}if(Se.depthTexture&&!me.__autoAllocateDepthBuffer){if($e)throw new Error("target.depthTexture not supported in Cube render targets");yt(me.__webglFramebuffer,Se)}else if($e){me.__webglDepthbuffer=[];for(let Ct=0;Ct<6;Ct++)if(i.bindFramebuffer(a.FRAMEBUFFER,me.__webglFramebuffer[Ct]),me.__webglDepthbuffer[Ct]===void 0)me.__webglDepthbuffer[Ct]=a.createRenderbuffer(),lt(me.__webglDepthbuffer[Ct],Se,!1);else{const wt=Se.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,ft=me.__webglDepthbuffer[Ct];a.bindRenderbuffer(a.RENDERBUFFER,ft),a.framebufferRenderbuffer(a.FRAMEBUFFER,wt,a.RENDERBUFFER,ft)}}else if(i.bindFramebuffer(a.FRAMEBUFFER,me.__webglFramebuffer),me.__webglDepthbuffer===void 0)me.__webglDepthbuffer=a.createRenderbuffer(),lt(me.__webglDepthbuffer,Se,!1);else{const Ct=Se.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,wt=me.__webglDepthbuffer;a.bindRenderbuffer(a.RENDERBUFFER,wt),a.framebufferRenderbuffer(a.FRAMEBUFFER,Ct,a.RENDERBUFFER,wt)}i.bindFramebuffer(a.FRAMEBUFFER,null)}function zt(Se,me,$e){const Ct=r.get(Se);me!==void 0&&ht(Ct.__webglFramebuffer,Se,Se.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0),$e!==void 0&&Nt(Se)}function ei(Se){const me=Se.texture,$e=r.get(Se),Ct=r.get(me);Se.addEventListener("dispose",J);const wt=Se.textures,ft=Se.isWebGLCubeRenderTarget===!0,Ot=wt.length>1;if(Ot||(Ct.__webglTexture===void 0&&(Ct.__webglTexture=a.createTexture()),Ct.__version=me.version,u.memory.textures++),ft){$e.__webglFramebuffer=[];for(let Gt=0;Gt<6;Gt++)if(me.mipmaps&&me.mipmaps.length>0){$e.__webglFramebuffer[Gt]=[];for(let si=0;si<me.mipmaps.length;si++)$e.__webglFramebuffer[Gt][si]=a.createFramebuffer()}else $e.__webglFramebuffer[Gt]=a.createFramebuffer()}else{if(me.mipmaps&&me.mipmaps.length>0){$e.__webglFramebuffer=[];for(let Gt=0;Gt<me.mipmaps.length;Gt++)$e.__webglFramebuffer[Gt]=a.createFramebuffer()}else $e.__webglFramebuffer=a.createFramebuffer();if(Ot)for(let Gt=0,si=wt.length;Gt<si;Gt++){const $t=r.get(wt[Gt]);$t.__webglTexture===void 0&&($t.__webglTexture=a.createTexture(),u.memory.textures++)}if(Se.samples>0&&Wt(Se)===!1){$e.__webglMultisampledFramebuffer=a.createFramebuffer(),$e.__webglColorRenderbuffer=[],i.bindFramebuffer(a.FRAMEBUFFER,$e.__webglMultisampledFramebuffer);for(let Gt=0;Gt<wt.length;Gt++){const si=wt[Gt];$e.__webglColorRenderbuffer[Gt]=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,$e.__webglColorRenderbuffer[Gt]);const $t=l.convert(si.format,si.colorSpace),ti=l.convert(si.type),gi=N(si.internalFormat,$t,ti,si.colorSpace,Se.isXRRenderTarget===!0),mi=bt(Se);a.renderbufferStorageMultisample(a.RENDERBUFFER,mi,gi,Se.width,Se.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Gt,a.RENDERBUFFER,$e.__webglColorRenderbuffer[Gt])}a.bindRenderbuffer(a.RENDERBUFFER,null),Se.depthBuffer&&($e.__webglDepthRenderbuffer=a.createRenderbuffer(),lt($e.__webglDepthRenderbuffer,Se,!0)),i.bindFramebuffer(a.FRAMEBUFFER,null)}}if(ft){i.bindTexture(a.TEXTURE_CUBE_MAP,Ct.__webglTexture),ke(a.TEXTURE_CUBE_MAP,me);for(let Gt=0;Gt<6;Gt++)if(me.mipmaps&&me.mipmaps.length>0)for(let si=0;si<me.mipmaps.length;si++)ht($e.__webglFramebuffer[Gt][si],Se,me,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,si);else ht($e.__webglFramebuffer[Gt],Se,me,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,0);U(me)&&P(a.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(Ot){for(let Gt=0,si=wt.length;Gt<si;Gt++){const $t=wt[Gt],ti=r.get($t);i.bindTexture(a.TEXTURE_2D,ti.__webglTexture),ke(a.TEXTURE_2D,$t),ht($e.__webglFramebuffer,Se,$t,a.COLOR_ATTACHMENT0+Gt,a.TEXTURE_2D,0),U($t)&&P(a.TEXTURE_2D)}i.unbindTexture()}else{let Gt=a.TEXTURE_2D;if((Se.isWebGL3DRenderTarget||Se.isWebGLArrayRenderTarget)&&(Gt=Se.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),i.bindTexture(Gt,Ct.__webglTexture),ke(Gt,me),me.mipmaps&&me.mipmaps.length>0)for(let si=0;si<me.mipmaps.length;si++)ht($e.__webglFramebuffer[si],Se,me,a.COLOR_ATTACHMENT0,Gt,si);else ht($e.__webglFramebuffer,Se,me,a.COLOR_ATTACHMENT0,Gt,0);U(me)&&P(Gt),i.unbindTexture()}Se.depthBuffer&&Nt(Se)}function it(Se){const me=Se.textures;for(let $e=0,Ct=me.length;$e<Ct;$e++){const wt=me[$e];if(U(wt)){const ft=H(Se),Ot=r.get(wt).__webglTexture;i.bindTexture(ft,Ot),P(ft),i.unbindTexture()}}}const Dt=[],Be=[];function li(Se){if(Se.samples>0){if(Wt(Se)===!1){const me=Se.textures,$e=Se.width,Ct=Se.height;let wt=a.COLOR_BUFFER_BIT;const ft=Se.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Ot=r.get(Se),Gt=me.length>1;if(Gt)for(let si=0;si<me.length;si++)i.bindFramebuffer(a.FRAMEBUFFER,Ot.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+si,a.RENDERBUFFER,null),i.bindFramebuffer(a.FRAMEBUFFER,Ot.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+si,a.TEXTURE_2D,null,0);i.bindFramebuffer(a.READ_FRAMEBUFFER,Ot.__webglMultisampledFramebuffer),i.bindFramebuffer(a.DRAW_FRAMEBUFFER,Ot.__webglFramebuffer);for(let si=0;si<me.length;si++){if(Se.resolveDepthBuffer&&(Se.depthBuffer&&(wt|=a.DEPTH_BUFFER_BIT),Se.stencilBuffer&&Se.resolveStencilBuffer&&(wt|=a.STENCIL_BUFFER_BIT)),Gt){a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,Ot.__webglColorRenderbuffer[si]);const $t=r.get(me[si]).__webglTexture;a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,$t,0)}a.blitFramebuffer(0,0,$e,Ct,0,0,$e,Ct,wt,a.NEAREST),g===!0&&(Dt.length=0,Be.length=0,Dt.push(a.COLOR_ATTACHMENT0+si),Se.depthBuffer&&Se.resolveDepthBuffer===!1&&(Dt.push(ft),Be.push(ft),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,Be)),a.invalidateFramebuffer(a.READ_FRAMEBUFFER,Dt))}if(i.bindFramebuffer(a.READ_FRAMEBUFFER,null),i.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),Gt)for(let si=0;si<me.length;si++){i.bindFramebuffer(a.FRAMEBUFFER,Ot.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+si,a.RENDERBUFFER,Ot.__webglColorRenderbuffer[si]);const $t=r.get(me[si]).__webglTexture;i.bindFramebuffer(a.FRAMEBUFFER,Ot.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+si,a.TEXTURE_2D,$t,0)}i.bindFramebuffer(a.DRAW_FRAMEBUFFER,Ot.__webglMultisampledFramebuffer)}else if(Se.depthBuffer&&Se.resolveDepthBuffer===!1&&g){const me=Se.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[me])}}}function bt(Se){return Math.min(s.maxSamples,Se.samples)}function Wt(Se){const me=r.get(Se);return Se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&me.__useRenderToTexture!==!1}function qe(Se){const me=u.render.frame;b.get(Se)!==me&&(b.set(Se,me),Se.update())}function pt(Se,me){const $e=Se.colorSpace,Ct=Se.format,wt=Se.type;return Se.isCompressedTexture===!0||Se.isVideoTexture===!0||$e!==Co&&$e!==dp&&(lr.getTransfer($e)===oo?(Ct!==lo||wt!==$a)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",$e)),me}function At(Se){return typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement?(_.width=Se.naturalWidth||Se.width,_.height=Se.naturalHeight||Se.height):typeof VideoFrame<"u"&&Se instanceof VideoFrame?(_.width=Se.displayWidth,_.height=Se.displayHeight):(_.width=Se.width,_.height=Se.height),_}this.allocateTextureUnit=fe,this.resetTextureUnits=ue,this.setTexture2D=xe,this.setTexture2DArray=ce,this.setTexture3D=_e,this.setTextureCube=ye,this.rebindTextures=zt,this.setupRenderTarget=ei,this.updateRenderTargetMipmap=it,this.updateMultisampleRenderTarget=li,this.setupDepthRenderbuffer=Nt,this.setupFrameBufferTexture=ht,this.useMultisampledRTT=Wt}function vse(a,e){function i(r,s=dp){let l;const u=lr.getTransfer(s);if(r===$a)return a.UNSIGNED_BYTE;if(r===zk)return a.UNSIGNED_SHORT_4_4_4_4;if(r===Gk)return a.UNSIGNED_SHORT_5_5_5_1;if(r===kz)return a.UNSIGNED_INT_5_9_9_9_REV;if(r===Nk)return a.BYTE;if(r===Hk)return a.SHORT;if(r===lS)return a.UNSIGNED_SHORT;if(r===XT)return a.INT;if(r===jm)return a.UNSIGNED_INT;if(r===ra)return a.FLOAT;if(r===Ol)return a.HALF_FLOAT;if(r===Lz)return a.ALPHA;if(r===Pz)return a.RGB;if(r===lo)return a.RGBA;if(r===Oz)return a.LUMINANCE;if(r===Qz)return a.LUMINANCE_ALPHA;if(r===fw)return a.DEPTH_COMPONENT;if(r===Tw)return a.DEPTH_STENCIL;if(r===Fv)return a.RED;if(r===YT)return a.RED_INTEGER;if(r===Oy)return a.RG;if(r===Vk)return a.RG_INTEGER;if(r===qk)return a.RGBA_INTEGER;if(r===jI||r===JE||r===KI||r===ZE)if(u===oo)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(r===jI)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===JE)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===KI)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===ZE)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(r===jI)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===JE)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===KI)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===ZE)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===fT||r===LU||r===gT||r===PU)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(r===fT)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===LU)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===gT)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===PU)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===mT||r===_T||r===vT)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(r===mT||r===_T)return u===oo?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(r===vT)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===cS||r===OU||r===QU||r===NU||r===uS||r===HU||r===zU||r===GU||r===VU||r===qU||r===$U||r===WU||r===jU||r===KU)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(r===cS)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===OU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===QU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===NU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===uS)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===HU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===zU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===GU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===VU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===qU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===$U)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===WU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===jU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===KU)return u===oo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===eS||r===XU||r===yT)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(r===eS)return u===oo?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===XU)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===yT)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===Nz||r===YU||r===JU||r===ZU)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(r===eS)return l.COMPRESSED_RED_RGTC1_EXT;if(r===YU)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===JU)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===ZU)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Iw?a.UNSIGNED_INT_24_8:a[r]!==void 0?a[r]:null}return{convert:i}}const ESe={type:"move"};class D6{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ap,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ap,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ap,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const i=this._hand;if(i)for(const r of e.hand.values())this._getHandJoint(i,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,i,r){let s=null,l=null,u=null;const A=this._targetRay,g=this._grip,_=this._hand;if(e&&i.session.visibilityState!=="visible-blurred"){if(_&&e.hand){u=!0;for(const L of e.hand.values()){const U=i.getJointPose(L,r),P=this._getHandJoint(_,L);U!==null&&(P.matrix.fromArray(U.transform.matrix),P.matrix.decompose(P.position,P.rotation,P.scale),P.matrixWorldNeedsUpdate=!0,P.jointRadius=U.radius),P.visible=U!==null}const b=_.joints["index-finger-tip"],x=_.joints["thumb-tip"],C=b.position.distanceTo(x.position),I=.02,F=.005;_.inputState.pinching&&C>I+F?(_.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!_.inputState.pinching&&C<=I-F&&(_.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else g!==null&&e.gripSpace&&(l=i.getPose(e.gripSpace,r),l!==null&&(g.matrix.fromArray(l.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,l.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(l.linearVelocity)):g.hasLinearVelocity=!1,l.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(l.angularVelocity)):g.hasAngularVelocity=!1));A!==null&&(s=i.getPose(e.targetRaySpace,r),s===null&&l!==null&&(s=l),s!==null&&(A.matrix.fromArray(s.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,s.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(s.linearVelocity)):A.hasLinearVelocity=!1,s.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(s.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(ESe)))}return A!==null&&(A.visible=s!==null),g!==null&&(g.visible=l!==null),_!==null&&(_.visible=u!==null),this}_getHandJoint(e,i){if(e.joints[i.jointName]===void 0){const r=new Ap;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[i.jointName]=r,e.add(r)}return e.joints[i.jointName]}}const SSe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,BSe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ISe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,i,r){if(this.texture===null){const s=new Js,l=e.properties.get(s);l.__webglTexture=i.texture,(i.depthNear!==r.depthNear||i.depthFar!==r.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const i=e.cameras[0].viewport,r=new qh({vertexShader:SSe,fragmentShader:BSe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Dr(new UA(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class TSe extends FA{constructor(e,i){super();const r=this;let s=null,l=1,u=null,A="local-floor",g=1,_=null,b=null,x=null,C=null,I=null,F=null;const L=new ISe,U=i.getContextAttributes();let P=null,H=null;const N=[],z=[],W=new ci;let j=null;const J=new xo;J.viewport=new Vr;const ie=new xo;ie.viewport=new Vr;const ee=[J,ie],re=new lse;let se=null,ue=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ie){let ze=N[Ie];return ze===void 0&&(ze=new D6,N[Ie]=ze),ze.getTargetRaySpace()},this.getControllerGrip=function(Ie){let ze=N[Ie];return ze===void 0&&(ze=new D6,N[Ie]=ze),ze.getGripSpace()},this.getHand=function(Ie){let ze=N[Ie];return ze===void 0&&(ze=new D6,N[Ie]=ze),ze.getHandSpace()};function fe(Ie){const ze=z.indexOf(Ie.inputSource);if(ze===-1)return;const ht=N[ze];ht!==void 0&&(ht.update(Ie.inputSource,Ie.frame,_||u),ht.dispatchEvent({type:Ie.type,data:Ie.inputSource}))}function pe(){s.removeEventListener("select",fe),s.removeEventListener("selectstart",fe),s.removeEventListener("selectend",fe),s.removeEventListener("squeeze",fe),s.removeEventListener("squeezestart",fe),s.removeEventListener("squeezeend",fe),s.removeEventListener("end",pe),s.removeEventListener("inputsourceschange",xe);for(let Ie=0;Ie<N.length;Ie++){const ze=z[Ie];ze!==null&&(z[Ie]=null,N[Ie].disconnect(ze))}se=null,ue=null,L.reset(),e.setRenderTarget(P),I=null,C=null,x=null,s=null,H=null,je.stop(),r.isPresenting=!1,e.setPixelRatio(j),e.setSize(W.width,W.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ie){l=Ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ie){A=Ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return _||u},this.setReferenceSpace=function(Ie){_=Ie},this.getBaseLayer=function(){return C!==null?C:I},this.getBinding=function(){return x},this.getFrame=function(){return F},this.getSession=function(){return s},this.setSession=async function(Ie){if(s=Ie,s!==null){if(P=e.getRenderTarget(),s.addEventListener("select",fe),s.addEventListener("selectstart",fe),s.addEventListener("selectend",fe),s.addEventListener("squeeze",fe),s.addEventListener("squeezestart",fe),s.addEventListener("squeezeend",fe),s.addEventListener("end",pe),s.addEventListener("inputsourceschange",xe),U.xrCompatible!==!0&&await i.makeXRCompatible(),j=e.getPixelRatio(),e.getSize(W),s.enabledFeatures!==void 0&&s.enabledFeatures.includes("layers")){let ht=null,lt=null,yt=null;U.depth&&(yt=U.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,ht=U.stencil?Tw:fw,lt=U.stencil?Iw:jm);const Nt={colorFormat:i.RGBA8,depthFormat:yt,scaleFactor:l};x=new XRWebGLBinding(s,i),C=x.createProjectionLayer(Nt),s.updateRenderState({layers:[C]}),e.setPixelRatio(1),e.setSize(C.textureWidth,C.textureHeight,!1),H=new qd(C.textureWidth,C.textureHeight,{format:lo,type:$a,depthTexture:new Yz(C.textureWidth,C.textureHeight,lt,void 0,void 0,void 0,void 0,void 0,void 0,ht),stencilBuffer:U.stencil,colorSpace:e.outputColorSpace,samples:U.antialias?4:0,resolveDepthBuffer:C.ignoreDepthValues===!1})}else{const ht={antialias:U.antialias,alpha:!0,depth:U.depth,stencil:U.stencil,framebufferScaleFactor:l};I=new XRWebGLLayer(s,i,ht),s.updateRenderState({baseLayer:I}),e.setPixelRatio(1),e.setSize(I.framebufferWidth,I.framebufferHeight,!1),H=new qd(I.framebufferWidth,I.framebufferHeight,{format:lo,type:$a,colorSpace:e.outputColorSpace,stencilBuffer:U.stencil})}H.isXRRenderTarget=!0,this.setFoveation(g),_=null,u=await s.requestReferenceSpace(A),je.setContext(s),je.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return L.getDepthTexture()};function xe(Ie){for(let ze=0;ze<Ie.removed.length;ze++){const ht=Ie.removed[ze],lt=z.indexOf(ht);lt>=0&&(z[lt]=null,N[lt].disconnect(ht))}for(let ze=0;ze<Ie.added.length;ze++){const ht=Ie.added[ze];let lt=z.indexOf(ht);if(lt===-1){for(let Nt=0;Nt<N.length;Nt++)if(Nt>=z.length){z.push(ht),lt=Nt;break}else if(z[Nt]===null){z[Nt]=ht,lt=Nt;break}if(lt===-1)break}const yt=N[lt];yt&&yt.connect(ht)}}const ce=new Fe,_e=new Fe;function ye(Ie,ze,ht){ce.setFromMatrixPosition(ze.matrixWorld),_e.setFromMatrixPosition(ht.matrixWorld);const lt=ce.distanceTo(_e),yt=ze.projectionMatrix.elements,Nt=ht.projectionMatrix.elements,zt=yt[14]/(yt[10]-1),ei=yt[14]/(yt[10]+1),it=(yt[9]+1)/yt[5],Dt=(yt[9]-1)/yt[5],Be=(yt[8]-1)/yt[0],li=(Nt[8]+1)/Nt[0],bt=zt*Be,Wt=zt*li,qe=lt/(-Be+li),pt=qe*-Be;if(ze.matrixWorld.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.translateX(pt),Ie.translateZ(qe),Ie.matrixWorld.compose(Ie.position,Ie.quaternion,Ie.scale),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert(),yt[10]===-1)Ie.projectionMatrix.copy(ze.projectionMatrix),Ie.projectionMatrixInverse.copy(ze.projectionMatrixInverse);else{const At=zt+qe,Se=ei+qe,me=bt-pt,$e=Wt+(lt-pt),Ct=it*ei/Se*At,wt=Dt*ei/Se*At;Ie.projectionMatrix.makePerspective(me,$e,Ct,wt,At,Se),Ie.projectionMatrixInverse.copy(Ie.projectionMatrix).invert()}}function Oe(Ie,ze){ze===null?Ie.matrixWorld.copy(Ie.matrix):Ie.matrixWorld.multiplyMatrices(ze.matrixWorld,Ie.matrix),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert()}this.updateCamera=function(Ie){if(s===null)return;let ze=Ie.near,ht=Ie.far;L.texture!==null&&(L.depthNear>0&&(ze=L.depthNear),L.depthFar>0&&(ht=L.depthFar)),re.near=ie.near=J.near=ze,re.far=ie.far=J.far=ht,(se!==re.near||ue!==re.far)&&(s.updateRenderState({depthNear:re.near,depthFar:re.far}),se=re.near,ue=re.far),J.layers.mask=Ie.layers.mask|2,ie.layers.mask=Ie.layers.mask|4,re.layers.mask=J.layers.mask|ie.layers.mask;const lt=Ie.parent,yt=re.cameras;Oe(re,lt);for(let Nt=0;Nt<yt.length;Nt++)Oe(yt[Nt],lt);yt.length===2?ye(re,J,ie):re.projectionMatrix.copy(J.projectionMatrix),ge(Ie,re,lt)};function ge(Ie,ze,ht){ht===null?Ie.matrix.copy(ze.matrixWorld):(Ie.matrix.copy(ht.matrixWorld),Ie.matrix.invert(),Ie.matrix.multiply(ze.matrixWorld)),Ie.matrix.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.updateMatrixWorld(!0),Ie.projectionMatrix.copy(ze.projectionMatrix),Ie.projectionMatrixInverse.copy(ze.projectionMatrixInverse),Ie.isPerspectiveCamera&&(Ie.fov=dS*2*Math.atan(1/Ie.projectionMatrix.elements[5]),Ie.zoom=1)}this.getCamera=function(){return re},this.getFoveation=function(){if(!(C===null&&I===null))return g},this.setFoveation=function(Ie){g=Ie,C!==null&&(C.fixedFoveation=Ie),I!==null&&I.fixedFoveation!==void 0&&(I.fixedFoveation=Ie)},this.hasDepthSensing=function(){return L.texture!==null},this.getDepthSensingMesh=function(){return L.getMesh(re)};let Ee=null;function ke(Ie,ze){if(b=ze.getViewerPose(_||u),F=ze,b!==null){const ht=b.views;I!==null&&(e.setRenderTargetFramebuffer(H,I.framebuffer),e.setRenderTarget(H));let lt=!1;ht.length!==re.cameras.length&&(re.cameras.length=0,lt=!0);for(let Nt=0;Nt<ht.length;Nt++){const zt=ht[Nt];let ei=null;if(I!==null)ei=I.getViewport(zt);else{const Dt=x.getViewSubImage(C,zt);ei=Dt.viewport,Nt===0&&(e.setRenderTargetTextures(H,Dt.colorTexture,C.ignoreDepthValues?void 0:Dt.depthStencilTexture),e.setRenderTarget(H))}let it=ee[Nt];it===void 0&&(it=new xo,it.layers.enable(Nt),it.viewport=new Vr,ee[Nt]=it),it.matrix.fromArray(zt.transform.matrix),it.matrix.decompose(it.position,it.quaternion,it.scale),it.projectionMatrix.fromArray(zt.projectionMatrix),it.projectionMatrixInverse.copy(it.projectionMatrix).invert(),it.viewport.set(ei.x,ei.y,ei.width,ei.height),Nt===0&&(re.matrix.copy(it.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale)),lt===!0&&re.cameras.push(it)}const yt=s.enabledFeatures;if(yt&&yt.includes("depth-sensing")){const Nt=x.getDepthInformation(ht[0]);Nt&&Nt.isValid&&Nt.texture&&L.init(e,Nt,s.renderState)}}for(let ht=0;ht<N.length;ht++){const lt=z[ht],yt=N[ht];lt!==null&&yt!==void 0&&yt.update(lt,ze,_||u)}Ee&&Ee(Ie,ze),ze.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ze}),F=null}const je=new pse;je.setAnimationLoop(ke),this.setAnimationLoop=function(Ie){Ee=Ie},this.dispose=function(){}}}const Q1=new hl,MSe=new Ki;function RSe(a,e){function i(U,P){U.matrixAutoUpdate===!0&&U.updateMatrix(),P.value.copy(U.matrix)}function r(U,P){P.color.getRGB(U.fogColor.value,Sre(a)),P.isFog?(U.fogNear.value=P.near,U.fogFar.value=P.far):P.isFogExp2&&(U.fogDensity.value=P.density)}function s(U,P,H,N,z){P.isMeshBasicMaterial||P.isMeshLambertMaterial?l(U,P):P.isMeshToonMaterial?(l(U,P),x(U,P)):P.isMeshPhongMaterial?(l(U,P),b(U,P)):P.isMeshStandardMaterial?(l(U,P),C(U,P),P.isMeshPhysicalMaterial&&I(U,P,z)):P.isMeshMatcapMaterial?(l(U,P),F(U,P)):P.isMeshDepthMaterial?l(U,P):P.isMeshDistanceMaterial?(l(U,P),L(U,P)):P.isMeshNormalMaterial?l(U,P):P.isLineBasicMaterial?(u(U,P),P.isLineDashedMaterial&&A(U,P)):P.isPointsMaterial?g(U,P,H,N):P.isSpriteMaterial?_(U,P):P.isShadowMaterial?(U.color.value.copy(P.color),U.opacity.value=P.opacity):P.isShaderMaterial&&(P.uniformsNeedUpdate=!1)}function l(U,P){U.opacity.value=P.opacity,P.color&&U.diffuse.value.copy(P.color),P.emissive&&U.emissive.value.copy(P.emissive).multiplyScalar(P.emissiveIntensity),P.map&&(U.map.value=P.map,i(P.map,U.mapTransform)),P.alphaMap&&(U.alphaMap.value=P.alphaMap,i(P.alphaMap,U.alphaMapTransform)),P.bumpMap&&(U.bumpMap.value=P.bumpMap,i(P.bumpMap,U.bumpMapTransform),U.bumpScale.value=P.bumpScale,P.side===mu&&(U.bumpScale.value*=-1)),P.normalMap&&(U.normalMap.value=P.normalMap,i(P.normalMap,U.normalMapTransform),U.normalScale.value.copy(P.normalScale),P.side===mu&&U.normalScale.value.negate()),P.displacementMap&&(U.displacementMap.value=P.displacementMap,i(P.displacementMap,U.displacementMapTransform),U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias),P.emissiveMap&&(U.emissiveMap.value=P.emissiveMap,i(P.emissiveMap,U.emissiveMapTransform)),P.specularMap&&(U.specularMap.value=P.specularMap,i(P.specularMap,U.specularMapTransform)),P.alphaTest>0&&(U.alphaTest.value=P.alphaTest);const H=e.get(P),N=H.envMap,z=H.envMapRotation;N&&(U.envMap.value=N,Q1.copy(z),Q1.x*=-1,Q1.y*=-1,Q1.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Q1.y*=-1,Q1.z*=-1),U.envMapRotation.value.setFromMatrix4(MSe.makeRotationFromEuler(Q1)),U.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,U.reflectivity.value=P.reflectivity,U.ior.value=P.ior,U.refractionRatio.value=P.refractionRatio),P.lightMap&&(U.lightMap.value=P.lightMap,U.lightMapIntensity.value=P.lightMapIntensity,i(P.lightMap,U.lightMapTransform)),P.aoMap&&(U.aoMap.value=P.aoMap,U.aoMapIntensity.value=P.aoMapIntensity,i(P.aoMap,U.aoMapTransform))}function u(U,P){U.diffuse.value.copy(P.color),U.opacity.value=P.opacity,P.map&&(U.map.value=P.map,i(P.map,U.mapTransform))}function A(U,P){U.dashSize.value=P.dashSize,U.totalSize.value=P.dashSize+P.gapSize,U.scale.value=P.scale}function g(U,P,H,N){U.diffuse.value.copy(P.color),U.opacity.value=P.opacity,U.size.value=P.size*H,U.scale.value=N*.5,P.map&&(U.map.value=P.map,i(P.map,U.uvTransform)),P.alphaMap&&(U.alphaMap.value=P.alphaMap,i(P.alphaMap,U.alphaMapTransform)),P.alphaTest>0&&(U.alphaTest.value=P.alphaTest)}function _(U,P){U.diffuse.value.copy(P.color),U.opacity.value=P.opacity,U.rotation.value=P.rotation,P.map&&(U.map.value=P.map,i(P.map,U.mapTransform)),P.alphaMap&&(U.alphaMap.value=P.alphaMap,i(P.alphaMap,U.alphaMapTransform)),P.alphaTest>0&&(U.alphaTest.value=P.alphaTest)}function b(U,P){U.specular.value.copy(P.specular),U.shininess.value=Math.max(P.shininess,1e-4)}function x(U,P){P.gradientMap&&(U.gradientMap.value=P.gradientMap)}function C(U,P){U.metalness.value=P.metalness,P.metalnessMap&&(U.metalnessMap.value=P.metalnessMap,i(P.metalnessMap,U.metalnessMapTransform)),U.roughness.value=P.roughness,P.roughnessMap&&(U.roughnessMap.value=P.roughnessMap,i(P.roughnessMap,U.roughnessMapTransform)),P.envMap&&(U.envMapIntensity.value=P.envMapIntensity)}function I(U,P,H){U.ior.value=P.ior,P.sheen>0&&(U.sheenColor.value.copy(P.sheenColor).multiplyScalar(P.sheen),U.sheenRoughness.value=P.sheenRoughness,P.sheenColorMap&&(U.sheenColorMap.value=P.sheenColorMap,i(P.sheenColorMap,U.sheenColorMapTransform)),P.sheenRoughnessMap&&(U.sheenRoughnessMap.value=P.sheenRoughnessMap,i(P.sheenRoughnessMap,U.sheenRoughnessMapTransform))),P.clearcoat>0&&(U.clearcoat.value=P.clearcoat,U.clearcoatRoughness.value=P.clearcoatRoughness,P.clearcoatMap&&(U.clearcoatMap.value=P.clearcoatMap,i(P.clearcoatMap,U.clearcoatMapTransform)),P.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap.value=P.clearcoatRoughnessMap,i(P.clearcoatRoughnessMap,U.clearcoatRoughnessMapTransform)),P.clearcoatNormalMap&&(U.clearcoatNormalMap.value=P.clearcoatNormalMap,i(P.clearcoatNormalMap,U.clearcoatNormalMapTransform),U.clearcoatNormalScale.value.copy(P.clearcoatNormalScale),P.side===mu&&U.clearcoatNormalScale.value.negate())),P.dispersion>0&&(U.dispersion.value=P.dispersion),P.iridescence>0&&(U.iridescence.value=P.iridescence,U.iridescenceIOR.value=P.iridescenceIOR,U.iridescenceThicknessMinimum.value=P.iridescenceThicknessRange[0],U.iridescenceThicknessMaximum.value=P.iridescenceThicknessRange[1],P.iridescenceMap&&(U.iridescenceMap.value=P.iridescenceMap,i(P.iridescenceMap,U.iridescenceMapTransform)),P.iridescenceThicknessMap&&(U.iridescenceThicknessMap.value=P.iridescenceThicknessMap,i(P.iridescenceThicknessMap,U.iridescenceThicknessMapTransform))),P.transmission>0&&(U.transmission.value=P.transmission,U.transmissionSamplerMap.value=H.texture,U.transmissionSamplerSize.value.set(H.width,H.height),P.transmissionMap&&(U.transmissionMap.value=P.transmissionMap,i(P.transmissionMap,U.transmissionMapTransform)),U.thickness.value=P.thickness,P.thicknessMap&&(U.thicknessMap.value=P.thicknessMap,i(P.thicknessMap,U.thicknessMapTransform)),U.attenuationDistance.value=P.attenuationDistance,U.attenuationColor.value.copy(P.attenuationColor)),P.anisotropy>0&&(U.anisotropyVector.value.set(P.anisotropy*Math.cos(P.anisotropyRotation),P.anisotropy*Math.sin(P.anisotropyRotation)),P.anisotropyMap&&(U.anisotropyMap.value=P.anisotropyMap,i(P.anisotropyMap,U.anisotropyMapTransform))),U.specularIntensity.value=P.specularIntensity,U.specularColor.value.copy(P.specularColor),P.specularColorMap&&(U.specularColorMap.value=P.specularColorMap,i(P.specularColorMap,U.specularColorMapTransform)),P.specularIntensityMap&&(U.specularIntensityMap.value=P.specularIntensityMap,i(P.specularIntensityMap,U.specularIntensityMapTransform))}function F(U,P){P.matcap&&(U.matcap.value=P.matcap)}function L(U,P){const H=e.get(P).light;U.referencePosition.value.setFromMatrixPosition(H.matrixWorld),U.nearDistance.value=H.shadow.camera.near,U.farDistance.value=H.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:s}}function DSe(a,e,i,r){let s={},l={},u=[];const A=a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS);function g(H,N){const z=N.program;r.uniformBlockBinding(H,z)}function _(H,N){let z=s[H.id];z===void 0&&(F(H),z=b(H),s[H.id]=z,H.addEventListener("dispose",U));const W=N.program;r.updateUBOMapping(H,W);const j=e.render.frame;l[H.id]!==j&&(C(H),l[H.id]=j)}function b(H){const N=x();H.__bindingPointIndex=N;const z=a.createBuffer(),W=H.__size,j=H.usage;return a.bindBuffer(a.UNIFORM_BUFFER,z),a.bufferData(a.UNIFORM_BUFFER,W,j),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,N,z),z}function x(){for(let H=0;H<A;H++)if(u.indexOf(H)===-1)return u.push(H),H;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function C(H){const N=s[H.id],z=H.uniforms,W=H.__cache;a.bindBuffer(a.UNIFORM_BUFFER,N);for(let j=0,J=z.length;j<J;j++){const ie=Array.isArray(z[j])?z[j]:[z[j]];for(let ee=0,re=ie.length;ee<re;ee++){const se=ie[ee];if(I(se,j,ee,W)===!0){const ue=se.__offset,fe=Array.isArray(se.value)?se.value:[se.value];let pe=0;for(let xe=0;xe<fe.length;xe++){const ce=fe[xe],_e=L(ce);typeof ce=="number"||typeof ce=="boolean"?(se.__data[0]=ce,a.bufferSubData(a.UNIFORM_BUFFER,ue+pe,se.__data)):ce.isMatrix3?(se.__data[0]=ce.elements[0],se.__data[1]=ce.elements[1],se.__data[2]=ce.elements[2],se.__data[3]=0,se.__data[4]=ce.elements[3],se.__data[5]=ce.elements[4],se.__data[6]=ce.elements[5],se.__data[7]=0,se.__data[8]=ce.elements[6],se.__data[9]=ce.elements[7],se.__data[10]=ce.elements[8],se.__data[11]=0):(ce.toArray(se.__data,pe),pe+=_e.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,ue,se.__data)}}}a.bindBuffer(a.UNIFORM_BUFFER,null)}function I(H,N,z,W){const j=H.value,J=N+"_"+z;if(W[J]===void 0)return typeof j=="number"||typeof j=="boolean"?W[J]=j:W[J]=j.clone(),!0;{const ie=W[J];if(typeof j=="number"||typeof j=="boolean"){if(ie!==j)return W[J]=j,!0}else if(ie.equals(j)===!1)return ie.copy(j),!0}return!1}function F(H){const N=H.uniforms;let z=0;const W=16;for(let J=0,ie=N.length;J<ie;J++){const ee=Array.isArray(N[J])?N[J]:[N[J]];for(let re=0,se=ee.length;re<se;re++){const ue=ee[re],fe=Array.isArray(ue.value)?ue.value:[ue.value];for(let pe=0,xe=fe.length;pe<xe;pe++){const ce=fe[pe],_e=L(ce),ye=z%W,Oe=ye%_e.boundary,ge=ye+Oe;z+=Oe,ge!==0&&W-ge<_e.storage&&(z+=W-ge),ue.__data=new Float32Array(_e.storage/Float32Array.BYTES_PER_ELEMENT),ue.__offset=z,z+=_e.storage}}}const j=z%W;return j>0&&(z+=W-j),H.__size=z,H.__cache={},this}function L(H){const N={boundary:0,storage:0};return typeof H=="number"||typeof H=="boolean"?(N.boundary=4,N.storage=4):H.isVector2?(N.boundary=8,N.storage=8):H.isVector3||H.isColor?(N.boundary=16,N.storage=12):H.isVector4?(N.boundary=16,N.storage=16):H.isMatrix3?(N.boundary=48,N.storage=48):H.isMatrix4?(N.boundary=64,N.storage=64):H.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",H),N}function U(H){const N=H.target;N.removeEventListener("dispose",U);const z=u.indexOf(N.__bindingPointIndex);u.splice(z,1),a.deleteBuffer(s[N.id]),delete s[N.id],delete l[N.id]}function P(){for(const H in s)a.deleteBuffer(s[H]);u=[],s={},l={}}return{bind:g,update:_,dispose:P}}class yL{constructor(e={}){const{canvas:i=xre(),context:r=null,depth:s=!0,stencil:l=!1,alpha:u=!1,antialias:A=!1,premultipliedAlpha:g=!0,preserveDrawingBuffer:_=!1,powerPreference:b="default",failIfMajorPerformanceCaveat:x=!1,reverseDepthBuffer:C=!1}=e;this.isWebGLRenderer=!0;let I;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");I=r.getContextAttributes().alpha}else I=u;const F=new Uint32Array(4),L=new Int32Array(4);let U=null,P=null;const H=[],N=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=rr,this.toneMapping=xf,this.toneMappingExposure=1;const z=this;let W=!1,j=0,J=0,ie=null,ee=-1,re=null;const se=new Vr,ue=new Vr;let fe=null;const pe=new Si(0);let xe=0,ce=i.width,_e=i.height,ye=1,Oe=null,ge=null;const Ee=new Vr(0,0,ce,_e),ke=new Vr(0,0,ce,_e);let je=!1;const Ie=new iM;let ze=!1,ht=!1;this.transmissionResolutionScale=1;const lt=new Ki,yt=new Ki,Nt=new Fe,zt=new Vr,ei={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let it=!1;function Dt(){return ie===null?ye:1}let Be=r;function li(Le,Et){return i.getContext(Le,Et)}try{const Le={alpha:!0,depth:s,stencil:l,antialias:A,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:b,failIfMajorPerformanceCaveat:x};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${jT}`),i.addEventListener("webglcontextlost",Xt,!1),i.addEventListener("webglcontextrestored",Mi,!1),i.addEventListener("webglcontextcreationerror",Ii,!1),Be===null){const Et="webgl2";if(Be=li(Et,Le),Be===null)throw li(Et)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Le){throw console.error("THREE.WebGLRenderer: "+Le.message),Le}let bt,Wt,qe,pt,At,Se,me,$e,Ct,wt,ft,Ot,Gt,si,$t,ti,gi,mi,Oi,Bi,ln,Ji,Vi,at;function Ti(){bt=new GCe(Be),bt.init(),Ji=new vse(Be,bt),Wt=new PCe(Be,bt,e,Ji),qe=new xSe(Be,bt),Wt.reverseDepthBuffer&&C&&qe.buffers.depth.setReversed(!0),pt=new $Ce(Be),At=new uSe,Se=new CSe(Be,bt,qe,At,Wt,Ji,pt),me=new QCe(z),$e=new zCe(z),Ct=new Z1e(Be),Vi=new kCe(Be,Ct),wt=new VCe(Be,Ct,pt,Vi),ft=new jCe(Be,wt,Ct,pt),Oi=new WCe(Be,Wt,Se),ti=new OCe(At),Ot=new cSe(z,me,$e,bt,Wt,Vi,ti),Gt=new RSe(z,At),si=new dSe,$t=new _Se(bt),mi=new UCe(z,me,$e,qe,ft,I,g),gi=new bSe(z,ft,Wt),at=new DSe(Be,pt,Wt,qe),Bi=new LCe(Be,bt,pt),ln=new qCe(Be,bt,pt),pt.programs=Ot.programs,z.capabilities=Wt,z.extensions=bt,z.properties=At,z.renderLists=si,z.shadowMap=gi,z.state=qe,z.info=pt}Ti();const Pt=new TSe(z,Be);this.xr=Pt,this.getContext=function(){return Be},this.getContextAttributes=function(){return Be.getContextAttributes()},this.forceContextLoss=function(){const Le=bt.get("WEBGL_lose_context");Le&&Le.loseContext()},this.forceContextRestore=function(){const Le=bt.get("WEBGL_lose_context");Le&&Le.restoreContext()},this.getPixelRatio=function(){return ye},this.setPixelRatio=function(Le){Le!==void 0&&(ye=Le,this.setSize(ce,_e,!1))},this.getSize=function(Le){return Le.set(ce,_e)},this.setSize=function(Le,Et,Vt=!0){if(Pt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ce=Le,_e=Et,i.width=Math.floor(Le*ye),i.height=Math.floor(Et*ye),Vt===!0&&(i.style.width=Le+"px",i.style.height=Et+"px"),this.setViewport(0,0,Le,Et)},this.getDrawingBufferSize=function(Le){return Le.set(ce*ye,_e*ye).floor()},this.setDrawingBufferSize=function(Le,Et,Vt){ce=Le,_e=Et,ye=Vt,i.width=Math.floor(Le*Vt),i.height=Math.floor(Et*Vt),this.setViewport(0,0,Le,Et)},this.getCurrentViewport=function(Le){return Le.copy(se)},this.getViewport=function(Le){return Le.copy(Ee)},this.setViewport=function(Le,Et,Vt,kt){Le.isVector4?Ee.set(Le.x,Le.y,Le.z,Le.w):Ee.set(Le,Et,Vt,kt),qe.viewport(se.copy(Ee).multiplyScalar(ye).round())},this.getScissor=function(Le){return Le.copy(ke)},this.setScissor=function(Le,Et,Vt,kt){Le.isVector4?ke.set(Le.x,Le.y,Le.z,Le.w):ke.set(Le,Et,Vt,kt),qe.scissor(ue.copy(ke).multiplyScalar(ye).round())},this.getScissorTest=function(){return je},this.setScissorTest=function(Le){qe.setScissorTest(je=Le)},this.setOpaqueSort=function(Le){Oe=Le},this.setTransparentSort=function(Le){ge=Le},this.getClearColor=function(Le){return Le.copy(mi.getClearColor())},this.setClearColor=function(){mi.setClearColor.apply(mi,arguments)},this.getClearAlpha=function(){return mi.getClearAlpha()},this.setClearAlpha=function(){mi.setClearAlpha.apply(mi,arguments)},this.clear=function(Le=!0,Et=!0,Vt=!0){let kt=0;if(Le){let St=!1;if(ie!==null){const pi=ie.texture.format;St=pi===qk||pi===Vk||pi===YT}if(St){const pi=ie.texture.type,Ui=pi===$a||pi===jm||pi===lS||pi===Iw||pi===zk||pi===Gk,ki=mi.getClearColor(),Ci=mi.getClearAlpha(),yn=ki.r,en=ki.g,Qi=ki.b;Ui?(F[0]=yn,F[1]=en,F[2]=Qi,F[3]=Ci,Be.clearBufferuiv(Be.COLOR,0,F)):(L[0]=yn,L[1]=en,L[2]=Qi,L[3]=Ci,Be.clearBufferiv(Be.COLOR,0,L))}else kt|=Be.COLOR_BUFFER_BIT}Et&&(kt|=Be.DEPTH_BUFFER_BIT),Vt&&(kt|=Be.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Be.clear(kt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Xt,!1),i.removeEventListener("webglcontextrestored",Mi,!1),i.removeEventListener("webglcontextcreationerror",Ii,!1),mi.dispose(),si.dispose(),$t.dispose(),At.dispose(),me.dispose(),$e.dispose(),ft.dispose(),Vi.dispose(),at.dispose(),Ot.dispose(),Pt.dispose(),Pt.removeEventListener("sessionstart",Xr),Pt.removeEventListener("sessionend",$n),co.stop()};function Xt(Le){Le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Mi(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1;const Le=pt.autoReset,Et=gi.enabled,Vt=gi.autoUpdate,kt=gi.needsUpdate,St=gi.type;Ti(),pt.autoReset=Le,gi.enabled=Et,gi.autoUpdate=Vt,gi.needsUpdate=kt,gi.type=St}function Ii(Le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Le.statusMessage)}function Fi(Le){const Et=Le.target;Et.removeEventListener("dispose",Fi),vn(Et)}function vn(Le){Xn(Le),At.remove(Le)}function Xn(Le){const Et=At.get(Le).programs;Et!==void 0&&(Et.forEach(function(Vt){Ot.releaseProgram(Vt)}),Le.isShaderMaterial&&Ot.releaseShaderCache(Le))}this.renderBufferDirect=function(Le,Et,Vt,kt,St,pi){Et===null&&(Et=ei);const Ui=St.isMesh&&St.matrixWorld.determinant()<0,ki=ys(Le,Et,Vt,kt,St);qe.setMaterial(kt,Ui);let Ci=Vt.index,yn=1;if(kt.wireframe===!0){if(Ci=wt.getWireframeAttribute(Vt),Ci===void 0)return;yn=2}const en=Vt.drawRange,Qi=Vt.attributes.position;let Wn=en.start*yn,Cr=(en.start+en.count)*yn;pi!==null&&(Wn=Math.max(Wn,pi.start*yn),Cr=Math.min(Cr,(pi.start+pi.count)*yn)),Ci!==null?(Wn=Math.max(Wn,0),Cr=Math.min(Cr,Ci.count)):Qi!=null&&(Wn=Math.max(Wn,0),Cr=Math.min(Cr,Qi.count));const Yr=Cr-Wn;if(Yr<0||Yr===1/0)return;Vi.setup(St,kt,ki,Vt,Ci);let sr,xn=Bi;if(Ci!==null&&(sr=Ct.get(Ci),xn=ln,xn.setIndex(sr)),St.isMesh)kt.wireframe===!0?(qe.setLineWidth(kt.wireframeLinewidth*Dt()),xn.setMode(Be.LINES)):xn.setMode(Be.TRIANGLES);else if(St.isLine){let Xi=kt.linewidth;Xi===void 0&&(Xi=1),qe.setLineWidth(Xi*Dt()),St.isLineSegments?xn.setMode(Be.LINES):St.isLineLoop?xn.setMode(Be.LINE_LOOP):xn.setMode(Be.LINE_STRIP)}else St.isPoints?xn.setMode(Be.POINTS):St.isSprite&&xn.setMode(Be.TRIANGLES);if(St.isBatchedMesh)if(St._multiDrawInstances!==null)xn.renderMultiDrawInstances(St._multiDrawStarts,St._multiDrawCounts,St._multiDrawCount,St._multiDrawInstances);else if(bt.get("WEBGL_multi_draw"))xn.renderMultiDraw(St._multiDrawStarts,St._multiDrawCounts,St._multiDrawCount);else{const Xi=St._multiDrawStarts,jn=St._multiDrawCounts,ar=St._multiDrawCount,Wo=Ci?Ct.get(Ci).bytesPerElement:1,Ua=At.get(kt).currentProgram.getUniforms();for(let fn=0;fn<ar;fn++)Ua.setValue(Be,"_gl_DrawID",fn),xn.render(Xi[fn]/Wo,jn[fn])}else if(St.isInstancedMesh)xn.renderInstances(Wn,Yr,St.count);else if(Vt.isInstancedBufferGeometry){const Xi=Vt._maxInstanceCount!==void 0?Vt._maxInstanceCount:1/0,jn=Math.min(Vt.instanceCount,Xi);xn.renderInstances(Wn,Yr,jn)}else xn.render(Wn,Yr)};function Tn(Le,Et,Vt){Le.transparent===!0&&Le.side===Ll&&Le.forceSinglePass===!1?(Le.side=mu,Le.needsUpdate=!0,eh(Le,Et,Vt),Le.side=If,Le.needsUpdate=!0,eh(Le,Et,Vt),Le.side=Ll):eh(Le,Et,Vt)}this.compile=function(Le,Et,Vt=null){Vt===null&&(Vt=Le),P=$t.get(Vt),P.init(Et),N.push(P),Vt.traverseVisible(function(St){St.isLight&&St.layers.test(Et.layers)&&(P.pushLight(St),St.castShadow&&P.pushShadow(St))}),Le!==Vt&&Le.traverseVisible(function(St){St.isLight&&St.layers.test(Et.layers)&&(P.pushLight(St),St.castShadow&&P.pushShadow(St))}),P.setupLights();const kt=new Set;return Le.traverse(function(St){if(!(St.isMesh||St.isPoints||St.isLine||St.isSprite))return;const pi=St.material;if(pi)if(Array.isArray(pi))for(let Ui=0;Ui<pi.length;Ui++){const ki=pi[Ui];Tn(ki,Vt,St),kt.add(ki)}else Tn(pi,Vt,St),kt.add(pi)}),N.pop(),P=null,kt},this.compileAsync=function(Le,Et,Vt=null){const kt=this.compile(Le,Et,Vt);return new Promise(St=>{function pi(){if(kt.forEach(function(Ui){At.get(Ui).currentProgram.isReady()&&kt.delete(Ui)}),kt.size===0){St(Le);return}setTimeout(pi,10)}bt.get("KHR_parallel_shader_compile")!==null?pi():setTimeout(pi,10)})};let cr=null;function gr(Le){cr&&cr(Le)}function Xr(){co.stop()}function $n(){co.start()}const co=new pse;co.setAnimationLoop(gr),typeof self<"u"&&co.setContext(self),this.setAnimationLoop=function(Le){cr=Le,Pt.setAnimationLoop(Le),Le===null?co.stop():co.start()},Pt.addEventListener("sessionstart",Xr),Pt.addEventListener("sessionend",$n),this.render=function(Le,Et){if(Et!==void 0&&Et.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(W===!0)return;if(Le.matrixWorldAutoUpdate===!0&&Le.updateMatrixWorld(),Et.parent===null&&Et.matrixWorldAutoUpdate===!0&&Et.updateMatrixWorld(),Pt.enabled===!0&&Pt.isPresenting===!0&&(Pt.cameraAutoUpdate===!0&&Pt.updateCamera(Et),Et=Pt.getCamera()),Le.isScene===!0&&Le.onBeforeRender(z,Le,Et,ie),P=$t.get(Le,N.length),P.init(Et),N.push(P),yt.multiplyMatrices(Et.projectionMatrix,Et.matrixWorldInverse),Ie.setFromProjectionMatrix(yt),ht=this.localClippingEnabled,ze=ti.init(this.clippingPlanes,ht),U=si.get(Le,H.length),U.init(),H.push(U),Pt.enabled===!0&&Pt.isPresenting===!0){const pi=z.xr.getDepthSensingMesh();pi!==null&&Ka(pi,Et,-1/0,z.sortObjects)}Ka(Le,Et,0,z.sortObjects),U.finish(),z.sortObjects===!0&&U.sort(Oe,ge),it=Pt.enabled===!1||Pt.isPresenting===!1||Pt.hasDepthSensing()===!1,it&&mi.addToRenderList(U,Le),this.info.render.frame++,ze===!0&&ti.beginShadows();const Vt=P.state.shadowsArray;gi.render(Vt,Le,Et),ze===!0&&ti.endShadows(),this.info.autoReset===!0&&this.info.reset();const kt=U.opaque,St=U.transmissive;if(P.setupLights(),Et.isArrayCamera){const pi=Et.cameras;if(St.length>0)for(let Ui=0,ki=pi.length;Ui<ki;Ui++){const Ci=pi[Ui];fl(kt,St,Le,Ci)}it&&mi.render(Le);for(let Ui=0,ki=pi.length;Ui<ki;Ui++){const Ci=pi[Ui];Zu(U,Le,Ci,Ci.viewport)}}else St.length>0&&fl(kt,St,Le,Et),it&&mi.render(Le),Zu(U,Le,Et);ie!==null&&J===0&&(Se.updateMultisampleRenderTarget(ie),Se.updateRenderTargetMipmap(ie)),Le.isScene===!0&&Le.onAfterRender(z,Le,Et),Vi.resetDefaultState(),ee=-1,re=null,N.pop(),N.length>0?(P=N[N.length-1],ze===!0&&ti.setGlobalState(z.clippingPlanes,P.state.camera)):P=null,H.pop(),H.length>0?U=H[H.length-1]:U=null};function Ka(Le,Et,Vt,kt){if(Le.visible===!1)return;if(Le.layers.test(Et.layers)){if(Le.isGroup)Vt=Le.renderOrder;else if(Le.isLOD)Le.autoUpdate===!0&&Le.update(Et);else if(Le.isLight)P.pushLight(Le),Le.castShadow&&P.pushShadow(Le);else if(Le.isSprite){if(!Le.frustumCulled||Ie.intersectsSprite(Le)){kt&&zt.setFromMatrixPosition(Le.matrixWorld).applyMatrix4(yt);const Ui=ft.update(Le),ki=Le.material;ki.visible&&U.push(Le,Ui,ki,Vt,zt.z,null)}}else if((Le.isMesh||Le.isLine||Le.isPoints)&&(!Le.frustumCulled||Ie.intersectsObject(Le))){const Ui=ft.update(Le),ki=Le.material;if(kt&&(Le.boundingSphere!==void 0?(Le.boundingSphere===null&&Le.computeBoundingSphere(),zt.copy(Le.boundingSphere.center)):(Ui.boundingSphere===null&&Ui.computeBoundingSphere(),zt.copy(Ui.boundingSphere.center)),zt.applyMatrix4(Le.matrixWorld).applyMatrix4(yt)),Array.isArray(ki)){const Ci=Ui.groups;for(let yn=0,en=Ci.length;yn<en;yn++){const Qi=Ci[yn],Wn=ki[Qi.materialIndex];Wn&&Wn.visible&&U.push(Le,Ui,Wn,Vt,zt.z,Qi)}}else ki.visible&&U.push(Le,Ui,ki,Vt,zt.z,null)}}const pi=Le.children;for(let Ui=0,ki=pi.length;Ui<ki;Ui++)Ka(pi[Ui],Et,Vt,kt)}function Zu(Le,Et,Vt,kt){const St=Le.opaque,pi=Le.transmissive,Ui=Le.transparent;P.setupLightsView(Vt),ze===!0&&ti.setGlobalState(z.clippingPlanes,Vt),kt&&qe.viewport(se.copy(kt)),St.length>0&&Ql(St,Et,Vt),pi.length>0&&Ql(pi,Et,Vt),Ui.length>0&&Ql(Ui,Et,Vt),qe.buffers.depth.setTest(!0),qe.buffers.depth.setMask(!0),qe.buffers.color.setMask(!0),qe.setPolygonOffset(!1)}function fl(Le,Et,Vt,kt){if((Vt.isScene===!0?Vt.overrideMaterial:null)!==null)return;P.state.transmissionRenderTarget[kt.id]===void 0&&(P.state.transmissionRenderTarget[kt.id]=new qd(1,1,{generateMipmaps:!0,type:bt.has("EXT_color_buffer_half_float")||bt.has("EXT_color_buffer_float")?Ol:$a,minFilter:Ju,samples:4,stencilBuffer:l,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:lr.workingColorSpace}));const pi=P.state.transmissionRenderTarget[kt.id],Ui=kt.viewport||se;pi.setSize(Ui.z*z.transmissionResolutionScale,Ui.w*z.transmissionResolutionScale);const ki=z.getRenderTarget();z.setRenderTarget(pi),z.getClearColor(pe),xe=z.getClearAlpha(),xe<1&&z.setClearColor(16777215,.5),z.clear(),it&&mi.render(Vt);const Ci=z.toneMapping;z.toneMapping=xf;const yn=kt.viewport;if(kt.viewport!==void 0&&(kt.viewport=void 0),P.setupLightsView(kt),ze===!0&&ti.setGlobalState(z.clippingPlanes,kt),Ql(Le,Vt,kt),Se.updateMultisampleRenderTarget(pi),Se.updateRenderTargetMipmap(pi),bt.has("WEBGL_multisampled_render_to_texture")===!1){let en=!1;for(let Qi=0,Wn=Et.length;Qi<Wn;Qi++){const Cr=Et[Qi],Yr=Cr.object,sr=Cr.geometry,xn=Cr.material,Xi=Cr.group;if(xn.side===Ll&&Yr.layers.test(kt.layers)){const jn=xn.side;xn.side=mu,xn.needsUpdate=!0,Nc(Yr,Vt,kt,sr,xn,Xi),xn.side=jn,xn.needsUpdate=!0,en=!0}}en===!0&&(Se.updateMultisampleRenderTarget(pi),Se.updateRenderTargetMipmap(pi))}z.setRenderTarget(ki),z.setClearColor(pe,xe),yn!==void 0&&(kt.viewport=yn),z.toneMapping=Ci}function Ql(Le,Et,Vt){const kt=Et.isScene===!0?Et.overrideMaterial:null;for(let St=0,pi=Le.length;St<pi;St++){const Ui=Le[St],ki=Ui.object,Ci=Ui.geometry,yn=kt===null?Ui.material:kt,en=Ui.group;ki.layers.test(Vt.layers)&&Nc(ki,Et,Vt,Ci,yn,en)}}function Nc(Le,Et,Vt,kt,St,pi){Le.onBeforeRender(z,Et,Vt,kt,St,pi),Le.modelViewMatrix.multiplyMatrices(Vt.matrixWorldInverse,Le.matrixWorld),Le.normalMatrix.getNormalMatrix(Le.modelViewMatrix),St.onBeforeRender(z,Et,Vt,kt,Le,pi),St.transparent===!0&&St.side===Ll&&St.forceSinglePass===!1?(St.side=mu,St.needsUpdate=!0,z.renderBufferDirect(Vt,Et,kt,St,Le,pi),St.side=If,St.needsUpdate=!0,z.renderBufferDirect(Vt,Et,kt,St,Le,pi),St.side=Ll):z.renderBufferDirect(Vt,Et,kt,St,Le,pi),Le.onAfterRender(z,Et,Vt,kt,St,pi)}function eh(Le,Et,Vt){Et.isScene!==!0&&(Et=ei);const kt=At.get(Le),St=P.state.lights,pi=P.state.shadowsArray,Ui=St.state.version,ki=Ot.getParameters(Le,St.state,pi,Et,Vt),Ci=Ot.getProgramCacheKey(ki);let yn=kt.programs;kt.environment=Le.isMeshStandardMaterial?Et.environment:null,kt.fog=Et.fog,kt.envMap=(Le.isMeshStandardMaterial?$e:me).get(Le.envMap||kt.environment),kt.envMapRotation=kt.environment!==null&&Le.envMap===null?Et.environmentRotation:Le.envMapRotation,yn===void 0&&(Le.addEventListener("dispose",Fi),yn=new Map,kt.programs=yn);let en=yn.get(Ci);if(en!==void 0){if(kt.currentProgram===en&&kt.lightsStateVersion===Ui)return Fs(Le,ki),en}else ki.uniforms=Ot.getUniforms(Le),Le.onBeforeCompile(ki,z),en=Ot.acquireProgram(ki,Ci),yn.set(Ci,en),kt.uniforms=ki.uniforms;const Qi=kt.uniforms;return(!Le.isShaderMaterial&&!Le.isRawShaderMaterial||Le.clipping===!0)&&(Qi.clippingPlanes=ti.uniform),Fs(Le,ki),kt.needsLights=Hi(Le),kt.lightsStateVersion=Ui,kt.needsLights&&(Qi.ambientLightColor.value=St.state.ambient,Qi.lightProbe.value=St.state.probe,Qi.directionalLights.value=St.state.directional,Qi.directionalLightShadows.value=St.state.directionalShadow,Qi.spotLights.value=St.state.spot,Qi.spotLightShadows.value=St.state.spotShadow,Qi.rectAreaLights.value=St.state.rectArea,Qi.ltc_1.value=St.state.rectAreaLTC1,Qi.ltc_2.value=St.state.rectAreaLTC2,Qi.pointLights.value=St.state.point,Qi.pointLightShadows.value=St.state.pointShadow,Qi.hemisphereLights.value=St.state.hemi,Qi.directionalShadowMap.value=St.state.directionalShadowMap,Qi.directionalShadowMatrix.value=St.state.directionalShadowMatrix,Qi.spotShadowMap.value=St.state.spotShadowMap,Qi.spotLightMatrix.value=St.state.spotLightMatrix,Qi.spotLightMap.value=St.state.spotLightMap,Qi.pointShadowMap.value=St.state.pointShadowMap,Qi.pointShadowMatrix.value=St.state.pointShadowMatrix),kt.currentProgram=en,kt.uniformsList=null,en}function Hc(Le){if(Le.uniformsList===null){const Et=Le.currentProgram.getUniforms();Le.uniformsList=nU.seqWithValue(Et.seq,Le.uniforms)}return Le.uniformsList}function Fs(Le,Et){const Vt=At.get(Le);Vt.outputColorSpace=Et.outputColorSpace,Vt.batching=Et.batching,Vt.batchingColor=Et.batchingColor,Vt.instancing=Et.instancing,Vt.instancingColor=Et.instancingColor,Vt.instancingMorph=Et.instancingMorph,Vt.skinning=Et.skinning,Vt.morphTargets=Et.morphTargets,Vt.morphNormals=Et.morphNormals,Vt.morphColors=Et.morphColors,Vt.morphTargetsCount=Et.morphTargetsCount,Vt.numClippingPlanes=Et.numClippingPlanes,Vt.numIntersection=Et.numClipIntersection,Vt.vertexAlphas=Et.vertexAlphas,Vt.vertexTangents=Et.vertexTangents,Vt.toneMapping=Et.toneMapping}function ys(Le,Et,Vt,kt,St){Et.isScene!==!0&&(Et=ei),Se.resetTextureUnits();const pi=Et.fog,Ui=kt.isMeshStandardMaterial?Et.environment:null,ki=ie===null?z.outputColorSpace:ie.isXRRenderTarget===!0?ie.texture.colorSpace:Co,Ci=(kt.isMeshStandardMaterial?$e:me).get(kt.envMap||Ui),yn=kt.vertexColors===!0&&!!Vt.attributes.color&&Vt.attributes.color.itemSize===4,en=!!Vt.attributes.tangent&&(!!kt.normalMap||kt.anisotropy>0),Qi=!!Vt.morphAttributes.position,Wn=!!Vt.morphAttributes.normal,Cr=!!Vt.morphAttributes.color;let Yr=xf;kt.toneMapped&&(ie===null||ie.isXRRenderTarget===!0)&&(Yr=z.toneMapping);const sr=Vt.morphAttributes.position||Vt.morphAttributes.normal||Vt.morphAttributes.color,xn=sr!==void 0?sr.length:0,Xi=At.get(kt),jn=P.state.lights;if(ze===!0&&(ht===!0||Le!==re)){const ns=Le===re&&kt.id===ee;ti.setState(kt,Le,ns)}let ar=!1;kt.version===Xi.__version?(Xi.needsLights&&Xi.lightsStateVersion!==jn.state.version||Xi.outputColorSpace!==ki||St.isBatchedMesh&&Xi.batching===!1||!St.isBatchedMesh&&Xi.batching===!0||St.isBatchedMesh&&Xi.batchingColor===!0&&St.colorTexture===null||St.isBatchedMesh&&Xi.batchingColor===!1&&St.colorTexture!==null||St.isInstancedMesh&&Xi.instancing===!1||!St.isInstancedMesh&&Xi.instancing===!0||St.isSkinnedMesh&&Xi.skinning===!1||!St.isSkinnedMesh&&Xi.skinning===!0||St.isInstancedMesh&&Xi.instancingColor===!0&&St.instanceColor===null||St.isInstancedMesh&&Xi.instancingColor===!1&&St.instanceColor!==null||St.isInstancedMesh&&Xi.instancingMorph===!0&&St.morphTexture===null||St.isInstancedMesh&&Xi.instancingMorph===!1&&St.morphTexture!==null||Xi.envMap!==Ci||kt.fog===!0&&Xi.fog!==pi||Xi.numClippingPlanes!==void 0&&(Xi.numClippingPlanes!==ti.numPlanes||Xi.numIntersection!==ti.numIntersection)||Xi.vertexAlphas!==yn||Xi.vertexTangents!==en||Xi.morphTargets!==Qi||Xi.morphNormals!==Wn||Xi.morphColors!==Cr||Xi.toneMapping!==Yr||Xi.morphTargetsCount!==xn)&&(ar=!0):(ar=!0,Xi.__version=kt.version);let Wo=Xi.currentProgram;ar===!0&&(Wo=eh(kt,Et,St));let Ua=!1,fn=!1,Xa=!1;const Er=Wo.getUniforms(),Ss=Xi.uniforms;if(qe.useProgram(Wo.program)&&(Ua=!0,fn=!0,Xa=!0),kt.id!==ee&&(ee=kt.id,fn=!0),Ua||re!==Le){qe.buffers.depth.getReversed()?(lt.copy(Le.projectionMatrix),Fye(lt),Uye(lt),Er.setValue(Be,"projectionMatrix",lt)):Er.setValue(Be,"projectionMatrix",Le.projectionMatrix),Er.setValue(Be,"viewMatrix",Le.matrixWorldInverse);const So=Er.map.cameraPosition;So!==void 0&&So.setValue(Be,Nt.setFromMatrixPosition(Le.matrixWorld)),Wt.logarithmicDepthBuffer&&Er.setValue(Be,"logDepthBufFC",2/(Math.log(Le.far+1)/Math.LN2)),(kt.isMeshPhongMaterial||kt.isMeshToonMaterial||kt.isMeshLambertMaterial||kt.isMeshBasicMaterial||kt.isMeshStandardMaterial||kt.isShaderMaterial)&&Er.setValue(Be,"isOrthographic",Le.isOrthographicCamera===!0),re!==Le&&(re=Le,fn=!0,Xa=!0)}if(St.isSkinnedMesh){Er.setOptional(Be,St,"bindMatrix"),Er.setOptional(Be,St,"bindMatrixInverse");const ns=St.skeleton;ns&&(ns.boneTexture===null&&ns.computeBoneTexture(),Er.setValue(Be,"boneTexture",ns.boneTexture,Se))}St.isBatchedMesh&&(Er.setOptional(Be,St,"batchingTexture"),Er.setValue(Be,"batchingTexture",St._matricesTexture,Se),Er.setOptional(Be,St,"batchingIdTexture"),Er.setValue(Be,"batchingIdTexture",St._indirectTexture,Se),Er.setOptional(Be,St,"batchingColorTexture"),St._colorsTexture!==null&&Er.setValue(Be,"batchingColorTexture",St._colorsTexture,Se));const Qs=Vt.morphAttributes;if((Qs.position!==void 0||Qs.normal!==void 0||Qs.color!==void 0)&&Oi.update(St,Vt,Wo),(fn||Xi.receiveShadow!==St.receiveShadow)&&(Xi.receiveShadow=St.receiveShadow,Er.setValue(Be,"receiveShadow",St.receiveShadow)),kt.isMeshGouraudMaterial&&kt.envMap!==null&&(Ss.envMap.value=Ci,Ss.flipEnvMap.value=Ci.isCubeTexture&&Ci.isRenderTargetTexture===!1?-1:1),kt.isMeshStandardMaterial&&kt.envMap===null&&Et.environment!==null&&(Ss.envMapIntensity.value=Et.environmentIntensity),fn&&(Er.setValue(Be,"toneMappingExposure",z.toneMappingExposure),Xi.needsLights&&Nl(Ss,Xa),pi&&kt.fog===!0&&Gt.refreshFogUniforms(Ss,pi),Gt.refreshMaterialUniforms(Ss,kt,ye,_e,P.state.transmissionRenderTarget[Le.id]),nU.upload(Be,Hc(Xi),Ss,Se)),kt.isShaderMaterial&&kt.uniformsNeedUpdate===!0&&(nU.upload(Be,Hc(Xi),Ss,Se),kt.uniformsNeedUpdate=!1),kt.isSpriteMaterial&&Er.setValue(Be,"center",St.center),Er.setValue(Be,"modelViewMatrix",St.modelViewMatrix),Er.setValue(Be,"normalMatrix",St.normalMatrix),Er.setValue(Be,"modelMatrix",St.matrixWorld),kt.isShaderMaterial||kt.isRawShaderMaterial){const ns=kt.uniformsGroups;for(let So=0,Ya=ns.length;So<Ya;So++){const aa=ns[So];at.update(aa,Wo),at.bind(aa,Wo)}}return Wo}function Nl(Le,Et){Le.ambientLightColor.needsUpdate=Et,Le.lightProbe.needsUpdate=Et,Le.directionalLights.needsUpdate=Et,Le.directionalLightShadows.needsUpdate=Et,Le.pointLights.needsUpdate=Et,Le.pointLightShadows.needsUpdate=Et,Le.spotLights.needsUpdate=Et,Le.spotLightShadows.needsUpdate=Et,Le.rectAreaLights.needsUpdate=Et,Le.hemisphereLights.needsUpdate=Et}function Hi(Le){return Le.isMeshLambertMaterial||Le.isMeshToonMaterial||Le.isMeshPhongMaterial||Le.isMeshStandardMaterial||Le.isShadowMaterial||Le.isShaderMaterial&&Le.lights===!0}this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return ie},this.setRenderTargetTextures=function(Le,Et,Vt){At.get(Le.texture).__webglTexture=Et,At.get(Le.depthTexture).__webglTexture=Vt;const kt=At.get(Le);kt.__hasExternalTextures=!0,kt.__autoAllocateDepthBuffer=Vt===void 0,kt.__autoAllocateDepthBuffer||bt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),kt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Le,Et){const Vt=At.get(Le);Vt.__webglFramebuffer=Et,Vt.__useDefaultFramebuffer=Et===void 0};const gl=Be.createFramebuffer();this.setRenderTarget=function(Le,Et=0,Vt=0){ie=Le,j=Et,J=Vt;let kt=!0,St=null,pi=!1,Ui=!1;if(Le){const Ci=At.get(Le);if(Ci.__useDefaultFramebuffer!==void 0)qe.bindFramebuffer(Be.FRAMEBUFFER,null),kt=!1;else if(Ci.__webglFramebuffer===void 0)Se.setupRenderTarget(Le);else if(Ci.__hasExternalTextures)Se.rebindTextures(Le,At.get(Le.texture).__webglTexture,At.get(Le.depthTexture).__webglTexture);else if(Le.depthBuffer){const Qi=Le.depthTexture;if(Ci.__boundDepthTexture!==Qi){if(Qi!==null&&At.has(Qi)&&(Le.width!==Qi.image.width||Le.height!==Qi.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Se.setupDepthRenderbuffer(Le)}}const yn=Le.texture;(yn.isData3DTexture||yn.isDataArrayTexture||yn.isCompressedArrayTexture)&&(Ui=!0);const en=At.get(Le).__webglFramebuffer;Le.isWebGLCubeRenderTarget?(Array.isArray(en[Et])?St=en[Et][Vt]:St=en[Et],pi=!0):Le.samples>0&&Se.useMultisampledRTT(Le)===!1?St=At.get(Le).__webglMultisampledFramebuffer:Array.isArray(en)?St=en[Vt]:St=en,se.copy(Le.viewport),ue.copy(Le.scissor),fe=Le.scissorTest}else se.copy(Ee).multiplyScalar(ye).floor(),ue.copy(ke).multiplyScalar(ye).floor(),fe=je;if(Vt!==0&&(St=gl),qe.bindFramebuffer(Be.FRAMEBUFFER,St)&&kt&&qe.drawBuffers(Le,St),qe.viewport(se),qe.scissor(ue),qe.setScissorTest(fe),pi){const Ci=At.get(Le.texture);Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Ci.__webglTexture,Vt)}else if(Ui){const Ci=At.get(Le.texture),yn=Et;Be.framebufferTextureLayer(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Ci.__webglTexture,Vt,yn)}else if(Le!==null&&Vt!==0){const Ci=At.get(Le.texture);Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_2D,Ci.__webglTexture,Vt)}ee=-1},this.readRenderTargetPixels=function(Le,Et,Vt,kt,St,pi,Ui){if(!(Le&&Le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ki=At.get(Le).__webglFramebuffer;if(Le.isWebGLCubeRenderTarget&&Ui!==void 0&&(ki=ki[Ui]),ki){qe.bindFramebuffer(Be.FRAMEBUFFER,ki);try{const Ci=Le.texture,yn=Ci.format,en=Ci.type;if(!Wt.textureFormatReadable(yn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Wt.textureTypeReadable(en)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Et>=0&&Et<=Le.width-kt&&Vt>=0&&Vt<=Le.height-St&&Be.readPixels(Et,Vt,kt,St,Ji.convert(yn),Ji.convert(en),pi)}finally{const Ci=ie!==null?At.get(ie).__webglFramebuffer:null;qe.bindFramebuffer(Be.FRAMEBUFFER,Ci)}}},this.readRenderTargetPixelsAsync=async function(Le,Et,Vt,kt,St,pi,Ui){if(!(Le&&Le.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ki=At.get(Le).__webglFramebuffer;if(Le.isWebGLCubeRenderTarget&&Ui!==void 0&&(ki=ki[Ui]),ki){const Ci=Le.texture,yn=Ci.format,en=Ci.type;if(!Wt.textureFormatReadable(yn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Wt.textureTypeReadable(en))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Et>=0&&Et<=Le.width-kt&&Vt>=0&&Vt<=Le.height-St){qe.bindFramebuffer(Be.FRAMEBUFFER,ki);const Qi=Be.createBuffer();Be.bindBuffer(Be.PIXEL_PACK_BUFFER,Qi),Be.bufferData(Be.PIXEL_PACK_BUFFER,pi.byteLength,Be.STREAM_READ),Be.readPixels(Et,Vt,kt,St,Ji.convert(yn),Ji.convert(en),0);const Wn=ie!==null?At.get(ie).__webglFramebuffer:null;qe.bindFramebuffer(Be.FRAMEBUFFER,Wn);const Cr=Be.fenceSync(Be.SYNC_GPU_COMMANDS_COMPLETE,0);return Be.flush(),await Dye(Be,Cr,4),Be.bindBuffer(Be.PIXEL_PACK_BUFFER,Qi),Be.getBufferSubData(Be.PIXEL_PACK_BUFFER,0,pi),Be.deleteBuffer(Qi),Be.deleteSync(Cr),pi}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Le,Et=null,Vt=0){Le.isTexture!==!0&&(NE("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Et=arguments[0]||null,Le=arguments[1]);const kt=Math.pow(2,-Vt),St=Math.floor(Le.image.width*kt),pi=Math.floor(Le.image.height*kt),Ui=Et!==null?Et.x:0,ki=Et!==null?Et.y:0;Se.setTexture2D(Le,0),Be.copyTexSubImage2D(Be.TEXTURE_2D,Vt,0,0,Ui,ki,St,pi),qe.unbindTexture()};const oa=Be.createFramebuffer(),uo=Be.createFramebuffer();this.copyTextureToTexture=function(Le,Et,Vt=null,kt=null,St=0,pi=null){Le.isTexture!==!0&&(NE("WebGLRenderer: copyTextureToTexture function signature has changed."),kt=arguments[0]||null,Le=arguments[1],Et=arguments[2],pi=arguments[3]||0,Vt=null),pi===null&&(St!==0?(NE("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),pi=St,St=0):pi=0);let Ui,ki,Ci,yn,en,Qi,Wn,Cr,Yr;const sr=Le.isCompressedTexture?Le.mipmaps[pi]:Le.image;if(Vt!==null)Ui=Vt.max.x-Vt.min.x,ki=Vt.max.y-Vt.min.y,Ci=Vt.isBox3?Vt.max.z-Vt.min.z:1,yn=Vt.min.x,en=Vt.min.y,Qi=Vt.isBox3?Vt.min.z:0;else{const Qs=Math.pow(2,-St);Ui=Math.floor(sr.width*Qs),ki=Math.floor(sr.height*Qs),Le.isDataArrayTexture?Ci=sr.depth:Le.isData3DTexture?Ci=Math.floor(sr.depth*Qs):Ci=1,yn=0,en=0,Qi=0}kt!==null?(Wn=kt.x,Cr=kt.y,Yr=kt.z):(Wn=0,Cr=0,Yr=0);const xn=Ji.convert(Et.format),Xi=Ji.convert(Et.type);let jn;Et.isData3DTexture?(Se.setTexture3D(Et,0),jn=Be.TEXTURE_3D):Et.isDataArrayTexture||Et.isCompressedArrayTexture?(Se.setTexture2DArray(Et,0),jn=Be.TEXTURE_2D_ARRAY):(Se.setTexture2D(Et,0),jn=Be.TEXTURE_2D),Be.pixelStorei(Be.UNPACK_FLIP_Y_WEBGL,Et.flipY),Be.pixelStorei(Be.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Et.premultiplyAlpha),Be.pixelStorei(Be.UNPACK_ALIGNMENT,Et.unpackAlignment);const ar=Be.getParameter(Be.UNPACK_ROW_LENGTH),Wo=Be.getParameter(Be.UNPACK_IMAGE_HEIGHT),Ua=Be.getParameter(Be.UNPACK_SKIP_PIXELS),fn=Be.getParameter(Be.UNPACK_SKIP_ROWS),Xa=Be.getParameter(Be.UNPACK_SKIP_IMAGES);Be.pixelStorei(Be.UNPACK_ROW_LENGTH,sr.width),Be.pixelStorei(Be.UNPACK_IMAGE_HEIGHT,sr.height),Be.pixelStorei(Be.UNPACK_SKIP_PIXELS,yn),Be.pixelStorei(Be.UNPACK_SKIP_ROWS,en),Be.pixelStorei(Be.UNPACK_SKIP_IMAGES,Qi);const Er=Le.isDataArrayTexture||Le.isData3DTexture,Ss=Et.isDataArrayTexture||Et.isData3DTexture;if(Le.isDepthTexture){const Qs=At.get(Le),ns=At.get(Et),So=At.get(Qs.__renderTarget),Ya=At.get(ns.__renderTarget);qe.bindFramebuffer(Be.READ_FRAMEBUFFER,So.__webglFramebuffer),qe.bindFramebuffer(Be.DRAW_FRAMEBUFFER,Ya.__webglFramebuffer);for(let aa=0;aa<Ci;aa++)Er&&(Be.framebufferTextureLayer(Be.READ_FRAMEBUFFER,Be.COLOR_ATTACHMENT0,At.get(Le).__webglTexture,St,Qi+aa),Be.framebufferTextureLayer(Be.DRAW_FRAMEBUFFER,Be.COLOR_ATTACHMENT0,At.get(Et).__webglTexture,pi,Yr+aa)),Be.blitFramebuffer(yn,en,Ui,ki,Wn,Cr,Ui,ki,Be.DEPTH_BUFFER_BIT,Be.NEAREST);qe.bindFramebuffer(Be.READ_FRAMEBUFFER,null),qe.bindFramebuffer(Be.DRAW_FRAMEBUFFER,null)}else if(St!==0||Le.isRenderTargetTexture||At.has(Le)){const Qs=At.get(Le),ns=At.get(Et);qe.bindFramebuffer(Be.READ_FRAMEBUFFER,oa),qe.bindFramebuffer(Be.DRAW_FRAMEBUFFER,uo);for(let So=0;So<Ci;So++)Er?Be.framebufferTextureLayer(Be.READ_FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Qs.__webglTexture,St,Qi+So):Be.framebufferTexture2D(Be.READ_FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_2D,Qs.__webglTexture,St),Ss?Be.framebufferTextureLayer(Be.DRAW_FRAMEBUFFER,Be.COLOR_ATTACHMENT0,ns.__webglTexture,pi,Yr+So):Be.framebufferTexture2D(Be.DRAW_FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_2D,ns.__webglTexture,pi),St!==0?Be.blitFramebuffer(yn,en,Ui,ki,Wn,Cr,Ui,ki,Be.COLOR_BUFFER_BIT,Be.NEAREST):Ss?Be.copyTexSubImage3D(jn,pi,Wn,Cr,Yr+So,yn,en,Ui,ki):Be.copyTexSubImage2D(jn,pi,Wn,Cr,yn,en,Ui,ki);qe.bindFramebuffer(Be.READ_FRAMEBUFFER,null),qe.bindFramebuffer(Be.DRAW_FRAMEBUFFER,null)}else Ss?Le.isDataTexture||Le.isData3DTexture?Be.texSubImage3D(jn,pi,Wn,Cr,Yr,Ui,ki,Ci,xn,Xi,sr.data):Et.isCompressedArrayTexture?Be.compressedTexSubImage3D(jn,pi,Wn,Cr,Yr,Ui,ki,Ci,xn,sr.data):Be.texSubImage3D(jn,pi,Wn,Cr,Yr,Ui,ki,Ci,xn,Xi,sr):Le.isDataTexture?Be.texSubImage2D(Be.TEXTURE_2D,pi,Wn,Cr,Ui,ki,xn,Xi,sr.data):Le.isCompressedTexture?Be.compressedTexSubImage2D(Be.TEXTURE_2D,pi,Wn,Cr,sr.width,sr.height,xn,sr.data):Be.texSubImage2D(Be.TEXTURE_2D,pi,Wn,Cr,Ui,ki,xn,Xi,sr);Be.pixelStorei(Be.UNPACK_ROW_LENGTH,ar),Be.pixelStorei(Be.UNPACK_IMAGE_HEIGHT,Wo),Be.pixelStorei(Be.UNPACK_SKIP_PIXELS,Ua),Be.pixelStorei(Be.UNPACK_SKIP_ROWS,fn),Be.pixelStorei(Be.UNPACK_SKIP_IMAGES,Xa),pi===0&&Et.generateMipmaps&&Be.generateMipmap(jn),qe.unbindTexture()},this.copyTextureToTexture3D=function(Le,Et,Vt=null,kt=null,St=0){return Le.isTexture!==!0&&(NE("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Vt=arguments[0]||null,kt=arguments[1]||null,Le=arguments[2],Et=arguments[3],St=arguments[4]||0),NE('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Le,Et,Vt,kt,St)},this.initRenderTarget=function(Le){At.get(Le).__webglFramebuffer===void 0&&Se.setupRenderTarget(Le)},this.initTexture=function(Le){Le.isCubeTexture?Se.setTextureCube(Le,0):Le.isData3DTexture?Se.setTexture3D(Le,0):Le.isDataArrayTexture||Le.isCompressedArrayTexture?Se.setTexture2DArray(Le,0):Se.setTexture2D(Le,0),qe.unbindTexture()},this.resetState=function(){j=0,J=0,ie=null,qe.reset(),Vi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Mg}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const i=this.getContext();i.drawingBufferColorspace=lr._getDrawingBufferColorSpace(e),i.unpackColorSpace=lr._getUnpackColorSpace()}}const FSe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Qk,AddEquation:Fy,AddOperation:cre,AdditiveAnimationBlendMode:Hz,AdditiveBlending:iH,AgXToneMapping:Uz,AlphaFormat:Lz,AlwaysCompare:bre,AlwaysDepth:MU,AlwaysStencilFunc:aH,AmbientLight:c7,AnimationAction:hse,AnimationClip:Uw,AnimationLoader:Ybe,AnimationMixer:dse,AnimationObjectGroup:b1e,AnimationUtils:Wbe,ArcCurve:kre,ArrayCamera:lse,ArrowHelper:V1e,AttachedBindMode:sH,Audio:cse,AudioAnalyser:h1e,AudioContext:d7,AudioListener:l1e,AudioLoader:s1e,AxesHelper:q1e,BackSide:mu,BasicDepthPacking:Are,BasicShadowMap:Gne,BatchedMesh:Mre,Bone:fS,BooleanKeyframeTrack:Vw,Box2:M1e,Box3:ia,Box3Helper:z1e,BoxGeometry:Og,BoxHelper:H1e,BufferAttribute:fr,BufferGeometry:Ln,BufferGeometryLoader:ose,ByteType:Nk,Cache:Uv,Camera:Kk,CameraHelper:N1e,CanvasTexture:Ure,CapsuleGeometry:tL,CatmullRomCurve3:Lre,CineonToneMapping:Fz,CircleGeometry:iL,ClampToEdgeWrapping:$o,Clock:A7,Color:Si,ColorKeyframeTrack:a7,ColorManagement:lr,CompressedArrayTexture:Dre,CompressedCubeTexture:Fre,CompressedTexture:Ov,CompressedTextureLoader:Jbe,ConeGeometry:nL,ConstantAlphaFactor:ore,ConstantColorFactor:rre,Controls:W1e,CubeCamera:tk,CubeReflectionMapping:Gv,CubeRefractionMapping:$y,CubeTexture:eM,CubeTextureLoader:Zbe,CubeUVReflectionMapping:TS,CubicBezierCurve:Zz,CubicBezierCurve3:Pre,CubicInterpolant:Zre,CullFaceBack:tH,CullFaceFront:zne,CullFaceFrontBack:Q0e,CullFaceNone:Hne,Curve:Df,CurvePath:Qre,CustomBlending:Vne,CustomToneMapping:ure,CylinderGeometry:RS,Cylindrical:T1e,Data3DTexture:ZT,DataArrayTexture:JT,DataTexture:Cf,DataTextureLoader:ise,DataUtils:FI,DecrementStencilOp:K0e,DecrementWrapStencilOp:Y0e,DefaultLoadingManager:qE,DepthFormat:fw,DepthStencilFormat:Tw,DepthTexture:Yz,DetachedBindMode:hre,DirectionalLight:oM,DirectionalLightHelper:Q1e,DiscreteInterpolant:ese,DodecahedronGeometry:rL,DoubleSide:Ll,DstAlphaFactor:Zne,DstColorFactor:tre,DynamicCopyUsage:dye,DynamicDrawUsage:oye,DynamicReadUsage:cye,EdgesGeometry:Nre,EllipseCurve:eL,EqualCompare:mre,EqualDepth:DU,EqualStencilFunc:tye,EquirectangularReflectionMapping:Bw,EquirectangularRefractionMapping:pT,Euler:hl,EventDispatcher:FA,ExtrudeGeometry:oL,FileLoader:Al,Float16BufferAttribute:ebe,Float32BufferAttribute:Ni,FloatType:ra,Fog:Jk,FogExp2:Yk,FramebufferTexture:mbe,FrontSide:If,Frustum:iM,GLBufferAttribute:I1e,GLSL1:pye,GLSL3:lH,GreaterCompare:_re,GreaterDepth:UU,GreaterEqualCompare:yre,GreaterEqualDepth:FU,GreaterEqualStencilFunc:sye,GreaterStencilFunc:nye,GridHelper:P1e,Group:Ap,HalfFloatType:Ol,HemisphereLight:nse,HemisphereLightHelper:L1e,IcosahedronGeometry:aL,ImageBitmapLoader:ase,ImageLoader:RT,ImageUtils:Cre,IncrementStencilOp:j0e,IncrementWrapStencilOp:X0e,InstancedBufferAttribute:jy,InstancedBufferGeometry:h7,InstancedInterleavedBuffer:B1e,InstancedMesh:Kz,Int16BufferAttribute:Jye,Int32BufferAttribute:Zye,Int8BufferAttribute:Kye,IntType:XT,InterleavedBuffer:tM,InterleavedBufferAttribute:Wy,Interpolant:FS,InterpolateDiscrete:Mw,InterpolateLinear:Rw,InterpolateSmooth:tU,InvertStencilOp:J0e,KeepStencilOp:X1,KeyframeTrack:Qg,LOD:Tre,LatheGeometry:nM,Layers:AS,LessCompare:gre,LessDepth:RU,LessEqualCompare:Vz,LessEqualDepth:Sw,LessEqualStencilFunc:iye,LessStencilFunc:eye,Light:nb,LightProbe:u7,Line:Mf,Line3:R1e,LineBasicMaterial:Ac,LineCurve:e7,LineCurve3:Ore,LineDashedMaterial:Xre,LineLoop:Xz,LineSegments:mp,LinearFilter:Or,LinearInterpolant:o7,LinearMipMapLinearFilter:oH,LinearMipMapNearestFilter:z0e,LinearMipmapLinearFilter:Ju,LinearMipmapNearestFilter:Lv,LinearSRGBColorSpace:Co,LinearToneMapping:Rz,LinearTransfer:xT,Loader:sa,LoaderUtils:Qv,LoadingManager:fL,LoopOnce:hS,LoopPingPong:bT,LoopRepeat:gw,LuminanceAlphaFormat:Qz,LuminanceFormat:Oz,MOUSE:j1,Material:dl,MaterialLoader:_L,MathUtils:uc,Matrix2:_7,Matrix3:nr,Matrix4:Ki,MaxEquation:jne,Mesh:Dr,MeshBasicMaterial:Pc,MeshDepthMaterial:sM,MeshDistanceMaterial:pL,MeshLambertMaterial:r7,MeshMatcapMaterial:Kre,MeshNormalMaterial:jre,MeshPhongMaterial:nS,MeshPhysicalMaterial:Ff,MeshStandardMaterial:Fw,MeshToonMaterial:Wre,MinEquation:Wne,MirroredRepeatWrapping:Vv,MixOperation:lre,MultiplyBlending:rH,MultiplyOperation:KT,NearestFilter:Da,NearestMipMapLinearFilter:H0e,NearestMipMapNearestFilter:N0e,NearestMipmapLinearFilter:qm,NearestMipmapNearestFilter:zw,NeutralToneMapping:aS,NeverCompare:fre,NeverDepth:TU,NeverStencilFunc:Z0e,NoBlending:Dg,NoColorSpace:dp,NoToneMapping:xf,NormalAnimationBlendMode:$k,NormalBlending:pw,NotEqualCompare:vre,NotEqualDepth:kU,NotEqualStencilFunc:rye,NumberKeyframeTrack:Ky,Object3D:xr,ObjectLoader:n1e,ObjectSpaceNormalMap:pre,OctahedronGeometry:rM,OneFactor:Xne,OneMinusConstantAlphaFactor:are,OneMinusConstantColorFactor:sre,OneMinusDstAlphaFactor:ere,OneMinusDstColorFactor:ire,OneMinusSrcAlphaFactor:IU,OneMinusSrcColorFactor:Jne,OrthographicCamera:DA,PCFShadowMap:Ok,PCFSoftShadowMap:WI,PMREMGenerator:fH,Path:BT,PerspectiveCamera:xo,Plane:Iv,PlaneGeometry:UA,PlaneHelper:G1e,PointLight:gS,PointLightHelper:U1e,Points:iS,PointsMaterial:Ny,PolarGridHelper:O1e,PolyhedronGeometry:ib,PositionalAudio:u1e,PropertyBinding:Rr,PropertyMixer:use,QuadraticBezierCurve:t7,QuadraticBezierCurve3:i7,Quaternion:Ys,QuaternionKeyframeTrack:qv,QuaternionLinearInterpolant:tse,RED_GREEN_RGTC2_Format:JU,RED_RGTC1_Format:Nz,REVISION:jT,RGBADepthPacking:Gz,RGBAFormat:lo,RGBAIntegerFormat:qk,RGBA_ASTC_10x10_Format:WU,RGBA_ASTC_10x5_Format:VU,RGBA_ASTC_10x6_Format:qU,RGBA_ASTC_10x8_Format:$U,RGBA_ASTC_12x10_Format:jU,RGBA_ASTC_12x12_Format:KU,RGBA_ASTC_4x4_Format:cS,RGBA_ASTC_5x4_Format:OU,RGBA_ASTC_5x5_Format:QU,RGBA_ASTC_6x5_Format:NU,RGBA_ASTC_6x6_Format:uS,RGBA_ASTC_8x5_Format:HU,RGBA_ASTC_8x6_Format:zU,RGBA_ASTC_8x8_Format:GU,RGBA_BPTC_Format:eS,RGBA_ETC2_EAC_Format:vT,RGBA_PVRTC_2BPPV1_Format:PU,RGBA_PVRTC_4BPPV1_Format:gT,RGBA_S3TC_DXT1_Format:JE,RGBA_S3TC_DXT3_Format:KI,RGBA_S3TC_DXT5_Format:ZE,RGBDepthPacking:V0e,RGBFormat:Pz,RGBIntegerFormat:G0e,RGB_BPTC_SIGNED_Format:XU,RGB_BPTC_UNSIGNED_Format:yT,RGB_ETC1_Format:mT,RGB_ETC2_Format:_T,RGB_PVRTC_2BPPV1_Format:LU,RGB_PVRTC_4BPPV1_Format:fT,RGB_S3TC_DXT1_Format:jI,RGDepthPacking:q0e,RGFormat:Oy,RGIntegerFormat:Vk,RawShaderMaterial:$re,Ray:Gw,Raycaster:m7,RectAreaLight:rse,RedFormat:Fv,RedIntegerFormat:YT,ReinhardToneMapping:Dz,RenderTarget:Wk,RenderTarget3D:x1e,RenderTargetArray:C1e,RepeatWrapping:Vd,ReplaceStencilOp:W0e,ReverseSubtractEquation:$ne,RingGeometry:lL,SIGNED_RED_GREEN_RGTC2_Format:ZU,SIGNED_RED_RGTC1_Format:YU,SRGBColorSpace:rr,SRGBTransfer:oo,Scene:Tf,ShaderChunk:Tr,ShaderLib:Ig,ShaderMaterial:qh,ShadowMaterial:qre,Shape:_w,ShapeGeometry:cL,ShapePath:$1e,ShapeUtils:Fg,ShortType:Hk,Skeleton:MS,SkeletonHelper:F1e,SkinnedMesh:Zk,Source:Qy,Sphere:dc,SphereGeometry:DS,Spherical:vw,SphericalHarmonics3:sse,SplineCurve:n7,SpotLight:mL,SpotLightHelper:D1e,Sprite:Ire,SpriteMaterial:jz,SrcAlphaFactor:BU,SrcAlphaSaturateFactor:nre,SrcColorFactor:Yne,StaticCopyUsage:hye,StaticDrawUsage:CT,StaticReadUsage:lye,StereoCamera:o1e,StreamCopyUsage:Aye,StreamDrawUsage:aye,StreamReadUsage:uye,StringKeyframeTrack:qw,SubtractEquation:qne,SubtractiveBlending:nH,TOUCH:K1,TangentSpaceNormalMap:tb,TetrahedronGeometry:uL,Texture:Js,TextureLoader:gL,TextureUtils:J1e,TorusGeometry:hL,TorusKnotGeometry:dL,Triangle:zh,TriangleFanDrawMode:ek,TriangleStripDrawMode:zz,TrianglesDrawMode:dre,TubeGeometry:AL,UVMapping:qy,Uint16BufferAttribute:jk,Uint32BufferAttribute:$z,Uint8BufferAttribute:Xye,Uint8ClampedBufferAttribute:Yye,Uniform:g7,UniformsGroup:S1e,UniformsLib:Zi,UniformsUtils:Wz,UnsignedByteType:$a,UnsignedInt248Type:Iw,UnsignedInt5999Type:kz,UnsignedIntType:jm,UnsignedShort4444Type:zk,UnsignedShort5551Type:Gk,UnsignedShortType:lS,VSMShadowMap:Sg,Vector2:ci,Vector3:Fe,Vector4:Vr,VectorKeyframeTrack:Xy,VideoTexture:Rre,WebGL3DRenderTarget:Qye,WebGLArrayRenderTarget:Oye,WebGLCoordinateSystem:Mg,WebGLCubeRenderTarget:Xk,WebGLRenderTarget:qd,WebGLRenderer:yL,WebGLUtils:vse,WebGPUCoordinateSystem:ET,WireframeGeometry:Vre,WrapAroundEnding:wT,ZeroCurvatureEnding:ow,ZeroFactor:Kne,ZeroSlopeEnding:aw,ZeroStencilOp:$0e,createCanvasElement:xre},Symbol.toStringTag,{value:"Module"}));/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Pl=Uint8Array,pp=Uint16Array,y7=Int32Array,bL=new Pl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wL=new Pl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mH=new Pl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yse=function(a,e){for(var i=new pp(31),r=0;r<31;++r)i[r]=e+=1<<a[r-1];for(var s=new y7(i[30]),r=1;r<30;++r)for(var l=i[r];l<i[r+1];++l)s[l]=l-i[r]<<5|r;return{b:i,r:s}},bse=yse(bL,2),wse=bse.b,_H=bse.r;wse[28]=258,_H[258]=28;var xse=yse(wL,0),USe=xse.b,eY=xse.r,vH=new pp(32768);for(var na=0;na<32768;++na){var Cy=(na&43690)>>1|(na&21845)<<1;Cy=(Cy&52428)>>2|(Cy&13107)<<2,Cy=(Cy&61680)>>4|(Cy&3855)<<4,vH[na]=((Cy&65280)>>8|(Cy&255)<<8)>>1}var Wm=function(a,e,i){for(var r=a.length,s=0,l=new pp(e);s<r;++s)a[s]&&++l[a[s]-1];var u=new pp(e);for(s=1;s<e;++s)u[s]=u[s-1]+l[s-1]<<1;var A;if(i){A=new pp(1<<e);var g=15-e;for(s=0;s<r;++s)if(a[s])for(var _=s<<4|a[s],b=e-a[s],x=u[a[s]-1]++<<b,C=x|(1<<b)-1;x<=C;++x)A[vH[x]>>g]=_}else for(A=new pp(r),s=0;s<r;++s)a[s]&&(A[s]=vH[u[a[s]-1]++]>>15-a[s]);return A},Yy=new Pl(288);for(var na=0;na<144;++na)Yy[na]=8;for(var na=144;na<256;++na)Yy[na]=9;for(var na=256;na<280;++na)Yy[na]=7;for(var na=280;na<288;++na)Yy[na]=8;var DT=new Pl(32);for(var na=0;na<32;++na)DT[na]=5;var kSe=Wm(Yy,9,0),LSe=Wm(Yy,9,1),PSe=Wm(DT,5,0),OSe=Wm(DT,5,1),F6=function(a){for(var e=a[0],i=1;i<a.length;++i)a[i]>e&&(e=a[i]);return e},xg=function(a,e,i){var r=e/8|0;return(a[r]|a[r+1]<<8)>>(e&7)&i},U6=function(a,e){var i=e/8|0;return(a[i]|a[i+1]<<8|a[i+2]<<16)>>(e&7)},b7=function(a){return(a+7)/8|0},w7=function(a,e,i){return(i==null||i>a.length)&&(i=a.length),new Pl(a.subarray(e,i))},QSe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],TA=function(a,e,i){var r=new Error(e||QSe[a]);if(r.code=a,Error.captureStackTrace&&Error.captureStackTrace(r,TA),!i)throw r;return r},NSe=function(a,e,i,r){var s=a.length,l=0;if(!s||e.f&&!e.l)return i||new Pl(0);var u=!i,A=u||e.i!=2,g=e.i;u&&(i=new Pl(s*3));var _=function(ei){var it=i.length;if(ei>it){var Dt=new Pl(Math.max(it*2,ei));Dt.set(i),i=Dt}},b=e.f||0,x=e.p||0,C=e.b||0,I=e.l,F=e.d,L=e.m,U=e.n,P=s*8;do{if(!I){b=xg(a,x,1);var H=xg(a,x+1,3);if(x+=3,H)if(H==1)I=LSe,F=OSe,L=9,U=5;else if(H==2){var j=xg(a,x,31)+257,J=xg(a,x+10,15)+4,ie=j+xg(a,x+5,31)+1;x+=14;for(var ee=new Pl(ie),re=new Pl(19),se=0;se<J;++se)re[mH[se]]=xg(a,x+se*3,7);x+=J*3;for(var ue=F6(re),fe=(1<<ue)-1,pe=Wm(re,ue,1),se=0;se<ie;){var xe=pe[xg(a,x,fe)];x+=xe&15;var N=xe>>4;if(N<16)ee[se++]=N;else{var ce=0,_e=0;for(N==16?(_e=3+xg(a,x,3),x+=2,ce=ee[se-1]):N==17?(_e=3+xg(a,x,7),x+=3):N==18&&(_e=11+xg(a,x,127),x+=7);_e--;)ee[se++]=ce}}var ye=ee.subarray(0,j),Oe=ee.subarray(j);L=F6(ye),U=F6(Oe),I=Wm(ye,L,1),F=Wm(Oe,U,1)}else TA(1);else{var N=b7(x)+4,z=a[N-4]|a[N-3]<<8,W=N+z;if(W>s){g&&TA(0);break}A&&_(C+z),i.set(a.subarray(N,W),C),e.b=C+=z,e.p=x=W*8,e.f=b;continue}if(x>P){g&&TA(0);break}}A&&_(C+131072);for(var ge=(1<<L)-1,Ee=(1<<U)-1,ke=x;;ke=x){var ce=I[U6(a,x)&ge],je=ce>>4;if(x+=ce&15,x>P){g&&TA(0);break}if(ce||TA(2),je<256)i[C++]=je;else if(je==256){ke=x,I=null;break}else{var Ie=je-254;if(je>264){var se=je-257,ze=bL[se];Ie=xg(a,x,(1<<ze)-1)+wse[se],x+=ze}var ht=F[U6(a,x)&Ee],lt=ht>>4;ht||TA(3),x+=ht&15;var Oe=USe[lt];if(lt>3){var ze=wL[lt];Oe+=U6(a,x)&(1<<ze)-1,x+=ze}if(x>P){g&&TA(0);break}A&&_(C+131072);var yt=C+Ie;if(C<Oe){var Nt=l-Oe,zt=Math.min(Oe,yt);for(Nt+C<0&&TA(3);C<zt;++C)i[C]=r[Nt+C]}for(;C<yt;++C)i[C]=i[C-Oe]}}e.l=I,e.p=ke,e.b=C,e.f=b,I&&(b=1,e.m=L,e.d=F,e.n=U)}while(!b);return C!=i.length&&u?w7(i,0,C):i.subarray(0,C)},fv=function(a,e,i){i<<=e&7;var r=e/8|0;a[r]|=i,a[r+1]|=i>>8},sI=function(a,e,i){i<<=e&7;var r=e/8|0;a[r]|=i,a[r+1]|=i>>8,a[r+2]|=i>>16},k6=function(a,e){for(var i=[],r=0;r<a.length;++r)a[r]&&i.push({s:r,f:a[r]});var s=i.length,l=i.slice();if(!s)return{t:Ese,l:0};if(s==1){var u=new Pl(i[0].s+1);return u[i[0].s]=1,{t:u,l:1}}i.sort(function(W,j){return W.f-j.f}),i.push({s:-1,f:25001});var A=i[0],g=i[1],_=0,b=1,x=2;for(i[0]={s:-1,f:A.f+g.f,l:A,r:g};b!=s-1;)A=i[i[_].f<i[x].f?_++:x++],g=i[_!=b&&i[_].f<i[x].f?_++:x++],i[b++]={s:-1,f:A.f+g.f,l:A,r:g};for(var C=l[0].s,r=1;r<s;++r)l[r].s>C&&(C=l[r].s);var I=new pp(C+1),F=yH(i[b-1],I,0);if(F>e){var r=0,L=0,U=F-e,P=1<<U;for(l.sort(function(j,J){return I[J.s]-I[j.s]||j.f-J.f});r<s;++r){var H=l[r].s;if(I[H]>e)L+=P-(1<<F-I[H]),I[H]=e;else break}for(L>>=U;L>0;){var N=l[r].s;I[N]<e?L-=1<<e-I[N]++-1:++r}for(;r>=0&&L;--r){var z=l[r].s;I[z]==e&&(--I[z],++L)}F=e}return{t:new Pl(I),l:F}},yH=function(a,e,i){return a.s==-1?Math.max(yH(a.l,e,i+1),yH(a.r,e,i+1)):e[a.s]=i},tY=function(a){for(var e=a.length;e&&!a[--e];);for(var i=new pp(++e),r=0,s=a[0],l=1,u=function(g){i[r++]=g},A=1;A<=e;++A)if(a[A]==s&&A!=e)++l;else{if(!s&&l>2){for(;l>138;l-=138)u(32754);l>2&&(u(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(u(s),--l;l>6;l-=6)u(8304);l>2&&(u(l-3<<5|8208),l=0)}for(;l--;)u(s);l=1,s=a[A]}return{c:i.subarray(0,r),n:e}},oI=function(a,e){for(var i=0,r=0;r<e.length;++r)i+=a[r]*e[r];return i},Cse=function(a,e,i){var r=i.length,s=b7(e+2);a[s]=r&255,a[s+1]=r>>8,a[s+2]=a[s]^255,a[s+3]=a[s+1]^255;for(var l=0;l<r;++l)a[s+l+4]=i[l];return(s+4+r)*8},iY=function(a,e,i,r,s,l,u,A,g,_,b){fv(e,b++,i),++s[256];for(var x=k6(s,15),C=x.t,I=x.l,F=k6(l,15),L=F.t,U=F.l,P=tY(C),H=P.c,N=P.n,z=tY(L),W=z.c,j=z.n,J=new pp(19),ie=0;ie<H.length;++ie)++J[H[ie]&31];for(var ie=0;ie<W.length;++ie)++J[W[ie]&31];for(var ee=k6(J,7),re=ee.t,se=ee.l,ue=19;ue>4&&!re[mH[ue-1]];--ue);var fe=_+5<<3,pe=oI(s,Yy)+oI(l,DT)+u,xe=oI(s,C)+oI(l,L)+u+14+3*ue+oI(J,re)+2*J[16]+3*J[17]+7*J[18];if(g>=0&&fe<=pe&&fe<=xe)return Cse(e,b,a.subarray(g,g+_));var ce,_e,ye,Oe;if(fv(e,b,1+(xe<pe)),b+=2,xe<pe){ce=Wm(C,I,0),_e=C,ye=Wm(L,U,0),Oe=L;var ge=Wm(re,se,0);fv(e,b,N-257),fv(e,b+5,j-1),fv(e,b+10,ue-4),b+=14;for(var ie=0;ie<ue;++ie)fv(e,b+3*ie,re[mH[ie]]);b+=3*ue;for(var Ee=[H,W],ke=0;ke<2;++ke)for(var je=Ee[ke],ie=0;ie<je.length;++ie){var Ie=je[ie]&31;fv(e,b,ge[Ie]),b+=re[Ie],Ie>15&&(fv(e,b,je[ie]>>5&127),b+=je[ie]>>12)}}else ce=kSe,_e=Yy,ye=PSe,Oe=DT;for(var ie=0;ie<A;++ie){var ze=r[ie];if(ze>255){var Ie=ze>>18&31;sI(e,b,ce[Ie+257]),b+=_e[Ie+257],Ie>7&&(fv(e,b,ze>>23&31),b+=bL[Ie]);var ht=ze&31;sI(e,b,ye[ht]),b+=Oe[ht],ht>3&&(sI(e,b,ze>>5&8191),b+=wL[ht])}else sI(e,b,ce[ze]),b+=_e[ze]}return sI(e,b,ce[256]),b+_e[256]},HSe=new y7([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ese=new Pl(0),zSe=function(a,e,i,r,s,l){var u=l.z||a.length,A=new Pl(r+u+5*(1+Math.ceil(u/7e3))+s),g=A.subarray(r,A.length-s),_=l.l,b=(l.r||0)&7;if(e){b&&(g[0]=l.r>>3);for(var x=HSe[e-1],C=x>>13,I=x&8191,F=(1<<i)-1,L=l.p||new pp(32768),U=l.h||new pp(F+1),P=Math.ceil(i/3),H=2*P,N=function(Be){return(a[Be]^a[Be+1]<<P^a[Be+2]<<H)&F},z=new y7(25e3),W=new pp(288),j=new pp(32),J=0,ie=0,ee=l.i||0,re=0,se=l.w||0,ue=0;ee+2<u;++ee){var fe=N(ee),pe=ee&32767,xe=U[fe];if(L[pe]=xe,U[fe]=pe,se<=ee){var ce=u-ee;if((J>7e3||re>24576)&&(ce>423||!_)){b=iY(a,g,0,z,W,j,ie,re,ue,ee-ue,b),re=J=ie=0,ue=ee;for(var _e=0;_e<286;++_e)W[_e]=0;for(var _e=0;_e<30;++_e)j[_e]=0}var ye=2,Oe=0,ge=I,Ee=pe-xe&32767;if(ce>2&&fe==N(ee-Ee))for(var ke=Math.min(C,ce)-1,je=Math.min(32767,ee),Ie=Math.min(258,ce);Ee<=je&&--ge&&pe!=xe;){if(a[ee+ye]==a[ee+ye-Ee]){for(var ze=0;ze<Ie&&a[ee+ze]==a[ee+ze-Ee];++ze);if(ze>ye){if(ye=ze,Oe=Ee,ze>ke)break;for(var ht=Math.min(Ee,ze-2),lt=0,_e=0;_e<ht;++_e){var yt=ee-Ee+_e&32767,Nt=L[yt],zt=yt-Nt&32767;zt>lt&&(lt=zt,xe=yt)}}}pe=xe,xe=L[pe],Ee+=pe-xe&32767}if(Oe){z[re++]=268435456|_H[ye]<<18|eY[Oe];var ei=_H[ye]&31,it=eY[Oe]&31;ie+=bL[ei]+wL[it],++W[257+ei],++j[it],se=ee+ye,++J}else z[re++]=a[ee],++W[a[ee]]}}for(ee=Math.max(ee,se);ee<u;++ee)z[re++]=a[ee],++W[a[ee]];b=iY(a,g,_,z,W,j,ie,re,ue,ee-ue,b),_||(l.r=b&7|g[b/8|0]<<3,b-=7,l.h=U,l.p=L,l.i=ee,l.w=se)}else{for(var ee=l.w||0;ee<u+_;ee+=65535){var Dt=ee+65535;Dt>=u&&(g[b/8|0]=_,Dt=u),b=Cse(g,b+1,a.subarray(ee,Dt))}l.i=u}return w7(A,0,r+b7(b)+s)},GSe=function(){for(var a=new Int32Array(256),e=0;e<256;++e){for(var i=e,r=9;--r;)i=(i&1&&-306674912)^i>>>1;a[e]=i}return a}(),VSe=function(){var a=-1;return{p:function(e){for(var i=a,r=0;r<e.length;++r)i=GSe[i&255^e[r]]^i>>>8;a=i},d:function(){return~a}}},qSe=function(a,e,i,r,s){if(!s&&(s={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),u=new Pl(l.length+a.length);u.set(l),u.set(a,l.length),a=u,s.w=l.length}return zSe(a,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(a.length)))*1.5):20:12+e.mem,i,r,s)},Sse=function(a,e){var i={};for(var r in a)i[r]=a[r];for(var r in e)i[r]=e[r];return i},Xu=function(a,e,i){for(;i;++e)a[e]=i,i>>>=8},$Se=function(a,e){return((a[0]&15)!=8||a[0]>>4>7||(a[0]<<8|a[1])%31)&&TA(6,"invalid zlib data"),(a[1]>>5&1)==1&&TA(6,"invalid zlib data: "+(a[1]&32?"need":"unexpected")+" dictionary"),(a[1]>>3&4)+2};function WSe(a,e){return qSe(a,e||{},0,0)}function jSe(a,e){return NSe(a.subarray($Se(a),-4),{i:2},e,e)}var Bse=function(a,e,i,r){for(var s in a){var l=a[s],u=e+s,A=r;Array.isArray(l)&&(A=Sse(r,l[1]),l=l[0]),l instanceof Pl?i[u]=[l,A]:(i[u+="/"]=[new Pl(0),A],Bse(l,u,i,r))}},nY=typeof TextEncoder<"u"&&new TextEncoder,KSe=typeof TextDecoder<"u"&&new TextDecoder,XSe=0;try{KSe.decode(Ese,{stream:!0}),XSe=1}catch{}function sk(a,e){var i;if(nY)return nY.encode(a);for(var r=a.length,s=new Pl(a.length+(a.length>>1)),l=0,u=function(_){s[l++]=_},i=0;i<r;++i){if(l+5>s.length){var A=new Pl(l+8+(r-i<<1));A.set(s),s=A}var g=a.charCodeAt(i);g<128||e?u(g):g<2048?(u(192|g>>6),u(128|g&63)):g>55295&&g<57344?(g=65536+(g&1047552)|a.charCodeAt(++i)&1023,u(240|g>>18),u(128|g>>12&63),u(128|g>>6&63),u(128|g&63)):(u(224|g>>12),u(128|g>>6&63),u(128|g&63))}return w7(s,0,l)}var bH=function(a){var e=0;if(a)for(var i in a){var r=a[i].length;r>65535&&TA(9),e+=r+4}return e},rY=function(a,e,i,r,s,l,u,A){var g=r.length,_=i.extra,b=A&&A.length,x=bH(_);Xu(a,e,u!=null?33639248:67324752),e+=4,u!=null&&(a[e++]=20,a[e++]=i.os),a[e]=20,e+=2,a[e++]=i.flag<<1|(l<0&&8),a[e++]=s&&8,a[e++]=i.compression&255,a[e++]=i.compression>>8;var C=new Date(i.mtime==null?Date.now():i.mtime),I=C.getFullYear()-1980;if((I<0||I>119)&&TA(10),Xu(a,e,I<<25|C.getMonth()+1<<21|C.getDate()<<16|C.getHours()<<11|C.getMinutes()<<5|C.getSeconds()>>1),e+=4,l!=-1&&(Xu(a,e,i.crc),Xu(a,e+4,l<0?-l-2:l),Xu(a,e+8,i.size)),Xu(a,e+12,g),Xu(a,e+14,x),e+=16,u!=null&&(Xu(a,e,b),Xu(a,e+6,i.attrs),Xu(a,e+10,u),e+=14),a.set(r,e),e+=g,x)for(var F in _){var L=_[F],U=L.length;Xu(a,e,+F),Xu(a,e+2,U),a.set(L,e+4),e+=4+U}return b&&(a.set(A,e),e+=b),e},YSe=function(a,e,i,r,s){Xu(a,e,101010256),Xu(a,e+8,i),Xu(a,e+10,i),Xu(a,e+12,r),Xu(a,e+16,s)};function JSe(a,e){e||(e={});var i={},r=[];Bse(a,"",i,e);var s=0,l=0;for(var u in i){var A=i[u],g=A[0],_=A[1],b=_.level==0?0:8,x=sk(u),C=x.length,I=_.comment,F=I&&sk(I),L=F&&F.length,U=bH(_.extra);C>65535&&TA(11);var P=b?WSe(g,_):g,H=P.length,N=VSe();N.p(g),r.push(Sse(_,{size:g.length,crc:N.d(),c:P,f:x,m:F,u:C!=u.length||F&&I.length!=L,o:s,compression:b})),s+=30+C+U+H,l+=76+2*(C+U)+(L||0)+H}for(var z=new Pl(l+22),W=s,j=l-s,J=0;J<r.length;++J){var x=r[J];rY(z,x.o,x,x.f,x.u,x.c.length);var ie=30+x.f.length+bH(x.extra);z.set(x.c,x.o+ie),rY(z,s,x,x.f,x.u,x.c.length,x.o,x.m),s+=16+ie+(x.m?x.m.length:0)}return YSe(z,s,r.length,j,W),z}function Ise(a,e,i){const r=i.length-a-1;if(e>=i[r])return r-1;if(e<=i[a])return a;let s=a,l=r,u=Math.floor((s+l)/2);for(;e<i[u]||e>=i[u+1];)e<i[u]?l=u:s=u,u=Math.floor((s+l)/2);return u}function ZSe(a,e,i,r){const s=[],l=[],u=[];s[0]=1;for(let A=1;A<=i;++A){l[A]=e-r[a+1-A],u[A]=r[a+A]-e;let g=0;for(let _=0;_<A;++_){const b=u[_+1],x=l[A-_],C=s[_]/(b+x);s[_]=g+b*C,g=x*C}s[A]=g}return s}function eBe(a,e,i,r){const s=Ise(a,r,e),l=ZSe(s,r,a,e),u=new Vr(0,0,0,0);for(let A=0;A<=a;++A){const g=i[s-a+A],_=l[A],b=g.w*_;u.x+=g.x*b,u.y+=g.y*b,u.z+=g.z*b,u.w+=g.w*_}return u}function tBe(a,e,i,r,s){const l=[];for(let x=0;x<=i;++x)l[x]=0;const u=[];for(let x=0;x<=r;++x)u[x]=l.slice(0);const A=[];for(let x=0;x<=i;++x)A[x]=l.slice(0);A[0][0]=1;const g=l.slice(0),_=l.slice(0);for(let x=1;x<=i;++x){g[x]=e-s[a+1-x],_[x]=s[a+x]-e;let C=0;for(let I=0;I<x;++I){const F=_[I+1],L=g[x-I];A[x][I]=F+L;const U=A[I][x-1]/A[x][I];A[I][x]=C+F*U,C=L*U}A[x][x]=C}for(let x=0;x<=i;++x)u[0][x]=A[x][i];for(let x=0;x<=i;++x){let C=0,I=1;const F=[];for(let L=0;L<=i;++L)F[L]=l.slice(0);F[0][0]=1;for(let L=1;L<=r;++L){let U=0;const P=x-L,H=i-L;x>=L&&(F[I][0]=F[C][0]/A[H+1][P],U=F[I][0]*A[P][H]);const N=P>=-1?1:-P,z=x-1<=H?L-1:i-x;for(let j=N;j<=z;++j)F[I][j]=(F[C][j]-F[C][j-1])/A[H+1][P+j],U+=F[I][j]*A[P+j][H];x<=H&&(F[I][L]=-F[C][L-1]/A[H+1][x],U+=F[I][L]*A[x][H]),u[L][x]=U;const W=C;C=I,I=W}}let b=i;for(let x=1;x<=r;++x){for(let C=0;C<=i;++C)u[x][C]*=b;b*=i-x}return u}function iBe(a,e,i,r,s){const l=s<a?s:a,u=[],A=Ise(a,r,e),g=tBe(A,r,a,l,e),_=[];for(let b=0;b<i.length;++b){const x=i[b].clone(),C=x.w;x.x*=C,x.y*=C,x.z*=C,_[b]=x}for(let b=0;b<=l;++b){const x=_[A-a].clone().multiplyScalar(g[b][0]);for(let C=1;C<=a;++C)x.add(_[A-a+C].clone().multiplyScalar(g[b][C]));u[b]=x}for(let b=l+1;b<=s+1;++b)u[b]=new Vr(0,0,0);return u}function nBe(a,e){let i=1;for(let s=2;s<=a;++s)i*=s;let r=1;for(let s=2;s<=e;++s)r*=s;for(let s=2;s<=a-e;++s)r*=s;return i/r}function rBe(a){const e=a.length,i=[],r=[];for(let l=0;l<e;++l){const u=a[l];i[l]=new Fe(u.x,u.y,u.z),r[l]=u.w}const s=[];for(let l=0;l<e;++l){const u=i[l].clone();for(let A=1;A<=l;++A)u.sub(s[l-A].clone().multiplyScalar(nBe(l,A)*r[A]));s[l]=u.divideScalar(r[0])}return s}function sBe(a,e,i,r,s){const l=iBe(a,e,i,r,s);return rBe(l)}class oBe extends Df{constructor(e,i,r,s,l){super();const u=i?i.length-1:0,A=r?r.length:0;this.degree=e,this.knots=i,this.controlPoints=[],this.startKnot=s||0,this.endKnot=l||u;for(let g=0;g<A;++g){const _=r[g];this.controlPoints[g]=new Vr(_.x,_.y,_.z,_.w)}}getPoint(e,i=new Fe){const r=i,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),l=eBe(this.degree,this.knots,this.controlPoints,s);return l.w!==1&&l.divideScalar(l.w),r.set(l.x,l.y,l.z)}getTangent(e,i=new Fe){const r=i,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),l=sBe(this.degree,this.knots,this.controlPoints,s,1);return r.copy(l[1]).normalize(),r}toJSON(){const e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(i=>i.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(i=>new Vr(i[0],i[1],i[2],i[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}let Wr,kl,kd;class aBe extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=l.path===""?Qv.extractUrlBase(e):l.path,A=new Al(this.manager);A.setPath(l.path),A.setResponseType("arraybuffer"),A.setRequestHeader(l.requestHeader),A.setWithCredentials(l.withCredentials),A.load(e,function(g){try{i(l.parse(g,u))}catch(_){s?s(_):console.error(_),l.manager.itemError(e)}},r,s)}parse(e,i){if(ABe(e))Wr=new dBe().parse(e);else{const s=Rse(e);if(!pBe(s))throw new Error("THREE.FBXLoader: Unknown format.");if(oY(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+oY(s));Wr=new hBe().parse(s)}const r=new gL(this.manager).setPath(this.resourcePath||i).setCrossOrigin(this.crossOrigin);return new lBe(r,this.manager).parse(Wr)}}class lBe{constructor(e,i){this.textureLoader=e,this.manager=i}parse(){kl=this.parseConnections();const e=this.parseImages(),i=this.parseTextures(e),r=this.parseMaterials(i),s=this.parseDeformers(),l=new cBe().parse(s);return this.parseScene(s,l,r),kd}parseConnections(){const e=new Map;return"Connections"in Wr&&Wr.Connections.connections.forEach(function(r){const s=r[0],l=r[1],u=r[2];e.has(s)||e.set(s,{parents:[],children:[]});const A={ID:l,relationship:u};e.get(s).parents.push(A),e.has(l)||e.set(l,{parents:[],children:[]});const g={ID:s,relationship:u};e.get(l).children.push(g)}),e}parseImages(){const e={},i={};if("Video"in Wr.Objects){const r=Wr.Objects.Video;for(const s in r){const l=r[s],u=parseInt(s);if(e[u]=l.RelativeFilename||l.Filename,"Content"in l){const A=l.Content instanceof ArrayBuffer&&l.Content.byteLength>0,g=typeof l.Content=="string"&&l.Content!=="";if(A||g){const _=this.parseImage(r[s]);i[l.RelativeFilename||l.Filename]=_}}}}for(const r in e){const s=e[r];i[s]!==void 0?e[r]=i[s]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const i=e.Content,r=e.RelativeFilename||e.Filename,s=r.slice(r.lastIndexOf(".")+1).toLowerCase();let l;switch(s){case"bmp":l="image/bmp";break;case"jpg":case"jpeg":l="image/jpeg";break;case"png":l="image/png";break;case"tif":l="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),l="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof i=="string")return"data:"+l+";base64,"+i;{const u=new Uint8Array(i);return window.URL.createObjectURL(new Blob([u],{type:l}))}}parseTextures(e){const i=new Map;if("Texture"in Wr.Objects){const r=Wr.Objects.Texture;for(const s in r){const l=this.parseTexture(r[s],e);i.set(parseInt(s),l)}}return i}parseTexture(e,i){const r=this.loadTexture(e,i);r.ID=e.id,r.name=e.attrName;const s=e.WrapModeU,l=e.WrapModeV,u=s!==void 0?s.value:0,A=l!==void 0?l.value:0;if(r.wrapS=u===0?Vd:$o,r.wrapT=A===0?Vd:$o,"Scaling"in e){const g=e.Scaling.value;r.repeat.x=g[0],r.repeat.y=g[1]}if("Translation"in e){const g=e.Translation.value;r.offset.x=g[0],r.offset.y=g[1]}return r}loadTexture(e,i){const r=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),s=e.FileName.split(".").pop().toLowerCase(),l=r.has(s)?this.manager.getHandler(`.${s}`):this.textureLoader;if(!l)return console.warn(`FBXLoader: ${s.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Js;const u=l.path;u||l.setPath(this.textureLoader.path);const A=kl.get(e.id).children;let g;A!==void 0&&A.length>0&&i[A[0].ID]!==void 0&&(g=i[A[0].ID],(g.indexOf("blob:")===0||g.indexOf("data:")===0)&&l.setPath(void 0));const _=l.load(g);return l.setPath(u),_}parseMaterials(e){const i=new Map;if("Material"in Wr.Objects){const r=Wr.Objects.Material;for(const s in r){const l=this.parseMaterial(r[s],e);l!==null&&i.set(parseInt(s),l)}}return i}parseMaterial(e,i){const r=e.id,s=e.attrName;let l=e.ShadingModel;if(typeof l=="object"&&(l=l.value),!kl.has(r))return null;const u=this.parseParameters(e,i,r);let A;switch(l.toLowerCase()){case"phong":A=new nS;break;case"lambert":A=new r7;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',l),A=new nS;break}return A.setValues(u),A.name=s,A}parseParameters(e,i,r){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=lr.toWorkingColorSpace(new Si().fromArray(e.Diffuse.value),rr):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=lr.toWorkingColorSpace(new Si().fromArray(e.DiffuseColor.value),rr)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=lr.toWorkingColorSpace(new Si().fromArray(e.Emissive.value),rr):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=lr.toWorkingColorSpace(new Si().fromArray(e.EmissiveColor.value),rr)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),s.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(s.opacity===1||s.opacity===0)&&(s.opacity=e.Opacity?parseFloat(e.Opacity.value):null,s.opacity===null&&(s.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=lr.toWorkingColorSpace(new Si().fromArray(e.Specular.value),rr):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=lr.toWorkingColorSpace(new Si().fromArray(e.SpecularColor.value),rr));const l=this;return kl.get(r).children.forEach(function(u){const A=u.relationship;switch(A){case"Bump":s.bumpMap=l.getTexture(i,u.ID);break;case"Maya|TEX_ao_map":s.aoMap=l.getTexture(i,u.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=l.getTexture(i,u.ID),s.map!==void 0&&(s.map.colorSpace=rr);break;case"DisplacementColor":s.displacementMap=l.getTexture(i,u.ID);break;case"EmissiveColor":s.emissiveMap=l.getTexture(i,u.ID),s.emissiveMap!==void 0&&(s.emissiveMap.colorSpace=rr);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=l.getTexture(i,u.ID);break;case"ReflectionColor":s.envMap=l.getTexture(i,u.ID),s.envMap!==void 0&&(s.envMap.mapping=Bw,s.envMap.colorSpace=rr);break;case"SpecularColor":s.specularMap=l.getTexture(i,u.ID),s.specularMap!==void 0&&(s.specularMap.colorSpace=rr);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=l.getTexture(i,u.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",A);break}}),s}getTexture(e,i){return"LayeredTexture"in Wr.Objects&&i in Wr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),i=kl.get(i).children[0].ID),e.get(i)}parseDeformers(){const e={},i={};if("Deformer"in Wr.Objects){const r=Wr.Objects.Deformer;for(const s in r){const l=r[s],u=kl.get(parseInt(s));if(l.attrType==="Skin"){const A=this.parseSkeleton(u,r);A.ID=s,u.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),A.geometryID=u.parents[0].ID,e[s]=A}else if(l.attrType==="BlendShape"){const A={id:s};A.rawTargets=this.parseMorphTargets(u,r),A.id=s,u.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),i[s]=A}}}return{skeletons:e,morphTargets:i}}parseSkeleton(e,i){const r=[];return e.children.forEach(function(s){const l=i[s.ID];if(l.attrType!=="Cluster")return;const u={ID:s.ID,indices:[],weights:[],transformLink:new Ki().fromArray(l.TransformLink.a)};"Indexes"in l&&(u.indices=l.Indexes.a,u.weights=l.Weights.a),r.push(u)}),{rawBones:r,bones:[]}}parseMorphTargets(e,i){const r=[];for(let s=0;s<e.children.length;s++){const l=e.children[s],u=i[l.ID],A={name:u.attrName,initialWeight:u.DeformPercent,id:u.id,fullWeights:u.FullWeights.a};if(u.attrType!=="BlendShapeChannel")return;A.geoID=kl.get(parseInt(l.ID)).children.filter(function(g){return g.relationship===void 0})[0].ID,r.push(A)}return r}parseScene(e,i,r){kd=new Ap;const s=this.parseModels(e.skeletons,i,r),l=Wr.Objects.Model,u=this;s.forEach(function(g){const _=l[g.ID];u.setLookAtProperties(g,_),kl.get(g.ID).parents.forEach(function(x){const C=s.get(x.ID);C!==void 0&&C.add(g)}),g.parent===null&&kd.add(g)}),this.bindSkeleton(e.skeletons,i,s),this.addGlobalSceneSettings(),kd.traverse(function(g){if(g.userData.transformData){g.parent&&(g.userData.transformData.parentMatrix=g.parent.matrix,g.userData.transformData.parentMatrixWorld=g.parent.matrixWorld);const _=Mse(g.userData.transformData);g.applyMatrix4(_),g.updateWorldMatrix()}});const A=new uBe().parse();kd.children.length===1&&kd.children[0].isGroup&&(kd.children[0].animations=A,kd=kd.children[0]),kd.animations=A}parseModels(e,i,r){const s=new Map,l=Wr.Objects.Model;for(const u in l){const A=parseInt(u),g=l[u],_=kl.get(A);let b=this.buildSkeleton(_,e,A,g.attrName);if(!b){switch(g.attrType){case"Camera":b=this.createCamera(_);break;case"Light":b=this.createLight(_);break;case"Mesh":b=this.createMesh(_,i,r);break;case"NurbsCurve":b=this.createCurve(_,i);break;case"LimbNode":case"Root":b=new fS;break;case"Null":default:b=new Ap;break}b.name=g.attrName?Rr.sanitizeNodeName(g.attrName):"",b.userData.originalName=g.attrName,b.ID=A}this.getTransformData(b,g),s.set(A,b)}return s}buildSkeleton(e,i,r,s){let l=null;return e.parents.forEach(function(u){for(const A in i){const g=i[A];g.rawBones.forEach(function(_,b){if(_.ID===u.ID){const x=l;l=new fS,l.matrixWorld.copy(_.transformLink),l.name=s?Rr.sanitizeNodeName(s):"",l.userData.originalName=s,l.ID=r,g.bones[b]=l,x!==null&&l.add(x)}})}}),l}createCamera(e){let i,r;if(e.children.forEach(function(s){const l=Wr.Objects.NodeAttribute[s.ID];l!==void 0&&(r=l)}),r===void 0)i=new xr;else{let s=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(s=1);let l=1;r.NearPlane!==void 0&&(l=r.NearPlane.value/1e3);let u=1e3;r.FarPlane!==void 0&&(u=r.FarPlane.value/1e3);let A=window.innerWidth,g=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(A=r.AspectWidth.value,g=r.AspectHeight.value);const _=A/g;let b=45;r.FieldOfView!==void 0&&(b=r.FieldOfView.value);const x=r.FocalLength?r.FocalLength.value:null;switch(s){case 0:i=new xo(b,_,l,u),x!==null&&i.setFocalLength(x);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),i=new xr;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),i=new xr;break}}return i}createLight(e){let i,r;if(e.children.forEach(function(s){const l=Wr.Objects.NodeAttribute[s.ID];l!==void 0&&(r=l)}),r===void 0)i=new xr;else{let s;r.LightType===void 0?s=0:s=r.LightType.value;let l=16777215;r.Color!==void 0&&(l=lr.toWorkingColorSpace(new Si().fromArray(r.Color.value),rr));let u=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(u=0);let A=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?A=0:A=r.FarAttenuationEnd.value);const g=1;switch(s){case 0:i=new gS(l,u,A,g);break;case 1:i=new oM(l,u);break;case 2:let _=Math.PI/3;r.InnerAngle!==void 0&&(_=uc.degToRad(r.InnerAngle.value));let b=0;r.OuterAngle!==void 0&&(b=uc.degToRad(r.OuterAngle.value),b=Math.max(b,1)),i=new mL(l,u,A,_,b,g);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),i=new gS(l,u);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(i.castShadow=!0)}return i}createMesh(e,i,r){let s,l=null,u=null;const A=[];return e.children.forEach(function(g){i.has(g.ID)&&(l=i.get(g.ID)),r.has(g.ID)&&A.push(r.get(g.ID))}),A.length>1?u=A:A.length>0?u=A[0]:(u=new nS({name:sa.DEFAULT_MATERIAL_NAME,color:13421772}),A.push(u)),"color"in l.attributes&&A.forEach(function(g){g.vertexColors=!0}),l.FBX_Deformer?(s=new Zk(l,u),s.normalizeSkinWeights()):s=new Dr(l,u),s}createCurve(e,i){const r=e.children.reduce(function(l,u){return i.has(u.ID)&&(l=i.get(u.ID)),l},null),s=new Ac({name:sa.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Mf(r,s)}getTransformData(e,i){const r={};"InheritType"in i&&(r.inheritType=parseInt(i.InheritType.value)),"RotationOrder"in i?r.eulerOrder=FT(i.RotationOrder.value):r.eulerOrder=FT(0),"Lcl_Translation"in i&&(r.translation=i.Lcl_Translation.value),"PreRotation"in i&&(r.preRotation=i.PreRotation.value),"Lcl_Rotation"in i&&(r.rotation=i.Lcl_Rotation.value),"PostRotation"in i&&(r.postRotation=i.PostRotation.value),"Lcl_Scaling"in i&&(r.scale=i.Lcl_Scaling.value),"ScalingOffset"in i&&(r.scalingOffset=i.ScalingOffset.value),"ScalingPivot"in i&&(r.scalingPivot=i.ScalingPivot.value),"RotationOffset"in i&&(r.rotationOffset=i.RotationOffset.value),"RotationPivot"in i&&(r.rotationPivot=i.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,i){"LookAtProperty"in i&&kl.get(e.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const l=Wr.Objects.Model[s.ID];if("Lcl_Translation"in l){const u=l.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(u),kd.add(e.target)):e.lookAt(new Fe().fromArray(u))}}})}bindSkeleton(e,i,r){const s=this.parsePoseNodes();for(const l in e){const u=e[l];kl.get(parseInt(u.ID)).parents.forEach(function(g){if(i.has(g.ID)){const _=g.ID;kl.get(_).parents.forEach(function(x){r.has(x.ID)&&r.get(x.ID).bind(new MS(u.bones),s[x.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Wr.Objects){const i=Wr.Objects.Pose;for(const r in i)if(i[r].attrType==="BindPose"&&i[r].NbPoseNodes>0){const s=i[r].PoseNode;Array.isArray(s)?s.forEach(function(l){e[l.Node]=new Ki().fromArray(l.Matrix.a)}):e[s.Node]=new Ki().fromArray(s.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in Wr){if("AmbientColor"in Wr.GlobalSettings){const e=Wr.GlobalSettings.AmbientColor.value,i=e[0],r=e[1],s=e[2];if(i!==0||r!==0||s!==0){const l=new Si().setRGB(i,r,s,rr);kd.add(new c7(l,1))}}"UnitScaleFactor"in Wr.GlobalSettings&&(kd.userData.unitScaleFactor=Wr.GlobalSettings.UnitScaleFactor.value)}}}class cBe{constructor(){this.negativeMaterialIndices=!1}parse(e){const i=new Map;if("Geometry"in Wr.Objects){const r=Wr.Objects.Geometry;for(const s in r){const l=kl.get(parseInt(s)),u=this.parseGeometry(l,r[s],e);i.set(parseInt(s),u)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),i}parseGeometry(e,i,r){switch(i.attrType){case"Mesh":return this.parseMeshGeometry(e,i,r);case"NurbsCurve":return this.parseNurbsGeometry(i)}}parseMeshGeometry(e,i,r){const s=r.skeletons,l=[],u=e.parents.map(function(x){return Wr.Objects.Model[x.ID]});if(u.length===0)return;const A=e.children.reduce(function(x,C){return s[C.ID]!==void 0&&(x=s[C.ID]),x},null);e.children.forEach(function(x){r.morphTargets[x.ID]!==void 0&&l.push(r.morphTargets[x.ID])});const g=u[0],_={};"RotationOrder"in g&&(_.eulerOrder=FT(g.RotationOrder.value)),"InheritType"in g&&(_.inheritType=parseInt(g.InheritType.value)),"GeometricTranslation"in g&&(_.translation=g.GeometricTranslation.value),"GeometricRotation"in g&&(_.rotation=g.GeometricRotation.value),"GeometricScaling"in g&&(_.scale=g.GeometricScaling.value);const b=Mse(_);return this.genGeometry(i,A,l,b)}genGeometry(e,i,r,s){const l=new Ln;e.attrName&&(l.name=e.attrName);const u=this.parseGeoNode(e,i),A=this.genBuffers(u),g=new Ni(A.vertex,3);if(g.applyMatrix4(s),l.setAttribute("position",g),A.colors.length>0&&l.setAttribute("color",new Ni(A.colors,3)),i&&(l.setAttribute("skinIndex",new jk(A.weightsIndices,4)),l.setAttribute("skinWeight",new Ni(A.vertexWeights,4)),l.FBX_Deformer=i),A.normal.length>0){const _=new nr().getNormalMatrix(s),b=new Ni(A.normal,3);b.applyNormalMatrix(_),l.setAttribute("normal",b)}if(A.uvs.forEach(function(_,b){const x=b===0?"uv":`uv${b}`;l.setAttribute(x,new Ni(A.uvs[b],2))}),u.material&&u.material.mappingType!=="AllSame"){let _=A.materialIndex[0],b=0;if(A.materialIndex.forEach(function(x,C){x!==_&&(l.addGroup(b,C-b,_),_=x,b=C)}),l.groups.length>0){const x=l.groups[l.groups.length-1],C=x.start+x.count;C!==A.materialIndex.length&&l.addGroup(C,A.materialIndex.length-C,_)}l.groups.length===0&&l.addGroup(0,A.materialIndex.length,A.materialIndex[0])}return this.addMorphTargets(l,e,r,s),l}parseGeoNode(e,i){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return r.weightTable={},i!==null&&(r.skeleton=i,i.rawBones.forEach(function(s,l){s.indices.forEach(function(u,A){r.weightTable[u]===void 0&&(r.weightTable[u]=[]),r.weightTable[u].push({id:l,weight:s.weights[A]})})})),r}genBuffers(e){const i={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,s=0,l=!1,u=[],A=[],g=[],_=[],b=[],x=[];const C=this;return e.vertexIndices.forEach(function(I,F){let L,U=!1;I<0&&(I=I^-1,U=!0);let P=[],H=[];if(u.push(I*3,I*3+1,I*3+2),e.color){const N=rF(F,r,I,e.color);g.push(N[0],N[1],N[2])}if(e.skeleton){if(e.weightTable[I]!==void 0&&e.weightTable[I].forEach(function(N){H.push(N.weight),P.push(N.id)}),H.length>4){l||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),l=!0);const N=[0,0,0,0],z=[0,0,0,0];H.forEach(function(W,j){let J=W,ie=P[j];z.forEach(function(ee,re,se){if(J>ee){se[re]=J,J=ee;const ue=N[re];N[re]=ie,ie=ue}})}),P=N,H=z}for(;H.length<4;)H.push(0),P.push(0);for(let N=0;N<4;++N)b.push(H[N]),x.push(P[N])}if(e.normal){const N=rF(F,r,I,e.normal);A.push(N[0],N[1],N[2])}e.material&&e.material.mappingType!=="AllSame"&&(L=rF(F,r,I,e.material)[0],L<0&&(C.negativeMaterialIndices=!0,L=0)),e.uv&&e.uv.forEach(function(N,z){const W=rF(F,r,I,N);_[z]===void 0&&(_[z]=[]),_[z].push(W[0]),_[z].push(W[1])}),s++,U&&(C.genFace(i,e,u,L,A,g,_,b,x,s),r++,s=0,u=[],A=[],g=[],_=[],b=[],x=[])}),i}getNormalNewell(e){const i=new Fe(0,0,0);for(let r=0;r<e.length;r++){const s=e[r],l=e[(r+1)%e.length];i.x+=(s.y-l.y)*(s.z+l.z),i.y+=(s.z-l.z)*(s.x+l.x),i.z+=(s.x-l.x)*(s.y+l.y)}return i.normalize(),i}getNormalTangentAndBitangent(e){const i=this.getNormalNewell(e),s=(Math.abs(i.z)>.5?new Fe(0,1,0):new Fe(0,0,1)).cross(i).normalize(),l=i.clone().cross(s).normalize();return{normal:i,tangent:s,bitangent:l}}flattenVertex(e,i,r){return new ci(e.dot(i),e.dot(r))}genFace(e,i,r,s,l,u,A,g,_,b){let x;if(b>3){const C=[],I=i.baseVertexPositions||i.vertexPositions;for(let P=0;P<r.length;P+=3)C.push(new Fe(I[r[P]],I[r[P+1]],I[r[P+2]]));const{tangent:F,bitangent:L}=this.getNormalTangentAndBitangent(C),U=[];for(const P of C)U.push(this.flattenVertex(P,F,L));x=Fg.triangulateShape(U,[])}else x=[[0,1,2]];for(const[C,I,F]of x)e.vertex.push(i.vertexPositions[r[C*3]]),e.vertex.push(i.vertexPositions[r[C*3+1]]),e.vertex.push(i.vertexPositions[r[C*3+2]]),e.vertex.push(i.vertexPositions[r[I*3]]),e.vertex.push(i.vertexPositions[r[I*3+1]]),e.vertex.push(i.vertexPositions[r[I*3+2]]),e.vertex.push(i.vertexPositions[r[F*3]]),e.vertex.push(i.vertexPositions[r[F*3+1]]),e.vertex.push(i.vertexPositions[r[F*3+2]]),i.skeleton&&(e.vertexWeights.push(g[C*4]),e.vertexWeights.push(g[C*4+1]),e.vertexWeights.push(g[C*4+2]),e.vertexWeights.push(g[C*4+3]),e.vertexWeights.push(g[I*4]),e.vertexWeights.push(g[I*4+1]),e.vertexWeights.push(g[I*4+2]),e.vertexWeights.push(g[I*4+3]),e.vertexWeights.push(g[F*4]),e.vertexWeights.push(g[F*4+1]),e.vertexWeights.push(g[F*4+2]),e.vertexWeights.push(g[F*4+3]),e.weightsIndices.push(_[C*4]),e.weightsIndices.push(_[C*4+1]),e.weightsIndices.push(_[C*4+2]),e.weightsIndices.push(_[C*4+3]),e.weightsIndices.push(_[I*4]),e.weightsIndices.push(_[I*4+1]),e.weightsIndices.push(_[I*4+2]),e.weightsIndices.push(_[I*4+3]),e.weightsIndices.push(_[F*4]),e.weightsIndices.push(_[F*4+1]),e.weightsIndices.push(_[F*4+2]),e.weightsIndices.push(_[F*4+3])),i.color&&(e.colors.push(u[C*3]),e.colors.push(u[C*3+1]),e.colors.push(u[C*3+2]),e.colors.push(u[I*3]),e.colors.push(u[I*3+1]),e.colors.push(u[I*3+2]),e.colors.push(u[F*3]),e.colors.push(u[F*3+1]),e.colors.push(u[F*3+2])),i.material&&i.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),i.normal&&(e.normal.push(l[C*3]),e.normal.push(l[C*3+1]),e.normal.push(l[C*3+2]),e.normal.push(l[I*3]),e.normal.push(l[I*3+1]),e.normal.push(l[I*3+2]),e.normal.push(l[F*3]),e.normal.push(l[F*3+1]),e.normal.push(l[F*3+2])),i.uv&&i.uv.forEach(function(L,U){e.uvs[U]===void 0&&(e.uvs[U]=[]),e.uvs[U].push(A[U][C*2]),e.uvs[U].push(A[U][C*2+1]),e.uvs[U].push(A[U][I*2]),e.uvs[U].push(A[U][I*2+1]),e.uvs[U].push(A[U][F*2]),e.uvs[U].push(A[U][F*2+1])})}addMorphTargets(e,i,r,s){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const l=this;r.forEach(function(u){u.rawTargets.forEach(function(A){const g=Wr.Objects.Geometry[A.geoID];g!==void 0&&l.genMorphGeometry(e,i,g,s,A.name)})})}genMorphGeometry(e,i,r,s,l){const u=i.Vertices!==void 0?i.Vertices.a:[],A=i.PolygonVertexIndex!==void 0?i.PolygonVertexIndex.a:[],g=r.Vertices!==void 0?r.Vertices.a:[],_=r.Indexes!==void 0?r.Indexes.a:[],b=e.attributes.position.count*3,x=new Float32Array(b);for(let L=0;L<_.length;L++){const U=_[L]*3;x[U]=g[L*3],x[U+1]=g[L*3+1],x[U+2]=g[L*3+2]}const C={vertexIndices:A,vertexPositions:x,baseVertexPositions:u},I=this.genBuffers(C),F=new Ni(I.vertex,3);F.name=l||r.attrName,F.applyMatrix4(s),e.morphAttributes.position.push(F)}parseNormals(e){const i=e.MappingInformationType,r=e.ReferenceInformationType,s=e.Normals.a;let l=[];return r==="IndexToDirect"&&("NormalIndex"in e?l=e.NormalIndex.a:"NormalsIndex"in e&&(l=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:l,mappingType:i,referenceType:r}}parseUVs(e){const i=e.MappingInformationType,r=e.ReferenceInformationType,s=e.UV.a;let l=[];return r==="IndexToDirect"&&(l=e.UVIndex.a),{dataSize:2,buffer:s,indices:l,mappingType:i,referenceType:r}}parseVertexColors(e){const i=e.MappingInformationType,r=e.ReferenceInformationType,s=e.Colors.a;let l=[];r==="IndexToDirect"&&(l=e.ColorIndex.a);for(let u=0,A=new Si;u<s.length;u+=4)A.fromArray(s,u),lr.toWorkingColorSpace(A,rr),A.toArray(s,u);return{dataSize:4,buffer:s,indices:l,mappingType:i,referenceType:r}}parseMaterialIndices(e){const i=e.MappingInformationType,r=e.ReferenceInformationType;if(i==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const s=e.Materials.a,l=[];for(let u=0;u<s.length;++u)l.push(u);return{dataSize:1,buffer:s,indices:l,mappingType:i,referenceType:r}}parseNurbsGeometry(e){const i=parseInt(e.Order);if(isNaN(i))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Ln;const r=i-1,s=e.KnotVector.a,l=[],u=e.Points.a;for(let x=0,C=u.length;x<C;x+=4)l.push(new Vr().fromArray(u,x));let A,g;if(e.Form==="Closed")l.push(l[0]);else if(e.Form==="Periodic"){A=r,g=s.length-1-A;for(let x=0;x<r;++x)l.push(l[x])}const b=new oBe(r,s,l,A,g).getPoints(l.length*12);return new Ln().setFromPoints(b)}}class uBe{parse(){const e=[],i=this.parseClips();if(i!==void 0)for(const r in i){const s=i[r],l=this.addClip(s);e.push(l)}return e}parseClips(){if(Wr.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const i=this.parseAnimationLayers(e);return this.parseAnimStacks(i)}parseAnimationCurveNodes(){const e=Wr.Objects.AnimationCurveNode,i=new Map;for(const r in e){const s=e[r];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const l={id:s.id,attr:s.attrName,curves:{}};i.set(l.id,l)}}return i}parseAnimationCurves(e){const i=Wr.Objects.AnimationCurve;for(const r in i){const s={id:i[r].id,times:i[r].KeyTime.a.map(fBe),values:i[r].KeyValueFloat.a},l=kl.get(s.id);if(l!==void 0){const u=l.parents[0].ID,A=l.parents[0].relationship;A.match(/X/)?e.get(u).curves.x=s:A.match(/Y/)?e.get(u).curves.y=s:A.match(/Z/)?e.get(u).curves.z=s:A.match(/DeformPercent/)&&e.has(u)&&(e.get(u).curves.morph=s)}}}parseAnimationLayers(e){const i=Wr.Objects.AnimationLayer,r=new Map;for(const s in i){const l=[],u=kl.get(parseInt(s));u!==void 0&&(u.children.forEach(function(g,_){if(e.has(g.ID)){const b=e.get(g.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(l[_]===void 0){const x=kl.get(g.ID).parents.filter(function(C){return C.relationship!==void 0})[0].ID;if(x!==void 0){const C=Wr.Objects.Model[x.toString()];if(C===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",g);return}const I={modelName:C.attrName?Rr.sanitizeNodeName(C.attrName):"",ID:C.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};kd.traverse(function(F){F.ID===C.id&&(I.transform=F.matrix,F.userData.transformData&&(I.eulerOrder=F.userData.transformData.eulerOrder))}),I.transform||(I.transform=new Ki),"PreRotation"in C&&(I.preRotation=C.PreRotation.value),"PostRotation"in C&&(I.postRotation=C.PostRotation.value),l[_]=I}}l[_]&&(l[_][b.attr]=b)}else if(b.curves.morph!==void 0){if(l[_]===void 0){const x=kl.get(g.ID).parents.filter(function(P){return P.relationship!==void 0})[0].ID,C=kl.get(x).parents[0].ID,I=kl.get(C).parents[0].ID,F=kl.get(I).parents[0].ID,L=Wr.Objects.Model[F],U={modelName:L.attrName?Rr.sanitizeNodeName(L.attrName):"",morphName:Wr.Objects.Deformer[x].attrName};l[_]=U}l[_][b.attr]=b}}}),r.set(parseInt(s),l))}return r}parseAnimStacks(e){const i=Wr.Objects.AnimationStack,r={};for(const s in i){const l=kl.get(parseInt(s)).children;l.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const u=e.get(l[0].ID);r[s]={name:i[s].attrName,layer:u}}return r}addClip(e){let i=[];const r=this;return e.layer.forEach(function(s){i=i.concat(r.generateTracks(s))}),new Uw(e.name,-1,i)}generateTracks(e){const i=[];let r=new Fe,s=new Fe;if(e.transform&&e.transform.decompose(r,new Ys,s),r=r.toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const l=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");l!==void 0&&i.push(l)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const l=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);l!==void 0&&i.push(l)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const l=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");l!==void 0&&i.push(l)}if(e.DeformPercent!==void 0){const l=this.generateMorphTrack(e);l!==void 0&&i.push(l)}return i}generateVectorTrack(e,i,r,s){const l=this.getTimesForAllAxes(i),u=this.getKeyframeTrackValues(l,i,r);return new Xy(e+"."+s,l,u)}generateRotationTrack(e,i,r,s,l){let u,A;if(i.x!==void 0&&i.y!==void 0&&i.z!==void 0){const C=this.interpolateRotations(i.x,i.y,i.z,l);u=C[0],A=C[1]}const g=FT(0);r!==void 0&&(r=r.map(uc.degToRad),r.push(g),r=new hl().fromArray(r),r=new Ys().setFromEuler(r)),s!==void 0&&(s=s.map(uc.degToRad),s.push(g),s=new hl().fromArray(s),s=new Ys().setFromEuler(s).invert());const _=new Ys,b=new hl,x=[];if(!A||!u)return new qv(e+".quaternion",[0],[0]);for(let C=0;C<A.length;C+=3)b.set(A[C],A[C+1],A[C+2],l),_.setFromEuler(b),r!==void 0&&_.premultiply(r),s!==void 0&&_.multiply(s),C>2&&new Ys().fromArray(x,(C-3)/3*4).dot(_)<0&&_.set(-_.x,-_.y,-_.z,-_.w),_.toArray(x,C/3*4);return new qv(e+".quaternion",u,x)}generateMorphTrack(e){const i=e.DeformPercent.curves.morph,r=i.values.map(function(l){return l/100}),s=kd.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Ky(e.modelName+".morphTargetInfluences["+s+"]",i.times,r)}getTimesForAllAxes(e){let i=[];if(e.x!==void 0&&(i=i.concat(e.x.times)),e.y!==void 0&&(i=i.concat(e.y.times)),e.z!==void 0&&(i=i.concat(e.z.times)),i=i.sort(function(r,s){return r-s}),i.length>1){let r=1,s=i[0];for(let l=1;l<i.length;l++){const u=i[l];u!==s&&(i[r]=u,s=u,r++)}i=i.slice(0,r)}return i}getKeyframeTrackValues(e,i,r){const s=r,l=[];let u=-1,A=-1,g=-1;return e.forEach(function(_){if(i.x&&(u=i.x.times.indexOf(_)),i.y&&(A=i.y.times.indexOf(_)),i.z&&(g=i.z.times.indexOf(_)),u!==-1){const b=i.x.values[u];l.push(b),s[0]=b}else l.push(s[0]);if(A!==-1){const b=i.y.values[A];l.push(b),s[1]=b}else l.push(s[1]);if(g!==-1){const b=i.z.values[g];l.push(b),s[2]=b}else l.push(s[2])}),l}interpolateRotations(e,i,r,s){const l=[],u=[];l.push(e.times[0]),u.push(uc.degToRad(e.values[0])),u.push(uc.degToRad(i.values[0])),u.push(uc.degToRad(r.values[0]));for(let A=1;A<e.values.length;A++){const g=[e.values[A-1],i.values[A-1],r.values[A-1]];if(isNaN(g[0])||isNaN(g[1])||isNaN(g[2]))continue;const _=g.map(uc.degToRad),b=[e.values[A],i.values[A],r.values[A]];if(isNaN(b[0])||isNaN(b[1])||isNaN(b[2]))continue;const x=b.map(uc.degToRad),C=[b[0]-g[0],b[1]-g[1],b[2]-g[2]],I=[Math.abs(C[0]),Math.abs(C[1]),Math.abs(C[2])];if(I[0]>=180||I[1]>=180||I[2]>=180){const L=Math.max(...I)/180,U=new hl(..._,s),P=new hl(...x,s),H=new Ys().setFromEuler(U),N=new Ys().setFromEuler(P);H.dot(N)&&N.set(-N.x,-N.y,-N.z,-N.w);const z=e.times[A-1],W=e.times[A]-z,j=new Ys,J=new hl;for(let ie=0;ie<1;ie+=1/L)j.copy(H.clone().slerp(N.clone(),ie)),l.push(z+ie*W),J.setFromQuaternion(j,s),u.push(J.x),u.push(J.y),u.push(J.z)}else l.push(e.times[A]),u.push(uc.degToRad(e.values[A])),u.push(uc.degToRad(i.values[A])),u.push(uc.degToRad(r.values[A]))}return[l,u]}}class hBe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,i){this.currentProp=e,this.currentPropName=i}parse(e){this.currentIndent=0,this.allNodes=new Tse,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const i=this,r=e.split(/[\r\n]+/);return r.forEach(function(s,l){const u=s.match(/^[\s\t]*;/),A=s.match(/^[\s\t]*$/);if(u||A)return;const g=s.match("^\\t{"+i.currentIndent+"}(\\w+):(.*){",""),_=s.match("^\\t{"+i.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=s.match("^\\t{"+(i.currentIndent-1)+"}}");g?i.parseNodeBegin(s,g):_?i.parseNodeProperty(s,_,r[++l]):b?i.popStack():s.match(/^[^\s\t}]/)&&i.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,i){const r=i[1].trim().replace(/^"/,"").replace(/"$/,""),s=i[2].split(",").map(function(g){return g.trim().replace(/^"/,"").replace(/"$/,"")}),l={name:r},u=this.parseNodeAttr(s),A=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,l):r in A?(r==="PoseNode"?A.PoseNode.push(l):A[r].id!==void 0&&(A[r]={},A[r][A[r].id]=A[r]),u.id!==""&&(A[r][u.id]=l)):typeof u.id=="number"?(A[r]={},A[r][u.id]=l):r!=="Properties70"&&(r==="PoseNode"?A[r]=[l]:A[r]=l),typeof u.id=="number"&&(l.id=u.id),u.name!==""&&(l.attrName=u.name),u.type!==""&&(l.attrType=u.type),this.pushStack(l)}parseNodeAttr(e){let i=e[0];e[0]!==""&&(i=parseInt(e[0]),isNaN(i)&&(i=e[0]));let r="",s="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:i,name:r,type:s}}parseNodeProperty(e,i,r){let s=i[1].replace(/^"/,"").replace(/"$/,"").trim(),l=i[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&l===","&&(l=r.replace(/"/g,"").replace(/,$/,"").trim());const u=this.getCurrentNode();if(u.name==="Properties70"){this.parseNodeSpecialProperty(e,s,l);return}if(s==="C"){const g=l.split(",").slice(1),_=parseInt(g[0]),b=parseInt(g[1]);let x=l.split(",").slice(3);x=x.map(function(C){return C.trim().replace(/^"/,"")}),s="connections",l=[_,b],mBe(l,x),u[s]===void 0&&(u[s]=[])}s==="Node"&&(u.id=l),s in u&&Array.isArray(u[s])?u[s].push(l):s!=="a"?u[s]=l:u.a=l,this.setCurrentProp(u,s),s==="a"&&l.slice(-1)!==","&&(u.a=P6(l))}parseNodePropertyContinued(e){const i=this.getCurrentNode();i.a+=e,e.slice(-1)!==","&&(i.a=P6(i.a))}parseNodeSpecialProperty(e,i,r){const s=r.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),l=s[0],u=s[1],A=s[2],g=s[3];let _=s[4];switch(u){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":_=parseFloat(_);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":_=P6(_);break}this.getPrevNode()[l]={type:u,type2:A,flag:g,value:_},this.setCurrentProp(this.getPrevNode(),l)}}class dBe{parse(e){const i=new sY(e);i.skip(23);const r=i.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const s=new Tse;for(;!this.endOfContent(i);){const l=this.parseNode(i,r);l!==null&&s.add(l.name,l)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,i){const r={},s=i>=7500?e.getUint64():e.getUint32(),l=i>=7500?e.getUint64():e.getUint32();i>=7500?e.getUint64():e.getUint32();const u=e.getUint8(),A=e.getString(u);if(s===0)return null;const g=[];for(let C=0;C<l;C++)g.push(this.parseProperty(e));const _=g.length>0?g[0]:"",b=g.length>1?g[1]:"",x=g.length>2?g[2]:"";for(r.singleProperty=l===1&&e.getOffset()===s;s>e.getOffset();){const C=this.parseNode(e,i);C!==null&&this.parseSubNode(A,r,C)}return r.propertyList=g,typeof _=="number"&&(r.id=_),b!==""&&(r.attrName=b),x!==""&&(r.attrType=x),A!==""&&(r.name=A),r}parseSubNode(e,i,r){if(r.singleProperty===!0){const s=r.propertyList[0];Array.isArray(s)?(i[r.name]=r,r.a=s):i[r.name]=s}else if(e==="Connections"&&r.name==="C"){const s=[];r.propertyList.forEach(function(l,u){u!==0&&s.push(l)}),i.connections===void 0&&(i.connections=[]),i.connections.push(s)}else if(r.name==="Properties70")Object.keys(r).forEach(function(l){i[l]=r[l]});else if(e==="Properties70"&&r.name==="P"){let s=r.propertyList[0],l=r.propertyList[1];const u=r.propertyList[2],A=r.propertyList[3];let g;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),l.indexOf("Lcl ")===0&&(l=l.replace("Lcl ","Lcl_")),l==="Color"||l==="ColorRGB"||l==="Vector"||l==="Vector3D"||l.indexOf("Lcl_")===0?g=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:g=r.propertyList[4],i[s]={type:l,type2:u,flag:A,value:g}}else i[r.name]===void 0?typeof r.id=="number"?(i[r.name]={},i[r.name][r.id]=r):i[r.name]=r:r.name==="PoseNode"?(Array.isArray(i[r.name])||(i[r.name]=[i[r.name]]),i[r.name].push(r)):i[r.name][r.id]===void 0&&(i[r.name][r.id]=r)}parseProperty(e){const i=e.getString(1);let r;switch(i){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),l=e.getUint32(),u=e.getUint32();if(l===0)switch(i){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const A=jSe(new Uint8Array(e.getArrayBuffer(u))),g=new sY(A.buffer);switch(i){case"b":case"c":return g.getBooleanArray(s);case"d":return g.getFloat64Array(s);case"f":return g.getFloat32Array(s);case"i":return g.getInt32Array(s);case"l":return g.getInt64Array(s)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+i)}}}class sY{constructor(e,i){this.dv=new DataView(e),this.offset=0,this.littleEndian=i!==void 0?i:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const i=[];for(let r=0;r<e;r++)i.push(this.getBoolean());return i}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const i=[];for(let r=0;r<e;r++)i.push(this.getInt32());return i}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,i;return this.littleEndian?(e=this.getUint32(),i=this.getUint32()):(i=this.getUint32(),e=this.getUint32()),i&2147483648?(i=~i&4294967295,e=~e&4294967295,e===4294967295&&(i=i+1&4294967295),e=e+1&4294967295,-(i*4294967296+e)):i*4294967296+e}getInt64Array(e){const i=[];for(let r=0;r<e;r++)i.push(this.getInt64());return i}getUint64(){let e,i;return this.littleEndian?(e=this.getUint32(),i=this.getUint32()):(i=this.getUint32(),e=this.getUint32()),i*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const i=[];for(let r=0;r<e;r++)i.push(this.getFloat32());return i}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const i=[];for(let r=0;r<e;r++)i.push(this.getFloat64());return i}getArrayBuffer(e){const i=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,i}getString(e){const i=this.offset;let r=new Uint8Array(this.dv.buffer,i,e);this.skip(e);const s=r.indexOf(0);return s>=0&&(r=new Uint8Array(this.dv.buffer,i,s)),this._textDecoder.decode(r)}}class Tse{add(e,i){this[e]=i}}function ABe(a){const e="Kaydara FBX Binary  \0";return a.byteLength>=e.length&&e===Rse(a,0,e.length)}function pBe(a){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let i=0;function r(s){const l=a[s-1];return a=a.slice(i+s),i++,l}for(let s=0;s<e.length;++s)if(r(1)===e[s])return!1;return!0}function oY(a){const e=/FBXVersion: (\d+)/,i=a.match(e);if(i)return parseInt(i[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function fBe(a){return a/46186158e3}const gBe=[];function rF(a,e,i,r){let s;switch(r.mappingType){case"ByPolygonVertex":s=a;break;case"ByPolygon":s=e;break;case"ByVertice":s=i;break;case"AllSame":s=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(s=r.indices[s]);const l=s*r.dataSize,u=l+r.dataSize;return _Be(gBe,r.buffer,l,u)}const L6=new hl,AE=new Fe;function Mse(a){const e=new Ki,i=new Ki,r=new Ki,s=new Ki,l=new Ki,u=new Ki,A=new Ki,g=new Ki,_=new Ki,b=new Ki,x=new Ki,C=new Ki,I=a.inheritType?a.inheritType:0;a.translation&&e.setPosition(AE.fromArray(a.translation));const F=FT(0);if(a.preRotation){const se=a.preRotation.map(uc.degToRad);se.push(F),i.makeRotationFromEuler(L6.fromArray(se))}if(a.rotation){const se=a.rotation.map(uc.degToRad);se.push(a.eulerOrder||F),r.makeRotationFromEuler(L6.fromArray(se))}if(a.postRotation){const se=a.postRotation.map(uc.degToRad);se.push(F),s.makeRotationFromEuler(L6.fromArray(se)),s.invert()}a.scale&&l.scale(AE.fromArray(a.scale)),a.scalingOffset&&A.setPosition(AE.fromArray(a.scalingOffset)),a.scalingPivot&&u.setPosition(AE.fromArray(a.scalingPivot)),a.rotationOffset&&g.setPosition(AE.fromArray(a.rotationOffset)),a.rotationPivot&&_.setPosition(AE.fromArray(a.rotationPivot)),a.parentMatrixWorld&&(x.copy(a.parentMatrix),b.copy(a.parentMatrixWorld));const L=i.clone().multiply(r).multiply(s),U=new Ki;U.extractRotation(b);const P=new Ki;P.copyPosition(b);const H=P.clone().invert().multiply(b),N=U.clone().invert().multiply(H),z=l,W=new Ki;if(I===0)W.copy(U).multiply(L).multiply(N).multiply(z);else if(I===1)W.copy(U).multiply(N).multiply(L).multiply(z);else{const ue=new Ki().scale(new Fe().setFromMatrixScale(x)).clone().invert(),fe=N.clone().multiply(ue);W.copy(U).multiply(L).multiply(fe).multiply(z)}const j=_.clone().invert(),J=u.clone().invert();let ie=e.clone().multiply(g).multiply(_).multiply(i).multiply(r).multiply(s).multiply(j).multiply(A).multiply(u).multiply(l).multiply(J);const ee=new Ki().copyPosition(ie),re=b.clone().multiply(ee);return C.copyPosition(re),ie=C.clone().multiply(W),ie.premultiply(b.invert()),ie}function FT(a){a=a||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return a===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[a]}function P6(a){return a.split(",").map(function(i){return parseFloat(i)})}function Rse(a,e,i){return e===void 0&&(e=0),i===void 0&&(i=a.byteLength),new TextDecoder().decode(new Uint8Array(a,e,i))}function mBe(a,e){for(let i=0,r=a.length,s=e.length;i<s;i++,r++)a[r]=e[i]}function _Be(a,e,i,r){for(let s=i,l=0;s<r;s++,l++)a[l]=e[s];return a}function aY(a,e){if(e===dre)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(e===ek||e===zz){let i=a.getIndex();if(i===null){const u=[],A=a.getAttribute("position");if(A!==void 0){for(let g=0;g<A.count;g++)u.push(g);a.setIndex(u),i=a.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const r=i.count-2,s=[];if(e===ek)for(let u=1;u<=r;u++)s.push(i.getX(0)),s.push(i.getX(u)),s.push(i.getX(u+1));else for(let u=0;u<r;u++)u%2===0?(s.push(i.getX(u)),s.push(i.getX(u+1)),s.push(i.getX(u+2))):(s.push(i.getX(u+2)),s.push(i.getX(u+1)),s.push(i.getX(u)));s.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=a.clone();return l.setIndex(s),l.clearGroups(),l}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),a}class Dse extends sa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new xBe(i)}),this.register(function(i){return new CBe(i)}),this.register(function(i){return new FBe(i)}),this.register(function(i){return new UBe(i)}),this.register(function(i){return new kBe(i)}),this.register(function(i){return new SBe(i)}),this.register(function(i){return new BBe(i)}),this.register(function(i){return new IBe(i)}),this.register(function(i){return new TBe(i)}),this.register(function(i){return new wBe(i)}),this.register(function(i){return new MBe(i)}),this.register(function(i){return new EBe(i)}),this.register(function(i){return new DBe(i)}),this.register(function(i){return new RBe(i)}),this.register(function(i){return new yBe(i)}),this.register(function(i){return new LBe(i)}),this.register(function(i){return new PBe(i)})}load(e,i,r,s){const l=this;let u;if(this.resourcePath!=="")u=this.resourcePath;else if(this.path!==""){const _=Qv.extractUrlBase(e);u=Qv.resolveURL(_,this.path)}else u=Qv.extractUrlBase(e);this.manager.itemStart(e);const A=function(_){s?s(_):console.error(_),l.manager.itemError(e),l.manager.itemEnd(e)},g=new Al(this.manager);g.setPath(this.path),g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setWithCredentials(this.withCredentials),g.load(e,function(_){try{l.parse(_,u,function(b){i(b),l.manager.itemEnd(e)},A)}catch(b){A(b)}},r,A)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,i,r,s){let l;const u={},A={},g=new TextDecoder;if(typeof e=="string")l=JSON.parse(e);else if(e instanceof ArrayBuffer)if(g.decode(new Uint8Array(e,0,4))===Fse){try{u[is.KHR_BINARY_GLTF]=new OBe(e)}catch(x){s&&s(x);return}l=JSON.parse(u[is.KHR_BINARY_GLTF].content)}else l=JSON.parse(g.decode(e));else l=e;if(l.asset===void 0||l.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const _=new YBe(l,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});_.fileLoader.setRequestHeader(this.requestHeader);for(let b=0;b<this.pluginCallbacks.length;b++){const x=this.pluginCallbacks[b](_);x.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),A[x.name]=x,u[x.name]=!0}if(l.extensionsUsed)for(let b=0;b<l.extensionsUsed.length;++b){const x=l.extensionsUsed[b],C=l.extensionsRequired||[];switch(x){case is.KHR_MATERIALS_UNLIT:u[x]=new bBe;break;case is.KHR_DRACO_MESH_COMPRESSION:u[x]=new QBe(l,this.dracoLoader);break;case is.KHR_TEXTURE_TRANSFORM:u[x]=new NBe;break;case is.KHR_MESH_QUANTIZATION:u[x]=new HBe;break;default:C.indexOf(x)>=0&&A[x]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+x+'".')}}_.setExtensions(u),_.setPlugins(A),_.parse(r,s)}parseAsync(e,i){const r=this;return new Promise(function(s,l){r.parse(e,i,s,l)})}}function vBe(){let a={};return{get:function(e){return a[e]},add:function(e,i){a[e]=i},remove:function(e){delete a[e]},removeAll:function(){a={}}}}const is={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class yBe{constructor(e){this.parser=e,this.name=is.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,i=this.parser.json.nodes||[];for(let r=0,s=i.length;r<s;r++){const l=i[r];l.extensions&&l.extensions[this.name]&&l.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,l.extensions[this.name].light)}}_loadLight(e){const i=this.parser,r="light:"+e;let s=i.cache.get(r);if(s)return s;const l=i.json,g=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e];let _;const b=new Si(16777215);g.color!==void 0&&b.setRGB(g.color[0],g.color[1],g.color[2],Co);const x=g.range!==void 0?g.range:0;switch(g.type){case"directional":_=new oM(b),_.target.position.set(0,0,-1),_.add(_.target);break;case"point":_=new gS(b),_.distance=x;break;case"spot":_=new mL(b),_.distance=x,g.spot=g.spot||{},g.spot.innerConeAngle=g.spot.innerConeAngle!==void 0?g.spot.innerConeAngle:0,g.spot.outerConeAngle=g.spot.outerConeAngle!==void 0?g.spot.outerConeAngle:Math.PI/4,_.angle=g.spot.outerConeAngle,_.penumbra=1-g.spot.innerConeAngle/g.spot.outerConeAngle,_.target.position.set(0,0,-1),_.add(_.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+g.type)}return _.position.set(0,0,0),_.decay=2,Sv(_,g),g.intensity!==void 0&&(_.intensity=g.intensity),_.name=i.createUniqueName(g.name||"light_"+e),s=Promise.resolve(_),i.cache.add(r,s),s}getDependency(e,i){if(e==="light")return this._loadLight(i)}createNodeAttachment(e){const i=this,r=this.parser,l=r.json.nodes[e],A=(l.extensions&&l.extensions[this.name]||{}).light;return A===void 0?null:this._loadLight(A).then(function(g){return r._getNodeRef(i.cache,A,g)})}}let bBe=class{constructor(){this.name=is.KHR_MATERIALS_UNLIT}getMaterialType(){return Pc}extendParams(e,i,r){const s=[];e.color=new Si(1,1,1),e.opacity=1;const l=i.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const u=l.baseColorFactor;e.color.setRGB(u[0],u[1],u[2],Co),e.opacity=u[3]}l.baseColorTexture!==void 0&&s.push(r.assignTexture(e,"map",l.baseColorTexture,rr))}return Promise.all(s)}},wBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,i){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=s.extensions[this.name].emissiveStrength;return l!==void 0&&(i.emissiveIntensity=l),Promise.resolve()}},xBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[],u=s.extensions[this.name];if(u.clearcoatFactor!==void 0&&(i.clearcoat=u.clearcoatFactor),u.clearcoatTexture!==void 0&&l.push(r.assignTexture(i,"clearcoatMap",u.clearcoatTexture)),u.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=u.clearcoatRoughnessFactor),u.clearcoatRoughnessTexture!==void 0&&l.push(r.assignTexture(i,"clearcoatRoughnessMap",u.clearcoatRoughnessTexture)),u.clearcoatNormalTexture!==void 0&&(l.push(r.assignTexture(i,"clearcoatNormalMap",u.clearcoatNormalTexture)),u.clearcoatNormalTexture.scale!==void 0)){const A=u.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new ci(A,A)}return Promise.all(l)}},CBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=s.extensions[this.name];return i.dispersion=l.dispersion!==void 0?l.dispersion:0,Promise.resolve()}},EBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[],u=s.extensions[this.name];return u.iridescenceFactor!==void 0&&(i.iridescence=u.iridescenceFactor),u.iridescenceTexture!==void 0&&l.push(r.assignTexture(i,"iridescenceMap",u.iridescenceTexture)),u.iridescenceIor!==void 0&&(i.iridescenceIOR=u.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),u.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=u.iridescenceThicknessMinimum),u.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=u.iridescenceThicknessMaximum),u.iridescenceThicknessTexture!==void 0&&l.push(r.assignTexture(i,"iridescenceThicknessMap",u.iridescenceThicknessTexture)),Promise.all(l)}},SBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[];i.sheenColor=new Si(0,0,0),i.sheenRoughness=0,i.sheen=1;const u=s.extensions[this.name];if(u.sheenColorFactor!==void 0){const A=u.sheenColorFactor;i.sheenColor.setRGB(A[0],A[1],A[2],Co)}return u.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=u.sheenRoughnessFactor),u.sheenColorTexture!==void 0&&l.push(r.assignTexture(i,"sheenColorMap",u.sheenColorTexture,rr)),u.sheenRoughnessTexture!==void 0&&l.push(r.assignTexture(i,"sheenRoughnessMap",u.sheenRoughnessTexture)),Promise.all(l)}},BBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[],u=s.extensions[this.name];return u.transmissionFactor!==void 0&&(i.transmission=u.transmissionFactor),u.transmissionTexture!==void 0&&l.push(r.assignTexture(i,"transmissionMap",u.transmissionTexture)),Promise.all(l)}},IBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[],u=s.extensions[this.name];i.thickness=u.thicknessFactor!==void 0?u.thicknessFactor:0,u.thicknessTexture!==void 0&&l.push(r.assignTexture(i,"thicknessMap",u.thicknessTexture)),i.attenuationDistance=u.attenuationDistance||1/0;const A=u.attenuationColor||[1,1,1];return i.attenuationColor=new Si().setRGB(A[0],A[1],A[2],Co),Promise.all(l)}},TBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=s.extensions[this.name];return i.ior=l.ior!==void 0?l.ior:1.5,Promise.resolve()}},MBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[],u=s.extensions[this.name];i.specularIntensity=u.specularFactor!==void 0?u.specularFactor:1,u.specularTexture!==void 0&&l.push(r.assignTexture(i,"specularIntensityMap",u.specularTexture));const A=u.specularColorFactor||[1,1,1];return i.specularColor=new Si().setRGB(A[0],A[1],A[2],Co),u.specularColorTexture!==void 0&&l.push(r.assignTexture(i,"specularColorMap",u.specularColorTexture,rr)),Promise.all(l)}},RBe=class{constructor(e){this.parser=e,this.name=is.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[],u=s.extensions[this.name];return i.bumpScale=u.bumpFactor!==void 0?u.bumpFactor:1,u.bumpTexture!==void 0&&l.push(r.assignTexture(i,"bumpMap",u.bumpTexture)),Promise.all(l)}},DBe=class{constructor(e){this.parser=e,this.name=is.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ff}extendMaterialParams(e,i){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const l=[],u=s.extensions[this.name];return u.anisotropyStrength!==void 0&&(i.anisotropy=u.anisotropyStrength),u.anisotropyRotation!==void 0&&(i.anisotropyRotation=u.anisotropyRotation),u.anisotropyTexture!==void 0&&l.push(r.assignTexture(i,"anisotropyMap",u.anisotropyTexture)),Promise.all(l)}};class FBe{constructor(e){this.parser=e,this.name=is.KHR_TEXTURE_BASISU}loadTexture(e){const i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const l=s.extensions[this.name],u=i.options.ktx2Loader;if(!u){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(e,l.source,u)}}class UBe{constructor(e){this.parser=e,this.name=is.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const i=this.name,r=this.parser,s=r.json,l=s.textures[e];if(!l.extensions||!l.extensions[i])return null;const u=l.extensions[i],A=s.images[u.source];let g=r.textureLoader;if(A.uri){const _=r.options.manager.getHandler(A.uri);_!==null&&(g=_)}return this.detectSupport().then(function(_){if(_)return r.loadTextureImage(e,u.source,g);if(s.extensionsRequired&&s.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}}class kBe{constructor(e){this.parser=e,this.name=is.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const i=this.name,r=this.parser,s=r.json,l=s.textures[e];if(!l.extensions||!l.extensions[i])return null;const u=l.extensions[i],A=s.images[u.source];let g=r.textureLoader;if(A.uri){const _=r.options.manager.getHandler(A.uri);_!==null&&(g=_)}return this.detectSupport().then(function(_){if(_)return r.loadTextureImage(e,u.source,g);if(s.extensionsRequired&&s.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const i=new Image;i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}}class LBe{constructor(e){this.name=is.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const i=this.parser.json,r=i.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const s=r.extensions[this.name],l=this.parser.getDependency("buffer",s.buffer),u=this.parser.options.meshoptDecoder;if(!u||!u.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return l.then(function(A){const g=s.byteOffset||0,_=s.byteLength||0,b=s.count,x=s.byteStride,C=new Uint8Array(A,g,_);return u.decodeGltfBufferAsync?u.decodeGltfBufferAsync(b,x,C,s.mode,s.filter).then(function(I){return I.buffer}):u.ready.then(function(){const I=new ArrayBuffer(b*x);return u.decodeGltfBuffer(new Uint8Array(I),b,x,C,s.mode,s.filter),I})})}else return null}}let PBe=class{constructor(e){this.name=is.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const i=this.parser.json,r=i.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const s=i.meshes[r.mesh];for(const _ of s.primitives)if(_.mode!==_f.TRIANGLES&&_.mode!==_f.TRIANGLE_STRIP&&_.mode!==_f.TRIANGLE_FAN&&_.mode!==void 0)return null;const u=r.extensions[this.name].attributes,A=[],g={};for(const _ in u)A.push(this.parser.getDependency("accessor",u[_]).then(b=>(g[_]=b,g[_])));return A.length<1?null:(A.push(this.parser.createNodeMesh(e)),Promise.all(A).then(_=>{const b=_.pop(),x=b.isGroup?b.children:[b],C=_[0].count,I=[];for(const F of x){const L=new Ki,U=new Fe,P=new Ys,H=new Fe(1,1,1),N=new Kz(F.geometry,F.material,C);for(let z=0;z<C;z++)g.TRANSLATION&&U.fromBufferAttribute(g.TRANSLATION,z),g.ROTATION&&P.fromBufferAttribute(g.ROTATION,z),g.SCALE&&H.fromBufferAttribute(g.SCALE,z),N.setMatrixAt(z,L.compose(U,P,H));for(const z in g)if(z==="_COLOR_0"){const W=g[z];N.instanceColor=new jy(W.array,W.itemSize,W.normalized)}else z!=="TRANSLATION"&&z!=="ROTATION"&&z!=="SCALE"&&F.geometry.setAttribute(z,g[z]);xr.prototype.copy.call(N,F),this.parser.assignFinalMaterial(N),I.push(N)}return b.isGroup?(b.clear(),b.add(...I),b):I[0]}))}};const Fse="glTF",aI=12,lY={JSON:1313821514,BIN:5130562};class OBe{constructor(e){this.name=is.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(e,0,aI),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==Fse)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-aI,l=new DataView(e,aI);let u=0;for(;u<s;){const A=l.getUint32(u,!0);u+=4;const g=l.getUint32(u,!0);if(u+=4,g===lY.JSON){const _=new Uint8Array(e,aI+u,A);this.content=r.decode(_)}else if(g===lY.BIN){const _=aI+u;this.body=e.slice(_,_+A)}u+=A}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class QBe{constructor(e,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=is.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(e,i){const r=this.json,s=this.dracoLoader,l=e.extensions[this.name].bufferView,u=e.extensions[this.name].attributes,A={},g={},_={};for(const b in u){const x=wH[b]||b.toLowerCase();A[x]=u[b]}for(const b in e.attributes){const x=wH[b]||b.toLowerCase();if(u[b]!==void 0){const C=r.accessors[e.attributes[b]],I=rS[C.componentType];_[x]=I.name,g[x]=C.normalized===!0}}return i.getDependency("bufferView",l).then(function(b){return new Promise(function(x,C){s.decodeDracoFile(b,function(I){for(const F in I.attributes){const L=I.attributes[F],U=g[F];U!==void 0&&(L.normalized=U)}x(I)},A,_,Co,C)})})}}class NBe{constructor(){this.name=is.KHR_TEXTURE_TRANSFORM}extendTexture(e,i){return(i.texCoord===void 0||i.texCoord===e.channel)&&i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(e=e.clone(),i.texCoord!==void 0&&(e.channel=i.texCoord),i.offset!==void 0&&e.offset.fromArray(i.offset),i.rotation!==void 0&&(e.rotation=i.rotation),i.scale!==void 0&&e.repeat.fromArray(i.scale),e.needsUpdate=!0),e}}class HBe{constructor(){this.name=is.KHR_MESH_QUANTIZATION}}class Use extends FS{constructor(e,i,r,s){super(e,i,r,s)}copySampleValue_(e){const i=this.resultBuffer,r=this.sampleValues,s=this.valueSize,l=e*s*3+s;for(let u=0;u!==s;u++)i[u]=r[l+u];return i}interpolate_(e,i,r,s){const l=this.resultBuffer,u=this.sampleValues,A=this.valueSize,g=A*2,_=A*3,b=s-i,x=(r-i)/b,C=x*x,I=C*x,F=e*_,L=F-_,U=-2*I+3*C,P=I-C,H=1-U,N=P-C+x;for(let z=0;z!==A;z++){const W=u[L+z+A],j=u[L+z+g]*b,J=u[F+z+A],ie=u[F+z]*b;l[z]=H*W+N*j+U*J+P*ie}return l}}const zBe=new Ys;class GBe extends Use{interpolate_(e,i,r,s){const l=super.interpolate_(e,i,r,s);return zBe.fromArray(l).normalize().toArray(l),l}}const _f={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},rS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},cY={9728:Da,9729:Or,9984:zw,9985:Lv,9986:qm,9987:Ju},uY={33071:$o,33648:Vv,10497:Vd},O6={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wH={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ey={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},VBe={CUBICSPLINE:void 0,LINEAR:Rw,STEP:Mw},Q6={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function qBe(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new Fw({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:If})),a.DefaultMaterial}function N1(a,e,i){for(const r in i.extensions)a[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=i.extensions[r])}function Sv(a,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(a.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function $Be(a,e,i){let r=!1,s=!1,l=!1;for(let _=0,b=e.length;_<b;_++){const x=e[_];if(x.POSITION!==void 0&&(r=!0),x.NORMAL!==void 0&&(s=!0),x.COLOR_0!==void 0&&(l=!0),r&&s&&l)break}if(!r&&!s&&!l)return Promise.resolve(a);const u=[],A=[],g=[];for(let _=0,b=e.length;_<b;_++){const x=e[_];if(r){const C=x.POSITION!==void 0?i.getDependency("accessor",x.POSITION):a.attributes.position;u.push(C)}if(s){const C=x.NORMAL!==void 0?i.getDependency("accessor",x.NORMAL):a.attributes.normal;A.push(C)}if(l){const C=x.COLOR_0!==void 0?i.getDependency("accessor",x.COLOR_0):a.attributes.color;g.push(C)}}return Promise.all([Promise.all(u),Promise.all(A),Promise.all(g)]).then(function(_){const b=_[0],x=_[1],C=_[2];return r&&(a.morphAttributes.position=b),s&&(a.morphAttributes.normal=x),l&&(a.morphAttributes.color=C),a.morphTargetsRelative=!0,a})}function WBe(a,e){if(a.updateMorphTargets(),e.weights!==void 0)for(let i=0,r=e.weights.length;i<r;i++)a.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){const i=e.extras.targetNames;if(a.morphTargetInfluences.length===i.length){a.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++)a.morphTargetDictionary[i[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jBe(a){let e;const i=a.extensions&&a.extensions[is.KHR_DRACO_MESH_COMPRESSION];if(i?e="draco:"+i.bufferView+":"+i.indices+":"+N6(i.attributes):e=a.indices+":"+N6(a.attributes)+":"+a.mode,a.targets!==void 0)for(let r=0,s=a.targets.length;r<s;r++)e+=":"+N6(a.targets[r]);return e}function N6(a){let e="";const i=Object.keys(a).sort();for(let r=0,s=i.length;r<s;r++)e+=i[r]+":"+a[i[r]]+";";return e}function xH(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function KBe(a){return a.search(/\.jpe?g($|\?)/i)>0||a.search(/^data\:image\/jpeg/)===0?"image/jpeg":a.search(/\.webp($|\?)/i)>0||a.search(/^data\:image\/webp/)===0?"image/webp":a.search(/\.ktx2($|\?)/i)>0||a.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const XBe=new Ki;class YBe{constructor(e={},i={}){this.json=e,this.extensions={},this.plugins={},this.options=i,this.cache=new vBe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,s=-1,l=!1,u=-1;if(typeof navigator<"u"){const A=navigator.userAgent;r=/^((?!chrome|android).)*safari/i.test(A)===!0;const g=A.match(/Version\/(\d+)/);s=r&&g?parseInt(g[1],10):-1,l=A.indexOf("Firefox")>-1,u=l?A.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||r&&s<17||l&&u<98?this.textureLoader=new gL(this.options.manager):this.textureLoader=new ase(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Al(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,i){const r=this,s=this.json,l=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(u){return u._markDefs&&u._markDefs()}),Promise.all(this._invokeAll(function(u){return u.beforeRoot&&u.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(u){const A={scene:u[0][s.scene||0],scenes:u[0],animations:u[1],cameras:u[2],asset:s.asset,parser:r,userData:{}};return N1(l,A,s),Sv(A,s),Promise.all(r._invokeAll(function(g){return g.afterRoot&&g.afterRoot(A)})).then(function(){for(const g of A.scenes)g.updateMatrixWorld();e(A)})}).catch(i)}_markDefs(){const e=this.json.nodes||[],i=this.json.skins||[],r=this.json.meshes||[];for(let s=0,l=i.length;s<l;s++){const u=i[s].joints;for(let A=0,g=u.length;A<g;A++)e[u[A]].isBone=!0}for(let s=0,l=e.length;s<l;s++){const u=e[s];u.mesh!==void 0&&(this._addNodeRef(this.meshCache,u.mesh),u.skin!==void 0&&(r[u.mesh].isSkinnedMesh=!0)),u.camera!==void 0&&this._addNodeRef(this.cameraCache,u.camera)}}_addNodeRef(e,i){i!==void 0&&(e.refs[i]===void 0&&(e.refs[i]=e.uses[i]=0),e.refs[i]++)}_getNodeRef(e,i,r){if(e.refs[i]<=1)return r;const s=r.clone(),l=(u,A)=>{const g=this.associations.get(u);g!=null&&this.associations.set(A,g);for(const[_,b]of u.children.entries())l(b,A.children[_])};return l(r,s),s.name+="_instance_"+e.uses[i]++,s}_invokeOne(e){const i=Object.values(this.plugins);i.push(this);for(let r=0;r<i.length;r++){const s=e(i[r]);if(s)return s}return null}_invokeAll(e){const i=Object.values(this.plugins);i.unshift(this);const r=[];for(let s=0;s<i.length;s++){const l=e(i[s]);l&&r.push(l)}return r}getDependency(e,i){const r=e+":"+i;let s=this.cache.get(r);if(!s){switch(e){case"scene":s=this.loadScene(i);break;case"node":s=this._invokeOne(function(l){return l.loadNode&&l.loadNode(i)});break;case"mesh":s=this._invokeOne(function(l){return l.loadMesh&&l.loadMesh(i)});break;case"accessor":s=this.loadAccessor(i);break;case"bufferView":s=this._invokeOne(function(l){return l.loadBufferView&&l.loadBufferView(i)});break;case"buffer":s=this.loadBuffer(i);break;case"material":s=this._invokeOne(function(l){return l.loadMaterial&&l.loadMaterial(i)});break;case"texture":s=this._invokeOne(function(l){return l.loadTexture&&l.loadTexture(i)});break;case"skin":s=this.loadSkin(i);break;case"animation":s=this._invokeOne(function(l){return l.loadAnimation&&l.loadAnimation(i)});break;case"camera":s=this.loadCamera(i);break;default:if(s=this._invokeOne(function(l){return l!=this&&l.getDependency&&l.getDependency(e,i)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(r,s)}return s}getDependencies(e){let i=this.cache.get(e);if(!i){const r=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];i=Promise.all(s.map(function(l,u){return r.getDependency(e,u)})),this.cache.add(e,i)}return i}loadBuffer(e){const i=this.json.buffers[e],r=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&e===0)return Promise.resolve(this.extensions[is.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(l,u){r.load(Qv.resolveURL(i.uri,s.path),l,void 0,function(){u(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(e){const i=this.json.bufferViews[e];return this.getDependency("buffer",i.buffer).then(function(r){const s=i.byteLength||0,l=i.byteOffset||0;return r.slice(l,l+s)})}loadAccessor(e){const i=this,r=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const u=O6[s.type],A=rS[s.componentType],g=s.normalized===!0,_=new A(s.count*u);return Promise.resolve(new fr(_,u,g))}const l=[];return s.bufferView!==void 0?l.push(this.getDependency("bufferView",s.bufferView)):l.push(null),s.sparse!==void 0&&(l.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(l).then(function(u){const A=u[0],g=O6[s.type],_=rS[s.componentType],b=_.BYTES_PER_ELEMENT,x=b*g,C=s.byteOffset||0,I=s.bufferView!==void 0?r.bufferViews[s.bufferView].byteStride:void 0,F=s.normalized===!0;let L,U;if(I&&I!==x){const P=Math.floor(C/I),H="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+P+":"+s.count;let N=i.cache.get(H);N||(L=new _(A,P*I,s.count*I/b),N=new tM(L,I/b),i.cache.add(H,N)),U=new Wy(N,g,C%I/b,F)}else A===null?L=new _(s.count*g):L=new _(A,C,s.count*g),U=new fr(L,g,F);if(s.sparse!==void 0){const P=O6.SCALAR,H=rS[s.sparse.indices.componentType],N=s.sparse.indices.byteOffset||0,z=s.sparse.values.byteOffset||0,W=new H(u[1],N,s.sparse.count*P),j=new _(u[2],z,s.sparse.count*g);A!==null&&(U=new fr(U.array.slice(),U.itemSize,U.normalized)),U.normalized=!1;for(let J=0,ie=W.length;J<ie;J++){const ee=W[J];if(U.setX(ee,j[J*g]),g>=2&&U.setY(ee,j[J*g+1]),g>=3&&U.setZ(ee,j[J*g+2]),g>=4&&U.setW(ee,j[J*g+3]),g>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}U.normalized=F}return U})}loadTexture(e){const i=this.json,r=this.options,l=i.textures[e].source,u=i.images[l];let A=this.textureLoader;if(u.uri){const g=r.manager.getHandler(u.uri);g!==null&&(A=g)}return this.loadTextureImage(e,l,A)}loadTextureImage(e,i,r){const s=this,l=this.json,u=l.textures[e],A=l.images[i],g=(A.uri||A.bufferView)+":"+u.sampler;if(this.textureCache[g])return this.textureCache[g];const _=this.loadImageSource(i,r).then(function(b){b.flipY=!1,b.name=u.name||A.name||"",b.name===""&&typeof A.uri=="string"&&A.uri.startsWith("data:image/")===!1&&(b.name=A.uri);const C=(l.samplers||{})[u.sampler]||{};return b.magFilter=cY[C.magFilter]||Or,b.minFilter=cY[C.minFilter]||Ju,b.wrapS=uY[C.wrapS]||Vd,b.wrapT=uY[C.wrapT]||Vd,b.generateMipmaps=!b.isCompressedTexture&&b.minFilter!==Da&&b.minFilter!==Or,s.associations.set(b,{textures:e}),b}).catch(function(){return null});return this.textureCache[g]=_,_}loadImageSource(e,i){const r=this,s=this.json,l=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(x=>x.clone());const u=s.images[e],A=self.URL||self.webkitURL;let g=u.uri||"",_=!1;if(u.bufferView!==void 0)g=r.getDependency("bufferView",u.bufferView).then(function(x){_=!0;const C=new Blob([x],{type:u.mimeType});return g=A.createObjectURL(C),g});else if(u.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const b=Promise.resolve(g).then(function(x){return new Promise(function(C,I){let F=C;i.isImageBitmapLoader===!0&&(F=function(L){const U=new Js(L);U.needsUpdate=!0,C(U)}),i.load(Qv.resolveURL(x,l.path),F,void 0,I)})}).then(function(x){return _===!0&&A.revokeObjectURL(g),Sv(x,u),x.userData.mimeType=u.mimeType||KBe(u.uri),x}).catch(function(x){throw console.error("THREE.GLTFLoader: Couldn't load texture",g),x});return this.sourceCache[e]=b,b}assignTexture(e,i,r,s){const l=this;return this.getDependency("texture",r.index).then(function(u){if(!u)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(u=u.clone(),u.channel=r.texCoord),l.extensions[is.KHR_TEXTURE_TRANSFORM]){const A=r.extensions!==void 0?r.extensions[is.KHR_TEXTURE_TRANSFORM]:void 0;if(A){const g=l.associations.get(u);u=l.extensions[is.KHR_TEXTURE_TRANSFORM].extendTexture(u,A),l.associations.set(u,g)}}return s!==void 0&&(u.colorSpace=s),e[i]=u,u})}assignFinalMaterial(e){const i=e.geometry;let r=e.material;const s=i.attributes.tangent===void 0,l=i.attributes.color!==void 0,u=i.attributes.normal===void 0;if(e.isPoints){const A="PointsMaterial:"+r.uuid;let g=this.cache.get(A);g||(g=new Ny,dl.prototype.copy.call(g,r),g.color.copy(r.color),g.map=r.map,g.sizeAttenuation=!1,this.cache.add(A,g)),r=g}else if(e.isLine){const A="LineBasicMaterial:"+r.uuid;let g=this.cache.get(A);g||(g=new Ac,dl.prototype.copy.call(g,r),g.color.copy(r.color),g.map=r.map,this.cache.add(A,g)),r=g}if(s||l||u){let A="ClonedMaterial:"+r.uuid+":";s&&(A+="derivative-tangents:"),l&&(A+="vertex-colors:"),u&&(A+="flat-shading:");let g=this.cache.get(A);g||(g=r.clone(),l&&(g.vertexColors=!0),u&&(g.flatShading=!0),s&&(g.normalScale&&(g.normalScale.y*=-1),g.clearcoatNormalScale&&(g.clearcoatNormalScale.y*=-1)),this.cache.add(A,g),this.associations.set(g,this.associations.get(r))),r=g}e.material=r}getMaterialType(){return Fw}loadMaterial(e){const i=this,r=this.json,s=this.extensions,l=r.materials[e];let u;const A={},g=l.extensions||{},_=[];if(g[is.KHR_MATERIALS_UNLIT]){const x=s[is.KHR_MATERIALS_UNLIT];u=x.getMaterialType(),_.push(x.extendParams(A,l,i))}else{const x=l.pbrMetallicRoughness||{};if(A.color=new Si(1,1,1),A.opacity=1,Array.isArray(x.baseColorFactor)){const C=x.baseColorFactor;A.color.setRGB(C[0],C[1],C[2],Co),A.opacity=C[3]}x.baseColorTexture!==void 0&&_.push(i.assignTexture(A,"map",x.baseColorTexture,rr)),A.metalness=x.metallicFactor!==void 0?x.metallicFactor:1,A.roughness=x.roughnessFactor!==void 0?x.roughnessFactor:1,x.metallicRoughnessTexture!==void 0&&(_.push(i.assignTexture(A,"metalnessMap",x.metallicRoughnessTexture)),_.push(i.assignTexture(A,"roughnessMap",x.metallicRoughnessTexture))),u=this._invokeOne(function(C){return C.getMaterialType&&C.getMaterialType(e)}),_.push(Promise.all(this._invokeAll(function(C){return C.extendMaterialParams&&C.extendMaterialParams(e,A)})))}l.doubleSided===!0&&(A.side=Ll);const b=l.alphaMode||Q6.OPAQUE;if(b===Q6.BLEND?(A.transparent=!0,A.depthWrite=!1):(A.transparent=!1,b===Q6.MASK&&(A.alphaTest=l.alphaCutoff!==void 0?l.alphaCutoff:.5)),l.normalTexture!==void 0&&u!==Pc&&(_.push(i.assignTexture(A,"normalMap",l.normalTexture)),A.normalScale=new ci(1,1),l.normalTexture.scale!==void 0)){const x=l.normalTexture.scale;A.normalScale.set(x,x)}if(l.occlusionTexture!==void 0&&u!==Pc&&(_.push(i.assignTexture(A,"aoMap",l.occlusionTexture)),l.occlusionTexture.strength!==void 0&&(A.aoMapIntensity=l.occlusionTexture.strength)),l.emissiveFactor!==void 0&&u!==Pc){const x=l.emissiveFactor;A.emissive=new Si().setRGB(x[0],x[1],x[2],Co)}return l.emissiveTexture!==void 0&&u!==Pc&&_.push(i.assignTexture(A,"emissiveMap",l.emissiveTexture,rr)),Promise.all(_).then(function(){const x=new u(A);return l.name&&(x.name=l.name),Sv(x,l),i.associations.set(x,{materials:e}),l.extensions&&N1(s,x,l),x})}createUniqueName(e){const i=Rr.sanitizeNodeName(e||"");return i in this.nodeNamesUsed?i+"_"+ ++this.nodeNamesUsed[i]:(this.nodeNamesUsed[i]=0,i)}loadGeometries(e){const i=this,r=this.extensions,s=this.primitiveCache;function l(A){return r[is.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(A,i).then(function(g){return hY(g,A,i)})}const u=[];for(let A=0,g=e.length;A<g;A++){const _=e[A],b=jBe(_),x=s[b];if(x)u.push(x.promise);else{let C;_.extensions&&_.extensions[is.KHR_DRACO_MESH_COMPRESSION]?C=l(_):C=hY(new Ln,_,i),s[b]={primitive:_,promise:C},u.push(C)}}return Promise.all(u)}loadMesh(e){const i=this,r=this.json,s=this.extensions,l=r.meshes[e],u=l.primitives,A=[];for(let g=0,_=u.length;g<_;g++){const b=u[g].material===void 0?qBe(this.cache):this.getDependency("material",u[g].material);A.push(b)}return A.push(i.loadGeometries(u)),Promise.all(A).then(function(g){const _=g.slice(0,g.length-1),b=g[g.length-1],x=[];for(let I=0,F=b.length;I<F;I++){const L=b[I],U=u[I];let P;const H=_[I];if(U.mode===_f.TRIANGLES||U.mode===_f.TRIANGLE_STRIP||U.mode===_f.TRIANGLE_FAN||U.mode===void 0)P=l.isSkinnedMesh===!0?new Zk(L,H):new Dr(L,H),P.isSkinnedMesh===!0&&P.normalizeSkinWeights(),U.mode===_f.TRIANGLE_STRIP?P.geometry=aY(P.geometry,zz):U.mode===_f.TRIANGLE_FAN&&(P.geometry=aY(P.geometry,ek));else if(U.mode===_f.LINES)P=new mp(L,H);else if(U.mode===_f.LINE_STRIP)P=new Mf(L,H);else if(U.mode===_f.LINE_LOOP)P=new Xz(L,H);else if(U.mode===_f.POINTS)P=new iS(L,H);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+U.mode);Object.keys(P.geometry.morphAttributes).length>0&&WBe(P,l),P.name=i.createUniqueName(l.name||"mesh_"+e),Sv(P,l),U.extensions&&N1(s,P,U),i.assignFinalMaterial(P),x.push(P)}for(let I=0,F=x.length;I<F;I++)i.associations.set(x[I],{meshes:e,primitives:I});if(x.length===1)return l.extensions&&N1(s,x[0],l),x[0];const C=new Ap;l.extensions&&N1(s,C,l),i.associations.set(C,{meshes:e});for(let I=0,F=x.length;I<F;I++)C.add(x[I]);return C})}loadCamera(e){let i;const r=this.json.cameras[e],s=r[r.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?i=new xo(uc.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):r.type==="orthographic"&&(i=new DA(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),r.name&&(i.name=this.createUniqueName(r.name)),Sv(i,r),Promise.resolve(i)}loadSkin(e){const i=this.json.skins[e],r=[];for(let s=0,l=i.joints.length;s<l;s++)r.push(this._loadNodeShallow(i.joints[s]));return i.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",i.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(s){const l=s.pop(),u=s,A=[],g=[];for(let _=0,b=u.length;_<b;_++){const x=u[_];if(x){A.push(x);const C=new Ki;l!==null&&C.fromArray(l.array,_*16),g.push(C)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[_])}return new MS(A,g)})}loadAnimation(e){const i=this.json,r=this,s=i.animations[e],l=s.name?s.name:"animation_"+e,u=[],A=[],g=[],_=[],b=[];for(let x=0,C=s.channels.length;x<C;x++){const I=s.channels[x],F=s.samplers[I.sampler],L=I.target,U=L.node,P=s.parameters!==void 0?s.parameters[F.input]:F.input,H=s.parameters!==void 0?s.parameters[F.output]:F.output;L.node!==void 0&&(u.push(this.getDependency("node",U)),A.push(this.getDependency("accessor",P)),g.push(this.getDependency("accessor",H)),_.push(F),b.push(L))}return Promise.all([Promise.all(u),Promise.all(A),Promise.all(g),Promise.all(_),Promise.all(b)]).then(function(x){const C=x[0],I=x[1],F=x[2],L=x[3],U=x[4],P=[];for(let H=0,N=C.length;H<N;H++){const z=C[H],W=I[H],j=F[H],J=L[H],ie=U[H];if(z===void 0)continue;z.updateMatrix&&z.updateMatrix();const ee=r._createAnimationTracks(z,W,j,J,ie);if(ee)for(let re=0;re<ee.length;re++)P.push(ee[re])}return new Uw(l,void 0,P)})}createNodeMesh(e){const i=this.json,r=this,s=i.nodes[e];return s.mesh===void 0?null:r.getDependency("mesh",s.mesh).then(function(l){const u=r._getNodeRef(r.meshCache,s.mesh,l);return s.weights!==void 0&&u.traverse(function(A){if(A.isMesh)for(let g=0,_=s.weights.length;g<_;g++)A.morphTargetInfluences[g]=s.weights[g]}),u})}loadNode(e){const i=this.json,r=this,s=i.nodes[e],l=r._loadNodeShallow(e),u=[],A=s.children||[];for(let _=0,b=A.length;_<b;_++)u.push(r.getDependency("node",A[_]));const g=s.skin===void 0?Promise.resolve(null):r.getDependency("skin",s.skin);return Promise.all([l,Promise.all(u),g]).then(function(_){const b=_[0],x=_[1],C=_[2];C!==null&&b.traverse(function(I){I.isSkinnedMesh&&I.bind(C,XBe)});for(let I=0,F=x.length;I<F;I++)b.add(x[I]);return b})}_loadNodeShallow(e){const i=this.json,r=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const l=i.nodes[e],u=l.name?s.createUniqueName(l.name):"",A=[],g=s._invokeOne(function(_){return _.createNodeMesh&&_.createNodeMesh(e)});return g&&A.push(g),l.camera!==void 0&&A.push(s.getDependency("camera",l.camera).then(function(_){return s._getNodeRef(s.cameraCache,l.camera,_)})),s._invokeAll(function(_){return _.createNodeAttachment&&_.createNodeAttachment(e)}).forEach(function(_){A.push(_)}),this.nodeCache[e]=Promise.all(A).then(function(_){let b;if(l.isBone===!0?b=new fS:_.length>1?b=new Ap:_.length===1?b=_[0]:b=new xr,b!==_[0])for(let x=0,C=_.length;x<C;x++)b.add(_[x]);if(l.name&&(b.userData.name=l.name,b.name=u),Sv(b,l),l.extensions&&N1(r,b,l),l.matrix!==void 0){const x=new Ki;x.fromArray(l.matrix),b.applyMatrix4(x)}else l.translation!==void 0&&b.position.fromArray(l.translation),l.rotation!==void 0&&b.quaternion.fromArray(l.rotation),l.scale!==void 0&&b.scale.fromArray(l.scale);return s.associations.has(b)||s.associations.set(b,{}),s.associations.get(b).nodes=e,b}),this.nodeCache[e]}loadScene(e){const i=this.extensions,r=this.json.scenes[e],s=this,l=new Ap;r.name&&(l.name=s.createUniqueName(r.name)),Sv(l,r),r.extensions&&N1(i,l,r);const u=r.nodes||[],A=[];for(let g=0,_=u.length;g<_;g++)A.push(s.getDependency("node",u[g]));return Promise.all(A).then(function(g){for(let b=0,x=g.length;b<x;b++)l.add(g[b]);const _=b=>{const x=new Map;for(const[C,I]of s.associations)(C instanceof dl||C instanceof Js)&&x.set(C,I);return b.traverse(C=>{const I=s.associations.get(C);I!=null&&x.set(C,I)}),x};return s.associations=_(l),l})}_createAnimationTracks(e,i,r,s,l){const u=[],A=e.name?e.name:e.uuid,g=[];Ey[l.path]===Ey.weights?e.traverse(function(C){C.morphTargetInfluences&&g.push(C.name?C.name:C.uuid)}):g.push(A);let _;switch(Ey[l.path]){case Ey.weights:_=Ky;break;case Ey.rotation:_=qv;break;case Ey.position:case Ey.scale:_=Xy;break;default:switch(r.itemSize){case 1:_=Ky;break;case 2:case 3:default:_=Xy;break}break}const b=s.interpolation!==void 0?VBe[s.interpolation]:Rw,x=this._getArrayFromAccessor(r);for(let C=0,I=g.length;C<I;C++){const F=new _(g[C]+"."+Ey[l.path],i.array,x,b);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(F),u.push(F)}return u}_getArrayFromAccessor(e){let i=e.array;if(e.normalized){const r=xH(i.constructor),s=new Float32Array(i.length);for(let l=0,u=i.length;l<u;l++)s[l]=i[l]*r;i=s}return i}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const s=this instanceof qv?GBe:Use;return new s(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function JBe(a,e,i){const r=e.attributes,s=new ia;if(r.POSITION!==void 0){const A=i.json.accessors[r.POSITION],g=A.min,_=A.max;if(g!==void 0&&_!==void 0){if(s.set(new Fe(g[0],g[1],g[2]),new Fe(_[0],_[1],_[2])),A.normalized){const b=xH(rS[A.componentType]);s.min.multiplyScalar(b),s.max.multiplyScalar(b)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const l=e.targets;if(l!==void 0){const A=new Fe,g=new Fe;for(let _=0,b=l.length;_<b;_++){const x=l[_];if(x.POSITION!==void 0){const C=i.json.accessors[x.POSITION],I=C.min,F=C.max;if(I!==void 0&&F!==void 0){if(g.setX(Math.max(Math.abs(I[0]),Math.abs(F[0]))),g.setY(Math.max(Math.abs(I[1]),Math.abs(F[1]))),g.setZ(Math.max(Math.abs(I[2]),Math.abs(F[2]))),C.normalized){const L=xH(rS[C.componentType]);g.multiplyScalar(L)}A.max(g)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(A)}a.boundingBox=s;const u=new dc;s.getCenter(u.center),u.radius=s.min.distanceTo(s.max)/2,a.boundingSphere=u}function hY(a,e,i){const r=e.attributes,s=[];function l(u,A){return i.getDependency("accessor",u).then(function(g){a.setAttribute(A,g)})}for(const u in r){const A=wH[u]||u.toLowerCase();A in a.attributes||s.push(l(r[u],A))}if(e.indices!==void 0&&!a.index){const u=i.getDependency("accessor",e.indices).then(function(A){a.setIndex(A)});s.push(u)}return lr.workingColorSpace!==Co&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${lr.workingColorSpace}" not supported.`),Sv(a,e),JBe(a,e,i),Promise.all(s).then(function(){return e.targets!==void 0?$Be(a,e.targets,i):a})}const ZBe=/^[og]\s*(.+)?/,e2e=/^mtllib /,t2e=/^usemtl /,i2e=/^usemap /,dY=/\s+/,AY=new Fe,H6=new Fe,pY=new Fe,fY=new Fe,ff=new Fe,sF=new Si;function n2e(){const a={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,i){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=i!==!1;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:i!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,l){const u=this._finalize(!1);u&&(u.inherited||u.groupCount<=0)&&this.materials.splice(u.index,1);const A={index:this.materials.length,name:s||"",mtllib:Array.isArray(l)&&l.length>0?l[l.length-1]:"",smooth:u!==void 0?u.smooth:this.smooth,groupStart:u!==void 0?u.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(g){const _={index:typeof g=="number"?g:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return _.clone=this.clone.bind(_),_}};return this.materials.push(A),A},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const l=this.currentMaterial();if(l&&l.groupEnd===-1&&(l.groupEnd=this.geometry.vertices.length/3,l.groupCount=l.groupEnd-l.groupStart,l.inherited=!1),s&&this.materials.length>1)for(let u=this.materials.length-1;u>=0;u--)this.materials[u].groupCount<=0&&this.materials.splice(u,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),l}},r&&r.name&&typeof r.clone=="function"){const s=r.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,i){const r=parseInt(e,10);return(r>=0?r-1:r+i/3)*3},parseNormalIndex:function(e,i){const r=parseInt(e,10);return(r>=0?r-1:r+i/3)*3},parseUVIndex:function(e,i){const r=parseInt(e,10);return(r>=0?r-1:r+i/2)*2},addVertex:function(e,i,r){const s=this.vertices,l=this.object.geometry.vertices;l.push(s[e+0],s[e+1],s[e+2]),l.push(s[i+0],s[i+1],s[i+2]),l.push(s[r+0],s[r+1],s[r+2])},addVertexPoint:function(e){const i=this.vertices;this.object.geometry.vertices.push(i[e+0],i[e+1],i[e+2])},addVertexLine:function(e){const i=this.vertices;this.object.geometry.vertices.push(i[e+0],i[e+1],i[e+2])},addNormal:function(e,i,r){const s=this.normals,l=this.object.geometry.normals;l.push(s[e+0],s[e+1],s[e+2]),l.push(s[i+0],s[i+1],s[i+2]),l.push(s[r+0],s[r+1],s[r+2])},addFaceNormal:function(e,i,r){const s=this.vertices,l=this.object.geometry.normals;AY.fromArray(s,e),H6.fromArray(s,i),pY.fromArray(s,r),ff.subVectors(pY,H6),fY.subVectors(AY,H6),ff.cross(fY),ff.normalize(),l.push(ff.x,ff.y,ff.z),l.push(ff.x,ff.y,ff.z),l.push(ff.x,ff.y,ff.z)},addColor:function(e,i,r){const s=this.colors,l=this.object.geometry.colors;s[e]!==void 0&&l.push(s[e+0],s[e+1],s[e+2]),s[i]!==void 0&&l.push(s[i+0],s[i+1],s[i+2]),s[r]!==void 0&&l.push(s[r+0],s[r+1],s[r+2])},addUV:function(e,i,r){const s=this.uvs,l=this.object.geometry.uvs;l.push(s[e+0],s[e+1]),l.push(s[i+0],s[i+1]),l.push(s[r+0],s[r+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const i=this.uvs;this.object.geometry.uvs.push(i[e+0],i[e+1])},addFace:function(e,i,r,s,l,u,A,g,_){const b=this.vertices.length;let x=this.parseVertexIndex(e,b),C=this.parseVertexIndex(i,b),I=this.parseVertexIndex(r,b);if(this.addVertex(x,C,I),this.addColor(x,C,I),A!==void 0&&A!==""){const F=this.normals.length;x=this.parseNormalIndex(A,F),C=this.parseNormalIndex(g,F),I=this.parseNormalIndex(_,F),this.addNormal(x,C,I)}else this.addFaceNormal(x,C,I);if(s!==void 0&&s!==""){const F=this.uvs.length;x=this.parseUVIndex(s,F),C=this.parseUVIndex(l,F),I=this.parseUVIndex(u,F),this.addUV(x,C,I),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const i=this.vertices.length;for(let r=0,s=e.length;r<s;r++){const l=this.parseVertexIndex(e[r],i);this.addVertexPoint(l),this.addColor(l)}},addLineGeometry:function(e,i){this.object.geometry.type="Line";const r=this.vertices.length,s=this.uvs.length;for(let l=0,u=e.length;l<u;l++)this.addVertexLine(this.parseVertexIndex(e[l],r));for(let l=0,u=i.length;l<u;l++)this.addUVLine(this.parseUVIndex(i[l],s))}};return a.startObject("",!1),a}class r2e extends sa{constructor(e){super(e),this.materials=null}load(e,i,r,s){const l=this,u=new Al(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(A){try{i(l.parse(A))}catch(g){s?s(g):console.error(g),l.manager.itemError(e)}},r,s)}setMaterials(e){return this.materials=e,this}parse(e){const i=new n2e;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const r=e.split(`
`);let s=[];for(let A=0,g=r.length;A<g;A++){const _=r[A].trimStart();if(_.length===0)continue;const b=_.charAt(0);if(b!=="#")if(b==="v"){const x=_.split(dY);switch(x[0]){case"v":i.vertices.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])),x.length>=7?(sF.setRGB(parseFloat(x[4]),parseFloat(x[5]),parseFloat(x[6]),rr),i.colors.push(sF.r,sF.g,sF.b)):i.colors.push(void 0,void 0,void 0);break;case"vn":i.normals.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3]));break;case"vt":i.uvs.push(parseFloat(x[1]),parseFloat(x[2]));break}}else if(b==="f"){const C=_.slice(1).trim().split(dY),I=[];for(let L=0,U=C.length;L<U;L++){const P=C[L];if(P.length>0){const H=P.split("/");I.push(H)}}const F=I[0];for(let L=1,U=I.length-1;L<U;L++){const P=I[L],H=I[L+1];i.addFace(F[0],P[0],H[0],F[1],P[1],H[1],F[2],P[2],H[2])}}else if(b==="l"){const x=_.substring(1).trim().split(" ");let C=[];const I=[];if(_.indexOf("/")===-1)C=x;else for(let F=0,L=x.length;F<L;F++){const U=x[F].split("/");U[0]!==""&&C.push(U[0]),U[1]!==""&&I.push(U[1])}i.addLineGeometry(C,I)}else if(b==="p"){const C=_.slice(1).trim().split(" ");i.addPointGeometry(C)}else if((s=ZBe.exec(_))!==null){const x=(" "+s[0].slice(1).trim()).slice(1);i.startObject(x)}else if(t2e.test(_))i.object.startMaterial(_.substring(7).trim(),i.materialLibraries);else if(e2e.test(_))i.materialLibraries.push(_.substring(7).trim());else if(i2e.test(_))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(b==="s"){if(s=_.split(" "),s.length>1){const C=s[1].trim().toLowerCase();i.object.smooth=C!=="0"&&C!=="off"}else i.object.smooth=!0;const x=i.object.currentMaterial();x&&(x.smooth=i.object.smooth)}else{if(_==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+_+'"')}}i.finalize();const l=new Ap;if(l.materialLibraries=[].concat(i.materialLibraries),!(i.objects.length===1&&i.objects[0].geometry.vertices.length===0)===!0)for(let A=0,g=i.objects.length;A<g;A++){const _=i.objects[A],b=_.geometry,x=_.materials,C=b.type==="Line",I=b.type==="Points";let F=!1;if(b.vertices.length===0)continue;const L=new Ln;L.setAttribute("position",new Ni(b.vertices,3)),b.normals.length>0&&L.setAttribute("normal",new Ni(b.normals,3)),b.colors.length>0&&(F=!0,L.setAttribute("color",new Ni(b.colors,3))),b.hasUVIndices===!0&&L.setAttribute("uv",new Ni(b.uvs,2));const U=[];for(let H=0,N=x.length;H<N;H++){const z=x[H],W=z.name+"_"+z.smooth+"_"+F;let j=i.materials[W];if(this.materials!==null){if(j=this.materials.create(z.name),C&&j&&!(j instanceof Ac)){const J=new Ac;dl.prototype.copy.call(J,j),J.color.copy(j.color),j=J}else if(I&&j&&!(j instanceof Ny)){const J=new Ny({size:10,sizeAttenuation:!1});dl.prototype.copy.call(J,j),J.color.copy(j.color),J.map=j.map,j=J}}j===void 0&&(C?j=new Ac:I?j=new Ny({size:1,sizeAttenuation:!1}):j=new nS,j.name=z.name,j.flatShading=!z.smooth,j.vertexColors=F,i.materials[W]=j),U.push(j)}let P;if(U.length>1){for(let H=0,N=x.length;H<N;H++){const z=x[H];L.addGroup(z.groupStart,z.groupCount,H)}C?P=new mp(L,U):I?P=new iS(L,U):P=new Dr(L,U)}else C?P=new mp(L,U[0]):I?P=new iS(L,U[0]):P=new Dr(L,U[0]);P.name=_.name,l.add(P)}else if(i.vertices.length>0){const A=new Ny({size:1,sizeAttenuation:!1}),g=new Ln;g.setAttribute("position",new Ni(i.vertices,3)),i.colors.length>0&&i.colors[0]!==void 0&&(g.setAttribute("color",new Ni(i.colors,3)),A.vertexColors=!0);const _=new iS(g,A);l.add(_)}return l}}const EA=new Si;class s2e extends sa{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,i,r,s){const l=this,u=new Al(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(A){try{i(l.parse(A))}catch(g){s?s(g):console.error(g),l.manager.itemError(e)}},r,s)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){function i(U,P=0){const H=/^ply([\s\S]*)end_header(\r\n|\r|\n)/;let N="";const z=H.exec(U);z!==null&&(N=z[1]);const W={comments:[],elements:[],headerLength:P,objInfo:""},j=N.split(/\r\n|\r|\n/);let J;function ie(ee,re){const se={type:ee[0]};return se.type==="list"?(se.name=ee[3],se.countType=ee[1],se.itemType=ee[2]):se.name=ee[1],se.name in re&&(se.name=re[se.name]),se}for(let ee=0;ee<j.length;ee++){let re=j[ee];if(re=re.trim(),re==="")continue;const se=re.split(/\s+/),ue=se.shift();switch(re=se.join(" "),ue){case"format":W.format=se[0],W.version=se[1];break;case"comment":W.comments.push(re);break;case"element":J!==void 0&&W.elements.push(J),J={},J.name=se[0],J.count=parseInt(se[1]),J.properties=[];break;case"property":J.properties.push(ie(se,L.propertyNameMapping));break;case"obj_info":W.objInfo=re;break;default:console.log("unhandled",ue,se)}}return J!==void 0&&W.elements.push(J),W}function r(U,P){switch(P){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(U);case"float":case"double":case"float32":case"float64":return parseFloat(U)}}function s(U,P){const H={};for(let N=0;N<U.length;N++){if(P.empty())return null;if(U[N].type==="list"){const z=[],W=r(P.next(),U[N].countType);for(let j=0;j<W;j++){if(P.empty())return null;z.push(r(P.next(),U[N].itemType))}H[U[N].name]=z}else H[U[N].name]=r(P.next(),U[N].type)}return H}function l(){const U={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(const P of Object.keys(L.customPropertyMapping))U[P]=[];return U}function u(U){const P=U.map(N=>N.name);function H(N){for(let z=0,W=N.length;z<W;z++){const j=N[z];if(P.includes(j))return j}return null}return{attrX:H(["x","px","posx"])||"x",attrY:H(["y","py","posy"])||"y",attrZ:H(["z","pz","posz"])||"z",attrNX:H(["nx","normalx"]),attrNY:H(["ny","normaly"]),attrNZ:H(["nz","normalz"]),attrS:H(["s","u","texture_u","tx"]),attrT:H(["t","v","texture_v","ty"]),attrR:H(["red","diffuse_red","r","diffuse_r"]),attrG:H(["green","diffuse_green","g","diffuse_g"]),attrB:H(["blue","diffuse_blue","b","diffuse_b"])}}function A(U,P){const H=l(),N=/end_header\s+(\S[\s\S]*\S|\S)\s*$/;let z,W;(W=N.exec(U))!==null?z=W[1].split(/\s+/):z=[];const j=new o2e(z);e:for(let J=0;J<P.elements.length;J++){const ie=P.elements[J],ee=u(ie.properties);for(let re=0;re<ie.count;re++){const se=s(ie.properties,j);if(!se)break e;_(H,ie.name,se,ee)}}return g(H)}function g(U){let P=new Ln;U.indices.length>0&&P.setIndex(U.indices),P.setAttribute("position",new Ni(U.vertices,3)),U.normals.length>0&&P.setAttribute("normal",new Ni(U.normals,3)),U.uvs.length>0&&P.setAttribute("uv",new Ni(U.uvs,2)),U.colors.length>0&&P.setAttribute("color",new Ni(U.colors,3)),(U.faceVertexUvs.length>0||U.faceVertexColors.length>0)&&(P=P.toNonIndexed(),U.faceVertexUvs.length>0&&P.setAttribute("uv",new Ni(U.faceVertexUvs,2)),U.faceVertexColors.length>0&&P.setAttribute("color",new Ni(U.faceVertexColors,3)));for(const H of Object.keys(L.customPropertyMapping))U[H].length>0&&P.setAttribute(H,new Ni(U[H],L.customPropertyMapping[H].length));return P.computeBoundingSphere(),P}function _(U,P,H,N){if(P==="vertex"){U.vertices.push(H[N.attrX],H[N.attrY],H[N.attrZ]),N.attrNX!==null&&N.attrNY!==null&&N.attrNZ!==null&&U.normals.push(H[N.attrNX],H[N.attrNY],H[N.attrNZ]),N.attrS!==null&&N.attrT!==null&&U.uvs.push(H[N.attrS],H[N.attrT]),N.attrR!==null&&N.attrG!==null&&N.attrB!==null&&(EA.setRGB(H[N.attrR]/255,H[N.attrG]/255,H[N.attrB]/255,rr),U.colors.push(EA.r,EA.g,EA.b));for(const z of Object.keys(L.customPropertyMapping))for(const W of L.customPropertyMapping[z])U[z].push(H[W])}else if(P==="face"){const z=H.vertex_indices||H.vertex_index,W=H.texcoord;z.length===3?(U.indices.push(z[0],z[1],z[2]),W&&W.length===6&&(U.faceVertexUvs.push(W[0],W[1]),U.faceVertexUvs.push(W[2],W[3]),U.faceVertexUvs.push(W[4],W[5]))):z.length===4&&(U.indices.push(z[0],z[1],z[3]),U.indices.push(z[1],z[2],z[3])),N.attrR!==null&&N.attrG!==null&&N.attrB!==null&&(EA.setRGB(H[N.attrR]/255,H[N.attrG]/255,H[N.attrB]/255,rr),U.faceVertexColors.push(EA.r,EA.g,EA.b),U.faceVertexColors.push(EA.r,EA.g,EA.b),U.faceVertexColors.push(EA.r,EA.g,EA.b))}}function b(U,P){const H={};let N=0;for(let z=0;z<P.length;z++){const W=P[z],j=W.valueReader;if(W.type==="list"){const J=[],ie=W.countReader.read(U+N);N+=W.countReader.size;for(let ee=0;ee<ie;ee++)J.push(j.read(U+N)),N+=j.size;H[W.name]=J}else H[W.name]=j.read(U+N),N+=j.size}return[H,N]}function x(U,P,H){function N(z,W,j){switch(W){case"int8":case"char":return{read:J=>z.getInt8(J),size:1};case"uint8":case"uchar":return{read:J=>z.getUint8(J),size:1};case"int16":case"short":return{read:J=>z.getInt16(J,j),size:2};case"uint16":case"ushort":return{read:J=>z.getUint16(J,j),size:2};case"int32":case"int":return{read:J=>z.getInt32(J,j),size:4};case"uint32":case"uint":return{read:J=>z.getUint32(J,j),size:4};case"float32":case"float":return{read:J=>z.getFloat32(J,j),size:4};case"float64":case"double":return{read:J=>z.getFloat64(J,j),size:8}}}for(let z=0,W=U.length;z<W;z++){const j=U[z];j.type==="list"?(j.countReader=N(P,j.countType,H),j.valueReader=N(P,j.itemType,H)):j.valueReader=N(P,j.type,H)}}function C(U,P){const H=l(),N=P.format==="binary_little_endian",z=new DataView(U,P.headerLength);let W,j=0;for(let J=0;J<P.elements.length;J++){const ie=P.elements[J],ee=ie.properties,re=u(ee);x(ee,z,N);for(let se=0;se<ie.count;se++){W=b(j,ee),j+=W[1];const ue=W[0];_(H,ie.name,ue,re)}}return g(H)}function I(U){let P=0,H=!0,N="";const z=[],W=new TextDecoder().decode(U.subarray(0,5)),j=/^ply\r\n/.test(W);do{const J=String.fromCharCode(U[P++]);J!==`
`&&J!=="\r"?N+=J:(N==="end_header"&&(H=!1),N!==""&&(z.push(N),N=""))}while(H&&P<U.length);return j===!0&&P++,{headerText:z.join("\r")+"\r",headerLength:P}}let F;const L=this;if(e instanceof ArrayBuffer){const U=new Uint8Array(e),{headerText:P,headerLength:H}=I(U),N=i(P,H);if(N.format==="ascii"){const z=new TextDecoder().decode(U);F=A(z,N)}else F=C(e,N)}else F=A(e,i(e));return F}}class o2e{constructor(e){this.arr=e,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}}class a2e extends sa{constructor(e){super(e)}load(e,i,r,s){const l=this,u=new Al(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(A){try{i(l.parse(A))}catch(g){s?s(g):console.error(g),l.manager.itemError(e)}},r,s)}parse(e){function i(_){const b=new DataView(_),x=32/8*3+32/8*3*3+16/8,C=b.getUint32(80,!0);if(80+32/8+C*x===b.byteLength)return!0;const F=[115,111,108,105,100];for(let L=0;L<5;L++)if(r(F,b,L))return!1;return!0}function r(_,b,x){for(let C=0,I=_.length;C<I;C++)if(_[C]!==b.getUint8(x+C))return!1;return!0}function s(_){const b=new DataView(_),x=b.getUint32(80,!0);let C,I,F,L=!1,U,P,H,N,z;for(let se=0;se<70;se++)b.getUint32(se,!1)==1129270351&&b.getUint8(se+4)==82&&b.getUint8(se+5)==61&&(L=!0,U=new Float32Array(x*3*3),P=b.getUint8(se+6)/255,H=b.getUint8(se+7)/255,N=b.getUint8(se+8)/255,z=b.getUint8(se+9)/255);const W=84,j=12*4+2,J=new Ln,ie=new Float32Array(x*3*3),ee=new Float32Array(x*3*3),re=new Si;for(let se=0;se<x;se++){const ue=W+se*j,fe=b.getFloat32(ue,!0),pe=b.getFloat32(ue+4,!0),xe=b.getFloat32(ue+8,!0);if(L){const ce=b.getUint16(ue+48,!0);(ce&32768)===0?(C=(ce&31)/31,I=(ce>>5&31)/31,F=(ce>>10&31)/31):(C=P,I=H,F=N)}for(let ce=1;ce<=3;ce++){const _e=ue+ce*12,ye=se*3*3+(ce-1)*3;ie[ye]=b.getFloat32(_e,!0),ie[ye+1]=b.getFloat32(_e+4,!0),ie[ye+2]=b.getFloat32(_e+8,!0),ee[ye]=fe,ee[ye+1]=pe,ee[ye+2]=xe,L&&(re.setRGB(C,I,F,rr),U[ye]=re.r,U[ye+1]=re.g,U[ye+2]=re.b)}}return J.setAttribute("position",new fr(ie,3)),J.setAttribute("normal",new fr(ee,3)),L&&(J.setAttribute("color",new fr(U,3)),J.hasColors=!0,J.alpha=z),J}function l(_){const b=new Ln,x=/solid([\s\S]*?)endsolid/g,C=/facet([\s\S]*?)endfacet/g,I=/solid\s(.+)/;let F=0;const L=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,U=new RegExp("vertex"+L+L+L,"g"),P=new RegExp("normal"+L+L+L,"g"),H=[],N=[],z=[],W=new Fe;let j,J=0,ie=0,ee=0;for(;(j=x.exec(_))!==null;){ie=ee;const re=j[0],se=(j=I.exec(re))!==null?j[1]:"";for(z.push(se);(j=C.exec(re))!==null;){let pe=0,xe=0;const ce=j[0];for(;(j=P.exec(ce))!==null;)W.x=parseFloat(j[1]),W.y=parseFloat(j[2]),W.z=parseFloat(j[3]),xe++;for(;(j=U.exec(ce))!==null;)H.push(parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3])),N.push(W.x,W.y,W.z),pe++,ee++;xe!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+F),pe!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+F),F++}const ue=ie,fe=ee-ie;b.userData.groupNames=z,b.addGroup(ue,fe,J),J++}return b.setAttribute("position",new Ni(H,3)),b.setAttribute("normal",new Ni(N,3)),b}function u(_){return typeof _!="string"?new TextDecoder().decode(_):_}function A(_){if(typeof _=="string"){const b=new Uint8Array(_.length);for(let x=0;x<_.length;x++)b[x]=_.charCodeAt(x)&255;return b.buffer||b}else return _}const g=A(e);return i(g)?s(g):l(u(e))}}class l2e extends sa{load(e,i,r,s){const l=this,u=new Al(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(A){try{i(l.parse(A))}catch(g){s?s(g):console.error(g),l.manager.itemError(e)}},r,s)}parse(e){const i=e.split(`
`),r=[],s=[],l=new Si;for(let A of i){if(A=A.trim(),A.charAt(0)==="#")continue;const g=A.split(/\s+/);if(g.length===3&&(r.push(parseFloat(g[0])),r.push(parseFloat(g[1])),r.push(parseFloat(g[2]))),g.length===6){r.push(parseFloat(g[0])),r.push(parseFloat(g[1])),r.push(parseFloat(g[2]));const _=parseFloat(g[3])/255,b=parseFloat(g[4])/255,x=parseFloat(g[5])/255;l.setRGB(_,b,x,rr),s.push(l.r,l.g,l.b)}}const u=new Ln;return u.setAttribute("position",new Ni(r,3)),s.length>0&&u.setAttribute("color",new Ni(s,3)),u}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rU=globalThis,x7=rU.ShadowRoot&&(rU.ShadyCSS===void 0||rU.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,kse=Symbol(),gY=new WeakMap;let c2e=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==kse)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(x7&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=gY.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&gY.set(i,e))}return e}toString(){return this.cssText}};const u2e=a=>new c2e(typeof a=="string"?a:a+"",void 0,kse),h2e=(a,e)=>{if(x7)a.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),s=rU.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=i.cssText,a.appendChild(r)}},mY=x7?a=>a:a=>a instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return u2e(i)})(a):a;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:d2e,defineProperty:A2e,getOwnPropertyDescriptor:p2e,getOwnPropertyNames:f2e,getOwnPropertySymbols:g2e,getPrototypeOf:m2e}=Object,zy=globalThis,_Y=zy.trustedTypes,_2e=_Y?_Y.emptyScript:"",z6=zy.reactiveElementPolyfillSupport,ZI=(a,e)=>a,ok={toAttribute(a,e){switch(e){case Boolean:a=a?_2e:null;break;case Object:case Array:a=a==null?a:JSON.stringify(a)}return a},fromAttribute(a,e){let i=a;switch(e){case Boolean:i=a!==null;break;case Number:i=a===null?null:Number(a);break;case Object:case Array:try{i=JSON.parse(a)}catch{i=null}}return i}},C7=(a,e)=>!d2e(a,e),vY={attribute:!0,type:String,converter:ok,reflect:!1,useDefault:!1,hasChanged:C7};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),zy.litPropertyMetadata??(zy.litPropertyMetadata=new WeakMap);let sw=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=vY){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,i);s!==void 0&&A2e(this.prototype,e,s)}}static getPropertyDescriptor(e,i,r){const{get:s,set:l}=p2e(this.prototype,e)??{get(){return this[i]},set(u){this[i]=u}};return{get:s,set(u){const A=s==null?void 0:s.call(this);l==null||l.call(this,u),this.requestUpdate(e,A,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??vY}static _$Ei(){if(this.hasOwnProperty(ZI("elementProperties")))return;const e=m2e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ZI("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ZI("properties"))){const i=this.properties,r=[...f2e(i),...g2e(i)];for(const s of r)this.createProperty(s,i[s])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,s]of i)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const s=this._$Eu(i,r);s!==void 0&&this._$Eh.set(s,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)i.unshift(mY(s))}else e!==void 0&&i.push(mY(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(i=>i(this))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return h2e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){var l;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const u=(((l=r.converter)==null?void 0:l.toAttribute)!==void 0?r.converter:ok).toAttribute(i,r.type);this._$Em=e,u==null?this.removeAttribute(s):this.setAttribute(s,u),this._$Em=null}}_$AK(e,i){var l,u;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const A=r.getPropertyOptions(s),g=typeof A.converter=="function"?{fromAttribute:A.converter}:((l=A.converter)==null?void 0:l.fromAttribute)!==void 0?A.converter:ok;this._$Em=s,this[s]=g.fromAttribute(i,A.type)??((u=this._$Ej)==null?void 0:u.get(s))??null,this._$Em=null}}requestUpdate(e,i,r){var s;if(e!==void 0){const l=this.constructor,u=this[e];if(r??(r=l.getPropertyOptions(e)),!((r.hasChanged??C7)(u,i)||r.useDefault&&r.reflect&&u===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(l._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:s,wrapped:l},u){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,u??i??this[e]),l!==!0||u!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[l,u]of this._$Ep)this[l]=u;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[l,u]of s){const{wrapped:A}=u,g=this[l];A!==!0||this._$AL.has(l)||g===void 0||this.C(l,void 0,u,g)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(s=>{var l;return(l=s.hostUpdate)==null?void 0:l.call(s)}),this.update(i)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(i=>this._$ET(i,this[i]))),this._$EM()}updated(e){}firstUpdated(e){}};sw.elementStyles=[],sw.shadowRootOptions={mode:"open"},sw[ZI("elementProperties")]=new Map,sw[ZI("finalized")]=new Map,z6==null||z6({ReactiveElement:sw}),(zy.reactiveElementVersions??(zy.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const v2e={attribute:!0,type:String,converter:ok,reflect:!1,hasChanged:C7},y2e=(a=v2e,e,i)=>{const{kind:r,metadata:s}=i;let l=globalThis.litPropertyMetadata.get(s);if(l===void 0&&globalThis.litPropertyMetadata.set(s,l=new Map),r==="setter"&&((a=Object.create(a)).wrapped=!0),l.set(i.name,a),r==="accessor"){const{name:u}=i;return{set(A){const g=e.get.call(this);e.set.call(this,A),this.requestUpdate(u,g,a)},init(A){return A!==void 0&&this.C(u,void 0,a,A),A}}}if(r==="setter"){const{name:u}=i;return function(A){const g=this[u];e.call(this,A),this.requestUpdate(u,g,a)}}throw Error("Unsupported decorator location: "+r)};function Kn(a){return(e,i)=>typeof i=="object"?y2e(a,e,i):((r,s,l)=>{const u=s.hasOwnProperty(l);return s.constructor.createProperty(l,r),u?Object.getOwnPropertyDescriptor(s,l):void 0})(a,e,i)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eT=globalThis,ak=eT.trustedTypes,yY=ak?ak.createPolicy("lit-html",{createHTML:a=>a}):void 0,Lse="$lit$",Uy=`lit$${Math.random().toFixed(9).slice(2)}$`,Pse="?"+Uy,b2e=`<${Pse}>`,kw=document,UT=()=>kw.createComment(""),kT=a=>a===null||typeof a!="object"&&typeof a!="function",E7=Array.isArray,w2e=a=>E7(a)||typeof(a==null?void 0:a[Symbol.iterator])=="function",G6=`[ 	
\f\r]`,lI=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,bY=/-->/g,wY=/>/g,H1=RegExp(`>|${G6}(?:([^\\s"'>=/]+)(${G6}*=${G6}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),xY=/'/g,CY=/"/g,Ose=/^(?:script|style|textarea|title)$/i,x2e=a=>(e,...i)=>({_$litType$:a,strings:e,values:i}),xL=x2e(1),mS=Symbol.for("lit-noChange"),pu=Symbol.for("lit-nothing"),EY=new WeakMap,cw=kw.createTreeWalker(kw,129);function Qse(a,e){if(!E7(a)||!a.hasOwnProperty("raw"))throw Error("invalid template strings array");return yY!==void 0?yY.createHTML(e):e}const C2e=(a,e)=>{const i=a.length-1,r=[];let s,l=e===2?"<svg>":e===3?"<math>":"",u=lI;for(let A=0;A<i;A++){const g=a[A];let _,b,x=-1,C=0;for(;C<g.length&&(u.lastIndex=C,b=u.exec(g),b!==null);)C=u.lastIndex,u===lI?b[1]==="!--"?u=bY:b[1]!==void 0?u=wY:b[2]!==void 0?(Ose.test(b[2])&&(s=RegExp("</"+b[2],"g")),u=H1):b[3]!==void 0&&(u=H1):u===H1?b[0]===">"?(u=s??lI,x=-1):b[1]===void 0?x=-2:(x=u.lastIndex-b[2].length,_=b[1],u=b[3]===void 0?H1:b[3]==='"'?CY:xY):u===CY||u===xY?u=H1:u===bY||u===wY?u=lI:(u=H1,s=void 0);const I=u===H1&&a[A+1].startsWith("/>")?" ":"";l+=u===lI?g+b2e:x>=0?(r.push(_),g.slice(0,x)+Lse+g.slice(x)+Uy+I):g+Uy+(x===-2?A:I)}return[Qse(a,l+(a[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class LT{constructor({strings:e,_$litType$:i},r){let s;this.parts=[];let l=0,u=0;const A=e.length-1,g=this.parts,[_,b]=C2e(e,i);if(this.el=LT.createElement(_,r),cw.currentNode=this.el.content,i===2||i===3){const x=this.el.content.firstChild;x.replaceWith(...x.childNodes)}for(;(s=cw.nextNode())!==null&&g.length<A;){if(s.nodeType===1){if(s.hasAttributes())for(const x of s.getAttributeNames())if(x.endsWith(Lse)){const C=b[u++],I=s.getAttribute(x).split(Uy),F=/([.?@])?(.*)/.exec(C);g.push({type:1,index:l,name:F[2],strings:I,ctor:F[1]==="."?S2e:F[1]==="?"?B2e:F[1]==="@"?I2e:CL}),s.removeAttribute(x)}else x.startsWith(Uy)&&(g.push({type:6,index:l}),s.removeAttribute(x));if(Ose.test(s.tagName)){const x=s.textContent.split(Uy),C=x.length-1;if(C>0){s.textContent=ak?ak.emptyScript:"";for(let I=0;I<C;I++)s.append(x[I],UT()),cw.nextNode(),g.push({type:2,index:++l});s.append(x[C],UT())}}}else if(s.nodeType===8)if(s.data===Pse)g.push({type:2,index:l});else{let x=-1;for(;(x=s.data.indexOf(Uy,x+1))!==-1;)g.push({type:7,index:l}),x+=Uy.length-1}l++}}static createElement(e,i){const r=kw.createElement("template");return r.innerHTML=e,r}}function _S(a,e,i=a,r){var u,A;if(e===mS)return e;let s=r!==void 0?(u=i._$Co)==null?void 0:u[r]:i._$Cl;const l=kT(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==l&&((A=s==null?void 0:s._$AO)==null||A.call(s,!1),l===void 0?s=void 0:(s=new l(a),s._$AT(a,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=s:i._$Cl=s),s!==void 0&&(e=_S(a,s._$AS(a,e.values),s,r)),e}let E2e=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??kw).importNode(i,!0);cw.currentNode=s;let l=cw.nextNode(),u=0,A=0,g=r[0];for(;g!==void 0;){if(u===g.index){let _;g.type===2?_=new S7(l,l.nextSibling,this,e):g.type===1?_=new g.ctor(l,g.name,g.strings,this,e):g.type===6&&(_=new T2e(l,this,e)),this._$AV.push(_),g=r[++A]}u!==(g==null?void 0:g.index)&&(l=cw.nextNode(),u++)}return cw.currentNode=kw,s}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},S7=class Nse{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,s){this.type=2,this._$AH=pu,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=_S(this,e,i),kT(e)?e===pu||e==null||e===""?(this._$AH!==pu&&this._$AR(),this._$AH=pu):e!==this._$AH&&e!==mS&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):w2e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==pu&&kT(this._$AH)?this._$AA.nextSibling.data=e:this.T(kw.createTextNode(e)),this._$AH=e}$(e){var l;const{values:i,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=LT.createElement(Qse(r.h,r.h[0]),this.options)),r);if(((l=this._$AH)==null?void 0:l._$AD)===s)this._$AH.p(i);else{const u=new E2e(s,this),A=u.u(this.options);u.p(i),this.T(A),this._$AH=u}}_$AC(e){let i=EY.get(e.strings);return i===void 0&&EY.set(e.strings,i=new LT(e)),i}k(e){E7(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,s=0;for(const l of e)s===i.length?i.push(r=new Nse(this.O(UT()),this.O(UT()),this,this.options)):r=i[s],r._$AI(l),s++;s<i.length&&(this._$AR(r&&r._$AB.nextSibling,s),i.length=s)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},CL=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,s,l){this.type=1,this._$AH=pu,this._$AN=void 0,this.element=e,this.name=i,this._$AM=s,this.options=l,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=pu}_$AI(e,i=this,r,s){const l=this.strings;let u=!1;if(l===void 0)e=_S(this,e,i,0),u=!kT(e)||e!==this._$AH&&e!==mS,u&&(this._$AH=e);else{const A=e;let g,_;for(e=l[0],g=0;g<l.length-1;g++)_=_S(this,A[r+g],i,g),_===mS&&(_=this._$AH[g]),u||(u=!kT(_)||_!==this._$AH[g]),_===pu?e=pu:e!==pu&&(e+=(_??"")+l[g+1]),this._$AH[g]=_}u&&!s&&this.j(e)}j(e){e===pu?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},S2e=class extends CL{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===pu?void 0:e}},B2e=class extends CL{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==pu)}},I2e=class extends CL{constructor(e,i,r,s,l){super(e,i,r,s,l),this.type=5}_$AI(e,i=this){if((e=_S(this,e,i,0)??pu)===mS)return;const r=this._$AH,s=e===pu&&r!==pu||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,l=e!==pu&&(r===pu||s);s&&this.element.removeEventListener(this.name,this,r),l&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},T2e=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){_S(this,e)}};const V6=eT.litHtmlPolyfillSupport;V6==null||V6(LT,S7),(eT.litHtmlVersions??(eT.litHtmlVersions=[])).push("3.3.0");const Hse=(a,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const l=(i==null?void 0:i.renderBefore)??null;r._$litPart$=s=new S7(e.insertBefore(UT(),l),l,void 0,i??{})}return s._$AI(a),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yw=globalThis;class sU extends sw{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Hse(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return mS}}var One;sU._$litElement$=!0,sU.finalized=!0,(One=yw.litElementHydrateSupport)==null||One.call(yw,{LitElement:sU});const q6=yw.litElementPolyfillSupport;q6==null||q6({LitElement:sU});(yw.litElementVersions??(yw.litElementVersions=[])).push("4.2.0");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zse=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,Gse=zse&&self.XRSession.prototype.requestHitTestSource!=null,$6=self.ResizeObserver!=null,W6=self.IntersectionObserver!=null,Vse=Gse;(()=>{const a=navigator.userAgent||navigator.vendor||self.opera;let e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(e=!0),e})();const M2e=/android/i.test(navigator.userAgent),R2e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,D2e=/firefox/i.test(navigator.userAgent),F2e=/OculusBrowser/.test(navigator.userAgent),U2e=M2e&&!D2e&&!F2e,k2e=!!(window.webkit&&window.webkit.messageHandlers),SY=(()=>{if(R2e){if(k2e)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const a=document.createElement("a");return!!(a.relList&&a.relList.supports&&a.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qse=a=>a&&a!=="null"?L2e(a):null,BY=()=>{if(Vse)return;const a=[];throw zse||a.push("WebXR Device API"),Gse||a.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${a.join(", ")}`)},L2e=a=>new URL(a,window.location.toString()).toString(),P2e=(a,e)=>{let i=null;const r=(...s)=>{i==null&&(a(...s),i=self.setTimeout(()=>i=null,e))};return r.flush=()=>{i!=null&&(self.clearTimeout(i),i=null)},r},IY=(a,e)=>{let i=null;return(...r)=>{i!=null&&self.clearTimeout(i),i=self.setTimeout(()=>{i=null,a(...r)},e)}},Vm=(a,e,i)=>Math.max(e,Math.min(i,a)),TY=(()=>{const a="model-viewer-debug-mode",e=new RegExp(`[?&]${a}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),O2e=(a=0)=>new Promise(e=>setTimeout(e,a)),Q2e=(a,e,i=null)=>new Promise(r=>{function s(l){(!i||i(l))&&(r(l),a.removeEventListener(e,s))}a.addEventListener(e,s)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z1=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l};const N2e=.5,H2e=0,z2e=1,G2e=1,kI=Symbol("currentEnvironmentMap"),LI=Symbol("currentBackground"),lk=Symbol("updateEnvironment"),oF=Symbol("cancelEnvironmentUpdate"),V2e=a=>{var e,i,r;class s extends a{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=H2e,this.shadowSoftness=z2e,this.exposure=G2e,this.toneMapping="auto",this.skyboxHeight="0",this[e]=null,this[i]=null,this[r]=null}updated(u){super.updated(u),u.has("shadowIntensity")&&(this[Ri].setShadowIntensity(this.shadowIntensity*N2e),this[gu]()),u.has("shadowSoftness")&&(this[Ri].setShadowSoftness(this.shadowSoftness),this[gu]()),u.has("exposure")&&(this[Ri].exposure=this.exposure,this[gu]()),u.has("toneMapping")&&(this[Ri].toneMapping=this.toneMapping==="aces"?Qk:this.toneMapping==="agx"?Uz:this.toneMapping==="reinhard"?Dz:this.toneMapping==="cineon"?Fz:this.toneMapping==="linear"?Rz:this.toneMapping==="none"?xf:aS,this[gu]()),(u.has("environmentImage")||u.has("skyboxImage"))&&this[vS]()&&this[lk](),u.has("skyboxHeight")&&(this[Ri].setGroundedSkybox(),this[gu]())}hasBakedShadow(){return this[Ri].bakedShadows.size>0}async[(e=kI,i=LI,r=oF,lk)](){const{skyboxImage:u,environmentImage:A}=this;this[oF]!=null&&(this[oF](),this[oF]=null);const{textureUtils:g}=this[ao];if(g==null)return;const _=this[Lw].beginActivity("environment-update");try{const{environmentMap:b,skybox:x}=await g.generateEnvironmentMapAndSkybox(qse(u),A,C=>_(Vm(C,0,1)),this.withCredentials);this[kI]!==b&&(this[kI]=b,this.dispatchEvent(new CustomEvent("environment-change"))),x!=null?this[LI]=x.name===b.name?b:x:this[LI]=null,this[Ri].setEnvironmentAndSkybox(this[kI],this[LI])}catch(b){if(b instanceof Error)throw this[Ri].setEnvironmentAndSkybox(null,null),b}finally{_(1)}}}return z1([Kn({type:String,attribute:"environment-image"})],s.prototype,"environmentImage",void 0),z1([Kn({type:String,attribute:"skybox-image"})],s.prototype,"skyboxImage",void 0),z1([Kn({type:Number,attribute:"shadow-intensity"})],s.prototype,"shadowIntensity",void 0),z1([Kn({type:Number,attribute:"shadow-softness"})],s.prototype,"shadowSoftness",void 0),z1([Kn({type:Number})],s.prototype,"exposure",void 0),z1([Kn({type:String,attribute:"tone-mapping"})],s.prototype,"toneMapping",void 0),z1([Kn({type:String,attribute:"skybox-height"})],s.prototype,"skyboxHeight",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2e=xL`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2e=xL`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2e=xL`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2e=xL`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${W2e}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${$2e}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${q2e}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,K2e=a=>{Hse(j2e,a)};var MY=function(){var a="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",i=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var s=WebAssembly.validate(i)?e:a,l,u=WebAssembly.instantiate(A(s),{}).then(function(P){l=P.instance,l.exports.__wasm_call_ctors()});function A(P){for(var H=new Uint8Array(P.length),N=0;N<P.length;++N){var z=P.charCodeAt(N);H[N]=z>96?z-97:z>64?z-39:z+4}for(var W=0,N=0;N<P.length;++N)H[W++]=H[N]<60?r[H[N]]:(H[N]-60)*64+H[++N];return H.buffer.slice(0,W)}function g(P,H,N,z,W,j){var J=l.exports.sbrk,ie=N+3&-4,ee=J(ie*z),re=J(W.length),se=new Uint8Array(l.exports.memory.buffer);se.set(W,re);var ue=P(ee,N,z,re,W.length);if(ue==0&&j&&j(ee,ie,z),H.set(se.subarray(ee,ee+N*z)),J(ee-J(0)),ue!=0)throw new Error("Malformed buffer data: "+ue)}var _={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},b={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},x=[],C=0;function I(P){var H={object:new Worker(P),pending:0,requests:{}};return H.object.onmessage=function(N){var z=N.data;H.pending-=z.count,H.requests[z.id][z.action](z.value),delete H.requests[z.id]},H}function F(P){for(var H="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(A(s))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+g.toString()+U.toString(),N=new Blob([H],{type:"text/javascript"}),z=URL.createObjectURL(N),W=0;W<P;++W)x[W]=I(z);URL.revokeObjectURL(z)}function L(P,H,N,z,W){for(var j=x[0],J=1;J<x.length;++J)x[J].pending<j.pending&&(j=x[J]);return new Promise(function(ie,ee){var re=new Uint8Array(N),se=C++;j.pending+=P,j.requests[se]={resolve:ie,reject:ee},j.object.postMessage({id:se,count:P,size:H,source:re,mode:z,filter:W},[re.buffer])})}function U(P){u.then(function(){var H=P.data;try{var N=new Uint8Array(H.count*H.size);g(l.exports[H.mode],N,H.count,H.size,H.source,l.exports[H.filter]),self.postMessage({id:H.id,count:H.count,action:"resolve",value:N},[N.buffer])}catch(z){self.postMessage({id:H.id,count:H.count,action:"reject",value:z})}})}return{ready:u,supported:!0,useWorkers:function(P){F(P)},decodeVertexBuffer:function(P,H,N,z,W){g(l.exports.meshopt_decodeVertexBuffer,P,H,N,z,l.exports[_[W]])},decodeIndexBuffer:function(P,H,N,z){g(l.exports.meshopt_decodeIndexBuffer,P,H,N,z)},decodeIndexSequence:function(P,H,N,z){g(l.exports.meshopt_decodeIndexSequence,P,H,N,z)},decodeGltfBuffer:function(P,H,N,z,W,j){g(l.exports[b[W]],P,H,N,z,l.exports[_[j]])},decodeGltfBufferAsync:function(P,H,N,z,W){return x.length>0?L(P,H,N,b[z],_[W]):u.then(function(){var j=new Uint8Array(P*H);return g(l.exports[b[z]],j,P,H,N,l.exports[_[W]]),j})}}}();const j6=new WeakMap;class X2e extends sa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,i,r,s){const l=new Al(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,u=>{this.parse(u,i,s)},r,s)}parse(e,i,r=()=>{}){this.decodeDracoFile(e,i,null,null,rr,r).catch(r)}decodeDracoFile(e,i,r,s,l=Co,u=()=>{}){const A={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!r,vertexColorSpace:l};return this.decodeGeometry(e,A).then(i).catch(u)}decodeGeometry(e,i){const r=JSON.stringify(i);if(j6.has(e)){const g=j6.get(e);if(g.key===r)return g.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const l=this.workerNextTaskID++,u=e.byteLength,A=this._getWorker(l,u).then(g=>(s=g,new Promise((_,b)=>{s._callbacks[l]={resolve:_,reject:b},s.postMessage({type:"decode",id:l,taskConfig:i,buffer:e},[e])}))).then(g=>this._createGeometry(g.geometry));return A.catch(()=>!0).then(()=>{s&&l&&this._releaseTask(s,l)}),j6.set(e,{key:r,promise:A}),A}_createGeometry(e){const i=new Ln;e.index&&i.setIndex(new fr(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const s=e.attributes[r],l=s.name,u=s.array,A=s.itemSize,g=new fr(u,A);l==="color"&&(this._assignVertexColorSpace(g,s.vertexColorSpace),g.normalized=!(u instanceof Float32Array)),i.setAttribute(l,g)}return i}_assignVertexColorSpace(e,i){if(i!==rr)return;const r=new Si;for(let s=0,l=e.count;s<l;s++)r.fromBufferAttribute(e,s),lr.toWorkingColorSpace(r,rr),e.setXYZ(s,r.r,r.g,r.b)}_loadLibrary(e,i){const r=new Al(this.manager);return r.setPath(this.decoderPath),r.setResponseType(i),r.setWithCredentials(this.withCredentials),new Promise((s,l)=>{r.load(e,s,void 0,l)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",i=[];return e?i.push(this._loadLibrary("draco_decoder.js","text")):(i.push(this._loadLibrary("draco_wasm_wrapper.js","text")),i.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(i).then(r=>{const s=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const l=Y2e.toString(),u=["/* draco decoder */",s,"","/* worker */",l.substring(l.indexOf("{")+1,l.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([u]))}),this.decoderPending}_getWorker(e,i){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(l){const u=l.data;switch(u.type){case"decode":s._callbacks[u.id].resolve(u);break;case"error":s._callbacks[u.id].reject(u);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+u.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,l){return s._taskLoad>l._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=i,r._taskLoad+=i,r})}_releaseTask(e,i){e._taskLoad-=e._taskCosts[i],delete e._callbacks[i],delete e._taskCosts[i]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Y2e(){let a,e;onmessage=function(u){const A=u.data;switch(A.type){case"init":a=A.decoderConfig,e=new Promise(function(b){a.onModuleLoaded=function(x){b({draco:x})},DracoDecoderModule(a)});break;case"decode":const g=A.buffer,_=A.taskConfig;e.then(b=>{const x=b.draco,C=new x.Decoder;try{const I=i(x,C,new Int8Array(g),_),F=I.attributes.map(L=>L.array.buffer);I.index&&F.push(I.index.array.buffer),self.postMessage({type:"decode",id:A.id,geometry:I},F)}catch(I){console.error(I),self.postMessage({type:"error",id:A.id,error:I.message})}finally{x.destroy(C)}});break}};function i(u,A,g,_){const b=_.attributeIDs,x=_.attributeTypes;let C,I;const F=A.GetEncodedGeometryType(g);if(F===u.TRIANGULAR_MESH)C=new u.Mesh,I=A.DecodeArrayToMesh(g,g.byteLength,C);else if(F===u.POINT_CLOUD)C=new u.PointCloud,I=A.DecodeArrayToPointCloud(g,g.byteLength,C);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!I.ok()||C.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+I.error_msg());const L={index:null,attributes:[]};for(const U in b){const P=self[x[U]];let H,N;if(_.useUniqueIDs)N=b[U],H=A.GetAttributeByUniqueId(C,N);else{if(N=A.GetAttributeId(C,u[b[U]]),N===-1)continue;H=A.GetAttribute(C,N)}const z=s(u,A,C,U,P,H);U==="color"&&(z.vertexColorSpace=_.vertexColorSpace),L.attributes.push(z)}return F===u.TRIANGULAR_MESH&&(L.index=r(u,A,C)),u.destroy(C),L}function r(u,A,g){const b=g.num_faces()*3,x=b*4,C=u._malloc(x);A.GetTrianglesUInt32Array(g,x,C);const I=new Uint32Array(u.HEAPF32.buffer,C,b).slice();return u._free(C),{array:I,itemSize:1}}function s(u,A,g,_,b,x){const C=x.num_components(),F=g.num_points()*C,L=F*b.BYTES_PER_ELEMENT,U=l(u,b),P=u._malloc(L);A.GetAttributeDataArrayForAllPoints(g,x,U,L,P);const H=new b(u.HEAPF32.buffer,P,F).slice();return u._free(P),{name:_,array:H,itemSize:C}}function l(u,A){switch(A){case Float32Array:return u.DT_FLOAT32;case Int8Array:return u.DT_INT8;case Int16Array:return u.DT_INT16;case Int32Array:return u.DT_INT32;case Uint8Array:return u.DT_UINT8;case Uint16Array:return u.DT_UINT16;case Uint32Array:return u.DT_UINT32}}}class J2e{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const i=this.workerCreator();i.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=i}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,i){const r=this.workersResolve[e];if(r&&r(i),this.queue.length){const{resolve:s,msg:l,transfer:u}=this.queue.shift();this.workersResolve[e]=s,this.workers[e].postMessage(l,u)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,i){return new Promise(r=>{const s=this._getIdleWorker();s!==-1?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=r,this.workers[s].postMessage(e,i)):this.queue.push({resolve:r,msg:e,transfer:i})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Z2e=0,RY=2,eIe=1,DY=2,tIe=0,iIe=1,nIe=10,rIe=0,$se=9,Wse=15,jse=16,Kse=22,Xse=37,Yse=43,Jse=76,Zse=83,eoe=97,toe=100,ioe=103,noe=109,roe=165,soe=166,B7=1000066e3;let sIe=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},cI=class{constructor(e,i,r,s){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+i,r),this._littleEndian=s,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const i=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,i}_skip(e){return this._offset+=e,this}_scan(e,i){i===void 0&&(i=0);const r=this._offset;let s=0;for(;this._dataView.getUint8(this._offset)!==i&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,s)}};const Dd=[171,75,84,88,32,50,48,187,13,10,26,10];function FY(a){return new TextDecoder().decode(a)}function oIe(a){const e=new Uint8Array(a.buffer,a.byteOffset,Dd.length);if(e[0]!==Dd[0]||e[1]!==Dd[1]||e[2]!==Dd[2]||e[3]!==Dd[3]||e[4]!==Dd[4]||e[5]!==Dd[5]||e[6]!==Dd[6]||e[7]!==Dd[7]||e[8]!==Dd[8]||e[9]!==Dd[9]||e[10]!==Dd[10]||e[11]!==Dd[11])throw new Error("Missing KTX 2.0 identifier.");const i=new sIe,r=17*Uint32Array.BYTES_PER_ELEMENT,s=new cI(a,Dd.length,r,!0);i.vkFormat=s._nextUint32(),i.typeSize=s._nextUint32(),i.pixelWidth=s._nextUint32(),i.pixelHeight=s._nextUint32(),i.pixelDepth=s._nextUint32(),i.layerCount=s._nextUint32(),i.faceCount=s._nextUint32();const l=s._nextUint32();i.supercompressionScheme=s._nextUint32();const u=s._nextUint32(),A=s._nextUint32(),g=s._nextUint32(),_=s._nextUint32(),b=s._nextUint64(),x=s._nextUint64(),C=new cI(a,Dd.length+r,3*l*8,!0);for(let _e=0;_e<l;_e++)i.levels.push({levelData:new Uint8Array(a.buffer,a.byteOffset+C._nextUint64(),C._nextUint64()),uncompressedByteLength:C._nextUint64()});const I=new cI(a,u,A,!0),F={vendorId:I._skip(4)._nextUint16(),descriptorType:I._nextUint16(),versionNumber:I._nextUint16(),descriptorBlockSize:I._nextUint16(),colorModel:I._nextUint8(),colorPrimaries:I._nextUint8(),transferFunction:I._nextUint8(),flags:I._nextUint8(),texelBlockDimension:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],bytesPlane:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],samples:[]},L=(F.descriptorBlockSize/4-6)/4;for(let _e=0;_e<L;_e++){const ye={bitOffset:I._nextUint16(),bitLength:I._nextUint8(),channelType:I._nextUint8(),samplePosition:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&ye.channelType?(ye.sampleLower=I._nextInt32(),ye.sampleUpper=I._nextInt32()):(ye.sampleLower=I._nextUint32(),ye.sampleUpper=I._nextUint32()),F.samples[_e]=ye}i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(F);const U=new cI(a,g,_,!0);for(;U._offset<_;){const _e=U._nextUint32(),ye=U._scan(_e),Oe=FY(ye);if(i.keyValue[Oe]=U._nextUint8Array(_e-ye.byteLength-1),Oe.match(/^ktx/i)){const ge=FY(i.keyValue[Oe]);i.keyValue[Oe]=ge.substring(0,ge.lastIndexOf("\0"))}U._skip(_e%4?4-_e%4:0)}if(x<=0)return i;const P=new cI(a,b,x,!0),H=P._nextUint16(),N=P._nextUint16(),z=P._nextUint32(),W=P._nextUint32(),j=P._nextUint32(),J=P._nextUint32(),ie=[];for(let _e=0;_e<l;_e++)ie.push({imageFlags:P._nextUint32(),rgbSliceByteOffset:P._nextUint32(),rgbSliceByteLength:P._nextUint32(),alphaSliceByteOffset:P._nextUint32(),alphaSliceByteLength:P._nextUint32()});const ee=b+P._offset,re=ee+z,se=re+W,ue=se+j,fe=new Uint8Array(a.buffer,a.byteOffset+ee,z),pe=new Uint8Array(a.buffer,a.byteOffset+re,W),xe=new Uint8Array(a.buffer,a.byteOffset+se,j),ce=new Uint8Array(a.buffer,a.byteOffset+ue,J);return i.globalData={endpointCount:H,selectorCount:N,imageDescs:ie,endpointsData:fe,selectorsData:pe,tablesData:xe,extendedData:ce},i}let K6,Ev,CH;const X6={env:{emscripten_notify_memory_growth:function(a){CH=new Uint8Array(Ev.exports.memory.buffer)}}};let aIe=class{init(){return K6||(K6=typeof fetch<"u"?fetch("data:application/wasm;base64,"+UY).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,X6)).then(this._init):WebAssembly.instantiate(Buffer.from(UY,"base64"),X6).then(this._init),K6)}_init(e){Ev=e.instance,X6.env.emscripten_notify_memory_growth(0)}decode(e,i=0){if(!Ev)throw new Error("ZSTDDecoder: Await .init() before decoding.");const r=e.byteLength,s=Ev.exports.malloc(r);CH.set(e,s),i=i||Number(Ev.exports.ZSTD_findDecompressedSize(s,r));const l=Ev.exports.malloc(i),u=Ev.exports.ZSTD_decompress(l,i,s,r),A=CH.slice(l,l+u);return Ev.exports.free(s),Ev.exports.free(l),A}};const UY="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",lIe="display-p3",cIe="display-p3-linear",Y6=new WeakMap;let J6=0,Z6;class bf extends sa{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new J2e,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new Al(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const i=e.loadAsync("basis_transcoder.js"),r=new Al(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);const s=r.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([i,s]).then(([l,u])=>{const A=bf.BasisWorker.toString(),g=["/* constants */","let _EngineFormat = "+JSON.stringify(bf.EngineFormat),"let _EngineType = "+JSON.stringify(bf.EngineType),"let _TranscoderFormat = "+JSON.stringify(bf.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(bf.BasisFormat),"/* basis_transcoder.js */",l,"/* worker */",A.substring(A.indexOf("{")+1,A.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([g])),this.transcoderBinary=u,this.workerPool.setWorkerCreator(()=>{const _=new Worker(this.workerSourceURL),b=this.transcoderBinary.slice(0);return _.postMessage({type:"init",config:this.workerConfig,transcoderBinary:b},[b]),_})}),J6>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),J6++}return this.transcoderPending}load(e,i,r,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const l=new Al(this.manager);l.setResponseType("arraybuffer"),l.setWithCredentials(this.withCredentials),l.load(e,u=>{this.parse(u,i,s)},r,s)}parse(e,i,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(Y6.has(e))return Y6.get(e).promise.then(i).catch(r);this._createTexture(e).then(s=>i?i(s):null).catch(r)}_createTextureFrom(e,i){const{type:r,error:s,data:{faces:l,width:u,height:A,format:g,type:_,dfdFlags:b}}=e;if(r==="error")return Promise.reject(s);let x;if(i.faceCount===6)x=new Fre(l,g,_);else{const C=l[0].mipmaps;x=i.layerCount>1?new Dre(C,u,A,i.layerCount,g,_):new Ov(C,u,A,g,_)}return x.minFilter=l[0].mipmaps.length===1?Or:Ju,x.magFilter=Or,x.generateMipmaps=!1,x.needsUpdate=!0,x.colorSpace=ooe(i),x.premultiplyAlpha=!!(b&eIe),x}async _createTexture(e,i={}){const r=oIe(new Uint8Array(e)),s=r.vkFormat===B7&&r.dataFormatDescriptor[0].colorModel===167;if(!(r.vkFormat===rIe||s&&!this.workerConfig.astcHDRSupported))return hIe(r);const u=i,A=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:u},[e])).then(g=>this._createTextureFrom(g.data,r));return Y6.set(e,{promise:A}),A}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),J6--,this}}bf.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2};bf.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25};bf.EngineFormat={RGBAFormat:lo,RGBA_ASTC_4x4_Format:cS,RGB_BPTC_UNSIGNED_Format:yT,RGBA_BPTC_Format:eS,RGBA_ETC2_EAC_Format:vT,RGBA_PVRTC_4BPPV1_Format:gT,RGBA_S3TC_DXT5_Format:ZE,RGB_ETC1_Format:mT,RGB_ETC2_Format:_T,RGB_PVRTC_4BPPV1_Format:fT,RGBA_S3TC_DXT1_Format:JE};bf.EngineType={UnsignedByteType:$a,HalfFloatType:Ol,FloatType:ra};bf.BasisWorker=function(){let a,e,i;const r=_EngineFormat,s=_EngineType,l=_TranscoderFormat,u=_BasisFormat;self.addEventListener("message",function(F){const L=F.data;switch(L.type){case"init":a=L.config,A(L.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:U,buffers:P,width:H,height:N,hasAlpha:z,format:W,type:j,dfdFlags:J}=g(L.buffer);self.postMessage({type:"transcode",id:L.id,data:{faces:U,width:H,height:N,hasAlpha:z,format:W,type:j,dfdFlags:J}},P)}catch(U){console.error(U),self.postMessage({type:"error",id:L.id,error:U.message})}});break}});function A(F){e=new Promise(L=>{i={wasmBinary:F,onRuntimeInitialized:L},BASIS(i)}).then(()=>{i.initializeBasis(),i.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function g(F){const L=new i.KTX2File(new Uint8Array(F));function U(){L.close(),L.delete()}if(!L.isValid())throw U(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let P;if(L.isUASTC())P=u.UASTC;else if(L.isETC1S())P=u.ETC1S;else if(L.isHDR())P=u.UASTC_HDR;else throw new Error("THREE.KTX2Loader: Unknown Basis encoding");const H=L.getWidth(),N=L.getHeight(),z=L.getLayers()||1,W=L.getLevels(),j=L.getFaces(),J=L.getHasAlpha(),ie=L.getDFDFlags(),{transcoderFormat:ee,engineFormat:re,engineType:se}=x(P,H,N,J);if(!H||!N||!W)throw U(),new Error("THREE.KTX2Loader:	Invalid texture");if(!L.startTranscoding())throw U(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ue=[],fe=[];for(let pe=0;pe<j;pe++){const xe=[];for(let ce=0;ce<W;ce++){const _e=[];let ye,Oe;for(let Ee=0;Ee<z;Ee++){const ke=L.getImageLevelInfo(ce,Ee,pe);pe===0&&ce===0&&Ee===0&&(ke.origWidth%4!==0||ke.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),W>1?(ye=ke.origWidth,Oe=ke.origHeight):(ye=ke.width,Oe=ke.height);let je=new Uint8Array(L.getImageTranscodedSizeInBytes(ce,Ee,0,ee));const Ie=L.transcodeImage(je,ce,Ee,pe,ee,0,-1,-1);if(se===s.HalfFloatType&&(je=new Uint16Array(je.buffer,je.byteOffset,je.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!Ie)throw U(),new Error("THREE.KTX2Loader: .transcodeImage failed.");_e.push(je)}const ge=I(_e);xe.push({data:ge,width:ye,height:Oe}),fe.push(ge.buffer)}ue.push({mipmaps:xe,width:H,height:N,format:re,type:se})}return U(),{faces:ue,buffers:fe,width:H,height:N,hasAlpha:J,dfdFlags:ie,format:re,type:se}}const _=[{if:"astcSupported",basisFormat:[u.UASTC],transcoderFormat:[l.ASTC_4x4,l.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],engineType:[s.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[u.ETC1S,u.UASTC],transcoderFormat:[l.BC7_M5,l.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],engineType:[s.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[u.ETC1S,u.UASTC],transcoderFormat:[l.BC1,l.BC3],engineFormat:[r.RGBA_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],engineType:[s.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[u.ETC1S,u.UASTC],transcoderFormat:[l.ETC1,l.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],engineType:[s.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[u.ETC1S,u.UASTC],transcoderFormat:[l.ETC1],engineFormat:[r.RGB_ETC1_Format],engineType:[s.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[u.ETC1S,u.UASTC],transcoderFormat:[l.PVRTC1_4_RGB,l.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],engineType:[s.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[u.UASTC_HDR],transcoderFormat:[l.BC6H],engineFormat:[r.RGB_BPTC_UNSIGNED_Format],engineType:[s.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[u.ETC1S,u.UASTC],transcoderFormat:[l.RGBA32,l.RGBA32],engineFormat:[r.RGBAFormat,r.RGBAFormat],engineType:[s.UnsignedByteType,s.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[u.UASTC_HDR],transcoderFormat:[l.RGBA_HALF],engineFormat:[r.RGBAFormat],engineType:[s.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],b={[u.ETC1S]:_.filter(F=>F.basisFormat.includes(u.ETC1S)).sort((F,L)=>F.priorityUASTC-L.priorityUASTC),[u.UASTC]:_.filter(F=>F.basisFormat.includes(u.UASTC)).sort((F,L)=>F.priorityUASTC-L.priorityUASTC),[u.UASTC_HDR]:_.filter(F=>F.basisFormat.includes(u.UASTC_HDR)).sort((F,L)=>F.priorityHDR-L.priorityHDR)};function x(F,L,U,P){const H=b[F];for(let N=0;N<H.length;N++){const z=H[N];if(z.if&&!a[z.if]||!z.basisFormat.includes(F)||P&&z.transcoderFormat.length<2||z.needsPowerOfTwo&&!(C(L)&&C(U)))continue;const W=z.transcoderFormat[P?1:0],j=z.engineFormat[P?1:0],J=z.engineType[0];return{transcoderFormat:W,engineFormat:j,engineType:J}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}function C(F){return F<=2?!0:(F&F-1)===0&&F!==0}function I(F){if(F.length===1)return F[0];let L=0;for(let H=0;H<F.length;H++){const N=F[H];L+=N.byteLength}const U=new Uint8Array(L);let P=0;for(let H=0;H<F.length;H++){const N=F[H];U.set(N,P),P+=N.byteLength}return U}};const uIe=new Set([lo,Oy,Fv]),e8={[noe]:lo,[eoe]:lo,[Xse]:lo,[Yse]:lo,[ioe]:Oy,[Zse]:Oy,[jse]:Oy,[Kse]:Oy,[toe]:Fv,[Jse]:Fv,[Wse]:Fv,[$se]:Fv,[B7]:cS,[soe]:uS,[roe]:uS},t8={[noe]:ra,[eoe]:Ol,[Xse]:$a,[Yse]:$a,[ioe]:ra,[Zse]:Ol,[jse]:$a,[Kse]:$a,[toe]:ra,[Jse]:Ol,[Wse]:$a,[$se]:$a,[B7]:Ol,[soe]:$a,[roe]:$a};async function hIe(a){const{vkFormat:e}=a;if(e8[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let i;a.supercompressionScheme===RY&&(Z6||(Z6=new Promise(async l=>{const u=new aIe;await u.init(),l(u)})),i=await Z6);const r=[];for(let l=0;l<a.levels.length;l++){const u=Math.max(1,a.pixelWidth>>l),A=Math.max(1,a.pixelHeight>>l),g=a.pixelDepth?Math.max(1,a.pixelDepth>>l):0,_=a.levels[l];let b;if(a.supercompressionScheme===Z2e)b=_.levelData;else if(a.supercompressionScheme===RY)b=i.decode(_.levelData,_.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let x;t8[e]===ra?x=new Float32Array(b.buffer,b.byteOffset,b.byteLength/Float32Array.BYTES_PER_ELEMENT):t8[e]===Ol?x=new Uint16Array(b.buffer,b.byteOffset,b.byteLength/Uint16Array.BYTES_PER_ELEMENT):x=b,r.push({data:x,width:u,height:A,depth:g})}let s;if(uIe.has(e8[e]))s=a.pixelDepth===0?new Cf(r[0].data,a.pixelWidth,a.pixelHeight):new ZT(r[0].data,a.pixelWidth,a.pixelHeight,a.pixelDepth);else{if(a.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");s=new Ov(r,a.pixelWidth,a.pixelHeight),s.minFilter=r.length===1?Or:Ju,s.magFilter=Or}return s.mipmaps=r,s.type=t8[e],s.format=e8[e],s.colorSpace=ooe(a),s.needsUpdate=!0,Promise.resolve(s)}function ooe(a){const e=a.dataFormatDescriptor[0];return e.colorPrimaries===iIe?e.transferFunction===DY?rr:Co:e.colorPrimaries===nIe?e.transferFunction===DY?lIe:cIe:(e.colorPrimaries===tIe||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),dp)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kY,LY;const Cg=Symbol("retainerCount"),gv=Symbol("recentlyUsed"),aF=Symbol("evict"),uI=Symbol("evictionThreshold"),i8=Symbol("cache");class dIe{constructor(e,i=5){this[kY]=new Map,this[LY]=[],this[i8]=e,this[uI]=i}set evictionThreshold(e){this[uI]=e,this[aF]()}get evictionThreshold(){return this[uI]}get cache(){return this[i8]}retainerCount(e){return this[Cg].get(e)||0}reset(){this[Cg].clear(),this[gv]=[]}retain(e){this[Cg].has(e)||this[Cg].set(e,0),this[Cg].set(e,this[Cg].get(e)+1);const i=this[gv].indexOf(e);i!==-1&&this[gv].splice(i,1),this[gv].unshift(e),this[aF]()}release(e){this[Cg].has(e)&&this[Cg].set(e,Math.max(this[Cg].get(e)-1,0)),this[aF]()}[(kY=Cg,LY=gv,aF)](){if(!(this[gv].length<this[uI]))for(let e=this[gv].length-1;e>=this[uI];--e){const i=this[gv][e];this[Cg].get(i)===0&&(this[i8].delete(i),this[gv].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AIe=a=>{const e=[],i=new Set;for(const r of a){let s=r,l=0;for(;i.has(s);)s=r+"."+ ++l;i.add(s),e.push(s)}return e},pIe=a=>{const e=new Map;for(const i of a.mappings)for(const r of i.variants)e.set(r,{material:null,gltfMaterialIndex:i.material});return e};class fIe{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const i=this.parser,r=i.json;if(r.extensions===void 0||r.extensions[this.name]===void 0)return null;const l=r.extensions[this.name].variants||[],u=AIe(l.map(A=>A.name));for(const A of e.scenes)A.traverse(g=>{const _=g;if(!_.material)return;const b=i.associations.get(_);if(b==null||b.meshes==null||b.primitives==null)return;const F=r.meshes[b.meshes].primitives[b.primitives].extensions;!F||!F[this.name]||(_.userData.variantMaterials=pIe(F[this.name]))});return e.userData.variants=u,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aoe,PY;Js.DEFAULT_ANISOTROPY=4;const gIe=(a,e,i=()=>{})=>{const r=s=>{const l=s.loaded/s.total;i(Math.max(0,Math.min(1,isFinite(l)?l:1)))};return new Promise((s,l)=>{e.load(a,s,r,l)})},mIe=a=>new Promise((e,i)=>{const r=document.createElement("script");document.body.appendChild(r),r.onload=e,r.onerror=i,r.async=!0,r.src=a}),mv=new Map,n8=new Map;let OY;const QY=new X2e;let NY;const r8=new bf;let s8,o8;const J1=Symbol("loader"),Dy=Symbol("evictionPolicy"),HY=Symbol("GLTFInstance");class Pd extends FA{static setDRACODecoderLocation(e){OY=e,QY.setDecoderPath(e)}static getDRACODecoderLocation(){return OY}static setKTX2TranscoderLocation(e){NY=e,r8.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return NY}static setMeshoptDecoderLocation(e){s8!==e&&(s8=e,o8=mIe(e).then(()=>MY.ready).then(()=>MY))}static getMeshoptDecoderLocation(){return s8}static initializeKTX2Loader(e){r8.detectSupport(e)}static get cache(){return mv}static clearCache(){mv.forEach((e,i)=>{this.delete(i)}),this[Dy].reset()}static has(e){return mv.has(e)}static async delete(e){if(!this.has(e))return;const i=mv.get(e);n8.delete(e),mv.delete(e),(await i).dispose()}static hasFinishedLoading(e){return!!n8.get(e)}constructor(e){super(),this[PY]=new Dse().register(i=>new fIe(i)),this[HY]=e,this[J1].setDRACOLoader(QY),this[J1].setKTX2Loader(r8)}get[(aoe=Dy,PY=J1,Dy)](){return this.constructor[Dy]}async preload(e,i,r=()=>{}){if(this[J1].setWithCredentials(i.withCredentials),this.dispatchEvent({type:"preload",element:i,src:e}),!mv.has(e)){o8!=null&&this[J1].setMeshoptDecoder(await o8);const s=gIe(e,this[J1],A=>{r(A*.8)}),l=this[HY],u=s.then(A=>l.prepare(A)).then(A=>(r(.9),new l(A))).catch(A=>(console.error(A),new l));mv.set(e,u)}await mv.get(e),n8.set(e,!0),r&&r(1)}async load(e,i,r=()=>{}){await this.preload(e,i,r);const l=await(await mv.get(e)).clone();return this[Dy].retain(e),l.dispose=()=>{this[Dy].release(e)},l}}Pd[aoe]=new dIe(Pd);class _Ie extends xr{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new ci(.5,.5),this.addEventListener("removed",function(){this.traverse(function(i){i.element instanceof i.element.ownerDocument.defaultView.Element&&i.element.parentNode!==null&&i.element.remove()})})}copy(e,i){return super.copy(e,i),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const pE=new Fe,zY=new Ki,GY=new Ki,VY=new Fe,qY=new Fe;class vIe{constructor(e={}){const i=this;let r,s,l,u;const A={objects:new WeakMap},g=e.element!==void 0?e.element:document.createElement("div");g.style.overflow="hidden",this.domElement=g,this.getSize=function(){return{width:r,height:s}},this.render=function(F,L){F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),L.parent===null&&L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),zY.copy(L.matrixWorldInverse),GY.multiplyMatrices(L.projectionMatrix,zY),b(F,F,L),I(F)},this.setSize=function(F,L){r=F,s=L,l=r/2,u=s/2,g.style.width=F+"px",g.style.height=L+"px"};function _(F){F.isCSS2DObject&&(F.element.style.display="none");for(let L=0,U=F.children.length;L<U;L++)_(F.children[L])}function b(F,L,U){if(F.visible===!1){_(F);return}if(F.isCSS2DObject){pE.setFromMatrixPosition(F.matrixWorld),pE.applyMatrix4(GY);const P=pE.z>=-1&&pE.z<=1&&F.layers.test(U.layers)===!0,H=F.element;H.style.display=P===!0?"":"none",P===!0&&(F.onBeforeRender(i,L,U),H.style.transform="translate("+-100*F.center.x+"%,"+-100*F.center.y+"%)translate("+(pE.x*l+l)+"px,"+(-pE.y*u+u)+"px)",H.parentNode!==g&&g.appendChild(H),F.onAfterRender(i,L,U));const N={distanceToCameraSquared:x(U,F)};A.objects.set(F,N)}for(let P=0,H=F.children.length;P<H;P++)b(F.children[P],L,U)}function x(F,L){return VY.setFromMatrixPosition(F.matrixWorld),qY.setFromMatrixPosition(L.matrixWorld),VY.distanceToSquared(qY)}function C(F){const L=[];return F.traverseVisible(function(U){U.isCSS2DObject&&L.push(U)}),L}function I(F){const L=C(F).sort(function(P,H){if(P.renderOrder!==H.renderOrder)return H.renderOrder-P.renderOrder;const N=A.objects.get(P).distanceToCameraSquared,z=A.objects.get(H).distanceToCameraSquared;return N-z}),U=L.length;for(let P=0,H=L.length;P<H;P++)L[P].element.style.zIndex=U-P}}}function lF(a,e,i){let r=i;const s=new Fe;return a.updateWorldMatrix(!0,!0),a.traverseVisible(l=>{const{geometry:u}=l;if(u!==void 0){const{position:A}=u.attributes;if(A!==void 0)for(let g=0,_=A.count;g<_;g++)l.isMesh?l.getVertexPosition(g,s):s.fromBufferAttribute(A,g),l.isSkinnedMesh||s.applyMatrix4(l.matrixWorld),r=e(r,s)}}),r}const $Y={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class ck{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(e){return new TIe(e)}),this.register(function(e){return new MIe(e)}),this.register(function(e){return new UIe(e)}),this.register(function(e){return new kIe(e)}),this.register(function(e){return new LIe(e)}),this.register(function(e){return new PIe(e)}),this.register(function(e){return new RIe(e)}),this.register(function(e){return new DIe(e)}),this.register(function(e){return new FIe(e)}),this.register(function(e){return new OIe(e)}),this.register(function(e){return new QIe(e)}),this.register(function(e){return new NIe(e)}),this.register(function(e){return new HIe(e)}),this.register(function(e){return new zIe(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,i,r,s){const l=new IIe,u=[];for(let A=0,g=this.pluginCallbacks.length;A<g;A++)u.push(this.pluginCallbacks[A](l));l.setPlugins(u),l.setTextureUtils(this.textureUtils),l.writeAsync(e,i,s).catch(r)}parseAsync(e,i){const r=this;return new Promise(function(s,l){r.parse(e,s,l,i)})}}const ts={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},a8="KHR_mesh_quantization",fp={};fp[Da]=ts.NEAREST;fp[zw]=ts.NEAREST_MIPMAP_NEAREST;fp[qm]=ts.NEAREST_MIPMAP_LINEAR;fp[Or]=ts.LINEAR;fp[Lv]=ts.LINEAR_MIPMAP_NEAREST;fp[Ju]=ts.LINEAR_MIPMAP_LINEAR;fp[$o]=ts.CLAMP_TO_EDGE;fp[Vd]=ts.REPEAT;fp[Vv]=ts.MIRRORED_REPEAT;const WY={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},yIe=new Si,jY=12,bIe=1179937895,wIe=2,KY=8,xIe=1313821514,CIe=5130562;function PI(a,e){return a.length===e.length&&a.every(function(i,r){return i===e[r]})}function EIe(a){return new TextEncoder().encode(a).buffer}function SIe(a){return PI(a.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function BIe(a,e,i){const r={min:new Array(a.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(a.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+i;s++)for(let l=0;l<a.itemSize;l++){let u;a.itemSize>4?u=a.array[s*a.itemSize+l]:(l===0?u=a.getX(s):l===1?u=a.getY(s):l===2?u=a.getZ(s):l===3&&(u=a.getW(s)),a.normalized===!0&&(u=uc.normalize(u,a.array))),r.min[l]=Math.min(r.min[l],u),r.max[l]=Math.max(r.max[l],u)}return r}function loe(a){return Math.ceil(a/4)*4}function l8(a,e=0){const i=loe(a.byteLength);if(i!==a.byteLength){const r=new Uint8Array(i);if(r.set(new Uint8Array(a)),e!==0)for(let s=a.byteLength;s<i;s++)r[s]=e;return r.buffer}return a}function XY(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function YY(a,e){if(a.toBlob!==void 0)return new Promise(r=>a.toBlob(r,e));let i;return e==="image/jpeg"?i=.92:e==="image/webp"&&(i=.8),a.convertToBlob({type:e,quality:i})}class IIe{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+jT}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}async writeAsync(e,i,r={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(e),await Promise.all(this.pending);const s=this,l=s.buffers,u=s.json;r=s.options;const A=s.extensionsUsed,g=s.extensionsRequired,_=new Blob(l,{type:"application/octet-stream"}),b=Object.keys(A),x=Object.keys(g);if(b.length>0&&(u.extensionsUsed=b),x.length>0&&(u.extensionsRequired=x),u.buffers&&u.buffers.length>0&&(u.buffers[0].byteLength=_.size),r.binary===!0){const C=new FileReader;C.readAsArrayBuffer(_),C.onloadend=function(){const I=l8(C.result),F=new DataView(new ArrayBuffer(KY));F.setUint32(0,I.byteLength,!0),F.setUint32(4,CIe,!0);const L=l8(EIe(JSON.stringify(u)),32),U=new DataView(new ArrayBuffer(KY));U.setUint32(0,L.byteLength,!0),U.setUint32(4,xIe,!0);const P=new ArrayBuffer(jY),H=new DataView(P);H.setUint32(0,bIe,!0),H.setUint32(4,wIe,!0);const N=jY+U.byteLength+L.byteLength+F.byteLength+I.byteLength;H.setUint32(8,N,!0);const z=new Blob([P,U,L,F,I],{type:"application/octet-stream"}),W=new FileReader;W.readAsArrayBuffer(z),W.onloadend=function(){i(W.result)}}}else if(u.buffers&&u.buffers.length>0){const C=new FileReader;C.readAsDataURL(_),C.onloadend=function(){const I=C.result;u.buffers[0].uri=I,i(u)}}else i(u)}serializeUserData(e,i){if(Object.keys(e.userData).length===0)return;const r=this.options,s=this.extensionsUsed;try{const l=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&l.gltfExtensions){i.extensions===void 0&&(i.extensions={});for(const u in l.gltfExtensions)i.extensions[u]=l.gltfExtensions[u],s[u]=!0;delete l.gltfExtensions}Object.keys(l).length>0&&(i.extras=l)}catch(l){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+l.message)}}getUID(e,i=!1){if(this.uids.has(e)===!1){const s=new Map;s.set(!0,this.uid++),s.set(!1,this.uid++),this.uids.set(e,s)}return this.uids.get(e).get(i)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new Fe;for(let s=0,l=e.count;s<l;s++)if(Math.abs(r.fromBufferAttribute(e,s).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const i=this.cache;if(i.attributesNormalized.has(e))return i.attributesNormalized.get(e);const r=e.clone(),s=new Fe;for(let l=0,u=r.count;l<u;l++)s.fromBufferAttribute(r,l),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),r.setXYZ(l,s.x,s.y,s.z);return i.attributesNormalized.set(e,r),r}applyTextureTransform(e,i){let r=!1;const s={};(i.offset.x!==0||i.offset.y!==0)&&(s.offset=i.offset.toArray(),r=!0),i.rotation!==0&&(s.rotation=i.rotation,r=!0),(i.repeat.x!==1||i.repeat.y!==1)&&(s.scale=i.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(e,i){if(e===i)return e;function r(I){return I.colorSpace===rr?function(L){return L<.04045?L*.0773993808:Math.pow(L*.9478672986+.0521327014,2.4)}:function(L){return L}}e instanceof Ov&&(e=await this.decompressTextureAsync(e)),i instanceof Ov&&(i=await this.decompressTextureAsync(i));const s=e?e.image:null,l=i?i.image:null,u=Math.max(s?s.width:0,l?l.width:0),A=Math.max(s?s.height:0,l?l.height:0),g=XY();g.width=u,g.height=A;const _=g.getContext("2d",{willReadFrequently:!0});_.fillStyle="#00ffff",_.fillRect(0,0,u,A);const b=_.getImageData(0,0,u,A);if(s){_.drawImage(s,0,0,u,A);const I=r(e),F=_.getImageData(0,0,u,A).data;for(let L=2;L<F.length;L+=4)b.data[L]=I(F[L]/256)*256}if(l){_.drawImage(l,0,0,u,A);const I=r(i),F=_.getImageData(0,0,u,A).data;for(let L=1;L<F.length;L+=4)b.data[L]=I(F[L]/256)*256}_.putImageData(b,0,0);const C=(e||i).clone();return C.source=new Qy(g),C.colorSpace=dp,C.channel=(e||i).channel,e&&i&&e.channel!==i.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),C}async decompressTextureAsync(e,i=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(e,i)}processBuffer(e){const i=this.json,r=this.buffers;return i.buffers||(i.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,i,r,s,l){const u=this.json;u.bufferViews||(u.bufferViews=[]);let A;switch(i){case ts.BYTE:case ts.UNSIGNED_BYTE:A=1;break;case ts.SHORT:case ts.UNSIGNED_SHORT:A=2;break;default:A=4}let g=e.itemSize*A;l===ts.ARRAY_BUFFER&&(g=Math.ceil(g/4)*4);const _=loe(s*g),b=new DataView(new ArrayBuffer(_));let x=0;for(let F=r;F<r+s;F++){for(let L=0;L<e.itemSize;L++){let U;e.itemSize>4?U=e.array[F*e.itemSize+L]:(L===0?U=e.getX(F):L===1?U=e.getY(F):L===2?U=e.getZ(F):L===3&&(U=e.getW(F)),e.normalized===!0&&(U=uc.normalize(U,e.array))),i===ts.FLOAT?b.setFloat32(x,U,!0):i===ts.INT?b.setInt32(x,U,!0):i===ts.UNSIGNED_INT?b.setUint32(x,U,!0):i===ts.SHORT?b.setInt16(x,U,!0):i===ts.UNSIGNED_SHORT?b.setUint16(x,U,!0):i===ts.BYTE?b.setInt8(x,U):i===ts.UNSIGNED_BYTE&&b.setUint8(x,U),x+=A}x%g!==0&&(x+=g-x%g)}const C={buffer:this.processBuffer(b.buffer),byteOffset:this.byteOffset,byteLength:_};return l!==void 0&&(C.target=l),l===ts.ARRAY_BUFFER&&(C.byteStride=g),this.byteOffset+=_,u.bufferViews.push(C),{id:u.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const i=this,r=i.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(s){const l=new FileReader;l.readAsArrayBuffer(e),l.onloadend=function(){const u=l8(l.result),A={buffer:i.processBuffer(u),byteOffset:i.byteOffset,byteLength:u.byteLength};i.byteOffset+=u.byteLength,s(r.bufferViews.push(A)-1)}})}processAccessor(e,i,r,s){const l=this.json,u={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let A;if(e.array.constructor===Float32Array)A=ts.FLOAT;else if(e.array.constructor===Int32Array)A=ts.INT;else if(e.array.constructor===Uint32Array)A=ts.UNSIGNED_INT;else if(e.array.constructor===Int16Array)A=ts.SHORT;else if(e.array.constructor===Uint16Array)A=ts.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)A=ts.BYTE;else if(e.array.constructor===Uint8Array)A=ts.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(r===void 0&&(r=0),(s===void 0||s===1/0)&&(s=e.count),s===0)return null;const g=BIe(e,r,s);let _;i!==void 0&&(_=e===i.index?ts.ELEMENT_ARRAY_BUFFER:ts.ARRAY_BUFFER);const b=this.processBufferView(e,A,r,s,_),x={bufferView:b.id,byteOffset:b.byteOffset,componentType:A,count:s,max:g.max,min:g.min,type:u[e.itemSize]};return e.normalized===!0&&(x.normalized=!0),l.accessors||(l.accessors=[]),l.accessors.push(x)-1}processImage(e,i,r,s="image/png"){if(e!==null){const l=this,u=l.cache,A=l.json,g=l.options,_=l.pending;u.images.has(e)||u.images.set(e,{});const b=u.images.get(e),x=s+":flipY/"+r.toString();if(b[x]!==void 0)return b[x];A.images||(A.images=[]);const C={mimeType:s},I=XY();I.width=Math.min(e.width,g.maxTextureSize),I.height=Math.min(e.height,g.maxTextureSize);const F=I.getContext("2d",{willReadFrequently:!0});if(r===!0&&(F.translate(0,I.height),F.scale(1,-1)),e.data!==void 0){i!==lo&&console.error("GLTFExporter: Only RGBAFormat is supported.",i),(e.width>g.maxTextureSize||e.height>g.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const U=new Uint8ClampedArray(e.height*e.width*4);for(let P=0;P<U.length;P+=4)U[P+0]=e.data[P+0],U[P+1]=e.data[P+1],U[P+2]=e.data[P+2],U[P+3]=e.data[P+3];F.putImageData(new ImageData(U,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)F.drawImage(e,0,0,I.width,I.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");g.binary===!0?_.push(YY(I,s).then(U=>l.processBufferViewImage(U)).then(U=>{C.bufferView=U})):I.toDataURL!==void 0?C.uri=I.toDataURL(s):_.push(YY(I,s).then(U=>new FileReader().readAsDataURL(U)).then(U=>{C.uri=U}));const L=A.images.push(C)-1;return b[x]=L,L}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const i=this.json;i.samplers||(i.samplers=[]);const r={magFilter:fp[e.magFilter],minFilter:fp[e.minFilter],wrapS:fp[e.wrapS],wrapT:fp[e.wrapT]};return i.samplers.push(r)-1}async processTextureAsync(e){const r=this.options,s=this.cache,l=this.json;if(s.textures.has(e))return s.textures.get(e);l.textures||(l.textures=[]),e instanceof Ov&&(e=await this.decompressTextureAsync(e,r.maxTextureSize));let u=e.userData.mimeType;u==="image/webp"&&(u="image/png");const A={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,u)};e.name&&(A.name=e.name),await this._invokeAllAsync(async function(_){_.writeTexture&&await _.writeTexture(e,A)});const g=l.textures.push(A)-1;return s.textures.set(e,g),g}async processMaterialAsync(e){const i=this.cache,r=this.json;if(i.materials.has(e))return i.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const s={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const l=e.color.toArray().concat([e.opacity]);if(PI(l,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=l),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=0,s.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){const A=await this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),g={index:await this.processTextureAsync(A),texCoord:A.channel};this.applyTextureTransform(g,A),s.pbrMetallicRoughness.metallicRoughnessTexture=g}if(e.map){const A={index:await this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(A,e.map),s.pbrMetallicRoughness.baseColorTexture=A}if(e.emissive){const A=e.emissive;if(Math.max(A.r,A.g,A.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const _={index:await this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(_,e.emissiveMap),s.emissiveTexture=_}}if(e.normalMap){const A={index:await this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(A.scale=e.normalScale.x),this.applyTextureTransform(A,e.normalMap),s.normalTexture=A}if(e.aoMap){const A={index:await this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(A.strength=e.aoMapIntensity),this.applyTextureTransform(A,e.aoMap),s.occlusionTexture=A}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===Ll&&(s.doubleSided=!0),e.name!==""&&(s.name=e.name),this.serializeUserData(e,s),await this._invokeAllAsync(async function(A){A.writeMaterialAsync&&await A.writeMaterialAsync(e,s)});const u=r.materials.push(s)-1;return i.materials.set(e,u),u}async processMeshAsync(e){const i=this.cache,r=this.json,s=[e.geometry.uuid];if(Array.isArray(e.material))for(let z=0,W=e.material.length;z<W;z++)s.push(e.material[z].uuid);else s.push(e.material.uuid);const l=s.join(":");if(i.meshes.has(l))return i.meshes.get(l);const u=e.geometry;let A;e.isLineSegments?A=ts.LINES:e.isLineLoop?A=ts.LINE_LOOP:e.isLine?A=ts.LINE_STRIP:e.isPoints?A=ts.POINTS:A=e.material.wireframe?ts.LINES:ts.TRIANGLES;const g={},_={},b=[],x=[],C={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},I=u.getAttribute("normal");I!==void 0&&!this.isNormalizedNormalAttribute(I)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),u.setAttribute("normal",this.createNormalizedNormalAttribute(I)));let F=null;for(let z in u.attributes){if(z.slice(0,5)==="morph")continue;const W=u.attributes[z];if(z=C[z]||z.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(z)||(z="_"+z),i.attributes.has(this.getUID(W))){_[z]=i.attributes.get(this.getUID(W));continue}F=null;const J=W.array;z==="JOINTS_0"&&!(J instanceof Uint16Array)&&!(J instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),F=new fr(new Uint16Array(J),W.itemSize,W.normalized)):(J instanceof Uint32Array||J instanceof Int32Array)&&!z.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${z}" converted to type FLOAT.`),F=ck.Utils.toFloat32BufferAttribute(W));const ie=this.processAccessor(F||W,u);ie!==null&&(z.startsWith("_")||this.detectMeshQuantization(z,W),_[z]=ie,i.attributes.set(this.getUID(W),ie))}if(I!==void 0&&u.setAttribute("normal",I),Object.keys(_).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const z=[],W=[],j={};if(e.morphTargetDictionary!==void 0)for(const J in e.morphTargetDictionary)j[e.morphTargetDictionary[J]]=J;for(let J=0;J<e.morphTargetInfluences.length;++J){const ie={};let ee=!1;for(const re in u.morphAttributes){if(re!=="position"&&re!=="normal"){ee||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),ee=!0);continue}const se=u.morphAttributes[re][J],ue=re.toUpperCase(),fe=u.attributes[re];if(i.attributes.has(this.getUID(se,!0))){ie[ue]=i.attributes.get(this.getUID(se,!0));continue}const pe=se.clone();if(!u.morphTargetsRelative)for(let xe=0,ce=se.count;xe<ce;xe++)for(let _e=0;_e<se.itemSize;_e++)_e===0&&pe.setX(xe,se.getX(xe)-fe.getX(xe)),_e===1&&pe.setY(xe,se.getY(xe)-fe.getY(xe)),_e===2&&pe.setZ(xe,se.getZ(xe)-fe.getZ(xe)),_e===3&&pe.setW(xe,se.getW(xe)-fe.getW(xe));ie[ue]=this.processAccessor(pe,u),i.attributes.set(this.getUID(fe,!0),ie[ue])}x.push(ie),z.push(e.morphTargetInfluences[J]),e.morphTargetDictionary!==void 0&&W.push(j[J])}g.weights=z,W.length>0&&(g.extras={},g.extras.targetNames=W)}const L=Array.isArray(e.material);if(L&&u.groups.length===0)return null;let U=!1;if(L&&u.index===null){const z=[];for(let W=0,j=u.attributes.position.count;W<j;W++)z[W]=W;u.setIndex(z),U=!0}const P=L?e.material:[e.material],H=L?u.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let z=0,W=H.length;z<W;z++){const j={mode:A,attributes:_};if(this.serializeUserData(u,j),x.length>0&&(j.targets=x),u.index!==null){let ie=this.getUID(u.index);(H[z].start!==void 0||H[z].count!==void 0)&&(ie+=":"+H[z].start+":"+H[z].count),i.attributes.has(ie)?j.indices=i.attributes.get(ie):(j.indices=this.processAccessor(u.index,u,H[z].start,H[z].count),i.attributes.set(ie,j.indices)),j.indices===null&&delete j.indices}const J=await this.processMaterialAsync(P[H[z].materialIndex]);J!==null&&(j.material=J),b.push(j)}U===!0&&u.setIndex(null),g.primitives=b,r.meshes||(r.meshes=[]),await this._invokeAllAsync(function(z){z.writeMesh&&z.writeMesh(e,g)});const N=r.meshes.push(g)-1;return i.meshes.set(l,N),N}detectMeshQuantization(e,i){if(this.extensionsUsed[a8])return;let r;switch(i.array.constructor){case Int8Array:r="byte";break;case Uint8Array:r="unsigned byte";break;case Int16Array:r="short";break;case Uint16Array:r="unsigned short";break;default:return}i.normalized&&(r+=" normalized");const s=e.split("_",1)[0];$Y[s]&&$Y[s].includes(r)&&(this.extensionsUsed[a8]=!0,this.extensionsRequired[a8]=!0)}processCamera(e){const i=this.json;i.cameras||(i.cameras=[]);const r=e.isOrthographicCamera,s={type:r?"orthographic":"perspective"};return r?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:uc.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),i.cameras.push(s)-1}processAnimation(e,i){const r=this.json,s=this.nodeMap;r.animations||(r.animations=[]),e=ck.Utils.mergeMorphTargetTracks(e.clone(),i);const l=e.tracks,u=[],A=[];for(let g=0;g<l.length;++g){const _=l[g],b=Rr.parseTrackName(_.name);let x=Rr.findNode(i,b.nodeName);const C=WY[b.propertyName];if(b.objectName==="bones"&&(x.isSkinnedMesh===!0?x=x.skeleton.getBoneByName(b.objectIndex):x=void 0),!x||!C){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',_.name);continue}const I=1;let F=_.values.length/_.times.length;C===WY.morphTargetInfluences&&(F/=x.morphTargetInfluences.length);let L;_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(L="CUBICSPLINE",F/=3):_.getInterpolation()===Mw?L="STEP":L="LINEAR",A.push({input:this.processAccessor(new fr(_.times,I)),output:this.processAccessor(new fr(_.values,F)),interpolation:L}),u.push({sampler:A.length-1,target:{node:s.get(x),path:C}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:A,channels:u}),r.animations.length-1}processSkin(e){const i=this.json,r=this.nodeMap,s=i.nodes[r.get(e)],l=e.skeleton;if(l===void 0)return null;const u=e.skeleton.bones[0];if(u===void 0)return null;const A=[],g=new Float32Array(l.bones.length*16),_=new Ki;for(let x=0;x<l.bones.length;++x)A.push(r.get(l.bones[x])),_.copy(l.boneInverses[x]),_.multiply(e.bindMatrix).toArray(g,x*16);return i.skins===void 0&&(i.skins=[]),i.skins.push({inverseBindMatrices:this.processAccessor(new fr(g,16)),joints:A,skeleton:r.get(u)}),s.skin=i.skins.length-1}async processNodeAsync(e){const i=this.json,r=this.options,s=this.nodeMap;i.nodes||(i.nodes=[]);const l={};if(r.trs){const A=e.quaternion.toArray(),g=e.position.toArray(),_=e.scale.toArray();PI(A,[0,0,0,1])||(l.rotation=A),PI(g,[0,0,0])||(l.translation=g),PI(_,[1,1,1])||(l.scale=_)}else e.matrixAutoUpdate&&e.updateMatrix(),SIe(e.matrix)===!1&&(l.matrix=e.matrix.elements);if(e.name!==""&&(l.name=String(e.name)),this.serializeUserData(e,l),e.isMesh||e.isLine||e.isPoints){const A=await this.processMeshAsync(e);A!==null&&(l.mesh=A)}else e.isCamera&&(l.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const A=[];for(let g=0,_=e.children.length;g<_;g++){const b=e.children[g];if(b.visible||r.onlyVisible===!1){const x=await this.processNodeAsync(b);x!==null&&A.push(x)}}A.length>0&&(l.children=A)}await this._invokeAllAsync(function(A){A.writeNode&&A.writeNode(e,l)});const u=i.nodes.push(l)-1;return s.set(e,u),u}async processSceneAsync(e){const i=this.json,r=this.options;i.scenes||(i.scenes=[],i.scene=0);const s={};e.name!==""&&(s.name=e.name),i.scenes.push(s);const l=[];for(let u=0,A=e.children.length;u<A;u++){const g=e.children[u];if(g.visible||r.onlyVisible===!1){const _=await this.processNodeAsync(g);_!==null&&l.push(_)}}l.length>0&&(s.nodes=l),this.serializeUserData(e,s)}async processObjectsAsync(e){const i=new Tf;i.name="AuxScene";for(let r=0;r<e.length;r++)i.children.push(e[r]);await this.processSceneAsync(i)}async processInputAsync(e){const i=this.options;e=e instanceof Array?e:[e],await this._invokeAllAsync(function(s){s.beforeParse&&s.beforeParse(e)});const r=[];for(let s=0;s<e.length;s++)e[s]instanceof Tf?await this.processSceneAsync(e[s]):r.push(e[s]);r.length>0&&await this.processObjectsAsync(r);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<i.animations.length;++s)this.processAnimation(i.animations[s],e[0]);await this._invokeAllAsync(function(s){s.afterParse&&s.afterParse(e)})}async _invokeAllAsync(e){for(let i=0,r=this.plugins.length;i<r;i++)await e(this.plugins[i])}}class TIe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,i){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,s=r.json,l=r.extensionsUsed,u={};e.name&&(u.name=e.name),u.color=e.color.toArray(),u.intensity=e.intensity,e.isDirectionalLight?u.type="directional":e.isPointLight?(u.type="point",e.distance>0&&(u.range=e.distance)):e.isSpotLight&&(u.type="spot",e.distance>0&&(u.range=e.distance),u.spot={},u.spot.innerConeAngle=(1-e.penumbra)*e.angle,u.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),l[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},l[this.name]=!0);const A=s.extensions[this.name].lights;A.push(u),i.extensions=i.extensions||{},i.extensions[this.name]={light:A.length-1}}}class MIe{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}async writeMaterialAsync(e,i){if(!e.isMeshBasicMaterial)return;const s=this.writer.extensionsUsed;i.extensions=i.extensions||{},i.extensions[this.name]={},s[this.name]=!0,i.pbrMetallicRoughness.metallicFactor=0,i.pbrMetallicRoughness.roughnessFactor=.9}}class RIe{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const r=this.writer,s=r.extensionsUsed,l={};if(l.clearcoatFactor=e.clearcoat,e.clearcoatMap){const u={index:await r.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};r.applyTextureTransform(u,e.clearcoatMap),l.clearcoatTexture=u}if(l.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const u={index:await r.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};r.applyTextureTransform(u,e.clearcoatRoughnessMap),l.clearcoatRoughnessTexture=u}if(e.clearcoatNormalMap){const u={index:await r.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(u.scale=e.clearcoatNormalScale.x),r.applyTextureTransform(u,e.clearcoatNormalMap),l.clearcoatNormalTexture=u}i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class DIe{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const s=this.writer.extensionsUsed,l={};l.dispersion=e.dispersion,i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class FIe{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const r=this.writer,s=r.extensionsUsed,l={};if(l.iridescenceFactor=e.iridescence,e.iridescenceMap){const u={index:await r.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};r.applyTextureTransform(u,e.iridescenceMap),l.iridescenceTexture=u}if(l.iridescenceIor=e.iridescenceIOR,l.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],l.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const u={index:await r.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};r.applyTextureTransform(u,e.iridescenceThicknessMap),l.iridescenceThicknessTexture=u}i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class UIe{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,s=r.extensionsUsed,l={};if(l.transmissionFactor=e.transmission,e.transmissionMap){const u={index:await r.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};r.applyTextureTransform(u,e.transmissionMap),l.transmissionTexture=u}i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class kIe{constructor(e){this.writer=e,this.name="KHR_materials_volume"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,s=r.extensionsUsed,l={};if(l.thicknessFactor=e.thickness,e.thicknessMap){const u={index:await r.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};r.applyTextureTransform(u,e.thicknessMap),l.thicknessTexture=u}e.attenuationDistance!==1/0&&(l.attenuationDistance=e.attenuationDistance),l.attenuationColor=e.attenuationColor.toArray(),i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class LIe{constructor(e){this.writer=e,this.name="KHR_materials_ior"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const s=this.writer.extensionsUsed,l={};l.ior=e.ior,i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class PIe{constructor(e){this.writer=e,this.name="KHR_materials_specular"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(yIe)&&!e.specularIntensityMap&&!e.specularColorMap)return;const r=this.writer,s=r.extensionsUsed,l={};if(e.specularIntensityMap){const u={index:await r.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};r.applyTextureTransform(u,e.specularIntensityMap),l.specularTexture=u}if(e.specularColorMap){const u={index:await r.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};r.applyTextureTransform(u,e.specularColorMap),l.specularColorTexture=u}l.specularFactor=e.specularIntensity,l.specularColorFactor=e.specularColor.toArray(),i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class OIe{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const r=this.writer,s=r.extensionsUsed,l={};if(e.sheenRoughnessMap){const u={index:await r.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};r.applyTextureTransform(u,e.sheenRoughnessMap),l.sheenRoughnessTexture=u}if(e.sheenColorMap){const u={index:await r.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};r.applyTextureTransform(u,e.sheenColorMap),l.sheenColorTexture=u}l.sheenRoughnessFactor=e.sheenRoughness,l.sheenColorFactor=e.sheenColor.toArray(),i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class QIe{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(e,i){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const r=this.writer,s=r.extensionsUsed,l={};if(e.anisotropyMap){const u={index:await r.processTextureAsync(e.anisotropyMap)};r.applyTextureTransform(u,e.anisotropyMap),l.anisotropyTexture=u}l.anisotropyStrength=e.anisotropy,l.anisotropyRotation=e.anisotropyRotation,i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class NIe{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(e,i){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const s=this.writer.extensionsUsed,l={};l.emissiveStrength=e.emissiveIntensity,i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class HIe{constructor(e){this.writer=e,this.name="EXT_materials_bump"}async writeMaterialAsync(e,i){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const r=this.writer,s=r.extensionsUsed,l={};if(e.bumpMap){const u={index:await r.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};r.applyTextureTransform(u,e.bumpMap),l.bumpTexture=u}l.bumpFactor=e.bumpScale,i.extensions=i.extensions||{},i.extensions[this.name]=l,s[this.name]=!0}}class zIe{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,i){if(!e.isInstancedMesh)return;const r=this.writer,s=e,l=new Float32Array(s.count*3),u=new Float32Array(s.count*4),A=new Float32Array(s.count*3),g=new Ki,_=new Fe,b=new Ys,x=new Fe;for(let I=0;I<s.count;I++)s.getMatrixAt(I,g),g.decompose(_,b,x),_.toArray(l,I*3),b.toArray(u,I*4),x.toArray(A,I*3);const C={TRANSLATION:r.processAccessor(new fr(l,3)),ROTATION:r.processAccessor(new fr(u,4)),SCALE:r.processAccessor(new fr(A,3))};s.instanceColor&&(C._COLOR_0=r.processAccessor(s.instanceColor)),i.extensions=i.extensions||{},i.extensions[this.name]={attributes:C},r.extensionsUsed[this.name]=!0,r.extensionsRequired[this.name]=!0}}ck.Utils={insertKeyframe:function(a,e){const r=a.getValueSize(),s=new a.TimeBufferType(a.times.length+1),l=new a.ValueBufferType(a.values.length+r),u=a.createInterpolant(new a.ValueBufferType(r));let A;if(a.times.length===0){s[0]=e;for(let g=0;g<r;g++)l[g]=0;A=0}else if(e<a.times[0]){if(Math.abs(a.times[0]-e)<.001)return 0;s[0]=e,s.set(a.times,1),l.set(u.evaluate(e),0),l.set(a.values,r),A=0}else if(e>a.times[a.times.length-1]){if(Math.abs(a.times[a.times.length-1]-e)<.001)return a.times.length-1;s[s.length-1]=e,s.set(a.times,0),l.set(a.values,0),l.set(u.evaluate(e),a.values.length),A=s.length-1}else for(let g=0;g<a.times.length;g++){if(Math.abs(a.times[g]-e)<.001)return g;if(a.times[g]<e&&a.times[g+1]>e){s.set(a.times.slice(0,g+1),0),s[g+1]=e,s.set(a.times.slice(g+1),g+2),l.set(a.values.slice(0,(g+1)*r),0),l.set(u.evaluate(e),(g+1)*r),l.set(a.values.slice((g+1)*r),(g+2)*r),A=g+1;break}}return a.times=s,a.values=l,A},mergeMorphTargetTracks:function(a,e){const i=[],r={},s=a.tracks;for(let l=0;l<s.length;++l){let u=s[l];const A=Rr.parseTrackName(u.name),g=Rr.findNode(e,A.nodeName);if(A.propertyName!=="morphTargetInfluences"||A.propertyIndex===void 0){i.push(u);continue}if(u.createInterpolant!==u.InterpolantFactoryMethodDiscrete&&u.createInterpolant!==u.InterpolantFactoryMethodLinear){if(u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),u=u.clone(),u.setInterpolation(Rw)}const _=g.morphTargetInfluences.length,b=g.morphTargetDictionary[A.propertyIndex];if(b===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+A.propertyIndex);let x;if(r[g.uuid]===void 0){x=u.clone();const I=new x.ValueBufferType(_*x.times.length);for(let F=0;F<x.times.length;F++)I[F*_+b]=x.values[F];x.name=(A.nodeName||"")+".morphTargetInfluences",x.values=I,r[g.uuid]=x,i.push(x);continue}const C=u.createInterpolant(new u.ValueBufferType(1));x=r[g.uuid];for(let I=0;I<x.times.length;I++)x.values[I*_+b]=C.evaluate(x.times[I]);for(let I=0;I<u.times.length;I++){const F=this.insertKeyframe(x,u.times[I]);x.values[F*_+b]=u.values[I]}}return a.tracks=i,a},toFloat32BufferAttribute:function(a){const e=new fr(new Float32Array(a.count*a.itemSize),a.itemSize,!1);if(!a.normalized&&!a.isInterleavedBufferAttribute)return e.array.set(a.array),e;for(let i=0,r=a.count;i<r;i++)for(let s=0;s<a.itemSize;s++)e.setComponent(i,s,a.getComponent(i,s));return e}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY=a=>a.material!==void 0&&a.userData&&a.userData.variantMaterials&&!!Array.from(a.userData.variantMaterials.values()).filter(e=>oU(e.material)),oU=a=>a&&a.isMaterial&&!Array.isArray(a);class GIe{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const i=new Set,r=s=>{if(!JY(s))return;const l=s.userData.variantMaterials,u=s.userData.variantData;for(const[A,g]of u){const _=l.get(g.index);_&&oU(_.material)&&i.add(A)}};if(Array.isArray(e))for(const s of e)s.traverse(r);else e.traverse(r);i.forEach(s=>this.variantNames.push(s))}async writeMesh(e,i){if(!JY(e))return;const r=e.userData,s=r.variantMaterials,l=r.variantData,u=new Map,A=new Map,g=Array.from(l.values()).sort((x,C)=>x.index-C.index);for(const[x,C]of g.entries())A.set(C.index,x);for(const x of l.values()){const C=s.get(x.index);if(!C||!oU(C.material))continue;const I=await this.writer.processMaterialAsync(C.material);u.has(I)||u.set(I,{material:I,variants:[]}),u.get(I).variants.push(A.get(x.index))}const _=Array.from(u.values()).map(x=>x.variants.sort((C,I)=>C-I)&&x).sort((x,C)=>x.material-C.material);if(_.length===0)return;const b=oU(r.originalMaterial)?await this.writer.processMaterialAsync(r.originalMaterial):-1;for(const x of i.primitives)b>=0&&(x.material=b),x.extensions=x.extensions||{},x.extensions[this.name]={mappings:_}}afterParse(){if(this.variantNames.length===0)return;const e=this.writer.json;e.extensions=e.extensions||{};const i=this.variantNames.map(r=>({name:r}));e.extensions[this.name]={variants:i},this.writer.extensionsUsed[this.name]=!0}}class VIe{constructor(e,i,r,s,l){this.xrLight=e,this.renderer=i,this.lightProbe=r,this.xrWebGLBinding=null,this.estimationStartCallback=l,this.frameCallback=this.onXRFrame.bind(this);const u=i.xr.getSession();if(s&&"XRWebGLBinding"in window){const A=new Xk(16);e.environment=A.texture;const g=i.getContext();switch(u.preferredReflectionFormat){case"srgba8":g.getExtension("EXT_sRGB");break;case"rgba16f":g.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(u,g),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}u.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const i=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);i&&(e.__webglTexture=i,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,i){if(!this.xrLight)return;i.session.requestAnimationFrame(this.frameCallback);const s=i.getLightEstimate(this.lightProbe);if(s){this.xrLight.lightProbe.sh.fromArray(s.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const l=Math.max(1,Math.max(s.primaryLightIntensity.x,Math.max(s.primaryLightIntensity.y,s.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(s.primaryLightIntensity.x/l,s.primaryLightIntensity.y/l,s.primaryLightIntensity.z/l),this.xrLight.directionalLight.intensity=l,this.xrLight.directionalLight.position.copy(s.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class qIe extends Ap{constructor(e,i=!0){super(),this.lightProbe=new u7,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new oM,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let r=null,s=!1;e.xr.addEventListener("sessionstart",()=>{const l=e.xr.getSession();"requestLightProbe"in l&&l.requestLightProbe({reflectionFormat:l.preferredReflectionFormat}).then(u=>{r=new VIe(this,e,u,i,()=>{s=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{r&&(r.dispose(),r=null),s&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{r&&(r.dispose(),r=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const coe=1e4,$Ie=.001,uoe=50;class Nd{constructor(e=uoe){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max($Ie,e)}update(e,i,r,s){const l=2e-4*this.naturalFrequency;if(e==null||s===0||e===i&&this.velocity===0)return i;if(r<0)return e;const u=e-i,A=this.velocity+this.naturalFrequency*u,g=u+r*A,_=Math.exp(-this.naturalFrequency*r),b=(A-this.naturalFrequency*g)*_,x=-this.naturalFrequency*(b+A*_);return Math.abs(b)<l*Math.abs(s)&&x*u>=0?(this.velocity=0,i):(this.velocity=b,i+g*_)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=.2,ZY=.03,WIe=.75,hoe=12,jIe=Math.PI/(2*hoe),eJ=new ci,cF=(a,e,i)=>{let r=e>0?i>0?0:-Math.PI/2:i>0?Math.PI/2:Math.PI;for(let s=0;s<=hoe;++s)a.push(e+(zm-ZY)*Math.cos(r),i+(zm-ZY)*Math.sin(r),0,e+zm*Math.cos(r),i+zm*Math.sin(r),0),r+=jIe};class tJ extends Dr{constructor(e,i){const r=new Ln,s=[],l=[],{size:u,boundingBox:A}=e,g=u.x/2,_=(i==="back"?u.y:u.z)/2;cF(l,g,_),cF(l,-g,_),cF(l,-g,-_),cF(l,g,-_);const b=l.length/3;for(let I=0;I<b-2;I+=2)s.push(I,I+1,I+3,I,I+3,I+2);const x=b-2;s.push(x,x+1,1,x,1,0),r.setAttribute("position",new Ni(l,3)),r.setIndex(s),super(r),this.side=i;const C=this.material;switch(C.side=Ll,C.transparent=!0,C.opacity=0,this.goalOpacity=0,this.opacityDamper=new Nd,this.hitPlane=new Dr(new UA(2*(g+zm),2*(_+zm))),this.hitPlane.visible=!1,this.hitPlane.material.side=Ll,this.add(this.hitPlane),this.hitBox=new Dr(new Og(u.x+2*zm,u.y+zm,u.z+2*zm)),this.hitBox.visible=!1,this.hitBox.material.side=Ll,this.add(this.hitBox),A.getCenter(this.position),i){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=A.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=A.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.hitBox.position.y=(u.y+zm)/2+A.min.y,e.target.add(this.hitBox),this.offsetHeight=0}getHit(e,i,r){eJ.set(i,-r),this.hitPlane.visible=!0;const s=e.positionAndNormalFromPoint(eJ,this.hitPlane);return this.hitPlane.visible=!1,s==null?null:s.position}getExpandedHit(e,i,r){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const s=this.getHit(e,i,r);return this.hitPlane.scale.set(1,1,1),s}controllerIntersection(e,i){this.hitBox.visible=!0;const r=e.hitFromController(i,this.hitBox);return this.hitBox.visible=!1,r}set offsetHeight(e){e-=.001,this.side==="back"?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?WIe:0}updateOpacity(e){const i=this.material;i.opacity=this.opacityDamper.update(i.opacity,this.goalOpacity,e,1),this.visible=i.opacity>0}dispose(){const{geometry:e,material:i}=this.hitPlane;e.dispose(),i.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=(a,e)=>({type:"number",number:a,unit:e}),kv=(()=>{const a={};return i=>{const r=i;if(r in a)return a[r];const s=[];let l=0;for(;i;){if(++l>1e3){i="";break}const u=doe(i),A=u.nodes[0];if(A==null||A.terms.length===0)break;s.push(A),i=u.remainingInput}return a[r]=s}})(),doe=(()=>{const a=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,i=/^[\),]/,r="(",s="#";return l=>{const u=[];for(;l.length&&(l=l.trim(),!i.test(l));)if(l[0]===r){const{nodes:A,remainingInput:g}=iJ(l);l=g,u.push({type:"function",name:{type:"ident",value:"calc"},arguments:A})}else if(a.test(l)){const A=KIe(l),g=A.nodes[0];if(l=A.remainingInput,l[0]===r){const{nodes:_,remainingInput:b}=iJ(l);u.push({type:"function",name:g,arguments:_}),l=b}else u.push(g)}else if(e.test(l))u.push({type:"operator",value:l[0]}),l=l.slice(1);else{const{nodes:A,remainingInput:g}=l[0]===s?YIe(l):XIe(l);if(A.length===0)break;u.push(A[0]),l=g}return{nodes:[{type:"expression",terms:u}],remainingInput:l}}})(),KIe=(()=>{const a=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const i=e.match(a),r=i==null?e:e.substr(0,i.index),s=i==null?"":e.substr(i.index);return{nodes:[{type:"ident",value:r}],remainingInput:s}}})(),XIe=(()=>{const a=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,i=/^(m|mm|cm|rad|deg|[%])$/;return r=>{const s=r.match(a),l=s==null?"0":s[0];r=l==null?r:r.slice(l.length);const u=r.match(e);let A=u!=null&&u[0]!==""?u[0]:null;const g=u==null?r:r.slice(A.length);return A!=null&&!i.test(A)&&(A=null),{nodes:[{type:"number",number:parseFloat(l)||0,unit:A}],remainingInput:g}}})(),YIe=(()=>{const a=/^[a-f0-9]*/i;return e=>{e=e.slice(1).trim();const i=e.match(a);return{nodes:i==null?[]:[{type:"hex",value:i[0]}],remainingInput:i==null?e:e.slice(i[0].length)}}})(),iJ=a=>{const e=[];for(a=a.slice(1).trim();a.length;){const i=doe(a);if(e.push(i.nodes[0]),a=i.remainingInput.trim(),a[0]===",")a=a.slice(1).trim();else if(a[0]===")"){a=a.slice(1);break}}return{nodes:e,remainingInput:a}},nJ=Symbol("visitedTypes");class JIe{constructor(e){this[nJ]=e}walk(e,i){const r=e.slice();for(;r.length;){const s=r.shift();switch(this[nJ].indexOf(s.type)>-1&&i(s),s.type){case"expression":r.unshift(...s.terms);break;case"function":r.unshift(s.name,...s.arguments);break}}}}const Jy=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=(a,e=0)=>{let{number:i,unit:r}=a;if(!isFinite(i))i=e,r="rad";else if(a.unit==="rad"||a.unit==null)return a;return{type:"number",number:(r==="deg"&&i!=null?i:0)*Math.PI/180,unit:"rad"}},rJ=(a,e=0)=>{let{number:i,unit:r}=a;if(!isFinite(i))i=e,r="m";else if(a.unit==="m")return a;let s;switch(r){default:s=1;break;case"cm":s=1/100;break;case"mm":s=1/1e3;break}return{type:"number",number:s*i,unit:"m"}},$m=(()=>{const a=i=>i,e={rad:a,deg:EL,m:a,mm:rJ,cm:rJ};return(i,r=Jy)=>{isFinite(i.number)||(i.number=r.number,i.unit=r.unit);const{unit:s}=i;if(s==null)return i;const l=e[s];return l==null?r:l(i)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aoe,sJ,oJ;const kS=Symbol("evaluate"),aU=Symbol("lastValue");class Ra{constructor(){this[Aoe]=null}static evaluatableFor(e,i=Jy){if(e instanceof Ra)return e;if(e.type==="number")return e.unit==="%"?new ZIe(e,i):e;switch(e.name.value){case"calc":return new iTe(e,i);case"env":return new eTe(e)}return Jy}static evaluate(e){return e instanceof Ra?e.evaluate():e}static isConstant(e){return e instanceof Ra?e.isConstant:!0}static applyIntrinsics(e,i){const{basis:r,keywords:s}=i,{auto:l}=s;return r.map((u,A)=>{const g=l[A]==null?u:l[A];let _=e[A]?e[A]:g;if(_.type==="ident"){const b=_.value;b in s&&(_=s[b][A])}return(_==null||_.type==="ident")&&(_=g),_.unit==="%"?Vh(_.number/100*u.number,u.unit):(_=$m(_,u),_.unit!==u.unit?u:_)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[aU]==null)&&(this[aU]=this[kS]()),this[aU]}}Aoe=aU;const aJ=Symbol("percentage"),c8=Symbol("basis");class ZIe extends Ra{constructor(e,i){super(),this[aJ]=e,this[c8]=i}get isConstant(){return!0}[kS](){return Vh(this[aJ].number/100*this[c8].number,this[c8].unit)}}const uF=Symbol("identNode");class eTe extends Ra{constructor(e){super(),this[sJ]=null;const i=e.arguments.length?e.arguments[0].terms[0]:null;i!=null&&i.type==="ident"&&(this[uF]=i)}get isConstant(){return!1}[(sJ=uF,kS)](){if(this[uF]!=null)switch(this[uF].value){case"window-scroll-y":const e=window.pageYOffset,i=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:e/(i-window.innerHeight)||0,unit:null}}return Jy}}const tTe=/[\*\/]/,fE=Symbol("evaluator");class iTe extends Ra{constructor(e,i=Jy){if(super(),this[oJ]=null,e.arguments.length!==1)return;const r=e.arguments[0].terms.slice(),s=[];for(;r.length;){const l=r.shift();if(s.length>0){const u=s[s.length-1];if(u.type==="operator"&&tTe.test(u.value)){const A=s.pop(),g=s.pop();if(g==null)return;s.push(new cJ(A,Ra.evaluatableFor(g,i),Ra.evaluatableFor(l,i)));continue}}s.push(l.type==="operator"?l:Ra.evaluatableFor(l,i))}for(;s.length>2;){const[l,u,A]=s.splice(0,3);if(u.type!=="operator")return;s.unshift(new cJ(u,Ra.evaluatableFor(l,i),Ra.evaluatableFor(A,i)))}s.length===1&&(this[fE]=s[0])}get isConstant(){return this[fE]==null||Ra.isConstant(this[fE])}[(oJ=fE,kS)](){return this[fE]!=null?Ra.evaluate(this[fE]):Jy}}const lJ=Symbol("operator"),u8=Symbol("left"),h8=Symbol("right");class cJ extends Ra{constructor(e,i,r){super(),this[lJ]=e,this[u8]=i,this[h8]=r}get isConstant(){return Ra.isConstant(this[u8])&&Ra.isConstant(this[h8])}[kS](){const e=$m(Ra.evaluate(this[u8])),i=$m(Ra.evaluate(this[h8])),{number:r,unit:s}=e,{number:l,unit:u}=i;if(u!=null&&s!=null&&u!=s)return Jy;const A=s||u;let g;switch(this[lJ].value){case"+":g=r+l;break;case"-":g=r-l;break;case"/":g=r/l;break;case"*":g=r*l;break;default:return Jy}return{type:"number",number:g,unit:A}}}const d8=Symbol("evaluatables"),uJ=Symbol("intrinsics");class poe extends Ra{constructor(e,i){super(),this[uJ]=i;const r=e[0],s=r!=null?r.terms:[];this[d8]=i.basis.map((l,u)=>{const A=s[u];return A==null?{type:"ident",value:"auto"}:A.type==="ident"?A:Ra.evaluatableFor(A,l)})}get isConstant(){for(const e of this[d8])if(!Ra.isConstant(e))return!1;return!0}[kS](){const e=this[d8].map(i=>Ra.evaluate(i));return Ra.applyIntrinsics(e,this[uJ]).map(i=>i.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var foe,goe,moe,_oe;const gE=Symbol("instances"),hJ=Symbol("activateListener"),dJ=Symbol("deactivateListener"),A8=Symbol("notifyInstances"),AJ=Symbol("notify"),pJ=Symbol("callback");class Hm{static[A8](){for(const e of Hm[gE])e[AJ]()}static[(foe=gE,hJ)](){window.addEventListener("scroll",this[A8],{passive:!0})}static[dJ](){window.removeEventListener("scroll",this[A8])}constructor(e){this[pJ]=e}observe(){Hm[gE].size===0&&Hm[hJ](),Hm[gE].add(this)}disconnect(){Hm[gE].delete(this),Hm[gE].size===0&&Hm[dJ]()}[AJ](){this[pJ]()}}Hm[foe]=new Set;const fJ=Symbol("computeStyleCallback"),voe=Symbol("astWalker"),OI=Symbol("dependencies"),yoe=Symbol("onScroll");class nTe{constructor(e){this[goe]={},this[moe]=new JIe(["function"]),this[_oe]=()=>{this[fJ]({relatedState:"window-scroll"})},this[fJ]=e}observeEffectsFor(e){const i={},r=this[OI];this[voe].walk(e,s=>{const{name:l}=s,A=s.arguments[0].terms[0];if(!(l.value!=="env"||A==null||A.type!=="ident"))switch(A.value){case"window-scroll-y":if(i["window-scroll"]==null){const g="window-scroll"in r?r["window-scroll"]:new Hm(this[yoe]);g.observe(),delete r["window-scroll"],i["window-scroll"]=g}break}});for(const s in r)r[s].disconnect();this[OI]=i}dispose(){for(const e in this[OI])this[OI][e].disconnect()}}goe=OI,moe=voe,_oe=yoe;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=a=>{const e=a.observeEffects||!1,i=a.intrinsics instanceof Function?a.intrinsics:()=>a.intrinsics;return(r,s)=>{const l=r.updated,u=r.connectedCallback,A=r.disconnectedCallback,g=Symbol(`${s}StyleEffector`),_=Symbol(`${s}StyleEvaluator`),b=Symbol(`${s}UpdateEvaluator`),x=Symbol(`${s}EvaluateAndSync`);Object.defineProperties(r,{[g]:{value:null,writable:!0},[_]:{value:null,writable:!0},[b]:{value:function(){const C=kv(this[s]);this[_]=new poe(C,i(this)),this[g]==null&&e&&(this[g]=new nTe(()=>this[x]())),this[g]!=null&&this[g].observeEffectsFor(C)}},[x]:{value:function(){if(this[_]==null)return;const C=this[_].evaluate();this[a.updateHandler](C)}},updated:{value:function(C){C.has(s)&&(this[b](),this[x]()),l.call(this,C)}},connectedCallback:{value:function(){u.call(this),this.requestUpdate(s,this[s])}},disconnectedCallback:{value:function(){A.call(this),this[g]!=null&&(this[g].dispose(),this[g]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const boe=a=>a<.5?2*a*a:-1+(4-2*a)*a,rTe=(a,e,i=boe)=>r=>a+(e-a)*i(r),sTe=(a,e)=>{const i=s=>l=>s+=l,r=e.map(i(0));return s=>{s=Vm(s,0,1),s*=r[r.length-1];const l=r.findIndex(g=>g>=s),u=l<1?0:r[l-1],A=r[l];return a[l]((s-u)/(A-u))}},WE=a=>{const e=[],i=[];let r=a.initialValue;for(let s=0;s<a.keyframes.length;++s){const l=a.keyframes[s],{value:u,frames:A}=l,g=l.ease||boe,_=rTe(r,u,g);e.push(_),i.push(A),r=u}return sTe(e,i)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cc=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l};const oTe=5e3,aTe=WE({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),lTe=WE({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),cTe=30,uTe=12,woe="0deg 75deg 105%",hTe="auto auto auto",dTe="auto",ATe=2.2,pTe=["front","right","back","left"],fTe=["upper-","","lower-"],gTe=3e3,mTe=". Use mouse, touch or arrow keys to move.",hF={AUTO:"auto"},p8={BASIC:"basic",WIGGLE:"wiggle"},_Te={NONE:"none"},gJ=()=>({basis:[EL(Vh(cTe,"deg"))],keywords:{auto:[null]}}),vTe=()=>({basis:[EL(Vh(uTe,"deg"))],keywords:{auto:[null]}}),xoe=(()=>{const a=kv(woe)[0].terms,e=$m(a[0]),i=$m(a[1]);return r=>{const s=r[Ri].idealCameraDistance();return{basis:[e,i,Vh(s,"m")],keywords:{auto:[null,null,Vh(105,"%")]}}}})(),yTe=a=>{const e=ATe*a[Ri].boundingSphere.radius;return{basis:[Vh(-1/0,"rad"),Vh(0,"rad"),Vh(e,"m")],keywords:{auto:[null,null,null]}}},bTe=a=>{const e=xoe(a),r=new poe([],e).evaluate()[2];return{basis:[Vh(1/0,"rad"),Vh(Math.PI,"rad"),Vh(r,"m")],keywords:{auto:[null,null,null]}}},wTe=a=>{const e=a[Ri].boundingBox.getCenter(new Fe);return{basis:[Vh(e.x,"m"),Vh(e.y,"m"),Vh(e.z,"m")],keywords:{auto:[null,null,null]}}},Coe=Math.PI/2,xTe=Math.PI/3,CTe=Coe/2,ETe=2*Math.PI,so=Symbol("controls"),lU=Symbol("panElement"),f8=Symbol("promptElement"),dF=Symbol("promptAnimatedContainer"),g8=Symbol("fingerAnimatedContainers"),AF=Symbol("deferInteractionPrompt"),mJ=Symbol("updateAria"),_v=Symbol("a11y"),_J=Symbol("updateA11y"),vJ=Symbol("updateCameraForRadius"),mE=Symbol("cancelPrompts"),m8=Symbol("onChange"),hI=Symbol("onPointerChange"),G1=Symbol("waitingToPromptUser"),pF=Symbol("userHasInteracted"),_E=Symbol("promptElementVisibleTime"),dI=Symbol("lastPromptOffset"),fF=Symbol("cancellationSource"),_8=Symbol("lastSpherical"),AI=Symbol("jumpCamera"),v8=Symbol("initialized"),pI=Symbol("maintainThetaPhi"),yJ=Symbol("syncCameraOrbit"),bJ=Symbol("syncFieldOfView"),wJ=Symbol("syncCameraTarget"),xJ=Symbol("syncMinCameraOrbit"),CJ=Symbol("syncMaxCameraOrbit"),EJ=Symbol("syncMinFieldOfView"),SJ=Symbol("syncMaxFieldOfView"),STe=a=>{var e,i,r,s,l,u,A,g,_,b,x,C,I,F,L,U,P,H;class N extends a{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=woe,this.cameraTarget=hTe,this.fieldOfView=dTe,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=gTe,this.interactionPrompt=hF.AUTO,this.interactionPromptStyle=p8.WIGGLE,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=_Te.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=uoe,this.a11y=null,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[i]=this.shadowRoot.querySelector("#prompt"),this[r]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[s]=this.shadowRoot.querySelector(".pan-target"),this[l]=0,this[u]=1/0,this[A]=!1,this[g]=!1,this[_]=Va.AUTOMATIC,this[b]=new MTe(this[Ri].camera,this[Tg],this[Ri]),this[x]=new vw,this[C]=!1,this[I]=!1,this[F]=!1,this[L]={},this[U]=()=>{const W=this[so].changeSource;this[fF]=W,W===Va.USER_INTERACTION&&(this[pF]=!0,this[AF]())},this[P]=()=>{this[mJ](),this[gu]();const W=this[so].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:W}}))},this[H]=W=>{this[hU].classList.toggle("pointer-tumbling",W.type==="pointer-change-start")}}get inputSensitivity(){return this[so].inputSensitivity}set inputSensitivity(W){this[so].inputSensitivity=W}getCameraOrbit(){const{theta:W,phi:j,radius:J}=this[_8];return{theta:W,phi:j,radius:J,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return Ly(this[ao].isPresenting?this[ao].arRenderer.target:this[Ri].getDynamicTarget())}getFieldOfView(){return this[so].getFieldOfView()}getMinimumFieldOfView(){return this[so].options.minimumFieldOfView}getMaximumFieldOfView(){return this[so].options.maximumFieldOfView}getIdealAspect(){return this[Ri].idealAspect}jumpCameraToGoal(){this[AI]=!0,this.requestUpdate(AI,!1)}resetInteractionPrompt(){this[dI]=0,this[_E]=1/0,this[pF]=!1,this[G1]=this.interactionPrompt===hF.AUTO&&this.cameraControls}zoom(W){const j=new WheelEvent("wheel",{deltaY:-30*W});this[Tg].dispatchEvent(j)}connectedCallback(){super.connectedCallback(),this[so].addEventListener("user-interaction",this[mE]),this[so].addEventListener("pointer-change-start",this[hI]),this[so].addEventListener("pointer-change-end",this[hI])}disconnectedCallback(){super.disconnectedCallback(),this[so].removeEventListener("user-interaction",this[mE]),this[so].removeEventListener("pointer-change-start",this[hI]),this[so].removeEventListener("pointer-change-end",this[hI])}updated(W){super.updated(W);const j=this[so],J=this[Ri];if(W.has("cameraControls")&&(this.cameraControls?(j.enableInteraction(),this.interactionPrompt===hF.AUTO&&(this[G1]=!0)):(j.disableInteraction(),this[AF]()),this[Tg].setAttribute("aria-label",this[KE])),W.has("disableZoom")&&(j.disableZoom=this.disableZoom),W.has("disablePan")&&(j.enablePan=!this.disablePan),W.has("disableTap")&&(j.enableTap=!this.disableTap),(W.has("interactionPrompt")||W.has("cameraControls")||W.has("src"))&&(this.interactionPrompt===hF.AUTO&&this.cameraControls&&!this[pF]?this[G1]=!0:this[AF]()),W.has("interactionPromptStyle")&&(this[dF].style.opacity=this.interactionPromptStyle==p8.BASIC?"1":"0"),W.has("touchAction")){const ie=this.touchAction;j.applyOptions({touchAction:ie}),j.updateTouchActionStyle()}W.has("orbitSensitivity")&&(j.orbitSensitivity=this.orbitSensitivity),W.has("zoomSensitivity")&&(j.zoomSensitivity=this.zoomSensitivity),W.has("panSensitivity")&&(j.panSensitivity=this.panSensitivity),W.has("interpolationDecay")&&(j.setDamperDecayTime(this.interpolationDecay),J.setTargetDamperDecayTime(this.interpolationDecay)),W.has("a11y")&&this[_J](),this[AI]===!0&&Promise.resolve().then(()=>{j.jumpToGoal(),J.jumpToGoal(),this[m8](),this[AI]=!1})}async updateFraming(){const W=this[Ri],j=W.adjustedFoV(W.framedFoVDeg);await W.updateFraming();const J=W.adjustedFoV(W.framedFoVDeg),ie=this[so].getFieldOfView()/j;this[so].setFieldOfView(J*ie),this[pI]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(W,j,J){const ie=this[Tg],ee=this[g8];if(ee[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const re=new Array;re.push({x:WE(j.x),y:WE(j.y)});const se=[{x:re[0].x(0),y:re[0].y(0)}];J!=null&&(re.push({x:WE(J.x),y:WE(J.y)}),se.push({x:re[1].x(0),y:re[1].y(0)}));let ue=performance.now();const{width:fe,height:pe}=this[Ri],xe=this.getBoundingClientRect(),ce=Oe=>{for(const[ge,Ee]of se.entries()){const{style:ke}=ee[ge];ke.transform=`translateX(${fe*Ee.x}px) translateY(${pe*Ee.y}px)`,Oe==="pointerdown"?ke.opacity="1":Oe==="pointerup"&&(ke.opacity="0");const je={pointerId:ge-5678,pointerType:"touch",target:ie,clientX:fe*Ee.x+xe.x,clientY:pe*Ee.y+xe.y,altKey:!0};ie.dispatchEvent(new PointerEvent(Oe,je))}},_e=()=>{const Oe=this[fF];if(Oe!==Va.AUTOMATIC||!ie.isConnected){for(const Ee of this[g8])Ee.style.opacity="0";ce("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Oe}})),document.removeEventListener("visibilitychange",ye);return}const ge=Math.min(1,(performance.now()-ue)/W);for(const[Ee,ke]of se.entries())ke.x=re[Ee].x(ge),ke.y=re[Ee].y(ge);ce("pointermove"),ge<1?requestAnimationFrame(_e):(ce("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Va.AUTOMATIC}})),document.removeEventListener("visibilitychange",ye))},ye=()=>{let Oe=0;document.visibilityState==="hidden"?Oe=performance.now()-ue:ue=performance.now()-Oe};document.addEventListener("visibilitychange",ye),ce("pointerdown"),this[fF]=Va.AUTOMATIC,requestAnimationFrame(_e)}[(e=f8,i=dF,r=g8,s=lU,l=dI,u=_E,A=pF,g=G1,_=fF,b=so,x=_8,C=AI,I=v8,F=pI,L=_v,bJ)](W){const j=this[so],J=this[Ri];J.framedFoVDeg=W[0]*180/Math.PI,j.changeSource=Va.NONE,j.setFieldOfView(J.adjustedFoV(J.framedFoVDeg)),this[mE]()}[yJ](W){const j=this[so];if(this[pI]){const{theta:J,phi:ie}=this.getCameraOrbit();W[0]=J,W[1]=ie,this[pI]=!1}j.changeSource=Va.NONE,j.setOrbit(W[0],W[1],W[2]),this[mE]()}[xJ](W){this[so].applyOptions({minimumAzimuthalAngle:W[0],minimumPolarAngle:W[1],minimumRadius:W[2]}),this.jumpCameraToGoal()}[CJ](W){this[so].applyOptions({maximumAzimuthalAngle:W[0],maximumPolarAngle:W[1],maximumRadius:W[2]}),this[vJ](W[2]),this.jumpCameraToGoal()}[EJ](W){this[so].applyOptions({minimumFieldOfView:W[0]*180/Math.PI}),this.jumpCameraToGoal()}[SJ](W){const j=this[Ri].adjustedFoV(W[0]*180/Math.PI);this[so].applyOptions({maximumFieldOfView:j}),this.jumpCameraToGoal()}[wJ](W){const[j,J,ie]=W;this[ao].arRenderer.isPresenting||this[Ri].setTarget(j,J,ie),this[so].changeSource=Va.NONE,this[ao].arRenderer.updateTarget(),this[mE]()}[Km](W,j){if(super[Km](W,j),this[ao].isPresenting||!this[Pw]())return;const J=this[so],ie=this[Ri],ee=performance.now();if(this[G1]&&this.loaded&&ee>this[HI]+this.interactionPromptThreshold&&(this[G1]=!1,this[_E]=ee,this[f8].classList.add("visible")),isFinite(this[_E])&&this.interactionPromptStyle===p8.WIGGLE){const ue=(ee-this[_E])/oTe%1,fe=aTe(ue),pe=lTe(ue);if(this[dF].style.opacity=`${pe}`,fe!==this[dI]){const xe=fe*ie.width*.05,ce=(fe-this[dI])*Math.PI/16;this[dF].style.transform=`translateX(${xe}px)`,J.changeSource=Va.AUTOMATIC,J.adjustOrbit(ce,0,0),this[dI]=fe}}const re=J.update(W,j),se=ie.updateTarget(j);(re||se)&&this[m8]()}[AF](){this[G1]=!1,this[f8].classList.remove("visible"),this[_E]=1/0}[vJ](W){const j=Math.max(this[Ri].farRadius(),W),J=0,ie=Math.abs(2*j);this[so].updateNearFar(J,ie)}[mJ](){const{theta:W,phi:j}=this[so].getCameraSpherical(this[_8]),J=(4+Math.floor((W%ETe+CTe)/Coe))%4,ie=Math.floor(j/xTe),ee=pTe[J],se=`${fTe[ie]}${ee}`,ue=se;ue in this[_v]?this[Ak](this[_v][ue]):this[Ak](`View from stage ${se}`)}get[KE](){let W=mTe;return"interaction-prompt"in this[_v]&&(W=`. ${this[_v]["interaction-prompt"]}`),super[KE].replace(/\.$/,"")+(this.cameraControls?W:"")}async[pk](W){const j=this[so],J=this[Ri],ie=J.adjustedFoV(J.framedFoVDeg);super[pk](W);const ee=J.adjustedFoV(J.framedFoVDeg)/ie,re=j.getFieldOfView()*(isFinite(ee)?ee:1);j.updateAspect(this[Ri].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[so].setFieldOfView(re),this.jumpCameraToGoal()}[Xm](){super[Xm](),this[v8]?this[pI]=!0:this[v8]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(U=mE,P=m8,H=hI,_J)](){if(typeof this.a11y=="string")if(this.a11y.startsWith("{"))try{this[_v]=JSON.parse(this.a11y)}catch(W){console.warn("Error parsing a11y JSON:",W)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[_v]={};else typeof this.a11y=="object"&&this.a11y!=null?this[_v]=Object.assign({},this.a11y):this[_v]={};this[Tg].setAttribute("aria-label",this[KE])}}return cc([Kn({type:Boolean,attribute:"camera-controls"})],N.prototype,"cameraControls",void 0),cc([Ty({intrinsics:xoe,observeEffects:!0,updateHandler:yJ}),Kn({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],N.prototype,"cameraOrbit",void 0),cc([Ty({intrinsics:wTe,observeEffects:!0,updateHandler:wJ}),Kn({type:String,attribute:"camera-target",hasChanged:()=>!0})],N.prototype,"cameraTarget",void 0),cc([Ty({intrinsics:gJ,observeEffects:!0,updateHandler:bJ}),Kn({type:String,attribute:"field-of-view",hasChanged:()=>!0})],N.prototype,"fieldOfView",void 0),cc([Ty({intrinsics:yTe,updateHandler:xJ}),Kn({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],N.prototype,"minCameraOrbit",void 0),cc([Ty({intrinsics:bTe,updateHandler:CJ}),Kn({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],N.prototype,"maxCameraOrbit",void 0),cc([Ty({intrinsics:vTe,updateHandler:EJ}),Kn({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],N.prototype,"minFieldOfView",void 0),cc([Ty({intrinsics:gJ,updateHandler:SJ}),Kn({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],N.prototype,"maxFieldOfView",void 0),cc([Kn({type:Number,attribute:"interaction-prompt-threshold"})],N.prototype,"interactionPromptThreshold",void 0),cc([Kn({type:String,attribute:"interaction-prompt"})],N.prototype,"interactionPrompt",void 0),cc([Kn({type:String,attribute:"interaction-prompt-style"})],N.prototype,"interactionPromptStyle",void 0),cc([Kn({type:Number,attribute:"orbit-sensitivity"})],N.prototype,"orbitSensitivity",void 0),cc([Kn({type:Number,attribute:"zoom-sensitivity"})],N.prototype,"zoomSensitivity",void 0),cc([Kn({type:Number,attribute:"pan-sensitivity"})],N.prototype,"panSensitivity",void 0),cc([Kn({type:String,attribute:"touch-action"})],N.prototype,"touchAction",void 0),cc([Kn({type:Boolean,attribute:"disable-zoom"})],N.prototype,"disableZoom",void 0),cc([Kn({type:Boolean,attribute:"disable-pan"})],N.prototype,"disablePan",void 0),cc([Kn({type:Boolean,attribute:"disable-tap"})],N.prototype,"disableTap",void 0),cc([Kn({type:Number,attribute:"interpolation-decay"})],N.prototype,"interpolationDecay",void 0),cc([Kn()],N.prototype,"a11y",void 0),N};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BTe=.018,BJ=2,ITe=300,TTe=new ci,IJ=new Fe,TJ=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),gF=Math.PI/8,mF=.04,_F=10,Va={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class MTe extends FA{constructor(e,i,r){super(),this.camera=e,this.element=i,this.scene=r,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=Va.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new nr,this.panPerPixel=0,this.spherical=new vw,this.goalSpherical=new vw,this.thetaDamper=new Nd,this.phiDamper=new Nd,this.radiusDamper=new Nd,this.logFov=Math.log(TJ.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Nd,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=s=>{if(this.enablePan)s.preventDefault();else for(const l of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:l.id})))},this.touchModeZoom=(s,l)=>{if(!this._disableZoom){const u=this.twoTouchDistance(this.pointers[0],this.pointers[1]),A=mF*this.zoomSensitivity*(this.lastSeparation-u)*50/this.scene.height;this.lastSeparation=u,this.userAdjustOrbit(0,0,A)}this.panPerPixel>0&&this.movePan(s,l)},this.disableScroll=s=>{s.preventDefault()},this.touchModeRotate=(s,l)=>{const{touchAction:u}=this._options;if(!this.touchDecided&&u!=="none"){this.touchDecided=!0;const A=Math.abs(s),g=Math.abs(l);if(this.changeSource===Va.USER_INTERACTION&&(u==="pan-y"&&g>A||u==="pan-x"&&A>g)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(s,l)},this.onPointerDown=s=>{if(this.pointers.length>2)return;const{element:l}=this;this.pointers.length===0&&(l.addEventListener("pointermove",this.onPointerMove),l.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=s.clientX,this.startPointerPosition.clientY=s.clientY,this.startTime=performance.now());try{l.setPointerCapture(s.pointerId)}catch{}this.pointers.push({clientX:s.clientX,clientY:s.clientY,id:s.pointerId}),this.isUserPointing=!1,s.pointerType==="touch"?(this.changeSource=s.altKey?Va.AUTOMATIC:Va.USER_INTERACTION,this.onTouchChange(s)):(this.changeSource=Va.USER_INTERACTION,this.onMouseDown(s)),this.changeSource===Va.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=s=>{const l=this.pointers.find(_=>_.id===s.pointerId);if(l==null)return;if(s.pointerType==="mouse"&&s.buttons===0){this.onPointerUp(s);return}const u=this.pointers.length,A=(s.clientX-l.clientX)/u,g=(s.clientY-l.clientY)/u;A===0&&g===0||(l.clientX=s.clientX,l.clientY=s.clientY,s.pointerType==="touch"?(this.changeSource=s.altKey?Va.AUTOMATIC:Va.USER_INTERACTION,this.touchMode!==null&&this.touchMode(A,g)):(this.changeSource=Va.USER_INTERACTION,this.panPerPixel>0?this.movePan(A,g):this.handleSinglePointerMove(A,g)))},this.onPointerUp=s=>{const{element:l}=this,u=this.pointers.findIndex(A=>A.id===s.pointerId);u!==-1&&this.pointers.splice(u,1),this.panPerPixel>0&&!s.altKey&&this.resetRadius(),this.pointers.length===0?(l.removeEventListener("pointermove",this.onPointerMove),l.removeEventListener("pointerup",this.onPointerUp),l.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(s)):this.touchMode!==null&&this.onTouchChange(s),this.scene.element[lU].style.opacity=0,l.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=s=>{this.changeSource=Va.USER_INTERACTION;const l=s.deltaY*(s.deltaMode==1?18:1)*mF*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,l),s.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=s=>{const{changeSource:l}=this;this.changeSource=Va.USER_INTERACTION,(s.shiftKey&&this.enablePan?this.panKeyCodeHandler(s):this.orbitZoomKeyCodeHandler(s))?(s.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=l},this._options=Object.assign({},TJ),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,e===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new vw){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,i){this.camera.far=i===0?2:i,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,i=this.goalSpherical.phi,r=this.goalSpherical.radius){const{minimumAzimuthalAngle:s,maximumAzimuthalAngle:l,minimumPolarAngle:u,maximumPolarAngle:A,minimumRadius:g,maximumRadius:_}=this._options,{theta:b,phi:x,radius:C}=this.goalSpherical,I=Vm(e,s,l);!isFinite(s)&&!isFinite(l)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-I)+I);const F=Vm(i,u,A),L=Vm(r,g,_);return I===b&&F===x&&L===C||!isFinite(I)||!isFinite(F)||!isFinite(L)?!1:(this.goalSpherical.theta=I,this.goalSpherical.phi=F,this.goalSpherical.radius=L,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:i,maximumFieldOfView:r}=this._options;e=Vm(e,i,r),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,i,r){const{theta:s,phi:l,radius:u}=this.goalSpherical,{minimumRadius:A,maximumRadius:g,minimumFieldOfView:_,maximumFieldOfView:b}=this._options,x=this.spherical.theta-s,C=Math.PI-.001,I=s-Vm(e,-C-x,C-x),F=l-i,L=r===0?0:((r>0?g:A)-u)/(Math.log(r>0?b:_)-this.goalLogFov),U=u+r*(isFinite(L)?L:(g-A)*2);if(this.setOrbit(I,F,U),r!==0){const P=this.goalLogFov+r;this.setFieldOfView(Math.exp(P))}}jumpToGoal(){this.update(0,coe)}update(e,i){if(this.isStationary())return!1;const{maximumPolarAngle:r,maximumRadius:s}=this._options,l=this.spherical.theta-this.goalSpherical.theta;return Math.abs(l)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(l)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,i,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,i,r),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,i,s),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,i,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:i}=this._options;this._disableZoom&&i!=="none"?e.touchAction="manipulation":e.touchAction=i}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new hl(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,i,r){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,i*this.orbitSensitivity*this.inputSensitivity,r*this.inputSensitivity)}wrapAngle(e){const i=(e+Math.PI)/(2*Math.PI);return(i-Math.floor(i))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,i){const{clientX:r,clientY:s}=e,{clientX:l,clientY:u}=i,A=l-r,g=u-s;return Math.sqrt(A*A+g*g)}handleSinglePointerMove(e,i){const r=this.pixelLengthToSphericalAngle(e),s=this.pixelLengthToSphericalAngle(i);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(r,s,0)}initializePan(){const{theta:e,phi:i}=this.spherical,r=e-this.scene.yaw;this.panPerPixel=BTe*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(r),-Math.cos(i)*Math.sin(r),0,0,Math.sin(i),0,Math.sin(r),-Math.cos(i)*Math.cos(r),0)}movePan(e,i){const{scene:r}=this,s=IJ.set(e,i,0).multiplyScalar(this.inputSensitivity),l=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;s.multiplyScalar(l);const u=r.getTarget();u.add(s.applyMatrix3(this.panProjection)),r.boundingSphere.clampPoint(u,u),r.setTarget(u.x,u.y,u.z)}recenter(e){if(performance.now()>this.startTime+ITe||Math.abs(e.clientX-this.startPointerPosition.clientX)>BJ||Math.abs(e.clientY-this.startPointerPosition.clientY)>BJ)return;const{scene:i}=this,r=i.positionAndNormalFromPoint(i.getNDC(e.clientX,e.clientY));if(r==null){const{cameraTarget:s}=i.element;i.element.cameraTarget="",i.element.cameraTarget=s,this.userAdjustOrbit(0,0,1)}else i.target.worldToLocal(r.position),i.setTarget(r.position.x,r.position.y,r.position.z)}resetRadius(){const{scene:e}=this,i=e.positionAndNormalFromPoint(TTe.set(0,0));if(i==null)return;e.target.worldToLocal(i.position);const r=e.getTarget(),{theta:s,phi:l}=this.spherical,u=s-e.yaw,A=IJ.set(Math.sin(l)*Math.sin(u),Math.cos(l),Math.sin(l)*Math.cos(u)),g=A.dot(i.position.sub(r));r.add(A.multiplyScalar(g)),e.setTarget(r.x,r.y,r.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-g)}onTouchChange(e){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),e.altKey||(this.scene.element[lU].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(e.button===2||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[lU].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let i=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,mF*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-1*mF*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-gF,0);break;case"ArrowDown":this.userAdjustOrbit(0,gF,0);break;case"ArrowLeft":this.userAdjustOrbit(-gF,0,0);break;case"ArrowRight":this.userAdjustOrbit(gF,0,0);break;default:i=!1;break}return i}panKeyCodeHandler(e){this.initializePan();let i=!0;switch(e.key){case"ArrowUp":this.movePan(0,-1*_F);break;case"ArrowDown":this.movePan(0,_F);break;case"ArrowLeft":this.movePan(-1*_F,0);break;case"ArrowRight":this.movePan(_F,0);break;default:i=!1;break}return i}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RTe=30,MJ=.8,RJ=1.5,DTe=20,FTe=.2,UTe=.25,kTe=10,vE=150,DJ=5,LTe=.1,ky={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},EH={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},fI=new Fe,yE=new Ys,PTe=new Ki,OTe=new Fe,QTe=new xo(45,1,.1,100),FJ=new Ln().setFromPoints([new Fe(0,0,0),new Fe(0,0,-1)]),NTe=new Og;class HTe extends FA{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Fe,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Fe,this.relativeOrientation=new Ys,this.scaleLine=new Mf(FJ),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Fe,this.goalYaw=0,this.goalScale=1,this.xDamper=new Nd,this.yDamper=new Nd,this.zDamper=new Nd,this.yawDamper=new Nd,this.pitchDamper=new Nd,this.rollDamper=new Nd,this.scaleDamper=new Nd,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=i=>{const r=this.presentedScene,s=i.target;if(this.placementBox.controllerIntersection(r,s)!=null)this.selectedController!=null&&(this.selectedController.userData.line.visible=!1,r.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/r.pivot.scale.x,this.scaleLine.visible=!0)),s.attach(r.pivot),this.selectedController=s,r.setShadowIntensity(.01);else{const l=s===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(s.quaternion).invert().multiply(r.pivot.getWorldQuaternion(yE)),l.userData.turning=!1,s.userData.turning=!0,s.userData.line.visible=!1}},this.onControllerSelectEnd=i=>{const r=i.target;if(r.userData.turning=!1,r.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,this.selectedController!=null&&this.selectedController!=r)return;const s=this.presentedScene;s.attach(s.pivot),this.selectedController=null,this.goalYaw=Math.atan2(s.pivot.matrix.elements[8],s.pivot.matrix.elements[10]),this.goalPosition.x=s.pivot.position.x,this.goalPosition.z=s.pivot.position.z},this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new tJ(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=i=>{const r=this.transientHitTestSource;if(r==null)return;const s=this.frame.getHitTestResultsForTransientInput(r),l=this.presentedScene,u=this.placementBox;if(s.length===1){this.inputSource=i.inputSource;const{axes:A}=this.inputSource.gamepad,g=u.getHit(this.presentedScene,A[0],A[1]);u.show=!0,g!=null?(this.isTranslating=!0,this.lastDragPosition.copy(g)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=A[0]*RJ)}else if(s.length===2){u.show=!0,this.isTwoFingering=!0;const{separation:A}=this.fingerPolar(s);this.firstRatio=A/l.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){BY();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:[],optionalFeatures:["hit-test","dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return BY(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,i=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let r=new Promise((_,b)=>{requestAnimationFrame(()=>_())});e.setHotspotsVisibility(!1),e.queueRender(),await r,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),i===!0&&(this.xrLight=new qIe(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const _=this.presentedScene;_.add(this.xrLight),_.environment=this.xrLight.environment}));const s=await this.resolveARSession();s.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const l=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");l.classList.add("enabled"),l.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=l;const u=await s.requestReferenceSpace("viewer");this.xrMode=s.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const A=DTe*Math.PI/180,g=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(A),z:-Math.cos(A)});s.requestHitTestSource({space:u,offsetRay:g}).then(_=>{this.initialHitSource=_}),this.xrMode!=="screen-space"&&(this.setupControllers(),this.xDamper.setDecayTime(vE),this.yDamper.setDecayTime(vE),this.zDamper.setDecayTime(vE),this.yawDamper.setDecayTime(vE),this.pitchDamper.setDecayTime(vE),this.rollDamper.setDecayTime(vE)),this.currentSession=s,this.placementBox=new tJ(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:ky.SESSION_STARTED})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const e=this.presentedScene;if(e.add(this.controller1),e.add(this.controller2),!this.controller1.userData.line){const i=new Mf(FJ);i.name="line",i.scale.z=DJ,this.controller1.userData.turning=!1,this.controller1.userData.line=i,this.controller1.add(i),this.controller2.userData.turning=!1;const r=i.clone();this.controller2.userData.line=r,this.controller2.add(r),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:s}=e,l=LTe/Math.max(s.x,s.y,s.z),u=new Dr(NTe);u.name="box",u.scale.copy(s).multiplyScalar(l),u.visible=!1,this.controller1.userData.box=u,e.add(u);const A=u.clone();this.controller2.userData.box=A,e.add(A)}}hover(e){if(this.xrMode==="screen-space"||this.selectedController==e)return!1;const i=this.presentedScene,r=this.placementBox.controllerIntersection(i,e);return e.userData.box.visible=(r==null||e.userData.turning)&&!this.isTwoFingering,e.userData.line.scale.z=r==null?DJ:r.distance,r!=null}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise(i=>{this.resolveCleanup=i});try{await this.currentSession.end(),await e}catch(i){console.warn("Error while trying to end WebXR AR session"),console.warn(i),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(e!=null){const i=e.getTarget();this.oldTarget.copy(i),this.placeOnWall?i.z=e.boundingBox.min.z:i.y=e.boundingBox.min.y,e.setTarget(i.x,i.y,i.z)}}postSessionCleanup(){const e=this.currentSession;e!=null&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const i=this.presentedScene;if(this._presentedScene=null,i!=null){const{element:u}=i;this.xrLight!=null&&(i.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),i.add(i.pivot),i.pivot.quaternion.set(0,0,0,1),i.pivot.position.set(0,0,0),i.pivot.scale.set(1,1,1),i.setShadowOffset(0);const A=this.turntableRotation;A!=null&&(i.yaw=A);const g=this.oldShadowIntensity;g!=null&&i.setShadowIntensity(g),i.setEnvironmentAndSkybox(u[kI],u[LI]);const _=this.oldTarget;i.setTarget(_.x,_.y,_.z),i.xrCamera=null,i.element.removeEventListener("load",this.onUpdateScene),i.orientHotspots(0);const{width:b,height:x}=u.getBoundingClientRect();i.setSize(b,x),requestAnimationFrame(()=>{i.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Va.NONE}}))})}this.renderer.height=0;const r=this.exitWebXRButtonContainer;r!=null&&(r.classList.remove("enabled"),r.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const s=this.transientHitTestSource;s!=null&&(s.cancel(),this.transientHitTestSource=null);const l=this.initialHitSource;l!=null&&(l.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.xrMode!=="screen-space"&&(this.controller1!=null&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),this.controller2!=null&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:ky.NOT_PRESENTING})}updateView(e){const i=this.presentedScene,r=this.threeRenderer.xr;r.updateCamera(QTe),i.xrCamera=r.getCamera();const{elements:s}=i.getCamera().matrixWorld;if(i.orientHotspots(Math.atan2(s[1],s[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const u=e.recommendedViewportScale;e.requestViewportScale(Math.max(u,UTe))}const l=r.getBaseLayer();if(l!=null){const u=l instanceof XRWebGLLayer?l.getViewport(e):r.getBinding().getViewSubImage(l,e).viewport;this.threeRenderer.setViewport(u.x,u.y,u.width,u.height)}}placeInitially(){const e=this.presentedScene,{pivot:i,element:r}=e,{position:s}=i,l=e.getCamera(),{width:u,height:A}=this.overlay.getBoundingClientRect();e.setSize(u,A),l.projectionMatrixInverse.copy(l.projectionMatrix).invert();const{theta:g}=r.getCameraOrbit(),_=l.getWorldDirection(fI);e.yaw=Math.atan2(-_.x,-_.z)-g,this.goalYaw=e.yaw;const b=Math.max(1,2*e.boundingSphere.radius);s.copy(l.position).add(_.multiplyScalar(b)),this.updateTarget();const x=e.getTarget();if(s.add(x).sub(this.oldTarget),this.goalPosition.copy(s),e.setHotspotsVisibility(!0),this.xrMode==="screen-space"){const{session:C}=this.frame;C.addEventListener("selectstart",this.onSelectStart),C.addEventListener("selectend",this.onSelectEnd),C.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(I=>{this.transientHitTestSource=I})}}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let i=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return i!=null&&(fI.copy(i).sub(this.presentedScene.getCamera().position),fI.length()>kTe)?null:i}getHitPoint(e){const i=this.threeRenderer.xr.getReferenceSpace(),r=e.getPose(i);if(r==null)return null;const s=PTe.fromArray(r.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(s.elements[4],s.elements[6])),s.elements[5]>.75!==this.placeOnWall?OTe.setFromMatrixPosition(s):null}moveToFloor(e){const i=this.initialHitSource;if(i==null)return;const r=e.getHitTestResults(i);if(r.length==0)return;const s=r[0],l=this.getHitPoint(s);l!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(l):this.goalPosition.y=l.y),i.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:ky.OBJECT_PLACED}))}fingerPolar(e){const i=e[0].inputSource.gamepad.axes,r=e[1].inputSource.gamepad.axes,s=r[0]-i[0],l=r[1]-i[1],u=Math.atan2(l,s);let A=this.lastAngle-u;return A>Math.PI?A-=2*Math.PI:A<-Math.PI&&(A+=2*Math.PI),this.lastAngle=u,{separation:Math.sqrt(s*s+l*l),deltaYaw:A}}setScale(e){const i=e/this.firstRatio;this.goalScale=Math.abs(i-1)<FTe?1:i}processInput(e){const i=this.transientHitTestSource;if(i==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const r=e.getHitTestResultsForTransientInput(i),s=this.presentedScene,l=s.pivot.scale.x;if(this.isTwoFingering){if(r.length<2)this.isTwoFingering=!1;else{const{separation:u,deltaYaw:A}=this.fingerPolar(r);this.placeOnWall===!1&&(this.goalYaw+=A),s.canScale&&this.setScale(u)}return}else if(r.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:u}=this.fingerPolar(r);this.firstRatio=u/l;return}if(this.isRotating){const u=this.inputSource.gamepad.axes[0]*RJ;this.goalYaw+=u-this.lastAngle,this.lastAngle=u}else this.isTranslating&&r.forEach(u=>{if(u.inputSource!==this.inputSource)return;let A=null;if(u.results.length>0&&(A=this.getHitPoint(u.results[0])),A==null&&(A=this.getTouchLocation()),A!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const g=A.y-this.lastDragPosition.y;if(g<0){this.placementBox.offsetHeight=g/l,this.presentedScene.setShadowOffset(g);const _=fI.copy(s.getCamera().position),b=-g/(_.y-A.y);_.multiplyScalar(b),A.multiplyScalar(1-b).add(_)}}this.goalPosition.add(A),this.lastDragPosition.copy(A)}})}moveScene(e){const i=this.presentedScene,{pivot:r}=i,s=this.placementBox;if(s.updateOpacity(e),this.controller1&&(this.controller1.userData.turning&&(r.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&r.quaternion.premultiply(yE.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),r.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(r.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&r.quaternion.premultiply(yE.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),r.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const C=this.controllerSeparation();this.setScale(C),this.scaleLine.scale.z=-C,this.scaleLine.lookAt(this.controller2.position)}const l=i.pivot.scale.x;if(this.goalScale!==l){const C=this.scaleDamper.update(l,this.goalScale,e,1);i.pivot.scale.set(C,C,C)}if(r.parent!==i)return;const{position:u}=r,A=i.boundingSphere.radius,g=this.goalPosition;let _=Va.NONE;if(!g.equals(u)){_=Va.USER_INTERACTION;let{x:C,y:I,z:F}=u;if(C=this.xDamper.update(C,g.x,e,A),I=this.yDamper.update(I,g.y,e,A),F=this.zDamper.update(F,g.z,e,A),u.set(C,I,F),this.xrMode==="screen-space"&&!this.isTranslating){const L=g.y-I;this.placementComplete&&this.placeOnWall===!1?(s.offsetHeight=L/i.pivot.scale.x,i.setShadowOffset(L)):L===0&&(this.placementComplete=!0,s.show=!1,i.setShadowIntensity(MJ))}this.xrMode!=="screen-space"&&g.equals(u)&&i.setShadowIntensity(MJ)}i.updateTarget(e),yE.setFromAxisAngle(fI.set(0,1,0),this.goalYaw);const b=i.pivot.quaternion.angleTo(yE),x=b-this.yawDamper.update(b,0,e,Math.PI);i.pivot.quaternion.rotateTowards(yE,x),i.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:_}}))}onWebXRFrame(e,i){if(this.xrMode!=="screen-space"){const A=this.hover(this.controller1),g=this.hover(this.controller2);this.placementBox.show=(A||g)&&!this.isTwoFingering}this.frame=i,++this.frames;const r=this.threeRenderer.xr.getReferenceSpace(),s=i.getViewerPose(r);s==null&&this.tracking===!0&&this.frames>RTe&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:EH.NOT_TRACKING}));const l=this.presentedScene;if(s==null||l==null||!l.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:EH.TRACKING}));let u=!0;for(const A of s.views){if(this.updateView(A),u){this.moveToFloor(i),this.processInput(i);const g=e-this.lastTick;this.moveScene(g),this.renderer.preRender(l,e,g),this.lastTick=e,l.renderShadow(this.threeRenderer)}this.threeRenderer.render(l,l.getCamera()),u=!1}}}function zTe(a){const e=new Map,i=new Map,r=a.clone();return Eoe(a,r,function(s,l){e.set(l,s),i.set(s,l)}),r.traverse(function(s){if(!s.isSkinnedMesh)return;const l=s,u=e.get(s),A=u.skeleton.bones;l.skeleton=u.skeleton.clone(),l.bindMatrix.copy(u.bindMatrix),l.skeleton.bones=A.map(function(g){return i.get(g)}),l.bind(l.skeleton,l.bindMatrix)}),r}function Eoe(a,e,i){i(a,e);for(let r=0;r<a.children.length;r++)Eoe(a.children[r],e.children[r],i)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UJ=Symbol("prepared"),uk=Symbol("prepare"),Qm=Symbol("preparedGLTF"),hk=Symbol("clone");class GTe{static prepare(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[UJ])return e;const i=this[uk](e);return i[UJ]=!0,i}static[uk](e){const{scene:i}=e,r=[i];return Object.assign(Object.assign({},e),{scene:i,scenes:r})}get parser(){return this[Qm].parser}get animations(){return this[Qm].animations}get scene(){return this[Qm].scene}get scenes(){return this[Qm].scenes}get cameras(){return this[Qm].cameras}get asset(){return this[Qm].asset}get userData(){return this[Qm].userData}constructor(e){this[Qm]=e}clone(){const e=this.constructor,i=this[hk]();return new e(i)}dispose(){this.scenes.forEach(e=>{e.traverse(i=>{const r=i;if(!r.material)return;(Array.isArray(r.material)?r.material:[r.material]).forEach(l=>{for(const u in l){const A=l[u];if(A instanceof Js){const g=A.source.data;g.close!=null&&g.close(),A.dispose()}}l.dispose()}),r.geometry.dispose()})})}[hk](){const e=this[Qm],i=zTe(this.scene);VTe(i,this.scene);const r=[i],s=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:i,scenes:r,userData:s})}}const VTe=(a,e)=>{Soe(a,e,(i,r)=>{r.userData.variantMaterials!==void 0&&(i.userData.variantMaterials=new Map(r.userData.variantMaterials)),r.userData.variantData!==void 0&&(i.userData.variantData=r.userData.variantData),r.userData.originalMaterial!==void 0&&(i.userData.originalMaterial=r.userData.originalMaterial)})},Soe=(a,e,i)=>{i(a,e);for(let r=0;r<a.children.length;r++)Soe(a.children[r],e.children[r],i)},kJ=Symbol("threeGLTF"),LJ=Symbol("gltf"),PJ=Symbol("gltfElementMap"),OJ=Symbol("threeObjectMap"),QJ=Symbol("parallelTraverseThreeScene"),NJ=Symbol("correlateOriginalThreeGLTF"),HJ=Symbol("correlateCloneThreeGLTF");class PT{static from(e,i){return i!=null?this[HJ](e,i):this[NJ](e)}static[NJ](e){const i=e.parser.json,r=e.parser.associations,s=new Map,l={name:"Default"},u={index:-1};for(const A of r.keys())A instanceof dl&&r.get(A)==null&&(u.index<0&&(i.materials==null&&(i.materials=[]),u.index=i.materials.length,i.materials.push(l)),A.name=l.name,r.set(A,{materials:u.index}));for(const[A,g]of r){g&&(A.userData=A.userData||{},A.userData.associations=g);for(const _ in g)if(_!=null&&_!=="primitives"){const b=_,C=(i[b]||[])[g[b]];if(C==null)continue;let I=s.get(C);I==null&&(I=new Set,s.set(C,I)),I.add(A)}}return new PT(e,i,r,s)}static[HJ](e,i){const r=i.threeGLTF,s=i.gltf,l=JSON.parse(JSON.stringify(s)),u=new Map,A=new Map;for(let g=0;g<r.scenes.length;g++)this[QJ](r.scenes[g],e.scenes[g],(_,b)=>{const x=i.threeObjectMap.get(_);if(x!=null){for(const C in x)if(C!=null&&C!=="primitives"){const I=C,F=x[I],L=l[I][F],U=u.get(b)||{};U[I]=F,u.set(b,U);const P=A.get(L)||new Set;P.add(b),A.set(L,P)}}});return new PT(e,l,u,A)}static[QJ](e,i,r){const s=(l,u)=>{if(r(l,u),l.isObject3D){const A=l,g=u;if(A.material)if(Array.isArray(A.material))for(let _=0;_<A.material.length;++_)r(A.material[_],g.material[_]);else r(A.material,g.material);for(let _=0;_<l.children.length;++_)s(l.children[_],u.children[_])}};s(e,i)}get threeGLTF(){return this[kJ]}get gltf(){return this[LJ]}get gltfElementMap(){return this[PJ]}get threeObjectMap(){return this[OJ]}constructor(e,i,r,s){this[kJ]=e,this[LJ]=i,this[PJ]=s,this[OJ]=r}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=Symbol("correlatedSceneGraph");class qTe extends GTe{static[uk](e){const i=super[uk](e);i[gI]==null&&(i[gI]=PT.from(i));const{scene:r}=i,s=new dc(void 0,1/0);return r.traverse(l=>{l.renderOrder=1e3,l.frustumCulled=!1,l.name||(l.name=l.uuid);const u=l;if(u.material){const{geometry:A}=u;u.castShadow=!0,u.isSkinnedMesh&&(A.boundingSphere=s,A.boundingBox=null);const g=u.material;if(g.isMeshBasicMaterial===!0&&(g.toneMapped=!1),g.shadowSide=If,g.aoMap){const{gltf:_,threeObjectMap:b}=i[gI],x=b.get(g);if(_.materials!=null&&x!=null&&x.materials!=null){const C=_.materials[x.materials];C.occlusionTexture&&C.occlusionTexture.texCoord===0&&A.attributes.uv!=null&&A.setAttribute("uv2",A.attributes.uv)}}}}),i}get correlatedSceneGraph(){return this[Qm][gI]}[hk](){const e=super[hk](),i=new Map;return e.scene.traverse(r=>{const s=r;if(s.material){const u=s.material;if(u!=null){if(i.has(u.uuid)){s.material=i.get(u.uuid);return}s.material=u.clone(),i.set(u.uuid,s.material)}}const l=r;l.target!==void 0&&l.add(l.target)}),e[gI]=PT.from(e,this.correlatedSceneGraph),e}}const Boe=(a,e,i)=>{let r;switch(a){case $a:r=new Uint8ClampedArray(e*i*4);break;case Ol:r=new Uint16Array(e*i*4);break;case jm:r=new Uint32Array(e*i*4);break;case Nk:r=new Int8Array(e*i*4);break;case Hk:r=new Int16Array(e*i*4);break;case XT:r=new Int32Array(e*i*4);break;case ra:r=new Float32Array(e*i*4);break;default:throw new Error("Unsupported data type")}return r};let vF;const $Te=(a,e,i,r)=>{if(vF!==void 0)return vF;const s=new qd(1,1,r);e.setRenderTarget(s);const l=new Dr(new UA,new Pc({color:16777215}));e.render(l,i),e.setRenderTarget(null);const u=Boe(a,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,u),s.dispose(),l.geometry.dispose(),l.material.dispose(),vF=u[0]!==0,vF};class I7{constructor(e){var i,r,s,l,u,A,g,_,b,x,C,I,F,L,U,P;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(N){throw this._renderer.setRenderTarget(null),N}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const H={format:lo,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.generateMipmaps:!1,magFilter:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.magFilter)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.magFilter:Or,minFilter:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.minFilter)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.minFilter:Or,samples:((b=e.renderTargetOptions)===null||b===void 0?void 0:b.samples)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.samples:void 0,wrapS:((C=e.renderTargetOptions)===null||C===void 0?void 0:C.wrapS)!==void 0?(I=e.renderTargetOptions)===null||I===void 0?void 0:I.wrapS:$o,wrapT:((F=e.renderTargetOptions)===null||F===void 0?void 0:F.wrapT)!==void 0?(L=e.renderTargetOptions)===null||L===void 0?void 0:L.wrapT:$o};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=I7.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Tf,this._camera=new DA,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!$Te(this._type,this._renderer,this._camera,H)){let N;switch(this._type){case Ol:N=this._renderer.extensions.has("EXT_color_buffer_float")?ra:void 0;break}N!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ra}`),this._type=N):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Dr(new UA,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new qd(this.width,this.height,H),this._renderTarget.texture.mapping=((U=e.renderTargetOptions)===null||U===void 0?void 0:U.mapping)!==void 0?(P=e.renderTargetOptions)===null||P===void 0?void 0:P.mapping:qy}static instantiateRenderer(){const e=new yL;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=Boe(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const i=new Cf(this.toArray(),this.width,this.height,lo,this._type,(e==null?void 0:e.mapping)||qy,(e==null?void 0:e.wrapS)||$o,(e==null?void 0:e.wrapT)||$o,(e==null?void 0:e.magFilter)||Or,(e==null?void 0:e.minFilter)||Or,(e==null?void 0:e.anisotropy)||1,Co);return i.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,i}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof qh&&Object.values(this.material.uniforms).forEach(i=>{i.value instanceof Js&&i.value.dispose()}),Object.values(this.material).forEach(i=>{i instanceof Js&&i.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const WTe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,jTe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class KTe extends qh{constructor({gamma:e,offsetHdr:i,offsetSdr:r,gainMapMin:s,gainMapMax:l,maxDisplayBoost:u,hdrCapacityMin:A,hdrCapacityMax:g,sdr:_,gainMap:b}){super({name:"GainMapDecoderMaterial",vertexShader:WTe,fragmentShader:jTe,uniforms:{sdr:{value:_},gainMap:{value:b},gamma:{value:new Fe(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new Fe().fromArray(i)},offsetSdr:{value:new Fe().fromArray(r)},gainMapMin:{value:new Fe().fromArray(s)},gainMapMax:{value:new Fe().fromArray(l)},weightFactor:{value:(Math.log2(u)-A)/(g-A)}},blending:Dg,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=u,this._hdrCapacityMin=A,this._hdrCapacityMax=g,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const i=this.uniforms.gamma.value;i.x=1/e[0],i.y=1/e[1],i.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Ioe extends Error{}class Toe extends Error{}const mI=(a,e,i)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(a);if(r)return r[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(a);if(s){const l=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return l&&l.length===3?l.map(u=>u.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(i!==void 0)return i;throw new Error(`Can't find ${e} in gainmap metadata`)},XTe=a=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(a):e=a.toString();let i=e.indexOf("<x:xmpmeta");for(;i!==-1;){const r=e.indexOf("x:xmpmeta>",i),s=e.slice(i,r+10);try{const l=mI(s,"hdrgm:GainMapMin","0"),u=mI(s,"hdrgm:GainMapMax"),A=mI(s,"hdrgm:Gamma","1"),g=mI(s,"hdrgm:OffsetSDR","0.015625"),_=mI(s,"hdrgm:OffsetHDR","0.015625"),b=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),x=b?b[1]:"0",C=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!C)throw new Error("Incomplete gainmap metadata");const I=C[1];return{gainMapMin:Array.isArray(l)?l.map(F=>parseFloat(F)):[parseFloat(l),parseFloat(l),parseFloat(l)],gainMapMax:Array.isArray(u)?u.map(F=>parseFloat(F)):[parseFloat(u),parseFloat(u),parseFloat(u)],gamma:Array.isArray(A)?A.map(F=>parseFloat(F)):[parseFloat(A),parseFloat(A),parseFloat(A)],offsetSdr:Array.isArray(g)?g.map(F=>parseFloat(F)):[parseFloat(g),parseFloat(g),parseFloat(g)],offsetHdr:Array.isArray(_)?_.map(F=>parseFloat(F)):[parseFloat(_),parseFloat(_),parseFloat(_)],hdrCapacityMin:parseFloat(x),hdrCapacityMax:parseFloat(I)}}catch{}i=e.indexOf("<x:xmpmeta",r)}};class YTe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((i,r)=>{const s=this.options.debug,l=new DataView(e.buffer);if(l.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const u=l.byteLength;let A=2,g=0,_;for(;A<u;){if(++g>250){r(new Error(`Found no marker after ${g} loops `));return}if(l.getUint8(A)!==255){r(new Error(`Not a valid marker at offset 0x${A.toString(16)}, found: 0x${l.getUint8(A).toString(16)}`));return}if(_=l.getUint8(A+1),s&&console.log(`Marker: ${_.toString(16)}`),_===226){s&&console.log("Found APP2 marker (0xffe2)");const b=A+4;if(l.getUint32(b)===1297106432){const x=b+4;let C;if(l.getUint16(x)===18761)C=!1;else if(l.getUint16(x)===19789)C=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(l.getUint16(x+2,!C)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const I=l.getUint32(x+4,!C);if(I<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const F=x+I,L=l.getUint16(F,!C),U=F+2;let P=0;for(let W=U;W<U+12*L;W+=12)l.getUint16(W,!C)===45057&&(P=l.getUint32(W+8,!C));const N=F+2+L*12+4,z=[];for(let W=N;W<N+P*16;W+=16){const j={MPType:l.getUint32(W,!C),size:l.getUint32(W+4,!C),dataOffset:l.getUint32(W+8,!C),dependantImages:l.getUint32(W+12,!C),start:-1,end:-1,isFII:!1};j.dataOffset?(j.start=x+j.dataOffset,j.isFII=!1):(j.start=0,j.isFII=!0),j.end=j.start+j.size,z.push(j)}if(this.options.extractNonFII&&z.length){const W=new Blob([l]),j=[];for(const J of z){if(J.isFII&&!this.options.extractFII)continue;const ie=W.slice(J.start,J.end+1,"image/jpeg");j.push(ie)}i(j)}}}A+=2+l.getUint16(A+2)}})}}const JTe=async a=>{const e=XTe(a);if(!e)throw new Toe("Gain map XMP metadata not found");const r=await new YTe({extractFII:!0,extractNonFII:!0}).extract(a);if(r.length!==2)throw new Ioe("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},zJ=a=>new Promise((e,i)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=s=>{i(s)},r.src=URL.createObjectURL(a)});class ZTe extends sa{constructor(e,i){super(i),e&&(this._renderer=e),this._internalLoadingManager=new fL}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new KTe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Js,sdr:new Js});return new I7({width:16,height:16,type:Ol,colorSpace:Co,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,i,r,s){const l=s?new Blob([s],{type:"image/jpeg"}):void 0,u=new Blob([r],{type:"image/jpeg"});let A,g,_=!1;if(typeof createImageBitmap>"u"){const C=await Promise.all([l?zJ(l):Promise.resolve(void 0),zJ(u)]);g=C[0],A=C[1],_=!0}else{const C=await Promise.all([l?createImageBitmap(l,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(u,{imageOrientation:"flipY"})]);g=C[0],A=C[1]}const b=new Js(g||new ImageData(2,2),qy,$o,$o,Or,oH,lo,$a,1,Co);b.flipY=_,b.needsUpdate=!0;const x=new Js(A,qy,$o,$o,Or,oH,lo,$a,1,rr);x.flipY=_,x.needsUpdate=!0,e.width=A.width,e.height=A.height,e.material.gainMap=b,e.material.sdr=x,e.material.gainMapMin=i.gainMapMin,e.material.gainMapMax=i.gainMapMax,e.material.offsetHdr=i.offsetHdr,e.material.offsetSdr=i.offsetSdr,e.material.gamma=i.gamma,e.material.hdrCapacityMin=i.hdrCapacityMin,e.material.hdrCapacityMax=i.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,i.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class eMe extends ZTe{load(e,i,r,s){const l=this.prepareQuadRenderer(),u=new Al(this._internalLoadingManager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(this.withCredentials),this.manager.itemStart(e),u.load(e,async A=>{if(typeof A=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const g=new Uint8Array(A);let _,b,x;try{const C=await JTe(g);_=C.sdr,b=C.gainMap,x=C.metadata}catch(C){if(C instanceof Toe||C instanceof Ioe)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),x={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},_=g;else throw C}try{await this.render(l,x,_,b)}catch(C){this.manager.itemError(e),typeof s=="function"&&s(C),l.disposeOnDemandRenderer();return}typeof i=="function"&&i(l),this.manager.itemEnd(e),l.disposeOnDemandRenderer()},r,A=>{this.manager.itemError(e),typeof s=="function"&&s(A)}),l}}class tMe extends ise{constructor(e){super(e),this.type=Ol}parse(e){const u=function(ie,ee){switch(ie){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(ee||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(ee||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(ee||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(ee||""))}},b=`
`,x=function(ie,ee,re){ee=ee||1024;let ue=ie.pos,fe=-1,pe=0,xe="",ce=String.fromCharCode.apply(null,new Uint16Array(ie.subarray(ue,ue+128)));for(;0>(fe=ce.indexOf(b))&&pe<ee&&ue<ie.byteLength;)xe+=ce,pe+=ce.length,ue+=128,ce+=String.fromCharCode.apply(null,new Uint16Array(ie.subarray(ue,ue+128)));return-1<fe?(ie.pos+=pe+fe+1,xe+ce.slice(0,fe)):!1},C=function(ie){const ee=/^#\?(\S+)/,re=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,se=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ue=/^\s*FORMAT=(\S+)\s*$/,fe=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,pe={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let xe,ce;for((ie.pos>=ie.byteLength||!(xe=x(ie)))&&u(1,"no header found"),(ce=xe.match(ee))||u(3,"bad initial token"),pe.valid|=1,pe.programtype=ce[1],pe.string+=xe+`
`;xe=x(ie),xe!==!1;){if(pe.string+=xe+`
`,xe.charAt(0)==="#"){pe.comments+=xe+`
`;continue}if((ce=xe.match(re))&&(pe.gamma=parseFloat(ce[1])),(ce=xe.match(se))&&(pe.exposure=parseFloat(ce[1])),(ce=xe.match(ue))&&(pe.valid|=2,pe.format=ce[1]),(ce=xe.match(fe))&&(pe.valid|=4,pe.height=parseInt(ce[1],10),pe.width=parseInt(ce[2],10)),pe.valid&2&&pe.valid&4)break}return pe.valid&2||u(3,"missing format specifier"),pe.valid&4||u(3,"missing image size specifier"),pe},I=function(ie,ee,re){const se=ee;if(se<8||se>32767||ie[0]!==2||ie[1]!==2||ie[2]&128)return new Uint8Array(ie);se!==(ie[2]<<8|ie[3])&&u(3,"wrong scanline width");const ue=new Uint8Array(4*ee*re);ue.length||u(4,"unable to allocate buffer space");let fe=0,pe=0;const xe=4*se,ce=new Uint8Array(4),_e=new Uint8Array(xe);let ye=re;for(;ye>0&&pe<ie.byteLength;){pe+4>ie.byteLength&&u(1),ce[0]=ie[pe++],ce[1]=ie[pe++],ce[2]=ie[pe++],ce[3]=ie[pe++],(ce[0]!=2||ce[1]!=2||(ce[2]<<8|ce[3])!=se)&&u(3,"bad rgbe scanline format");let Oe=0,ge;for(;Oe<xe&&pe<ie.byteLength;){ge=ie[pe++];const ke=ge>128;if(ke&&(ge-=128),(ge===0||Oe+ge>xe)&&u(3,"bad scanline data"),ke){const je=ie[pe++];for(let Ie=0;Ie<ge;Ie++)_e[Oe++]=je}else _e.set(ie.subarray(pe,pe+ge),Oe),Oe+=ge,pe+=ge}const Ee=se;for(let ke=0;ke<Ee;ke++){let je=0;ue[fe]=_e[ke+je],je+=se,ue[fe+1]=_e[ke+je],je+=se,ue[fe+2]=_e[ke+je],je+=se,ue[fe+3]=_e[ke+je],fe+=4}ye--}return ue},F=function(ie,ee,re,se){const ue=ie[ee+3],fe=Math.pow(2,ue-128)/255;re[se+0]=ie[ee+0]*fe,re[se+1]=ie[ee+1]*fe,re[se+2]=ie[ee+2]*fe,re[se+3]=1},L=function(ie,ee,re,se){const ue=ie[ee+3],fe=Math.pow(2,ue-128)/255;re[se+0]=FI.toHalfFloat(Math.min(ie[ee+0]*fe,65504)),re[se+1]=FI.toHalfFloat(Math.min(ie[ee+1]*fe,65504)),re[se+2]=FI.toHalfFloat(Math.min(ie[ee+2]*fe,65504)),re[se+3]=FI.toHalfFloat(1)},U=new Uint8Array(e);U.pos=0;const P=C(U),H=P.width,N=P.height,z=I(U.subarray(U.pos),H,N);let W,j,J;switch(this.type){case ra:J=z.length/4;const ie=new Float32Array(J*4);for(let re=0;re<J;re++)F(z,re*4,ie,re*4);W=ie,j=ra;break;case Ol:J=z.length/4;const ee=new Uint16Array(J*4);for(let re=0;re<J;re++)L(z,re*4,ee,re*4);W=ee,j=Ol;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:H,height:N,data:W,header:P.string,gamma:P.gamma,exposure:P.exposure,type:j}}setDataType(e){return this.type=e,this}load(e,i,r,s){function l(u,A){switch(u.type){case ra:case Ol:u.colorSpace=Co,u.minFilter=Or,u.magFilter=Or,u.generateMipmaps=!1,u.flipY=!0;break}i&&i(u,A)}return super.load(e,l,r,s)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iMe={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},nMe={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class GJ extends Tf{constructor(e){super(),this.position.y=-3.5;const i=new Og;i.deleteAttribute("uv");const r=new Fw({metalness:0,side:mu}),s=new Fw({metalness:0}),l=e=="legacy"?iMe:nMe,u=new gS(16777215,l.topLight.intensity,28,2);u.position.set(...l.topLight.position),this.add(u);const A=new Dr(i,r);A.position.set(...l.room.position),A.scale.set(...l.room.scale),this.add(A);for(const g of l.boxes){const _=new Dr(i,s);_.position.set(...g.position),_.rotation.set(0,g.rotation,0),_.scale.set(...g.scale),this.add(_)}for(const g of l.lights){const _=new Dr(i,this.createAreaLightMaterial(g.intensity));_.position.set(...g.position),_.scale.set(...g.scale),this.add(_)}}createAreaLightMaterial(e){const i=new Pc;return i.color.setScalar(e),i}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rMe=.04,bE=20,sMe=/\.hdr(\.js)?$/;class VJ{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(e){return this._ldrLoader==null&&(this._ldrLoader=new gL),this._ldrLoader.setWithCredentials(e),this._ldrLoader}imageLoader(e){return this._imageLoader==null&&(this._imageLoader=new eMe(this.threeRenderer)),this._imageLoader.setWithCredentials(e),this._imageLoader}hdrLoader(e){return this._hdrLoader==null&&(this._hdrLoader=new tMe,this._hdrLoader.setDataType(Ol)),this._hdrLoader.setWithCredentials(e),this._hdrLoader}async getLottieLoader(e){if(this._lottieLoader==null){const{LottieLoader:i}=await import(this.lottieLoaderUrl);this._lottieLoader=new i}return this._lottieLoader.setWithCredentials(e),this._lottieLoader}async loadImage(e,i){const r=await new Promise((s,l)=>this.ldrLoader(i).load(e,s,()=>{},l));return r.name=e,r.flipY=!1,r}async loadLottie(e,i,r){const s=await this.getLottieLoader(r);s.setQuality(i);const l=await new Promise((u,A)=>s.load(e,u,()=>{},A));return l.name=e,l}async loadEquirect(e,i=!1,r=()=>{}){try{const s=sMe.test(e),l=s?this.hdrLoader(i):this.imageLoader(i),u=await new Promise((A,g)=>l.load(e,_=>{const{renderTarget:b}=_;if(b!=null){const{texture:x}=b;_.dispose(!1),A(x)}else A(_)},_=>{r(_.loaded/_.total*.9)},g));return r(1),u.name=e,u.mapping=Bw,s||(u.colorSpace=rr),u}finally{r&&r(1)}}async generateEnvironmentMapAndSkybox(e=null,i=null,r=()=>{},s=!1){const l=i!=="legacy";(i==="legacy"||i==="neutral")&&(i=null),i=qse(i);let u=Promise.resolve(null),A;e&&(u=this.loadEquirectFromUrl(e,s,r)),i?A=this.loadEquirectFromUrl(i,s,r):e?A=this.loadEquirectFromUrl(e,s,r):A=l?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[g,_]=await Promise.all([A,u]);if(g==null)throw new Error("Failed to load environment map.");return{environmentMap:g,skybox:_}}async loadEquirectFromUrl(e,i,r){if(!this.skyboxCache.has(e)){const s=this.loadEquirect(e,i,r);this.skyboxCache.set(e,s)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,i){await O2e();const r=this.threeRenderer,s=new Xk(256,{generateMipmaps:!1,type:Ol,format:lo,colorSpace:Co,depthBuffer:!0}),l=new tk(.1,100,s),u=l.renderTarget.texture;u.name=i;const A=r.outputColorSpace,g=r.toneMapping;return r.toneMapping=xf,r.outputColorSpace=Co,l.update(r,e),this.blurCubemap(s,rMe),r.toneMapping=g,r.outputColorSpace=A,u}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new GJ("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new GJ("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,i){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(bE);const s=new Og,l=new Dr(s,this.blurMaterial);this.blurScene=new Tf,this.blurScene.add(l)}const r=e.clone();this.halfblur(e,r,i,"latitudinal"),this.halfblur(r,e,i,"longitudinal")}halfblur(e,i,r,s){const u=e.width,A=isFinite(r)?Math.PI/(2*u):2*Math.PI/(2*bE-1),g=r/A,_=isFinite(r)?1+Math.floor(3*g):bE;_>bE&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${bE}`);const b=[];let x=0;for(let F=0;F<bE;++F){const L=F/g,U=Math.exp(-L*L/2);b.push(U),F==0?x+=U:F<_&&(x+=2*U)}for(let F=0;F<b.length;F++)b[F]=b[F]/x;const C=this.blurMaterial.uniforms;C.envMap.value=e.texture,C.samples.value=_,C.weights.value=b,C.latitudinal.value=s==="latitudinal",C.dTheta.value=A,new tk(.1,100,i).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const i=new Float32Array(e),r=new Fe(0,1,0);return new qh({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:r}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:Dg,depthTest:!1,depthWrite:!1,side:mu})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oMe=.2,y8=40,b8=60,aMe=5,wE=[1,.79,.62,.5,.4,.31,.25],lMe=3,qJ="high-performance",cMe=1.3;class Rg extends FA{static get singleton(){return this._singleton||(this._singleton=new Rg({powerPreference:(self.ModelViewerElement||{}).powerPreference||qJ,debug:TY()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const i of e)i.disconnectedCallback();this._singleton=new Rg({powerPreference:(self.ModelViewerElement||{}).powerPreference||qJ,debug:TY()});for(const i of e)i.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return wE[this.scaleStep]}set minScale(e){let i=1;for(;i<wE.length&&!(wE[i]<e);)++i;this.lastStep=i-1}constructor(e){super(),this.loader=new Pd(qTe),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=lMe,this.avgFrameDuration=(b8+y8)/2,this.onWebGLContextLost=i=>{this.dispatchEvent({type:"contextlost",sourceEvent:i})},this.onWebGLContextRestored=()=>{var i;(i=this.textureUtils)===null||i===void 0||i.dispose(),this.textureUtils=new VJ(this.threeRenderer);for(const r of this.scenes)r.element[lk]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new yL({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=aS}catch(i){console.warn(i)}this.arRenderer=new HTe(this),this.textureUtils=this.canRender?new VJ(this.threeRenderer):null,Pd.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}registerScene(e){this.scenes.add(e),e.forceRescale();const i=new ci;this.threeRenderer.getSize(i),e.canvas.width=i.x,e.canvas.height=i.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((r,s)=>this.render(r,s))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[RH]}countVisibleScenes(){const{canvas3D:e}=this;let i=0,r=null;for(const l of this.scenes){const{element:u}=l;u.modelIsVisible&&l.externalRenderer==null&&++i,e.parentElement===l.canvas.parentElement&&(r=l)}const s=i>1;if(r!=null){const l=s&&!this.multipleScenesVisible,u=!r.element.modelIsVisible;if(l||u){const{width:A,height:g}=this.sceneSize(r);this.copyPixels(r,A,g),e.parentElement.removeChild(e)}}this.multipleScenesVisible=s}updateRendererSize(){var e;const i=window.devicePixelRatio;if(i!==this.dpr)for(const l of this.scenes){const{element:u}=l;u[HE](u.getBoundingClientRect())}let r=0,s=0;for(const l of this.scenes)r=Math.max(r,l.width),s=Math.max(s,l.height);if(!(r===this.width&&s===this.height&&i===this.dpr)){this.width=r,this.height=s,this.dpr=i,r=Math.ceil(r*i),s=Math.ceil(s*i),this.canRender&&this.threeRenderer.setSize(r,s,!1);for(const l of this.scenes){const{canvas:u}=l;u.width=r,u.height=s,l.forceRescale(),(e=l.effectRenderer)===null||e===void 0||e.setSize(r,s)}}}updateRendererScale(e){const i=this.scaleStep;this.avgFrameDuration+=Vm(oMe*(e-this.avgFrameDuration),-5,aMe),this.avgFrameDuration>b8?++this.scaleStep:this.avgFrameDuration<y8&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),i!==this.scaleStep&&(this.avgFrameDuration=(b8+y8)/2)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else if(e.scaleStep!=0)e.scaleStep=0,this.rescaleCanvas(e);else return!1;return!0}rescaleCanvas(e){const i=wE[e.scaleStep],r=Math.ceil(this.width/i),s=Math.ceil(this.height/i),{style:l}=e.canvas;l.width=`${r}px`,l.height=`${s}px`,this.canvas3D.style.width=`${r}px`,this.canvas3D.style.height=`${s}px`;const u=this.dpr*i,A=i<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:u,minimumDpr:this.dpr*wE[this.lastStep],pixelWidth:Math.ceil(e.width*u),pixelHeight:Math.ceil(e.height*u),reason:A}}))}sceneSize(e){const{dpr:i}=this,r=wE[e.scaleStep],s=Math.min(Math.ceil(e.width*r*i),this.canvas3D.width),l=Math.min(Math.ceil(e.height*r*i),this.canvas3D.height);return{width:s,height:l}}copyPixels(e,i,r){const s=e.context;if(s==null){console.log("could not acquire 2d context");return}s.clearRect(0,0,i,r),s.drawImage(this.canvas3D,0,0,i,r,0,0,i,r),e.canvas.classList.add("show")}orderedScenes(){const e=[];for(const i of[!1,!0])for(const r of this.scenes)r.element.modelIsVisible===i&&e.push(r);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,i,r){const{element:s,exposure:l,toneMapping:u}=e;s[Km](i,r);const A=typeof l=="number"&&!Number.isNaN(l),g=s.environmentImage,_=s.skyboxImage,b=u===aS&&(g==="neutral"||g==="legacy"||!g&&!_);this.threeRenderer.toneMappingExposure=(A?l:1)*(b?cMe:1)}render(e,i){if(i!=null){this.arRenderer.onWebXRFrame(e,i);return}const r=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(r),this.renderedLastFrame=!1);const{canvas3D:s}=this;for(const l of this.orderedScenes()){const{element:u}=l;if(!u.loaded||!u.modelIsVisible&&l.renderCount>0||(this.preRender(l,e,r),!this.shouldRender(l)))continue;if(l.externalRenderer!=null){const _=l.getCamera();_.updateMatrix();const{matrix:b,projectionMatrix:x}=_,C=b.elements.slice(),I=l.getTarget();C[12]+=I.x,C[13]+=I.y,C[14]+=I.z,l.externalRenderer.render({viewMatrix:C,projectionMatrix:x.elements});continue}if(!u.modelIsVisible&&!this.multipleScenesVisible)for(const _ of this.scenes)_.element.modelIsVisible&&_.queueRender();const{width:A,height:g}=this.sceneSize(l);l.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-g,A,g),l.effectRenderer!=null?l.effectRenderer.render(r):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=l.toneMapping,this.threeRenderer.render(l,l.camera)),this.multipleScenesVisible||!l.element.modelIsVisible&&l.renderCount===0?this.copyPixels(l,A,g):s.parentElement!==l.canvas.parentElement&&(l.canvas.parentElement.appendChild(s),l.canvas.classList.remove("show")),l.hasRendered(),++l.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const i of this.scenes)e.push(i.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=Symbol("correlatedObjects"),Xs=Symbol("onUpdate");class aM{constructor(e,i){this[Xs]=e,this[Gr]=i}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $J=new Pc,uMe=new UA(2,2);let hMe=0;const Ld=Symbol("threeTexture"),WJ=Symbol("threeTextures");let dMe=class extends aM{get[Ld](){var e;return(e=this[Gr])===null||e===void 0?void 0:e.values().next().value}get[WJ](){return this[Gr]}constructor(e,i){super(e,new Set(i?[i]:[])),this[Ld].image.src||(this[Ld].image.src=i.name?i.name:"adhoc_image"+hMe++),this[Ld].image.name||(this[Ld].image.name=i&&i.image&&i.image.src?i.image.src.split("/").pop():"adhoc_image")}get name(){return this[Ld].image.name||""}get uri(){return this[Ld].image.src}get bufferView(){return this[Ld].image.bufferView}get element(){const e=this[Ld];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[Ld];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return this.uri!=null?"external":"embedded"}set name(e){for(const i of this[WJ])i.image.name=e}update(){const e=this[Ld];e&&e.isCanvasTexture&&!e.animation&&(this[Ld].needsUpdate=!0,this[Xs]())}async createThumbnail(e,i){const r=new Tf;$J.map=this[Ld];const s=new Dr(uMe,$J);r.add(s);const l=new DA(-1,1,1,-1,0,1),{threeRenderer:u}=Rg.singleton,A=new qd(e,i);u.setRenderTarget(A),u.render(r,l),u.setRenderTarget(null);const g=new Uint8Array(e*i*4);u.readRenderTargetPixels(A,0,0,e,i,g),Hy.width=e,Hy.height=i;const _=Hy.getContext("2d"),b=_.createImageData(e,i);return b.data.set(g),_.putImageData(b,0,0),new Promise(async(x,C)=>{Hy.toBlob(I=>{if(!I)return C("Failed to capture thumbnail.");x(URL.createObjectURL(I))},"image/png")})}};var fu;(function(a){a[a.Nearest=9728]="Nearest",a[a.Linear=9729]="Linear",a[a.NearestMipmapNearest=9984]="NearestMipmapNearest",a[a.LinearMipmapNearest=9985]="LinearMipmapNearest",a[a.NearestMipmapLinear=9986]="NearestMipmapLinear",a[a.LinearMipmapLinear=9987]="LinearMipmapLinear"})(fu||(fu={}));var Gy;(function(a){a[a.ClampToEdge=33071]="ClampToEdge",a[a.MirroredRepeat=33648]="MirroredRepeat",a[a.Repeat=10497]="Repeat"})(Gy||(Gy={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jJ=new Map([[Gy.Repeat,Vd],[Gy.ClampToEdge,$o],[Gy.MirroredRepeat,Vv]]),SH=new Map([[Vd,Gy.Repeat],[$o,Gy.ClampToEdge],[Vv,Gy.MirroredRepeat]]),AMe=new Map([[fu.Nearest,Da],[fu.Linear,Or],[fu.NearestMipmapNearest,zw],[fu.LinearMipmapNearest,Lv],[fu.NearestMipmapLinear,qm],[fu.LinearMipmapLinear,Ju]]),Moe=new Map([[Da,fu.Nearest],[Or,fu.Linear],[zw,fu.NearestMipmapNearest],[Lv,fu.LinearMipmapNearest],[qm,fu.NearestMipmapLinear],[Ju,fu.LinearMipmapLinear]]),pMe=new Map([[fu.Nearest,Da],[fu.Linear,Or]]),Roe=new Map([[Da,fu.Nearest],[Or,fu.Linear]]),fMe=a=>Moe.has(a),gMe=a=>Roe.has(a),mMe=a=>SH.has(a),_Me=(a,e)=>{switch(a){case"minFilter":return fMe(e);case"magFilter":return gMe(e);case"wrapS":case"wrapT":return mMe(e);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${a}" on Sampler`)}},vv=Symbol("threeTexture"),KJ=Symbol("threeTextures"),Sy=Symbol("setProperty");class vMe extends aM{get[vv](){var e;return(e=this[Gr])===null||e===void 0?void 0:e.values().next().value}get[KJ](){return this[Gr]}constructor(e,i){super(e,new Set(i?[i]:[]))}get name(){return this[vv].name||""}get minFilter(){return Moe.get(this[vv].minFilter)}get magFilter(){return Roe.get(this[vv].magFilter)}get wrapS(){return SH.get(this[vv].wrapS)}get wrapT(){return SH.get(this[vv].wrapT)}get rotation(){return this[vv].rotation}get scale(){return DH(this[vv].repeat)}get offset(){return DH(this[vv].offset)}setMinFilter(e){this[Sy]("minFilter",AMe.get(e))}setMagFilter(e){this[Sy]("magFilter",pMe.get(e))}setWrapS(e){this[Sy]("wrapS",jJ.get(e))}setWrapT(e){this[Sy]("wrapT",jJ.get(e))}setRotation(e){e==null&&(e=0),this[Sy]("rotation",e)}setScale(e){e==null&&(e={u:1,v:1}),this[Sy]("repeat",new ci(e.u,e.v))}setOffset(e){e==null&&(e={u:0,v:0}),this[Sy]("offset",new ci(e.u,e.v))}[Sy](e,i){if(_Me(e,i))for(const r of this[KJ])r[e]=i,r.needsUpdate=!0;this[Xs]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XJ=Symbol("image"),YJ=Symbol("sampler"),JJ=Symbol("threeTexture");class Doe extends aM{get[JJ](){var e;return(e=this[Gr])===null||e===void 0?void 0:e.values().next().value}constructor(e,i){super(e,new Set(i?[i]:[])),this[YJ]=new vMe(e,i),this[XJ]=new dMe(e,i)}get name(){return this[JJ].name||""}set name(e){for(const i of this[Gr])i.name=e}get sampler(){return this[YJ]}get source(){return this[XJ]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Foe,Uoe,koe;const Z1=Symbol("texture"),ew=Symbol("transform"),w8=Symbol("materials"),ZJ=Symbol("usage"),xE=Symbol("onUpdate"),QI=Symbol("activeVideo");var ir;(function(a){a[a.Base=0]="Base",a[a.MetallicRoughness=1]="MetallicRoughness",a[a.Normal=2]="Normal",a[a.Occlusion=3]="Occlusion",a[a.Emissive=4]="Emissive",a[a.Clearcoat=5]="Clearcoat",a[a.ClearcoatRoughness=6]="ClearcoatRoughness",a[a.ClearcoatNormal=7]="ClearcoatNormal",a[a.SheenColor=8]="SheenColor",a[a.SheenRoughness=9]="SheenRoughness",a[a.Transmission=10]="Transmission",a[a.Thickness=11]="Thickness",a[a.Specular=12]="Specular",a[a.SpecularColor=13]="SpecularColor",a[a.Iridescence=14]="Iridescence",a[a.IridescenceThickness=15]="IridescenceThickness",a[a.Anisotropy=16]="Anisotropy"})(ir||(ir={}));class jE{constructor(e,i,r,s){this[Foe]=null,this[Uoe]={rotation:0,scale:new ci(1,1),offset:new ci(0,0)},this[koe]=!1,r&&(this[ew].rotation=r.rotation,this[ew].scale.copy(r.repeat),this[ew].offset.copy(r.offset),this[Z1]=new Doe(e,r)),this[xE]=e,this[w8]=s,this[ZJ]=i}get texture(){return this[Z1]}setTexture(e){var i,r;const s=e!=null?e.source[Ld]:null,l=(i=this[Z1])===null||i===void 0?void 0:i.source[Ld];if(l!=null&&l.isVideoTexture?this[QI]=!1:!((r=this[Z1])===null||r===void 0)&&r.source.animation&&this[Z1].source.animation.removeEventListener("enterFrame",this[xE]),this[Z1]=e,s!=null&&s.isVideoTexture){const A=s.image;if(this[QI]=!0,A.requestVideoFrameCallback!=null){const g=()=>{this[QI]&&(this[xE](),A.requestVideoFrameCallback(g))};A.requestVideoFrameCallback(g)}else{const g=()=>{this[QI]&&(this[xE](),requestAnimationFrame(g))};requestAnimationFrame(g)}}else(e==null?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[xE]);let u=rr;if(this[w8])for(const A of this[w8]){switch(this[ZJ]){case ir.Base:A.map=s;break;case ir.MetallicRoughness:u=Co,A.metalnessMap=s,A.roughnessMap=s;break;case ir.Normal:u=Co,A.normalMap=s;break;case ir.Occlusion:u=Co,A.aoMap=s;break;case ir.Emissive:A.emissiveMap=s;break;case ir.Clearcoat:A.clearcoatMap=s;break;case ir.ClearcoatRoughness:A.clearcoatRoughnessMap=s;break;case ir.ClearcoatNormal:A.clearcoatNormalMap=s;break;case ir.SheenColor:A.sheenColorMap=s;break;case ir.SheenRoughness:A.sheenRoughnessMap=s;break;case ir.Transmission:A.transmissionMap=s;break;case ir.Thickness:A.thicknessMap=s;break;case ir.Specular:A.specularIntensityMap=s;break;case ir.SpecularColor:A.specularColorMap=s;break;case ir.Iridescence:A.iridescenceMap=s;break;case ir.IridescenceThickness:A.iridescenceThicknessMap=s;break;case ir.Anisotropy:A.anisotropyMap=s;break}A.needsUpdate=!0}s&&(s.colorSpace=u,s.rotation=this[ew].rotation,s.repeat=this[ew].scale,s.offset=this[ew].offset),this[xE]()}}Foe=Z1,Uoe=ew,koe=QI;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=Symbol("threeMaterial"),yF=Symbol("threeMaterials"),eZ=Symbol("baseColorTexture"),tZ=Symbol("metallicRoughnessTexture");class yMe extends aM{get[yF](){return this[Gr]}get[_I](){var e;return(e=this[Gr])===null||e===void 0?void 0:e.values().next().value}constructor(e,i){super(e,i);const{map:r,metalnessMap:s}=i.values().next().value;this[eZ]=new jE(e,ir.Base,r,i),this[tZ]=new jE(e,ir.MetallicRoughness,s,i)}get baseColorFactor(){const e=[0,0,0,this[_I].opacity];return this[_I].color.toArray(e),e}get metallicFactor(){return this[_I].metalness}get roughnessFactor(){return this[_I].roughness}get baseColorTexture(){return this[eZ]}get metallicRoughnessTexture(){return this[tZ]}setBaseColorFactor(e){const i=new Si;e instanceof Array?i.fromArray(e):i.set(e);for(const r of this[yF])r.color.set(i),e instanceof Array&&e.length>3?r.opacity=e[3]:(e=[0,0,0,r.opacity],i.toArray(e));this[Xs]()}setMetallicFactor(e){for(const i of this[yF])i.metalness=e;this[Xs]()}setRoughnessFactor(e){for(const i of this[yF])i.roughness=e;this[Xs]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iZ,nZ;const rZ=Symbol("pbrMetallicRoughness"),sZ=Symbol("normalTexture"),oZ=Symbol("occlusionTexture"),aZ=Symbol("emissiveTexture"),ea=Symbol("backingThreeMaterial"),lZ=Symbol("applyAlphaCutoff"),x8=Symbol("getAlphaMode"),CE=Symbol("lazyLoadGLTFInfo"),C8=Symbol("initialize"),BH=Symbol("getLoadedMaterial"),pn=Symbol("ensureMaterialIsLoaded"),cZ=Symbol("gltfIndex"),NI=Symbol("setActive"),sS=Symbol("variantIndices"),E8=Symbol("isActive"),uZ=Symbol("modelVariants"),S8=Symbol("name"),SA=Symbol("pbrTextures");class B8 extends aM{get[(iZ=sS,nZ=SA,ea)](){return this[Gr].values().next().value}constructor(e,i,r,s,l,u,A=void 0){super(e,l),this[iZ]=new Set,this[nZ]=new Map,this[cZ]=i,this[E8]=r,this[uZ]=s,this[S8]=u,A==null?this[C8]():this[CE]=A}[C8](){const e=this[Xs],i=this[Gr];this[rZ]=new yMe(e,i);const{normalMap:r,aoMap:s,emissiveMap:l}=i.values().next().value;this[sZ]=new jE(e,ir.Normal,r,i),this[oZ]=new jE(e,ir.Occlusion,s,i),this[aZ]=new jE(e,ir.Emissive,l,i);const u=A=>{this[SA].set(A,new jE(e,A,null,i))};u(ir.Clearcoat),u(ir.ClearcoatRoughness),u(ir.ClearcoatNormal),u(ir.SheenColor),u(ir.SheenRoughness),u(ir.Transmission),u(ir.Thickness),u(ir.Specular),u(ir.SpecularColor),u(ir.Iridescence),u(ir.IridescenceThickness),u(ir.Anisotropy)}async[BH](){if(this[CE]!=null){const e=await this[CE].doLazyLoad();return this[C8](),this[CE]=void 0,this.ensureLoaded=async()=>{},e}return null}colorFromRgb(e){const i=new Si;return e instanceof Array?i.fromArray(e):i.set(e),i}[pn](){if(this[CE]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[BH]()}get isLoaded(){return this[CE]==null}get isActive(){return this[E8]}[NI](e){this[E8]=e}get name(){return this[S8]||""}set name(e){if(this[S8]=e,this[Gr]!=null)for(const i of this[Gr])i.name=e}get pbrMetallicRoughness(){return this[pn](),this[rZ]}get normalTexture(){return this[pn](),this[sZ]}get occlusionTexture(){return this[pn](),this[oZ]}get emissiveTexture(){return this[pn](),this[aZ]}get emissiveFactor(){return this[pn](),this[ea].emissive.toArray()}get index(){return this[cZ]}hasVariant(e){const i=this[uZ].get(e);return i!=null&&this[sS].has(i.index)}setEmissiveFactor(e){this[pn]();const i=this.colorFromRgb(e);for(const r of this[Gr])r.emissive.set(i);this[Xs]()}[x8](){return this[ea].transparent?"BLEND":this[ea].alphaTest>0?"MASK":"OPAQUE"}[lZ](){this[pn]();for(const e of this[Gr])this[x8]()==="MASK"?e.alphaTest==null&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[pn]();for(const i of this[Gr])i.alphaTest=e,i.needsUpdate=!0;this[lZ](),this[Xs]()}getAlphaCutoff(){return this[pn](),this[ea].alphaTest}setDoubleSided(e){this[pn]();for(const i of this[Gr])i.side=e?Ll:If,i.needsUpdate=!0;this[Xs]()}getDoubleSided(){return this[pn](),this[ea].side==Ll}setAlphaMode(e){this[pn]();const i=(r,s)=>{r.transparent=s,r.depthWrite=!s};for(const r of this[Gr])i(r,e==="BLEND"),e==="MASK"?r.alphaTest=.5:r.alphaTest=void 0,r.needsUpdate=!0;this[Xs]()}getAlphaMode(){return this[pn](),this[x8]()}get emissiveStrength(){return this[pn](),this[ea].emissiveIntensity}setEmissiveStrength(e){this[pn]();for(const i of this[Gr])i.emissiveIntensity=e;this[Xs]()}get clearcoatFactor(){return this[pn](),this[ea].clearcoat}get clearcoatRoughnessFactor(){return this[pn](),this[ea].clearcoatRoughness}get clearcoatTexture(){return this[pn](),this[SA].get(ir.Clearcoat)}get clearcoatRoughnessTexture(){return this[pn](),this[SA].get(ir.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[pn](),this[SA].get(ir.ClearcoatNormal)}get clearcoatNormalScale(){return this[pn](),this[ea].clearcoatNormalScale.x}setClearcoatFactor(e){this[pn]();for(const i of this[Gr])i.clearcoat=e;this[Xs]()}setClearcoatRoughnessFactor(e){this[pn]();for(const i of this[Gr])i.clearcoatRoughness=e;this[Xs]()}setClearcoatNormalScale(e){this[pn]();for(const i of this[Gr])i.clearcoatNormalScale=new ci(e,e);this[Xs]()}get ior(){return this[pn](),this[ea].ior}setIor(e){this[pn]();for(const i of this[Gr])i.ior=e;this[Xs]()}get sheenColorFactor(){return this[pn](),this[ea].sheenColor.toArray()}get sheenColorTexture(){return this[pn](),this[SA].get(ir.SheenColor)}get sheenRoughnessFactor(){return this[pn](),this[ea].sheenRoughness}get sheenRoughnessTexture(){return this[pn](),this[SA].get(ir.SheenRoughness)}setSheenColorFactor(e){this[pn]();const i=this.colorFromRgb(e);for(const r of this[Gr])r.sheenColor.set(i),r.sheen=1;this[Xs]()}setSheenRoughnessFactor(e){this[pn]();for(const i of this[Gr])i.sheenRoughness=e,i.sheen=1;this[Xs]()}get transmissionFactor(){return this[pn](),this[ea].transmission}get transmissionTexture(){return this[pn](),this[SA].get(ir.Transmission)}setTransmissionFactor(e){this[pn]();for(const i of this[Gr])i.transmission=e;this[Xs]()}get thicknessFactor(){return this[pn](),this[ea].thickness}get thicknessTexture(){return this[pn](),this[SA].get(ir.Thickness)}get attenuationDistance(){return this[pn](),this[ea].attenuationDistance}get attenuationColor(){return this[pn](),this[ea].attenuationColor.toArray()}setThicknessFactor(e){this[pn]();for(const i of this[Gr])i.thickness=e;this[Xs]()}setAttenuationDistance(e){this[pn]();for(const i of this[Gr])i.attenuationDistance=e;this[Xs]()}setAttenuationColor(e){this[pn]();const i=this.colorFromRgb(e);for(const r of this[Gr])r.attenuationColor.set(i);this[Xs]()}get specularFactor(){return this[pn](),this[ea].specularIntensity}get specularTexture(){return this[pn](),this[SA].get(ir.Specular)}get specularColorFactor(){return this[pn](),this[ea].specularColor.toArray()}get specularColorTexture(){return this[pn](),this[SA].get(ir.SheenColor)}setSpecularFactor(e){this[pn]();for(const i of this[Gr])i.specularIntensity=e;this[Xs]()}setSpecularColorFactor(e){this[pn]();const i=this.colorFromRgb(e);for(const r of this[Gr])r.specularColor.set(i);this[Xs]()}get iridescenceFactor(){return this[pn](),this[ea].iridescence}get iridescenceTexture(){return this[pn](),this[SA].get(ir.Iridescence)}get iridescenceIor(){return this[pn](),this[ea].iridescenceIOR}get iridescenceThicknessMinimum(){return this[pn](),this[ea].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[pn](),this[ea].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[pn](),this[SA].get(ir.IridescenceThickness)}setIridescenceFactor(e){this[pn]();for(const i of this[Gr])i.iridescence=e;this[Xs]()}setIridescenceIor(e){this[pn]();for(const i of this[Gr])i.iridescenceIOR=e;this[Xs]()}setIridescenceThicknessMinimum(e){this[pn]();for(const i of this[Gr])i.iridescenceThicknessRange[0]=e;this[Xs]()}setIridescenceThicknessMaximum(e){this[pn]();for(const i of this[Gr])i.iridescenceThicknessRange[1]=e;this[Xs]()}get anisotropyStrength(){return this[pn](),this[ea].anisotropy}get anisotropyRotation(){return this[pn](),this[ea].anisotropyRotation}get anisotropyTexture(){return this[pn](),this[SA].get(ir.Anisotropy)}setAnisotropyStrength(e){this[pn]();for(const i of this[Gr])i.anisotropy=e;this[Xs]()}setAnisotropyRotation(e){this[pn]();for(const i of this[Gr])i.anisotropyRotation=e;this[Xs]()}}let Loe=class{constructor(e){this.name="",this.children=new Array,this.name=e}};class I8 extends Loe{constructor(e,i,r,s){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:l,threeGLTF:u,threeObjectMap:A}=s;this.parser=u.parser,this.modelVariants=r,this.mesh.userData.variantData=r;const g=A.get(e.material);g.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=g.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const _=e.userData.associations||{};if(_.meshes==null){console.error("Mesh is missing primitive index association");return}const C=((l.meshes||[])[_.meshes].primitives||[])[_.primitives];if(C==null){console.error("Mesh primitive definition is missing.");return}if(C.material!=null)this.materials.set(C.material,i[C.material]);else{const I=i.findIndex(F=>F.name==="Default");I>=0?this.materials.set(I,i[I]):console.warn("gltfPrimitive has no material!")}if(C.extensions&&C.extensions.KHR_materials_variants){const I=C.extensions.KHR_materials_variants,L=u.parser.json.extensions.KHR_materials_variants.variants;for(const U of I.mappings){const P=i[U.material];this.materials.set(U.material,P);for(const H of U.variants){const{name:N}=L[H];this.variantToMaterialMap.set(H,P),P[sS].add(H),r.has(N)||r.set(N,{name:N,index:H})}}}}async setActiveMaterial(e){const i=this.materials.get(e);if(e!==this.activeMaterialIdx){const r=i[Gr],s=await i[BH]();s!=null?this.mesh.material=s:this.mesh.material=r.values().next().value,this.parser.assignFinalMaterial(this.mesh),r.add(this.mesh.material),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(e==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(e)){const i=this.modelVariants.get(e);return this.enableVariantHelper(i.index)}return null}async enableVariantHelper(e){if(this.variantToMaterialMap!=null&&e!=null){const i=this.variantToMaterialMap.get(e);if(i!=null)return this.setActiveMaterial(i.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const e of this.variantToMaterialMap.keys()){const i=this.mesh.userData.variantMaterials.get(e);if(i.material!=null)continue;const r=await this.enableVariantHelper(e);r!=null&&(i.material=r)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,i){if(!this.ensureVariantIsUnused(i))return!1;this.modelVariants.has(i)||this.modelVariants.set(i,{name:i,index:this.modelVariants.size});const s=this.modelVariants.get(i).index;return e[sS].add(s),this.variantToMaterialMap.set(s,e),this.materials.set(e.index,e),this.updateVariantUserData(s,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const i=this.mesh.userData.variantMaterials;i!=null&&i.delete(e)}}updateVariantUserData(e,i){i[sS].add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:i[Gr].values().next().value,gltfMaterialIndex:i.index})}ensureVariantIsUnused(e){const i=this.modelVariants.get(e);return i!=null&&this.variantInfo.has(i.index)?(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hZ,dZ,AZ,pZ,fZ,gZ;const V1=Symbol("materials"),bF=Symbol("hierarchy"),mZ=Symbol("roots"),yv=Symbol("primitives"),Poe=Symbol("prepareVariantsForExport"),Ooe=Symbol("switchVariant"),Qoe=Symbol("materialFromPoint"),IH=Symbol("nodeFromPoint"),Noe=Symbol("nodeFromIndex"),Nh=Symbol("variantData"),TH=Symbol("availableVariants"),T8=Symbol("modelOnUpdate"),_Z=Symbol("cloneMaterial");class bMe{constructor(e,i,r,s){this.gltf=e,this.gltfElementMap=i,this.mapKey=r,this.doLazyLoad=s}}class wMe{constructor(e,i=()=>{}){this[hZ]=new Array,this[dZ]=new Array,this[AZ]=new Array,this[pZ]=new Array,this[fZ]=()=>{},this[gZ]=new Map,this[T8]=i;const{gltf:r,threeGLTF:s,gltfElementMap:l}=e;for(const[g,_]of r.materials.entries()){const b=l.get(_);if(b!=null)this[V1].push(new B8(i,g,!0,this[Nh],b,_.name));else{const C=(r.materials||[])[g],I=new Set;l.set(C,I);const F=async()=>{const L=await s.parser.getDependency("material",g);return I.add(L),L};this[V1].push(new B8(i,g,!1,this[Nh],I,_.name,new bMe(r,l,C,F)))}}const u=new Map,A=new Array;for(const g of s.scene.children)A.push(g);for(;A.length>0;){const g=A.pop();let _=null;g instanceof Dr?(_=new I8(g,this.materials,this[Nh],e),this[yv].push(_)):_=new Loe(g.name);const b=u.get(g);b!=null?b.children.push(_):this[mZ].push(_),this[bF].push(_);for(const x of g.children)A.push(x),u.set(g,_)}}get materials(){return this[V1]}[(hZ=V1,dZ=bF,AZ=mZ,pZ=yv,fZ=T8,gZ=Nh,TH)](){const e=Array.from(this[Nh].values());return e.sort((i,r)=>i.index-r.index),e.map(i=>i.name)}getMaterialByName(e){const i=this[V1].filter(r=>r.name===e);return i.length>0?i[0]:null}[Noe](e,i){const r=this[bF].find(s=>{if(s instanceof I8){const{meshes:l,primitives:u}=s.mesh.userData.associations;if(l==e&&u==i)return!0}return!1});return r??null}[IH](e){return this[bF].find(i=>i instanceof I8&&i.mesh===e.object)}[Qoe](e){return this[IH](e).getActiveMaterial()}async[Ooe](e){for(const i of this[yv])await i.enableVariant(e);for(const i of this.materials)i[NI](!1);for(const i of this[yv])this.materials[i.getActiveMaterial().index][NI](!0)}async[Poe](){const e=new Array;for(const i of this[yv])e.push(i.instantiateVariants());await Promise.all(e)}[_Z](e,i){const r=this.materials[e];r.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const s=r[Gr],l=new Set;for(const[A,g]of s.entries()){const _=g.clone();_.name=i+(s.size>1?"_inst"+A:""),l.add(_)}const u=new B8(this[T8],this[V1].length,!1,this[Nh],l,i);return this[V1].push(u),u}createMaterialInstanceForVariant(e,i,r,s=!0){let l=null;for(const u of this[yv]){const A=this[Nh].get(r);A!=null&&u.variantInfo.has(A.index)||u.getMaterial(e)!=null&&(this.hasVariant(r)||this.createVariant(r),l==null&&(l=this[_Z](e,i)),u.addVariant(l,r))}if(s&&l!=null){l[NI](!0),this.materials[e][NI](!1);for(const u of this[yv])u.enableVariant(r)}return l}createVariant(e){this[Nh].has(e)?console.warn(`Variant '${e}'' already exists`):this[Nh].set(e,{name:e,index:this[Nh].size})}hasVariant(e){return this[Nh].has(e)}setMaterialToVariant(e,i){if(this[TH]().find(r=>r===i)==null){console.warn(`Can't add material to '${i}', the variant does not exist.'`);return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const r of this[yv]){const s=r.getMaterial(e);s!=null&&r.addVariant(s,i)}}updateVariantName(e,i){const r=this[Nh].get(e);r!=null&&(r.name=i,this[Nh].set(i,r),this[Nh].delete(e))}deleteVariant(e){const i=this[Nh].get(e);if(i!=null){for(const r of this.materials)r.hasVariant(e)&&r[sS].delete(i.index);for(const r of this[yv])r.deleteVariant(i.index);this[Nh].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M8=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l};const cU=Symbol("currentGLTF"),uU=Symbol("originalGltfJson"),tw=Symbol("model"),R8=Symbol("getOnUpdateMethod"),vI=Symbol("buildTexture"),xMe=a=>{var e,i,r;class s extends a{constructor(){super(...arguments),this[e]=void 0,this[i]=null,this[r]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[tw]}get availableVariants(){return this.model?this.model[TH]():[]}get originalGltfJson(){return this[uU]}[(e=tw,i=cU,r=uU,R8)](){return()=>{this[gu]()}}[vI](u){return u.colorSpace=rr,u.wrapS=Vd,u.wrapT=Vd,new Doe(this[R8](),u)}async createTexture(u,A="image/png"){const{textureUtils:g}=this[ao],_=await g.loadImage(u,this.withCredentials);return _.userData.mimeType=A,this[vI](_)}async createLottieTexture(u,A=1){const{textureUtils:g}=this[ao],_=await g.loadLottie(u,A,this.withCredentials);return this[vI](_)}createVideoTexture(u){const A=document.createElement("video");A.crossOrigin=this.withCredentials?"use-credentials":"anonymous",A.src=u,A.muted=!0,A.playsInline=!0,A.loop=!0,A.play();const g=new Rre(A);return this[vI](g)}createCanvasTexture(){const u=document.createElement("canvas"),A=new Ure(u);return this[vI](A)}async updated(u){if(super.updated(u),u.has("variantName")){const A=this[Lw].beginActivity("variant-update");A(.1);const g=this[tw],{variantName:_}=this;g!=null&&(await g[Ooe](_),this[gu](),this.dispatchEvent(new CustomEvent("variant-applied"))),A(1)}if(u.has("orientation")||u.has("scale")){if(!this.loaded)return;const A=this[Ri];A.applyTransform(),A.updateBoundingBox(),A.updateShadow(),this[ao].arRenderer.onUpdateScene(),this[gu]()}}[Xm](){super[Xm]();const{currentGLTF:u}=this[Ri];if(u!=null){const{correlatedSceneGraph:A}=u;A!=null&&u!==this[cU]&&(this[tw]=new wMe(A,this[R8]()),this[uU]=JSON.parse(JSON.stringify(A.gltf))),"variants"in u.userData&&this.requestUpdate("variantName")}this[cU]=u}async exportScene(u){const A=this[Ri];return new Promise(async(g,_)=>{const b={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(b,u),b.animations=A.animations,b.truncateDrawRange=!0;const x=A.shadow;let C=!1;x!=null&&(C=x.visible,x.visible=!1),await this[tw][Poe](),new ck().register(F=>new GIe(F)).parse(A.model,F=>g(new Blob([b.binary?F:JSON.stringify(F)],{type:b.binary?"application/octet-stream":"application/json"})),()=>_("glTF export failed"),b),x!=null&&(x.visible=C)})}materialFromPoint(u,A){const g=this[tw];if(g==null)return null;const _=this[Ri],b=_.getNDC(u,A),x=_.hitFromPoint(b);return x==null||x.face==null?null:g[Qoe](x)}}return M8([Kn({type:String,attribute:"variant-name"})],s.prototype,"variantName",void 0),M8([Kn({type:String,attribute:"orientation"})],s.prototype,"orientation",void 0),M8([Kn({type:String,attribute:"scale"})],s.prototype,"scale",void 0),s};/* @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CMe extends Dr{constructor(){super(void 0,new Pc({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(e=this.height,i=this.radius,r=128){(e!=this.height||i!=this.radius||r!=this.resolution)&&(this.height=e,this.radius=i,this.resolution=r,e>0&&i>0&&(this.geometry.dispose(),this.geometry=EMe(e,i,r)))}}function EMe(a,e,i){const r=new DS(e,2*i,i);r.scale(1,1,-1);const s=r.getAttribute("position"),l=new Fe;for(let u=0;u<s.count;++u)if(l.fromBufferAttribute(s,u),l.y<0){const A=-a*3/2,g=l.y<A?-a/l.y:1-l.y*l.y/(3*A*A);l.multiplyScalar(g),l.toArray(s.array,3*u)}return s.needsUpdate=!0,r}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=new Fe,D8=new Fe,F8=new Fe,xF=new nr,vZ=new zh,yZ=new Ys;class Hoe extends _Ie{constructor(e){super(document.createElement("div")),this.normal=new Fe(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(e){if(e==null)return;const i=kv(e)[0].terms;for(let r=0;r<3;++r)this.position.setComponent(r,$m(i[r]).number);this.updateMatrixWorld()}updateNormal(e){if(e==null)return;const i=kv(e)[0].terms;for(let r=0;r<3;++r)this.normal.setComponent(r,i[r].number)}updateSurface(){const{mesh:e,tri:i,bary:r}=this;if(e==null||i==null||r==null)return;e.getVertexPosition(i.x,wF),e.getVertexPosition(i.y,D8),e.getVertexPosition(i.z,F8),wF.toArray(xF.elements,0),D8.toArray(xF.elements,3),F8.toArray(xF.elements,6),this.position.copy(r).applyMatrix3(xF);const s=this.parent;s.worldToLocal(e.localToWorld(this.position)),vZ.set(wF,D8,F8),vZ.getNormal(this.normal).transformDirection(e.matrixWorld);const l=s.parent;yZ.setFromAxisAngle(wF.set(0,1,0),-l.rotation.y),this.normal.applyQuaternion(yZ)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach(i=>{if(i.nodeType!==Node.ELEMENT_NODE)return;const r=i,s=r.dataset.visibilityAttribute;if(s!=null){const l=`data-${s}`;r.toggleAttribute(l,e)}r.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}const SMe={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},BMe={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function bZ(a,e,i){return(1-i)*a+i*e}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wZ=9,IMe=6,U8=2,TMe=.3;class MMe extends xr{constructor(e,i,r){super(),this.camera=new DA,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new sM,this.horizontalBlurMaterial=new qh(SMe),this.verticalBlurMaterial=new qh(BMe),this.intensity=0,this.softness=1,this.boundingBox=new ia,this.size=new Fe,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:s}=this;s.rotation.x=Math.PI/2,s.left=-.5,s.right=.5,s.bottom=-.5,s.top=.5,this.add(s);const l=new UA,u=new Pc({opacity:1,transparent:!0,side:mu});this.floor=new Dr(l,u),this.floor.userData.noHit=!0,s.add(this.floor),this.blurPlane=new Dr(l),this.blurPlane.visible=!1,s.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(A){A.fragmentShader=A.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.depthMaterial.side=Ll,this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,i,r)}setScene(e,i,r){const{boundingBox:s,size:l,rotation:u,position:A}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(l.x,l.y,l.z)*(this.isAnimated?U8:1),this.boundingBox.getCenter(A),r==="back"){const{min:g,max:_}=s;[g.y,g.z]=[g.z,g.y],[_.y,_.z]=[_.z,_.y],[l.y,l.z]=[l.z,l.y],u.x=Math.PI/2,u.y=Math.PI}else u.x=0,u.y=0;if(this.isAnimated){const g=s.min.y,_=s.max.y;l.y=this.maxDimension,s.expandByVector(l.subScalar(this.maxDimension).multiplyScalar(-.5)),s.min.y=g,s.max.y=_,l.set(this.maxDimension,_-g,this.maxDimension)}r==="bottom"?A.y=s.min.y:A.z=s.min.y,this.setSoftness(i)}setSoftness(e){this.softness=e;const{size:i,camera:r}=this,s=this.isAnimated?U8:1,l=s*Math.pow(2,wZ-e*(wZ-IMe));this.setMapSize(l);const u=i.y/2,A=i.y*s;r.near=0,r.far=bZ(A,u,e),this.depthMaterial.opacity=1/e,r.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:i}=this;this.isAnimated&&(e*=U8);const r=Math.floor(i.x>i.z?e:e*i.x/i.z),s=Math.floor(i.x>i.z?e*i.z/i.x:e),l=10,u=l+r,A=l+s;if(this.renderTarget!=null&&(this.renderTarget.width!==u||this.renderTarget.height!==A)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const g={format:lo};this.renderTarget=new qd(u,A,g),this.renderTargetBlur=new qd(u,A,g),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(i.x*(1+l/r),i.z*(1+l/s),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*bZ(TMe,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return .001*this.maxDimension}render(e,i){i.overrideMaterial=this.depthMaterial;const r=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const s=e.xr.enabled;e.xr.enabled=!1;const l=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(i,this.camera),i.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=s,e.setRenderTarget(l),e.setClearAlpha(r)}blurShadow(e){const{camera:i,horizontalBlurMaterial:r,verticalBlurMaterial:s,renderTarget:l,renderTargetBlur:u,blurPlane:A}=this;A.visible=!0,A.material=r,r.uniforms.h.value=1/this.renderTarget.width,r.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(u),e.render(A,i),A.material=s,s.uniforms.v.value=1/this.renderTarget.height,s.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(l),e.render(A,i),A.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xZ=10,k8=100,L8=new Fe,CZ=new Fe,EZ=new Fe,CF=new m7,RMe=new Fe,yI=new ci;class DMe extends Tf{constructor({canvas:e,element:i,width:r,height:s}){super(),this.annotationRenderer=new vIe,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.appendedAnimations=[],this.markedAnimations=[],this.camera=new xo(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new xr,this.target=new xr,this.animationNames=[],this.boundingBox=new ia,this.boundingSphere=new dc,this.size=new Fe,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=aS,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Fe,this.targetDamperX=new Nd,this.targetDamperY=new Nd,this.targetDamperZ=new Nd,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new CMe,this.name="ModelScene",this.element=i,this.canvas=e,this.camera=new xo(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(r,s),this.target.name="Target",this.mixer=new dse(this.target);const{domElement:l}=this.annotationRenderer,{style:u}=l;u.display="none",u.pointerEvents="none",u.position="absolute",u.top="0",this.element.shadowRoot.querySelector(".default").appendChild(l),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,i=()=>{}){if(!e||e===this.url){i(1);return}if(this.reset(),this.url=e,this.externalRenderer!=null){const A=await this.externalRenderer.load(i);this.boundingSphere.radius=A.framedRadius,this.idealAspect=A.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let r;try{r=await new Promise(async(A,g)=>{this.cancelPendingSourceChange=()=>g();try{const _=await this.element[ao].loader.load(e,this.element,i);A(_)}catch(_){g(_)}})}catch(A){if(A==null)return;throw A}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=r,r!=null&&(this._model=r.scene,this.target.add(r.scene));const{animations:s}=r,l=new Map,u=[];for(const A of s)l.set(A.name,A),u.push(A.name);this.animations=s,this.animationsByName=l,this.animationNames=u,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;e!=null&&(e.removeFromParent(),this._model=null);const i=this._currentGLTF;i!=null&&(i.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[cU]=null,this.element[uU]=null,this.element[tw]=null}get currentGLTF(){return this._currentGLTF}setSize(e,i){if(!(this.width===e&&this.height===i)){if(this.width=Math.max(e,1),this.height=Math.max(i,1),this.annotationRenderer.setSize(e,i),this.aspect=this.width/this.height,this.externalRenderer!=null){const r=window.devicePixelRatio;this.externalRenderer.resize(e*r,i*r)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const i=new ia;e.traverse(r=>{const s=r;if(!s.material||!s.material.transparent)return;i.setFromObject(s);const u=i.getSize(RMe),A=Math.min(u.x,u.y,u.z);Math.max(u.x,u.y,u.z)<k8*A||this.markBakedShadow(s)})}checkBakedShadows(){const{min:e,max:i}=this.boundingBox,r=new ia;this.boundingBox.getSize(this.size);for(const s of this.bakedShadows)r.setFromObject(s),!(r.min.y<e.y+this.size.y/k8&&r.min.x<=e.x&&r.max.x>=i.x&&r.min.z<=e.z&&r.max.z>=i.z)&&(r.min.z<e.z+this.size.z/k8&&r.min.x<=e.x&&r.max.x>=i.x&&r.min.y<=e.y&&r.max.y>=i.y||this.unmarkBakedShadow(s))}applyTransform(){const{model:e}=this;if(e==null)return;const i=kv(this.element.orientation)[0].terms,r=$m(i[0]).number,s=$m(i[1]).number,l=$m(i[2]).number;e.quaternion.setFromEuler(new hl(s,l,r,"YXZ"));const u=kv(this.element.scale)[0].terms;e.scale.set(u[0].number,u[1].number,u[2].number)}updateBoundingBox(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.findBakedShadows(e);const i=(r,s)=>r.expandByPoint(s);this.setBakedShadowVisibility(!1),this.boundingBox=lF(e,i,new ia),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(r=>this.unmarkBakedShadow(r)),this.boundingBox=lF(e,i,new ia)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:i}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,i.copy(this.getTarget());const r=(l,u)=>Math.max(l,i.distanceToSquared(u));this.boundingSphere.radius=Math.sqrt(lF(e,r,0));const s=(l,u)=>{u.sub(i);const A=Math.sqrt(u.x*u.x+u.z*u.z);return Math.max(l,A/(this.idealCameraDistance()-Math.abs(u.y)))};this.idealAspect=lF(e,s,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(const i of this.bakedShadows)i.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const i=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(i)*180/Math.PI}getNDC(e,i){if(this.xrCamera!=null)yI.set(e/window.screen.width,i/window.screen.height);else{const r=this.element.getBoundingClientRect();yI.set((e-r.x)/this.width,(i-r.y)/this.height)}return yI.multiplyScalar(2).subScalar(1),yI.y*=-1,yI}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,i){this.element[ao].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(i),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?xZ:1)}setGroundedSkybox(){const e=kv(this.element.skyboxHeight)[0].terms[0],i=$m(e).number,r=xZ*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(i,r),this.groundedSkybox.position.y=i-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,i,r){this.goalTarget.set(-e,-i,-r)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(coe)}updateTarget(e){const i=this.goalTarget,r=this.target.position;if(i.equals(r))return!1;{const s=this.boundingSphere.radius/10;let{x:l,y:u,z:A}=r;return l=this.targetDamperX.update(l,i.x,e,s),u=this.targetDamperY.update(u,i.y,e,s),A=this.targetDamperZ.update(A,i.z,e,s),this.groundedSkybox.position.x=-l,this.groundedSkybox.position.z=-A,this.target.position.set(l,u,A),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,i){const{x:r,z:s}=this.position;this.yaw=Math.atan2(e-r,i-s)}get model(){return this._model}set yaw(e){this.pivot.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===bT&&(e&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,i=0,r=gw,s=1/0){if(this._currentGLTF==null)return;const{animations:l}=this;if(l==null||l.length===0)return;let u=null;if(e!=null&&(u=this.animationsByName.get(e),u==null)){const A=parseInt(e);!isNaN(A)&&A>=0&&A<l.length&&(u=l[A])}u==null&&(u=l[0]);try{const{currentAnimationAction:A}=this,g=this.mixer.clipAction(u,this);g.timeScale!=this.element.timeScale&&(g.timeScale=this.element.timeScale),this.currentAnimationAction=g,this.element.paused?this.mixer.stopAllAction():(g.paused=!1,A!=null&&g!==A?g.crossFadeFrom(A,i,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),g.setLoop(r,s),g.enabled=!0,g.clampWhenFinished=!0,g.play()}catch(A){console.error(A)}}appendAnimation(e="",i=gw,r=1/0,s=1,l=1,u=!1,A=!1,g=!0,_=null,b=!1){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:x}=this;if(x==null||x.length===0)return;let C=null;const I=1.25;if(e&&(C=this.animationsByName.get(e)),C!=null){typeof r=="string"?isNaN(r)?(r=1/0,console.warn("Invalid repetitionCount value, repetitionCount is set to Infinity")):r=Math.max(parseInt(r),1):typeof r=="number"&&r<1&&(r=1),r===1&&i!==hS&&(i=hS),typeof s=="string"&&(isNaN(s)?(s=1,console.warn("Invalid weight value, weight is set to 1")):s=parseFloat(s)),typeof l=="string"&&(isNaN(l)?(l=1,console.warn("Invalid timeScale value, timeScale is set to 1")):l=parseFloat(l)),typeof u=="string"&&(u.toLowerCase().trim()==="true"?u=!0:u.toLowerCase().trim()==="false"?u=!1:isNaN(u)?(u=!1,console.warn("Invalid fade value, fade is set to false")):u=parseFloat(u)),typeof A=="string"&&(A.toLowerCase().trim()==="true"?A=!0:A.toLowerCase().trim()==="false"?A=!1:isNaN(A)?(A=!1,console.warn("Invalid warp value, warp is set to false")):A=parseFloat(A)),typeof _=="string"&&(isNaN(_)||(_=parseFloat(_)));try{const F=this.mixer.existingAction(C)||this.mixer.clipAction(C,this),L=F.timeScale;b&&this.appendedAnimations.includes(e)&&(this.markedAnimations.map(U=>U.name).includes(e)||this.markedAnimations.push({name:e,loopMode:i,repetitionCount:r})),typeof _=="number"&&(F.time=Math.min(Math.max(_,0),C.duration)),typeof u=="boolean"&&u?F.fadeIn(I):typeof u=="number"?F.fadeIn(Math.max(u,0)):s>=0&&(F.weight=Math.min(Math.max(s,0),1)),typeof A=="boolean"&&A?F.warp(g?L:0,l,I):typeof A=="number"?F.warp(g?L:0,l,Math.max(A,0)):F.timeScale=l,F.isRunning()||(F.time==C.duration&&F.stop(),F.setLoop(i,r),F.paused=!1,F.enabled=!0,F.clampWhenFinished=!0,F.play()),this.appendedAnimations.includes(e)||this.element[Ri].appendedAnimations.push(e)}catch(F){console.error(F)}}}detachAnimation(e="",i=!0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:r}=this;if(r==null||r.length===0)return;let s=null;const l=1.5;if(e&&(s=this.animationsByName.get(e)),s!=null){typeof i=="string"&&(i.toLowerCase().trim()==="true"?i=!0:i.toLowerCase().trim()==="false"?i=!1:isNaN(i)?(i=!0,console.warn("Invalid fade value, fade is set to true")):i=parseFloat(i));try{const u=this.mixer.existingAction(s)||this.mixer.clipAction(s,this);typeof i=="boolean"&&i?u.fadeOut(l):typeof i=="number"?u.fadeOut(Math.max(i,0)):u.stop();const A=this.element[Ri].appendedAnimations.filter(g=>g!==e);this.element[Ri].appendedAnimations=A}catch(u){console.error(u)}}}updateAnimationLoop(e="",i=gw,r=1/0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:s}=this;if(s==null||s.length===0)return;let l=null;if(e&&(l=this.animationsByName.get(e)),l!=null)try{const u=this.mixer.existingAction(l)||this.mixer.clipAction(l,this);u.stop(),u.setLoop(i,r),u.play()}catch(u){console.error(u)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,i){this.mixer.addEventListener(e,i)}updateShadow(){const e=this.shadow;if(e!=null){const i=this.element.arPlacement==="wall"?"back":"bottom";e.setScene(this,this.shadowSoftness,i),e.needsUpdate=!0}}renderShadow(e){const i=this.shadow;i!=null&&i.needsUpdate==!0&&(i.render(e,this),i.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(e<=0&&this.shadow==null))){if(this.shadow==null){const i=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new MMe(this,this.shadowSoftness,i)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const i=this.shadow;i!=null&&i.setSoftness(e)}setShadowOffset(e){const i=this.shadow;i!=null&&i.setOffset(e)}getHit(e=this){return CF.intersectObject(e,!0).find(r=>r.object.visible&&!r.object.userData.noHit)}hitFromController(e,i=this){return CF.setFromXRController(e),this.getHit(i)}hitFromPoint(e,i=this){return CF.setFromCamera(e,this.getCamera()),this.getHit(i)}positionAndNormalFromPoint(e,i=this){var r;const s=this.hitFromPoint(e,i);if(s==null)return null;const l=s.point,u=s.face!=null?s.face.normal.clone().applyNormalMatrix(new nr().getNormalMatrix(s.object.matrixWorld)):CF.ray.direction.clone().multiplyScalar(-1),A=(r=s.uv)!==null&&r!==void 0?r:null;return{position:l,normal:u,uv:A}}surfaceFromPoint(e,i=this){const r=this.element.model;if(r==null)return null;const s=this.hitFromPoint(e,i);if(s==null||s.face==null)return null;const l=r[IH](s),{meshes:u,primitives:A}=l.mesh.userData.associations,g=new Fe,_=new Fe,b=new Fe,{a:x,b:C,c:I}=s.face,F=s.object;F.getVertexPosition(x,g),F.getVertexPosition(C,_),F.getVertexPosition(I,b);const L=new zh(g,_,b),U=new Fe;return L.getBarycoord(F.worldToLocal(s.point),U),`${u} ${A} ${x} ${C} ${I} ${U.x.toFixed(3)} ${U.y.toFixed(3)} ${U.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element),this.updateSurfaceHotspot(e)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:i}=this.target;for(let r=0,s=i.length;r<s;r++){const l=i[r];l instanceof Hoe&&e(l)}}updateSurfaceHotspot(e){if(e.surface==null||this.element.model==null)return;const i=kv(e.surface)[0].terms;if(i.length!=8){console.warn(e.surface+" does not have exactly 8 numbers.");return}const r=this.element.model[Noe](i[0].number,i[1].number);if(r==null){console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const s=r.mesh.geometry.attributes.position.count,l=new Fe(i[2].number,i[3].number,i[4].number);if(l.x>=s||l.y>=s||l.z>=s){console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const u=new Fe(i[5].number,i[6].number,i[7].number);e.mesh=r.mesh,e.tri=l,e.bary=u,e.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots(e=>{e.updateSurface()})}updateHotspotsVisibility(e){this.forHotspots(i=>{L8.copy(e),CZ.setFromMatrixPosition(i.matrixWorld),L8.sub(CZ),EZ.copy(i.normal).transformDirection(this.target.matrixWorld),L8.dot(EZ)<0?i.hide():i.show()})}orientHotspots(e){this.forHotspots(i=>{i.orient(e)})}setHotspotsVisibility(e){this.forHotspots(i=>{i.visible=e})}updateSchema(e){var i;const{schemaElement:r,element:s}=this,{alt:l,poster:u,iosSrc:A}=s;if(e!=null){const g=[{"@type":"MediaObject",contentUrl:e,encodingFormat:((i=e.split(".").pop())===null||i===void 0?void 0:i.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];A&&g.push({"@type":"MediaObject",contentUrl:A,encodingFormat:"model/vnd.usdz+zip"});const _={"@context":"http://schema.org/","@type":"3DModel",image:u??void 0,name:l??void 0,encoding:g};r.textContent=JSON.stringify(_),document.head.appendChild(r)}else r.parentElement!=null&&r.parentElement.removeChild(r)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FMe extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const i={progress:0,completed:!1};return this.ongoingActivities.add(i),this.ongoingActivityCount===1&&this.announceTotalProgress(i,0,e),r=>{let s;return s=Math.max(Vm(r,0,1),i.progress),s!==i.progress&&this.announceTotalProgress(i,s,e),i.progress}}announceTotalProgress(e,i,r){let s=0,l=0;i==1&&(e.completed=!0);for(const g of this.ongoingActivities){const{progress:_}=g;s+=1-_,g.completed&&l++}const u=e.progress;e.progress=i,this.totalProgress+=(i-u)*(1-this.totalProgress)/s;const A=l===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:A,reason:r}})),l===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SL=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l},SZ,BZ,IZ,TZ,MZ,RZ,DZ,FZ,UZ,kZ,LZ,PZ,OZ;const UMe=10,kMe=50,LMe=0,PMe=300,OMe=150,Hy=document.createElement("canvas"),P8=Symbol("fallbackResizeHandler"),QZ=Symbol("defaultAriaLabel"),EF=Symbol("resizeObserver"),EE=Symbol("clearModelTimeout"),O8=Symbol("onContextLost"),SE=Symbol("loaded"),Q8=Symbol("status"),N8=Symbol("onFocus"),H8=Symbol("onBlur"),HE=Symbol("updateSize"),SF=Symbol("intersectionObserver"),iw=Symbol("isElementInViewport"),dk=Symbol("announceModelVisibility"),KE=Symbol("ariaLabel"),MH=Symbol("altDefaulted"),bI=Symbol("statusElement"),Ak=Symbol("updateStatus"),HI=Symbol("loadedTime"),oS=Symbol("updateSource"),NZ=Symbol("markLoaded"),hU=Symbol("container"),Tg=Symbol("input"),RH=Symbol("canvas"),Ri=Symbol("scene"),gu=Symbol("needsRender"),Km=Symbol("tick"),Xm=Symbol("onModelLoad"),pk=Symbol("onResize"),ao=Symbol("renderer"),Lw=Symbol("progressTracker"),HZ=Symbol("getLoaded"),Pw=Symbol("getModelIsVisible"),vS=Symbol("shouldAttemptPreload"),Ly=a=>({x:a.x,y:a.y,z:a.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),DH=a=>({u:a.x,v:a.y,toString(){return`${this.u} ${this.v}`}});class lM extends sw{static get is(){return"model-viewer"}static set modelCacheSize(e){Pd[Dy].evictionThreshold=e}static get modelCacheSize(){return Pd[Dy].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),Rg.singleton.minScale=e}static get minimumRenderScale(){return Rg.singleton.minScale}get loaded(){return this[HZ]()}get[(SZ=iw,BZ=SE,IZ=HI,TZ=Q8,MZ=EE,RZ=P8,DZ=dk,FZ=EF,UZ=SF,kZ=Lw,ao)](){return Rg.singleton}get modelIsVisible(){return this[Pw]()}constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[SZ]=!1,this[BZ]=!1,this[IZ]=0,this[TZ]="",this[MZ]=null,this[RZ]=IY(()=>{const s=this.getBoundingClientRect();this[HE](s)},kMe),this[DZ]=IY(s=>{const l=this.modelIsVisible;l!==s&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:l}}))},LMe),this[FZ]=null,this[UZ]=null,this[kZ]=new FMe,this[LZ]=()=>{this[bI].textContent=this[Q8]},this[PZ]=()=>{this[bI].textContent=""},this[OZ]=s=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:s.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;K2e(e),this[hU]=e.querySelector(".container"),this[Tg]=e.querySelector(".userInput"),this[RH]=e.querySelector("canvas"),this[bI]=e.querySelector("#status"),this[QZ]=this[Tg].getAttribute("aria-label");let i,r;if(this.isConnected){const s=this.getBoundingClientRect();i=s.width,r=s.height}else i=PMe,r=OMe;this[Ri]=new DMe({canvas:this[RH],element:this,width:i,height:r}),Promise.resolve().then(()=>{this[HE](this.getBoundingClientRect())}),$6&&(this[EF]=new ResizeObserver(s=>{if(!this[ao].isPresenting)for(let l of s)l.target===this&&this[HE](l.contentRect)})),W6?this[SF]=new IntersectionObserver(s=>{for(let l of s)if(l.target===this){const u=this.modelIsVisible;this[iw]=l.isIntersecting,this[dk](u),this[iw]&&!this.loaded&&this[oS]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[iw]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),$6?this[EF].observe(this):self.addEventListener("resize",this[P8]),W6&&this[SF].observe(this),this.addEventListener("focus",this[N8]),this.addEventListener("blur",this[H8]);const e=this[ao];e.addEventListener("contextlost",this[O8]),e.registerScene(this[Ri]),this[EE]!=null&&(self.clearTimeout(this[EE]),this[EE]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),$6?this[EF].unobserve(this):self.removeEventListener("resize",this[P8]),W6&&this[SF].unobserve(this),this.removeEventListener("focus",this[N8]),this.removeEventListener("blur",this[H8]);const e=this[ao];e.removeEventListener("contextlost",this[O8]),e.unregisterScene(this[Ri]),this[EE]=self.setTimeout(()=>{this[Ri].dispose(),this[EE]=null},UMe)}updated(e){super.updated(e),e.has("src")&&(this.src==null?(this[SE]=!1,this[HI]=0,this[Ri].reset()):this.src!==this[Ri].url&&(this[SE]=!1,this[HI]=0,this[oS]())),e.has("alt")&&this[Tg].setAttribute("aria-label",this[KE]),e.has("generateSchema")&&(this.generateSchema?this[Ri].updateSchema(this.src):this[Ri].updateSchema(null))}toDataURL(e,i){return this[ao].displayCanvas(this[Ri]).toDataURL(e,i)}async toBlob(e){const i=e?e.mimeType:void 0,r=e?e.qualityArgument:void 0,s=e?e.idealAspect:void 0,{width:l,height:u,idealAspect:A,aspect:g}=this[Ri],{dpr:_,scaleFactor:b}=this[ao];let x=l*b*_,C=u*b*_,I=0,F=0;if(s===!0)if(A>g){const L=C;C=Math.round(x/A),F=(L-C)/2}else{const L=x;x=Math.round(C*A),I=(L-x)/2}Hy.width=x,Hy.height=C;try{return new Promise(async(L,U)=>{Hy.getContext("2d").drawImage(this[ao].displayCanvas(this[Ri]),I,F,x,C,0,0,x,C),Hy.toBlob(P=>{if(!P)return U(new Error("Unable to retrieve canvas blob"));L(P)},i,r)})}finally{this[HE]({width:l,height:u})}}registerEffectComposer(e){e.setRenderer(this[ao].threeRenderer),e.setMainCamera(this[Ri].getCamera()),e.setMainScene(this[Ri]),this[Ri].effectRenderer=e}unregisterEffectComposer(){this[Ri].effectRenderer=null}registerRenderer(e){this[Ri].externalRenderer=e}unregisterRenderer(){this[Ri].externalRenderer=null}get[KE](){return this[MH]}get[MH](){return this.alt==null||this.alt==="null"?this[QZ]:this.alt}[HZ](){return this[SE]}[Pw](){return this.loaded&&this[iw]}[vS](){return!!this.src&&this[iw]}[HE]({width:e,height:i}){e===0||i===0||(this[hU].style.width=`${e}px`,this[hU].style.height=`${i}px`,this[pk]({width:e,height:i}))}[Km](e,i){var r;(r=this[Ri].effectRenderer)===null||r===void 0||r.beforeRender(e,i)}[NZ](){this[SE]||(this[SE]=!0,this[HI]=performance.now())}[gu](){this[Ri].queueRender()}[Xm](){}[Ak](e){this[Q8]=e;const i=this.getRootNode();i!=null&&i.activeElement===this&&this[bI].textContent!=e&&(this[bI].textContent=e)}[(LZ=N8,PZ=H8,pk)](e){this[Ri].setSize(e.width,e.height)}async[(OZ=O8,oS)](){const e=this[Ri];if(this.loaded||!this[vS]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[Ak]("Loading"),e.stopAnimation();const i=this[Lw].beginActivity("model-load"),r=this.src;try{const s=e.setSource(r,u=>i(Vm(u,0,1)*.95)),l=this[lk]();await Promise.all([s,l]),this[NZ](),this[Xm](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(u=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:r}})),u()})})})}catch(s){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:s}}))}finally{i(1)}}}SL([Kn({type:String})],lM.prototype,"alt",void 0);SL([Kn({type:String})],lM.prototype,"src",void 0);SL([Kn({type:Boolean,attribute:"with-credentials"})],lM.prototype,"withCredentials",void 0);SL([Kn({type:Boolean,attribute:"generate-schema"})],lM.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z8=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l};const zZ=1e3,BF=Symbol("changeAnimation"),GZ=Symbol("appendAnimation"),VZ=Symbol("detachAnimation"),up=Symbol("paused"),QMe={repetitions:1/0,pingpong:!1},NMe={pingpong:!1,repetitions:null,weight:1,timeScale:1,fade:!1,warp:!1,relativeWarp:!0,time:null},HMe={fade:!0},zMe=a=>{var e;class i extends a{constructor(...s){super(s),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[Ri].subscribeMixerEvent("loop",l=>{const u=l.action._loopCount,A=l.action._clip.name,g=l.action._clip.uuid,_=this[Ri].markedAnimations.find(b=>b.name===A);if(_){this[Ri].updateAnimationLoop(_.name,_.loopMode,_.repetitionCount);const b=this[Ri].markedAnimations.filter(x=>x.name!==A);this[Ri].markedAnimations=b}this.dispatchEvent(new CustomEvent("loop",{detail:{count:u,name:A,uuid:g}}))}),this[Ri].subscribeMixerEvent("finished",l=>{if(!this[Ri].appendedAnimations.includes(l.action._clip.name))this[up]=!0;else{const u=this[Ri].appendedAnimations.filter(A=>A!==l.action._clip.name);this[Ri].appendedAnimations=u}this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[Ri].animationNames:[]}get duration(){return this[Ri].duration}get paused(){return this[up]}get currentTime(){return this[Ri].animationTime}get appendedAnimations(){return this[Ri].appendedAnimations}set currentTime(s){this[Ri].animationTime=s,this[gu]()}get timeScale(){return this[Ri].animationTimeScale}set timeScale(s){this[Ri].animationTimeScale=s}pause(){this[up]||(this[up]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(s){this.availableAnimations.length>0&&(this[up]=!1,this[BF](s),this.dispatchEvent(new CustomEvent("play")))}appendAnimation(s,l){this.availableAnimations.length>0&&(this[up]=!1,this[GZ](s,l),this.dispatchEvent(new CustomEvent("append-animation")))}detachAnimation(s,l){this.availableAnimations.length>0&&(this[up]=!1,this[VZ](s,l),this.dispatchEvent(new CustomEvent("detach-animation")))}[(e=up,Xm)](){super[Xm](),this[up]=!0,this.animationName!=null&&this[BF](),this.autoplay&&this.play()}[Km](s,l){super[Km](s,l),!(this[up]||!this[Pw]()&&!this[ao].isPresenting)&&(this[Ri].updateAnimation(l/zZ),this[gu]())}updated(s){super.updated(s),s.has("autoplay")&&this.autoplay&&this.play(),s.has("animationName")&&this[BF]()}[BF](s=QMe){var l;const u=(l=s.repetitions)!==null&&l!==void 0?l:1/0,A=s.pingpong?bT:u===1?hS:gw;this[Ri].playAnimation(this.animationName,this.animationCrossfadeDuration/zZ,A,u),this[up]&&(this[Ri].updateAnimation(0),this[gu]())}[GZ](s="",l=NMe){var u;const A=(u=l.repetitions)!==null&&u!==void 0?u:1/0,g=l.pingpong?bT:A===1?hS:gw,_=!!l.repetitions||"pingpong"in l;this[Ri].appendAnimation(s||this.animationName,g,A,l.weight,l.timeScale,l.fade,l.warp,l.relativeWarp,l.time,_),this[up]&&(this[Ri].updateAnimation(0),this[gu]())}[VZ](s="",l=HMe){this[Ri].detachAnimation(s||this.animationName,l.fade),this[up]&&(this[Ri].updateAnimation(0),this[gu]())}}return z8([Kn({type:Boolean})],i.prototype,"autoplay",void 0),z8([Kn({type:String,attribute:"animation-name"})],i.prototype,"animationName",void 0),z8([Kn({type:Number,attribute:"animation-crossfade-duration"})],i.prototype,"animationCrossfadeDuration",void 0),i};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=Symbol("hotspotMap"),G8=Symbol("mutationCallback"),wI=Symbol("observer"),V8=Symbol("addHotspot"),qZ=Symbol("removeHotspot"),q8=new Ki,GMe=a=>{var e,i,r;class s extends a{constructor(){super(...arguments),this[e]=new Map,this[i]=u=>{u.forEach(A=>{(!(A instanceof MutationRecord)||A.type==="childList")&&(A.addedNodes.forEach(g=>{this[V8](g)}),A.removedNodes.forEach(g=>{this[qZ](g)}),this[gu]())})},this[r]=new MutationObserver(this[G8])}connectedCallback(){super.connectedCallback();for(let A=0;A<this.children.length;++A)this[V8](this.children[A]);const{ShadyDOM:u}=self;u==null?this[wI].observe(this,{childList:!0}):this[wI]=u.observeChildren(this,this[G8])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:u}=self;u==null?this[wI].disconnect():u.unobserveChildren(this[wI])}[(e=q1,i=G8,r=wI,Xm)](){super[Xm]();const u=this[Ri];u.forHotspots(A=>{u.updateSurfaceHotspot(A)})}[Km](u,A){super[Km](u,A);const g=this[Ri],{annotationRenderer:_}=g,b=g.getCamera();g.shouldRender()&&(g.animateSurfaceHotspots(),g.updateHotspotsVisibility(b.position),_.domElement.style.display="",_.render(g,b))}updateHotspot(u){const A=this[q1].get(u.name);A!=null&&(A.updatePosition(u.position),A.updateNormal(u.normal),A.surface=u.surface,this[Ri].updateSurfaceHotspot(A),this[gu]())}queryHotspot(u){const A=this[q1].get(u);if(A==null)return null;const g=Ly(A.position),_=Ly(A.normal),b=A.facingCamera,x=this[Ri],C=x.getCamera(),I=new Fe;I.setFromMatrixPosition(A.matrixWorld),I.project(C);const F=x.width/2,L=x.height/2;I.x=I.x*F+F,I.y=-(I.y*L)+L;const U=Ly(new Fe(I.x,I.y,I.z));return!Number.isFinite(U.x)||!Number.isFinite(U.y)?null:{position:g,normal:_,canvasPosition:U,facingCamera:b}}positionAndNormalFromPoint(u,A){const g=this[Ri],_=g.getNDC(u,A),b=g.positionAndNormalFromPoint(_);if(b==null)return null;q8.copy(g.target.matrixWorld).invert();const x=Ly(b.position.applyMatrix4(q8)),C=Ly(b.normal.transformDirection(q8));let I=null;return b.uv!=null&&(I=DH(b.uv)),{position:x,normal:C,uv:I}}surfaceFromPoint(u,A){const g=this[Ri],_=g.getNDC(u,A);return g.surfaceFromPoint(_)}[V8](u){if(!(u instanceof HTMLElement&&u.slot.indexOf("hotspot")===0))return;let A=this[q1].get(u.slot);A!=null?A.increment():(A=new Hoe({name:u.slot,position:u.dataset.position,normal:u.dataset.normal,surface:u.dataset.surface}),this[q1].set(u.slot,A),this[Ri].addHotspot(A)),this[Ri].queueRender()}[qZ](u){if(!(u instanceof HTMLElement))return;const A=this[q1].get(u.slot);A&&(A.decrement()&&(this[Ri].removeHotspot(A),this[q1].delete(u.slot)),this[Ri].queueRender())}}return s};class VMe{constructor(){this.textureUtils=null}setTextureUtils(e){this.textureUtils=e}parse(e,i,r,s){this.parseAsync(e,s).then(i).catch(r)}async parseAsync(e,i={}){i=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,quickLookCompatible:!1,maxTextureSize:1024},i);const r={},s="model.usda";r[s]=null;let l=zoe();l+=$Me(i);const u={},A={};e.traverseVisible(_=>{if(_.isMesh){const b=_.geometry,x=_.material;if(x.isMeshStandardMaterial){const C="geometries/Geometry_"+b.id+".usda";if(!(C in r)){const I=XMe(b);r[C]=jMe(I)}x.uuid in u||(u[x.uuid]=x),l+=KMe(_,b,x)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",_)}else _.isCamera&&(l+=s5e(_))}),l+=WMe(),l+=i5e(u,A,i.quickLookCompatible),r[s]=sk(l),l=null;for(const _ in A){let b=A[_];if(b.isCompressedTexture===!0){if(this.textureUtils===null)throw new Error("THREE.USDZExporter: setTextureUtils() must be called to process compressed textures.");b=await this.textureUtils.decompress(b)}const x=qMe(b.image,b.flipY,i.maxTextureSize),C=await new Promise(I=>x.toBlob(I,"image/png",1));r[`textures/Texture_${_}.png`]=new Uint8Array(await C.arrayBuffer())}let g=0;for(const _ in r){const b=r[_],x=34+_.length;g+=x;const C=g&63;if(C!==4){const I=64-C,F=new Uint8Array(I);r[_]=[b,{extra:{12345:F}}]}g=b.length}return JSe(r,{level:0})}}function qMe(a,e,i){if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&a instanceof ImageBitmap){const r=i/Math.max(a.width,a.height),s=document.createElement("canvas");s.width=a.width*Math.min(1,r),s.height=a.height*Math.min(1,r);const l=s.getContext("2d");return e===!0&&(l.translate(0,s.height),l.scale(1,-1)),l.drawImage(a,0,0,s.width,s.height),s}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const Hh=7;function zoe(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`}function $Me(a){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{${a.includeAnchoringProperties===!0?`
		token preliminary:anchoring:type = "${a.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${a.ar.planeAnchoring.alignment}"
	`:""}
`}function WMe(){return`
		}
	}
}

`}function jMe(a){let e=zoe();return e+=a,sk(e)}function KMe(a,e,i){const r="Object_"+a.id,s=Goe(a.matrixWorld);return a.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",a),`def Xform "${r}" (
	prepend references = @./geometries/Geometry_${e.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${s}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${i.id}>
}

`}function Goe(a){const e=a.elements;return`( ${IF(e,0)}, ${IF(e,4)}, ${IF(e,8)}, ${IF(e,12)} )`}function IF(a,e){return`(${a[e+0]}, ${a[e+1]}, ${a[e+2]}, ${a[e+3]})`}function XMe(a){return`
def "Geometry"
{
${YMe(a)}
}
`}function YMe(a){const e="Geometry",i=a.attributes,r=i.position.count;return`
	def Mesh "${e}"
	{
		int[] faceVertexCounts = [${JMe(a)}]
		int[] faceVertexIndices = [${ZMe(a)}]
		normal3f[] normals = [${FH(i.normal,r)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${FH(i.position,r)}]
${t5e(i)}
		uniform token subdivisionScheme = "none"
	}
`}function JMe(a){const e=a.index!==null?a.index.count:a.attributes.position.count;return Array(e/3).fill(3).join(", ")}function ZMe(a){const e=a.index,i=[];if(e!==null)for(let r=0;r<e.count;r++)i.push(e.getX(r));else{const r=a.attributes.position.count;for(let s=0;s<r;s++)i.push(s)}return i.join(", ")}function FH(a,e){if(a===void 0)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const i=[];for(let r=0;r<a.count;r++){const s=a.getX(r),l=a.getY(r),u=a.getZ(r);i.push(`(${s.toPrecision(Hh)}, ${l.toPrecision(Hh)}, ${u.toPrecision(Hh)})`)}return i.join(", ")}function e5e(a){const e=[];for(let i=0;i<a.count;i++){const r=a.getX(i),s=a.getY(i);e.push(`(${r.toPrecision(Hh)}, ${1-s.toPrecision(Hh)})`)}return e.join(", ")}function t5e(a){let e="";for(let r=0;r<4;r++){const s=r>0?r:"",l=a["uv"+s];l!==void 0&&(e+=`
		texCoord2f[] primvars:st${s} = [${e5e(l)}] (
			interpolation = "vertex"
		)`)}const i=a.color;if(i!==void 0){const r=i.count;e+=`
	color3f[] primvars:displayColor = [${FH(i,r)}] (
		interpolation = "vertex"
		)`}return e}function i5e(a,e,i=!1){const r=[];for(const s in a){const l=a[s];r.push(n5e(l,e,i))}return`def "Materials"
{
${r.join("")}
}

`}function n5e(a,e,i=!1){const r="			",s=[],l=[];function u(A,g,_){const b=A.source.id+"_"+A.flipY;e[b]=A;const x=A.channel>0?"st"+A.channel:"st",C={1e3:"repeat",1001:"clamp",1002:"mirror"},I=A.repeat.clone(),F=A.offset.clone(),L=A.rotation,U=Math.sin(L),P=Math.cos(L);return F.y=1-F.y-I.y,i?(F.x=F.x/I.x,F.y=F.y/I.y,F.x+=U/I.x,F.y+=P-1):(F.x+=U*I.x,F.y+=(1-P)*I.y),`
		def Shader "PrimvarReader_${g}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${x}"
			float2 outputs:result
		}

		def Shader "Transform2d_${g}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${a.id}/PrimvarReader_${g}.outputs:result>
			float inputs:rotation = ${(L*(180/Math.PI)).toFixed(Hh)}
			float2 inputs:scale = ${WZ(I)}
			float2 inputs:translation = ${WZ(F)}
			float2 outputs:result
		}

		def Shader "Texture_${A.id}_${g}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${b}.png@
			float2 inputs:st.connect = </Materials/Material_${a.id}/Transform2d_${g}.outputs:result>
			${_!==void 0?"float4 inputs:scale = "+r5e(_):""}
			token inputs:sourceColorSpace = "${A.colorSpace===dp?"raw":"sRGB"}"
			token inputs:wrapS = "${C[A.wrapS]}"
			token inputs:wrapT = "${C[A.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${a.transparent||a.alphaTest>0?"float outputs:a":""}
		}`}return a.side===Ll&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",a),a.map!==null?(s.push(`${r}color3f inputs:diffuseColor.connect = </Materials/Material_${a.id}/Texture_${a.map.id}_diffuse.outputs:rgb>`),a.transparent?s.push(`${r}float inputs:opacity.connect = </Materials/Material_${a.id}/Texture_${a.map.id}_diffuse.outputs:a>`):a.alphaTest>0&&(s.push(`${r}float inputs:opacity.connect = </Materials/Material_${a.id}/Texture_${a.map.id}_diffuse.outputs:a>`),s.push(`${r}float inputs:opacityThreshold = ${a.alphaTest}`)),l.push(u(a.map,"diffuse",a.color))):s.push(`${r}color3f inputs:diffuseColor = ${$Z(a.color)}`),a.emissiveMap!==null?(s.push(`${r}color3f inputs:emissiveColor.connect = </Materials/Material_${a.id}/Texture_${a.emissiveMap.id}_emissive.outputs:rgb>`),l.push(u(a.emissiveMap,"emissive",new Si(a.emissive.r*a.emissiveIntensity,a.emissive.g*a.emissiveIntensity,a.emissive.b*a.emissiveIntensity)))):a.emissive.getHex()>0&&s.push(`${r}color3f inputs:emissiveColor = ${$Z(a.emissive)}`),a.normalMap!==null&&(s.push(`${r}normal3f inputs:normal.connect = </Materials/Material_${a.id}/Texture_${a.normalMap.id}_normal.outputs:rgb>`),l.push(u(a.normalMap,"normal"))),a.aoMap!==null&&(s.push(`${r}float inputs:occlusion.connect = </Materials/Material_${a.id}/Texture_${a.aoMap.id}_occlusion.outputs:r>`),l.push(u(a.aoMap,"occlusion",new Si(a.aoMapIntensity,a.aoMapIntensity,a.aoMapIntensity)))),a.roughnessMap!==null?(s.push(`${r}float inputs:roughness.connect = </Materials/Material_${a.id}/Texture_${a.roughnessMap.id}_roughness.outputs:g>`),l.push(u(a.roughnessMap,"roughness",new Si(a.roughness,a.roughness,a.roughness)))):s.push(`${r}float inputs:roughness = ${a.roughness}`),a.metalnessMap!==null?(s.push(`${r}float inputs:metallic.connect = </Materials/Material_${a.id}/Texture_${a.metalnessMap.id}_metallic.outputs:b>`),l.push(u(a.metalnessMap,"metallic",new Si(a.metalness,a.metalness,a.metalness)))):s.push(`${r}float inputs:metallic = ${a.metalness}`),a.alphaMap!==null?(s.push(`${r}float inputs:opacity.connect = </Materials/Material_${a.id}/Texture_${a.alphaMap.id}_opacity.outputs:r>`),s.push(`${r}float inputs:opacityThreshold = 0.0001`),l.push(u(a.alphaMap,"opacity"))):s.push(`${r}float inputs:opacity = ${a.opacity}`),a.isMeshPhysicalMaterial&&(a.clearcoatMap!==null?(s.push(`${r}float inputs:clearcoat.connect = </Materials/Material_${a.id}/Texture_${a.clearcoatMap.id}_clearcoat.outputs:r>`),l.push(u(a.clearcoatMap,"clearcoat",new Si(a.clearcoat,a.clearcoat,a.clearcoat)))):s.push(`${r}float inputs:clearcoat = ${a.clearcoat}`),a.clearcoatRoughnessMap!==null?(s.push(`${r}float inputs:clearcoatRoughness.connect = </Materials/Material_${a.id}/Texture_${a.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`),l.push(u(a.clearcoatRoughnessMap,"clearcoatRoughness",new Si(a.clearcoatRoughness,a.clearcoatRoughness,a.clearcoatRoughness)))):s.push(`${r}float inputs:clearcoatRoughness = ${a.clearcoatRoughness}`),s.push(`${r}float inputs:ior = ${a.ior}`)),`
	def Material "Material_${a.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${s.join(`
`)}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${a.id}/PreviewSurface.outputs:surface>

${l.join(`
`)}

	}
`}function $Z(a){return`(${a.r}, ${a.g}, ${a.b})`}function r5e(a){return`(${a.r}, ${a.g}, ${a.b}, 1.0)`}function WZ(a){return`(${a.x}, ${a.y})`}function s5e(a){const e=a.name?a.name:"Camera_"+a.id,i=Goe(a.matrixWorld);return a.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",a),a.isOrthographicCamera?`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${i}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${a.near.toPrecision(Hh)}, ${a.far.toPrecision(Hh)})
			float horizontalAperture = ${((Math.abs(a.left)+Math.abs(a.right))*10).toPrecision(Hh)}
			float verticalAperture = ${((Math.abs(a.top)+Math.abs(a.bottom))*10).toPrecision(Hh)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${i}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${a.near.toPrecision(Hh)}, ${a.far.toPrecision(Hh)})
			float focalLength = ${a.getFocalLength().toPrecision(Hh)}
			float focusDistance = ${a.focus.toPrecision(Hh)}
			float horizontalAperture = ${a.getFilmWidth().toPrecision(Hh)}
			token projection = "perspective"
			float verticalAperture = ${a.getFilmHeight().toPrecision(Hh)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5e=a=>e=>{try{const i=kv(e),r=(i.length?i[0].terms:[]).filter(s=>s&&s.type==="ident").map(s=>s.value).filter(s=>a.indexOf(s)>-1);return new Set(r)}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $1=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l};let jZ=!1,KZ=!1;const XZ="#model-viewer-no-ar-fallback",a5e=o5e(["quick-look","scene-viewer","webxr","none"]),l5e="webxr scene-viewer quick-look",gf={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},bv=Symbol("arButtonContainer"),YZ=Symbol("enterARWithWebXR"),JZ=Symbol("openSceneViewer"),ZZ=Symbol("openIOSARQuickLook"),c5e=Symbol("canActivateAR"),TF=Symbol("arMode"),$8=Symbol("arModes"),BE=Symbol("arAnchor"),MF=Symbol("preload"),RF=Symbol("onARButtonContainerClick"),W8=Symbol("onARStatus"),j8=Symbol("onARTracking"),K8=Symbol("onARTap"),xI=Symbol("selectARMode"),X8=Symbol("triggerLoad"),u5e=a=>{var e,i,r,s,l,u,A,g,_,b;class x extends a{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arUsdzMaxTextureSize="auto",this.arPlacement="floor",this.arModes=l5e,this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[i]=this.shadowRoot.querySelector(".ar-button"),this[r]=document.createElement("a"),this[s]=new Set,this[l]=gf.NONE,this[u]=!1,this[A]=I=>{I.preventDefault(),this.activateAR()},this[g]=({status:I})=>{(I===ky.NOT_PRESENTING||this[ao].arRenderer.presentedScene===this[Ri])&&(this.setAttribute("ar-status",I),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:I}})),I===ky.NOT_PRESENTING?this.removeAttribute("ar-tracking"):I===ky.SESSION_STARTED&&this.setAttribute("ar-tracking",EH.TRACKING))},this[_]=({status:I})=>{this.setAttribute("ar-tracking",I),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:I}}))},this[b]=I=>{I.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[TF]!==gf.NONE}connectedCallback(){super.connectedCallback(),this[ao].arRenderer.addEventListener("status",this[W8]),this.setAttribute("ar-status",ky.NOT_PRESENTING),this[ao].arRenderer.addEventListener("tracking",this[j8]),this[BE].addEventListener("message",this[K8])}disconnectedCallback(){super.disconnectedCallback(),this[ao].arRenderer.removeEventListener("status",this[W8]),this[ao].arRenderer.removeEventListener("tracking",this[j8]),this[BE].removeEventListener("message",this[K8])}update(I){super.update(I),I.has("arScale")&&(this[Ri].canScale=this.arScale!=="fixed"),I.has("arPlacement")&&(this[Ri].updateShadow(),this[gu]()),I.has("arModes")&&(this[$8]=a5e(this.arModes)),(I.has("ar")||I.has("arModes")||I.has("src")||I.has("iosSrc")||I.has("arUsdzMaxTextureSize"))&&this[xI]()}async activateAR(){switch(this[TF]){case gf.QUICK_LOOK:await this[ZZ]();break;case gf.WEBXR:await this[YZ]();break;case gf.SCENE_VIEWER:this[JZ]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(e=c5e,i=bv,r=BE,s=$8,l=TF,u=MF,A=RF,g=W8,_=j8,b=K8,xI)](){var I;let F=gf.NONE;if(this.ar){if(this.src!=null)for(const L of this[$8]){if(L==="webxr"&&Vse&&!jZ&&await this[ao].arRenderer.supportsPresentation()){F=gf.WEBXR;break}if(L==="scene-viewer"&&!KZ&&(U2e||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(!((I=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)===null||I===void 0)&&I.includes("XR")))){F=gf.SCENE_VIEWER;break}if(L==="quick-look"&&SY){F=gf.QUICK_LOOK;break}}F===gf.NONE&&this.iosSrc!=null&&SY&&(F=gf.QUICK_LOOK)}if(F!==gf.NONE)this[bv].classList.add("enabled"),this[bv].addEventListener("click",this[RF]);else if(this[bv].classList.contains("enabled")){this[bv].removeEventListener("click",this[RF]),this[bv].classList.remove("enabled");const L=ky.FAILED;this.setAttribute("ar-status",L),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:L}}))}this[TF]=F}async[YZ](){console.log("Attempting to present in AR with WebXR..."),await this[X8]();try{this[bv].removeEventListener("click",this[RF]);const{arRenderer:I}=this[ao];I.placeOnWall=this.arPlacement==="wall",await I.present(this[Ri],this.xrEnvironment)}catch(I){console.warn("Error while trying to present in AR with WebXR"),console.error(I),await this[ao].arRenderer.stopPresenting(),jZ=!0,console.warn("Falling back to next ar-mode"),await this[xI](),this.activateAR()}finally{this[xI]()}}async[X8](){this.loaded||(this[MF]=!0,this[oS](),await Q2e(this,"load"),this[MF]=!1)}[vS](){return super[vS]()||this[MF]}[JZ](){const I=self.location.toString(),F=new URL(I),L=new URL(this.src,I);L.hash&&(L.hash="");const U=new URLSearchParams(L.search);if(F.hash=XZ,U.set("mode","ar_preferred"),U.has("disable_occlusion")||U.set("disable_occlusion","true"),this.arScale==="fixed"&&U.set("resizable","false"),this.arPlacement==="wall"&&U.set("enable_vertical_placement","true"),U.has("sound")){const N=new URL(U.get("sound"),I);U.set("sound",N.toString())}if(U.has("link")){const N=new URL(U.get("link"),I);U.set("link",N.toString())}const P=`intent://arvr.google.com/scene-viewer/1.2?${U.toString()+"&file="+encodeURIComponent(L.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(F.toString())};end;`,H=()=>{self.location.hash===XZ&&(KZ=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[xI]())};self.addEventListener("hashchange",H,{once:!0}),this[BE].setAttribute("href",P),console.log("Attempting to present in AR with Scene Viewer..."),this[BE].click()}async[ZZ](){const I=!this.iosSrc;this[bv].classList.remove("enabled");const F=I?await this.prepareUSDZ():this.iosSrc,L=new URL(F,self.location.toString());if(I){const H=self.location.toString(),N=new URL(H),z=new URL(this.src,N);z.hash&&(L.hash=z.hash)}this.arScale==="fixed"&&(L.hash&&(L.hash+="&"),L.hash+="allowsContentScaling=0");const U=this[BE];U.setAttribute("rel","ar");const P=document.createElement("img");U.appendChild(P),U.setAttribute("href",L.toString()),I&&U.setAttribute("download","model.usdz"),U.style.display="none",U.isConnected||this.shadowRoot.appendChild(U),console.log("Attempting to present in AR with Quick Look..."),U.click(),U.removeChild(P),I&&URL.revokeObjectURL(F),this[bv].classList.add("enabled")}async prepareUSDZ(){const I=this[Lw].beginActivity("usdz-conversion");await this[X8]();const{model:F,shadow:L,target:U}=this[Ri];if(F==null)return"";let P=!1;L!=null&&(P=L.visible,L.visible=!1),I(.2);const H=new VMe;U.remove(F),F.position.copy(U.position),F.updateWorldMatrix(!1,!0);const N=await H.parseAsync(F,{maxTextureSize:isNaN(this.arUsdzMaxTextureSize)?1/0:Math.max(parseInt(this.arUsdzMaxTextureSize),16)});F.position.set(0,0,0),U.add(F);const z=new Blob([N],{type:"model/vnd.usdz+zip"}),W=URL.createObjectURL(z);return I(1),L!=null&&(L.visible=P),W}}return $1([Kn({type:Boolean,attribute:"ar"})],x.prototype,"ar",void 0),$1([Kn({type:String,attribute:"ar-scale"})],x.prototype,"arScale",void 0),$1([Kn({type:String,attribute:"ar-usdz-max-texture-size"})],x.prototype,"arUsdzMaxTextureSize",void 0),$1([Kn({type:String,attribute:"ar-placement"})],x.prototype,"arPlacement",void 0),$1([Kn({type:String,attribute:"ar-modes"})],x.prototype,"arModes",void 0),$1([Kn({type:String,attribute:"ios-src"})],x.prototype,"iosSrc",void 0),$1([Kn({type:Boolean,attribute:"xr-environment"})],x.prototype,"xrEnvironment",void 0),x};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y8=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l};const h5e=100,d5e="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",A5e="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",p5e="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",J8={AUTO:"auto"},eee={AUTO:"auto",EAGER:"eager"},IE=Symbol("defaultProgressBarElement"),Z8=Symbol("posterContainerElement"),TE=Symbol("defaultPosterElement"),CI=Symbol("shouldDismissPoster"),e4=Symbol("hidePoster"),DF=Symbol("modelIsRevealed"),t4=Symbol("updateProgressBar"),f5e=Symbol("ariaLabelCallToAction"),i4=Symbol("onProgress"),g5e=a=>{var e,i,r,s,l,u,A,g;class _ extends a{static set dracoDecoderLocation(x){Pd.setDRACODecoderLocation(x)}static get dracoDecoderLocation(){return Pd.getDRACODecoderLocation()}static set ktx2TranscoderLocation(x){Pd.setKTX2TranscoderLocation(x)}static get ktx2TranscoderLocation(){return Pd.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(x){Pd.setMeshoptDecoderLocation(x)}static get meshoptDecoderLocation(){return Pd.getMeshoptDecoderLocation()}static set lottieLoaderLocation(x){Rg.singleton.textureUtils.lottieLoaderUrl=x}static get lottieLoaderLocation(){return Rg.singleton.textureUtils.lottieLoaderUrl}static mapURLs(x){Rg.singleton.loader[J1].manager.setURLModifier(x)}dismissPoster(){this.loaded?this[e4]():(this[CI]=!0,this[oS]())}showPoster(){const x=this[Z8];if(x.classList.contains("show"))return;x.classList.add("show"),this[Tg].classList.remove("show");const C=this[TE];C.removeAttribute("tabindex"),C.removeAttribute("aria-hidden");const I=this.modelIsVisible;this[DF]=!1,this[dk](I)}getDimensions(){return Ly(this[Ri].size)}getBoundingBoxCenter(){return Ly(this[Ri].boundingBox.getCenter(new Fe))}constructor(...x){super(...x),this.poster=null,this.reveal=J8.AUTO,this.loading=eee.AUTO,this[e]=!1,this[i]=!1,this[r]=this.shadowRoot.querySelector(".slot.poster"),this[s]=this.shadowRoot.querySelector("#default-poster"),this[l]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[u]=this[TE].getAttribute("aria-label"),this[A]=P2e(U=>{const P=this[IE].parentNode;requestAnimationFrame(()=>{this[IE].style.transform=`scaleX(${U})`,U===0&&(P.removeChild(this[IE]),P.appendChild(this[IE])),this[IE].classList.toggle("hide",U===1)})},h5e),this[g]=U=>{const P=U.detail.totalProgress,H=U.detail.reason;P===1&&(this[t4].flush(),this.loaded&&(this[CI]||this.reveal===J8.AUTO)&&this[e4]()),this[t4](P),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:P,reason:H}}))};const C=self.ModelViewerElement||{},I=C.dracoDecoderLocation||d5e;Pd.setDRACODecoderLocation(I);const F=C.ktx2TranscoderLocation||A5e;Pd.setKTX2TranscoderLocation(F),C.meshoptDecoderLocation&&Pd.setMeshoptDecoderLocation(C.meshoptDecoderLocation);const L=C.lottieLoaderLocation||p5e;Rg.singleton.textureUtils.lottieLoaderUrl=L}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[Lw].addEventListener("progress",this[i4])}disconnectedCallback(){super.disconnectedCallback(),this[Lw].removeEventListener("progress",this[i4])}async updated(x){super.updated(x),x.has("poster")&&this.poster!=null&&(this[TE].style.backgroundImage=`url(${this.poster})`),x.has("alt")&&this[TE].setAttribute("aria-label",this[MH]),(x.has("reveal")||x.has("loading"))&&this[oS]()}[(e=DF,i=CI,r=Z8,s=TE,l=IE,u=f5e,A=t4,g=i4,vS)](){return!!this.src&&(this[CI]||this.loading===eee.EAGER||this.reveal===J8.AUTO&&this[iw])}[e4](){this[CI]=!1;const x=this[Z8];if(!x.classList.contains("show"))return;x.classList.remove("show"),this[Tg].classList.add("show");const C=this.modelIsVisible;this[DF]=!0,this[dk](C);const I=this.getRootNode();I&&I.activeElement===this&&this[Tg].focus();const F=this[TE];F.setAttribute("aria-hidden","true"),F.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[Pw](){return super[Pw]()&&this[DF]}}return Y8([Kn({type:String})],_.prototype,"poster",void 0),Y8([Kn({type:String})],_.prototype,"reveal",void 0),Y8([Kn({type:String})],_.prototype,"loading",void 0),_};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n4=function(a,e,i,r){var s=arguments.length,l=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(a,e,i,r);else for(var A=a.length-1;A>=0;A--)(u=a[A])&&(l=(s<3?u(l):s>3?u(e,i,l):u(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l};const m5e=Math.PI/32,_5e=3e3,v5e={basis:[EL(Vh(m5e,"rad"))],keywords:{auto:[null]}},ME=Symbol("autoRotateStartTime"),r4=Symbol("radiansPerSecond"),tee=Symbol("syncRotationRate"),s4=Symbol("onCameraChange"),y5e=a=>{var e,i,r;class s extends a{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=_5e,this.rotationPerSecond="auto",this[e]=performance.now(),this[i]=0,this[r]=u=>{this.autoRotate&&u.detail.source==="user-interaction"&&(this[ME]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[s4]),this[ME]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[s4]),this[ME]=performance.now()}updated(u){super.updated(u),u.has("autoRotate")&&(this[ME]=performance.now())}[(e=ME,i=r4,tee)](u){this[r4]=u[0]}[Km](u,A){if(super[Km](u,A),!this.autoRotate||!this[Pw]()||this[ao].isPresenting)return;const g=Math.min(A,u-this[ME]-this.autoRotateDelay);g>0&&(this[Ri].yaw=this.turntableRotation+this[r4]*g*.001)}get turntableRotation(){return this[Ri].yaw}resetTurntableRotation(u=0){this[Ri].yaw=u}}return r=s4,n4([Kn({type:Boolean,attribute:"auto-rotate"})],s.prototype,"autoRotate",void 0),n4([Kn({type:Number,attribute:"auto-rotate-delay"})],s.prototype,"autoRotateDelay",void 0),n4([Ty({intrinsics:v5e,updateHandler:tee}),Kn({type:String,attribute:"rotation-per-second"})],s.prototype,"rotationPerSecond",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Voe=GMe(xMe(y5e(V2e(STe(u5e(g5e(zMe(lM))))))));customElements.define("model-viewer",Voe);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const b5e=new Set(["children","localName","ref","style","className"]),iee=new WeakMap,nee=(a,e,i,r,s)=>{const l=s==null?void 0:s[e];l===void 0?(a[e]=i,i==null&&e in HTMLElement.prototype&&a.removeAttribute(e)):i!==r&&((u,A,g)=>{let _=iee.get(u);_===void 0&&iee.set(u,_=new Map);let b=_.get(A);g!==void 0?b===void 0?(_.set(A,b={handleEvent:g}),u.addEventListener(A,b)):b.handleEvent=g:b!==void 0&&(_.delete(A),u.removeEventListener(A,b))})(a,l,i)},qoe=({react:a,tagName:e,elementClass:i,events:r,displayName:s})=>{const l=new Set(Object.keys(r??{})),u=a.forwardRef((A,g)=>{const _=a.useRef(new Map),b=a.useRef(null),x={},C={};for(const[I,F]of Object.entries(A))b5e.has(I)?x[I==="className"?"class":I]=F:l.has(I)||I in i.prototype?C[I]=F:x[I]=F;return a.useLayoutEffect(()=>{if(b.current===null)return;const I=new Map;for(const F in C)nee(b.current,F,A[F],_.current.get(F),r),_.current.delete(F),I.set(F,A[F]);for(const[F,L]of _.current)nee(b.current,F,void 0,L,r);_.current=I}),a.useLayoutEffect(()=>{var I;(I=b.current)==null||I.removeAttribute("defer-hydration")},[]),x.suppressHydrationWarning=!0,a.createElement(e,{...x,ref:a.useCallback(I=>{b.current=I,typeof g=="function"?g(I):g!==null&&(g.current=I)},[g])})});return u.displayName=s??i.name,u};var MA=function(){return MA=Object.assign||function(e){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},MA.apply(this,arguments)};function fk(a,e,i){if(i||arguments.length===2)for(var r=0,s=e.length,l;r<s;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return a.concat(l||Array.prototype.slice.call(e))}var ta="-ms-",tT="-moz-",Ks="-webkit-",$oe="comm",BL="rule",T7="decl",w5e="@import",Woe="@keyframes",x5e="@layer",joe=Math.abs,M7=String.fromCharCode,UH=Object.assign;function C5e(a,e){return du(a,0)^45?(((e<<2^du(a,0))<<2^du(a,1))<<2^du(a,2))<<2^du(a,3):0}function Koe(a){return a.trim()}function Bv(a,e){return(a=e.exec(a))?a[0]:a}function zr(a,e,i){return a.replace(e,i)}function dU(a,e,i){return a.indexOf(e,i)}function du(a,e){return a.charCodeAt(e)|0}function yS(a,e,i){return a.slice(e,i)}function Gm(a){return a.length}function Xoe(a){return a.length}function zI(a,e){return e.push(a),a}function E5e(a,e){return a.map(e).join("")}function ree(a,e){return a.filter(function(i){return!Bv(i,e)})}var IL=1,bS=1,Yoe=0,Rf=0,hc=0,LS="";function TL(a,e,i,r,s,l,u,A){return{value:a,root:e,parent:i,type:r,props:s,children:l,line:IL,column:bS,length:u,return:"",siblings:A}}function My(a,e){return UH(TL("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},e)}function RE(a){for(;a.root;)a=My(a.root,{children:[a]});zI(a,a.siblings)}function S5e(){return hc}function B5e(){return hc=Rf>0?du(LS,--Rf):0,bS--,hc===10&&(bS=1,IL--),hc}function Ug(){return hc=Rf<Yoe?du(LS,Rf++):0,bS++,hc===10&&(bS=1,IL++),hc}function bw(){return du(LS,Rf)}function AU(){return Rf}function ML(a,e){return yS(LS,a,e)}function kH(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I5e(a){return IL=bS=1,Yoe=Gm(LS=a),Rf=0,[]}function T5e(a){return LS="",a}function o4(a){return Koe(ML(Rf-1,LH(a===91?a+2:a===40?a+1:a)))}function M5e(a){for(;(hc=bw())&&hc<33;)Ug();return kH(a)>2||kH(hc)>3?"":" "}function R5e(a,e){for(;--e&&Ug()&&!(hc<48||hc>102||hc>57&&hc<65||hc>70&&hc<97););return ML(a,AU()+(e<6&&bw()==32&&Ug()==32))}function LH(a){for(;Ug();)switch(hc){case a:return Rf;case 34:case 39:a!==34&&a!==39&&LH(hc);break;case 40:a===41&&LH(a);break;case 92:Ug();break}return Rf}function D5e(a,e){for(;Ug()&&a+hc!==57;)if(a+hc===84&&bw()===47)break;return"/*"+ML(e,Rf-1)+"*"+M7(a===47?a:Ug())}function F5e(a){for(;!kH(bw());)Ug();return ML(a,Rf)}function U5e(a){return T5e(pU("",null,null,null,[""],a=I5e(a),0,[0],a))}function pU(a,e,i,r,s,l,u,A,g){for(var _=0,b=0,x=u,C=0,I=0,F=0,L=1,U=1,P=1,H=0,N="",z=s,W=l,j=r,J=N;U;)switch(F=H,H=Ug()){case 40:if(F!=108&&du(J,x-1)==58){dU(J+=zr(o4(H),"&","&\f"),"&\f",joe(_?A[_-1]:0))!=-1&&(P=-1);break}case 34:case 39:case 91:J+=o4(H);break;case 9:case 10:case 13:case 32:J+=M5e(F);break;case 92:J+=R5e(AU()-1,7);continue;case 47:switch(bw()){case 42:case 47:zI(k5e(D5e(Ug(),AU()),e,i,g),g);break;default:J+="/"}break;case 123*L:A[_++]=Gm(J)*P;case 125*L:case 59:case 0:switch(H){case 0:case 125:U=0;case 59+b:P==-1&&(J=zr(J,/\f/g,"")),I>0&&Gm(J)-x&&zI(I>32?oee(J+";",r,i,x-1,g):oee(zr(J," ","")+";",r,i,x-2,g),g);break;case 59:J+=";";default:if(zI(j=see(J,e,i,_,b,s,A,N,z=[],W=[],x,l),l),H===123)if(b===0)pU(J,e,j,j,z,l,x,A,W);else switch(C===99&&du(J,3)===110?100:C){case 100:case 108:case 109:case 115:pU(a,j,j,r&&zI(see(a,j,j,0,0,s,A,N,s,z=[],x,W),W),s,W,x,A,r?z:W);break;default:pU(J,j,j,j,[""],W,0,A,W)}}_=b=I=0,L=P=1,N=J="",x=u;break;case 58:x=1+Gm(J),I=F;default:if(L<1){if(H==123)--L;else if(H==125&&L++==0&&B5e()==125)continue}switch(J+=M7(H),H*L){case 38:P=b>0?1:(J+="\f",-1);break;case 44:A[_++]=(Gm(J)-1)*P,P=1;break;case 64:bw()===45&&(J+=o4(Ug())),C=bw(),b=x=Gm(N=J+=F5e(AU())),H++;break;case 45:F===45&&Gm(J)==2&&(L=0)}}return l}function see(a,e,i,r,s,l,u,A,g,_,b,x){for(var C=s-1,I=s===0?l:[""],F=Xoe(I),L=0,U=0,P=0;L<r;++L)for(var H=0,N=yS(a,C+1,C=joe(U=u[L])),z=a;H<F;++H)(z=Koe(U>0?I[H]+" "+N:zr(N,/&\f/g,I[H])))&&(g[P++]=z);return TL(a,e,i,s===0?BL:A,g,_,b,x)}function k5e(a,e,i,r){return TL(a,e,i,$oe,M7(S5e()),yS(a,2,-2),0,r)}function oee(a,e,i,r,s){return TL(a,e,i,T7,yS(a,0,r),yS(a,r+1,-1),r,s)}function Joe(a,e,i){switch(C5e(a,e)){case 5103:return Ks+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ks+a+a;case 4789:return tT+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Ks+a+tT+a+ta+a+a;case 5936:switch(du(a,e+11)){case 114:return Ks+a+ta+zr(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Ks+a+ta+zr(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Ks+a+ta+zr(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Ks+a+ta+a+a;case 6165:return Ks+a+ta+"flex-"+a+a;case 5187:return Ks+a+zr(a,/(\w+).+(:[^]+)/,Ks+"box-$1$2"+ta+"flex-$1$2")+a;case 5443:return Ks+a+ta+"flex-item-"+zr(a,/flex-|-self/g,"")+(Bv(a,/flex-|baseline/)?"":ta+"grid-row-"+zr(a,/flex-|-self/g,""))+a;case 4675:return Ks+a+ta+"flex-line-pack"+zr(a,/align-content|flex-|-self/g,"")+a;case 5548:return Ks+a+ta+zr(a,"shrink","negative")+a;case 5292:return Ks+a+ta+zr(a,"basis","preferred-size")+a;case 6060:return Ks+"box-"+zr(a,"-grow","")+Ks+a+ta+zr(a,"grow","positive")+a;case 4554:return Ks+zr(a,/([^-])(transform)/g,"$1"+Ks+"$2")+a;case 6187:return zr(zr(zr(a,/(zoom-|grab)/,Ks+"$1"),/(image-set)/,Ks+"$1"),a,"")+a;case 5495:case 3959:return zr(a,/(image-set\([^]*)/,Ks+"$1$`$1");case 4968:return zr(zr(a,/(.+:)(flex-)?(.*)/,Ks+"box-pack:$3"+ta+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ks+a+a;case 4200:if(!Bv(a,/flex-|baseline/))return ta+"grid-column-align"+yS(a,e)+a;break;case 2592:case 3360:return ta+zr(a,"template-","")+a;case 4384:case 3616:return i&&i.some(function(r,s){return e=s,Bv(r.props,/grid-\w+-end/)})?~dU(a+(i=i[e].value),"span",0)?a:ta+zr(a,"-start","")+a+ta+"grid-row-span:"+(~dU(i,"span",0)?Bv(i,/\d+/):+Bv(i,/\d+/)-+Bv(a,/\d+/))+";":ta+zr(a,"-start","")+a;case 4896:case 4128:return i&&i.some(function(r){return Bv(r.props,/grid-\w+-start/)})?a:ta+zr(zr(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return zr(a,/(.+)-inline(.+)/,Ks+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gm(a)-1-e>6)switch(du(a,e+1)){case 109:if(du(a,e+4)!==45)break;case 102:return zr(a,/(.+:)(.+)-([^]+)/,"$1"+Ks+"$2-$3$1"+tT+(du(a,e+3)==108?"$3":"$2-$3"))+a;case 115:return~dU(a,"stretch",0)?Joe(zr(a,"stretch","fill-available"),e,i)+a:a}break;case 5152:case 5920:return zr(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,l,u,A,g,_){return ta+s+":"+l+_+(u?ta+s+"-span:"+(A?g:+g-+l)+_:"")+a});case 4949:if(du(a,e+6)===121)return zr(a,":",":"+Ks)+a;break;case 6444:switch(du(a,du(a,14)===45?18:11)){case 120:return zr(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ks+(du(a,14)===45?"inline-":"")+"box$3$1"+Ks+"$2$3$1"+ta+"$2box$3")+a;case 100:return zr(a,":",":"+ta)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return zr(a,"scroll-","scroll-snap-")+a}return a}function gk(a,e){for(var i="",r=0;r<a.length;r++)i+=e(a[r],r,a,e)||"";return i}function L5e(a,e,i,r){switch(a.type){case x5e:if(a.children.length)break;case w5e:case T7:return a.return=a.return||a.value;case $oe:return"";case Woe:return a.return=a.value+"{"+gk(a.children,r)+"}";case BL:if(!Gm(a.value=a.props.join(",")))return""}return Gm(i=gk(a.children,r))?a.return=a.value+"{"+i+"}":""}function P5e(a){var e=Xoe(a);return function(i,r,s,l){for(var u="",A=0;A<e;A++)u+=a[A](i,r,s,l)||"";return u}}function O5e(a){return function(e){e.root||(e=e.return)&&a(e)}}function Q5e(a,e,i,r){if(a.length>-1&&!a.return)switch(a.type){case T7:a.return=Joe(a.value,a.length,i);return;case Woe:return gk([My(a,{value:zr(a.value,"@","@"+Ks)})],r);case BL:if(a.length)return E5e(i=a.props,function(s){switch(Bv(s,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":RE(My(a,{props:[zr(s,/:(read-\w+)/,":"+tT+"$1")]})),RE(My(a,{props:[s]})),UH(a,{props:ree(i,r)});break;case"::placeholder":RE(My(a,{props:[zr(s,/:(plac\w+)/,":"+Ks+"input-$1")]})),RE(My(a,{props:[zr(s,/:(plac\w+)/,":"+tT+"$1")]})),RE(My(a,{props:[zr(s,/:(plac\w+)/,ta+"input-$1")]})),RE(My(a,{props:[s]})),UH(a,{props:ree(i,r)});break}return""})}}var N5e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hp={},wS=typeof process<"u"&&hp!==void 0&&(hp.REACT_APP_SC_ATTR||hp.SC_ATTR)||"data-styled",Zoe="active",eae="data-styled-version",RL="6.1.17",R7=`/*!sc*/
`,mk=typeof window<"u"&&"HTMLElement"in window,H5e=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&hp!==void 0&&hp.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&hp.REACT_APP_SC_DISABLE_SPEEDY!==""?hp.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&hp.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&hp!==void 0&&hp.SC_DISABLE_SPEEDY!==void 0&&hp.SC_DISABLE_SPEEDY!==""&&hp.SC_DISABLE_SPEEDY!=="false"&&hp.SC_DISABLE_SPEEDY),DL=Object.freeze([]),xS=Object.freeze({});function z5e(a,e,i){return i===void 0&&(i=xS),a.theme!==i.theme&&a.theme||e||i.theme}var tae=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),G5e=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,V5e=/(^-|-$)/g;function aee(a){return a.replace(G5e,"-").replace(V5e,"")}var q5e=/(a)(d)/gi,FF=52,lee=function(a){return String.fromCharCode(a+(a>25?39:97))};function PH(a){var e,i="";for(e=Math.abs(a);e>FF;e=e/FF|0)i=lee(e%FF)+i;return(lee(e%FF)+i).replace(q5e,"$1-$2")}var a4,iae=5381,XE=function(a,e){for(var i=e.length;i;)a=33*a^e.charCodeAt(--i);return a},nae=function(a){return XE(iae,a)};function $5e(a){return PH(nae(a)>>>0)}function W5e(a){return a.displayName||a.name||"Component"}function l4(a){return typeof a=="string"&&!0}var rae=typeof Symbol=="function"&&Symbol.for,sae=rae?Symbol.for("react.memo"):60115,j5e=rae?Symbol.for("react.forward_ref"):60112,K5e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},X5e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},oae={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Y5e=((a4={})[j5e]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a4[sae]=oae,a4);function cee(a){return("type"in(e=a)&&e.type.$$typeof)===sae?oae:"$$typeof"in a?Y5e[a.$$typeof]:K5e;var e}var J5e=Object.defineProperty,Z5e=Object.getOwnPropertyNames,uee=Object.getOwnPropertySymbols,eRe=Object.getOwnPropertyDescriptor,tRe=Object.getPrototypeOf,hee=Object.prototype;function aae(a,e,i){if(typeof e!="string"){if(hee){var r=tRe(e);r&&r!==hee&&aae(a,r,i)}var s=Z5e(e);uee&&(s=s.concat(uee(e)));for(var l=cee(a),u=cee(e),A=0;A<s.length;++A){var g=s[A];if(!(g in X5e||i&&i[g]||u&&g in u||l&&g in l)){var _=eRe(e,g);try{J5e(a,g,_)}catch{}}}}return a}function CS(a){return typeof a=="function"}function D7(a){return typeof a=="object"&&"styledComponentId"in a}function uw(a,e){return a&&e?"".concat(a," ").concat(e):a||e||""}function dee(a,e){if(a.length===0)return"";for(var i=a[0],r=1;r<a.length;r++)i+=a[r];return i}function OT(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function OH(a,e,i){if(i===void 0&&(i=!1),!i&&!OT(a)&&!Array.isArray(a))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)a[r]=OH(a[r],e[r]);else if(OT(e))for(var r in e)a[r]=OH(a[r],e[r]);return a}function F7(a,e){Object.defineProperty(a,"toString",{value:e})}function cM(a){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var iRe=function(){function a(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return a.prototype.indexOfGroup=function(e){for(var i=0,r=0;r<e;r++)i+=this.groupSizes[r];return i},a.prototype.insertRules=function(e,i){if(e>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,l=s;e>=l;)if((l<<=1)<0)throw cM(16,"".concat(e));this.groupSizes=new Uint32Array(l),this.groupSizes.set(r),this.length=l;for(var u=s;u<l;u++)this.groupSizes[u]=0}for(var A=this.indexOfGroup(e+1),g=(u=0,i.length);u<g;u++)this.tag.insertRule(A,i[u])&&(this.groupSizes[e]++,A++)},a.prototype.clearGroup=function(e){if(e<this.length){var i=this.groupSizes[e],r=this.indexOfGroup(e),s=r+i;this.groupSizes[e]=0;for(var l=r;l<s;l++)this.tag.deleteRule(r)}},a.prototype.getGroup=function(e){var i="";if(e>=this.length||this.groupSizes[e]===0)return i;for(var r=this.groupSizes[e],s=this.indexOfGroup(e),l=s+r,u=s;u<l;u++)i+="".concat(this.tag.getRule(u)).concat(R7);return i},a}(),fU=new Map,_k=new Map,gU=1,UF=function(a){if(fU.has(a))return fU.get(a);for(;_k.has(gU);)gU++;var e=gU++;return fU.set(a,e),_k.set(e,a),e},nRe=function(a,e){gU=e+1,fU.set(a,e),_k.set(e,a)},rRe="style[".concat(wS,"][").concat(eae,'="').concat(RL,'"]'),sRe=new RegExp("^".concat(wS,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),oRe=function(a,e,i){for(var r,s=i.split(","),l=0,u=s.length;l<u;l++)(r=s[l])&&a.registerName(e,r)},aRe=function(a,e){for(var i,r=((i=e.textContent)!==null&&i!==void 0?i:"").split(R7),s=[],l=0,u=r.length;l<u;l++){var A=r[l].trim();if(A){var g=A.match(sRe);if(g){var _=0|parseInt(g[1],10),b=g[2];_!==0&&(nRe(b,_),oRe(a,b,g[3]),a.getTag().insertRules(_,s)),s.length=0}else s.push(A)}}},Aee=function(a){for(var e=document.querySelectorAll(rRe),i=0,r=e.length;i<r;i++){var s=e[i];s&&s.getAttribute(wS)!==Zoe&&(aRe(a,s),s.parentNode&&s.parentNode.removeChild(s))}};function lRe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var lae=function(a){var e=document.head,i=a||e,r=document.createElement("style"),s=function(A){var g=Array.from(A.querySelectorAll("style[".concat(wS,"]")));return g[g.length-1]}(i),l=s!==void 0?s.nextSibling:null;r.setAttribute(wS,Zoe),r.setAttribute(eae,RL);var u=lRe();return u&&r.setAttribute("nonce",u),i.insertBefore(r,l),r},cRe=function(){function a(e){this.element=lae(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var r=document.styleSheets,s=0,l=r.length;s<l;s++){var u=r[s];if(u.ownerNode===i)return u}throw cM(17)}(this.element),this.length=0}return a.prototype.insertRule=function(e,i){try{return this.sheet.insertRule(i,e),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},a.prototype.getRule=function(e){var i=this.sheet.cssRules[e];return i&&i.cssText?i.cssText:""},a}(),uRe=function(){function a(e){this.element=lae(e),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(e,i){if(e<=this.length&&e>=0){var r=document.createTextNode(i);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},a.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},a}(),hRe=function(){function a(e){this.rules=[],this.length=0}return a.prototype.insertRule=function(e,i){return e<=this.length&&(this.rules.splice(e,0,i),this.length++,!0)},a.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},a.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},a}(),pee=mk,dRe={isServer:!mk,useCSSOMInjection:!H5e},cae=function(){function a(e,i,r){e===void 0&&(e=xS),i===void 0&&(i={});var s=this;this.options=MA(MA({},dRe),e),this.gs=i,this.names=new Map(r),this.server=!!e.isServer,!this.server&&mk&&pee&&(pee=!1,Aee(this)),F7(this,function(){return function(l){for(var u=l.getTag(),A=u.length,g="",_=function(x){var C=function(P){return _k.get(P)}(x);if(C===void 0)return"continue";var I=l.names.get(C),F=u.getGroup(x);if(I===void 0||!I.size||F.length===0)return"continue";var L="".concat(wS,".g").concat(x,'[id="').concat(C,'"]'),U="";I!==void 0&&I.forEach(function(P){P.length>0&&(U+="".concat(P,","))}),g+="".concat(F).concat(L,'{content:"').concat(U,'"}').concat(R7)},b=0;b<A;b++)_(b);return g}(s)})}return a.registerId=function(e){return UF(e)},a.prototype.rehydrate=function(){!this.server&&mk&&Aee(this)},a.prototype.reconstructWithOptions=function(e,i){return i===void 0&&(i=!0),new a(MA(MA({},this.options),e),this.gs,i&&this.names||void 0)},a.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(e=function(i){var r=i.useCSSOMInjection,s=i.target;return i.isServer?new hRe(s):r?new cRe(s):new uRe(s)}(this.options),new iRe(e)));var e},a.prototype.hasNameForId=function(e,i){return this.names.has(e)&&this.names.get(e).has(i)},a.prototype.registerName=function(e,i){if(UF(e),this.names.has(e))this.names.get(e).add(i);else{var r=new Set;r.add(i),this.names.set(e,r)}},a.prototype.insertRules=function(e,i,r){this.registerName(e,i),this.getTag().insertRules(UF(e),r)},a.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},a.prototype.clearRules=function(e){this.getTag().clearGroup(UF(e)),this.clearNames(e)},a.prototype.clearTag=function(){this.tag=void 0},a}(),ARe=/&/g,pRe=/^\s*\/\/.*$/gm;function uae(a,e){return a.map(function(i){return i.type==="rule"&&(i.value="".concat(e," ").concat(i.value),i.value=i.value.replaceAll(",",",".concat(e," ")),i.props=i.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(i.children)&&i.type!=="@keyframes"&&(i.children=uae(i.children,e)),i})}function fRe(a){var e,i,r,s=xS,l=s.options,u=l===void 0?xS:l,A=s.plugins,g=A===void 0?DL:A,_=function(C,I,F){return F.startsWith(i)&&F.endsWith(i)&&F.replaceAll(i,"").length>0?".".concat(e):C},b=g.slice();b.push(function(C){C.type===BL&&C.value.includes("&")&&(C.props[0]=C.props[0].replace(ARe,i).replace(r,_))}),u.prefix&&b.push(Q5e),b.push(L5e);var x=function(C,I,F,L){I===void 0&&(I=""),F===void 0&&(F=""),L===void 0&&(L="&"),e=L,i=I,r=new RegExp("\\".concat(i,"\\b"),"g");var U=C.replace(pRe,""),P=U5e(F||I?"".concat(F," ").concat(I," { ").concat(U," }"):U);u.namespace&&(P=uae(P,u.namespace));var H=[];return gk(P,P5e(b.concat(O5e(function(N){return H.push(N)})))),H};return x.hash=g.length?g.reduce(function(C,I){return I.name||cM(15),XE(C,I.name)},iae).toString():"",x}var gRe=new cae,QH=fRe(),hae=Ye.createContext({shouldForwardProp:void 0,styleSheet:gRe,stylis:QH});hae.Consumer;Ye.createContext(void 0);function fee(){return Ce.useContext(hae)}var mRe=function(){function a(e,i){var r=this;this.inject=function(s,l){l===void 0&&(l=QH);var u=r.name+l.hash;s.hasNameForId(r.id,u)||s.insertRules(r.id,u,l(r.rules,u,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=i,F7(this,function(){throw cM(12,String(r.name))})}return a.prototype.getName=function(e){return e===void 0&&(e=QH),this.name+e.hash},a}(),_Re=function(a){return a>="A"&&a<="Z"};function gee(a){for(var e="",i=0;i<a.length;i++){var r=a[i];if(i===1&&r==="-"&&a[0]==="-")return a;_Re(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var dae=function(a){return a==null||a===!1||a===""},Aae=function(a){var e,i,r=[];for(var s in a){var l=a[s];a.hasOwnProperty(s)&&!dae(l)&&(Array.isArray(l)&&l.isCss||CS(l)?r.push("".concat(gee(s),":"),l,";"):OT(l)?r.push.apply(r,fk(fk(["".concat(s," {")],Aae(l),!1),["}"],!1)):r.push("".concat(gee(s),": ").concat((e=s,(i=l)==null||typeof i=="boolean"||i===""?"":typeof i!="number"||i===0||e in N5e||e.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return r};function ww(a,e,i,r){if(dae(a))return[];if(D7(a))return[".".concat(a.styledComponentId)];if(CS(a)){if(!CS(l=a)||l.prototype&&l.prototype.isReactComponent||!e)return[a];var s=a(e);return ww(s,e,i,r)}var l;return a instanceof mRe?i?(a.inject(i,r),[a.getName(r)]):[a]:OT(a)?Aae(a):Array.isArray(a)?Array.prototype.concat.apply(DL,a.map(function(u){return ww(u,e,i,r)})):[a.toString()]}function vRe(a){for(var e=0;e<a.length;e+=1){var i=a[e];if(CS(i)&&!D7(i))return!1}return!0}var yRe=nae(RL),bRe=function(){function a(e,i,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&vRe(e),this.componentId=i,this.baseHash=XE(yRe,i),this.baseStyle=r,cae.registerId(i)}return a.prototype.generateAndInjectStyles=function(e,i,r){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,i,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&i.hasNameForId(this.componentId,this.staticRulesId))s=uw(s,this.staticRulesId);else{var l=dee(ww(this.rules,e,i,r)),u=PH(XE(this.baseHash,l)>>>0);if(!i.hasNameForId(this.componentId,u)){var A=r(l,".".concat(u),void 0,this.componentId);i.insertRules(this.componentId,u,A)}s=uw(s,u),this.staticRulesId=u}else{for(var g=XE(this.baseHash,r.hash),_="",b=0;b<this.rules.length;b++){var x=this.rules[b];if(typeof x=="string")_+=x;else if(x){var C=dee(ww(x,e,i,r));g=XE(g,C+b),_+=C}}if(_){var I=PH(g>>>0);i.hasNameForId(this.componentId,I)||i.insertRules(this.componentId,I,r(_,".".concat(I),void 0,this.componentId)),s=uw(s,I)}}return s},a}(),pae=Ye.createContext(void 0);pae.Consumer;var c4={};function wRe(a,e,i){var r=D7(a),s=a,l=!l4(a),u=e.attrs,A=u===void 0?DL:u,g=e.componentId,_=g===void 0?function(z,W){var j=typeof z!="string"?"sc":aee(z);c4[j]=(c4[j]||0)+1;var J="".concat(j,"-").concat($5e(RL+j+c4[j]));return W?"".concat(W,"-").concat(J):J}(e.displayName,e.parentComponentId):g,b=e.displayName,x=b===void 0?function(z){return l4(z)?"styled.".concat(z):"Styled(".concat(W5e(z),")")}(a):b,C=e.displayName&&e.componentId?"".concat(aee(e.displayName),"-").concat(e.componentId):e.componentId||_,I=r&&s.attrs?s.attrs.concat(A).filter(Boolean):A,F=e.shouldForwardProp;if(r&&s.shouldForwardProp){var L=s.shouldForwardProp;if(e.shouldForwardProp){var U=e.shouldForwardProp;F=function(z,W){return L(z,W)&&U(z,W)}}else F=L}var P=new bRe(i,C,r?s.componentStyle:void 0);function H(z,W){return function(j,J,ie){var ee=j.attrs,re=j.componentStyle,se=j.defaultProps,ue=j.foldedComponentIds,fe=j.styledComponentId,pe=j.target,xe=Ye.useContext(pae),ce=fee(),_e=j.shouldForwardProp||ce.shouldForwardProp,ye=z5e(J,xe,se)||xS,Oe=function(ze,ht,lt){for(var yt,Nt=MA(MA({},ht),{className:void 0,theme:lt}),zt=0;zt<ze.length;zt+=1){var ei=CS(yt=ze[zt])?yt(Nt):yt;for(var it in ei)Nt[it]=it==="className"?uw(Nt[it],ei[it]):it==="style"?MA(MA({},Nt[it]),ei[it]):ei[it]}return ht.className&&(Nt.className=uw(Nt.className,ht.className)),Nt}(ee,J,ye),ge=Oe.as||pe,Ee={};for(var ke in Oe)Oe[ke]===void 0||ke[0]==="$"||ke==="as"||ke==="theme"&&Oe.theme===ye||(ke==="forwardedAs"?Ee.as=Oe.forwardedAs:_e&&!_e(ke,ge)||(Ee[ke]=Oe[ke]));var je=function(ze,ht){var lt=fee(),yt=ze.generateAndInjectStyles(ht,lt.styleSheet,lt.stylis);return yt}(re,Oe),Ie=uw(ue,fe);return je&&(Ie+=" "+je),Oe.className&&(Ie+=" "+Oe.className),Ee[l4(ge)&&!tae.has(ge)?"class":"className"]=Ie,ie&&(Ee.ref=ie),Ce.createElement(ge,Ee)}(N,z,W)}H.displayName=x;var N=Ye.forwardRef(H);return N.attrs=I,N.componentStyle=P,N.displayName=x,N.shouldForwardProp=F,N.foldedComponentIds=r?uw(s.foldedComponentIds,s.styledComponentId):"",N.styledComponentId=C,N.target=r?s.target:a,Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(z){this._foldedDefaultProps=r?function(W){for(var j=[],J=1;J<arguments.length;J++)j[J-1]=arguments[J];for(var ie=0,ee=j;ie<ee.length;ie++)OH(W,ee[ie],!0);return W}({},s.defaultProps,z):z}}),F7(N,function(){return".".concat(N.styledComponentId)}),l&&aae(N,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),N}function mee(a,e){for(var i=[a[0]],r=0,s=e.length;r<s;r+=1)i.push(e[r],a[r+1]);return i}var _ee=function(a){return Object.assign(a,{isCss:!0})};function xRe(a){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(CS(a)||OT(a))return _ee(ww(mee(DL,fk([a],e,!0))));var r=a;return e.length===0&&r.length===1&&typeof r[0]=="string"?ww(r):_ee(ww(mee(r,e)))}function NH(a,e,i){if(i===void 0&&(i=xS),!e)throw cM(1,e);var r=function(s){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];return a(e,i,xRe.apply(void 0,fk([s],l,!1)))};return r.attrs=function(s){return NH(a,e,MA(MA({},i),{attrs:Array.prototype.concat(i.attrs,s).filter(Boolean)}))},r.withConfig=function(s){return NH(a,e,MA(MA({},i),s))},r}var fae=function(a){return NH(wRe,a)},PS=fae;tae.forEach(function(a){PS[a]=fae(a)});var FL=Nne();const CRe=Qne(FL);var gae=function(a,e,i){if(i===void 0&&(i=null),a.length<=e)return a;var r=e-(i=i||"...").length,s=Math.ceil(r/2),l=Math.floor(r/2);return a.substr(0,s)+i+a.substr(a.length-l)};function Ef(a,e,i,r){return new(i||(i=Promise))(function(s,l){function u(_){try{g(r.next(_))}catch(b){l(b)}}function A(_){try{g(r.throw(_))}catch(b){l(b)}}function g(_){var b;_.done?s(_.value):(b=_.value,b instanceof i?b:new i(function(x){x(b)})).then(u,A)}g((r=r.apply(a,[])).next())})}function Sf(a,e){var i,r,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=A(0),u.throw=A(1),u.return=A(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function A(g){return function(_){return function(b){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,b[0]&&(l=0)),l;)try{if(i=1,r&&(s=2&b[0]?r.return:b[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,b[1])).done)return s;switch(r=0,s&&(b=[2&b[0],s.value]),b[0]){case 0:case 1:s=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,r=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!((s=s.length>0&&s[s.length-1])||b[0]!==6&&b[0]!==2)){l=0;continue}if(b[0]===3&&(!s||b[1]>s[0]&&b[1]<s[3])){l.label=b[1];break}if(b[0]===6&&l.label<s[1]){l.label=s[1],s=b;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(b);break}s[2]&&l.ops.pop(),l.trys.pop();continue}b=e.call(a,l)}catch(x){b=[6,x],r=0}finally{i=s=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([g,_])}}}function ERe(a,e){var i=typeof Symbol=="function"&&a[Symbol.iterator];if(!i)return a;var r,s,l=i.call(a),u=[];try{for(;(e===void 0||e-- >0)&&!(r=l.next()).done;)u.push(r.value)}catch(A){s={error:A}}finally{try{r&&!r.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}return u}function uM(a,e){return Object.defineProperty?Object.defineProperty(a,"raw",{value:e}):a.raw=e,a}var vee,SRe=PS.div(vee||(vee=uM([`
  width: 100%;
  height: 100%;

  > model-viewer {
    width: 100%;
    height: 100%;
  }
`],[`
  width: 100%;
  height: 100%;

  > model-viewer {
    width: 100%;
    height: 100%;
  }
`])));function Fa(){return Fa=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},Fa.apply(null,arguments)}function BRe(...a){return e=>a.forEach(i=>function(r,s){typeof r=="function"?r(s):r!=null&&(r.current=s)}(i,e))}const mae=Ce.forwardRef((a,e)=>{const{children:i,...r}=a,s=Ce.Children.toArray(i),l=s.find(TRe);if(l){const u=l.props.children,A=s.map(g=>g===l?Ce.Children.count(u)>1?Ce.Children.only(null):Ce.isValidElement(u)?u.props.children:null:g);return Ce.createElement(HH,Fa({},r,{ref:e}),Ce.isValidElement(u)?Ce.cloneElement(u,void 0,A):null)}return Ce.createElement(HH,Fa({},r,{ref:e}),i)});mae.displayName="Slot";const HH=Ce.forwardRef((a,e)=>{const{children:i,...r}=a;return Ce.isValidElement(i)?Ce.cloneElement(i,{...MRe(r,i.props),ref:BRe(e,i.ref)}):Ce.Children.count(i)>1?Ce.Children.only(null):null});HH.displayName="SlotClone";const IRe=({children:a})=>Ce.createElement(Ce.Fragment,null,a);function TRe(a){return Ce.isValidElement(a)&&a.type===IRe}function MRe(a,e){const i={...e};for(const r in e){const s=a[r],l=e[r];/^on[A-Z]/.test(r)?s&&l?i[r]=(...u)=>{l(...u),s(...u)}:s&&(i[r]=s):r==="style"?i[r]={...s,...l}:r==="className"&&(i[r]=[s,l].filter(Boolean).join(" "))}return{...a,...i}}const RRe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,e)=>{const i=Ce.forwardRef((r,s)=>{const{asChild:l,...u}=r,A=l?mae:e;return Ce.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),Ce.createElement(A,Fa({},u,{ref:s}))});return i.displayName=`Primitive.${e}`,{...a,[e]:i}},{}),DRe=Ce.forwardRef((a,e)=>{var i;const{container:r=globalThis==null||(i=globalThis.document)===null||i===void 0?void 0:i.body,...s}=a;return r?CRe.createPortal(Ce.createElement(RRe.div,Fa({},s,{ref:e})),r):null}),FRe=DRe;var yee=Object.prototype.hasOwnProperty;function QT(a,e){var i,r;if(a===e)return!0;if(a&&e&&(i=a.constructor)===e.constructor){if(i===Date)return a.getTime()===e.getTime();if(i===RegExp)return a.toString()===e.toString();if(i===Array){if((r=a.length)===e.length)for(;r--&&QT(a[r],e[r]););return r===-1}if(!i||typeof a=="object"){for(i in r=0,a)if(yee.call(a,i)&&++r&&!yee.call(e,i)||!(i in e)||!QT(a[i],e[i]))return!1;return Object.keys(e).length===r}}return a!=a&&e!=e}function UL(a,e){if(Object.is(a,e))return!0;if(typeof a!="object"||a===null||typeof e!="object"||e===null)return!1;const i=Object.keys(a);if(i.length!==Object.keys(e).length)return!1;for(let r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(e,i[r])||!Object.is(a[i[r]],e[i[r]]))return!1;return!0}var mU=function(a,e,i,r){this.name=a,this.fn=e,this.args=i,this.modifiers=r};function _ae(a,e){return e===void 0&&(e="simple"),typeof a=="object"?a[e]:a}function zE(a,e,i){if(a.length){var r=a.shift(),s=zE(a,e,i);return r.perform(s,i)}return _ae(e)}function vae(a,e,i){if(a.length){var r=a.shift(),s=vae(a,e,i);return r.performAsync(s,i)}return function(l){return Promise.resolve(_ae(e,"async")(l))}}mU.prototype._test=function(a){var e=this.fn;try{zE(this.modifiers.slice(),e,this)(a)}catch{e=function(){return!1}}try{return zE(this.modifiers.slice(),e,this)(a)}catch{return!1}},mU.prototype._check=function(a){try{zE(this.modifiers.slice(),this.fn,this)(a)}catch{if(zE(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!zE(this.modifiers.slice(),this.fn,this)(a))throw null},mU.prototype._testAsync=function(a){var e=this;return new Promise(function(i,r){vae(e.modifiers.slice(),e.fn,e)(a).then(function(s){s?i(a):r(null)}).catch(function(s){return r(s)})})};var URe=function(a,e,i){this.name=a,this.perform=e,this.performAsync=i},zH=function(a){function e(i,r,s,l){for(var u=[],A=arguments.length-4;A-- >0;)u[A]=arguments[A+4];a.call(this,u),a.captureStackTrace&&a.captureStackTrace(this,e),this.rule=i,this.value=r,this.cause=s,this.target=l}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e}(Error),Nm=function(a,e){a===void 0&&(a=[]),e===void 0&&(e=[]),this.chain=a,this.nextRuleModifiers=e};function yae(a,e,i,r){if(e.length){var s=e.shift();s._testAsync(a).then(function(){yae(a,e,i,r)},function(l){r(new zH(s,a,l))})}else i(a)}Nm.prototype._applyRule=function(a,e){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new mU(e,a.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}},Nm.prototype._applyModifier=function(a,e){return this.nextRuleModifiers.push(new URe(e,a.simple,a.async)),this},Nm.prototype._clone=function(){return new Nm(this.chain.slice(),this.nextRuleModifiers.slice())},Nm.prototype.test=function(a){return this.chain.every(function(e){return e._test(a)})},Nm.prototype.testAll=function(a){var e=[];return this.chain.forEach(function(i){try{i._check(a)}catch(r){e.push(new zH(i,a,r))}}),e},Nm.prototype.check=function(a){this.chain.forEach(function(e){try{e._check(a)}catch(i){throw new zH(e,a,i)}})},Nm.prototype.testAsync=function(a){var e=this;return new Promise(function(i,r){yae(a,e.chain.slice(),i,r)})};var bee=function(a,e){return!(!e||typeof a!="string"||a.trim().length!==0)||a==null};function RA(){return typeof Proxy<"u"?bae(new Nm):GH(new Nm)}var NT={};function bae(a){return new Proxy(a,{get:function(e,i){if(i in e)return e[i];var r=bae(a._clone());return i in vk?r._applyModifier(vk[i],i):i in NT?r._applyRule(NT[i],i):i in VH?r._applyRule(VH[i],i):void 0}})}function GH(a){var e=function(s,l){return Object.keys(s).forEach(function(u){l[u]=function(){for(var A=[],g=arguments.length;g--;)A[g]=arguments[g];return GH(l._clone())._applyRule(s[u],u).apply(void 0,A)}}),l},i=e(VH,a),r=e(NT,i);return Object.keys(vk).forEach(function(s){Object.defineProperty(r,s,{get:function(){return GH(r._clone())._applyModifier(vk[s],s)}})}),r}RA.extend=function(a){Object.assign(NT,a)},RA.clearCustomRules=function(){NT={}};var vk={not:{simple:function(a){return function(e){return!a(e)}},async:function(a){return function(e){return Promise.resolve(a(e)).then(function(i){return!i}).catch(function(){return!0})}}},some:{simple:function(a){return function(e){return kF(e).some(function(i){try{return a(i)}catch{return!1}})}},async:function(a){return function(e){return Promise.all(kF(e).map(function(i){try{return a(i).catch(function(){return!1})}catch{return!1}})).then(function(i){return i.some(Boolean)})}}},every:{simple:function(a){return function(e){return e!==!1&&kF(e).every(a)}},async:function(a){return function(e){return Promise.all(kF(e).map(a)).then(function(i){return i.every(Boolean)})}}},strict:{simple:function(a,e){return function(i){return wee(e)&&i&&typeof i=="object"?Object.keys(e.args[0]).length===Object.keys(i).length&&a(i):a(i)}},async:function(a,e){return function(i){return Promise.resolve(a(i)).then(function(r){return wee(e)&&i&&typeof i=="object"?Object.keys(e.args[0]).length===Object.keys(i).length&&r:r}).catch(function(){return!1})}}}};function wee(a){return a&&a.name==="schema"&&a.args.length>0&&typeof a.args[0]=="object"}function kF(a){return typeof a=="string"?a.split(""):a}var VH={equal:function(a){return function(e){return e==a}},exact:function(a){return function(e){return e===a}},number:function(a){return a===void 0&&(a=!0),function(e){return typeof e=="number"&&(a||isFinite(e))}},integer:function(){return function(a){return(Number.isInteger||kRe)(a)}},numeric:function(){return function(a){return!isNaN(parseFloat(a))&&isFinite(a)}},string:function(){return DE("string")},boolean:function(){return DE("boolean")},undefined:function(){return DE("undefined")},null:function(){return DE("null")},array:function(){return DE("array")},object:function(){return DE("object")},instanceOf:function(a){return function(e){return e instanceof a}},pattern:function(a){return function(e){return a.test(e)}},lowercase:function(){return function(a){return typeof a=="boolean"||a===a.toLowerCase()&&a.trim()!==""}},uppercase:function(){return function(a){return a===a.toUpperCase()&&a.trim()!==""}},vowel:function(){return function(a){return/^[aeiou]+$/i.test(a)}},consonant:function(){return function(a){return/^(?=[^aeiou])([a-z]+)$/i.test(a)}},first:function(a){return function(e){return e[0]==a}},last:function(a){return function(e){return e[e.length-1]==a}},empty:function(){return function(a){return a.length===0}},length:function(a,e){return function(i){return i.length>=a&&i.length<=(e||a)}},minLength:function(a){return function(e){return e.length>=a}},maxLength:function(a){return function(e){return e.length<=a}},negative:function(){return function(a){return a<0}},positive:function(){return function(a){return a>=0}},between:function(a,e){return function(i){return i>=a&&i<=e}},range:function(a,e){return function(i){return i>=a&&i<=e}},lessThan:function(a){return function(e){return e<a}},lessThanOrEqual:function(a){return function(e){return e<=a}},greaterThan:function(a){return function(e){return e>a}},greaterThanOrEqual:function(a){return function(e){return e>=a}},even:function(){return function(a){return a%2==0}},odd:function(){return function(a){return a%2!=0}},includes:function(a){return function(e){return~e.indexOf(a)}},schema:function(a){return function(e){return{simple:function(i){var r=[];if(Object.keys(e).forEach(function(s){var l=e[s];try{l.check((i||{})[s])}catch(u){u.target=s,r.push(u)}}),r.length>0)throw r;return!0},async:function(i){var r=[],s=Object.keys(e).map(function(l){return e[l].testAsync((i||{})[l]).catch(function(u){u.target=l,r.push(u)})});return Promise.all(s).then(function(){if(r.length>0)throw r;return!0})}}}(a)},passesAnyOf:function(){for(var a=[],e=arguments.length;e--;)a[e]=arguments[e];return function(i){return a.some(function(r){return r.test(i)})}},optional:function(a,e){return e===void 0&&(e=!1),{simple:function(i){return bee(i,e)||a.check(i)===void 0},async:function(i){return bee(i,e)||a.testAsync(i)}}}};function DE(a){return function(e){return Array.isArray(e)&&a==="array"||e===null&&a==="null"||typeof e===a}}function kRe(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}var wo="colors",Fd="sizes",dn="space",LRe={gap:dn,gridGap:dn,columnGap:dn,gridColumnGap:dn,rowGap:dn,gridRowGap:dn,inset:dn,insetBlock:dn,insetBlockEnd:dn,insetBlockStart:dn,insetInline:dn,insetInlineEnd:dn,insetInlineStart:dn,margin:dn,marginTop:dn,marginRight:dn,marginBottom:dn,marginLeft:dn,marginBlock:dn,marginBlockEnd:dn,marginBlockStart:dn,marginInline:dn,marginInlineEnd:dn,marginInlineStart:dn,padding:dn,paddingTop:dn,paddingRight:dn,paddingBottom:dn,paddingLeft:dn,paddingBlock:dn,paddingBlockEnd:dn,paddingBlockStart:dn,paddingInline:dn,paddingInlineEnd:dn,paddingInlineStart:dn,top:dn,right:dn,bottom:dn,left:dn,scrollMargin:dn,scrollMarginTop:dn,scrollMarginRight:dn,scrollMarginBottom:dn,scrollMarginLeft:dn,scrollMarginX:dn,scrollMarginY:dn,scrollMarginBlock:dn,scrollMarginBlockEnd:dn,scrollMarginBlockStart:dn,scrollMarginInline:dn,scrollMarginInlineEnd:dn,scrollMarginInlineStart:dn,scrollPadding:dn,scrollPaddingTop:dn,scrollPaddingRight:dn,scrollPaddingBottom:dn,scrollPaddingLeft:dn,scrollPaddingX:dn,scrollPaddingY:dn,scrollPaddingBlock:dn,scrollPaddingBlockEnd:dn,scrollPaddingBlockStart:dn,scrollPaddingInline:dn,scrollPaddingInlineEnd:dn,scrollPaddingInlineStart:dn,fontSize:"fontSizes",background:wo,backgroundColor:wo,backgroundImage:wo,borderImage:wo,border:wo,borderBlock:wo,borderBlockEnd:wo,borderBlockStart:wo,borderBottom:wo,borderBottomColor:wo,borderColor:wo,borderInline:wo,borderInlineEnd:wo,borderInlineStart:wo,borderLeft:wo,borderLeftColor:wo,borderRight:wo,borderRightColor:wo,borderTop:wo,borderTopColor:wo,caretColor:wo,color:wo,columnRuleColor:wo,fill:wo,outline:wo,outlineColor:wo,stroke:wo,textDecorationColor:wo,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Fd,minBlockSize:Fd,maxBlockSize:Fd,inlineSize:Fd,minInlineSize:Fd,maxInlineSize:Fd,width:Fd,minWidth:Fd,maxWidth:Fd,height:Fd,minHeight:Fd,maxHeight:Fd,flexBasis:Fd,gridTemplateColumns:Fd,gridTemplateRows:Fd,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},PRe=(a,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,OS=()=>{const a=Object.create(null);return(e,i,...r)=>{const s=(l=>JSON.stringify(l,PRe))(e);return s in a?a[s]:a[s]=i(e,...r)}},xw=Symbol.for("sxs.internal"),U7=(a,e)=>Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)),xee=a=>{for(const e in a)return!0;return!1},{hasOwnProperty:ORe}=Object.prototype,qH=a=>a.includes("-")?a:a.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),QRe=/\s+(?![^()]*\))/,FE=a=>e=>a(...typeof e=="string"?String(e).split(QRe):[e]),Cee={appearance:a=>({WebkitAppearance:a,appearance:a}),backfaceVisibility:a=>({WebkitBackfaceVisibility:a,backfaceVisibility:a}),backdropFilter:a=>({WebkitBackdropFilter:a,backdropFilter:a}),backgroundClip:a=>({WebkitBackgroundClip:a,backgroundClip:a}),boxDecorationBreak:a=>({WebkitBoxDecorationBreak:a,boxDecorationBreak:a}),clipPath:a=>({WebkitClipPath:a,clipPath:a}),content:a=>({content:a.includes('"')||a.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(a)?a:`"${a}"`}),hyphens:a=>({WebkitHyphens:a,hyphens:a}),maskImage:a=>({WebkitMaskImage:a,maskImage:a}),maskSize:a=>({WebkitMaskSize:a,maskSize:a}),tabSize:a=>({MozTabSize:a,tabSize:a}),textSizeAdjust:a=>({WebkitTextSizeAdjust:a,textSizeAdjust:a}),userSelect:a=>({WebkitUserSelect:a,userSelect:a}),marginBlock:FE((a,e)=>({marginBlockStart:a,marginBlockEnd:e||a})),marginInline:FE((a,e)=>({marginInlineStart:a,marginInlineEnd:e||a})),maxSize:FE((a,e)=>({maxBlockSize:a,maxInlineSize:e||a})),minSize:FE((a,e)=>({minBlockSize:a,minInlineSize:e||a})),paddingBlock:FE((a,e)=>({paddingBlockStart:a,paddingBlockEnd:e||a})),paddingInline:FE((a,e)=>({paddingInlineStart:a,paddingInlineEnd:e||a}))},u4=/([\d.]+)([^]*)/,NRe=(a,e)=>a.length?a.reduce((i,r)=>(i.push(...e.map(s=>s.includes("&")?s.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(s)?`:is(${r})`:r):r+" "+s)),i),[]):e,HRe=(a,e)=>a in zRe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(i,r,s,l)=>r+(s==="stretch"?`-moz-available${l};${qH(a)}:${r}-webkit-fill-available`:`-moz-fit-content${l};${qH(a)}:${r}fit-content`)+l):String(e),zRe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},$v=a=>a?a+"-":"",wae=(a,e,i)=>a.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,s,l,u,A)=>u=="$"==!!l?r:(s||u=="--"?"calc(":"")+"var(--"+(u==="$"?$v(e)+(A.includes("$")?"":$v(i))+A.replace(/\$/g,"-"):A)+")"+(s||u=="--"?"*"+(s||"")+(l||"1")+")":"")),GRe=/\s*,\s*(?![^()]*\))/,VRe=Object.prototype.toString,YE=(a,e,i,r,s)=>{let l,u,A;const g=(_,b,x)=>{let C,I;const F=L=>{for(C in L){const H=C.charCodeAt(0)===64,N=H&&Array.isArray(L[C])?L[C]:[L[C]];for(I of N){const z=/[A-Z]/.test(P=C)?P:P.replace(/-[^]/g,j=>j[1].toUpperCase()),W=typeof I=="object"&&I&&I.toString===VRe&&(!r.utils[z]||!b.length);if(z in r.utils&&!W){const j=r.utils[z];if(j!==u){u=j,F(j(I)),u=null;continue}}else if(z in Cee){const j=Cee[z];if(j!==A){A=j,F(j(I)),A=null;continue}}if(H&&(U=C.slice(1)in r.media?"@media "+r.media[C.slice(1)]:C,C=U.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(j,J,ie,ee,re,se)=>{const ue=u4.test(J),fe=.0625*(ue?-1:1),[pe,xe]=ue?[ee,J]:[J,ee];return"("+(ie[0]==="="?"":ie[0]===">"===ue?"max-":"min-")+pe+":"+(ie[0]!=="="&&ie.length===1?xe.replace(u4,(ce,_e,ye)=>Number(_e)+fe*(ie===">"?1:-1)+ye):xe)+(re?") and ("+(re[0]===">"?"min-":"max-")+pe+":"+(re.length===1?se.replace(u4,(ce,_e,ye)=>Number(_e)+fe*(re===">"?-1:1)+ye):se):"")+")"})),W){const j=H?x.concat(C):[...x],J=H?[...b]:NRe(b,C.split(GRe));l!==void 0&&s(Eee(...l)),l=void 0,g(I,J,j)}else l===void 0&&(l=[[],b,x]),C=H||C.charCodeAt(0)!==36?C:`--${$v(r.prefix)}${C.slice(1).replace(/\$/g,"-")}`,I=W?I:typeof I=="number"?I&&z in qRe?String(I)+"px":String(I):wae(HRe(z,I??""),r.prefix,r.themeMap[z]),l[0].push(`${H?`${C} `:`${qH(C)}:`}${I}`)}}var U,P};F(_),l!==void 0&&s(Eee(...l)),l=void 0};g(a,e,i)},Eee=(a,e,i)=>`${i.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${a.join(";")}${e.length?"}":""}${Array(i.length?i.length+1:0).join("}")}`,qRe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},See=a=>String.fromCharCode(a+(a>25?39:97)),Cw=a=>(e=>{let i,r="";for(i=Math.abs(e);i>52;i=i/52|0)r=See(i%52)+r;return See(i%52)+r})(((e,i)=>{let r=i.length;for(;r;)e=33*e^i.charCodeAt(--r);return e})(5381,JSON.stringify(a))>>>0),GI=["themed","global","styled","onevar","resonevar","allvar","inline"],$Re=a=>{if(a.href&&!a.href.startsWith(location.origin))return!1;try{return!!a.cssRules}catch{return!1}},WRe=a=>{let e;const i=()=>{const{cssRules:s}=e.sheet;return[].map.call(s,(l,u)=>{const{cssText:A}=l;let g="";if(A.startsWith("--sxs"))return"";if(s[u-1]&&(g=s[u-1].cssText).startsWith("--sxs")){if(!l.cssRules.length)return"";for(const _ in e.rules)if(e.rules[_].group===l)return`--sxs{--sxs:${[...e.rules[_].cache].join(" ")}}${A}`;return l.cssRules.length?`${g}${A}`:""}return A}).join("")},r=()=>{if(e){const{rules:A,sheet:g}=e;if(!g.deleteRule){for(;Object(Object(g.cssRules)[0]).type===3;)g.cssRules.splice(0,1);g.cssRules=[]}for(const _ in A)delete A[_]}const s=Object(a).styleSheets||[];for(const A of s)if($Re(A)){for(let g=0,_=A.cssRules;_[g];++g){const b=Object(_[g]);if(b.type!==1)continue;const x=Object(_[g+1]);if(x.type!==4)continue;++g;const{cssText:C}=b;if(!C.startsWith("--sxs"))continue;const I=C.slice(14,-3).trim().split(/\s+/),F=GI[I[0]];F&&(e||(e={sheet:A,reset:r,rules:{},toString:i}),e.rules[F]={group:x,index:g,cache:new Set(I)})}if(e)break}if(!e){const A=(g,_)=>({type:_,cssRules:[],insertRule(b,x){this.cssRules.splice(x,0,A(b,{import:3,undefined:1}[(b.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return g==="@media{}"?`@media{${[].map.call(this.cssRules,b=>b.cssText).join("")}}`:g}});e={sheet:a?(a.head||a).appendChild(document.createElement("style")).sheet:A("","text/css"),rules:{},reset:r,toString:i}}const{sheet:l,rules:u}=e;for(let A=GI.length-1;A>=0;--A){const g=GI[A];if(!u[g]){const _=GI[A+1],b=u[_]?u[_].index:l.cssRules.length;l.insertRule("@media{}",b),l.insertRule(`--sxs{--sxs:${A}}`,b),u[g]={group:l.cssRules[b+1],index:b,cache:new Set([A])}}jRe(u[g])}};return r(),e},jRe=a=>{const e=a.group;let i=e.cssRules.length;a.apply=r=>{try{e.insertRule(r,i),++i}catch{}}},EI=Symbol(),KRe=OS(),Bee=(a,e)=>KRe(a,()=>(...i)=>{let r={type:null,composers:new Set};for(const s of i)if(s!=null)if(s[xw]){r.type==null&&(r.type=s[xw].type);for(const l of s[xw].composers)r.composers.add(l)}else s.constructor!==Object||s.$$typeof?r.type==null&&(r.type=s):r.composers.add(XRe(s,a));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),YRe(a,r,e)}),XRe=({variants:a,compoundVariants:e,defaultVariants:i,...r},s)=>{const l=`${$v(s.prefix)}c-${Cw(r)}`,u=[],A=[],g=Object.create(null),_=[];for(const C in i)g[C]=String(i[C]);if(typeof a=="object"&&a)for(const C in a){b=g,x=C,ORe.call(b,x)||(g[C]="undefined");const I=a[C];for(const F in I){const L={[C]:String(F)};String(F)==="undefined"&&_.push(C);const U=I[F],P=[L,U,!xee(U)];u.push(P)}}var b,x;if(typeof e=="object"&&e)for(const C of e){let{css:I,...F}=C;I=typeof I=="object"&&I||{};for(const U in F)F[U]=String(F[U]);const L=[F,I,!xee(I)];A.push(L)}return[l,r,u,A,g,_]},YRe=(a,e,i)=>{const[r,s,l,u]=JRe(e.composers),A=typeof e.type=="function"||e.type.$$typeof?(x=>{function C(){for(let I=0;I<C[EI].length;I++){const[F,L]=C[EI][I];x.rules[F].apply(L)}return C[EI]=[],null}return C[EI]=[],C.rules={},GI.forEach(I=>C.rules[I]={apply:F=>C[EI].push([I,F])}),C})(i):null,g=(A||i).rules,_=`.${r}${s.length>1?`:where(.${s.slice(1).join(".")})`:""}`,b=x=>{x=typeof x=="object"&&x||ZRe;const{css:C,...I}=x,F={};for(const P in l)if(delete I[P],P in x){let H=x[P];typeof H=="object"&&H?F[P]={"@initial":l[P],...H}:(H=String(H),F[P]=H!=="undefined"||u.has(P)?H:l[P])}else F[P]=l[P];const L=new Set([...s]);for(const[P,H,N,z]of e.composers){i.rules.styled.cache.has(P)||(i.rules.styled.cache.add(P),YE(H,[`.${P}`],[],a,J=>{g.styled.apply(J)}));const W=Iee(N,F,a.media),j=Iee(z,F,a.media,!0);for(const J of W)if(J!==void 0)for(const[ie,ee,re]of J){const se=`${P}-${Cw(ee)}-${ie}`;L.add(se);const ue=(re?i.rules.resonevar:i.rules.onevar).cache,fe=re?g.resonevar:g.onevar;ue.has(se)||(ue.add(se),YE(ee,[`.${se}`],[],a,pe=>{fe.apply(pe)}))}for(const J of j)if(J!==void 0)for(const[ie,ee]of J){const re=`${P}-${Cw(ee)}-${ie}`;L.add(re),i.rules.allvar.cache.has(re)||(i.rules.allvar.cache.add(re),YE(ee,[`.${re}`],[],a,se=>{g.allvar.apply(se)}))}}if(typeof C=="object"&&C){const P=`${r}-i${Cw(C)}-css`;L.add(P),i.rules.inline.cache.has(P)||(i.rules.inline.cache.add(P),YE(C,[`.${P}`],[],a,H=>{g.inline.apply(H)}))}for(const P of String(x.className||"").trim().split(/\s+/))P&&L.add(P);const U=I.className=[...L].join(" ");return{type:e.type,className:U,selector:_,props:I,toString:()=>U,deferredInjector:A}};return U7(b,{className:r,selector:_,[xw]:e,toString:()=>(i.rules.styled.cache.has(r)||b(),r)})},JRe=a=>{let e="";const i=[],r={},s=[];for(const[l,,,,u,A]of a){e===""&&(e=l),i.push(l),s.push(...A);for(const g in u){const _=u[g];(r[g]===void 0||_!=="undefined"||A.includes(_))&&(r[g]=_)}}return[e,i,r,new Set(s)]},Iee=(a,e,i,r)=>{const s=[];e:for(let[l,u,A]of a){if(A)continue;let g,_=0,b=!1;for(g in l){const x=l[g];let C=e[g];if(C!==x){if(typeof C!="object"||!C)continue e;{let I,F,L=0;for(const U in C){if(x===String(C[U])){if(U!=="@initial"){const P=U.slice(1);(F=F||[]).push(P in i?i[P]:U.replace(/^@media ?/,"")),b=!0}_+=L,I=!0}++L}if(F&&F.length&&(u={["@media "+F.join(", ")]:u}),!I)continue e}}}(s[_]=s[_]||[]).push([r?"cv":`${g}-${l[g]}`,u,b])}return s},ZRe={},eDe=OS(),tDe=(a,e)=>eDe(a,()=>(...i)=>{const r=()=>{for(let s of i){s=typeof s=="object"&&s||{};let l=Cw(s);if(!e.rules.global.cache.has(l)){if(e.rules.global.cache.add(l),"@import"in s){let u=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let A of[].concat(s["@import"]))A=A.includes('"')||A.includes("'")?A:`"${A}"`,e.sheet.insertRule(`@import ${A};`,u++);delete s["@import"]}YE(s,[],[],a,u=>{e.rules.global.apply(u)})}}return""};return U7(r,{toString:r})}),iDe=OS(),nDe=(a,e)=>iDe(a,()=>i=>{const r=`${$v(a.prefix)}k-${Cw(i)}`,s=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const l=[];YE(i,[],[],a,A=>l.push(A));const u=`@keyframes ${r}{${l.join("")}}`;e.rules.global.apply(u)}return r};return U7(s,{get name(){return s()},toString:s})}),rDe=class{constructor(a,e,i,r){this.token=a==null?"":String(a),this.value=e==null?"":String(e),this.scale=i==null?"":String(i),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+$v(this.prefix)+$v(this.scale)+this.token}toString(){return this.computedValue}},sDe=OS(),oDe=(a,e)=>sDe(a,()=>(i,r)=>{r=typeof i=="object"&&i||Object(r);const s=`.${i=(i=typeof i=="string"?i:"")||`${$v(a.prefix)}t-${Cw(r)}`}`,l={},u=[];for(const g in r){l[g]={};for(const _ in r[g]){const b=`--${$v(a.prefix)}${g}-${_}`,x=wae(String(r[g][_]),a.prefix,g);l[g][_]=new rDe(_,x,g,a.prefix),u.push(`${b}:${x}`)}}const A=()=>{if(u.length&&!e.rules.themed.cache.has(i)){e.rules.themed.cache.add(i);const g=`${r===a.theme?":root,":""}.${i}{${u.join(";")}}`;e.rules.themed.apply(g)}return i};return{...l,get className(){return A()},selector:s,toString:A}}),aDe=OS(),lDe=OS();const Gh={toVector:(a,e)=>(a===void 0&&(a=e),Array.isArray(a)?a:[a,a]),add:(a,e)=>[a[0]+e[0],a[1]+e[1]],sub:(a,e)=>[a[0]-e[0],a[1]-e[1]],addTo(a,e){a[0]+=e[0],a[1]+=e[1]},subTo(a,e){a[0]-=e[0],a[1]-=e[1]}};function Tee(a,e,i){return e===0||Math.abs(e)===1/0?Math.pow(a,5*i):a*e*i/(e+i*a)}function Mee(a,e,i,r=.15){return r===0?function(s,l,u){return Math.max(l,Math.min(s,u))}(a,e,i):a<e?-Tee(e-a,i-e,r)+e:a>i?+Tee(a-i,i-e,r)+i:a}function cDe(a){var e=function(i,r){if(typeof i!="object"||i===null)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var l=s.call(i,r);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}(a,"string");return typeof e=="symbol"?e:String(e)}function IA(a,e,i){return(e=cDe(e))in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function Ree(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),i.push.apply(i,r)}return i}function Wa(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ree(Object(i),!0).forEach(function(r){IA(a,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):Ree(Object(i)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(i,r))})}return a}const xae={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Dee(a){return a?a[0].toUpperCase()+a.slice(1):""}const uDe=["enter","leave"];function hDe(a,e="",i=!1){const r=xae[a],s=r&&r[e]||e;return"on"+Dee(a)+Dee(s)+(function(l=!1,u){return l&&!uDe.includes(u)}(i,s)?"Capture":"")}const dDe=["gotpointercapture","lostpointercapture"];function ADe(a){let e=a.substring(2).toLowerCase();const i=!!~e.indexOf("passive");i&&(e=e.replace("passive",""));const r=dDe.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(r);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:i}}function kL(a){return"touches"in a}function Cae(a){return kL(a)?"touch":"pointerType"in a?a.pointerType:"mouse"}function Eae(a){return kL(a)?function(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}(a)[0]:a}function pDe(a){return function(e){return Array.from(e.touches).filter(i=>{var r,s;return i.target===e.currentTarget||((r=e.currentTarget)===null||r===void 0||(s=r.contains)===null||s===void 0?void 0:s.call(r,i.target))})}(a).map(e=>e.identifier)}function h4(a){const e=Eae(a);return kL(a)?e.identifier:e.pointerId}function Fee(a){const e=Eae(a);return[e.clientX,e.clientY]}function yk(a,...e){return typeof a=="function"?a(...e):a}function fDe(){}function gDe(...a){return a.length===0?fDe:a.length===1?a[0]:function(){let e;for(const i of a)e=i.apply(this,arguments)||e;return e}}function Uee(a,e){return Object.assign({},e,a||{})}class mDe{constructor(e,i,r){this.ctrl=e,this.args=i,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:i,ingKey:r,args:s}=this;i[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const i=this.state,r=this.config;i._active||(this.reset(),this.computeInitial(),i._active=!0,i.target=e.target,i.currentTarget=e.currentTarget,i.lastOffset=r.from?yk(r.from,i):i.offset,i.offset=i.lastOffset,i.startTime=i.timeStamp=e.timeStamp)}computeValues(e){const i=this.state;i._values=e,i.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:i,config:r,shared:s}=this;i.args=this.args;let l=0;if(e&&(i.event=e,r.preventDefault&&e.cancelable&&i.event.preventDefault(),i.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,function(j){const J={};if("buttons"in j&&(J.buttons=j.buttons),"shiftKey"in j){const{shiftKey:ie,altKey:ee,metaKey:re,ctrlKey:se}=j;Object.assign(J,{shiftKey:ie,altKey:ee,metaKey:re,ctrlKey:se})}return J}(e)),s.down=s.pressed=s.buttons%2==1||s.touches>0,l=e.timeStamp-i.timeStamp,i.timeStamp=e.timeStamp,i.elapsedTime=i.timeStamp-i.startTime),i._active){const j=i._delta.map(Math.abs);Gh.addTo(i._distance,j)}this.axisIntent&&this.axisIntent(e);const[u,A]=i._movement,[g,_]=r.threshold,{_step:b,values:x}=i;if(r.hasCustomTransform?(b[0]===!1&&(b[0]=Math.abs(u)>=g&&x[0]),b[1]===!1&&(b[1]=Math.abs(A)>=_&&x[1])):(b[0]===!1&&(b[0]=Math.abs(u)>=g&&Math.sign(u)*g),b[1]===!1&&(b[1]=Math.abs(A)>=_&&Math.sign(A)*_)),i.intentional=b[0]!==!1||b[1]!==!1,!i.intentional)return;const C=[0,0];if(r.hasCustomTransform){const[j,J]=x;C[0]=b[0]!==!1?j-b[0]:0,C[1]=b[1]!==!1?J-b[1]:0}else C[0]=b[0]!==!1?u-b[0]:0,C[1]=b[1]!==!1?A-b[1]:0;this.restrictToAxis&&!i._blocked&&this.restrictToAxis(C);const I=i.offset,F=i._active&&!i._blocked||i.active;F&&(i.first=i._active&&!i.active,i.last=!i._active&&i.active,i.active=s[this.ingKey]=i._active,e&&(i.first&&("bounds"in r&&(i._bounds=yk(r.bounds,i)),this.setup&&this.setup()),i.movement=C,this.computeOffset()));const[L,U]=i.offset,[[P,H],[N,z]]=i._bounds;i.overflow=[L<P?-1:L>H?1:0,U<N?-1:U>z?1:0],i._movementBound[0]=!!i.overflow[0]&&(i._movementBound[0]===!1?i._movement[0]:i._movementBound[0]),i._movementBound[1]=!!i.overflow[1]&&(i._movementBound[1]===!1?i._movement[1]:i._movementBound[1]);const W=i._active&&r.rubberband||[0,0];if(i.offset=function(j,[J,ie],[ee,re]){const[[se,ue],[fe,pe]]=j;return[Mee(J,se,ue,ee),Mee(ie,fe,pe,re)]}(i._bounds,i.offset,W),i.delta=Gh.sub(i.offset,I),this.computeMovement(),F&&(!i.last||l>32)){i.delta=Gh.sub(i.offset,I);const j=i.delta.map(Math.abs);Gh.addTo(i.distance,j),i.direction=i.delta.map(Math.sign),i._direction=i._delta.map(Math.sign),!i.first&&l>0&&(i.velocity=[j[0]/l,j[1]/l],i.timeDelta=l)}}emit(){const e=this.state,i=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const s=this.handler(Wa(Wa(Wa({},i),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class _De extends mDe{constructor(...e){super(...e),IA(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Gh.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Gh.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const i=this.state,r=this.config;if(!i.axis&&e){const s=typeof r.axisThreshold=="object"?r.axisThreshold[Cae(e)]:r.axisThreshold;i.axis=function([l,u],A){const g=Math.abs(l),_=Math.abs(u);return g>_&&g>A?"x":_>g&&_>A?"y":void 0}(i._movement,s)}i._blocked=(r.lockDirection||!!r.axis)&&!i.axis||!!r.axis&&r.axis!==i.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const vDe=a=>a,Sae={enabled:(a=!0)=>a,eventOptions:(a,e,i)=>Wa(Wa({},i.shared.eventOptions),a),preventDefault:(a=!1)=>a,triggerAllEvents:(a=!1)=>a,rubberband(a=0){switch(a){case!0:return[.15,.15];case!1:return[0,0];default:return Gh.toVector(a)}},from:a=>typeof a=="function"?a:a!=null?Gh.toVector(a):void 0,transform(a,e,i){const r=a||i.shared.transform;return this.hasCustomTransform=!!r,r||vDe},threshold:a=>Gh.toVector(a,0)},HT=Wa(Wa({},Sae),{},{axis(a,e,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold:(a=0)=>a,bounds(a={}){if(typeof a=="function")return l=>HT.bounds(a(l));if("current"in a)return()=>a.current;if(typeof HTMLElement=="function"&&a instanceof HTMLElement)return a;const{left:e=-1/0,right:i=1/0,top:r=-1/0,bottom:s=1/0}=a;return[[e,i],[r,s]]}}),kee={ArrowRight:(a,e=1)=>[a*e,0],ArrowLeft:(a,e=1)=>[-1*a*e,0],ArrowUp:(a,e=1)=>[0,-1*a*e],ArrowDown:(a,e=1)=>[0,a*e]},VI=typeof window<"u"&&window.document&&window.document.createElement;function Lee(){return VI&&"ontouchstart"in window}const yf={isBrowser:VI,gesture:function(){try{return"constructor"in GestureEvent}catch{return!1}}(),touch:Lee(),touchscreen:Lee()||VI&&window.navigator.maxTouchPoints>1,pointer:VI&&"onpointerdown"in window,pointerLock:VI&&"exitPointerLock"in window.document},Pee={mouse:0,touch:0,pen:8},yDe=Wa(Wa({},HT),{},{device(a,e,{pointer:{touch:i=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&yf.pointerLock,yf.touch&&i?"touch":this.pointerLock?"mouse":yf.pointer&&!s?"pointer":yf.touch?"touch":"mouse"},preventScrollAxis(a,e,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&a?250:void 0,yf.touchscreen&&i!==!1)return a||(i!==void 0?"y":void 0)},pointerCapture(a,e,{pointer:{capture:i=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&i},threshold(a,e,{filterTaps:i=!1,tapsThreshold:r=3,axis:s}){const l=Gh.toVector(a,i?r:s?1:0);return this.filterTaps=i,this.tapsThreshold=r,l},swipe({velocity:a=.5,distance:e=50,duration:i=250}={}){return{velocity:this.transform(Gh.toVector(a)),distance:this.transform(Gh.toVector(e)),duration:i}},delay(a=0){switch(a){case!0:return 180;case!1:return 0;default:return a}},axisThreshold:a=>a?Wa(Wa({},Pee),a):Pee,keyboardDisplacement:(a=10)=>a});Wa(Wa({},Sae),{},{device(a,e,{shared:i,pointer:{touch:r=!1}={}}){if(i.target&&!yf.touch&&yf.gesture)return"gesture";if(yf.touch&&r)return"touch";if(yf.touchscreen){if(yf.pointer)return"pointer";if(yf.touch)return"touch"}},bounds(a,e,{scaleBounds:i={},angleBounds:r={}}){const s=u=>{const A=Uee(yk(i,u),{min:-1/0,max:1/0});return[A.min,A.max]},l=u=>{const A=Uee(yk(r,u),{min:-1/0,max:1/0});return[A.min,A.max]};return typeof i!="function"&&typeof r!="function"?[s(),l()]:u=>[s(u),l(u)]},threshold(a,e,i){return this.lockDirection=i.axis==="lock",Gh.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey:a=>a===void 0?"ctrlKey":a,pinchOnWheel:(a=!0)=>a}),Wa(Wa({},HT),{},{mouseOnly:(a=!0)=>a}),Wa(Wa({},HT),{},{mouseOnly:(a=!0)=>a});const Bae=new Map,$H=new Map,bDe={key:"drag",engine:class extends _De{constructor(...a){super(...a),IA(this,"ingKey","dragging")}reset(){super.reset();const a=this.state;a._pointerId=void 0,a._pointerActive=!1,a._keyboardActive=!1,a._preventScroll=!1,a._delayed=!1,a.swipe=[0,0],a.tap=!1,a.canceled=!1,a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const e=a._bounds.getBoundingClientRect(),i=a.currentTarget.getBoundingClientRect(),r={left:e.left-i.left+a.offset[0],right:e.right-i.right+a.offset[0],top:e.top-i.top+a.offset[1],bottom:e.bottom-i.bottom+a.offset[1]};a._bounds=HT.bounds(r)}}cancel(){const a=this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(a){const e=this.config,i=this.state;if(a.buttons!=null&&(Array.isArray(e.pointerButtons)?!e.pointerButtons.includes(a.buttons):e.pointerButtons!==-1&&e.pointerButtons!==a.buttons))return;const r=this.ctrl.setEventIds(a);e.pointerCapture&&a.target.setPointerCapture(a.pointerId),r&&r.size>1&&i._pointerActive||(this.start(a),this.setupPointer(a),i._pointerId=h4(a),i._pointerActive=!0,this.computeValues(Fee(a)),this.computeInitial(),e.preventScrollAxis&&Cae(a)!=="mouse"?(i._active=!1,this.setupScrollPrevention(a)):e.delay>0?(this.setupDelayTrigger(a),e.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}startPointerDrag(a){const e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(a),this.emit()}pointerMove(a){const e=this.state,i=this.config;if(!e._pointerActive)return;const r=h4(a);if(e._pointerId!==void 0&&r!==e._pointerId)return;const s=Fee(a);return document.pointerLockElement===a.target?e._delta=[a.movementX,a.movementY]:(e._delta=Gh.sub(s,e._values),this.computeValues(s)),Gh.addTo(e._movement,e._delta),this.compute(a),e._delayed&&e.intentional?(this.timeoutStore.remove("dragDelay"),e.active=!1,void this.startPointerDrag(a)):i.preventScrollAxis&&!e._preventScroll?e.axis?e.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"?(e._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(a)):void 0:void this.emit()}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch{}const e=this.state,i=this.config;if(!e._active||!e._pointerActive)return;const r=h4(a);if(e._pointerId!==void 0&&r!==e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(a);const[s,l]=e._distance;if(e.tap=s<=i.tapsThreshold&&l<=i.tapsThreshold,e.tap&&i.filterTaps)e._force=!0;else{const[u,A]=e._delta,[g,_]=e._movement,[b,x]=i.swipe.velocity,[C,I]=i.swipe.distance,F=i.swipe.duration;if(e.elapsedTime<F){const L=Math.abs(u/e.timeDelta),U=Math.abs(A/e.timeDelta);L>b&&Math.abs(g)>C&&(e.swipe[0]=Math.sign(u)),U>x&&Math.abs(_)>I&&(e.swipe[1]=Math.sign(A))}}this.emit()}pointerClick(a){!this.state.tap&&a.detail>0&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const e=this.config,i=e.device;e.pointerLock&&a.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1,function(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}(a);const e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(a)},this.config.delay)}keyDown(a){const e=kee[a.key];if(e){const i=this.state,r=a.shiftKey?10:a.altKey?.1:1;this.start(a),i._delta=e(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Gh.addTo(i._movement,i._delta),this.compute(a),this.emit()}}keyUp(a){a.key in kee&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const e=this.config.device;a(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(a(e,"change",this.pointerMove.bind(this)),a(e,"end",this.pointerUp.bind(this)),a(e,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this))),this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:yDe};function wDe(a,e){if(a==null)return{};var i,r,s=function(u,A){if(u==null)return{};var g,_,b={},x=Object.keys(u);for(_=0;_<x.length;_++)g=x[_],A.indexOf(g)>=0||(b[g]=u[g]);return b}(a,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);for(r=0;r<l.length;r++)i=l[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(a,i)&&(s[i]=a[i])}return s}const xDe={target(a){if(a)return()=>"current"in a?a.current:a},enabled:(a=!0)=>a,window:(a=yf.isBrowser?window:void 0)=>a,eventOptions:({passive:a=!0,capture:e=!1}={})=>({passive:a,capture:e}),transform:a=>a},CDe=["target","eventOptions","window","enabled","transform"];function _U(a={},e){const i={};for(const[r,s]of Object.entries(e))switch(typeof s){case"function":i[r]=s.call(i,a[r],r,a);break;case"object":i[r]=_U(a[r],s);break;case"boolean":s&&(i[r]=a[r])}return i}class Iae{constructor(e,i){IA(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=i}add(e,i,r,s,l){const u=this._listeners,A=function(b,x=""){const C=xae[b];return b+(C&&C[x]||x)}(i,r),g=Wa(Wa({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),l);e.addEventListener(A,s,g);const _=()=>{e.removeEventListener(A,s,g),u.delete(_)};return u.add(_),_}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class EDe{constructor(){IA(this,"_timeouts",new Map)}add(e,i,r=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(i,r,...s))}remove(e){const i=this._timeouts.get(e);i&&window.clearTimeout(i)}clean(){this._timeouts.forEach(e=>{window.clearTimeout(e)}),this._timeouts.clear()}}class SDe{constructor(e){IA(this,"gestures",new Set),IA(this,"_targetEventStore",new Iae(this)),IA(this,"gestureEventStores",{}),IA(this,"gestureTimeoutStores",{}),IA(this,"handlers",{}),IA(this,"config",{}),IA(this,"pointerIds",new Set),IA(this,"touchIds",new Set),IA(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(i,r){r.drag&&UE(i,"drag"),r.wheel&&UE(i,"wheel"),r.scroll&&UE(i,"scroll"),r.move&&UE(i,"move"),r.pinch&&UE(i,"pinch"),r.hover&&UE(i,"hover")}(this,e)}setEventIds(e){return kL(e)?(this.touchIds=new Set(pDe(e)),this.touchIds):"pointerId"in e?(e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,i){this.handlers=e,this.nativeHandlers=i}applyConfig(e,i){this.config=function(r,s,l={}){const u=r,{target:A,eventOptions:g,window:_,enabled:b,transform:x}=u,C=wDe(u,CDe);if(l.shared=_U({target:A,eventOptions:g,window:_,enabled:b,transform:x},xDe),s){const I=$H.get(s);l[s]=_U(Wa({shared:l.shared},C),I)}else for(const I in C){const F=$H.get(I);F&&(l[I]=_U(Wa({shared:l.shared},C[I]),F))}return l}(e,i,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const i=this.config.shared,r={};let s;if(!i.target||(s=i.target(),s)){if(i.enabled){for(const u of this.gestures){const A=this.config[u],g=Oee(r,A.eventOptions,!!s);A.enabled&&new(Bae.get(u))(this,e,u).bind(g)}const l=Oee(r,i.eventOptions,!!s);for(const u in this.nativeHandlers)l(u,"",A=>this.nativeHandlers[u](Wa(Wa({},this.state.shared),{},{event:A,args:e})),void 0,!0)}for(const l in r)r[l]=gDe(...r[l]);if(!s)return r;for(const l in r){const{device:u,capture:A,passive:g}=ADe(l);this._targetEventStore.add(s,u,"",r[l],{capture:A,passive:g})}}}}function UE(a,e){a.gestures.add(e),a.gestureEventStores[e]=new Iae(a,e),a.gestureTimeoutStores[e]=new EDe}const Oee=(a,e,i)=>(r,s,l,u={},A=!1)=>{var g,_;const b=(g=u.capture)!==null&&g!==void 0?g:e.capture,x=(_=u.passive)!==null&&_!==void 0?_:e.passive;let C=A?r:hDe(r,s,b);i&&x&&(C+="Passive"),a[C]=a[C]||[],a[C].push(l)};function BDe(a,e){var i;return i=bDe,Bae.set(i.key,i.engine),$H.set(i.key,i.resolver),function(r,s={},l,u){const A=Ye.useMemo(()=>new SDe(r),[]);if(A.applyHandlers(r,u),A.applyConfig(s,l),Ye.useEffect(A.effect.bind(A)),Ye.useEffect(()=>A.clean.bind(A),[]),s.target===void 0)return A.bind.bind(A)}({drag:a},e||{},"drag")}function Tv(a,e,{checkForDefaultPrevented:i=!0}={}){return function(r){if(a==null||a(r),i===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Tae(...a){return e=>a.forEach(i=>function(r,s){typeof r=="function"?r(s):r!=null&&(r.current=s)}(i,e))}function QS(...a){return Ce.useCallback(Tae(...a),a)}function Mae(a,e=[]){let i=[];const r=()=>{const s=i.map(l=>Ce.createContext(l));return function(l){const u=(l==null?void 0:l[a])||s;return Ce.useMemo(()=>({[`__scope${a}`]:{...l,[a]:u}}),[l,u])}};return r.scopeName=a,[function(s,l){const u=Ce.createContext(l),A=i.length;function g(_){const{scope:b,children:x,...C}=_,I=(b==null?void 0:b[a][A])||u,F=Ce.useMemo(()=>C,Object.values(C));return Ce.createElement(I.Provider,{value:F},x)}return i=[...i,l],g.displayName=s+"Provider",[g,function(_,b){const x=(b==null?void 0:b[a][A])||u,C=Ce.useContext(x);if(C)return C;if(l!==void 0)return l;throw new Error(`\`${_}\` must be used within \`${s}\``)}]},IDe(r,...e)]}function IDe(...a){const e=a[0];if(a.length===1)return e;const i=()=>{const r=a.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const l=r.reduce((u,{useScope:A,scopeName:g})=>({...u,...A(s)[`__scope${g}`]}),{});return Ce.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return i.scopeName=e.scopeName,i}const Rae=Ce.forwardRef((a,e)=>{const{children:i,...r}=a,s=Ce.Children.toArray(i),l=s.find(TDe);if(l){const u=l.props.children,A=s.map(g=>g===l?Ce.Children.count(u)>1?Ce.Children.only(null):Ce.isValidElement(u)?u.props.children:null:g);return Ce.createElement(WH,Fa({},r,{ref:e}),Ce.isValidElement(u)?Ce.cloneElement(u,void 0,A):null)}return Ce.createElement(WH,Fa({},r,{ref:e}),i)});Rae.displayName="Slot";const WH=Ce.forwardRef((a,e)=>{const{children:i,...r}=a;return Ce.isValidElement(i)?Ce.cloneElement(i,{...MDe(r,i.props),ref:Tae(e,i.ref)}):Ce.Children.count(i)>1?Ce.Children.only(null):null});WH.displayName="SlotClone";const Dae=({children:a})=>Ce.createElement(Ce.Fragment,null,a);function TDe(a){return Ce.isValidElement(a)&&a.type===Dae}function MDe(a,e){const i={...e};for(const r in e){const s=a[r],l=e[r];/^on[A-Z]/.test(r)?s&&l?i[r]=(...u)=>{l(...u),s(...u)}:s&&(i[r]=s):r==="style"?i[r]={...s,...l}:r==="className"&&(i[r]=[s,l].filter(Boolean).join(" "))}return{...a,...i}}const Ow=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,e)=>{const i=Ce.forwardRef((r,s)=>{const{asChild:l,...u}=r,A=l?Rae:e;return Ce.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),Ce.createElement(A,Fa({},u,{ref:s}))});return i.displayName=`Primitive.${e}`,{...a,[e]:i}},{});function d4(a){const e=Ce.useRef(a);return Ce.useEffect(()=>{e.current=a}),Ce.useMemo(()=>(...i)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...i)},[])}const jH="dismissableLayer.update",RDe="dismissableLayer.pointerDownOutside",DDe="dismissableLayer.focusOutside";let Qee;const FDe=Ce.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),UDe=Ce.forwardRef((a,e)=>{var i;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:A,onDismiss:g,..._}=a,b=Ce.useContext(FDe),[x,C]=Ce.useState(null),I=(i=x==null?void 0:x.ownerDocument)!==null&&i!==void 0?i:globalThis==null?void 0:globalThis.document,[,F]=Ce.useState({}),L=QS(e,ie=>C(ie)),U=Array.from(b.layers),[P]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),H=U.indexOf(P),N=x?U.indexOf(x):-1,z=b.layersWithOutsidePointerEventsDisabled.size>0,W=N>=H,j=function(ie,ee=globalThis==null?void 0:globalThis.document){const re=d4(ie),se=Ce.useRef(!1),ue=Ce.useRef(()=>{});return Ce.useEffect(()=>{const fe=xe=>{if(xe.target&&!se.current){let ce=function(){Hee(RDe,re,_e,{discrete:!0})};const _e={originalEvent:xe};xe.pointerType==="touch"?(ee.removeEventListener("click",ue.current),ue.current=ce,ee.addEventListener("click",ue.current,{once:!0})):ce()}se.current=!1},pe=window.setTimeout(()=>{ee.addEventListener("pointerdown",fe)},0);return()=>{window.clearTimeout(pe),ee.removeEventListener("pointerdown",fe),ee.removeEventListener("click",ue.current)}},[ee,re]),{onPointerDownCapture:()=>se.current=!0}}(ie=>{const ee=ie.target,re=[...b.branches].some(se=>se.contains(ee));W&&!re&&(l==null||l(ie),A==null||A(ie),ie.defaultPrevented||g==null||g())},I),J=function(ie,ee=globalThis==null?void 0:globalThis.document){const re=d4(ie),se=Ce.useRef(!1);return Ce.useEffect(()=>{const ue=fe=>{fe.target&&!se.current&&Hee(DDe,re,{originalEvent:fe},{discrete:!1})};return ee.addEventListener("focusin",ue),()=>ee.removeEventListener("focusin",ue)},[ee,re]),{onFocusCapture:()=>se.current=!0,onBlurCapture:()=>se.current=!1}}(ie=>{const ee=ie.target;[...b.branches].some(re=>re.contains(ee))||(u==null||u(ie),A==null||A(ie),ie.defaultPrevented||g==null||g())},I);return function(ie,ee=globalThis==null?void 0:globalThis.document){const re=d4(ie);Ce.useEffect(()=>{const se=ue=>{ue.key==="Escape"&&re(ue)};return ee.addEventListener("keydown",se),()=>ee.removeEventListener("keydown",se)},[re,ee])}(ie=>{N===b.layers.size-1&&(s==null||s(ie),!ie.defaultPrevented&&g&&(ie.preventDefault(),g()))},I),Ce.useEffect(()=>{if(x)return r&&(b.layersWithOutsidePointerEventsDisabled.size===0&&(Qee=I.body.style.pointerEvents,I.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(x)),b.layers.add(x),Nee(),()=>{r&&b.layersWithOutsidePointerEventsDisabled.size===1&&(I.body.style.pointerEvents=Qee)}},[x,I,r,b]),Ce.useEffect(()=>()=>{x&&(b.layers.delete(x),b.layersWithOutsidePointerEventsDisabled.delete(x),Nee())},[x,b]),Ce.useEffect(()=>{const ie=()=>F({});return document.addEventListener(jH,ie),()=>document.removeEventListener(jH,ie)},[]),Ce.createElement(Ow.div,Fa({},_,{ref:L,style:{pointerEvents:z?W?"auto":"none":void 0,...a.style},onFocusCapture:Tv(a.onFocusCapture,J.onFocusCapture),onBlurCapture:Tv(a.onBlurCapture,J.onBlurCapture),onPointerDownCapture:Tv(a.onPointerDownCapture,j.onPointerDownCapture)}))});function Nee(){const a=new CustomEvent(jH);document.dispatchEvent(a)}function Hee(a,e,i,{discrete:r}){const s=i.originalEvent.target,l=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:i});e&&s.addEventListener(a,e,{once:!0}),r?function(u,A){u&&FL.flushSync(()=>u.dispatchEvent(A))}(s,l):s.dispatchEvent(l)}const kDe=globalThis!=null&&globalThis.document?Ce.useLayoutEffect:()=>{},LDe=F0e.useId||(()=>{});let PDe=0;function $w(a){return a.split("-")[0]}function hM(a){return a.split("-")[1]}function NS(a){return["top","bottom"].includes($w(a))?"x":"y"}function k7(a){return a==="y"?"height":"width"}function zee(a,e,i){let{reference:r,floating:s}=a;const l=r.x+r.width/2-s.width/2,u=r.y+r.height/2-s.height/2,A=NS(e),g=k7(A),_=r[g]/2-s[g]/2,b=A==="x";let x;switch($w(e)){case"top":x={x:l,y:r.y-s.height};break;case"bottom":x={x:l,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:u};break;case"left":x={x:r.x-s.width,y:u};break;default:x={x:r.x,y:r.y}}switch(hM(e)){case"start":x[A]-=_*(i&&b?-1:1);break;case"end":x[A]+=_*(i&&b?-1:1)}return x}function Fae(a){return typeof a!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(a):{top:a,right:a,bottom:a,left:a}}function bk(a){return{...a,top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height}}async function zT(a,e){var i;e===void 0&&(e={});const{x:r,y:s,platform:l,rects:u,elements:A,strategy:g}=a,{boundary:_="clippingAncestors",rootBoundary:b="viewport",elementContext:x="floating",altBoundary:C=!1,padding:I=0}=e,F=Fae(I),L=A[C?x==="floating"?"reference":"floating":x],U=bk(await l.getClippingRect({element:(i=await(l.isElement==null?void 0:l.isElement(L)))==null||i?L:L.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(A.floating)),boundary:_,rootBoundary:b,strategy:g})),P=bk(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x==="floating"?{...u.floating,x:r,y:s}:u.reference,offsetParent:await(l.getOffsetParent==null?void 0:l.getOffsetParent(A.floating)),strategy:g}):u[x]);return{top:U.top-P.top+F.top,bottom:P.bottom-U.bottom+F.bottom,left:U.left-P.left+F.left,right:P.right-U.right+F.right}}const ODe=Math.min,nw=Math.max;function KH(a,e,i){return nw(a,ODe(e,i))}const Gee=a=>({name:"arrow",options:a,async fn(e){const{element:i,padding:r=0}=a??{},{x:s,y:l,placement:u,rects:A,platform:g}=e;if(i==null)return{};const _=Fae(r),b={x:s,y:l},x=NS(u),C=hM(u),I=k7(x),F=await g.getDimensions(i),L=x==="y"?"top":"left",U=x==="y"?"bottom":"right",P=A.reference[I]+A.reference[x]-b[x]-A.floating[I],H=b[x]-A.reference[x],N=await(g.getOffsetParent==null?void 0:g.getOffsetParent(i));let z=N?x==="y"?N.clientHeight||0:N.clientWidth||0:0;z===0&&(z=A.floating[I]);const W=P/2-H/2,j=_[L],J=z-F[I]-_[U],ie=z/2-F[I]/2+W,ee=KH(j,ie,J),re=(C==="start"?_[L]:_[U])>0&&ie!==ee&&A.reference[I]<=A.floating[I]?ie<j?j-ie:J-ie:0;return{[x]:b[x]-re,data:{[x]:ee,centerOffset:ie-ee}}}}),QDe={left:"right",right:"left",bottom:"top",top:"bottom"};function LF(a){return a.replace(/left|right|bottom|top/g,e=>QDe[e])}const NDe={start:"end",end:"start"};function Vee(a){return a.replace(/start|end/g,e=>NDe[e])}const HDe=["top","right","bottom","left"],zDe=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(e){var i;const{placement:r,middlewareData:s,rects:l,initialPlacement:u,platform:A,elements:g}=e,{mainAxis:_=!0,crossAxis:b=!0,fallbackPlacements:x,fallbackStrategy:C="bestFit",flipAlignment:I=!0,...F}=a,L=$w(r),U=x||(L===u||!I?[LF(u)]:function(ie){const ee=LF(ie);return[Vee(ie),ee,Vee(ee)]}(u)),P=[u,...U],H=await zT(e,F),N=[];let z=((i=s.flip)==null?void 0:i.overflows)||[];if(_&&N.push(H[L]),b){const{main:ie,cross:ee}=function(re,se,ue){ue===void 0&&(ue=!1);const fe=hM(re),pe=NS(re),xe=k7(pe);let ce=pe==="x"?fe===(ue?"end":"start")?"right":"left":fe==="start"?"bottom":"top";return se.reference[xe]>se.floating[xe]&&(ce=LF(ce)),{main:ce,cross:LF(ce)}}(r,l,await(A.isRTL==null?void 0:A.isRTL(g.floating)));N.push(H[ie],H[ee])}if(z=[...z,{placement:r,overflows:N}],!N.every(ie=>ie<=0)){var W,j;const ie=((W=(j=s.flip)==null?void 0:j.index)!=null?W:0)+1,ee=P[ie];if(ee)return{data:{index:ie,overflows:z},reset:{placement:ee}};let re="bottom";switch(C){case"bestFit":{var J;const se=(J=z.map(ue=>[ue,ue.overflows.filter(fe=>fe>0).reduce((fe,pe)=>fe+pe,0)]).sort((ue,fe)=>ue[1]-fe[1])[0])==null?void 0:J[0].placement;se&&(re=se);break}case"initialPlacement":re=u}if(r!==re)return{reset:{placement:re}}}return{}}}};function qee(a,e){return{top:a.top-e.height,right:a.right-e.width,bottom:a.bottom-e.height,left:a.left-e.width}}function $ee(a){return HDe.some(e=>a[e]>=0)}const GDe=function(a){let{strategy:e="referenceHidden",...i}=a===void 0?{}:a;return{name:"hide",async fn(r){const{rects:s}=r;switch(e){case"referenceHidden":{const l=qee(await zT(r,{...i,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:$ee(l)}}}case"escaped":{const l=qee(await zT(r,{...i,altBoundary:!0}),s.floating);return{data:{escapedOffsets:l,escaped:$ee(l)}}}default:return{}}}}},VDe=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(e){const{x:i,y:r}=e,s=await async function(l,u){const{placement:A,platform:g,elements:_}=l,b=await(g.isRTL==null?void 0:g.isRTL(_.floating)),x=$w(A),C=hM(A),I=NS(A)==="x",F=["left","top"].includes(x)?-1:1,L=b&&I?-1:1,U=typeof u=="function"?u(l):u;let{mainAxis:P,crossAxis:H,alignmentAxis:N}=typeof U=="number"?{mainAxis:U,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...U};return C&&typeof N=="number"&&(H=C==="end"?-1*N:N),I?{x:H*L,y:P*F}:{x:P*F,y:H*L}}(e,a);return{x:i+s.x,y:r+s.y,data:s}}}};function Uae(a){return a==="x"?"y":"x"}const qDe=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(e){const{x:i,y:r,placement:s}=e,{mainAxis:l=!0,crossAxis:u=!1,limiter:A={fn:U=>{let{x:P,y:H}=U;return{x:P,y:H}}},...g}=a,_={x:i,y:r},b=await zT(e,g),x=NS($w(s)),C=Uae(x);let I=_[x],F=_[C];if(l){const U=x==="y"?"bottom":"right";I=KH(I+b[x==="y"?"top":"left"],I,I-b[U])}if(u){const U=C==="y"?"bottom":"right";F=KH(F+b[C==="y"?"top":"left"],F,F-b[U])}const L=A.fn({...e,[x]:I,[C]:F});return{...L,data:{x:L.x-i,y:L.y-r}}}}},$De=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(e){const{placement:i,rects:r,platform:s,elements:l}=e,{apply:u,...A}=a,g=await zT(e,A),_=$w(i),b=hM(i);let x,C;_==="top"||_==="bottom"?(x=_,C=b===(await(s.isRTL==null?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(C=_,x=b==="end"?"top":"bottom");const I=nw(g.left,0),F=nw(g.right,0),L=nw(g.top,0),U=nw(g.bottom,0),P={availableHeight:r.floating.height-(["left","right"].includes(i)?2*(L!==0||U!==0?L+U:nw(g.top,g.bottom)):g[x]),availableWidth:r.floating.width-(["top","bottom"].includes(i)?2*(I!==0||F!==0?I+F:nw(g.left,g.right)):g[C])},H=await s.getDimensions(l.floating);u==null||u({...e,...P});const N=await s.getDimensions(l.floating);return H.width!==N.width||H.height!==N.height?{reset:{rects:!0}}:{}}}};function kae(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function Wv(a){if(a==null)return window;if(!kae(a)){const e=a.ownerDocument;return e&&e.defaultView||window}return a}function dM(a){return Wv(a).getComputedStyle(a)}function Nv(a){return kae(a)?"":a?(a.nodeName||"").toLowerCase():""}function Lae(){const a=navigator.userAgentData;return a!=null&&a.brands?a.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Ym(a){return a instanceof Wv(a).HTMLElement}function Zy(a){return a instanceof Wv(a).Element}function L7(a){return typeof ShadowRoot>"u"?!1:a instanceof Wv(a).ShadowRoot||a instanceof ShadowRoot}function LL(a){const{overflow:e,overflowX:i,overflowY:r}=dM(a);return/auto|scroll|overlay|hidden/.test(e+r+i)}function WDe(a){return["table","td","th"].includes(Nv(a))}function Wee(a){const e=/firefox/i.test(Lae()),i=dM(a);return i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].includes(i.willChange)||e&&i.willChange==="filter"||e&&!!i.filter&&i.filter!=="none"}function Pae(){return!/^((?!chrome|android).)*safari/i.test(Lae())}const jee=Math.min,iT=Math.max,wk=Math.round;function Hv(a,e,i){var r,s,l,u;e===void 0&&(e=!1),i===void 0&&(i=!1);const A=a.getBoundingClientRect();let g=1,_=1;e&&Ym(a)&&(g=a.offsetWidth>0&&wk(A.width)/a.offsetWidth||1,_=a.offsetHeight>0&&wk(A.height)/a.offsetHeight||1);const b=Zy(a)?Wv(a):window,x=!Pae()&&i,C=(A.left+(x&&(r=(s=b.visualViewport)==null?void 0:s.offsetLeft)!=null?r:0))/g,I=(A.top+(x&&(l=(u=b.visualViewport)==null?void 0:u.offsetTop)!=null?l:0))/_,F=A.width/g,L=A.height/_;return{width:F,height:L,top:I,right:C+F,bottom:I+L,left:C,x:C,y:I}}function Vy(a){return(e=a,(e instanceof Wv(e).Node?a.ownerDocument:a.document)||window.document).documentElement;var e}function PL(a){return Zy(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function Oae(a){return Hv(Vy(a)).left+PL(a).scrollLeft}function jDe(a,e,i){const r=Ym(e),s=Vy(e),l=Hv(a,r&&function(g){const _=Hv(g);return wk(_.width)!==g.offsetWidth||wk(_.height)!==g.offsetHeight}(e),i==="fixed");let u={scrollLeft:0,scrollTop:0};const A={x:0,y:0};if(r||!r&&i!=="fixed")if((Nv(e)!=="body"||LL(s))&&(u=PL(e)),Ym(e)){const g=Hv(e,!0);A.x=g.x+e.clientLeft,A.y=g.y+e.clientTop}else s&&(A.x=Oae(s));return{x:l.left+u.scrollLeft-A.x,y:l.top+u.scrollTop-A.y,width:l.width,height:l.height}}function Qae(a){return Nv(a)==="html"?a:a.assignedSlot||a.parentNode||(L7(a)?a.host:null)||Vy(a)}function Kee(a){return Ym(a)&&getComputedStyle(a).position!=="fixed"?a.offsetParent:null}function XH(a){const e=Wv(a);let i=Kee(a);for(;i&&WDe(i)&&getComputedStyle(i).position==="static";)i=Kee(i);return i&&(Nv(i)==="html"||Nv(i)==="body"&&getComputedStyle(i).position==="static"&&!Wee(i))?e:i||function(r){let s=Qae(r);for(L7(s)&&(s=s.host);Ym(s)&&!["html","body"].includes(Nv(s));){if(Wee(s))return s;s=s.parentNode}return null}(a)||e}function Xee(a){if(Ym(a))return{width:a.offsetWidth,height:a.offsetHeight};const e=Hv(a);return{width:e.width,height:e.height}}function Nae(a){const e=Qae(a);return["html","body","#document"].includes(Nv(e))?a.ownerDocument.body:Ym(e)&&LL(e)?e:Nae(e)}function xk(a,e){var i;e===void 0&&(e=[]);const r=Nae(a),s=r===((i=a.ownerDocument)==null?void 0:i.body),l=Wv(r),u=s?[l].concat(l.visualViewport||[],LL(r)?r:[]):r,A=e.concat(u);return s?A:A.concat(xk(u))}function Yee(a,e,i){return e==="viewport"?bk(function(r,s){const l=Wv(r),u=Vy(r),A=l.visualViewport;let g=u.clientWidth,_=u.clientHeight,b=0,x=0;if(A){g=A.width,_=A.height;const C=Pae();(C||!C&&s==="fixed")&&(b=A.offsetLeft,x=A.offsetTop)}return{width:g,height:_,x:b,y:x}}(a,i)):Zy(e)?function(r,s){const l=Hv(r,!1,s==="fixed"),u=l.top+r.clientTop,A=l.left+r.clientLeft;return{top:u,left:A,x:A,y:u,right:A+r.clientWidth,bottom:u+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,i):bk(function(r){var s;const l=Vy(r),u=PL(r),A=(s=r.ownerDocument)==null?void 0:s.body,g=iT(l.scrollWidth,l.clientWidth,A?A.scrollWidth:0,A?A.clientWidth:0),_=iT(l.scrollHeight,l.clientHeight,A?A.scrollHeight:0,A?A.clientHeight:0);let b=-u.scrollLeft+Oae(r);const x=-u.scrollTop;return dM(A||l).direction==="rtl"&&(b+=iT(l.clientWidth,A?A.clientWidth:0)-g),{width:g,height:_,x:b,y:x}}(Vy(a)))}function KDe(a){const e=xk(a),i=["absolute","fixed"].includes(dM(a).position)&&Ym(a)?XH(a):a;return Zy(i)?e.filter(r=>Zy(r)&&function(s,l){const u=l.getRootNode==null?void 0:l.getRootNode();if(s.contains(l))return!0;if(u&&L7(u)){let A=l;do{if(A&&s===A)return!0;A=A.parentNode||A.host}while(A)}return!1}(r,i)&&Nv(r)!=="body"):[]}const XDe={getClippingRect:function(a){let{element:e,boundary:i,rootBoundary:r,strategy:s}=a;const l=[...i==="clippingAncestors"?KDe(e):[].concat(i),r],u=l[0],A=l.reduce((g,_)=>{const b=Yee(e,_,s);return g.top=iT(b.top,g.top),g.right=jee(b.right,g.right),g.bottom=jee(b.bottom,g.bottom),g.left=iT(b.left,g.left),g},Yee(e,u,s));return{width:A.right-A.left,height:A.bottom-A.top,x:A.left,y:A.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let{rect:e,offsetParent:i,strategy:r}=a;const s=Ym(i),l=Vy(i);if(i===l)return e;let u={scrollLeft:0,scrollTop:0};const A={x:0,y:0};if((s||!s&&r!=="fixed")&&((Nv(i)!=="body"||LL(l))&&(u=PL(i)),Ym(i))){const g=Hv(i,!0);A.x=g.x+i.clientLeft,A.y=g.y+i.clientTop}return{...e,x:e.x-u.scrollLeft+A.x,y:e.y-u.scrollTop+A.y}},isElement:Zy,getDimensions:Xee,getOffsetParent:XH,getDocumentElement:Vy,getElementRects:a=>{let{reference:e,floating:i,strategy:r}=a;return{reference:jDe(e,XH(i),r),floating:{...Xee(i),x:0,y:0}}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>dM(a).direction==="rtl"};function YDe(a,e,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:u=!0,animationFrame:A=!1}=r,g=s&&!A,_=l&&!A,b=g||_?[...Zy(a)?xk(a):[],...xk(e)]:[];b.forEach(F=>{g&&F.addEventListener("scroll",i,{passive:!0}),_&&F.addEventListener("resize",i)});let x,C=null;if(u){let F=!0;C=new ResizeObserver(()=>{F||i(),F=!1}),Zy(a)&&!A&&C.observe(a),C.observe(e)}let I=A?Hv(a):null;return A&&function F(){const L=Hv(a);!I||L.x===I.x&&L.y===I.y&&L.width===I.width&&L.height===I.height||i(),I=L,x=requestAnimationFrame(F)}(),i(),()=>{var F;b.forEach(L=>{g&&L.removeEventListener("scroll",i),_&&L.removeEventListener("resize",i)}),(F=C)==null||F.disconnect(),C=null,A&&cancelAnimationFrame(x)}}const JDe=(a,e,i)=>(async(r,s,l)=>{const{placement:u="bottom",strategy:A="absolute",middleware:g=[],platform:_}=l,b=await(_.isRTL==null?void 0:_.isRTL(s));let x=await _.getElementRects({reference:r,floating:s,strategy:A}),{x:C,y:I}=zee(x,u,b),F=u,L={},U=0;for(let P=0;P<g.length;P++){const{name:H,fn:N}=g[P],{x:z,y:W,data:j,reset:J}=await N({x:C,y:I,initialPlacement:u,placement:F,strategy:A,middlewareData:L,rects:x,platform:_,elements:{reference:r,floating:s}});C=z??C,I=W??I,L={...L,[H]:{...L[H],...j}},J&&U<=50&&(U++,typeof J=="object"&&(J.placement&&(F=J.placement),J.rects&&(x=J.rects===!0?await _.getElementRects({reference:r,floating:s,strategy:A}):J.rects),{x:C,y:I}=zee(x,F,b)),P=-1)}return{x:C,y:I,placement:F,strategy:A,middlewareData:L}})(a,e,{platform:XDe,...i});var A4=typeof document<"u"?Ce.useLayoutEffect:Ce.useEffect;function YH(a,e){if(a===e)return!0;if(typeof a!=typeof e)return!1;if(typeof a=="function"&&a.toString()===e.toString())return!0;let i,r,s;if(a&&e&&typeof a=="object"){if(Array.isArray(a)){if(i=a.length,i!=e.length)return!1;for(r=i;r--!=0;)if(!YH(a[r],e[r]))return!1;return!0}if(s=Object.keys(a),i=s.length,i!==Object.keys(e).length)return!1;for(r=i;r--!=0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=i;r--!=0;){const l=s[r];if((l!=="_owner"||!a.$$typeof)&&!YH(a[l],e[l]))return!1}return!0}return a!=a&&e!=e}function ZDe(a){let{middleware:e,placement:i="bottom",strategy:r="absolute",whileElementsMounted:s}=a===void 0?{}:a;const l=Ce.useRef(null),u=Ce.useRef(null),A=function(N){const z=Ce.useRef(N);return A4(()=>{z.current=N}),z}(s),g=Ce.useRef(null),[_,b]=Ce.useState({x:null,y:null,strategy:r,placement:i,middlewareData:{}}),[x,C]=Ce.useState(e);YH(x==null?void 0:x.map(N=>{let{options:z}=N;return z}),e==null?void 0:e.map(N=>{let{options:z}=N;return z}))||C(e);const I=Ce.useCallback(()=>{l.current&&u.current&&JDe(l.current,u.current,{middleware:x,placement:i,strategy:r}).then(N=>{F.current&&FL.flushSync(()=>{b(N)})})},[x,i,r]);A4(()=>{F.current&&I()},[I]);const F=Ce.useRef(!1);A4(()=>(F.current=!0,()=>{F.current=!1}),[]);const L=Ce.useCallback(()=>{if(typeof g.current=="function"&&(g.current(),g.current=null),l.current&&u.current)if(A.current){const N=A.current(l.current,u.current,I);g.current=N}else I()},[I,A]),U=Ce.useCallback(N=>{l.current=N,L()},[L]),P=Ce.useCallback(N=>{u.current=N,L()},[L]),H=Ce.useMemo(()=>({reference:l,floating:u}),[]);return Ce.useMemo(()=>({..._,update:I,refs:H,reference:U,floating:P}),[_,I,H,U,P])}const eFe=a=>{const{element:e,padding:i}=a;return{name:"arrow",options:a,fn(r){return s=e,Object.prototype.hasOwnProperty.call(s,"current")?e.current!=null?Gee({element:e.current,padding:i}).fn(r):{}:e?Gee({element:e,padding:i}).fn(r):{};var s}}},tFe=Ce.forwardRef((a,e)=>{const{children:i,width:r=10,height:s=5,...l}=a;return Ce.createElement(Ow.svg,Fa({},l,{ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?i:Ce.createElement("polygon",{points:"0,0 30,0 15,10"}))}),iFe=tFe,SI=globalThis!=null&&globalThis.document?Ce.useLayoutEffect:()=>{},Hae="Popper",[P7,zae]=Mae(Hae),[nFe,Gae]=P7(Hae),rFe=Ce.forwardRef((a,e)=>{const{__scopePopper:i,virtualRef:r,...s}=a,l=Gae("PopperAnchor",i),u=Ce.useRef(null),A=QS(e,u);return Ce.useEffect(()=>{l.onAnchorChange((r==null?void 0:r.current)||u.current)}),r?null:Ce.createElement(Ow.div,Fa({},s,{ref:A}))}),Ck="PopperContent",[sFe,oFe]=P7(Ck),[aFe,lFe]=P7(Ck,{hasParent:!1,positionUpdateFns:new Set}),cFe=Ce.forwardRef((a,e)=>{var i,r,s,l,u,A,g,_;const{__scopePopper:b,side:x="bottom",sideOffset:C=0,align:I="center",alignOffset:F=0,arrowPadding:L=0,collisionBoundary:U=[],collisionPadding:P=0,sticky:H="partial",hideWhenDetached:N=!1,avoidCollisions:z=!0,onPlaced:W,...j}=a,J=Gae(Ck,b),[ie,ee]=Ce.useState(null),re=QS(e,$e=>ee($e)),[se,ue]=Ce.useState(null),fe=function($e){const[Ct,wt]=Ce.useState(void 0);return SI(()=>{if($e){wt({width:$e.offsetWidth,height:$e.offsetHeight});const ft=new ResizeObserver(Ot=>{if(!Array.isArray(Ot)||!Ot.length)return;const Gt=Ot[0];let si,$t;if("borderBoxSize"in Gt){const ti=Gt.borderBoxSize,gi=Array.isArray(ti)?ti[0]:ti;si=gi.inlineSize,$t=gi.blockSize}else si=$e.offsetWidth,$t=$e.offsetHeight;wt({width:si,height:$t})});return ft.observe($e,{box:"border-box"}),()=>ft.unobserve($e)}wt(void 0)},[$e]),Ct}(se),pe=(i=fe==null?void 0:fe.width)!==null&&i!==void 0?i:0,xe=(r=fe==null?void 0:fe.height)!==null&&r!==void 0?r:0,ce=x+(I!=="center"?"-"+I:""),_e=typeof P=="number"?P:{top:0,right:0,bottom:0,left:0,...P},ye=Array.isArray(U)?U:[U],Oe=ye.length>0,ge={padding:_e,boundary:ye.filter(pFe),altBoundary:Oe},{reference:Ee,floating:ke,strategy:je,x:Ie,y:ze,placement:ht,middlewareData:lt,update:yt}=ZDe({strategy:"fixed",placement:ce,whileElementsMounted:YDe,middleware:[fFe(),VDe({mainAxis:C+xe,alignmentAxis:F}),z?qDe({mainAxis:!0,crossAxis:!1,limiter:H==="partial"?(Nt===void 0&&(Nt={}),{options:Nt,fn($e){const{x:Ct,y:wt,placement:ft,rects:Ot,middlewareData:Gt}=$e,{offset:si=0,mainAxis:$t=!0,crossAxis:ti=!0}=Nt,gi={x:Ct,y:wt},mi=NS(ft),Oi=Uae(mi);let Bi=gi[mi],ln=gi[Oi];const Ji=typeof si=="function"?si({...Ot,placement:ft}):si,Vi=typeof Ji=="number"?{mainAxis:Ji,crossAxis:0}:{mainAxis:0,crossAxis:0,...Ji};if($t){const Mi=mi==="y"?"height":"width",Ii=Ot.reference[mi]-Ot.floating[Mi]+Vi.mainAxis,Fi=Ot.reference[mi]+Ot.reference[Mi]-Vi.mainAxis;Bi<Ii?Bi=Ii:Bi>Fi&&(Bi=Fi)}if(ti){var at,Ti,Pt,Xt;const Mi=mi==="y"?"width":"height",Ii=["top","left"].includes($w(ft)),Fi=Ot.reference[Oi]-Ot.floating[Mi]+(Ii&&(at=(Ti=Gt.offset)==null?void 0:Ti[Oi])!=null?at:0)+(Ii?0:Vi.crossAxis),vn=Ot.reference[Oi]+Ot.reference[Mi]+(Ii?0:(Pt=(Xt=Gt.offset)==null?void 0:Xt[Oi])!=null?Pt:0)-(Ii?Vi.crossAxis:0);ln<Fi?ln=Fi:ln>vn&&(ln=vn)}return{[mi]:Bi,[Oi]:ln}}}):void 0,...ge}):void 0,se?eFe({element:se,padding:L}):void 0,z?zDe({...ge}):void 0,$De({...ge,apply:({elements:$e,availableWidth:Ct,availableHeight:wt})=>{$e.floating.style.setProperty("--radix-popper-available-width",`${Ct}px`),$e.floating.style.setProperty("--radix-popper-available-height",`${wt}px`)}}),gFe({arrowWidth:pe,arrowHeight:xe}),N?GDe({strategy:"referenceHidden"}):void 0].filter(AFe)});var Nt;SI(()=>{Ee(J.anchor)},[Ee,J.anchor]);const zt=Ie!==null&&ze!==null,[ei,it]=Vae(ht),Dt=function($e){const Ct=Ce.useRef($e);return Ce.useEffect(()=>{Ct.current=$e}),Ce.useMemo(()=>(...wt)=>{var ft;return(ft=Ct.current)===null||ft===void 0?void 0:ft.call(Ct,...wt)},[])}(W);SI(()=>{zt&&(Dt==null||Dt())},[zt,Dt]);const Be=(s=lt.arrow)===null||s===void 0?void 0:s.x,li=(l=lt.arrow)===null||l===void 0?void 0:l.y,bt=((u=lt.arrow)===null||u===void 0?void 0:u.centerOffset)!==0,[Wt,qe]=Ce.useState();SI(()=>{ie&&qe(window.getComputedStyle(ie).zIndex)},[ie]);const{hasParent:pt,positionUpdateFns:At}=lFe(Ck,b),Se=!pt;Ce.useLayoutEffect(()=>{if(!Se)return At.add(yt),()=>{At.delete(yt)}},[Se,At,yt]),SI(()=>{Se&&zt&&Array.from(At).reverse().forEach($e=>requestAnimationFrame($e))},[Se,zt,At]);const me={"data-side":ei,"data-align":it,...j,ref:re,style:{...j.style,animation:zt?void 0:"none",opacity:(A=lt.hide)!==null&&A!==void 0&&A.referenceHidden?0:void 0}};return Ce.createElement("div",{ref:ke,"data-radix-popper-content-wrapper":"",style:{position:je,left:0,top:0,transform:zt?`translate3d(${Math.round(Ie)}px, ${Math.round(ze)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Wt,"--radix-popper-transform-origin":[(g=lt.transformOrigin)===null||g===void 0?void 0:g.x,(_=lt.transformOrigin)===null||_===void 0?void 0:_.y].join(" ")},dir:a.dir},Ce.createElement(sFe,{scope:b,placedSide:ei,onArrowChange:ue,arrowX:Be,arrowY:li,shouldHideArrow:bt},Se?Ce.createElement(aFe,{scope:b,hasParent:!0,positionUpdateFns:At},Ce.createElement(Ow.div,me)):Ce.createElement(Ow.div,me)))}),uFe="PopperArrow",hFe={top:"bottom",right:"left",bottom:"top",left:"right"},dFe=Ce.forwardRef(function(a,e){const{__scopePopper:i,...r}=a,s=oFe(uFe,i),l=hFe[s.placedSide];return Ce.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},Ce.createElement(iFe,Fa({},r,{ref:e,style:{...r.style,display:"block"}})))});function AFe(a){return a!==void 0}function pFe(a){return a!==null}const fFe=()=>({name:"anchorCssProperties",fn(a){const{rects:e,elements:i}=a,{width:r,height:s}=e.reference;return i.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),i.floating.style.setProperty("--radix-popper-anchor-height",`${s}px`),{}}}),gFe=a=>({name:"transformOrigin",options:a,fn(e){var i,r,s,l,u;const{placement:A,rects:g,middlewareData:_}=e,b=((i=_.arrow)===null||i===void 0?void 0:i.centerOffset)!==0,x=b?0:a.arrowWidth,C=b?0:a.arrowHeight,[I,F]=Vae(A),L={start:"0%",center:"50%",end:"100%"}[F],U=((r=(s=_.arrow)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0)+x/2,P=((l=(u=_.arrow)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0)+C/2;let H="",N="";return I==="bottom"?(H=b?L:`${U}px`,N=-C+"px"):I==="top"?(H=b?L:`${U}px`,N=`${g.floating.height+C}px`):I==="right"?(H=-C+"px",N=b?L:`${P}px`):I==="left"&&(H=`${g.floating.width+C}px`,N=b?L:`${P}px`),{data:{x:H,y:N}}}});function Vae(a){const[e,i="center"]=a.split("-");return[e,i]}const mFe=a=>{const{__scopePopper:e,children:i}=a,[r,s]=Ce.useState(null);return Ce.createElement(nFe,{scope:e,anchor:r,onAnchorChange:s},i)},_Fe=rFe,vFe=cFe,yFe=dFe,Jee=globalThis!=null&&globalThis.document?Ce.useLayoutEffect:()=>{},qae=a=>{const{present:e,children:i}=a,r=function(u){const[A,g]=Ce.useState(),_=Ce.useRef({}),b=Ce.useRef(u),x=Ce.useRef("none"),C=u?"mounted":"unmounted",[I,F]=function(L,U){return Ce.useReducer((P,H)=>{const N=U[P][H];return N??P},L)}(C,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Ce.useEffect(()=>{const L=PF(_.current);x.current=I==="mounted"?L:"none"},[I]),Jee(()=>{const L=_.current,U=b.current;if(U!==u){const P=x.current,H=PF(L);u?F("MOUNT"):H==="none"||(L==null?void 0:L.display)==="none"?F("UNMOUNT"):F(U&&P!==H?"ANIMATION_OUT":"UNMOUNT"),b.current=u}},[u,F]),Jee(()=>{if(A){const L=P=>{const H=PF(_.current).includes(P.animationName);P.target===A&&H&&FL.flushSync(()=>F("ANIMATION_END"))},U=P=>{P.target===A&&(x.current=PF(_.current))};return A.addEventListener("animationstart",U),A.addEventListener("animationcancel",L),A.addEventListener("animationend",L),()=>{A.removeEventListener("animationstart",U),A.removeEventListener("animationcancel",L),A.removeEventListener("animationend",L)}}F("ANIMATION_END")},[A,F]),{isPresent:["mounted","unmountSuspended"].includes(I),ref:Ce.useCallback(L=>{L&&(_.current=getComputedStyle(L)),g(L)},[])}}(e),s=typeof i=="function"?i({present:r.isPresent}):Ce.Children.only(i),l=QS(r.ref,s.ref);return typeof i=="function"||r.isPresent?Ce.cloneElement(s,{ref:l}):null};function PF(a){return(a==null?void 0:a.animationName)||"none"}function Zee(a){const e=Ce.useRef(a);return Ce.useEffect(()=>{e.current=a}),Ce.useMemo(()=>(...i)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...i)},[])}function bFe({prop:a,defaultProp:e,onChange:i=()=>{}}){const[r,s]=function({defaultProp:g,onChange:_}){const b=Ce.useState(g),[x]=b,C=Ce.useRef(x),I=Zee(_);return Ce.useEffect(()=>{C.current!==x&&(I(x),C.current=x)},[x,C,I]),b}({defaultProp:e,onChange:i}),l=a!==void 0,u=l?a:r,A=Zee(i);return[u,Ce.useCallback(g=>{if(l){const _=typeof g=="function"?g(a):g;_!==a&&A(_)}else s(g)},[l,a,s,A])]}qae.displayName="Presence";const wFe=Ce.forwardRef((a,e)=>Ce.createElement(Ow.span,Fa({},a,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...a.style}}))),xFe=wFe,[OL,$Qe]=Mae("Tooltip",[zae]),QL=zae(),JH="tooltip.open",[WQe,O7]=OL("TooltipProvider"),Q7="Tooltip",[CFe,NL]=OL(Q7),ete="TooltipTrigger",EFe=Ce.forwardRef((a,e)=>{const{__scopeTooltip:i,...r}=a,s=NL(ete,i),l=O7(ete,i),u=QL(i),A=QS(e,Ce.useRef(null),s.onTriggerChange),g=Ce.useRef(!1),_=Ce.useRef(!1),b=Ce.useCallback(()=>g.current=!1,[]);return Ce.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),Ce.createElement(_Fe,Fa({asChild:!0},u),Ce.createElement(Ow.button,Fa({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},r,{ref:A,onPointerMove:Tv(a.onPointerMove,x=>{x.pointerType!=="touch"&&(_.current||l.isPointerInTransitRef.current||(s.onTriggerEnter(),_.current=!0))}),onPointerLeave:Tv(a.onPointerLeave,()=>{s.onTriggerLeave(),_.current=!1}),onPointerDown:Tv(a.onPointerDown,()=>{g.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:Tv(a.onFocus,()=>{g.current||s.onOpen()}),onBlur:Tv(a.onBlur,s.onClose),onClick:Tv(a.onClick,s.onClose)})))}),[jQe,SFe]=OL("TooltipPortal",{forceMount:void 0}),GT="TooltipContent",BFe=Ce.forwardRef((a,e)=>{const i=SFe(GT,a.__scopeTooltip),{forceMount:r=i.forceMount,side:s="top",...l}=a,u=NL(GT,a.__scopeTooltip);return Ce.createElement(qae,{present:r||u.open},u.disableHoverableContent?Ce.createElement($ae,Fa({side:s},l,{ref:e})):Ce.createElement(IFe,Fa({side:s},l,{ref:e})))}),IFe=Ce.forwardRef((a,e)=>{const i=NL(GT,a.__scopeTooltip),r=O7(GT,a.__scopeTooltip),s=Ce.useRef(null),l=QS(e,s),[u,A]=Ce.useState(null),{trigger:g,onClose:_}=i,b=s.current,{onPointerInTransitChange:x}=r,C=Ce.useCallback(()=>{A(null),x(!1)},[x]),I=Ce.useCallback((F,L)=>{const U=F.currentTarget,P=function(z,W){const j=Math.abs(W.top-z.y),J=Math.abs(W.bottom-z.y),ie=Math.abs(W.right-z.x),ee=Math.abs(W.left-z.x);switch(Math.min(j,J,ie,ee)){case ee:return"left";case ie:return"right";case j:return"top";case J:return"bottom";default:return null}}({x:F.clientX,y:F.clientY},U.getBoundingClientRect()),H=P==="right"||P==="bottom"?-5:5,N=function(z){const W=z.slice();return W.sort((j,J)=>j.x<J.x?-1:j.x>J.x?1:j.y<J.y?-1:j.y>J.y?1:0),function(j){if(j.length<=1)return j.slice();const J=[];for(let ee=0;ee<j.length;ee++){const re=j[ee];for(;J.length>=2;){const se=J[J.length-1],ue=J[J.length-2];if(!((se.x-ue.x)*(re.y-ue.y)>=(se.y-ue.y)*(re.x-ue.x)))break;J.pop()}J.push(re)}J.pop();const ie=[];for(let ee=j.length-1;ee>=0;ee--){const re=j[ee];for(;ie.length>=2;){const se=ie[ie.length-1],ue=ie[ie.length-2];if(!((se.x-ue.x)*(re.y-ue.y)>=(se.y-ue.y)*(re.x-ue.x)))break;ie.pop()}ie.push(re)}return ie.pop(),J.length===1&&ie.length===1&&J[0].x===ie[0].x&&J[0].y===ie[0].y?J:J.concat(ie)}(W)}([P==="right"||P==="left"?{x:F.clientX+H,y:F.clientY}:{x:F.clientX,y:F.clientY+H},...function(z){const{top:W,right:j,bottom:J,left:ie}=z;return[{x:ie,y:W},{x:j,y:W},{x:j,y:J},{x:ie,y:J}]}(L.getBoundingClientRect())]);A(N),x(!0)},[x]);return Ce.useEffect(()=>()=>C(),[C]),Ce.useEffect(()=>{if(g&&b){const F=U=>I(U,b),L=U=>I(U,g);return g.addEventListener("pointerleave",F),b.addEventListener("pointerleave",L),()=>{g.removeEventListener("pointerleave",F),b.removeEventListener("pointerleave",L)}}},[g,b,I,C]),Ce.useEffect(()=>{if(u){const F=L=>{const U=L.target,P={x:L.clientX,y:L.clientY},H=(g==null?void 0:g.contains(U))||(b==null?void 0:b.contains(U)),N=!function(z,W){const{x:j,y:J}=z;let ie=!1;for(let ee=0,re=W.length-1;ee<W.length;re=ee++){const se=W[ee].x,ue=W[ee].y,fe=W[re].x,pe=W[re].y;ue>J!=pe>J&&j<(fe-se)*(J-ue)/(pe-ue)+se&&(ie=!ie)}return ie}(P,u);H?C():N&&(C(),_())};return document.addEventListener("pointermove",F),()=>document.removeEventListener("pointermove",F)}},[g,b,u,_,C]),Ce.createElement($ae,Fa({},a,{ref:l}))}),[TFe,MFe]=OL(Q7,{isInside:!1}),$ae=Ce.forwardRef((a,e)=>{const{__scopeTooltip:i,children:r,"aria-label":s,onEscapeKeyDown:l,onPointerDownOutside:u,...A}=a,g=NL(GT,i),_=QL(i),{onClose:b}=g;return Ce.useEffect(()=>(document.addEventListener(JH,b),()=>document.removeEventListener(JH,b)),[b]),Ce.useEffect(()=>{if(g.trigger){const x=C=>{const I=C.target;I!=null&&I.contains(g.trigger)&&b()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[g.trigger,b]),Ce.createElement(UDe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:x=>x.preventDefault(),onDismiss:b},Ce.createElement(vFe,Fa({"data-state":g.stateAttribute},_,A,{ref:e,style:{...A.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),Ce.createElement(Dae,null,r),Ce.createElement(TFe,{scope:i,isInside:!0},Ce.createElement(xFe,{id:g.contentId,role:"tooltip"},s||r))))}),RFe=Ce.forwardRef((a,e)=>{const{__scopeTooltip:i,...r}=a,s=QL(i);return MFe("TooltipArrow",i).isInside?null:Ce.createElement(yFe,Fa({},s,r,{ref:e}))}),DFe=a=>{const{__scopeTooltip:e,children:i,open:r,defaultOpen:s=!1,onOpenChange:l,disableHoverableContent:u,delayDuration:A}=a,g=O7(Q7,a.__scopeTooltip),_=QL(e),[b,x]=Ce.useState(null),C=function(J){const[ie,ee]=Ce.useState(LDe());return kDe(()=>{ee(re=>re??String(PDe++))},[J]),ie?`radix-${ie}`:""}(),I=Ce.useRef(0),F=u??g.disableHoverableContent,L=A??g.delayDuration,U=Ce.useRef(!1),[P=!1,H]=bFe({prop:r,defaultProp:s,onChange:J=>{J?(g.onOpen(),document.dispatchEvent(new CustomEvent(JH))):g.onClose(),l==null||l(J)}}),N=Ce.useMemo(()=>P?U.current?"delayed-open":"instant-open":"closed",[P]),z=Ce.useCallback(()=>{window.clearTimeout(I.current),U.current=!1,H(!0)},[H]),W=Ce.useCallback(()=>{window.clearTimeout(I.current),H(!1)},[H]),j=Ce.useCallback(()=>{window.clearTimeout(I.current),I.current=window.setTimeout(()=>{U.current=!0,H(!0)},L)},[L,H]);return Ce.useEffect(()=>()=>window.clearTimeout(I.current),[]),Ce.createElement(mFe,_,Ce.createElement(CFe,{scope:e,contentId:C,open:P,stateAttribute:N,trigger:b,onTriggerChange:x,onTriggerEnter:Ce.useCallback(()=>{g.isOpenDelayed?j():z()},[g.isOpenDelayed,j,z]),onTriggerLeave:Ce.useCallback(()=>{F?W():window.clearTimeout(I.current)},[W,F]),onOpen:z,onClose:W,disableHoverableContent:F},i))},FFe=EFe,UFe=BFe,kFe=RFe;function Eo(a,e){if(a==null)return{};var i,r,s=function(u,A){if(u==null)return{};var g,_,b={},x=Object.keys(u);for(_=0;_<x.length;_++)g=x[_],A.indexOf(g)>=0||(b[g]=u[g]);return b}(a,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);for(r=0;r<l.length;r++)i=l[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(a,i)&&(s[i]=a[i])}return s}let qa;(function(a){a[a.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",a[a.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",a[a.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",a[a.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",a[a.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",a[a.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",a[a.THEME_ERROR=6]="THEME_ERROR",a[a.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",a[a.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",a[a.EMPTY_KEY=9]="EMPTY_KEY"})(qa||(qa={}));const LFe={[qa.UNSUPPORTED_INPUT]:(a,e)=>[`An input with type \`${a}\` input was found at path \`${e}\` but it's not supported yet.`],[qa.NO_COMPONENT_FOR_TYPE]:(a,e)=>[`Type \`${a}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[qa.UNKNOWN_INPUT]:(a,e)=>[`input at path \`${a}\` is not recognized.`,e],[qa.DUPLICATE_KEYS]:(a,e,i)=>[`Key \`${a}\` of path \`${e}\` already exists at path \`${i}\`. Even nested keys need to be unique. Rename one of the keys.`],[qa.ALREADY_REGISTERED_TYPE]:a=>[`Type ${a} has already been registered. You can't register a component with the same type.`],[qa.CLIPBOARD_ERROR]:a=>["Error copying the value",a],[qa.THEME_ERROR]:(a,e)=>[`Error accessing the theme \`${a}.${e}\` value.`],[qa.PATH_DOESNT_EXIST]:a=>[`Error getting the value at path \`${a}\`. There is probably an error in your \`render\` function.`],[qa.PATH_DOESNT_EXIST]:a=>[`Error accessing the value at path \`${a}\``],[qa.INPUT_TYPE_OVERRIDE]:(a,e,i)=>[`Input at path \`${a}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${i}\`.`],[qa.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function Wae(a,e,...i){const[r,...s]=LFe[e](...i);console[a]("LEVA: "+r,...s)}const Dv=Wae.bind(null,"warn"),PFe=Wae.bind(null,"log"),OFe=["value"],QFe=["schema"],NFe=["value"],jae=[],Qw={};function tte(a){let{value:e}=a,i=Eo(a,OFe);for(let r of jae){const s=r(e,i);if(s)return s}}function wv(a,e){let{schema:i}=e,r=Eo(e,QFe);a in Qw?Dv(qa.ALREADY_REGISTERED_TYPE,a):(jae.push((s,l)=>i(s,l)&&a),Qw[a]=r)}function p4(a,e,i,r){const{normalize:s}=Qw[a];if(s)return s(e,i,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:l}=e;return{value:l,settings:Eo(e,NFe)}}function ite(a,e,i){const{format:r}=Qw[a];return r?r(e,i):e}function HFe(a,e,i){return e in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function nte(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),i.push.apply(i,r)}return i}function Yn(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?nte(Object(i),!0).forEach(function(r){HFe(a,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):nte(Object(i)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(i,r))})}return a}const eb=(a,e,i)=>a>i?i:a<e?e:a,zFe=a=>{if(a===""||typeof a=="number")return a;try{const e=Ry(a);if(!isNaN(e))return e}catch{}return parseFloat(a)},GFe=Math.log(10);function rte(a){let e=Math.abs(+String(a).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10==0;)e/=10;const i=Math.floor(Math.log(e)/GFe)+1,r=Math.floor(Math.log10(Math.abs(a))),s=Math.pow(10,r-i);return Math.max(s,.001)}const Ek=(a,e,i)=>i===e?0:(eb(a,e,i)-e)/(i-e),Sk=(a,e,i)=>a*(i-e)+e,ste=/\(([0-9+\-*/^ .]+)\)/,ote=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,ate=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,lte=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,cte=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,ute=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Ry(a){if(isNaN(Number(a))){if(ste.test(a)){const e=a.replace(ste,(i,r)=>String(Ry(r)));return Ry(e)}if(ote.test(a))return Ry(a.replace(ote,(e,i,r)=>String(Math.pow(Number(i),Number(r)))));if(ate.test(a)){const e=a.replace(ate,(i,r,s)=>String(Number(r)*Number(s)));return Ry(e)}if(lte.test(a)){const e=a.replace(lte,(i,r,s)=>{if(s!=0)return String(Number(r)/Number(s));throw new Error("Division by zero")});return Ry(e)}if(cte.test(a)){const e=a.replace(cte,(i,r,s)=>String(Number(r)+Number(s)));return Ry(e)}if(ute.test(a)){const e=a.replace(ute,(i,r,s)=>String(Number(r)-Number(s)));return Ry(e)}return Number(a)}return Number(a)}function hte(a){return Object.prototype.toString.call(a)==="[object Object]"}let kg,Eg;(function(a){a.BUTTON="BUTTON",a.BUTTON_GROUP="BUTTON_GROUP",a.MONITOR="MONITOR",a.FOLDER="FOLDER"})(kg||(kg={})),function(a){a.SELECT="SELECT",a.IMAGE="IMAGE",a.NUMBER="NUMBER",a.COLOR="COLOR",a.STRING="STRING",a.BOOLEAN="BOOLEAN",a.INTERVAL="INTERVAL",a.VECTOR3D="VECTOR3D",a.VECTOR2D="VECTOR2D"}(Eg||(Eg={}));const VFe=["type","__customInput"],qFe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],$Fe=["type"];function Kae(a,e,i={},r){var s,l;if(typeof a!="object"||Array.isArray(a))return{type:r,input:a,options:Yn({key:e,label:e,optional:!1,disabled:!1,order:0},i)};if("__customInput"in a){const{type:j,__customInput:J}=a;return Kae(J,e,Eo(a,VFe),j)}const{render:u,label:A,optional:g,order:_=0,disabled:b,hint:x,onChange:C,onEditStart:I,onEditEnd:F,transient:L}=a,U=Eo(a,qFe),P=Yn({render:u,key:e,label:A??e,hint:x,transient:L??!!C,onEditStart:I,onEditEnd:F,disabled:b,optional:g,order:_},i);let H,{type:N}=U,z=Eo(U,$Fe);return N=r??N,N in kg?{type:N,input:z,options:P}:(r&&hte(z)&&"value"in z?H=z.value:H=hte(W=z)&&Object.keys(W).length===0?void 0:z,{type:N,input:H,options:Yn(Yn({},P),{},{onChange:C,optional:(s=P.optional)!==null&&s!==void 0&&s,disabled:(l=P.disabled)!==null&&l!==void 0&&l})});var W}function dte(a,e,i,r,s){const{value:l,type:u,settings:A}=a;a.value=Xae({type:u,value:l,settings:A},e,i,r),a.fromPanel=s}const WFe=function(a,e,i){this.type="LEVA_ERROR",this.message="LEVA: "+a,this.previousValue=e,this.error=i};function Xae({type:a,value:e,settings:i},r,s,l){const u=a!=="SELECT"&&typeof r=="function"?r(e):r;let A;try{A=function(g,_,b,x,C,I){const{sanitize:F}=Qw[g];return F?F(_,b,x,C,I):_}(a,u,i,e,s,l)}catch(g){throw new WFe(`The value \`${r}\` did not result in a correct value.`,e,g)}return QT(A,e)?e:A}const Yae=(a,e,i=!1)=>{let r=0;return function(){const s=arguments,l=i&&!r,u=()=>a.apply(this,s);window.clearTimeout(r),r=window.setTimeout(u,e),l&&u()}},Jae=a=>a.shiftKey?5:a.altKey?.2:1,jFe=["value"],KFe=["min","max"],Zae=(a,{min:e=-1/0,max:i=1/0,suffix:r})=>{const s=parseFloat(a);if(a===""||isNaN(s))throw Error("Invalid number");const l=eb(s,e,i);return r?l+r:l},ele=a=>{let{value:e}=a,i=Eo(a,jFe);const{min:r=-1/0,max:s=1/0}=i,l=Eo(i,KFe);let u=parseFloat(e);const A=typeof e=="string"?e.substring((""+u).length):void 0;u=eb(u,r,s);let g=i.step;g||(Number.isFinite(r)?g=Number.isFinite(s)?+(Math.abs(s-r)/100).toPrecision(1):+(Math.abs(u-r)/100).toPrecision(1):Number.isFinite(s)&&(g=+(Math.abs(s-u)/100).toPrecision(1)));const _=g?10*rte(g):rte(u);return g=g||_/10,{value:A?u+A:u,settings:Yn({initialValue:u,step:g,pad:Math.round(eb(Math.log10(1/_),0,2)),min:r,max:s,suffix:A},l)}},tle=(a,{step:e,initialValue:i})=>i+Math.round((a-i)/e)*e;var ile=Object.freeze({__proto__:null,schema:a=>{if(typeof a=="number")return!0;if(typeof a=="string"){const e=parseFloat(a);return isNaN(e)?!1:a.substring((""+e).length).trim().length<4}return!1},sanitize:Zae,format:(a,{pad:e=0,suffix:i})=>{const r=parseFloat(a).toFixed(e);return i?r+i:r},normalize:ele,sanitizeStep:tle});function pl(){return pl=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},pl.apply(this,arguments)}const nle=Ce.createContext({});function $h(){return Ce.useContext(nle)}const N7=Ce.createContext(null),rle=Ce.createContext(null),sle=Ce.createContext(null);function VT(){return Ce.useContext(rle)}function OF(a,e){const[i,r]=a.split(" "),s={};return i!=="none"&&(s.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${i!=="default"&&i||e.borderColor}`),r&&(s.backgroundColor=r),s}const BI={$inputStyle:()=>a=>OF(a,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>a=>OF(a,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>a=>OF(a,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>a=>OF(a,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:zn,css:KQe,createTheme:XFe,globalCss:YFe,keyframes:XQe}=(a=>{const e=(i=>{let r=!1;const s=aDe(i,l=>{r=!0;const u="prefix"in(l=typeof l=="object"&&l||{})?String(l.prefix):"",A=typeof l.media=="object"&&l.media||{},g=typeof l.root=="object"?l.root||null:globalThis.document||null,_=typeof l.theme=="object"&&l.theme||{},b={prefix:u,media:A,theme:_,themeMap:typeof l.themeMap=="object"&&l.themeMap||{...LRe},utils:typeof l.utils=="object"&&l.utils||{}},x=WRe(g),C={css:Bee(b,x),globalCss:tDe(b,x),keyframes:nDe(b,x),createTheme:oDe(b,x),reset(){x.reset(),C.theme.toString()},theme:{},sheet:x,config:b,prefix:u,getCssText:x.toString,toString:x.toString};return String(C.theme=C.createTheme(_)),C});return r||s.reset(),s})(a);return e.styled=(({config:i,sheet:r})=>lDe(i,()=>{const s=Bee(i,r);return(...l)=>{const u=s(...l),A=u[xw].type,g=Ye.forwardRef((_,b)=>{const x=_&&_.as||A,{props:C,deferredInjector:I}=u(_);return delete C.as,C.ref=b,I?Ye.createElement(Ye.Fragment,null,Ye.createElement(x,C),Ye.createElement(I,null)):Ye.createElement(x,C)});return g.className=u.className,g.displayName=`Styled.${A.displayName||A.name||A}`,g.selector=u.selector,g.toString=()=>u.selector,g[xw]=u[xw],g}}))(e),e})({prefix:"leva",theme:{colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}},utils:Yn(Yn({},BI),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:a=>({"&:focus":BI.$focusStyle()(a)}),$focusWithin:a=>({"&:focus-within":BI.$focusStyle()(a)}),$hover:a=>({"&:hover":BI.$hoverStyle()(a)}),$active:a=>({"&:active":BI.$activeStyle()(a)})})}),JFe=YFe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function zv(a,e){const{theme:i}=Ce.useContext(N7);if(!(a in i)||!(e in i[a]))return Dv(qa.THEME_ERROR,a,e),"";let r=e;for(;;){let s=i[a][r];if(typeof s!="string"||s.charAt(0)!=="$")return s;r=s.substr(1)}}const ole=zn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),ale=zn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${ole}`]:{paddingLeft:0}}),ZFe=zn(ale,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),eUe=zn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),tUe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],iUe=["onUpdate"];function H7(a){let{innerLabel:e,value:i,onUpdate:r,onChange:s,onKeyDown:l,type:u,id:A,inputType:g="text",rows:_=0}=a,b=Eo(a,tUe);const{id:x,emitOnEditStart:C,emitOnEditEnd:I,disabled:F}=$h(),L=A||x,U=Ce.useRef(null),P=_>0,H=P?"textarea":"input",N=Ce.useCallback(j=>J=>{const ie=J.currentTarget.value;j(ie)},[]);Ye.useEffect(()=>{const j=U.current,J=N(ie=>{r(ie),I()});return j==null||j.addEventListener("blur",J),()=>j==null?void 0:j.removeEventListener("blur",J)},[N,r,I]);const z=Ce.useCallback(j=>{j.key==="Enter"&&N(r)(j)},[N,r]),W=Object.assign({as:H},P?{rows:_}:{},b);return Ye.createElement(eUe,{textArea:P},e&&typeof e=="string"?Ye.createElement(ale,null,e):e,Ye.createElement(ole,pl({levaType:u,ref:U,id:L,type:g,autoComplete:"off",spellCheck:"false",value:i,onChange:N(s),onFocus:()=>C(),onKeyPress:z,onKeyDown:l,disabled:F},W)))}function nUe(a){let{onUpdate:e}=a,i=Eo(a,iUe);const r=Ce.useCallback(l=>e(zFe(l)),[e]),s=Ce.useCallback(l=>{const u=l.key==="ArrowUp"?1:l.key==="ArrowDown"?-1:0;if(u){l.preventDefault();const A=l.altKey?.1:l.shiftKey?10:1;e(g=>parseFloat(g)+u*A)}},[e]);return Ye.createElement(H7,pl({},i,{onUpdate:r,onKeyDown:s,type:"number"}))}const Bk=zn("div",{}),ZH=zn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),rUe=zn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${ZH}::after`]:{opacity:.6},[`${Bk}:hover > & + ${ZH}::after`]:{opacity:.6},[`${Bk}:hover > & > svg`]:{opacity:1}}),lle=zn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Bk}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),cle=zn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${lle} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),ule=zn(cle,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),sUe=zn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),oUe=zn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ez=zn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),aUe=zn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ez}`]:{pointerEvents:"auto"}}}}}),hle=zn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),lUe=zn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),cUe=zn(kFe,{fill:"$toolTipBackground"});function z7({children:a}){const{className:e}=Ce.useContext(N7);return Ye.createElement(FRe,{className:e},a)}const uUe=["align"];function hUe(){const{id:a,disable:e,disabled:i}=$h();return Ye.createElement(Ye.Fragment,null,Ye.createElement(oUe,{id:a+"__disable",type:"checkbox",checked:!i,onChange:()=>e(!i)}),Ye.createElement("label",{htmlFor:a+"__disable"}))}function dUe(a){const{id:e,optional:i,hint:r}=$h(),s=a.htmlFor||(e?{htmlFor:e}:null),l=r||typeof a.children!="string"?null:{title:a.children};return Ye.createElement(Ye.Fragment,null,i&&Ye.createElement(hUe,null),r!==void 0?Ye.createElement(DFe,null,Ye.createElement(FFe,{asChild:!0},Ye.createElement(ez,pl({},s,a))),Ye.createElement(UFe,{side:"top",sideOffset:2},Ye.createElement(lUe,null,r,Ye.createElement(cUe,null)))):Ye.createElement(ez,pl({},s,l,a)))}function Lg(a){let{align:e}=a,i=Eo(a,uUe);const{value:r,label:s,key:l,disabled:u}=$h(),{hideCopyButton:A}=Ce.useContext(sle),g=!A&&l!==void 0,[_,b]=Ce.useState(!1);return Ye.createElement(sUe,{align:e,onPointerLeave:()=>b(!1)},Ye.createElement(dUe,i),g&&!u&&Ye.createElement("div",{title:`Click to copy ${typeof s=="string"?s:l} value`},_?Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ye.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ye.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ye.createElement("svg",{onClick:async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[l]:r??""})),b(!0)}catch{Dv(qa.CLIPBOARD_ERROR,{[l]:r})}},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ye.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ye.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const AUe=["toggled"],pUe=zn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function G7(a){let{toggled:e}=a,i=Eo(a,AUe);return Ye.createElement(pUe,pl({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},i),Ye.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const fUe=["input"];function Bf(a){let{input:e}=a,i=Eo(a,fUe);return e?Ye.createElement(ule,i):Ye.createElement(cle,i)}function dle({value:a,type:e,settings:i,setValue:r}){const[s,l]=Ce.useState(ite(e,a,i)),u=Ce.useRef(a),A=Ce.useRef(i);A.current=i;const g=Ce.useCallback(b=>l(ite(e,b,A.current)),[e]),_=Ce.useCallback(b=>{try{r(b)}catch(x){const{type:C,previousValue:I}=x;if(C!=="LEVA_ERROR")throw x;g(I)}},[g,r]);return Ce.useEffect(()=>{QT(a,u.current)||g(a),u.current=a},[a,g]),{displayValue:s,onChange:l,onUpdate:_}}function AM(a,e){const{emitOnEditStart:i,emitOnEditEnd:r}=$h();return BDe(s=>{s.first&&(document.body.classList.add("leva__panel__dragged"),i==null||i());const l=a(s);return s.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),l},e)}function Ale(){const a=Ce.useRef(null),e=Ce.useRef({x:0,y:0}),i=Ce.useCallback(r=>{Object.assign(e.current,r),a.current&&(a.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[a,i]}const gUe=["__refCount"],f4=(a,e)=>a[e]?Eo(a[e],gUe):null,mUe=zn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),ple=zn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),tz=zn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),fle=zn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),gle=zn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function _Ue({value:a,min:e,max:i,onDrag:r,step:s,initialValue:l}){const u=Ce.useRef(null),A=Ce.useRef(null),g=Ce.useRef(0),_=zv("sizes","scrubberWidth"),b=AM(({event:C,first:I,xy:[F],movement:[L],memo:U})=>{if(I){const{width:H,left:N}=u.current.getBoundingClientRect();g.current=H-parseFloat(_),U=(C==null?void 0:C.target)===A.current?a:Sk((F-N)/H,e,i)}const P=U+Sk(L/g.current,0,i-e);return r(tle(P,{step:s,initialValue:l})),U}),x=Ek(a,e,i);return Ye.createElement(fle,pl({ref:u},b()),Ye.createElement(ple,null,Ye.createElement(gle,{style:{left:0,right:100*(1-x)+"%"}})),Ye.createElement(tz,{ref:A,style:{left:`calc(${x} * (100% - ${_}))`}}))}const vUe=Ye.memo(({label:a,onUpdate:e,step:i,innerLabelTrim:r})=>{const[s,l]=Ce.useState(!1),u=AM(({active:A,delta:[g],event:_,memo:b=0,first:x,last:C,target:I})=>(x&&I.requestPointerLock(),C&&document.exitPointerLock(),l(A),b+=g/2,Math.abs(b)>=1&&(e(F=>parseFloat(F)+Math.floor(b)*i*Jae(_)),b=0),b));return Ye.createElement(ZFe,pl({dragging:s,title:a.length>1?a:""},u()),a.slice(0,r))});function mle({label:a,id:e,displayValue:i,onUpdate:r,onChange:s,settings:l,innerLabelTrim:u=1}){const A=u>0&&Ye.createElement(vUe,{label:a,step:l.step,onUpdate:r,innerLabelTrim:u});return Ye.createElement(nUe,{id:e,value:String(i),onUpdate:r,onChange:s,innerLabel:A})}const{sanitizeStep:yUe}=ile;var bUe=Yn({component:function(){const a=$h(),{label:e,value:i,onUpdate:r,settings:s,id:l}=a,{min:u,max:A}=s,g=A!==1/0&&u!==-1/0;return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,e),Ye.createElement(mUe,{hasRange:g},g&&Ye.createElement(_Ue,pl({value:parseFloat(i),onDrag:r},s)),Ye.createElement(mle,pl({},a,{id:l,label:"value",innerLabelTrim:g?0:1}))))}},Eo(ile,["sanitizeStep"])),wUe=Object.freeze({__proto__:null,schema:(a,e)=>RA().schema({options:RA().passesAnyOf(RA().object(),RA().array())}).test(e),sanitize:(a,{values:e})=>{if(e.indexOf(a)<0)throw Error("Selected value doesn't match Select options");return a},format:(a,{values:e})=>e.indexOf(a),normalize:a=>{let e,i,{value:r,options:s}=a;return Array.isArray(s)?(i=s,e=s.map(l=>String(l))):(i=Object.values(s),e=Object.keys(s)),"value"in a?i.includes(r)||(e.unshift(String(r)),i.unshift(r)):r=i[0],Object.values(s).includes(r)||(s[String(r)]=r),{value:r,settings:{keys:e,values:i}}}});const xUe=zn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),iz=zn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),CUe=zn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${iz}:focus + &`]:{$focusStyle:""},[`${iz}:hover + &`]:{$hoverStyle:""}});function EUe({displayValue:a,value:e,onUpdate:i,id:r,settings:s,disabled:l}){const{keys:u,values:A}=s,g=Ce.useRef();return e===A[a]&&(g.current=u[a]),Ye.createElement(xUe,null,Ye.createElement(iz,{id:r,value:a,onChange:_=>i(A[Number(_.currentTarget.value)]),disabled:l},u.map((_,b)=>Ye.createElement("option",{key:_,value:b},_))),Ye.createElement(CUe,null,g.current),Ye.createElement(G7,{toggled:!0}))}var SUe=Yn({component:function(){const{label:a,value:e,displayValue:i,onUpdate:r,id:s,disabled:l,settings:u}=$h();return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,a),Ye.createElement(EUe,{id:s,value:e,displayValue:i,onUpdate:r,settings:u,disabled:l}))}},wUe),BUe=Object.freeze({__proto__:null,schema:a=>RA().string().test(a),sanitize:a=>{if(typeof a!="string")throw Error("Invalid string");return a},normalize:({value:a,editable:e=!0,rows:i=!1})=>({value:a,settings:{editable:e,rows:typeof i=="number"?i:i?5:0}})});const IUe=["displayValue","onUpdate","onChange","editable"],TUe=zn("div",{whiteSpace:"pre-wrap"});function MUe(a){let{displayValue:e,onUpdate:i,onChange:r,editable:s=!0}=a,l=Eo(a,IUe);return s?Ye.createElement(H7,pl({value:e,onUpdate:i,onChange:r},l)):Ye.createElement(TUe,null,e)}var RUe=Yn({component:function(){const{label:a,settings:e,displayValue:i,onUpdate:r,onChange:s}=$h();return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,a),Ye.createElement(MUe,pl({displayValue:i,onUpdate:r,onChange:s},e)))}},BUe),DUe=Object.freeze({__proto__:null,schema:a=>RA().boolean().test(a),sanitize:a=>{if(typeof a!="boolean")throw Error("Invalid boolean");return a}});const FUe=zn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function UUe({value:a,onUpdate:e,id:i,disabled:r}){return Ye.createElement(FUe,null,Ye.createElement("input",{id:i,type:"checkbox",checked:a,onChange:s=>e(s.currentTarget.checked),disabled:r}),Ye.createElement("label",{htmlFor:i},Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ye.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var kUe=Yn({component:function(){const{label:a,value:e,onUpdate:i,disabled:r,id:s}=$h();return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,a),Ye.createElement(UUe,{value:e,onUpdate:i,id:s,disabled:r}))}},DUe);const LUe=["locked"];function PUe({value:a,id:e,valueKey:i,settings:r,onUpdate:s,innerLabelTrim:l}){const u=Ce.useRef(a[i]);u.current=a[i];const A=Ce.useCallback(_=>s({[i]:Xae({type:"NUMBER",value:u.current,settings:r},_)}),[s,r,i]),g=dle({type:"NUMBER",value:a[i],settings:r,setValue:A});return Ye.createElement(mle,{id:e,label:i,value:a[i],displayValue:g.displayValue,onUpdate:g.onUpdate,onChange:g.onChange,settings:r,innerLabelTrim:l})}const OUe=zn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function QUe(a){let{locked:e}=a,i=Eo(a,LUe);return Ye.createElement("svg",pl({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),e?Ye.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ye.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function V7({value:a,onUpdate:e,settings:i,innerLabelTrim:r}){const{id:s,setSettings:l}=$h(),{lock:u,locked:A}=i;return Ye.createElement(OUe,{withLock:u},u&&Ye.createElement(QUe,{locked:A,onClick:()=>l({locked:!A})}),Object.keys(a).map((g,_)=>Ye.createElement(PUe,{id:_===0?s:`${s}.${g}`,key:g,valueKey:g,value:a,settings:i[g],onUpdate:e,innerLabelTrim:r})))}const _le=(a,e)=>{const i={};let r=0,s=1/0;Object.entries(a).forEach(([l,u])=>{i[l]=ele(Yn({value:u},e[l])).settings,r=Math.max(r,i[l].step),s=Math.min(s,i[l].pad)});for(let l in i){const{step:u,min:A,max:g}=e[l]||{};isFinite(u)||isFinite(A)&&isFinite(g)||(i[l].step=r,i[l].pad=s)}return i},NUe=["lock"],HUe=["value"];function zUe(a){const e=RA().array().length(a).every.number();return i=>e.test(i)||(r=>{if(!r||typeof r!="object")return!1;const s=Object.values(r);return s.length===a&&s.every(l=>isFinite(l))})(i)}function II(a,e,i){return function(r){return Array.isArray(r)?"array":"object"}(a)===e?a:e==="array"?Object.values(a):function(r,s){return r.reduce((l,u,A)=>Object.assign(l,{[s[A]]:u}),{})}(a,i)}function vle(a){return{schema:zUe(a.length),normalize:e=>{let{value:i}=e;return function(r,s,l=[]){const{lock:u=!1}=s,A=Eo(s,NUe),g=Array.isArray(r)?"array":"object",_=g==="object"?Object.keys(r):l,b=II(r,"object",_),x=(C=>!!C&&("step"in C||"min"in C||"max"in C))(A)?_.reduce((C,I)=>Object.assign(C,{[I]:A}),{}):A;return{value:g==="array"?r:b,settings:Yn(Yn({},_le(b,x)),{},{format:g,keys:_,lock:u,locked:!1})}}(i,Eo(e,HUe),a)},format:(e,i)=>((r,s)=>II(r,"object",s.keys))(e,i),sanitize:(e,i,r)=>((s,l,u)=>{const A=II(s,"object",l.keys);for(let b in A)A[b]=Zae(A[b],l[b]);const g=Object.keys(A);let _={};if(g.length===l.keys.length)_=A;else{const b=II(u,"object",l.keys);if(g.length===1&&l.locked){const x=g[0],C=A[x],I=b[x],F=I!==0?C/I:1;for(let L in b)L===x?_[x]=C:_[L]=b[L]*F}else _=Yn(Yn({},b),A)}return II(_,l.format,l.keys)})(e,i,r)}}var GUe={grad:.9,turn:360,rad:360/(2*Math.PI)},xv=function(a){return typeof a=="string"?a.length>0:typeof a=="number"},Au=function(a,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*a)/i+0},wf=function(a,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),a>i?i:a>e?a:e},yle=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},Ate=function(a){return{r:wf(a.r,0,255),g:wf(a.g,0,255),b:wf(a.b,0,255),a:wf(a.a)}},g4=function(a){return{r:Au(a.r),g:Au(a.g),b:Au(a.b),a:Au(a.a,3)}},VUe=/^#([0-9a-f]{3,8})$/i,QF=function(a){var e=a.toString(16);return e.length<2?"0"+e:e},ble=function(a){var e=a.r,i=a.g,r=a.b,s=a.a,l=Math.max(e,i,r),u=l-Math.min(e,i,r),A=u?l===e?(i-r)/u:l===i?2+(r-e)/u:4+(e-i)/u:0;return{h:60*(A<0?A+6:A),s:l?u/l*100:0,v:l/255*100,a:s}},wle=function(a){var e=a.h,i=a.s,r=a.v,s=a.a;e=e/360*6,i/=100,r/=100;var l=Math.floor(e),u=r*(1-i),A=r*(1-(e-l)*i),g=r*(1-(1-e+l)*i),_=l%6;return{r:255*[r,A,u,u,g,r][_],g:255*[g,r,r,A,u,u][_],b:255*[u,u,g,r,r,A][_],a:s}},pte=function(a){return{h:yle(a.h),s:wf(a.s,0,100),l:wf(a.l,0,100),a:wf(a.a)}},fte=function(a){return{h:Au(a.h),s:Au(a.s),l:Au(a.l),a:Au(a.a,3)}},gte=function(a){return wle((i=(e=a).s,{h:e.h,s:(i*=((r=e.l)<50?r:100-r)/100)>0?2*i/(r+i)*100:0,v:r+i,a:e.a}));var e,i,r},nT=function(a){return{h:(e=ble(a)).h,s:(s=(200-(i=e.s))*(r=e.v)/100)>0&&s<200?i*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,i,r,s},qUe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$Ue=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,WUe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jUe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nz={string:[[function(a){var e=VUe.exec(a);return e?(a=e[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?Au(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?Au(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var e=WUe.exec(a)||jUe.exec(a);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ate({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(a){var e=qUe.exec(a)||$Ue.exec(a);if(!e)return null;var i,r,s=pte({h:(i=e[1],r=e[2],r===void 0&&(r="deg"),Number(i)*(GUe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return gte(s)},"hsl"]],object:[[function(a){var e=a.r,i=a.g,r=a.b,s=a.a,l=s===void 0?1:s;return xv(e)&&xv(i)&&xv(r)?Ate({r:Number(e),g:Number(i),b:Number(r),a:Number(l)}):null},"rgb"],[function(a){var e=a.h,i=a.s,r=a.l,s=a.a,l=s===void 0?1:s;if(!xv(e)||!xv(i)||!xv(r))return null;var u=pte({h:Number(e),s:Number(i),l:Number(r),a:Number(l)});return gte(u)},"hsl"],[function(a){var e=a.h,i=a.s,r=a.v,s=a.a,l=s===void 0?1:s;if(!xv(e)||!xv(i)||!xv(r))return null;var u=function(A){return{h:yle(A.h),s:wf(A.s,0,100),v:wf(A.v,0,100),a:wf(A.a)}}({h:Number(e),s:Number(i),v:Number(r),a:Number(l)});return wle(u)},"hsv"]]},mte=function(a,e){for(var i=0;i<e.length;i++){var r=e[i][0](a);if(r)return[r,e[i][1]]}return[null,void 0]},xle=function(a){return typeof a=="string"?mte(a.trim(),nz.string):typeof a=="object"&&a!==null?mte(a,nz.object):[null,void 0]},m4=function(a,e){var i=nT(a);return{h:i.h,s:wf(i.s+100*e,0,100),l:i.l,a:i.a}},_4=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},_te=function(a,e){var i=nT(a);return{h:i.h,s:i.s,l:wf(i.l+100*e,0,100),a:i.a}},rz=function(){function a(e){this.parsed=xle(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return Au(_4(this.rgba),2)},a.prototype.isDark=function(){return _4(this.rgba)<.5},a.prototype.isLight=function(){return _4(this.rgba)>=.5},a.prototype.toHex=function(){return i=(e=g4(this.rgba)).r,r=e.g,s=e.b,u=(l=e.a)<1?QF(Au(255*l)):"","#"+QF(i)+QF(r)+QF(s)+u;var e,i,r,s,l,u},a.prototype.toRgb=function(){return g4(this.rgba)},a.prototype.toRgbString=function(){return i=(e=g4(this.rgba)).r,r=e.g,s=e.b,(l=e.a)<1?"rgba("+i+", "+r+", "+s+", "+l+")":"rgb("+i+", "+r+", "+s+")";var e,i,r,s,l},a.prototype.toHsl=function(){return fte(nT(this.rgba))},a.prototype.toHslString=function(){return i=(e=fte(nT(this.rgba))).h,r=e.s,s=e.l,(l=e.a)<1?"hsla("+i+", "+r+"%, "+s+"%, "+l+")":"hsl("+i+", "+r+"%, "+s+"%)";var e,i,r,s,l},a.prototype.toHsv=function(){return e=ble(this.rgba),{h:Au(e.h),s:Au(e.s),v:Au(e.v),a:Au(e.a,3)};var e},a.prototype.invert=function(){return Od({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},a.prototype.saturate=function(e){return e===void 0&&(e=.1),Od(m4(this.rgba,e))},a.prototype.desaturate=function(e){return e===void 0&&(e=.1),Od(m4(this.rgba,-e))},a.prototype.grayscale=function(){return Od(m4(this.rgba,-1))},a.prototype.lighten=function(e){return e===void 0&&(e=.1),Od(_te(this.rgba,e))},a.prototype.darken=function(e){return e===void 0&&(e=.1),Od(_te(this.rgba,-e))},a.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},a.prototype.alpha=function(e){return typeof e=="number"?Od({r:(i=this.rgba).r,g:i.g,b:i.b,a:e}):Au(this.rgba.a,3);var i},a.prototype.hue=function(e){var i=nT(this.rgba);return typeof e=="number"?Od({h:e,s:i.s,l:i.l,a:i.a}):Au(i.h)},a.prototype.isEqual=function(e){return this.toHex()===Od(e).toHex()},a}(),Od=function(a){return a instanceof rz?a:new rz(a)},vte=[];function HS(){return(HS=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a}).apply(this,arguments)}function q7(a,e){if(a==null)return{};var i,r,s={},l=Object.keys(a);for(r=0;r<l.length;r++)e.indexOf(i=l[r])>=0||(s[i]=a[i]);return s}function sz(a){var e=Ce.useRef(a),i=Ce.useRef(function(r){e.current&&e.current(r)});return e.current=a,i.current}var ES=function(a,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),a>i?i:a<e?e:a},rT=function(a){return"touches"in a},oz=function(a){return a&&a.ownerDocument.defaultView||self},yte=function(a,e,i){var r=a.getBoundingClientRect(),s=rT(e)?function(l,u){for(var A=0;A<l.length;A++)if(l[A].identifier===u)return l[A];return l[0]}(e.touches,i):e;return{left:ES((s.pageX-(r.left+oz(a).pageXOffset))/r.width),top:ES((s.pageY-(r.top+oz(a).pageYOffset))/r.height)}},bte=function(a){!rT(a)&&a.preventDefault()},$7=Ye.memo(function(a){var e=a.onMove,i=a.onKey,r=q7(a,["onMove","onKey"]),s=Ce.useRef(null),l=sz(e),u=sz(i),A=Ce.useRef(null),g=Ce.useRef(!1),_=Ce.useMemo(function(){var I=function(U){bte(U),(rT(U)?U.touches.length>0:U.buttons>0)&&s.current?l(yte(s.current,U,A.current)):L(!1)},F=function(){return L(!1)};function L(U){var P=g.current,H=oz(s.current),N=U?H.addEventListener:H.removeEventListener;N(P?"touchmove":"mousemove",I),N(P?"touchend":"mouseup",F)}return[function(U){var P=U.nativeEvent,H=s.current;if(H&&(bte(P),!function(z,W){return W&&!rT(z)}(P,g.current)&&H)){if(rT(P)){g.current=!0;var N=P.changedTouches||[];N.length&&(A.current=N[0].identifier)}H.focus(),l(yte(H,P,A.current)),L(!0)}},function(U){var P=U.which||U.keyCode;P<37||P>40||(U.preventDefault(),u({left:P===39?.05:P===37?-.05:0,top:P===40?.05:P===38?-.05:0}))},L]},[u,l]),b=_[0],x=_[1],C=_[2];return Ce.useEffect(function(){return C},[C]),Ye.createElement("div",HS({},r,{onTouchStart:b,onMouseDown:b,className:"react-colorful__interactive",ref:s,onKeyDown:x,tabIndex:0,role:"slider"}))}),pM=function(a){return a.filter(Boolean).join(" ")},W7=function(a){var e=a.color,i=a.left,r=a.top,s=r===void 0?.5:r,l=pM(["react-colorful__pointer",a.className]);return Ye.createElement("div",{className:l,style:{top:100*s+"%",left:100*i+"%"}},Ye.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Gd=function(a,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*a)/i},Cle=function(a){var e=a.s,i=a.v,r=a.a,s=(200-e)*i/100;return{h:Gd(a.h),s:Gd(s>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0),l:Gd(s/2),a:Gd(r,2)}},az=function(a){var e=Cle(a);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},v4=function(a){var e=Cle(a);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},Ele=function(a){var e=a.h,i=a.s,r=a.v,s=a.a;e=e/360*6,i/=100,r/=100;var l=Math.floor(e),u=r*(1-i),A=r*(1-(e-l)*i),g=r*(1-(1-e+l)*i),_=l%6;return{r:Gd(255*[r,A,u,u,g,r][_]),g:Gd(255*[g,r,r,A,u,u][_]),b:Gd(255*[u,u,g,r,r,A][_]),a:Gd(s,2)}},Sle=function(a){var e=a.r,i=a.g,r=a.b,s=a.a,l=Math.max(e,i,r),u=l-Math.min(e,i,r),A=u?l===e?(i-r)/u:l===i?2+(r-e)/u:4+(e-i)/u:0;return{h:Gd(60*(A<0?A+6:A)),s:Gd(l?u/l*100:0),v:Gd(l/255*100),a:s}},Ble=Ye.memo(function(a){var e=a.hue,i=a.onChange,r=pM(["react-colorful__hue",a.className]);return Ye.createElement("div",{className:r},Ye.createElement($7,{onMove:function(s){i({h:360*s.left})},onKey:function(s){i({h:ES(e+360*s.left,0,360)})},"aria-label":"Hue","aria-valuenow":Gd(e),"aria-valuemax":"360","aria-valuemin":"0"},Ye.createElement(W7,{className:"react-colorful__hue-pointer",left:e/360,color:az({h:e,s:100,v:100,a:1})})))}),Ile=Ye.memo(function(a){var e=a.hsva,i=a.onChange,r={backgroundColor:az({h:e.h,s:100,v:100,a:1})};return Ye.createElement("div",{className:"react-colorful__saturation",style:r},Ye.createElement($7,{onMove:function(s){i({s:100*s.left,v:100-100*s.top})},onKey:function(s){i({s:ES(e.s+100*s.left,0,100),v:ES(e.v-100*s.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Gd(e.s)+"%, Brightness "+Gd(e.v)+"%"},Ye.createElement(W7,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:az(e)})))}),j7=function(a,e){if(a===e)return!0;for(var i in a)if(a[i]!==e[i])return!1;return!0};function Tle(a,e,i){var r=sz(i),s=Ce.useState(function(){return a.toHsva(e)}),l=s[0],u=s[1],A=Ce.useRef({color:e,hsva:l});Ce.useEffect(function(){if(!a.equal(e,A.current.color)){var _=a.toHsva(e);A.current={hsva:_,color:e},u(_)}},[e,a]),Ce.useEffect(function(){var _;j7(l,A.current.hsva)||a.equal(_=a.fromHsva(l),A.current.color)||(A.current={hsva:l,color:_},r(_))},[l,a,r]);var g=Ce.useCallback(function(_){u(function(b){return Object.assign({},b,_)})},[]);return[l,g]}var KUe=typeof window<"u"?Ce.useLayoutEffect:Ce.useEffect,wte=new Map,Mle=function(a){KUe(function(){var e=a.current?a.current.ownerDocument:document;if(e!==void 0&&!wte.has(e)){var i=e.createElement("style");i.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,wte.set(e,i);var r=typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0;r&&i.setAttribute("nonce",r),e.head.appendChild(i)}},[])},XUe=function(a){var e=a.className,i=a.colorModel,r=a.color,s=r===void 0?i.defaultColor:r,l=a.onChange,u=q7(a,["className","colorModel","color","onChange"]),A=Ce.useRef(null);Mle(A);var g=Tle(i,s,l),_=g[0],b=g[1],x=pM(["react-colorful",e]);return Ye.createElement("div",HS({},u,{ref:A,className:x}),Ye.createElement(Ile,{hsva:_,onChange:b}),Ye.createElement(Ble,{hue:_.h,onChange:b,className:"react-colorful__last-control"}))},YUe=function(a){var e=a.className,i=a.hsva,r=a.onChange,s={backgroundImage:"linear-gradient(90deg, "+v4(Object.assign({},i,{a:0}))+", "+v4(Object.assign({},i,{a:1}))+")"},l=pM(["react-colorful__alpha",e]),u=Gd(100*i.a);return Ye.createElement("div",{className:l},Ye.createElement("div",{className:"react-colorful__alpha-gradient",style:s}),Ye.createElement($7,{onMove:function(A){r({a:A.left})},onKey:function(A){r({a:ES(i.a+A.left)})},"aria-label":"Alpha","aria-valuetext":u+"%","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"},Ye.createElement(W7,{className:"react-colorful__alpha-pointer",left:i.a,color:v4(i)})))},JUe=function(a){var e=a.className,i=a.colorModel,r=a.color,s=r===void 0?i.defaultColor:r,l=a.onChange,u=q7(a,["className","colorModel","color","onChange"]),A=Ce.useRef(null);Mle(A);var g=Tle(i,s,l),_=g[0],b=g[1],x=pM(["react-colorful",e]);return Ye.createElement("div",HS({},u,{ref:A,className:x}),Ye.createElement(Ile,{hsva:_,onChange:b}),Ye.createElement(Ble,{hue:_.h,onChange:b}),Ye.createElement(YUe,{hsva:_,onChange:b,className:"react-colorful__last-control"}))},ZUe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:Sle,fromHsva:Ele,equal:j7},eke=function(a){return Ye.createElement(JUe,HS({},a,{colorModel:ZUe}))},tke={defaultColor:{r:0,g:0,b:0},toHsva:function(a){return Sle({r:a.r,g:a.g,b:a.b,a:1})},fromHsva:function(a){return{r:(e=Ele(a)).r,g:e.g,b:e.b};var e},equal:j7},ike=function(a){return Ye.createElement(XUe,HS({},a,{colorModel:tke}))},xte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fM(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var y4={exports:{}},Cte,Ete,b4,Ste,Bte;function nke(){return Ete?Cte:(Ete=1,Cte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function rke(){if(Ste)return b4;Ste=1;var a=nke();function e(){}function i(){}return i.resetWarningCache=e,b4=function(){function r(u,A,g,_,b,x){if(x!==a){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}function s(){return r}r.isRequired=r;var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:e};return l.PropTypes=l,l},b4}function ske(){return Bte||(Bte=1,y4.exports=rke()()),y4.exports}var qo=fM(ske()),oke=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function gM(a,e){var i=function(s){var l=s.name;if(l&&l.lastIndexOf(".")!==-1&&!s.type){var u=l.split(".").pop().toLowerCase(),A=oke.get(u);A&&Object.defineProperty(s,"type",{value:A,writable:!1,configurable:!1,enumerable:!0})}return s}(a);if(typeof i.path!="string"){var r=a.webkitRelativePath;Object.defineProperty(i,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:a.name,writable:!1,configurable:!1,enumerable:!0})}return i}var ake=[".DS_Store","Thumbs.db"];function NF(a){return typeof a=="object"&&a!==null}function lke(a){return lz(a.target.files).map(function(e){return gM(e)})}function cke(a){return Ef(this,void 0,void 0,function(){return Sf(this,function(e){switch(e.label){case 0:return[4,Promise.all(a.map(function(i){return i.getFile()}))];case 1:return[2,e.sent().map(function(i){return gM(i)})]}})})}function uke(a,e){return Ef(this,void 0,void 0,function(){var i;return Sf(this,function(r){switch(r.label){case 0:return a===null?[2,[]]:a.items?(i=lz(a.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,i]:[4,Promise.all(i.map(hke))]):[3,2];case 1:return[2,Ite(Rle(r.sent()))];case 2:return[2,Ite(lz(a.files).map(function(s){return gM(s)}))]}})})}function Ite(a){return a.filter(function(e){return ake.indexOf(e.name)===-1})}function lz(a){if(a===null)return[];for(var e=[],i=0;i<a.length;i++){var r=a[i];e.push(r)}return e}function hke(a){if(typeof a.webkitGetAsEntry!="function")return Tte(a);var e=a.webkitGetAsEntry();return e&&e.isDirectory?Dle(e):Tte(a)}function Rle(a){return a.reduce(function(e,i){return function(){for(var r=[],s=0;s<arguments.length;s++)r=r.concat(ERe(arguments[s]));return r}(e,Array.isArray(i)?Rle(i):[i])},[])}function Tte(a){var e=a.getAsFile();if(!e)return Promise.reject(a+" is not a File");var i=gM(e);return Promise.resolve(i)}function dke(a){return Ef(this,void 0,void 0,function(){return Sf(this,function(e){return[2,a.isDirectory?Dle(a):Ake(a)]})})}function Dle(a){var e=a.createReader();return new Promise(function(i,r){var s=[];(function l(){var u=this;e.readEntries(function(A){return Ef(u,void 0,void 0,function(){var g,_,b;return Sf(this,function(x){switch(x.label){case 0:if(A.length)return[3,5];x.label=1;case 1:return x.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return g=x.sent(),i(g),[3,4];case 3:return _=x.sent(),r(_),[3,4];case 4:return[3,6];case 5:b=Promise.all(A.map(dke)),s.push(b),l(),x.label=6;case 6:return[2]}})})},function(A){r(A)})})()})}function Ake(a){return Ef(this,void 0,void 0,function(){return Sf(this,function(e){return[2,new Promise(function(i,r){a.file(function(s){var l=gM(s,a.fullPath);i(l)},function(s){r(s)})})]})})}var Mte,w4={},pke=fM((Mte||(Mte=1,w4.__esModule=!0,w4.default=function(a,e){if(a&&e){var i=Array.isArray(e)?e:e.split(",");if(i.length===0)return!0;var r=a.name||"",s=(a.type||"").toLowerCase(),l=s.replace(/\/.*$/,"");return i.some(function(u){var A=u.trim().toLowerCase();return A.charAt(0)==="."?r.toLowerCase().endsWith(A):A.endsWith("/*")?l===A.replace(/\/.*$/,""):s===A})}return!0}),w4));function Rte(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),i.push.apply(i,r)}return i}function Dte(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Rte(Object(i),!0).forEach(function(r){Fle(a,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):Rte(Object(i)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(i,r))})}return a}function Fle(a,e,i){return e in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function Fte(a,e){return function(i){if(Array.isArray(i))return i}(a)||function(i,r){var s=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(s!=null){var l,u,A=[],g=!0,_=!1;try{for(s=s.call(i);!(g=(l=s.next()).done)&&(A.push(l.value),!r||A.length!==r);g=!0);}catch(b){_=!0,u=b}finally{try{g||s.return==null||s.return()}finally{if(_)throw u}}return A}}(a,e)||function(i,r){if(i){if(typeof i=="string")return Ute(i,r);var s=Object.prototype.toString.call(i).slice(8,-1);if(s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set")return Array.from(i);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Ute(i,r)}}(a,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ute(a,e){(e==null||e>a.length)&&(e=a.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=a[i];return r}var fke=function(a){a=Array.isArray(a)&&a.length===1?a[0]:a;var e=Array.isArray(a)?"one of ".concat(a.join(", ")):a;return{code:"file-invalid-type",message:"File type must be ".concat(e)}},kte=function(a){return{code:"file-too-large",message:"File is larger than ".concat(a," ").concat(a===1?"byte":"bytes")}},Lte=function(a){return{code:"file-too-small",message:"File is smaller than ".concat(a," ").concat(a===1?"byte":"bytes")}},gke={code:"too-many-files",message:"Too many files"};function Pte(a,e){var i=a.type==="application/x-moz-file"||pke(a,e);return[i,i?null:fke(e)]}function Ote(a,e,i){if(TI(a.size))if(TI(e)&&TI(i)){if(a.size>i)return[!1,kte(i)];if(a.size<e)return[!1,Lte(e)]}else{if(TI(e)&&a.size<e)return[!1,Lte(e)];if(TI(i)&&a.size>i)return[!1,kte(i)]}return[!0,null]}function TI(a){return a!=null}function Ik(a){return typeof a.isPropagationStopped=="function"?a.isPropagationStopped():a.cancelBubble!==void 0&&a.cancelBubble}function HF(a){return a.dataTransfer?Array.prototype.some.call(a.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!a.target&&!!a.target.files}function Qte(a){a.preventDefault()}function Lm(){for(var a=arguments.length,e=new Array(a),i=0;i<a;i++)e[i]=arguments[i];return function(r){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return e.some(function(A){return!Ik(r)&&A&&A.apply(void 0,[r].concat(l)),Ik(r)})}}function mke(a){return a=typeof a=="string"?a.split(","):a,[{description:"everything",accept:Array.isArray(a)?a.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,i){return Dte(Dte({},e),{},Fle({},i,[]))},{}):{}}]}var _ke=["children"],vke=["open"],yke=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],bke=["refKey","onChange","onClick"];function wke(a){return function(e){if(Array.isArray(e))return cz(e)}(a)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(a)||Ule(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x4(a,e){return function(i){if(Array.isArray(i))return i}(a)||function(i,r){var s=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(s!=null){var l,u,A=[],g=!0,_=!1;try{for(s=s.call(i);!(g=(l=s.next()).done)&&(A.push(l.value),!r||A.length!==r);g=!0);}catch(b){_=!0,u=b}finally{try{g||s.return==null||s.return()}finally{if(_)throw u}}return A}}(a,e)||Ule(a,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ule(a,e){if(a){if(typeof a=="string")return cz(a,e);var i=Object.prototype.toString.call(a).slice(8,-1);return i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set"?Array.from(a):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?cz(a,e):void 0}}function cz(a,e){(e==null||e>a.length)&&(e=a.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=a[i];return r}function Nte(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),i.push.apply(i,r)}return i}function Ga(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Nte(Object(i),!0).forEach(function(r){uz(a,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):Nte(Object(i)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(i,r))})}return a}function uz(a,e,i){return e in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function Tk(a,e){if(a==null)return{};var i,r,s=function(u,A){if(u==null)return{};var g,_,b={},x=Object.keys(u);for(_=0;_<x.length;_++)g=x[_],A.indexOf(g)>=0||(b[g]=u[g]);return b}(a,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);for(r=0;r<l.length;r++)i=l[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(a,i)&&(s[i]=a[i])}return s}var hz=Ce.forwardRef(function(a,e){var i=a.children,r=Lle(Tk(a,_ke)),s=r.open,l=Tk(r,vke);return Ce.useImperativeHandle(e,function(){return{open:s}},[s]),Ye.createElement(Ce.Fragment,null,i(Ga(Ga({},l),{},{open:s})))});hz.displayName="Dropzone";var kle={disabled:!1,getFilesFromEvent:function(a){return Ef(this,void 0,void 0,function(){return Sf(this,function(e){return NF(a)&&NF(a.dataTransfer)?[2,uke(a.dataTransfer,a.type)]:function(i){return NF(i)&&NF(i.target)}(a)?[2,lke(a)]:Array.isArray(a)&&a.every(function(i){return"getFile"in i&&typeof i.getFile=="function"})?[2,cke(a)]:[2,[]]})})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};hz.defaultProps=kle,hz.propTypes={children:qo.func,accept:qo.oneOfType([qo.string,qo.arrayOf(qo.string)]),multiple:qo.bool,preventDropOnDocument:qo.bool,noClick:qo.bool,noKeyboard:qo.bool,noDrag:qo.bool,noDragEventsBubbling:qo.bool,minSize:qo.number,maxSize:qo.number,maxFiles:qo.number,disabled:qo.bool,getFilesFromEvent:qo.func,onFileDialogCancel:qo.func,onFileDialogOpen:qo.func,useFsAccessApi:qo.bool,onDragEnter:qo.func,onDragLeave:qo.func,onDragOver:qo.func,onDrop:qo.func,onDropAccepted:qo.func,onDropRejected:qo.func,validator:qo.func};var dz={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Lle(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ga(Ga({},kle),a),i=e.accept,r=e.disabled,s=e.getFilesFromEvent,l=e.maxSize,u=e.minSize,A=e.multiple,g=e.maxFiles,_=e.onDragEnter,b=e.onDragLeave,x=e.onDragOver,C=e.onDrop,I=e.onDropAccepted,F=e.onDropRejected,L=e.onFileDialogCancel,U=e.onFileDialogOpen,P=e.useFsAccessApi,H=e.preventDropOnDocument,N=e.noClick,z=e.noKeyboard,W=e.noDrag,j=e.noDragEventsBubbling,J=e.validator,ie=Ce.useMemo(function(){return typeof U=="function"?U:Hte},[U]),ee=Ce.useMemo(function(){return typeof L=="function"?L:Hte},[L]),re=Ce.useRef(null),se=Ce.useRef(null),ue=x4(Ce.useReducer(xke,dz),2),fe=ue[0],pe=ue[1],xe=fe.isFocused,ce=fe.isFileDialogActive,_e=fe.draggedFiles,ye=Ce.useRef(typeof window<"u"&&window.isSecureContext&&P&&"showOpenFilePicker"in window),Oe=function(){!ye.current&&ce&&setTimeout(function(){se.current&&(se.current.files.length||(pe({type:"closeDialog"}),ee()))},300)};Ce.useEffect(function(){return window.addEventListener("focus",Oe,!1),function(){window.removeEventListener("focus",Oe,!1)}},[se,ce,ee,ye]);var ge=Ce.useRef([]),Ee=function(me){re.current&&re.current.contains(me.target)||(me.preventDefault(),ge.current=[])};Ce.useEffect(function(){return H&&(document.addEventListener("dragover",Qte,!1),document.addEventListener("drop",Ee,!1)),function(){H&&(document.removeEventListener("dragover",Qte),document.removeEventListener("drop",Ee))}},[re,H]);var ke=Ce.useCallback(function(me){me.preventDefault(),me.persist(),li(me),ge.current=[].concat(wke(ge.current),[me.target]),HF(me)&&Promise.resolve(s(me)).then(function($e){Ik(me)&&!j||(pe({draggedFiles:$e,isDragActive:!0,type:"setDraggedFiles"}),_&&_(me))})},[s,_,j]),je=Ce.useCallback(function(me){me.preventDefault(),me.persist(),li(me);var $e=HF(me);if($e&&me.dataTransfer)try{me.dataTransfer.dropEffect="copy"}catch{}return $e&&x&&x(me),!1},[x,j]),Ie=Ce.useCallback(function(me){me.preventDefault(),me.persist(),li(me);var $e=ge.current.filter(function(wt){return re.current&&re.current.contains(wt)}),Ct=$e.indexOf(me.target);Ct!==-1&&$e.splice(Ct,1),ge.current=$e,$e.length>0||(pe({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),HF(me)&&b&&b(me))},[re,b,j]),ze=Ce.useCallback(function(me,$e){var Ct=[],wt=[];me.forEach(function(ft){var Ot=x4(Pte(ft,i),2),Gt=Ot[0],si=Ot[1],$t=x4(Ote(ft,u,l),2),ti=$t[0],gi=$t[1],mi=J?J(ft):null;if(Gt&&ti&&!mi)Ct.push(ft);else{var Oi=[si,gi];mi&&(Oi=Oi.concat(mi)),wt.push({file:ft,errors:Oi.filter(function(Bi){return Bi})})}}),(!A&&Ct.length>1||A&&g>=1&&Ct.length>g)&&(Ct.forEach(function(ft){wt.push({file:ft,errors:[gke]})}),Ct.splice(0)),pe({acceptedFiles:Ct,fileRejections:wt,type:"setFiles"}),C&&C(Ct,wt,$e),wt.length>0&&F&&F(wt,$e),Ct.length>0&&I&&I(Ct,$e)},[pe,A,i,u,l,g,C,I,F,J]),ht=Ce.useCallback(function(me){me.preventDefault(),me.persist(),li(me),ge.current=[],HF(me)&&Promise.resolve(s(me)).then(function($e){Ik(me)&&!j||ze($e,me)}),pe({type:"reset"})},[s,ze,j]),lt=Ce.useCallback(function(){if(ye.current){pe({type:"openDialog"}),ie();var me={multiple:A,types:mke(i)};window.showOpenFilePicker(me).then(function($e){return s($e)}).then(function($e){ze($e,null),pe({type:"closeDialog"})}).catch(function($e){(function(Ct){return Ct instanceof DOMException&&(Ct.name==="AbortError"||Ct.code===Ct.ABORT_ERR)})($e)?(ee($e),pe({type:"closeDialog"})):function(Ct){return Ct instanceof DOMException&&(Ct.name==="SecurityError"||Ct.code===Ct.SECURITY_ERR)}($e)&&(ye.current=!1,se.current&&(se.current.value=null,se.current.click()))})}else se.current&&(pe({type:"openDialog"}),ie(),se.current.value=null,se.current.click())},[pe,ie,ee,P,ze,i,A]),yt=Ce.useCallback(function(me){re.current&&re.current.isEqualNode(me.target)&&(me.key!==" "&&me.key!=="Enter"&&me.keyCode!==32&&me.keyCode!==13||(me.preventDefault(),lt()))},[re,lt]),Nt=Ce.useCallback(function(){pe({type:"focus"})},[]),zt=Ce.useCallback(function(){pe({type:"blur"})},[]),ei=Ce.useCallback(function(){N||(function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return function($e){return $e.indexOf("MSIE")!==-1||$e.indexOf("Trident/")!==-1}(me)||function($e){return $e.indexOf("Edge/")!==-1}(me)}()?setTimeout(lt,0):lt())},[N,lt]),it=function(me){return r?null:me},Dt=function(me){return z?null:it(me)},Be=function(me){return W?null:it(me)},li=function(me){j&&me.stopPropagation()},bt=Ce.useMemo(function(){return function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$e=me.refKey,Ct=$e===void 0?"ref":$e,wt=me.role,ft=me.onKeyDown,Ot=me.onFocus,Gt=me.onBlur,si=me.onClick,$t=me.onDragEnter,ti=me.onDragOver,gi=me.onDragLeave,mi=me.onDrop,Oi=Tk(me,yke);return Ga(Ga(uz({onKeyDown:Dt(Lm(ft,yt)),onFocus:Dt(Lm(Ot,Nt)),onBlur:Dt(Lm(Gt,zt)),onClick:it(Lm(si,ei)),onDragEnter:Be(Lm($t,ke)),onDragOver:Be(Lm(ti,je)),onDragLeave:Be(Lm(gi,Ie)),onDrop:Be(Lm(mi,ht)),role:typeof wt=="string"&&wt!==""?wt:"button"},Ct,re),r||z?{}:{tabIndex:0}),Oi)}},[re,yt,Nt,zt,ei,ke,je,Ie,ht,z,W,r]),Wt=Ce.useCallback(function(me){me.stopPropagation()},[]),qe=Ce.useMemo(function(){return function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$e=me.refKey,Ct=$e===void 0?"ref":$e,wt=me.onChange,ft=me.onClick,Ot=Tk(me,bke);return Ga(Ga({},uz({accept:i,multiple:A,type:"file",style:{display:"none"},onChange:it(Lm(wt,ht)),onClick:it(Lm(ft,Wt)),tabIndex:-1},Ct,se)),Ot)}},[se,i,A,ht,r]),pt=_e.length,At=pt>0&&function(me){var $e=me.files,Ct=me.accept,wt=me.minSize,ft=me.maxSize,Ot=me.multiple,Gt=me.maxFiles;return!(!Ot&&$e.length>1||Ot&&Gt>=1&&$e.length>Gt)&&$e.every(function(si){var $t=Fte(Pte(si,Ct),1)[0],ti=Fte(Ote(si,wt,ft),1)[0];return $t&&ti})}({files:_e,accept:i,minSize:u,maxSize:l,multiple:A,maxFiles:g}),Se=pt>0&&!At;return Ga(Ga({},fe),{},{isDragAccept:At,isDragReject:Se,isFocused:xe&&!r,getRootProps:bt,getInputProps:qe,rootRef:re,inputRef:se,open:it(lt)})}function xke(a,e){switch(e.type){case"focus":return Ga(Ga({},a),{},{isFocused:!0});case"blur":return Ga(Ga({},a),{},{isFocused:!1});case"openDialog":return Ga(Ga({},dz),{},{isFileDialogActive:!0});case"closeDialog":return Ga(Ga({},a),{},{isFileDialogActive:!1});case"setDraggedFiles":var i=e.isDragActive,r=e.draggedFiles;return Ga(Ga({},a),{},{draggedFiles:r,isDragActive:i});case"setFiles":return Ga(Ga({},a),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Ga({},dz);default:return a}}function Hte(){}function Cke(a){let e;const i=new Set,r=(u,A)=>{const g=typeof u=="function"?u(e):u;if(g!==e){const _=e;e=A?g:Object.assign({},e,g),i.forEach(b=>b(e,_))}},s=()=>e,l={setState:r,getState:s,subscribe:(u,A,g)=>A||g?((_,b=s,x=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let C=b(e);function I(){const F=b(e);if(!x(C,F)){const L=C;_(C=F,L)}}return i.add(I),()=>i.delete(I)})(u,A,g):(i.add(u),()=>i.delete(u)),destroy:()=>i.clear()};return e=a(r,s,l),l}const zte=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?Ce.useEffect:Ce.useLayoutEffect;/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Gte,Vte,C4,qte,$te,Wte,jte,Kte,Xte,Yte,E4,Jte,Zte,eie,S4,tie,B4,iie,nie,rie,I4,sie,oie,aie,lie,cie,T4,uie;function Ple(){if(qte)return C4;qte=1;var a=Vte?Gte:(Vte=1,Gte=function(i){return i!=null&&typeof i=="object"&&Array.isArray(i)===!1});function e(i){return a(i)===!0&&Object.prototype.toString.call(i)==="[object Object]"}return C4=function(i){var r,s;return e(i)!==!1&&typeof(r=i.constructor)=="function"&&e(s=r.prototype)!==!1&&s.hasOwnProperty("isPrototypeOf")!==!1},C4}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Az(){if(Wte)return $te;Wte=1;var a=Ple();return $te=function(e){return a(e)||typeof e=="function"||Array.isArray(e)}}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Eke(){return Kte?jte:(Kte=1,jte=function(a,e,i){for(var r in a)if(e.call(i,a[r],r,a)===!1)break})}function Ske(){return eie||(eie=1,Zte=function(a,e){if(a==null)throw new TypeError("expected first argument to be an object.");if(e===void 0||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return a;for(var i=Object.prototype.propertyIsEnumerable,r=Object(a),s=arguments.length,l=0;++l<s;)for(var u=Object(arguments[l]),A=Object.getOwnPropertySymbols(u),g=0;g<A.length;g++){var _=A[g];i.call(u,_)&&(r[_]=u[_])}return r}),Zte}function Bke(){if(iie)return B4;iie=1;var a=function(){if(tie)return S4;tie=1;var s=Az(),l=Ske();function u(x,C){for(var I in C)b(C,I)&&(x[I]=C[I])}function A(x){return x&&typeof x=="string"}function g(x){var C={};for(var I in x)C[I]=x[I];return C}function _(x){return x&&typeof x=="object"||s(x)}function b(x,C){return Object.prototype.hasOwnProperty.call(x,C)}return S4=Object.assign||function(x){if(x==null)throw new TypeError("Cannot convert undefined or null to object");_(x)||(x={});for(var C=1;C<arguments.length;C++){var I=arguments[C];A(I)&&(I=g(I)),_(I)&&(u(x,I),l(x,I))}return x},S4}();function e(s,l,u,A){var g=s.indexOf(l,u);return s.charAt(g-1)==="\\"?e(s,l,g+1):g}function i(s,l){return l.keepDoubleQuotes===!0&&s==='"'||l.keepSingleQuotes===!0&&s==="'"||l.keepQuotes}function r(s,l,u){return typeof s.keepEscaping=="function"?s.keepEscaping(l,u):s.keepEscaping===!0||l[u+1]==="\\"}return B4=function(s,l,u){if(typeof s!="string")throw new TypeError("expected a string");typeof l=="function"&&(u=l,l=null),typeof l=="string"&&(l={sep:l});var A,g=a({sep:"."},l),_=g.quotes||['"',"'","`"];g.brackets===!0?A={"<":">","(":")","[":"]","{":"}"}:g.brackets&&(A=g.brackets);var b,x=[],C=[],I=[""],F=g.sep,L=s.length,U=-1;function P(){if(A&&C.length)return A[C[C.length-1]]}for(;++U<L;){var H=s[U],N=s[U+1],z={val:H,idx:U,arr:I,str:s};if(x.push(z),H!=="\\"){if(A&&A[H]){C.push(H);var W=P(),j=U+1;if(s.indexOf(W,j+1)!==-1)for(;C.length&&j<L;){var J=s[++j];if(J!=="\\")if(_.indexOf(J)===-1){if(W=P(),C.length&&s.indexOf(W,j+1)===-1)break;A[J]?C.push(J):W===J&&C.pop()}else j=e(s,J,j+1);else J++}if((b=j)===-1){I[I.length-1]+=H;continue}H=s.slice(U,b+1),z.val=H,z.idx=U=b}if(_.indexOf(H)!==-1){if((b=e(s,H,U+1))===-1){I[I.length-1]+=H;continue}H=i(H,g)===!0?s.slice(U,b+1):s.slice(U+1,b),z.val=H,z.idx=U=b}typeof u=="function"&&(u(z,x),H=z.val,U=z.idx),z.val!==F||z.split===!1?I[I.length-1]+=z.val:I.push("")}else z.val=r(g,s,U)===!0?H+N:N,z.escaped=!0,typeof u=="function"&&u(z),I[I.length-1]+=z.val,U++}return I},B4}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */function Ike(){if(sie)return I4;sie=1;var a=rie?nie:(rie=1,nie=function(r){return r!=null&&(typeof r=="object"||typeof r=="function")});function e(r,s){for(var l in s)i(s,l)&&(r[l]=s[l])}function i(r,s){return Object.prototype.hasOwnProperty.call(r,s)}return I4=function(r){a(r)||(r={});for(var s=arguments.length,l=1;l<s;l++){var u=arguments[l];a(u)&&e(r,u)}return r},I4}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */function Tke(){if(cie)return lie;cie=1;var a=Bke(),e=Ike(),i=Ple(),r=aie?oie:(aie=1,oie=function(l){return l!=null&&(typeof l=="object"||typeof l=="function")});function s(l){return l!=="__proto__"&&l!=="constructor"&&l!=="prototype"}return lie=function(l,u,A){if(!r(l)||(Array.isArray(u)&&(u=[].concat.apply([],u).join(".")),typeof u!="string"))return l;for(var g=a(u,{sep:".",brackets:!0}).filter(s),_=g.length,b=-1,x=l;++b<_;){var C=g[b];b===_-1?i(x[C])&&i(A)?x[C]=e({},x[C],A):x[C]=A:(r(x[C])||(x[C]={}),x=x[C])}return l}}var Mke=function(){if(uie)return T4;uie=1;var a=Az(),e=function(){if(Yte)return Xte;Yte=1;var s=Az(),l=Eke();function u(_,b){for(var x=arguments.length,C=0;++C<x;){var I=arguments[C];g(I)&&l(I,A,_)}return _}function A(_,b){if(function(C){return C!=="__proto__"&&C!=="constructor"&&C!=="prototype"}(b)){var x=this[b];g(_)&&g(x)?u(x,_):this[b]=_}}function g(_){return s(_)&&!Array.isArray(_)}return Xte=u}(),i=function(){if(Jte)return E4;function s(l){return l?Array.isArray(l)?l.join("."):l:""}return Jte=1,E4=function(l,u,A,g,_){if((b=l)===null||typeof b!="object"&&typeof b!="function"||!u)return l;var b;if(u=s(u),A&&(u+="."+s(A)),g&&(u+="."+s(g)),_&&(u+="."+s(_)),u in l)return l[u];for(var x=u.split("."),C=x.length,I=-1;l&&++I<C;){for(var F=x[I];F[F.length-1]==="\\";)F=F.slice(0,-1)+"."+x[++I];l=l[F]}return l},E4}(),r=Tke();return T4=function(s,l,u){if(!a(s))throw new TypeError("expected an object");if(typeof l!="string"||u==null)return e.apply(null,arguments);if(typeof u=="string")return r(s,l,u),s;var A=i(s,l);return a(u)&&a(A)&&(u=e({},A,u)),r(s,l,u),s},T4}(),Rke=fM(Mke);const K7=(...a)=>a.filter(Boolean).join(".");function Ole(a,e){return Ce.useMemo(a,function(i){const r=Ce.useRef();return QT(i,r.current)||(r.current=i),r.current}(e))}function Dke(a,e,i){return a.useStore(s=>function(l,u){return Object.entries((A=l,g=u,g.reduce((_,b)=>(A&&A.hasOwnProperty(b)&&(_[b]=A[b]),_),{}))).reduce((_,[,{value:b,disabled:x,key:C}])=>(_[C]=x?void 0:b,_),{});var A,g}(Yn(Yn({},i),s.data),e),UL)}function Qle(a=3){const e=Ce.useRef(null),i=Ce.useRef(null),[r,s]=Ce.useState(!1),l=Ce.useCallback(()=>s(!0),[]),u=Ce.useCallback(()=>s(!1),[]);return Ce.useLayoutEffect(()=>{if(r){const{bottom:A,top:g,left:_}=e.current.getBoundingClientRect(),{height:b}=i.current.getBoundingClientRect(),x=A+b>window.innerHeight-40?"up":"down";i.current.style.position="fixed",i.current.style.zIndex="10000",i.current.style.left=_+"px",x==="down"?i.current.style.top=A+a+"px":i.current.style.bottom=window.innerHeight-g+a+"px"}},[a,r]),{popinRef:e,wrapperRef:i,shown:r,show:l,hide:u}}(function(a){a.forEach(function(e){vte.indexOf(e)<0&&(e(rz,nz),vte.push(e))})})([function(a,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var s in i)r[i[s]]=s;var l={};a.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var A,g,_=r[this.toHex()];if(_)return _;if(u!=null&&u.closest){var b=this.toRgb(),x=1/0,C="black";if(!l.length)for(var I in i)l[I]=new a(i[I]).toRgb();for(var F in i){var L=(A=b,g=l[F],Math.pow(A.r-g.r,2)+Math.pow(A.g-g.g,2)+Math.pow(A.b-g.b,2));L<x&&(x=L,C=F)}return C}},e.string.push([function(u){var A=u.toLowerCase(),g=A==="transparent"?"#0000":i[A];return g?new a(g).toRgb():null},"name"])}]);const Fke={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};RA.extend({color:()=>a=>Od(a).isValid()});function Nle(a,{format:e,hasAlpha:i,isString:r}){const s=a[Fke[e]+(r&&e!=="hex"?"String":"")]();return typeof s!="object"||i?s:function(l,u){const A=Yn({},l);return u.forEach(g=>g in l&&delete A[g]),A}(s,["a"])}const hie=(a,e)=>{const i=Od(a);if(!i.isValid())throw Error("Invalid color");return Nle(i,e)};var Uke=Object.freeze({__proto__:null,schema:a=>RA().color().test(a),sanitize:hie,format:(a,e)=>Nle(Od(a),Yn(Yn({},e),{},{isString:!0,format:"hex"})),normalize:({value:a})=>{const e=function(r){return xle(r)[1]}(a),i={format:e==="name"?"hex":e,hasAlpha:typeof a=="object"?"a"in a:e==="hex"&&a.length===8||/^(rgba)|(hsla)|(hsva)/.test(a),isString:typeof a=="string"};return{value:hie(a,i),settings:i}}});const kke=zn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Lke=zn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Pke=zn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function die(a,e){return e!=="rgb"?Od(a).toRgb():a}function Oke({value:a,displayValue:e,settings:i,onUpdate:r}){const{emitOnEditStart:s,emitOnEditEnd:l}=$h(),{format:u,hasAlpha:A}=i,{popinRef:g,wrapperRef:_,shown:b,show:x,hide:C}=Qle(),I=Ce.useRef(0),[F,L]=Ce.useState(()=>die(a,u)),U=A?eke:ike,P=()=>{C(),l(),window.clearTimeout(I.current)};return Ce.useEffect(()=>()=>window.clearTimeout(I.current),[]),Ye.createElement(Ye.Fragment,null,Ye.createElement(kke,{ref:g,active:b,onClick:()=>(L(die(a,u)),x(),void s()),style:{color:e}}),b&&Ye.createElement(z7,null,Ye.createElement(hle,{onPointerUp:P}),Ye.createElement(Pke,{ref:_,onMouseEnter:()=>window.clearTimeout(I.current),onMouseLeave:H=>H.buttons===0&&void(I.current=window.setTimeout(P,500))},Ye.createElement(U,{color:F,onChange:r}))))}var Qke=Yn({component:function(){const{value:a,displayValue:e,label:i,onChange:r,onUpdate:s,settings:l}=$h();return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,i),Ye.createElement(Lke,null,Ye.createElement(Oke,{value:a,displayValue:e,onChange:r,onUpdate:s,settings:l}),Ye.createElement(H7,{value:e,onChange:r,onUpdate:s})))}},Uke),Nke=Yn({component:function(){const{label:a,displayValue:e,onUpdate:i,settings:r}=$h();return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,a),Ye.createElement(V7,{value:e,settings:r,onUpdate:i}))}},vle(["x","y","z"]));const Hke=zn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),zke=zn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Gke({value:a,settings:e,onUpdate:i}){const r=Ce.useRef(),s=Ce.useRef(0),l=Ce.useRef(0),u=Ce.useRef(1),[A,g]=Ce.useState(!1),[_,b]=Ce.useState(!1),[x,C]=Ale(),I=Ce.useRef(null),F=Ce.useRef(null);Ce.useLayoutEffect(()=>{if(A){const{top:ue,left:fe,width:pe,height:xe}=I.current.getBoundingClientRect();F.current.style.left=fe+pe/2+"px",F.current.style.top=ue+xe/2+"px"}},[A]);const{keys:[L,U],joystick:P}=e,H=P==="invertY"?1:-1,{[L]:{step:N},[U]:{step:z}}=e,W=zv("sizes","joystickWidth"),j=zv("sizes","joystickHeight"),J=.8*parseFloat(W)/2,ie=.8*parseFloat(j)/2,ee=Ce.useCallback(()=>{r.current||(b(!0),s.current&&C({x:s.current*J}),l.current&&C({y:l.current*-ie}),r.current=window.setInterval(()=>{i(ue=>{const fe=N*s.current*u.current,pe=H*z*l.current*u.current;return Array.isArray(ue)?{[L]:ue[0]+fe,[U]:ue[1]+pe}:{[L]:ue[L]+fe,[U]:ue[U]+pe}})},16))},[J,ie,i,C,N,z,L,U,H]),re=Ce.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,b(!1)},[]);Ce.useEffect(()=>{function ue(fe){u.current=Jae(fe)}return window.addEventListener("keydown",ue),window.addEventListener("keyup",ue),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",ue),window.removeEventListener("keyup",ue)}},[]);const se=AM(({first:ue,active:fe,delta:[pe,xe],movement:[ce,_e]})=>{ue&&g(!0);const ye=eb(ce,-J,J),Oe=eb(_e,-ie,ie);s.current=Math.abs(ce)>Math.abs(ye)?Math.sign(ce-ye):0,l.current=Math.abs(_e)>Math.abs(Oe)?Math.sign(Oe-_e):0;let ge=a[L],Ee=a[U];fe?(s.current||(ge+=pe*N*u.current,C({x:ye})),l.current||(Ee-=H*xe*z*u.current,C({y:Oe})),s.current||l.current?ee():re(),i({[L]:ge,[U]:Ee})):(g(!1),s.current=0,l.current=0,C({x:0,y:0}),re())});return Ye.createElement(Hke,pl({ref:I},se()),A&&Ye.createElement(z7,null,Ye.createElement(zke,{ref:F,isOutOfBounds:_},Ye.createElement("div",null),Ye.createElement("span",{ref:x}))))}const Vke=zn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}}),qke=["joystick"],Aie=vle(["x","y"]);var $ke=Yn(Yn({component:function(){const{label:a,displayValue:e,onUpdate:i,settings:r}=$h();return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,a),Ye.createElement(Vke,{withJoystick:!!r.joystick},r.joystick&&Ye.createElement(Gke,{value:e,settings:r,onUpdate:i}),Ye.createElement(V7,{value:e,settings:r,onUpdate:i})))}},Aie),{},{normalize:a=>{let{joystick:e=!0}=a,i=Eo(a,qke);const{value:r,settings:s}=Aie.normalize(i);return{value:r,settings:Yn(Yn({},s),{},{joystick:e})}}}),Wke=Object.freeze({__proto__:null,sanitize:a=>{if(a!==void 0){if(a instanceof File)try{return URL.createObjectURL(a)}catch{return}if(typeof a=="string"&&a.indexOf("blob:")===0)return a;throw Error("Invalid image format [undefined | blob |File].")}},schema:(a,e)=>typeof e=="object"&&"image"in e,normalize:({image:a})=>({value:a})});const jke=zn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Kke=zn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Xke=zn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Yke=zn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Jke=zn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Zke=zn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var eLe=Yn({component:function(){const{label:a,value:e,onUpdate:i,disabled:r}=$h(),{popinRef:s,wrapperRef:l,shown:u,show:A,hide:g}=Qle(),_=Ce.useCallback(F=>{F.length&&i(F[0])},[i]),b=Ce.useCallback(F=>{F.stopPropagation(),i(void 0)},[i]),{getRootProps:x,getInputProps:C,isDragAccept:I}=Lle({maxFiles:1,accept:"image/*",onDrop:_,disabled:r});return Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,a),Ye.createElement(jke,null,Ye.createElement(Xke,{ref:s,hasImage:!!e,onPointerDown:()=>!!e&&A(),onPointerUp:g,style:{backgroundImage:e?`url(${e})`:"none"}}),u&&!!e&&Ye.createElement(z7,null,Ye.createElement(hle,{onPointerUp:g,style:{cursor:"pointer"}}),Ye.createElement(Yke,{ref:l,style:{backgroundImage:`url(${e})`}})),Ye.createElement(Kke,x({isDragAccept:I}),Ye.createElement("input",C()),Ye.createElement(Jke,null,I?"drop image":"click or drop")),Ye.createElement(Zke,{onClick:b,disabled:!e})))}},Wke);const pie=RA().number(),vU=a=>({min:a[0],max:a[1]}),fie=(a,{bounds:[e,i]},r)=>{const s=Array.isArray(a)?vU(a):a,l={min:r[0],max:r[1]},{min:u,max:A}=Yn(Yn({},l),s);return[eb(Number(u),e,Math.max(e,A)),eb(Number(A),Math.min(i,u),i)]};var tLe=Object.freeze({__proto__:null,schema:(a,e)=>RA().array().length(2).every.number().test(a)&&RA().schema({min:pie,max:pie}).test(e),format:vU,sanitize:fie,normalize:({value:a,min:e,max:i})=>{const r={min:e,max:i},s=[e,i],l=Yn(Yn({},_le(vU(a),{min:r,max:r})),{},{bounds:s});return{value:fie(vU(a),l,a),settings:l}}});const iLe=["value","bounds","onDrag"],nLe=["bounds"],rLe=zn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function sLe(a){let{value:e,bounds:[i,r],onDrag:s}=a,l=Eo(a,iLe);const u=Ce.useRef(null),A=Ce.useRef(null),g=Ce.useRef(null),_=Ce.useRef(0),b=zv("sizes","scrubberWidth"),x=AM(({event:F,first:L,xy:[U],movement:[P],memo:H={}})=>{if(L){const{width:z,left:W}=u.current.getBoundingClientRect();_.current=z-parseFloat(b);const j=(F==null?void 0:F.target)===A.current||(F==null?void 0:F.target)===g.current;H.pos=Sk((U-W)/z,i,r);const J=Math.abs(H.pos-e.min)-Math.abs(H.pos-e.max);H.key=J<0||J===0&&H.pos<=e.min?"min":"max",j&&(H.pos=e[H.key])}const N=H.pos+Sk(P/_.current,0,r-i);return s({[H.key]:yUe(N,l[H.key])}),H}),C=`calc(${Ek(e.min,i,r)} * (100% - ${b} - 8px) + 4px)`,I=`calc(${1-Ek(e.max,i,r)} * (100% - ${b} - 8px) + 4px)`;return Ye.createElement(fle,pl({ref:u},x()),Ye.createElement(ple,null,Ye.createElement(gle,{style:{left:C,right:I}})),Ye.createElement(tz,{position:"left",ref:A,style:{left:C}}),Ye.createElement(tz,{position:"right",ref:g,style:{right:I}}))}var oLe=Yn({component:function(){const{label:a,displayValue:e,onUpdate:i,settings:r}=$h(),s=Eo(r,nLe);return Ye.createElement(Ye.Fragment,null,Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,null,a),Ye.createElement(rLe,null,Ye.createElement(sLe,pl({value:e},r,{onDrag:i})),Ye.createElement(V7,{value:e,settings:s,onUpdate:i,innerLabelTrim:0}))))}},tLe);const aLe=["type","value"],lLe=["onChange","transient","onEditStart","onEditEnd"],Hle=new function(){const a=function(u){const A=typeof u=="function"?Cke(u):u,g=(_=A.getState,b=Object.is)=>{const[,x]=Ce.useReducer(j=>j+1,0),C=A.getState(),I=Ce.useRef(C),F=Ce.useRef(_),L=Ce.useRef(b),U=Ce.useRef(!1),P=Ce.useRef();let H;P.current===void 0&&(P.current=_(C));let N=!1;(I.current!==C||F.current!==_||L.current!==b||U.current)&&(H=_(C),N=!b(P.current,H)),zte(()=>{N&&(P.current=H),I.current=C,F.current=_,L.current=b,U.current=!1});const z=Ce.useRef(C);zte(()=>{const j=()=>{try{const ie=A.getState(),ee=F.current(ie);L.current(P.current,ee)||(I.current=ie,P.current=ee,x())}catch{U.current=!0,x()}},J=A.subscribe(j);return A.getState()!==z.current&&j(),J},[]);const W=N?H:P.current;return Ce.useDebugValue(W),W};return Object.assign(g,A),g[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const _=[g,A];return{next(){const b=_.length<=0;return{value:_.shift(),done:b}}}},g}((e=()=>({data:{}}),(u,A,g)=>{const _=g.subscribe;return g.subscribe=(b,x,C)=>{let I=b;if(x){const F=(C==null?void 0:C.equalityFn)||Object.is;let L=b(g.getState());I=U=>{const P=b(U);if(!F(L,P)){const H=L;x(L=P,H)}},C!=null&&C.fireImmediately&&x(L,L)}return _(I)},e(u,A,g)}));var e;const i=(()=>{const u=new Map;return{on:(A,g)=>{let _=u.get(A);_===void 0&&(_=new Set,u.set(A,_)),_.add(g)},off:(A,g)=>{const _=u.get(A);_!==void 0&&(_.delete(g),_.size===0&&u.delete(A))},emit:(A,...g)=>{const _=u.get(A);if(_!==void 0)for(const b of _)b(...g)}}})();this.storeId="_"+Math.random().toString(36).substr(2,9),this.useStore=a;const r={},s=new Set;this.getVisiblePaths=()=>{const u=this.getData(),A=Object.keys(u),g=[];Object.entries(r).forEach(([b,x])=>{x.render&&A.some(C=>C.indexOf(b)===0)&&!x.render(this.get)&&g.push(b+".")});const _=[];return s.forEach(b=>{b in u&&u[b].__refCount>0&&g.every(x=>b.indexOf(x)===-1)&&(!u[b].render||u[b].render(this.get))&&_.push(b)}),_},this.setOrderedPaths=u=>{u.forEach(A=>s.add(A))},this.orderPaths=u=>(this.setOrderedPaths(u),u),this.disposePaths=u=>{a.setState(A=>{const g=A.data;return u.forEach(_=>{if(_ in g){const b=g[_];b.__refCount--,b.__refCount===0&&b.type in kg&&delete g[_]}}),{data:g}})},this.dispose=()=>{a.setState(()=>({data:{}}))},this.getFolderSettings=u=>r[u]||{},this.getData=()=>a.getState().data,this.addData=(u,A)=>{a.setState(g=>{const _=g.data;return Object.entries(u).forEach(([b,x])=>{let C=_[b];if(C){const{type:I,value:F}=x,L=Eo(x,aLe);I!==C.type?Dv(qa.INPUT_TYPE_OVERRIDE,I):((C.__refCount===0||A)&&Object.assign(C,L),C.__refCount++)}else _[b]=Yn(Yn({},x),{},{__refCount:1})}),{data:_}})},this.setValueAtPath=(u,A,g)=>{a.setState(_=>{const b=_.data;return dte(b[u],A,u,this,g),{data:b}})},this.setSettingsAtPath=(u,A)=>{a.setState(g=>{const _=g.data;return _[u].settings=Yn(Yn({},_[u].settings),A),{data:_}})},this.disableInputAtPath=(u,A)=>{a.setState(g=>{const _=g.data;return _[u].disabled=A,{data:_}})},this.set=(u,A)=>{a.setState(g=>{const _=g.data;return Object.entries(u).forEach(([b,x])=>{try{dte(_[b],x,void 0,void 0,A)}catch{}}),{data:_}})},this.getInput=u=>{try{return this.getData()[u]}catch{Dv(qa.PATH_DOESNT_EXIST,u)}},this.get=u=>{var A;return(A=this.getInput(u))===null||A===void 0?void 0:A.value},this.emitOnEditStart=u=>{i.emit(`onEditStart:${u}`,this.get(u),u,Yn(Yn({},this.getInput(u)),{},{get:this.get}))},this.emitOnEditEnd=u=>{i.emit(`onEditEnd:${u}`,this.get(u),u,Yn(Yn({},this.getInput(u)),{},{get:this.get}))},this.subscribeToEditStart=(u,A)=>{const g=`onEditStart:${u}`;return i.on(g,A),()=>i.off(g,A)},this.subscribeToEditEnd=(u,A)=>{const g=`onEditEnd:${u}`;return i.on(g,A),()=>i.off(g,A)};const l=(u,A,g)=>{const _={};return Object.entries(u).forEach(([b,x])=>{if(b==="")return Dv(qa.EMPTY_KEY);let C=K7(A,b);if(x.type===kg.FOLDER){const I=l(x.schema,C,g);Object.assign(_,I),C in r||(r[C]=x.settings)}else if(b in g)Dv(qa.DUPLICATE_KEYS,b,C,g[b].path);else{const I=function(F,L,U,P){const H=Kae(F,L),{type:N,input:z,options:W}=H;if(N)return N in kg?H:{type:N,input:p4(N,z,U,P),options:W};let j=tte(z);return j?{type:j,input:p4(j,z,U,P),options:W}:(j=tte({value:z}),!!j&&{type:j,input:p4(j,{value:z},U,P),options:W})}(x,b,C,_);if(I){const{type:F,options:L,input:U}=I,{onChange:P,transient:H,onEditStart:N,onEditEnd:z}=L,W=Eo(L,lLe);_[C]=Yn(Yn(Yn({type:F},W),U),{},{fromPanel:!0}),g[b]={path:C,onChange:P,transient:H,onEditStart:N,onEditEnd:z}}else Dv(qa.UNKNOWN_INPUT,C,x)}}),_};this.getDataFromSchema=u=>{const A={};return[l(u,"",A),A]}},cLe={collapsed:!1};function X7(a,e){return{type:kg.FOLDER,schema:a,settings:Yn(Yn({},cLe),e)}}const gie=a=>"__levaInput"in a,uLe=["type","label","path","valueKey","value","settings","setValue","disabled"];function hLe(a){let{type:e,label:i,path:r,valueKey:s,value:l,settings:u,setValue:A,disabled:g}=a,_=Eo(a,uLe);const{displayValue:b,onChange:x,onUpdate:C}=dle({type:e,value:l,settings:u,setValue:A}),I=Qw[e].component;return I?Ye.createElement(nle.Provider,{value:Yn({key:s,path:r,id:""+r,label:i,displayValue:b,value:l,onChange:x,onUpdate:C,settings:u,setValue:A,disabled:g},_)},Ye.createElement(aUe,{disabled:g},Ye.createElement(I,null))):(Dv(qa.NO_COMPONENT_FOR_TYPE,e,r),null)}const dLe=zn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}}),ALe=zn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),pLe=zn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),fLe=zn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),gLe=Ce.forwardRef(function({initialValue:a},e){const i=zv("colors","highlight3"),r=zv("colors","elevation2"),s=zv("colors","highlight1"),[l,u]=Ce.useMemo(()=>[Od(s).alpha(.4).toRgbString(),Od(s).alpha(.1).toRgbString()],[s]),A=Ce.useRef([a]),g=Ce.useRef(a),_=Ce.useRef(a),b=Ce.useRef(),x=Ce.useCallback((F,L)=>{if(!F)return;const{width:U,height:P}=F,H=new Path2D,N=U/100,z=.05*P;for(let J=0;J<A.current.length;J++){const ie=N*J,ee=P-Ek(A.current[J],g.current,_.current)*(P-2*z)-z;H.lineTo(ie,ee)}L.clearRect(0,0,U,P);const W=new Path2D(H);W.lineTo(N*(A.current.length+1),P),W.lineTo(0,P),W.lineTo(0,0);const j=L.createLinearGradient(0,0,0,P);j.addColorStop(0,l),j.addColorStop(1,u),L.fillStyle=j,L.fill(W),L.strokeStyle=r,L.lineJoin="round",L.lineWidth=14,L.stroke(H),L.strokeStyle=i,L.lineWidth=2,L.stroke(H)},[i,r,l,u]),[C,I]=function(F){const L=Ce.useRef(null),U=Ce.useRef(null),P=Ce.useRef(!1);return Ce.useEffect(()=>{const H=Yae(()=>{L.current.width=L.current.offsetWidth*window.devicePixelRatio,L.current.height=L.current.offsetHeight*window.devicePixelRatio,F(L.current,U.current)},250);return window.addEventListener("resize",H),P.current||(H(),P.current=!0),()=>window.removeEventListener("resize",H)},[F]),Ce.useEffect(()=>{U.current=L.current.getContext("2d")},[]),[L,U]}(x);return Ce.useImperativeHandle(e,()=>({frame:F=>{(g.current===void 0||F<g.current)&&(g.current=F),(_.current===void 0||F>_.current)&&(_.current=F),function(L,U){L.push(U),L.length>100&&L.shift()}(A.current,F),b.current=requestAnimationFrame(()=>x(C.current,I.current))}}),[C,I,x]),Ce.useEffect(()=>()=>cancelAnimationFrame(b.current),[]),Ye.createElement(fLe,{ref:C})}),mie=a=>Number.isFinite(a)?a.toPrecision(2):a.toString(),mLe=Ce.forwardRef(function({initialValue:a},e){const[i,r]=Ce.useState(mie(a));return Ce.useImperativeHandle(e,()=>({frame:s=>r(mie(s))}),[]),Ye.createElement("div",null,i)});function _ie(a){return typeof a=="function"?a():a.current}const _Le=["type","label","key"],vLe={[kg.BUTTON]:function({onClick:a,settings:e,label:i}){const r=VT();return Ye.createElement(Bf,null,Ye.createElement(dLe,{disabled:e.disabled,onClick:()=>a(r.get)},i))},[kg.BUTTON_GROUP]:function(a){const{label:e,opts:i}=(({label:s,opts:l})=>{let u=typeof s=="string"&&s.trim()===""?null:s,A=l;return typeof l.opts=="object"&&(A.label!==void 0&&(u=l.label),A=l.opts),{label:u,opts:A}})(a),r=VT();return Ye.createElement(Bf,{input:!!e},e&&Ye.createElement(Lg,null,e),Ye.createElement(ALe,null,Object.entries(i).map(([s,l])=>Ye.createElement(pLe,{key:s,onClick:()=>l(r.get)},s))))},[kg.MONITOR]:function({label:a,objectOrFn:e,settings:i}){const r=Ce.useRef(),s=Ce.useRef(_ie(e));return Ce.useEffect(()=>{const l=window.setInterval(()=>{var u;document.hidden||(u=r.current)===null||u===void 0||u.frame(_ie(e))},i.interval);return()=>window.clearInterval(l)},[e,i.interval]),Ye.createElement(Bf,{input:!0},Ye.createElement(Lg,{align:"top"},a),i.graph?Ye.createElement(gLe,{ref:r,initialValue:s.current}):Ye.createElement(mLe,{ref:r,initialValue:s.current}))}},yLe=Ye.memo(({path:a})=>{const[e,{set:i,setSettings:r,disable:s,storeId:l,emitOnEditStart:u,emitOnEditEnd:A}]=function(C){const I=VT(),[F,L]=Ce.useState(f4(I.getData(),C)),U=Ce.useCallback(W=>I.setValueAtPath(C,W,!0),[C,I]),P=Ce.useCallback(W=>I.setSettingsAtPath(C,W),[C,I]),H=Ce.useCallback(W=>I.disableInputAtPath(C,W),[C,I]),N=Ce.useCallback(()=>I.emitOnEditStart(C),[C,I]),z=Ce.useCallback(()=>I.emitOnEditEnd(C),[C,I]);return Ce.useEffect(()=>{L(f4(I.getData(),C));const W=I.useStore.subscribe(j=>f4(j.data,C),L,{equalityFn:UL});return()=>W()},[I,C]),[F,{set:U,setSettings:P,disable:H,storeId:I.storeId,emitOnEditStart:N,emitOnEditEnd:z}]}(a);if(!e)return null;const{type:g,label:_,key:b}=e,x=Eo(e,_Le);if(g in kg){const C=vLe[g];return Ye.createElement(C,pl({label:_,path:a},x))}return g in Qw?Ye.createElement(hLe,pl({key:l+a,type:g,label:_,storeId:l,path:a,valueKey:b,setValue:i,setSettings:r,disable:s,emitOnEditStart:u,emitOnEditEnd:A},x)):(PFe(qa.UNSUPPORTED_INPUT,g,a),null)});function bLe({toggle:a,toggled:e,name:i}){return Ye.createElement(rUe,{onClick:()=>a()},Ye.createElement(G7,{toggled:e}),Ye.createElement("div",null,i))}const wLe=({name:a,path:e,tree:i})=>{const r=VT(),s=K7(e,a),{collapsed:l,color:u}=r.getFolderSettings(s),[A,g]=Ce.useState(!l),_=Ce.useRef(null),b=zv("colors","folderWidgetColor"),x=zv("colors","folderTextColor");return Ce.useLayoutEffect(()=>{_.current.style.setProperty("--leva-colors-folderWidgetColor",u||b),_.current.style.setProperty("--leva-colors-folderTextColor",u||x)},[u,b,x]),Ye.createElement(Bk,{ref:_},Ye.createElement(bLe,{name:a,toggled:A,toggle:()=>g(C=>!C)}),Ye.createElement(zle,{parent:s,tree:i,toggled:A}))},zle=Ye.memo(({isRoot:a=!1,fill:e=!1,flat:i=!1,parent:r,tree:s,toggled:l})=>{const{wrapperRef:u,contentRef:A}=function(x){const C=Ce.useRef(null),I=Ce.useRef(null),F=Ce.useRef(!0);return Ce.useLayoutEffect(()=>{x||(C.current.style.height="0px",C.current.style.overflow="hidden")},[]),Ce.useEffect(()=>{if(F.current)return void(F.current=!1);let L;const U=C.current,P=()=>{x&&(U.style.removeProperty("height"),U.style.removeProperty("overflow"),I.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};U.addEventListener("transitionend",P,{once:!0});const{height:H}=I.current.getBoundingClientRect();return U.style.height=H+"px",x||(U.style.overflow="hidden",L=window.setTimeout(()=>U.style.height="0px",50)),()=>{U.removeEventListener("transitionend",P),clearTimeout(L)}},[x]),{wrapperRef:C,contentRef:I}}(l),g=VT(),_=([x,C])=>{var I;return(gie(C)?(I=g.getInput(C.path))===null||I===void 0?void 0:I.order:g.getFolderSettings(K7(r,x)).order)||0},b=Object.entries(s).sort((x,C)=>_(x)-_(C));return Ye.createElement(ZH,{ref:u,isRoot:a,fill:e,flat:i},Ye.createElement(lle,{ref:A,isRoot:a,toggled:l},b.map(([x,C])=>gie(C)?Ye.createElement(yLe,{key:C.path,valueKey:C.valueKey,path:C.path}):Ye.createElement(wLe,{key:x,name:x,path:r,tree:C}))))}),xLe=zn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${ule}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Mk=zn("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),CLe=zn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),ELe=zn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Mk}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),SLe=zn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),BLe=zn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),ILe=Ye.forwardRef(({setFilter:a,toggle:e},i)=>{const[r,s]=Ce.useState(""),l=Ce.useMemo(()=>Yae(a,250),[a]);return Ce.useEffect(()=>{l(r)},[r,l]),Ye.createElement(Ye.Fragment,null,Ye.createElement(SLe,{ref:i,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:u=>u.stopPropagation(),onChange:u=>{const A=u.currentTarget.value;e(!0),s(A)}}),Ye.createElement(Mk,{onClick:()=>(a(""),void s("")),style:{visibility:r?"visible":"hidden"}},Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function TLe({setFilter:a,onDrag:e,onDragStart:i,onDragEnd:r,toggle:s,toggled:l,title:u,drag:A,filterEnabled:g,from:_}){const[b,x]=Ce.useState(!1),C=Ce.useRef(null);Ce.useEffect(()=>{var F,L;b?(F=C.current)===null||F===void 0||F.focus():(L=C.current)===null||L===void 0||L.blur()},[b]);const I=AM(({offset:[F,L],first:U,last:P})=>{e({x:F,y:L}),U&&i({x:F,y:L}),P&&r({x:F,y:L})},{filterTaps:!0,from:({offset:[F,L]})=>[(_==null?void 0:_.x)||F,(_==null?void 0:_.y)||L]});return Ce.useEffect(()=>{const F=L=>{L.key==="L"&&L.shiftKey&&L.metaKey&&x(U=>!U)};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[]),Ye.createElement(Ye.Fragment,null,Ye.createElement(CLe,{mode:A?"drag":void 0},Ye.createElement(Mk,{active:!l,onClick:()=>s()},Ye.createElement(G7,{toggled:l,width:12,height:8})),Ye.createElement(BLe,pl({},A?I():{},{drag:A,filterEnabled:g}),u===void 0&&A?Ye.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ye.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ye.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ye.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ye.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ye.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ye.createElement("circle",{cx:"26",cy:"12",r:"2"})):u),g&&Ye.createElement(Mk,{active:b,onClick:()=>x(F=>!F)},Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ye.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ye.createElement(ELe,{toggled:b},Ye.createElement(ILe,{ref:C,setFilter:a,toggle:s})))}const MLe=["store","hidden","theme","collapsed"];function RLe(a){let{store:e,hidden:i=!1,theme:r,collapsed:s=!1}=a,l=Eo(a,MLe);const u=Ole(()=>function(x){const C={colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}};if(!x)return{theme:C,className:""};Object.keys(x).forEach(F=>{Object.assign(C[F],x[F])});const I=XFe(C);return{theme:C,className:I.className}}(r),[r]),[A,g]=Ce.useState(!s),_=typeof s=="object"?!s.collapsed:A,b=Ce.useMemo(()=>typeof s=="object"?x=>{typeof x=="function"?s.onChange(!x(!s.collapsed)):s.onChange(!x)}:g,[s]);return!e||i?null:Ye.createElement(N7.Provider,{value:u},Ye.createElement(DLe,pl({store:e},l,{toggled:_,setToggle:b,rootClass:u.className})))}const DLe=Ye.memo(({store:a,rootClass:e,fill:i=!1,flat:r=!1,neverHide:s=!1,oneLineLabels:l=!1,titleBar:u={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:A=!1,toggled:g,setToggle:_})=>{var b,x;const C=(re=>{const[se,ue]=Ce.useState(re.getVisiblePaths());return Ce.useEffect(()=>{ue(re.getVisiblePaths());const fe=re.useStore.subscribe(re.getVisiblePaths,ue,{equalityFn:UL});return()=>fe()},[re]),se})(a),[I,F]=Ce.useState(""),L=Ce.useMemo(()=>((re,se)=>{const ue={},fe=se?se.toLowerCase():null;return re.forEach(pe=>{const[xe,ce]=function(_e){const ye=_e.split(".");return[ye.pop(),ye.join(".")||void 0]}(pe);(!fe||xe.toLowerCase().indexOf(fe)>-1)&&Rke(ue,ce,{[xe]:{__levaInput:!0,path:pe}})}),ue})(C,I),[C,I]),[U,P]=Ale(),H=s||C.length>0,N=typeof u=="object"&&u.title||void 0,z=typeof u!="object"||(b=u.drag)===null||b===void 0||b,W=typeof u!="object"||(x=u.filter)===null||x===void 0||x,j=typeof u=="object"&&u.position||void 0,J=typeof u=="object"&&u.onDrag||void 0,ie=typeof u=="object"&&u.onDragStart||void 0,ee=typeof u=="object"&&u.onDragEnd||void 0;return Ye.useEffect(()=>{P({x:j==null?void 0:j.x,y:j==null?void 0:j.y})},[j,P]),JFe(),Ye.createElement(sle.Provider,{value:{hideCopyButton:A}},Ye.createElement(xLe,{ref:U,className:e,fill:i,flat:r,oneLineLabels:l,hideTitleBar:!u,style:{display:H?"block":"none"}},u&&Ye.createElement(TLe,{onDrag:re=>{P(re),J==null||J(re)},onDragStart:re=>ie==null?void 0:ie(re),onDragEnd:re=>ee==null?void 0:ee(re),setFilter:F,toggle:re=>_(se=>re??!se),toggled:g,title:N,drag:z,filterEnabled:W,from:j}),H&&Ye.createElement(rle.Provider,{value:a},Ye.createElement(zle,{isRoot:!0,fill:i,flat:r,tree:L,toggled:g}))))}),FLe=["isRoot"];let Rk=!1,hw=null;function ULe(a){let{isRoot:e=!1}=a,i=Eo(a,FLe);return Ce.useEffect(()=>(Rk=!0,!e&&hw&&(hw.remove(),hw=null),()=>{e||(Rk=!1)}),[e]),Ye.createElement(RLe,pl({store:Hle},i))}function Gle(a,e,i,r,s){const{folderName:l,schema:u,folderSettings:A,hookSettings:g,deps:_}=function(re,se,ue,fe,pe){let xe,ce,_e,ye,Oe;return ce=re,xe=se,Array.isArray(ue)?Oe=ue:ue&&("store"in ue?(ye=ue,Oe=fe):(_e=ue,Array.isArray(fe)?Oe=fe:(ye=fe,Oe=pe))),{schema:xe,folderName:ce,folderSettings:_e,hookSettings:ye,deps:Oe||[]}}(a,e,i,r,s),b=typeof u=="function",x=Ce.useRef(!1),C=Ce.useRef(!0),I=Ole(()=>{x.current=!0;const re=typeof u=="function"?u():u;return l?{[l]:X7(re,A)}:re},_);(function(re){Ce.useEffect(()=>{re&&!Rk&&(hw||(hw=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(hw),Mz.createRoot(hw).render(Ye.createElement(ULe,{isRoot:!0})))),Rk=!0)},[re])})(!(g!=null&&g.store));const[F]=Ce.useState(()=>(g==null?void 0:g.store)||Hle),[L,U]=Ce.useMemo(()=>F.getDataFromSchema(I),[F,I]),[P,H,N,z,W]=Ce.useMemo(()=>{const re=[],se=[],ue={},fe={},pe={};return Object.values(U).forEach(({path:xe,onChange:ce,onEditStart:_e,onEditEnd:ye,transient:Oe})=>{re.push(xe),ce?(ue[xe]=ce,Oe||se.push(xe)):se.push(xe),_e&&(fe[xe]=_e),ye&&(pe[xe]=ye)}),[re,se,ue,fe,pe]},[U]),j=Ce.useMemo(()=>F.orderPaths(P),[P,F]),J=Dke(F,H,L),ie=Ce.useCallback(re=>{const se=Object.entries(re).reduce((ue,[fe,pe])=>Object.assign(ue,{[U[fe].path]:pe}),{});F.set(se,!1)},[F,U]),ee=Ce.useCallback(re=>F.get(U[re].path),[F,U]);return Ce.useEffect(()=>{const re=!C.current&&x.current;return F.addData(L,re),C.current=!1,x.current=!1,()=>F.disposePaths(j)},[F,j,L]),Ce.useEffect(()=>{const re=[];return Object.entries(N).forEach(([se,ue])=>{ue(F.get(se),se,Yn({initial:!0,get:F.get},F.getInput(se)));const fe=F.useStore.subscribe(pe=>{const xe=pe.data[se];return[xe.disabled?void 0:xe.value,xe]},([pe,xe])=>ue(pe,se,Yn({initial:!1,get:F.get},xe)),{equalityFn:UL});re.push(fe)}),()=>re.forEach(se=>se())},[F,N]),Ce.useEffect(()=>{const re=[];return Object.entries(z).forEach(([se,ue])=>re.push(F.subscribeToEditStart(se,ue))),Object.entries(W).forEach(([se,ue])=>re.push(F.subscribeToEditEnd(se,ue))),()=>re.forEach(se=>se())},[z,W,F]),b?[J,ie,ee]:J}wv(Eg.SELECT,SUe),wv(Eg.IMAGE,eLe),wv(Eg.NUMBER,bUe),wv(Eg.COLOR,Qke),wv(Eg.STRING,RUe),wv(Eg.BOOLEAN,kUe),wv(Eg.INTERVAL,oLe),wv(Eg.VECTOR3D,Nke),wv(Eg.VECTOR2D,$ke);var vie,kLe=qoe({tagName:"model-viewer",elementClass:Voe,react:Ye}),LLe=function(a){var e=Gle("Environment",{background:"#fff",Light:X7({intensity:{min:0,max:5,step:.1,value:1}})},{collapsed:!0}),i=e.intensity,r=e.background;return Ye.createElement(SRe,{style:{backgroundColor:r}},Ye.createElement(kLe,{src:a.src,"camera-controls":!0,"disable-tap":!0,"camera-orbit":"0deg 90deg auto","max-camera-orbit":"Infinity 157.5deg auto","min-camera-orbit":"-Infinity 22.5deg auto","camera-target":"0m 0m 0m","shadow-intensity":"0",exposure:i,alt:"3D image","interaction-prompt":"none"}))},yie={},bie,PLe=function(){if(vie)return yie;var a,e;vie=1;const i=window,r=i.ShadowRoot&&(i.ShadyCSS===void 0||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),l=new WeakMap;let u=class{constructor(o,t,n){if(this._$cssResult$=!0,n!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=o,this.t=t}get styleSheet(){let o=this.o;const t=this.t;if(r&&o===void 0){const n=t!==void 0&&t.length===1;n&&(o=l.get(t)),o===void 0&&((this.o=o=new CSSStyleSheet).replaceSync(this.cssText),n&&l.set(t,o))}return o}toString(){return this.cssText}};const A=(o,...t)=>{const n=o.length===1?o[0]:t.reduce((c,h,f)=>c+(d=>{if(d._$cssResult$===!0)return d.cssText;if(typeof d=="number")return d;throw Error("Value passed to 'css' function must be a 'css' function result: "+d+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(h)+o[f+1],o[0]);return new u(n,o,s)},g=r?o=>o:o=>o instanceof CSSStyleSheet?(t=>{let n="";for(const h of t.cssRules)n+=h.cssText;return new u(typeof(c=n)=="string"?c:c+"",void 0,s);var c})(o):o;var _;const b=window,x=b.trustedTypes,C=x?x.emptyScript:"",I=b.reactiveElementPolyfillSupport,F={toAttribute(o,t){switch(t){case Boolean:o=o?C:null;break;case Object:case Array:o=o==null?o:JSON.stringify(o)}return o},fromAttribute(o,t){let n=o;switch(t){case Boolean:n=o!==null;break;case Number:n=o===null?null:Number(o);break;case Object:case Array:try{n=JSON.parse(o)}catch{n=null}}return n}},L=(o,t)=>t!==o&&(t==t||o==o),U={attribute:!0,type:String,converter:F,reflect:!1,hasChanged:L},P="finalized";let H=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(o){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(o)}static get observedAttributes(){this.finalize();const o=[];return this.elementProperties.forEach((t,n)=>{const c=this._$Ep(n,t);c!==void 0&&(this._$Ev.set(c,n),o.push(c))}),o}static createProperty(o,t=U){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(o,t),!t.noAccessor&&!this.prototype.hasOwnProperty(o)){const n=typeof o=="symbol"?Symbol():"__"+o,c=this.getPropertyDescriptor(o,n,t);c!==void 0&&Object.defineProperty(this.prototype,o,c)}}static getPropertyDescriptor(o,t,n){return{get(){return this[t]},set(c){const h=this[o];this[t]=c,this.requestUpdate(o,h,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(o){return this.elementProperties.get(o)||U}static finalize(){if(this.hasOwnProperty(P))return!1;this[P]=!0;const o=Object.getPrototypeOf(this);if(o.finalize(),o.h!==void 0&&(this.h=[...o.h]),this.elementProperties=new Map(o.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const c of n)this.createProperty(c,t[c])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(o){const t=[];if(Array.isArray(o)){const n=new Set(o.flat(1/0).reverse());for(const c of n)t.unshift(g(c))}else o!==void 0&&t.push(g(o));return t}static _$Ep(o,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof o=="string"?o.toLowerCase():void 0}_$Eu(){var o;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(o=this.constructor.h)===null||o===void 0||o.forEach(t=>t(this))}addController(o){var t,n;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(o),this.renderRoot!==void 0&&this.isConnected&&((n=o.hostConnected)===null||n===void 0||n.call(o))}removeController(o){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(o)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((o,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var o;const t=(o=this.shadowRoot)!==null&&o!==void 0?o:this.attachShadow(this.constructor.shadowRootOptions);return n=t,c=this.constructor.elementStyles,r?n.adoptedStyleSheets=c.map(h=>h instanceof CSSStyleSheet?h:h.styleSheet):c.forEach(h=>{const f=document.createElement("style"),d=i.litNonce;d!==void 0&&f.setAttribute("nonce",d),f.textContent=h.cssText,n.appendChild(f)}),t;var n,c}connectedCallback(){var o;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(o=this._$ES)===null||o===void 0||o.forEach(t=>{var n;return(n=t.hostConnected)===null||n===void 0?void 0:n.call(t)})}enableUpdating(o){}disconnectedCallback(){var o;(o=this._$ES)===null||o===void 0||o.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)})}attributeChangedCallback(o,t,n){this._$AK(o,n)}_$EO(o,t,n=U){var c;const h=this.constructor._$Ep(o,n);if(h!==void 0&&n.reflect===!0){const f=(((c=n.converter)===null||c===void 0?void 0:c.toAttribute)!==void 0?n.converter:F).toAttribute(t,n.type);this._$El=o,f==null?this.removeAttribute(h):this.setAttribute(h,f),this._$El=null}}_$AK(o,t){var n;const c=this.constructor,h=c._$Ev.get(o);if(h!==void 0&&this._$El!==h){const f=c.getPropertyOptions(h),d=typeof f.converter=="function"?{fromAttribute:f.converter}:((n=f.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?f.converter:F;this._$El=h,this[h]=d.fromAttribute(t,f.type),this._$El=null}}requestUpdate(o,t,n){let c=!0;o!==void 0&&(((n=n||this.constructor.getPropertyOptions(o)).hasChanged||L)(this[o],t)?(this._$AL.has(o)||this._$AL.set(o,t),n.reflect===!0&&this._$El!==o&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(o,n))):c=!1),!this.isUpdatePending&&c&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const o=this.scheduleUpdate();return o!=null&&await o,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var o;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((c,h)=>this[h]=c),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(o=this._$ES)===null||o===void 0||o.forEach(c=>{var h;return(h=c.hostUpdate)===null||h===void 0?void 0:h.call(c)}),this.update(n)):this._$Ek()}catch(c){throw t=!1,this._$Ek(),c}t&&this._$AE(n)}willUpdate(o){}_$AE(o){var t;(t=this._$ES)===null||t===void 0||t.forEach(n=>{var c;return(c=n.hostUpdated)===null||c===void 0?void 0:c.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(o)),this.updated(o)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(o){return!0}update(o){this._$EC!==void 0&&(this._$EC.forEach((t,n)=>this._$EO(n,this[n],t)),this._$EC=void 0),this._$Ek()}updated(o){}firstUpdated(o){}};var N;H[P]=!0,H.elementProperties=new Map,H.elementStyles=[],H.shadowRootOptions={mode:"open"},I==null||I({ReactiveElement:H}),((_=b.reactiveElementVersions)!==null&&_!==void 0?_:b.reactiveElementVersions=[]).push("1.6.3");const z=window,W=z.trustedTypes,j=W?W.createPolicy("lit-html",{createHTML:o=>o}):void 0,J="$lit$",ie=`lit$${(Math.random()+"").slice(9)}$`,ee="?"+ie,re=`<${ee}>`,se=document,ue=()=>se.createComment(""),fe=o=>o===null||typeof o!="object"&&typeof o!="function",pe=Array.isArray,xe=`[ 	
\f\r]`,ce=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_e=/-->/g,ye=/>/g,Oe=RegExp(`>|${xe}(?:([^\\s"'>=/]+)(${xe}*=${xe}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ge=/'/g,Ee=/"/g,ke=/^(?:script|style|textarea|title)$/i,je=o=>(t,...n)=>({_$litType$:o,strings:t,values:n}),Ie=je(1),ze=je(2),ht=Symbol.for("lit-noChange"),lt=Symbol.for("lit-nothing"),yt=new WeakMap,Nt=se.createTreeWalker(se,129,null,!1);function zt(o,t){if(!Array.isArray(o)||!o.hasOwnProperty("raw"))throw Error("invalid template strings array");return j!==void 0?j.createHTML(t):t}let ei=class Vle{constructor({strings:t,_$litType$:n},c){let h;this.parts=[];let f=0,d=0;const p=t.length-1,v=this.parts,[w,S]=((B,R)=>{const D=B.length-1,O=[];let V,$=R===2?"<svg>":"",G=ce;for(let X=0;X<D;X++){const te=B[X];let ae,oe,Ae=-1,ve=0;for(;ve<te.length&&(G.lastIndex=ve,oe=G.exec(te),oe!==null);)ve=G.lastIndex,G===ce?oe[1]==="!--"?G=_e:oe[1]!==void 0?G=ye:oe[2]!==void 0?(ke.test(oe[2])&&(V=RegExp("</"+oe[2],"g")),G=Oe):oe[3]!==void 0&&(G=Oe):G===Oe?oe[0]===">"?(G=V??ce,Ae=-1):oe[1]===void 0?Ae=-2:(Ae=G.lastIndex-oe[2].length,ae=oe[1],G=oe[3]===void 0?Oe:oe[3]==='"'?Ee:ge):G===Ee||G===ge?G=Oe:G===_e||G===ye?G=ce:(G=Oe,V=void 0);const De=G===Oe&&B[X+1].startsWith("/>")?" ":"";$+=G===ce?te+re:Ae>=0?(O.push(ae),te.slice(0,Ae)+J+te.slice(Ae)+ie+De):te+ie+(Ae===-2?(O.push(void 0),X):De)}return[zt(B,$+(B[D]||"<?>")+(R===2?"</svg>":"")),O]})(t,n);if(this.el=Vle.createElement(w,c),Nt.currentNode=this.el.content,n===2){const B=this.el.content,R=B.firstChild;R.remove(),B.append(...R.childNodes)}for(;(h=Nt.nextNode())!==null&&v.length<p;){if(h.nodeType===1){if(h.hasAttributes()){const B=[];for(const R of h.getAttributeNames())if(R.endsWith(J)||R.startsWith(ie)){const D=S[d++];if(B.push(R),D!==void 0){const O=h.getAttribute(D.toLowerCase()+J).split(ie),V=/([.?@])?(.*)/.exec(D);v.push({type:1,index:f,name:V[2],strings:O,ctor:V[1]==="."?bt:V[1]==="?"?qe:V[1]==="@"?pt:li})}else v.push({type:6,index:f})}for(const R of B)h.removeAttribute(R)}if(ke.test(h.tagName)){const B=h.textContent.split(ie),R=B.length-1;if(R>0){h.textContent=W?W.emptyScript:"";for(let D=0;D<R;D++)h.append(B[D],ue()),Nt.nextNode(),v.push({type:2,index:++f});h.append(B[R],ue())}}}else if(h.nodeType===8)if(h.data===ee)v.push({type:2,index:f});else{let B=-1;for(;(B=h.data.indexOf(ie,B+1))!==-1;)v.push({type:7,index:f}),B+=ie.length-1}f++}}static createElement(t,n){const c=se.createElement("template");return c.innerHTML=t,c}};function it(o,t,n=o,c){var h,f,d,p;if(t===ht)return t;let v=c!==void 0?(h=n._$Co)===null||h===void 0?void 0:h[c]:n._$Cl;const w=fe(t)?void 0:t._$litDirective$;return(v==null?void 0:v.constructor)!==w&&((f=v==null?void 0:v._$AO)===null||f===void 0||f.call(v,!1),w===void 0?v=void 0:(v=new w(o),v._$AT(o,n,c)),c!==void 0?((d=(p=n)._$Co)!==null&&d!==void 0?d:p._$Co=[])[c]=v:n._$Cl=v),v!==void 0&&(t=it(o,v._$AS(o,t.values),v,c)),t}let Dt=class{constructor(o,t){this._$AV=[],this._$AN=void 0,this._$AD=o,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(o){var t;const{el:{content:n},parts:c}=this._$AD,h=((t=o==null?void 0:o.creationScope)!==null&&t!==void 0?t:se).importNode(n,!0);Nt.currentNode=h;let f=Nt.nextNode(),d=0,p=0,v=c[0];for(;v!==void 0;){if(d===v.index){let w;v.type===2?w=new Be(f,f.nextSibling,this,o):v.type===1?w=new v.ctor(f,v.name,v.strings,this,o):v.type===6&&(w=new At(f,this,o)),this._$AV.push(w),v=c[++p]}d!==(v==null?void 0:v.index)&&(f=Nt.nextNode(),d++)}return Nt.currentNode=se,h}v(o){let t=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(o,n,t),t+=n.strings.length-2):n._$AI(o[t])),t++}},Be=class qle{constructor(t,n,c,h){var f;this.type=2,this._$AH=lt,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=c,this.options=h,this._$Cp=(f=h==null?void 0:h.isConnected)===null||f===void 0||f}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=it(this,t,n),fe(t)?t===lt||t==null||t===""?(this._$AH!==lt&&this._$AR(),this._$AH=lt):t!==this._$AH&&t!==ht&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):(c=>pe(c)||typeof(c==null?void 0:c[Symbol.iterator])=="function")(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==lt&&fe(this._$AH)?this._$AA.nextSibling.data=t:this.$(se.createTextNode(t)),this._$AH=t}g(t){var n;const{values:c,_$litType$:h}=t,f=typeof h=="number"?this._$AC(t):(h.el===void 0&&(h.el=ei.createElement(zt(h.h,h.h[0]),this.options)),h);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===f)this._$AH.v(c);else{const d=new Dt(f,this),p=d.u(this.options);d.v(c),this.$(p),this._$AH=d}}_$AC(t){let n=yt.get(t.strings);return n===void 0&&yt.set(t.strings,n=new ei(t)),n}T(t){pe(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let c,h=0;for(const f of t)h===n.length?n.push(c=new qle(this.k(ue()),this.k(ue()),this,this.options)):c=n[h],c._$AI(f),h++;h<n.length&&(this._$AR(c&&c._$AB.nextSibling,h),n.length=h)}_$AR(t=this._$AA.nextSibling,n){var c;for((c=this._$AP)===null||c===void 0||c.call(this,!1,!0,n);t&&t!==this._$AB;){const h=t.nextSibling;t.remove(),t=h}}setConnected(t){var n;this._$AM===void 0&&(this._$Cp=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}},li=class{constructor(o,t,n,c,h){this.type=1,this._$AH=lt,this._$AN=void 0,this.element=o,this.name=t,this._$AM=c,this.options=h,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=lt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(o,t=this,n,c){const h=this.strings;let f=!1;if(h===void 0)o=it(this,o,t,0),f=!fe(o)||o!==this._$AH&&o!==ht,f&&(this._$AH=o);else{const d=o;let p,v;for(o=h[0],p=0;p<h.length-1;p++)v=it(this,d[n+p],t,p),v===ht&&(v=this._$AH[p]),f||(f=!fe(v)||v!==this._$AH[p]),v===lt?o=lt:o!==lt&&(o+=(v??"")+h[p+1]),this._$AH[p]=v}f&&!c&&this.j(o)}j(o){o===lt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,o??"")}},bt=class extends li{constructor(){super(...arguments),this.type=3}j(o){this.element[this.name]=o===lt?void 0:o}};const Wt=W?W.emptyScript:"";let qe=class extends li{constructor(){super(...arguments),this.type=4}j(o){o&&o!==lt?this.element.setAttribute(this.name,Wt):this.element.removeAttribute(this.name)}},pt=class extends li{constructor(o,t,n,c,h){super(o,t,n,c,h),this.type=5}_$AI(o,t=this){var n;if((o=(n=it(this,o,t,0))!==null&&n!==void 0?n:lt)===ht)return;const c=this._$AH,h=o===lt&&c!==lt||o.capture!==c.capture||o.once!==c.once||o.passive!==c.passive,f=o!==lt&&(c===lt||h);h&&this.element.removeEventListener(this.name,this,c),f&&this.element.addEventListener(this.name,this,o),this._$AH=o}handleEvent(o){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,o):this._$AH.handleEvent(o)}},At=class{constructor(o,t,n){this.element=o,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(o){it(this,o)}};const Se={I:Be},me=z.litHtmlPolyfillSupport;me==null||me(ei,Be),((N=z.litHtmlVersions)!==null&&N!==void 0?N:z.litHtmlVersions=[]).push("2.8.0");const $e=(o,t,n)=>{var c,h;const f=(c=n==null?void 0:n.renderBefore)!==null&&c!==void 0?c:t;let d=f._$litPart$;if(d===void 0){const p=(h=n==null?void 0:n.renderBefore)!==null&&h!==void 0?h:null;f._$litPart$=d=new Be(t.insertBefore(ue(),p),p,void 0,n??{})}return d._$AI(o),d};var Ct,wt;let ft=class extends H{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var o,t;const n=super.createRenderRoot();return(o=(t=this.renderOptions).renderBefore)!==null&&o!==void 0||(t.renderBefore=n.firstChild),n}update(o){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(o),this._$Do=$e(t,this.renderRoot,this.renderOptions)}connectedCallback(){var o;super.connectedCallback(),(o=this._$Do)===null||o===void 0||o.setConnected(!0)}disconnectedCallback(){var o;super.disconnectedCallback(),(o=this._$Do)===null||o===void 0||o.setConnected(!1)}render(){return ht}};ft.finalized=!0,ft._$litElement$=!0,(Ct=globalThis.litElementHydrateSupport)===null||Ct===void 0||Ct.call(globalThis,{LitElement:ft});const Ot=globalThis.litElementPolyfillSupport;Ot==null||Ot({LitElement:ft}),((wt=globalThis.litElementVersions)!==null&&wt!==void 0?wt:globalThis.litElementVersions=[]).push("3.3.3");const Gt=o=>t=>{return typeof t=="function"?(n=o,c=t,customElements.define(n,c),c):((h,f)=>{const{kind:d,elements:p}=f;return{kind:d,elements:p,finisher(v){customElements.define(h,v)}}})(o,t);var n,c},si=(o,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,o)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,o)}};function $t(o){return(t,n)=>{return n!==void 0?(c=o,h=n,void t.constructor.createProperty(h,c)):si(o,t);var c,h}}function ti(o){return $t({...o,state:!0})}function gi(o,t){return(({finisher:n,descriptor:c})=>(h,f)=>{var d;if(f===void 0){const p=(d=h.originalKey)!==null&&d!==void 0?d:h.key,v=c!=null?{kind:"method",placement:"prototype",key:p,descriptor:c(h.key)}:{...h,key:p};return n!=null&&(v.finisher=function(w){n(w,p)}),v}{const p=h.constructor;c!==void 0&&Object.defineProperty(h,f,c(f)),n==null||n(p,f)}})({descriptor:n=>({get(){var c,h;return(h=(c=this.renderRoot)===null||c===void 0?void 0:c.querySelector(o))!==null&&h!==void 0?h:null},enumerable:!0,configurable:!0})})}var mi;(mi=window.HTMLSlotElement)===null||mi===void 0||mi.prototype.assignedElements;const Oi="169",Bi=0,ln=1,Ji=2,Vi=100,at=101,Ti=102,Pt=200,Xt=201,Mi=202,Ii=203,Fi=204,vn=205,Xn=206,Tn=207,cr=208,gr=209,Xr=210,$n=211,co=212,Ka=213,Zu=214,fl=0,Ql=1,Nc=2,eh=3,Hc=4,Fs=5,ys=6,Nl=7,Hi="attached",gl=300,oa=301,uo=302,Le=303,Et=306,Vt=1e3,kt=1001,St=1002,pi=1003,Ui=1004,ki=1005,Ci=1006,yn=1007,en=1008,Qi=1009,Wn=1010,Cr=1011,Yr=1012,sr=1013,xn=1014,Xi=1015,jn=1016,ar=1017,Wo=1018,Ua=1020,fn=1023,Xa=1026,Er=1027,Ss=1028,Qs=1029,ns=1030,So=1031,Ya=1033,aa=33776,zc=33777,_u=33778,Wh=33779,jh=35840,kA=35841,th=35842,LA=35843,ih=36196,pc=37492,vu=37496,Ja=37808,PA=37809,Uf=37810,Kh=37811,jo=37812,$d=37813,yu=37814,ml=37815,nh=37816,_l=37817,_p=37818,Xh=37819,Hl=37820,bu=37821,Uo=36492,vl=36494,Yh=36495,ko=36284,la=36285,Jh=36286,Zh=2202,Gc=2300,rh=2301,ca=2302,Lo=2400,Bo=2401,Vc=2402,fc="",Ns="srgb",bs="srgb-linear",Ng="display-p3",Hg="display-p3-linear",zg="linear",Is="srgb",Gg="rec709",Jm="p3",vp=7680,jw=512,ed=513,rb=514,Kw=515,yp=516,Wd=517,sb=518,ob=519,kf=35044,Zm="300 es",sh=2e3,ka=2001;class qc{addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const c=this._listeners;c[t]===void 0&&(c[t]=[]),c[t].indexOf(n)===-1&&c[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const c=this._listeners;return c[t]!==void 0&&c[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const c=this._listeners[t];if(c!==void 0){const h=c.indexOf(n);h!==-1&&c.splice(h,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const c=n.slice(0);for(let h=0,f=c.length;h<f;h++)c[h].call(this,t);t.target=null}}}const yl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let jv=1234567;const td=Math.PI/180,oh=180/Math.PI;function $c(){const o=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,c=4294967295*Math.random()|0;return(yl[255&o]+yl[o>>8&255]+yl[o>>16&255]+yl[o>>24&255]+"-"+yl[255&t]+yl[t>>8&255]+"-"+yl[t>>16&15|64]+yl[t>>24&255]+"-"+yl[63&n|128]+yl[n>>8&255]+"-"+yl[n>>16&255]+yl[n>>24&255]+yl[255&c]+yl[c>>8&255]+yl[c>>16&255]+yl[c>>24&255]).toLowerCase()}function ua(o,t,n){return Math.max(t,Math.min(n,o))}function zl(o,t){return(o%t+t)%t}function Lf(o,t,n){return(1-n)*o+n*t}function Wc(o,t){switch(t.constructor){case Float32Array:return o;case Uint32Array:return o/4294967295;case Uint16Array:return o/65535;case Uint8Array:return o/255;case Int32Array:return Math.max(o/2147483647,-1);case Int16Array:return Math.max(o/32767,-1);case Int8Array:return Math.max(o/127,-1);default:throw new Error("Invalid component type.")}}function ds(o,t){switch(t.constructor){case Float32Array:return o;case Uint32Array:return Math.round(4294967295*o);case Uint16Array:return Math.round(65535*o);case Uint8Array:return Math.round(255*o);case Int32Array:return Math.round(2147483647*o);case Int16Array:return Math.round(32767*o);case Int8Array:return Math.round(127*o);default:throw new Error("Invalid component type.")}}const jd={DEG2RAD:td,RAD2DEG:oh,generateUUID:$c,clamp:ua,euclideanModulo:zl,mapLinear:function(o,t,n,c,h){return c+(o-t)*(h-c)/(n-t)},inverseLerp:function(o,t,n){return o!==t?(n-o)/(t-o):0},lerp:Lf,damp:function(o,t,n,c){return Lf(o,t,1-Math.exp(-n*c))},pingpong:function(o,t=1){return t-Math.abs(zl(o,2*t)-t)},smoothstep:function(o,t,n){return o<=t?0:o>=n?1:(o=(o-t)/(n-t))*o*(3-2*o)},smootherstep:function(o,t,n){return o<=t?0:o>=n?1:(o=(o-t)/(n-t))*o*o*(o*(6*o-15)+10)},randInt:function(o,t){return o+Math.floor(Math.random()*(t-o+1))},randFloat:function(o,t){return o+Math.random()*(t-o)},randFloatSpread:function(o){return o*(.5-Math.random())},seededRandom:function(o){o!==void 0&&(jv=o);let t=jv+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(o){return o*td},radToDeg:function(o){return o*oh},isPowerOfTwo:function(o){return!(o&o-1)&&o!==0},ceilPowerOfTwo:function(o){return Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},floorPowerOfTwo:function(o){return Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},setQuaternionFromProperEuler:function(o,t,n,c,h){const f=Math.cos,d=Math.sin,p=f(n/2),v=d(n/2),w=f((t+c)/2),S=d((t+c)/2),B=f((t-c)/2),R=d((t-c)/2),D=f((c-t)/2),O=d((c-t)/2);switch(h){case"XYX":o.set(p*S,v*B,v*R,p*w);break;case"YZY":o.set(v*R,p*S,v*B,p*w);break;case"ZXZ":o.set(v*B,v*R,p*S,p*w);break;case"XZX":o.set(p*S,v*O,v*D,p*w);break;case"YXY":o.set(v*D,p*S,v*O,p*w);break;case"ZYZ":o.set(v*O,v*D,p*S,p*w);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+h)}},normalize:ds,denormalize:Wc};class Cn{constructor(t=0,n=0){Cn.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,c=this.y,h=t.elements;return this.x=h[0]*n+h[3]*c+h[6],this.y=h[1]*n+h[4]*c+h[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(t,Math.min(n,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const c=this.dot(t)/n;return Math.acos(ua(c,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,c=this.y-t.y;return n*n+c*c}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,c){return this.x=t.x+(n.x-t.x)*c,this.y=t.y+(n.y-t.y)*c,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const c=Math.cos(n),h=Math.sin(n),f=this.x-t.x,d=this.y-t.y;return this.x=f*c-d*h+t.x,this.y=f*h+d*c+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class On{constructor(t,n,c,h,f,d,p,v,w){On.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,n,c,h,f,d,p,v,w)}set(t,n,c,h,f,d,p,v,w){const S=this.elements;return S[0]=t,S[1]=h,S[2]=p,S[3]=n,S[4]=f,S[5]=v,S[6]=c,S[7]=d,S[8]=w,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,c=t.elements;return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=c[3],n[4]=c[4],n[5]=c[5],n[6]=c[6],n[7]=c[7],n[8]=c[8],this}extractBasis(t,n,c){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const c=t.elements,h=n.elements,f=this.elements,d=c[0],p=c[3],v=c[6],w=c[1],S=c[4],B=c[7],R=c[2],D=c[5],O=c[8],V=h[0],$=h[3],G=h[6],X=h[1],te=h[4],ae=h[7],oe=h[2],Ae=h[5],ve=h[8];return f[0]=d*V+p*X+v*oe,f[3]=d*$+p*te+v*Ae,f[6]=d*G+p*ae+v*ve,f[1]=w*V+S*X+B*oe,f[4]=w*$+S*te+B*Ae,f[7]=w*G+S*ae+B*ve,f[2]=R*V+D*X+O*oe,f[5]=R*$+D*te+O*Ae,f[8]=R*G+D*ae+O*ve,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],c=t[1],h=t[2],f=t[3],d=t[4],p=t[5],v=t[6],w=t[7],S=t[8];return n*d*S-n*p*w-c*f*S+c*p*v+h*f*w-h*d*v}invert(){const t=this.elements,n=t[0],c=t[1],h=t[2],f=t[3],d=t[4],p=t[5],v=t[6],w=t[7],S=t[8],B=S*d-p*w,R=p*v-S*f,D=w*f-d*v,O=n*B+c*R+h*D;if(O===0)return this.set(0,0,0,0,0,0,0,0,0);const V=1/O;return t[0]=B*V,t[1]=(h*w-S*c)*V,t[2]=(p*c-h*d)*V,t[3]=R*V,t[4]=(S*n-h*v)*V,t[5]=(h*f-p*n)*V,t[6]=D*V,t[7]=(c*v-w*n)*V,t[8]=(d*n-c*f)*V,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,c,h,f,d,p){const v=Math.cos(f),w=Math.sin(f);return this.set(c*v,c*w,-c*(v*d+w*p)+d+t,-h*w,h*v,-h*(-w*d+v*p)+p+n,0,0,1),this}scale(t,n){return this.premultiply(Kv.makeScale(t,n)),this}rotate(t){return this.premultiply(Kv.makeRotation(-t)),this}translate(t,n){return this.premultiply(Kv.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),c=Math.sin(t);return this.set(n,-c,0,c,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,c=t.elements;for(let h=0;h<9;h++)if(n[h]!==c[h])return!1;return!0}fromArray(t,n=0){for(let c=0;c<9;c++)this.elements[c]=t[c+n];return this}toArray(t=[],n=0){const c=this.elements;return t[n]=c[0],t[n+1]=c[1],t[n+2]=c[2],t[n+3]=c[3],t[n+4]=c[4],t[n+5]=c[5],t[n+6]=c[6],t[n+7]=c[7],t[n+8]=c[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Kv=new On;function Vg(o){for(let t=o.length-1;t>=0;--t)if(o[t]>=65535)return!0;return!1}function Kd(o){return document.createElementNS("http://www.w3.org/1999/xhtml",o)}function Hs(){const o=Kd("canvas");return o.style.display="block",o}const qg={};function Xv(o){o in qg||(qg[o]=!0,console.warn(o))}const $g=new On().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Pf=new On().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),wu={[bs]:{transfer:zg,primaries:Gg,luminanceCoefficients:[.2126,.7152,.0722],toReference:o=>o,fromReference:o=>o},[Ns]:{transfer:Is,primaries:Gg,luminanceCoefficients:[.2126,.7152,.0722],toReference:o=>o.convertSRGBToLinear(),fromReference:o=>o.convertLinearToSRGB()},[Hg]:{transfer:zg,primaries:Jm,luminanceCoefficients:[.2289,.6917,.0793],toReference:o=>o.applyMatrix3(Pf),fromReference:o=>o.applyMatrix3($g)},[Ng]:{transfer:Is,primaries:Jm,luminanceCoefficients:[.2289,.6917,.0793],toReference:o=>o.convertSRGBToLinear().applyMatrix3(Pf),fromReference:o=>o.applyMatrix3($g).convertLinearToSRGB()}},Yv=new Set([bs,Hg]),Qr={enabled:!0,_workingColorSpace:bs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(o){if(!Yv.has(o))throw new Error(`Unsupported working color space, "${o}".`);this._workingColorSpace=o},convert:function(o,t,n){if(this.enabled===!1||t===n||!t||!n)return o;const c=wu[t].toReference;return(0,wu[n].fromReference)(c(o))},fromWorkingColorSpace:function(o,t){return this.convert(o,this._workingColorSpace,t)},toWorkingColorSpace:function(o,t){return this.convert(o,t,this._workingColorSpace)},getPrimaries:function(o){return wu[o].primaries},getTransfer:function(o){return o===fc?zg:wu[o].transfer},getLuminanceCoefficients:function(o,t=this._workingColorSpace){return o.fromArray(wu[t].luminanceCoefficients)}};function xu(o){return o<.04045?.0773993808*o:Math.pow(.9478672986*o+.0521327014,2.4)}function Gl(o){return o<.0031308?12.92*o:1.055*Math.pow(o,.41666)-.055}let bp;class Xw{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{bp===void 0&&(bp=Kd("canvas")),bp.width=t.width,bp.height=t.height;const c=bp.getContext("2d");t instanceof ImageData?c.putImageData(t,0,0):c.drawImage(t,0,0,t.width,t.height),n=bp}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=Kd("canvas");n.width=t.width,n.height=t.height;const c=n.getContext("2d");c.drawImage(t,0,0,t.width,t.height);const h=c.getImageData(0,0,t.width,t.height),f=h.data;for(let d=0;d<f.length;d++)f[d]=255*xu(f[d]/255);return c.putImageData(h,0,0),n}if(t.data){const n=t.data.slice(0);for(let c=0;c<n.length;c++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[c]=Math.floor(255*xu(n[c]/255)):n[c]=xu(n[c]);return{data:n,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Yw=0;class e_{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Yw++}),this.uuid=$c(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const c={uuid:this.uuid,url:""},h=this.data;if(h!==null){let f;if(Array.isArray(h)){f=[];for(let d=0,p=h.length;d<p;d++)h[d].isDataTexture?f.push(t_(h[d].image)):f.push(t_(h[d]))}else f=t_(h);c.url=f}return n||(t.images[this.uuid]=c),c}}function t_(o){return typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&o instanceof ImageBitmap?Xw.getDataURL(o):o.data?{data:Array.from(o.data),width:o.width,height:o.height,type:o.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Jv=0,Sr=class yU extends qc{constructor(t=yU.DEFAULT_IMAGE,n=yU.DEFAULT_MAPPING,c=1001,h=1001,f=1006,d=1008,p=1023,v=1009,w=yU.DEFAULT_ANISOTROPY,S=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Jv++}),this.uuid=$c(),this.name="",this.source=new e_(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=c,this.wrapT=h,this.magFilter=f,this.minFilter=d,this.anisotropy=w,this.format=p,this.internalFormat=null,this.type=v,this.offset=new Cn(0,0),this.repeat=new Cn(1,1),this.center=new Cn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new On,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=S,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const c={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(c.userData=this.userData),n||(t.textures[this.uuid]=c),c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==gl)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Vt:t.x=t.x-Math.floor(t.x);break;case kt:t.x=t.x<0?0:1;break;case St:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Vt:t.y=t.y-Math.floor(t.y);break;case kt:t.y=t.y<0?0:1;break;case St:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}};Sr.DEFAULT_IMAGE=null,Sr.DEFAULT_MAPPING=gl,Sr.DEFAULT_ANISOTROPY=1;class Fr{constructor(t=0,n=0,c=0,h=1){Fr.prototype.isVector4=!0,this.x=t,this.y=n,this.z=c,this.w=h}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,c,h){return this.x=t,this.y=n,this.z=c,this.w=h,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,c=this.y,h=this.z,f=this.w,d=t.elements;return this.x=d[0]*n+d[4]*c+d[8]*h+d[12]*f,this.y=d[1]*n+d[5]*c+d[9]*h+d[13]*f,this.z=d[2]*n+d[6]*c+d[10]*h+d[14]*f,this.w=d[3]*n+d[7]*c+d[11]*h+d[15]*f,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,c,h,f;const v=t.elements,w=v[0],S=v[4],B=v[8],R=v[1],D=v[5],O=v[9],V=v[2],$=v[6],G=v[10];if(Math.abs(S-R)<.01&&Math.abs(B-V)<.01&&Math.abs(O-$)<.01){if(Math.abs(S+R)<.1&&Math.abs(B+V)<.1&&Math.abs(O+$)<.1&&Math.abs(w+D+G-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const te=(w+1)/2,ae=(D+1)/2,oe=(G+1)/2,Ae=(S+R)/4,ve=(B+V)/4,De=(O+$)/4;return te>ae&&te>oe?te<.01?(c=0,h=.707106781,f=.707106781):(c=Math.sqrt(te),h=Ae/c,f=ve/c):ae>oe?ae<.01?(c=.707106781,h=0,f=.707106781):(h=Math.sqrt(ae),c=Ae/h,f=De/h):oe<.01?(c=.707106781,h=.707106781,f=0):(f=Math.sqrt(oe),c=ve/f,h=De/f),this.set(c,h,f,n),this}let X=Math.sqrt(($-O)*($-O)+(B-V)*(B-V)+(R-S)*(R-S));return Math.abs(X)<.001&&(X=1),this.x=($-O)/X,this.y=(B-V)/X,this.z=(R-S)/X,this.w=Math.acos((w+D+G-1)/2),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(t,Math.min(n,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,c){return this.x=t.x+(n.x-t.x)*c,this.y=t.y+(n.y-t.y)*c,this.z=t.z+(n.z-t.z)*c,this.w=t.w+(n.w-t.w)*c,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ab extends qc{constructor(t=1,n=1,c={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new Fr(0,0,t,n),this.scissorTest=!1,this.viewport=new Fr(0,0,t,n);const h={width:t,height:n,depth:1};c=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ci,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},c);const f=new Sr(h,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.colorSpace);f.flipY=!1,f.generateMipmaps=c.generateMipmaps,f.internalFormat=c.internalFormat,this.textures=[];const d=c.count;for(let p=0;p<d;p++)this.textures[p]=f.clone(),this.textures[p].isRenderTargetTexture=!0;this.depthBuffer=c.depthBuffer,this.stencilBuffer=c.stencilBuffer,this.resolveDepthBuffer=c.resolveDepthBuffer,this.resolveStencilBuffer=c.resolveStencilBuffer,this.depthTexture=c.depthTexture,this.samples=c.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,n,c=1){if(this.width!==t||this.height!==n||this.depth!==c){this.width=t,this.height=n,this.depth=c;for(let h=0,f=this.textures.length;h<f;h++)this.textures[h].image.width=t,this.textures[h].image.height=n,this.textures[h].image.depth=c;this.dispose()}this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let c=0,h=t.textures.length;c<h;c++)this.textures[c]=t.textures[c].clone(),this.textures[c].isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new e_(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Io extends ab{constructor(t=1,n=1,c={}){super(t,n,c),this.isWebGLRenderTarget=!0}}class i_ extends Sr{constructor(t=null,n=1,c=1,h=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:c,depth:h},this.magFilter=pi,this.minFilter=pi,this.wrapR=kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Zv extends Sr{constructor(t=null,n=1,c=1,h=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:c,depth:h},this.magFilter=pi,this.minFilter=pi,this.wrapR=kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ha{constructor(t=0,n=0,c=0,h=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=c,this._w=h}static slerpFlat(t,n,c,h,f,d,p){let v=c[h+0],w=c[h+1],S=c[h+2],B=c[h+3];const R=f[d+0],D=f[d+1],O=f[d+2],V=f[d+3];if(p===0)return t[n+0]=v,t[n+1]=w,t[n+2]=S,void(t[n+3]=B);if(p===1)return t[n+0]=R,t[n+1]=D,t[n+2]=O,void(t[n+3]=V);if(B!==V||v!==R||w!==D||S!==O){let $=1-p;const G=v*R+w*D+S*O+B*V,X=G>=0?1:-1,te=1-G*G;if(te>Number.EPSILON){const oe=Math.sqrt(te),Ae=Math.atan2(oe,G*X);$=Math.sin($*Ae)/oe,p=Math.sin(p*Ae)/oe}const ae=p*X;if(v=v*$+R*ae,w=w*$+D*ae,S=S*$+O*ae,B=B*$+V*ae,$===1-p){const oe=1/Math.sqrt(v*v+w*w+S*S+B*B);v*=oe,w*=oe,S*=oe,B*=oe}}t[n]=v,t[n+1]=w,t[n+2]=S,t[n+3]=B}static multiplyQuaternionsFlat(t,n,c,h,f,d){const p=c[h],v=c[h+1],w=c[h+2],S=c[h+3],B=f[d],R=f[d+1],D=f[d+2],O=f[d+3];return t[n]=p*O+S*B+v*D-w*R,t[n+1]=v*O+S*R+w*B-p*D,t[n+2]=w*O+S*D+p*R-v*B,t[n+3]=S*O-p*B-v*R-w*D,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,c,h){return this._x=t,this._y=n,this._z=c,this._w=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n=!0){const c=t._x,h=t._y,f=t._z,d=t._order,p=Math.cos,v=Math.sin,w=p(c/2),S=p(h/2),B=p(f/2),R=v(c/2),D=v(h/2),O=v(f/2);switch(d){case"XYZ":this._x=R*S*B+w*D*O,this._y=w*D*B-R*S*O,this._z=w*S*O+R*D*B,this._w=w*S*B-R*D*O;break;case"YXZ":this._x=R*S*B+w*D*O,this._y=w*D*B-R*S*O,this._z=w*S*O-R*D*B,this._w=w*S*B+R*D*O;break;case"ZXY":this._x=R*S*B-w*D*O,this._y=w*D*B+R*S*O,this._z=w*S*O+R*D*B,this._w=w*S*B-R*D*O;break;case"ZYX":this._x=R*S*B-w*D*O,this._y=w*D*B+R*S*O,this._z=w*S*O-R*D*B,this._w=w*S*B+R*D*O;break;case"YZX":this._x=R*S*B+w*D*O,this._y=w*D*B+R*S*O,this._z=w*S*O-R*D*B,this._w=w*S*B-R*D*O;break;case"XZY":this._x=R*S*B-w*D*O,this._y=w*D*B-R*S*O,this._z=w*S*O+R*D*B,this._w=w*S*B+R*D*O;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const c=n/2,h=Math.sin(c);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,c=n[0],h=n[4],f=n[8],d=n[1],p=n[5],v=n[9],w=n[2],S=n[6],B=n[10],R=c+p+B;if(R>0){const D=.5/Math.sqrt(R+1);this._w=.25/D,this._x=(S-v)*D,this._y=(f-w)*D,this._z=(d-h)*D}else if(c>p&&c>B){const D=2*Math.sqrt(1+c-p-B);this._w=(S-v)/D,this._x=.25*D,this._y=(h+d)/D,this._z=(f+w)/D}else if(p>B){const D=2*Math.sqrt(1+p-c-B);this._w=(f-w)/D,this._x=(h+d)/D,this._y=.25*D,this._z=(v+S)/D}else{const D=2*Math.sqrt(1+B-c-p);this._w=(d-h)/D,this._x=(f+w)/D,this._y=(v+S)/D,this._z=.25*D}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let c=t.dot(n)+1;return c<Number.EPSILON?(c=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=c):(this._x=0,this._y=-t.z,this._z=t.y,this._w=c)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=c),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ua(this.dot(t),-1,1)))}rotateTowards(t,n){const c=this.angleTo(t);if(c===0)return this;const h=Math.min(1,n/c);return this.slerp(t,h),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const c=t._x,h=t._y,f=t._z,d=t._w,p=n._x,v=n._y,w=n._z,S=n._w;return this._x=c*S+d*p+h*w-f*v,this._y=h*S+d*v+f*p-c*w,this._z=f*S+d*w+c*v-h*p,this._w=d*S-c*p-h*v-f*w,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const c=this._x,h=this._y,f=this._z,d=this._w;let p=d*t._w+c*t._x+h*t._y+f*t._z;if(p<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,p=-p):this.copy(t),p>=1)return this._w=d,this._x=c,this._y=h,this._z=f,this;const v=1-p*p;if(v<=Number.EPSILON){const D=1-n;return this._w=D*d+n*this._w,this._x=D*c+n*this._x,this._y=D*h+n*this._y,this._z=D*f+n*this._z,this.normalize(),this}const w=Math.sqrt(v),S=Math.atan2(w,p),B=Math.sin((1-n)*S)/w,R=Math.sin(n*S)/w;return this._w=d*B+this._w*R,this._x=c*B+this._x*R,this._y=h*B+this._y*R,this._z=f*B+this._z*R,this._onChangeCallback(),this}slerpQuaternions(t,n,c){return this.copy(t).slerp(n,c)}random(){const t=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),c=Math.random(),h=Math.sqrt(1-c),f=Math.sqrt(c);return this.set(h*Math.sin(t),h*Math.cos(t),f*Math.sin(n),f*Math.cos(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ke{constructor(t=0,n=0,c=0){Ke.prototype.isVector3=!0,this.x=t,this.y=n,this.z=c}set(t,n,c){return c===void 0&&(c=this.z),this.x=t,this.y=n,this.z=c,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(Vl.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(Vl.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,c=this.y,h=this.z,f=t.elements;return this.x=f[0]*n+f[3]*c+f[6]*h,this.y=f[1]*n+f[4]*c+f[7]*h,this.z=f[2]*n+f[5]*c+f[8]*h,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,c=this.y,h=this.z,f=t.elements,d=1/(f[3]*n+f[7]*c+f[11]*h+f[15]);return this.x=(f[0]*n+f[4]*c+f[8]*h+f[12])*d,this.y=(f[1]*n+f[5]*c+f[9]*h+f[13])*d,this.z=(f[2]*n+f[6]*c+f[10]*h+f[14])*d,this}applyQuaternion(t){const n=this.x,c=this.y,h=this.z,f=t.x,d=t.y,p=t.z,v=t.w,w=2*(d*h-p*c),S=2*(p*n-f*h),B=2*(f*c-d*n);return this.x=n+v*w+d*B-p*S,this.y=c+v*S+p*w-f*B,this.z=h+v*B+f*S-d*w,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,c=this.y,h=this.z,f=t.elements;return this.x=f[0]*n+f[4]*c+f[8]*h,this.y=f[1]*n+f[5]*c+f[9]*h,this.z=f[2]*n+f[6]*c+f[10]*h,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(t,Math.min(n,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,c){return this.x=t.x+(n.x-t.x)*c,this.y=t.y+(n.y-t.y)*c,this.z=t.z+(n.z-t.z)*c,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const c=t.x,h=t.y,f=t.z,d=n.x,p=n.y,v=n.z;return this.x=h*v-f*p,this.y=f*d-c*v,this.z=c*p-h*d,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const c=t.dot(this)/n;return this.copy(t).multiplyScalar(c)}projectOnPlane(t){return OA.copy(this).projectOnVector(t),this.sub(OA)}reflect(t){return this.sub(OA.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const c=this.dot(t)/n;return Math.acos(ua(c,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,c=this.y-t.y,h=this.z-t.z;return n*n+c*c+h*h}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,c){const h=Math.sin(n)*t;return this.x=h*Math.sin(c),this.y=Math.cos(n)*t,this.z=h*Math.cos(c),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,c){return this.x=t*Math.sin(n),this.y=c,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),c=this.setFromMatrixColumn(t,1).length(),h=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=c,this.z=h,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,4*n)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,3*n)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,n=2*Math.random()-1,c=Math.sqrt(1-n*n);return this.x=c*Math.cos(t),this.y=n,this.z=c*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const OA=new Ke,Vl=new ha;class da{constructor(t=new Ke(1/0,1/0,1/0),n=new Ke(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,c=t.length;n<c;n+=3)this.expandByPoint(bl.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,c=t.count;n<c;n++)this.expandByPoint(bl.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,c=t.length;n<c;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const c=bl.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(c),this.max.copy(t).add(c),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const c=t.geometry;if(c!==void 0){const f=c.getAttribute("position");if(n===!0&&f!==void 0&&t.isInstancedMesh!==!0)for(let d=0,p=f.count;d<p;d++)t.isMesh===!0?t.getVertexPosition(d,bl):bl.fromBufferAttribute(f,d),bl.applyMatrix4(t.matrixWorld),this.expandByPoint(bl);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),ql.copy(t.boundingBox)):(c.boundingBox===null&&c.computeBoundingBox(),ql.copy(c.boundingBox)),ql.applyMatrix4(t.matrixWorld),this.union(ql)}const h=t.children;for(let f=0,d=h.length;f<d;f++)this.expandByObject(h[f],n);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,bl),bl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,c;return t.normal.x>0?(n=t.normal.x*this.min.x,c=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,c=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,c+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,c+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,c+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,c+=t.normal.z*this.min.z),n<=-t.constant&&c>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(lh),n_.subVectors(this.max,lh),Cu.subVectors(t.a,lh),Xd.subVectors(t.b,lh),jc.subVectors(t.c,lh),gc.subVectors(Xd,Cu),Kc.subVectors(jc,Xd),ah.subVectors(Cu,jc);let n=[0,-gc.z,gc.y,0,-Kc.z,Kc.y,0,-ah.z,ah.y,gc.z,0,-gc.x,Kc.z,0,-Kc.x,ah.z,0,-ah.x,-gc.y,gc.x,0,-Kc.y,Kc.x,0,-ah.y,ah.x,0];return!!s_(n,Cu,Xd,jc,n_)&&(n=[1,0,0,0,1,0,0,0,1],!!s_(n,Cu,Xd,jc,n_)&&(r_.crossVectors(gc,Kc),n=[r_.x,r_.y,r_.z],s_(n,Cu,Xd,jc,n_)))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,bl).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(bl).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(La[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),La[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),La[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),La[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),La[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),La[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),La[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),La[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(La)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const La=[new Ke,new Ke,new Ke,new Ke,new Ke,new Ke,new Ke,new Ke],bl=new Ke,ql=new da,Cu=new Ke,Xd=new Ke,jc=new Ke,gc=new Ke,Kc=new Ke,ah=new Ke,lh=new Ke,n_=new Ke,r_=new Ke,QA=new Ke;function s_(o,t,n,c,h){for(let f=0,d=o.length-3;f<=d;f+=3){QA.fromArray(o,f);const p=h.x*Math.abs(QA.x)+h.y*Math.abs(QA.y)+h.z*Math.abs(QA.z),v=t.dot(QA),w=n.dot(QA),S=c.dot(QA);if(Math.max(-Math.max(v,w,S),Math.min(v,w,S))>p)return!1}return!0}const o_=new da,wp=new Ke,mc=new Ke;class _c{constructor(t=new Ke,n=-1){this.isSphere=!0,this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const c=this.center;n!==void 0?c.copy(n):o_.setFromPoints(t).getCenter(c);let h=0;for(let f=0,d=t.length;f<d;f++)h=Math.max(h,c.distanceToSquared(t[f]));return this.radius=Math.sqrt(h),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const c=this.center.distanceToSquared(t);return n.copy(t),c>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;wp.subVectors(t,this.center);const n=wp.lengthSq();if(n>this.radius*this.radius){const c=Math.sqrt(n),h=.5*(c-this.radius);this.center.addScaledVector(wp,h/c),this.radius+=h}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(mc.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(wp.copy(t.center).add(mc)),this.expandByPoint(wp.copy(t.center).sub(mc))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Po=new Ke,vc=new Ke,id=new Ke,Oo=new Ke,Of=new Ke,Ko=new Ke,Wg=new Ke;class ch{constructor(t=new Ke,n=new Ke(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Po)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const c=n.dot(this.direction);return c<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,c)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=Po.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(Po.copy(this.origin).addScaledVector(this.direction,n),Po.distanceToSquared(t))}distanceSqToSegment(t,n,c,h){vc.copy(t).add(n).multiplyScalar(.5),id.copy(n).sub(t).normalize(),Oo.copy(this.origin).sub(vc);const f=.5*t.distanceTo(n),d=-this.direction.dot(id),p=Oo.dot(this.direction),v=-Oo.dot(id),w=Oo.lengthSq(),S=Math.abs(1-d*d);let B,R,D,O;if(S>0)if(B=d*v-p,R=d*p-v,O=f*S,B>=0)if(R>=-O)if(R<=O){const V=1/S;B*=V,R*=V,D=B*(B+d*R+2*p)+R*(d*B+R+2*v)+w}else R=f,B=Math.max(0,-(d*R+p)),D=-B*B+R*(R+2*v)+w;else R=-f,B=Math.max(0,-(d*R+p)),D=-B*B+R*(R+2*v)+w;else R<=-O?(B=Math.max(0,-(-d*f+p)),R=B>0?-f:Math.min(Math.max(-f,-v),f),D=-B*B+R*(R+2*v)+w):R<=O?(B=0,R=Math.min(Math.max(-f,-v),f),D=R*(R+2*v)+w):(B=Math.max(0,-(d*f+p)),R=B>0?f:Math.min(Math.max(-f,-v),f),D=-B*B+R*(R+2*v)+w);else R=d>0?-f:f,B=Math.max(0,-(d*R+p)),D=-B*B+R*(R+2*v)+w;return c&&c.copy(this.origin).addScaledVector(this.direction,B),h&&h.copy(vc).addScaledVector(id,R),D}intersectSphere(t,n){Po.subVectors(t.center,this.origin);const c=Po.dot(this.direction),h=Po.dot(Po)-c*c,f=t.radius*t.radius;if(h>f)return null;const d=Math.sqrt(f-h),p=c-d,v=c+d;return v<0?null:p<0?this.at(v,n):this.at(p,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const c=-(this.origin.dot(t.normal)+t.constant)/n;return c>=0?c:null}intersectPlane(t,n){const c=this.distanceToPlane(t);return c===null?null:this.at(c,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let c,h,f,d,p,v;const w=1/this.direction.x,S=1/this.direction.y,B=1/this.direction.z,R=this.origin;return w>=0?(c=(t.min.x-R.x)*w,h=(t.max.x-R.x)*w):(c=(t.max.x-R.x)*w,h=(t.min.x-R.x)*w),S>=0?(f=(t.min.y-R.y)*S,d=(t.max.y-R.y)*S):(f=(t.max.y-R.y)*S,d=(t.min.y-R.y)*S),c>d||f>h?null:((f>c||isNaN(c))&&(c=f),(d<h||isNaN(h))&&(h=d),B>=0?(p=(t.min.z-R.z)*B,v=(t.max.z-R.z)*B):(p=(t.max.z-R.z)*B,v=(t.min.z-R.z)*B),c>v||p>h?null:((p>c||c!=c)&&(c=p),(v<h||h!=h)&&(h=v),h<0?null:this.at(c>=0?c:h,n)))}intersectsBox(t){return this.intersectBox(t,Po)!==null}intersectTriangle(t,n,c,h,f){Of.subVectors(n,t),Ko.subVectors(c,t),Wg.crossVectors(Of,Ko);let d,p=this.direction.dot(Wg);if(p>0){if(h)return null;d=1}else{if(!(p<0))return null;d=-1,p=-p}Oo.subVectors(this.origin,t);const v=d*this.direction.dot(Ko.crossVectors(Oo,Ko));if(v<0)return null;const w=d*this.direction.dot(Of.cross(Oo));if(w<0||v+w>p)return null;const S=-d*Oo.dot(Wg);return S<0?null:this.at(S/p,f)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nn{constructor(t,n,c,h,f,d,p,v,w,S,B,R,D,O,V,$){nn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,n,c,h,f,d,p,v,w,S,B,R,D,O,V,$)}set(t,n,c,h,f,d,p,v,w,S,B,R,D,O,V,$){const G=this.elements;return G[0]=t,G[4]=n,G[8]=c,G[12]=h,G[1]=f,G[5]=d,G[9]=p,G[13]=v,G[2]=w,G[6]=S,G[10]=B,G[14]=R,G[3]=D,G[7]=O,G[11]=V,G[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nn().fromArray(this.elements)}copy(t){const n=this.elements,c=t.elements;return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=c[3],n[4]=c[4],n[5]=c[5],n[6]=c[6],n[7]=c[7],n[8]=c[8],n[9]=c[9],n[10]=c[10],n[11]=c[11],n[12]=c[12],n[13]=c[13],n[14]=c[14],n[15]=c[15],this}copyPosition(t){const n=this.elements,c=t.elements;return n[12]=c[12],n[13]=c[13],n[14]=c[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,c){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(t,n,c){return this.set(t.x,n.x,c.x,0,t.y,n.y,c.y,0,t.z,n.z,c.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,c=t.elements,h=1/NA.setFromMatrixColumn(t,0).length(),f=1/NA.setFromMatrixColumn(t,1).length(),d=1/NA.setFromMatrixColumn(t,2).length();return n[0]=c[0]*h,n[1]=c[1]*h,n[2]=c[2]*h,n[3]=0,n[4]=c[4]*f,n[5]=c[5]*f,n[6]=c[6]*f,n[7]=0,n[8]=c[8]*d,n[9]=c[9]*d,n[10]=c[10]*d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,c=t.x,h=t.y,f=t.z,d=Math.cos(c),p=Math.sin(c),v=Math.cos(h),w=Math.sin(h),S=Math.cos(f),B=Math.sin(f);if(t.order==="XYZ"){const R=d*S,D=d*B,O=p*S,V=p*B;n[0]=v*S,n[4]=-v*B,n[8]=w,n[1]=D+O*w,n[5]=R-V*w,n[9]=-p*v,n[2]=V-R*w,n[6]=O+D*w,n[10]=d*v}else if(t.order==="YXZ"){const R=v*S,D=v*B,O=w*S,V=w*B;n[0]=R+V*p,n[4]=O*p-D,n[8]=d*w,n[1]=d*B,n[5]=d*S,n[9]=-p,n[2]=D*p-O,n[6]=V+R*p,n[10]=d*v}else if(t.order==="ZXY"){const R=v*S,D=v*B,O=w*S,V=w*B;n[0]=R-V*p,n[4]=-d*B,n[8]=O+D*p,n[1]=D+O*p,n[5]=d*S,n[9]=V-R*p,n[2]=-d*w,n[6]=p,n[10]=d*v}else if(t.order==="ZYX"){const R=d*S,D=d*B,O=p*S,V=p*B;n[0]=v*S,n[4]=O*w-D,n[8]=R*w+V,n[1]=v*B,n[5]=V*w+R,n[9]=D*w-O,n[2]=-w,n[6]=p*v,n[10]=d*v}else if(t.order==="YZX"){const R=d*v,D=d*w,O=p*v,V=p*w;n[0]=v*S,n[4]=V-R*B,n[8]=O*B+D,n[1]=B,n[5]=d*S,n[9]=-p*S,n[2]=-w*S,n[6]=D*B+O,n[10]=R-V*B}else if(t.order==="XZY"){const R=d*v,D=d*w,O=p*v,V=p*w;n[0]=v*S,n[4]=-B,n[8]=w*S,n[1]=R*B+V,n[5]=d*S,n[9]=D*B-O,n[2]=O*B-D,n[6]=p*S,n[10]=V*B+R}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Jw,t,yc)}lookAt(t,n,c){const h=this.elements;return wc.subVectors(t,n),wc.lengthSq()===0&&(wc.z=1),wc.normalize(),bc.crossVectors(c,wc),bc.lengthSq()===0&&(Math.abs(c.z)===1?wc.x+=1e-4:wc.z+=1e-4,wc.normalize(),bc.crossVectors(c,wc)),bc.normalize(),Eu.crossVectors(wc,bc),h[0]=bc.x,h[4]=Eu.x,h[8]=wc.x,h[1]=bc.y,h[5]=Eu.y,h[9]=wc.y,h[2]=bc.z,h[6]=Eu.z,h[10]=wc.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const c=t.elements,h=n.elements,f=this.elements,d=c[0],p=c[4],v=c[8],w=c[12],S=c[1],B=c[5],R=c[9],D=c[13],O=c[2],V=c[6],$=c[10],G=c[14],X=c[3],te=c[7],ae=c[11],oe=c[15],Ae=h[0],ve=h[4],De=h[8],Ne=h[12],We=h[1],vt=h[5],ot=h[9],nt=h[13],st=h[2],mt=h[6],It=h[10],Jt=h[14],jt=h[3],_i=h[7],xi=h[11],Kt=h[15];return f[0]=d*Ae+p*We+v*st+w*jt,f[4]=d*ve+p*vt+v*mt+w*_i,f[8]=d*De+p*ot+v*It+w*xi,f[12]=d*Ne+p*nt+v*Jt+w*Kt,f[1]=S*Ae+B*We+R*st+D*jt,f[5]=S*ve+B*vt+R*mt+D*_i,f[9]=S*De+B*ot+R*It+D*xi,f[13]=S*Ne+B*nt+R*Jt+D*Kt,f[2]=O*Ae+V*We+$*st+G*jt,f[6]=O*ve+V*vt+$*mt+G*_i,f[10]=O*De+V*ot+$*It+G*xi,f[14]=O*Ne+V*nt+$*Jt+G*Kt,f[3]=X*Ae+te*We+ae*st+oe*jt,f[7]=X*ve+te*vt+ae*mt+oe*_i,f[11]=X*De+te*ot+ae*It+oe*xi,f[15]=X*Ne+te*nt+ae*Jt+oe*Kt,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],c=t[4],h=t[8],f=t[12],d=t[1],p=t[5],v=t[9],w=t[13],S=t[2],B=t[6],R=t[10],D=t[14];return t[3]*(+f*v*B-h*w*B-f*p*R+c*w*R+h*p*D-c*v*D)+t[7]*(+n*v*D-n*w*R+f*d*R-h*d*D+h*w*S-f*v*S)+t[11]*(+n*w*B-n*p*D-f*d*B+c*d*D+f*p*S-c*w*S)+t[15]*(-h*p*S-n*v*B+n*p*R+h*d*B-c*d*R+c*v*S)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,c){const h=this.elements;return t.isVector3?(h[12]=t.x,h[13]=t.y,h[14]=t.z):(h[12]=t,h[13]=n,h[14]=c),this}invert(){const t=this.elements,n=t[0],c=t[1],h=t[2],f=t[3],d=t[4],p=t[5],v=t[6],w=t[7],S=t[8],B=t[9],R=t[10],D=t[11],O=t[12],V=t[13],$=t[14],G=t[15],X=B*$*w-V*R*w+V*v*D-p*$*D-B*v*G+p*R*G,te=O*R*w-S*$*w-O*v*D+d*$*D+S*v*G-d*R*G,ae=S*V*w-O*B*w+O*p*D-d*V*D-S*p*G+d*B*G,oe=O*B*v-S*V*v-O*p*R+d*V*R+S*p*$-d*B*$,Ae=n*X+c*te+h*ae+f*oe;if(Ae===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ve=1/Ae;return t[0]=X*ve,t[1]=(V*R*f-B*$*f-V*h*D+c*$*D+B*h*G-c*R*G)*ve,t[2]=(p*$*f-V*v*f+V*h*w-c*$*w-p*h*G+c*v*G)*ve,t[3]=(B*v*f-p*R*f-B*h*w+c*R*w+p*h*D-c*v*D)*ve,t[4]=te*ve,t[5]=(S*$*f-O*R*f+O*h*D-n*$*D-S*h*G+n*R*G)*ve,t[6]=(O*v*f-d*$*f-O*h*w+n*$*w+d*h*G-n*v*G)*ve,t[7]=(d*R*f-S*v*f+S*h*w-n*R*w-d*h*D+n*v*D)*ve,t[8]=ae*ve,t[9]=(O*B*f-S*V*f-O*c*D+n*V*D+S*c*G-n*B*G)*ve,t[10]=(d*V*f-O*p*f+O*c*w-n*V*w-d*c*G+n*p*G)*ve,t[11]=(S*p*f-d*B*f-S*c*w+n*B*w+d*c*D-n*p*D)*ve,t[12]=oe*ve,t[13]=(S*V*h-O*B*h+O*c*R-n*V*R-S*c*$+n*B*$)*ve,t[14]=(O*p*h-d*V*h-O*c*v+n*V*v+d*c*$-n*p*$)*ve,t[15]=(d*B*h-S*p*h+S*c*v-n*B*v-d*c*R+n*p*R)*ve,this}scale(t){const n=this.elements,c=t.x,h=t.y,f=t.z;return n[0]*=c,n[4]*=h,n[8]*=f,n[1]*=c,n[5]*=h,n[9]*=f,n[2]*=c,n[6]*=h,n[10]*=f,n[3]*=c,n[7]*=h,n[11]*=f,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],c=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],h=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,c,h))}makeTranslation(t,n,c){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,c,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),c=Math.sin(t);return this.set(1,0,0,0,0,n,-c,0,0,c,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),c=Math.sin(t);return this.set(n,0,c,0,0,1,0,0,-c,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),c=Math.sin(t);return this.set(n,-c,0,0,c,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const c=Math.cos(n),h=Math.sin(n),f=1-c,d=t.x,p=t.y,v=t.z,w=f*d,S=f*p;return this.set(w*d+c,w*p-h*v,w*v+h*p,0,w*p+h*v,S*p+c,S*v-h*d,0,w*v-h*p,S*v+h*d,f*v*v+c,0,0,0,0,1),this}makeScale(t,n,c){return this.set(t,0,0,0,0,n,0,0,0,0,c,0,0,0,0,1),this}makeShear(t,n,c,h,f,d){return this.set(1,c,f,0,t,1,d,0,n,h,1,0,0,0,0,1),this}compose(t,n,c){const h=this.elements,f=n._x,d=n._y,p=n._z,v=n._w,w=f+f,S=d+d,B=p+p,R=f*w,D=f*S,O=f*B,V=d*S,$=d*B,G=p*B,X=v*w,te=v*S,ae=v*B,oe=c.x,Ae=c.y,ve=c.z;return h[0]=(1-(V+G))*oe,h[1]=(D+ae)*oe,h[2]=(O-te)*oe,h[3]=0,h[4]=(D-ae)*Ae,h[5]=(1-(R+G))*Ae,h[6]=($+X)*Ae,h[7]=0,h[8]=(O+te)*ve,h[9]=($-X)*ve,h[10]=(1-(R+V))*ve,h[11]=0,h[12]=t.x,h[13]=t.y,h[14]=t.z,h[15]=1,this}decompose(t,n,c){const h=this.elements;let f=NA.set(h[0],h[1],h[2]).length();const d=NA.set(h[4],h[5],h[6]).length(),p=NA.set(h[8],h[9],h[10]).length();this.determinant()<0&&(f=-f),t.x=h[12],t.y=h[13],t.z=h[14],ho.copy(this);const v=1/f,w=1/d,S=1/p;return ho.elements[0]*=v,ho.elements[1]*=v,ho.elements[2]*=v,ho.elements[4]*=w,ho.elements[5]*=w,ho.elements[6]*=w,ho.elements[8]*=S,ho.elements[9]*=S,ho.elements[10]*=S,n.setFromRotationMatrix(ho),c.x=f,c.y=d,c.z=p,this}makePerspective(t,n,c,h,f,d,p=2e3){const v=this.elements,w=2*f/(n-t),S=2*f/(c-h),B=(n+t)/(n-t),R=(c+h)/(c-h);let D,O;if(p===sh)D=-(d+f)/(d-f),O=-2*d*f/(d-f);else{if(p!==ka)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+p);D=-d/(d-f),O=-d*f/(d-f)}return v[0]=w,v[4]=0,v[8]=B,v[12]=0,v[1]=0,v[5]=S,v[9]=R,v[13]=0,v[2]=0,v[6]=0,v[10]=D,v[14]=O,v[3]=0,v[7]=0,v[11]=-1,v[15]=0,this}makeOrthographic(t,n,c,h,f,d,p=2e3){const v=this.elements,w=1/(n-t),S=1/(c-h),B=1/(d-f),R=(n+t)*w,D=(c+h)*S;let O,V;if(p===sh)O=(d+f)*B,V=-2*B;else{if(p!==ka)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+p);O=f*B,V=-1*B}return v[0]=2*w,v[4]=0,v[8]=0,v[12]=-R,v[1]=0,v[5]=2*S,v[9]=0,v[13]=-D,v[2]=0,v[6]=0,v[10]=V,v[14]=-O,v[3]=0,v[7]=0,v[11]=0,v[15]=1,this}equals(t){const n=this.elements,c=t.elements;for(let h=0;h<16;h++)if(n[h]!==c[h])return!1;return!0}fromArray(t,n=0){for(let c=0;c<16;c++)this.elements[c]=t[c+n];return this}toArray(t=[],n=0){const c=this.elements;return t[n]=c[0],t[n+1]=c[1],t[n+2]=c[2],t[n+3]=c[3],t[n+4]=c[4],t[n+5]=c[5],t[n+6]=c[6],t[n+7]=c[7],t[n+8]=c[8],t[n+9]=c[9],t[n+10]=c[10],t[n+11]=c[11],t[n+12]=c[12],t[n+13]=c[13],t[n+14]=c[14],t[n+15]=c[15],t}}const NA=new Ke,ho=new nn,Jw=new Ke(0,0,0),yc=new Ke(1,1,1),bc=new Ke,Eu=new Ke,wc=new Ke,jg=new nn,HA=new ha;class Za{constructor(t=0,n=0,c=0,h=Za.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=c,this._order=h}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,c,h=this._order){return this._x=t,this._y=n,this._z=c,this._order=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,c=!0){const h=t.elements,f=h[0],d=h[4],p=h[8],v=h[1],w=h[5],S=h[9],B=h[2],R=h[6],D=h[10];switch(n){case"XYZ":this._y=Math.asin(ua(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-S,D),this._z=Math.atan2(-d,f)):(this._x=Math.atan2(R,w),this._z=0);break;case"YXZ":this._x=Math.asin(-ua(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(p,D),this._z=Math.atan2(v,w)):(this._y=Math.atan2(-B,f),this._z=0);break;case"ZXY":this._x=Math.asin(ua(R,-1,1)),Math.abs(R)<.9999999?(this._y=Math.atan2(-B,D),this._z=Math.atan2(-d,w)):(this._y=0,this._z=Math.atan2(v,f));break;case"ZYX":this._y=Math.asin(-ua(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2(R,D),this._z=Math.atan2(v,f)):(this._x=0,this._z=Math.atan2(-d,w));break;case"YZX":this._z=Math.asin(ua(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(-S,w),this._y=Math.atan2(-B,f)):(this._x=0,this._y=Math.atan2(p,D));break;case"XZY":this._z=Math.asin(-ua(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(R,w),this._y=Math.atan2(p,f)):(this._x=Math.atan2(-S,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,c===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,c){return jg.makeRotationFromQuaternion(t),this.setFromRotationMatrix(jg,n,c)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return HA.setFromEuler(this),this.setFromQuaternion(HA,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Za.DEFAULT_ORDER="XYZ";class Qf{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Kg=0;const Nf=new Ke,Yd=new ha,Su=new nn,Aa=new Ke,Pa=new Ke,xp=new Ke,Jd=new ha,nd=new Ke(1,0,0),Xc=new Ke(0,1,0),e0=new Ke(0,0,1),rs={type:"added"},a_={type:"removed"},pa={type:"childadded",child:null},Zs={type:"childremoved",child:null};class gn extends qc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Kg++}),this.uuid=$c(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gn.DEFAULT_UP.clone();const t=new Ke,n=new Za,c=new ha,h=new Ke(1,1,1);n._onChange(function(){c.setFromEuler(n,!1)}),c._onChange(function(){n.setFromQuaternion(c,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new nn},normalMatrix:{value:new On}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=gn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Qf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Yd.setFromAxisAngle(t,n),this.quaternion.multiply(Yd),this}rotateOnWorldAxis(t,n){return Yd.setFromAxisAngle(t,n),this.quaternion.premultiply(Yd),this}rotateX(t){return this.rotateOnAxis(nd,t)}rotateY(t){return this.rotateOnAxis(Xc,t)}rotateZ(t){return this.rotateOnAxis(e0,t)}translateOnAxis(t,n){return Nf.copy(t).applyQuaternion(this.quaternion),this.position.add(Nf.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(nd,t)}translateY(t){return this.translateOnAxis(Xc,t)}translateZ(t){return this.translateOnAxis(e0,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Su.copy(this.matrixWorld).invert())}lookAt(t,n,c){t.isVector3?Aa.copy(t):Aa.set(t,n,c);const h=this.parent;this.updateWorldMatrix(!0,!1),Pa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Su.lookAt(Pa,Aa,this.up):Su.lookAt(Aa,Pa,this.up),this.quaternion.setFromRotationMatrix(Su),h&&(Su.extractRotation(h.matrixWorld),Yd.setFromRotationMatrix(Su),this.quaternion.premultiply(Yd.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(rs),pa.child=t,this.dispatchEvent(pa),pa.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.remove(arguments[c]);return this}const n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(a_),Zs.child=t,this.dispatchEvent(Zs),Zs.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Su.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Su.multiply(t.parent.matrixWorld)),t.applyMatrix4(Su),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(rs),pa.child=t,this.dispatchEvent(pa),pa.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let c=0,h=this.children.length;c<h;c++){const f=this.children[c].getObjectByProperty(t,n);if(f!==void 0)return f}}getObjectsByProperty(t,n,c=[]){this[t]===n&&c.push(this);const h=this.children;for(let f=0,d=h.length;f<d;f++)h[f].getObjectsByProperty(t,n,c);return c}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pa,t,xp),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pa,Jd,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let c=0,h=n.length;c<h;c++)n[c].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const n=this.children;for(let c=0,h=n.length;c<h;c++)n[c].traverseVisible(t)}traverseAncestors(t){const n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let c=0,h=n.length;c<h;c++)n[c].updateMatrixWorld(t)}updateWorldMatrix(t,n){const c=this.parent;if(t===!0&&c!==null&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const h=this.children;for(let f=0,d=h.length;f<d;f++)h[f].updateWorldMatrix(!1,!0)}}toJSON(t){const n=t===void 0||typeof t=="string",c={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},c.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const h={};function f(p,v){return p[v.uuid]===void 0&&(p[v.uuid]=v.toJSON(t)),v.uuid}if(h.uuid=this.uuid,h.type=this.type,this.name!==""&&(h.name=this.name),this.castShadow===!0&&(h.castShadow=!0),this.receiveShadow===!0&&(h.receiveShadow=!0),this.visible===!1&&(h.visible=!1),this.frustumCulled===!1&&(h.frustumCulled=!1),this.renderOrder!==0&&(h.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),h.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(h.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(h.type="BatchedMesh",h.perObjectFrustumCulled=this.perObjectFrustumCulled,h.sortObjects=this.sortObjects,h.drawRanges=this._drawRanges,h.reservedRanges=this._reservedRanges,h.visibility=this._visibility,h.active=this._active,h.bounds=this._bounds.map(p=>({boxInitialized:p.boxInitialized,boxMin:p.box.min.toArray(),boxMax:p.box.max.toArray(),sphereInitialized:p.sphereInitialized,sphereRadius:p.sphere.radius,sphereCenter:p.sphere.center.toArray()})),h.maxInstanceCount=this._maxInstanceCount,h.maxVertexCount=this._maxVertexCount,h.maxIndexCount=this._maxIndexCount,h.geometryInitialized=this._geometryInitialized,h.geometryCount=this._geometryCount,h.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(h.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(h.boundingSphere={center:h.boundingSphere.center.toArray(),radius:h.boundingSphere.radius}),this.boundingBox!==null&&(h.boundingBox={min:h.boundingBox.min.toArray(),max:h.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(h.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=f(t.geometries,this.geometry);const p=this.geometry.parameters;if(p!==void 0&&p.shapes!==void 0){const v=p.shapes;if(Array.isArray(v))for(let w=0,S=v.length;w<S;w++){const B=v[w];f(t.shapes,B)}else f(t.shapes,v)}}if(this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(f(t.skeletons,this.skeleton),h.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const p=[];for(let v=0,w=this.material.length;v<w;v++)p.push(f(t.materials,this.material[v]));h.material=p}else h.material=f(t.materials,this.material);if(this.children.length>0){h.children=[];for(let p=0;p<this.children.length;p++)h.children.push(this.children[p].toJSON(t).object)}if(this.animations.length>0){h.animations=[];for(let p=0;p<this.animations.length;p++){const v=this.animations[p];h.animations.push(f(t.animations,v))}}if(n){const p=d(t.geometries),v=d(t.materials),w=d(t.textures),S=d(t.images),B=d(t.shapes),R=d(t.skeletons),D=d(t.animations),O=d(t.nodes);p.length>0&&(c.geometries=p),v.length>0&&(c.materials=v),w.length>0&&(c.textures=w),S.length>0&&(c.images=S),B.length>0&&(c.shapes=B),R.length>0&&(c.skeletons=R),D.length>0&&(c.animations=D),O.length>0&&(c.nodes=O)}return c.object=h,c;function d(p){const v=[];for(const w in p){const S=p[w];delete S.metadata,v.push(S)}return v}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let c=0;c<t.children.length;c++){const h=t.children[c];this.add(h.clone())}return this}}gn.DEFAULT_UP=new Ke(0,1,0),gn.DEFAULT_MATRIX_AUTO_UPDATE=!0,gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const wl=new Ke,el=new Ke,Hf=new Ke,Qo=new Ke,Cp=new Ke,Zd=new Ke,uh=new Ke,Ep=new Ke,Xg=new Ke,zA=new Ke,l_=new Fr,eA=new Fr,hh=new Fr;class No{constructor(t=new Ke,n=new Ke,c=new Ke){this.a=t,this.b=n,this.c=c}static getNormal(t,n,c,h){h.subVectors(c,n),wl.subVectors(t,n),h.cross(wl);const f=h.lengthSq();return f>0?h.multiplyScalar(1/Math.sqrt(f)):h.set(0,0,0)}static getBarycoord(t,n,c,h,f){wl.subVectors(h,n),el.subVectors(c,n),Hf.subVectors(t,n);const d=wl.dot(wl),p=wl.dot(el),v=wl.dot(Hf),w=el.dot(el),S=el.dot(Hf),B=d*w-p*p;if(B===0)return f.set(0,0,0),null;const R=1/B,D=(w*v-p*S)*R,O=(d*S-p*v)*R;return f.set(1-D-O,O,D)}static containsPoint(t,n,c,h){return this.getBarycoord(t,n,c,h,Qo)!==null&&Qo.x>=0&&Qo.y>=0&&Qo.x+Qo.y<=1}static getInterpolation(t,n,c,h,f,d,p,v){return this.getBarycoord(t,n,c,h,Qo)===null?(v.x=0,v.y=0,"z"in v&&(v.z=0),"w"in v&&(v.w=0),null):(v.setScalar(0),v.addScaledVector(f,Qo.x),v.addScaledVector(d,Qo.y),v.addScaledVector(p,Qo.z),v)}static getInterpolatedAttribute(t,n,c,h,f,d){return l_.setScalar(0),eA.setScalar(0),hh.setScalar(0),l_.fromBufferAttribute(t,n),eA.fromBufferAttribute(t,c),hh.fromBufferAttribute(t,h),d.setScalar(0),d.addScaledVector(l_,f.x),d.addScaledVector(eA,f.y),d.addScaledVector(hh,f.z),d}static isFrontFacing(t,n,c,h){return wl.subVectors(c,n),el.subVectors(t,n),wl.cross(el).dot(h)<0}set(t,n,c){return this.a.copy(t),this.b.copy(n),this.c.copy(c),this}setFromPointsAndIndices(t,n,c,h){return this.a.copy(t[n]),this.b.copy(t[c]),this.c.copy(t[h]),this}setFromAttributeAndIndices(t,n,c,h){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,c),this.c.fromBufferAttribute(t,h),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return wl.subVectors(this.c,this.b),el.subVectors(this.a,this.b),.5*wl.cross(el).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return No.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return No.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,c,h,f){return No.getInterpolation(t,this.a,this.b,this.c,n,c,h,f)}containsPoint(t){return No.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return No.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const c=this.a,h=this.b,f=this.c;let d,p;Cp.subVectors(h,c),Zd.subVectors(f,c),Ep.subVectors(t,c);const v=Cp.dot(Ep),w=Zd.dot(Ep);if(v<=0&&w<=0)return n.copy(c);Xg.subVectors(t,h);const S=Cp.dot(Xg),B=Zd.dot(Xg);if(S>=0&&B<=S)return n.copy(h);const R=v*B-S*w;if(R<=0&&v>=0&&S<=0)return d=v/(v-S),n.copy(c).addScaledVector(Cp,d);zA.subVectors(t,f);const D=Cp.dot(zA),O=Zd.dot(zA);if(O>=0&&D<=O)return n.copy(f);const V=D*w-v*O;if(V<=0&&w>=0&&O<=0)return p=w/(w-O),n.copy(c).addScaledVector(Zd,p);const $=S*O-D*B;if($<=0&&B-S>=0&&D-O>=0)return uh.subVectors(f,h),p=(B-S)/(B-S+(D-O)),n.copy(h).addScaledVector(uh,p);const G=1/($+V+R);return d=V*G,p=R*G,n.copy(c).addScaledVector(Cp,d).addScaledVector(Zd,p)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const rd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sd={h:0,s:0,l:0},Sp={h:0,s:0,l:0};function GA(o,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?o+6*(t-o)*n:n<.5?t:n<2/3?o+6*(t-o)*(2/3-n):o}class an{constructor(t,n,c){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,c)}set(t,n,c){if(n===void 0&&c===void 0){const h=t;h&&h.isColor?this.copy(h):typeof h=="number"?this.setHex(h):typeof h=="string"&&this.setStyle(h)}else this.setRGB(t,n,c);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=Ns){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Qr.toWorkingColorSpace(this,n),this}setRGB(t,n,c,h=Qr.workingColorSpace){return this.r=t,this.g=n,this.b=c,Qr.toWorkingColorSpace(this,h),this}setHSL(t,n,c,h=Qr.workingColorSpace){if(t=zl(t,1),n=ua(n,0,1),c=ua(c,0,1),n===0)this.r=this.g=this.b=c;else{const f=c<=.5?c*(1+n):c+n-c*n,d=2*c-f;this.r=GA(d,f,t+1/3),this.g=GA(d,f,t),this.b=GA(d,f,t-1/3)}return Qr.toWorkingColorSpace(this,h),this}setStyle(t,n=Ns){function c(f){f!==void 0&&parseFloat(f)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let h;if(h=/^(\w+)\(([^\)]*)\)/.exec(t)){let f;const d=h[1],p=h[2];switch(d){case"rgb":case"rgba":if(f=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return c(f[4]),this.setRGB(Math.min(255,parseInt(f[1],10))/255,Math.min(255,parseInt(f[2],10))/255,Math.min(255,parseInt(f[3],10))/255,n);if(f=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return c(f[4]),this.setRGB(Math.min(100,parseInt(f[1],10))/100,Math.min(100,parseInt(f[2],10))/100,Math.min(100,parseInt(f[3],10))/100,n);break;case"hsl":case"hsla":if(f=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return c(f[4]),this.setHSL(parseFloat(f[1])/360,parseFloat(f[2])/100,parseFloat(f[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(t)){const f=h[1],d=f.length;if(d===3)return this.setRGB(parseInt(f.charAt(0),16)/15,parseInt(f.charAt(1),16)/15,parseInt(f.charAt(2),16)/15,n);if(d===6)return this.setHex(parseInt(f,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=Ns){const c=rd[t.toLowerCase()];return c!==void 0?this.setHex(c,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=xu(t.r),this.g=xu(t.g),this.b=xu(t.b),this}copyLinearToSRGB(t){return this.r=Gl(t.r),this.g=Gl(t.g),this.b=Gl(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ns){return Qr.fromWorkingColorSpace(_n.copy(this),t),65536*Math.round(ua(255*_n.r,0,255))+256*Math.round(ua(255*_n.g,0,255))+Math.round(ua(255*_n.b,0,255))}getHexString(t=Ns){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=Qr.workingColorSpace){Qr.fromWorkingColorSpace(_n.copy(this),n);const c=_n.r,h=_n.g,f=_n.b,d=Math.max(c,h,f),p=Math.min(c,h,f);let v,w;const S=(p+d)/2;if(p===d)v=0,w=0;else{const B=d-p;switch(w=S<=.5?B/(d+p):B/(2-d-p),d){case c:v=(h-f)/B+(h<f?6:0);break;case h:v=(f-c)/B+2;break;case f:v=(c-h)/B+4}v/=6}return t.h=v,t.s=w,t.l=S,t}getRGB(t,n=Qr.workingColorSpace){return Qr.fromWorkingColorSpace(_n.copy(this),n),t.r=_n.r,t.g=_n.g,t.b=_n.b,t}getStyle(t=Ns){Qr.fromWorkingColorSpace(_n.copy(this),t);const n=_n.r,c=_n.g,h=_n.b;return t!==Ns?`color(${t} ${n.toFixed(3)} ${c.toFixed(3)} ${h.toFixed(3)})`:`rgb(${Math.round(255*n)},${Math.round(255*c)},${Math.round(255*h)})`}offsetHSL(t,n,c){return this.getHSL(sd),this.setHSL(sd.h+t,sd.s+n,sd.l+c)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,c){return this.r=t.r+(n.r-t.r)*c,this.g=t.g+(n.g-t.g)*c,this.b=t.b+(n.b-t.b)*c,this}lerpHSL(t,n){this.getHSL(sd),t.getHSL(Sp);const c=Lf(sd.h,Sp.h,n),h=Lf(sd.s,Sp.s,n),f=Lf(sd.l,Sp.l,n);return this.setHSL(c,h,f),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,c=this.g,h=this.b,f=t.elements;return this.r=f[0]*n+f[3]*c+f[6]*h,this.g=f[1]*n+f[4]*c+f[7]*h,this.b=f[2]*n+f[5]*c+f[8]*h,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _n=new an;an.NAMES=rd;let $l=0,Us=class extends qc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:$l++}),this.uuid=$c(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Vi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new an(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=vp,this.stencilZFail=vp,this.stencilZPass=vp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(o){this._alphaTest>0!=o>0&&this.version++,this._alphaTest=o}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(o){if(o!==void 0)for(const t in o){const n=o[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const c=this[t];c!==void 0?c&&c.isColor?c.set(n):c&&c.isVector3&&n&&n.isVector3?c.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(o){const t=o===void 0||typeof o=="string";t&&(o={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function c(h){const f=[];for(const d in h){const p=h[d];delete p.metadata,f.push(p)}return f}if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(o).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(o).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(o).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(o).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(o).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(o).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(o).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(o).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(o).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(o).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(o).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(o).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(o).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(o).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(n.blending=this.blending),this.side!==0&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==204&&(n.blendSrc=this.blendSrc),this.blendDst!==205&&(n.blendDst=this.blendDst),this.blendEquation!==Vi&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==3&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==519&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==vp&&(n.stencilFail=this.stencilFail),this.stencilZFail!==vp&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==vp&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const h=c(o.textures),f=c(o.images);h.length>0&&(n.textures=h),f.length>0&&(n.images=f)}return n}clone(){return new this.constructor().copy(this)}copy(o){this.name=o.name,this.blending=o.blending,this.side=o.side,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.blendColor.copy(o.blendColor),this.blendAlpha=o.blendAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;const t=o.clippingPlanes;let n=null;if(t!==null){const c=t.length;n=new Array(c);for(let h=0;h!==c;++h)n[h]=t[h].clone()}return this.clippingPlanes=n,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.alphaHash=o.alphaHash,this.alphaToCoverage=o.alphaToCoverage,this.premultipliedAlpha=o.premultipliedAlpha,this.forceSinglePass=o.forceSinglePass,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(o){o===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class Wl extends Us{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new an(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const t0=function(){const o=new ArrayBuffer(4),t=new Float32Array(o),n=new Uint32Array(o),c=new Uint32Array(512),h=new Uint32Array(512);for(let v=0;v<256;++v){const w=v-127;w<-27?(c[v]=0,c[256|v]=32768,h[v]=24,h[256|v]=24):w<-14?(c[v]=1024>>-w-14,c[256|v]=1024>>-w-14|32768,h[v]=-w-1,h[256|v]=-w-1):w<=15?(c[v]=w+15<<10,c[256|v]=w+15<<10|32768,h[v]=13,h[256|v]=13):w<128?(c[v]=31744,c[256|v]=64512,h[v]=24,h[256|v]=24):(c[v]=31744,c[256|v]=64512,h[v]=13,h[256|v]=13)}const f=new Uint32Array(2048),d=new Uint32Array(64),p=new Uint32Array(64);for(let v=1;v<1024;++v){let w=v<<13,S=0;for(;!(8388608&w);)w<<=1,S-=8388608;w&=-8388609,S+=947912704,f[v]=w|S}for(let v=1024;v<2048;++v)f[v]=939524096+(v-1024<<13);for(let v=1;v<31;++v)d[v]=v<<23;d[31]=1199570944,d[32]=2147483648;for(let v=33;v<63;++v)d[v]=2147483648+(v-32<<23);d[63]=3347054592;for(let v=1;v<64;++v)v!==32&&(p[v]=1024);return{floatView:t,uint32View:n,baseTable:c,shiftTable:h,mantissaTable:f,exponentTable:d,offsetTable:p}}(),zf=function(o){Math.abs(o)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),o=ua(o,-65504,65504),t0.floatView[0]=o;const t=t0.uint32View[0],n=t>>23&511;return t0.baseTable[n]+((8388607&t)>>t0.shiftTable[n])},eo=new Ke,ks=new Cn;class Ls{constructor(t,n,c=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=c,this.usage=kf,this.updateRanges=[],this.gpuType=Xi,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,c){t*=this.itemSize,c*=n.itemSize;for(let h=0,f=this.itemSize;h<f;h++)this.array[t+h]=n.array[c+h];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let n=0,c=this.count;n<c;n++)ks.fromBufferAttribute(this,n),ks.applyMatrix3(t),this.setXY(n,ks.x,ks.y);else if(this.itemSize===3)for(let n=0,c=this.count;n<c;n++)eo.fromBufferAttribute(this,n),eo.applyMatrix3(t),this.setXYZ(n,eo.x,eo.y,eo.z);return this}applyMatrix4(t){for(let n=0,c=this.count;n<c;n++)eo.fromBufferAttribute(this,n),eo.applyMatrix4(t),this.setXYZ(n,eo.x,eo.y,eo.z);return this}applyNormalMatrix(t){for(let n=0,c=this.count;n<c;n++)eo.fromBufferAttribute(this,n),eo.applyNormalMatrix(t),this.setXYZ(n,eo.x,eo.y,eo.z);return this}transformDirection(t){for(let n=0,c=this.count;n<c;n++)eo.fromBufferAttribute(this,n),eo.transformDirection(t),this.setXYZ(n,eo.x,eo.y,eo.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let c=this.array[t*this.itemSize+n];return this.normalized&&(c=Wc(c,this.array)),c}setComponent(t,n,c){return this.normalized&&(c=ds(c,this.array)),this.array[t*this.itemSize+n]=c,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=Wc(n,this.array)),n}setX(t,n){return this.normalized&&(n=ds(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=Wc(n,this.array)),n}setY(t,n){return this.normalized&&(n=ds(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=Wc(n,this.array)),n}setZ(t,n){return this.normalized&&(n=ds(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=Wc(n,this.array)),n}setW(t,n){return this.normalized&&(n=ds(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,c){return t*=this.itemSize,this.normalized&&(n=ds(n,this.array),c=ds(c,this.array)),this.array[t+0]=n,this.array[t+1]=c,this}setXYZ(t,n,c,h){return t*=this.itemSize,this.normalized&&(n=ds(n,this.array),c=ds(c,this.array),h=ds(h,this.array)),this.array[t+0]=n,this.array[t+1]=c,this.array[t+2]=h,this}setXYZW(t,n,c,h,f){return t*=this.itemSize,this.normalized&&(n=ds(n,this.array),c=ds(c,this.array),h=ds(h,this.array),f=ds(f,this.array)),this.array[t+0]=n,this.array[t+1]=c,this.array[t+2]=h,this.array[t+3]=f,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==kf&&(t.usage=this.usage),t}}class Bp extends Ls{constructor(t,n,c){super(new Uint16Array(t),n,c)}}class Yg extends Ls{constructor(t,n,c){super(new Uint32Array(t),n,c)}}class fa extends Ls{constructor(t,n,c){super(new Float32Array(t),n,c)}}let Bu=0;const Oa=new nn,c_=new gn,VA=new Ke,xc=new da,Iu=new da,to=new Ke;class ga extends qc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Bu++}),this.uuid=$c(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Vg(t)?Yg:Bp)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,n,c=0){this.groups.push({start:t,count:n,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(t),n.needsUpdate=!0);const c=this.attributes.normal;if(c!==void 0){const f=new On().getNormalMatrix(t);c.applyNormalMatrix(f),c.needsUpdate=!0}const h=this.attributes.tangent;return h!==void 0&&(h.transformDirection(t),h.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Oa.makeRotationFromQuaternion(t),this.applyMatrix4(Oa),this}rotateX(t){return Oa.makeRotationX(t),this.applyMatrix4(Oa),this}rotateY(t){return Oa.makeRotationY(t),this.applyMatrix4(Oa),this}rotateZ(t){return Oa.makeRotationZ(t),this.applyMatrix4(Oa),this}translate(t,n,c){return Oa.makeTranslation(t,n,c),this.applyMatrix4(Oa),this}scale(t,n,c){return Oa.makeScale(t,n,c),this.applyMatrix4(Oa),this}lookAt(t){return c_.lookAt(t),c_.updateMatrix(),this.applyMatrix4(c_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(VA).negate(),this.translate(VA.x,VA.y,VA.z),this}setFromPoints(t){const n=[];for(let c=0,h=t.length;c<h;c++){const f=t[c];n.push(f.x,f.y,f.z||0)}return this.setAttribute("position",new fa(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new da);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Ke(-1/0,-1/0,-1/0),new Ke(1/0,1/0,1/0));if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(let c=0,h=n.length;c<h;c++){const f=n[c];xc.setFromBufferAttribute(f),this.morphTargetsRelative?(to.addVectors(this.boundingBox.min,xc.min),this.boundingBox.expandByPoint(to),to.addVectors(this.boundingBox.max,xc.max),this.boundingBox.expandByPoint(to)):(this.boundingBox.expandByPoint(xc.min),this.boundingBox.expandByPoint(xc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _c);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Ke,1/0);if(t){const c=this.boundingSphere.center;if(xc.setFromBufferAttribute(t),n)for(let f=0,d=n.length;f<d;f++){const p=n[f];Iu.setFromBufferAttribute(p),this.morphTargetsRelative?(to.addVectors(xc.min,Iu.min),xc.expandByPoint(to),to.addVectors(xc.max,Iu.max),xc.expandByPoint(to)):(xc.expandByPoint(Iu.min),xc.expandByPoint(Iu.max))}xc.getCenter(c);let h=0;for(let f=0,d=t.count;f<d;f++)to.fromBufferAttribute(t,f),h=Math.max(h,c.distanceToSquared(to));if(n)for(let f=0,d=n.length;f<d;f++){const p=n[f],v=this.morphTargetsRelative;for(let w=0,S=p.count;w<S;w++)to.fromBufferAttribute(p,w),v&&(VA.fromBufferAttribute(t,w),to.add(VA)),h=Math.max(h,c.distanceToSquared(to))}this.boundingSphere.radius=Math.sqrt(h),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(t===null||n.position===void 0||n.normal===void 0||n.uv===void 0)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=n.position,h=n.normal,f=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ls(new Float32Array(4*c.count),4));const d=this.getAttribute("tangent"),p=[],v=[];for(let De=0;De<c.count;De++)p[De]=new Ke,v[De]=new Ke;const w=new Ke,S=new Ke,B=new Ke,R=new Cn,D=new Cn,O=new Cn,V=new Ke,$=new Ke;function G(De,Ne,We){w.fromBufferAttribute(c,De),S.fromBufferAttribute(c,Ne),B.fromBufferAttribute(c,We),R.fromBufferAttribute(f,De),D.fromBufferAttribute(f,Ne),O.fromBufferAttribute(f,We),S.sub(w),B.sub(w),D.sub(R),O.sub(R);const vt=1/(D.x*O.y-O.x*D.y);isFinite(vt)&&(V.copy(S).multiplyScalar(O.y).addScaledVector(B,-D.y).multiplyScalar(vt),$.copy(B).multiplyScalar(D.x).addScaledVector(S,-O.x).multiplyScalar(vt),p[De].add(V),p[Ne].add(V),p[We].add(V),v[De].add($),v[Ne].add($),v[We].add($))}let X=this.groups;X.length===0&&(X=[{start:0,count:t.count}]);for(let De=0,Ne=X.length;De<Ne;++De){const We=X[De],vt=We.start;for(let ot=vt,nt=vt+We.count;ot<nt;ot+=3)G(t.getX(ot+0),t.getX(ot+1),t.getX(ot+2))}const te=new Ke,ae=new Ke,oe=new Ke,Ae=new Ke;function ve(De){oe.fromBufferAttribute(h,De),Ae.copy(oe);const Ne=p[De];te.copy(Ne),te.sub(oe.multiplyScalar(oe.dot(Ne))).normalize(),ae.crossVectors(Ae,Ne);const We=ae.dot(v[De])<0?-1:1;d.setXYZW(De,te.x,te.y,te.z,We)}for(let De=0,Ne=X.length;De<Ne;++De){const We=X[De],vt=We.start;for(let ot=vt,nt=vt+We.count;ot<nt;ot+=3)ve(t.getX(ot+0)),ve(t.getX(ot+1)),ve(t.getX(ot+2))}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(n!==void 0){let c=this.getAttribute("normal");if(c===void 0)c=new Ls(new Float32Array(3*n.count),3),this.setAttribute("normal",c);else for(let R=0,D=c.count;R<D;R++)c.setXYZ(R,0,0,0);const h=new Ke,f=new Ke,d=new Ke,p=new Ke,v=new Ke,w=new Ke,S=new Ke,B=new Ke;if(t)for(let R=0,D=t.count;R<D;R+=3){const O=t.getX(R+0),V=t.getX(R+1),$=t.getX(R+2);h.fromBufferAttribute(n,O),f.fromBufferAttribute(n,V),d.fromBufferAttribute(n,$),S.subVectors(d,f),B.subVectors(h,f),S.cross(B),p.fromBufferAttribute(c,O),v.fromBufferAttribute(c,V),w.fromBufferAttribute(c,$),p.add(S),v.add(S),w.add(S),c.setXYZ(O,p.x,p.y,p.z),c.setXYZ(V,v.x,v.y,v.z),c.setXYZ($,w.x,w.y,w.z)}else for(let R=0,D=n.count;R<D;R+=3)h.fromBufferAttribute(n,R+0),f.fromBufferAttribute(n,R+1),d.fromBufferAttribute(n,R+2),S.subVectors(d,f),B.subVectors(h,f),S.cross(B),c.setXYZ(R+0,S.x,S.y,S.z),c.setXYZ(R+1,S.x,S.y,S.z),c.setXYZ(R+2,S.x,S.y,S.z);this.normalizeNormals(),c.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,c=t.count;n<c;n++)to.fromBufferAttribute(t,n),to.normalize(),t.setXYZ(n,to.x,to.y,to.z)}toNonIndexed(){function t(p,v){const w=p.array,S=p.itemSize,B=p.normalized,R=new w.constructor(v.length*S);let D=0,O=0;for(let V=0,$=v.length;V<$;V++){D=p.isInterleavedBufferAttribute?v[V]*p.data.stride+p.offset:v[V]*S;for(let G=0;G<S;G++)R[O++]=w[D++]}return new Ls(R,S,B)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ga,c=this.index.array,h=this.attributes;for(const p in h){const v=t(h[p],c);n.setAttribute(p,v)}const f=this.morphAttributes;for(const p in f){const v=[],w=f[p];for(let S=0,B=w.length;S<B;S++){const R=t(w[S],c);v.push(R)}n.morphAttributes[p]=v}n.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let p=0,v=d.length;p<v;p++){const w=d[p];n.addGroup(w.start,w.count,w.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const v=this.parameters;for(const w in v)v[w]!==void 0&&(t[w]=v[w]);return t}t.data={attributes:{}};const n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const c=this.attributes;for(const v in c){const w=c[v];t.data.attributes[v]=w.toJSON(t.data)}const h={};let f=!1;for(const v in this.morphAttributes){const w=this.morphAttributes[v],S=[];for(let B=0,R=w.length;B<R;B++){const D=w[B];S.push(D.toJSON(t.data))}S.length>0&&(h[v]=S,f=!0)}f&&(t.data.morphAttributes=h,t.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));const p=this.boundingSphere;return p!==null&&(t.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const c=t.index;c!==null&&this.setIndex(c.clone(n));const h=t.attributes;for(const w in h){const S=h[w];this.setAttribute(w,S.clone(n))}const f=t.morphAttributes;for(const w in f){const S=[],B=f[w];for(let R=0,D=B.length;R<D;R++)S.push(B[R].clone(n));this.morphAttributes[w]=S}this.morphTargetsRelative=t.morphTargetsRelative;const d=t.groups;for(let w=0,S=d.length;w<S;w++){const B=d[w];this.addGroup(B.start,B.count,B.materialIndex)}const p=t.boundingBox;p!==null&&(this.boundingBox=p.clone());const v=t.boundingSphere;return v!==null&&(this.boundingSphere=v.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Jg=new nn,Ip=new ch,In=new _c,u_=new Ke,tA=new Ke,Zg=new Ke,h_=new Ke,Gf=new Ke,qA=new Ke,em=new Ke,d_=new Ke;class As extends gn{constructor(t=new ga,n=new Wl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const c=t[n[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,f=c.length;h<f;h++){const d=c[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=h}}}}getVertexPosition(t,n){const c=this.geometry,h=c.attributes.position,f=c.morphAttributes.position,d=c.morphTargetsRelative;n.fromBufferAttribute(h,t);const p=this.morphTargetInfluences;if(f&&p){qA.set(0,0,0);for(let v=0,w=f.length;v<w;v++){const S=p[v],B=f[v];S!==0&&(Gf.fromBufferAttribute(B,t),d?qA.addScaledVector(Gf,S):qA.addScaledVector(Gf.sub(n),S))}n.add(qA)}return n}raycast(t,n){const c=this.geometry,h=this.material,f=this.matrixWorld;if(h!==void 0){if(c.boundingSphere===null&&c.computeBoundingSphere(),In.copy(c.boundingSphere),In.applyMatrix4(f),Ip.copy(t.ray).recast(t.near),In.containsPoint(Ip.origin)===!1&&(Ip.intersectSphere(In,u_)===null||Ip.origin.distanceToSquared(u_)>(t.far-t.near)**2))return;Jg.copy(f).invert(),Ip.copy(t.ray).applyMatrix4(Jg),c.boundingBox!==null&&Ip.intersectsBox(c.boundingBox)===!1||this._computeIntersections(t,n,Ip)}}_computeIntersections(t,n,c){let h;const f=this.geometry,d=this.material,p=f.index,v=f.attributes.position,w=f.attributes.uv,S=f.attributes.uv1,B=f.attributes.normal,R=f.groups,D=f.drawRange;if(p!==null)if(Array.isArray(d))for(let O=0,V=R.length;O<V;O++){const $=R[O],G=d[$.materialIndex];for(let X=Math.max($.start,D.start),te=Math.min(p.count,Math.min($.start+$.count,D.start+D.count));X<te;X+=3)h=od(this,G,t,c,w,S,B,p.getX(X),p.getX(X+1),p.getX(X+2)),h&&(h.faceIndex=Math.floor(X/3),h.face.materialIndex=$.materialIndex,n.push(h))}else for(let O=Math.max(0,D.start),V=Math.min(p.count,D.start+D.count);O<V;O+=3)h=od(this,d,t,c,w,S,B,p.getX(O),p.getX(O+1),p.getX(O+2)),h&&(h.faceIndex=Math.floor(O/3),n.push(h));else if(v!==void 0)if(Array.isArray(d))for(let O=0,V=R.length;O<V;O++){const $=R[O],G=d[$.materialIndex];for(let X=Math.max($.start,D.start),te=Math.min(v.count,Math.min($.start+$.count,D.start+D.count));X<te;X+=3)h=od(this,G,t,c,w,S,B,X,X+1,X+2),h&&(h.faceIndex=Math.floor(X/3),h.face.materialIndex=$.materialIndex,n.push(h))}else for(let O=Math.max(0,D.start),V=Math.min(v.count,D.start+D.count);O<V;O+=3)h=od(this,d,t,c,w,S,B,O,O+1,O+2),h&&(h.faceIndex=Math.floor(O/3),n.push(h))}}function od(o,t,n,c,h,f,d,p,v,w){o.getVertexPosition(p,tA),o.getVertexPosition(v,Zg),o.getVertexPosition(w,h_);const S=function(B,R,D,O,V,$,G,X){let te;if(te=R.side===1?O.intersectTriangle(G,$,V,!0,X):O.intersectTriangle(V,$,G,R.side===0,X),te===null)return null;d_.copy(X),d_.applyMatrix4(B.matrixWorld);const ae=D.ray.origin.distanceTo(d_);return ae<D.near||ae>D.far?null:{distance:ae,point:d_.clone(),object:B}}(o,t,n,c,tA,Zg,h_,em);if(S){const B=new Ke;No.getBarycoord(em,tA,Zg,h_,B),h&&(S.uv=No.getInterpolatedAttribute(h,p,v,w,B,new Cn)),f&&(S.uv1=No.getInterpolatedAttribute(f,p,v,w,B,new Cn)),d&&(S.normal=No.getInterpolatedAttribute(d,p,v,w,B,new Ke),S.normal.dot(c.direction)>0&&S.normal.multiplyScalar(-1));const R={a:p,b:v,c:w,normal:new Ke,materialIndex:0};No.getNormal(tA,Zg,h_,R.normal),S.face=R,S.barycoord=B}return S}class ad extends ga{constructor(t=1,n=1,c=1,h=1,f=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:c,widthSegments:h,heightSegments:f,depthSegments:d};const p=this;h=Math.floor(h),f=Math.floor(f),d=Math.floor(d);const v=[],w=[],S=[],B=[];let R=0,D=0;function O(V,$,G,X,te,ae,oe,Ae,ve,De,Ne){const We=ae/ve,vt=oe/De,ot=ae/2,nt=oe/2,st=Ae/2,mt=ve+1,It=De+1;let Jt=0,jt=0;const _i=new Ke;for(let xi=0;xi<It;xi++){const Kt=xi*vt-nt;for(let _t=0;_t<mt;_t++){const hi=_t*We-ot;_i[V]=hi*X,_i[$]=Kt*te,_i[G]=st,w.push(_i.x,_i.y,_i.z),_i[V]=0,_i[$]=0,_i[G]=Ae>0?1:-1,S.push(_i.x,_i.y,_i.z),B.push(_t/ve),B.push(1-xi/De),Jt+=1}}for(let xi=0;xi<De;xi++)for(let Kt=0;Kt<ve;Kt++){const _t=R+Kt+mt*xi,hi=R+Kt+mt*(xi+1),bi=R+(Kt+1)+mt*(xi+1),Ge=R+(Kt+1)+mt*xi;v.push(_t,hi,Ge),v.push(hi,bi,Ge),jt+=6}p.addGroup(D,jt,Ne),D+=jt,R+=Jt}O("z","y","x",-1,-1,c,n,t,d,f,0),O("z","y","x",1,-1,c,n,-t,d,f,1),O("x","z","y",1,1,t,c,n,h,d,2),O("x","z","y",1,-1,t,c,-n,h,d,3),O("x","y","z",1,-1,t,n,c,h,f,4),O("x","y","z",-1,-1,t,n,-c,h,f,5),this.setIndex(v),this.setAttribute("position",new fa(w,3)),this.setAttribute("normal",new fa(S,3)),this.setAttribute("uv",new fa(B,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ad(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function iA(o){const t={};for(const n in o){t[n]={};for(const c in o[n]){const h=o[n][c];h&&(h.isColor||h.isMatrix3||h.isMatrix4||h.isVector2||h.isVector3||h.isVector4||h.isTexture||h.isQuaternion)?h.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][c]=null):t[n][c]=h.clone():Array.isArray(h)?t[n][c]=h.slice():t[n][c]=h}}return t}function To(o){const t={};for(let n=0;n<o.length;n++){const c=iA(o[n]);for(const h in c)t[h]=c[h]}return t}function dh(o){const t=o.getRenderTarget();return t===null?o.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Qr.workingColorSpace}const tm={clone:iA,merge:To};class jl extends Us{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=iA(t.uniforms),this.uniformsGroups=function(n){const c=[];for(let h=0;h<n.length;h++)c.push(n[h].clone());return c}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const h in this.uniforms){const f=this.uniforms[h].value;f&&f.isTexture?n.uniforms[h]={type:"t",value:f.toJSON(t).uuid}:f&&f.isColor?n.uniforms[h]={type:"c",value:f.getHex()}:f&&f.isVector2?n.uniforms[h]={type:"v2",value:f.toArray()}:f&&f.isVector3?n.uniforms[h]={type:"v3",value:f.toArray()}:f&&f.isVector4?n.uniforms[h]={type:"v4",value:f.toArray()}:f&&f.isMatrix3?n.uniforms[h]={type:"m3",value:f.toArray()}:f&&f.isMatrix4?n.uniforms[h]={type:"m4",value:f.toArray()}:n.uniforms[h]={value:f}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const c={};for(const h in this.extensions)this.extensions[h]===!0&&(c[h]=!0);return Object.keys(c).length>0&&(n.extensions=c),n}}class i0 extends gn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn,this.coordinateSystem=sh}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Yc=new Ke,Jc=new Cn,tl=new Cn;class zs extends i0{constructor(t=50,n=1,c=.1,h=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=c,this.far=h,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=2*oh*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*td*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*oh*Math.atan(Math.tan(.5*td*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,n,c){Yc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Yc.x,Yc.y).multiplyScalar(-t/Yc.z),Yc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),c.set(Yc.x,Yc.y).multiplyScalar(-t/Yc.z)}getViewSize(t,n){return this.getViewBounds(t,Jc,tl),n.subVectors(tl,Jc)}setViewOffset(t,n,c,h,f,d){this.aspect=t/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=c,this.view.offsetY=h,this.view.width=f,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(.5*td*this.fov)/this.zoom,c=2*n,h=this.aspect*c,f=-.5*h;const d=this.view;if(this.view!==null&&this.view.enabled){const v=d.fullWidth,w=d.fullHeight;f+=d.offsetX*h/v,n-=d.offsetY*c/w,h*=d.width/v,c*=d.height/w}const p=this.filmOffset;p!==0&&(f+=t*p/this.getFilmWidth()),this.projectionMatrix.makePerspective(f,f+h,n,n-c,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Ho=-90;class Vf extends gn{constructor(t,n,c){super(),this.type="CubeCamera",this.renderTarget=c,this.coordinateSystem=null,this.activeMipmapLevel=0;const h=new zs(Ho,1,t,n);h.layers=this.layers,this.add(h);const f=new zs(Ho,1,t,n);f.layers=this.layers,this.add(f);const d=new zs(Ho,1,t,n);d.layers=this.layers,this.add(d);const p=new zs(Ho,1,t,n);p.layers=this.layers,this.add(p);const v=new zs(Ho,1,t,n);v.layers=this.layers,this.add(v);const w=new zs(Ho,1,t,n);w.layers=this.layers,this.add(w)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[c,h,f,d,p,v]=n;for(const w of n)this.remove(w);if(t===sh)c.up.set(0,1,0),c.lookAt(1,0,0),h.up.set(0,1,0),h.lookAt(-1,0,0),f.up.set(0,0,-1),f.lookAt(0,1,0),d.up.set(0,0,1),d.lookAt(0,-1,0),p.up.set(0,1,0),p.lookAt(0,0,1),v.up.set(0,1,0),v.lookAt(0,0,-1);else{if(t!==ka)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);c.up.set(0,-1,0),c.lookAt(-1,0,0),h.up.set(0,-1,0),h.lookAt(1,0,0),f.up.set(0,0,1),f.lookAt(0,1,0),d.up.set(0,0,-1),d.lookAt(0,-1,0),p.up.set(0,-1,0),p.lookAt(0,0,1),v.up.set(0,-1,0),v.lookAt(0,0,-1)}for(const w of n)this.add(w),w.updateMatrixWorld()}update(t,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:c,activeMipmapLevel:h}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[f,d,p,v,w,S]=this.children,B=t.getRenderTarget(),R=t.getActiveCubeFace(),D=t.getActiveMipmapLevel(),O=t.xr.enabled;t.xr.enabled=!1;const V=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,t.setRenderTarget(c,0,h),t.render(n,f),t.setRenderTarget(c,1,h),t.render(n,d),t.setRenderTarget(c,2,h),t.render(n,p),t.setRenderTarget(c,3,h),t.render(n,v),t.setRenderTarget(c,4,h),t.render(n,w),c.texture.generateMipmaps=V,t.setRenderTarget(c,5,h),t.render(n,S),t.setRenderTarget(B,R,D),t.xr.enabled=O,c.texture.needsPMREMUpdate=!0}}class lb extends Sr{constructor(t,n,c,h,f,d,p,v,w,S){super(t=t!==void 0?t:[],n=n!==void 0?n:oa,c,h,f,d,p,v,w,S),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class il extends Io{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const c={width:t,height:t,depth:1},h=[c,c,c,c,c,c];this.texture=new lb(h,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0&&n.generateMipmaps,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ci}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const c=new ad(5,5,5),h=new jl({name:"CubemapFromEquirect",uniforms:iA({tEquirect:{value:null}}),vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`,side:1,blending:0});h.uniforms.tEquirect.value=n;const f=new As(c,h),d=n.minFilter;return n.minFilter===en&&(n.minFilter=Ci),new Vf(1,10,this).update(t,f),n.minFilter=d,f.geometry.dispose(),f.material.dispose(),this}clear(t,n,c,h){const f=t.getRenderTarget();for(let d=0;d<6;d++)t.setRenderTarget(this,d),t.clear(n,c,h);t.setRenderTarget(f)}}const ld=new Ke,Tp=new Ke,mr=new On;class jr{constructor(t=new Ke(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,c,h){return this.normal.set(t,n,c),this.constant=h,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,c){const h=ld.subVectors(c,n).cross(Tp.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(h,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const c=t.delta(ld),h=this.normal.dot(c);if(h===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):null;const f=-(t.start.dot(this.normal)+this.constant)/h;return f<0||f>1?null:n.copy(t.start).addScaledVector(c,f)}intersectsLine(t){const n=this.distanceToPoint(t.start),c=this.distanceToPoint(t.end);return n<0&&c>0||c<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const c=n||mr.getNormalMatrix(t),h=this.coplanarPoint(ld).applyMatrix4(t),f=this.normal.applyMatrix3(c).normalize();return this.constant=-h.dot(f),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Gs=new _c,Mp=new Ke;class Rp{constructor(t=new jr,n=new jr,c=new jr,h=new jr,f=new jr,d=new jr){this.planes=[t,n,c,h,f,d]}set(t,n,c,h,f,d){const p=this.planes;return p[0].copy(t),p[1].copy(n),p[2].copy(c),p[3].copy(h),p[4].copy(f),p[5].copy(d),this}copy(t){const n=this.planes;for(let c=0;c<6;c++)n[c].copy(t.planes[c]);return this}setFromProjectionMatrix(t,n=2e3){const c=this.planes,h=t.elements,f=h[0],d=h[1],p=h[2],v=h[3],w=h[4],S=h[5],B=h[6],R=h[7],D=h[8],O=h[9],V=h[10],$=h[11],G=h[12],X=h[13],te=h[14],ae=h[15];if(c[0].setComponents(v-f,R-w,$-D,ae-G).normalize(),c[1].setComponents(v+f,R+w,$+D,ae+G).normalize(),c[2].setComponents(v+d,R+S,$+O,ae+X).normalize(),c[3].setComponents(v-d,R-S,$-O,ae-X).normalize(),c[4].setComponents(v-p,R-B,$-V,ae-te).normalize(),n===sh)c[5].setComponents(v+p,R+B,$+V,ae+te).normalize();else{if(n!==ka)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);c[5].setComponents(p,B,V,te).normalize()}return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Gs.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Gs.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Gs)}intersectsSprite(t){return Gs.center.set(0,0,0),Gs.radius=.7071067811865476,Gs.applyMatrix4(t.matrixWorld),this.intersectsSphere(Gs)}intersectsSphere(t){const n=this.planes,c=t.center,h=-t.radius;for(let f=0;f<6;f++)if(n[f].distanceToPoint(c)<h)return!1;return!0}intersectsBox(t){const n=this.planes;for(let c=0;c<6;c++){const h=n[c];if(Mp.x=h.normal.x>0?t.max.x:t.min.x,Mp.y=h.normal.y>0?t.max.y:t.min.y,Mp.z=h.normal.z>0?t.max.z:t.min.z,h.distanceToPoint(Mp)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let c=0;c<6;c++)if(n[c].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function $A(){let o=null,t=!1,n=null,c=null;function h(f,d){n(f,d),c=o.requestAnimationFrame(h)}return{start:function(){t!==!0&&n!==null&&(c=o.requestAnimationFrame(h),t=!0)},stop:function(){o.cancelAnimationFrame(c),t=!1},setAnimationLoop:function(f){n=f},setContext:function(f){o=f}}}function n0(o){const t=new WeakMap;return{get:function(n){return n.isInterleavedBufferAttribute&&(n=n.data),t.get(n)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const c=t.get(n);c&&(o.deleteBuffer(c.buffer),t.delete(n))},update:function(n,c){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const f=t.get(n);return void((!f||f.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const h=t.get(n);if(h===void 0)t.set(n,function(f,d){const p=f.array,v=f.usage,w=p.byteLength,S=o.createBuffer();let B;if(o.bindBuffer(d,S),o.bufferData(d,p,v),f.onUploadCallback(),p instanceof Float32Array)B=o.FLOAT;else if(p instanceof Uint16Array)B=f.isFloat16BufferAttribute?o.HALF_FLOAT:o.UNSIGNED_SHORT;else if(p instanceof Int16Array)B=o.SHORT;else if(p instanceof Uint32Array)B=o.UNSIGNED_INT;else if(p instanceof Int32Array)B=o.INT;else if(p instanceof Int8Array)B=o.BYTE;else if(p instanceof Uint8Array)B=o.UNSIGNED_BYTE;else{if(!(p instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);B=o.UNSIGNED_BYTE}return{buffer:S,type:B,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version,size:w}}(n,c));else if(h.version<n.version){if(h.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function(f,d,p){const v=d.array,w=d.updateRanges;if(o.bindBuffer(p,f),w.length===0)o.bufferSubData(p,0,v);else{w.sort((B,R)=>B.start-R.start);let S=0;for(let B=1;B<w.length;B++){const R=w[S],D=w[B];D.start<=R.start+R.count+1?R.count=Math.max(R.count,D.start+D.count-R.start):(++S,w[S]=D)}w.length=S+1;for(let B=0,R=w.length;B<R;B++){const D=w[B];o.bufferSubData(p,D.start*v.BYTES_PER_ELEMENT,v,D.start,D.count)}d.clearUpdateRanges()}d.onUploadCallback()})(h.buffer,n,c),h.version=n.version}}}}class Qa extends ga{constructor(t=1,n=1,c=1,h=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:c,heightSegments:h};const f=t/2,d=n/2,p=Math.floor(c),v=Math.floor(h),w=p+1,S=v+1,B=t/p,R=n/v,D=[],O=[],V=[],$=[];for(let G=0;G<S;G++){const X=G*R-d;for(let te=0;te<w;te++){const ae=te*B-f;O.push(ae,-X,0),V.push(0,0,1),$.push(te/p),$.push(1-G/v)}}for(let G=0;G<v;G++)for(let X=0;X<p;X++){const te=X+w*G,ae=X+w*(G+1),oe=X+1+w*(G+1),Ae=X+1+w*G;D.push(te,ae,Ae),D.push(ae,oe,Ae)}this.setIndex(D),this.setAttribute("position",new fa(O,3)),this.setAttribute("normal",new fa(V,3)),this.setAttribute("uv",new fa($,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Qa(t.width,t.height,t.widthSegments,t.heightSegments)}}const Mn={alphahash_fragment:`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment:`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment:`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex:`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex:`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex:`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment:`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex:`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common:`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment:`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment:`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex:`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex:`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin:`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps:`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment:`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex:`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex:`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment:`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment:`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex:`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment:`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment:`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},Yi={common:{diffuse:{value:new an(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new On}},envmap:{envMap:{value:null},envMapRotation:{value:new On},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new On}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new On}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new On},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new On},normalScale:{value:new Cn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new On},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new On}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new On}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new On}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new an(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new an(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0},uvTransform:{value:new On}},sprite:{diffuse:{value:new an(16777215)},opacity:{value:1},center:{value:new Cn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}}},ws={basic:{uniforms:To([Yi.common,Yi.specularmap,Yi.envmap,Yi.aomap,Yi.lightmap,Yi.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:To([Yi.common,Yi.specularmap,Yi.envmap,Yi.aomap,Yi.lightmap,Yi.emissivemap,Yi.bumpmap,Yi.normalmap,Yi.displacementmap,Yi.fog,Yi.lights,{emissive:{value:new an(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:To([Yi.common,Yi.specularmap,Yi.envmap,Yi.aomap,Yi.lightmap,Yi.emissivemap,Yi.bumpmap,Yi.normalmap,Yi.displacementmap,Yi.fog,Yi.lights,{emissive:{value:new an(0)},specular:{value:new an(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:To([Yi.common,Yi.envmap,Yi.aomap,Yi.lightmap,Yi.emissivemap,Yi.bumpmap,Yi.normalmap,Yi.displacementmap,Yi.roughnessmap,Yi.metalnessmap,Yi.fog,Yi.lights,{emissive:{value:new an(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:To([Yi.common,Yi.aomap,Yi.lightmap,Yi.emissivemap,Yi.bumpmap,Yi.normalmap,Yi.displacementmap,Yi.gradientmap,Yi.fog,Yi.lights,{emissive:{value:new an(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:To([Yi.common,Yi.bumpmap,Yi.normalmap,Yi.displacementmap,Yi.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:To([Yi.points,Yi.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:To([Yi.common,Yi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:To([Yi.common,Yi.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:To([Yi.common,Yi.bumpmap,Yi.normalmap,Yi.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:To([Yi.sprite,Yi.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new On},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new On}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:To([Yi.common,Yi.displacementmap,{referencePosition:{value:new Ke},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:To([Yi.lights,Yi.fog,{color:{value:new an(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};ws.physical={uniforms:To([ws.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new On},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new On},clearcoatNormalScale:{value:new Cn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new On},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new On},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new On},sheen:{value:0},sheenColor:{value:new an(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new On},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new On},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new On},transmissionSamplerSize:{value:new Cn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new On},attenuationDistance:{value:0},attenuationColor:{value:new an(0)},specularColor:{value:new an(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new On},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new On},anisotropyVector:{value:new Cn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new On}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const im={r:0,b:0,g:0},Tu=new Za,Zw=new nn;function ex(o,t,n,c,h,f,d){const p=new an(0);let v,w,S=f===!0?0:1,B=null,R=0,D=null;function O($){let G=$.isScene===!0?$.background:null;return G&&G.isTexture&&(G=($.backgroundBlurriness>0?n:t).get(G)),G}function V($,G){$.getRGB(im,dh(o)),c.buffers.color.setClear(im.r,im.g,im.b,G,d)}return{getClearColor:function(){return p},setClearColor:function($,G=1){p.set($),S=G,V(p,S)},getClearAlpha:function(){return S},setClearAlpha:function($){S=$,V(p,S)},render:function($){let G=!1;const X=O($);X===null?V(p,S):X&&X.isColor&&(V(X,1),G=!0);const te=o.xr.getEnvironmentBlendMode();te==="additive"?c.buffers.color.setClear(0,0,0,1,d):te==="alpha-blend"&&c.buffers.color.setClear(0,0,0,0,d),(o.autoClear||G)&&(c.buffers.depth.setTest(!0),c.buffers.depth.setMask(!0),c.buffers.color.setMask(!0),o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil))},addToRenderList:function($,G){const X=O(G);X&&(X.isCubeTexture||X.mapping===Et)?(w===void 0&&(w=new As(new ad(1,1,1),new jl({name:"BackgroundCubeMaterial",uniforms:iA(ws.backgroundCube.uniforms),vertexShader:ws.backgroundCube.vertexShader,fragmentShader:ws.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),w.geometry.deleteAttribute("uv"),w.onBeforeRender=function(te,ae,oe){this.matrixWorld.copyPosition(oe.matrixWorld)},Object.defineProperty(w.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),h.update(w)),Tu.copy(G.backgroundRotation),Tu.x*=-1,Tu.y*=-1,Tu.z*=-1,X.isCubeTexture&&X.isRenderTargetTexture===!1&&(Tu.y*=-1,Tu.z*=-1),w.material.uniforms.envMap.value=X,w.material.uniforms.flipEnvMap.value=X.isCubeTexture&&X.isRenderTargetTexture===!1?-1:1,w.material.uniforms.backgroundBlurriness.value=G.backgroundBlurriness,w.material.uniforms.backgroundIntensity.value=G.backgroundIntensity,w.material.uniforms.backgroundRotation.value.setFromMatrix4(Zw.makeRotationFromEuler(Tu)),w.material.toneMapped=Qr.getTransfer(X.colorSpace)!==Is,B===X&&R===X.version&&D===o.toneMapping||(w.material.needsUpdate=!0,B=X,R=X.version,D=o.toneMapping),w.layers.enableAll(),$.unshift(w,w.geometry,w.material,0,0,null)):X&&X.isTexture&&(v===void 0&&(v=new As(new Qa(2,2),new jl({name:"BackgroundMaterial",uniforms:iA(ws.background.uniforms),vertexShader:ws.background.vertexShader,fragmentShader:ws.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),h.update(v)),v.material.uniforms.t2D.value=X,v.material.uniforms.backgroundIntensity.value=G.backgroundIntensity,v.material.toneMapped=Qr.getTransfer(X.colorSpace)!==Is,X.matrixAutoUpdate===!0&&X.updateMatrix(),v.material.uniforms.uvTransform.value.copy(X.matrix),B===X&&R===X.version&&D===o.toneMapping||(v.material.needsUpdate=!0,B=X,R=X.version,D=o.toneMapping),v.layers.enableAll(),$.unshift(v,v.geometry,v.material,0,0,null))}}}function VS(o,t){const n=o.getParameter(o.MAX_VERTEX_ATTRIBS),c={},h=w(null);let f=h,d=!1;function p(G){return o.bindVertexArray(G)}function v(G){return o.deleteVertexArray(G)}function w(G){const X=[],te=[],ae=[];for(let oe=0;oe<n;oe++)X[oe]=0,te[oe]=0,ae[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:te,attributeDivisors:ae,object:G,attributes:{},index:null}}function S(){const G=f.newAttributes;for(let X=0,te=G.length;X<te;X++)G[X]=0}function B(G){R(G,0)}function R(G,X){const te=f.newAttributes,ae=f.enabledAttributes,oe=f.attributeDivisors;te[G]=1,ae[G]===0&&(o.enableVertexAttribArray(G),ae[G]=1),oe[G]!==X&&(o.vertexAttribDivisor(G,X),oe[G]=X)}function D(){const G=f.newAttributes,X=f.enabledAttributes;for(let te=0,ae=X.length;te<ae;te++)X[te]!==G[te]&&(o.disableVertexAttribArray(te),X[te]=0)}function O(G,X,te,ae,oe,Ae,ve){ve===!0?o.vertexAttribIPointer(G,X,te,oe,Ae):o.vertexAttribPointer(G,X,te,ae,oe,Ae)}function V(){$(),d=!0,f!==h&&(f=h,p(f.object))}function $(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:function(G,X,te,ae,oe){let Ae=!1;const ve=function(De,Ne,We){const vt=We.wireframe===!0;let ot=c[De.id];ot===void 0&&(ot={},c[De.id]=ot);let nt=ot[Ne.id];nt===void 0&&(nt={},ot[Ne.id]=nt);let st=nt[vt];return st===void 0&&(st=w(o.createVertexArray()),nt[vt]=st),st}(ae,te,X);f!==ve&&(f=ve,p(f.object)),Ae=function(De,Ne,We,vt){const ot=f.attributes,nt=Ne.attributes;let st=0;const mt=We.getAttributes();for(const It in mt)if(mt[It].location>=0){const Jt=ot[It];let jt=nt[It];if(jt===void 0&&(It==="instanceMatrix"&&De.instanceMatrix&&(jt=De.instanceMatrix),It==="instanceColor"&&De.instanceColor&&(jt=De.instanceColor)),Jt===void 0||Jt.attribute!==jt||jt&&Jt.data!==jt.data)return!0;st++}return f.attributesNum!==st||f.index!==vt}(G,ae,te,oe),Ae&&function(De,Ne,We,vt){const ot={},nt=Ne.attributes;let st=0;const mt=We.getAttributes();for(const It in mt)if(mt[It].location>=0){let Jt=nt[It];Jt===void 0&&(It==="instanceMatrix"&&De.instanceMatrix&&(Jt=De.instanceMatrix),It==="instanceColor"&&De.instanceColor&&(Jt=De.instanceColor));const jt={};jt.attribute=Jt,Jt&&Jt.data&&(jt.data=Jt.data),ot[It]=jt,st++}f.attributes=ot,f.attributesNum=st,f.index=vt}(G,ae,te,oe),oe!==null&&t.update(oe,o.ELEMENT_ARRAY_BUFFER),(Ae||d)&&(d=!1,function(De,Ne,We,vt){S();const ot=vt.attributes,nt=We.getAttributes(),st=Ne.defaultAttributeValues;for(const mt in nt){const It=nt[mt];if(It.location>=0){let Jt=ot[mt];if(Jt===void 0&&(mt==="instanceMatrix"&&De.instanceMatrix&&(Jt=De.instanceMatrix),mt==="instanceColor"&&De.instanceColor&&(Jt=De.instanceColor)),Jt!==void 0){const jt=Jt.normalized,_i=Jt.itemSize,xi=t.get(Jt);if(xi===void 0)continue;const Kt=xi.buffer,_t=xi.type,hi=xi.bytesPerElement,bi=_t===o.INT||_t===o.UNSIGNED_INT||Jt.gpuType===sr;if(Jt.isInterleavedBufferAttribute){const Ge=Jt.data,Pe=Ge.stride,ut=Jt.offset;if(Ge.isInstancedInterleavedBuffer){for(let xt=0;xt<It.locationSize;xt++)R(It.location+xt,Ge.meshPerAttribute);De.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let xt=0;xt<It.locationSize;xt++)B(It.location+xt);o.bindBuffer(o.ARRAY_BUFFER,Kt);for(let xt=0;xt<It.locationSize;xt++)O(It.location+xt,_i/It.locationSize,_t,jt,Pe*hi,(ut+_i/It.locationSize*xt)*hi,bi)}else{if(Jt.isInstancedBufferAttribute){for(let Ge=0;Ge<It.locationSize;Ge++)R(It.location+Ge,Jt.meshPerAttribute);De.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=Jt.meshPerAttribute*Jt.count)}else for(let Ge=0;Ge<It.locationSize;Ge++)B(It.location+Ge);o.bindBuffer(o.ARRAY_BUFFER,Kt);for(let Ge=0;Ge<It.locationSize;Ge++)O(It.location+Ge,_i/It.locationSize,_t,jt,_i*hi,_i/It.locationSize*Ge*hi,bi)}}else if(st!==void 0){const jt=st[mt];if(jt!==void 0)switch(jt.length){case 2:o.vertexAttrib2fv(It.location,jt);break;case 3:o.vertexAttrib3fv(It.location,jt);break;case 4:o.vertexAttrib4fv(It.location,jt);break;default:o.vertexAttrib1fv(It.location,jt)}}}}D()}(G,X,te,ae),oe!==null&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t.get(oe).buffer))},reset:V,resetDefaultState:$,dispose:function(){V();for(const G in c){const X=c[G];for(const te in X){const ae=X[te];for(const oe in ae)v(ae[oe].object),delete ae[oe];delete X[te]}delete c[G]}},releaseStatesOfGeometry:function(G){if(c[G.id]===void 0)return;const X=c[G.id];for(const te in X){const ae=X[te];for(const oe in ae)v(ae[oe].object),delete ae[oe];delete X[te]}delete c[G.id]},releaseStatesOfProgram:function(G){for(const X in c){const te=c[X];if(te[G.id]===void 0)continue;const ae=te[G.id];for(const oe in ae)v(ae[oe].object),delete ae[oe];delete te[G.id]}},initAttributes:S,enableAttribute:B,disableUnusedAttributes:D}}function qf(o,t,n){let c;function h(f,d,p){p!==0&&(o.drawArraysInstanced(c,f,d,p),n.update(d,c,p))}this.setMode=function(f){c=f},this.render=function(f,d){o.drawArrays(c,f,d),n.update(d,c,1)},this.renderInstances=h,this.renderMultiDraw=function(f,d,p){if(p===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(c,f,0,d,0,p);let v=0;for(let w=0;w<p;w++)v+=d[w];n.update(v,c,1)},this.renderMultiDrawInstances=function(f,d,p,v){if(p===0)return;const w=t.get("WEBGL_multi_draw");if(w===null)for(let S=0;S<f.length;S++)h(f[S],d[S],v[S]);else{w.multiDrawArraysInstancedWEBGL(c,f,0,d,0,v,0,p);let S=0;for(let B=0;B<p;B++)S+=d[B];for(let B=0;B<v.length;B++)n.update(S,c,v[B])}}}function cb(o,t,n,c){let h;function f(R){if(R==="highp"){if(o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).precision>0&&o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).precision>0&&o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=n.precision!==void 0?n.precision:"highp";const p=f(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const v=n.logarithmicDepthBuffer===!0,w=n.reverseDepthBuffer===!0&&t.has("EXT_clip_control");if(w===!0){const R=t.get("EXT_clip_control");R.clipControlEXT(R.LOWER_LEFT_EXT,R.ZERO_TO_ONE_EXT)}const S=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS),B=o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(h!==void 0)return h;if(t.has("EXT_texture_filter_anisotropic")===!0){const R=t.get("EXT_texture_filter_anisotropic");h=o.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h},getMaxPrecision:f,textureFormatReadable:function(R){return R===fn||c.convert(R)===o.getParameter(o.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(R){const D=R===jn&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(R!==Qi&&c.convert(R)!==o.getParameter(o.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Xi&&!D)},precision:d,logarithmicDepthBuffer:v,reverseDepthBuffer:w,maxTextures:S,maxVertexTextures:B,maxTextureSize:o.getParameter(o.MAX_TEXTURE_SIZE),maxCubemapSize:o.getParameter(o.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:o.getParameter(o.MAX_VERTEX_ATTRIBS),maxVertexUniforms:o.getParameter(o.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:o.getParameter(o.MAX_VARYING_VECTORS),maxFragmentUniforms:o.getParameter(o.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:B>0,maxSamples:o.getParameter(o.MAX_SAMPLES)}}function ub(o){const t=this;let n=null,c=0,h=!1,f=!1;const d=new jr,p=new On,v={value:null,needsUpdate:!1};function w(S,B,R,D){const O=S!==null?S.length:0;let V=null;if(O!==0){if(V=v.value,D!==!0||V===null){const $=R+4*O,G=B.matrixWorldInverse;p.getNormalMatrix(G),(V===null||V.length<$)&&(V=new Float32Array($));for(let X=0,te=R;X!==O;++X,te+=4)d.copy(S[X]).applyMatrix4(G,p),d.normal.toArray(V,te),V[te+3]=d.constant}v.value=V,v.needsUpdate=!0}return t.numPlanes=O,t.numIntersection=0,V}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(S,B){const R=S.length!==0||B||c!==0||h;return h=B,c=S.length,R},this.beginShadows=function(){f=!0,w(null)},this.endShadows=function(){f=!1},this.setGlobalState=function(S,B){n=w(S,B,0)},this.setState=function(S,B,R){const D=S.clippingPlanes,O=S.clipIntersection,V=S.clipShadows,$=o.get(S);if(!h||D===null||D.length===0||f&&!V)f?w(null):(v.value!==n&&(v.value=n,v.needsUpdate=c>0),t.numPlanes=c,t.numIntersection=0);else{const G=f?0:c,X=4*G;let te=$.clippingState||null;v.value=te,te=w(D,B,X,R);for(let ae=0;ae!==X;++ae)te[ae]=n[ae];$.clippingState=te,this.numIntersection=O?this.numPlanes:0,this.numPlanes+=G}}}function Zc(o){let t=new WeakMap;function n(h,f){return f===Le?h.mapping=oa:f===304&&(h.mapping=uo),h}function c(h){const f=h.target;f.removeEventListener("dispose",c);const d=t.get(f);d!==void 0&&(t.delete(f),d.dispose())}return{get:function(h){if(h&&h.isTexture){const f=h.mapping;if(f===Le||f===304){if(t.has(h))return n(t.get(h).texture,h.mapping);{const d=h.image;if(d&&d.height>0){const p=new il(d.height);return p.fromEquirectangularTexture(o,h),t.set(h,p),h.addEventListener("dispose",c),n(p.texture,h.mapping)}return null}}}return h},dispose:function(){t=new WeakMap}}}class io extends i0{constructor(t=-1,n=1,c=1,h=-1,f=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=c,this.bottom=h,this.near=f,this.far=d,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,n,c,h,f,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=c,this.view.offsetY=h,this.view.width=f,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,h=(this.top+this.bottom)/2;let f=c-t,d=c+t,p=h+n,v=h-n;if(this.view!==null&&this.view.enabled){const w=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f+=w*this.view.offsetX,d=f+w*this.view.width,p-=S*this.view.offsetY,v=p-S*this.view.height}this.projectionMatrix.makeOrthographic(f,d,p,v,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const r0=[.125,.215,.35,.446,.526,.582],$f=new io,A_=new an;let p_=null,cd=0,nm=0,f_=!1;const WA=(1+Math.sqrt(5))/2,Dp=1/WA,hb=[new Ke(-WA,Dp,0),new Ke(WA,Dp,0),new Ke(-Dp,0,WA),new Ke(Dp,0,WA),new Ke(0,WA,-Dp),new Ke(0,WA,Dp),new Ke(-1,1,-1),new Ke(1,1,-1),new Ke(-1,1,1),new Ke(1,1,1)];class db{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,c=.1,h=100){p_=this._renderer.getRenderTarget(),cd=this._renderer.getActiveCubeFace(),nm=this._renderer.getActiveMipmapLevel(),f_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(t,c,h,f),n>0&&this._blur(f,0,0,n),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=s0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=pb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(p_,cd,nm),this._renderer.xr.enabled=f_,t.scissorTest=!1,g_(t,0,0,t.width,t.height)}_fromTexture(t,n){t.mapping===oa||t.mapping===uo?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),p_=this._renderer.getRenderTarget(),cd=this._renderer.getActiveCubeFace(),nm=this._renderer.getActiveMipmapLevel(),f_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const c=n||this._allocateTargets();return this._textureToCubeUV(t,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,c={magFilter:Ci,minFilter:Ci,generateMipmaps:!1,type:jn,format:fn,colorSpace:bs,depthBuffer:!1},h=Ab(t,n,c);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ab(t,n,c);const{_lodMax:f}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(d){const p=[],v=[],w=[];let S=d;const B=d-4+1+r0.length;for(let R=0;R<B;R++){const D=Math.pow(2,S);v.push(D);let O=1/D;R>d-4?O=r0[R-d+4-1]:R===0&&(O=0),w.push(O);const V=1/(D-2),$=-V,G=1+V,X=[$,$,G,$,G,G,$,$,G,G,$,G],te=6,ae=6,oe=3,Ae=2,ve=1,De=new Float32Array(oe*ae*te),Ne=new Float32Array(Ae*ae*te),We=new Float32Array(ve*ae*te);for(let ot=0;ot<te;ot++){const nt=ot%3*2/3-1,st=ot>2?0:-1,mt=[nt,st,0,nt+2/3,st,0,nt+2/3,st+1,0,nt,st,0,nt+2/3,st+1,0,nt,st+1,0];De.set(mt,oe*ae*ot),Ne.set(X,Ae*ae*ot);const It=[ot,ot,ot,ot,ot,ot];We.set(It,ve*ae*ot)}const vt=new ga;vt.setAttribute("position",new Ls(De,oe)),vt.setAttribute("uv",new Ls(Ne,Ae)),vt.setAttribute("faceIndex",new Ls(We,ve)),p.push(vt),S>4&&S--}return{lodPlanes:p,sizeLods:v,sigmas:w}}(f)),this._blurMaterial=function(d,p,v){const w=new Float32Array(20),S=new Ke(0,1,0);return new jl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/p,CUBEUV_TEXEL_HEIGHT:1/v,CUBEUV_MAX_MIP:`${d}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:w},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:S}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}(f,t,n)}return h}_compileMaterial(t){const n=new As(this._lodPlanes[0],t);this._renderer.compile(n,$f)}_sceneToCubeUV(t,n,c,h){const f=new zs(90,1,n,c),d=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,w=v.autoClear,S=v.toneMapping;v.getClearColor(A_),v.toneMapping=0,v.autoClear=!1;const B=new Wl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),R=new As(new ad,B);let D=!1;const O=t.background;O?O.isColor&&(B.color.copy(O),t.background=null,D=!0):(B.color.copy(A_),D=!0);for(let V=0;V<6;V++){const $=V%3;$===0?(f.up.set(0,d[V],0),f.lookAt(p[V],0,0)):$===1?(f.up.set(0,0,d[V]),f.lookAt(0,p[V],0)):(f.up.set(0,d[V],0),f.lookAt(0,0,p[V]));const G=this._cubeSize;g_(h,$*G,V>2?G:0,G,G),v.setRenderTarget(h),D&&v.render(R,f),v.render(t,f)}R.geometry.dispose(),R.material.dispose(),v.toneMapping=S,v.autoClear=w,t.background=O}_textureToCubeUV(t,n){const c=this._renderer,h=t.mapping===oa||t.mapping===uo;h?(this._cubemapMaterial===null&&(this._cubemapMaterial=s0()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=pb());const f=h?this._cubemapMaterial:this._equirectMaterial,d=new As(this._lodPlanes[0],f);f.uniforms.envMap.value=t;const p=this._cubeSize;g_(n,0,0,3*p,2*p),c.setRenderTarget(n),c.render(d,$f)}_applyPMREM(t){const n=this._renderer,c=n.autoClear;n.autoClear=!1;const h=this._lodPlanes.length;for(let f=1;f<h;f++){const d=Math.sqrt(this._sigmas[f]*this._sigmas[f]-this._sigmas[f-1]*this._sigmas[f-1]),p=hb[(h-f-1)%hb.length];this._blur(t,f-1,f,d,p)}n.autoClear=c}_blur(t,n,c,h,f){const d=this._pingPongRenderTarget;this._halfBlur(t,d,n,c,h,"latitudinal",f),this._halfBlur(d,t,c,c,h,"longitudinal",f)}_halfBlur(t,n,c,h,f,d,p){const v=this._renderer,w=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const S=new As(this._lodPlanes[h],w),B=w.uniforms,R=this._sizeLods[c]-1,D=isFinite(f)?Math.PI/(2*R):2*Math.PI/39,O=f/D,V=isFinite(f)?1+Math.floor(3*O):20;V>20&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${V} samples when the maximum is set to 20`);const $=[];let G=0;for(let ae=0;ae<20;++ae){const oe=ae/O,Ae=Math.exp(-oe*oe/2);$.push(Ae),ae===0?G+=Ae:ae<V&&(G+=2*Ae)}for(let ae=0;ae<$.length;ae++)$[ae]=$[ae]/G;B.envMap.value=t.texture,B.samples.value=V,B.weights.value=$,B.latitudinal.value=d==="latitudinal",p&&(B.poleAxis.value=p);const{_lodMax:X}=this;B.dTheta.value=D,B.mipInt.value=X-c;const te=this._sizeLods[h];g_(n,3*te*(h>X-4?h-X+4:0),4*(this._cubeSize-te),3*te,2*te),v.setRenderTarget(n),v.render(S,$f)}}function Ab(o,t,n){const c=new Io(o,t,n);return c.texture.mapping=Et,c.texture.name="PMREM.cubeUv",c.scissorTest=!0,c}function g_(o,t,n,c,h){o.viewport.set(t,n,c,h),o.scissor.set(t,n,c,h)}function pb(){return new jl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function s0(){return new jl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function fb(o){let t=new WeakMap,n=null;function c(h){const f=h.target;f.removeEventListener("dispose",c);const d=t.get(f);d!==void 0&&(t.delete(f),d.dispose())}return{get:function(h){if(h&&h.isTexture){const f=h.mapping,d=f===Le||f===304,p=f===oa||f===uo;if(d||p){let v=t.get(h);const w=v!==void 0?v.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==w)return n===null&&(n=new db(o)),v=d?n.fromEquirectangular(h,v):n.fromCubemap(h,v),v.texture.pmremVersion=h.pmremVersion,t.set(h,v),v.texture;if(v!==void 0)return v.texture;{const S=h.image;return d&&S&&S.height>0||p&&S&&function(B){let R=0;for(let D=0;D<6;D++)B[D]!==void 0&&R++;return R===6}(S)?(n===null&&(n=new db(o)),v=d?n.fromEquirectangular(h):n.fromCubemap(h),v.texture.pmremVersion=h.pmremVersion,t.set(h,v),h.addEventListener("dispose",c),v.texture):null}}}return h},dispose:function(){t=new WeakMap,n!==null&&(n.dispose(),n=null)}}}function tx(o){const t={};function n(c){if(t[c]!==void 0)return t[c];let h;switch(c){case"WEBGL_depth_texture":h=o.getExtension("WEBGL_depth_texture")||o.getExtension("MOZ_WEBGL_depth_texture")||o.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":h=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":h=o.getExtension("WEBGL_compressed_texture_s3tc")||o.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":h=o.getExtension("WEBGL_compressed_texture_pvrtc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:h=o.getExtension(c)}return t[c]=h,h}return{has:function(c){return n(c)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(c){const h=n(c);return h===null&&Xv("THREE.WebGLRenderer: "+c+" extension not supported."),h}}}function ix(o,t,n,c){const h={},f=new WeakMap;function d(v){const w=v.target;w.index!==null&&t.remove(w.index);for(const B in w.attributes)t.remove(w.attributes[B]);for(const B in w.morphAttributes){const R=w.morphAttributes[B];for(let D=0,O=R.length;D<O;D++)t.remove(R[D])}w.removeEventListener("dispose",d),delete h[w.id];const S=f.get(w);S&&(t.remove(S),f.delete(w)),c.releaseStatesOfGeometry(w),w.isInstancedBufferGeometry===!0&&delete w._maxInstanceCount,n.memory.geometries--}function p(v){const w=[],S=v.index,B=v.attributes.position;let R=0;if(S!==null){const V=S.array;R=S.version;for(let $=0,G=V.length;$<G;$+=3){const X=V[$+0],te=V[$+1],ae=V[$+2];w.push(X,te,te,ae,ae,X)}}else{if(B===void 0)return;{const V=B.array;R=B.version;for(let $=0,G=V.length/3-1;$<G;$+=3){const X=$+0,te=$+1,ae=$+2;w.push(X,te,te,ae,ae,X)}}}const D=new(Vg(w)?Yg:Bp)(w,1);D.version=R;const O=f.get(v);O&&t.remove(O),f.set(v,D)}return{get:function(v,w){return h[w.id]===!0||(w.addEventListener("dispose",d),h[w.id]=!0,n.memory.geometries++),w},update:function(v){const w=v.attributes;for(const B in w)t.update(w[B],o.ARRAY_BUFFER);const S=v.morphAttributes;for(const B in S){const R=S[B];for(let D=0,O=R.length;D<O;D++)t.update(R[D],o.ARRAY_BUFFER)}},getWireframeAttribute:function(v){const w=f.get(v);if(w){const S=v.index;S!==null&&w.version<S.version&&p(v)}else p(v);return f.get(v)}}}function gb(o,t,n){let c,h,f;function d(p,v,w){w!==0&&(o.drawElementsInstanced(c,v,h,p*f,w),n.update(v,c,w))}this.setMode=function(p){c=p},this.setIndex=function(p){h=p.type,f=p.bytesPerElement},this.render=function(p,v){o.drawElements(c,v,h,p*f),n.update(v,c,1)},this.renderInstances=d,this.renderMultiDraw=function(p,v,w){if(w===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(c,v,0,h,p,0,w);let S=0;for(let B=0;B<w;B++)S+=v[B];n.update(S,c,1)},this.renderMultiDrawInstances=function(p,v,w,S){if(w===0)return;const B=t.get("WEBGL_multi_draw");if(B===null)for(let R=0;R<p.length;R++)d(p[R]/f,v[R],S[R]);else{B.multiDrawElementsInstancedWEBGL(c,v,0,h,p,0,S,0,w);let R=0;for(let D=0;D<w;D++)R+=v[D];for(let D=0;D<S.length;D++)n.update(R,c,S[D])}}}function mb(o){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,c,h){switch(t.calls++,c){case o.TRIANGLES:t.triangles+=h*(n/3);break;case o.LINES:t.lines+=h*(n/2);break;case o.LINE_STRIP:t.lines+=h*(n-1);break;case o.LINE_LOOP:t.lines+=h*n;break;case o.POINTS:t.points+=h*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c)}}}}function o0(o,t,n){const c=new WeakMap,h=new Fr;return{update:function(f,d,p){const v=f.morphTargetInfluences,w=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,S=w!==void 0?w.length:0;let B=c.get(d);if(B===void 0||B.count!==S){let R=function(){ve.dispose(),c.delete(d),d.removeEventListener("dispose",R)};B!==void 0&&B.texture.dispose();const D=d.morphAttributes.position!==void 0,O=d.morphAttributes.normal!==void 0,V=d.morphAttributes.color!==void 0,$=d.morphAttributes.position||[],G=d.morphAttributes.normal||[],X=d.morphAttributes.color||[];let te=0;D===!0&&(te=1),O===!0&&(te=2),V===!0&&(te=3);let ae=d.attributes.position.count*te,oe=1;ae>t.maxTextureSize&&(oe=Math.ceil(ae/t.maxTextureSize),ae=t.maxTextureSize);const Ae=new Float32Array(ae*oe*4*S),ve=new i_(Ae,ae,oe,S);ve.type=Xi,ve.needsUpdate=!0;const De=4*te;for(let Ne=0;Ne<S;Ne++){const We=$[Ne],vt=G[Ne],ot=X[Ne],nt=ae*oe*4*Ne;for(let st=0;st<We.count;st++){const mt=st*De;D===!0&&(h.fromBufferAttribute(We,st),Ae[nt+mt+0]=h.x,Ae[nt+mt+1]=h.y,Ae[nt+mt+2]=h.z,Ae[nt+mt+3]=0),O===!0&&(h.fromBufferAttribute(vt,st),Ae[nt+mt+4]=h.x,Ae[nt+mt+5]=h.y,Ae[nt+mt+6]=h.z,Ae[nt+mt+7]=0),V===!0&&(h.fromBufferAttribute(ot,st),Ae[nt+mt+8]=h.x,Ae[nt+mt+9]=h.y,Ae[nt+mt+10]=h.z,Ae[nt+mt+11]=ot.itemSize===4?h.w:1)}}B={count:S,texture:ve,size:new Cn(ae,oe)},c.set(d,B),d.addEventListener("dispose",R)}if(f.isInstancedMesh===!0&&f.morphTexture!==null)p.getUniforms().setValue(o,"morphTexture",f.morphTexture,n);else{let R=0;for(let O=0;O<v.length;O++)R+=v[O];const D=d.morphTargetsRelative?1:1-R;p.getUniforms().setValue(o,"morphTargetBaseInfluence",D),p.getUniforms().setValue(o,"morphTargetInfluences",v)}p.getUniforms().setValue(o,"morphTargetsTexture",B.texture,n),p.getUniforms().setValue(o,"morphTargetsTextureSize",B.size)}}}function a0(o,t,n,c){let h=new WeakMap;function f(d){const p=d.target;p.removeEventListener("dispose",f),n.remove(p.instanceMatrix),p.instanceColor!==null&&n.remove(p.instanceColor)}return{update:function(d){const p=c.render.frame,v=d.geometry,w=t.get(d,v);if(h.get(w)!==p&&(t.update(w),h.set(w,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",f)===!1&&d.addEventListener("dispose",f),h.get(d)!==p&&(n.update(d.instanceMatrix,o.ARRAY_BUFFER),d.instanceColor!==null&&n.update(d.instanceColor,o.ARRAY_BUFFER),h.set(d,p))),d.isSkinnedMesh){const S=d.skeleton;h.get(S)!==p&&(S.update(),h.set(S,p))}return w},dispose:function(){h=new WeakMap}}}class m_ extends Sr{constructor(t,n,c,h,f,d,p,v,w,S=1026){if(S!==Xa&&S!==Er)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");c===void 0&&S===Xa&&(c=xn),c===void 0&&S===Er&&(c=Ua),super(null,h,f,d,p,v,S,c,w),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=p!==void 0?p:pi,this.minFilter=v!==void 0?v:pi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const _b=new Sr,vb=new m_(1,1),yb=new i_,nx=new Zv,l0=new lb,Fp=[],__=[],bb=new Float32Array(16),v_=new Float32Array(9),rm=new Float32Array(4);function Wf(o,t,n){const c=o[0];if(c<=0||c>0)return o;const h=t*n;let f=Fp[h];if(f===void 0&&(f=new Float32Array(h),Fp[h]=f),t!==0){c.toArray(f,0);for(let d=1,p=0;d!==t;++d)p+=n,o[d].toArray(f,p)}return f}function ma(o,t){if(o.length!==t.length)return!1;for(let n=0,c=o.length;n<c;n++)if(o[n]!==t[n])return!1;return!0}function _a(o,t){for(let n=0,c=t.length;n<c;n++)o[n]=t[n]}function y_(o,t){let n=__[t];n===void 0&&(n=new Int32Array(t),__[t]=n);for(let c=0;c!==t;++c)n[c]=o.allocateTextureUnit();return n}function rx(o,t){const n=this.cache;n[0]!==t&&(o.uniform1f(this.addr,t),n[0]=t)}function sx(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y||(o.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ma(n,t))return;o.uniform2fv(this.addr,t),_a(n,t)}}function wb(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(o.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(o.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ma(n,t))return;o.uniform3fv(this.addr,t),_a(n,t)}}function ox(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(o.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ma(n,t))return;o.uniform4fv(this.addr,t),_a(n,t)}}function ax(o,t){const n=this.cache,c=t.elements;if(c===void 0){if(ma(n,t))return;o.uniformMatrix2fv(this.addr,!1,t),_a(n,t)}else{if(ma(n,c))return;rm.set(c),o.uniformMatrix2fv(this.addr,!1,rm),_a(n,c)}}function c0(o,t){const n=this.cache,c=t.elements;if(c===void 0){if(ma(n,t))return;o.uniformMatrix3fv(this.addr,!1,t),_a(n,t)}else{if(ma(n,c))return;v_.set(c),o.uniformMatrix3fv(this.addr,!1,v_),_a(n,c)}}function lx(o,t){const n=this.cache,c=t.elements;if(c===void 0){if(ma(n,t))return;o.uniformMatrix4fv(this.addr,!1,t),_a(n,t)}else{if(ma(n,c))return;bb.set(c),o.uniformMatrix4fv(this.addr,!1,bb),_a(n,c)}}function cx(o,t){const n=this.cache;n[0]!==t&&(o.uniform1i(this.addr,t),n[0]=t)}function Ah(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y||(o.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ma(n,t))return;o.uniform2iv(this.addr,t),_a(n,t)}}function u0(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(o.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ma(n,t))return;o.uniform3iv(this.addr,t),_a(n,t)}}function h0(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(o.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ma(n,t))return;o.uniform4iv(this.addr,t),_a(n,t)}}function xb(o,t){const n=this.cache;n[0]!==t&&(o.uniform1ui(this.addr,t),n[0]=t)}function d0(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y||(o.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ma(n,t))return;o.uniform2uiv(this.addr,t),_a(n,t)}}function Cb(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(o.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ma(n,t))return;o.uniform3uiv(this.addr,t),_a(n,t)}}function ux(o,t){const n=this.cache;if(t.x!==void 0)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(o.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ma(n,t))return;o.uniform4uiv(this.addr,t),_a(n,t)}}function hx(o,t,n){const c=this.cache,h=n.allocateTextureUnit();let f;c[0]!==h&&(o.uniform1i(this.addr,h),c[0]=h),this.type===o.SAMPLER_2D_SHADOW?(vb.compareFunction=515,f=vb):f=_b,n.setTexture2D(t||f,h)}function dx(o,t,n){const c=this.cache,h=n.allocateTextureUnit();c[0]!==h&&(o.uniform1i(this.addr,h),c[0]=h),n.setTexture3D(t||nx,h)}function Ax(o,t,n){const c=this.cache,h=n.allocateTextureUnit();c[0]!==h&&(o.uniform1i(this.addr,h),c[0]=h),n.setTextureCube(t||l0,h)}function b_(o,t,n){const c=this.cache,h=n.allocateTextureUnit();c[0]!==h&&(o.uniform1i(this.addr,h),c[0]=h),n.setTexture2DArray(t||yb,h)}function Eb(o,t){o.uniform1fv(this.addr,t)}function w_(o,t){const n=Wf(t,this.size,2);o.uniform2fv(this.addr,n)}function px(o,t){const n=Wf(t,this.size,3);o.uniform3fv(this.addr,n)}function xl(o,t){const n=Wf(t,this.size,4);o.uniform4fv(this.addr,n)}function x_(o,t){const n=Wf(t,this.size,4);o.uniformMatrix2fv(this.addr,!1,n)}function fx(o,t){const n=Wf(t,this.size,9);o.uniformMatrix3fv(this.addr,!1,n)}function gx(o,t){const n=Wf(t,this.size,16);o.uniformMatrix4fv(this.addr,!1,n)}function qS(o,t){o.uniform1iv(this.addr,t)}function jf(o,t){o.uniform2iv(this.addr,t)}function Kf(o,t){o.uniform3iv(this.addr,t)}function jA(o,t){o.uniform4iv(this.addr,t)}function nA(o,t){o.uniform1uiv(this.addr,t)}function Kl(o,t){o.uniform2uiv(this.addr,t)}function mx(o,t){o.uniform3uiv(this.addr,t)}function _x(o,t){o.uniform4uiv(this.addr,t)}function Up(o,t,n){const c=this.cache,h=t.length,f=y_(n,h);ma(c,f)||(o.uniform1iv(this.addr,f),_a(c,f));for(let d=0;d!==h;++d)n.setTexture2D(t[d]||_b,f[d])}function A0(o,t,n){const c=this.cache,h=t.length,f=y_(n,h);ma(c,f)||(o.uniform1iv(this.addr,f),_a(c,f));for(let d=0;d!==h;++d)n.setTexture3D(t[d]||nx,f[d])}function Cc(o,t,n){const c=this.cache,h=t.length,f=y_(n,h);ma(c,f)||(o.uniform1iv(this.addr,f),_a(c,f));for(let d=0;d!==h;++d)n.setTextureCube(t[d]||l0,f[d])}function ph(o,t,n){const c=this.cache,h=t.length,f=y_(n,h);ma(c,f)||(o.uniform1iv(this.addr,f),_a(c,f));for(let d=0;d!==h;++d)n.setTexture2DArray(t[d]||yb,f[d])}class kp{constructor(t,n,c){this.id=t,this.addr=c,this.cache=[],this.type=n.type,this.setValue=function(h){switch(h){case 5126:return rx;case 35664:return sx;case 35665:return wb;case 35666:return ox;case 35674:return ax;case 35675:return c0;case 35676:return lx;case 5124:case 35670:return cx;case 35667:case 35671:return Ah;case 35668:case 35672:return u0;case 35669:case 35673:return h0;case 5125:return xb;case 36294:return d0;case 36295:return Cb;case 36296:return ux;case 35678:case 36198:case 36298:case 36306:case 35682:return hx;case 35679:case 36299:case 36307:return dx;case 35680:case 36300:case 36308:case 36293:return Ax;case 36289:case 36303:case 36311:case 36292:return b_}}(n.type)}}class vx{constructor(t,n,c){this.id=t,this.addr=c,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=function(h){switch(h){case 5126:return Eb;case 35664:return w_;case 35665:return px;case 35666:return xl;case 35674:return x_;case 35675:return fx;case 35676:return gx;case 5124:case 35670:return qS;case 35667:case 35671:return jf;case 35668:case 35672:return Kf;case 35669:case 35673:return jA;case 5125:return nA;case 36294:return Kl;case 36295:return mx;case 36296:return _x;case 35678:case 36198:case 36298:case 36306:case 35682:return Up;case 35679:case 36299:case 36307:return A0;case 35680:case 36300:case 36308:case 36293:return Cc;case 36289:case 36303:case 36311:case 36292:return ph}}(n.type)}}class nl{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,c){const h=this.seq;for(let f=0,d=h.length;f!==d;++f){const p=h[f];p.setValue(t,n[p.id],c)}}}const fh=/(\w+)(\])?(\[|\.)?/g;function va(o,t){o.seq.push(t),o.map[t.id]=t}function C_(o,t,n){const c=o.name,h=c.length;for(fh.lastIndex=0;;){const f=fh.exec(c),d=fh.lastIndex;let p=f[1];const v=f[2]==="]",w=f[3];if(v&&(p|=0),w===void 0||w==="["&&d+2===h){va(n,w===void 0?new kp(p,o,t):new vx(p,o,t));break}{let S=n.map[p];S===void 0&&(S=new nl(p),va(n,S)),n=S}}}class sm{constructor(t,n){this.seq=[],this.map={};const c=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let h=0;h<c;++h){const f=t.getActiveUniform(n,h);C_(f,t.getUniformLocation(n,f.name),this)}}setValue(t,n,c,h){const f=this.map[n];f!==void 0&&f.setValue(t,c,h)}setOptional(t,n,c){const h=n[c];h!==void 0&&this.setValue(t,c,h)}static upload(t,n,c,h){for(let f=0,d=n.length;f!==d;++f){const p=n[f],v=c[p.id];v.needsUpdate!==!1&&p.setValue(t,v.value,h)}}static seqWithValue(t,n){const c=[];for(let h=0,f=t.length;h!==f;++h){const d=t[h];d.id in n&&c.push(d)}return c}}function p0(o,t,n){const c=o.createShader(t);return o.shaderSource(c,n),o.compileShader(c),c}let yx=0;function Xf(o,t,n){const c=o.getShaderParameter(t,o.COMPILE_STATUS),h=o.getShaderInfoLog(t).trim();if(c&&h==="")return"";const f=/ERROR: 0:(\d+)/.exec(h);if(f){const d=parseInt(f[1]);return n.toUpperCase()+`

`+h+`

`+function(p,v){const w=p.split(`
`),S=[],B=Math.max(v-6,0),R=Math.min(v+6,w.length);for(let D=B;D<R;D++){const O=D+1;S.push(`${O===v?">":" "} ${O}: ${w[D]}`)}return S.join(`
`)}(o.getShaderSource(t),d)}return h}function Na(o,t){const n=function(c){const h=Qr.getPrimaries(Qr.workingColorSpace),f=Qr.getPrimaries(c);let d;switch(h===f?d="":h===Jm&&f===Gg?d="LinearDisplayP3ToLinearSRGB":h===Gg&&f===Jm&&(d="LinearSRGBToLinearDisplayP3"),c){case bs:case Hg:return[d,"LinearTransferOETF"];case Ns:case Ng:return[d,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",c),[d,"LinearTransferOETF"]}}(t);return`vec4 ${o}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Xl(o,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+o+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const om=new Ke;function ud(o){return o!==""}function Lp(o,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return o.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Pp(o,t){return o.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const E_=/^[ \t]*#include +<([\w\d./]+)>/gm;function Yl(o){return o.replace(E_,Op)}const Mu=new Map;function Op(o,t){let n=Mn[t];if(n===void 0){const c=Mu.get(t);if(c===void 0)throw new Error("Can not resolve #include <"+t+">");n=Mn[c],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,c)}return Yl(n)}const rA=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hd(o){return o.replace(rA,Kr)}function Kr(o,t,n,c){let h="";for(let f=parseInt(t);f<parseInt(n);f++)h+=c.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return h}function zo(o){let t=`precision ${o.precision} float;
	precision ${o.precision} int;
	precision ${o.precision} sampler2D;
	precision ${o.precision} samplerCube;
	precision ${o.precision} sampler3D;
	precision ${o.precision} sampler2DArray;
	precision ${o.precision} sampler2DShadow;
	precision ${o.precision} samplerCubeShadow;
	precision ${o.precision} sampler2DArrayShadow;
	precision ${o.precision} isampler2D;
	precision ${o.precision} isampler3D;
	precision ${o.precision} isamplerCube;
	precision ${o.precision} isampler2DArray;
	precision ${o.precision} usampler2D;
	precision ${o.precision} usampler3D;
	precision ${o.precision} usamplerCube;
	precision ${o.precision} usampler2DArray;
	`;return o.precision==="highp"?t+=`
#define HIGH_PRECISION`:o.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:o.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function KA(o,t,n,c){const h=o.getContext(),f=n.defines;let d=n.vertexShader,p=n.fragmentShader;const v=function(ot){let nt="SHADOWMAP_TYPE_BASIC";return ot.shadowMapType===1?nt="SHADOWMAP_TYPE_PCF":ot.shadowMapType===2?nt="SHADOWMAP_TYPE_PCF_SOFT":ot.shadowMapType===3&&(nt="SHADOWMAP_TYPE_VSM"),nt}(n),w=function(ot){let nt="ENVMAP_TYPE_CUBE";if(ot.envMap)switch(ot.envMapMode){case oa:case uo:nt="ENVMAP_TYPE_CUBE";break;case Et:nt="ENVMAP_TYPE_CUBE_UV"}return nt}(n),S=function(ot){let nt="ENVMAP_MODE_REFLECTION";return ot.envMap&&ot.envMapMode===uo&&(nt="ENVMAP_MODE_REFRACTION"),nt}(n),B=function(ot){let nt="ENVMAP_BLENDING_NONE";if(ot.envMap)switch(ot.combine){case 0:nt="ENVMAP_BLENDING_MULTIPLY";break;case 1:nt="ENVMAP_BLENDING_MIX";break;case 2:nt="ENVMAP_BLENDING_ADD"}return nt}(n),R=function(ot){const nt=ot.envMapCubeUVHeight;if(nt===null)return null;const st=Math.log2(nt)-2,mt=1/nt;return{texelWidth:1/(3*Math.max(Math.pow(2,st),112)),texelHeight:mt,maxMip:st}}(n),D=[($=n).extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",$.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ud).join(`
`),O=function(ot){const nt=[];for(const st in ot){const mt=ot[st];mt!==!1&&nt.push("#define "+st+" "+mt)}return nt.join(`
`)}(f),V=h.createProgram();var $;let G,X,te=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(G=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,O].filter(ud).join(`
`),G.length>0&&(G+=`
`),X=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,O].filter(ud).join(`
`),X.length>0&&(X+=`
`)):(G=[zo(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,O,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+S:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+v:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ud).join(`
`),X=[zo(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,O,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+w:"",n.envMap?"#define "+S:"",n.envMap?"#define "+B:"",R?"#define CUBEUV_TEXEL_WIDTH "+R.texelWidth:"",R?"#define CUBEUV_TEXEL_HEIGHT "+R.texelHeight:"",R?"#define CUBEUV_MAX_MIP "+R.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+v:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==0?"#define TONE_MAPPING":"",n.toneMapping!==0?Mn.tonemapping_pars_fragment:"",n.toneMapping!==0?Xl("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Mn.colorspace_pars_fragment,Na("linearToOutputTexel",n.outputColorSpace),(Qr.getLuminanceCoefficients(om),["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${om.x.toFixed(4)}, ${om.y.toFixed(4)}, ${om.z.toFixed(4)} );`,"	return dot( weights, rgb );","}"].join(`
`)),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ud).join(`
`)),d=Yl(d),d=Lp(d,n),d=Pp(d,n),p=Yl(p),p=Lp(p,n),p=Pp(p,n),d=hd(d),p=hd(p),n.isRawShaderMaterial!==!0&&(te=`#version 300 es
`,G=[D,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+G,X=["#define varying in",n.glslVersion===Zm?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Zm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+X);const ae=te+G+d,oe=te+X+p,Ae=p0(h,h.VERTEX_SHADER,ae),ve=p0(h,h.FRAGMENT_SHADER,oe);function De(ot){if(o.debug.checkShaderErrors){const nt=h.getProgramInfoLog(V).trim(),st=h.getShaderInfoLog(Ae).trim(),mt=h.getShaderInfoLog(ve).trim();let It=!0,Jt=!0;if(h.getProgramParameter(V,h.LINK_STATUS)===!1)if(It=!1,typeof o.debug.onShaderError=="function")o.debug.onShaderError(h,V,Ae,ve);else{const jt=Xf(h,Ae,"vertex"),_i=Xf(h,ve,"fragment");console.error("THREE.WebGLProgram: Shader Error "+h.getError()+" - VALIDATE_STATUS "+h.getProgramParameter(V,h.VALIDATE_STATUS)+`

Material Name: `+ot.name+`
Material Type: `+ot.type+`

Program Info Log: `+nt+`
`+jt+`
`+_i)}else nt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",nt):st!==""&&mt!==""||(Jt=!1);Jt&&(ot.diagnostics={runnable:It,programLog:nt,vertexShader:{log:st,prefix:G},fragmentShader:{log:mt,prefix:X}})}h.deleteShader(Ae),h.deleteShader(ve),Ne=new sm(h,V),We=function(nt,st){const mt={},It=nt.getProgramParameter(st,nt.ACTIVE_ATTRIBUTES);for(let Jt=0;Jt<It;Jt++){const jt=nt.getActiveAttrib(st,Jt),_i=jt.name;let xi=1;jt.type===nt.FLOAT_MAT2&&(xi=2),jt.type===nt.FLOAT_MAT3&&(xi=3),jt.type===nt.FLOAT_MAT4&&(xi=4),mt[_i]={type:jt.type,location:nt.getAttribLocation(st,_i),locationSize:xi}}return mt}(h,V)}let Ne,We;h.attachShader(V,Ae),h.attachShader(V,ve),n.index0AttributeName!==void 0?h.bindAttribLocation(V,0,n.index0AttributeName):n.morphTargets===!0&&h.bindAttribLocation(V,0,"position"),h.linkProgram(V),this.getUniforms=function(){return Ne===void 0&&De(this),Ne},this.getAttributes=function(){return We===void 0&&De(this),We};let vt=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return vt===!1&&(vt=h.getProgramParameter(V,37297)),vt},this.destroy=function(){c.releaseStatesOfProgram(this),h.deleteProgram(V),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=yx++,this.cacheKey=t,this.usedTimes=1,this.program=V,this.vertexShader=Ae,this.fragmentShader=ve,this}let S_=0;class Jl{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.vertexShader,c=t.fragmentShader,h=this._getShaderStage(n),f=this._getShaderStage(c),d=this._getShaderCacheForMaterial(t);return d.has(h)===!1&&(d.add(h),h.usedTimes++),d.has(f)===!1&&(d.add(f),f.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const c of n)c.usedTimes--,c.usedTimes===0&&this.shaderCache.delete(c.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let c=n.get(t);return c===void 0&&(c=new Set,n.set(t,c)),c}_getShaderStage(t){const n=this.shaderCache;let c=n.get(t);return c===void 0&&(c=new Cl(t),n.set(t,c)),c}}class Cl{constructor(t){this.id=S_++,this.code=t,this.usedTimes=0}}function Jr(o,t,n,c,h,f,d){const p=new Qf,v=new Jl,w=new Set,S=[],B=h.logarithmicDepthBuffer,R=h.reverseDepthBuffer,D=h.vertexTextures;let O=h.precision;const V={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function $(G){return w.add(G),G===0?"uv":`uv${G}`}return{getParameters:function(G,X,te,ae,oe){const Ae=ae.fog,ve=oe.geometry,De=G.isMeshStandardMaterial?ae.environment:null,Ne=(G.isMeshStandardMaterial?n:t).get(G.envMap||De),We=Ne&&Ne.mapping===Et?Ne.image.height:null,vt=V[G.type];G.precision!==null&&(O=h.getMaxPrecision(G.precision),O!==G.precision&&console.warn("THREE.WebGLProgram.getParameters:",G.precision,"not supported, using",O,"instead."));const ot=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,nt=ot!==void 0?ot.length:0;let st,mt,It,Jt,jt=0;if(ve.morphAttributes.position!==void 0&&(jt=1),ve.morphAttributes.normal!==void 0&&(jt=2),ve.morphAttributes.color!==void 0&&(jt=3),vt){const G2=ws[vt];st=G2.vertexShader,mt=G2.fragmentShader}else st=G.vertexShader,mt=G.fragmentShader,v.update(G),It=v.getVertexShaderID(G),Jt=v.getFragmentShaderID(G);const _i=o.getRenderTarget(),xi=oe.isInstancedMesh===!0,Kt=oe.isBatchedMesh===!0,_t=!!G.map,hi=!!G.matcap,bi=!!Ne,Ge=!!G.aoMap,Pe=!!G.lightMap,ut=!!G.bumpMap,xt=!!G.normalMap,ct=!!G.displacementMap,Mt=!!G.emissiveMap,Je=!!G.metalnessMap,Ut=!!G.roughnessMap,we=G.anisotropy>0,Re=G.clearcoat>0,Me=G.dispersion>0,Z=G.iridescence>0,de=G.sheen>0,Te=G.transmission>0,Ve=we&&!!G.anisotropyMap,Ze=Re&&!!G.clearcoatMap,qt=Re&&!!G.clearcoatNormalMap,Tt=Re&&!!G.clearcoatRoughnessMap,yi=Z&&!!G.iridescenceMap,un=Z&&!!G.iridescenceThicknessMap,Li=de&&!!G.sheenColorMap,$i=de&&!!G.sheenRoughnessMap,Vn=!!G.specularMap,hn=!!G.specularColorMap,ji=!!G.specularIntensityMap,Bn=Te&&!!G.transmissionMap,es=Te&&!!G.thicknessMap,Fm=!!G.gradientMap,Um=!!G.alphaMap,ap=G.alphaTest>0,lv=!!G.alphaHash,w1=!!G.extensions;let Rt=0;G.toneMapped&&(_i!==null&&_i.isXRRenderTarget!==!0||(Rt=o.toneMapping));const x1={shaderID:vt,shaderType:G.type,shaderName:G.name,vertexShader:st,fragmentShader:mt,defines:G.defines,customVertexShaderID:It,customFragmentShaderID:Jt,isRawShaderMaterial:G.isRawShaderMaterial===!0,glslVersion:G.glslVersion,precision:O,batching:Kt,batchingColor:Kt&&oe._colorsTexture!==null,instancing:xi,instancingColor:xi&&oe.instanceColor!==null,instancingMorph:xi&&oe.morphTexture!==null,supportsVertexTextures:D,outputColorSpace:_i===null?o.outputColorSpace:_i.isXRRenderTarget===!0?_i.texture.colorSpace:bs,alphaToCoverage:!!G.alphaToCoverage,map:_t,matcap:hi,envMap:bi,envMapMode:bi&&Ne.mapping,envMapCubeUVHeight:We,aoMap:Ge,lightMap:Pe,bumpMap:ut,normalMap:xt,displacementMap:D&&ct,emissiveMap:Mt,normalMapObjectSpace:xt&&G.normalMapType===1,normalMapTangentSpace:xt&&G.normalMapType===0,metalnessMap:Je,roughnessMap:Ut,anisotropy:we,anisotropyMap:Ve,clearcoat:Re,clearcoatMap:Ze,clearcoatNormalMap:qt,clearcoatRoughnessMap:Tt,dispersion:Me,iridescence:Z,iridescenceMap:yi,iridescenceThicknessMap:un,sheen:de,sheenColorMap:Li,sheenRoughnessMap:$i,specularMap:Vn,specularColorMap:hn,specularIntensityMap:ji,transmission:Te,transmissionMap:Bn,thicknessMap:es,gradientMap:Fm,opaque:G.transparent===!1&&G.blending===1&&G.alphaToCoverage===!1,alphaMap:Um,alphaTest:ap,alphaHash:lv,combine:G.combine,mapUv:_t&&$(G.map.channel),aoMapUv:Ge&&$(G.aoMap.channel),lightMapUv:Pe&&$(G.lightMap.channel),bumpMapUv:ut&&$(G.bumpMap.channel),normalMapUv:xt&&$(G.normalMap.channel),displacementMapUv:ct&&$(G.displacementMap.channel),emissiveMapUv:Mt&&$(G.emissiveMap.channel),metalnessMapUv:Je&&$(G.metalnessMap.channel),roughnessMapUv:Ut&&$(G.roughnessMap.channel),anisotropyMapUv:Ve&&$(G.anisotropyMap.channel),clearcoatMapUv:Ze&&$(G.clearcoatMap.channel),clearcoatNormalMapUv:qt&&$(G.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Tt&&$(G.clearcoatRoughnessMap.channel),iridescenceMapUv:yi&&$(G.iridescenceMap.channel),iridescenceThicknessMapUv:un&&$(G.iridescenceThicknessMap.channel),sheenColorMapUv:Li&&$(G.sheenColorMap.channel),sheenRoughnessMapUv:$i&&$(G.sheenRoughnessMap.channel),specularMapUv:Vn&&$(G.specularMap.channel),specularColorMapUv:hn&&$(G.specularColorMap.channel),specularIntensityMapUv:ji&&$(G.specularIntensityMap.channel),transmissionMapUv:Bn&&$(G.transmissionMap.channel),thicknessMapUv:es&&$(G.thicknessMap.channel),alphaMapUv:Um&&$(G.alphaMap.channel),vertexTangents:!!ve.attributes.tangent&&(xt||we),vertexColors:G.vertexColors,vertexAlphas:G.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,pointsUvs:oe.isPoints===!0&&!!ve.attributes.uv&&(_t||Um),fog:!!Ae,useFog:G.fog===!0,fogExp2:!!Ae&&Ae.isFogExp2,flatShading:G.flatShading===!0,sizeAttenuation:G.sizeAttenuation===!0,logarithmicDepthBuffer:B,reverseDepthBuffer:R,skinning:oe.isSkinnedMesh===!0,morphTargets:ve.morphAttributes.position!==void 0,morphNormals:ve.morphAttributes.normal!==void 0,morphColors:ve.morphAttributes.color!==void 0,morphTargetsCount:nt,morphTextureStride:jt,numDirLights:X.directional.length,numPointLights:X.point.length,numSpotLights:X.spot.length,numSpotLightMaps:X.spotLightMap.length,numRectAreaLights:X.rectArea.length,numHemiLights:X.hemi.length,numDirLightShadows:X.directionalShadowMap.length,numPointLightShadows:X.pointShadowMap.length,numSpotLightShadows:X.spotShadowMap.length,numSpotLightShadowsWithMaps:X.numSpotLightShadowsWithMaps,numLightProbes:X.numLightProbes,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:G.dithering,shadowMapEnabled:o.shadowMap.enabled&&te.length>0,shadowMapType:o.shadowMap.type,toneMapping:Rt,decodeVideoTexture:_t&&G.map.isVideoTexture===!0&&Qr.getTransfer(G.map.colorSpace)===Is,premultipliedAlpha:G.premultipliedAlpha,doubleSided:G.side===2,flipSided:G.side===1,useDepthPacking:G.depthPacking>=0,depthPacking:G.depthPacking||0,index0AttributeName:G.index0AttributeName,extensionClipCullDistance:w1&&G.extensions.clipCullDistance===!0&&c.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(w1&&G.extensions.multiDraw===!0||Kt)&&c.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:c.has("KHR_parallel_shader_compile"),customProgramCacheKey:G.customProgramCacheKey()};return x1.vertexUv1s=w.has(1),x1.vertexUv2s=w.has(2),x1.vertexUv3s=w.has(3),w.clear(),x1},getProgramCacheKey:function(G){const X=[];if(G.shaderID?X.push(G.shaderID):(X.push(G.customVertexShaderID),X.push(G.customFragmentShaderID)),G.defines!==void 0)for(const oe in G.defines)X.push(oe),X.push(G.defines[oe]);return G.isRawShaderMaterial===!1&&(ae=G,(te=X).push(ae.precision),te.push(ae.outputColorSpace),te.push(ae.envMapMode),te.push(ae.envMapCubeUVHeight),te.push(ae.mapUv),te.push(ae.alphaMapUv),te.push(ae.lightMapUv),te.push(ae.aoMapUv),te.push(ae.bumpMapUv),te.push(ae.normalMapUv),te.push(ae.displacementMapUv),te.push(ae.emissiveMapUv),te.push(ae.metalnessMapUv),te.push(ae.roughnessMapUv),te.push(ae.anisotropyMapUv),te.push(ae.clearcoatMapUv),te.push(ae.clearcoatNormalMapUv),te.push(ae.clearcoatRoughnessMapUv),te.push(ae.iridescenceMapUv),te.push(ae.iridescenceThicknessMapUv),te.push(ae.sheenColorMapUv),te.push(ae.sheenRoughnessMapUv),te.push(ae.specularMapUv),te.push(ae.specularColorMapUv),te.push(ae.specularIntensityMapUv),te.push(ae.transmissionMapUv),te.push(ae.thicknessMapUv),te.push(ae.combine),te.push(ae.fogExp2),te.push(ae.sizeAttenuation),te.push(ae.morphTargetsCount),te.push(ae.morphAttributeCount),te.push(ae.numDirLights),te.push(ae.numPointLights),te.push(ae.numSpotLights),te.push(ae.numSpotLightMaps),te.push(ae.numHemiLights),te.push(ae.numRectAreaLights),te.push(ae.numDirLightShadows),te.push(ae.numPointLightShadows),te.push(ae.numSpotLightShadows),te.push(ae.numSpotLightShadowsWithMaps),te.push(ae.numLightProbes),te.push(ae.shadowMapType),te.push(ae.toneMapping),te.push(ae.numClippingPlanes),te.push(ae.numClipIntersection),te.push(ae.depthPacking),function(oe,Ae){p.disableAll(),Ae.supportsVertexTextures&&p.enable(0),Ae.instancing&&p.enable(1),Ae.instancingColor&&p.enable(2),Ae.instancingMorph&&p.enable(3),Ae.matcap&&p.enable(4),Ae.envMap&&p.enable(5),Ae.normalMapObjectSpace&&p.enable(6),Ae.normalMapTangentSpace&&p.enable(7),Ae.clearcoat&&p.enable(8),Ae.iridescence&&p.enable(9),Ae.alphaTest&&p.enable(10),Ae.vertexColors&&p.enable(11),Ae.vertexAlphas&&p.enable(12),Ae.vertexUv1s&&p.enable(13),Ae.vertexUv2s&&p.enable(14),Ae.vertexUv3s&&p.enable(15),Ae.vertexTangents&&p.enable(16),Ae.anisotropy&&p.enable(17),Ae.alphaHash&&p.enable(18),Ae.batching&&p.enable(19),Ae.dispersion&&p.enable(20),Ae.batchingColor&&p.enable(21),oe.push(p.mask),p.disableAll(),Ae.fog&&p.enable(0),Ae.useFog&&p.enable(1),Ae.flatShading&&p.enable(2),Ae.logarithmicDepthBuffer&&p.enable(3),Ae.reverseDepthBuffer&&p.enable(4),Ae.skinning&&p.enable(5),Ae.morphTargets&&p.enable(6),Ae.morphNormals&&p.enable(7),Ae.morphColors&&p.enable(8),Ae.premultipliedAlpha&&p.enable(9),Ae.shadowMapEnabled&&p.enable(10),Ae.doubleSided&&p.enable(11),Ae.flipSided&&p.enable(12),Ae.useDepthPacking&&p.enable(13),Ae.dithering&&p.enable(14),Ae.transmission&&p.enable(15),Ae.sheen&&p.enable(16),Ae.opaque&&p.enable(17),Ae.pointsUvs&&p.enable(18),Ae.decodeVideoTexture&&p.enable(19),Ae.alphaToCoverage&&p.enable(20),oe.push(p.mask)}(X,G),X.push(o.outputColorSpace)),X.push(G.customProgramCacheKey),X.join();var te,ae},getUniforms:function(G){const X=V[G.type];let te;if(X){const ae=ws[X];te=tm.clone(ae.uniforms)}else te=G.uniforms;return te},acquireProgram:function(G,X){let te;for(let ae=0,oe=S.length;ae<oe;ae++){const Ae=S[ae];if(Ae.cacheKey===X){te=Ae,++te.usedTimes;break}}return te===void 0&&(te=new KA(o,X,G,f),S.push(te)),te},releaseProgram:function(G){if(--G.usedTimes==0){const X=S.indexOf(G);S[X]=S[S.length-1],S.pop(),G.destroy()}},releaseShaderCache:function(G){v.remove(G)},programs:S,dispose:function(){v.dispose()}}}function eu(){let o=new WeakMap;return{has:function(t){return o.has(t)},get:function(t){let n=o.get(t);return n===void 0&&(n={},o.set(t,n)),n},remove:function(t){o.delete(t)},update:function(t,n,c){o.get(t)[n]=c},dispose:function(){o=new WeakMap}}}function gh(o,t){return o.groupOrder!==t.groupOrder?o.groupOrder-t.groupOrder:o.renderOrder!==t.renderOrder?o.renderOrder-t.renderOrder:o.material.id!==t.material.id?o.material.id-t.material.id:o.z!==t.z?o.z-t.z:o.id-t.id}function B_(o,t){return o.groupOrder!==t.groupOrder?o.groupOrder-t.groupOrder:o.renderOrder!==t.renderOrder?o.renderOrder-t.renderOrder:o.z!==t.z?t.z-o.z:o.id-t.id}function tu(){const o=[];let t=0;const n=[],c=[],h=[];function f(d,p,v,w,S,B){let R=o[t];return R===void 0?(R={id:d.id,object:d,geometry:p,material:v,groupOrder:w,renderOrder:d.renderOrder,z:S,group:B},o[t]=R):(R.id=d.id,R.object=d,R.geometry=p,R.material=v,R.groupOrder=w,R.renderOrder=d.renderOrder,R.z=S,R.group=B),t++,R}return{opaque:n,transmissive:c,transparent:h,init:function(){t=0,n.length=0,c.length=0,h.length=0},push:function(d,p,v,w,S,B){const R=f(d,p,v,w,S,B);v.transmission>0?c.push(R):v.transparent===!0?h.push(R):n.push(R)},unshift:function(d,p,v,w,S,B){const R=f(d,p,v,w,S,B);v.transmission>0?c.unshift(R):v.transparent===!0?h.unshift(R):n.unshift(R)},finish:function(){for(let d=t,p=o.length;d<p;d++){const v=o[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}},sort:function(d,p){n.length>1&&n.sort(d||gh),c.length>1&&c.sort(p||B_),h.length>1&&h.sort(p||B_)}}}function Yf(){let o=new WeakMap;return{get:function(t,n){const c=o.get(t);let h;return c===void 0?(h=new tu,o.set(t,[h])):n>=c.length?(h=new tu,c.push(h)):h=c[n],h},dispose:function(){o=new WeakMap}}}function I_(){const o={};return{get:function(t){if(o[t.id]!==void 0)return o[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Ke,color:new an};break;case"SpotLight":n={position:new Ke,direction:new Ke,color:new an,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ke,color:new an,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ke,skyColor:new an,groundColor:new an};break;case"RectAreaLight":n={color:new an,position:new Ke,halfWidth:new Ke,halfHeight:new Ke}}return o[t.id]=n,n}}}let am=0;function Qp(o,t){return(t.castShadow?2:0)-(o.castShadow?2:0)+(t.map?1:0)-(o.map?1:0)}function f0(o){const t=new I_,n=function(){const p={};return{get:function(v){if(p[v.id]!==void 0)return p[v.id];let w;switch(v.type){case"DirectionalLight":case"SpotLight":w={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Cn};break;case"PointLight":w={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Cn,shadowCameraNear:1,shadowCameraFar:1e3}}return p[v.id]=w,w}}}(),c={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)c.probe.push(new Ke);const h=new Ke,f=new nn,d=new nn;return{setup:function(p){let v=0,w=0,S=0;for(let ve=0;ve<9;ve++)c.probe[ve].set(0,0,0);let B=0,R=0,D=0,O=0,V=0,$=0,G=0,X=0,te=0,ae=0,oe=0;p.sort(Qp);for(let ve=0,De=p.length;ve<De;ve++){const Ne=p[ve],We=Ne.color,vt=Ne.intensity,ot=Ne.distance,nt=Ne.shadow&&Ne.shadow.map?Ne.shadow.map.texture:null;if(Ne.isAmbientLight)v+=We.r*vt,w+=We.g*vt,S+=We.b*vt;else if(Ne.isLightProbe){for(let st=0;st<9;st++)c.probe[st].addScaledVector(Ne.sh.coefficients[st],vt);oe++}else if(Ne.isDirectionalLight){const st=t.get(Ne);if(st.color.copy(Ne.color).multiplyScalar(Ne.intensity),Ne.castShadow){const mt=Ne.shadow,It=n.get(Ne);It.shadowIntensity=mt.intensity,It.shadowBias=mt.bias,It.shadowNormalBias=mt.normalBias,It.shadowRadius=mt.radius,It.shadowMapSize=mt.mapSize,c.directionalShadow[B]=It,c.directionalShadowMap[B]=nt,c.directionalShadowMatrix[B]=Ne.shadow.matrix,$++}c.directional[B]=st,B++}else if(Ne.isSpotLight){const st=t.get(Ne);st.position.setFromMatrixPosition(Ne.matrixWorld),st.color.copy(We).multiplyScalar(vt),st.distance=ot,st.coneCos=Math.cos(Ne.angle),st.penumbraCos=Math.cos(Ne.angle*(1-Ne.penumbra)),st.decay=Ne.decay,c.spot[D]=st;const mt=Ne.shadow;if(Ne.map&&(c.spotLightMap[te]=Ne.map,te++,mt.updateMatrices(Ne),Ne.castShadow&&ae++),c.spotLightMatrix[D]=mt.matrix,Ne.castShadow){const It=n.get(Ne);It.shadowIntensity=mt.intensity,It.shadowBias=mt.bias,It.shadowNormalBias=mt.normalBias,It.shadowRadius=mt.radius,It.shadowMapSize=mt.mapSize,c.spotShadow[D]=It,c.spotShadowMap[D]=nt,X++}D++}else if(Ne.isRectAreaLight){const st=t.get(Ne);st.color.copy(We).multiplyScalar(vt),st.halfWidth.set(.5*Ne.width,0,0),st.halfHeight.set(0,.5*Ne.height,0),c.rectArea[O]=st,O++}else if(Ne.isPointLight){const st=t.get(Ne);if(st.color.copy(Ne.color).multiplyScalar(Ne.intensity),st.distance=Ne.distance,st.decay=Ne.decay,Ne.castShadow){const mt=Ne.shadow,It=n.get(Ne);It.shadowIntensity=mt.intensity,It.shadowBias=mt.bias,It.shadowNormalBias=mt.normalBias,It.shadowRadius=mt.radius,It.shadowMapSize=mt.mapSize,It.shadowCameraNear=mt.camera.near,It.shadowCameraFar=mt.camera.far,c.pointShadow[R]=It,c.pointShadowMap[R]=nt,c.pointShadowMatrix[R]=Ne.shadow.matrix,G++}c.point[R]=st,R++}else if(Ne.isHemisphereLight){const st=t.get(Ne);st.skyColor.copy(Ne.color).multiplyScalar(vt),st.groundColor.copy(Ne.groundColor).multiplyScalar(vt),c.hemi[V]=st,V++}}O>0&&(o.has("OES_texture_float_linear")===!0?(c.rectAreaLTC1=Yi.LTC_FLOAT_1,c.rectAreaLTC2=Yi.LTC_FLOAT_2):(c.rectAreaLTC1=Yi.LTC_HALF_1,c.rectAreaLTC2=Yi.LTC_HALF_2)),c.ambient[0]=v,c.ambient[1]=w,c.ambient[2]=S;const Ae=c.hash;Ae.directionalLength===B&&Ae.pointLength===R&&Ae.spotLength===D&&Ae.rectAreaLength===O&&Ae.hemiLength===V&&Ae.numDirectionalShadows===$&&Ae.numPointShadows===G&&Ae.numSpotShadows===X&&Ae.numSpotMaps===te&&Ae.numLightProbes===oe||(c.directional.length=B,c.spot.length=D,c.rectArea.length=O,c.point.length=R,c.hemi.length=V,c.directionalShadow.length=$,c.directionalShadowMap.length=$,c.pointShadow.length=G,c.pointShadowMap.length=G,c.spotShadow.length=X,c.spotShadowMap.length=X,c.directionalShadowMatrix.length=$,c.pointShadowMatrix.length=G,c.spotLightMatrix.length=X+te-ae,c.spotLightMap.length=te,c.numSpotLightShadowsWithMaps=ae,c.numLightProbes=oe,Ae.directionalLength=B,Ae.pointLength=R,Ae.spotLength=D,Ae.rectAreaLength=O,Ae.hemiLength=V,Ae.numDirectionalShadows=$,Ae.numPointShadows=G,Ae.numSpotShadows=X,Ae.numSpotMaps=te,Ae.numLightProbes=oe,c.version=am++)},setupView:function(p,v){let w=0,S=0,B=0,R=0,D=0;const O=v.matrixWorldInverse;for(let V=0,$=p.length;V<$;V++){const G=p[V];if(G.isDirectionalLight){const X=c.directional[w];X.direction.setFromMatrixPosition(G.matrixWorld),h.setFromMatrixPosition(G.target.matrixWorld),X.direction.sub(h),X.direction.transformDirection(O),w++}else if(G.isSpotLight){const X=c.spot[B];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(O),X.direction.setFromMatrixPosition(G.matrixWorld),h.setFromMatrixPosition(G.target.matrixWorld),X.direction.sub(h),X.direction.transformDirection(O),B++}else if(G.isRectAreaLight){const X=c.rectArea[R];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(O),d.identity(),f.copy(G.matrixWorld),f.premultiply(O),d.extractRotation(f),X.halfWidth.set(.5*G.width,0,0),X.halfHeight.set(0,.5*G.height,0),X.halfWidth.applyMatrix4(d),X.halfHeight.applyMatrix4(d),R++}else if(G.isPointLight){const X=c.point[S];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(O),S++}else if(G.isHemisphereLight){const X=c.hemi[D];X.direction.setFromMatrixPosition(G.matrixWorld),X.direction.transformDirection(O),D++}}},state:c}}function Jf(o){const t=new f0(o),n=[],c=[],h={lightsArray:n,shadowsArray:c,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(f){h.camera=f,n.length=0,c.length=0},state:h,setupLights:function(){t.setup(n)},setupLightsView:function(f){t.setupView(n,f)},pushLight:function(f){n.push(f)},pushShadow:function(f){c.push(f)}}}function lm(o){let t=new WeakMap;return{get:function(n,c=0){const h=t.get(n);let f;return h===void 0?(f=new Jf(o),t.set(n,[f])):c>=h.length?(f=new Jf(o),h.push(f)):f=h[c],f},dispose:function(){t=new WeakMap}}}class XA extends Us{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class cm extends Us{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function T_(o,t,n){let c=new Rp;const h=new Cn,f=new Cn,d=new Fr,p=new XA({depthPacking:3201}),v=new cm,w={},S=n.maxTextureSize,B={[Bi]:1,[ln]:0,[Ji]:2},R=new jl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Cn},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),D=R.clone();D.defines.HORIZONTAL_PASS=1;const O=new ga;O.setAttribute("position",new Ls(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const V=new As(O,R),$=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let G=this.type;function X(Ae,ve){const De=t.update(V);R.defines.VSM_SAMPLES!==Ae.blurSamples&&(R.defines.VSM_SAMPLES=Ae.blurSamples,D.defines.VSM_SAMPLES=Ae.blurSamples,R.needsUpdate=!0,D.needsUpdate=!0),Ae.mapPass===null&&(Ae.mapPass=new Io(h.x,h.y)),R.uniforms.shadow_pass.value=Ae.map.texture,R.uniforms.resolution.value=Ae.mapSize,R.uniforms.radius.value=Ae.radius,o.setRenderTarget(Ae.mapPass),o.clear(),o.renderBufferDirect(ve,null,De,R,V,null),D.uniforms.shadow_pass.value=Ae.mapPass.texture,D.uniforms.resolution.value=Ae.mapSize,D.uniforms.radius.value=Ae.radius,o.setRenderTarget(Ae.map),o.clear(),o.renderBufferDirect(ve,null,De,D,V,null)}function te(Ae,ve,De,Ne){let We=null;const vt=De.isPointLight===!0?Ae.customDistanceMaterial:Ae.customDepthMaterial;if(vt!==void 0)We=vt;else if(We=De.isPointLight===!0?v:p,o.localClippingEnabled&&ve.clipShadows===!0&&Array.isArray(ve.clippingPlanes)&&ve.clippingPlanes.length!==0||ve.displacementMap&&ve.displacementScale!==0||ve.alphaMap&&ve.alphaTest>0||ve.map&&ve.alphaTest>0){const ot=We.uuid,nt=ve.uuid;let st=w[ot];st===void 0&&(st={},w[ot]=st);let mt=st[nt];mt===void 0&&(mt=We.clone(),st[nt]=mt,ve.addEventListener("dispose",oe)),We=mt}return We.visible=ve.visible,We.wireframe=ve.wireframe,We.side=Ne===3?ve.shadowSide!==null?ve.shadowSide:ve.side:ve.shadowSide!==null?ve.shadowSide:B[ve.side],We.alphaMap=ve.alphaMap,We.alphaTest=ve.alphaTest,We.map=ve.map,We.clipShadows=ve.clipShadows,We.clippingPlanes=ve.clippingPlanes,We.clipIntersection=ve.clipIntersection,We.displacementMap=ve.displacementMap,We.displacementScale=ve.displacementScale,We.displacementBias=ve.displacementBias,We.wireframeLinewidth=ve.wireframeLinewidth,We.linewidth=ve.linewidth,De.isPointLight===!0&&We.isMeshDistanceMaterial===!0&&(o.properties.get(We).light=De),We}function ae(Ae,ve,De,Ne,We){if(Ae.visible===!1)return;if(Ae.layers.test(ve.layers)&&(Ae.isMesh||Ae.isLine||Ae.isPoints)&&(Ae.castShadow||Ae.receiveShadow&&We===3)&&(!Ae.frustumCulled||c.intersectsObject(Ae))){Ae.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,Ae.matrixWorld);const ot=t.update(Ae),nt=Ae.material;if(Array.isArray(nt)){const st=ot.groups;for(let mt=0,It=st.length;mt<It;mt++){const Jt=st[mt],jt=nt[Jt.materialIndex];if(jt&&jt.visible){const _i=te(Ae,jt,Ne,We);Ae.onBeforeShadow(o,Ae,ve,De,ot,_i,Jt),o.renderBufferDirect(De,null,ot,_i,Ae,Jt),Ae.onAfterShadow(o,Ae,ve,De,ot,_i,Jt)}}}else if(nt.visible){const st=te(Ae,nt,Ne,We);Ae.onBeforeShadow(o,Ae,ve,De,ot,st,null),o.renderBufferDirect(De,null,ot,st,Ae,null),Ae.onAfterShadow(o,Ae,ve,De,ot,st,null)}}const vt=Ae.children;for(let ot=0,nt=vt.length;ot<nt;ot++)ae(vt[ot],ve,De,Ne,We)}function oe(Ae){Ae.target.removeEventListener("dispose",oe);for(const ve in w){const De=w[ve],Ne=Ae.target.uuid;Ne in De&&(De[Ne].dispose(),delete De[Ne])}}this.render=function(Ae,ve,De){if($.enabled===!1||$.autoUpdate===!1&&$.needsUpdate===!1||Ae.length===0)return;const Ne=o.getRenderTarget(),We=o.getActiveCubeFace(),vt=o.getActiveMipmapLevel(),ot=o.state;ot.setBlending(0),ot.buffers.color.setClear(1,1,1,1),ot.buffers.depth.setTest(!0),ot.setScissorTest(!1);const nt=G!==3&&this.type===3,st=G===3&&this.type!==3;for(let mt=0,It=Ae.length;mt<It;mt++){const Jt=Ae[mt],jt=Jt.shadow;if(jt===void 0){console.warn("THREE.WebGLShadowMap:",Jt,"has no shadow.");continue}if(jt.autoUpdate===!1&&jt.needsUpdate===!1)continue;h.copy(jt.mapSize);const _i=jt.getFrameExtents();if(h.multiply(_i),f.copy(jt.mapSize),(h.x>S||h.y>S)&&(h.x>S&&(f.x=Math.floor(S/_i.x),h.x=f.x*_i.x,jt.mapSize.x=f.x),h.y>S&&(f.y=Math.floor(S/_i.y),h.y=f.y*_i.y,jt.mapSize.y=f.y)),jt.map===null||nt===!0||st===!0){const Kt=this.type!==3?{minFilter:pi,magFilter:pi}:{};jt.map!==null&&jt.map.dispose(),jt.map=new Io(h.x,h.y,Kt),jt.map.texture.name=Jt.name+".shadowMap",jt.camera.updateProjectionMatrix()}o.setRenderTarget(jt.map),o.clear();const xi=jt.getViewportCount();for(let Kt=0;Kt<xi;Kt++){const _t=jt.getViewport(Kt);d.set(f.x*_t.x,f.y*_t.y,f.x*_t.z,f.y*_t.w),ot.viewport(d),jt.updateMatrices(Jt,Kt),c=jt.getFrustum(),ae(ve,De,jt.camera,Jt,this.type)}jt.isPointLightShadow!==!0&&this.type===3&&X(jt,De),jt.needsUpdate=!1}G=this.type,$.needsUpdate=!1,o.setRenderTarget(Ne,We,vt)}}const Np={[fl]:1,[Nc]:6,[Hc]:7,[eh]:5,[Ql]:0,[ys]:2,[Nl]:4,[Fs]:3};function Ec(o){const t=new function(){let Je=!1;const Ut=new Fr;let we=null;const Re=new Fr(0,0,0,0);return{setMask:function(Me){we===Me||Je||(o.colorMask(Me,Me,Me,Me),we=Me)},setLocked:function(Me){Je=Me},setClear:function(Me,Z,de,Te,Ve){Ve===!0&&(Me*=Te,Z*=Te,de*=Te),Ut.set(Me,Z,de,Te),Re.equals(Ut)===!1&&(o.clearColor(Me,Z,de,Te),Re.copy(Ut))},reset:function(){Je=!1,we=null,Re.set(-1,0,0,0)}}},n=new function(){let Je=!1,Ut=!1,we=null,Re=null,Me=null;return{setReversed:function(Z){Ut=Z},setTest:function(Z){Z?hi(o.DEPTH_TEST):bi(o.DEPTH_TEST)},setMask:function(Z){we===Z||Je||(o.depthMask(Z),we=Z)},setFunc:function(Z){if(Ut&&(Z=Np[Z]),Re!==Z){switch(Z){case 0:o.depthFunc(o.NEVER);break;case 1:o.depthFunc(o.ALWAYS);break;case 2:o.depthFunc(o.LESS);break;case 3:default:o.depthFunc(o.LEQUAL);break;case 4:o.depthFunc(o.EQUAL);break;case 5:o.depthFunc(o.GEQUAL);break;case 6:o.depthFunc(o.GREATER);break;case 7:o.depthFunc(o.NOTEQUAL)}Re=Z}},setLocked:function(Z){Je=Z},setClear:function(Z){Me!==Z&&(o.clearDepth(Z),Me=Z)},reset:function(){Je=!1,we=null,Re=null,Me=null}}},c=new function(){let Je=!1,Ut=null,we=null,Re=null,Me=null,Z=null,de=null,Te=null,Ve=null;return{setTest:function(Ze){Je||(Ze?hi(o.STENCIL_TEST):bi(o.STENCIL_TEST))},setMask:function(Ze){Ut===Ze||Je||(o.stencilMask(Ze),Ut=Ze)},setFunc:function(Ze,qt,Tt){we===Ze&&Re===qt&&Me===Tt||(o.stencilFunc(Ze,qt,Tt),we=Ze,Re=qt,Me=Tt)},setOp:function(Ze,qt,Tt){Z===Ze&&de===qt&&Te===Tt||(o.stencilOp(Ze,qt,Tt),Z=Ze,de=qt,Te=Tt)},setLocked:function(Ze){Je=Ze},setClear:function(Ze){Ve!==Ze&&(o.clearStencil(Ze),Ve=Ze)},reset:function(){Je=!1,Ut=null,we=null,Re=null,Me=null,Z=null,de=null,Te=null,Ve=null}}},h=new WeakMap,f=new WeakMap;let d={},p={},v=new WeakMap,w=[],S=null,B=!1,R=null,D=null,O=null,V=null,$=null,G=null,X=null,te=new an(0,0,0),ae=0,oe=!1,Ae=null,ve=null,De=null,Ne=null,We=null;const vt=o.getParameter(o.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ot=!1,nt=0;const st=o.getParameter(o.VERSION);st.indexOf("WebGL")!==-1?(nt=parseFloat(/^WebGL (\d)/.exec(st)[1]),ot=nt>=1):st.indexOf("OpenGL ES")!==-1&&(nt=parseFloat(/^OpenGL ES (\d)/.exec(st)[1]),ot=nt>=2);let mt=null,It={};const Jt=o.getParameter(o.SCISSOR_BOX),jt=o.getParameter(o.VIEWPORT),_i=new Fr().fromArray(Jt),xi=new Fr().fromArray(jt);function Kt(Je,Ut,we,Re){const Me=new Uint8Array(4),Z=o.createTexture();o.bindTexture(Je,Z),o.texParameteri(Je,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(Je,o.TEXTURE_MAG_FILTER,o.NEAREST);for(let de=0;de<we;de++)Je===o.TEXTURE_3D||Je===o.TEXTURE_2D_ARRAY?o.texImage3D(Ut,0,o.RGBA,1,1,Re,0,o.RGBA,o.UNSIGNED_BYTE,Me):o.texImage2D(Ut+de,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,Me);return Z}const _t={};function hi(Je){d[Je]!==!0&&(o.enable(Je),d[Je]=!0)}function bi(Je){d[Je]!==!1&&(o.disable(Je),d[Je]=!1)}_t[o.TEXTURE_2D]=Kt(o.TEXTURE_2D,o.TEXTURE_2D,1),_t[o.TEXTURE_CUBE_MAP]=Kt(o.TEXTURE_CUBE_MAP,o.TEXTURE_CUBE_MAP_POSITIVE_X,6),_t[o.TEXTURE_2D_ARRAY]=Kt(o.TEXTURE_2D_ARRAY,o.TEXTURE_2D_ARRAY,1,1),_t[o.TEXTURE_3D]=Kt(o.TEXTURE_3D,o.TEXTURE_3D,1,1),t.setClear(0,0,0,1),n.setClear(1),c.setClear(0),hi(o.DEPTH_TEST),n.setFunc(3),xt(!1),ct(1),hi(o.CULL_FACE),ut(0);const Ge={[Vi]:o.FUNC_ADD,[at]:o.FUNC_SUBTRACT,[Ti]:o.FUNC_REVERSE_SUBTRACT};Ge[103]=o.MIN,Ge[104]=o.MAX;const Pe={[Pt]:o.ZERO,[Xt]:o.ONE,[Mi]:o.SRC_COLOR,[Fi]:o.SRC_ALPHA,[Xr]:o.SRC_ALPHA_SATURATE,[cr]:o.DST_COLOR,[Xn]:o.DST_ALPHA,[Ii]:o.ONE_MINUS_SRC_COLOR,[vn]:o.ONE_MINUS_SRC_ALPHA,[gr]:o.ONE_MINUS_DST_COLOR,[Tn]:o.ONE_MINUS_DST_ALPHA,[$n]:o.CONSTANT_COLOR,[co]:o.ONE_MINUS_CONSTANT_COLOR,[Ka]:o.CONSTANT_ALPHA,[Zu]:o.ONE_MINUS_CONSTANT_ALPHA};function ut(Je,Ut,we,Re,Me,Z,de,Te,Ve,Ze){if(Je!==0){if(B===!1&&(hi(o.BLEND),B=!0),Je===5)Me=Me||Ut,Z=Z||we,de=de||Re,Ut===D&&Me===$||(o.blendEquationSeparate(Ge[Ut],Ge[Me]),D=Ut,$=Me),we===O&&Re===V&&Z===G&&de===X||(o.blendFuncSeparate(Pe[we],Pe[Re],Pe[Z],Pe[de]),O=we,V=Re,G=Z,X=de),Te.equals(te)!==!1&&Ve===ae||(o.blendColor(Te.r,Te.g,Te.b,Ve),te.copy(Te),ae=Ve),R=Je,oe=!1;else if(Je!==R||Ze!==oe){if(D===Vi&&$===Vi||(o.blendEquation(o.FUNC_ADD),D=Vi,$=Vi),Ze)switch(Je){case 1:o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA);break;case 2:o.blendFunc(o.ONE,o.ONE);break;case 3:o.blendFuncSeparate(o.ZERO,o.ONE_MINUS_SRC_COLOR,o.ZERO,o.ONE);break;case 4:o.blendFuncSeparate(o.ZERO,o.SRC_COLOR,o.ZERO,o.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Je)}else switch(Je){case 1:o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA);break;case 2:o.blendFunc(o.SRC_ALPHA,o.ONE);break;case 3:o.blendFuncSeparate(o.ZERO,o.ONE_MINUS_SRC_COLOR,o.ZERO,o.ONE);break;case 4:o.blendFunc(o.ZERO,o.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Je)}O=null,V=null,G=null,X=null,te.set(0,0,0),ae=0,R=Je,oe=Ze}}else B===!0&&(bi(o.BLEND),B=!1)}function xt(Je){Ae!==Je&&(Je?o.frontFace(o.CW):o.frontFace(o.CCW),Ae=Je)}function ct(Je){Je!==0?(hi(o.CULL_FACE),Je!==ve&&(Je===1?o.cullFace(o.BACK):Je===2?o.cullFace(o.FRONT):o.cullFace(o.FRONT_AND_BACK))):bi(o.CULL_FACE),ve=Je}function Mt(Je,Ut,we){Je?(hi(o.POLYGON_OFFSET_FILL),Ne===Ut&&We===we||(o.polygonOffset(Ut,we),Ne=Ut,We=we)):bi(o.POLYGON_OFFSET_FILL)}return{buffers:{color:t,depth:n,stencil:c},enable:hi,disable:bi,bindFramebuffer:function(Je,Ut){return p[Je]!==Ut&&(o.bindFramebuffer(Je,Ut),p[Je]=Ut,Je===o.DRAW_FRAMEBUFFER&&(p[o.FRAMEBUFFER]=Ut),Je===o.FRAMEBUFFER&&(p[o.DRAW_FRAMEBUFFER]=Ut),!0)},drawBuffers:function(Je,Ut){let we=w,Re=!1;if(Je){we=v.get(Ut),we===void 0&&(we=[],v.set(Ut,we));const Me=Je.textures;if(we.length!==Me.length||we[0]!==o.COLOR_ATTACHMENT0){for(let Z=0,de=Me.length;Z<de;Z++)we[Z]=o.COLOR_ATTACHMENT0+Z;we.length=Me.length,Re=!0}}else we[0]!==o.BACK&&(we[0]=o.BACK,Re=!0);Re&&o.drawBuffers(we)},useProgram:function(Je){return S!==Je&&(o.useProgram(Je),S=Je,!0)},setBlending:ut,setMaterial:function(Je,Ut){Je.side===2?bi(o.CULL_FACE):hi(o.CULL_FACE);let we=Je.side===1;Ut&&(we=!we),xt(we),Je.blending===1&&Je.transparent===!1?ut(0):ut(Je.blending,Je.blendEquation,Je.blendSrc,Je.blendDst,Je.blendEquationAlpha,Je.blendSrcAlpha,Je.blendDstAlpha,Je.blendColor,Je.blendAlpha,Je.premultipliedAlpha),n.setFunc(Je.depthFunc),n.setTest(Je.depthTest),n.setMask(Je.depthWrite),t.setMask(Je.colorWrite);const Re=Je.stencilWrite;c.setTest(Re),Re&&(c.setMask(Je.stencilWriteMask),c.setFunc(Je.stencilFunc,Je.stencilRef,Je.stencilFuncMask),c.setOp(Je.stencilFail,Je.stencilZFail,Je.stencilZPass)),Mt(Je.polygonOffset,Je.polygonOffsetFactor,Je.polygonOffsetUnits),Je.alphaToCoverage===!0?hi(o.SAMPLE_ALPHA_TO_COVERAGE):bi(o.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:xt,setCullFace:ct,setLineWidth:function(Je){Je!==De&&(ot&&o.lineWidth(Je),De=Je)},setPolygonOffset:Mt,setScissorTest:function(Je){Je?hi(o.SCISSOR_TEST):bi(o.SCISSOR_TEST)},activeTexture:function(Je){Je===void 0&&(Je=o.TEXTURE0+vt-1),mt!==Je&&(o.activeTexture(Je),mt=Je)},bindTexture:function(Je,Ut,we){we===void 0&&(we=mt===null?o.TEXTURE0+vt-1:mt);let Re=It[we];Re===void 0&&(Re={type:void 0,texture:void 0},It[we]=Re),Re.type===Je&&Re.texture===Ut||(mt!==we&&(o.activeTexture(we),mt=we),o.bindTexture(Je,Ut||_t[Je]),Re.type=Je,Re.texture=Ut)},unbindTexture:function(){const Je=It[mt];Je!==void 0&&Je.type!==void 0&&(o.bindTexture(Je.type,null),Je.type=void 0,Je.texture=void 0)},compressedTexImage2D:function(){try{o.compressedTexImage2D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},compressedTexImage3D:function(){try{o.compressedTexImage3D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texImage2D:function(){try{o.texImage2D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texImage3D:function(){try{o.texImage3D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},updateUBOMapping:function(Je,Ut){let we=f.get(Ut);we===void 0&&(we=new WeakMap,f.set(Ut,we));let Re=we.get(Je);Re===void 0&&(Re=o.getUniformBlockIndex(Ut,Je.name),we.set(Je,Re))},uniformBlockBinding:function(Je,Ut){const we=f.get(Ut).get(Je);h.get(Ut)!==we&&(o.uniformBlockBinding(Ut,we,Je.__bindingPointIndex),h.set(Ut,we))},texStorage2D:function(){try{o.texStorage2D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texStorage3D:function(){try{o.texStorage3D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texSubImage2D:function(){try{o.texSubImage2D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texSubImage3D:function(){try{o.texSubImage3D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},compressedTexSubImage2D:function(){try{o.compressedTexSubImage2D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},compressedTexSubImage3D:function(){try{o.compressedTexSubImage3D.apply(o,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},scissor:function(Je){_i.equals(Je)===!1&&(o.scissor(Je.x,Je.y,Je.z,Je.w),_i.copy(Je))},viewport:function(Je){xi.equals(Je)===!1&&(o.viewport(Je.x,Je.y,Je.z,Je.w),xi.copy(Je))},reset:function(){o.disable(o.BLEND),o.disable(o.CULL_FACE),o.disable(o.DEPTH_TEST),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SCISSOR_TEST),o.disable(o.STENCIL_TEST),o.disable(o.SAMPLE_ALPHA_TO_COVERAGE),o.blendEquation(o.FUNC_ADD),o.blendFunc(o.ONE,o.ZERO),o.blendFuncSeparate(o.ONE,o.ZERO,o.ONE,o.ZERO),o.blendColor(0,0,0,0),o.colorMask(!0,!0,!0,!0),o.clearColor(0,0,0,0),o.depthMask(!0),o.depthFunc(o.LESS),o.clearDepth(1),o.stencilMask(4294967295),o.stencilFunc(o.ALWAYS,0,4294967295),o.stencilOp(o.KEEP,o.KEEP,o.KEEP),o.clearStencil(0),o.cullFace(o.BACK),o.frontFace(o.CCW),o.polygonOffset(0,0),o.activeTexture(o.TEXTURE0),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.useProgram(null),o.lineWidth(1),o.scissor(0,0,o.canvas.width,o.canvas.height),o.viewport(0,0,o.canvas.width,o.canvas.height),d={},mt=null,It={},p={},v=new WeakMap,w=[],S=null,B=!1,R=null,D=null,O=null,V=null,$=null,G=null,X=null,te=new an(0,0,0),ae=0,oe=!1,Ae=null,ve=null,De=null,Ne=null,We=null,_i.set(0,0,o.canvas.width,o.canvas.height),xi.set(0,0,o.canvas.width,o.canvas.height),t.reset(),n.reset(),c.reset()}}}function dd(o,t,n,c){const h=function(f){switch(f){case Qi:case Wn:return{byteLength:1,components:1};case Yr:case Cr:case jn:return{byteLength:2,components:1};case ar:case Wo:return{byteLength:2,components:4};case xn:case sr:case Xi:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${f}.`)}(c);switch(n){case 1021:case 1024:return o*t;case 1025:return o*t*2;case Ss:case Qs:return o*t/h.components*h.byteLength;case ns:case So:return o*t*2/h.components*h.byteLength;case 1022:return o*t*3/h.components*h.byteLength;case fn:case Ya:return o*t*4/h.components*h.byteLength;case aa:case zc:return Math.floor((o+3)/4)*Math.floor((t+3)/4)*8;case _u:case Wh:return Math.floor((o+3)/4)*Math.floor((t+3)/4)*16;case kA:case LA:return Math.max(o,16)*Math.max(t,8)/4;case jh:case th:return Math.max(o,8)*Math.max(t,8)/2;case ih:case pc:return Math.floor((o+3)/4)*Math.floor((t+3)/4)*8;case vu:case Ja:return Math.floor((o+3)/4)*Math.floor((t+3)/4)*16;case PA:return Math.floor((o+4)/5)*Math.floor((t+3)/4)*16;case Uf:return Math.floor((o+4)/5)*Math.floor((t+4)/5)*16;case Kh:return Math.floor((o+5)/6)*Math.floor((t+4)/5)*16;case jo:return Math.floor((o+5)/6)*Math.floor((t+5)/6)*16;case $d:return Math.floor((o+7)/8)*Math.floor((t+4)/5)*16;case yu:return Math.floor((o+7)/8)*Math.floor((t+5)/6)*16;case ml:return Math.floor((o+7)/8)*Math.floor((t+7)/8)*16;case nh:return Math.floor((o+9)/10)*Math.floor((t+4)/5)*16;case _l:return Math.floor((o+9)/10)*Math.floor((t+5)/6)*16;case _p:return Math.floor((o+9)/10)*Math.floor((t+7)/8)*16;case Xh:return Math.floor((o+9)/10)*Math.floor((t+9)/10)*16;case Hl:return Math.floor((o+11)/12)*Math.floor((t+9)/10)*16;case bu:return Math.floor((o+11)/12)*Math.floor((t+11)/12)*16;case Uo:case vl:case Yh:return Math.ceil(o/4)*Math.ceil(t/4)*16;case 36283:case ko:return Math.ceil(o/4)*Math.ceil(t/4)*8;case la:case Jh:return Math.ceil(o/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Sb(o,t,n,c,h,f,d){const p=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator<"u"&&/OculusBrowser/g.test(navigator.userAgent),w=new Cn,S=new WeakMap;let B;const R=new WeakMap;let D=!1;try{D=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function O(Ge,Pe){return D?new OffscreenCanvas(Ge,Pe):Kd("canvas")}function V(Ge,Pe,ut){let xt=1;const ct=bi(Ge);if((ct.width>ut||ct.height>ut)&&(xt=ut/Math.max(ct.width,ct.height)),xt<1){if(typeof HTMLImageElement<"u"&&Ge instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ge instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ge instanceof ImageBitmap||typeof VideoFrame<"u"&&Ge instanceof VideoFrame){const Mt=Math.floor(xt*ct.width),Je=Math.floor(xt*ct.height);B===void 0&&(B=O(Mt,Je));const Ut=Pe?O(Mt,Je):B;return Ut.width=Mt,Ut.height=Je,Ut.getContext("2d").drawImage(Ge,0,0,Mt,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ct.width+"x"+ct.height+") to ("+Mt+"x"+Je+")."),Ut}return"data"in Ge&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ct.width+"x"+ct.height+")."),Ge}return Ge}function $(Ge){return Ge.generateMipmaps&&Ge.minFilter!==pi&&Ge.minFilter!==Ci}function G(Ge){o.generateMipmap(Ge)}function X(Ge,Pe,ut,xt,ct=!1){if(Ge!==null){if(o[Ge]!==void 0)return o[Ge];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ge+"'")}let Mt=Pe;if(Pe===o.RED&&(ut===o.FLOAT&&(Mt=o.R32F),ut===o.HALF_FLOAT&&(Mt=o.R16F),ut===o.UNSIGNED_BYTE&&(Mt=o.R8)),Pe===o.RED_INTEGER&&(ut===o.UNSIGNED_BYTE&&(Mt=o.R8UI),ut===o.UNSIGNED_SHORT&&(Mt=o.R16UI),ut===o.UNSIGNED_INT&&(Mt=o.R32UI),ut===o.BYTE&&(Mt=o.R8I),ut===o.SHORT&&(Mt=o.R16I),ut===o.INT&&(Mt=o.R32I)),Pe===o.RG&&(ut===o.FLOAT&&(Mt=o.RG32F),ut===o.HALF_FLOAT&&(Mt=o.RG16F),ut===o.UNSIGNED_BYTE&&(Mt=o.RG8)),Pe===o.RG_INTEGER&&(ut===o.UNSIGNED_BYTE&&(Mt=o.RG8UI),ut===o.UNSIGNED_SHORT&&(Mt=o.RG16UI),ut===o.UNSIGNED_INT&&(Mt=o.RG32UI),ut===o.BYTE&&(Mt=o.RG8I),ut===o.SHORT&&(Mt=o.RG16I),ut===o.INT&&(Mt=o.RG32I)),Pe===o.RGB_INTEGER&&(ut===o.UNSIGNED_BYTE&&(Mt=o.RGB8UI),ut===o.UNSIGNED_SHORT&&(Mt=o.RGB16UI),ut===o.UNSIGNED_INT&&(Mt=o.RGB32UI),ut===o.BYTE&&(Mt=o.RGB8I),ut===o.SHORT&&(Mt=o.RGB16I),ut===o.INT&&(Mt=o.RGB32I)),Pe===o.RGBA_INTEGER&&(ut===o.UNSIGNED_BYTE&&(Mt=o.RGBA8UI),ut===o.UNSIGNED_SHORT&&(Mt=o.RGBA16UI),ut===o.UNSIGNED_INT&&(Mt=o.RGBA32UI),ut===o.BYTE&&(Mt=o.RGBA8I),ut===o.SHORT&&(Mt=o.RGBA16I),ut===o.INT&&(Mt=o.RGBA32I)),Pe===o.RGB&&ut===o.UNSIGNED_INT_5_9_9_9_REV&&(Mt=o.RGB9_E5),Pe===o.RGBA){const Je=ct?zg:Qr.getTransfer(xt);ut===o.FLOAT&&(Mt=o.RGBA32F),ut===o.HALF_FLOAT&&(Mt=o.RGBA16F),ut===o.UNSIGNED_BYTE&&(Mt=Je===Is?o.SRGB8_ALPHA8:o.RGBA8),ut===o.UNSIGNED_SHORT_4_4_4_4&&(Mt=o.RGBA4),ut===o.UNSIGNED_SHORT_5_5_5_1&&(Mt=o.RGB5_A1)}return Mt!==o.R16F&&Mt!==o.R32F&&Mt!==o.RG16F&&Mt!==o.RG32F&&Mt!==o.RGBA16F&&Mt!==o.RGBA32F||t.get("EXT_color_buffer_float"),Mt}function te(Ge,Pe){let ut;return Ge?Pe===null||Pe===xn||Pe===Ua?ut=o.DEPTH24_STENCIL8:Pe===Xi?ut=o.DEPTH32F_STENCIL8:Pe===Yr&&(ut=o.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Pe===null||Pe===xn||Pe===Ua?ut=o.DEPTH_COMPONENT24:Pe===Xi?ut=o.DEPTH_COMPONENT32F:Pe===Yr&&(ut=o.DEPTH_COMPONENT16),ut}function ae(Ge,Pe){return $(Ge)===!0||Ge.isFramebufferTexture&&Ge.minFilter!==pi&&Ge.minFilter!==Ci?Math.log2(Math.max(Pe.width,Pe.height))+1:Ge.mipmaps!==void 0&&Ge.mipmaps.length>0?Ge.mipmaps.length:Ge.isCompressedTexture&&Array.isArray(Ge.image)?Pe.mipmaps.length:1}function oe(Ge){const Pe=Ge.target;Pe.removeEventListener("dispose",oe),function(ut){const xt=c.get(ut);if(xt.__webglInit===void 0)return;const ct=ut.source,Mt=R.get(ct);if(Mt){const Je=Mt[xt.__cacheKey];Je.usedTimes--,Je.usedTimes===0&&ve(ut),Object.keys(Mt).length===0&&R.delete(ct)}c.remove(ut)}(Pe),Pe.isVideoTexture&&S.delete(Pe)}function Ae(Ge){const Pe=Ge.target;Pe.removeEventListener("dispose",Ae),function(ut){const xt=c.get(ut);if(ut.depthTexture&&ut.depthTexture.dispose(),ut.isWebGLCubeRenderTarget)for(let Mt=0;Mt<6;Mt++){if(Array.isArray(xt.__webglFramebuffer[Mt]))for(let Je=0;Je<xt.__webglFramebuffer[Mt].length;Je++)o.deleteFramebuffer(xt.__webglFramebuffer[Mt][Je]);else o.deleteFramebuffer(xt.__webglFramebuffer[Mt]);xt.__webglDepthbuffer&&o.deleteRenderbuffer(xt.__webglDepthbuffer[Mt])}else{if(Array.isArray(xt.__webglFramebuffer))for(let Mt=0;Mt<xt.__webglFramebuffer.length;Mt++)o.deleteFramebuffer(xt.__webglFramebuffer[Mt]);else o.deleteFramebuffer(xt.__webglFramebuffer);if(xt.__webglDepthbuffer&&o.deleteRenderbuffer(xt.__webglDepthbuffer),xt.__webglMultisampledFramebuffer&&o.deleteFramebuffer(xt.__webglMultisampledFramebuffer),xt.__webglColorRenderbuffer)for(let Mt=0;Mt<xt.__webglColorRenderbuffer.length;Mt++)xt.__webglColorRenderbuffer[Mt]&&o.deleteRenderbuffer(xt.__webglColorRenderbuffer[Mt]);xt.__webglDepthRenderbuffer&&o.deleteRenderbuffer(xt.__webglDepthRenderbuffer)}const ct=ut.textures;for(let Mt=0,Je=ct.length;Mt<Je;Mt++){const Ut=c.get(ct[Mt]);Ut.__webglTexture&&(o.deleteTexture(Ut.__webglTexture),d.memory.textures--),c.remove(ct[Mt])}c.remove(ut)}(Pe)}function ve(Ge){const Pe=c.get(Ge);o.deleteTexture(Pe.__webglTexture);const ut=Ge.source;delete R.get(ut)[Pe.__cacheKey],d.memory.textures--}let De=0;function Ne(Ge,Pe){const ut=c.get(Ge);if(Ge.isVideoTexture&&function(xt){const ct=d.render.frame;S.get(xt)!==ct&&(S.set(xt,ct),xt.update())}(Ge),Ge.isRenderTargetTexture===!1&&Ge.version>0&&ut.__version!==Ge.version){const xt=Ge.image;if(xt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(xt.complete!==!1)return void mt(ut,Ge,Pe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(o.TEXTURE_2D,ut.__webglTexture,o.TEXTURE0+Pe)}const We={[Vt]:o.REPEAT,[kt]:o.CLAMP_TO_EDGE,[St]:o.MIRRORED_REPEAT},vt={[pi]:o.NEAREST,[Ui]:o.NEAREST_MIPMAP_NEAREST,[ki]:o.NEAREST_MIPMAP_LINEAR,[Ci]:o.LINEAR,[yn]:o.LINEAR_MIPMAP_NEAREST,[en]:o.LINEAR_MIPMAP_LINEAR},ot={[jw]:o.NEVER,[ob]:o.ALWAYS,[ed]:o.LESS,[Kw]:o.LEQUAL,[rb]:o.EQUAL,[sb]:o.GEQUAL,[yp]:o.GREATER,[Wd]:o.NOTEQUAL};function nt(Ge,Pe){if(Pe.type!==Xi||t.has("OES_texture_float_linear")!==!1||Pe.magFilter!==Ci&&Pe.magFilter!==yn&&Pe.magFilter!==ki&&Pe.magFilter!==en&&Pe.minFilter!==Ci&&Pe.minFilter!==yn&&Pe.minFilter!==ki&&Pe.minFilter!==en||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),o.texParameteri(Ge,o.TEXTURE_WRAP_S,We[Pe.wrapS]),o.texParameteri(Ge,o.TEXTURE_WRAP_T,We[Pe.wrapT]),Ge!==o.TEXTURE_3D&&Ge!==o.TEXTURE_2D_ARRAY||o.texParameteri(Ge,o.TEXTURE_WRAP_R,We[Pe.wrapR]),o.texParameteri(Ge,o.TEXTURE_MAG_FILTER,vt[Pe.magFilter]),o.texParameteri(Ge,o.TEXTURE_MIN_FILTER,vt[Pe.minFilter]),Pe.compareFunction&&(o.texParameteri(Ge,o.TEXTURE_COMPARE_MODE,o.COMPARE_REF_TO_TEXTURE),o.texParameteri(Ge,o.TEXTURE_COMPARE_FUNC,ot[Pe.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(Pe.magFilter===pi||Pe.minFilter!==ki&&Pe.minFilter!==en||Pe.type===Xi&&t.has("OES_texture_float_linear")===!1)return;if(Pe.anisotropy>1||c.get(Pe).__currentAnisotropy){const ut=t.get("EXT_texture_filter_anisotropic");o.texParameterf(Ge,ut.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Pe.anisotropy,h.getMaxAnisotropy())),c.get(Pe).__currentAnisotropy=Pe.anisotropy}}}function st(Ge,Pe){let ut=!1;Ge.__webglInit===void 0&&(Ge.__webglInit=!0,Pe.addEventListener("dispose",oe));const xt=Pe.source;let ct=R.get(xt);ct===void 0&&(ct={},R.set(xt,ct));const Mt=function(Je){const Ut=[];return Ut.push(Je.wrapS),Ut.push(Je.wrapT),Ut.push(Je.wrapR||0),Ut.push(Je.magFilter),Ut.push(Je.minFilter),Ut.push(Je.anisotropy),Ut.push(Je.internalFormat),Ut.push(Je.format),Ut.push(Je.type),Ut.push(Je.generateMipmaps),Ut.push(Je.premultiplyAlpha),Ut.push(Je.flipY),Ut.push(Je.unpackAlignment),Ut.push(Je.colorSpace),Ut.join()}(Pe);if(Mt!==Ge.__cacheKey){ct[Mt]===void 0&&(ct[Mt]={texture:o.createTexture(),usedTimes:0},d.memory.textures++,ut=!0),ct[Mt].usedTimes++;const Je=ct[Ge.__cacheKey];Je!==void 0&&(ct[Ge.__cacheKey].usedTimes--,Je.usedTimes===0&&ve(Pe)),Ge.__cacheKey=Mt,Ge.__webglTexture=ct[Mt].texture}return ut}function mt(Ge,Pe,ut){let xt=o.TEXTURE_2D;(Pe.isDataArrayTexture||Pe.isCompressedArrayTexture)&&(xt=o.TEXTURE_2D_ARRAY),Pe.isData3DTexture&&(xt=o.TEXTURE_3D);const ct=st(Ge,Pe),Mt=Pe.source;n.bindTexture(xt,Ge.__webglTexture,o.TEXTURE0+ut);const Je=c.get(Mt);if(Mt.version!==Je.__version||ct===!0){n.activeTexture(o.TEXTURE0+ut);const Ut=Qr.getPrimaries(Qr.workingColorSpace),we=Pe.colorSpace===fc?null:Qr.getPrimaries(Pe.colorSpace),Re=Pe.colorSpace===fc||Ut===we?o.NONE:o.BROWSER_DEFAULT_WEBGL;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,Pe.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,Pe.unpackAlignment),o.pixelStorei(o.UNPACK_COLORSPACE_CONVERSION_WEBGL,Re);let Me=V(Pe.image,!1,h.maxTextureSize);Me=hi(Pe,Me);const Z=f.convert(Pe.format,Pe.colorSpace),de=f.convert(Pe.type);let Te,Ve=X(Pe.internalFormat,Z,de,Pe.colorSpace,Pe.isVideoTexture);nt(xt,Pe);const Ze=Pe.mipmaps,qt=Pe.isVideoTexture!==!0,Tt=Je.__version===void 0||ct===!0,yi=Mt.dataReady,un=ae(Pe,Me);if(Pe.isDepthTexture)Ve=te(Pe.format===Er,Pe.type),Tt&&(qt?n.texStorage2D(o.TEXTURE_2D,1,Ve,Me.width,Me.height):n.texImage2D(o.TEXTURE_2D,0,Ve,Me.width,Me.height,0,Z,de,null));else if(Pe.isDataTexture)if(Ze.length>0){qt&&Tt&&n.texStorage2D(o.TEXTURE_2D,un,Ve,Ze[0].width,Ze[0].height);for(let Li=0,$i=Ze.length;Li<$i;Li++)Te=Ze[Li],qt?yi&&n.texSubImage2D(o.TEXTURE_2D,Li,0,0,Te.width,Te.height,Z,de,Te.data):n.texImage2D(o.TEXTURE_2D,Li,Ve,Te.width,Te.height,0,Z,de,Te.data);Pe.generateMipmaps=!1}else qt?(Tt&&n.texStorage2D(o.TEXTURE_2D,un,Ve,Me.width,Me.height),yi&&n.texSubImage2D(o.TEXTURE_2D,0,0,0,Me.width,Me.height,Z,de,Me.data)):n.texImage2D(o.TEXTURE_2D,0,Ve,Me.width,Me.height,0,Z,de,Me.data);else if(Pe.isCompressedTexture)if(Pe.isCompressedArrayTexture){qt&&Tt&&n.texStorage3D(o.TEXTURE_2D_ARRAY,un,Ve,Ze[0].width,Ze[0].height,Me.depth);for(let Li=0,$i=Ze.length;Li<$i;Li++)if(Te=Ze[Li],Pe.format!==fn)if(Z!==null)if(qt){if(yi)if(Pe.layerUpdates.size>0){const Vn=dd(Te.width,Te.height,Pe.format,Pe.type);for(const hn of Pe.layerUpdates){const ji=Te.data.subarray(hn*Vn/Te.data.BYTES_PER_ELEMENT,(hn+1)*Vn/Te.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(o.TEXTURE_2D_ARRAY,Li,0,0,hn,Te.width,Te.height,1,Z,ji,0,0)}Pe.clearLayerUpdates()}else n.compressedTexSubImage3D(o.TEXTURE_2D_ARRAY,Li,0,0,0,Te.width,Te.height,Me.depth,Z,Te.data,0,0)}else n.compressedTexImage3D(o.TEXTURE_2D_ARRAY,Li,Ve,Te.width,Te.height,Me.depth,0,Te.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else qt?yi&&n.texSubImage3D(o.TEXTURE_2D_ARRAY,Li,0,0,0,Te.width,Te.height,Me.depth,Z,de,Te.data):n.texImage3D(o.TEXTURE_2D_ARRAY,Li,Ve,Te.width,Te.height,Me.depth,0,Z,de,Te.data)}else{qt&&Tt&&n.texStorage2D(o.TEXTURE_2D,un,Ve,Ze[0].width,Ze[0].height);for(let Li=0,$i=Ze.length;Li<$i;Li++)Te=Ze[Li],Pe.format!==fn?Z!==null?qt?yi&&n.compressedTexSubImage2D(o.TEXTURE_2D,Li,0,0,Te.width,Te.height,Z,Te.data):n.compressedTexImage2D(o.TEXTURE_2D,Li,Ve,Te.width,Te.height,0,Te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qt?yi&&n.texSubImage2D(o.TEXTURE_2D,Li,0,0,Te.width,Te.height,Z,de,Te.data):n.texImage2D(o.TEXTURE_2D,Li,Ve,Te.width,Te.height,0,Z,de,Te.data)}else if(Pe.isDataArrayTexture)if(qt){if(Tt&&n.texStorage3D(o.TEXTURE_2D_ARRAY,un,Ve,Me.width,Me.height,Me.depth),yi)if(Pe.layerUpdates.size>0){const Li=dd(Me.width,Me.height,Pe.format,Pe.type);for(const $i of Pe.layerUpdates){const Vn=Me.data.subarray($i*Li/Me.data.BYTES_PER_ELEMENT,($i+1)*Li/Me.data.BYTES_PER_ELEMENT);n.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,$i,Me.width,Me.height,1,Z,de,Vn)}Pe.clearLayerUpdates()}else n.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,Z,de,Me.data)}else n.texImage3D(o.TEXTURE_2D_ARRAY,0,Ve,Me.width,Me.height,Me.depth,0,Z,de,Me.data);else if(Pe.isData3DTexture)qt?(Tt&&n.texStorage3D(o.TEXTURE_3D,un,Ve,Me.width,Me.height,Me.depth),yi&&n.texSubImage3D(o.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,Z,de,Me.data)):n.texImage3D(o.TEXTURE_3D,0,Ve,Me.width,Me.height,Me.depth,0,Z,de,Me.data);else if(Pe.isFramebufferTexture){if(Tt)if(qt)n.texStorage2D(o.TEXTURE_2D,un,Ve,Me.width,Me.height);else{let Li=Me.width,$i=Me.height;for(let Vn=0;Vn<un;Vn++)n.texImage2D(o.TEXTURE_2D,Vn,Ve,Li,$i,0,Z,de,null),Li>>=1,$i>>=1}}else if(Ze.length>0){if(qt&&Tt){const Li=bi(Ze[0]);n.texStorage2D(o.TEXTURE_2D,un,Ve,Li.width,Li.height)}for(let Li=0,$i=Ze.length;Li<$i;Li++)Te=Ze[Li],qt?yi&&n.texSubImage2D(o.TEXTURE_2D,Li,0,0,Z,de,Te):n.texImage2D(o.TEXTURE_2D,Li,Ve,Z,de,Te);Pe.generateMipmaps=!1}else if(qt){if(Tt){const Li=bi(Me);n.texStorage2D(o.TEXTURE_2D,un,Ve,Li.width,Li.height)}yi&&n.texSubImage2D(o.TEXTURE_2D,0,0,0,Z,de,Me)}else n.texImage2D(o.TEXTURE_2D,0,Ve,Z,de,Me);$(Pe)&&G(xt),Je.__version=Mt.version,Pe.onUpdate&&Pe.onUpdate(Pe)}Ge.__version=Pe.version}function It(Ge,Pe,ut,xt,ct,Mt){const Je=f.convert(ut.format,ut.colorSpace),Ut=f.convert(ut.type),we=X(ut.internalFormat,Je,Ut,ut.colorSpace);if(!c.get(Pe).__hasExternalTextures){const Re=Math.max(1,Pe.width>>Mt),Me=Math.max(1,Pe.height>>Mt);ct===o.TEXTURE_3D||ct===o.TEXTURE_2D_ARRAY?n.texImage3D(ct,Mt,we,Re,Me,Pe.depth,0,Je,Ut,null):n.texImage2D(ct,Mt,we,Re,Me,0,Je,Ut,null)}n.bindFramebuffer(o.FRAMEBUFFER,Ge),_t(Pe)?p.framebufferTexture2DMultisampleEXT(o.FRAMEBUFFER,xt,ct,c.get(ut).__webglTexture,0,Kt(Pe)):(ct===o.TEXTURE_2D||ct>=o.TEXTURE_CUBE_MAP_POSITIVE_X&&ct<=o.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&o.framebufferTexture2D(o.FRAMEBUFFER,xt,ct,c.get(ut).__webglTexture,Mt),n.bindFramebuffer(o.FRAMEBUFFER,null)}function Jt(Ge,Pe,ut){if(o.bindRenderbuffer(o.RENDERBUFFER,Ge),Pe.depthBuffer){const xt=Pe.depthTexture,ct=xt&&xt.isDepthTexture?xt.type:null,Mt=te(Pe.stencilBuffer,ct),Je=Pe.stencilBuffer?o.DEPTH_STENCIL_ATTACHMENT:o.DEPTH_ATTACHMENT,Ut=Kt(Pe);_t(Pe)?p.renderbufferStorageMultisampleEXT(o.RENDERBUFFER,Ut,Mt,Pe.width,Pe.height):ut?o.renderbufferStorageMultisample(o.RENDERBUFFER,Ut,Mt,Pe.width,Pe.height):o.renderbufferStorage(o.RENDERBUFFER,Mt,Pe.width,Pe.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,Je,o.RENDERBUFFER,Ge)}else{const xt=Pe.textures;for(let ct=0;ct<xt.length;ct++){const Mt=xt[ct],Je=f.convert(Mt.format,Mt.colorSpace),Ut=f.convert(Mt.type),we=X(Mt.internalFormat,Je,Ut,Mt.colorSpace),Re=Kt(Pe);ut&&_t(Pe)===!1?o.renderbufferStorageMultisample(o.RENDERBUFFER,Re,we,Pe.width,Pe.height):_t(Pe)?p.renderbufferStorageMultisampleEXT(o.RENDERBUFFER,Re,we,Pe.width,Pe.height):o.renderbufferStorage(o.RENDERBUFFER,we,Pe.width,Pe.height)}}o.bindRenderbuffer(o.RENDERBUFFER,null)}function jt(Ge){const Pe=c.get(Ge),ut=Ge.isWebGLCubeRenderTarget===!0;if(Pe.__boundDepthTexture!==Ge.depthTexture){const xt=Ge.depthTexture;if(Pe.__depthDisposeCallback&&Pe.__depthDisposeCallback(),xt){const ct=()=>{delete Pe.__boundDepthTexture,delete Pe.__depthDisposeCallback,xt.removeEventListener("dispose",ct)};xt.addEventListener("dispose",ct),Pe.__depthDisposeCallback=ct}Pe.__boundDepthTexture=xt}if(Ge.depthTexture&&!Pe.__autoAllocateDepthBuffer){if(ut)throw new Error("target.depthTexture not supported in Cube render targets");(function(xt,ct){if(ct&&ct.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(o.FRAMEBUFFER,xt),!ct.depthTexture||!ct.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");c.get(ct.depthTexture).__webglTexture&&ct.depthTexture.image.width===ct.width&&ct.depthTexture.image.height===ct.height||(ct.depthTexture.image.width=ct.width,ct.depthTexture.image.height=ct.height,ct.depthTexture.needsUpdate=!0),Ne(ct.depthTexture,0);const Mt=c.get(ct.depthTexture).__webglTexture,Je=Kt(ct);if(ct.depthTexture.format===Xa)_t(ct)?p.framebufferTexture2DMultisampleEXT(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,Mt,0,Je):o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,Mt,0);else{if(ct.depthTexture.format!==Er)throw new Error("Unknown depthTexture format");_t(ct)?p.framebufferTexture2DMultisampleEXT(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.TEXTURE_2D,Mt,0,Je):o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.TEXTURE_2D,Mt,0)}})(Pe.__webglFramebuffer,Ge)}else if(ut){Pe.__webglDepthbuffer=[];for(let xt=0;xt<6;xt++)if(n.bindFramebuffer(o.FRAMEBUFFER,Pe.__webglFramebuffer[xt]),Pe.__webglDepthbuffer[xt]===void 0)Pe.__webglDepthbuffer[xt]=o.createRenderbuffer(),Jt(Pe.__webglDepthbuffer[xt],Ge,!1);else{const ct=Ge.stencilBuffer?o.DEPTH_STENCIL_ATTACHMENT:o.DEPTH_ATTACHMENT,Mt=Pe.__webglDepthbuffer[xt];o.bindRenderbuffer(o.RENDERBUFFER,Mt),o.framebufferRenderbuffer(o.FRAMEBUFFER,ct,o.RENDERBUFFER,Mt)}}else if(n.bindFramebuffer(o.FRAMEBUFFER,Pe.__webglFramebuffer),Pe.__webglDepthbuffer===void 0)Pe.__webglDepthbuffer=o.createRenderbuffer(),Jt(Pe.__webglDepthbuffer,Ge,!1);else{const xt=Ge.stencilBuffer?o.DEPTH_STENCIL_ATTACHMENT:o.DEPTH_ATTACHMENT,ct=Pe.__webglDepthbuffer;o.bindRenderbuffer(o.RENDERBUFFER,ct),o.framebufferRenderbuffer(o.FRAMEBUFFER,xt,o.RENDERBUFFER,ct)}n.bindFramebuffer(o.FRAMEBUFFER,null)}const _i=[],xi=[];function Kt(Ge){return Math.min(h.maxSamples,Ge.samples)}function _t(Ge){const Pe=c.get(Ge);return Ge.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Pe.__useRenderToTexture!==!1}function hi(Ge,Pe){const ut=Ge.colorSpace,xt=Ge.format,ct=Ge.type;return Ge.isCompressedTexture===!0||Ge.isVideoTexture===!0||ut!==bs&&ut!==fc&&(Qr.getTransfer(ut)===Is?xt===fn&&ct===Qi||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ut)),Pe}function bi(Ge){return typeof HTMLImageElement<"u"&&Ge instanceof HTMLImageElement?(w.width=Ge.naturalWidth||Ge.width,w.height=Ge.naturalHeight||Ge.height):typeof VideoFrame<"u"&&Ge instanceof VideoFrame?(w.width=Ge.displayWidth,w.height=Ge.displayHeight):(w.width=Ge.width,w.height=Ge.height),w}this.allocateTextureUnit=function(){const Ge=De;return Ge>=h.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Ge+" texture units while this GPU supports only "+h.maxTextures),De+=1,Ge},this.resetTextureUnits=function(){De=0},this.setTexture2D=Ne,this.setTexture2DArray=function(Ge,Pe){const ut=c.get(Ge);Ge.version>0&&ut.__version!==Ge.version?mt(ut,Ge,Pe):n.bindTexture(o.TEXTURE_2D_ARRAY,ut.__webglTexture,o.TEXTURE0+Pe)},this.setTexture3D=function(Ge,Pe){const ut=c.get(Ge);Ge.version>0&&ut.__version!==Ge.version?mt(ut,Ge,Pe):n.bindTexture(o.TEXTURE_3D,ut.__webglTexture,o.TEXTURE0+Pe)},this.setTextureCube=function(Ge,Pe){const ut=c.get(Ge);Ge.version>0&&ut.__version!==Ge.version?function(xt,ct,Mt){if(ct.image.length!==6)return;const Je=st(xt,ct),Ut=ct.source;n.bindTexture(o.TEXTURE_CUBE_MAP,xt.__webglTexture,o.TEXTURE0+Mt);const we=c.get(Ut);if(Ut.version!==we.__version||Je===!0){n.activeTexture(o.TEXTURE0+Mt);const Re=Qr.getPrimaries(Qr.workingColorSpace),Me=ct.colorSpace===fc?null:Qr.getPrimaries(ct.colorSpace),Z=ct.colorSpace===fc||Re===Me?o.NONE:o.BROWSER_DEFAULT_WEBGL;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,ct.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ct.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,ct.unpackAlignment),o.pixelStorei(o.UNPACK_COLORSPACE_CONVERSION_WEBGL,Z);const de=ct.isCompressedTexture||ct.image[0].isCompressedTexture,Te=ct.image[0]&&ct.image[0].isDataTexture,Ve=[];for(let ji=0;ji<6;ji++)Ve[ji]=de||Te?Te?ct.image[ji].image:ct.image[ji]:V(ct.image[ji],!0,h.maxCubemapSize),Ve[ji]=hi(ct,Ve[ji]);const Ze=Ve[0],qt=f.convert(ct.format,ct.colorSpace),Tt=f.convert(ct.type),yi=X(ct.internalFormat,qt,Tt,ct.colorSpace),un=ct.isVideoTexture!==!0,Li=we.__version===void 0||Je===!0,$i=Ut.dataReady;let Vn,hn=ae(ct,Ze);if(nt(o.TEXTURE_CUBE_MAP,ct),de){un&&Li&&n.texStorage2D(o.TEXTURE_CUBE_MAP,hn,yi,Ze.width,Ze.height);for(let ji=0;ji<6;ji++){Vn=Ve[ji].mipmaps;for(let Bn=0;Bn<Vn.length;Bn++){const es=Vn[Bn];ct.format!==fn?qt!==null?un?$i&&n.compressedTexSubImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn,0,0,es.width,es.height,qt,es.data):n.compressedTexImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn,yi,es.width,es.height,0,es.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):un?$i&&n.texSubImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn,0,0,es.width,es.height,qt,Tt,es.data):n.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn,yi,es.width,es.height,0,qt,Tt,es.data)}}}else{if(Vn=ct.mipmaps,un&&Li){Vn.length>0&&hn++;const ji=bi(Ve[0]);n.texStorage2D(o.TEXTURE_CUBE_MAP,hn,yi,ji.width,ji.height)}for(let ji=0;ji<6;ji++)if(Te){un?$i&&n.texSubImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,0,0,0,Ve[ji].width,Ve[ji].height,qt,Tt,Ve[ji].data):n.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,0,yi,Ve[ji].width,Ve[ji].height,0,qt,Tt,Ve[ji].data);for(let Bn=0;Bn<Vn.length;Bn++){const es=Vn[Bn].image[ji].image;un?$i&&n.texSubImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn+1,0,0,es.width,es.height,qt,Tt,es.data):n.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn+1,yi,es.width,es.height,0,qt,Tt,es.data)}}else{un?$i&&n.texSubImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,0,0,0,qt,Tt,Ve[ji]):n.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,0,yi,qt,Tt,Ve[ji]);for(let Bn=0;Bn<Vn.length;Bn++){const es=Vn[Bn];un?$i&&n.texSubImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn+1,0,0,qt,Tt,es.image[ji]):n.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+ji,Bn+1,yi,qt,Tt,es.image[ji])}}}$(ct)&&G(o.TEXTURE_CUBE_MAP),we.__version=Ut.version,ct.onUpdate&&ct.onUpdate(ct)}xt.__version=ct.version}(ut,Ge,Pe):n.bindTexture(o.TEXTURE_CUBE_MAP,ut.__webglTexture,o.TEXTURE0+Pe)},this.rebindTextures=function(Ge,Pe,ut){const xt=c.get(Ge);Pe!==void 0&&It(xt.__webglFramebuffer,Ge,Ge.texture,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,0),ut!==void 0&&jt(Ge)},this.setupRenderTarget=function(Ge){const Pe=Ge.texture,ut=c.get(Ge),xt=c.get(Pe);Ge.addEventListener("dispose",Ae);const ct=Ge.textures,Mt=Ge.isWebGLCubeRenderTarget===!0,Je=ct.length>1;if(Je||(xt.__webglTexture===void 0&&(xt.__webglTexture=o.createTexture()),xt.__version=Pe.version,d.memory.textures++),Mt){ut.__webglFramebuffer=[];for(let Ut=0;Ut<6;Ut++)if(Pe.mipmaps&&Pe.mipmaps.length>0){ut.__webglFramebuffer[Ut]=[];for(let we=0;we<Pe.mipmaps.length;we++)ut.__webglFramebuffer[Ut][we]=o.createFramebuffer()}else ut.__webglFramebuffer[Ut]=o.createFramebuffer()}else{if(Pe.mipmaps&&Pe.mipmaps.length>0){ut.__webglFramebuffer=[];for(let Ut=0;Ut<Pe.mipmaps.length;Ut++)ut.__webglFramebuffer[Ut]=o.createFramebuffer()}else ut.__webglFramebuffer=o.createFramebuffer();if(Je)for(let Ut=0,we=ct.length;Ut<we;Ut++){const Re=c.get(ct[Ut]);Re.__webglTexture===void 0&&(Re.__webglTexture=o.createTexture(),d.memory.textures++)}if(Ge.samples>0&&_t(Ge)===!1){ut.__webglMultisampledFramebuffer=o.createFramebuffer(),ut.__webglColorRenderbuffer=[],n.bindFramebuffer(o.FRAMEBUFFER,ut.__webglMultisampledFramebuffer);for(let Ut=0;Ut<ct.length;Ut++){const we=ct[Ut];ut.__webglColorRenderbuffer[Ut]=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,ut.__webglColorRenderbuffer[Ut]);const Re=f.convert(we.format,we.colorSpace),Me=f.convert(we.type),Z=X(we.internalFormat,Re,Me,we.colorSpace,Ge.isXRRenderTarget===!0),de=Kt(Ge);o.renderbufferStorageMultisample(o.RENDERBUFFER,de,Z,Ge.width,Ge.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+Ut,o.RENDERBUFFER,ut.__webglColorRenderbuffer[Ut])}o.bindRenderbuffer(o.RENDERBUFFER,null),Ge.depthBuffer&&(ut.__webglDepthRenderbuffer=o.createRenderbuffer(),Jt(ut.__webglDepthRenderbuffer,Ge,!0)),n.bindFramebuffer(o.FRAMEBUFFER,null)}}if(Mt){n.bindTexture(o.TEXTURE_CUBE_MAP,xt.__webglTexture),nt(o.TEXTURE_CUBE_MAP,Pe);for(let Ut=0;Ut<6;Ut++)if(Pe.mipmaps&&Pe.mipmaps.length>0)for(let we=0;we<Pe.mipmaps.length;we++)It(ut.__webglFramebuffer[Ut][we],Ge,Pe,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+Ut,we);else It(ut.__webglFramebuffer[Ut],Ge,Pe,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+Ut,0);$(Pe)&&G(o.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Je){for(let Ut=0,we=ct.length;Ut<we;Ut++){const Re=ct[Ut],Me=c.get(Re);n.bindTexture(o.TEXTURE_2D,Me.__webglTexture),nt(o.TEXTURE_2D,Re),It(ut.__webglFramebuffer,Ge,Re,o.COLOR_ATTACHMENT0+Ut,o.TEXTURE_2D,0),$(Re)&&G(o.TEXTURE_2D)}n.unbindTexture()}else{let Ut=o.TEXTURE_2D;if((Ge.isWebGL3DRenderTarget||Ge.isWebGLArrayRenderTarget)&&(Ut=Ge.isWebGL3DRenderTarget?o.TEXTURE_3D:o.TEXTURE_2D_ARRAY),n.bindTexture(Ut,xt.__webglTexture),nt(Ut,Pe),Pe.mipmaps&&Pe.mipmaps.length>0)for(let we=0;we<Pe.mipmaps.length;we++)It(ut.__webglFramebuffer[we],Ge,Pe,o.COLOR_ATTACHMENT0,Ut,we);else It(ut.__webglFramebuffer,Ge,Pe,o.COLOR_ATTACHMENT0,Ut,0);$(Pe)&&G(Ut),n.unbindTexture()}Ge.depthBuffer&&jt(Ge)},this.updateRenderTargetMipmap=function(Ge){const Pe=Ge.textures;for(let ut=0,xt=Pe.length;ut<xt;ut++){const ct=Pe[ut];if($(ct)){const Mt=Ge.isWebGLCubeRenderTarget?o.TEXTURE_CUBE_MAP:o.TEXTURE_2D,Je=c.get(ct).__webglTexture;n.bindTexture(Mt,Je),G(Mt),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(Ge){if(Ge.samples>0){if(_t(Ge)===!1){const Pe=Ge.textures,ut=Ge.width,xt=Ge.height;let ct=o.COLOR_BUFFER_BIT;const Mt=Ge.stencilBuffer?o.DEPTH_STENCIL_ATTACHMENT:o.DEPTH_ATTACHMENT,Je=c.get(Ge),Ut=Pe.length>1;if(Ut)for(let we=0;we<Pe.length;we++)n.bindFramebuffer(o.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+we,o.RENDERBUFFER,null),n.bindFramebuffer(o.FRAMEBUFFER,Je.__webglFramebuffer),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0+we,o.TEXTURE_2D,null,0);n.bindFramebuffer(o.READ_FRAMEBUFFER,Je.__webglMultisampledFramebuffer),n.bindFramebuffer(o.DRAW_FRAMEBUFFER,Je.__webglFramebuffer);for(let we=0;we<Pe.length;we++){if(Ge.resolveDepthBuffer&&(Ge.depthBuffer&&(ct|=o.DEPTH_BUFFER_BIT),Ge.stencilBuffer&&Ge.resolveStencilBuffer&&(ct|=o.STENCIL_BUFFER_BIT)),Ut){o.framebufferRenderbuffer(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,Je.__webglColorRenderbuffer[we]);const Re=c.get(Pe[we]).__webglTexture;o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,Re,0)}o.blitFramebuffer(0,0,ut,xt,0,0,ut,xt,ct,o.NEAREST),v===!0&&(_i.length=0,xi.length=0,_i.push(o.COLOR_ATTACHMENT0+we),Ge.depthBuffer&&Ge.resolveDepthBuffer===!1&&(_i.push(Mt),xi.push(Mt),o.invalidateFramebuffer(o.DRAW_FRAMEBUFFER,xi)),o.invalidateFramebuffer(o.READ_FRAMEBUFFER,_i))}if(n.bindFramebuffer(o.READ_FRAMEBUFFER,null),n.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),Ut)for(let we=0;we<Pe.length;we++){n.bindFramebuffer(o.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+we,o.RENDERBUFFER,Je.__webglColorRenderbuffer[we]);const Re=c.get(Pe[we]).__webglTexture;n.bindFramebuffer(o.FRAMEBUFFER,Je.__webglFramebuffer),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0+we,o.TEXTURE_2D,Re,0)}n.bindFramebuffer(o.DRAW_FRAMEBUFFER,Je.__webglMultisampledFramebuffer)}else if(Ge.depthBuffer&&Ge.resolveDepthBuffer===!1&&v){const Pe=Ge.stencilBuffer?o.DEPTH_STENCIL_ATTACHMENT:o.DEPTH_ATTACHMENT;o.invalidateFramebuffer(o.DRAW_FRAMEBUFFER,[Pe])}}},this.setupDepthRenderbuffer=jt,this.setupFrameBufferTexture=It,this.useMultisampledRTT=_t}function bx(o,t){return{convert:function(n,c=""){let h;const f=Qr.getTransfer(c);if(n===Qi)return o.UNSIGNED_BYTE;if(n===ar)return o.UNSIGNED_SHORT_4_4_4_4;if(n===Wo)return o.UNSIGNED_SHORT_5_5_5_1;if(n===35902)return o.UNSIGNED_INT_5_9_9_9_REV;if(n===Wn)return o.BYTE;if(n===Cr)return o.SHORT;if(n===Yr)return o.UNSIGNED_SHORT;if(n===sr)return o.INT;if(n===xn)return o.UNSIGNED_INT;if(n===Xi)return o.FLOAT;if(n===jn)return o.HALF_FLOAT;if(n===1021)return o.ALPHA;if(n===1022)return o.RGB;if(n===fn)return o.RGBA;if(n===1024)return o.LUMINANCE;if(n===1025)return o.LUMINANCE_ALPHA;if(n===Xa)return o.DEPTH_COMPONENT;if(n===Er)return o.DEPTH_STENCIL;if(n===Ss)return o.RED;if(n===Qs)return o.RED_INTEGER;if(n===ns)return o.RG;if(n===So)return o.RG_INTEGER;if(n===Ya)return o.RGBA_INTEGER;if(n===aa||n===zc||n===_u||n===Wh)if(f===Is){if(h=t.get("WEBGL_compressed_texture_s3tc_srgb"),h===null)return null;if(n===aa)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===zc)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===_u)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Wh)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(h=t.get("WEBGL_compressed_texture_s3tc"),h===null)return null;if(n===aa)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===zc)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===_u)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Wh)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===jh||n===kA||n===th||n===LA){if(h=t.get("WEBGL_compressed_texture_pvrtc"),h===null)return null;if(n===jh)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===kA)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===th)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===LA)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ih||n===pc||n===vu){if(h=t.get("WEBGL_compressed_texture_etc"),h===null)return null;if(n===ih||n===pc)return f===Is?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(n===vu)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ja||n===PA||n===Uf||n===Kh||n===jo||n===$d||n===yu||n===ml||n===nh||n===_l||n===_p||n===Xh||n===Hl||n===bu){if(h=t.get("WEBGL_compressed_texture_astc"),h===null)return null;if(n===Ja)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===PA)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Uf)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Kh)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===jo)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===$d)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===yu)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ml)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===nh)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===_l)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===_p)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Xh)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Hl)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===bu)return f===Is?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Uo||n===vl||n===Yh){if(h=t.get("EXT_texture_compression_bptc"),h===null)return null;if(n===Uo)return f===Is?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===vl)return h.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Yh)return h.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===36283||n===ko||n===la||n===Jh){if(h=t.get("EXT_texture_compression_rgtc"),h===null)return null;if(n===Uo)return h.COMPRESSED_RED_RGTC1_EXT;if(n===ko)return h.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===la)return h.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Jh)return h.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ua?o.UNSIGNED_INT_24_8:o[n]!==void 0?o[n]:null}}}class Ru extends zs{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class mh extends gn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zf={type:"move"};class _h{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ke,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ke),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ke,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ke),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const c of t.hand.values())this._getHandJoint(n,c)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,n,c){let h=null,f=null,d=null;const p=this._targetRay,v=this._grip,w=this._hand;if(t&&n.session.visibilityState!=="visible-blurred"){if(w&&t.hand){d=!0;for(const V of t.hand.values()){const $=n.getJointPose(V,c),G=this._getHandJoint(w,V);$!==null&&(G.matrix.fromArray($.transform.matrix),G.matrix.decompose(G.position,G.rotation,G.scale),G.matrixWorldNeedsUpdate=!0,G.jointRadius=$.radius),G.visible=$!==null}const S=w.joints["index-finger-tip"],B=w.joints["thumb-tip"],R=S.position.distanceTo(B.position),D=.02,O=.005;w.inputState.pinching&&R>D+O?(w.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!w.inputState.pinching&&R<=D-O&&(w.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else v!==null&&t.gripSpace&&(f=n.getPose(t.gripSpace,c),f!==null&&(v.matrix.fromArray(f.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,f.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(f.linearVelocity)):v.hasLinearVelocity=!1,f.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(f.angularVelocity)):v.hasAngularVelocity=!1));p!==null&&(h=n.getPose(t.targetRaySpace,c),h===null&&f!==null&&(h=f),h!==null&&(p.matrix.fromArray(h.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,h.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(h.linearVelocity)):p.hasLinearVelocity=!1,h.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(h.angularVelocity)):p.hasAngularVelocity=!1,this.dispatchEvent(Zf)))}return p!==null&&(p.visible=h!==null),v!==null&&(v.visible=f!==null),w!==null&&(w.visible=d!==null),this}_getHandJoint(t,n){if(t.joints[n.jointName]===void 0){const c=new mh;c.matrixAutoUpdate=!1,c.visible=!1,t.joints[n.jointName]=c,t.add(c)}return t.joints[n.jointName]}}class Ts{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,n,c){if(this.texture===null){const h=new Sr;t.properties.get(h).__webglTexture=n.texture,n.depthNear==c.depthNear&&n.depthFar==c.depthFar||(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=h}}getMesh(t){if(this.texture!==null&&this.mesh===null){const n=t.cameras[0].viewport,c=new jl({vertexShader:`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fragmentShader:`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new As(new Qa(20,20),c)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class M_ extends qc{constructor(t,n){super();const c=this;let h=null,f=1,d=null,p="local-floor",v=1,w=null,S=null,B=null,R=null,D=null,O=null;const V=new Ts,$=n.getContextAttributes();let G=null,X=null;const te=[],ae=[],oe=new Cn;let Ae=null;const ve=new zs;ve.layers.enable(1),ve.viewport=new Fr;const De=new zs;De.layers.enable(2),De.viewport=new Fr;const Ne=[ve,De],We=new Ru;We.layers.enable(1),We.layers.enable(2);let vt=null,ot=null;function nt(Kt){const _t=ae.indexOf(Kt.inputSource);if(_t===-1)return;const hi=te[_t];hi!==void 0&&(hi.update(Kt.inputSource,Kt.frame,w||d),hi.dispatchEvent({type:Kt.type,data:Kt.inputSource}))}function st(){h.removeEventListener("select",nt),h.removeEventListener("selectstart",nt),h.removeEventListener("selectend",nt),h.removeEventListener("squeeze",nt),h.removeEventListener("squeezestart",nt),h.removeEventListener("squeezeend",nt),h.removeEventListener("end",st),h.removeEventListener("inputsourceschange",mt);for(let Kt=0;Kt<te.length;Kt++){const _t=ae[Kt];_t!==null&&(ae[Kt]=null,te[Kt].disconnect(_t))}vt=null,ot=null,V.reset(),t.setRenderTarget(G),D=null,R=null,B=null,h=null,X=null,xi.stop(),c.isPresenting=!1,t.setPixelRatio(Ae),t.setSize(oe.width,oe.height,!1),c.dispatchEvent({type:"sessionend"})}function mt(Kt){for(let _t=0;_t<Kt.removed.length;_t++){const hi=Kt.removed[_t],bi=ae.indexOf(hi);bi>=0&&(ae[bi]=null,te[bi].disconnect(hi))}for(let _t=0;_t<Kt.added.length;_t++){const hi=Kt.added[_t];let bi=ae.indexOf(hi);if(bi===-1){for(let Pe=0;Pe<te.length;Pe++){if(Pe>=ae.length){ae.push(hi),bi=Pe;break}if(ae[Pe]===null){ae[Pe]=hi,bi=Pe;break}}if(bi===-1)break}const Ge=te[bi];Ge&&Ge.connect(hi)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Kt){let _t=te[Kt];return _t===void 0&&(_t=new _h,te[Kt]=_t),_t.getTargetRaySpace()},this.getControllerGrip=function(Kt){let _t=te[Kt];return _t===void 0&&(_t=new _h,te[Kt]=_t),_t.getGripSpace()},this.getHand=function(Kt){let _t=te[Kt];return _t===void 0&&(_t=new _h,te[Kt]=_t),_t.getHandSpace()},this.setFramebufferScaleFactor=function(Kt){f=Kt,c.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Kt){p=Kt,c.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return w||d},this.setReferenceSpace=function(Kt){w=Kt},this.getBaseLayer=function(){return R!==null?R:D},this.getBinding=function(){return B},this.getFrame=function(){return O},this.getSession=function(){return h},this.setSession=async function(Kt){if(h=Kt,h!==null){if(G=t.getRenderTarget(),h.addEventListener("select",nt),h.addEventListener("selectstart",nt),h.addEventListener("selectend",nt),h.addEventListener("squeeze",nt),h.addEventListener("squeezestart",nt),h.addEventListener("squeezeend",nt),h.addEventListener("end",st),h.addEventListener("inputsourceschange",mt),$.xrCompatible!==!0&&await n.makeXRCompatible(),Ae=t.getPixelRatio(),t.getSize(oe),h.renderState.layers===void 0){const _t={antialias:$.antialias,alpha:!0,depth:$.depth,stencil:$.stencil,framebufferScaleFactor:f};D=new XRWebGLLayer(h,n,_t),h.updateRenderState({baseLayer:D}),t.setPixelRatio(1),t.setSize(D.framebufferWidth,D.framebufferHeight,!1),X=new Io(D.framebufferWidth,D.framebufferHeight,{format:fn,type:Qi,colorSpace:t.outputColorSpace,stencilBuffer:$.stencil})}else{let _t=null,hi=null,bi=null;$.depth&&(bi=$.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,_t=$.stencil?Er:Xa,hi=$.stencil?Ua:xn);const Ge={colorFormat:n.RGBA8,depthFormat:bi,scaleFactor:f};B=new XRWebGLBinding(h,n),R=B.createProjectionLayer(Ge),h.updateRenderState({layers:[R]}),t.setPixelRatio(1),t.setSize(R.textureWidth,R.textureHeight,!1),X=new Io(R.textureWidth,R.textureHeight,{format:fn,type:Qi,depthTexture:new m_(R.textureWidth,R.textureHeight,hi,void 0,void 0,void 0,void 0,void 0,void 0,_t),stencilBuffer:$.stencil,colorSpace:t.outputColorSpace,samples:$.antialias?4:0,resolveDepthBuffer:R.ignoreDepthValues===!1})}X.isXRRenderTarget=!0,this.setFoveation(v),w=null,d=await h.requestReferenceSpace(p),xi.setContext(h),xi.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(h!==null)return h.environmentBlendMode},this.getDepthTexture=function(){return V.getDepthTexture()};const It=new Ke,Jt=new Ke;function jt(Kt,_t){_t===null?Kt.matrixWorld.copy(Kt.matrix):Kt.matrixWorld.multiplyMatrices(_t.matrixWorld,Kt.matrix),Kt.matrixWorldInverse.copy(Kt.matrixWorld).invert()}this.updateCamera=function(Kt){if(h===null)return;let _t=Kt.near,hi=Kt.far;V.texture!==null&&(V.depthNear>0&&(_t=V.depthNear),V.depthFar>0&&(hi=V.depthFar)),We.near=De.near=ve.near=_t,We.far=De.far=ve.far=hi,vt===We.near&&ot===We.far||(h.updateRenderState({depthNear:We.near,depthFar:We.far}),vt=We.near,ot=We.far);const bi=Kt.parent,Ge=We.cameras;jt(We,bi);for(let ct=0;ct<Ge.length;ct++)jt(Ge[ct],bi);var Pe,ut,xt;Ge.length===2?function(ct,Mt,Je){It.setFromMatrixPosition(Mt.matrixWorld),Jt.setFromMatrixPosition(Je.matrixWorld);const Ut=It.distanceTo(Jt),we=Mt.projectionMatrix.elements,Re=Je.projectionMatrix.elements,Me=we[14]/(we[10]-1),Z=we[14]/(we[10]+1),de=(we[9]+1)/we[5],Te=(we[9]-1)/we[5],Ve=(we[8]-1)/we[0],Ze=(Re[8]+1)/Re[0],qt=Me*Ve,Tt=Me*Ze,yi=Ut/(-Ve+Ze),un=yi*-Ve;if(Mt.matrixWorld.decompose(ct.position,ct.quaternion,ct.scale),ct.translateX(un),ct.translateZ(yi),ct.matrixWorld.compose(ct.position,ct.quaternion,ct.scale),ct.matrixWorldInverse.copy(ct.matrixWorld).invert(),we[10]===-1)ct.projectionMatrix.copy(Mt.projectionMatrix),ct.projectionMatrixInverse.copy(Mt.projectionMatrixInverse);else{const Li=Me+yi,$i=Z+yi,Vn=qt-un,hn=Tt+(Ut-un),ji=de*Z/$i*Li,Bn=Te*Z/$i*Li;ct.projectionMatrix.makePerspective(Vn,hn,ji,Bn,Li,$i),ct.projectionMatrixInverse.copy(ct.projectionMatrix).invert()}}(We,ve,De):We.projectionMatrix.copy(ve.projectionMatrix),Pe=Kt,ut=We,(xt=bi)===null?Pe.matrix.copy(ut.matrixWorld):(Pe.matrix.copy(xt.matrixWorld),Pe.matrix.invert(),Pe.matrix.multiply(ut.matrixWorld)),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.updateMatrixWorld(!0),Pe.projectionMatrix.copy(ut.projectionMatrix),Pe.projectionMatrixInverse.copy(ut.projectionMatrixInverse),Pe.isPerspectiveCamera&&(Pe.fov=2*oh*Math.atan(1/Pe.projectionMatrix.elements[5]),Pe.zoom=1)},this.getCamera=function(){return We},this.getFoveation=function(){if(R!==null||D!==null)return v},this.setFoveation=function(Kt){v=Kt,R!==null&&(R.fixedFoveation=Kt),D!==null&&D.fixedFoveation!==void 0&&(D.fixedFoveation=Kt)},this.hasDepthSensing=function(){return V.texture!==null},this.getDepthSensingMesh=function(){return V.getMesh(We)};let _i=null;const xi=new $A;xi.setAnimationLoop(function(Kt,_t){if(S=_t.getViewerPose(w||d),O=_t,S!==null){const hi=S.views;D!==null&&(t.setRenderTargetFramebuffer(X,D.framebuffer),t.setRenderTarget(X));let bi=!1;hi.length!==We.cameras.length&&(We.cameras.length=0,bi=!0);for(let Pe=0;Pe<hi.length;Pe++){const ut=hi[Pe];let xt=null;if(D!==null)xt=D.getViewport(ut);else{const Mt=B.getViewSubImage(R,ut);xt=Mt.viewport,Pe===0&&(t.setRenderTargetTextures(X,Mt.colorTexture,R.ignoreDepthValues?void 0:Mt.depthStencilTexture),t.setRenderTarget(X))}let ct=Ne[Pe];ct===void 0&&(ct=new zs,ct.layers.enable(Pe),ct.viewport=new Fr,Ne[Pe]=ct),ct.matrix.fromArray(ut.transform.matrix),ct.matrix.decompose(ct.position,ct.quaternion,ct.scale),ct.projectionMatrix.fromArray(ut.projectionMatrix),ct.projectionMatrixInverse.copy(ct.projectionMatrix).invert(),ct.viewport.set(xt.x,xt.y,xt.width,xt.height),Pe===0&&(We.matrix.copy(ct.matrix),We.matrix.decompose(We.position,We.quaternion,We.scale)),bi===!0&&We.cameras.push(ct)}const Ge=h.enabledFeatures;if(Ge&&Ge.includes("depth-sensing")){const Pe=B.getDepthInformation(hi[0]);Pe&&Pe.isValid&&Pe.texture&&V.init(t,Pe,h.renderState)}}for(let hi=0;hi<te.length;hi++){const bi=ae[hi],Ge=te[hi];bi!==null&&Ge!==void 0&&Ge.update(bi,_t,w||d)}_i&&_i(Kt,_t),_t.detectedPlanes&&c.dispatchEvent({type:"planesdetected",data:_t}),O=null}),this.setAnimationLoop=function(Kt){_i=Kt},this.dispose=function(){}}}const Du=new Za,Bb=new nn;function sA(o,t){function n(h,f){h.matrixAutoUpdate===!0&&h.updateMatrix(),f.value.copy(h.matrix)}function c(h,f){h.opacity.value=f.opacity,f.color&&h.diffuse.value.copy(f.color),f.emissive&&h.emissive.value.copy(f.emissive).multiplyScalar(f.emissiveIntensity),f.map&&(h.map.value=f.map,n(f.map,h.mapTransform)),f.alphaMap&&(h.alphaMap.value=f.alphaMap,n(f.alphaMap,h.alphaMapTransform)),f.bumpMap&&(h.bumpMap.value=f.bumpMap,n(f.bumpMap,h.bumpMapTransform),h.bumpScale.value=f.bumpScale,f.side===1&&(h.bumpScale.value*=-1)),f.normalMap&&(h.normalMap.value=f.normalMap,n(f.normalMap,h.normalMapTransform),h.normalScale.value.copy(f.normalScale),f.side===1&&h.normalScale.value.negate()),f.displacementMap&&(h.displacementMap.value=f.displacementMap,n(f.displacementMap,h.displacementMapTransform),h.displacementScale.value=f.displacementScale,h.displacementBias.value=f.displacementBias),f.emissiveMap&&(h.emissiveMap.value=f.emissiveMap,n(f.emissiveMap,h.emissiveMapTransform)),f.specularMap&&(h.specularMap.value=f.specularMap,n(f.specularMap,h.specularMapTransform)),f.alphaTest>0&&(h.alphaTest.value=f.alphaTest);const d=t.get(f),p=d.envMap,v=d.envMapRotation;p&&(h.envMap.value=p,Du.copy(v),Du.x*=-1,Du.y*=-1,Du.z*=-1,p.isCubeTexture&&p.isRenderTargetTexture===!1&&(Du.y*=-1,Du.z*=-1),h.envMapRotation.value.setFromMatrix4(Bb.makeRotationFromEuler(Du)),h.flipEnvMap.value=p.isCubeTexture&&p.isRenderTargetTexture===!1?-1:1,h.reflectivity.value=f.reflectivity,h.ior.value=f.ior,h.refractionRatio.value=f.refractionRatio),f.lightMap&&(h.lightMap.value=f.lightMap,h.lightMapIntensity.value=f.lightMapIntensity,n(f.lightMap,h.lightMapTransform)),f.aoMap&&(h.aoMap.value=f.aoMap,h.aoMapIntensity.value=f.aoMapIntensity,n(f.aoMap,h.aoMapTransform))}return{refreshFogUniforms:function(h,f){f.color.getRGB(h.fogColor.value,dh(o)),f.isFog?(h.fogNear.value=f.near,h.fogFar.value=f.far):f.isFogExp2&&(h.fogDensity.value=f.density)},refreshMaterialUniforms:function(h,f,d,p,v){var w,S;f.isMeshBasicMaterial||f.isMeshLambertMaterial?c(h,f):f.isMeshToonMaterial?(c(h,f),w=h,(S=f).gradientMap&&(w.gradientMap.value=S.gradientMap)):f.isMeshPhongMaterial?(c(h,f),function(B,R){B.specular.value.copy(R.specular),B.shininess.value=Math.max(R.shininess,1e-4)}(h,f)):f.isMeshStandardMaterial?(c(h,f),function(B,R){B.metalness.value=R.metalness,R.metalnessMap&&(B.metalnessMap.value=R.metalnessMap,n(R.metalnessMap,B.metalnessMapTransform)),B.roughness.value=R.roughness,R.roughnessMap&&(B.roughnessMap.value=R.roughnessMap,n(R.roughnessMap,B.roughnessMapTransform)),R.envMap&&(B.envMapIntensity.value=R.envMapIntensity)}(h,f),f.isMeshPhysicalMaterial&&function(B,R,D){B.ior.value=R.ior,R.sheen>0&&(B.sheenColor.value.copy(R.sheenColor).multiplyScalar(R.sheen),B.sheenRoughness.value=R.sheenRoughness,R.sheenColorMap&&(B.sheenColorMap.value=R.sheenColorMap,n(R.sheenColorMap,B.sheenColorMapTransform)),R.sheenRoughnessMap&&(B.sheenRoughnessMap.value=R.sheenRoughnessMap,n(R.sheenRoughnessMap,B.sheenRoughnessMapTransform))),R.clearcoat>0&&(B.clearcoat.value=R.clearcoat,B.clearcoatRoughness.value=R.clearcoatRoughness,R.clearcoatMap&&(B.clearcoatMap.value=R.clearcoatMap,n(R.clearcoatMap,B.clearcoatMapTransform)),R.clearcoatRoughnessMap&&(B.clearcoatRoughnessMap.value=R.clearcoatRoughnessMap,n(R.clearcoatRoughnessMap,B.clearcoatRoughnessMapTransform)),R.clearcoatNormalMap&&(B.clearcoatNormalMap.value=R.clearcoatNormalMap,n(R.clearcoatNormalMap,B.clearcoatNormalMapTransform),B.clearcoatNormalScale.value.copy(R.clearcoatNormalScale),R.side===1&&B.clearcoatNormalScale.value.negate())),R.dispersion>0&&(B.dispersion.value=R.dispersion),R.iridescence>0&&(B.iridescence.value=R.iridescence,B.iridescenceIOR.value=R.iridescenceIOR,B.iridescenceThicknessMinimum.value=R.iridescenceThicknessRange[0],B.iridescenceThicknessMaximum.value=R.iridescenceThicknessRange[1],R.iridescenceMap&&(B.iridescenceMap.value=R.iridescenceMap,n(R.iridescenceMap,B.iridescenceMapTransform)),R.iridescenceThicknessMap&&(B.iridescenceThicknessMap.value=R.iridescenceThicknessMap,n(R.iridescenceThicknessMap,B.iridescenceThicknessMapTransform))),R.transmission>0&&(B.transmission.value=R.transmission,B.transmissionSamplerMap.value=D.texture,B.transmissionSamplerSize.value.set(D.width,D.height),R.transmissionMap&&(B.transmissionMap.value=R.transmissionMap,n(R.transmissionMap,B.transmissionMapTransform)),B.thickness.value=R.thickness,R.thicknessMap&&(B.thicknessMap.value=R.thicknessMap,n(R.thicknessMap,B.thicknessMapTransform)),B.attenuationDistance.value=R.attenuationDistance,B.attenuationColor.value.copy(R.attenuationColor)),R.anisotropy>0&&(B.anisotropyVector.value.set(R.anisotropy*Math.cos(R.anisotropyRotation),R.anisotropy*Math.sin(R.anisotropyRotation)),R.anisotropyMap&&(B.anisotropyMap.value=R.anisotropyMap,n(R.anisotropyMap,B.anisotropyMapTransform))),B.specularIntensity.value=R.specularIntensity,B.specularColor.value.copy(R.specularColor),R.specularColorMap&&(B.specularColorMap.value=R.specularColorMap,n(R.specularColorMap,B.specularColorMapTransform)),R.specularIntensityMap&&(B.specularIntensityMap.value=R.specularIntensityMap,n(R.specularIntensityMap,B.specularIntensityMapTransform))}(h,f,v)):f.isMeshMatcapMaterial?(c(h,f),function(B,R){R.matcap&&(B.matcap.value=R.matcap)}(h,f)):f.isMeshDepthMaterial?c(h,f):f.isMeshDistanceMaterial?(c(h,f),function(B,R){const D=t.get(R).light;B.referencePosition.value.setFromMatrixPosition(D.matrixWorld),B.nearDistance.value=D.shadow.camera.near,B.farDistance.value=D.shadow.camera.far}(h,f)):f.isMeshNormalMaterial?c(h,f):f.isLineBasicMaterial?(function(B,R){B.diffuse.value.copy(R.color),B.opacity.value=R.opacity,R.map&&(B.map.value=R.map,n(R.map,B.mapTransform))}(h,f),f.isLineDashedMaterial&&function(B,R){B.dashSize.value=R.dashSize,B.totalSize.value=R.dashSize+R.gapSize,B.scale.value=R.scale}(h,f)):f.isPointsMaterial?function(B,R,D,O){B.diffuse.value.copy(R.color),B.opacity.value=R.opacity,B.size.value=R.size*D,B.scale.value=.5*O,R.map&&(B.map.value=R.map,n(R.map,B.uvTransform)),R.alphaMap&&(B.alphaMap.value=R.alphaMap,n(R.alphaMap,B.alphaMapTransform)),R.alphaTest>0&&(B.alphaTest.value=R.alphaTest)}(h,f,d,p):f.isSpriteMaterial?function(B,R){B.diffuse.value.copy(R.color),B.opacity.value=R.opacity,B.rotation.value=R.rotation,R.map&&(B.map.value=R.map,n(R.map,B.mapTransform)),R.alphaMap&&(B.alphaMap.value=R.alphaMap,n(R.alphaMap,B.alphaMapTransform)),R.alphaTest>0&&(B.alphaTest.value=R.alphaTest)}(h,f):f.isShadowMaterial?(h.color.value.copy(f.color),h.opacity.value=f.opacity):f.isShaderMaterial&&(f.uniformsNeedUpdate=!1)}}}function Ad(o,t,n,c){let h={},f={},d=[];const p=o.getParameter(o.MAX_UNIFORM_BUFFER_BINDINGS);function v(B,R,D,O){const V=B.value,$=R+"_"+D;if(O[$]===void 0)return O[$]=typeof V=="number"||typeof V=="boolean"?V:V.clone(),!0;{const G=O[$];if(typeof V=="number"||typeof V=="boolean"){if(G!==V)return O[$]=V,!0}else if(G.equals(V)===!1)return G.copy(V),!0}return!1}function w(B){const R={boundary:0,storage:0};return typeof B=="number"||typeof B=="boolean"?(R.boundary=4,R.storage=4):B.isVector2?(R.boundary=8,R.storage=8):B.isVector3||B.isColor?(R.boundary=16,R.storage=12):B.isVector4?(R.boundary=16,R.storage=16):B.isMatrix3?(R.boundary=48,R.storage=48):B.isMatrix4?(R.boundary=64,R.storage=64):B.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",B),R}function S(B){const R=B.target;R.removeEventListener("dispose",S);const D=d.indexOf(R.__bindingPointIndex);d.splice(D,1),o.deleteBuffer(h[R.id]),delete h[R.id],delete f[R.id]}return{bind:function(B,R){const D=R.program;c.uniformBlockBinding(B,D)},update:function(B,R){let D=h[B.id];D===void 0&&(function($){const G=$.uniforms;let X=0;for(let ae=0,oe=G.length;ae<oe;ae++){const Ae=Array.isArray(G[ae])?G[ae]:[G[ae]];for(let ve=0,De=Ae.length;ve<De;ve++){const Ne=Ae[ve],We=Array.isArray(Ne.value)?Ne.value:[Ne.value];for(let vt=0,ot=We.length;vt<ot;vt++){const nt=w(We[vt]),st=X%16,mt=st%nt.boundary,It=st+mt;X+=mt,It!==0&&16-It<nt.storage&&(X+=16-It),Ne.__data=new Float32Array(nt.storage/Float32Array.BYTES_PER_ELEMENT),Ne.__offset=X,X+=nt.storage}}}const te=X%16;te>0&&(X+=16-te),$.__size=X,$.__cache={}}(B),D=function($){const G=function(){for(let oe=0;oe<p;oe++)if(d.indexOf(oe)===-1)return d.push(oe),oe;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();$.__bindingPointIndex=G;const X=o.createBuffer(),te=$.__size,ae=$.usage;return o.bindBuffer(o.UNIFORM_BUFFER,X),o.bufferData(o.UNIFORM_BUFFER,te,ae),o.bindBuffer(o.UNIFORM_BUFFER,null),o.bindBufferBase(o.UNIFORM_BUFFER,G,X),X}(B),h[B.id]=D,B.addEventListener("dispose",S));const O=R.program;c.updateUBOMapping(B,O);const V=t.render.frame;f[B.id]!==V&&(function($){const G=h[$.id],X=$.uniforms,te=$.__cache;o.bindBuffer(o.UNIFORM_BUFFER,G);for(let ae=0,oe=X.length;ae<oe;ae++){const Ae=Array.isArray(X[ae])?X[ae]:[X[ae]];for(let ve=0,De=Ae.length;ve<De;ve++){const Ne=Ae[ve];if(v(Ne,ae,ve,te)===!0){const We=Ne.__offset,vt=Array.isArray(Ne.value)?Ne.value:[Ne.value];let ot=0;for(let nt=0;nt<vt.length;nt++){const st=vt[nt],mt=w(st);typeof st=="number"||typeof st=="boolean"?(Ne.__data[0]=st,o.bufferSubData(o.UNIFORM_BUFFER,We+ot,Ne.__data)):st.isMatrix3?(Ne.__data[0]=st.elements[0],Ne.__data[1]=st.elements[1],Ne.__data[2]=st.elements[2],Ne.__data[3]=0,Ne.__data[4]=st.elements[3],Ne.__data[5]=st.elements[4],Ne.__data[6]=st.elements[5],Ne.__data[7]=0,Ne.__data[8]=st.elements[6],Ne.__data[9]=st.elements[7],Ne.__data[10]=st.elements[8],Ne.__data[11]=0):(st.toArray(Ne.__data,ot),ot+=mt.storage/Float32Array.BYTES_PER_ELEMENT)}o.bufferSubData(o.UNIFORM_BUFFER,We,Ne.__data)}}}o.bindBuffer(o.UNIFORM_BUFFER,null)}(B),f[B.id]=V)},dispose:function(){for(const B in h)o.deleteBuffer(h[B]);d=[],h={},f={}}}}class Sc{constructor(t={}){const{canvas:n=Hs(),context:c=null,depth:h=!0,stencil:f=!1,alpha:d=!1,antialias:p=!1,premultipliedAlpha:v=!0,preserveDrawingBuffer:w=!1,powerPreference:S="default",failIfMajorPerformanceCaveat:B=!1}=t;let R;if(this.isWebGLRenderer=!0,c!==null){if(typeof WebGLRenderingContext<"u"&&c instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");R=c.getContextAttributes().alpha}else R=d;const D=new Uint32Array(4),O=new Int32Array(4);let V=null,$=null;const G=[],X=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ns,this.toneMapping=0,this.toneMappingExposure=1;const te=this;let ae=!1,oe=0,Ae=0,ve=null,De=-1,Ne=null;const We=new Fr,vt=new Fr;let ot=null;const nt=new an(0);let st=0,mt=n.width,It=n.height,Jt=1,jt=null,_i=null;const xi=new Fr(0,0,mt,It),Kt=new Fr(0,0,mt,It);let _t=!1;const hi=new Rp;let bi=!1,Ge=!1;const Pe=new nn,ut=new nn,xt=new Ke,ct=new Fr,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Je=!1;function Ut(){return ve===null?Jt:1}let we,Re,Me,Z,de,Te,Ve,Ze,qt,Tt,yi,un,Li,$i,Vn,hn,ji,Bn,es,Fm,Um,ap,lv,w1,Rt=c;function x1(Xe,Zt){return n.getContext(Xe,Zt)}try{const Xe={alpha:!0,depth:h,stencil:f,antialias:p,premultipliedAlpha:v,preserveDrawingBuffer:w,powerPreference:S,failIfMajorPerformanceCaveat:B};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Oi}`),n.addEventListener("webglcontextlost",Yj,!1),n.addEventListener("webglcontextrestored",Jj,!1),n.addEventListener("webglcontextcreationerror",Zj,!1),Rt===null){const Zt="webgl2";if(Rt=x1(Zt,Xe),Rt===null)throw x1(Zt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Xe){throw console.error("THREE.WebGLRenderer: "+Xe.message),Xe}function G2(){we=new tx(Rt),we.init(),ap=new bx(Rt,we),Re=new cb(Rt,we,t,ap),Me=new Ec(Rt),Re.reverseDepthBuffer&&Me.buffers.depth.setReversed(!0),Z=new mb(Rt),de=new eu,Te=new Sb(Rt,we,Me,de,Re,ap,Z),Ve=new Zc(te),Ze=new fb(te),qt=new n0(Rt),lv=new VS(Rt,qt),Tt=new ix(Rt,qt,Z,lv),yi=new a0(Rt,Tt,qt,Z),es=new o0(Rt,Re,Te),hn=new ub(de),un=new Jr(te,Ve,Ze,we,Re,lv,hn),Li=new sA(te,de),$i=new Yf,Vn=new lm(we),Bn=new ex(te,Ve,Ze,Me,yi,R,v),ji=new T_(te,yi,Re),w1=new Ad(Rt,Z,Re,Me),Fm=new qf(Rt,we,Z),Um=new gb(Rt,we,Z),Z.programs=un.programs,te.capabilities=Re,te.extensions=we,te.properties=de,te.renderLists=$i,te.shadowMap=ji,te.state=Me,te.info=Z}G2();const cu=new M_(te,Rt);function Yj(Xe){Xe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ae=!0}function Jj(){console.log("THREE.WebGLRenderer: Context Restored."),ae=!1;const Xe=Z.autoReset,Zt=ji.enabled,ui=ji.autoUpdate,wi=ji.needsUpdate,ai=ji.type;G2(),Z.autoReset=Xe,ji.enabled=Zt,ji.autoUpdate=ui,ji.needsUpdate=wi,ji.type=ai}function Zj(Xe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Xe.statusMessage)}function eK(Xe){const Zt=Xe.target;var ui;Zt.removeEventListener("dispose",eK),function(wi){const ai=de.get(wi).programs;ai!==void 0&&(ai.forEach(function(Pi){un.releaseProgram(Pi)}),wi.isShaderMaterial&&un.releaseShaderCache(wi))}(ui=Zt),de.remove(ui)}function tK(Xe,Zt,ui){Xe.transparent===!0&&Xe.side===2&&Xe.forceSinglePass===!1?(Xe.side=1,Xe.needsUpdate=!0,hD(Xe,Zt,ui),Xe.side=0,Xe.needsUpdate=!0,hD(Xe,Zt,ui),Xe.side=2):hD(Xe,Zt,ui)}this.xr=cu,this.getContext=function(){return Rt},this.getContextAttributes=function(){return Rt.getContextAttributes()},this.forceContextLoss=function(){const Xe=we.get("WEBGL_lose_context");Xe&&Xe.loseContext()},this.forceContextRestore=function(){const Xe=we.get("WEBGL_lose_context");Xe&&Xe.restoreContext()},this.getPixelRatio=function(){return Jt},this.setPixelRatio=function(Xe){Xe!==void 0&&(Jt=Xe,this.setSize(mt,It,!1))},this.getSize=function(Xe){return Xe.set(mt,It)},this.setSize=function(Xe,Zt,ui=!0){cu.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(mt=Xe,It=Zt,n.width=Math.floor(Xe*Jt),n.height=Math.floor(Zt*Jt),ui===!0&&(n.style.width=Xe+"px",n.style.height=Zt+"px"),this.setViewport(0,0,Xe,Zt))},this.getDrawingBufferSize=function(Xe){return Xe.set(mt*Jt,It*Jt).floor()},this.setDrawingBufferSize=function(Xe,Zt,ui){mt=Xe,It=Zt,Jt=ui,n.width=Math.floor(Xe*ui),n.height=Math.floor(Zt*ui),this.setViewport(0,0,Xe,Zt)},this.getCurrentViewport=function(Xe){return Xe.copy(We)},this.getViewport=function(Xe){return Xe.copy(xi)},this.setViewport=function(Xe,Zt,ui,wi){Xe.isVector4?xi.set(Xe.x,Xe.y,Xe.z,Xe.w):xi.set(Xe,Zt,ui,wi),Me.viewport(We.copy(xi).multiplyScalar(Jt).round())},this.getScissor=function(Xe){return Xe.copy(Kt)},this.setScissor=function(Xe,Zt,ui,wi){Xe.isVector4?Kt.set(Xe.x,Xe.y,Xe.z,Xe.w):Kt.set(Xe,Zt,ui,wi),Me.scissor(vt.copy(Kt).multiplyScalar(Jt).round())},this.getScissorTest=function(){return _t},this.setScissorTest=function(Xe){Me.setScissorTest(_t=Xe)},this.setOpaqueSort=function(Xe){jt=Xe},this.setTransparentSort=function(Xe){_i=Xe},this.getClearColor=function(Xe){return Xe.copy(Bn.getClearColor())},this.setClearColor=function(){Bn.setClearColor.apply(Bn,arguments)},this.getClearAlpha=function(){return Bn.getClearAlpha()},this.setClearAlpha=function(){Bn.setClearAlpha.apply(Bn,arguments)},this.clear=function(Xe=!0,Zt=!0,ui=!0){let wi=0;if(Xe){let ai=!1;if(ve!==null){const Pi=ve.texture.format;ai=Pi===Ya||Pi===So||Pi===Qs}if(ai){const Pi=ve.texture.type,mn=Pi===Qi||Pi===xn||Pi===Yr||Pi===Ua||Pi===ar||Pi===Wo,wn=Bn.getClearColor(),Pn=Bn.getClearAlpha(),Ar=wn.r,hr=wn.g,dr=wn.b;mn?(D[0]=Ar,D[1]=hr,D[2]=dr,D[3]=Pn,Rt.clearBufferuiv(Rt.COLOR,0,D)):(O[0]=Ar,O[1]=hr,O[2]=dr,O[3]=Pn,Rt.clearBufferiv(Rt.COLOR,0,O))}else wi|=Rt.COLOR_BUFFER_BIT}Zt&&(wi|=Rt.DEPTH_BUFFER_BIT,Rt.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),ui&&(wi|=Rt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Rt.clear(wi)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Yj,!1),n.removeEventListener("webglcontextrestored",Jj,!1),n.removeEventListener("webglcontextcreationerror",Zj,!1),$i.dispose(),Vn.dispose(),de.dispose(),Ve.dispose(),Ze.dispose(),yi.dispose(),lv.dispose(),w1.dispose(),un.dispose(),cu.dispose(),cu.removeEventListener("sessionstart",iK),cu.removeEventListener("sessionend",nK),C1.stop()},this.renderBufferDirect=function(Xe,Zt,ui,wi,ai,Pi){Zt===null&&(Zt=Mt);const mn=ai.isMesh&&ai.matrixWorld.determinant()<0,wn=function(Es,za,Md,$r,wr){za.isScene!==!0&&(za=Mt),Te.resetTextureUnits();const mg=za.fog,v0e=$r.isMeshStandardMaterial?za.environment:null,y0e=ve===null?te.outputColorSpace:ve.isXRRenderTarget===!0?ve.texture.colorSpace:bs,dD=($r.isMeshStandardMaterial?Ze:Ve).get($r.envMap||v0e),b0e=$r.vertexColors===!0&&!!Md.attributes.color&&Md.attributes.color.itemSize===4,w0e=!!Md.attributes.tangent&&(!!$r.normalMap||$r.anisotropy>0),x0e=!!Md.morphAttributes.position,C0e=!!Md.morphAttributes.normal,E0e=!!Md.morphAttributes.color;let cK=0;$r.toneMapped&&(ve!==null&&ve.isXRRenderTarget!==!0||(cK=te.toneMapping));const uK=Md.morphAttributes.position||Md.morphAttributes.normal||Md.morphAttributes.color,S0e=uK!==void 0?uK.length:0,hs=de.get($r),B0e=$.state.lights;if(bi===!0&&(Ge===!0||Es!==Ne)){const Af=Es===Ne&&$r.id===De;hn.setState($r,Es,Af)}let _g=!1;$r.version===hs.__version?hs.needsLights&&hs.lightsStateVersion!==B0e.state.version||hs.outputColorSpace!==y0e||wr.isBatchedMesh&&hs.batching===!1?_g=!0:wr.isBatchedMesh||hs.batching!==!0?wr.isBatchedMesh&&hs.batchingColor===!0&&wr.colorTexture===null||wr.isBatchedMesh&&hs.batchingColor===!1&&wr.colorTexture!==null||wr.isInstancedMesh&&hs.instancing===!1?_g=!0:wr.isInstancedMesh||hs.instancing!==!0?wr.isSkinnedMesh&&hs.skinning===!1?_g=!0:wr.isSkinnedMesh||hs.skinning!==!0?wr.isInstancedMesh&&hs.instancingColor===!0&&wr.instanceColor===null||wr.isInstancedMesh&&hs.instancingColor===!1&&wr.instanceColor!==null||wr.isInstancedMesh&&hs.instancingMorph===!0&&wr.morphTexture===null||wr.isInstancedMesh&&hs.instancingMorph===!1&&wr.morphTexture!==null||hs.envMap!==dD||$r.fog===!0&&hs.fog!==mg?_g=!0:hs.numClippingPlanes===void 0||hs.numClippingPlanes===hn.numPlanes&&hs.numIntersection===hn.numIntersection?(hs.vertexAlphas!==b0e||hs.vertexTangents!==w0e||hs.morphTargets!==x0e||hs.morphNormals!==C0e||hs.morphColors!==E0e||hs.toneMapping!==cK||hs.morphTargetsCount!==S0e)&&(_g=!0):_g=!0:_g=!0:_g=!0:_g=!0:(_g=!0,hs.__version=$r.version);let E1=hs.currentProgram;_g===!0&&(E1=hD($r,za,wr));let hK=!1,V2=!1,PN=!1;const Fl=E1.getUniforms(),gy=hs.uniforms;if(Me.useProgram(E1.program)&&(hK=!0,V2=!0,PN=!0),$r.id!==De&&(De=$r.id,V2=!0),hK||Ne!==Es){Re.reverseDepthBuffer?(Pe.copy(Es.projectionMatrix),function(S1){const Ia=S1.elements;Ia[2]=.5*Ia[2]+.5*Ia[3],Ia[6]=.5*Ia[6]+.5*Ia[7],Ia[10]=.5*Ia[10]+.5*Ia[11],Ia[14]=.5*Ia[14]+.5*Ia[15]}(Pe),function(S1){const Ia=S1.elements;Ia[11]===-1?(Ia[10]=-Ia[10]-1,Ia[14]=-Ia[14]):(Ia[10]=-Ia[10],Ia[14]=1-Ia[14])}(Pe),Fl.setValue(Rt,"projectionMatrix",Pe)):Fl.setValue(Rt,"projectionMatrix",Es.projectionMatrix),Fl.setValue(Rt,"viewMatrix",Es.matrixWorldInverse);const Af=Fl.map.cameraPosition;Af!==void 0&&Af.setValue(Rt,xt.setFromMatrixPosition(Es.matrixWorld)),Re.logarithmicDepthBuffer&&Fl.setValue(Rt,"logDepthBufFC",2/(Math.log(Es.far+1)/Math.LN2)),($r.isMeshPhongMaterial||$r.isMeshToonMaterial||$r.isMeshLambertMaterial||$r.isMeshBasicMaterial||$r.isMeshStandardMaterial||$r.isShaderMaterial)&&Fl.setValue(Rt,"isOrthographic",Es.isOrthographicCamera===!0),Ne!==Es&&(Ne=Es,V2=!0,PN=!0)}if(wr.isSkinnedMesh){Fl.setOptional(Rt,wr,"bindMatrix"),Fl.setOptional(Rt,wr,"bindMatrixInverse");const Af=wr.skeleton;Af&&(Af.boneTexture===null&&Af.computeBoneTexture(),Fl.setValue(Rt,"boneTexture",Af.boneTexture,Te))}wr.isBatchedMesh&&(Fl.setOptional(Rt,wr,"batchingTexture"),Fl.setValue(Rt,"batchingTexture",wr._matricesTexture,Te),Fl.setOptional(Rt,wr,"batchingIdTexture"),Fl.setValue(Rt,"batchingIdTexture",wr._indirectTexture,Te),Fl.setOptional(Rt,wr,"batchingColorTexture"),wr._colorsTexture!==null&&Fl.setValue(Rt,"batchingColorTexture",wr._colorsTexture,Te));const ON=Md.morphAttributes;var km,vg;if(ON.position===void 0&&ON.normal===void 0&&ON.color===void 0||es.update(wr,Md,E1),(V2||hs.receiveShadow!==wr.receiveShadow)&&(hs.receiveShadow=wr.receiveShadow,Fl.setValue(Rt,"receiveShadow",wr.receiveShadow)),$r.isMeshGouraudMaterial&&$r.envMap!==null&&(gy.envMap.value=dD,gy.flipEnvMap.value=dD.isCubeTexture&&dD.isRenderTargetTexture===!1?-1:1),$r.isMeshStandardMaterial&&$r.envMap===null&&za.environment!==null&&(gy.envMapIntensity.value=za.environmentIntensity),V2&&(Fl.setValue(Rt,"toneMappingExposure",te.toneMappingExposure),hs.needsLights&&(vg=PN,(km=gy).ambientLightColor.needsUpdate=vg,km.lightProbe.needsUpdate=vg,km.directionalLights.needsUpdate=vg,km.directionalLightShadows.needsUpdate=vg,km.pointLights.needsUpdate=vg,km.pointLightShadows.needsUpdate=vg,km.spotLights.needsUpdate=vg,km.spotLightShadows.needsUpdate=vg,km.rectAreaLights.needsUpdate=vg,km.hemisphereLights.needsUpdate=vg),mg&&$r.fog===!0&&Li.refreshFogUniforms(gy,mg),Li.refreshMaterialUniforms(gy,$r,Jt,It,$.state.transmissionRenderTarget[Es.id]),sm.upload(Rt,aK(hs),gy,Te)),$r.isShaderMaterial&&$r.uniformsNeedUpdate===!0&&(sm.upload(Rt,aK(hs),gy,Te),$r.uniformsNeedUpdate=!1),$r.isSpriteMaterial&&Fl.setValue(Rt,"center",wr.center),Fl.setValue(Rt,"modelViewMatrix",wr.modelViewMatrix),Fl.setValue(Rt,"normalMatrix",wr.normalMatrix),Fl.setValue(Rt,"modelMatrix",wr.matrixWorld),$r.isShaderMaterial||$r.isRawShaderMaterial){const Af=$r.uniformsGroups;for(let S1=0,Ia=Af.length;S1<Ia;S1++){const dK=Af[S1];w1.update(dK,E1),w1.bind(dK,E1)}}return E1}(Xe,Zt,ui,wi,ai);Me.setMaterial(wi,mn);let Pn=ui.index,Ar=1;if(wi.wireframe===!0){if(Pn=Tt.getWireframeAttribute(ui),Pn===void 0)return;Ar=2}const hr=ui.drawRange,dr=ui.attributes.position;let vs=hr.start*Ar,cl=(hr.start+hr.count)*Ar;Pi!==null&&(vs=Math.max(vs,Pi.start*Ar),cl=Math.min(cl,(Pi.start+Pi.count)*Ar)),Pn!==null?(vs=Math.max(vs,0),cl=Math.min(cl,Pn.count)):dr!=null&&(vs=Math.max(vs,0),cl=Math.min(cl,dr.count));const ac=cl-vs;if(ac<0||ac===1/0)return;let Lc;lv.setup(ai,wi,wn,ui,Pn);let Ba=Fm;if(Pn!==null&&(Lc=qt.get(Pn),Ba=Um,Ba.setIndex(Lc)),ai.isMesh)wi.wireframe===!0?(Me.setLineWidth(wi.wireframeLinewidth*Ut()),Ba.setMode(Rt.LINES)):Ba.setMode(Rt.TRIANGLES);else if(ai.isLine){let Es=wi.linewidth;Es===void 0&&(Es=1),Me.setLineWidth(Es*Ut()),ai.isLineSegments?Ba.setMode(Rt.LINES):ai.isLineLoop?Ba.setMode(Rt.LINE_LOOP):Ba.setMode(Rt.LINE_STRIP)}else ai.isPoints?Ba.setMode(Rt.POINTS):ai.isSprite&&Ba.setMode(Rt.TRIANGLES);if(ai.isBatchedMesh)if(ai._multiDrawInstances!==null)Ba.renderMultiDrawInstances(ai._multiDrawStarts,ai._multiDrawCounts,ai._multiDrawCount,ai._multiDrawInstances);else if(we.get("WEBGL_multi_draw"))Ba.renderMultiDraw(ai._multiDrawStarts,ai._multiDrawCounts,ai._multiDrawCount);else{const Es=ai._multiDrawStarts,za=ai._multiDrawCounts,Md=ai._multiDrawCount,$r=Pn?qt.get(Pn).bytesPerElement:1,wr=de.get(wi).currentProgram.getUniforms();for(let mg=0;mg<Md;mg++)wr.setValue(Rt,"_gl_DrawID",mg),Ba.render(Es[mg]/$r,za[mg])}else if(ai.isInstancedMesh)Ba.renderInstances(vs,ac,ai.count);else if(ui.isInstancedBufferGeometry){const Es=ui._maxInstanceCount!==void 0?ui._maxInstanceCount:1/0,za=Math.min(ui.instanceCount,Es);Ba.renderInstances(vs,ac,za)}else Ba.render(vs,ac)},this.compile=function(Xe,Zt,ui=null){ui===null&&(ui=Xe),$=Vn.get(ui),$.init(Zt),X.push($),ui.traverseVisible(function(ai){ai.isLight&&ai.layers.test(Zt.layers)&&($.pushLight(ai),ai.castShadow&&$.pushShadow(ai))}),Xe!==ui&&Xe.traverseVisible(function(ai){ai.isLight&&ai.layers.test(Zt.layers)&&($.pushLight(ai),ai.castShadow&&$.pushShadow(ai))}),$.setupLights();const wi=new Set;return Xe.traverse(function(ai){if(!(ai.isMesh||ai.isPoints||ai.isLine||ai.isSprite))return;const Pi=ai.material;if(Pi)if(Array.isArray(Pi))for(let mn=0;mn<Pi.length;mn++){const wn=Pi[mn];tK(wn,ui,ai),wi.add(wn)}else tK(Pi,ui,ai),wi.add(Pi)}),X.pop(),$=null,wi},this.compileAsync=function(Xe,Zt,ui=null){const wi=this.compile(Xe,Zt,ui);return new Promise(ai=>{function Pi(){wi.forEach(function(mn){de.get(mn).currentProgram.isReady()&&wi.delete(mn)}),wi.size!==0?setTimeout(Pi,10):ai(Xe)}we.get("KHR_parallel_shader_compile")!==null?Pi():setTimeout(Pi,10)})};let kN=null;function iK(){C1.stop()}function nK(){C1.start()}const C1=new $A;function LN(Xe,Zt,ui,wi){if(Xe.visible===!1)return;if(Xe.layers.test(Zt.layers)){if(Xe.isGroup)ui=Xe.renderOrder;else if(Xe.isLOD)Xe.autoUpdate===!0&&Xe.update(Zt);else if(Xe.isLight)$.pushLight(Xe),Xe.castShadow&&$.pushShadow(Xe);else if(Xe.isSprite){if(!Xe.frustumCulled||hi.intersectsSprite(Xe)){wi&&ct.setFromMatrixPosition(Xe.matrixWorld).applyMatrix4(ut);const Pi=yi.update(Xe),mn=Xe.material;mn.visible&&V.push(Xe,Pi,mn,ui,ct.z,null)}}else if((Xe.isMesh||Xe.isLine||Xe.isPoints)&&(!Xe.frustumCulled||hi.intersectsObject(Xe))){const Pi=yi.update(Xe),mn=Xe.material;if(wi&&(Xe.boundingSphere!==void 0?(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),ct.copy(Xe.boundingSphere.center)):(Pi.boundingSphere===null&&Pi.computeBoundingSphere(),ct.copy(Pi.boundingSphere.center)),ct.applyMatrix4(Xe.matrixWorld).applyMatrix4(ut)),Array.isArray(mn)){const wn=Pi.groups;for(let Pn=0,Ar=wn.length;Pn<Ar;Pn++){const hr=wn[Pn],dr=mn[hr.materialIndex];dr&&dr.visible&&V.push(Xe,Pi,dr,ui,ct.z,hr)}}else mn.visible&&V.push(Xe,Pi,mn,ui,ct.z,null)}}const ai=Xe.children;for(let Pi=0,mn=ai.length;Pi<mn;Pi++)LN(ai[Pi],Zt,ui,wi)}function rK(Xe,Zt,ui,wi){const ai=Xe.opaque,Pi=Xe.transmissive,mn=Xe.transparent;$.setupLightsView(ui),bi===!0&&hn.setGlobalState(te.clippingPlanes,ui),wi&&Me.viewport(We.copy(wi)),ai.length>0&&uD(ai,Zt,ui),Pi.length>0&&uD(Pi,Zt,ui),mn.length>0&&uD(mn,Zt,ui),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function sK(Xe,Zt,ui,wi){if((ui.isScene===!0?ui.overrideMaterial:null)!==null)return;$.state.transmissionRenderTarget[wi.id]===void 0&&($.state.transmissionRenderTarget[wi.id]=new Io(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")||we.has("EXT_color_buffer_float")?jn:Qi,minFilter:en,samples:4,stencilBuffer:f,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qr.workingColorSpace}));const ai=$.state.transmissionRenderTarget[wi.id],Pi=wi.viewport||We;ai.setSize(Pi.z,Pi.w);const mn=te.getRenderTarget();te.setRenderTarget(ai),te.getClearColor(nt),st=te.getClearAlpha(),st<1&&te.setClearColor(16777215,.5),te.clear(),Je&&Bn.render(ui);const wn=te.toneMapping;te.toneMapping=0;const Pn=wi.viewport;if(wi.viewport!==void 0&&(wi.viewport=void 0),$.setupLightsView(wi),bi===!0&&hn.setGlobalState(te.clippingPlanes,wi),uD(Xe,ui,wi),Te.updateMultisampleRenderTarget(ai),Te.updateRenderTargetMipmap(ai),we.has("WEBGL_multisampled_render_to_texture")===!1){let Ar=!1;for(let hr=0,dr=Zt.length;hr<dr;hr++){const vs=Zt[hr],cl=vs.object,ac=vs.geometry,Lc=vs.material,Ba=vs.group;if(Lc.side===2&&cl.layers.test(wi.layers)){const Es=Lc.side;Lc.side=1,Lc.needsUpdate=!0,oK(cl,ui,wi,ac,Lc,Ba),Lc.side=Es,Lc.needsUpdate=!0,Ar=!0}}Ar===!0&&(Te.updateMultisampleRenderTarget(ai),Te.updateRenderTargetMipmap(ai))}te.setRenderTarget(mn),te.setClearColor(nt,st),Pn!==void 0&&(wi.viewport=Pn),te.toneMapping=wn}function uD(Xe,Zt,ui){const wi=Zt.isScene===!0?Zt.overrideMaterial:null;for(let ai=0,Pi=Xe.length;ai<Pi;ai++){const mn=Xe[ai],wn=mn.object,Pn=mn.geometry,Ar=wi===null?mn.material:wi,hr=mn.group;wn.layers.test(ui.layers)&&oK(wn,Zt,ui,Pn,Ar,hr)}}function oK(Xe,Zt,ui,wi,ai,Pi){Xe.onBeforeRender(te,Zt,ui,wi,ai,Pi),Xe.modelViewMatrix.multiplyMatrices(ui.matrixWorldInverse,Xe.matrixWorld),Xe.normalMatrix.getNormalMatrix(Xe.modelViewMatrix),ai.onBeforeRender(te,Zt,ui,wi,Xe,Pi),ai.transparent===!0&&ai.side===2&&ai.forceSinglePass===!1?(ai.side=1,ai.needsUpdate=!0,te.renderBufferDirect(ui,Zt,wi,ai,Xe,Pi),ai.side=0,ai.needsUpdate=!0,te.renderBufferDirect(ui,Zt,wi,ai,Xe,Pi),ai.side=2):te.renderBufferDirect(ui,Zt,wi,ai,Xe,Pi),Xe.onAfterRender(te,Zt,ui,wi,ai,Pi)}function hD(Xe,Zt,ui){Zt.isScene!==!0&&(Zt=Mt);const wi=de.get(Xe),ai=$.state.lights,Pi=$.state.shadowsArray,mn=ai.state.version,wn=un.getParameters(Xe,ai.state,Pi,Zt,ui),Pn=un.getProgramCacheKey(wn);let Ar=wi.programs;wi.environment=Xe.isMeshStandardMaterial?Zt.environment:null,wi.fog=Zt.fog,wi.envMap=(Xe.isMeshStandardMaterial?Ze:Ve).get(Xe.envMap||wi.environment),wi.envMapRotation=wi.environment!==null&&Xe.envMap===null?Zt.environmentRotation:Xe.envMapRotation,Ar===void 0&&(Xe.addEventListener("dispose",eK),Ar=new Map,wi.programs=Ar);let hr=Ar.get(Pn);if(hr!==void 0){if(wi.currentProgram===hr&&wi.lightsStateVersion===mn)return lK(Xe,wn),hr}else wn.uniforms=un.getUniforms(Xe),Xe.onBeforeCompile(wn,te),hr=un.acquireProgram(wn,Pn),Ar.set(Pn,hr),wi.uniforms=wn.uniforms;const dr=wi.uniforms;return(Xe.isShaderMaterial||Xe.isRawShaderMaterial)&&Xe.clipping!==!0||(dr.clippingPlanes=hn.uniform),lK(Xe,wn),wi.needsLights=(vs=Xe).isMeshLambertMaterial||vs.isMeshToonMaterial||vs.isMeshPhongMaterial||vs.isMeshStandardMaterial||vs.isShadowMaterial||vs.isShaderMaterial&&vs.lights===!0,wi.lightsStateVersion=mn,wi.needsLights&&(dr.ambientLightColor.value=ai.state.ambient,dr.lightProbe.value=ai.state.probe,dr.directionalLights.value=ai.state.directional,dr.directionalLightShadows.value=ai.state.directionalShadow,dr.spotLights.value=ai.state.spot,dr.spotLightShadows.value=ai.state.spotShadow,dr.rectAreaLights.value=ai.state.rectArea,dr.ltc_1.value=ai.state.rectAreaLTC1,dr.ltc_2.value=ai.state.rectAreaLTC2,dr.pointLights.value=ai.state.point,dr.pointLightShadows.value=ai.state.pointShadow,dr.hemisphereLights.value=ai.state.hemi,dr.directionalShadowMap.value=ai.state.directionalShadowMap,dr.directionalShadowMatrix.value=ai.state.directionalShadowMatrix,dr.spotShadowMap.value=ai.state.spotShadowMap,dr.spotLightMatrix.value=ai.state.spotLightMatrix,dr.spotLightMap.value=ai.state.spotLightMap,dr.pointShadowMap.value=ai.state.pointShadowMap,dr.pointShadowMatrix.value=ai.state.pointShadowMatrix),wi.currentProgram=hr,wi.uniformsList=null,hr;var vs}function aK(Xe){if(Xe.uniformsList===null){const Zt=Xe.currentProgram.getUniforms();Xe.uniformsList=sm.seqWithValue(Zt.seq,Xe.uniforms)}return Xe.uniformsList}function lK(Xe,Zt){const ui=de.get(Xe);ui.outputColorSpace=Zt.outputColorSpace,ui.batching=Zt.batching,ui.batchingColor=Zt.batchingColor,ui.instancing=Zt.instancing,ui.instancingColor=Zt.instancingColor,ui.instancingMorph=Zt.instancingMorph,ui.skinning=Zt.skinning,ui.morphTargets=Zt.morphTargets,ui.morphNormals=Zt.morphNormals,ui.morphColors=Zt.morphColors,ui.morphTargetsCount=Zt.morphTargetsCount,ui.numClippingPlanes=Zt.numClippingPlanes,ui.numIntersection=Zt.numClipIntersection,ui.vertexAlphas=Zt.vertexAlphas,ui.vertexTangents=Zt.vertexTangents,ui.toneMapping=Zt.toneMapping}C1.setAnimationLoop(function(Xe){kN&&kN(Xe)}),typeof self<"u"&&C1.setContext(self),this.setAnimationLoop=function(Xe){kN=Xe,cu.setAnimationLoop(Xe),Xe===null?C1.stop():C1.start()},cu.addEventListener("sessionstart",iK),cu.addEventListener("sessionend",nK),this.render=function(Xe,Zt){if(Zt!==void 0&&Zt.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(ae===!0)return;if(Xe.matrixWorldAutoUpdate===!0&&Xe.updateMatrixWorld(),Zt.parent===null&&Zt.matrixWorldAutoUpdate===!0&&Zt.updateMatrixWorld(),cu.enabled===!0&&cu.isPresenting===!0&&(cu.cameraAutoUpdate===!0&&cu.updateCamera(Zt),Zt=cu.getCamera()),Xe.isScene===!0&&Xe.onBeforeRender(te,Xe,Zt,ve),$=Vn.get(Xe,X.length),$.init(Zt),X.push($),ut.multiplyMatrices(Zt.projectionMatrix,Zt.matrixWorldInverse),hi.setFromProjectionMatrix(ut),Ge=this.localClippingEnabled,bi=hn.init(this.clippingPlanes,Ge),V=$i.get(Xe,G.length),V.init(),G.push(V),cu.enabled===!0&&cu.isPresenting===!0){const Pi=te.xr.getDepthSensingMesh();Pi!==null&&LN(Pi,Zt,-1/0,te.sortObjects)}LN(Xe,Zt,0,te.sortObjects),V.finish(),te.sortObjects===!0&&V.sort(jt,_i),Je=cu.enabled===!1||cu.isPresenting===!1||cu.hasDepthSensing()===!1,Je&&Bn.addToRenderList(V,Xe),this.info.render.frame++,bi===!0&&hn.beginShadows();const ui=$.state.shadowsArray;ji.render(ui,Xe,Zt),bi===!0&&hn.endShadows(),this.info.autoReset===!0&&this.info.reset();const wi=V.opaque,ai=V.transmissive;if($.setupLights(),Zt.isArrayCamera){const Pi=Zt.cameras;if(ai.length>0)for(let mn=0,wn=Pi.length;mn<wn;mn++)sK(wi,ai,Xe,Pi[mn]);Je&&Bn.render(Xe);for(let mn=0,wn=Pi.length;mn<wn;mn++){const Pn=Pi[mn];rK(V,Xe,Pn,Pn.viewport)}}else ai.length>0&&sK(wi,ai,Xe,Zt),Je&&Bn.render(Xe),rK(V,Xe,Zt);ve!==null&&(Te.updateMultisampleRenderTarget(ve),Te.updateRenderTargetMipmap(ve)),Xe.isScene===!0&&Xe.onAfterRender(te,Xe,Zt),lv.resetDefaultState(),De=-1,Ne=null,X.pop(),X.length>0?($=X[X.length-1],bi===!0&&hn.setGlobalState(te.clippingPlanes,$.state.camera)):$=null,G.pop(),V=G.length>0?G[G.length-1]:null},this.getActiveCubeFace=function(){return oe},this.getActiveMipmapLevel=function(){return Ae},this.getRenderTarget=function(){return ve},this.setRenderTargetTextures=function(Xe,Zt,ui){de.get(Xe.texture).__webglTexture=Zt,de.get(Xe.depthTexture).__webglTexture=ui;const wi=de.get(Xe);wi.__hasExternalTextures=!0,wi.__autoAllocateDepthBuffer=ui===void 0,wi.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),wi.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Xe,Zt){const ui=de.get(Xe);ui.__webglFramebuffer=Zt,ui.__useDefaultFramebuffer=Zt===void 0},this.setRenderTarget=function(Xe,Zt=0,ui=0){ve=Xe,oe=Zt,Ae=ui;let wi=!0,ai=null,Pi=!1,mn=!1;if(Xe){const wn=de.get(Xe);if(wn.__useDefaultFramebuffer!==void 0)Me.bindFramebuffer(Rt.FRAMEBUFFER,null),wi=!1;else if(wn.__webglFramebuffer===void 0)Te.setupRenderTarget(Xe);else if(wn.__hasExternalTextures)Te.rebindTextures(Xe,de.get(Xe.texture).__webglTexture,de.get(Xe.depthTexture).__webglTexture);else if(Xe.depthBuffer){const hr=Xe.depthTexture;if(wn.__boundDepthTexture!==hr){if(hr!==null&&de.has(hr)&&(Xe.width!==hr.image.width||Xe.height!==hr.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Te.setupDepthRenderbuffer(Xe)}}const Pn=Xe.texture;(Pn.isData3DTexture||Pn.isDataArrayTexture||Pn.isCompressedArrayTexture)&&(mn=!0);const Ar=de.get(Xe).__webglFramebuffer;Xe.isWebGLCubeRenderTarget?(ai=Array.isArray(Ar[Zt])?Ar[Zt][ui]:Ar[Zt],Pi=!0):ai=Xe.samples>0&&Te.useMultisampledRTT(Xe)===!1?de.get(Xe).__webglMultisampledFramebuffer:Array.isArray(Ar)?Ar[ui]:Ar,We.copy(Xe.viewport),vt.copy(Xe.scissor),ot=Xe.scissorTest}else We.copy(xi).multiplyScalar(Jt).floor(),vt.copy(Kt).multiplyScalar(Jt).floor(),ot=_t;if(Me.bindFramebuffer(Rt.FRAMEBUFFER,ai)&&wi&&Me.drawBuffers(Xe,ai),Me.viewport(We),Me.scissor(vt),Me.setScissorTest(ot),Pi){const wn=de.get(Xe.texture);Rt.framebufferTexture2D(Rt.FRAMEBUFFER,Rt.COLOR_ATTACHMENT0,Rt.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,wn.__webglTexture,ui)}else if(mn){const wn=de.get(Xe.texture),Pn=Zt||0;Rt.framebufferTextureLayer(Rt.FRAMEBUFFER,Rt.COLOR_ATTACHMENT0,wn.__webglTexture,ui||0,Pn)}De=-1},this.readRenderTargetPixels=function(Xe,Zt,ui,wi,ai,Pi,mn){if(!Xe||!Xe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wn=de.get(Xe).__webglFramebuffer;if(Xe.isWebGLCubeRenderTarget&&mn!==void 0&&(wn=wn[mn]),wn){Me.bindFramebuffer(Rt.FRAMEBUFFER,wn);try{const Pn=Xe.texture,Ar=Pn.format,hr=Pn.type;if(!Re.textureFormatReadable(Ar))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Re.textureTypeReadable(hr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Zt>=0&&Zt<=Xe.width-wi&&ui>=0&&ui<=Xe.height-ai&&Rt.readPixels(Zt,ui,wi,ai,ap.convert(Ar),ap.convert(hr),Pi)}finally{const Pn=ve!==null?de.get(ve).__webglFramebuffer:null;Me.bindFramebuffer(Rt.FRAMEBUFFER,Pn)}}},this.readRenderTargetPixelsAsync=async function(Xe,Zt,ui,wi,ai,Pi,mn){if(!Xe||!Xe.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wn=de.get(Xe).__webglFramebuffer;if(Xe.isWebGLCubeRenderTarget&&mn!==void 0&&(wn=wn[mn]),wn){const hr=Xe.texture,dr=hr.format,vs=hr.type;if(!Re.textureFormatReadable(dr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Re.textureTypeReadable(vs))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Zt>=0&&Zt<=Xe.width-wi&&ui>=0&&ui<=Xe.height-ai){Me.bindFramebuffer(Rt.FRAMEBUFFER,wn);const cl=Rt.createBuffer();Rt.bindBuffer(Rt.PIXEL_PACK_BUFFER,cl),Rt.bufferData(Rt.PIXEL_PACK_BUFFER,Pi.byteLength,Rt.STREAM_READ),Rt.readPixels(Zt,ui,wi,ai,ap.convert(dr),ap.convert(vs),0);const ac=ve!==null?de.get(ve).__webglFramebuffer:null;Me.bindFramebuffer(Rt.FRAMEBUFFER,ac);const Lc=Rt.fenceSync(Rt.SYNC_GPU_COMMANDS_COMPLETE,0);return Rt.flush(),await(Pn=Rt,Ar=Lc,new Promise(function(Ba,Es){setTimeout(function za(){switch(Pn.clientWaitSync(Ar,Pn.SYNC_FLUSH_COMMANDS_BIT,0)){case Pn.WAIT_FAILED:Es();break;case Pn.TIMEOUT_EXPIRED:setTimeout(za,4);break;default:Ba()}},4)})),Rt.bindBuffer(Rt.PIXEL_PACK_BUFFER,cl),Rt.getBufferSubData(Rt.PIXEL_PACK_BUFFER,0,Pi),Rt.deleteBuffer(cl),Rt.deleteSync(Lc),Pi}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}var Pn,Ar},this.copyFramebufferToTexture=function(Xe,Zt=null,ui=0){Xe.isTexture!==!0&&(Xv("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Zt=arguments[0]||null,Xe=arguments[1]);const wi=Math.pow(2,-ui),ai=Math.floor(Xe.image.width*wi),Pi=Math.floor(Xe.image.height*wi),mn=Zt!==null?Zt.x:0,wn=Zt!==null?Zt.y:0;Te.setTexture2D(Xe,0),Rt.copyTexSubImage2D(Rt.TEXTURE_2D,ui,0,0,mn,wn,ai,Pi),Me.unbindTexture()},this.copyTextureToTexture=function(Xe,Zt,ui=null,wi=null,ai=0){let Pi,mn,wn,Pn,Ar,hr;Xe.isTexture!==!0&&(Xv("WebGLRenderer: copyTextureToTexture function signature has changed."),wi=arguments[0]||null,Xe=arguments[1],Zt=arguments[2],ai=arguments[3]||0,ui=null),ui!==null?(Pi=ui.max.x-ui.min.x,mn=ui.max.y-ui.min.y,wn=ui.min.x,Pn=ui.min.y):(Pi=Xe.image.width,mn=Xe.image.height,wn=0,Pn=0),wi!==null?(Ar=wi.x,hr=wi.y):(Ar=0,hr=0);const dr=ap.convert(Zt.format),vs=ap.convert(Zt.type);Te.setTexture2D(Zt,0),Rt.pixelStorei(Rt.UNPACK_FLIP_Y_WEBGL,Zt.flipY),Rt.pixelStorei(Rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Zt.premultiplyAlpha),Rt.pixelStorei(Rt.UNPACK_ALIGNMENT,Zt.unpackAlignment);const cl=Rt.getParameter(Rt.UNPACK_ROW_LENGTH),ac=Rt.getParameter(Rt.UNPACK_IMAGE_HEIGHT),Lc=Rt.getParameter(Rt.UNPACK_SKIP_PIXELS),Ba=Rt.getParameter(Rt.UNPACK_SKIP_ROWS),Es=Rt.getParameter(Rt.UNPACK_SKIP_IMAGES),za=Xe.isCompressedTexture?Xe.mipmaps[ai]:Xe.image;Rt.pixelStorei(Rt.UNPACK_ROW_LENGTH,za.width),Rt.pixelStorei(Rt.UNPACK_IMAGE_HEIGHT,za.height),Rt.pixelStorei(Rt.UNPACK_SKIP_PIXELS,wn),Rt.pixelStorei(Rt.UNPACK_SKIP_ROWS,Pn),Xe.isDataTexture?Rt.texSubImage2D(Rt.TEXTURE_2D,ai,Ar,hr,Pi,mn,dr,vs,za.data):Xe.isCompressedTexture?Rt.compressedTexSubImage2D(Rt.TEXTURE_2D,ai,Ar,hr,za.width,za.height,dr,za.data):Rt.texSubImage2D(Rt.TEXTURE_2D,ai,Ar,hr,Pi,mn,dr,vs,za),Rt.pixelStorei(Rt.UNPACK_ROW_LENGTH,cl),Rt.pixelStorei(Rt.UNPACK_IMAGE_HEIGHT,ac),Rt.pixelStorei(Rt.UNPACK_SKIP_PIXELS,Lc),Rt.pixelStorei(Rt.UNPACK_SKIP_ROWS,Ba),Rt.pixelStorei(Rt.UNPACK_SKIP_IMAGES,Es),ai===0&&Zt.generateMipmaps&&Rt.generateMipmap(Rt.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(Xe,Zt,ui=null,wi=null,ai=0){let Pi,mn,wn,Pn,Ar,hr,dr,vs,cl;Xe.isTexture!==!0&&(Xv("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ui=arguments[0]||null,wi=arguments[1]||null,Xe=arguments[2],Zt=arguments[3],ai=arguments[4]||0);const ac=Xe.isCompressedTexture?Xe.mipmaps[ai]:Xe.image;ui!==null?(Pi=ui.max.x-ui.min.x,mn=ui.max.y-ui.min.y,wn=ui.max.z-ui.min.z,Pn=ui.min.x,Ar=ui.min.y,hr=ui.min.z):(Pi=ac.width,mn=ac.height,wn=ac.depth,Pn=0,Ar=0,hr=0),wi!==null?(dr=wi.x,vs=wi.y,cl=wi.z):(dr=0,vs=0,cl=0);const Lc=ap.convert(Zt.format),Ba=ap.convert(Zt.type);let Es;if(Zt.isData3DTexture)Te.setTexture3D(Zt,0),Es=Rt.TEXTURE_3D;else{if(!Zt.isDataArrayTexture&&!Zt.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Te.setTexture2DArray(Zt,0),Es=Rt.TEXTURE_2D_ARRAY}Rt.pixelStorei(Rt.UNPACK_FLIP_Y_WEBGL,Zt.flipY),Rt.pixelStorei(Rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Zt.premultiplyAlpha),Rt.pixelStorei(Rt.UNPACK_ALIGNMENT,Zt.unpackAlignment);const za=Rt.getParameter(Rt.UNPACK_ROW_LENGTH),Md=Rt.getParameter(Rt.UNPACK_IMAGE_HEIGHT),$r=Rt.getParameter(Rt.UNPACK_SKIP_PIXELS),wr=Rt.getParameter(Rt.UNPACK_SKIP_ROWS),mg=Rt.getParameter(Rt.UNPACK_SKIP_IMAGES);Rt.pixelStorei(Rt.UNPACK_ROW_LENGTH,ac.width),Rt.pixelStorei(Rt.UNPACK_IMAGE_HEIGHT,ac.height),Rt.pixelStorei(Rt.UNPACK_SKIP_PIXELS,Pn),Rt.pixelStorei(Rt.UNPACK_SKIP_ROWS,Ar),Rt.pixelStorei(Rt.UNPACK_SKIP_IMAGES,hr),Xe.isDataTexture||Xe.isData3DTexture?Rt.texSubImage3D(Es,ai,dr,vs,cl,Pi,mn,wn,Lc,Ba,ac.data):Zt.isCompressedArrayTexture?Rt.compressedTexSubImage3D(Es,ai,dr,vs,cl,Pi,mn,wn,Lc,ac.data):Rt.texSubImage3D(Es,ai,dr,vs,cl,Pi,mn,wn,Lc,Ba,ac),Rt.pixelStorei(Rt.UNPACK_ROW_LENGTH,za),Rt.pixelStorei(Rt.UNPACK_IMAGE_HEIGHT,Md),Rt.pixelStorei(Rt.UNPACK_SKIP_PIXELS,$r),Rt.pixelStorei(Rt.UNPACK_SKIP_ROWS,wr),Rt.pixelStorei(Rt.UNPACK_SKIP_IMAGES,mg),ai===0&&Zt.generateMipmaps&&Rt.generateMipmap(Es),Me.unbindTexture()},this.initRenderTarget=function(Xe){de.get(Xe).__webglFramebuffer===void 0&&Te.setupRenderTarget(Xe)},this.initTexture=function(Xe){Xe.isCubeTexture?Te.setTextureCube(Xe,0):Xe.isData3DTexture?Te.setTexture3D(Xe,0):Xe.isDataArrayTexture||Xe.isCompressedArrayTexture?Te.setTexture2DArray(Xe,0):Te.setTexture2D(Xe,0),Me.unbindTexture()},this.resetState=function(){oe=0,Ae=0,ve=null,Me.reset(),lv.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return sh}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorSpace=t===Ng?"display-p3":"srgb",n.unpackColorSpace=Qr.workingColorSpace===Hg?"display-p3":"srgb"}}class El extends gn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Za,this.environmentIntensity=1,this.environmentRotation=new Za,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class Ao{constructor(t,n){this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=t!==void 0?t.length/n:0,this.usage=kf,this.updateRanges=[],this.version=0,this.uuid=$c()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,n,c){t*=this.stride,c*=n.stride;for(let h=0,f=this.stride;h<f;h++)this.array[t+h]=n.array[c+h];return this}set(t,n=0){return this.array.set(t,n),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$c()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),c=new this.constructor(n,this.stride);return c.setUsage(this.usage),c}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$c()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ps=new Ke;class Jn{constructor(t,n,c,h=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=c,this.normalized=h}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let n=0,c=this.data.count;n<c;n++)ps.fromBufferAttribute(this,n),ps.applyMatrix4(t),this.setXYZ(n,ps.x,ps.y,ps.z);return this}applyNormalMatrix(t){for(let n=0,c=this.count;n<c;n++)ps.fromBufferAttribute(this,n),ps.applyNormalMatrix(t),this.setXYZ(n,ps.x,ps.y,ps.z);return this}transformDirection(t){for(let n=0,c=this.count;n<c;n++)ps.fromBufferAttribute(this,n),ps.transformDirection(t),this.setXYZ(n,ps.x,ps.y,ps.z);return this}getComponent(t,n){let c=this.array[t*this.data.stride+this.offset+n];return this.normalized&&(c=Wc(c,this.array)),c}setComponent(t,n,c){return this.normalized&&(c=ds(c,this.array)),this.data.array[t*this.data.stride+this.offset+n]=c,this}setX(t,n){return this.normalized&&(n=ds(n,this.array)),this.data.array[t*this.data.stride+this.offset]=n,this}setY(t,n){return this.normalized&&(n=ds(n,this.array)),this.data.array[t*this.data.stride+this.offset+1]=n,this}setZ(t,n){return this.normalized&&(n=ds(n,this.array)),this.data.array[t*this.data.stride+this.offset+2]=n,this}setW(t,n){return this.normalized&&(n=ds(n,this.array)),this.data.array[t*this.data.stride+this.offset+3]=n,this}getX(t){let n=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(n=Wc(n,this.array)),n}getY(t){let n=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(n=Wc(n,this.array)),n}getZ(t){let n=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(n=Wc(n,this.array)),n}getW(t){let n=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(n=Wc(n,this.array)),n}setXY(t,n,c){return t=t*this.data.stride+this.offset,this.normalized&&(n=ds(n,this.array),c=ds(c,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=c,this}setXYZ(t,n,c,h){return t=t*this.data.stride+this.offset,this.normalized&&(n=ds(n,this.array),c=ds(c,this.array),h=ds(h,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=c,this.data.array[t+2]=h,this}setXYZW(t,n,c,h,f){return t=t*this.data.stride+this.offset,this.normalized&&(n=ds(n,this.array),c=ds(c,this.array),h=ds(h,this.array),f=ds(f,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=c,this.data.array[t+2]=h,this.data.array[t+3]=f,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let c=0;c<this.count;c++){const h=c*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)n.push(this.data.array[h+f])}return new Ls(new this.array.constructor(n),this.itemSize,this.normalized)}return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Jn(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let c=0;c<this.count;c++){const h=c*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)n.push(this.data.array[h+f])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ms extends Us{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new an(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Vs;const oA=new Ke,Fu=new Ke,Bc=new Ke,aA=new Cn,Sl=new Cn,Ps=new nn,um=new Ke,Hp=new Ke,xs=new Ke,zp=new Cn,pd=new Cn,YA=new Cn;class fs extends gn{constructor(t=new Ms){if(super(),this.isSprite=!0,this.type="Sprite",Vs===void 0){Vs=new ga;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),c=new Ao(n,5);Vs.setIndex([0,1,2,0,2,3]),Vs.setAttribute("position",new Jn(c,3,0,!1)),Vs.setAttribute("uv",new Jn(c,2,3,!1))}this.geometry=Vs,this.material=t,this.center=new Cn(.5,.5)}raycast(t,n){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fu.setFromMatrixScale(this.matrixWorld),Ps.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Bc.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Fu.multiplyScalar(-Bc.z);const c=this.material.rotation;let h,f;c!==0&&(f=Math.cos(c),h=Math.sin(c));const d=this.center;rl(um.set(-.5,-.5,0),Bc,d,Fu,h,f),rl(Hp.set(.5,-.5,0),Bc,d,Fu,h,f),rl(xs.set(.5,.5,0),Bc,d,Fu,h,f),zp.set(0,0),pd.set(1,0),YA.set(1,1);let p=t.ray.intersectTriangle(um,Hp,xs,!1,oA);if(p===null&&(rl(Hp.set(-.5,.5,0),Bc,d,Fu,h,f),pd.set(0,1),p=t.ray.intersectTriangle(um,xs,Hp,!1,oA),p===null))return;const v=t.ray.origin.distanceTo(oA);v<t.near||v>t.far||n.push({distance:v,point:oA.clone(),uv:No.getInterpolation(oA,um,Hp,xs,zp,pd,YA,new Cn),face:null,object:this})}copy(t,n){return super.copy(t,n),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function rl(o,t,n,c,h,f){aA.subVectors(o,n).addScalar(.5).multiply(c),h!==void 0?(Sl.x=f*aA.x-h*aA.y,Sl.y=h*aA.x+f*aA.y):Sl.copy(aA),o.copy(t),o.x+=Sl.x,o.y+=Sl.y,o.applyMatrix4(Ps)}const fd=new Ke,ya=new Fr,R_=new Fr,g0=new Ke,lA=new nn,po=new Ke,Uu=new _c,Ib=new nn,Ic=new ch;class Mo extends As{constructor(t,n){super(t,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Hi,this.bindMatrix=new nn,this.bindMatrixInverse=new nn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new da),this.boundingBox.makeEmpty();const n=t.getAttribute("position");for(let c=0;c<n.count;c++)this.getVertexPosition(c,po),this.boundingBox.expandByPoint(po)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new _c),this.boundingSphere.makeEmpty();const n=t.getAttribute("position");for(let c=0;c<n.count;c++)this.getVertexPosition(c,po),this.boundingSphere.expandByPoint(po)}copy(t,n){return super.copy(t,n),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,n){const c=this.material,h=this.matrixWorld;c!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Uu.copy(this.boundingSphere),Uu.applyMatrix4(h),t.ray.intersectsSphere(Uu)!==!1&&(Ib.copy(h).invert(),Ic.copy(t.ray).applyMatrix4(Ib),this.boundingBox!==null&&Ic.intersectsBox(this.boundingBox)===!1||this._computeIntersections(t,n,Ic)))}getVertexPosition(t,n){return super.getVertexPosition(t,n),this.applyBoneTransform(t,n),n}bind(t,n){this.skeleton=t,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Fr,n=this.geometry.attributes.skinWeight;for(let c=0,h=n.count;c<h;c++){t.fromBufferAttribute(n,c);const f=1/t.manhattanLength();f!==1/0?t.multiplyScalar(f):t.set(1,0,0,0),n.setXYZW(c,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Hi?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,n){const c=this.skeleton,h=this.geometry;ya.fromBufferAttribute(h.attributes.skinIndex,t),R_.fromBufferAttribute(h.attributes.skinWeight,t),fd.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let f=0;f<4;f++){const d=R_.getComponent(f);if(d!==0){const p=ya.getComponent(f);lA.multiplyMatrices(c.bones[p].matrixWorld,c.boneInverses[p]),n.addScaledVector(g0.copy(fd).applyMatrix4(lA),d)}}return n.applyMatrix4(this.bindMatrixInverse)}}class cA extends gn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Zl extends Sr{constructor(t=null,n=1,c=1,h,f,d,p,v,w=1003,S=1003,B,R){super(null,d,p,v,w,S,h,f,B,R),this.isDataTexture=!0,this.image={data:t,width:n,height:c},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Bl=new nn,fo=new nn;class eg{constructor(t=[],n=[]){this.uuid=$c(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),n.length===0)this.calculateInverses();else if(t.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let c=0,h=this.bones.length;c<h;c++)this.boneInverses.push(new nn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,n=this.bones.length;t<n;t++){const c=new nn;this.bones[t]&&c.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(c)}}pose(){for(let t=0,n=this.bones.length;t<n;t++){const c=this.bones[t];c&&c.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,n=this.bones.length;t<n;t++){const c=this.bones[t];c&&(c.parent&&c.parent.isBone?(c.matrix.copy(c.parent.matrixWorld).invert(),c.matrix.multiply(c.matrixWorld)):c.matrix.copy(c.matrixWorld),c.matrix.decompose(c.position,c.quaternion,c.scale))}}update(){const t=this.bones,n=this.boneInverses,c=this.boneMatrices,h=this.boneTexture;for(let f=0,d=t.length;f<d;f++){const p=t[f]?t[f].matrixWorld:fo;Bl.multiplyMatrices(p,n[f]),Bl.toArray(c,16*f)}h!==null&&(h.needsUpdate=!0)}clone(){return new eg(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const n=new Float32Array(t*t*4);n.set(this.boneMatrices);const c=new Zl(n,t,t,fn,Xi);return c.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=c,this}getBoneByName(t){for(let n=0,c=this.bones.length;n<c;n++){const h=this.bones[n];if(h.name===t)return h}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,n){this.uuid=t.uuid;for(let c=0,h=t.bones.length;c<h;c++){const f=t.bones[c];let d=n[f];d===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),d=new cA),this.bones.push(d),this.boneInverses.push(new nn().fromArray(t.boneInverses[c]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const n=this.bones,c=this.boneInverses;for(let h=0,f=n.length;h<f;h++){const d=n[h];t.bones.push(d.uuid);const p=c[h];t.boneInverses.push(p.toArray())}return t}}class ku extends Ls{constructor(t,n,c,h=1){super(t,n,c),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=h}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const go=new nn,Gp=new nn,no=[],Il=new da,ec=new nn,gd=new As,hm=new _c;class Vp extends As{constructor(t,n,c){super(t,n),this.isInstancedMesh=!0,this.instanceMatrix=new ku(new Float32Array(16*c),16),this.instanceColor=null,this.morphTexture=null,this.count=c,this.boundingBox=null,this.boundingSphere=null;for(let h=0;h<c;h++)this.setMatrixAt(h,ec)}computeBoundingBox(){const t=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new da),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let c=0;c<n;c++)this.getMatrixAt(c,go),Il.copy(t.boundingBox).applyMatrix4(go),this.boundingBox.union(Il)}computeBoundingSphere(){const t=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new _c),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let c=0;c<n;c++)this.getMatrixAt(c,go),hm.copy(t.boundingSphere).applyMatrix4(go),this.boundingSphere.union(hm)}copy(t,n){return super.copy(t,n),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,n){n.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,n){n.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,n){const c=n.morphTargetInfluences,h=this.morphTexture.source.data.data,f=t*(c.length+1)+1;for(let d=0;d<c.length;d++)c[d]=h[f+d]}raycast(t,n){const c=this.matrixWorld,h=this.count;if(gd.geometry=this.geometry,gd.material=this.material,gd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hm.copy(this.boundingSphere),hm.applyMatrix4(c),t.ray.intersectsSphere(hm)!==!1))for(let f=0;f<h;f++){this.getMatrixAt(f,go),Gp.multiplyMatrices(c,go),gd.matrixWorld=Gp,gd.raycast(t,no);for(let d=0,p=no.length;d<p;d++){const v=no[d];v.instanceId=f,v.object=this,n.push(v)}no.length=0}}setColorAt(t,n){this.instanceColor===null&&(this.instanceColor=new ku(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),n.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,n){n.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,n){const c=n.morphTargetInfluences,h=c.length+1;this.morphTexture===null&&(this.morphTexture=new Zl(new Float32Array(h*this.count),h,this.count,Ss,Xi));const f=this.morphTexture.source.data.data;let d=0;for(let w=0;w<c.length;w++)d+=c[w];const p=this.geometry.morphTargetsRelative?1:1-d,v=h*t;f[v]=p,f.set(c,v+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class qp extends Us{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new an(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const uA=new Ke,$p=new Ke,D_=new nn,JA=new ch,ss=new _c,En=new Ke,cn=new Ke;class Wi extends gn{constructor(t=new ga,n=new qp){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,c=[0];for(let h=1,f=n.count;h<f;h++)uA.fromBufferAttribute(n,h-1),$p.fromBufferAttribute(n,h),c[h]=c[h-1],c[h]+=uA.distanceTo($p);t.setAttribute("lineDistance",new fa(c,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,n){const c=this.geometry,h=this.matrixWorld,f=t.params.Line.threshold,d=c.drawRange;if(c.boundingSphere===null&&c.computeBoundingSphere(),ss.copy(c.boundingSphere),ss.applyMatrix4(h),ss.radius+=f,t.ray.intersectsSphere(ss)===!1)return;D_.copy(h).invert(),JA.copy(t.ray).applyMatrix4(D_);const p=f/((this.scale.x+this.scale.y+this.scale.z)/3),v=p*p,w=this.isLineSegments?2:1,S=c.index,B=c.attributes.position;if(S!==null){const R=Math.max(0,d.start),D=Math.min(S.count,d.start+d.count);for(let O=R,V=D-1;O<V;O+=w){const $=S.getX(O),G=S.getX(O+1),X=rn(this,t,JA,v,$,G);X&&n.push(X)}if(this.isLineLoop){const O=S.getX(D-1),V=S.getX(R),$=rn(this,t,JA,v,O,V);$&&n.push($)}}else{const R=Math.max(0,d.start),D=Math.min(B.count,d.start+d.count);for(let O=R,V=D-1;O<V;O+=w){const $=rn(this,t,JA,v,O,O+1);$&&n.push($)}if(this.isLineLoop){const O=rn(this,t,JA,v,D-1,R);O&&n.push(O)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const c=t[n[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,f=c.length;h<f;h++){const d=c[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=h}}}}}function rn(o,t,n,c,h,f){const d=o.geometry.attributes.position;if(uA.fromBufferAttribute(d,h),$p.fromBufferAttribute(d,f),n.distanceSqToSegment(uA,$p,En,cn)>c)return;En.applyMatrix4(o.matrixWorld);const p=t.ray.origin.distanceTo(En);return p<t.near||p>t.far?void 0:{distance:p,point:cn.clone().applyMatrix4(o.matrixWorld),index:h,face:null,faceIndex:null,barycoord:null,object:o}}const _r=new Ke,Xo=new Ke;class iu extends Wi{constructor(t,n){super(t,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,c=[];for(let h=0,f=n.count;h<f;h+=2)_r.fromBufferAttribute(n,h),Xo.fromBufferAttribute(n,h+1),c[h]=h===0?0:c[h-1],c[h+1]=c[h]+_r.distanceTo(Xo);t.setAttribute("lineDistance",new fa(c,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Wp extends Wi{constructor(t,n){super(t,n),this.isLineLoop=!0,this.type="LineLoop"}}class vh extends Us{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new an(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const gs=new nn,ms=new ch,Tl=new _c,yh=new Ke;class nu extends gn{constructor(t=new ga,n=new vh){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,n){const c=this.geometry,h=this.matrixWorld,f=t.params.Points.threshold,d=c.drawRange;if(c.boundingSphere===null&&c.computeBoundingSphere(),Tl.copy(c.boundingSphere),Tl.applyMatrix4(h),Tl.radius+=f,t.ray.intersectsSphere(Tl)===!1)return;gs.copy(h).invert(),ms.copy(t.ray).applyMatrix4(gs);const p=f/((this.scale.x+this.scale.y+this.scale.z)/3),v=p*p,w=c.index,S=c.attributes.position;if(w!==null)for(let B=Math.max(0,d.start),R=Math.min(w.count,d.start+d.count);B<R;B++){const D=w.getX(B);yh.fromBufferAttribute(S,D),sl(yh,D,v,h,t,n,this)}else for(let B=Math.max(0,d.start),R=Math.min(S.count,d.start+d.count);B<R;B++)yh.fromBufferAttribute(S,B),sl(yh,B,v,h,t,n,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const c=t[n[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,f=c.length;h<f;h++){const d=c[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=h}}}}}function sl(o,t,n,c,h,f,d){const p=ms.distanceSqToPoint(o);if(p<n){const v=new Ke;ms.closestPointToPoint(o,v),v.applyMatrix4(c);const w=h.ray.origin.distanceTo(v);if(w<h.near||w>h.far)return;f.push({distance:w,distanceToRay:Math.sqrt(p),point:v,index:t,face:null,faceIndex:null,barycoord:null,object:d})}}class hA extends Sr{constructor(t,n,c,h,f,d,p,v,w){super(t,n,c,h,f,d,p,v,w),this.isVideoTexture=!0,this.minFilter=d!==void 0?d:Ci,this.magFilter=f!==void 0?f:Ci,this.generateMipmaps=!1;const S=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function B(){S.needsUpdate=!0,t.requestVideoFrameCallback(B)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t==0&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class mo extends Sr{constructor(t,n,c,h,f,d,p,v,w,S,B,R){super(null,d,p,v,w,S,h,f,B,R),this.isCompressedTexture=!0,this.image={width:n,height:c},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class bh extends mo{constructor(t,n,c,h,f,d){super(t,n,c,f,d),this.isCompressedArrayTexture=!0,this.image.depth=h,this.wrapR=kt,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class F_ extends mo{constructor(t,n,c){super(void 0,t[0].width,t[0].height,n,c,oa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class jp extends Sr{constructor(t,n,c,h,f,d,p,v,w){super(t,n,c,h,f,d,p,v,w),this.isCanvasTexture=!0,this.needsUpdate=!0}}class dA extends ga{constructor(t=1,n=1,c=1,h=32,f=1,d=!1,p=0,v=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:c,radialSegments:h,heightSegments:f,openEnded:d,thetaStart:p,thetaLength:v};const w=this;h=Math.floor(h),f=Math.floor(f);const S=[],B=[],R=[],D=[];let O=0;const V=[],$=c/2;let G=0;function X(te){const ae=O,oe=new Cn,Ae=new Ke;let ve=0;const De=te===!0?t:n,Ne=te===!0?1:-1;for(let vt=1;vt<=h;vt++)B.push(0,$*Ne,0),R.push(0,Ne,0),D.push(.5,.5),O++;const We=O;for(let vt=0;vt<=h;vt++){const ot=vt/h*v+p,nt=Math.cos(ot),st=Math.sin(ot);Ae.x=De*st,Ae.y=$*Ne,Ae.z=De*nt,B.push(Ae.x,Ae.y,Ae.z),R.push(0,Ne,0),oe.x=.5*nt+.5,oe.y=.5*st*Ne+.5,D.push(oe.x,oe.y),O++}for(let vt=0;vt<h;vt++){const ot=ae+vt,nt=We+vt;te===!0?S.push(nt,nt+1,ot):S.push(nt+1,nt,ot),ve+=3}w.addGroup(G,ve,te===!0?1:2),G+=ve}(function(){const te=new Ke,ae=new Ke;let oe=0;const Ae=(n-t)/c;for(let ve=0;ve<=f;ve++){const De=[],Ne=ve/f,We=Ne*(n-t)+t;for(let vt=0;vt<=h;vt++){const ot=vt/h,nt=ot*v+p,st=Math.sin(nt),mt=Math.cos(nt);ae.x=We*st,ae.y=-Ne*c+$,ae.z=We*mt,B.push(ae.x,ae.y,ae.z),te.set(st,Ae,mt).normalize(),R.push(te.x,te.y,te.z),D.push(ot,1-Ne),De.push(O++)}V.push(De)}for(let ve=0;ve<h;ve++)for(let De=0;De<f;De++){const Ne=V[De][ve],We=V[De+1][ve],vt=V[De+1][ve+1],ot=V[De][ve+1];t>0&&(S.push(Ne,We,ot),oe+=3),n>0&&(S.push(We,vt,ot),oe+=3)}w.addGroup(G,oe,0),G+=oe})(),d===!1&&(t>0&&X(!0),n>0&&X(!1)),this.setIndex(S),this.setAttribute("position",new fa(B,3)),this.setAttribute("normal",new fa(R,3)),this.setAttribute("uv",new fa(D,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new dA(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Lu extends ga{constructor(t=1,n=32,c=16,h=0,f=2*Math.PI,d=0,p=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:c,phiStart:h,phiLength:f,thetaStart:d,thetaLength:p},n=Math.max(3,Math.floor(n)),c=Math.max(2,Math.floor(c));const v=Math.min(d+p,Math.PI);let w=0;const S=[],B=new Ke,R=new Ke,D=[],O=[],V=[],$=[];for(let G=0;G<=c;G++){const X=[],te=G/c;let ae=0;G===0&&d===0?ae=.5/n:G===c&&v===Math.PI&&(ae=-.5/n);for(let oe=0;oe<=n;oe++){const Ae=oe/n;B.x=-t*Math.cos(h+Ae*f)*Math.sin(d+te*p),B.y=t*Math.cos(d+te*p),B.z=t*Math.sin(h+Ae*f)*Math.sin(d+te*p),O.push(B.x,B.y,B.z),R.copy(B).normalize(),V.push(R.x,R.y,R.z),$.push(Ae+ae,1-te),X.push(w++)}S.push(X)}for(let G=0;G<c;G++)for(let X=0;X<n;X++){const te=S[G][X+1],ae=S[G][X],oe=S[G+1][X],Ae=S[G+1][X+1];(G!==0||d>0)&&D.push(te,ae,Ae),(G!==c-1||v<Math.PI)&&D.push(ae,oe,Ae)}this.setIndex(D),this.setAttribute("position",new fa(O,3)),this.setAttribute("normal",new fa(V,3)),this.setAttribute("uv",new fa($,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Lu(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Rs extends Us{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new an(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new an(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ba extends Rs{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Cn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ua(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new an(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new an(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new an(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class wh extends qp{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Pu(o,t,n){return o&&o.constructor!==t?typeof t.BYTES_PER_ELEMENT=="number"?new t(o):Array.prototype.slice.call(o):o}function U_(o){const t=o.length,n=new Array(t);for(let c=0;c!==t;++c)n[c]=c;return n.sort(function(c,h){return o[c]-o[h]}),n}function dm(o,t,n){const c=o.length,h=new o.constructor(c);for(let f=0,d=0;d!==c;++f){const p=n[f]*t;for(let v=0;v!==t;++v)h[d++]=o[p+v]}return h}function tg(o,t,n,c){let h=1,f=o[0];for(;f!==void 0&&f[c]===void 0;)f=o[h++];if(f===void 0)return;let d=f[c];if(d!==void 0)if(Array.isArray(d))do d=f[c],d!==void 0&&(t.push(f.time),n.push.apply(n,d)),f=o[h++];while(f!==void 0);else if(d.toArray!==void 0)do d=f[c],d!==void 0&&(t.push(f.time),d.toArray(n,n.length)),f=o[h++];while(f!==void 0);else do d=f[c],d!==void 0&&(t.push(f.time),n.push(d)),f=o[h++];while(f!==void 0)}class md{constructor(t,n,c,h){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=h!==void 0?h:new n.constructor(c),this.sampleValues=n,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let c=this._cachedIndex,h=n[c],f=n[c-1];e:{t:{let d;i:{n:if(!(t<h)){for(let p=c+2;;){if(h===void 0){if(t<f)break n;return c=n.length,this._cachedIndex=c,this.copySampleValue_(c-1)}if(c===p)break;if(f=h,h=n[++c],t<h)break t}d=n.length;break i}if(t>=f)break e;{const p=n[1];t<p&&(c=2,f=p);for(let v=c-2;;){if(f===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(c===v)break;if(h=f,f=n[--c-1],t>=f)break t}d=c,c=0}}for(;c<d;){const p=c+d>>>1;t<n[p]?d=p:c=p+1}if(h=n[c],f=n[c-1],f===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(h===void 0)return c=n.length,this._cachedIndex=c,this.copySampleValue_(c-1)}this._cachedIndex=c,this.intervalChanged_(c,f,h)}return this.interpolate_(c,f,t,h)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,c=this.sampleValues,h=this.valueSize,f=t*h;for(let d=0;d!==h;++d)n[d]=c[f+d];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class E extends md{constructor(t,n,c,h){super(t,n,c,h),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lo,endingEnd:Lo}}intervalChanged_(t,n,c){const h=this.parameterPositions;let f=t-2,d=t+1,p=h[f],v=h[d];if(p===void 0)switch(this.getSettings_().endingStart){case Bo:f=t,p=2*n-c;break;case Vc:f=h.length-2,p=n+h[f]-h[f+1];break;default:f=t,p=c}if(v===void 0)switch(this.getSettings_().endingEnd){case Bo:d=t,v=2*c-n;break;case Vc:d=1,v=c+h[1]-h[0];break;default:d=t-1,v=n}const w=.5*(c-n),S=this.valueSize;this._weightPrev=w/(n-p),this._weightNext=w/(v-c),this._offsetPrev=f*S,this._offsetNext=d*S}interpolate_(t,n,c,h){const f=this.resultBuffer,d=this.sampleValues,p=this.valueSize,v=t*p,w=v-p,S=this._offsetPrev,B=this._offsetNext,R=this._weightPrev,D=this._weightNext,O=(c-n)/(h-n),V=O*O,$=V*O,G=-R*$+2*R*V-R*O,X=(1+R)*$+(-1.5-2*R)*V+(-.5+R)*O+1,te=(-1-D)*$+(1.5+D)*V+.5*O,ae=D*$-D*V;for(let oe=0;oe!==p;++oe)f[oe]=G*d[S+oe]+X*d[w+oe]+te*d[v+oe]+ae*d[B+oe];return f}}class M extends md{constructor(t,n,c,h){super(t,n,c,h)}interpolate_(t,n,c,h){const f=this.resultBuffer,d=this.sampleValues,p=this.valueSize,v=t*p,w=v-p,S=(c-n)/(h-n),B=1-S;for(let R=0;R!==p;++R)f[R]=d[w+R]*B+d[v+R]*S;return f}}class Q extends md{constructor(t,n,c,h){super(t,n,c,h)}interpolate_(t){return this.copySampleValue_(t-1)}}class K{constructor(t,n,c,h){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Pu(n,this.TimeBufferType),this.values=Pu(c,this.ValueBufferType),this.setInterpolation(h||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let c;if(n.toJSON!==this.toJSON)c=n.toJSON(t);else{c={name:t.name,times:Pu(t.times,Array),values:Pu(t.values,Array)};const h=t.getInterpolation();h!==t.DefaultInterpolation&&(c.interpolation=h)}return c.type=t.ValueTypeName,c}InterpolantFactoryMethodDiscrete(t){return new Q(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new M(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new E(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case Gc:n=this.InterpolantFactoryMethodDiscrete;break;case rh:n=this.InterpolantFactoryMethodLinear;break;case ca:n=this.InterpolantFactoryMethodSmooth}if(n===void 0){const c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0){if(t===this.DefaultInterpolation)throw new Error(c);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gc;case this.InterpolantFactoryMethodLinear:return rh;case this.InterpolantFactoryMethodSmooth:return ca}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const n=this.times;for(let c=0,h=n.length;c!==h;++c)n[c]+=t}return this}scale(t){if(t!==1){const n=this.times;for(let c=0,h=n.length;c!==h;++c)n[c]*=t}return this}trim(t,n){const c=this.times,h=c.length;let f=0,d=h-1;for(;f!==h&&c[f]<t;)++f;for(;d!==-1&&c[d]>n;)--d;if(++d,f!==0||d!==h){f>=d&&(d=Math.max(d,1),f=d-1);const p=this.getValueSize();this.times=c.slice(f,d),this.values=this.values.slice(f*p,d*p)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const c=this.times,h=this.values,f=c.length;f===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let d=null;for(let v=0;v!==f;v++){const w=c[v];if(typeof w=="number"&&isNaN(w)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,v,w),t=!1;break}if(d!==null&&d>w){console.error("THREE.KeyframeTrack: Out of order keys.",this,v,w,d),t=!1;break}d=w}if(h!==void 0&&(p=h,ArrayBuffer.isView(p)&&!(p instanceof DataView)))for(let v=0,w=h.length;v!==w;++v){const S=h[v];if(isNaN(S)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,v,S),t=!1;break}}var p;return t}optimize(){const t=this.times.slice(),n=this.values.slice(),c=this.getValueSize(),h=this.getInterpolation()===ca,f=t.length-1;let d=1;for(let p=1;p<f;++p){let v=!1;const w=t[p];if(w!==t[p+1]&&(p!==1||w!==t[0]))if(h)v=!0;else{const S=p*c,B=S-c,R=S+c;for(let D=0;D!==c;++D){const O=n[S+D];if(O!==n[B+D]||O!==n[R+D]){v=!0;break}}}if(v){if(p!==d){t[d]=t[p];const S=p*c,B=d*c;for(let R=0;R!==c;++R)n[B+R]=n[S+R]}++d}}if(f>0){t[d]=t[f];for(let p=f*c,v=d*c,w=0;w!==c;++w)n[v+w]=n[p+w];++d}return d!==t.length?(this.times=t.slice(0,d),this.values=n.slice(0,d*c)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),c=new this.constructor(this.name,t,n);return c.createInterpolant=this.createInterpolant,c}}K.prototype.TimeBufferType=Float32Array,K.prototype.ValueBufferType=Float32Array,K.prototype.DefaultInterpolation=rh;class ne extends K{constructor(t,n,c){super(t,n,c)}}ne.prototype.ValueTypeName="bool",ne.prototype.ValueBufferType=Array,ne.prototype.DefaultInterpolation=Gc,ne.prototype.InterpolantFactoryMethodLinear=void 0,ne.prototype.InterpolantFactoryMethodSmooth=void 0;class he extends K{}he.prototype.ValueTypeName="color";class Qe extends K{}Qe.prototype.ValueTypeName="number";class tt extends md{constructor(t,n,c,h){super(t,n,c,h)}interpolate_(t,n,c,h){const f=this.resultBuffer,d=this.sampleValues,p=this.valueSize,v=(c-n)/(h-n);let w=t*p;for(let S=w+p;w!==S;w+=4)ha.slerpFlat(f,0,d,w-p,d,w,v);return f}}class dt extends K{InterpolantFactoryMethodLinear(t){return new tt(this.times,this.values,this.getValueSize(),t)}}dt.prototype.ValueTypeName="quaternion",dt.prototype.InterpolantFactoryMethodSmooth=void 0;class ni extends K{constructor(t,n,c){super(t,n,c)}}ni.prototype.ValueTypeName="string",ni.prototype.ValueBufferType=Array,ni.prototype.DefaultInterpolation=Gc,ni.prototype.InterpolantFactoryMethodLinear=void 0,ni.prototype.InterpolantFactoryMethodSmooth=void 0;class vi extends K{}vi.prototype.ValueTypeName="vector";class zi{constructor(t="",n=-1,c=[],h=2500){this.name=t,this.tracks=c,this.duration=n,this.blendMode=h,this.uuid=$c(),this.duration<0&&this.resetDuration()}static parse(t){const n=[],c=t.tracks,h=1/(t.fps||1);for(let d=0,p=c.length;d!==p;++d)n.push(Di(c[d]).scale(h));const f=new this(t.name,t.duration,n,t.blendMode);return f.uuid=t.uuid,f}static toJSON(t){const n=[],c=t.tracks,h={name:t.name,duration:t.duration,tracks:n,uuid:t.uuid,blendMode:t.blendMode};for(let f=0,d=c.length;f!==d;++f)n.push(K.toJSON(c[f]));return h}static CreateFromMorphTargetSequence(t,n,c,h){const f=n.length,d=[];for(let p=0;p<f;p++){let v=[],w=[];v.push((p+f-1)%f,p,(p+1)%f),w.push(0,1,0);const S=U_(v);v=dm(v,1,S),w=dm(w,1,S),h||v[0]!==0||(v.push(f),w.push(w[0])),d.push(new Qe(".morphTargetInfluences["+n[p].name+"]",v,w).scale(1/c))}return new this(t,-1,d)}static findByName(t,n){let c=t;if(!Array.isArray(t)){const h=t;c=h.geometry&&h.geometry.animations||h.animations}for(let h=0;h<c.length;h++)if(c[h].name===n)return c[h];return null}static CreateClipsFromMorphTargetSequences(t,n,c){const h={},f=/^([\w-]*?)([\d]+)$/;for(let p=0,v=t.length;p<v;p++){const w=t[p],S=w.name.match(f);if(S&&S.length>1){const B=S[1];let R=h[B];R||(h[B]=R=[]),R.push(w)}}const d=[];for(const p in h)d.push(this.CreateFromMorphTargetSequence(p,h[p],n,c));return d}static parseAnimation(t,n){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const c=function(S,B,R,D,O){if(R.length!==0){const V=[],$=[];tg(R,V,$,D),V.length!==0&&O.push(new S(B,V,$))}},h=[],f=t.name||"default",d=t.fps||30,p=t.blendMode;let v=t.length||-1;const w=t.hierarchy||[];for(let S=0;S<w.length;S++){const B=w[S].keys;if(B&&B.length!==0)if(B[0].morphTargets){const R={};let D;for(D=0;D<B.length;D++)if(B[D].morphTargets)for(let O=0;O<B[D].morphTargets.length;O++)R[B[D].morphTargets[O]]=-1;for(const O in R){const V=[],$=[];for(let G=0;G!==B[D].morphTargets.length;++G){const X=B[D];V.push(X.time),$.push(X.morphTarget===O?1:0)}h.push(new Qe(".morphTargetInfluence["+O+"]",V,$))}v=R.length*d}else{const R=".bones["+n[S].name+"]";c(vi,R+".position",B,"pos",h),c(dt,R+".quaternion",B,"rot",h),c(vi,R+".scale",B,"scl",h)}}return h.length===0?null:new this(f,v,h,p)}resetDuration(){let t=0;for(let n=0,c=this.tracks.length;n!==c;++n){const h=this.tracks[n];t=Math.max(t,h.times[h.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let n=0;n<this.tracks.length;n++)t=t&&this.tracks[n].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Di(o){if(o.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qe;case"vector":case"vector2":case"vector3":case"vector4":return vi;case"color":return he;case"quaternion":return dt;case"bool":case"boolean":return ne;case"string":return ni}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(o.type);if(o.times===void 0){const n=[],c=[];tg(o.keys,n,c,"value"),o.times=n,o.values=c}return t.parse!==void 0?t.parse(o):new t(o.name,o.times,o.values,o.interpolation)}const Sn={enabled:!1,files:{},add:function(o,t){this.enabled!==!1&&(this.files[o]=t)},get:function(o){if(this.enabled!==!1)return this.files[o]},remove:function(o){delete this.files[o]},clear:function(){this.files={}}};class Zn{constructor(t,n,c){const h=this;let f,d=!1,p=0,v=0;const w=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=c,this.itemStart=function(S){v++,d===!1&&h.onStart!==void 0&&h.onStart(S,p,v),d=!0},this.itemEnd=function(S){p++,h.onProgress!==void 0&&h.onProgress(S,p,v),p===v&&(d=!1,h.onLoad!==void 0&&h.onLoad())},this.itemError=function(S){h.onError!==void 0&&h.onError(S)},this.resolveURL=function(S){return f?f(S):S},this.setURLModifier=function(S){return f=S,this},this.addHandler=function(S,B){return w.push(S,B),this},this.removeHandler=function(S){const B=w.indexOf(S);return B!==-1&&w.splice(B,2),this},this.getHandler=function(S){for(let B=0,R=w.length;B<R;B+=2){const D=w[B],O=w[B+1];if(D.global&&(D.lastIndex=0),D.test(S))return O}return null}}}const ri=new Zn;class Qt{constructor(t){this.manager=t!==void 0?t:ri,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const c=this;return new Promise(function(h,f){c.load(t,h,n,f)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Qt.DEFAULT_MATERIAL_NAME="__DEFAULT";const oi={};class qi extends Error{constructor(t,n){super(t),this.response=n}}class Rn extends Qt{constructor(t){super(t)}load(t,n,c,h){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const f=Sn.get(t);if(f!==void 0)return this.manager.itemStart(t),setTimeout(()=>{n&&n(f),this.manager.itemEnd(t)},0),f;if(oi[t]!==void 0)return void oi[t].push({onLoad:n,onProgress:c,onError:h});oi[t]=[],oi[t].push({onLoad:n,onProgress:c,onError:h});const d=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),p=this.mimeType,v=this.responseType;fetch(d).then(w=>{if(w.status===200||w.status===0){if(w.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||w.body===void 0||w.body.getReader===void 0)return w;const S=oi[t],B=w.body.getReader(),R=w.headers.get("X-File-Size")||w.headers.get("Content-Length"),D=R?parseInt(R):0,O=D!==0;let V=0;const $=new ReadableStream({start(G){(function X(){B.read().then(({done:te,value:ae})=>{if(te)G.close();else{V+=ae.byteLength;const oe=new ProgressEvent("progress",{lengthComputable:O,loaded:V,total:D});for(let Ae=0,ve=S.length;Ae<ve;Ae++){const De=S[Ae];De.onProgress&&De.onProgress(oe)}G.enqueue(ae),X()}},te=>{G.error(te)})})()}});return new Response($)}throw new qi(`fetch for "${w.url}" responded with ${w.status}: ${w.statusText}`,w)}).then(w=>{switch(v){case"arraybuffer":return w.arrayBuffer();case"blob":return w.blob();case"document":return w.text().then(S=>new DOMParser().parseFromString(S,p));case"json":return w.json();default:if(p===void 0)return w.text();{const S=/charset="?([^;"\s]*)"?/i.exec(p),B=S&&S[1]?S[1].toLowerCase():void 0,R=new TextDecoder(B);return w.arrayBuffer().then(D=>R.decode(D))}}}).then(w=>{Sn.add(t,w);const S=oi[t];delete oi[t];for(let B=0,R=S.length;B<R;B++){const D=S[B];D.onLoad&&D.onLoad(w)}}).catch(w=>{const S=oi[t];if(S===void 0)throw this.manager.itemError(t),w;delete oi[t];for(let B=0,R=S.length;B<R;B++){const D=S[B];D.onError&&D.onError(w)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Qn extends Qt{constructor(t){super(t)}load(t,n,c,h){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const f=this,d=Sn.get(t);if(d!==void 0)return f.manager.itemStart(t),setTimeout(function(){n&&n(d),f.manager.itemEnd(t)},0),d;const p=Kd("img");function v(){S(),Sn.add(t,this),n&&n(this),f.manager.itemEnd(t)}function w(B){S(),h&&h(B),f.manager.itemError(t),f.manager.itemEnd(t)}function S(){p.removeEventListener("load",v,!1),p.removeEventListener("error",w,!1)}return p.addEventListener("load",v,!1),p.addEventListener("error",w,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(p.crossOrigin=this.crossOrigin),f.manager.itemStart(t),p.src=t,p}}class vr extends Qt{constructor(t){super(t)}load(t,n,c,h){const f=this,d=new Zl,p=new Rn(this.manager);return p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setPath(this.path),p.setWithCredentials(f.withCredentials),p.load(t,function(v){let w;try{w=f.parse(v)}catch(S){if(h===void 0)return void console.error(S);h(S)}w.image!==void 0?d.image=w.image:w.data!==void 0&&(d.image.width=w.width,d.image.height=w.height,d.image.data=w.data),d.wrapS=w.wrapS!==void 0?w.wrapS:kt,d.wrapT=w.wrapT!==void 0?w.wrapT:kt,d.magFilter=w.magFilter!==void 0?w.magFilter:Ci,d.minFilter=w.minFilter!==void 0?w.minFilter:Ci,d.anisotropy=w.anisotropy!==void 0?w.anisotropy:1,w.colorSpace!==void 0&&(d.colorSpace=w.colorSpace),w.flipY!==void 0&&(d.flipY=w.flipY),w.format!==void 0&&(d.format=w.format),w.type!==void 0&&(d.type=w.type),w.mipmaps!==void 0&&(d.mipmaps=w.mipmaps,d.minFilter=en),w.mipmapCount===1&&(d.minFilter=Ci),w.generateMipmaps!==void 0&&(d.generateMipmaps=w.generateMipmaps),d.needsUpdate=!0,n&&n(d,w)},c,h),d}}class Dn extends Qt{constructor(t){super(t)}load(t,n,c,h){const f=new Sr,d=new Qn(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(t,function(p){f.image=p,f.needsUpdate=!0,n!==void 0&&n(f)},c,h),f}}class os extends gn{constructor(t,n=1){super(),this.isLight=!0,this.type="Light",this.color=new an(t),this.intensity=n}dispose(){}copy(t,n){return super.copy(t,n),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const n=super.toJSON(t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const as=new nn,_s=new Ke,Nn=new Ke;class ur{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Cn(512,512),this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rp,this._frameExtents=new Cn(1,1),this._viewportCount=1,this._viewports=[new Fr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const n=this.camera,c=this.matrix;_s.setFromMatrixPosition(t.matrixWorld),n.position.copy(_s),Nn.setFromMatrixPosition(t.target.matrixWorld),n.lookAt(Nn),n.updateMatrixWorld(),as.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(as),c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),c.multiply(as)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class _o extends ur{constructor(){super(new zs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const n=this.camera,c=2*oh*t.angle*this.focus,h=this.mapSize.width/this.mapSize.height,f=t.distance||n.far;c===n.fov&&h===n.aspect&&f===n.far||(n.fov=c,n.aspect=h,n.far=f,n.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Ur extends os{constructor(t,n,c=0,h=Math.PI/3,f=0,d=2){super(t,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(gn.DEFAULT_UP),this.updateMatrix(),this.target=new gn,this.distance=c,this.angle=h,this.penumbra=f,this.decay=d,this.map=null,this.shadow=new _o}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const xh=new nn,ZA=new Ke,kr=new Ke;class Tb extends ur{constructor(){super(new zs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Cn(4,2),this._viewportCount=6,this._viewports=[new Fr(2,1,1,1),new Fr(0,1,1,1),new Fr(3,1,1,1),new Fr(1,1,1,1),new Fr(3,0,1,1),new Fr(1,0,1,1)],this._cubeDirections=[new Ke(1,0,0),new Ke(-1,0,0),new Ke(0,0,1),new Ke(0,0,-1),new Ke(0,1,0),new Ke(0,-1,0)],this._cubeUps=[new Ke(0,1,0),new Ke(0,1,0),new Ke(0,1,0),new Ke(0,1,0),new Ke(0,0,1),new Ke(0,0,-1)]}updateMatrices(t,n=0){const c=this.camera,h=this.matrix,f=t.distance||c.far;f!==c.far&&(c.far=f,c.updateProjectionMatrix()),ZA.setFromMatrixPosition(t.matrixWorld),c.position.copy(ZA),kr.copy(c.position),kr.add(this._cubeDirections[n]),c.up.copy(this._cubeUps[n]),c.lookAt(kr),c.updateMatrixWorld(),h.makeTranslation(-ZA.x,-ZA.y,-ZA.z),xh.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xh)}}class m0 extends os{constructor(t,n,c=0,h=2){super(t,n),this.isPointLight=!0,this.type="PointLight",this.distance=c,this.decay=h,this.shadow=new Tb}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Mb extends ur{constructor(){super(new io(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _M extends os{constructor(t,n){super(t,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gn.DEFAULT_UP),this.updateMatrix(),this.target=new gn,this.shadow=new Mb}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class GL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Ke)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const c=t.x,h=t.y,f=t.z,d=this.coefficients;return n.copy(d[0]).multiplyScalar(.282095),n.addScaledVector(d[1],.488603*h),n.addScaledVector(d[2],.488603*f),n.addScaledVector(d[3],.488603*c),n.addScaledVector(d[4],c*h*1.092548),n.addScaledVector(d[5],h*f*1.092548),n.addScaledVector(d[6],.315392*(3*f*f-1)),n.addScaledVector(d[7],c*f*1.092548),n.addScaledVector(d[8],.546274*(c*c-h*h)),n}getIrradianceAt(t,n){const c=t.x,h=t.y,f=t.z,d=this.coefficients;return n.copy(d[0]).multiplyScalar(.886227),n.addScaledVector(d[1],1.023328*h),n.addScaledVector(d[2],1.023328*f),n.addScaledVector(d[3],1.023328*c),n.addScaledVector(d[4],.858086*c*h),n.addScaledVector(d[5],.858086*h*f),n.addScaledVector(d[6],.743125*f*f-.247708),n.addScaledVector(d[7],.858086*c*f),n.addScaledVector(d[8],.429043*(c*c-h*h)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let c=0;c<9;c++)this.coefficients[c].addScaledVector(t.coefficients[c],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let c=0;c<9;c++)this.coefficients[c].lerp(t.coefficients[c],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n=0){const c=this.coefficients;for(let h=0;h<9;h++)c[h].fromArray(t,n+3*h);return this}toArray(t=[],n=0){const c=this.coefficients;for(let h=0;h<9;h++)c[h].toArray(t,n+3*h);return t}static getBasisAt(t,n){const c=t.x,h=t.y,f=t.z;n[0]=.282095,n[1]=.488603*h,n[2]=.488603*f,n[3]=.488603*c,n[4]=1.092548*c*h,n[5]=1.092548*h*f,n[6]=.315392*(3*f*f-1),n[7]=1.092548*c*f,n[8]=.546274*(c*c-h*h)}}class VL extends os{constructor(t=new GL,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const n=super.toJSON(t);return n.object.sh=this.sh.toArray(),n}}class Am{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let n="";for(let c=0,h=t.length;c<h;c++)n+=String.fromCharCode(t[c]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(t){const n=t.lastIndexOf("/");return n===-1?"./":t.slice(0,n+1)}static resolveURL(t,n){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(t)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:n+t)}}class _0 extends Qt{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,n,c,h){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const f=this,d=Sn.get(t);if(d!==void 0)return f.manager.itemStart(t),d.then?void d.then(w=>{n&&n(w),f.manager.itemEnd(t)}).catch(w=>{h&&h(w)}):(setTimeout(function(){n&&n(d),f.manager.itemEnd(t)},0),d);const p={};p.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",p.headers=this.requestHeader;const v=fetch(t,p).then(function(w){return w.blob()}).then(function(w){return createImageBitmap(w,Object.assign(f.options,{colorSpaceConversion:"none"}))}).then(function(w){return Sn.add(t,w),n&&n(w),f.manager.itemEnd(t),w}).catch(function(w){h&&h(w),Sn.remove(t),f.manager.itemError(t),f.manager.itemEnd(t)});Sn.add(t,v),f.manager.itemStart(t)}}class $S{constructor(t,n,c){let h,f,d;switch(this.binding=t,this.valueSize=c,n){case"quaternion":h=this._slerp,f=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*c),this._workIndex=5;break;case"string":case"bool":h=this._select,f=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(5*c);break;default:h=this._lerp,f=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*c)}this._mixBufferRegion=h,this._mixBufferRegionAdditive=f,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,n){const c=this.buffer,h=this.valueSize,f=t*h+h;let d=this.cumulativeWeight;if(d===0){for(let p=0;p!==h;++p)c[f+p]=c[p];d=n}else{d+=n;const p=n/d;this._mixBufferRegion(c,f,0,p,h)}this.cumulativeWeight=d}accumulateAdditive(t){const n=this.buffer,c=this.valueSize,h=c*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,h,0,t,c),this.cumulativeWeightAdditive+=t}apply(t){const n=this.valueSize,c=this.buffer,h=t*n+n,f=this.cumulativeWeight,d=this.cumulativeWeightAdditive,p=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1){const v=n*this._origIndex;this._mixBufferRegion(c,h,v,1-f,n)}d>0&&this._mixBufferRegionAdditive(c,h,this._addIndex*n,1,n);for(let v=n,w=n+n;v!==w;++v)if(c[v]!==c[v+n]){p.setValue(c,h);break}}saveOriginalState(){const t=this.binding,n=this.buffer,c=this.valueSize,h=c*this._origIndex;t.getValue(n,h);for(let f=c,d=h;f!==d;++f)n[f]=n[h+f%c];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,n=t+this.valueSize;for(let c=t;c<n;c++)this.buffer[c]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let c=0;c<this.valueSize;c++)this.buffer[n+c]=this.buffer[t+c]}_select(t,n,c,h,f){if(h>=.5)for(let d=0;d!==f;++d)t[n+d]=t[c+d]}_slerp(t,n,c,h){ha.slerpFlat(t,n,t,n,t,c,h)}_slerpAdditive(t,n,c,h,f){const d=this._workIndex*f;ha.multiplyQuaternionsFlat(t,d,t,n,t,c),ha.slerpFlat(t,n,t,n,t,d,h)}_lerp(t,n,c,h,f){const d=1-h;for(let p=0;p!==f;++p){const v=n+p;t[v]=t[v]*d+t[c+p]*h}}_lerpAdditive(t,n,c,h,f){for(let d=0;d!==f;++d){const p=n+d;t[p]=t[p]+t[c+d]*h}}}const v0="\\[\\]\\.:\\/",WS=new RegExp("["+v0+"]","g"),ig="[^"+v0+"]",Kp="[^"+v0.replace("\\.","")+"]",Rb=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",ig)+/(WCOD+)?/.source.replace("WCOD",Kp)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ig)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ig)+"$"),qL=["material","materials","bones","map"];class Zr{constructor(t,n,c){this.path=n,this.parsedPath=c||Zr.parseTrackName(n),this.node=Zr.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,c){return t&&t.isAnimationObjectGroup?new Zr.Composite(t,n,c):new Zr(t,n,c)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(WS,"")}static parseTrackName(t){const n=Rb.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const c={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},h=c.nodeName&&c.nodeName.lastIndexOf(".");if(h!==void 0&&h!==-1){const f=c.nodeName.substring(h+1);qL.indexOf(f)!==-1&&(c.nodeName=c.nodeName.substring(0,h),c.objectName=f)}if(c.propertyName===null||c.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return c}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){const c=t.skeleton.getBoneByName(n);if(c!==void 0)return c}if(t.children){const c=function(f){for(let d=0;d<f.length;d++){const p=f[d];if(p.name===n||p.uuid===n)return p;const v=c(p.children);if(v)return v}return null},h=c(t.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const c=this.resolvedProperty;for(let h=0,f=c.length;h!==f;++h)t[n++]=c[h]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const c=this.resolvedProperty;for(let h=0,f=c.length;h!==f;++h)c[h]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const c=this.resolvedProperty;for(let h=0,f=c.length;h!==f;++h)c[h]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const c=this.resolvedProperty;for(let h=0,f=c.length;h!==f;++h)c[h]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,c=n.objectName,h=n.propertyName;let f=n.propertyIndex;if(t||(t=Zr.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(c){let w=n.objectIndex;switch(c){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let S=0;S<t.length;S++)if(t[S].name===w){w=S;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(t[c]===void 0)return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[c]}if(w!==void 0){if(t[w]===void 0)return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[w]}}const d=t[h];if(d===void 0){const w=n.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+w+"."+h+" but it wasn't found.",t)}let p=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?p=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(p=this.Versioning.MatrixWorldNeedsUpdate);let v=this.BindingType.Direct;if(f!==void 0){if(h==="morphTargetInfluences"){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);t.morphTargetDictionary[f]!==void 0&&(f=t.morphTargetDictionary[f])}v=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=f}else d.fromArray!==void 0&&d.toArray!==void 0?(v=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(v=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=h;this.getValue=this.GetterByBindingType[v],this.setValue=this.SetterByBindingTypeAndVersioning[v][p]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Zr.Composite=class{constructor(o,t,n){const c=n||Zr.parseTrackName(t);this._targetGroup=o,this._bindings=o.subscribe_(t,c)}getValue(o,t){this.bind();const n=this._targetGroup.nCachedObjects_,c=this._bindings[n];c!==void 0&&c.getValue(o,t)}setValue(o,t){const n=this._bindings;for(let c=this._targetGroup.nCachedObjects_,h=n.length;c!==h;++c)n[c].setValue(o,t)}bind(){const o=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=o.length;t!==n;++t)o[t].bind()}unbind(){const o=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=o.length;t!==n;++t)o[t].unbind()}},Zr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Zr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Zr.prototype.GetterByBindingType=[Zr.prototype._getValue_direct,Zr.prototype._getValue_array,Zr.prototype._getValue_arrayElement,Zr.prototype._getValue_toArray],Zr.prototype.SetterByBindingTypeAndVersioning=[[Zr.prototype._setValue_direct,Zr.prototype._setValue_direct_setNeedsUpdate,Zr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zr.prototype._setValue_array,Zr.prototype._setValue_array_setNeedsUpdate,Zr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zr.prototype._setValue_arrayElement,Zr.prototype._setValue_arrayElement_setNeedsUpdate,Zr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zr.prototype._setValue_fromArray,Zr.prototype._setValue_fromArray_setNeedsUpdate,Zr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vM{constructor(t,n,c=null,h=n.blendMode){this._mixer=t,this._clip=n,this._localRoot=c,this.blendMode=h;const f=n.tracks,d=f.length,p=new Array(d),v={endingStart:Lo,endingEnd:Lo};for(let w=0;w!==d;++w){const S=f[w].createInterpolant(null);p[w]=S,S.settings=v}this._interpolantSettings=v,this._interpolants=p,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,c){if(t.fadeOut(n),this.fadeIn(n),c){const h=this._clip.duration,f=t._clip.duration,d=f/h,p=h/f;t.warp(1,d,n),this.warp(p,1,n)}return this}crossFadeTo(t,n,c){return t.crossFadeFrom(this,n,c)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,c){const h=this._mixer,f=h.time,d=this.timeScale;let p=this._timeScaleInterpolant;p===null&&(p=h._lendControlInterpolant(),this._timeScaleInterpolant=p);const v=p.parameterPositions,w=p.sampleValues;return v[0]=f,v[1]=f+c,w[0]=t/d,w[1]=n/d,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,c,h){if(!this.enabled)return void this._updateWeight(t);const f=this._startTime;if(f!==null){const v=(t-f)*c;v<0||c===0?n=0:(this._startTime=null,n=c*v)}n*=this._updateTimeScale(t);const d=this._updateTime(n),p=this._updateWeight(t);if(p>0){const v=this._interpolants,w=this._propertyBindings;if(this.blendMode===2501)for(let S=0,B=v.length;S!==B;++S)v[S].evaluate(d),w[S].accumulateAdditive(p);else for(let S=0,B=v.length;S!==B;++S)v[S].evaluate(d),w[S].accumulate(h,p)}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const c=this._weightInterpolant;if(c!==null){const h=c.evaluate(t)[0];n*=h,t>c.parameterPositions[1]&&(this.stopFading(),h===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const c=this._timeScaleInterpolant;c!==null&&(n*=c.evaluate(t)[0],t>c.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n))}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,c=this.loop;let h=this.time+t,f=this._loopCount;const d=c===Zh;if(t===0)return f===-1||!d||1&~f?h:n-h;if(c===2200){f===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(h>=n)h=n;else{if(!(h<0)){this.time=h;break e}h=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=h,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(f===-1&&(t>=0?(f=0,this._setEndings(!0,this.repetitions===0,d)):this._setEndings(this.repetitions===0,!0,d)),h>=n||h<0){const p=Math.floor(h/n);h-=n*p,f+=Math.abs(p);const v=this.repetitions-f;if(v<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,h=t>0?n:0,this.time=h,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(v===1){const w=t<0;this._setEndings(w,!w,d)}else this._setEndings(!1,!1,d);this._loopCount=f,this.time=h,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:p})}}else this.time=h;if(d&&!(1&~f))return n-h}return h}_setEndings(t,n,c){const h=this._interpolantSettings;c?(h.endingStart=Bo,h.endingEnd=Bo):(h.endingStart=t?this.zeroSlopeAtStart?Bo:Lo:Vc,h.endingEnd=n?this.zeroSlopeAtEnd?Bo:Lo:Vc)}_scheduleFading(t,n,c){const h=this._mixer,f=h.time;let d=this._weightInterpolant;d===null&&(d=h._lendControlInterpolant(),this._weightInterpolant=d);const p=d.parameterPositions,v=d.sampleValues;return p[0]=f,v[0]=n,p[1]=f+t,v[1]=c,this}}const yM=new Float32Array(1);class bM extends qc{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,n){const c=t._localRoot||this._root,h=t._clip.tracks,f=h.length,d=t._propertyBindings,p=t._interpolants,v=c.uuid,w=this._bindingsByRootAndName;let S=w[v];S===void 0&&(S={},w[v]=S);for(let B=0;B!==f;++B){const R=h[B],D=R.name;let O=S[D];if(O!==void 0)++O.referenceCount,d[B]=O;else{if(O=d[B],O!==void 0){O._cacheIndex===null&&(++O.referenceCount,this._addInactiveBinding(O,v,D));continue}const V=n&&n._propertyBindings[B].binding.parsedPath;O=new $S(Zr.create(c,D,V),R.ValueTypeName,R.getValueSize()),++O.referenceCount,this._addInactiveBinding(O,v,D),d[B]=O}p[B].resultBuffer=O.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const c=(t._localRoot||this._root).uuid,h=t._clip.uuid,f=this._actionsByClip[h];this._bindAction(t,f&&f.knownActions[0]),this._addInactiveAction(t,h,c)}const n=t._propertyBindings;for(let c=0,h=n.length;c!==h;++c){const f=n[c];f.useCount++==0&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const n=t._propertyBindings;for(let c=0,h=n.length;c!==h;++c){const f=n[c];--f.useCount==0&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const n=t._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(t,n,c){const h=this._actions,f=this._actionsByClip;let d=f[n];if(d===void 0)d={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,f[n]=d;else{const p=d.knownActions;t._byClipCacheIndex=p.length,p.push(t)}t._cacheIndex=h.length,h.push(t),d.actionByRoot[c]=t}_removeInactiveAction(t){const n=this._actions,c=n[n.length-1],h=t._cacheIndex;c._cacheIndex=h,n[h]=c,n.pop(),t._cacheIndex=null;const f=t._clip.uuid,d=this._actionsByClip,p=d[f],v=p.knownActions,w=v[v.length-1],S=t._byClipCacheIndex;w._byClipCacheIndex=S,v[S]=w,v.pop(),t._byClipCacheIndex=null,delete p.actionByRoot[(t._localRoot||this._root).uuid],v.length===0&&delete d[f],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const n=t._propertyBindings;for(let c=0,h=n.length;c!==h;++c){const f=n[c];--f.referenceCount==0&&this._removeInactiveBinding(f)}}_lendAction(t){const n=this._actions,c=t._cacheIndex,h=this._nActiveActions++,f=n[h];t._cacheIndex=h,n[h]=t,f._cacheIndex=c,n[c]=f}_takeBackAction(t){const n=this._actions,c=t._cacheIndex,h=--this._nActiveActions,f=n[h];t._cacheIndex=h,n[h]=t,f._cacheIndex=c,n[c]=f}_addInactiveBinding(t,n,c){const h=this._bindingsByRootAndName,f=this._bindings;let d=h[n];d===void 0&&(d={},h[n]=d),d[c]=t,t._cacheIndex=f.length,f.push(t)}_removeInactiveBinding(t){const n=this._bindings,c=t.binding,h=c.rootNode.uuid,f=c.path,d=this._bindingsByRootAndName,p=d[h],v=n[n.length-1],w=t._cacheIndex;v._cacheIndex=w,n[w]=v,n.pop(),delete p[f],Object.keys(p).length===0&&delete d[h]}_lendBinding(t){const n=this._bindings,c=t._cacheIndex,h=this._nActiveBindings++,f=n[h];t._cacheIndex=h,n[h]=t,f._cacheIndex=c,n[c]=f}_takeBackBinding(t){const n=this._bindings,c=t._cacheIndex,h=--this._nActiveBindings,f=n[h];t._cacheIndex=h,n[h]=t,f._cacheIndex=c,n[c]=f}_lendControlInterpolant(){const t=this._controlInterpolants,n=this._nActiveControlInterpolants++;let c=t[n];return c===void 0&&(c=new M(new Float32Array(2),new Float32Array(2),1,yM),c.__cacheIndex=n,t[n]=c),c}_takeBackControlInterpolant(t){const n=this._controlInterpolants,c=t.__cacheIndex,h=--this._nActiveControlInterpolants,f=n[h];t.__cacheIndex=h,n[h]=t,f.__cacheIndex=c,n[c]=f}clipAction(t,n,c){const h=n||this._root,f=h.uuid;let d=typeof t=="string"?zi.findByName(h,t):t;const p=d!==null?d.uuid:t,v=this._actionsByClip[p];let w=null;if(c===void 0&&(c=d!==null?d.blendMode:2500),v!==void 0){const B=v.actionByRoot[f];if(B!==void 0&&B.blendMode===c)return B;w=v.knownActions[0],d===null&&(d=w._clip)}if(d===null)return null;const S=new vM(this,d,n,c);return this._bindAction(S,w),this._addInactiveAction(S,p,f),S}existingAction(t,n){const c=n||this._root,h=c.uuid,f=typeof t=="string"?zi.findByName(c,t):t,d=f?f.uuid:t,p=this._actionsByClip[d];return p!==void 0&&p.actionByRoot[h]||null}stopAllAction(){const t=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const n=this._actions,c=this._nActiveActions,h=this.time+=t,f=Math.sign(t),d=this._accuIndex^=1;for(let w=0;w!==c;++w)n[w]._update(h,t,f,d);const p=this._bindings,v=this._nActiveBindings;for(let w=0;w!==v;++w)p[w].apply(d);return this}setTime(t){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const n=this._actions,c=t.uuid,h=this._actionsByClip,f=h[c];if(f!==void 0){const d=f.knownActions;for(let p=0,v=d.length;p!==v;++p){const w=d[p];this._deactivateAction(w);const S=w._cacheIndex,B=n[n.length-1];w._cacheIndex=null,w._byClipCacheIndex=null,B._cacheIndex=S,n[S]=B,n.pop(),this._removeInactiveBindingsForAction(w)}delete h[c]}}uncacheRoot(t){const n=t.uuid,c=this._actionsByClip;for(const f in c){const d=c[f].actionByRoot[n];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const h=this._bindingsByRootAndName[n];if(h!==void 0)for(const f in h){const d=h[f];d.restoreOriginalState(),this._removeInactiveBinding(d)}}uncacheAction(t,n){const c=this.existingAction(t,n);c!==null&&(this._deactivateAction(c),this._removeInactiveAction(c))}}class jS{constructor(t){this.value=t}clone(){return new jS(this.value.clone===void 0?this.value:this.value.clone())}}const wx=new nn;class xx{constructor(t,n,c=0,h=1/0){this.ray=new ch(t,n),this.near=c,this.far=h,this.camera=null,this.layers=new Qf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,n){this.ray.set(t,n)}setFromCamera(t,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(t){return wx.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(wx),this}intersectObject(t,n=!0,c=[]){return XS(t,this,c,n),c.sort(KS),c}intersectObjects(t,n=!0,c=[]){for(let h=0,f=t.length;h<f;h++)XS(t[h],this,c,n);return c.sort(KS),c}}function KS(o,t){return o.distance-t.distance}function XS(o,t,n,c){let h=!0;if(o.layers.test(t.layers)&&o.raycast(t,n)===!1&&(h=!1),h===!0&&c===!0){const f=o.children;for(let d=0,p=f.length;d<p;d++)XS(f[d],t,n,!0)}}class y0{constructor(t=1,n=0,c=0){return this.radius=t,this.phi=n,this.theta=c,this}set(t,n,c){return this.radius=t,this.phi=n,this.theta=c,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,c){return this.radius=Math.sqrt(t*t+n*n+c*c),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,c),this.phi=Math.acos(ua(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Cx=new Ke;let Ex,YS;class k_ extends gn{constructor(t=new Ke(0,0,1),n=new Ke(0,0,0),c=1,h=16776960,f=.2*c,d=.2*f){super(),this.type="ArrowHelper",Ex===void 0&&(Ex=new ga,Ex.setAttribute("position",new fa([0,0,0,0,1,0],3)),YS=new dA(0,.5,1,5,1),YS.translate(0,-.5,0)),this.position.copy(n),this.line=new Wi(Ex,new qp({color:h,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new As(YS,new Wl({color:h,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(c,f,d)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Cx.set(t.z,0,-t.x).normalize();const n=Math.acos(t.y);this.quaternion.setFromAxisAngle(Cx,n)}}setLength(t,n=.2*t,c=.2*n){this.line.scale.set(1,Math.max(1e-4,t-n),1),this.line.updateMatrix(),this.cone.scale.set(c,n,c),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Oi}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Oi);const wM=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,JS=wM&&self.XRSession.prototype.requestHitTestSource!=null,Lr=self.ResizeObserver!=null,Db=self.IntersectionObserver!=null,Fb=JS;(()=>{const o=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))})();const ZS=/android/i.test(navigator.userAgent),xM=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,eB=/firefox/i.test(navigator.userAgent),Ub=/OculusBrowser/.test(navigator.userAgent),Sx=ZS&&!eB&&!Ub,b0=!!(window.webkit&&window.webkit.messageHandlers),tB=(()=>{if(xM){if(b0)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const o=document.createElement("a");return!!(o.relList&&o.relList.supports&&o.relList.supports("ar"))}}return!1})(),CM=o=>o&&o!=="null"?SM(o):null,EM=()=>{if(Fb)return;const o=[];throw wM||o.push("WebXR Device API"),JS||o.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${o.join(", ")}`)},SM=o=>new URL(o,window.location.toString()).toString(),iB=(o,t)=>{let n=null;return(...c)=>{n!=null&&self.clearTimeout(n),n=self.setTimeout(()=>{n=null,o(...c)},t)}},_d=(o,t,n)=>Math.max(t,Math.min(n,o)),Os=(()=>{const o=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(o)})();var ng=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const Ha=Symbol("currentEnvironmentMap"),Bx=Symbol("currentBackground"),w0=Symbol("updateEnvironment"),x0=Symbol("cancelEnvironmentUpdate"),Ix=Ie`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`,BM=Ie`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`,IM=Ie`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`,nB=Ie`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${IM}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${BM}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${Ix}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,kb=new WeakMap;function $L(){let o,t;function n(c,h,f,d,p,v){const w=v.num_components(),S=f.num_points()*w,B=S*p.BYTES_PER_ELEMENT,R=function(V,$){switch($){case Float32Array:return V.DT_FLOAT32;case Int8Array:return V.DT_INT8;case Int16Array:return V.DT_INT16;case Int32Array:return V.DT_INT32;case Uint8Array:return V.DT_UINT8;case Uint16Array:return V.DT_UINT16;case Uint32Array:return V.DT_UINT32}}(c,p),D=c._malloc(B);h.GetAttributeDataArrayForAllPoints(f,v,R,B,D);const O=new p(c.HEAPF32.buffer,D,S).slice();return c._free(D),{name:d,array:O,itemSize:w}}onmessage=function(c){const h=c.data;switch(h.type){case"init":o=h.decoderConfig,t=new Promise(function(p){o.onModuleLoaded=function(v){p({draco:v})},DracoDecoderModule(o)});break;case"decode":const f=h.buffer,d=h.taskConfig;t.then(p=>{const v=p.draco,w=new v.Decoder;try{const S=function(R,D,O,V){const $=V.attributeIDs,G=V.attributeTypes;let X,te;const ae=D.GetEncodedGeometryType(O);if(ae===R.TRIANGULAR_MESH)X=new R.Mesh,te=D.DecodeArrayToMesh(O,O.byteLength,X);else{if(ae!==R.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");X=new R.PointCloud,te=D.DecodeArrayToPointCloud(O,O.byteLength,X)}if(!te.ok()||X.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+te.error_msg());const oe={index:null,attributes:[]};for(const Ae in $){const ve=self[G[Ae]];let De,Ne;if(V.useUniqueIDs)Ne=$[Ae],De=D.GetAttributeByUniqueId(X,Ne);else{if(Ne=D.GetAttributeId(X,R[$[Ae]]),Ne===-1)continue;De=D.GetAttribute(X,Ne)}const We=n(R,D,X,Ae,ve,De);Ae==="color"&&(We.vertexColorSpace=V.vertexColorSpace),oe.attributes.push(We)}return ae===R.TRIANGULAR_MESH&&(oe.index=function(Ae,ve,De){const Ne=3*De.num_faces(),We=4*Ne,vt=Ae._malloc(We);ve.GetTrianglesUInt32Array(De,We,vt);const ot=new Uint32Array(Ae.HEAPF32.buffer,vt,Ne).slice();return Ae._free(vt),{array:ot,itemSize:1}}(R,D,X)),R.destroy(X),oe}(v,w,new Int8Array(f),d),B=S.attributes.map(R=>R.array.buffer);S.index&&B.push(S.index.array.buffer),self.postMessage({type:"decode",id:h.id,geometry:S},B)}catch(S){console.error(S),self.postMessage({type:"error",id:h.id,error:S.message})}finally{v.destroy(w)}})}}}function rB(o,t){if(t===0)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),o;if(t===2||t===1){let n=o.getIndex();if(n===null){const d=[],p=o.getAttribute("position");if(p===void 0)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),o;for(let v=0;v<p.count;v++)d.push(v);o.setIndex(d),n=o.getIndex()}const c=n.count-2,h=[];if(t===2)for(let d=1;d<=c;d++)h.push(n.getX(0)),h.push(n.getX(d)),h.push(n.getX(d+1));else for(let d=0;d<c;d++)d%2==0?(h.push(n.getX(d)),h.push(n.getX(d+1)),h.push(n.getX(d+2))):(h.push(n.getX(d+2)),h.push(n.getX(d+1)),h.push(n.getX(d)));h.length/3!==c&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const f=o.clone();return f.setIndex(h),f.clearGroups(),f}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),o}class WL extends Qt{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new sB(n)}),this.register(function(n){return new KL(n)}),this.register(function(n){return new AA(n)}),this.register(function(n){return new FM(n)}),this.register(function(n){return new Tx(n)}),this.register(function(n){return new oB(n)}),this.register(function(n){return new YL(n)}),this.register(function(n){return new ep(n)}),this.register(function(n){return new aB(n)}),this.register(function(n){return new MM(n)}),this.register(function(n){return new RM(n)}),this.register(function(n){return new XL(n)}),this.register(function(n){return new Lb(n)}),this.register(function(n){return new DM(n)}),this.register(function(n){return new jL(n)}),this.register(function(n){return new rg(n)}),this.register(function(n){return new JL(n)})}load(t,n,c,h){const f=this;let d;if(this.resourcePath!=="")d=this.resourcePath;else if(this.path!==""){const w=Am.extractUrlBase(t);d=Am.resolveURL(w,this.path)}else d=Am.extractUrlBase(t);this.manager.itemStart(t);const p=function(w){h?h(w):console.error(w),f.manager.itemError(t),f.manager.itemEnd(t)},v=new Rn(this.manager);v.setPath(this.path),v.setResponseType("arraybuffer"),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(t,function(w){try{f.parse(w,d,function(S){n(S),f.manager.itemEnd(t)},p)}catch(S){p(S)}},c,p)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,c,h){let f;const d={},p={},v=new TextDecoder;if(typeof t=="string")f=JSON.parse(t);else if(t instanceof ArrayBuffer)if(v.decode(new Uint8Array(t,0,4))===UM){try{d[qr.KHR_BINARY_GLTF]=new C0(t)}catch(S){return void(h&&h(S))}f=JSON.parse(d[qr.KHR_BINARY_GLTF].content)}else f=JSON.parse(v.decode(t));else f=t;if(f.asset===void 0||f.asset.version[0]<2)return void(h&&h(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const w=new nP(f,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});w.fileLoader.setRequestHeader(this.requestHeader);for(let S=0;S<this.pluginCallbacks.length;S++){const B=this.pluginCallbacks[S](w);B.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),p[B.name]=B,d[B.name]=!0}if(f.extensionsUsed)for(let S=0;S<f.extensionsUsed.length;++S){const B=f.extensionsUsed[S],R=f.extensionsRequired||[];switch(B){case qr.KHR_MATERIALS_UNLIT:d[B]=new pm;break;case qr.KHR_DRACO_MESH_COMPRESSION:d[B]=new kM(f,this.dracoLoader);break;case qr.KHR_TEXTURE_TRANSFORM:d[B]=new ZL;break;case qr.KHR_MESH_QUANTIZATION:d[B]=new eP;break;default:R.indexOf(B)>=0&&p[B]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+B+'".')}}w.setExtensions(d),w.setPlugins(p),w.parse(c,h)}parseAsync(t,n){const c=this;return new Promise(function(h,f){c.parse(t,n,h,f)})}}function TM(){let o={};return{get:function(t){return o[t]},add:function(t,n){o[t]=n},remove:function(t){delete o[t]},removeAll:function(){o={}}}}const qr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class jL{constructor(t){this.parser=t,this.name=qr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let c=0,h=n.length;c<h;c++){const f=n[c];f.extensions&&f.extensions[this.name]&&f.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,f.extensions[this.name].light)}}_loadLight(t){const n=this.parser,c="light:"+t;let h=n.cache.get(c);if(h)return h;const f=n.json,d=((f.extensions&&f.extensions[this.name]||{}).lights||[])[t];let p;const v=new an(16777215);d.color!==void 0&&v.setRGB(d.color[0],d.color[1],d.color[2],bs);const w=d.range!==void 0?d.range:0;switch(d.type){case"directional":p=new _M(v),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new m0(v),p.distance=w;break;case"spot":p=new Ur(v),p.distance=w,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,p.angle=d.spot.outerConeAngle,p.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return p.position.set(0,0,0),p.decay=2,fA(p,d),d.intensity!==void 0&&(p.intensity=d.intensity),p.name=n.createUniqueName(d.name||"light_"+t),h=Promise.resolve(p),n.cache.add(c,h),h}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,c=this.parser,h=c.json.nodes[t],f=(h.extensions&&h.extensions[this.name]||{}).light;return f===void 0?null:this._loadLight(f).then(function(d){return c._getNodeRef(n.cache,f,d)})}}let pm=class{constructor(){this.name=qr.KHR_MATERIALS_UNLIT}getMaterialType(){return Wl}extendParams(o,t,n){const c=[];o.color=new an(1,1,1),o.opacity=1;const h=t.pbrMetallicRoughness;if(h){if(Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;o.color.setRGB(f[0],f[1],f[2],bs),o.opacity=f[3]}h.baseColorTexture!==void 0&&c.push(n.assignTexture(o,"map",h.baseColorTexture,Ns))}return Promise.all(c)}},MM=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(o,t){const n=this.parser.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const c=n.extensions[this.name].emissiveStrength;return c!==void 0&&(t.emissiveIntensity=c),Promise.resolve()}},sB=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_CLEARCOAT}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],f=c.extensions[this.name];if(f.clearcoatFactor!==void 0&&(t.clearcoat=f.clearcoatFactor),f.clearcoatTexture!==void 0&&h.push(n.assignTexture(t,"clearcoatMap",f.clearcoatTexture)),f.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=f.clearcoatRoughnessFactor),f.clearcoatRoughnessTexture!==void 0&&h.push(n.assignTexture(t,"clearcoatRoughnessMap",f.clearcoatRoughnessTexture)),f.clearcoatNormalTexture!==void 0&&(h.push(n.assignTexture(t,"clearcoatNormalMap",f.clearcoatNormalTexture)),f.clearcoatNormalTexture.scale!==void 0)){const d=f.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Cn(d,d)}return Promise.all(h)}},KL=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_DISPERSION}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const c=n.extensions[this.name];return t.dispersion=c.dispersion!==void 0?c.dispersion:0,Promise.resolve()}},XL=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],f=c.extensions[this.name];return f.iridescenceFactor!==void 0&&(t.iridescence=f.iridescenceFactor),f.iridescenceTexture!==void 0&&h.push(n.assignTexture(t,"iridescenceMap",f.iridescenceTexture)),f.iridescenceIor!==void 0&&(t.iridescenceIOR=f.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),f.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=f.iridescenceThicknessMinimum),f.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=f.iridescenceThicknessMaximum),f.iridescenceThicknessTexture!==void 0&&h.push(n.assignTexture(t,"iridescenceThicknessMap",f.iridescenceThicknessTexture)),Promise.all(h)}},oB=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_SHEEN}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[];t.sheenColor=new an(0,0,0),t.sheenRoughness=0,t.sheen=1;const f=c.extensions[this.name];if(f.sheenColorFactor!==void 0){const d=f.sheenColorFactor;t.sheenColor.setRGB(d[0],d[1],d[2],bs)}return f.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=f.sheenRoughnessFactor),f.sheenColorTexture!==void 0&&h.push(n.assignTexture(t,"sheenColorMap",f.sheenColorTexture,Ns)),f.sheenRoughnessTexture!==void 0&&h.push(n.assignTexture(t,"sheenRoughnessMap",f.sheenRoughnessTexture)),Promise.all(h)}},YL=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_TRANSMISSION}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],f=c.extensions[this.name];return f.transmissionFactor!==void 0&&(t.transmission=f.transmissionFactor),f.transmissionTexture!==void 0&&h.push(n.assignTexture(t,"transmissionMap",f.transmissionTexture)),Promise.all(h)}},ep=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_VOLUME}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],f=c.extensions[this.name];t.thickness=f.thicknessFactor!==void 0?f.thicknessFactor:0,f.thicknessTexture!==void 0&&h.push(n.assignTexture(t,"thicknessMap",f.thicknessTexture)),t.attenuationDistance=f.attenuationDistance||1/0;const d=f.attenuationColor||[1,1,1];return t.attenuationColor=new an().setRGB(d[0],d[1],d[2],bs),Promise.all(h)}},aB=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_IOR}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const c=n.extensions[this.name];return t.ior=c.ior!==void 0?c.ior:1.5,Promise.resolve()}},RM=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_SPECULAR}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],f=c.extensions[this.name];t.specularIntensity=f.specularFactor!==void 0?f.specularFactor:1,f.specularTexture!==void 0&&h.push(n.assignTexture(t,"specularIntensityMap",f.specularTexture));const d=f.specularColorFactor||[1,1,1];return t.specularColor=new an().setRGB(d[0],d[1],d[2],bs),f.specularColorTexture!==void 0&&h.push(n.assignTexture(t,"specularColorMap",f.specularColorTexture,Ns)),Promise.all(h)}},DM=class{constructor(o){this.parser=o,this.name=qr.EXT_MATERIALS_BUMP}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],f=c.extensions[this.name];return t.bumpScale=f.bumpFactor!==void 0?f.bumpFactor:1,f.bumpTexture!==void 0&&h.push(n.assignTexture(t,"bumpMap",f.bumpTexture)),Promise.all(h)}},Lb=class{constructor(o){this.parser=o,this.name=qr.KHR_MATERIALS_ANISOTROPY}getMaterialType(o){const t=this.parser.json.materials[o];return t.extensions&&t.extensions[this.name]?ba:null}extendMaterialParams(o,t){const n=this.parser,c=n.json.materials[o];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],f=c.extensions[this.name];return f.anisotropyStrength!==void 0&&(t.anisotropy=f.anisotropyStrength),f.anisotropyRotation!==void 0&&(t.anisotropyRotation=f.anisotropyRotation),f.anisotropyTexture!==void 0&&h.push(n.assignTexture(t,"anisotropyMap",f.anisotropyTexture)),Promise.all(h)}};class AA{constructor(t){this.parser=t,this.name=qr.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,c=n.json,h=c.textures[t];if(!h.extensions||!h.extensions[this.name])return null;const f=h.extensions[this.name],d=n.options.ktx2Loader;if(!d){if(c.extensionsRequired&&c.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,f.source,d)}}class FM{constructor(t){this.parser=t,this.name=qr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,c=this.parser,h=c.json,f=h.textures[t];if(!f.extensions||!f.extensions[n])return null;const d=f.extensions[n],p=h.images[d.source];let v=c.textureLoader;if(p.uri){const w=c.options.manager.getHandler(p.uri);w!==null&&(v=w)}return this.detectSupport().then(function(w){if(w)return c.loadTextureImage(t,d.source,v);if(h.extensionsRequired&&h.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return c.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class Tx{constructor(t){this.parser=t,this.name=qr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,c=this.parser,h=c.json,f=h.textures[t];if(!f.extensions||!f.extensions[n])return null;const d=f.extensions[n],p=h.images[d.source];let v=c.textureLoader;if(p.uri){const w=c.options.manager.getHandler(p.uri);w!==null&&(v=w)}return this.detectSupport().then(function(w){if(w)return c.loadTextureImage(t,d.source,v);if(h.extensionsRequired&&h.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return c.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class rg{constructor(t){this.name=qr.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,c=n.bufferViews[t];if(c.extensions&&c.extensions[this.name]){const h=c.extensions[this.name],f=this.parser.getDependency("buffer",h.buffer),d=this.parser.options.meshoptDecoder;if(!d||!d.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return f.then(function(p){const v=h.byteOffset||0,w=h.byteLength||0,S=h.count,B=h.byteStride,R=new Uint8Array(p,v,w);return d.decodeGltfBufferAsync?d.decodeGltfBufferAsync(S,B,R,h.mode,h.filter).then(function(D){return D.buffer}):d.ready.then(function(){const D=new ArrayBuffer(S*B);return d.decodeGltfBuffer(new Uint8Array(D),S,B,R,h.mode,h.filter),D})})}return null}}let JL=class{constructor(o){this.name=qr.EXT_MESH_GPU_INSTANCING,this.parser=o}createNodeMesh(o){const t=this.parser.json,n=t.nodes[o];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const c=t.meshes[n.mesh];for(const p of c.primitives)if(p.mode!==pA.TRIANGLES&&p.mode!==pA.TRIANGLE_STRIP&&p.mode!==pA.TRIANGLE_FAN&&p.mode!==void 0)return null;const h=n.extensions[this.name].attributes,f=[],d={};for(const p in h)f.push(this.parser.getDependency("accessor",h[p]).then(v=>(d[p]=v,d[p])));return f.length<1?null:(f.push(this.parser.createNodeMesh(o)),Promise.all(f).then(p=>{const v=p.pop(),w=v.isGroup?v.children:[v],S=p[0].count,B=[];for(const R of w){const D=new nn,O=new Ke,V=new ha,$=new Ke(1,1,1),G=new Vp(R.geometry,R.material,S);for(let X=0;X<S;X++)d.TRANSLATION&&O.fromBufferAttribute(d.TRANSLATION,X),d.ROTATION&&V.fromBufferAttribute(d.ROTATION,X),d.SCALE&&$.fromBufferAttribute(d.SCALE,X),G.setMatrixAt(X,D.compose(O,V,$));for(const X in d)if(X==="_COLOR_0"){const te=d[X];G.instanceColor=new ku(te.array,te.itemSize,te.normalized)}else X!=="TRANSLATION"&&X!=="ROTATION"&&X!=="SCALE"&&R.geometry.setAttribute(X,d[X]);gn.prototype.copy.call(G,R),this.parser.assignFinalMaterial(G),B.push(G)}return v.isGroup?(v.clear(),v.add(...B),v):B[0]}))}};const UM="glTF";class C0{constructor(t){this.name=qr.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,12),c=new TextDecoder;if(this.header={magic:c.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==UM)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const h=this.header.length-12,f=new DataView(t,12);let d=0;for(;d<h;){const p=f.getUint32(d,!0);d+=4;const v=f.getUint32(d,!0);if(d+=4,v===1313821514){const w=new Uint8Array(t,12+d,p);this.content=c.decode(w)}else if(v===5130562){const w=12+d;this.body=t.slice(w,w+p)}d+=p}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class kM{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=qr.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const c=this.json,h=this.dracoLoader,f=t.extensions[this.name].bufferView,d=t.extensions[this.name].attributes,p={},v={},w={};for(const S in d){const B=Mx[S]||S.toLowerCase();p[B]=d[S]}for(const S in t.attributes){const B=Mx[S]||S.toLowerCase();if(d[S]!==void 0){const R=c.accessors[t.attributes[S]],D=E0[R.componentType];w[B]=D.name,v[B]=R.normalized===!0}}return n.getDependency("bufferView",f).then(function(S){return new Promise(function(B,R){h.decodeDracoFile(S,function(D){for(const O in D.attributes){const V=D.attributes[O],$=v[O];$!==void 0&&(V.normalized=$)}B(D)},p,w,bs,R)})})}}class ZL{constructor(){this.name=qr.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord!==void 0&&n.texCoord!==t.channel||n.offset!==void 0||n.rotation!==void 0||n.scale!==void 0)&&(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class eP{constructor(){this.name=qr.KHR_MESH_QUANTIZATION}}class LM extends md{constructor(t,n,c,h){super(t,n,c,h)}copySampleValue_(t){const n=this.resultBuffer,c=this.sampleValues,h=this.valueSize,f=t*h*3+h;for(let d=0;d!==h;d++)n[d]=c[f+d];return n}interpolate_(t,n,c,h){const f=this.resultBuffer,d=this.sampleValues,p=this.valueSize,v=2*p,w=3*p,S=h-n,B=(c-n)/S,R=B*B,D=R*B,O=t*w,V=O-w,$=-2*D+3*R,G=D-R,X=1-$,te=G-R+B;for(let ae=0;ae!==p;ae++){const oe=d[V+ae+p],Ae=d[V+ae+v]*S,ve=d[O+ae+p],De=d[O+ae]*S;f[ae]=X*oe+te*Ae+$*ve+G*De}return f}}const tP=new ha;class iP extends LM{interpolate_(t,n,c,h){const f=super.interpolate_(t,n,c,h);return tP.fromArray(f).normalize().toArray(f),f}}const pA={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},E0={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},lB={9728:pi,9729:Ci,9984:Ui,9985:yn,9986:ki,9987:en},L_={33071:kt,33648:St,10497:Vt},P_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Mx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},fm={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},S0={CUBICSPLINE:void 0,LINEAR:rh,STEP:Gc};function Pb(o){return o.DefaultMaterial===void 0&&(o.DefaultMaterial=new Rs({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),o.DefaultMaterial}function gm(o,t,n){for(const c in n.extensions)o[c]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[c]=n.extensions[c])}function fA(o,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(o.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function cB(o,t){if(o.updateMorphTargets(),t.weights!==void 0)for(let n=0,c=t.weights.length;n<c;n++)o.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(o.morphTargetInfluences.length===n.length){o.morphTargetDictionary={};for(let c=0,h=n.length;c<h;c++)o.morphTargetDictionary[n[c]]=c}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function uB(o){let t;const n=o.extensions&&o.extensions[qr.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+B0(n.attributes):o.indices+":"+B0(o.attributes)+":"+o.mode,o.targets!==void 0)for(let c=0,h=o.targets.length;c<h;c++)t+=":"+B0(o.targets[c]);return t}function B0(o){let t="";const n=Object.keys(o).sort();for(let c=0,h=n.length;c<h;c++)t+=n[c]+":"+o[n[c]]+";";return t}function Rx(o){switch(o){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const PM=new nn;class nP{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new TM,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let c=!1,h=-1,f=!1,d=-1;if(typeof navigator<"u"){const p=navigator.userAgent;c=/^((?!chrome|android).)*safari/i.test(p)===!0;const v=p.match(/Version\/(\d+)/);h=c&&v?parseInt(v[1],10):-1,f=p.indexOf("Firefox")>-1,d=f?p.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||c&&h<17||f&&d<98?this.textureLoader=new Dn(this.options.manager):this.textureLoader=new _0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Rn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const c=this,h=this.json,f=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(d){return d._markDefs&&d._markDefs()}),Promise.all(this._invokeAll(function(d){return d.beforeRoot&&d.beforeRoot()})).then(function(){return Promise.all([c.getDependencies("scene"),c.getDependencies("animation"),c.getDependencies("camera")])}).then(function(d){const p={scene:d[0][h.scene||0],scenes:d[0],animations:d[1],cameras:d[2],asset:h.asset,parser:c,userData:{}};return gm(f,p,h),fA(p,h),Promise.all(c._invokeAll(function(v){return v.afterRoot&&v.afterRoot(p)})).then(function(){for(const v of p.scenes)v.updateMatrixWorld();t(p)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],c=this.json.meshes||[];for(let h=0,f=n.length;h<f;h++){const d=n[h].joints;for(let p=0,v=d.length;p<v;p++)t[d[p]].isBone=!0}for(let h=0,f=t.length;h<f;h++){const d=t[h];d.mesh!==void 0&&(this._addNodeRef(this.meshCache,d.mesh),d.skin!==void 0&&(c[d.mesh].isSkinnedMesh=!0)),d.camera!==void 0&&this._addNodeRef(this.cameraCache,d.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,c){if(t.refs[n]<=1)return c;const h=c.clone(),f=(d,p)=>{const v=this.associations.get(d);v!=null&&this.associations.set(p,v);for(const[w,S]of d.children.entries())f(S,p.children[w])};return f(c,h),h.name+="_instance_"+t.uses[n]++,h}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let c=0;c<n.length;c++){const h=t(n[c]);if(h)return h}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const c=[];for(let h=0;h<n.length;h++){const f=t(n[h]);f&&c.push(f)}return c}getDependency(t,n){const c=t+":"+n;let h=this.cache.get(c);if(!h){switch(t){case"scene":h=this.loadScene(n);break;case"node":h=this._invokeOne(function(f){return f.loadNode&&f.loadNode(n)});break;case"mesh":h=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(n)});break;case"accessor":h=this.loadAccessor(n);break;case"bufferView":h=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(n)});break;case"buffer":h=this.loadBuffer(n);break;case"material":h=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(n)});break;case"texture":h=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(n)});break;case"skin":h=this.loadSkin(n);break;case"animation":h=this._invokeOne(function(f){return f.loadAnimation&&f.loadAnimation(n)});break;case"camera":h=this.loadCamera(n);break;default:if(h=this._invokeOne(function(f){return f!=this&&f.getDependency&&f.getDependency(t,n)}),!h)throw new Error("Unknown type: "+t)}this.cache.add(c,h)}return h}getDependencies(t){let n=this.cache.get(t);if(!n){const c=this,h=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(h.map(function(f,d){return c.getDependency(t,d)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],c=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[qr.KHR_BINARY_GLTF].body);const h=this.options;return new Promise(function(f,d){c.load(Am.resolveURL(n.uri,h.path),f,void 0,function(){d(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(c){const h=n.byteLength||0,f=n.byteOffset||0;return c.slice(f,f+h)})}loadAccessor(t){const n=this,c=this.json,h=this.json.accessors[t];if(h.bufferView===void 0&&h.sparse===void 0){const d=P_[h.type],p=E0[h.componentType],v=h.normalized===!0,w=new p(h.count*d);return Promise.resolve(new Ls(w,d,v))}const f=[];return h.bufferView!==void 0?f.push(this.getDependency("bufferView",h.bufferView)):f.push(null),h.sparse!==void 0&&(f.push(this.getDependency("bufferView",h.sparse.indices.bufferView)),f.push(this.getDependency("bufferView",h.sparse.values.bufferView))),Promise.all(f).then(function(d){const p=d[0],v=P_[h.type],w=E0[h.componentType],S=w.BYTES_PER_ELEMENT,B=S*v,R=h.byteOffset||0,D=h.bufferView!==void 0?c.bufferViews[h.bufferView].byteStride:void 0,O=h.normalized===!0;let V,$;if(D&&D!==B){const G=Math.floor(R/D),X="InterleavedBuffer:"+h.bufferView+":"+h.componentType+":"+G+":"+h.count;let te=n.cache.get(X);te||(V=new w(p,G*D,h.count*D/S),te=new Ao(V,D/S),n.cache.add(X,te)),$=new Jn(te,v,R%D/S,O)}else V=p===null?new w(h.count*v):new w(p,R,h.count*v),$=new Ls(V,v,O);if(h.sparse!==void 0){const G=P_.SCALAR,X=E0[h.sparse.indices.componentType],te=h.sparse.indices.byteOffset||0,ae=h.sparse.values.byteOffset||0,oe=new X(d[1],te,h.sparse.count*G),Ae=new w(d[2],ae,h.sparse.count*v);p!==null&&($=new Ls($.array.slice(),$.itemSize,$.normalized)),$.normalized=!1;for(let ve=0,De=oe.length;ve<De;ve++){const Ne=oe[ve];if($.setX(Ne,Ae[ve*v]),v>=2&&$.setY(Ne,Ae[ve*v+1]),v>=3&&$.setZ(Ne,Ae[ve*v+2]),v>=4&&$.setW(Ne,Ae[ve*v+3]),v>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}$.normalized=O}return $})}loadTexture(t){const n=this.json,c=this.options,h=n.textures[t].source,f=n.images[h];let d=this.textureLoader;if(f.uri){const p=c.manager.getHandler(f.uri);p!==null&&(d=p)}return this.loadTextureImage(t,h,d)}loadTextureImage(t,n,c){const h=this,f=this.json,d=f.textures[t],p=f.images[n],v=(p.uri||p.bufferView)+":"+d.sampler;if(this.textureCache[v])return this.textureCache[v];const w=this.loadImageSource(n,c).then(function(S){S.flipY=!1,S.name=d.name||p.name||"",S.name===""&&typeof p.uri=="string"&&p.uri.startsWith("data:image/")===!1&&(S.name=p.uri);const B=(f.samplers||{})[d.sampler]||{};return S.magFilter=lB[B.magFilter]||Ci,S.minFilter=lB[B.minFilter]||en,S.wrapS=L_[B.wrapS]||Vt,S.wrapT=L_[B.wrapT]||Vt,h.associations.set(S,{textures:t}),S}).catch(function(){return null});return this.textureCache[v]=w,w}loadImageSource(t,n){const c=this.json,h=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(S=>S.clone());const f=c.images[t],d=self.URL||self.webkitURL;let p=f.uri||"",v=!1;if(f.bufferView!==void 0)p=this.getDependency("bufferView",f.bufferView).then(function(S){v=!0;const B=new Blob([S],{type:f.mimeType});return p=d.createObjectURL(B),p});else if(f.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const w=Promise.resolve(p).then(function(S){return new Promise(function(B,R){let D=B;n.isImageBitmapLoader===!0&&(D=function(O){const V=new Sr(O);V.needsUpdate=!0,B(V)}),n.load(Am.resolveURL(S,h.path),D,void 0,R)})}).then(function(S){var B;return v===!0&&d.revokeObjectURL(p),fA(S,f),S.userData.mimeType=f.mimeType||((B=f.uri).search(/\.jpe?g($|\?)/i)>0||B.search(/^data\:image\/jpeg/)===0?"image/jpeg":B.search(/\.webp($|\?)/i)>0||B.search(/^data\:image\/webp/)===0?"image/webp":"image/png"),S}).catch(function(S){throw console.error("THREE.GLTFLoader: Couldn't load texture",p),S});return this.sourceCache[t]=w,w}assignTexture(t,n,c,h){const f=this;return this.getDependency("texture",c.index).then(function(d){if(!d)return null;if(c.texCoord!==void 0&&c.texCoord>0&&((d=d.clone()).channel=c.texCoord),f.extensions[qr.KHR_TEXTURE_TRANSFORM]){const p=c.extensions!==void 0?c.extensions[qr.KHR_TEXTURE_TRANSFORM]:void 0;if(p){const v=f.associations.get(d);d=f.extensions[qr.KHR_TEXTURE_TRANSFORM].extendTexture(d,p),f.associations.set(d,v)}}return h!==void 0&&(d.colorSpace=h),t[n]=d,d})}assignFinalMaterial(t){const n=t.geometry;let c=t.material;const h=n.attributes.tangent===void 0,f=n.attributes.color!==void 0,d=n.attributes.normal===void 0;if(t.isPoints){const p="PointsMaterial:"+c.uuid;let v=this.cache.get(p);v||(v=new vh,Us.prototype.copy.call(v,c),v.color.copy(c.color),v.map=c.map,v.sizeAttenuation=!1,this.cache.add(p,v)),c=v}else if(t.isLine){const p="LineBasicMaterial:"+c.uuid;let v=this.cache.get(p);v||(v=new qp,Us.prototype.copy.call(v,c),v.color.copy(c.color),v.map=c.map,this.cache.add(p,v)),c=v}if(h||f||d){let p="ClonedMaterial:"+c.uuid+":";h&&(p+="derivative-tangents:"),f&&(p+="vertex-colors:"),d&&(p+="flat-shading:");let v=this.cache.get(p);v||(v=c.clone(),f&&(v.vertexColors=!0),d&&(v.flatShading=!0),h&&(v.normalScale&&(v.normalScale.y*=-1),v.clearcoatNormalScale&&(v.clearcoatNormalScale.y*=-1)),this.cache.add(p,v),this.associations.set(v,this.associations.get(c))),c=v}t.material=c}getMaterialType(){return Rs}loadMaterial(t){const n=this,c=this.json,h=this.extensions,f=c.materials[t];let d;const p={},v=[];if((f.extensions||{})[qr.KHR_MATERIALS_UNLIT]){const S=h[qr.KHR_MATERIALS_UNLIT];d=S.getMaterialType(),v.push(S.extendParams(p,f,n))}else{const S=f.pbrMetallicRoughness||{};if(p.color=new an(1,1,1),p.opacity=1,Array.isArray(S.baseColorFactor)){const B=S.baseColorFactor;p.color.setRGB(B[0],B[1],B[2],bs),p.opacity=B[3]}S.baseColorTexture!==void 0&&v.push(n.assignTexture(p,"map",S.baseColorTexture,Ns)),p.metalness=S.metallicFactor!==void 0?S.metallicFactor:1,p.roughness=S.roughnessFactor!==void 0?S.roughnessFactor:1,S.metallicRoughnessTexture!==void 0&&(v.push(n.assignTexture(p,"metalnessMap",S.metallicRoughnessTexture)),v.push(n.assignTexture(p,"roughnessMap",S.metallicRoughnessTexture))),d=this._invokeOne(function(B){return B.getMaterialType&&B.getMaterialType(t)}),v.push(Promise.all(this._invokeAll(function(B){return B.extendMaterialParams&&B.extendMaterialParams(t,p)})))}f.doubleSided===!0&&(p.side=2);const w=f.alphaMode||"OPAQUE";if(w==="BLEND"?(p.transparent=!0,p.depthWrite=!1):(p.transparent=!1,w==="MASK"&&(p.alphaTest=f.alphaCutoff!==void 0?f.alphaCutoff:.5)),f.normalTexture!==void 0&&d!==Wl&&(v.push(n.assignTexture(p,"normalMap",f.normalTexture)),p.normalScale=new Cn(1,1),f.normalTexture.scale!==void 0)){const S=f.normalTexture.scale;p.normalScale.set(S,S)}if(f.occlusionTexture!==void 0&&d!==Wl&&(v.push(n.assignTexture(p,"aoMap",f.occlusionTexture)),f.occlusionTexture.strength!==void 0&&(p.aoMapIntensity=f.occlusionTexture.strength)),f.emissiveFactor!==void 0&&d!==Wl){const S=f.emissiveFactor;p.emissive=new an().setRGB(S[0],S[1],S[2],bs)}return f.emissiveTexture!==void 0&&d!==Wl&&v.push(n.assignTexture(p,"emissiveMap",f.emissiveTexture,Ns)),Promise.all(v).then(function(){const S=new d(p);return f.name&&(S.name=f.name),fA(S,f),n.associations.set(S,{materials:t}),f.extensions&&gm(h,S,f),S})}createUniqueName(t){const n=Zr.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,c=this.extensions,h=this.primitiveCache;function f(p){return c[qr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(p,n).then(function(v){return hB(v,p,n)})}const d=[];for(let p=0,v=t.length;p<v;p++){const w=t[p],S=uB(w),B=h[S];if(B)d.push(B.promise);else{let R;R=w.extensions&&w.extensions[qr.KHR_DRACO_MESH_COMPRESSION]?f(w):hB(new ga,w,n),h[S]={primitive:w,promise:R},d.push(R)}}return Promise.all(d)}loadMesh(t){const n=this,c=this.json,h=this.extensions,f=c.meshes[t],d=f.primitives,p=[];for(let v=0,w=d.length;v<w;v++){const S=d[v].material===void 0?Pb(this.cache):this.getDependency("material",d[v].material);p.push(S)}return p.push(n.loadGeometries(d)),Promise.all(p).then(function(v){const w=v.slice(0,v.length-1),S=v[v.length-1],B=[];for(let D=0,O=S.length;D<O;D++){const V=S[D],$=d[D];let G;const X=w[D];if($.mode===pA.TRIANGLES||$.mode===pA.TRIANGLE_STRIP||$.mode===pA.TRIANGLE_FAN||$.mode===void 0)G=f.isSkinnedMesh===!0?new Mo(V,X):new As(V,X),G.isSkinnedMesh===!0&&G.normalizeSkinWeights(),$.mode===pA.TRIANGLE_STRIP?G.geometry=rB(G.geometry,1):$.mode===pA.TRIANGLE_FAN&&(G.geometry=rB(G.geometry,2));else if($.mode===pA.LINES)G=new iu(V,X);else if($.mode===pA.LINE_STRIP)G=new Wi(V,X);else if($.mode===pA.LINE_LOOP)G=new Wp(V,X);else{if($.mode!==pA.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+$.mode);G=new nu(V,X)}Object.keys(G.geometry.morphAttributes).length>0&&cB(G,f),G.name=n.createUniqueName(f.name||"mesh_"+t),fA(G,f),$.extensions&&gm(h,G,$),n.assignFinalMaterial(G),B.push(G)}for(let D=0,O=B.length;D<O;D++)n.associations.set(B[D],{meshes:t,primitives:D});if(B.length===1)return f.extensions&&gm(h,B[0],f),B[0];const R=new mh;f.extensions&&gm(h,R,f),n.associations.set(R,{meshes:t});for(let D=0,O=B.length;D<O;D++)R.add(B[D]);return R})}loadCamera(t){let n;const c=this.json.cameras[t],h=c[c.type];if(h)return c.type==="perspective"?n=new zs(jd.radToDeg(h.yfov),h.aspectRatio||1,h.znear||1,h.zfar||2e6):c.type==="orthographic"&&(n=new io(-h.xmag,h.xmag,h.ymag,-h.ymag,h.znear,h.zfar)),c.name&&(n.name=this.createUniqueName(c.name)),fA(n,c),Promise.resolve(n);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const n=this.json.skins[t],c=[];for(let h=0,f=n.joints.length;h<f;h++)c.push(this._loadNodeShallow(n.joints[h]));return n.inverseBindMatrices!==void 0?c.push(this.getDependency("accessor",n.inverseBindMatrices)):c.push(null),Promise.all(c).then(function(h){const f=h.pop(),d=h,p=[],v=[];for(let w=0,S=d.length;w<S;w++){const B=d[w];if(B){p.push(B);const R=new nn;f!==null&&R.fromArray(f.array,16*w),v.push(R)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[w])}return new eg(p,v)})}loadAnimation(t){const n=this.json,c=this,h=n.animations[t],f=h.name?h.name:"animation_"+t,d=[],p=[],v=[],w=[],S=[];for(let B=0,R=h.channels.length;B<R;B++){const D=h.channels[B],O=h.samplers[D.sampler],V=D.target,$=V.node,G=h.parameters!==void 0?h.parameters[O.input]:O.input,X=h.parameters!==void 0?h.parameters[O.output]:O.output;V.node!==void 0&&(d.push(this.getDependency("node",$)),p.push(this.getDependency("accessor",G)),v.push(this.getDependency("accessor",X)),w.push(O),S.push(V))}return Promise.all([Promise.all(d),Promise.all(p),Promise.all(v),Promise.all(w),Promise.all(S)]).then(function(B){const R=B[0],D=B[1],O=B[2],V=B[3],$=B[4],G=[];for(let X=0,te=R.length;X<te;X++){const ae=R[X],oe=D[X],Ae=O[X],ve=V[X],De=$[X];if(ae===void 0)continue;ae.updateMatrix&&ae.updateMatrix();const Ne=c._createAnimationTracks(ae,oe,Ae,ve,De);if(Ne)for(let We=0;We<Ne.length;We++)G.push(Ne[We])}return new zi(f,void 0,G)})}createNodeMesh(t){const n=this.json,c=this,h=n.nodes[t];return h.mesh===void 0?null:c.getDependency("mesh",h.mesh).then(function(f){const d=c._getNodeRef(c.meshCache,h.mesh,f);return h.weights!==void 0&&d.traverse(function(p){if(p.isMesh)for(let v=0,w=h.weights.length;v<w;v++)p.morphTargetInfluences[v]=h.weights[v]}),d})}loadNode(t){const n=this,c=this.json.nodes[t],h=n._loadNodeShallow(t),f=[],d=c.children||[];for(let v=0,w=d.length;v<w;v++)f.push(n.getDependency("node",d[v]));const p=c.skin===void 0?Promise.resolve(null):n.getDependency("skin",c.skin);return Promise.all([h,Promise.all(f),p]).then(function(v){const w=v[0],S=v[1],B=v[2];B!==null&&w.traverse(function(R){R.isSkinnedMesh&&R.bind(B,PM)});for(let R=0,D=S.length;R<D;R++)w.add(S[R]);return w})}_loadNodeShallow(t){const n=this.json,c=this.extensions,h=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const f=n.nodes[t],d=f.name?h.createUniqueName(f.name):"",p=[],v=h._invokeOne(function(w){return w.createNodeMesh&&w.createNodeMesh(t)});return v&&p.push(v),f.camera!==void 0&&p.push(h.getDependency("camera",f.camera).then(function(w){return h._getNodeRef(h.cameraCache,f.camera,w)})),h._invokeAll(function(w){return w.createNodeAttachment&&w.createNodeAttachment(t)}).forEach(function(w){p.push(w)}),this.nodeCache[t]=Promise.all(p).then(function(w){let S;if(S=f.isBone===!0?new cA:w.length>1?new mh:w.length===1?w[0]:new gn,S!==w[0])for(let B=0,R=w.length;B<R;B++)S.add(w[B]);if(f.name&&(S.userData.name=f.name,S.name=d),fA(S,f),f.extensions&&gm(c,S,f),f.matrix!==void 0){const B=new nn;B.fromArray(f.matrix),S.applyMatrix4(B)}else f.translation!==void 0&&S.position.fromArray(f.translation),f.rotation!==void 0&&S.quaternion.fromArray(f.rotation),f.scale!==void 0&&S.scale.fromArray(f.scale);return h.associations.has(S)||h.associations.set(S,{}),h.associations.get(S).nodes=t,S}),this.nodeCache[t]}loadScene(t){const n=this.extensions,c=this.json.scenes[t],h=this,f=new mh;c.name&&(f.name=h.createUniqueName(c.name)),fA(f,c),c.extensions&&gm(n,f,c);const d=c.nodes||[],p=[];for(let v=0,w=d.length;v<w;v++)p.push(h.getDependency("node",d[v]));return Promise.all(p).then(function(v){for(let w=0,S=v.length;w<S;w++)f.add(v[w]);return h.associations=(w=>{const S=new Map;for(const[B,R]of h.associations)(B instanceof Us||B instanceof Sr)&&S.set(B,R);return w.traverse(B=>{const R=h.associations.get(B);R!=null&&S.set(B,R)}),S})(f),f})}_createAnimationTracks(t,n,c,h,f){const d=[],p=t.name?t.name:t.uuid,v=[];let w;switch(fm[f.path]===fm.weights?t.traverse(function(R){R.morphTargetInfluences&&v.push(R.name?R.name:R.uuid)}):v.push(p),fm[f.path]){case fm.weights:w=Qe;break;case fm.rotation:w=dt;break;case fm.position:case fm.scale:w=vi;break;default:w=c.itemSize===1?Qe:vi}const S=h.interpolation!==void 0?S0[h.interpolation]:rh,B=this._getArrayFromAccessor(c);for(let R=0,D=v.length;R<D;R++){const O=new w(v[R]+"."+fm[f.path],n.array,B,S);h.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(O),d.push(O)}return d}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const c=Rx(n.constructor),h=new Float32Array(n.length);for(let f=0,d=n.length;f<d;f++)h[f]=n[f]*c;n=h}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){return new(this instanceof dt?iP:LM)(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function hB(o,t,n){const c=t.attributes,h=[];function f(d,p){return n.getDependency("accessor",d).then(function(v){o.setAttribute(p,v)})}for(const d in c){const p=Mx[d]||d.toLowerCase();p in o.attributes||h.push(f(c[d],p))}if(t.indices!==void 0&&!o.index){const d=n.getDependency("accessor",t.indices).then(function(p){o.setIndex(p)});h.push(d)}return Qr.workingColorSpace!==bs&&"COLOR_0"in c&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Qr.workingColorSpace}" not supported.`),fA(o,t),function(d,p,v){const w=p.attributes,S=new da;if(w.POSITION===void 0)return;{const D=v.json.accessors[w.POSITION],O=D.min,V=D.max;if(O===void 0||V===void 0)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(S.set(new Ke(O[0],O[1],O[2]),new Ke(V[0],V[1],V[2])),D.normalized){const $=Rx(E0[D.componentType]);S.min.multiplyScalar($),S.max.multiplyScalar($)}}const B=p.targets;if(B!==void 0){const D=new Ke,O=new Ke;for(let V=0,$=B.length;V<$;V++){const G=B[V];if(G.POSITION!==void 0){const X=v.json.accessors[G.POSITION],te=X.min,ae=X.max;if(te!==void 0&&ae!==void 0){if(O.setX(Math.max(Math.abs(te[0]),Math.abs(ae[0]))),O.setY(Math.max(Math.abs(te[1]),Math.abs(ae[1]))),O.setZ(Math.max(Math.abs(te[2]),Math.abs(ae[2]))),X.normalized){const oe=Rx(E0[X.componentType]);O.multiplyScalar(oe)}D.max(O)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}S.expandByVector(D)}d.boundingBox=S;const R=new _c;S.getCenter(R.center),R.radius=S.min.distanceTo(S.max)/2,d.boundingSphere=R}(o,t,n),Promise.all(h).then(function(){return t.targets!==void 0?function(d,p,v){let w=!1,S=!1,B=!1;for(let V=0,$=p.length;V<$;V++){const G=p[V];if(G.POSITION!==void 0&&(w=!0),G.NORMAL!==void 0&&(S=!0),G.COLOR_0!==void 0&&(B=!0),w&&S&&B)break}if(!w&&!S&&!B)return Promise.resolve(d);const R=[],D=[],O=[];for(let V=0,$=p.length;V<$;V++){const G=p[V];if(w){const X=G.POSITION!==void 0?v.getDependency("accessor",G.POSITION):d.attributes.position;R.push(X)}if(S){const X=G.NORMAL!==void 0?v.getDependency("accessor",G.NORMAL):d.attributes.normal;D.push(X)}if(B){const X=G.COLOR_0!==void 0?v.getDependency("accessor",G.COLOR_0):d.attributes.color;O.push(X)}}return Promise.all([Promise.all(R),Promise.all(D),Promise.all(O)]).then(function(V){const $=V[0],G=V[1],X=V[2];return w&&(d.morphAttributes.position=$),S&&(d.morphAttributes.normal=G),B&&(d.morphAttributes.color=X),d.morphTargetsRelative=!0,d})}(o,t.targets,n):o})}class Ob{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const n=this.workerCreator();n.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=n}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,n){const c=this.workersResolve[t];if(c&&c(n),this.queue.length){const{resolve:h,msg:f,transfer:d}=this.queue.shift();this.workersResolve[t]=h,this.workers[t].postMessage(f,d)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,n){return new Promise(c=>{const h=this._getIdleWorker();h!==-1?(this._initWorker(h),this.workerStatus|=1<<h,this.workersResolve[h]=c,this.workers[h].postMessage(t,n)):this.queue.push({resolve:c,msg:t,transfer:n})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const OM=9,QM=15,NM=16,Qb=22,Nb=37,Dx=43,HM=76,I0=83,zM=97,dB=100,AB=103,pB=109,fB=165,Fx=166,gB=1000066e3;class Ux{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Hb{constructor(t,n,c,h){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+n,c),this._littleEndian=h,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const n=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,n}_skip(t){return this._offset+=t,this}_scan(t,n){n===void 0&&(n=0);const c=this._offset;let h=0;for(;this._dataView.getUint8(this._offset)!==n&&h<t;)h++,this._offset++;return h<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+c,h)}}const Ou=[171,75,84,88,32,50,48,187,13,10,26,10];function kx(o){return new TextDecoder().decode(o)}let zb,gA,Gb;const Lx={env:{emscripten_notify_memory_growth:function(o){Gb=new Uint8Array(gA.exports.memory.buffer)}}};class mB{init(){return zb||(zb=typeof fetch<"u"?fetch("data:application/wasm;base64,"+sg).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,Lx)).then(this._init):WebAssembly.instantiate(Buffer.from(sg,"base64"),Lx).then(this._init),zb)}_init(t){gA=t.instance,Lx.env.emscripten_notify_memory_growth(0)}decode(t,n=0){if(!gA)throw new Error("ZSTDDecoder: Await .init() before decoding.");const c=t.byteLength,h=gA.exports.malloc(c);Gb.set(t,h),n=n||Number(gA.exports.ZSTD_findDecompressedSize(h,c));const f=gA.exports.malloc(n),d=gA.exports.ZSTD_decompress(f,n,h,c),p=Gb.slice(f,f+d);return gA.exports.free(h),gA.exports.free(f),p}}const sg="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",Xp=new WeakMap;let Yp,O_=0;class Ch extends Qt{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Ob,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}async detectSupportAsync(t){return this.workerConfig={astcSupported:await t.hasFeatureAsync("texture-compression-astc"),etc1Supported:await t.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await t.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await t.hasFeatureAsync("texture-compression-bc"),bptcSupported:await t.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await t.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(t){return t.isWebGPURenderer===!0?this.workerConfig={astcSupported:t.hasFeature("texture-compression-astc"),etc1Supported:t.hasFeature("texture-compression-etc1"),etc2Supported:t.hasFeature("texture-compression-etc2"),dxtSupported:t.hasFeature("texture-compression-bc"),bptcSupported:t.hasFeature("texture-compression-bptc"),pvrtcSupported:t.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const t=new Rn(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const n=t.loadAsync("basis_transcoder.js"),c=new Rn(this.manager);c.setPath(this.transcoderPath),c.setResponseType("arraybuffer"),c.setWithCredentials(this.withCredentials);const h=c.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([n,h]).then(([f,d])=>{const p=Ch.BasisWorker.toString(),v=["/* constants */","let _EngineFormat = "+JSON.stringify(Ch.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Ch.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ch.BasisFormat),"/* basis_transcoder.js */",f,"/* worker */",p.substring(p.indexOf("{")+1,p.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([v])),this.transcoderBinary=d,this.workerPool.setWorkerCreator(()=>{const w=new Worker(this.workerSourceURL),S=this.transcoderBinary.slice(0);return w.postMessage({type:"init",config:this.workerConfig,transcoderBinary:S},[S]),w})}),O_>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),O_++}return this.transcoderPending}load(t,n,c,h){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const f=new Rn(this.manager);f.setResponseType("arraybuffer"),f.setWithCredentials(this.withCredentials),f.load(t,d=>{this.parse(d,n,h)},c,h)}parse(t,n,c){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(Xp.has(t))return Xp.get(t).promise.then(n).catch(c);this._createTexture(t).then(h=>n?n(h):null).catch(c)}_createTextureFrom(t,n){const{faces:c,width:h,height:f,format:d,type:p,error:v,dfdFlags:w}=t;if(p==="error")return Promise.reject(v);let S;if(n.faceCount===6)S=new F_(c,d,Qi);else{const B=c[0].mipmaps;S=n.layerCount>1?new bh(B,h,f,n.layerCount,d,Qi):new mo(B,h,f,d,Qi)}return S.minFilter=c[0].mipmaps.length===1?Ci:en,S.magFilter=Ci,S.generateMipmaps=!1,S.needsUpdate=!0,S.colorSpace=T0(n),S.premultiplyAlpha=!!(1&w),S}async _createTexture(t,n={}){const c=function(d){const p=new Uint8Array(d.buffer,d.byteOffset,Ou.length);if(p[0]!==Ou[0]||p[1]!==Ou[1]||p[2]!==Ou[2]||p[3]!==Ou[3]||p[4]!==Ou[4]||p[5]!==Ou[5]||p[6]!==Ou[6]||p[7]!==Ou[7]||p[8]!==Ou[8]||p[9]!==Ou[9]||p[10]!==Ou[10]||p[11]!==Ou[11])throw new Error("Missing KTX 2.0 identifier.");const v=new Ux,w=17*Uint32Array.BYTES_PER_ELEMENT,S=new Hb(d,Ou.length,w,!0);v.vkFormat=S._nextUint32(),v.typeSize=S._nextUint32(),v.pixelWidth=S._nextUint32(),v.pixelHeight=S._nextUint32(),v.pixelDepth=S._nextUint32(),v.layerCount=S._nextUint32(),v.faceCount=S._nextUint32();const B=S._nextUint32();v.supercompressionScheme=S._nextUint32();const R=S._nextUint32(),D=S._nextUint32(),O=S._nextUint32(),V=S._nextUint32(),$=S._nextUint64(),G=S._nextUint64(),X=new Hb(d,Ou.length+w,3*B*8,!0);for(let hi=0;hi<B;hi++)v.levels.push({levelData:new Uint8Array(d.buffer,d.byteOffset+X._nextUint64(),X._nextUint64()),uncompressedByteLength:X._nextUint64()});const te=new Hb(d,R,D,!0),ae={vendorId:te._skip(4)._nextUint16(),descriptorType:te._nextUint16(),versionNumber:te._nextUint16(),descriptorBlockSize:te._nextUint16(),colorModel:te._nextUint8(),colorPrimaries:te._nextUint8(),transferFunction:te._nextUint8(),flags:te._nextUint8(),texelBlockDimension:[te._nextUint8(),te._nextUint8(),te._nextUint8(),te._nextUint8()],bytesPlane:[te._nextUint8(),te._nextUint8(),te._nextUint8(),te._nextUint8(),te._nextUint8(),te._nextUint8(),te._nextUint8(),te._nextUint8()],samples:[]},oe=(ae.descriptorBlockSize/4-6)/4;for(let hi=0;hi<oe;hi++){const bi={bitOffset:te._nextUint16(),bitLength:te._nextUint8(),channelType:te._nextUint8(),samplePosition:[te._nextUint8(),te._nextUint8(),te._nextUint8(),te._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&bi.channelType?(bi.sampleLower=te._nextInt32(),bi.sampleUpper=te._nextInt32()):(bi.sampleLower=te._nextUint32(),bi.sampleUpper=te._nextUint32()),ae.samples[hi]=bi}v.dataFormatDescriptor.length=0,v.dataFormatDescriptor.push(ae);const Ae=new Hb(d,O,V,!0);for(;Ae._offset<V;){const hi=Ae._nextUint32(),bi=Ae._scan(hi),Ge=kx(bi);if(v.keyValue[Ge]=Ae._nextUint8Array(hi-bi.byteLength-1),Ge.match(/^ktx/i)){const Pe=kx(v.keyValue[Ge]);v.keyValue[Ge]=Pe.substring(0,Pe.lastIndexOf("\0"))}Ae._skip(hi%4?4-hi%4:0)}if(G<=0)return v;const ve=new Hb(d,$,G,!0),De=ve._nextUint16(),Ne=ve._nextUint16(),We=ve._nextUint32(),vt=ve._nextUint32(),ot=ve._nextUint32(),nt=ve._nextUint32(),st=[];for(let hi=0;hi<B;hi++)st.push({imageFlags:ve._nextUint32(),rgbSliceByteOffset:ve._nextUint32(),rgbSliceByteLength:ve._nextUint32(),alphaSliceByteOffset:ve._nextUint32(),alphaSliceByteLength:ve._nextUint32()});const mt=$+ve._offset,It=mt+We,Jt=It+vt,jt=Jt+ot,_i=new Uint8Array(d.buffer,d.byteOffset+mt,We),xi=new Uint8Array(d.buffer,d.byteOffset+It,vt),Kt=new Uint8Array(d.buffer,d.byteOffset+Jt,ot),_t=new Uint8Array(d.buffer,d.byteOffset+jt,nt);return v.globalData={endpointCount:De,selectorCount:Ne,imageDescs:st,endpointsData:_i,selectorsData:xi,tablesData:Kt,extendedData:_t},v}(new Uint8Array(t));if(c.vkFormat!==0)return async function(d){const{vkFormat:p}=d;if(_B[p]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let v;d.supercompressionScheme===2&&(Yp||(Yp=new Promise(async B=>{const R=new mB;await R.init(),B(R)})),v=await Yp);const w=[];for(let B=0;B<d.levels.length;B++){const R=Math.max(1,d.pixelWidth>>B),D=Math.max(1,d.pixelHeight>>B),O=d.pixelDepth?Math.max(1,d.pixelDepth>>B):0,V=d.levels[B];let $,G;if(d.supercompressionScheme===0)$=V.levelData;else{if(d.supercompressionScheme!==2)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");$=v.decode(V.levelData,V.uncompressedByteLength)}G=Px[p]===Xi?new Float32Array($.buffer,$.byteOffset,$.byteLength/Float32Array.BYTES_PER_ELEMENT):Px[p]===jn?new Uint16Array($.buffer,$.byteOffset,$.byteLength/Uint16Array.BYTES_PER_ELEMENT):$,w.push({data:G,width:R,height:D,depth:O})}let S;if(mm.has(_B[p]))S=d.pixelDepth===0?new Zl(w[0].data,d.pixelWidth,d.pixelHeight):new Zv(w[0].data,d.pixelWidth,d.pixelHeight,d.pixelDepth);else{if(d.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");S=new mo(w,d.pixelWidth,d.pixelHeight)}return S.mipmaps=w,S.type=Px[p],S.format=_B[p],S.colorSpace=T0(d),S.needsUpdate=!0,Promise.resolve(S)}(c);const h=n,f=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:h},[t])).then(d=>this._createTextureFrom(d.data,c));return Xp.set(t,{promise:f}),f}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),O_--,this}}Ch.BasisFormat={ETC1S:0,UASTC_4x4:1},Ch.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Ch.EngineFormat={RGBAFormat:fn,RGBA_ASTC_4x4_Format:Ja,RGBA_BPTC_Format:Uo,RGBA_ETC2_EAC_Format:vu,RGBA_PVRTC_4BPPV1_Format:th,RGBA_S3TC_DXT5_Format:Wh,RGB_ETC1_Format:ih,RGB_ETC2_Format:pc,RGB_PVRTC_4BPPV1_Format:jh,RGBA_S3TC_DXT1_Format:zc},Ch.BasisWorker=function(){let o,t,n;const c=_EngineFormat,h=_TranscoderFormat,f=_BasisFormat;self.addEventListener("message",function(B){const R=B.data;switch(R.type){case"init":o=R.config,D=R.transcoderBinary,t=new Promise(O=>{n={wasmBinary:D,onRuntimeInitialized:O},BASIS(n)}).then(()=>{n.initializeBasis(),n.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":t.then(()=>{try{const{faces:O,buffers:V,width:$,height:G,hasAlpha:X,format:te,dfdFlags:ae}=function(oe){const Ae=new n.KTX2File(new Uint8Array(oe));function ve(){Ae.close(),Ae.delete()}if(!Ae.isValid())throw ve(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const De=Ae.isUASTC()?f.UASTC_4x4:f.ETC1S,Ne=Ae.getWidth(),We=Ae.getHeight(),vt=Ae.getLayers()||1,ot=Ae.getLevels(),nt=Ae.getFaces(),st=Ae.getHasAlpha(),mt=Ae.getDFDFlags(),{transcoderFormat:It,engineFormat:Jt}=function(xi,Kt,_t,hi){let bi,Ge;const Pe=xi===f.ETC1S?p:v;for(let ut=0;ut<Pe.length;ut++){const xt=Pe[ut];if(o[xt.if]&&xt.basisFormat.includes(xi)&&!(hi&&xt.transcoderFormat.length<2)&&(!xt.needsPowerOfTwo||w(Kt)&&w(_t)))return bi=xt.transcoderFormat[hi?1:0],Ge=xt.engineFormat[hi?1:0],{transcoderFormat:bi,engineFormat:Ge}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),bi=h.RGBA32,Ge=c.RGBAFormat,{transcoderFormat:bi,engineFormat:Ge}}(De,Ne,We,st);if(!Ne||!We||!ot)throw ve(),new Error("THREE.KTX2Loader:	Invalid texture");if(!Ae.startTranscoding())throw ve(),new Error("THREE.KTX2Loader: .startTranscoding failed");const jt=[],_i=[];for(let xi=0;xi<nt;xi++){const Kt=[];for(let _t=0;_t<ot;_t++){const hi=[];let bi,Ge;for(let ut=0;ut<vt;ut++){const xt=Ae.getImageLevelInfo(_t,ut,xi);xi!==0||_t!==0||ut!==0||xt.origWidth%4==0&&xt.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),ot>1?(bi=xt.origWidth,Ge=xt.origHeight):(bi=xt.width,Ge=xt.height);const ct=new Uint8Array(Ae.getImageTranscodedSizeInBytes(_t,ut,0,It));if(!Ae.transcodeImage(ct,_t,ut,xi,It,0,-1,-1))throw ve(),new Error("THREE.KTX2Loader: .transcodeImage failed.");hi.push(ct)}const Pe=S(hi);Kt.push({data:Pe,width:bi,height:Ge}),_i.push(Pe.buffer)}jt.push({mipmaps:Kt,width:Ne,height:We,format:Jt})}return ve(),{faces:jt,buffers:_i,width:Ne,height:We,hasAlpha:st,format:Jt,dfdFlags:mt}}(R.buffer);self.postMessage({type:"transcode",id:R.id,faces:O,width:$,height:G,hasAlpha:X,format:te,dfdFlags:ae},V)}catch(O){console.error(O),self.postMessage({type:"error",id:R.id,error:O.message})}})}var D});const d=[{if:"astcSupported",basisFormat:[f.UASTC_4x4],transcoderFormat:[h.ASTC_4x4,h.ASTC_4x4],engineFormat:[c.RGBA_ASTC_4x4_Format,c.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[f.ETC1S,f.UASTC_4x4],transcoderFormat:[h.BC7_M5,h.BC7_M5],engineFormat:[c.RGBA_BPTC_Format,c.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[f.ETC1S,f.UASTC_4x4],transcoderFormat:[h.BC1,h.BC3],engineFormat:[c.RGBA_S3TC_DXT1_Format,c.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[f.ETC1S,f.UASTC_4x4],transcoderFormat:[h.ETC1,h.ETC2],engineFormat:[c.RGB_ETC2_Format,c.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[f.ETC1S,f.UASTC_4x4],transcoderFormat:[h.ETC1],engineFormat:[c.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[f.ETC1S,f.UASTC_4x4],transcoderFormat:[h.PVRTC1_4_RGB,h.PVRTC1_4_RGBA],engineFormat:[c.RGB_PVRTC_4BPPV1_Format,c.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],p=d.sort(function(B,R){return B.priorityETC1S-R.priorityETC1S}),v=d.sort(function(B,R){return B.priorityUASTC-R.priorityUASTC});function w(B){return B<=2||!(B&B-1)&&B!==0}function S(B){if(B.length===1)return B[0];let R=0;for(let V=0;V<B.length;V++)R+=B[V].byteLength;const D=new Uint8Array(R);let O=0;for(let V=0;V<B.length;V++){const $=B[V];D.set($,O),O+=$.byteLength}return D}};const mm=new Set([fn,ns,Ss]),_B={[pB]:fn,[zM]:fn,[Nb]:fn,[Dx]:fn,[AB]:ns,[I0]:ns,[NM]:ns,[Qb]:ns,[dB]:Ss,[HM]:Ss,[QM]:Ss,[OM]:Ss,[gB]:Ja,[Fx]:jo,[fB]:jo},Px={[pB]:Xi,[zM]:jn,[Nb]:Qi,[Dx]:Qi,[AB]:Xi,[I0]:jn,[NM]:Qi,[Qb]:Qi,[dB]:Xi,[HM]:jn,[QM]:Qi,[OM]:Qi,[gB]:jn,[Fx]:Qi,[fB]:Qi};function T0(o){const t=o.dataFormatDescriptor[0];return t.colorPrimaries===1?t.transferFunction===2?Ns:bs:t.colorPrimaries===10?t.transferFunction===2?Ng:Hg:(t.colorPrimaries===0||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),fc)}var GM,vB;const Eh=Symbol("retainerCount"),Jp=Symbol("recentlyUsed"),Ox=Symbol("evict"),_m=Symbol("evictionThreshold"),M0=Symbol("cache");class VM{constructor(t,n=5){this[GM]=new Map,this[vB]=[],this[M0]=t,this[_m]=n}set evictionThreshold(t){this[_m]=t,this[Ox]()}get evictionThreshold(){return this[_m]}get cache(){return this[M0]}retainerCount(t){return this[Eh].get(t)||0}reset(){this[Eh].clear(),this[Jp]=[]}retain(t){this[Eh].has(t)||this[Eh].set(t,0),this[Eh].set(t,this[Eh].get(t)+1);const n=this[Jp].indexOf(t);n!==-1&&this[Jp].splice(n,1),this[Jp].unshift(t),this[Ox]()}release(t){this[Eh].has(t)&&this[Eh].set(t,Math.max(this[Eh].get(t)-1,0)),this[Ox]()}[(GM=Eh,vB=Jp,Ox)](){if(!(this[Jp].length<this[_m]))for(let t=this[Jp].length-1;t>=this[_m];--t){const n=this[Jp][t];this[Eh].get(n)===0&&(this[M0].delete(n),this[Jp].splice(t,1))}}}const Vb=o=>{const t=new Map;for(const n of o.mappings)for(const c of n.variants)t.set(c,{material:null,gltfMaterialIndex:n.material});return t};class yB{constructor(t){this.parser=t,this.name="KHR_materials_variants"}afterRoot(t){const n=this.parser,c=n.json;if(c.extensions===void 0||c.extensions[this.name]===void 0)return null;const h=(f=>{const d=[],p=new Set;for(const v of f){let w=v,S=0;for(;p.has(w);)w=v+"."+ ++S;p.add(w),d.push(w)}return d})((c.extensions[this.name].variants||[]).map(f=>f.name));for(const f of t.scenes)f.traverse(d=>{const p=d;if(!p.material)return;const v=n.associations.get(p);if(v==null||v.meshes==null||v.primitives==null)return;const w=c.meshes[v.meshes].primitives[v.primitives].extensions;w&&w[this.name]&&(p.userData.variantMaterials=Vb(w[this.name]))});return t.userData.variants=h,Promise.resolve()}}var qb,bB;Sr.DEFAULT_ANISOTROPY=4;const og=new Map,R0=new Map;let m;const y=new class extends Qt{constructor(o){super(o),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(o){return this.decoderPath=o,this}setDecoderConfig(o){return this.decoderConfig=o,this}setWorkerLimit(o){return this.workerLimit=o,this}load(o,t,n,c){const h=new Rn(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(o,f=>{this.parse(f,t,c)},n,c)}parse(o,t,n=()=>{}){this.decodeDracoFile(o,t,null,null,Ns,n).catch(n)}decodeDracoFile(o,t,n,c,h=bs,f=()=>{}){const d={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:c||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:h};return this.decodeGeometry(o,d).then(t).catch(f)}decodeGeometry(o,t){const n=JSON.stringify(t);if(kb.has(o)){const p=kb.get(o);if(p.key===n)return p.promise;if(o.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let c;const h=this.workerNextTaskID++,f=o.byteLength,d=this._getWorker(h,f).then(p=>(c=p,new Promise((v,w)=>{c._callbacks[h]={resolve:v,reject:w},c.postMessage({type:"decode",id:h,taskConfig:t,buffer:o},[o])}))).then(p=>this._createGeometry(p.geometry));return d.catch(()=>!0).then(()=>{c&&h&&this._releaseTask(c,h)}),kb.set(o,{key:n,promise:d}),d}_createGeometry(o){const t=new ga;o.index&&t.setIndex(new Ls(o.index.array,1));for(let n=0;n<o.attributes.length;n++){const c=o.attributes[n],h=c.name,f=c.array,d=c.itemSize,p=new Ls(f,d);h==="color"&&(this._assignVertexColorSpace(p,c.vertexColorSpace),p.normalized=f instanceof Float32Array==0),t.setAttribute(h,p)}return t}_assignVertexColorSpace(o,t){if(t!==Ns)return;const n=new an;for(let c=0,h=o.count;c<h;c++)n.fromBufferAttribute(o,c),Qr.toWorkingColorSpace(n,Ns),o.setXYZ(c,n.r,n.g,n.b)}_loadLibrary(o,t){const n=new Rn(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((c,h)=>{n.load(o,c,void 0,h)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const o=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return o?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const c=n[0];o||(this.decoderConfig.wasmBinary=n[1]);const h=$L.toString(),f=["/* draco decoder */",c,"","/* worker */",h.substring(h.indexOf("{")+1,h.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([f]))}),this.decoderPending}_getWorker(o,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const c=new Worker(this.workerSourceURL);c._callbacks={},c._taskCosts={},c._taskLoad=0,c.postMessage({type:"init",decoderConfig:this.decoderConfig}),c.onmessage=function(h){const f=h.data;switch(f.type){case"decode":c._callbacks[f.id].resolve(f);break;case"error":c._callbacks[f.id].reject(f);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+f.type+'"')}},this.workerPool.push(c)}else this.workerPool.sort(function(c,h){return c._taskLoad>h._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[o]=t,n._taskLoad+=t,n})}_releaseTask(o,t){o._taskLoad-=o._taskCosts[t],delete o._callbacks[t],delete o._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(o=>o._taskLoad))}dispose(){for(let o=0;o<this.workerPool.length;++o)this.workerPool[o].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};let T;const k=new Ch;let q,Y;const be=Symbol("loader"),Ue=Symbol("evictionPolicy"),rt=Symbol("GLTFInstance");class Ft extends qc{constructor(t){super(),this[bB]=new WL().register(n=>new yB(n)),this[rt]=t,this[be].setDRACOLoader(y),this[be].setKTX2Loader(k)}static setDRACODecoderLocation(t){m=t,y.setDecoderPath(t)}static getDRACODecoderLocation(){return m}static setKTX2TranscoderLocation(t){T=t,k.setTranscoderPath(t)}static getKTX2TranscoderLocation(){return T}static setMeshoptDecoderLocation(t){var n;q!==t&&(q=t,Y=(n=t,new Promise((c,h)=>{const f=document.createElement("script");document.body.appendChild(f),f.onload=c,f.onerror=h,f.async=!0,f.src=n})).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return q}static initializeKTX2Loader(t){k.detectSupport(t)}static get cache(){return og}static clearCache(){og.forEach((t,n)=>{this.delete(n)}),this[Ue].reset()}static has(t){return og.has(t)}static async delete(t){if(!this.has(t))return;const n=og.get(t);R0.delete(t),og.delete(t),(await n).dispose()}static hasFinishedLoading(t){return!!R0.get(t)}get[(qb=Ue,bB=be,Ue)](){return this.constructor[Ue]}async preload(t,n,c=()=>{}){if(this[be].setWithCredentials(n.withCredentials),this.dispatchEvent({type:"preload",element:n,src:t}),!og.has(t)){Y!=null&&this[be].setMeshoptDecoder(await Y);const h=((p,v,w=()=>{})=>{const S=B=>{const R=B.loaded/B.total;w(Math.max(0,Math.min(1,isFinite(R)?R:1)))};return new Promise((B,R)=>{v.load(p,B,S,R)})})(t,this[be],p=>{c(.8*p)}),f=this[rt],d=h.then(p=>f.prepare(p)).then(p=>(c(.9),new f(p))).catch(p=>(console.error(p),new f));og.set(t,d)}await og.get(t),R0.set(t,!0),c&&c(1)}async load(t,n,c=()=>{}){await this.preload(t,n,c);const h=await og.get(t),f=await h.clone();return this[Ue].retain(t),f.dispose=()=>{this[Ue].release(t)},f}}Ft[qb]=new VM(Ft);class di extends gn{constructor(t=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Cn(.5,.5),this.addEventListener("removed",function(){this.traverse(function(n){n.element instanceof Element&&n.element.parentNode!==null&&n.element.parentNode.removeChild(n.element)})})}copy(t,n){return super.copy(t,n),this.element=t.element.cloneNode(!0),this.center=t.center,this}}const fi=new Ke,Yt=new nn,ii=new nn,Gn=new Ke,Un=new Ke;class qs{constructor(t={}){const n=this;let c,h,f,d;const p={objects:new WeakMap},v=t.element!==void 0?t.element:document.createElement("div");function w(R){R.isCSS2DObject&&(R.element.style.display="none");for(let D=0,O=R.children.length;D<O;D++)w(R.children[D])}function S(R,D,O){if(R.visible!==!1){if(R.isCSS2DObject){fi.setFromMatrixPosition(R.matrixWorld),fi.applyMatrix4(ii);const V=fi.z>=-1&&fi.z<=1&&R.layers.test(O.layers)===!0,$=R.element;$.style.display=V===!0?"":"none",V===!0&&(R.onBeforeRender(n,D,O),$.style.transform="translate("+-100*R.center.x+"%,"+-100*R.center.y+"%)translate("+(fi.x*f+f)+"px,"+(-fi.y*d+d)+"px)",$.parentNode!==v&&v.appendChild($),R.onAfterRender(n,D,O));const G={distanceToCameraSquared:B(O,R)};p.objects.set(R,G)}for(let V=0,$=R.children.length;V<$;V++)S(R.children[V],D,O)}else w(R)}function B(R,D){return Gn.setFromMatrixPosition(R.matrixWorld),Un.setFromMatrixPosition(D.matrixWorld),Gn.distanceToSquared(Un)}v.style.overflow="hidden",this.domElement=v,this.getSize=function(){return{width:c,height:h}},this.render=function(R,D){R.matrixWorldAutoUpdate===!0&&R.updateMatrixWorld(),D.parent===null&&D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),Yt.copy(D.matrixWorldInverse),ii.multiplyMatrices(D.projectionMatrix,Yt),S(R,R,D),function(O){const V=function(G){const X=[];return G.traverseVisible(function(te){te.isCSS2DObject&&X.push(te)}),X}(O).sort(function(G,X){return G.renderOrder!==X.renderOrder?X.renderOrder-G.renderOrder:p.objects.get(G).distanceToCameraSquared-p.objects.get(X).distanceToCameraSquared}),$=V.length;for(let G=0,X=V.length;G<X;G++)V[G].element.style.zIndex=$-G}(R)},this.setSize=function(R,D){c=R,h=D,f=c/2,d=h/2,v.style.width=R+"px",v.style.height=D+"px"}}}function Bt(o,t,n){let c=n;const h=new Ke;return o.updateWorldMatrix(!0,!0),o.traverseVisible(f=>{const{geometry:d}=f;if(d!==void 0){const{position:p}=d.attributes;if(p!==void 0)for(let v=0,w=p.count;v<w;v++)f.isMesh?f.getVertexPosition(v,h):h.fromBufferAttribute(p,v),f.isSkinnedMesh||h.applyMatrix4(f.matrixWorld),c=t(c,h)}}),c}let gt,Ht,Ai,sn;function yr(o,t=1/0,n=null){Ht||(Ht=new Qa(2,2,1,1)),Ai||(Ai=new jl({uniforms:{blitTexture:new jS(o)},vertexShader:`
			varying vec2 vUv;
			void main(){
				vUv = uv;
				gl_Position = vec4(position.xy * 1.0,0.,.999999);
			}`,fragmentShader:`
			uniform sampler2D blitTexture; 
			varying vec2 vUv;

			void main(){ 
				gl_FragColor = vec4(vUv.xy, 0, 1);
				
				#ifdef IS_SRGB
				gl_FragColor = sRGBTransferOETF( texture2D( blitTexture, vUv) );
				#else
				gl_FragColor = texture2D( blitTexture, vUv);
				#endif
			}`})),Ai.uniforms.blitTexture.value=o,Ai.defines.IS_SRGB=o.colorSpace==Ns,Ai.needsUpdate=!0,sn||(sn=new As(Ht,Ai),sn.frustumCulled=!1);const c=new zs,h=new El;h.add(sn),n===null&&(n=gt=new Sc({antialias:!1}));const f=Math.min(o.image.width,t),d=Math.min(o.image.height,t);n.setSize(f,d),n.clear(),n.render(h,c);const p=document.createElement("canvas"),v=p.getContext("2d");p.width=f,p.height=d,v.drawImage(n.domElement,0,0,f,d);const w=new jp(p);return w.minFilter=o.minFilter,w.magFilter=o.magFilter,w.wrapS=o.wrapS,w.wrapT=o.wrapT,w.colorSpace=o.colorSpace,w.name=o.name,gt&&(gt.forceContextLoss(),gt.dispose(),gt=null),w}const bn={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class kn{constructor(){this.pluginCallbacks=[],this.register(function(t){return new Gce(t)}),this.register(function(t){return new Vce(t)}),this.register(function(t){return new jce(t)}),this.register(function(t){return new Kce(t)}),this.register(function(t){return new Xce(t)}),this.register(function(t){return new Yce(t)}),this.register(function(t){return new qce(t)}),this.register(function(t){return new $ce(t)}),this.register(function(t){return new Wce(t)}),this.register(function(t){return new Jce(t)}),this.register(function(t){return new Zce(t)}),this.register(function(t){return new eue(t)}),this.register(function(t){return new tue(t)}),this.register(function(t){return new iue(t)})}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,c,h){const f=new zce,d=[];for(let p=0,v=this.pluginCallbacks.length;p<v;p++)d.push(this.pluginCallbacks[p](f));f.setPlugins(d),f.write(t,n,h).catch(c)}parseAsync(t,n){const c=this;return new Promise(function(h,f){c.parse(t,h,f,n)})}}const ol=5120,ls=5121,Zp=5122,wB=5123,rP=34962,sP="KHR_mesh_quantization",qM={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987,1001:33071,1e3:10497,1002:33648},t9={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Hce=new an;function xB(o,t){return o.length===t.length&&o.every(function(n,c){return n===t[c]})}function i9(o){return 4*Math.ceil(o/4)}function oP(o,t=0){const n=i9(o.byteLength);if(n!==o.byteLength){const c=new Uint8Array(n);if(c.set(new Uint8Array(o)),t!==0)for(let h=o.byteLength;h<n;h++)c[h]=t;return c.buffer}return o}function n9(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function r9(o,t){if(o.toBlob!==void 0)return new Promise(c=>o.toBlob(c,t));let n;return t==="image/jpeg"?n=.92:t==="image/webp"&&(n=.8),o.convertToBlob({type:t,quality:n})}class zce{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+Oi}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(t){this.plugins=t}async write(t,n,c={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},c),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),await Promise.all(this.pending);const h=this,f=h.buffers,d=h.json;c=h.options;const p=h.extensionsUsed,v=h.extensionsRequired,w=new Blob(f,{type:"application/octet-stream"}),S=Object.keys(p),B=Object.keys(v);if(S.length>0&&(d.extensionsUsed=S),B.length>0&&(d.extensionsRequired=B),d.buffers&&d.buffers.length>0&&(d.buffers[0].byteLength=w.size),c.binary===!0){const R=new FileReader;R.readAsArrayBuffer(w),R.onloadend=function(){const D=oP(R.result),O=new DataView(new ArrayBuffer(8));O.setUint32(0,D.byteLength,!0),O.setUint32(4,5130562,!0);const V=oP(($=JSON.stringify(d),new TextEncoder().encode($).buffer),32);var $;const G=new DataView(new ArrayBuffer(8));G.setUint32(0,V.byteLength,!0),G.setUint32(4,1313821514,!0);const X=new ArrayBuffer(12),te=new DataView(X);te.setUint32(0,1179937895,!0),te.setUint32(4,2,!0);const ae=12+G.byteLength+V.byteLength+O.byteLength+D.byteLength;te.setUint32(8,ae,!0);const oe=new Blob([X,G,V,O,D],{type:"application/octet-stream"}),Ae=new FileReader;Ae.readAsArrayBuffer(oe),Ae.onloadend=function(){n(Ae.result)}}}else if(d.buffers&&d.buffers.length>0){const R=new FileReader;R.readAsDataURL(w),R.onloadend=function(){const D=R.result;d.buffers[0].uri=D,n(d)}}else n(d)}serializeUserData(t,n){if(Object.keys(t.userData).length===0)return;const c=this.options,h=this.extensionsUsed;try{const f=JSON.parse(JSON.stringify(t.userData));if(c.includeCustomExtensions&&f.gltfExtensions){n.extensions===void 0&&(n.extensions={});for(const d in f.gltfExtensions)n.extensions[d]=f.gltfExtensions[d],h[d]=!0;delete f.gltfExtensions}Object.keys(f).length>0&&(n.extras=f)}catch(f){console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+f.message)}}getUID(t,n=!1){if(this.uids.has(t)===!1){const c=new Map;c.set(!0,this.uid++),c.set(!1,this.uid++),this.uids.set(t,c)}return this.uids.get(t).get(n)}isNormalizedNormalAttribute(t){if(this.cache.attributesNormalized.has(t))return!1;const n=new Ke;for(let c=0,h=t.count;c<h;c++)if(Math.abs(n.fromBufferAttribute(t,c).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(t){const n=this.cache;if(n.attributesNormalized.has(t))return n.attributesNormalized.get(t);const c=t.clone(),h=new Ke;for(let f=0,d=c.count;f<d;f++)h.fromBufferAttribute(c,f),h.x===0&&h.y===0&&h.z===0?h.setX(1):h.normalize(),c.setXYZ(f,h.x,h.y,h.z);return n.attributesNormalized.set(t,c),c}applyTextureTransform(t,n){let c=!1;const h={};n.offset.x===0&&n.offset.y===0||(h.offset=n.offset.toArray(),c=!0),n.rotation!==0&&(h.rotation=n.rotation,c=!0),n.repeat.x===1&&n.repeat.y===1||(h.scale=n.repeat.toArray(),c=!0),c&&(t.extensions=t.extensions||{},t.extensions.KHR_texture_transform=h,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(t,n){if(t===n)return t;function c(R){return R.colorSpace===Ns?function(D){return D<.04045?.0773993808*D:Math.pow(.9478672986*D+.0521327014,2.4)}:function(D){return D}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),t instanceof mo&&(t=yr(t)),n instanceof mo&&(n=yr(n));const h=t?t.image:null,f=n?n.image:null,d=Math.max(h?h.width:0,f?f.width:0),p=Math.max(h?h.height:0,f?f.height:0),v=n9();v.width=d,v.height=p;const w=v.getContext("2d",{willReadFrequently:!0});w.fillStyle="#00ffff",w.fillRect(0,0,d,p);const S=w.getImageData(0,0,d,p);if(h){w.drawImage(h,0,0,d,p);const R=c(t),D=w.getImageData(0,0,d,p).data;for(let O=2;O<D.length;O+=4)S.data[O]=256*R(D[O]/256)}if(f){w.drawImage(f,0,0,d,p);const R=c(n),D=w.getImageData(0,0,d,p).data;for(let O=1;O<D.length;O+=4)S.data[O]=256*R(D[O]/256)}w.putImageData(S,0,0);const B=(t||n).clone();return B.source=new e_(v),B.colorSpace=fc,B.channel=(t||n).channel,t&&n&&t.channel!==n.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),B}processBuffer(t){const n=this.json,c=this.buffers;return n.buffers||(n.buffers=[{byteLength:0}]),c.push(t),0}processBufferView(t,n,c,h,f){const d=this.json;let p;switch(d.bufferViews||(d.bufferViews=[]),n){case ol:case ls:p=1;break;case Zp:case wB:p=2;break;default:p=4}let v=t.itemSize*p;f===rP&&(v=4*Math.ceil(v/4));const w=i9(h*v),S=new DataView(new ArrayBuffer(w));let B=0;for(let D=c;D<c+h;D++){for(let O=0;O<t.itemSize;O++){let V;t.itemSize>4?V=t.array[D*t.itemSize+O]:(O===0?V=t.getX(D):O===1?V=t.getY(D):O===2?V=t.getZ(D):O===3&&(V=t.getW(D)),t.normalized===!0&&(V=jd.normalize(V,t.array))),n===5126?S.setFloat32(B,V,!0):n===5124?S.setInt32(B,V,!0):n===5125?S.setUint32(B,V,!0):n===Zp?S.setInt16(B,V,!0):n===wB?S.setUint16(B,V,!0):n===ol?S.setInt8(B,V):n===ls&&S.setUint8(B,V),B+=p}B%v!=0&&(B+=v-B%v)}const R={buffer:this.processBuffer(S.buffer),byteOffset:this.byteOffset,byteLength:w};return f!==void 0&&(R.target=f),f===rP&&(R.byteStride=v),this.byteOffset+=w,d.bufferViews.push(R),{id:d.bufferViews.length-1,byteLength:0}}processBufferViewImage(t){const n=this,c=n.json;return c.bufferViews||(c.bufferViews=[]),new Promise(function(h){const f=new FileReader;f.readAsArrayBuffer(t),f.onloadend=function(){const d=oP(f.result),p={buffer:n.processBuffer(d),byteOffset:n.byteOffset,byteLength:d.byteLength};n.byteOffset+=d.byteLength,h(c.bufferViews.push(p)-1)}})}processAccessor(t,n,c,h){const f=this.json;let d;if(t.array.constructor===Float32Array)d=5126;else if(t.array.constructor===Int32Array)d=5124;else if(t.array.constructor===Uint32Array)d=5125;else if(t.array.constructor===Int16Array)d=Zp;else if(t.array.constructor===Uint16Array)d=wB;else if(t.array.constructor===Int8Array)d=ol;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+t.array.constructor.name);d=ls}if(c===void 0&&(c=0),h!==void 0&&h!==1/0||(h=t.count),h===0)return null;const p=function(B,R,D){const O={min:new Array(B.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(B.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let V=R;V<R+D;V++)for(let $=0;$<B.itemSize;$++){let G;B.itemSize>4?G=B.array[V*B.itemSize+$]:($===0?G=B.getX(V):$===1?G=B.getY(V):$===2?G=B.getZ(V):$===3&&(G=B.getW(V)),B.normalized===!0&&(G=jd.normalize(G,B.array))),O.min[$]=Math.min(O.min[$],G),O.max[$]=Math.max(O.max[$],G)}return O}(t,c,h);let v;n!==void 0&&(v=t===n.index?34963:rP);const w=this.processBufferView(t,d,c,h,v),S={bufferView:w.id,byteOffset:w.byteOffset,componentType:d,count:h,max:p.max,min:p.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[t.itemSize]};return t.normalized===!0&&(S.normalized=!0),f.accessors||(f.accessors=[]),f.accessors.push(S)-1}processImage(t,n,c,h="image/png"){if(t!==null){const f=this,d=f.cache,p=f.json,v=f.options,w=f.pending;d.images.has(t)||d.images.set(t,{});const S=d.images.get(t),B=h+":flipY/"+c.toString();if(S[B]!==void 0)return S[B];p.images||(p.images=[]);const R={mimeType:h},D=n9();D.width=Math.min(t.width,v.maxTextureSize),D.height=Math.min(t.height,v.maxTextureSize);const O=D.getContext("2d",{willReadFrequently:!0});if(c===!0&&(O.translate(0,D.height),O.scale(1,-1)),t.data!==void 0){n!==fn&&console.error("GLTFExporter: Only RGBAFormat is supported.",n),(t.width>v.maxTextureSize||t.height>v.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",t);const $=new Uint8ClampedArray(t.height*t.width*4);for(let G=0;G<$.length;G+=4)$[G+0]=t.data[G+0],$[G+1]=t.data[G+1],$[G+2]=t.data[G+2],$[G+3]=t.data[G+3];O.putImageData(new ImageData($,t.width,t.height),0,0)}else{if(!(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas))throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");O.drawImage(t,0,0,D.width,D.height)}v.binary===!0?w.push(r9(D,h).then($=>f.processBufferViewImage($)).then($=>{R.bufferView=$})):D.toDataURL!==void 0?R.uri=D.toDataURL(h):w.push(r9(D,h).then($=>new FileReader().readAsDataURL($)).then($=>{R.uri=$}));const V=p.images.push(R)-1;return S[B]=V,V}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(t){const n=this.json;n.samplers||(n.samplers=[]);const c={magFilter:qM[t.magFilter],minFilter:qM[t.minFilter],wrapS:qM[t.wrapS],wrapT:qM[t.wrapT]};return n.samplers.push(c)-1}processTexture(t){const n=this.options,c=this.cache,h=this.json;if(c.textures.has(t))return c.textures.get(t);h.textures||(h.textures=[]),t instanceof mo&&(t=yr(t,n.maxTextureSize));let f=t.userData.mimeType;f==="image/webp"&&(f="image/png");const d={sampler:this.processSampler(t),source:this.processImage(t.image,t.format,t.flipY,f)};t.name&&(d.name=t.name),this._invokeAll(function(v){v.writeTexture&&v.writeTexture(t,d)});const p=h.textures.push(d)-1;return c.textures.set(t,p),p}processMaterial(t){const n=this.cache,c=this.json;if(n.materials.has(t))return n.materials.get(t);if(t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;c.materials||(c.materials=[]);const h={pbrMetallicRoughness:{}};t.isMeshStandardMaterial!==!0&&t.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const f=t.color.toArray().concat([t.opacity]);if(xB(f,[1,1,1,1])||(h.pbrMetallicRoughness.baseColorFactor=f),t.isMeshStandardMaterial?(h.pbrMetallicRoughness.metallicFactor=t.metalness,h.pbrMetallicRoughness.roughnessFactor=t.roughness):(h.pbrMetallicRoughness.metallicFactor=.5,h.pbrMetallicRoughness.roughnessFactor=.5),t.metalnessMap||t.roughnessMap){const p=this.buildMetalRoughTexture(t.metalnessMap,t.roughnessMap),v={index:this.processTexture(p),channel:p.channel};this.applyTextureTransform(v,p),h.pbrMetallicRoughness.metallicRoughnessTexture=v}if(t.map){const p={index:this.processTexture(t.map),texCoord:t.map.channel};this.applyTextureTransform(p,t.map),h.pbrMetallicRoughness.baseColorTexture=p}if(t.emissive){const p=t.emissive;if(Math.max(p.r,p.g,p.b)>0&&(h.emissiveFactor=t.emissive.toArray()),t.emissiveMap){const v={index:this.processTexture(t.emissiveMap),texCoord:t.emissiveMap.channel};this.applyTextureTransform(v,t.emissiveMap),h.emissiveTexture=v}}if(t.normalMap){const p={index:this.processTexture(t.normalMap),texCoord:t.normalMap.channel};t.normalScale&&t.normalScale.x!==1&&(p.scale=t.normalScale.x),this.applyTextureTransform(p,t.normalMap),h.normalTexture=p}if(t.aoMap){const p={index:this.processTexture(t.aoMap),texCoord:t.aoMap.channel};t.aoMapIntensity!==1&&(p.strength=t.aoMapIntensity),this.applyTextureTransform(p,t.aoMap),h.occlusionTexture=p}t.transparent?h.alphaMode="BLEND":t.alphaTest>0&&(h.alphaMode="MASK",h.alphaCutoff=t.alphaTest),t.side===2&&(h.doubleSided=!0),t.name!==""&&(h.name=t.name),this.serializeUserData(t,h),this._invokeAll(function(p){p.writeMaterial&&p.writeMaterial(t,h)});const d=c.materials.push(h)-1;return n.materials.set(t,d),d}processMesh(t){const n=this.cache,c=this.json,h=[t.geometry.uuid];if(Array.isArray(t.material))for(let ae=0,oe=t.material.length;ae<oe;ae++)h.push(t.material[ae].uuid);else h.push(t.material.uuid);const f=h.join(":");if(n.meshes.has(f))return n.meshes.get(f);const d=t.geometry;let p;p=t.isLineSegments?1:t.isLineLoop?2:t.isLine?3:t.isPoints?0:t.material.wireframe?1:4;const v={},w={},S=[],B=[],R={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},D=d.getAttribute("normal");D===void 0||this.isNormalizedNormalAttribute(D)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),d.setAttribute("normal",this.createNormalizedNormalAttribute(D)));let O=null;for(let ae in d.attributes){if(ae.slice(0,5)==="morph")continue;const oe=d.attributes[ae];if(ae=R[ae]||ae.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(ae)||(ae="_"+ae),n.attributes.has(this.getUID(oe))){w[ae]=n.attributes.get(this.getUID(oe));continue}O=null;const Ae=oe.array;ae!=="JOINTS_0"||Ae instanceof Uint16Array||Ae instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),O=new Ls(new Uint16Array(Ae),oe.itemSize,oe.normalized));const ve=this.processAccessor(O||oe,d);ve!==null&&(ae.startsWith("_")||this.detectMeshQuantization(ae,oe),w[ae]=ve,n.attributes.set(this.getUID(oe),ve))}if(D!==void 0&&d.setAttribute("normal",D),Object.keys(w).length===0)return null;if(t.morphTargetInfluences!==void 0&&t.morphTargetInfluences.length>0){const ae=[],oe=[],Ae={};if(t.morphTargetDictionary!==void 0)for(const ve in t.morphTargetDictionary)Ae[t.morphTargetDictionary[ve]]=ve;for(let ve=0;ve<t.morphTargetInfluences.length;++ve){const De={};let Ne=!1;for(const We in d.morphAttributes){if(We!=="position"&&We!=="normal"){Ne||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),Ne=!0);continue}const vt=d.morphAttributes[We][ve],ot=We.toUpperCase(),nt=d.attributes[We];if(n.attributes.has(this.getUID(vt,!0))){De[ot]=n.attributes.get(this.getUID(vt,!0));continue}const st=vt.clone();if(!d.morphTargetsRelative)for(let mt=0,It=vt.count;mt<It;mt++)for(let Jt=0;Jt<vt.itemSize;Jt++)Jt===0&&st.setX(mt,vt.getX(mt)-nt.getX(mt)),Jt===1&&st.setY(mt,vt.getY(mt)-nt.getY(mt)),Jt===2&&st.setZ(mt,vt.getZ(mt)-nt.getZ(mt)),Jt===3&&st.setW(mt,vt.getW(mt)-nt.getW(mt));De[ot]=this.processAccessor(st,d),n.attributes.set(this.getUID(nt,!0),De[ot])}B.push(De),ae.push(t.morphTargetInfluences[ve]),t.morphTargetDictionary!==void 0&&oe.push(Ae[ve])}v.weights=ae,oe.length>0&&(v.extras={},v.extras.targetNames=oe)}const V=Array.isArray(t.material);if(V&&d.groups.length===0)return null;let $=!1;if(V&&d.index===null){const ae=[];for(let oe=0,Ae=d.attributes.position.count;oe<Ae;oe++)ae[oe]=oe;d.setIndex(ae),$=!0}const G=V?t.material:[t.material],X=V?d.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let ae=0,oe=X.length;ae<oe;ae++){const Ae={mode:p,attributes:w};if(this.serializeUserData(d,Ae),B.length>0&&(Ae.targets=B),d.index!==null){let De=this.getUID(d.index);X[ae].start===void 0&&X[ae].count===void 0||(De+=":"+X[ae].start+":"+X[ae].count),n.attributes.has(De)?Ae.indices=n.attributes.get(De):(Ae.indices=this.processAccessor(d.index,d,X[ae].start,X[ae].count),n.attributes.set(De,Ae.indices)),Ae.indices===null&&delete Ae.indices}const ve=this.processMaterial(G[X[ae].materialIndex]);ve!==null&&(Ae.material=ve),S.push(Ae)}$===!0&&d.setIndex(null),v.primitives=S,c.meshes||(c.meshes=[]),this._invokeAll(function(ae){ae.writeMesh&&ae.writeMesh(t,v)});const te=c.meshes.push(v)-1;return n.meshes.set(f,te),te}detectMeshQuantization(t,n){if(this.extensionsUsed[sP])return;let c;switch(n.array.constructor){case Int8Array:c="byte";break;case Uint8Array:c="unsigned byte";break;case Int16Array:c="short";break;case Uint16Array:c="unsigned short";break;default:return}n.normalized&&(c+=" normalized");const h=t.split("_",1)[0];bn[h]&&bn[h].includes(c)&&(this.extensionsUsed[sP]=!0,this.extensionsRequired[sP]=!0)}processCamera(t){const n=this.json;n.cameras||(n.cameras=[]);const c=t.isOrthographicCamera,h={type:c?"orthographic":"perspective"};return c?h.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:h.perspective={aspectRatio:t.aspect,yfov:jd.degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},t.name!==""&&(h.name=t.type),n.cameras.push(h)-1}processAnimation(t,n){const c=this.json,h=this.nodeMap;c.animations||(c.animations=[]);const f=(t=kn.Utils.mergeMorphTargetTracks(t.clone(),n)).tracks,d=[],p=[];for(let v=0;v<f.length;++v){const w=f[v],S=Zr.parseTrackName(w.name);let B=Zr.findNode(n,S.nodeName);const R=t9[S.propertyName];if(S.objectName==="bones"&&(B=B.isSkinnedMesh===!0?B.skeleton.getBoneByName(S.objectIndex):void 0),!B||!R){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',w.name);continue}const D=1;let O,V=w.values.length/w.times.length;R===t9.morphTargetInfluences&&(V/=B.morphTargetInfluences.length),w.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(O="CUBICSPLINE",V/=3):O=w.getInterpolation()===Gc?"STEP":"LINEAR",p.push({input:this.processAccessor(new Ls(w.times,D)),output:this.processAccessor(new Ls(w.values,V)),interpolation:O}),d.push({sampler:p.length-1,target:{node:h.get(B),path:R}})}return c.animations.push({name:t.name||"clip_"+c.animations.length,samplers:p,channels:d}),c.animations.length-1}processSkin(t){const n=this.json,c=this.nodeMap,h=n.nodes[c.get(t)],f=t.skeleton;if(f===void 0)return null;const d=t.skeleton.bones[0];if(d===void 0)return null;const p=[],v=new Float32Array(16*f.bones.length),w=new nn;for(let S=0;S<f.bones.length;++S)p.push(c.get(f.bones[S])),w.copy(f.boneInverses[S]),w.multiply(t.bindMatrix).toArray(v,16*S);return n.skins===void 0&&(n.skins=[]),n.skins.push({inverseBindMatrices:this.processAccessor(new Ls(v,16)),joints:p,skeleton:c.get(d)}),h.skin=n.skins.length-1}processNode(t){const n=this.json,c=this.options,h=this.nodeMap;n.nodes||(n.nodes=[]);const f={};if(c.trs){const p=t.quaternion.toArray(),v=t.position.toArray(),w=t.scale.toArray();xB(p,[0,0,0,1])||(f.rotation=p),xB(v,[0,0,0])||(f.translation=v),xB(w,[1,1,1])||(f.scale=w)}else t.matrixAutoUpdate&&t.updateMatrix(),xB(t.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])===!1&&(f.matrix=t.matrix.elements);if(t.name!==""&&(f.name=String(t.name)),this.serializeUserData(t,f),t.isMesh||t.isLine||t.isPoints){const p=this.processMesh(t);p!==null&&(f.mesh=p)}else t.isCamera&&(f.camera=this.processCamera(t));if(t.isSkinnedMesh&&this.skins.push(t),t.children.length>0){const p=[];for(let v=0,w=t.children.length;v<w;v++){const S=t.children[v];if(S.visible||c.onlyVisible===!1){const B=this.processNode(S);B!==null&&p.push(B)}}p.length>0&&(f.children=p)}this._invokeAll(function(p){p.writeNode&&p.writeNode(t,f)});const d=n.nodes.push(f)-1;return h.set(t,d),d}processScene(t){const n=this.json,c=this.options;n.scenes||(n.scenes=[],n.scene=0);const h={};t.name!==""&&(h.name=t.name),n.scenes.push(h);const f=[];for(let d=0,p=t.children.length;d<p;d++){const v=t.children[d];if(v.visible||c.onlyVisible===!1){const w=this.processNode(v);w!==null&&f.push(w)}}f.length>0&&(h.nodes=f),this.serializeUserData(t,h)}processObjects(t){const n=new El;n.name="AuxScene";for(let c=0;c<t.length;c++)n.children.push(t[c]);this.processScene(n)}processInput(t){const n=this.options;t=t instanceof Array?t:[t],this._invokeAll(function(h){h.beforeParse&&h.beforeParse(t)});const c=[];for(let h=0;h<t.length;h++)t[h]instanceof El?this.processScene(t[h]):c.push(t[h]);c.length>0&&this.processObjects(c);for(let h=0;h<this.skins.length;++h)this.processSkin(this.skins[h]);for(let h=0;h<n.animations.length;++h)this.processAnimation(n.animations[h],t[0]);this._invokeAll(function(h){h.afterParse&&h.afterParse(t)})}_invokeAll(t){for(let n=0,c=this.plugins.length;n<c;n++)t(this.plugins[n])}}class Gce{constructor(t){this.writer=t,this.name="KHR_lights_punctual"}writeNode(t,n){if(!t.isLight)return;if(!t.isDirectionalLight&&!t.isPointLight&&!t.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t);const c=this.writer,h=c.json,f=c.extensionsUsed,d={};t.name&&(d.name=t.name),d.color=t.color.toArray(),d.intensity=t.intensity,t.isDirectionalLight?d.type="directional":t.isPointLight?(d.type="point",t.distance>0&&(d.range=t.distance)):t.isSpotLight&&(d.type="spot",t.distance>0&&(d.range=t.distance),d.spot={},d.spot.innerConeAngle=(1-t.penumbra)*t.angle,d.spot.outerConeAngle=t.angle),t.decay!==void 0&&t.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!t.target||t.target.parent===t&&t.target.position.x===0&&t.target.position.y===0&&t.target.position.z===-1||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),f[this.name]||(h.extensions=h.extensions||{},h.extensions[this.name]={lights:[]},f[this.name]=!0);const p=h.extensions[this.name].lights;p.push(d),n.extensions=n.extensions||{},n.extensions[this.name]={light:p.length-1}}}class Vce{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}writeMaterial(t,n){if(!t.isMeshBasicMaterial)return;const c=this.writer.extensionsUsed;n.extensions=n.extensions||{},n.extensions[this.name]={},c[this.name]=!0,n.pbrMetallicRoughness.metallicFactor=0,n.pbrMetallicRoughness.roughnessFactor=.9}}class qce{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.clearcoat===0)return;const c=this.writer,h=c.extensionsUsed,f={};if(f.clearcoatFactor=t.clearcoat,t.clearcoatMap){const d={index:c.processTexture(t.clearcoatMap),texCoord:t.clearcoatMap.channel};c.applyTextureTransform(d,t.clearcoatMap),f.clearcoatTexture=d}if(f.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){const d={index:c.processTexture(t.clearcoatRoughnessMap),texCoord:t.clearcoatRoughnessMap.channel};c.applyTextureTransform(d,t.clearcoatRoughnessMap),f.clearcoatRoughnessTexture=d}if(t.clearcoatNormalMap){const d={index:c.processTexture(t.clearcoatNormalMap),texCoord:t.clearcoatNormalMap.channel};t.clearcoatNormalScale.x!==1&&(d.scale=t.clearcoatNormalScale.x),c.applyTextureTransform(d,t.clearcoatNormalMap),f.clearcoatNormalTexture=d}n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class $ce{constructor(t){this.writer=t,this.name="KHR_materials_dispersion"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.dispersion===0)return;const c=this.writer.extensionsUsed,h={};h.dispersion=t.dispersion,n.extensions=n.extensions||{},n.extensions[this.name]=h,c[this.name]=!0}}class Wce{constructor(t){this.writer=t,this.name="KHR_materials_iridescence"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.iridescence===0)return;const c=this.writer,h=c.extensionsUsed,f={};if(f.iridescenceFactor=t.iridescence,t.iridescenceMap){const d={index:c.processTexture(t.iridescenceMap),texCoord:t.iridescenceMap.channel};c.applyTextureTransform(d,t.iridescenceMap),f.iridescenceTexture=d}if(f.iridescenceIor=t.iridescenceIOR,f.iridescenceThicknessMinimum=t.iridescenceThicknessRange[0],f.iridescenceThicknessMaximum=t.iridescenceThicknessRange[1],t.iridescenceThicknessMap){const d={index:c.processTexture(t.iridescenceThicknessMap),texCoord:t.iridescenceThicknessMap.channel};c.applyTextureTransform(d,t.iridescenceThicknessMap),f.iridescenceThicknessTexture=d}n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class jce{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.transmission===0)return;const c=this.writer,h=c.extensionsUsed,f={};if(f.transmissionFactor=t.transmission,t.transmissionMap){const d={index:c.processTexture(t.transmissionMap),texCoord:t.transmissionMap.channel};c.applyTextureTransform(d,t.transmissionMap),f.transmissionTexture=d}n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class Kce{constructor(t){this.writer=t,this.name="KHR_materials_volume"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.transmission===0)return;const c=this.writer,h=c.extensionsUsed,f={};if(f.thicknessFactor=t.thickness,t.thicknessMap){const d={index:c.processTexture(t.thicknessMap),texCoord:t.thicknessMap.channel};c.applyTextureTransform(d,t.thicknessMap),f.thicknessTexture=d}t.attenuationDistance!==1/0&&(f.attenuationDistance=t.attenuationDistance),f.attenuationColor=t.attenuationColor.toArray(),n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class Xce{constructor(t){this.writer=t,this.name="KHR_materials_ior"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.ior===1.5)return;const c=this.writer.extensionsUsed,h={};h.ior=t.ior,n.extensions=n.extensions||{},n.extensions[this.name]=h,c[this.name]=!0}}class Yce{constructor(t){this.writer=t,this.name="KHR_materials_specular"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.specularIntensity===1&&t.specularColor.equals(Hce)&&!t.specularIntensityMap&&!t.specularColorMap)return;const c=this.writer,h=c.extensionsUsed,f={};if(t.specularIntensityMap){const d={index:c.processTexture(t.specularIntensityMap),texCoord:t.specularIntensityMap.channel};c.applyTextureTransform(d,t.specularIntensityMap),f.specularTexture=d}if(t.specularColorMap){const d={index:c.processTexture(t.specularColorMap),texCoord:t.specularColorMap.channel};c.applyTextureTransform(d,t.specularColorMap),f.specularColorTexture=d}f.specularFactor=t.specularIntensity,f.specularColorFactor=t.specularColor.toArray(),n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class Jce{constructor(t){this.writer=t,this.name="KHR_materials_sheen"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.sheen==0)return;const c=this.writer,h=c.extensionsUsed,f={};if(t.sheenRoughnessMap){const d={index:c.processTexture(t.sheenRoughnessMap),texCoord:t.sheenRoughnessMap.channel};c.applyTextureTransform(d,t.sheenRoughnessMap),f.sheenRoughnessTexture=d}if(t.sheenColorMap){const d={index:c.processTexture(t.sheenColorMap),texCoord:t.sheenColorMap.channel};c.applyTextureTransform(d,t.sheenColorMap),f.sheenColorTexture=d}f.sheenRoughnessFactor=t.sheenRoughness,f.sheenColorFactor=t.sheenColor.toArray(),n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class Zce{constructor(t){this.writer=t,this.name="KHR_materials_anisotropy"}writeMaterial(t,n){if(!t.isMeshPhysicalMaterial||t.anisotropy==0)return;const c=this.writer,h=c.extensionsUsed,f={};if(t.anisotropyMap){const d={index:c.processTexture(t.anisotropyMap)};c.applyTextureTransform(d,t.anisotropyMap),f.anisotropyTexture=d}f.anisotropyStrength=t.anisotropy,f.anisotropyRotation=t.anisotropyRotation,n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class eue{constructor(t){this.writer=t,this.name="KHR_materials_emissive_strength"}writeMaterial(t,n){if(!t.isMeshStandardMaterial||t.emissiveIntensity===1)return;const c=this.writer.extensionsUsed,h={};h.emissiveStrength=t.emissiveIntensity,n.extensions=n.extensions||{},n.extensions[this.name]=h,c[this.name]=!0}}class tue{constructor(t){this.writer=t,this.name="EXT_materials_bump"}writeMaterial(t,n){if(!t.isMeshStandardMaterial||t.bumpScale===1&&!t.bumpMap)return;const c=this.writer,h=c.extensionsUsed,f={};if(t.bumpMap){const d={index:c.processTexture(t.bumpMap),texCoord:t.bumpMap.channel};c.applyTextureTransform(d,t.bumpMap),f.bumpTexture=d}f.bumpFactor=t.bumpScale,n.extensions=n.extensions||{},n.extensions[this.name]=f,h[this.name]=!0}}class iue{constructor(t){this.writer=t,this.name="EXT_mesh_gpu_instancing"}writeNode(t,n){if(!t.isInstancedMesh)return;const c=this.writer,h=t,f=new Float32Array(3*h.count),d=new Float32Array(4*h.count),p=new Float32Array(3*h.count),v=new nn,w=new Ke,S=new ha,B=new Ke;for(let D=0;D<h.count;D++)h.getMatrixAt(D,v),v.decompose(w,S,B),w.toArray(f,3*D),S.toArray(d,4*D),B.toArray(p,3*D);const R={TRANSLATION:c.processAccessor(new Ls(f,3)),ROTATION:c.processAccessor(new Ls(d,4)),SCALE:c.processAccessor(new Ls(p,3))};h.instanceColor&&(R._COLOR_0=c.processAccessor(h.instanceColor)),n.extensions=n.extensions||{},n.extensions[this.name]={attributes:R},c.extensionsUsed[this.name]=!0,c.extensionsRequired[this.name]=!0}}kn.Utils={insertKeyframe:function(o,t){const c=o.getValueSize(),h=new o.TimeBufferType(o.times.length+1),f=new o.ValueBufferType(o.values.length+c),d=o.createInterpolant(new o.ValueBufferType(c));let p;if(o.times.length===0){h[0]=t;for(let v=0;v<c;v++)f[v]=0;p=0}else if(t<o.times[0]){if(Math.abs(o.times[0]-t)<.001)return 0;h[0]=t,h.set(o.times,1),f.set(d.evaluate(t),0),f.set(o.values,c),p=0}else if(t>o.times[o.times.length-1]){if(Math.abs(o.times[o.times.length-1]-t)<.001)return o.times.length-1;h[h.length-1]=t,h.set(o.times,0),f.set(o.values,0),f.set(d.evaluate(t),o.values.length),p=h.length-1}else for(let v=0;v<o.times.length;v++){if(Math.abs(o.times[v]-t)<.001)return v;if(o.times[v]<t&&o.times[v+1]>t){h.set(o.times.slice(0,v+1),0),h[v+1]=t,h.set(o.times.slice(v+1),v+2),f.set(o.values.slice(0,(v+1)*c),0),f.set(d.evaluate(t),(v+1)*c),f.set(o.values.slice((v+1)*c),(v+2)*c),p=v+1;break}}return o.times=h,o.values=f,p},mergeMorphTargetTracks:function(o,t){const n=[],c={},h=o.tracks;for(let f=0;f<h.length;++f){let d=h[f];const p=Zr.parseTrackName(d.name),v=Zr.findNode(t,p.nodeName);if(p.propertyName!=="morphTargetInfluences"||p.propertyIndex===void 0){n.push(d);continue}if(d.createInterpolant!==d.InterpolantFactoryMethodDiscrete&&d.createInterpolant!==d.InterpolantFactoryMethodLinear){if(d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),d=d.clone(),d.setInterpolation(rh)}const w=v.morphTargetInfluences.length,S=v.morphTargetDictionary[p.propertyIndex];if(S===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+p.propertyIndex);let B;if(c[v.uuid]===void 0){B=d.clone();const D=new B.ValueBufferType(w*B.times.length);for(let O=0;O<B.times.length;O++)D[O*w+S]=B.values[O];B.name=(p.nodeName||"")+".morphTargetInfluences",B.values=D,c[v.uuid]=B,n.push(B);continue}const R=d.createInterpolant(new d.ValueBufferType(1));B=c[v.uuid];for(let D=0;D<B.times.length;D++)B.values[D*w+S]=R.evaluate(B.times[D]);for(let D=0;D<d.times.length;D++){const O=this.insertKeyframe(B,d.times[D]);B.values[O*w+S]=d.values[D]}}return o.tracks=n,o}};const s9=o=>o.material!==void 0&&o.userData&&o.userData.variantMaterials&&!!Array.from(o.userData.variantMaterials.values()).filter(t=>$M(t.material)),$M=o=>o&&o.isMaterial&&!Array.isArray(o);class nue{constructor(t){this.writer=t,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(t){const n=new Set;for(const c of t)c.traverse(h=>{if(!s9(h))return;const f=h.userData.variantMaterials,d=h.userData.variantData;for(const[p,v]of d){const w=f.get(v.index);w&&$M(w.material)&&n.add(p)}});n.forEach(c=>this.variantNames.push(c))}writeMesh(t,n){if(!s9(t))return;const c=t.userData,h=c.variantMaterials,f=c.variantData,d=new Map,p=new Map,v=Array.from(f.values()).sort((B,R)=>B.index-R.index);for(const[B,R]of v.entries())p.set(R.index,B);for(const B of f.values()){const R=h.get(B.index);if(!R||!$M(R.material))continue;const D=this.writer.processMaterial(R.material);d.has(D)||d.set(D,{material:D,variants:[]}),d.get(D).variants.push(p.get(B.index))}const w=Array.from(d.values()).map(B=>B.variants.sort((R,D)=>R-D)&&B).sort((B,R)=>B.material-R.material);if(w.length===0)return;const S=$M(c.originalMaterial)?this.writer.processMaterial(c.originalMaterial):-1;for(const B of n.primitives)S>=0&&(B.material=S),B.extensions=B.extensions||{},B.extensions[this.name]={mappings:w}}afterParse(){if(this.variantNames.length===0)return;const t=this.writer.json;t.extensions=t.extensions||{};const n=this.variantNames.map(c=>({name:c}));t.extensions[this.name]={variants:n},this.writer.extensionsUsed[this.name]=!0}}class rue{constructor(t,n,c,h,f){this.xrLight=t,this.renderer=n,this.lightProbe=c,this.xrWebGLBinding=null,this.estimationStartCallback=f,this.frameCallback=this.onXRFrame.bind(this);const d=n.xr.getSession();if(h&&"XRWebGLBinding"in window){const p=new il(16);t.environment=p.texture;const v=n.getContext();switch(d.preferredReflectionFormat){case"srgba8":v.getExtension("EXT_sRGB");break;case"rgba16f":v.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(d,v),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}d.requestAnimationFrame(this.frameCallback)}updateReflection(){const t=this.renderer.properties.get(this.xrLight.environment);if(t){const n=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);n&&(t.__webglTexture=n,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(t,n){if(!this.xrLight)return;n.session.requestAnimationFrame(this.frameCallback);const c=n.getLightEstimate(this.lightProbe);if(c){this.xrLight.lightProbe.sh.fromArray(c.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const h=Math.max(1,Math.max(c.primaryLightIntensity.x,Math.max(c.primaryLightIntensity.y,c.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(c.primaryLightIntensity.x/h,c.primaryLightIntensity.y/h,c.primaryLightIntensity.z/h),this.xrLight.directionalLight.intensity=h,this.xrLight.directionalLight.position.copy(c.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class sue extends mh{constructor(t,n=!0){super(),this.lightProbe=new VL,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new _M,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let c=null,h=!1;t.xr.addEventListener("sessionstart",()=>{const f=t.xr.getSession();"requestLightProbe"in f&&f.requestLightProbe({reflectionFormat:f.preferredReflectionFormat}).then(d=>{c=new rue(this,t,d,n,()=>{h=!0,this.dispatchEvent({type:"estimationstart"})})})}),t.xr.addEventListener("sessionend",()=>{c&&(c.dispose(),c=null),h&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{c&&(c.dispose(),c=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}class vd{constructor(t=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(t)}setDecayTime(t){this.naturalFrequency=1/Math.max(.001,t)}update(t,n,c,h){const f=2e-4*this.naturalFrequency;if(t==null||h===0||t===n&&this.velocity===0)return n;if(c<0)return t;const d=t-n,p=this.velocity+this.naturalFrequency*d,v=d+c*p,w=Math.exp(-this.naturalFrequency*c),S=(p-this.naturalFrequency*v)*w,B=-this.naturalFrequency*(S+p*w);return Math.abs(S)<f*Math.abs(h)&&B*d>=0?(this.velocity=0,n):(this.velocity=S,n+v*w)}}const Qx=.2,oue=Math.PI/24,o9=new Cn,WM=(o,t,n)=>{let c=t>0?n>0?0:-Math.PI/2:n>0?Math.PI/2:Math.PI;for(let h=0;h<=12;++h)o.push(t+.17*Math.cos(c),n+.17*Math.sin(c),0,t+Qx*Math.cos(c),n+Qx*Math.sin(c),0),c+=oue};class a9 extends As{constructor(t,n){const c=new ga,h=[],f=[],{size:d,boundingBox:p}=t,v=d.x/2,w=(n==="back"?d.y:d.z)/2;WM(f,v,w),WM(f,-v,w),WM(f,-v,-w),WM(f,v,-w);const S=f.length/3;for(let D=0;D<S-2;D+=2)h.push(D,D+1,D+3,D,D+3,D+2);const B=S-2;h.push(B,B+1,1,B,1,0),c.setAttribute("position",new fa(f,3)),c.setIndex(h),super(c),this.side=n;const R=this.material;switch(R.side=2,R.transparent=!0,R.opacity=0,this.goalOpacity=0,this.opacityDamper=new vd,this.hitPlane=new As(new Qa(2*(v+Qx),2*(w+Qx))),this.hitPlane.visible=!1,this.hitPlane.material.side=2,this.add(this.hitPlane),this.hitBox=new As(new ad(d.x+.4,d.y+Qx,d.z+.4)),this.hitBox.visible=!1,this.hitBox.material.side=2,this.add(this.hitBox),p.getCenter(this.position),n){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=p.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=p.min.z,this.position.z=this.shadowHeight}t.target.add(this),this.hitBox.position.y=(d.y+Qx)/2+p.min.y,t.target.add(this.hitBox),this.offsetHeight=0}getHit(t,n,c){o9.set(n,-c),this.hitPlane.visible=!0;const h=t.positionAndNormalFromPoint(o9,this.hitPlane);return this.hitPlane.visible=!1,h==null?null:h.position}getExpandedHit(t,n,c){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const h=this.getHit(t,n,c);return this.hitPlane.scale.set(1,1,1),h}controllerIntersection(t,n){this.hitBox.visible=!0;const c=t.hitFromController(n,this.hitBox);return this.hitBox.visible=!1,c}set offsetHeight(t){t-=.001,this.side==="back"?this.position.z=this.shadowHeight+t:this.position.y=this.shadowHeight+t}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(t){this.goalOpacity=t?.75:0}updateOpacity(t){const n=this.material;n.opacity=this.opacityDamper.update(n.opacity,this.goalOpacity,t,1),this.visible=n.opacity>0}dispose(){const{geometry:t,material:n}=this.hitPlane;t.dispose(),n.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}const Sh=(o,t)=>({type:"number",number:o,unit:t}),Q_=(()=>{const o={};return t=>{const n=t;if(n in o)return o[n];const c=[];let h=0;for(;t;){if(++h>1e3){t="";break}const f=l9(t),d=f.nodes[0];if(d==null||d.terms.length===0)break;c.push(d),t=f.remainingInput}return o[n]=c}})(),l9=(()=>{const o=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,n=/^[\),]/;return c=>{const h=[];for(;c.length&&(c=c.trim(),!n.test(c));)if(c[0]==="("){const{nodes:f,remainingInput:d}=c9(c);c=d,h.push({type:"function",name:{type:"ident",value:"calc"},arguments:f})}else if(o.test(c)){const f=aue(c),d=f.nodes[0];if((c=f.remainingInput)[0]==="("){const{nodes:p,remainingInput:v}=c9(c);h.push({type:"function",name:d,arguments:p}),c=v}else h.push(d)}else if(t.test(c))h.push({type:"operator",value:c[0]}),c=c.slice(1);else{const{nodes:f,remainingInput:d}=c[0]==="#"?cue(c):lue(c);if(f.length===0)break;h.push(f[0]),c=d}return{nodes:[{type:"expression",terms:h}],remainingInput:c}}})(),aue=(()=>{const o=/[^a-z0-9_\-\u0240-\uffff]/i;return t=>{const n=t.match(o);return{nodes:[{type:"ident",value:n==null?t:t.substr(0,n.index)}],remainingInput:n==null?"":t.substr(n.index)}}})(),lue=(()=>{const o=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,n=/^(m|mm|cm|rad|deg|[%])$/;return c=>{const h=c.match(o),f=h==null?"0":h[0],d=(c=f==null?c:c.slice(f.length)).match(t);let p=d!=null&&d[0]!==""?d[0]:null;const v=d==null?c:c.slice(p.length);return p==null||n.test(p)||(p=null),{nodes:[{type:"number",number:parseFloat(f)||0,unit:p}],remainingInput:v}}})(),cue=(()=>{const o=/^[a-f0-9]*/i;return t=>{const n=(t=t.slice(1).trim()).match(o);return{nodes:n==null?[]:[{type:"hex",value:n[0]}],remainingInput:n==null?t:t.slice(n[0].length)}}})(),c9=o=>{const t=[];for(o=o.slice(1).trim();o.length;){const n=l9(o);if(t.push(n.nodes[0]),(o=n.remainingInput.trim())[0]===",")o=o.slice(1).trim();else if(o[0]===")"){o=o.slice(1);break}}return{nodes:t,remainingInput:o}},u9=Symbol("visitedTypes");class uue{constructor(t){this[u9]=t}walk(t,n){const c=t.slice();for(;c.length;){const h=c.shift();switch(this[u9].indexOf(h.type)>-1&&n(h),h.type){case"expression":c.unshift(...h.terms);break;case"function":c.unshift(h.name,...h.arguments)}}}}const D0=Object.freeze({type:"number",number:0,unit:null}),jM=(o,t=0)=>{let{number:n,unit:c}=o;if(isFinite(n)){if(o.unit==="rad"||o.unit==null)return o}else n=t,c="rad";return{type:"number",number:(c==="deg"&&n!=null?n:0)*Math.PI/180,unit:"rad"}},h9=(o,t=0)=>{let n,{number:c,unit:h}=o;if(isFinite(c)){if(o.unit==="m")return o}else c=t,h="m";switch(h){default:n=1;break;case"cm":n=.01;break;case"mm":n=.001}return{type:"number",number:n*c,unit:"m"}},vm=(()=>{const o=n=>n,t={rad:o,deg:jM,m:o,mm:h9,cm:h9};return(n,c=D0)=>{isFinite(n.number)||(n.number=c.number,n.unit=c.unit);const{unit:h}=n;if(h==null)return n;const f=t[h];return f==null?c:f(n)}})();var d9,A9,p9;const Nx=Symbol("evaluate"),KM=Symbol("lastValue");class wa{constructor(){this[d9]=null}static evaluatableFor(t,n=D0){if(t instanceof wa)return t;if(t.type==="number")return t.unit==="%"?new hue(t,n):t;switch(t.name.value){case"calc":return new pue(t,n);case"env":return new due(t)}return D0}static evaluate(t){return t instanceof wa?t.evaluate():t}static isConstant(t){return!(t instanceof wa)||t.isConstant}static applyIntrinsics(t,n){const{basis:c,keywords:h}=n,{auto:f}=h;return c.map((d,p)=>{const v=f[p]==null?d:f[p];let w=t[p]?t[p]:v;if(w.type==="ident"){const S=w.value;S in h&&(w=h[S][p])}return w!=null&&w.type!=="ident"||(w=v),w.unit==="%"?Sh(w.number/100*d.number,d.unit):(w=vm(w,d),w.unit!==d.unit?d:w)})}get isConstant(){return!1}evaluate(){return this.isConstant&&this[KM]!=null||(this[KM]=this[Nx]()),this[KM]}}d9=KM;const f9=Symbol("percentage"),aP=Symbol("basis");class hue extends wa{constructor(t,n){super(),this[f9]=t,this[aP]=n}get isConstant(){return!0}[Nx](){return Sh(this[f9].number/100*this[aP].number,this[aP].unit)}}const XM=Symbol("identNode");class due extends wa{constructor(t){super(),this[A9]=null;const n=t.arguments.length?t.arguments[0].terms[0]:null;n!=null&&n.type==="ident"&&(this[XM]=n)}get isConstant(){return!1}[(A9=XM,Nx)](){return this[XM]!=null&&this[XM].value==="window-scroll-y"?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:D0}}const Aue=/[\*\/]/,Hx=Symbol("evaluator");class pue extends wa{constructor(t,n=D0){if(super(),this[p9]=null,t.arguments.length!==1)return;const c=t.arguments[0].terms.slice(),h=[];for(;c.length;){const f=c.shift();if(h.length>0){const d=h[h.length-1];if(d.type==="operator"&&Aue.test(d.value)){const p=h.pop(),v=h.pop();if(v==null)return;h.push(new m9(p,wa.evaluatableFor(v,n),wa.evaluatableFor(f,n)));continue}}h.push(f.type==="operator"?f:wa.evaluatableFor(f,n))}for(;h.length>2;){const[f,d,p]=h.splice(0,3);if(d.type!=="operator")return;h.unshift(new m9(d,wa.evaluatableFor(f,n),wa.evaluatableFor(p,n)))}h.length===1&&(this[Hx]=h[0])}get isConstant(){return this[Hx]==null||wa.isConstant(this[Hx])}[(p9=Hx,Nx)](){return this[Hx]!=null?wa.evaluate(this[Hx]):D0}}const g9=Symbol("operator"),lP=Symbol("left"),cP=Symbol("right");class m9 extends wa{constructor(t,n,c){super(),this[g9]=t,this[lP]=n,this[cP]=c}get isConstant(){return wa.isConstant(this[lP])&&wa.isConstant(this[cP])}[Nx](){const t=vm(wa.evaluate(this[lP])),n=vm(wa.evaluate(this[cP])),{number:c,unit:h}=t,{number:f,unit:d}=n;if(d!=null&&h!=null&&d!=h)return D0;const p=h||d;let v;switch(this[g9].value){case"+":v=c+f;break;case"-":v=c-f;break;case"/":v=c/f;break;case"*":v=c*f;break;default:return D0}return{type:"number",number:v,unit:p}}}const uP=Symbol("evaluatables"),_9=Symbol("intrinsics");class v9 extends wa{constructor(t,n){super(),this[_9]=n;const c=t[0],h=c!=null?c.terms:[];this[uP]=n.basis.map((f,d)=>{const p=h[d];return p==null?{type:"ident",value:"auto"}:p.type==="ident"?p:wa.evaluatableFor(p,f)})}get isConstant(){for(const t of this[uP])if(!wa.isConstant(t))return!1;return!0}[Nx](){const t=this[uP].map(n=>wa.evaluate(n));return wa.applyIntrinsics(t,this[_9]).map(n=>n.number)}}var y9,b9,w9,x9;const zx=Symbol("instances"),C9=Symbol("activateListener"),E9=Symbol("deactivateListener"),hP=Symbol("notifyInstances"),S9=Symbol("notify"),B9=Symbol("callback");class ym{constructor(t){this[B9]=t}static[hP](){for(const t of ym[zx])t[S9]()}static[(y9=zx,C9)](){window.addEventListener("scroll",this[hP],{passive:!0})}static[E9](){window.removeEventListener("scroll",this[hP])}observe(){ym[zx].size===0&&ym[C9](),ym[zx].add(this)}disconnect(){ym[zx].delete(this),ym[zx].size===0&&ym[E9]()}[S9](){this[B9]()}}ym[y9]=new Set;const I9=Symbol("computeStyleCallback"),T9=Symbol("astWalker"),CB=Symbol("dependencies"),M9=Symbol("onScroll");class fue{constructor(t){this[b9]={},this[w9]=new uue(["function"]),this[x9]=()=>{this[I9]({relatedState:"window-scroll"})},this[I9]=t}observeEffectsFor(t){const n={},c=this[CB];this[T9].walk(t,h=>{const{name:f}=h,d=h.arguments[0].terms[0];if(f.value==="env"&&d!=null&&d.type==="ident"&&d.value==="window-scroll-y"&&n["window-scroll"]==null){const p="window-scroll"in c?c["window-scroll"]:new ym(this[M9]);p.observe(),delete c["window-scroll"],n["window-scroll"]=p}});for(const h in c)c[h].disconnect();this[CB]=n}dispose(){for(const t in this[CB])this[CB][t].disconnect()}}b9=CB,w9=T9,x9=M9;const F0=o=>{const t=o.observeEffects||!1,n=o.intrinsics instanceof Function?o.intrinsics:()=>o.intrinsics;return(c,h)=>{const f=c.updated,d=c.connectedCallback,p=c.disconnectedCallback,v=Symbol(`${h}StyleEffector`),w=Symbol(`${h}StyleEvaluator`),S=Symbol(`${h}UpdateEvaluator`),B=Symbol(`${h}EvaluateAndSync`);Object.defineProperties(c,{[v]:{value:null,writable:!0},[w]:{value:null,writable:!0},[S]:{value:function(){const R=Q_(this[h]);this[w]=new v9(R,n(this)),this[v]==null&&t&&(this[v]=new fue(()=>this[B]())),this[v]!=null&&this[v].observeEffectsFor(R)}},[B]:{value:function(){if(this[w]==null)return;const R=this[w].evaluate();this[o.updateHandler](R)}},updated:{value:function(R){R.has(h)&&(this[S](),this[B]()),f.call(this,R)}},connectedCallback:{value:function(){d.call(this),this.requestUpdate(h,this[h])}},disconnectedCallback:{value:function(){p.call(this),this[v]!=null&&(this[v].dispose(),this[v]=null)}}})}},R9=o=>o<.5?2*o*o:(4-2*o)*o-1,gue=(o,t,n=R9)=>c=>o+(t-o)*n(c),Gx=o=>{const t=[],n=[];let c=o.initialValue;for(let h=0;h<o.keyframes.length;++h){const f=o.keyframes[h],{value:d,frames:p}=f,v=f.ease||R9,w=gue(c,d,v);t.push(w),n.push(p),c=d}return((h,f)=>{const d=f.map((p=0,v=>p+=v));var p;return v=>{v=_d(v,0,1),v*=d[d.length-1];const w=d.findIndex(R=>R>=v),S=w<1?0:d[w-1],B=d[w];return h[w]((v-S)/(B-S))}})(t,n)};var tc=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const mue=Gx({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),_ue=Gx({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),D9="0deg 75deg 105%",vue=["front","right","back","left"],yue=["upper-","","lower-"],YM="auto",F9="wiggle",U9=()=>({basis:[jM(Sh(30,"deg"))],keywords:{auto:[null]}}),bue=()=>({basis:[jM(Sh(12,"deg"))],keywords:{auto:[null]}}),k9=(()=>{const o=Q_(D9)[0].terms,t=vm(o[0]),n=vm(o[1]);return c=>{const h=c[Ei].idealCameraDistance();return{basis:[t,n,Sh(h,"m")],keywords:{auto:[null,null,Sh(105,"%")]}}}})(),wue=o=>{const t=2.2*o[Ei].boundingSphere.radius;return{basis:[Sh(-1/0,"rad"),Sh(0,"rad"),Sh(t,"m")],keywords:{auto:[null,null,null]}}},xue=o=>{const t=k9(o),n=new v9([],t).evaluate()[2];return{basis:[Sh(1/0,"rad"),Sh(Math.PI,"rad"),Sh(n,"m")],keywords:{auto:[null,null,null]}}},Cue=o=>{const t=o[Ei].boundingBox.getCenter(new Ke);return{basis:[Sh(t.x,"m"),Sh(t.y,"m"),Sh(t.z,"m")],keywords:{auto:[null,null,null]}}},L9=Math.PI/2,Eue=Math.PI/3,Sue=L9/2,Bue=2*Math.PI,$s=Symbol("controls"),JM=Symbol("panElement"),dP=Symbol("promptElement"),ZM=Symbol("promptAnimatedContainer"),AP=Symbol("fingerAnimatedContainers"),e5=Symbol("deferInteractionPrompt"),P9=Symbol("updateAria"),N_=Symbol("a11y"),O9=Symbol("updateA11y"),Q9=Symbol("updateCameraForRadius"),Vx=Symbol("cancelPrompts"),pP=Symbol("onChange"),EB=Symbol("onPointerChange"),$b=Symbol("waitingToPromptUser"),t5=Symbol("userHasInteracted"),qx=Symbol("promptElementVisibleTime"),SB=Symbol("lastPromptOffset"),i5=Symbol("cancellationSource"),fP=Symbol("lastSpherical"),BB=Symbol("jumpCamera"),gP=Symbol("initialized"),IB=Symbol("maintainThetaPhi"),N9=Symbol("syncCameraOrbit"),H9=Symbol("syncFieldOfView"),z9=Symbol("syncCameraTarget"),G9=Symbol("syncMinCameraOrbit"),V9=Symbol("syncMaxCameraOrbit"),q9=Symbol("syncMinFieldOfView"),$9=Symbol("syncMaxFieldOfView"),Iue=new Cn,W9=new Ke,j9=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),n5=Math.PI/8,mP=.04,ag="user-interaction",$x="none",Wb="automatic";class Tue extends qc{constructor(t,n,c){super(),this.camera=t,this.element=n,this.scene=c,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=$x,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new On,this.panPerPixel=0,this.spherical=new y0,this.goalSpherical=new y0,this.thetaDamper=new vd,this.phiDamper=new vd,this.radiusDamper=new vd,this.logFov=Math.log(j9.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new vd,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=h=>{if(this.enablePan)h.preventDefault();else for(const f of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:f.id})))},this.touchModeZoom=(h,f)=>{if(!this._disableZoom){const d=this.twoTouchDistance(this.pointers[0],this.pointers[1]),p=mP*this.zoomSensitivity*(this.lastSeparation-d)*50/this.scene.height;this.lastSeparation=d,this.userAdjustOrbit(0,0,p)}this.panPerPixel>0&&this.movePan(h,f)},this.disableScroll=h=>{h.preventDefault()},this.touchModeRotate=(h,f)=>{const{touchAction:d}=this._options;if(!this.touchDecided&&d!=="none"){this.touchDecided=!0;const p=Math.abs(h),v=Math.abs(f);if(this.changeSource===ag&&(d==="pan-y"&&v>p||d==="pan-x"&&p>v))return void(this.touchMode=null);this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(h,f)},this.onPointerDown=h=>{if(this.pointers.length>2)return;const{element:f}=this;this.pointers.length===0&&(f.addEventListener("pointermove",this.onPointerMove),f.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=h.clientX,this.startPointerPosition.clientY=h.clientY,this.startTime=performance.now());try{f.setPointerCapture(h.pointerId)}catch{}this.pointers.push({clientX:h.clientX,clientY:h.clientY,id:h.pointerId}),this.isUserPointing=!1,h.pointerType==="touch"?(this.changeSource=h.altKey?Wb:ag,this.onTouchChange(h)):(this.changeSource=ag,this.onMouseDown(h)),this.changeSource===ag&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=h=>{const f=this.pointers.find(w=>w.id===h.pointerId);if(f==null)return;if(h.pointerType==="mouse"&&h.buttons===0)return void this.onPointerUp(h);const d=this.pointers.length,p=(h.clientX-f.clientX)/d,v=(h.clientY-f.clientY)/d;p===0&&v===0||(f.clientX=h.clientX,f.clientY=h.clientY,h.pointerType==="touch"?(this.changeSource=h.altKey?Wb:ag,this.touchMode!==null&&this.touchMode(p,v)):(this.changeSource=ag,this.panPerPixel>0?this.movePan(p,v):this.handleSinglePointerMove(p,v)))},this.onPointerUp=h=>{const{element:f}=this,d=this.pointers.findIndex(p=>p.id===h.pointerId);d!==-1&&this.pointers.splice(d,1),this.panPerPixel>0&&!h.altKey&&this.resetRadius(),this.pointers.length===0?(f.removeEventListener("pointermove",this.onPointerMove),f.removeEventListener("pointerup",this.onPointerUp),f.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(h)):this.touchMode!==null&&this.onTouchChange(h),this.scene.element[JM].style.opacity=0,f.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=h=>{this.changeSource=ag;const f=h.deltaY*(h.deltaMode==1?18:1)*mP*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,f),h.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=h=>{const{changeSource:f}=this;this.changeSource=ag,(h.shiftKey&&this.enablePan?this.panKeyCodeHandler(h):this.orbitZoomKeyCodeHandler(h))?(h.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=f},this._options=Object.assign({},j9),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:t}=this;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||t.addEventListener("wheel",this.onWheel),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("touchmove",()=>{},{passive:!1}),t.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:t}=this;t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("pointercancel",this.onPointerUp),t.removeEventListener("wheel",this.onWheel),t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("contextmenu",this.onContext),t.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(t){this._disableZoom!=t&&(this._disableZoom=t,t===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(t=new y0){return t.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(t){Object.assign(this._options,t),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(t,n){this.camera.far=n===0?2:n,this.camera.near=Math.max(t,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(t){this.camera.aspect=t,this.camera.updateProjectionMatrix()}setOrbit(t=this.goalSpherical.theta,n=this.goalSpherical.phi,c=this.goalSpherical.radius){const{minimumAzimuthalAngle:h,maximumAzimuthalAngle:f,minimumPolarAngle:d,maximumPolarAngle:p,minimumRadius:v,maximumRadius:w}=this._options,{theta:S,phi:B,radius:R}=this.goalSpherical,D=_d(t,h,f);isFinite(h)||isFinite(f)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-D)+D);const O=_d(n,d,p),V=_d(c,v,w);return!(D===S&&O===B&&V===R||!(isFinite(D)&&isFinite(O)&&isFinite(V))||(this.goalSpherical.theta=D,this.goalSpherical.phi=O,this.goalSpherical.radius=V,this.goalSpherical.makeSafe(),0))}setRadius(t){this.goalSpherical.radius=t,this.setOrbit()}setFieldOfView(t){const{minimumFieldOfView:n,maximumFieldOfView:c}=this._options;t=_d(t,n,c),this.goalLogFov=Math.log(t)}setDamperDecayTime(t){this.thetaDamper.setDecayTime(t),this.phiDamper.setDecayTime(t),this.radiusDamper.setDecayTime(t),this.fovDamper.setDecayTime(t)}adjustOrbit(t,n,c){const{theta:h,phi:f,radius:d}=this.goalSpherical,{minimumRadius:p,maximumRadius:v,minimumFieldOfView:w,maximumFieldOfView:S}=this._options,B=this.spherical.theta-h,R=Math.PI-.001,D=h-_d(t,-R-B,R-B),O=f-n,V=c===0?0:((c>0?v:p)-d)/(Math.log(c>0?S:w)-this.goalLogFov),$=d+c*(isFinite(V)?V:2*(v-p));if(this.setOrbit(D,O,$),c!==0){const G=this.goalLogFov+c;this.setFieldOfView(Math.exp(G))}}jumpToGoal(){this.update(0,1e4)}update(t,n){if(this.isStationary())return!1;const{maximumPolarAngle:c,maximumRadius:h}=this._options,f=this.spherical.theta-this.goalSpherical.theta;return Math.abs(f)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(f)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,n,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,n,c),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,n,h),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,n,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:t}=this.element;if(this._interactionEnabled){const{touchAction:n}=this._options;this._disableZoom&&n!=="none"?t.touchAction="manipulation":t.touchAction=n}else t.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Za(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(t,n,c){this.adjustOrbit(t*this.orbitSensitivity*this.inputSensitivity,n*this.orbitSensitivity*this.inputSensitivity,c*this.inputSensitivity)}wrapAngle(t){const n=(t+Math.PI)/(2*Math.PI);return 2*(n-Math.floor(n))*Math.PI-Math.PI}pixelLengthToSphericalAngle(t){return 2*Math.PI*t/this.scene.height}twoTouchDistance(t,n){const{clientX:c,clientY:h}=t,{clientX:f,clientY:d}=n,p=f-c,v=d-h;return Math.sqrt(p*p+v*v)}handleSinglePointerMove(t,n){const c=this.pixelLengthToSphericalAngle(t),h=this.pixelLengthToSphericalAngle(n);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(c,h,0)}initializePan(){const{theta:t,phi:n}=this.spherical,c=t-this.scene.yaw;this.panPerPixel=.018*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(c),-Math.cos(n)*Math.sin(c),0,0,Math.sin(n),0,Math.sin(c),-Math.cos(n)*Math.cos(c),0)}movePan(t,n){const{scene:c}=this,h=W9.set(t,n,0).multiplyScalar(this.inputSensitivity),f=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;h.multiplyScalar(f);const d=c.getTarget();d.add(h.applyMatrix3(this.panProjection)),c.boundingSphere.clampPoint(d,d),c.setTarget(d.x,d.y,d.z)}recenter(t){if(performance.now()>this.startTime+300||Math.abs(t.clientX-this.startPointerPosition.clientX)>2||Math.abs(t.clientY-this.startPointerPosition.clientY)>2)return;const{scene:n}=this,c=n.positionAndNormalFromPoint(n.getNDC(t.clientX,t.clientY));if(c==null){const{cameraTarget:h}=n.element;n.element.cameraTarget="",n.element.cameraTarget=h,this.userAdjustOrbit(0,0,1)}else n.target.worldToLocal(c.position),n.setTarget(c.position.x,c.position.y,c.position.z)}resetRadius(){const{scene:t}=this,n=t.positionAndNormalFromPoint(Iue.set(0,0));if(n==null)return;t.target.worldToLocal(n.position);const c=t.getTarget(),{theta:h,phi:f}=this.spherical,d=h-t.yaw,p=W9.set(Math.sin(f)*Math.sin(d),Math.cos(f),Math.sin(f)*Math.cos(d)),v=p.dot(n.position.sub(c));c.add(p.multiplyScalar(v)),t.setTarget(c.x,c.y,c.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-v)}onTouchChange(t){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),t.altKey||(this.scene.element[JM].style.opacity=1))}}onMouseDown(t){this.panPerPixel=0,this.enablePan&&(t.button===2||t.ctrlKey||t.metaKey||t.shiftKey)&&(this.initializePan(),this.scene.element[JM].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(t){let n=!0;switch(t.key){case"PageUp":this.userAdjustOrbit(0,0,mP*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-.04*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-n5,0);break;case"ArrowDown":this.userAdjustOrbit(0,n5,0);break;case"ArrowLeft":this.userAdjustOrbit(-n5,0,0);break;case"ArrowRight":this.userAdjustOrbit(n5,0,0);break;default:n=!1}return n}panKeyCodeHandler(t){this.initializePan();let n=!0;switch(t.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:n=!1}return n}}const Wx=150,r5="not-presenting",K9="session-started",X9="tracking",TB=new Ke,jx=new ha,Mue=new nn,Rue=new Ke,Due=new zs(45,1,.1,100),Y9=new ga().setFromPoints([new Ke(0,0,0),new Ke(0,0,-1)]),Fue=new ad;class Uue extends qc{constructor(t){super(),this.renderer=t,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Ke,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Ke,this.relativeOrientation=new ha,this.scaleLine=new Wi(Y9),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Ke,this.goalYaw=0,this.goalScale=1,this.xDamper=new vd,this.yDamper=new vd,this.zDamper=new vd,this.yawDamper=new vd,this.pitchDamper=new vd,this.rollDamper=new vd,this.scaleDamper=new vd,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=n=>{const c=this.presentedScene,h=n.target;if(this.placementBox.controllerIntersection(c,h)!=null)this.selectedController!=null&&(this.selectedController.userData.line.visible=!1,c.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/c.pivot.scale.x,this.scaleLine.visible=!0)),h.attach(c.pivot),this.selectedController=h,c.setShadowIntensity(.01);else{const f=h===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(h.quaternion).invert().multiply(c.pivot.getWorldQuaternion(jx)),f.userData.turning=!1,h.userData.turning=!0,h.userData.line.visible=!1}},this.onControllerSelectEnd=n=>{const c=n.target;if(c.userData.turning=!1,c.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,this.selectedController!=null&&this.selectedController!=c)return;const h=this.presentedScene;h.attach(h.pivot),this.selectedController=null,this.goalYaw=Math.atan2(h.pivot.matrix.elements[8],h.pivot.matrix.elements[10]),this.goalPosition.x=h.pivot.position.x,this.goalPosition.z=h.pivot.position.z},this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new a9(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=n=>{const c=this.transientHitTestSource;if(c==null)return;const h=this.frame.getHitTestResultsForTransientInput(c),f=this.presentedScene,d=this.placementBox;if(h.length===1){this.inputSource=n.inputSource;const{axes:p}=this.inputSource.gamepad,v=d.getHit(this.presentedScene,p[0],p[1]);d.show=!0,v!=null?(this.isTranslating=!0,this.lastDragPosition.copy(v)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=1.5*p[0])}else if(h.length===2){d.show=!0,this.isTwoFingering=!0;const{separation:p}=this.fingerPolar(h);this.firstRatio=p/f.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=t.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){EM();const t=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(t),this.threeRenderer.xr.cameraAutoUpdate=!1,t}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return EM(),await navigator.xr.isSessionSupported("immersive-ar")}catch(t){return console.warn("Request to present in WebXR denied:"),console.warn(t),console.warn("Falling back to next ar-mode"),!1}}async present(t,n=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let c=new Promise((w,S)=>{requestAnimationFrame(()=>w())});t.setHotspotsVisibility(!1),t.queueRender(),await c,this._presentedScene=t,this.overlay=t.element.shadowRoot.querySelector("div.default"),n===!0&&(this.xrLight=new sue(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const w=this.presentedScene;w.add(this.xrLight),w.environment=this.xrLight.environment}));const h=await this.resolveARSession();h.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const f=t.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");f.classList.add("enabled"),f.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=f;const d=await h.requestReferenceSpace("viewer");this.xrMode=h.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=t.yaw,this.goalYaw=t.yaw,this.goalScale=1,t.setBackground(null),this.oldShadowIntensity=t.shadowIntensity,t.setShadowIntensity(.01),this.oldTarget.copy(t.getTarget()),t.element.addEventListener("load",this.onUpdateScene);const p=20*Math.PI/180,v=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(p),z:-Math.cos(p)});h.requestHitTestSource({space:d,offsetRay:v}).then(w=>{this.initialHitSource=w}),this.xrMode!=="screen-space"&&(this.setupControllers(),this.xDamper.setDecayTime(Wx),this.yDamper.setDecayTime(Wx),this.zDamper.setDecayTime(Wx),this.yawDamper.setDecayTime(Wx),this.pitchDamper.setDecayTime(Wx),this.rollDamper.setDecayTime(Wx)),this.currentSession=h,this.placementBox=new a9(t,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:K9})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const t=this.presentedScene;if(t.add(this.controller1),t.add(this.controller2),!this.controller1.userData.line){const n=new Wi(Y9);n.name="line",n.scale.z=5,this.controller1.userData.turning=!1,this.controller1.userData.line=n,this.controller1.add(n),this.controller2.userData.turning=!1;const c=n.clone();this.controller2.userData.line=c,this.controller2.add(c),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:h}=t,f=.1/Math.max(h.x,h.y,h.z),d=new As(Fue);d.name="box",d.scale.copy(h).multiplyScalar(f),d.visible=!1,this.controller1.userData.box=d,t.add(d);const p=d.clone();this.controller2.userData.box=p,t.add(p)}}hover(t){if(this.xrMode==="screen-space"||this.selectedController==t)return!1;const n=this.presentedScene,c=this.placementBox.controllerIntersection(n,t);return t.userData.box.visible=(c==null||t.userData.turning)&&!this.isTwoFingering,t.userData.line.scale.z=c==null?5:c.distance,c!=null}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const t=new Promise(n=>{this.resolveCleanup=n});try{await this.currentSession.end(),await t}catch(n){console.warn("Error while trying to end WebXR AR session"),console.warn(n),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const t=this.presentedScene;if(t!=null){const n=t.getTarget();this.oldTarget.copy(n),this.placeOnWall?n.z=t.boundingBox.min.z:n.y=t.boundingBox.min.y,t.setTarget(n.x,n.y,n.z)}}postSessionCleanup(){const t=this.currentSession;t!=null&&(t.removeEventListener("selectstart",this.onSelectStart),t.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const n=this.presentedScene;if(this._presentedScene=null,n!=null){const{element:d}=n;this.xrLight!=null&&(n.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),n.add(n.pivot),n.pivot.quaternion.set(0,0,0,1),n.pivot.position.set(0,0,0),n.pivot.scale.set(1,1,1),n.setShadowOffset(0);const p=this.turntableRotation;p!=null&&(n.yaw=p);const v=this.oldShadowIntensity;v!=null&&n.setShadowIntensity(v),n.setEnvironmentAndSkybox(d[Ha],d[Bx]);const w=this.oldTarget;n.setTarget(w.x,w.y,w.z),n.xrCamera=null,n.element.removeEventListener("load",this.onUpdateScene),n.orientHotspots(0);const{width:S,height:B}=d.getBoundingClientRect();n.setSize(S,B),requestAnimationFrame(()=>{n.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:$x}}))})}this.renderer.height=0;const c=this.exitWebXRButtonContainer;c!=null&&(c.classList.remove("enabled"),c.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const h=this.transientHitTestSource;h!=null&&(h.cancel(),this.transientHitTestSource=null);const f=this.initialHitSource;f!=null&&(f.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.xrMode!=="screen-space"&&(this.controller1!=null&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),this.controller2!=null&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:r5})}updateView(t){const n=this.presentedScene,c=this.threeRenderer.xr;c.updateCamera(Due),n.xrCamera=c.getCamera();const{elements:h}=n.getCamera().matrixWorld;if(n.orientHotspots(Math.atan2(h[1],h[5])),this.initialized||(this.placeInitially(),this.initialized=!0),t.requestViewportScale&&t.recommendedViewportScale){const d=t.recommendedViewportScale;t.requestViewportScale(Math.max(d,.25))}const f=c.getBaseLayer();if(f!=null){const d=f instanceof XRWebGLLayer?f.getViewport(t):c.getBinding().getViewSubImage(f,t).viewport;this.threeRenderer.setViewport(d.x,d.y,d.width,d.height)}}placeInitially(){const t=this.presentedScene,{pivot:n,element:c}=t,{position:h}=n,f=t.getCamera(),{width:d,height:p}=this.overlay.getBoundingClientRect();t.setSize(d,p),f.projectionMatrixInverse.copy(f.projectionMatrix).invert();const{theta:v}=c.getCameraOrbit(),w=f.getWorldDirection(TB);t.yaw=Math.atan2(-w.x,-w.z)-v,this.goalYaw=t.yaw;const S=Math.max(1,2*t.boundingSphere.radius);h.copy(f.position).add(w.multiplyScalar(S)),this.updateTarget();const B=t.getTarget();if(h.add(B).sub(this.oldTarget),this.goalPosition.copy(h),t.setHotspotsVisibility(!0),this.xrMode==="screen-space"){const{session:R}=this.frame;R.addEventListener("selectstart",this.onSelectStart),R.addEventListener("selectend",this.onSelectEnd),R.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(D=>{this.transientHitTestSource=D})}}getTouchLocation(){const{axes:t}=this.inputSource.gamepad;let n=this.placementBox.getExpandedHit(this.presentedScene,t[0],t[1]);return n!=null&&(TB.copy(n).sub(this.presentedScene.getCamera().position),TB.length()>10)?null:n}getHitPoint(t){const n=this.threeRenderer.xr.getReferenceSpace(),c=t.getPose(n);if(c==null)return null;const h=Mue.fromArray(c.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(h.elements[4],h.elements[6])),h.elements[5]>.75!==this.placeOnWall?Rue.setFromMatrixPosition(h):null}moveToFloor(t){const n=this.initialHitSource;if(n==null)return;const c=t.getHitTestResults(n);if(c.length==0)return;const h=c[0],f=this.getHitPoint(h);f!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(f):this.goalPosition.y=f.y),n.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:"object-placed"}))}fingerPolar(t){const n=t[0].inputSource.gamepad.axes,c=t[1].inputSource.gamepad.axes,h=c[0]-n[0],f=c[1]-n[1],d=Math.atan2(f,h);let p=this.lastAngle-d;return p>Math.PI?p-=2*Math.PI:p<-Math.PI&&(p+=2*Math.PI),this.lastAngle=d,{separation:Math.sqrt(h*h+f*f),deltaYaw:p}}setScale(t){const n=t/this.firstRatio;this.goalScale=Math.abs(n-1)<.2?1:n}processInput(t){const n=this.transientHitTestSource;if(n==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const c=t.getHitTestResultsForTransientInput(n),h=this.presentedScene,f=h.pivot.scale.x;if(this.isTwoFingering)if(c.length<2)this.isTwoFingering=!1;else{const{separation:d,deltaYaw:p}=this.fingerPolar(c);this.placeOnWall===!1&&(this.goalYaw+=p),h.canScale&&this.setScale(d)}else if(c.length!==2)if(this.isRotating){const d=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=d-this.lastAngle,this.lastAngle=d}else this.isTranslating&&c.forEach(d=>{if(d.inputSource!==this.inputSource)return;let p=null;if(d.results.length>0&&(p=this.getHitPoint(d.results[0])),p==null&&(p=this.getTouchLocation()),p!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const v=p.y-this.lastDragPosition.y;if(v<0){this.placementBox.offsetHeight=v/f,this.presentedScene.setShadowOffset(v);const w=TB.copy(h.getCamera().position),S=-v/(w.y-p.y);w.multiplyScalar(S),p.multiplyScalar(1-S).add(w)}}this.goalPosition.add(p),this.lastDragPosition.copy(p)}});else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:d}=this.fingerPolar(c);this.firstRatio=d/f}}moveScene(t){const n=this.presentedScene,{pivot:c}=n,h=this.placementBox;if(h.updateOpacity(t),this.controller1&&(this.controller1.userData.turning&&(c.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&c.quaternion.premultiply(jx.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),c.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(c.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&c.quaternion.premultiply(jx.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),c.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const R=this.controllerSeparation();this.setScale(R),this.scaleLine.scale.z=-R,this.scaleLine.lookAt(this.controller2.position)}const f=n.pivot.scale.x;if(this.goalScale!==f){const R=this.scaleDamper.update(f,this.goalScale,t,1);n.pivot.scale.set(R,R,R)}if(c.parent!==n)return;const{position:d}=c,p=n.boundingSphere.radius,v=this.goalPosition;let w=$x;if(!v.equals(d)){w=ag;let{x:R,y:D,z:O}=d;if(R=this.xDamper.update(R,v.x,t,p),D=this.yDamper.update(D,v.y,t,p),O=this.zDamper.update(O,v.z,t,p),d.set(R,D,O),this.xrMode==="screen-space"&&!this.isTranslating){const V=v.y-D;this.placementComplete&&this.placeOnWall===!1?(h.offsetHeight=V/n.pivot.scale.x,n.setShadowOffset(V)):V===0&&(this.placementComplete=!0,h.show=!1,n.setShadowIntensity(.8))}this.xrMode!=="screen-space"&&v.equals(d)&&n.setShadowIntensity(.8)}n.updateTarget(t),jx.setFromAxisAngle(TB.set(0,1,0),this.goalYaw);const S=n.pivot.quaternion.angleTo(jx),B=S-this.yawDamper.update(S,0,t,Math.PI);n.pivot.quaternion.rotateTowards(jx,B),n.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:w}}))}onWebXRFrame(t,n){if(this.xrMode!=="screen-space"){const p=this.hover(this.controller1),v=this.hover(this.controller2);this.placementBox.show=(p||v)&&!this.isTwoFingering}this.frame=n,++this.frames;const c=this.threeRenderer.xr.getReferenceSpace(),h=n.getViewerPose(c);h==null&&this.tracking===!0&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:"not-tracking"}));const f=this.presentedScene;if(h==null||f==null||!f.element.loaded)return void this.threeRenderer.clear();this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:X9}));let d=!0;for(const p of h.views){if(this.updateView(p),d){this.moveToFloor(n),this.processInput(n);const v=t-this.lastTick;this.moveScene(v),this.renderer.preRender(f,t,v),this.lastTick=t,f.renderShadow(this.threeRenderer)}this.threeRenderer.render(f,f.getCamera()),d=!1}}}function kue(o){const t=new Map,n=new Map,c=o.clone();return J9(o,c,function(h,f){t.set(f,h),n.set(h,f)}),c.traverse(function(h){if(!h.isSkinnedMesh)return;const f=h,d=t.get(h),p=d.skeleton.bones;f.skeleton=d.skeleton.clone(),f.bindMatrix.copy(d.bindMatrix),f.skeleton.bones=p.map(function(v){return n.get(v)}),f.bind(f.skeleton,f.bindMatrix)}),c}function J9(o,t,n){n(o,t);for(let c=0;c<o.children.length;c++)J9(o.children[c],t.children[c],n)}const Z9=Symbol("prepared"),s5=Symbol("prepare"),bm=Symbol("preparedGLTF"),o5=Symbol("clone");class Lue{constructor(t){this[bm]=t}static prepare(t){if(t.scene==null)throw new Error("Model does not have a scene");if(t[Z9])return t;const n=this[s5](t);return n[Z9]=!0,n}static[s5](t){const{scene:n}=t,c=[n];return Object.assign(Object.assign({},t),{scene:n,scenes:c})}get parser(){return this[bm].parser}get animations(){return this[bm].animations}get scene(){return this[bm].scene}get scenes(){return this[bm].scenes}get cameras(){return this[bm].cameras}get asset(){return this[bm].asset}get userData(){return this[bm].userData}clone(){return new this.constructor(this[o5]())}dispose(){this.scenes.forEach(t=>{t.traverse(n=>{const c=n;c.material&&((Array.isArray(c.material)?c.material:[c.material]).forEach(h=>{for(const f in h){const d=h[f];if(d instanceof Sr){const p=d.source.data;p.close!=null&&p.close(),d.dispose()}}h.dispose()}),c.geometry.dispose())})})}[o5](){const t=this[bm],n=kue(this.scene);Pue(n,this.scene);const c=[n],h=t.userData?Object.assign({},t.userData):{};return Object.assign(Object.assign({},t),{scene:n,scenes:c,userData:h})}}const Pue=(o,t)=>{eG(o,t,(n,c)=>{c.userData.variantMaterials!==void 0&&(n.userData.variantMaterials=new Map(c.userData.variantMaterials)),c.userData.variantData!==void 0&&(n.userData.variantData=c.userData.variantData),c.userData.originalMaterial!==void 0&&(n.userData.originalMaterial=c.userData.originalMaterial)})},eG=(o,t,n)=>{n(o,t);for(let c=0;c<o.children.length;c++)eG(o.children[c],t.children[c],n)},tG=Symbol("threeGLTF"),iG=Symbol("gltf"),nG=Symbol("gltfElementMap"),rG=Symbol("threeObjectMap"),sG=Symbol("parallelTraverseThreeScene"),oG=Symbol("correlateOriginalThreeGLTF"),aG=Symbol("correlateCloneThreeGLTF");class MB{constructor(t,n,c,h){this[tG]=t,this[iG]=n,this[nG]=h,this[rG]=c}static from(t,n){return n!=null?this[aG](t,n):this[oG](t)}static[oG](t){const n=t.parser.json,c=t.parser.associations,h=new Map,f={name:"Default"},d={index:-1};for(const p of c.keys())p instanceof Us&&c.get(p)==null&&(d.index<0&&(n.materials==null&&(n.materials=[]),d.index=n.materials.length,n.materials.push(f)),p.name=f.name,c.set(p,{materials:d.index}));for(const[p,v]of c){v&&(p.userData=p.userData||{},p.userData.associations=v);for(const w in v)if(w!=null&&w!=="primitives"){const S=w,B=(n[S]||[])[v[S]];if(B==null)continue;let R=h.get(B);R==null&&(R=new Set,h.set(B,R)),R.add(p)}}return new MB(t,n,c,h)}static[aG](t,n){const c=n.threeGLTF,h=n.gltf,f=JSON.parse(JSON.stringify(h)),d=new Map,p=new Map;for(let v=0;v<c.scenes.length;v++)this[sG](c.scenes[v],t.scenes[v],(w,S)=>{const B=n.threeObjectMap.get(w);if(B!=null){for(const R in B)if(R!=null&&R!=="primitives"){const D=R,O=B[D],V=f[D][O],$=d.get(S)||{};$[D]=O,d.set(S,$);const G=p.get(V)||new Set;G.add(S),p.set(V,G)}}});return new MB(t,f,d,p)}static[sG](t,n,c){const h=(f,d)=>{if(c(f,d),f.isObject3D){const p=f,v=d;if(p.material)if(Array.isArray(p.material))for(let w=0;w<p.material.length;++w)c(p.material[w],v.material[w]);else c(p.material,v.material);for(let w=0;w<f.children.length;++w)h(f.children[w],d.children[w])}};h(t,n)}get threeGLTF(){return this[tG]}get gltf(){return this[iG]}get gltfElementMap(){return this[nG]}get threeObjectMap(){return this[rG]}}const RB=Symbol("correlatedSceneGraph");class Oue extends Lue{static[s5](t){const n=super[s5](t);n[RB]==null&&(n[RB]=MB.from(n));const{scene:c}=n,h=new _c(void 0,1/0);return c.traverse(f=>{f.renderOrder=1e3,f.frustumCulled=!1,f.name||(f.name=f.uuid);const d=f;if(d.material){const{geometry:p}=d;d.castShadow=!0,d.isSkinnedMesh&&(p.boundingSphere=h,p.boundingBox=null);const v=d.material;if(v.isMeshBasicMaterial===!0&&(v.toneMapped=!1),v.shadowSide=0,v.aoMap){const{gltf:w,threeObjectMap:S}=n[RB],B=S.get(v);if(w.materials!=null&&B!=null&&B.materials!=null){const R=w.materials[B.materials];R.occlusionTexture&&R.occlusionTexture.texCoord===0&&p.attributes.uv!=null&&p.setAttribute("uv2",p.attributes.uv)}}}}),n}get correlatedSceneGraph(){return this[bm][RB]}[o5](){const t=super[o5](),n=new Map;return t.scene.traverse(c=>{const h=c;if(h.material){const d=h.material;if(d!=null){if(n.has(d.uuid))return void(h.material=n.get(d.uuid));h.material=d.clone(),n.set(d.uuid,h.material)}}const f=c;f.target!==void 0&&f.add(f.target)}),t[RB]=MB.from(t,this.correlatedSceneGraph),t}}const lG=(o,t,n)=>{let c;switch(o){case Qi:c=new Uint8ClampedArray(t*n*4);break;case jn:c=new Uint16Array(t*n*4);break;case xn:c=new Uint32Array(t*n*4);break;case Wn:c=new Int8Array(t*n*4);break;case Cr:c=new Int16Array(t*n*4);break;case sr:c=new Int32Array(t*n*4);break;case Xi:c=new Float32Array(t*n*4);break;default:throw new Error("Unsupported data type")}return c};let a5;class _P{constructor(t){var n,c,h,f,d,p,v,w,S,B,R,D,O,V,$,G;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(te){throw this._renderer.setRenderTarget(null),te}this._renderer.setRenderTarget(null)},this._width=t.width,this._height=t.height,this._type=t.type,this._colorSpace=t.colorSpace;const X={format:fn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=t.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(c=t.renderTargetOptions)===null||c===void 0?void 0:c.anisotropy:1,generateMipmaps:((h=t.renderTargetOptions)===null||h===void 0?void 0:h.generateMipmaps)!==void 0&&((f=t.renderTargetOptions)===null||f===void 0?void 0:f.generateMipmaps),magFilter:((d=t.renderTargetOptions)===null||d===void 0?void 0:d.magFilter)!==void 0?(p=t.renderTargetOptions)===null||p===void 0?void 0:p.magFilter:Ci,minFilter:((v=t.renderTargetOptions)===null||v===void 0?void 0:v.minFilter)!==void 0?(w=t.renderTargetOptions)===null||w===void 0?void 0:w.minFilter:Ci,samples:((S=t.renderTargetOptions)===null||S===void 0?void 0:S.samples)!==void 0?(B=t.renderTargetOptions)===null||B===void 0?void 0:B.samples:void 0,wrapS:((R=t.renderTargetOptions)===null||R===void 0?void 0:R.wrapS)!==void 0?(D=t.renderTargetOptions)===null||D===void 0?void 0:D.wrapS:kt,wrapT:((O=t.renderTargetOptions)===null||O===void 0?void 0:O.wrapT)!==void 0?(V=t.renderTargetOptions)===null||V===void 0?void 0:V.wrapT:kt};if(this._material=t.material,t.renderer?this._renderer=t.renderer:(this._renderer=_P.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new El,this._camera=new io,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((te,ae,oe,Ae)=>{if(a5!==void 0)return a5;const ve=new Io(1,1,Ae);ae.setRenderTarget(ve);const De=new As(new Qa,new Wl({color:16777215}));ae.render(De,oe),ae.setRenderTarget(null);const Ne=lG(te,ve.width,ve.height);return ae.readRenderTargetPixels(ve,0,0,ve.width,ve.height,Ne),ve.dispose(),De.geometry.dispose(),De.material.dispose(),a5=Ne[0]!==0,a5})(this._type,this._renderer,this._camera,X)){let te;this._type===jn&&(te=this._renderer.extensions.has("EXT_color_buffer_float")?Xi:void 0),te!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to 1015`),this._type=te):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new As(new Qa,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Io(this.width,this.height,X),this._renderTarget.texture.mapping=(($=t.renderTargetOptions)===null||$===void 0?void 0:$.mapping)!==void 0?(G=t.renderTargetOptions)===null||G===void 0?void 0:G.mapping:gl}static instantiateRenderer(){const t=new Sc;return t.setSize(128,128),t}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const t=lG(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,t),t}toDataTexture(t){const n=new Zl(this.toArray(),this.width,this.height,fn,this._type,(t==null?void 0:t.mapping)||gl,(t==null?void 0:t.wrapS)||kt,(t==null?void 0:t.wrapT)||kt,(t==null?void 0:t.magFilter)||Ci,(t==null?void 0:t.minFilter)||Ci,(t==null?void 0:t.anisotropy)||1,bs);return n.generateMipmaps=(t==null?void 0:t.generateMipmaps)!==void 0&&(t==null?void 0:t.generateMipmaps),n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(t){this.disposeOnDemandRenderer(),t&&this.renderTarget.dispose(),this.material instanceof jl&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof Sr&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof Sr&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(t){this._width=t,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(t){this._height=t,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(t){this._renderTarget=t,this._width=t.width,this._height=t.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class Que extends jl{constructor({gamma:t,offsetHdr:n,offsetSdr:c,gainMapMin:h,gainMapMax:f,maxDisplayBoost:d,hdrCapacityMin:p,hdrCapacityMax:v,sdr:w,gainMap:S}){super({name:"GainMapDecoderMaterial",vertexShader:`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`,uniforms:{sdr:{value:w},gainMap:{value:S},gamma:{value:new Ke(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new Ke().fromArray(n)},offsetSdr:{value:new Ke().fromArray(c)},gainMapMin:{value:new Ke().fromArray(h)},gainMapMax:{value:new Ke().fromArray(f)},weightFactor:{value:(Math.log2(d)-p)/(v-p)}},blending:0,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=d,this._hdrCapacityMin=p,this._hdrCapacityMax=v,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const n=this.uniforms.gamma.value;n.x=1/t[0],n.y=1/t[1],n.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class cG extends Error{}class uG extends Error{}const DB=(o,t,n)=>{var c;let h;const f=(c=o.attributes.getNamedItem(t))===null||c===void 0?void 0:c.nodeValue;if(f)h=f;else{const d=o.getElementsByTagName(t)[0];if(!d){if(n)return n;throw new Error(`Can't find ${t} in gainmap metadata`)}{const p=d.getElementsByTagName("rdf:li");if(p.length!==3)throw new Error(`Gainmap metadata contains an array of items for ${t} but its length is not 3`);h=Array.from(p).map(v=>v.innerHTML)}}return h};class Nue{constructor(t){this.options={debug:!(!t||t.debug===void 0)&&t.debug,extractFII:!t||t.extractFII===void 0||t.extractFII,extractNonFII:!t||t.extractNonFII===void 0||t.extractNonFII}}extract(t){return new Promise((n,c)=>{const h=this.options.debug,f=new DataView(t.buffer);if(f.getUint16(0)!==65496)return void c(new Error("Not a valid jpeg"));const d=f.byteLength;let p,v=2,w=0;for(;v<d;){if(++w>250)return void c(new Error(`Found no marker after ${w} loops `));if(f.getUint8(v)!==255)return void c(new Error(`Not a valid marker at offset 0x${v.toString(16)}, found: 0x${f.getUint8(v).toString(16)}`));if(p=f.getUint8(v+1),h&&console.log(`Marker: ${p.toString(16)}`),p===226){h&&console.log("Found APP2 marker (0xffe2)");const S=v+4;if(f.getUint32(S)===1297106432){const B=S+4;let R;if(f.getUint16(B)===18761)R=!1;else{if(f.getUint16(B)!==19789)return void c(new Error("No valid endianness marker found in TIFF header"));R=!0}if(f.getUint16(B+2,!R)!==42)return void c(new Error("Not valid TIFF data! (no 0x002A marker)"));const D=f.getUint32(B+4,!R);if(D<8)return void c(new Error("Not valid TIFF data! (First offset less than 8)"));const O=B+D,V=f.getUint16(O,!R),$=O+2;let G=0;for(let ae=$;ae<$+12*V;ae+=12)f.getUint16(ae,!R)===45057&&(G=f.getUint32(ae+8,!R));const X=O+2+12*V+4,te=[];for(let ae=X;ae<X+16*G;ae+=16){const oe={MPType:f.getUint32(ae,!R),size:f.getUint32(ae+4,!R),dataOffset:f.getUint32(ae+8,!R),dependantImages:f.getUint32(ae+12,!R),start:-1,end:-1,isFII:!1};oe.dataOffset?(oe.start=B+oe.dataOffset,oe.isFII=!1):(oe.start=0,oe.isFII=!0),oe.end=oe.start+oe.size,te.push(oe)}if(this.options.extractNonFII&&te.length){const ae=new Blob([f]),oe=[];for(const Ae of te){if(Ae.isFII&&!this.options.extractFII)continue;const ve=ae.slice(Ae.start,Ae.end+1,"image/jpeg");oe.push(ve)}n(oe)}}}v+=2+f.getUint16(v+2)}})}}const hG=o=>new Promise((t,n)=>{const c=document.createElement("img");c.onload=()=>{t(c)},c.onerror=h=>{n(h)},c.src=URL.createObjectURL(o)});class Hue extends Qt{constructor(t,n){super(n),t&&(this._renderer=t),this._internalLoadingManager=new Zn}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=new Que({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Sr,sdr:new Sr});return new _P({width:16,height:16,type:jn,colorSpace:bs,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(t,n,c,h){const f=h?new Blob([h],{type:"image/jpeg"}):void 0,d=new Blob([c],{type:"image/jpeg"});let p,v,w=!1;if(typeof createImageBitmap>"u"){const R=await Promise.all([f?hG(f):Promise.resolve(void 0),hG(d)]);v=R[0],p=R[1],w=!0}else{const R=await Promise.all([f?createImageBitmap(f,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(d,{imageOrientation:"flipY"})]);v=R[0],p=R[1]}const S=new Sr(v||new ImageData(2,2),gl,kt,kt,Ci,1008,fn,Qi,1,bs);S.flipY=w,S.needsUpdate=!0;const B=new Sr(p,gl,kt,kt,Ci,1008,fn,Qi,1,Ns);B.flipY=w,B.needsUpdate=!0,t.width=p.width,t.height=p.height,t.material.gainMap=S,t.material.sdr=B,t.material.gainMapMin=n.gainMapMin,t.material.gainMapMax=n.gainMapMax,t.material.offsetHdr=n.offsetHdr,t.material.offsetSdr=n.offsetSdr,t.material.gamma=n.gamma,t.material.hdrCapacityMin=n.hdrCapacityMin,t.material.hdrCapacityMax=n.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),t.material.needsUpdate=!0,t.render()}}class zue extends Hue{load(t,n,c,h){const f=this.prepareQuadRenderer(),d=new Rn(this._internalLoadingManager);return d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setPath(this.path),d.setWithCredentials(this.withCredentials),this.manager.itemStart(t),d.load(t,async p=>{if(typeof p=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const v=new Uint8Array(p);let w,S,B;try{const R=await(async D=>{const O=(G=>{var X,te;let ae;ae=typeof TextDecoder<"u"?new TextDecoder().decode(G):G.toString();let oe=ae.indexOf("<x:xmpmeta");const Ae=new DOMParser;for(;oe!==-1;){const ve=ae.indexOf("x:xmpmeta>",oe);ae.slice(oe,ve+10);const De=ae.slice(oe,ve+10);try{const Ne=Ae.parseFromString(De,"text/xml").getElementsByTagName("rdf:Description")[0],We=DB(Ne,"hdrgm:GainMapMin","0"),vt=DB(Ne,"hdrgm:GainMapMax"),ot=DB(Ne,"hdrgm:Gamma","1"),nt=DB(Ne,"hdrgm:OffsetSDR","0.015625"),st=DB(Ne,"hdrgm:OffsetHDR","0.015625");let mt=(X=Ne.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||X===void 0?void 0:X.nodeValue;mt||(mt="0");const It=(te=Ne.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||te===void 0?void 0:te.nodeValue;if(!It)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(We)?We.map(Jt=>parseFloat(Jt)):[parseFloat(We),parseFloat(We),parseFloat(We)],gainMapMax:Array.isArray(vt)?vt.map(Jt=>parseFloat(Jt)):[parseFloat(vt),parseFloat(vt),parseFloat(vt)],gamma:Array.isArray(ot)?ot.map(Jt=>parseFloat(Jt)):[parseFloat(ot),parseFloat(ot),parseFloat(ot)],offsetSdr:Array.isArray(nt)?nt.map(Jt=>parseFloat(Jt)):[parseFloat(nt),parseFloat(nt),parseFloat(nt)],offsetHdr:Array.isArray(st)?st.map(Jt=>parseFloat(Jt)):[parseFloat(st),parseFloat(st),parseFloat(st)],hdrCapacityMin:parseFloat(mt),hdrCapacityMax:parseFloat(It)}}catch{}oe=ae.indexOf("<x:xmpmeta",ve)}})(D);if(!O)throw new uG("Gain map XMP metadata not found");const V=new Nue({extractFII:!0,extractNonFII:!0}),$=await V.extract(D);if($.length!==2)throw new cG("Gain map recovery image not found");return{sdr:new Uint8Array(await $[0].arrayBuffer()),gainMap:new Uint8Array(await $[1].arrayBuffer()),metadata:O}})(v);w=R.sdr,S=R.gainMap,B=R.metadata}catch(R){if(!(R instanceof uG||R instanceof cG))throw R;console.warn(`Failure to reconstruct an HDR image from ${t}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),B={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},w=v}try{await this.render(f,B,w,S)}catch(R){return this.manager.itemError(t),typeof h=="function"&&h(R),void f.disposeOnDemandRenderer()}typeof n=="function"&&n(f),this.manager.itemEnd(t),f.disposeOnDemandRenderer()},c,p=>{this.manager.itemError(t),typeof h=="function"&&h(p)}),f}}class Gue extends vr{constructor(t){super(t),this.type=jn}parse(t){const n=function(O,V){switch(O){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(V||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(V||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(V||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(V||""))}},c=function(O,V,$){V=V||1024;let G=O.pos,X=-1,te=0,ae="",oe=String.fromCharCode.apply(null,new Uint16Array(O.subarray(G,G+128)));for(;0>(X=oe.indexOf(`
`))&&te<V&&G<O.byteLength;)ae+=oe,te+=oe.length,G+=128,oe+=String.fromCharCode.apply(null,new Uint16Array(O.subarray(G,G+128)));return-1<X&&(O.pos+=te+X+1,ae+oe.slice(0,X))},h=function(O,V,$,G){const X=O[V+3],te=Math.pow(2,X-128)/255;$[G+0]=O[V+0]*te,$[G+1]=O[V+1]*te,$[G+2]=O[V+2]*te,$[G+3]=1},f=function(O,V,$,G){const X=O[V+3],te=Math.pow(2,X-128)/255;$[G+0]=zf(Math.min(O[V+0]*te,65504)),$[G+1]=zf(Math.min(O[V+1]*te,65504)),$[G+2]=zf(Math.min(O[V+2]*te,65504)),$[G+3]=zf(1)},d=new Uint8Array(t);d.pos=0;const p=function(O){const V=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,$=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*FORMAT=(\S+)\s*$/,X=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,te={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ae,oe;for((O.pos>=O.byteLength||!(ae=c(O)))&&n(1,"no header found"),(oe=ae.match(/^#\?(\S+)/))||n(3,"bad initial token"),te.valid|=1,te.programtype=oe[1],te.string+=ae+`
`;ae=c(O),ae!==!1;)if(te.string+=ae+`
`,ae.charAt(0)!=="#"){if((oe=ae.match(V))&&(te.gamma=parseFloat(oe[1])),(oe=ae.match($))&&(te.exposure=parseFloat(oe[1])),(oe=ae.match(G))&&(te.valid|=2,te.format=oe[1]),(oe=ae.match(X))&&(te.valid|=4,te.height=parseInt(oe[1],10),te.width=parseInt(oe[2],10)),2&te.valid&&4&te.valid)break}else te.comments+=ae+`
`;return 2&te.valid||n(3,"missing format specifier"),4&te.valid||n(3,"missing image size specifier"),te}(d),v=p.width,w=p.height,S=function(O,V,$){const G=V;if(G<8||G>32767||O[0]!==2||O[1]!==2||128&O[2])return new Uint8Array(O);G!==(O[2]<<8|O[3])&&n(3,"wrong scanline width");const X=new Uint8Array(4*V*$);X.length||n(4,"unable to allocate buffer space");let te=0,ae=0;const oe=4*G,Ae=new Uint8Array(4),ve=new Uint8Array(oe);let De=$;for(;De>0&&ae<O.byteLength;){ae+4>O.byteLength&&n(1),Ae[0]=O[ae++],Ae[1]=O[ae++],Ae[2]=O[ae++],Ae[3]=O[ae++],Ae[0]==2&&Ae[1]==2&&(Ae[2]<<8|Ae[3])==G||n(3,"bad rgbe scanline format");let Ne,We=0;for(;We<oe&&ae<O.byteLength;){Ne=O[ae++];const ot=Ne>128;if(ot&&(Ne-=128),(Ne===0||We+Ne>oe)&&n(3,"bad scanline data"),ot){const nt=O[ae++];for(let st=0;st<Ne;st++)ve[We++]=nt}else ve.set(O.subarray(ae,ae+Ne),We),We+=Ne,ae+=Ne}const vt=G;for(let ot=0;ot<vt;ot++){let nt=0;X[te]=ve[ot+nt],nt+=G,X[te+1]=ve[ot+nt],nt+=G,X[te+2]=ve[ot+nt],nt+=G,X[te+3]=ve[ot+nt],te+=4}De--}return X}(d.subarray(d.pos),v,w);let B,R,D;switch(this.type){case Xi:D=S.length/4;const O=new Float32Array(4*D);for(let $=0;$<D;$++)h(S,4*$,O,4*$);B=O,R=Xi;break;case jn:D=S.length/4;const V=new Uint16Array(4*D);for(let $=0;$<D;$++)f(S,4*$,V,4*$);B=V,R=jn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:v,height:w,data:B,header:p.string,gamma:p.gamma,exposure:p.exposure,type:R}}setDataType(t){return this.type=t,this}load(t,n,c,h){return super.load(t,function(f,d){switch(f.type){case Xi:case jn:f.colorSpace=bs,f.minFilter=Ci,f.magFilter=Ci,f.generateMipmaps=!1,f.flipY=!0}n&&n(f,d)},c,h)}}const Vue={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},que={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class dG extends El{constructor(t){super(),this.position.y=-3.5;const n=new ad;n.deleteAttribute("uv");const c=new Rs({metalness:0,side:1}),h=new Rs({metalness:0}),f=t=="legacy"?Vue:que,d=new m0(16777215,f.topLight.intensity,28,2);d.position.set(...f.topLight.position),this.add(d);const p=new As(n,c);p.position.set(...f.room.position),p.scale.set(...f.room.scale),this.add(p);for(const v of f.boxes){const w=new As(n,h);w.position.set(...v.position),w.rotation.set(0,v.rotation,0),w.scale.set(...v.scale),this.add(w)}for(const v of f.lights){const w=new As(n,this.createAreaLightMaterial(v.intensity));w.position.set(...v.position),w.scale.set(...v.scale),this.add(w)}}createAreaLightMaterial(t){const n=new Wl;return n.color.setScalar(t),n}}const $ue=/\.hdr(\.js)?$/;class AG{constructor(t){this.threeRenderer=t,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(t){return this._ldrLoader==null&&(this._ldrLoader=new Dn),this._ldrLoader.setWithCredentials(t),this._ldrLoader}imageLoader(t){return this._imageLoader==null&&(this._imageLoader=new zue(this.threeRenderer)),this._imageLoader.setWithCredentials(t),this._imageLoader}hdrLoader(t){return this._hdrLoader==null&&(this._hdrLoader=new Gue,this._hdrLoader.setDataType(jn)),this._hdrLoader.setWithCredentials(t),this._hdrLoader}async getLottieLoader(t){if(this._lottieLoader==null){const{LottieLoader:n}=await import(this.lottieLoaderUrl);this._lottieLoader=new n}return this._lottieLoader.setWithCredentials(t),this._lottieLoader}async loadImage(t,n){const c=await new Promise((h,f)=>this.ldrLoader(n).load(t,h,()=>{},f));return c.name=t,c.flipY=!1,c}async loadLottie(t,n,c){const h=await this.getLottieLoader(c);h.setQuality(n);const f=await new Promise((d,p)=>h.load(t,d,()=>{},p));return f.name=t,f}async loadEquirect(t,n=!1,c=()=>{}){try{const h=$ue.test(t),f=h?this.hdrLoader(n):this.imageLoader(n),d=await new Promise((p,v)=>f.load(t,w=>{const{renderTarget:S}=w;if(S!=null){const{texture:B}=S;w.dispose(!1),p(B)}else p(w)},w=>{c(w.loaded/w.total*.9)},v));return c(1),d.name=t,d.mapping=Le,h||(d.colorSpace=Ns),d}finally{c&&c(1)}}async generateEnvironmentMapAndSkybox(t=null,n=null,c=()=>{},h=!1){const f=n!=="legacy";n!=="legacy"&&n!=="neutral"||(n=null),n=CM(n);let d,p=Promise.resolve(null);t&&(p=this.loadEquirectFromUrl(t,h,c)),d=n?this.loadEquirectFromUrl(n,h,c):t?this.loadEquirectFromUrl(t,h,c):f?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[v,w]=await Promise.all([d,p]);if(v==null)throw new Error("Failed to load environment map.");return{environmentMap:v,skybox:w}}async loadEquirectFromUrl(t,n,c){if(!this.skyboxCache.has(t)){const h=this.loadEquirect(t,n,c);this.skyboxCache.set(t,h)}return this.skyboxCache.get(t)}async GenerateEnvironmentMap(t,n){await((w=0)=>new Promise(S=>setTimeout(S,w)))();const c=this.threeRenderer,h=new il(256,{generateMipmaps:!1,type:jn,format:fn,colorSpace:bs,depthBuffer:!0}),f=new Vf(.1,100,h),d=f.renderTarget.texture;d.name=n;const p=c.outputColorSpace,v=c.toneMapping;return c.toneMapping=0,c.outputColorSpace=bs,f.update(c,t),this.blurCubemap(h,.04),c.toneMapping=v,c.outputColorSpace=p,d}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new dG("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new dG("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(t,n){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(20);const h=new ad,f=new As(h,this.blurMaterial);this.blurScene=new El,this.blurScene.add(f)}const c=t.clone();this.halfblur(t,c,n,"latitudinal"),this.halfblur(c,t,n,"longitudinal")}halfblur(t,n,c,h){const f=t.width,d=isFinite(c)?Math.PI/(2*f):2*Math.PI/39,p=c/d,v=isFinite(c)?1+Math.floor(3*p):20;v>20&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${v} samples when the maximum is set to 20`);const w=[];let S=0;for(let R=0;R<20;++R){const D=R/p,O=Math.exp(-D*D/2);w.push(O),R==0?S+=O:R<v&&(S+=2*O)}for(let R=0;R<w.length;R++)w[R]=w[R]/S;const B=this.blurMaterial.uniforms;B.envMap.value=t.texture,B.samples.value=v,B.weights.value=w,B.latitudinal.value=h==="latitudinal",B.dTheta.value=d,new Vf(.1,100,n).update(this.threeRenderer,this.blurScene)}getBlurShader(t){const n=new Float32Array(t),c=new Ke(0,1,0);return new jl({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:c}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:0,depthTest:!1,depthWrite:!1,side:1})}async dispose(){for(const[,t]of this.skyboxCache)(await t).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}const Kx=[1,.79,.62,.5,.4,.31,.25],pG="high-performance";let U0=class pz extends qc{constructor(t){super(),this.loader=new Ft(Oue),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=50,this.onWebGLContextLost=n=>{this.dispatchEvent({type:"contextlost",sourceEvent:n})},this.onWebGLContextRestored=()=>{var n;(n=this.textureUtils)===null||n===void 0||n.dispose(),this.textureUtils=new AG(this.threeRenderer);for(const c of this.scenes)c.element[w0]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new Sc({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:t.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!t.debug,onShaderError:null},this.threeRenderer.toneMapping=4}catch(n){console.warn(n)}this.arRenderer=new Uue(this),this.textureUtils=this.canRender?new AG(this.threeRenderer):null,Ft.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton||(this._singleton=new pz({powerPreference:(self.ModelViewerElement||{}).powerPreference||pG,debug:Os()})),this._singleton}static resetSingleton(){const t=this._singleton.dispose();for(const n of t)n.disconnectedCallback();this._singleton=new pz({powerPreference:(self.ModelViewerElement||{}).powerPreference||pG,debug:Os()});for(const n of t)n.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return Kx[this.scaleStep]}set minScale(t){let n=1;for(;n<Kx.length&&!(Kx[n]<t);)++n;this.lastStep=n-1}registerScene(t){this.scenes.add(t),t.forceRescale();const n=new Cn;this.threeRenderer.getSize(n),t.canvas.width=n.x,t.canvas.height=n.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((c,h)=>this.render(c,h))}unregisterScene(t){this.scenes.delete(t),this.canvas3D.parentElement===t.canvas.parentElement&&t.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(t){return t.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:t.element[zP]}countVisibleScenes(){const{canvas3D:t}=this;let n=0,c=null;for(const f of this.scenes){const{element:d}=f;d.modelIsVisible&&f.externalRenderer==null&&++n,t.parentElement===f.canvas.parentElement&&(c=f)}const h=n>1;if(c!=null){const f=h&&!this.multipleScenesVisible,d=!c.element.modelIsVisible;if(f||d){const{width:p,height:v}=this.sceneSize(c);this.copyPixels(c,p,v),t.parentElement.removeChild(t)}}this.multipleScenesVisible=h}updateRendererSize(){var t;const n=window.devicePixelRatio;if(n!==this.dpr)for(const f of this.scenes){const{element:d}=f;d[iC](d.getBoundingClientRect())}let c=0,h=0;for(const f of this.scenes)c=Math.max(c,f.width),h=Math.max(h,f.height);if(c!==this.width||h!==this.height||n!==this.dpr){this.width=c,this.height=h,this.dpr=n,c=Math.ceil(c*n),h=Math.ceil(h*n),this.canRender&&this.threeRenderer.setSize(c,h,!1);for(const f of this.scenes){const{canvas:d}=f;d.width=c,d.height=h,f.forceRescale(),(t=f.effectRenderer)===null||t===void 0||t.setSize(c,h)}}}updateRendererScale(t){const n=this.scaleStep;this.avgFrameDuration+=_d(.2*(t-this.avgFrameDuration),-5,5),this.avgFrameDuration>60?++this.scaleStep:this.avgFrameDuration<40&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),n!==this.scaleStep&&(this.avgFrameDuration=50)}shouldRender(t){if(t.shouldRender())t.scaleStep!=this.scaleStep&&(t.scaleStep=this.scaleStep,this.rescaleCanvas(t));else{if(t.scaleStep==0)return!1;t.scaleStep=0,this.rescaleCanvas(t)}return!0}rescaleCanvas(t){const n=Kx[t.scaleStep],c=Math.ceil(this.width/n),h=Math.ceil(this.height/n),{style:f}=t.canvas;f.width=`${c}px`,f.height=`${h}px`,this.canvas3D.style.width=`${c}px`,this.canvas3D.style.height=`${h}px`;const d=this.dpr*n,p=n<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";t.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:d,minimumDpr:this.dpr*Kx[this.lastStep],pixelWidth:Math.ceil(t.width*d),pixelHeight:Math.ceil(t.height*d),reason:p}}))}sceneSize(t){const{dpr:n}=this,c=Kx[t.scaleStep];return{width:Math.min(Math.ceil(t.width*c*n),this.canvas3D.width),height:Math.min(Math.ceil(t.height*c*n),this.canvas3D.height)}}copyPixels(t,n,c){const h=t.context;h!=null?(h.clearRect(0,0,n,c),h.drawImage(this.canvas3D,0,0,n,c,0,0,n,c),t.canvas.classList.add("show")):console.log("could not acquire 2d context")}orderedScenes(){const t=[];for(const n of[!1,!0])for(const c of this.scenes)c.element.modelIsVisible===n&&t.push(c);return t}get isPresenting(){return this.arRenderer.isPresenting}preRender(t,n,c){const{element:h,exposure:f,toneMapping:d}=t;h[wm](n,c);const p=typeof f=="number"&&!Number.isNaN(f),v=h.environmentImage,w=h.skyboxImage,S=d===7&&(v==="neutral"||v==="legacy"||!v&&!w);this.threeRenderer.toneMappingExposure=(p?f:1)*(S?1.3:1)}render(t,n){if(n!=null)return void this.arRenderer.onWebXRFrame(t,n);const c=t-this.lastTick;if(this.lastTick=t,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(c),this.renderedLastFrame=!1);const{canvas3D:h}=this;for(const f of this.orderedScenes()){const{element:d}=f;if(!d.loaded||!d.modelIsVisible&&f.renderCount>0||(this.preRender(f,t,c),!this.shouldRender(f)))continue;if(f.externalRenderer!=null){const w=f.getCamera();w.updateMatrix();const{matrix:S,projectionMatrix:B}=w,R=S.elements.slice(),D=f.getTarget();R[12]+=D.x,R[13]+=D.y,R[14]+=D.z,f.externalRenderer.render({viewMatrix:R,projectionMatrix:B.elements});continue}if(!d.modelIsVisible&&!this.multipleScenesVisible)for(const w of this.scenes)w.element.modelIsVisible&&w.queueRender();const{width:p,height:v}=this.sceneSize(f);f.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-v,p,v),f.effectRenderer!=null?f.effectRenderer.render(c):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=f.toneMapping,this.threeRenderer.render(f,f.camera)),this.multipleScenesVisible||!f.element.modelIsVisible&&f.renderCount===0?this.copyPixels(f,p,v):h.parentElement!==f.canvas.parentElement&&(f.canvas.parentElement.appendChild(h),f.canvas.classList.remove("show")),f.hasRendered(),++f.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const t=[];for(const n of this.scenes)t.push(n.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),t}};const Nr=Symbol("correlatedObjects"),Ws=Symbol("onUpdate");class FB{constructor(t,n){this[Ws]=t,this[Nr]=n}}const fG=new Wl,Wue=new Qa(2,2);let jue=0;const yd=Symbol("threeTexture"),gG=Symbol("threeTextures");let Kue=class extends FB{get[yd](){var o;return(o=this[Nr])===null||o===void 0?void 0:o.values().next().value}get[gG](){return this[Nr]}constructor(o,t){super(o,new Set(t?[t]:[])),this[yd].image.src||(this[yd].image.src=t.name?t.name:"adhoc_image"+jue++),this[yd].image.name||(this[yd].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[yd].image.name||""}get uri(){return this[yd].image.src}get bufferView(){return this[yd].image.bufferView}get element(){const o=this[yd];if(o&&(o.isCanvasTexture||o.isVideoTexture))return o.image}get animation(){const o=this[yd];if(o&&o.isCanvasTexture&&o.animation)return o.animation}get type(){return this.uri!=null?"external":"embedded"}set name(o){for(const t of this[gG])t.image.name=o}update(){const o=this[yd];o&&o.isCanvasTexture&&!o.animation&&(this[yd].needsUpdate=!0,this[Ws]())}async createThumbnail(o,t){const n=new El;fG.map=this[yd];const c=new As(Wue,fG);n.add(c);const h=new io(-1,1,1,-1,0,1),{threeRenderer:f}=U0.singleton,d=new Io(o,t);f.setRenderTarget(d),f.render(n,h),f.setRenderTarget(null);const p=new Uint8Array(o*t*4);f.readRenderTargetPixels(d,0,0,o,t,p),P0.width=o,P0.height=t;const v=P0.getContext("2d"),w=v.createImageData(o,t);return w.data.set(p),v.putImageData(w,0,0),new Promise(async(S,B)=>{P0.toBlob(R=>{if(!R)return B("Failed to capture thumbnail.");S(URL.createObjectURL(R))},"image/png")})}};var ru,k0,ef;(ef=ru||(ru={}))[ef.Nearest=9728]="Nearest",ef[ef.Linear=9729]="Linear",ef[ef.NearestMipmapNearest=9984]="NearestMipmapNearest",ef[ef.LinearMipmapNearest=9985]="LinearMipmapNearest",ef[ef.NearestMipmapLinear=9986]="NearestMipmapLinear",ef[ef.LinearMipmapLinear=9987]="LinearMipmapLinear",function(o){o[o.ClampToEdge=33071]="ClampToEdge",o[o.MirroredRepeat=33648]="MirroredRepeat",o[o.Repeat=10497]="Repeat"}(k0||(k0={}));const mG=new Map([[k0.Repeat,Vt],[k0.ClampToEdge,kt],[k0.MirroredRepeat,St]]),vP=new Map([[Vt,k0.Repeat],[kt,k0.ClampToEdge],[St,k0.MirroredRepeat]]),Xue=new Map([[ru.Nearest,pi],[ru.Linear,Ci],[ru.NearestMipmapNearest,Ui],[ru.LinearMipmapNearest,yn],[ru.NearestMipmapLinear,ki],[ru.LinearMipmapLinear,en]]),_G=new Map([[pi,ru.Nearest],[Ci,ru.Linear],[Ui,ru.NearestMipmapNearest],[yn,ru.LinearMipmapNearest],[ki,ru.NearestMipmapLinear],[en,ru.LinearMipmapLinear]]),Yue=new Map([[ru.Nearest,pi],[ru.Linear,Ci]]),vG=new Map([[pi,ru.Nearest],[Ci,ru.Linear]]),H_=Symbol("threeTexture"),yG=Symbol("threeTextures"),L0=Symbol("setProperty");class Jue extends FB{get[H_](){var t;return(t=this[Nr])===null||t===void 0?void 0:t.values().next().value}get[yG](){return this[Nr]}constructor(t,n){super(t,new Set(n?[n]:[]))}get name(){return this[H_].name||""}get minFilter(){return _G.get(this[H_].minFilter)}get magFilter(){return vG.get(this[H_].magFilter)}get wrapS(){return vP.get(this[H_].wrapS)}get wrapT(){return vP.get(this[H_].wrapT)}get rotation(){return this[H_].rotation}get scale(){return GP(this[H_].repeat)}get offset(){return GP(this[H_].offset)}setMinFilter(t){this[L0]("minFilter",Xue.get(t))}setMagFilter(t){this[L0]("magFilter",Yue.get(t))}setWrapS(t){this[L0]("wrapS",mG.get(t))}setWrapT(t){this[L0]("wrapT",mG.get(t))}setRotation(t){t==null&&(t=0),this[L0]("rotation",t)}setScale(t){t==null&&(t={u:1,v:1}),this[L0]("repeat",new Cn(t.u,t.v))}setOffset(t){t==null&&(t={u:0,v:0}),this[L0]("offset",new Cn(t.u,t.v))}[L0](t,n){if(((c,h)=>{switch(c){case"minFilter":return(f=>_G.has(f))(h);case"magFilter":return(f=>vG.has(f))(h);case"wrapS":case"wrapT":return(f=>vP.has(f))(h);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${c}" on Sampler`)}})(t,n))for(const c of this[yG])c[t]=n,c.needsUpdate=!0;this[Ws]()}}const bG=Symbol("image"),wG=Symbol("sampler"),xG=Symbol("threeTexture");class CG extends FB{constructor(t,n){super(t,new Set(n?[n]:[])),this[wG]=new Jue(t,n),this[bG]=new Kue(t,n)}get[xG](){var t;return(t=this[Nr])===null||t===void 0?void 0:t.values().next().value}get name(){return this[xG].name||""}set name(t){for(const n of this[Nr])n.name=t}get sampler(){return this[wG]}get source(){return this[bG]}}var EG,SG,BG;const jb=Symbol("texture"),Kb=Symbol("transform"),yP=Symbol("materials"),IG=Symbol("usage"),Xx=Symbol("onUpdate"),UB=Symbol("activeVideo");var er;(function(o){o[o.Base=0]="Base",o[o.MetallicRoughness=1]="MetallicRoughness",o[o.Normal=2]="Normal",o[o.Occlusion=3]="Occlusion",o[o.Emissive=4]="Emissive",o[o.Clearcoat=5]="Clearcoat",o[o.ClearcoatRoughness=6]="ClearcoatRoughness",o[o.ClearcoatNormal=7]="ClearcoatNormal",o[o.SheenColor=8]="SheenColor",o[o.SheenRoughness=9]="SheenRoughness",o[o.Transmission=10]="Transmission",o[o.Thickness=11]="Thickness",o[o.Specular=12]="Specular",o[o.SpecularColor=13]="SpecularColor",o[o.Iridescence=14]="Iridescence",o[o.IridescenceThickness=15]="IridescenceThickness",o[o.Anisotropy=16]="Anisotropy"})(er||(er={}));class Yx{constructor(t,n,c,h){this[EG]=null,this[SG]={rotation:0,scale:new Cn(1,1),offset:new Cn(0,0)},this[BG]=!1,c&&(this[Kb].rotation=c.rotation,this[Kb].scale.copy(c.repeat),this[Kb].offset.copy(c.offset),this[jb]=new CG(t,c)),this[Xx]=t,this[yP]=h,this[IG]=n}get texture(){return this[jb]}setTexture(t){var n,c;const h=t!=null?t.source[yd]:null,f=(n=this[jb])===null||n===void 0?void 0:n.source[yd];if(f!=null&&f.isVideoTexture?this[UB]=!1:!((c=this[jb])===null||c===void 0)&&c.source.animation&&this[jb].source.animation.removeEventListener("enterFrame",this[Xx]),this[jb]=t,h!=null&&h.isVideoTexture){const p=h.image;if(this[UB]=!0,p.requestVideoFrameCallback!=null){const v=()=>{this[UB]&&(this[Xx](),p.requestVideoFrameCallback(v))};p.requestVideoFrameCallback(v)}else{const v=()=>{this[UB]&&(this[Xx](),requestAnimationFrame(v))};requestAnimationFrame(v)}}else(t==null?void 0:t.source.animation)!=null&&t.source.animation.addEventListener("enterFrame",this[Xx]);let d=Ns;if(this[yP])for(const p of this[yP]){switch(this[IG]){case er.Base:p.map=h;break;case er.MetallicRoughness:d=bs,p.metalnessMap=h,p.roughnessMap=h;break;case er.Normal:d=bs,p.normalMap=h;break;case er.Occlusion:d=bs,p.aoMap=h;break;case er.Emissive:p.emissiveMap=h;break;case er.Clearcoat:p.clearcoatMap=h;break;case er.ClearcoatRoughness:p.clearcoatRoughnessMap=h;break;case er.ClearcoatNormal:p.clearcoatNormalMap=h;break;case er.SheenColor:p.sheenColorMap=h;break;case er.SheenRoughness:p.sheenRoughnessMap=h;break;case er.Transmission:p.transmissionMap=h;break;case er.Thickness:p.thicknessMap=h;break;case er.Specular:p.specularIntensityMap=h;break;case er.SpecularColor:p.specularColorMap=h;break;case er.Iridescence:p.iridescenceMap=h;break;case er.IridescenceThickness:p.iridescenceThicknessMap=h;break;case er.Anisotropy:p.anisotropyMap=h}p.needsUpdate=!0}h&&(h.colorSpace=d,h.rotation=this[Kb].rotation,h.repeat=this[Kb].scale,h.offset=this[Kb].offset),this[Xx]()}}EG=jb,SG=Kb,BG=UB;const kB=Symbol("threeMaterial"),l5=Symbol("threeMaterials"),TG=Symbol("baseColorTexture"),MG=Symbol("metallicRoughnessTexture");class Zue extends FB{constructor(t,n){super(t,n);const{map:c,metalnessMap:h}=n.values().next().value;this[TG]=new Yx(t,er.Base,c,n),this[MG]=new Yx(t,er.MetallicRoughness,h,n)}get[l5](){return this[Nr]}get[kB](){var t;return(t=this[Nr])===null||t===void 0?void 0:t.values().next().value}get baseColorFactor(){const t=[0,0,0,this[kB].opacity];return this[kB].color.toArray(t),t}get metallicFactor(){return this[kB].metalness}get roughnessFactor(){return this[kB].roughness}get baseColorTexture(){return this[TG]}get metallicRoughnessTexture(){return this[MG]}setBaseColorFactor(t){const n=new an;t instanceof Array?n.fromArray(t):n.set(t);for(const c of this[l5])c.color.set(n),t instanceof Array&&t.length>3?c.opacity=t[3]:(t=[0,0,0,c.opacity],n.toArray(t));this[Ws]()}setMetallicFactor(t){for(const n of this[l5])n.metalness=t;this[Ws]()}setRoughnessFactor(t){for(const n of this[l5])n.roughness=t;this[Ws]()}}var RG,DG;const FG=Symbol("pbrMetallicRoughness"),UG=Symbol("normalTexture"),kG=Symbol("occlusionTexture"),LG=Symbol("emissiveTexture"),Yo=Symbol("backingThreeMaterial"),PG=Symbol("applyAlphaCutoff"),bP=Symbol("getAlphaMode"),Jx=Symbol("lazyLoadGLTFInfo"),wP=Symbol("initialize"),xP=Symbol("getLoadedMaterial"),An=Symbol("ensureMaterialIsLoaded"),OG=Symbol("gltfIndex"),LB=Symbol("setActive"),Zx=Symbol("variantIndices"),CP=Symbol("isActive"),QG=Symbol("modelVariants"),EP=Symbol("name"),mA=Symbol("pbrTextures");class SP extends FB{constructor(t,n,c,h,f,d,p=void 0){super(t,f),this[RG]=new Set,this[DG]=new Map,this[OG]=n,this[CP]=c,this[QG]=h,this[EP]=d,p==null?this[wP]():this[Jx]=p}get[(RG=Zx,DG=mA,Yo)](){return this[Nr].values().next().value}[wP](){const t=this[Ws],n=this[Nr];this[FG]=new Zue(t,n);const{normalMap:c,aoMap:h,emissiveMap:f}=n.values().next().value;this[UG]=new Yx(t,er.Normal,c,n),this[kG]=new Yx(t,er.Occlusion,h,n),this[LG]=new Yx(t,er.Emissive,f,n);const d=p=>{this[mA].set(p,new Yx(t,p,null,n))};d(er.Clearcoat),d(er.ClearcoatRoughness),d(er.ClearcoatNormal),d(er.SheenColor),d(er.SheenRoughness),d(er.Transmission),d(er.Thickness),d(er.Specular),d(er.SpecularColor),d(er.Iridescence),d(er.IridescenceThickness),d(er.Anisotropy)}async[xP](){if(this[Jx]!=null){const t=await this[Jx].doLazyLoad();return this[wP](),this[Jx]=void 0,this.ensureLoaded=async()=>{},t}return null}colorFromRgb(t){const n=new an;return t instanceof Array?n.fromArray(t):n.set(t),n}[An](){if(this[Jx]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[xP]()}get isLoaded(){return this[Jx]==null}get isActive(){return this[CP]}[LB](t){this[CP]=t}get name(){return this[EP]||""}set name(t){if(this[EP]=t,this[Nr]!=null)for(const n of this[Nr])n.name=t}get pbrMetallicRoughness(){return this[An](),this[FG]}get normalTexture(){return this[An](),this[UG]}get occlusionTexture(){return this[An](),this[kG]}get emissiveTexture(){return this[An](),this[LG]}get emissiveFactor(){return this[An](),this[Yo].emissive.toArray()}get index(){return this[OG]}hasVariant(t){const n=this[QG].get(t);return n!=null&&this[Zx].has(n.index)}setEmissiveFactor(t){this[An]();const n=this.colorFromRgb(t);for(const c of this[Nr])c.emissive.set(n);this[Ws]()}[bP](){return this[Yo].transparent?"BLEND":this[Yo].alphaTest>0?"MASK":"OPAQUE"}[PG](){this[An]();for(const t of this[Nr])this[bP]()==="MASK"?t.alphaTest==null&&(t.alphaTest=.5):t.alphaTest=void 0,t.needsUpdate=!0}setAlphaCutoff(t){this[An]();for(const n of this[Nr])n.alphaTest=t,n.needsUpdate=!0;this[PG](),this[Ws]()}getAlphaCutoff(){return this[An](),this[Yo].alphaTest}setDoubleSided(t){this[An]();for(const n of this[Nr])n.side=t?2:0,n.needsUpdate=!0;this[Ws]()}getDoubleSided(){return this[An](),this[Yo].side==2}setAlphaMode(t){this[An]();for(const h of this[Nr])c=t==="BLEND",(n=h).transparent=c,n.depthWrite=!c,h.alphaTest=t==="MASK"?.5:void 0,h.needsUpdate=!0;var n,c;this[Ws]()}getAlphaMode(){return this[An](),this[bP]()}get emissiveStrength(){return this[An](),this[Yo].emissiveIntensity}setEmissiveStrength(t){this[An]();for(const n of this[Nr])n.emissiveIntensity=t;this[Ws]()}get clearcoatFactor(){return this[An](),this[Yo].clearcoat}get clearcoatRoughnessFactor(){return this[An](),this[Yo].clearcoatRoughness}get clearcoatTexture(){return this[An](),this[mA].get(er.Clearcoat)}get clearcoatRoughnessTexture(){return this[An](),this[mA].get(er.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[An](),this[mA].get(er.ClearcoatNormal)}get clearcoatNormalScale(){return this[An](),this[Yo].clearcoatNormalScale.x}setClearcoatFactor(t){this[An]();for(const n of this[Nr])n.clearcoat=t;this[Ws]()}setClearcoatRoughnessFactor(t){this[An]();for(const n of this[Nr])n.clearcoatRoughness=t;this[Ws]()}setClearcoatNormalScale(t){this[An]();for(const n of this[Nr])n.clearcoatNormalScale=new Cn(t,t);this[Ws]()}get ior(){return this[An](),this[Yo].ior}setIor(t){this[An]();for(const n of this[Nr])n.ior=t;this[Ws]()}get sheenColorFactor(){return this[An](),this[Yo].sheenColor.toArray()}get sheenColorTexture(){return this[An](),this[mA].get(er.SheenColor)}get sheenRoughnessFactor(){return this[An](),this[Yo].sheenRoughness}get sheenRoughnessTexture(){return this[An](),this[mA].get(er.SheenRoughness)}setSheenColorFactor(t){this[An]();const n=this.colorFromRgb(t);for(const c of this[Nr])c.sheenColor.set(n),c.sheen=1;this[Ws]()}setSheenRoughnessFactor(t){this[An]();for(const n of this[Nr])n.sheenRoughness=t,n.sheen=1;this[Ws]()}get transmissionFactor(){return this[An](),this[Yo].transmission}get transmissionTexture(){return this[An](),this[mA].get(er.Transmission)}setTransmissionFactor(t){this[An]();for(const n of this[Nr])n.transmission=t;this[Ws]()}get thicknessFactor(){return this[An](),this[Yo].thickness}get thicknessTexture(){return this[An](),this[mA].get(er.Thickness)}get attenuationDistance(){return this[An](),this[Yo].attenuationDistance}get attenuationColor(){return this[An](),this[Yo].attenuationColor.toArray()}setThicknessFactor(t){this[An]();for(const n of this[Nr])n.thickness=t;this[Ws]()}setAttenuationDistance(t){this[An]();for(const n of this[Nr])n.attenuationDistance=t;this[Ws]()}setAttenuationColor(t){this[An]();const n=this.colorFromRgb(t);for(const c of this[Nr])c.attenuationColor.set(n);this[Ws]()}get specularFactor(){return this[An](),this[Yo].specularIntensity}get specularTexture(){return this[An](),this[mA].get(er.Specular)}get specularColorFactor(){return this[An](),this[Yo].specularColor.toArray()}get specularColorTexture(){return this[An](),this[mA].get(er.SheenColor)}setSpecularFactor(t){this[An]();for(const n of this[Nr])n.specularIntensity=t;this[Ws]()}setSpecularColorFactor(t){this[An]();const n=this.colorFromRgb(t);for(const c of this[Nr])c.specularColor.set(n);this[Ws]()}get iridescenceFactor(){return this[An](),this[Yo].iridescence}get iridescenceTexture(){return this[An](),this[mA].get(er.Iridescence)}get iridescenceIor(){return this[An](),this[Yo].iridescenceIOR}get iridescenceThicknessMinimum(){return this[An](),this[Yo].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[An](),this[Yo].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[An](),this[mA].get(er.IridescenceThickness)}setIridescenceFactor(t){this[An]();for(const n of this[Nr])n.iridescence=t;this[Ws]()}setIridescenceIor(t){this[An]();for(const n of this[Nr])n.iridescenceIOR=t;this[Ws]()}setIridescenceThicknessMinimum(t){this[An]();for(const n of this[Nr])n.iridescenceThicknessRange[0]=t;this[Ws]()}setIridescenceThicknessMaximum(t){this[An]();for(const n of this[Nr])n.iridescenceThicknessRange[1]=t;this[Ws]()}get anisotropyStrength(){return this[An](),this[Yo].anisotropy}get anisotropyRotation(){return this[An](),this[Yo].anisotropyRotation}get anisotropyTexture(){return this[An](),this[mA].get(er.Anisotropy)}setAnisotropyStrength(t){this[An]();for(const n of this[Nr])n.anisotropy=t;this[Ws]()}setAnisotropyRotation(t){this[An]();for(const n of this[Nr])n.anisotropyRotation=t;this[Ws]()}}let NG=class{constructor(o){this.name="",this.children=new Array,this.name=o}};class BP extends NG{constructor(t,n,c,h){super(t.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=t;const{gltf:f,threeGLTF:d,threeObjectMap:p}=h;this.parser=d.parser,this.modelVariants=c,this.mesh.userData.variantData=c;const v=p.get(t.material);v.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=v.materials:console.error(`Primitive (${t.name}) missing initial material reference.`);const w=t.userData.associations||{};if(w.meshes==null)return void console.error("Mesh is missing primitive index association");const S=((f.meshes||[])[w.meshes].primitives||[])[w.primitives];if(S!=null){if(S.material!=null)this.materials.set(S.material,n[S.material]);else{const B=n.findIndex(R=>R.name==="Default");B>=0?this.materials.set(B,n[B]):console.warn("gltfPrimitive has no material!")}if(S.extensions&&S.extensions.KHR_materials_variants){const B=S.extensions.KHR_materials_variants,R=d.parser.json.extensions.KHR_materials_variants.variants;for(const D of B.mappings){const O=n[D.material];this.materials.set(D.material,O);for(const V of D.variants){const{name:$}=R[V];this.variantToMaterialMap.set(V,O),O[Zx].add(V),c.has($)||c.set($,{name:$,index:V})}}}}else console.error("Mesh primitive definition is missing.")}async setActiveMaterial(t){const n=this.materials.get(t);if(t!==this.activeMaterialIdx){const c=n[Nr],h=await n[xP]();this.mesh.material=h??c.values().next().value,this.parser.assignFinalMaterial(this.mesh),c.add(this.mesh.material),this.activeMaterialIdx=t}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(t){return this.materials.get(t)}async enableVariant(t){if(t==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(t)){const n=this.modelVariants.get(t);return this.enableVariantHelper(n.index)}return null}async enableVariantHelper(t){if(this.variantToMaterialMap!=null&&t!=null){const n=this.variantToMaterialMap.get(t);if(n!=null)return this.setActiveMaterial(n.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const t of this.variantToMaterialMap.keys()){const n=this.mesh.userData.variantMaterials.get(t);if(n.material!=null)continue;const c=await this.enableVariantHelper(t);c!=null&&(n.material=c)}}get variantInfo(){return this.variantToMaterialMap}addVariant(t,n){if(!this.ensureVariantIsUnused(n))return!1;this.modelVariants.has(n)||this.modelVariants.set(n,{name:n,index:this.modelVariants.size});const c=this.modelVariants.get(n).index;return t[Zx].add(c),this.variantToMaterialMap.set(c,t),this.materials.set(t.index,t),this.updateVariantUserData(c,t),!0}deleteVariant(t){if(this.variantInfo.has(t)){this.variantInfo.delete(t);const n=this.mesh.userData.variantMaterials;n!=null&&n.delete(t)}}updateVariantUserData(t,n){n[Zx].add(t),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(t,{material:n[Nr].values().next().value,gltfMaterialIndex:n.index})}ensureVariantIsUnused(t){const n=this.modelVariants.get(t);return n==null||!this.variantInfo.has(n.index)||(console.warn(`Primitive cannot add variant '${t}' for this material, it already exists.`),!1)}}var HG,zG,GG,VG,qG,$G;const Xb=Symbol("materials"),c5=Symbol("hierarchy"),WG=Symbol("roots"),z_=Symbol("primitives"),jG=Symbol("prepareVariantsForExport"),KG=Symbol("switchVariant"),XG=Symbol("materialFromPoint"),IP=Symbol("nodeFromPoint"),YG=Symbol("nodeFromIndex"),Bh=Symbol("variantData"),TP=Symbol("availableVariants"),MP=Symbol("modelOnUpdate"),JG=Symbol("cloneMaterial");class ehe{constructor(t,n,c,h){this.gltf=t,this.gltfElementMap=n,this.mapKey=c,this.doLazyLoad=h}}class the{constructor(t,n=()=>{}){this[HG]=new Array,this[zG]=new Array,this[GG]=new Array,this[VG]=new Array,this[qG]=()=>{},this[$G]=new Map,this[MP]=n;const{gltf:c,threeGLTF:h,gltfElementMap:f}=t;for(const[v,w]of c.materials.entries()){const S=f.get(w);if(S!=null)this[Xb].push(new SP(n,v,!0,this[Bh],S,w.name));else{const B=(c.materials||[])[v],R=new Set;f.set(B,R);const D=async()=>{const O=await h.parser.getDependency("material",v);return R.add(O),O};this[Xb].push(new SP(n,v,!1,this[Bh],R,w.name,new ehe(c,f,B,D)))}}const d=new Map,p=new Array;for(const v of h.scene.children)p.push(v);for(;p.length>0;){const v=p.pop();let w=null;v instanceof As?(w=new BP(v,this.materials,this[Bh],t),this[z_].push(w)):w=new NG(v.name);const S=d.get(v);S!=null?S.children.push(w):this[WG].push(w),this[c5].push(w);for(const B of v.children)p.push(B),d.set(v,w)}}get materials(){return this[Xb]}[(HG=Xb,zG=c5,GG=WG,VG=z_,qG=MP,$G=Bh,TP)](){const t=Array.from(this[Bh].values());return t.sort((n,c)=>n.index-c.index),t.map(n=>n.name)}getMaterialByName(t){const n=this[Xb].filter(c=>c.name===t);return n.length>0?n[0]:null}[YG](t,n){const c=this[c5].find(h=>{if(h instanceof BP){const{meshes:f,primitives:d}=h.mesh.userData.associations;if(f==t&&d==n)return!0}return!1});return c??null}[IP](t){return this[c5].find(n=>n instanceof BP&&n.mesh===t.object)}[XG](t){return this[IP](t).getActiveMaterial()}async[KG](t){for(const n of this[z_])await n.enableVariant(t);for(const n of this.materials)n[LB](!1);for(const n of this[z_])this.materials[n.getActiveMaterial().index][LB](!0)}async[jG](){const t=new Array;for(const n of this[z_])t.push(n.instantiateVariants());await Promise.all(t)}[JG](t,n){const c=this.materials[t];c.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const h=c[Nr],f=new Set;for(const[p,v]of h.entries()){const w=v.clone();w.name=n+(h.size>1?"_inst"+p:""),f.add(w)}const d=new SP(this[MP],this[Xb].length,!1,this[Bh],f,n);return this[Xb].push(d),d}createMaterialInstanceForVariant(t,n,c,h=!0){let f=null;for(const d of this[z_]){const p=this[Bh].get(c);p!=null&&d.variantInfo.has(p.index)||d.getMaterial(t)!=null&&(this.hasVariant(c)||this.createVariant(c),f==null&&(f=this[JG](t,n)),d.addVariant(f,c))}if(h&&f!=null){f[LB](!0),this.materials[t][LB](!1);for(const d of this[z_])d.enableVariant(c)}return f}createVariant(t){this[Bh].has(t)?console.warn(`Variant '${t}'' already exists`):this[Bh].set(t,{name:t,index:this[Bh].size})}hasVariant(t){return this[Bh].has(t)}setMaterialToVariant(t,n){if(this[TP]().find(c=>c===n)!=null)if(t<0||t>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else for(const c of this[z_]){const h=c.getMaterial(t);h!=null&&c.addVariant(h,n)}else console.warn(`Can't add material to '${n}', the variant does not exist.'`)}updateVariantName(t,n){const c=this[Bh].get(t);c!=null&&(c.name=n,this[Bh].set(n,c),this[Bh].delete(t))}deleteVariant(t){const n=this[Bh].get(t);if(n!=null){for(const c of this.materials)c.hasVariant(t)&&c[Zx].delete(n.index);for(const c of this[z_])c.deleteVariant(n.index);this[Bh].delete(t)}}}var RP=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const u5=Symbol("currentGLTF"),h5=Symbol("originalGltfJson"),Yb=Symbol("model"),DP=Symbol("getOnUpdateMethod"),PB=Symbol("buildTexture");class ihe extends As{constructor(){super(void 0,new Wl({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(t){this.material.map=t}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(t=this.height,n=this.radius,c=128){t==this.height&&n==this.radius&&c==this.resolution||(this.height=t,this.radius=n,this.resolution=c,t>0&&n>0&&(this.geometry.dispose(),this.geometry=function(h,f,d){const p=new Lu(f,2*d,d);p.scale(1,1,-1);const v=p.getAttribute("position"),w=new Ke;for(let S=0;S<v.count;++S)if(w.fromBufferAttribute(v,S),w.y<0){const B=3*-h/2,R=w.y<B?-h/w.y:1-w.y*w.y/(3*B*B);w.multiplyScalar(R),w.toArray(v.array,3*S)}return v.needsUpdate=!0,p}(t,n,c)))}}const d5=new Ke,FP=new Ke,UP=new Ke,A5=new On,ZG=new No,eV=new ha;class tV extends di{constructor(t){super(document.createElement("div")),this.normal=new Ke(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=t.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(t.position),this.updateNormal(t.normal),this.surface=t.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(t){if(t==null)return;const n=Q_(t)[0].terms;for(let c=0;c<3;++c)this.position.setComponent(c,vm(n[c]).number);this.updateMatrixWorld()}updateNormal(t){if(t==null)return;const n=Q_(t)[0].terms;for(let c=0;c<3;++c)this.normal.setComponent(c,n[c].number)}updateSurface(){const{mesh:t,tri:n,bary:c}=this;if(t==null||n==null||c==null)return;t.getVertexPosition(n.x,d5),t.getVertexPosition(n.y,FP),t.getVertexPosition(n.z,UP),d5.toArray(A5.elements,0),FP.toArray(A5.elements,3),UP.toArray(A5.elements,6),this.position.copy(c).applyMatrix3(A5);const h=this.parent;h.worldToLocal(t.localToWorld(this.position)),ZG.set(d5,FP,UP),ZG.getNormal(this.normal).transformDirection(t.matrixWorld);const f=h.parent;eV.setFromAxisAngle(d5.set(0,1,0),-f.rotation.y),this.normal.applyQuaternion(eV)}orient(t){this.pivot.style.transform=`rotate(${t}rad)`}updateVisibility(t){this.element.classList.toggle("hide",!t),this.slot.assignedNodes().forEach(n=>{if(n.nodeType!==Node.ELEMENT_NODE)return;const c=n,h=c.dataset.visibilityAttribute;if(h!=null){const f=`data-${h}`;c.toggleAttribute(f,t)}c.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:t}}))}),this.initialized=!0}}const nhe={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},rhe={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function iV(o,t,n){return(1-n)*o+n*t}class she extends gn{constructor(t,n,c){super(),this.camera=new io,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new XA,this.horizontalBlurMaterial=new jl(nhe),this.verticalBlurMaterial=new jl(rhe),this.intensity=0,this.softness=1,this.boundingBox=new da,this.size=new Ke,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:h}=this;h.rotation.x=Math.PI/2,h.left=-.5,h.right=.5,h.bottom=-.5,h.top=.5,this.add(h);const f=new Qa,d=new Wl({opacity:1,transparent:!0,side:1});this.floor=new As(f,d),this.floor.userData.noHit=!0,h.add(this.floor),this.blurPlane=new As(f),this.blurPlane.visible=!1,h.add(this.blurPlane),t.target.add(this),this.depthMaterial.onBeforeCompile=function(p){p.fragmentShader=p.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(t,n,c)}setScene(t,n,c){const{boundingBox:h,size:f,rotation:d,position:p}=this;if(this.isAnimated=t.animationNames.length>0,this.boundingBox.copy(t.boundingBox),this.size.copy(t.size),this.maxDimension=Math.max(f.x,f.y,f.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(p),c==="back"){const{min:v,max:w}=h;[v.y,v.z]=[v.z,v.y],[w.y,w.z]=[w.z,w.y],[f.y,f.z]=[f.z,f.y],d.x=Math.PI/2,d.y=Math.PI}else d.x=0,d.y=0;if(this.isAnimated){const v=h.min.y,w=h.max.y;f.y=this.maxDimension,h.expandByVector(f.subScalar(this.maxDimension).multiplyScalar(-.5)),h.min.y=v,h.max.y=w,f.set(this.maxDimension,w-v,this.maxDimension)}c==="bottom"?p.y=h.min.y:p.z=h.min.y,this.setSoftness(n)}setSoftness(t){this.softness=t;const{size:n,camera:c}=this,h=this.isAnimated?2:1,f=h*Math.pow(2,9-3*t);this.setMapSize(f);const d=n.y/2,p=n.y*h;c.near=0,c.far=iV(p,d,t),this.depthMaterial.opacity=1/t,c.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(t){const{size:n}=this;this.isAnimated&&(t*=2);const c=Math.floor(n.x>n.z?t:t*n.x/n.z),h=Math.floor(n.x>n.z?t*n.z/n.x:t),f=10+c,d=10+h;if(this.renderTarget==null||this.renderTarget.width===f&&this.renderTarget.height===d||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const p={format:fn};this.renderTarget=new Io(f,d,p),this.renderTargetBlur=new Io(f,d,p),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(n.x*(1+10/c),n.z*(1+10/h),1),this.needsUpdate=!0}setIntensity(t){this.intensity=t,t>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=t*iV(.3,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(t){this.floor.position.z=-t+this.gap()}gap(){return .001*this.maxDimension}render(t,n){n.overrideMaterial=this.depthMaterial;const c=t.getClearAlpha();t.setClearAlpha(0),this.floor.visible=!1;const h=t.xr.enabled;t.xr.enabled=!1;const f=t.getRenderTarget();t.setRenderTarget(this.renderTarget),t.render(n,this.camera),n.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(t),t.xr.enabled=h,t.setRenderTarget(f),t.setClearAlpha(c)}blurShadow(t){const{camera:n,horizontalBlurMaterial:c,verticalBlurMaterial:h,renderTarget:f,renderTargetBlur:d,blurPlane:p}=this;p.visible=!0,p.material=c,c.uniforms.h.value=1/this.renderTarget.width,c.uniforms.tDiffuse.value=this.renderTarget.texture,t.setRenderTarget(d),t.render(p,n),p.material=h,h.uniforms.v.value=1/this.renderTarget.height,h.uniforms.tDiffuse.value=this.renderTargetBlur.texture,t.setRenderTarget(f),t.render(p,n),p.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}const kP=new Ke,nV=new Ke,rV=new Ke,p5=new xx,ohe=new Ke,OB=new Cn;class ahe extends El{constructor({canvas:t,element:n,width:c,height:h}){super(),this.annotationRenderer=new qs,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new zs(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new gn,this.target=new gn,this.animationNames=[],this.boundingBox=new da,this.boundingSphere=new _c,this.size=new Ke,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=4,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Ke,this.targetDamperX=new vd,this.targetDamperY=new vd,this.targetDamperZ=new vd,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new ihe,this.name="ModelScene",this.element=n,this.canvas=t,this.camera=new zs(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(c,h),this.target.name="Target",this.mixer=new bM(this.target);const{domElement:f}=this.annotationRenderer,{style:d}=f;d.display="none",d.pointerEvents="none",d.position="absolute",d.top="0",this.element.shadowRoot.querySelector(".default").appendChild(f),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(t){this.reset(),this._model=t,this.target.add(t),await this.setupScene()}async setSource(t,n=()=>{}){if(!t||t===this.url)return void n(1);if(this.reset(),this.url=t,this.externalRenderer!=null){const p=await this.externalRenderer.load(n);return this.boundingSphere.radius=p.framedRadius,void(this.idealAspect=p.fieldOfViewAspect)}let c;this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{c=await new Promise(async(p,v)=>{this.cancelPendingSourceChange=()=>v();try{p(await this.element[ro].loader.load(t,this.element,n))}catch(w){v(w)}})}catch(p){if(p==null)return;throw p}this.cancelPendingSourceChange=null,this.reset(),this.url=t,this._currentGLTF=c,c!=null&&(this._model=c.scene,this.target.add(c.scene));const{animations:h}=c,f=new Map,d=[];for(const p of h)f.set(p.name,p),d.push(p.name);this.animations=h,this.animationsByName=f,this.animationNames=d,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:t}=this;t!=null&&(t.removeFromParent(),this._model=null);const n=this._currentGLTF;n!=null&&(n.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[u5]=null,this.element[h5]=null,this.element[Yb]=null}get currentGLTF(){return this._currentGLTF}setSize(t,n){if(this.width!==t||this.height!==n){if(this.width=Math.max(t,1),this.height=Math.max(n,1),this.annotationRenderer.setSize(t,n),this.aspect=this.width/this.height,this.externalRenderer!=null){const c=window.devicePixelRatio;this.externalRenderer.resize(t*c,n*c)}this.queueRender()}}markBakedShadow(t){t.userData.noHit=!0,this.bakedShadows.add(t)}unmarkBakedShadow(t){t.userData.noHit=!1,t.visible=!0,this.bakedShadows.delete(t),this.boundingBox.expandByObject(t)}findBakedShadows(t){const n=new da;t.traverse(c=>{const h=c;if(!h.material||!h.material.transparent)return;n.setFromObject(h);const f=n.getSize(ohe),d=Math.min(f.x,f.y,f.z);Math.max(f.x,f.y,f.z)<100*d||this.markBakedShadow(h)})}checkBakedShadows(){const{min:t,max:n}=this.boundingBox,c=new da;this.boundingBox.getSize(this.size);for(const h of this.bakedShadows)c.setFromObject(h),c.min.y<t.y+this.size.y/100&&c.min.x<=t.x&&c.max.x>=n.x&&c.min.z<=t.z&&c.max.z>=n.z||c.min.z<t.z+this.size.z/100&&c.min.x<=t.x&&c.max.x>=n.x&&c.min.y<=t.y&&c.max.y>=n.y||this.unmarkBakedShadow(h)}applyTransform(){const{model:t}=this;if(t==null)return;const n=Q_(this.element.orientation)[0].terms,c=vm(n[0]).number,h=vm(n[1]).number,f=vm(n[2]).number;t.quaternion.setFromEuler(new Za(h,f,c,"YXZ"));const d=Q_(this.element.scale)[0].terms;t.scale.set(d[0].number,d[1].number,d[2].number)}updateBoundingBox(){const{model:t}=this;if(t==null)return;this.target.remove(t),this.findBakedShadows(t);const n=(c,h)=>c.expandByPoint(h);this.setBakedShadowVisibility(!1),this.boundingBox=Bt(t,n,new da),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(c=>this.unmarkBakedShadow(c)),this.boundingBox=Bt(t,n,new da)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(t)}async updateFraming(){const{model:t}=this;if(t==null)return;this.target.remove(t),this.setBakedShadowVisibility(!1);const{center:n}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,n.copy(this.getTarget()),this.boundingSphere.radius=Math.sqrt(Bt(t,(c,h)=>Math.max(c,n.distanceToSquared(h)),0)),this.idealAspect=Bt(t,(c,h)=>{h.sub(n);const f=Math.sqrt(h.x*h.x+h.z*h.z);return Math.max(c,f/(this.idealCameraDistance()-Math.abs(h.y)))},0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(t)}setBakedShadowVisibility(t=this.shadowIntensity<=0){for(const n of this.bakedShadows)n.visible=t}idealCameraDistance(){const t=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(t)}adjustedFoV(t){const n=Math.tan(t/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(n)*180/Math.PI}getNDC(t,n){if(this.xrCamera!=null)OB.set(t/window.screen.width,n/window.screen.height);else{const c=this.element.getBoundingClientRect();OB.set((t-c.x)/this.width,(n-c.y)/this.height)}return OB.multiplyScalar(2).subScalar(1),OB.y*=-1,OB}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(t,n){this.element[ro].arRenderer.presentedScene!==this&&(this.environment=t,this.setBackground(n),this.queueRender())}setBackground(t){this.groundedSkybox.map=t,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=t)}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?10:1)}setGroundedSkybox(){const t=Q_(this.element.skyboxHeight)[0].terms[0],n=vm(t).number,c=10*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(n,c),this.groundedSkybox.position.y=n-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(t,n,c){this.goalTarget.set(-t,-n,-c)}setTargetDamperDecayTime(t){this.targetDamperX.setDecayTime(t),this.targetDamperY.setDecayTime(t),this.targetDamperZ.setDecayTime(t)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(t){const n=this.goalTarget,c=this.target.position;if(n.equals(c))return!1;{const h=this.boundingSphere.radius/10;let{x:f,y:d,z:p}=c;return f=this.targetDamperX.update(f,n.x,t,h),d=this.targetDamperY.update(d,n.y,t,h),p=this.targetDamperZ.update(p,n.z,t,h),this.groundedSkybox.position.x=-f,this.groundedSkybox.position.z=-p,this.target.position.set(f,d,p),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(t,n){const{x:c,z:h}=this.position;this.yaw=Math.atan2(t-c,n-h)}get model(){return this._model}set yaw(t){this.pivot.rotation.y=t,this.groundedSkybox.rotation.y=-t,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(t){this.mixer.setTime(t),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const t=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop!==Zh||1&~t?this.currentAnimationAction.time:this.duration-this.currentAnimationAction.time}return 0}set animationTimeScale(t){this.mixer.timeScale=t}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(t=null,n=0,c=2201,h=1/0){if(this._currentGLTF==null)return;const{animations:f}=this;if(f==null||f.length===0)return;let d=null;if(t!=null&&(d=this.animationsByName.get(t),d==null)){const p=parseInt(t);!isNaN(p)&&p>=0&&p<f.length&&(d=f[p])}d==null&&(d=f[0]);try{const{currentAnimationAction:p}=this,v=this.mixer.clipAction(d,this);this.currentAnimationAction=v,this.element.paused?this.mixer.stopAllAction():(v.paused=!1,p!=null&&v!==p?v.crossFadeFrom(p,n,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),v.setLoop(c,h),v.enabled=!0,v.clampWhenFinished=!0,v.play()}catch(p){console.error(p)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(t){this.mixer.update(t),this.queueShadowRender()}subscribeMixerEvent(t,n){this.mixer.addEventListener(t,n)}updateShadow(){const t=this.shadow;if(t!=null){const n=this.element.arPlacement==="wall"?"back":"bottom";t.setScene(this,this.shadowSoftness,n),t.needsUpdate=!0}}renderShadow(t){const n=this.shadow;n!=null&&n.needsUpdate==1&&(n.render(t,this),n.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(t){if(this.shadowIntensity=t,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(t<=0&&this.shadow==null))){if(this.shadow==null){const n=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new she(this,this.shadowSoftness,n)}this.shadow.setIntensity(t)}}setShadowSoftness(t){this.shadowSoftness=t;const n=this.shadow;n!=null&&n.setSoftness(t)}setShadowOffset(t){const n=this.shadow;n!=null&&n.setOffset(t)}getHit(t=this){return p5.intersectObject(t,!0).find(n=>n.object.visible&&!n.object.userData.noHit)}hitFromController(t,n=this){return p5.setFromXRController(t),this.getHit(n)}hitFromPoint(t,n=this){return p5.setFromCamera(t,this.getCamera()),this.getHit(n)}positionAndNormalFromPoint(t,n=this){var c;const h=this.hitFromPoint(t,n);return h==null?null:{position:h.point,normal:h.face!=null?h.face.normal.clone().applyNormalMatrix(new On().getNormalMatrix(h.object.matrixWorld)):p5.ray.direction.clone().multiplyScalar(-1),uv:(c=h.uv)!==null&&c!==void 0?c:null}}surfaceFromPoint(t,n=this){const c=this.element.model;if(c==null)return null;const h=this.hitFromPoint(t,n);if(h==null||h.face==null)return null;const f=c[IP](h),{meshes:d,primitives:p}=f.mesh.userData.associations,v=new Ke,w=new Ke,S=new Ke,{a:B,b:R,c:D}=h.face,O=h.object;O.getVertexPosition(B,v),O.getVertexPosition(R,w),O.getVertexPosition(D,S);const V=new No(v,w,S),$=new Ke;return V.getBarycoord(O.worldToLocal(h.point),$),`${d} ${p} ${B} ${R} ${D} ${$.x.toFixed(3)} ${$.y.toFixed(3)} ${$.z.toFixed(3)}`}addHotspot(t){this.target.add(t),this.annotationRenderer.domElement.appendChild(t.element),this.updateSurfaceHotspot(t)}removeHotspot(t){this.target.remove(t)}forHotspots(t){const{children:n}=this.target;for(let c=0,h=n.length;c<h;c++){const f=n[c];f instanceof tV&&t(f)}}updateSurfaceHotspot(t){if(t.surface==null||this.element.model==null)return;const n=Q_(t.surface)[0].terms;if(n.length!=8)return void console.warn(t.surface+" does not have exactly 8 numbers.");const c=this.element.model[YG](n[0].number,n[1].number);if(c==null)return void console.warn(t.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");const h=c.mesh.geometry.attributes.position.count,f=new Ke(n[2].number,n[3].number,n[4].number);if(f.x>=h||f.y>=h||f.z>=h)return void console.warn(t.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");const d=new Ke(n[5].number,n[6].number,n[7].number);t.mesh=c.mesh,t.tri=f,t.bary=d,t.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots(t=>{t.updateSurface()})}updateHotspotsVisibility(t){this.forHotspots(n=>{kP.copy(t),nV.setFromMatrixPosition(n.matrixWorld),kP.sub(nV),rV.copy(n.normal).transformDirection(this.target.matrixWorld),kP.dot(rV)<0?n.hide():n.show()})}orientHotspots(t){this.forHotspots(n=>{n.orient(t)})}setHotspotsVisibility(t){this.forHotspots(n=>{n.visible=t})}updateSchema(t){var n;const{schemaElement:c,element:h}=this,{alt:f,poster:d,iosSrc:p}=h;if(t!=null){const v=[{"@type":"MediaObject",contentUrl:t,encodingFormat:((n=t.split(".").pop())===null||n===void 0?void 0:n.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];p&&v.push({"@type":"MediaObject",contentUrl:p,encodingFormat:"model/vnd.usdz+zip"});const w={"@context":"http://schema.org/","@type":"3DModel",image:d??void 0,name:f??void 0,encoding:v};c.textContent=JSON.stringify(w),document.head.appendChild(c)}else c.parentElement!=null&&c.parentElement.removeChild(c)}}class lhe extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(t){const n={progress:0,completed:!1};return this.ongoingActivities.add(n),this.ongoingActivityCount===1&&this.announceTotalProgress(n,0,t),c=>{let h;return h=Math.max(_d(c,0,1),n.progress),h!==n.progress&&this.announceTotalProgress(n,h,t),n.progress}}announceTotalProgress(t,n,c){let h=0,f=0;n==1&&(t.completed=!0);for(const v of this.ongoingActivities){const{progress:w}=v;h+=1-w,v.completed&&f++}const d=t.progress;t.progress=n,this.totalProgress+=(n-d)*(1-this.totalProgress)/h;const p=f===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:p,reason:c}})),f===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}var sV,oV,aV,lV,cV,uV,hV,dV,AV,pV,fV,gV,mV,f5=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const P0=document.createElement("canvas"),LP=Symbol("fallbackResizeHandler"),_V=Symbol("defaultAriaLabel"),g5=Symbol("resizeObserver"),eC=Symbol("clearModelTimeout"),PP=Symbol("onContextLost"),tC=Symbol("loaded"),OP=Symbol("status"),QP=Symbol("onFocus"),NP=Symbol("onBlur"),iC=Symbol("updateSize"),m5=Symbol("intersectionObserver"),Jb=Symbol("isElementInViewport"),_5=Symbol("announceModelVisibility"),nC=Symbol("ariaLabel"),HP=Symbol("altDefaulted"),QB=Symbol("statusElement"),v5=Symbol("updateStatus"),NB=Symbol("loadedTime"),rC=Symbol("updateSource"),vV=Symbol("markLoaded"),y5=Symbol("container"),bd=Symbol("input"),zP=Symbol("canvas"),Ei=Symbol("scene"),Ih=Symbol("needsRender"),wm=Symbol("tick"),xm=Symbol("onModelLoad"),b5=Symbol("onResize"),ro=Symbol("renderer"),Zb=Symbol("progressTracker"),yV=Symbol("getLoaded"),e1=Symbol("getModelIsVisible"),sC=Symbol("shouldAttemptPreload"),G_=o=>({x:o.x,y:o.y,z:o.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),GP=o=>({u:o.x,v:o.y,toString(){return`${this.u} ${this.v}`}});class HB extends H{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[sV]=!1,this[oV]=!1,this[aV]=0,this[lV]="",this[cV]=null,this[uV]=iB(()=>{const h=this.getBoundingClientRect();this[iC](h)},50),this[hV]=iB(h=>{const f=this.modelIsVisible;f!==h&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:f}}))},0),this[dV]=null,this[AV]=null,this[pV]=new lhe,this[fV]=()=>{this[QB].textContent=this[OP]},this[gV]=()=>{this[QB].textContent=""},this[mV]=h=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:h.sourceEvent}}))},this.attachShadow({mode:"open"});const t=this.shadowRoot;let n,c;if($e(nB,t),this[y5]=t.querySelector(".container"),this[bd]=t.querySelector(".userInput"),this[zP]=t.querySelector("canvas"),this[QB]=t.querySelector("#status"),this[_V]=this[bd].getAttribute("aria-label"),this.isConnected){const h=this.getBoundingClientRect();n=h.width,c=h.height}else n=300,c=150;this[Ei]=new ahe({canvas:this[zP],element:this,width:n,height:c}),Promise.resolve().then(()=>{this[iC](this.getBoundingClientRect())}),Lr&&(this[g5]=new ResizeObserver(h=>{if(!this[ro].isPresenting)for(let f of h)f.target===this&&this[iC](f.contentRect)})),Db?this[m5]=new IntersectionObserver(h=>{for(let f of h)if(f.target===this){const d=this.modelIsVisible;this[Jb]=f.isIntersecting,this[_5](d),this[Jb]&&!this.loaded&&this[rC]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[Jb]=!0}static get is(){return"model-viewer"}static set modelCacheSize(t){Ft[Ue].evictionThreshold=t}static get modelCacheSize(){return Ft[Ue].evictionThreshold}static set minimumRenderScale(t){t>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),t<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),U0.singleton.minScale=t}static get minimumRenderScale(){return U0.singleton.minScale}get loaded(){return this[yV]()}get[(sV=Jb,oV=tC,aV=NB,lV=OP,cV=eC,uV=LP,hV=_5,dV=g5,AV=m5,pV=Zb,ro)](){return U0.singleton}get modelIsVisible(){return this[e1]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),Lr?this[g5].observe(this):self.addEventListener("resize",this[LP]),Db&&this[m5].observe(this),this.addEventListener("focus",this[QP]),this.addEventListener("blur",this[NP]);const t=this[ro];t.addEventListener("contextlost",this[PP]),t.registerScene(this[Ei]),this[eC]!=null&&(self.clearTimeout(this[eC]),this[eC]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),Lr?this[g5].unobserve(this):self.removeEventListener("resize",this[LP]),Db&&this[m5].unobserve(this),this.removeEventListener("focus",this[QP]),this.removeEventListener("blur",this[NP]);const t=this[ro];t.removeEventListener("contextlost",this[PP]),t.unregisterScene(this[Ei]),this[eC]=self.setTimeout(()=>{this[Ei].dispose(),this[eC]=null},10)}updated(t){super.updated(t),t.has("src")&&(this.src==null?(this[tC]=!1,this[NB]=0,this[Ei].reset()):this.src!==this[Ei].url&&(this[tC]=!1,this[NB]=0,this[rC]())),t.has("alt")&&this[bd].setAttribute("aria-label",this[nC]),t.has("generateSchema")&&(this.generateSchema?this[Ei].updateSchema(this.src):this[Ei].updateSchema(null))}toDataURL(t,n){return this[ro].displayCanvas(this[Ei]).toDataURL(t,n)}async toBlob(t){const n=t?t.mimeType:void 0,c=t?t.qualityArgument:void 0,h=t?t.idealAspect:void 0,{width:f,height:d,idealAspect:p,aspect:v}=this[Ei],{dpr:w,scaleFactor:S}=this[ro];let B=f*S*w,R=d*S*w,D=0,O=0;if(h===!0)if(p>v){const V=R;R=Math.round(B/p),O=(V-R)/2}else{const V=B;B=Math.round(R*p),D=(V-B)/2}P0.width=B,P0.height=R;try{return new Promise(async(V,$)=>{P0.getContext("2d").drawImage(this[ro].displayCanvas(this[Ei]),D,O,B,R,0,0,B,R),P0.toBlob(G=>{if(!G)return $(new Error("Unable to retrieve canvas blob"));V(G)},n,c)})}finally{this[iC]({width:f,height:d})}}registerEffectComposer(t){t.setRenderer(this[ro].threeRenderer),t.setMainCamera(this[Ei].getCamera()),t.setMainScene(this[Ei]),this[Ei].effectRenderer=t}unregisterEffectComposer(){this[Ei].effectRenderer=null}registerRenderer(t){this[Ei].externalRenderer=t}unregisterRenderer(){this[Ei].externalRenderer=null}get[nC](){return this[HP]}get[HP](){return this.alt==null||this.alt==="null"?this[_V]:this.alt}[yV](){return this[tC]}[e1](){return this.loaded&&this[Jb]}[sC](){return!!this.src&&this[Jb]}[iC]({width:t,height:n}){t!==0&&n!==0&&(this[y5].style.width=`${t}px`,this[y5].style.height=`${n}px`,this[b5]({width:t,height:n}))}[wm](t,n){var c;(c=this[Ei].effectRenderer)===null||c===void 0||c.beforeRender(t,n)}[vV](){this[tC]||(this[tC]=!0,this[NB]=performance.now())}[Ih](){this[Ei].queueRender()}[xm](){}[v5](t){this[OP]=t;const n=this.getRootNode();n!=null&&n.activeElement===this&&this[QB].textContent!=t&&(this[QB].textContent=t)}[(fV=QP,gV=NP,b5)](t){this[Ei].setSize(t.width,t.height)}async[(mV=PP,rC)](){const t=this[Ei];if(this.loaded||!this[sC]()||this.src===t.url)return;this.generateSchema&&t.updateSchema(this.src),this[v5]("Loading"),t.stopAnimation();const n=this[Zb].beginActivity("model-load"),c=this.src;try{const h=t.setSource(c,d=>n(.95*_d(d,0,1))),f=this[w0]();await Promise.all([h,f]),this[vV](),this[xm](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(d=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:c}})),d()})})})}catch(h){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:h}}))}finally{n(1)}}}f5([$t({type:String})],HB.prototype,"alt",void 0),f5([$t({type:String})],HB.prototype,"src",void 0),f5([$t({type:Boolean,attribute:"with-credentials"})],HB.prototype,"withCredentials",void 0),f5([$t({type:Boolean,attribute:"generate-schema"})],HB.prototype,"generateSchema",void 0);var VP=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const w5=Symbol("changeAnimation"),V_=Symbol("paused"),che={repetitions:1/0,pingpong:!1},t1=Symbol("hotspotMap"),qP=Symbol("mutationCallback"),zB=Symbol("observer"),$P=Symbol("addHotspot"),bV=Symbol("removeHotspot"),WP=new nn;var Th=Uint8Array,tf=Uint16Array,jP=Int32Array,KP=new Th([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),XP=new Th([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wV=new Th([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xV=function(o,t){for(var n=new tf(31),c=0;c<31;++c)n[c]=t+=1<<o[c-1];var h=new jP(n[30]);for(c=1;c<30;++c)for(var f=n[c];f<n[c+1];++f)h[f]=f-n[c]<<5|c;return{b:n,r:h}},CV=xV(KP,2),uhe=CV.b,YP=CV.r;uhe[28]=258,YP[258]=28;for(var EV=xV(XP,0).r,SV=new tf(32768),Jo=0;Jo<32768;++Jo){var i1=(43690&Jo)>>1|(21845&Jo)<<1;i1=(61680&(i1=(52428&i1)>>2|(13107&i1)<<2))>>4|(3855&i1)<<4,SV[Jo]=((65280&i1)>>8|(255&i1)<<8)>>1}var GB=function(o,t,n){for(var c=o.length,h=0,f=new tf(t);h<c;++h)o[h]&&++f[o[h]-1];var d,p=new tf(t);for(h=1;h<t;++h)p[h]=p[h-1]+f[h-1]<<1;for(d=new tf(c),h=0;h<c;++h)o[h]&&(d[h]=SV[p[o[h]-1]++]>>15-o[h]);return d},n1=new Th(288);for(Jo=0;Jo<144;++Jo)n1[Jo]=8;for(Jo=144;Jo<256;++Jo)n1[Jo]=9;for(Jo=256;Jo<280;++Jo)n1[Jo]=7;for(Jo=280;Jo<288;++Jo)n1[Jo]=8;var x5=new Th(32);for(Jo=0;Jo<32;++Jo)x5[Jo]=5;var hhe=GB(n1,9),dhe=GB(x5,5),BV=function(o){return(o+7)/8|0},IV=function(o,t,n){return(n==null||n>o.length)&&(n=o.length),new Th(o.subarray(t,n))},Ahe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],C5=function(o,t,n){var c=new Error(t||Ahe[o]);if(c.code=o,Error.captureStackTrace&&Error.captureStackTrace(c,C5),!n)throw c;return c},q_=function(o,t,n){n<<=7&t;var c=t/8|0;o[c]|=n,o[c+1]|=n>>8},VB=function(o,t,n){n<<=7&t;var c=t/8|0;o[c]|=n,o[c+1]|=n>>8,o[c+2]|=n>>16},JP=function(o,t){for(var n=[],c=0;c<o.length;++c)o[c]&&n.push({s:c,f:o[c]});var h=n.length,f=n.slice();if(!h)return{t:DV,l:0};if(h==1){var d=new Th(n[0].s+1);return d[n[0].s]=1,{t:d,l:1}}n.sort(function(oe,Ae){return oe.f-Ae.f}),n.push({s:-1,f:25001});var p=n[0],v=n[1],w=0,S=1,B=2;for(n[0]={s:-1,f:p.f+v.f,l:p,r:v};S!=h-1;)p=n[n[w].f<n[B].f?w++:B++],v=n[w!=S&&n[w].f<n[B].f?w++:B++],n[S++]={s:-1,f:p.f+v.f,l:p,r:v};var R=f[0].s;for(c=1;c<h;++c)f[c].s>R&&(R=f[c].s);var D=new tf(R+1),O=ZP(n[S-1],D,0);if(O>t){c=0;var V=0,$=O-t,G=1<<$;for(f.sort(function(oe,Ae){return D[Ae.s]-D[oe.s]||oe.f-Ae.f});c<h;++c){var X=f[c].s;if(!(D[X]>t))break;V+=G-(1<<O-D[X]),D[X]=t}for(V>>=$;V>0;){var te=f[c].s;D[te]<t?V-=1<<t-D[te]++-1:++c}for(;c>=0&&V;--c){var ae=f[c].s;D[ae]==t&&(--D[ae],++V)}O=t}return{t:new Th(D),l:O}},ZP=function(o,t,n){return o.s==-1?Math.max(ZP(o.l,t,n+1),ZP(o.r,t,n+1)):t[o.s]=n},TV=function(o){for(var t=o.length;t&&!o[--t];);for(var n=new tf(++t),c=0,h=o[0],f=1,d=function(v){n[c++]=v},p=1;p<=t;++p)if(o[p]==h&&p!=t)++f;else{if(!h&&f>2){for(;f>138;f-=138)d(32754);f>2&&(d(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(d(h),--f;f>6;f-=6)d(8304);f>2&&(d(f-3<<5|8208),f=0)}for(;f--;)d(h);f=1,h=o[p]}return{c:n.subarray(0,c),n:t}},qB=function(o,t){for(var n=0,c=0;c<t.length;++c)n+=o[c]*t[c];return n},MV=function(o,t,n){var c=n.length,h=BV(t+2);o[h]=255&c,o[h+1]=c>>8,o[h+2]=255^o[h],o[h+3]=255^o[h+1];for(var f=0;f<c;++f)o[h+f+4]=n[f];return 8*(h+4+c)},RV=function(o,t,n,c,h,f,d,p,v,w,S){q_(t,S++,n),++h[256];for(var B=JP(h,15),R=B.t,D=B.l,O=JP(f,15),V=O.t,$=O.l,G=TV(R),X=G.c,te=G.n,ae=TV(V),oe=ae.c,Ae=ae.n,ve=new tf(19),De=0;De<X.length;++De)++ve[31&X[De]];for(De=0;De<oe.length;++De)++ve[31&oe[De]];for(var Ne=JP(ve,7),We=Ne.t,vt=Ne.l,ot=19;ot>4&&!We[wV[ot-1]];--ot);var nt,st,mt,It,Jt=w+5<<3,jt=qB(h,n1)+qB(f,x5)+d,_i=qB(h,R)+qB(f,V)+d+14+3*ot+qB(ve,We)+2*ve[16]+3*ve[17]+7*ve[18];if(v>=0&&Jt<=jt&&Jt<=_i)return MV(t,S,o.subarray(v,v+w));if(q_(t,S,1+(_i<jt)),S+=2,_i<jt){nt=GB(R,D),st=R,mt=GB(V,$),It=V;var xi=GB(We,vt);for(q_(t,S,te-257),q_(t,S+5,Ae-1),q_(t,S+10,ot-4),S+=14,De=0;De<ot;++De)q_(t,S+3*De,We[wV[De]]);S+=3*ot;for(var Kt=[X,oe],_t=0;_t<2;++_t){var hi=Kt[_t];for(De=0;De<hi.length;++De){var bi=31&hi[De];q_(t,S,xi[bi]),S+=We[bi],bi>15&&(q_(t,S,hi[De]>>5&127),S+=hi[De]>>12)}}}else nt=hhe,st=n1,mt=dhe,It=x5;for(De=0;De<p;++De){var Ge=c[De];if(Ge>255){VB(t,S,nt[257+(bi=Ge>>18&31)]),S+=st[bi+257],bi>7&&(q_(t,S,Ge>>23&31),S+=KP[bi]);var Pe=31&Ge;VB(t,S,mt[Pe]),S+=It[Pe],Pe>3&&(VB(t,S,Ge>>5&8191),S+=XP[Pe])}else VB(t,S,nt[Ge]),S+=st[Ge]}return VB(t,S,nt[256]),S+st[256]},phe=new jP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),DV=new Th(0),fhe=function(){for(var o=new Int32Array(256),t=0;t<256;++t){for(var n=t,c=9;--c;)n=(1&n&&-306674912)^n>>>1;o[t]=n}return o}(),ghe=function(){var o=-1;return{p:function(t){for(var n=o,c=0;c<t.length;++c)n=fhe[255&n^t[c]]^n>>>8;o=n},d:function(){return~o}}},FV=function(o,t){var n={};for(var c in o)n[c]=o[c];for(var c in t)n[c]=t[c];return n},Qu=function(o,t,n){for(;n;++t)o[t]=n,n>>>=8};function mhe(o,t){return function(n,c,h,f,d){if(!d&&(d={l:1},c.dictionary)){var p=c.dictionary.subarray(-32768),v=new Th(p.length+n.length);v.set(p),v.set(n,p.length),n=v,d.w=p.length}return function(w,S,B,R,D,O){var V=O.z||w.length,$=new Th(0+V+5*(1+Math.ceil(V/7e3))+0),G=$.subarray(0,$.length-0),X=O.l,te=7&(O.r||0);if(S){te&&(G[0]=O.r>>3);for(var ae=phe[S-1],oe=ae>>13,Ae=8191&ae,ve=(1<<B)-1,De=O.p||new tf(32768),Ne=O.h||new tf(ve+1),We=Math.ceil(B/3),vt=2*We,ot=function(Tt){return(w[Tt]^w[Tt+1]<<We^w[Tt+2]<<vt)&ve},nt=new jP(25e3),st=new tf(288),mt=new tf(32),It=0,Jt=0,jt=O.i||0,_i=0,xi=O.w||0,Kt=0;jt+2<V;++jt){var _t=ot(jt),hi=32767&jt,bi=Ne[_t];if(De[hi]=bi,Ne[_t]=hi,xi<=jt){var Ge=V-jt;if((It>7e3||_i>24576)&&(Ge>423||!X)){te=RV(w,G,0,nt,st,mt,Jt,_i,Kt,jt-Kt,te),_i=It=Jt=0,Kt=jt;for(var Pe=0;Pe<286;++Pe)st[Pe]=0;for(Pe=0;Pe<30;++Pe)mt[Pe]=0}var ut=2,xt=0,ct=Ae,Mt=hi-bi&32767;if(Ge>2&&_t==ot(jt-Mt))for(var Je=Math.min(oe,Ge)-1,Ut=Math.min(32767,jt),we=Math.min(258,Ge);Mt<=Ut&&--ct&&hi!=bi;){if(w[jt+ut]==w[jt+ut-Mt]){for(var Re=0;Re<we&&w[jt+Re]==w[jt+Re-Mt];++Re);if(Re>ut){if(ut=Re,xt=Mt,Re>Je)break;var Me=Math.min(Mt,Re-2),Z=0;for(Pe=0;Pe<Me;++Pe){var de=jt-Mt+Pe&32767,Te=de-De[de]&32767;Te>Z&&(Z=Te,bi=de)}}}Mt+=(hi=bi)-(bi=De[hi])&32767}if(xt){nt[_i++]=268435456|YP[ut]<<18|EV[xt];var Ve=31&YP[ut],Ze=31&EV[xt];Jt+=KP[Ve]+XP[Ze],++st[257+Ve],++mt[Ze],xi=jt+ut,++It}else nt[_i++]=w[jt],++st[w[jt]]}}for(jt=Math.max(jt,xi);jt<V;++jt)nt[_i++]=w[jt],++st[w[jt]];te=RV(w,G,X,nt,st,mt,Jt,_i,Kt,jt-Kt,te),X||(O.r=7&te|G[te/8|0]<<3,te-=7,O.h=Ne,O.p=De,O.i=jt,O.w=xi)}else{for(jt=O.w||0;jt<V+X;jt+=65535){var qt=jt+65535;qt>=V&&(G[te/8|0]=X,qt=V),te=MV(G,te+1,w.subarray(jt,qt))}O.i=V}return IV($,0,0+BV(te)+0)}(n,c.level==null?6:c.level,c.mem==null?d.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):20:12+c.mem,0,0,d)}(o,t||{})}var UV=function(o,t,n,c){for(var h in o){var f=o[h],d=t+h,p=c;Array.isArray(f)&&(p=FV(c,f[1]),f=f[0]),f instanceof Th?n[d]=[f,p]:(n[d+="/"]=[new Th(0),p],UV(f,d,n,c))}},kV=typeof TextEncoder<"u"&&new TextEncoder,_he=typeof TextDecoder<"u"&&new TextDecoder;try{_he.decode(DV,{stream:!0})}catch{}function E5(o,t){if(kV)return kV.encode(o);for(var n=o.length,c=new Th(o.length+(o.length>>1)),h=0,f=function(w){c[h++]=w},d=0;d<n;++d){if(h+5>c.length){var p=new Th(h+8+(n-d<<1));p.set(c),c=p}var v=o.charCodeAt(d);v<128||t?f(v):v<2048?(f(192|v>>6),f(128|63&v)):v>55295&&v<57344?(f(240|(v=65536+(1047552&v)|1023&o.charCodeAt(++d))>>18),f(128|v>>12&63),f(128|v>>6&63),f(128|63&v)):(f(224|v>>12),f(128|v>>6&63),f(128|63&v))}return IV(c,0,h)}var eO=function(o){var t=0;if(o)for(var n in o){var c=o[n].length;c>65535&&C5(9),t+=c+4}return t},LV=function(o,t,n,c,h,f,d,p){var v=c.length,w=n.extra,S=p&&p.length,B=eO(w);Qu(o,t,d!=null?33639248:67324752),t+=4,d!=null&&(o[t++]=20,o[t++]=n.os),o[t]=20,t+=2,o[t++]=n.flag<<1|(f<0&&8),o[t++]=h&&8,o[t++]=255&n.compression,o[t++]=n.compression>>8;var R=new Date(n.mtime==null?Date.now():n.mtime),D=R.getFullYear()-1980;if((D<0||D>119)&&C5(10),Qu(o,t,D<<25|R.getMonth()+1<<21|R.getDate()<<16|R.getHours()<<11|R.getMinutes()<<5|R.getSeconds()>>1),t+=4,f!=-1&&(Qu(o,t,n.crc),Qu(o,t+4,f<0?-f-2:f),Qu(o,t+8,n.size)),Qu(o,t+12,v),Qu(o,t+14,B),t+=16,d!=null&&(Qu(o,t,S),Qu(o,t+6,n.attrs),Qu(o,t+10,d),t+=14),o.set(c,t),t+=v,B)for(var O in w){var V=w[O],$=V.length;Qu(o,t,+O),Qu(o,t+2,$),o.set(V,t+4),t+=4+$}return S&&(o.set(p,t),t+=S),t};class vhe{parse(t,n,c,h){this.parseAsync(t,h).then(n).catch(c)}async parseAsync(t,n={}){n=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,quickLookCompatible:!1,maxTextureSize:1024},n);const c={},h="model.usda";c[h]=null;let f=`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`;var d;f+=`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{${(d=n).includeAnchoringProperties===!0?`
		token preliminary:anchoring:type = "${d.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${d.ar.planeAnchoring.alignment}"
	`:""}
`;const p={},v={};t.traverseVisible(S=>{if(S.isMesh){const B=S.geometry,R=S.material;if(R.isMeshStandardMaterial){const D="geometries/Geometry_"+B.id+".usda";if(!(D in c)){const O=`
def "Geometry"
{
${function(V){const $=V.attributes,G=$.position.count;return`
	def Mesh "Geometry"
	{
		int[] faceVertexCounts = [${function(X){const te=X.index!==null?X.index.count:X.attributes.position.count;return Array(te/3).fill(3).join(", ")}(V)}]
		int[] faceVertexIndices = [${function(X){const te=X.index,ae=[];if(te!==null)for(let oe=0;oe<te.count;oe++)ae.push(te.getX(oe));else{const oe=X.attributes.position.count;for(let Ae=0;Ae<oe;Ae++)ae.push(Ae)}return ae.join(", ")}(V)}]
		normal3f[] normals = [${tO($.normal,G)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${tO($.position,G)}]
${function(X){let te="";for(let oe=0;oe<4;oe++){const Ae=oe>0?oe:"",ve=X["uv"+Ae];ve!==void 0&&(te+=`
		texCoord2f[] primvars:st${Ae} = [${bhe(ve)}] (
			interpolation = "vertex"
		)`)}const ae=X.color;return ae!==void 0&&(te+=`
	color3f[] primvars:displayColor = [${tO(ae,ae.count)}] (
		interpolation = "vertex"
		)`),te}($)}
		uniform token subdivisionScheme = "none"
	}
`}(B)}
}
`;c[D]=function(V){let $=`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`;return $+=V,E5($)}(O)}R.uuid in p||(p[R.uuid]=R),f+=function(O,V,$){const G="Object_"+O.id,X=PV(O.matrixWorld);return O.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",O),`def Xform "${G}" (
	prepend references = @./geometries/Geometry_${V.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${X}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${$.id}>
}

`}(S,B,R)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",S)}else S.isCamera&&(f+=function(B){const R=B.name?B.name:"Camera_"+B.id,D=PV(B.matrixWorld);return B.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",B),B.isOrthographicCamera?`def Camera "${R}"
		{
			matrix4d xformOp:transform = ${D}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${B.near.toPrecision(Mh)}, ${B.far.toPrecision(Mh)})
			float horizontalAperture = ${(10*(Math.abs(B.left)+Math.abs(B.right))).toPrecision(Mh)}
			float verticalAperture = ${(10*(Math.abs(B.top)+Math.abs(B.bottom))).toPrecision(Mh)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${R}"
		{
			matrix4d xformOp:transform = ${D}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${B.near.toPrecision(Mh)}, ${B.far.toPrecision(Mh)})
			float focalLength = ${B.getFocalLength().toPrecision(Mh)}
			float focusDistance = ${B.focus.toPrecision(Mh)}
			float horizontalAperture = ${B.getFilmWidth().toPrecision(Mh)}
			token projection = "perspective"
			float verticalAperture = ${B.getFilmHeight().toPrecision(Mh)}
		}
	
	`}(S))}),f+=`
		}
	}
}

`,f+=function(S,B,R=!1){const D=[];for(const O in S){const V=S[O];D.push(whe(V,B,R))}return`def "Materials"
{
${D.join("")}
}

`}(p,v,n.quickLookCompatible),c[h]=E5(f),f=null;for(const S in v){let B=v[S];B.isCompressedTexture===!0&&(B=yr(B));const R=yhe(B.image,B.flipY,n.maxTextureSize),D=await new Promise(O=>R.toBlob(O,"image/png",1));c[`textures/Texture_${S}.png`]=new Uint8Array(await D.arrayBuffer())}let w=0;for(const S in c){const B=c[S];w+=34+S.length;const R=63&w;if(R!==4){const D=new Uint8Array(64-R);c[S]=[B,{extra:{12345:D}}]}w=B.length}return function(S,B){B||(B={});var R={},D=[];UV(S,"",R,B);var O,V,$,G,X,te=0,ae=0;for(var oe in R){var Ae=R[oe],ve=Ae[0],De=Ae[1],Ne=De.level==0?0:8,We=(_t=E5(oe)).length,vt=De.comment,ot=vt&&E5(vt),nt=ot&&ot.length,st=eO(De.extra);We>65535&&C5(11);var mt=Ne?mhe(ve,De):ve,It=mt.length,Jt=ghe();Jt.p(ve),D.push(FV(De,{size:ve.length,crc:Jt.d(),c:mt,f:_t,m:ot,u:We!=oe.length||ot&&vt.length!=nt,o:te,compression:Ne})),te+=30+We+st+It,ae+=76+2*(We+st)+(nt||0)+It}for(var jt=new Th(ae+22),_i=te,xi=ae-te,Kt=0;Kt<D.length;++Kt){var _t=D[Kt];LV(jt,_t.o,_t,_t.f,_t.u,_t.c.length);var hi=30+_t.f.length+eO(_t.extra);jt.set(_t.c,_t.o+hi),LV(jt,te,_t,_t.f,_t.u,_t.c.length,_t.o,_t.m),te+=16+hi+(_t.m?_t.m.length:0)}return O=jt,V=te,$=D.length,G=xi,X=_i,Qu(O,V,101010256),Qu(O,V+8,$),Qu(O,V+10,$),Qu(O,V+12,G),Qu(O,V+16,X),jt}(c,{level:0})}}function yhe(o,t,n){if(typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&o instanceof ImageBitmap){const c=n/Math.max(o.width,o.height),h=document.createElement("canvas");h.width=o.width*Math.min(1,c),h.height=o.height*Math.min(1,c);const f=h.getContext("2d");return t===!0&&(f.translate(0,h.height),f.scale(1,-1)),f.drawImage(o,0,0,h.width,h.height),h}throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const Mh=7;function PV(o){const t=o.elements;return`( ${S5(t,0)}, ${S5(t,4)}, ${S5(t,8)}, ${S5(t,12)} )`}function S5(o,t){return`(${o[t+0]}, ${o[t+1]}, ${o[t+2]}, ${o[t+3]})`}function tO(o,t){if(o===void 0)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");const n=[];for(let c=0;c<o.count;c++){const h=o.getX(c),f=o.getY(c),d=o.getZ(c);n.push(`(${h.toPrecision(Mh)}, ${f.toPrecision(Mh)}, ${d.toPrecision(Mh)})`)}return n.join(", ")}function bhe(o){const t=[];for(let n=0;n<o.count;n++){const c=o.getX(n),h=o.getY(n);t.push(`(${c.toPrecision(Mh)}, ${1-h.toPrecision(Mh)})`)}return t.join(", ")}function whe(o,t,n=!1){const c="			",h=[],f=[];function d(p,v,w){const S=p.source.id+"_"+p.flipY;t[S]=p;const B=p.channel>0?"st"+p.channel:"st",R={1e3:"repeat",1001:"clamp",1002:"mirror"},D=p.repeat.clone(),O=p.offset.clone(),V=p.rotation,$=Math.sin(V),G=Math.cos(V);return O.y=1-O.y-D.y,n?(O.x=O.x/D.x,O.y=O.y/D.y,O.x+=$/D.x,O.y+=G-1):(O.x+=$*D.x,O.y+=(1-G)*D.y),`
		def Shader "PrimvarReader_${v}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${B}"
			float2 outputs:result
		}

		def Shader "Transform2d_${v}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${o.id}/PrimvarReader_${v}.outputs:result>
			float inputs:rotation = ${(V*(180/Math.PI)).toFixed(Mh)}
			float2 inputs:scale = ${QV(D)}
			float2 inputs:translation = ${QV(O)}
			float2 outputs:result
		}

		def Shader "Texture_${p.id}_${v}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${S}.png@
			float2 inputs:st.connect = </Materials/Material_${o.id}/Transform2d_${v}.outputs:result>
			${w!==void 0?"float4 inputs:scale = "+(X=w,`(${X.r}, ${X.g}, ${X.b}, 1.0)`):""}
			token inputs:sourceColorSpace = "${p.colorSpace===fc?"raw":"sRGB"}"
			token inputs:wrapS = "${R[p.wrapS]}"
			token inputs:wrapT = "${R[p.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${o.transparent||o.alphaTest>0?"float outputs:a":""}
		}`;var X}return o.side===2&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",o),o.map!==null?(h.push(`${c}color3f inputs:diffuseColor.connect = </Materials/Material_${o.id}/Texture_${o.map.id}_diffuse.outputs:rgb>`),o.transparent?h.push(`${c}float inputs:opacity.connect = </Materials/Material_${o.id}/Texture_${o.map.id}_diffuse.outputs:a>`):o.alphaTest>0&&(h.push(`${c}float inputs:opacity.connect = </Materials/Material_${o.id}/Texture_${o.map.id}_diffuse.outputs:a>`),h.push(`${c}float inputs:opacityThreshold = ${o.alphaTest}`)),f.push(d(o.map,"diffuse",o.color))):h.push(`${c}color3f inputs:diffuseColor = ${OV(o.color)}`),o.emissiveMap!==null?(h.push(`${c}color3f inputs:emissiveColor.connect = </Materials/Material_${o.id}/Texture_${o.emissiveMap.id}_emissive.outputs:rgb>`),f.push(d(o.emissiveMap,"emissive",new an(o.emissive.r*o.emissiveIntensity,o.emissive.g*o.emissiveIntensity,o.emissive.b*o.emissiveIntensity)))):o.emissive.getHex()>0&&h.push(`${c}color3f inputs:emissiveColor = ${OV(o.emissive)}`),o.normalMap!==null&&(h.push(`${c}normal3f inputs:normal.connect = </Materials/Material_${o.id}/Texture_${o.normalMap.id}_normal.outputs:rgb>`),f.push(d(o.normalMap,"normal"))),o.aoMap!==null&&(h.push(`${c}float inputs:occlusion.connect = </Materials/Material_${o.id}/Texture_${o.aoMap.id}_occlusion.outputs:r>`),f.push(d(o.aoMap,"occlusion",new an(o.aoMapIntensity,o.aoMapIntensity,o.aoMapIntensity)))),o.roughnessMap!==null?(h.push(`${c}float inputs:roughness.connect = </Materials/Material_${o.id}/Texture_${o.roughnessMap.id}_roughness.outputs:g>`),f.push(d(o.roughnessMap,"roughness",new an(o.roughness,o.roughness,o.roughness)))):h.push(`${c}float inputs:roughness = ${o.roughness}`),o.metalnessMap!==null?(h.push(`${c}float inputs:metallic.connect = </Materials/Material_${o.id}/Texture_${o.metalnessMap.id}_metallic.outputs:b>`),f.push(d(o.metalnessMap,"metallic",new an(o.metalness,o.metalness,o.metalness)))):h.push(`${c}float inputs:metallic = ${o.metalness}`),o.alphaMap!==null?(h.push(`${c}float inputs:opacity.connect = </Materials/Material_${o.id}/Texture_${o.alphaMap.id}_opacity.outputs:r>`),h.push(`${c}float inputs:opacityThreshold = 0.0001`),f.push(d(o.alphaMap,"opacity"))):h.push(`${c}float inputs:opacity = ${o.opacity}`),o.isMeshPhysicalMaterial&&(o.clearcoatMap!==null?(h.push(`${c}float inputs:clearcoat.connect = </Materials/Material_${o.id}/Texture_${o.clearcoatMap.id}_clearcoat.outputs:r>`),f.push(d(o.clearcoatMap,"clearcoat",new an(o.clearcoat,o.clearcoat,o.clearcoat)))):h.push(`${c}float inputs:clearcoat = ${o.clearcoat}`),o.clearcoatRoughnessMap!==null?(h.push(`${c}float inputs:clearcoatRoughness.connect = </Materials/Material_${o.id}/Texture_${o.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`),f.push(d(o.clearcoatRoughnessMap,"clearcoatRoughness",new an(o.clearcoatRoughness,o.clearcoatRoughness,o.clearcoatRoughness)))):h.push(`${c}float inputs:clearcoatRoughness = ${o.clearcoatRoughness}`),h.push(`${c}float inputs:ior = ${o.ior}`)),`
	def Material "Material_${o.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${h.join(`
`)}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${o.id}/PreviewSurface.outputs:surface>

${f.join(`
`)}

	}
`}function OV(o){return`(${o.r}, ${o.g}, ${o.b})`}function QV(o){return`(${o.x}, ${o.y})`}var oC=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let NV=!1,HV=!1;const zV="#model-viewer-no-ar-fallback",xhe=(GV=["quick-look","scene-viewer","webxr","none"],o=>{try{const t=Q_(o),n=(t.length?t[0].terms:[]).filter(c=>c&&c.type==="ident").map(c=>c.value).filter(c=>GV.indexOf(c)>-1);return new Set(n)}catch{}return new Set});var GV;const iO="quick-look",VV="scene-viewer",qV="webxr",$B="none",$_=Symbol("arButtonContainer"),$V=Symbol("enterARWithWebXR"),WV=Symbol("openSceneViewer"),jV=Symbol("openIOSARQuickLook"),Che=Symbol("canActivateAR"),B5=Symbol("arMode"),nO=Symbol("arModes"),aC=Symbol("arAnchor"),I5=Symbol("preload"),T5=Symbol("onARButtonContainerClick"),rO=Symbol("onARStatus"),sO=Symbol("onARTracking"),oO=Symbol("onARTap"),WB=Symbol("selectARMode"),aO=Symbol("triggerLoad");var lO=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const cO="auto",lC=Symbol("defaultProgressBarElement"),uO=Symbol("posterContainerElement"),cC=Symbol("defaultPosterElement"),jB=Symbol("shouldDismissPoster"),hO=Symbol("hidePoster"),M5=Symbol("modelIsRevealed"),dO=Symbol("updateProgressBar"),Ehe=Symbol("ariaLabelCallToAction"),AO=Symbol("onProgress");var pO=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const She=Math.PI/32,Bhe={basis:[jM(Sh(She,"rad"))],keywords:{auto:[null]}},uC=Symbol("autoRotateStartTime"),fO=Symbol("radiansPerSecond"),KV=Symbol("syncRotationRate"),gO=Symbol("onCameraChange"),XV=(o=>{var t,n,c;class h extends o{constructor(){super(...arguments),this[t]=new Map,this[n]=d=>{d.forEach(p=>{p instanceof MutationRecord&&p.type!=="childList"||(p.addedNodes.forEach(v=>{this[$P](v)}),p.removedNodes.forEach(v=>{this[bV](v)}),this[Ih]())})},this[c]=new MutationObserver(this[qP])}connectedCallback(){super.connectedCallback();for(let p=0;p<this.children.length;++p)this[$P](this.children[p]);const{ShadyDOM:d}=self;d==null?this[zB].observe(this,{childList:!0}):this[zB]=d.observeChildren(this,this[qP])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:d}=self;d==null?this[zB].disconnect():d.unobserveChildren(this[zB])}[(t=t1,n=qP,c=zB,xm)](){super[xm]();const d=this[Ei];d.forHotspots(p=>{d.updateSurfaceHotspot(p)})}[wm](d,p){super[wm](d,p);const v=this[Ei],{annotationRenderer:w}=v,S=v.getCamera();v.shouldRender()&&(v.animateSurfaceHotspots(),v.updateHotspotsVisibility(S.position),w.domElement.style.display="",w.render(v,S))}updateHotspot(d){const p=this[t1].get(d.name);p!=null&&(p.updatePosition(d.position),p.updateNormal(d.normal),p.surface=d.surface,this[Ei].updateSurfaceHotspot(p),this[Ih]())}queryHotspot(d){const p=this[t1].get(d);if(p==null)return null;const v=G_(p.position),w=G_(p.normal),S=p.facingCamera,B=this[Ei],R=B.getCamera(),D=new Ke;D.setFromMatrixPosition(p.matrixWorld),D.project(R);const O=B.width/2,V=B.height/2;D.x=D.x*O+O,D.y=-D.y*V+V;const $=G_(new Ke(D.x,D.y,D.z));return Number.isFinite($.x)&&Number.isFinite($.y)?{position:v,normal:w,canvasPosition:$,facingCamera:S}:null}positionAndNormalFromPoint(d,p){const v=this[Ei],w=v.getNDC(d,p),S=v.positionAndNormalFromPoint(w);if(S==null)return null;WP.copy(v.target.matrixWorld).invert();const B=G_(S.position.applyMatrix4(WP)),R=G_(S.normal.transformDirection(WP));let D=null;return S.uv!=null&&(D=GP(S.uv)),{position:B,normal:R,uv:D}}surfaceFromPoint(d,p){const v=this[Ei],w=v.getNDC(d,p);return v.surfaceFromPoint(w)}[$P](d){if(!(d instanceof HTMLElement&&d.slot.indexOf("hotspot")===0))return;let p=this[t1].get(d.slot);p!=null?p.increment():(p=new tV({name:d.slot,position:d.dataset.position,normal:d.dataset.normal,surface:d.dataset.surface}),this[t1].set(d.slot,p),this[Ei].addHotspot(p)),this[Ei].queueRender()}[bV](d){if(!(d instanceof HTMLElement))return;const p=this[t1].get(d.slot);p&&(p.decrement()&&(this[Ei].removeHotspot(p),this[t1].delete(d.slot)),this[Ei].queueRender())}}return h})((o=>{var t,n,c;class h extends o{constructor(){super(...arguments),this[t]=void 0,this[n]=null,this[c]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[Yb]}get availableVariants(){return this.model?this.model[TP]():[]}get originalGltfJson(){return this[h5]}[(t=Yb,n=u5,c=h5,DP)](){return()=>{this[Ih]()}}[PB](d){return d.colorSpace=Ns,d.wrapS=Vt,d.wrapT=Vt,new CG(this[DP](),d)}async createTexture(d,p="image/png"){const{textureUtils:v}=this[ro],w=await v.loadImage(d,this.withCredentials);return w.userData.mimeType=p,this[PB](w)}async createLottieTexture(d,p=1){const{textureUtils:v}=this[ro],w=await v.loadLottie(d,p,this.withCredentials);return this[PB](w)}createVideoTexture(d){const p=document.createElement("video");p.crossOrigin=this.withCredentials?"use-credentials":"anonymous",p.src=d,p.muted=!0,p.playsInline=!0,p.loop=!0,p.play();const v=new hA(p);return this[PB](v)}createCanvasTexture(){const d=document.createElement("canvas"),p=new jp(d);return this[PB](p)}async updated(d){if(super.updated(d),d.has("variantName")){const p=this[Zb].beginActivity("variant-update");p(.1);const v=this[Yb],{variantName:w}=this;v!=null&&(await v[KG](w),this[Ih](),this.dispatchEvent(new CustomEvent("variant-applied"))),p(1)}if(d.has("orientation")||d.has("scale")){if(!this.loaded)return;const p=this[Ei];p.applyTransform(),p.updateBoundingBox(),p.updateShadow(),this[ro].arRenderer.onUpdateScene(),this[Ih]()}}[xm](){super[xm]();const{currentGLTF:d}=this[Ei];if(d!=null){const{correlatedSceneGraph:p}=d;p!=null&&d!==this[u5]&&(this[Yb]=new the(p,this[DP]()),this[h5]=JSON.parse(JSON.stringify(p.gltf))),"variants"in d.userData&&this.requestUpdate("variantName")}this[u5]=d}async exportScene(d){const p=this[Ei];return new Promise(async(v,w)=>{const S={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(S,d),S.animations=p.animations,S.truncateDrawRange=!0;const B=p.shadow;let R=!1;B!=null&&(R=B.visible,B.visible=!1),await this[Yb][jG](),new kn().register(D=>new nue(D)).parse(p.model,D=>v(new Blob([S.binary?D:JSON.stringify(D)],{type:S.binary?"application/octet-stream":"application/json"})),()=>w("glTF export failed"),S),B!=null&&(B.visible=R)})}materialFromPoint(d,p){const v=this[Yb];if(v==null)return null;const w=this[Ei],S=w.getNDC(d,p),B=w.hitFromPoint(S);return B==null||B.face==null?null:v[XG](B)}}return RP([$t({type:String,attribute:"variant-name"})],h.prototype,"variantName",void 0),RP([$t({type:String,attribute:"orientation"})],h.prototype,"orientation",void 0),RP([$t({type:String,attribute:"scale"})],h.prototype,"scale",void 0),h})((o=>{var t,n,c;class h extends o{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[t]=performance.now(),this[n]=0,this[c]=d=>{this.autoRotate&&d.detail.source==="user-interaction"&&(this[uC]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[gO]),this[uC]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[gO]),this[uC]=performance.now()}updated(d){super.updated(d),d.has("autoRotate")&&(this[uC]=performance.now())}[(t=uC,n=fO,KV)](d){this[fO]=d[0]}[wm](d,p){if(super[wm](d,p),!this.autoRotate||!this[e1]()||this[ro].isPresenting)return;const v=Math.min(p,d-this[uC]-this.autoRotateDelay);v>0&&(this[Ei].yaw=this.turntableRotation+this[fO]*v*.001)}get turntableRotation(){return this[Ei].yaw}resetTurntableRotation(d=0){this[Ei].yaw=d}}return c=gO,pO([$t({type:Boolean,attribute:"auto-rotate"})],h.prototype,"autoRotate",void 0),pO([$t({type:Number,attribute:"auto-rotate-delay"})],h.prototype,"autoRotateDelay",void 0),pO([F0({intrinsics:Bhe,updateHandler:KV}),$t({type:String,attribute:"rotation-per-second"})],h.prototype,"rotationPerSecond",void 0),h})((o=>{var t,n,c;class h extends o{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this.toneMapping="auto",this.skyboxHeight="0",this[t]=null,this[n]=null,this[c]=null}updated(d){super.updated(d),d.has("shadowIntensity")&&(this[Ei].setShadowIntensity(.5*this.shadowIntensity),this[Ih]()),d.has("shadowSoftness")&&(this[Ei].setShadowSoftness(this.shadowSoftness),this[Ih]()),d.has("exposure")&&(this[Ei].exposure=this.exposure,this[Ih]()),d.has("toneMapping")&&(this[Ei].toneMapping=this.toneMapping==="aces"?4:this.toneMapping==="agx"?6:7,this[Ih]()),(d.has("environmentImage")||d.has("skyboxImage"))&&this[sC]()&&this[w0](),d.has("skyboxHeight")&&(this[Ei].setGroundedSkybox(),this[Ih]())}hasBakedShadow(){return this[Ei].bakedShadows.size>0}async[(t=Ha,n=Bx,c=x0,w0)](){const{skyboxImage:d,environmentImage:p}=this;this[x0]!=null&&(this[x0](),this[x0]=null);const{textureUtils:v}=this[ro];if(v==null)return;const w=this[Zb].beginActivity("environment-update");try{const{environmentMap:S,skybox:B}=await v.generateEnvironmentMapAndSkybox(CM(d),p,R=>w(_d(R,0,1)),this.withCredentials);this[Ha]!==S&&(this[Ha]=S,this.dispatchEvent(new CustomEvent("environment-change"))),this[Bx]=B!=null?B.name===S.name?S:B:null,this[Ei].setEnvironmentAndSkybox(this[Ha],this[Bx])}catch(S){if(S instanceof Error)throw this[Ei].setEnvironmentAndSkybox(null,null),S}finally{w(1)}}}return ng([$t({type:String,attribute:"environment-image"})],h.prototype,"environmentImage",void 0),ng([$t({type:String,attribute:"skybox-image"})],h.prototype,"skyboxImage",void 0),ng([$t({type:Number,attribute:"shadow-intensity"})],h.prototype,"shadowIntensity",void 0),ng([$t({type:Number,attribute:"shadow-softness"})],h.prototype,"shadowSoftness",void 0),ng([$t({type:Number})],h.prototype,"exposure",void 0),ng([$t({type:String,attribute:"tone-mapping"})],h.prototype,"toneMapping",void 0),ng([$t({type:String,attribute:"skybox-height"})],h.prototype,"skyboxHeight",void 0),h})((o=>{var t,n,c,h,f,d,p,v,w,S,B,R,D,O,V,$,G,X;class te extends o{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=D9,this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPrompt=YM,this.interactionPromptStyle=F9,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction="none",this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=50,this.a11y=null,this[t]=this.shadowRoot.querySelector(".interaction-prompt"),this[n]=this.shadowRoot.querySelector("#prompt"),this[c]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[h]=this.shadowRoot.querySelector(".pan-target"),this[f]=0,this[d]=1/0,this[p]=!1,this[v]=!1,this[w]=Wb,this[S]=new Tue(this[Ei].camera,this[bd],this[Ei]),this[B]=new y0,this[R]=!1,this[D]=!1,this[O]=!1,this[V]={},this[$]=()=>{const oe=this[$s].changeSource;this[i5]=oe,oe===ag&&(this[t5]=!0,this[e5]())},this[G]=()=>{this[P9](),this[Ih]();const oe=this[$s].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:oe}}))},this[X]=oe=>{this[y5].classList.toggle("pointer-tumbling",oe.type==="pointer-change-start")}}get inputSensitivity(){return this[$s].inputSensitivity}set inputSensitivity(oe){this[$s].inputSensitivity=oe}getCameraOrbit(){const{theta:oe,phi:Ae,radius:ve}=this[fP];return{theta:oe,phi:Ae,radius:ve,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return G_(this[ro].isPresenting?this[ro].arRenderer.target:this[Ei].getDynamicTarget())}getFieldOfView(){return this[$s].getFieldOfView()}getMinimumFieldOfView(){return this[$s].options.minimumFieldOfView}getMaximumFieldOfView(){return this[$s].options.maximumFieldOfView}getIdealAspect(){return this[Ei].idealAspect}jumpCameraToGoal(){this[BB]=!0,this.requestUpdate(BB,!1)}resetInteractionPrompt(){this[SB]=0,this[qx]=1/0,this[t5]=!1,this[$b]=this.interactionPrompt===YM&&this.cameraControls}zoom(oe){const Ae=new WheelEvent("wheel",{deltaY:-30*oe});this[bd].dispatchEvent(Ae)}connectedCallback(){super.connectedCallback(),this[$s].addEventListener("user-interaction",this[Vx]),this[$s].addEventListener("pointer-change-start",this[EB]),this[$s].addEventListener("pointer-change-end",this[EB])}disconnectedCallback(){super.disconnectedCallback(),this[$s].removeEventListener("user-interaction",this[Vx]),this[$s].removeEventListener("pointer-change-start",this[EB]),this[$s].removeEventListener("pointer-change-end",this[EB])}updated(oe){super.updated(oe);const Ae=this[$s],ve=this[Ei];if(oe.has("cameraControls")&&(this.cameraControls?(Ae.enableInteraction(),this.interactionPrompt===YM&&(this[$b]=!0)):(Ae.disableInteraction(),this[e5]()),this[bd].setAttribute("aria-label",this[nC])),oe.has("disableZoom")&&(Ae.disableZoom=this.disableZoom),oe.has("disablePan")&&(Ae.enablePan=!this.disablePan),oe.has("disableTap")&&(Ae.enableTap=!this.disableTap),(oe.has("interactionPrompt")||oe.has("cameraControls")||oe.has("src"))&&(this.interactionPrompt===YM&&this.cameraControls&&!this[t5]?this[$b]=!0:this[e5]()),oe.has("interactionPromptStyle")&&(this[ZM].style.opacity=this.interactionPromptStyle=="basic"?"1":"0"),oe.has("touchAction")){const De=this.touchAction;Ae.applyOptions({touchAction:De}),Ae.updateTouchActionStyle()}oe.has("orbitSensitivity")&&(Ae.orbitSensitivity=this.orbitSensitivity),oe.has("zoomSensitivity")&&(Ae.zoomSensitivity=this.zoomSensitivity),oe.has("panSensitivity")&&(Ae.panSensitivity=this.panSensitivity),oe.has("interpolationDecay")&&(Ae.setDamperDecayTime(this.interpolationDecay),ve.setTargetDamperDecayTime(this.interpolationDecay)),oe.has("a11y")&&this[O9](),this[BB]===!0&&Promise.resolve().then(()=>{Ae.jumpToGoal(),ve.jumpToGoal(),this[pP](),this[BB]=!1})}async updateFraming(){const oe=this[Ei],Ae=oe.adjustedFoV(oe.framedFoVDeg);await oe.updateFraming();const ve=oe.adjustedFoV(oe.framedFoVDeg),De=this[$s].getFieldOfView()/Ae;this[$s].setFieldOfView(ve*De),this[IB]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(oe,Ae,ve){const De=this[bd],Ne=this[AP];if(Ne[0].style.opacity==="1")return void console.warn("interact() failed because an existing interaction is running.");const We=new Array;We.push({x:Gx(Ae.x),y:Gx(Ae.y)});const vt=[{x:We[0].x(0),y:We[0].y(0)}];ve!=null&&(We.push({x:Gx(ve.x),y:Gx(ve.y)}),vt.push({x:We[1].x(0),y:We[1].y(0)}));let ot=performance.now();const{width:nt,height:st}=this[Ei],mt=this.getBoundingClientRect(),It=_i=>{for(const[xi,Kt]of vt.entries()){const{style:_t}=Ne[xi];_t.transform=`translateX(${nt*Kt.x}px) translateY(${st*Kt.y}px)`,_i==="pointerdown"?_t.opacity="1":_i==="pointerup"&&(_t.opacity="0");const hi={pointerId:xi-5678,pointerType:"touch",target:De,clientX:nt*Kt.x+mt.x,clientY:st*Kt.y+mt.y,altKey:!0};De.dispatchEvent(new PointerEvent(_i,hi))}},Jt=()=>{const _i=this[i5];if(_i!==Wb||!De.isConnected){for(const Kt of this[AP])Kt.style.opacity="0";return It("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:_i}})),void document.removeEventListener("visibilitychange",jt)}const xi=Math.min(1,(performance.now()-ot)/oe);for(const[Kt,_t]of vt.entries())_t.x=We[Kt].x(xi),_t.y=We[Kt].y(xi);It("pointermove"),xi<1?requestAnimationFrame(Jt):(It("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Wb}})),document.removeEventListener("visibilitychange",jt))},jt=()=>{let _i=0;document.visibilityState==="hidden"?_i=performance.now()-ot:ot=performance.now()-_i};document.addEventListener("visibilitychange",jt),It("pointerdown"),this[i5]=Wb,requestAnimationFrame(Jt)}[(t=dP,n=ZM,c=AP,h=JM,f=SB,d=qx,p=t5,v=$b,w=i5,S=$s,B=fP,R=BB,D=gP,O=IB,V=N_,H9)](oe){const Ae=this[$s],ve=this[Ei];ve.framedFoVDeg=180*oe[0]/Math.PI,Ae.changeSource=$x,Ae.setFieldOfView(ve.adjustedFoV(ve.framedFoVDeg)),this[Vx]()}[N9](oe){const Ae=this[$s];if(this[IB]){const{theta:ve,phi:De}=this.getCameraOrbit();oe[0]=ve,oe[1]=De,this[IB]=!1}Ae.changeSource=$x,Ae.setOrbit(oe[0],oe[1],oe[2]),this[Vx]()}[G9](oe){this[$s].applyOptions({minimumAzimuthalAngle:oe[0],minimumPolarAngle:oe[1],minimumRadius:oe[2]}),this.jumpCameraToGoal()}[V9](oe){this[$s].applyOptions({maximumAzimuthalAngle:oe[0],maximumPolarAngle:oe[1],maximumRadius:oe[2]}),this[Q9](oe[2]),this.jumpCameraToGoal()}[q9](oe){this[$s].applyOptions({minimumFieldOfView:180*oe[0]/Math.PI}),this.jumpCameraToGoal()}[$9](oe){const Ae=this[Ei].adjustedFoV(180*oe[0]/Math.PI);this[$s].applyOptions({maximumFieldOfView:Ae}),this.jumpCameraToGoal()}[z9](oe){const[Ae,ve,De]=oe;this[ro].arRenderer.isPresenting||this[Ei].setTarget(Ae,ve,De),this[$s].changeSource=$x,this[ro].arRenderer.updateTarget(),this[Vx]()}[wm](oe,Ae){if(super[wm](oe,Ae),this[ro].isPresenting||!this[e1]())return;const ve=this[$s],De=this[Ei],Ne=performance.now();if(this[$b]&&this.loaded&&Ne>this[NB]+this.interactionPromptThreshold&&(this[$b]=!1,this[qx]=Ne,this[dP].classList.add("visible")),isFinite(this[qx])&&this.interactionPromptStyle===F9){const ot=(Ne-this[qx])/5e3%1,nt=mue(ot),st=_ue(ot);if(this[ZM].style.opacity=`${st}`,nt!==this[SB]){const mt=nt*De.width*.05,It=(nt-this[SB])*Math.PI/16;this[ZM].style.transform=`translateX(${mt}px)`,ve.changeSource=Wb,ve.adjustOrbit(It,0,0),this[SB]=nt}}const We=ve.update(oe,Ae),vt=De.updateTarget(Ae);(We||vt)&&this[pP]()}[e5](){this[$b]=!1,this[dP].classList.remove("visible"),this[qx]=1/0}[Q9](oe){const Ae=Math.max(this[Ei].farRadius(),oe),ve=Math.abs(2*Ae);this[$s].updateNearFar(0,ve)}[P9](){const{theta:oe,phi:Ae}=this[$s].getCameraSpherical(this[fP]),ve=(4+Math.floor((oe%Bue+Sue)/L9))%4,De=Math.floor(Ae/Eue),Ne=`${yue[De]}${vue[ve]}`,We=Ne;We in this[N_]?this[v5](this[N_][We]):this[v5](`View from stage ${Ne}`)}get[nC](){let oe=". Use mouse, touch or arrow keys to move.";return"interaction-prompt"in this[N_]&&(oe=`. ${this[N_]["interaction-prompt"]}`),super[nC].replace(/\.$/,"")+(this.cameraControls?oe:"")}async[b5](oe){const Ae=this[$s],ve=this[Ei],De=ve.adjustedFoV(ve.framedFoVDeg);super[b5](oe);const Ne=ve.adjustedFoV(ve.framedFoVDeg)/De,We=Ae.getFieldOfView()*(isFinite(Ne)?Ne:1);Ae.updateAspect(this[Ei].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[$s].setFieldOfView(We),this.jumpCameraToGoal()}[xm](){super[xm](),this[gP]?this[IB]=!0:this[gP]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[($=Vx,G=pP,X=EB,O9)](){if(typeof this.a11y=="string")if(this.a11y.startsWith("{"))try{this[N_]=JSON.parse(this.a11y)}catch(oe){console.warn("Error parsing a11y JSON:",oe)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[N_]={};else typeof this.a11y=="object"&&this.a11y!=null?this[N_]=Object.assign({},this.a11y):this[N_]={};this[bd].setAttribute("aria-label",this[nC])}}return tc([$t({type:Boolean,attribute:"camera-controls"})],te.prototype,"cameraControls",void 0),tc([F0({intrinsics:k9,observeEffects:!0,updateHandler:N9}),$t({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],te.prototype,"cameraOrbit",void 0),tc([F0({intrinsics:Cue,observeEffects:!0,updateHandler:z9}),$t({type:String,attribute:"camera-target",hasChanged:()=>!0})],te.prototype,"cameraTarget",void 0),tc([F0({intrinsics:U9,observeEffects:!0,updateHandler:H9}),$t({type:String,attribute:"field-of-view",hasChanged:()=>!0})],te.prototype,"fieldOfView",void 0),tc([F0({intrinsics:wue,updateHandler:G9}),$t({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],te.prototype,"minCameraOrbit",void 0),tc([F0({intrinsics:xue,updateHandler:V9}),$t({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],te.prototype,"maxCameraOrbit",void 0),tc([F0({intrinsics:bue,updateHandler:q9}),$t({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],te.prototype,"minFieldOfView",void 0),tc([F0({intrinsics:U9,updateHandler:$9}),$t({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],te.prototype,"maxFieldOfView",void 0),tc([$t({type:Number,attribute:"interaction-prompt-threshold"})],te.prototype,"interactionPromptThreshold",void 0),tc([$t({type:String,attribute:"interaction-prompt"})],te.prototype,"interactionPrompt",void 0),tc([$t({type:String,attribute:"interaction-prompt-style"})],te.prototype,"interactionPromptStyle",void 0),tc([$t({type:Number,attribute:"orbit-sensitivity"})],te.prototype,"orbitSensitivity",void 0),tc([$t({type:Number,attribute:"zoom-sensitivity"})],te.prototype,"zoomSensitivity",void 0),tc([$t({type:Number,attribute:"pan-sensitivity"})],te.prototype,"panSensitivity",void 0),tc([$t({type:String,attribute:"touch-action"})],te.prototype,"touchAction",void 0),tc([$t({type:Boolean,attribute:"disable-zoom"})],te.prototype,"disableZoom",void 0),tc([$t({type:Boolean,attribute:"disable-pan"})],te.prototype,"disablePan",void 0),tc([$t({type:Boolean,attribute:"disable-tap"})],te.prototype,"disableTap",void 0),tc([$t({type:Number,attribute:"interpolation-decay"})],te.prototype,"interpolationDecay",void 0),tc([$t()],te.prototype,"a11y",void 0),te})((o=>{var t,n,c,h,f,d,p,v,w,S;class B extends o{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer quick-look",this.iosSrc=null,this.xrEnvironment=!1,this[t]=!1,this[n]=this.shadowRoot.querySelector(".ar-button"),this[c]=document.createElement("a"),this[h]=new Set,this[f]=$B,this[d]=!1,this[p]=D=>{D.preventDefault(),this.activateAR()},this[v]=({status:D})=>{D!==r5&&this[ro].arRenderer.presentedScene!==this[Ei]||(this.setAttribute("ar-status",D),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:D}})),D===r5?this.removeAttribute("ar-tracking"):D===K9&&this.setAttribute("ar-tracking",X9))},this[w]=({status:D})=>{this.setAttribute("ar-tracking",D),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:D}}))},this[S]=D=>{D.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[B5]!==$B}connectedCallback(){super.connectedCallback(),this[ro].arRenderer.addEventListener("status",this[rO]),this.setAttribute("ar-status",r5),this[ro].arRenderer.addEventListener("tracking",this[sO]),this[aC].addEventListener("message",this[oO])}disconnectedCallback(){super.disconnectedCallback(),this[ro].arRenderer.removeEventListener("status",this[rO]),this[ro].arRenderer.removeEventListener("tracking",this[sO]),this[aC].removeEventListener("message",this[oO])}update(D){super.update(D),D.has("arScale")&&(this[Ei].canScale=this.arScale!=="fixed"),D.has("arPlacement")&&(this[Ei].updateShadow(),this[Ih]()),D.has("arModes")&&(this[nO]=xhe(this.arModes)),(D.has("ar")||D.has("arModes")||D.has("src")||D.has("iosSrc"))&&this[WB]()}async activateAR(){switch(this[B5]){case iO:await this[jV]();break;case qV:await this[$V]();break;case VV:this[WV]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async[(t=Che,n=$_,c=aC,h=nO,f=B5,d=I5,p=T5,v=rO,w=sO,S=oO,WB)](){var D;let O=$B;if(this.ar){if(this.src!=null)for(const V of this[nO]){if(V==="webxr"&&Fb&&!NV&&await this[ro].arRenderer.supportsPresentation()){O=qV;break}if(V==="scene-viewer"&&!HV&&(Sx||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(!((D=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)===null||D===void 0)&&D.includes("XR")))){O=VV;break}if(V==="quick-look"&&tB){O=iO;break}}O===$B&&this.iosSrc!=null&&tB&&(O=iO)}if(O!==$B)this[$_].classList.add("enabled"),this[$_].addEventListener("click",this[T5]);else if(this[$_].classList.contains("enabled")){this[$_].removeEventListener("click",this[T5]),this[$_].classList.remove("enabled");const V="failed";this.setAttribute("ar-status",V),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:V}}))}this[B5]=O}async[$V](){console.log("Attempting to present in AR with WebXR..."),await this[aO]();try{this[$_].removeEventListener("click",this[T5]);const{arRenderer:D}=this[ro];D.placeOnWall=this.arPlacement==="wall",await D.present(this[Ei],this.xrEnvironment)}catch(D){console.warn("Error while trying to present in AR with WebXR"),console.error(D),await this[ro].arRenderer.stopPresenting(),NV=!0,console.warn("Falling back to next ar-mode"),await this[WB](),this.activateAR()}finally{this[WB]()}}async[aO](){this.loaded||(this[I5]=!0,this[rC](),await((D,O,V=null)=>new Promise($=>{D.addEventListener(O,function G(X){V&&!V(X)||($(X),D.removeEventListener(O,G))})}))(this,"load"),this[I5]=!1)}[sC](){return super[sC]()||this[I5]}[WV](){const D=self.location.toString(),O=new URL(D),V=new URL(this.src,D);V.hash&&(V.hash="");const $=new URLSearchParams(V.search);if(O.hash=zV,$.set("mode","ar_preferred"),$.has("disable_occlusion")||$.set("disable_occlusion","true"),this.arScale==="fixed"&&$.set("resizable","false"),this.arPlacement==="wall"&&$.set("enable_vertical_placement","true"),$.has("sound")){const X=new URL($.get("sound"),D);$.set("sound",X.toString())}if($.has("link")){const X=new URL($.get("link"),D);$.set("link",X.toString())}const G=`intent://arvr.google.com/scene-viewer/1.2?${$.toString()+"&file="+encodeURIComponent(V.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(O.toString())};end;`;self.addEventListener("hashchange",()=>{self.location.hash===zV&&(HV=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[WB]())},{once:!0}),this[aC].setAttribute("href",G),console.log("Attempting to present in AR with Scene Viewer..."),this[aC].click()}async[jV](){const D=!this.iosSrc;this[$_].classList.remove("enabled");const O=D?await this.prepareUSDZ():this.iosSrc,V=new URL(O,self.location.toString());if(D){const X=self.location.toString(),te=new URL(X),ae=new URL(this.src,te);ae.hash&&(V.hash=ae.hash)}this.arScale==="fixed"&&(V.hash&&(V.hash+="&"),V.hash+="allowsContentScaling=0");const $=this[aC];$.setAttribute("rel","ar");const G=document.createElement("img");$.appendChild(G),$.setAttribute("href",V.toString()),D&&$.setAttribute("download","model.usdz"),$.style.display="none",$.isConnected||this.shadowRoot.appendChild($),console.log("Attempting to present in AR with Quick Look..."),$.click(),$.removeChild(G),D&&URL.revokeObjectURL(O),this[$_].classList.add("enabled")}async prepareUSDZ(){const D=this[Zb].beginActivity("usdz-conversion");await this[aO]();const{model:O,shadow:V,target:$}=this[Ei];if(O==null)return"";let G=!1;V!=null&&(G=V.visible,V.visible=!1),D(.2);const X=new vhe;$.remove(O),O.position.copy($.position),O.updateWorldMatrix(!1,!0);const te=await X.parseAsync(O);O.position.set(0,0,0),$.add(O);const ae=new Blob([te],{type:"model/vnd.usdz+zip"}),oe=URL.createObjectURL(ae);return D(1),V!=null&&(V.visible=G),oe}}return oC([$t({type:Boolean,attribute:"ar"})],B.prototype,"ar",void 0),oC([$t({type:String,attribute:"ar-scale"})],B.prototype,"arScale",void 0),oC([$t({type:String,attribute:"ar-placement"})],B.prototype,"arPlacement",void 0),oC([$t({type:String,attribute:"ar-modes"})],B.prototype,"arModes",void 0),oC([$t({type:String,attribute:"ios-src"})],B.prototype,"iosSrc",void 0),oC([$t({type:Boolean,attribute:"xr-environment"})],B.prototype,"xrEnvironment",void 0),B})((o=>{var t,n,c,h,f,d,p,v;class w extends o{constructor(...B){super(...B),this.poster=null,this.reveal=cO,this.loading="auto",this[t]=!1,this[n]=!1,this[c]=this.shadowRoot.querySelector(".slot.poster"),this[h]=this.shadowRoot.querySelector("#default-poster"),this[f]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[d]=this[cC].getAttribute("aria-label"),this[p]=($=>{let G=null;const X=(...te)=>{G==null&&($(...te),G=self.setTimeout(()=>G=null,100))};return X.flush=()=>{G!=null&&(self.clearTimeout(G),G=null)},X})($=>{const G=this[lC].parentNode;requestAnimationFrame(()=>{this[lC].style.transform=`scaleX(${$})`,$===0&&(G.removeChild(this[lC]),G.appendChild(this[lC])),this[lC].classList.toggle("hide",$===1)})}),this[v]=$=>{const G=$.detail.totalProgress,X=$.detail.reason;G===1&&(this[dO].flush(),this.loaded&&(this[jB]||this.reveal===cO)&&this[hO]()),this[dO](G),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:G,reason:X}}))};const R=self.ModelViewerElement||{},D=R.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.5.6/";Ft.setDRACODecoderLocation(D);const O=R.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";Ft.setKTX2TranscoderLocation(O),R.meshoptDecoderLocation&&Ft.setMeshoptDecoderLocation(R.meshoptDecoderLocation);const V=R.lottieLoaderLocation||"https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js";U0.singleton.textureUtils.lottieLoaderUrl=V}static set dracoDecoderLocation(B){Ft.setDRACODecoderLocation(B)}static get dracoDecoderLocation(){return Ft.getDRACODecoderLocation()}static set ktx2TranscoderLocation(B){Ft.setKTX2TranscoderLocation(B)}static get ktx2TranscoderLocation(){return Ft.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(B){Ft.setMeshoptDecoderLocation(B)}static get meshoptDecoderLocation(){return Ft.getMeshoptDecoderLocation()}static set lottieLoaderLocation(B){U0.singleton.textureUtils.lottieLoaderUrl=B}static get lottieLoaderLocation(){return U0.singleton.textureUtils.lottieLoaderUrl}static mapURLs(B){U0.singleton.loader[be].manager.setURLModifier(B)}dismissPoster(){this.loaded?this[hO]():(this[jB]=!0,this[rC]())}showPoster(){const B=this[uO];if(B.classList.contains("show"))return;B.classList.add("show"),this[bd].classList.remove("show");const R=this[cC];R.removeAttribute("tabindex"),R.removeAttribute("aria-hidden");const D=this.modelIsVisible;this[M5]=!1,this[_5](D)}getDimensions(){return G_(this[Ei].size)}getBoundingBoxCenter(){return G_(this[Ei].boundingBox.getCenter(new Ke))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[Zb].addEventListener("progress",this[AO])}disconnectedCallback(){super.disconnectedCallback(),this[Zb].removeEventListener("progress",this[AO])}async updated(B){super.updated(B),B.has("poster")&&this.poster!=null&&(this[cC].style.backgroundImage=`url(${this.poster})`),B.has("alt")&&this[cC].setAttribute("aria-label",this[HP]),(B.has("reveal")||B.has("loading"))&&this[rC]()}[(t=M5,n=jB,c=uO,h=cC,f=lC,d=Ehe,p=dO,v=AO,sC)](){return!!this.src&&(this[jB]||this.loading==="eager"||this.reveal===cO&&this[Jb])}[hO](){this[jB]=!1;const B=this[uO];if(!B.classList.contains("show"))return;B.classList.remove("show"),this[bd].classList.add("show");const R=this.modelIsVisible;this[M5]=!0,this[_5](R);const D=this.getRootNode();D&&D.activeElement===this&&this[bd].focus();const O=this[cC];O.setAttribute("aria-hidden","true"),O.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[e1](){return super[e1]()&&this[M5]}}return lO([$t({type:String})],w.prototype,"poster",void 0),lO([$t({type:String})],w.prototype,"reveal",void 0),lO([$t({type:String})],w.prototype,"loading",void 0),w})((o=>{var t;class n extends o{constructor(...h){super(h),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[t]=!0,this[Ei].subscribeMixerEvent("loop",f=>{const d=f.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:d}}))}),this[Ei].subscribeMixerEvent("finished",()=>{this[V_]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[Ei].animationNames:[]}get duration(){return this[Ei].duration}get paused(){return this[V_]}get currentTime(){return this[Ei].animationTime}set currentTime(h){this[Ei].animationTime=h,this[Ih]()}get timeScale(){return this[Ei].animationTimeScale}set timeScale(h){this[Ei].animationTimeScale=h}pause(){this[V_]||(this[V_]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(h){this.availableAnimations.length>0&&(this[V_]=!1,this[w5](h),this.dispatchEvent(new CustomEvent("play")))}[(t=V_,xm)](){super[xm](),this[V_]=!0,this.animationName!=null&&this[w5](),this.autoplay&&this.play()}[wm](h,f){super[wm](h,f),this[V_]||!this[e1]()&&!this[ro].isPresenting||(this[Ei].updateAnimation(f/1e3),this[Ih]())}updated(h){super.updated(h),h.has("autoplay")&&this.autoplay&&this.play(),h.has("animationName")&&this[w5]()}[w5](h=che){var f;const d=(f=h.repetitions)!==null&&f!==void 0?f:1/0,p=h.pingpong?Zh:d===1?2200:2201;this[Ei].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,p,d),this[V_]&&(this[Ei].updateAnimation(0),this[Ih]())}}return VP([$t({type:Boolean})],n.prototype,"autoplay",void 0),VP([$t({type:String,attribute:"animation-name"})],n.prototype,"animationName",void 0),VP([$t({type:Number,attribute:"animation-crossfade-duration"})],n.prototype,"animationCrossfadeDuration",void 0),n})(HB))))))));customElements.define("model-viewer",XV);var YV,Ihe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:xte!==void 0?xte:typeof self<"u"?self:{},mO={exports:{}},hC=typeof Reflect=="object"?Reflect:null,JV=hC&&typeof hC.apply=="function"?hC.apply:function(o,t,n){return Function.prototype.apply.call(o,t,n)};YV=hC&&typeof hC.ownKeys=="function"?hC.ownKeys:Object.getOwnPropertySymbols?function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:function(o){return Object.getOwnPropertyNames(o)};var ZV=Number.isNaN||function(o){return o!=o};function vo(){vo.init.call(this)}mO.exports=vo,mO.exports.once=function(o,t){return new Promise(function(n,c){function h(v){o.removeListener(t,f),c(v)}function f(){typeof o.removeListener=="function"&&o.removeListener("error",h),n([].slice.call(arguments))}var d,p;aq(o,t,f,{once:!0}),t!=="error"&&(p=h,typeof(d=o).on=="function"&&aq(d,"error",p,{once:!0}))})},vo.EventEmitter=vo,vo.prototype._events=void 0,vo.prototype._eventsCount=0,vo.prototype._maxListeners=void 0;var eq=10;function R5(o){if(typeof o!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}function tq(o){return o._maxListeners===void 0?vo.defaultMaxListeners:o._maxListeners}function iq(o,t,n,c){var h,f,d,p;if(R5(n),(f=o._events)===void 0?(f=o._events=Object.create(null),o._eventsCount=0):(f.newListener!==void 0&&(o.emit("newListener",t,n.listener?n.listener:n),f=o._events),d=f[t]),d===void 0)d=f[t]=n,++o._eventsCount;else if(typeof d=="function"?d=f[t]=c?[n,d]:[d,n]:c?d.unshift(n):d.push(n),(h=tq(o))>0&&d.length>h&&!d.warned){d.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=o,v.type=t,v.count=d.length,p=v,console&&console.warn&&console.warn(p)}return o}function The(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function nq(o,t,n){var c={fired:!1,wrapFn:void 0,target:o,type:t,listener:n},h=The.bind(c);return h.listener=n,c.wrapFn=h,h}function rq(o,t,n){var c=o._events;if(c===void 0)return[];var h=c[t];return h===void 0?[]:typeof h=="function"?n?[h.listener||h]:[h]:n?function(f){for(var d=new Array(f.length),p=0;p<d.length;++p)d[p]=f[p].listener||f[p];return d}(h):oq(h,h.length)}function sq(o){var t=this._events;if(t!==void 0){var n=t[o];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function oq(o,t){for(var n=new Array(t),c=0;c<t;++c)n[c]=o[c];return n}function aq(o,t,n,c){if(typeof o.on=="function")c.once?o.once(t,n):o.on(t,n);else{if(typeof o.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o);o.addEventListener(t,function h(f){c.once&&o.removeEventListener(t,h),n(f)})}}Object.defineProperty(vo,"defaultMaxListeners",{enumerable:!0,get:function(){return eq},set:function(o){if(typeof o!="number"||o<0||ZV(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");eq=o}}),vo.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},vo.prototype.setMaxListeners=function(o){if(typeof o!="number"||o<0||ZV(o))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+o+".");return this._maxListeners=o,this},vo.prototype.getMaxListeners=function(){return tq(this)},vo.prototype.emit=function(o){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var c=o==="error",h=this._events;if(h!==void 0)c=c&&h.error===void 0;else if(!c)return!1;if(c){var f;if(t.length>0&&(f=t[0]),f instanceof Error)throw f;var d=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw d.context=f,d}var p=h[o];if(p===void 0)return!1;if(typeof p=="function")JV(p,this,t);else{var v=p.length,w=oq(p,v);for(n=0;n<v;++n)JV(w[n],this,t)}return!0},vo.prototype.addListener=function(o,t){return iq(this,o,t,!1)},vo.prototype.on=vo.prototype.addListener,vo.prototype.prependListener=function(o,t){return iq(this,o,t,!0)},vo.prototype.once=function(o,t){return R5(t),this.on(o,nq(this,o,t)),this},vo.prototype.prependOnceListener=function(o,t){return R5(t),this.prependListener(o,nq(this,o,t)),this},vo.prototype.removeListener=function(o,t){var n,c,h,f,d;if(R5(t),(c=this._events)===void 0)return this;if((n=c[o])===void 0)return this;if(n===t||n.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete c[o],c.removeListener&&this.emit("removeListener",o,n.listener||t));else if(typeof n!="function"){for(h=-1,f=n.length-1;f>=0;f--)if(n[f]===t||n[f].listener===t){d=n[f].listener,h=f;break}if(h<0)return this;h===0?n.shift():function(p,v){for(;v+1<p.length;v++)p[v]=p[v+1];p.pop()}(n,h),n.length===1&&(c[o]=n[0]),c.removeListener!==void 0&&this.emit("removeListener",o,d||t)}return this},vo.prototype.off=vo.prototype.removeListener,vo.prototype.removeAllListeners=function(o){var t,n,c;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[o]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[o]),this;if(arguments.length===0){var h,f=Object.keys(n);for(c=0;c<f.length;++c)(h=f[c])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=n[o])=="function")this.removeListener(o,t);else if(t!==void 0)for(c=t.length-1;c>=0;c--)this.removeListener(o,t[c]);return this},vo.prototype.listeners=function(o){return rq(this,o,!0)},vo.prototype.rawListeners=function(o){return rq(this,o,!1)},vo.listenerCount=function(o,t){return typeof o.listenerCount=="function"?o.listenerCount(t):sq.call(o,t)},vo.prototype.listenerCount=sq,vo.prototype.eventNames=function(){return this._eventsCount>0?YV(this._events):[]};var O0=mO.exports;const _O=(o,t=250)=>{let n;return function(...c){clearTimeout(n),n=setTimeout(()=>o.apply(this,c),t)}};class lq extends O0.EventEmitter{constructor(t,n="mousedown",c="click",h=200){super(),this._isHoldEvent=!1,this._holdTimeoutId=-1,this._doubleClickTimeoutId=-1,this._numClick=0,t.addEventListener(n,this._handleMouseDown.bind(this)),t.addEventListener(c,this._handleMouseClick.bind(this)),this._delay=h}_handleMouseDown(){this._isHoldEvent=!1,window.clearTimeout(this._doubleClickTimeoutId),this._holdTimeoutId=window.setTimeout(()=>{this._isHoldEvent=!0,this.emit("pointerevent-is-hold-event")},this._delay)}_handleMouseClick(t){if(this._isHoldEvent)return this._numClick=0,void(this._isHoldEvent=!1);window.clearTimeout(this._holdTimeoutId),this._numClick++,this._numClick===1?this._doubleClickTimeoutId=window.setTimeout(()=>{this._numClick=0,this.emit("single-click",t)},this._delay):(this._numClick=0,this.emit("double-click",t))}}function KB(o){return o*(180/Math.PI)}var Mhe=Object.defineProperty,Rhe=Object.getOwnPropertyDescriptor,cq=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?Rhe(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&Mhe(t,n,f),f};function dC(o,t=null){const n=document.createElement("canvas");n.width=64,n.height=64;const c=n.getContext("2d");if(c==null)return;if(c.beginPath(),c.arc(32,32,16,0,2*Math.PI),c.closePath(),c.fillStyle=o.getStyle(),c.fill(),t!==null){c.font="20px Arial";const d=c.measureText(t),p=d.width,v=d.actualBoundingBoxAscent-d.actualBoundingBoxDescent,w=(n.width-p)/2,S=(n.height+v)/2;c.fillStyle="#ffffff",c.fillText(t,w,S)}const h=new jp(n);return new Ms({map:h,toneMapped:!1})}let D5=class extends XV{constructor(){super(),this._coordinateAxes=[],this._coordinateLabel=[],this._lastSphericalPosition={theta:-1,phi:-1,radius:-1},this._lastFieldOfViewInDeg=-1,this._referenceFieldOfViewInRad=-1,this._referenceMaxRadius=-1,this._isRadiusConst=!1,this._maxZoomLevel=100,this._minZoomLevel=.5,this._currentZoomLevel=1,this._minPhiInDeg=0,this._maxPhiInDeg=1800,this._deltaX=0,this._deltaY=0,this._emitCamOrbitAngleChanged=_O(()=>{console.log("Cam Phi Theta",KB(this._lastSphericalPosition.phi),KB(this._lastSphericalPosition.theta)),this.dispatchEvent(new Event("cam-orbit-angle-changed"))},250),this.addEventListener("load",this._handleModelLoaded),this.addEventListener("camera-change",this._handleCameraChanged);const o=new lq(this);o.on("single-click",this._handleSceneClicked.bind(this)),this.addEventListener("pointerup",()=>this[bd].style.cursor="default"),this.addEventListener("pointerdown",()=>this[bd].style.cursor="pointer"),o.on("pointerevent-is-hold-event",()=>{console.log("Single click over"),this[bd].style.cursor="grabbing"})}firstUpdated(){this[Ei].add(this.measurementTool.sceneElementGroup),this.measurementTool.on("scene-update-requested",()=>this.updateRendering()),this.measurementTool.on("calculate-hotspot-requested",this._intersectObject.bind(this)),this.measurementTool.on("hotspot-added",this._handleHotspotAdded.bind(this))}connectWithSettings(o){o.modelOrientation.on("model-orientation-changed",c=>{this.orientation=c.angleInRadAsString(),this.measurementTool.eulerOrientation=c}),o.environment3D.on("change-axes-visibility-requested",this._changeAxesVisibility.bind(this)),o.environment3D.on("change-viewer-background-color-requested",this._changeBackgroundColor.bind(this)),o.environment3D.on("change-exposure-requested",c=>this.exposure=c);const[t,n]=o.environment3D.backgroundColor;this._changeBackgroundColor(t,n)}resize(o,t){this.style.height=o+"px",this.style.width=t+"px",this[Ei].idealAspect=this[Ei].aspect}getCamera(){return this[Ei].camera}setReferenceFieldOfView(o,t=!1){if(o==this._referenceFieldOfViewInRad)return void(t&&(this.fieldOfView=o+"rad"));this._referenceFieldOfViewInRad=o,this[Ei].idealAspect=this[Ei].aspect,this.minFieldOfView=o/this._maxZoomLevel+"rad",this.maxFieldOfView=o/this._minZoomLevel+"rad",t&&(this.fieldOfView=o+"rad");const n=this.getDimensions(),c=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);this.clientWidth>this.clientHeight?this._referenceMaxRadius=c/o:this._referenceMaxRadius=c/o*this.clientHeight/this.clientWidth,this._isRadiusConst||(this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+this._referenceMaxRadius+"m")}rotateModel(o,t){const n=2*Math.PI/this[Ei].height,c=n*o,h=n*t,f=this[$s];f.changeSource=ag,f.adjustOrbit(c,h,0)}zoomTo(o){this._referenceFieldOfViewInRad!=-1?(this._currentZoomLevel=o,this[Ei].idealAspect=this[Ei].aspect,this.fieldOfView=this._referenceFieldOfViewInRad/o+"rad"):console.log("Return 3d  zoom, ",this._currentZoomLevel)}setViewerOffset(o,t){this._deltaX==o&&this._deltaY==t||(this._deltaX=o,this._deltaY=t,this[Ei].camera.setViewOffset(this.clientWidth,this.clientHeight,o,t,this.clientWidth,this.clientHeight),this.updateRendering())}updateRendering(){this[Ei].queueRender()}setMinZoomLevel(o){if(this._minZoomLevel!=o&&this._referenceFieldOfViewInRad!=-1){const t=this._referenceFieldOfViewInRad/o,n=this.getFieldOfView()/180*Math.PI;if(t<n)if(this._isRadiusConst==0){const c=this.getCameraOrbit(),h=this.getCameraOrbit().radius;c.radius=h*n/t,this.cameraOrbit=c.toString()}else this.fieldOfView=t+"rad";this.maxFieldOfView=t+"rad",this._minZoomLevel=o}}setCameraOrbitPos(o){this._isRadiusConst&&(this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg "+o.radius+"m",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+o.radius+"m"),this.cameraOrbit=o.toString()}updateRadiusMode(o){if(o!=this._isRadiusConst)if(this._isRadiusConst=o,o){const t=this.getCameraOrbit().radius;this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg "+t+"m",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+t+"m"}else{this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg  auto";const t=this._referenceMaxRadius>0?this._referenceMaxRadius+"m":"auto";this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+t}}_changeAxesVisibility(o){this._changeCoordinateVisibility(o),this.updateRendering()}_changeBackgroundColor(o,t){console.log("Change background color",o,t),this.style.background=t?"radial-gradient(circle at center, "+t+", "+o+")":o}_handleHotspotAdded(o){o.addEventListener("hotspot-position-changed",()=>{this.updateHotspot({name:o.slot,position:o.dataset.position,normal:o.dataset.normal})}),this.appendChild(o)}_intersectObject(o,t){const n=this.getCameraTarget();console.log("Current translation 2",n),o.x-=n.x,o.y-=n.y,o.z-=n.z,this[Ei].remove(this.measurementTool.sceneElementGroup),this._removeCoordinateElements();const c=new xx(o,t).intersectObject(this[Ei],!0);this[Ei].add(this.measurementTool.sceneElementGroup),this._addCoordinateElements();const h=c.find(p=>p.object.visible&&!p.object.userData.shadow);if(h==null||h.face==null)return void console.log("Object intersection not found, not adding point from 3D scene.");let f,d;h.uv==null?(f=h.point,d=h.face.normal):(h.face.normal.applyNormalMatrix(new On().getNormalMatrix(h.object.matrixWorld)),f=h.point,d=h.face.normal),f.x+=n.x,f.y+=n.y,f.z+=n.z,this.measurementTool.addPointFrom3DScene(f,d,!1)}_coordinateLabelIsClicked(o){if(this._coordinateAxes.length==0||!this._coordinateAxes[0].visible)return!1;const t=this[Ei].getNDC(o.clientX,o.clientY),n=new xx;n.setFromCamera(t,this.getCamera());const c=n.intersectObjects(this._coordinateLabel,!0);if(console.log("Label hit?",c.length),c.length==0)return!1;const h=c[0].object,f=this.getCameraOrbit();switch(h.userData.type){case"posX":f.phi=.5*Math.PI,f.theta=.5*Math.PI;break;case"posY":f.phi=0,f.theta=0;break;case"posZ":f.phi=.5*Math.PI,f.theta=0;break;case"negX":f.phi=.5*Math.PI,f.theta=1.5*Math.PI;break;case"negY":f.phi=Math.PI,f.theta=0;break;case"negZ":f.phi=.5*Math.PI,f.theta=Math.PI;break;default:console.log("default")}return this.cameraOrbit=f.toString(),this._emitCamOrbitAngleChanged(),!0}_handleSceneClicked(o){if(console.log("Single Click into scene"),this._coordinateLabelIsClicked(o)||!this.measurementTool.isEditModeActive)return;const t=o.clientX,n=o.clientY;this[Ei].remove(this.measurementTool.sceneElementGroup),this._removeCoordinateElements();const c=this.positionAndNormalFromPoint(t,n);if(this[Ei].add(this.measurementTool.sceneElementGroup),this._addCoordinateElements(),c==null)return void console.log("no hit result: mouse = ",t,", ",n);const{position:h,normal:f}=c;this.measurementTool.addPointFrom3DScene(h,f)}_addCoordinateElements(){this._coordinateAxes.forEach(o=>{this[Ei].add(o)}),this._coordinateLabel.forEach(o=>{this[Ei].add(o)})}_removeCoordinateElements(){this._coordinateAxes.forEach(o=>{this[Ei].remove(o)}),this._coordinateLabel.forEach(o=>{this[Ei].remove(o)})}_changeCoordinateVisibility(o){this._coordinateAxes.forEach(t=>{t.visible=o}),this._coordinateLabel.forEach(t=>{t.visible=o})}_handleModelLoaded(){const o=this.getDimensions(),t=.5*Math.max(Math.max(o.x,o.y),o.z);this._coordinateAxes.push(new k_(new Ke(t,0,0),new Ke(-t,0,0),2*t,"red",.5,.25)),this._coordinateAxes.push(new k_(new Ke(0,t,0),new Ke(0,-t,0),2*t,"green",.5,.25)),this._coordinateAxes.push(new k_(new Ke(0,0,t),new Ke(0,0,-t),2*t,"blue",.5,.25)),this._coordinateAxes.forEach(S=>{S.visible=!1});const n=new Ke(.5,.5,.5),c=new nn;c.scale(n);const h=new fs(dC(new an("red"),"X"));h.userData.type="posX",h.applyMatrix4(c),h.position.x=t,this._coordinateLabel.push(h);const f=new fs(dC(new an(1,.2,.2),"-x"));f.userData.type="negX",f.applyMatrix4(c),f.position.x=-t,this._coordinateLabel.push(f);const d=new fs(dC(new an("green"),"y"));d.userData.type="posY",d.applyMatrix4(c),d.position.y=t,this._coordinateLabel.push(d);const p=new fs(dC(new an(.2,1,.2),"-y"));p.userData.type="negY",p.applyMatrix4(c),p.position.y=-t,this._coordinateLabel.push(p);const v=new fs(dC(new an("blue"),"z"));v.userData.type="posZ",v.applyMatrix4(c),v.position.z=t,this._coordinateLabel.push(v);const w=new fs(dC(new an(.2,.2,1),"-z"));w.userData.type="negZ",w.applyMatrix4(c),w.position.z=-t,this._coordinateLabel.push(w),this._coordinateLabel.forEach(S=>{S.visible=!1}),this._addCoordinateElements(),this._lastSphericalPosition=this.getCameraOrbit(),this[Ei].idealAspect=this[Ei].aspect,this[Ei].queueRender(),this._emitCamOrbitAngleChanged(),this[bd].style.cursor="default",this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg  auto",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg auto"}_handleCameraChanged(o){this.measurementTool.translation=new Ke().setFromMatrixPosition(this[Ei].target.matrixWorld);const t=this.getCameraOrbit(),n=this.getFieldOfView();if(o.detail.source!="user-interaction")return this._lastSphericalPosition=t,void(this._lastFieldOfViewInDeg=n);this._lastSphericalPosition.phi==t.phi&&this._lastSphericalPosition.theta==t.theta||(console.log("CamChanged",this.getCameraOrbit(),this._lastSphericalPosition),t.radius>0&&this._emitCamOrbitAngleChanged()),this._lastSphericalPosition.radius==t.radius&&this._lastFieldOfViewInDeg!=n&&(this._currentZoomLevel=KB(this._referenceFieldOfViewInRad)/n,console.log("FOV change",this._currentZoomLevel,KB(this._referenceFieldOfViewInRad),n),this.dispatchEvent(new CustomEvent("fov-based-zoom-changed",{detail:{zoomLevel:this._currentZoomLevel}}))),this._lastSphericalPosition=t,this._lastFieldOfViewInDeg=n}};D5.styles=A``,cq([$t({type:Object})],D5.prototype,"measurementTool",2),D5=cq([Gt("viewer-3d")],D5);var uq={exports:{}};(function(o){function t(d){return new t.Viewer(d)}var n,c,h,f;(function(d){d.version={versionStr:"5.0.0",major:parseInt("5",10),minor:parseInt("0",10),revision:parseInt("0",10)};var p,v={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},w=Object.prototype.toString,S=Object.prototype.hasOwnProperty;d.isFunction=function(B){return d.type(B)==="function"},d.isArray=Array.isArray||function(B){return d.type(B)==="array"},d.isWindow=function(B){return B&&typeof B=="object"&&"setInterval"in B},d.type=function(B){return B==null?String(B):v[w.call(B)]||"object"},d.isPlainObject=function(B){if(!B||t.type(B)!=="object"||B.nodeType||d.isWindow(B)||B.constructor&&!S.call(B,"constructor")&&!S.call(B.constructor.prototype,"isPrototypeOf"))return!1;var R;for(var D in B)R=D;return R===void 0||S.call(B,R)},d.isEmptyObject=function(B){for(var R in B)return!1;return!0},d.freezeObject=function(B){return Object.freeze?d.freezeObject=Object.freeze:d.freezeObject=function(R){return R},d.freezeObject(B)},d.supportsCanvas=(p=document.createElement("canvas"),!(!d.isFunction(p.getContext)||!p.getContext("2d"))),d.isCanvasTainted=function(B){var R=!1;try{B.getContext("2d").getImageData(0,0,1,1)}catch{R=!0}return R},d.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),d.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),d.supportsEventListenerOptions=function(){var B=0;if(d.supportsAddEventListener)try{var R={get capture(){return B++,!1},get once(){return B++,!1},get passive(){return B++,!1}};window.addEventListener("test",null,R),window.removeEventListener("test",null,R)}catch{B=0}return B>=3}(),d.getCurrentPixelDensityRatio=function(){if(d.supportsCanvas){var B=document.createElement("canvas").getContext("2d"),R=window.devicePixelRatio||1,D=B.webkitBackingStorePixelRatio||B.mozBackingStorePixelRatio||B.msBackingStorePixelRatio||B.oBackingStorePixelRatio||B.backingStorePixelRatio||1;return Math.max(R,1)/D}return 1},d.pixelDensityRatio=d.getCurrentPixelDensityRatio()})(t),function(d){d.extend=function(){var B,R,D,O,V,$,G=arguments[0]||{},X=arguments.length,te=!1,ae=1;for(typeof G=="boolean"&&(te=G,G=arguments[1]||{},ae=2),typeof G=="object"||t.isFunction(G)||(G={}),X===ae&&(G=this,--ae);ae<X;ae++)if((B=arguments[ae])!==null||B!==void 0)for(R in B){var oe=Object.getOwnPropertyDescriptor(B,R);oe!==void 0?oe.get||oe.set?Object.defineProperty(G,R,oe):G!==(O=oe.value)&&(te&&O&&(t.isPlainObject(O)||(V=t.isArray(O)))?(D=G[R],V?(V=!1,$=D&&t.isArray(D)?D:[]):$=D&&t.isPlainObject(D)?D:{},G[R]=t.extend(te,$,O)):O!==void 0&&(G[R]=O)):d.console.warn('Could not copy inherited property "'+R+'".')}return G},d.extend(d,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if(typeof navigator!="object")return!1;var B=navigator.userAgent;return typeof B=="string"&&(B.indexOf("iPhone")!==-1||B.indexOf("iPad")!==-1||B.indexOf("iPod")!==-1)}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,maxTilesPerFrame:1,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,overlayPreserveContentDirection:!0,opacity:1,compositeOperation:null,drawer:["webgl","canvas","html"],drawerOptions:{webgl:{},canvas:{},html:{},custom:{}},preload:!1,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},delegate:function(B,R){return function(){var D=arguments;return D===void 0&&(D=[]),R.apply(B,D)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(B){return d._viewers.get(this.getElement(B))},getElement:function(B){return typeof B=="string"&&(B=document.getElementById(B)),B},getElementPosition:function(B){var R,D,O=new d.Point;for(D=S(B=d.getElement(B),R=d.getElementStyle(B).position==="fixed");D;)O.x+=B.offsetLeft,O.y+=B.offsetTop,R&&(O=O.plus(d.getPageScroll())),D=S(B=D,R=d.getElementStyle(B).position==="fixed");return O},getElementOffset:function(B){var R,D,O=(B=d.getElement(B))&&B.ownerDocument,V={top:0,left:0};return O?(R=O.documentElement,B.getBoundingClientRect!==void 0&&(V=B.getBoundingClientRect()),D=O===O.window?O:O.nodeType===9&&(O.defaultView||O.parentWindow),new d.Point(V.left+(D.pageXOffset||R.scrollLeft)-(R.clientLeft||0),V.top+(D.pageYOffset||R.scrollTop)-(R.clientTop||0))):new d.Point},getElementSize:function(B){return B=d.getElement(B),new d.Point(B.clientWidth,B.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(B){return(B=d.getElement(B)).currentStyle}:function(B){return B=d.getElement(B),window.getComputedStyle(B,"")},getCssPropertyWithVendorPrefix:function(B){var R={};return d.getCssPropertyWithVendorPrefix=function(D){if(R[D]!==void 0)return R[D];var O=document.createElement("div").style,V=null;if(O[D]!==void 0)V=D;else for(var $=["Webkit","Moz","MS","O","webkit","moz","ms","o"],G=d.capitalizeFirstLetter(D),X=0;X<$.length;X++){var te=$[X]+G;if(O[te]!==void 0){V=te;break}}return R[D]=V,V},d.getCssPropertyWithVendorPrefix(B)},capitalizeFirstLetter:function(B){return B.charAt(0).toUpperCase()+B.slice(1)},positiveModulo:function(B,R){var D=B%R;return D<0&&(D+=R),D},pointInElement:function(B,R){B=d.getElement(B);var D=d.getElementOffset(B),O=d.getElementSize(B);return R.x>=D.x&&R.x<D.x+O.x&&R.y<D.y+O.y&&R.y>=D.y},getMousePosition:function(B){if(typeof B.pageX=="number")d.getMousePosition=function(R){var D=new d.Point;return D.x=R.pageX,D.y=R.pageY,D};else{if(typeof B.clientX!="number")throw new Error("Unknown event mouse position, no known technique.");d.getMousePosition=function(R){var D=new d.Point;return D.x=R.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,D.y=R.clientY+document.body.scrollTop+document.documentElement.scrollTop,D}}return d.getMousePosition(B)},getPageScroll:function(){var B=document.documentElement||{},R=document.body||{};if(typeof window.pageXOffset=="number")d.getPageScroll=function(){return new d.Point(window.pageXOffset,window.pageYOffset)};else if(R.scrollLeft||R.scrollTop)d.getPageScroll=function(){return new d.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!B.scrollLeft&&!B.scrollTop)return new d.Point(0,0);d.getPageScroll=function(){return new d.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return d.getPageScroll()},setPageScroll:function(B){if(window.scrollTo!==void 0)d.setPageScroll=function(O){window.scrollTo(O.x,O.y)};else{var R=d.getPageScroll();if(R.x===B.x&&R.y===B.y)return;document.body.scrollLeft=B.x,document.body.scrollTop=B.y;var D=d.getPageScroll();if(D.x!==R.x&&D.y!==R.y)return void(d.setPageScroll=function(O){document.body.scrollLeft=O.x,document.body.scrollTop=O.y});if(document.documentElement.scrollLeft=B.x,document.documentElement.scrollTop=B.y,(D=d.getPageScroll()).x!==R.x&&D.y!==R.y)return void(d.setPageScroll=function(O){document.documentElement.scrollLeft=O.x,document.documentElement.scrollTop=O.y});d.setPageScroll=function(O){}}d.setPageScroll(B)},getWindowSize:function(){var B=document.documentElement||{},R=document.body||{};if(typeof window.innerWidth=="number")d.getWindowSize=function(){return new d.Point(window.innerWidth,window.innerHeight)};else if(B.clientWidth||B.clientHeight)d.getWindowSize=function(){return new d.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!R.clientWidth&&!R.clientHeight)throw new Error("Unknown window size, no known technique.");d.getWindowSize=function(){return new d.Point(document.body.clientWidth,document.body.clientHeight)}}return d.getWindowSize()},makeCenteredNode:function(B){B=d.getElement(B);var R=[d.makeNeutralElement("div"),d.makeNeutralElement("div"),d.makeNeutralElement("div")];return d.extend(R[0].style,{display:"table",height:"100%",width:"100%"}),d.extend(R[1].style,{display:"table-row"}),d.extend(R[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),R[0].appendChild(R[1]),R[1].appendChild(R[2]),R[2].appendChild(B),R[0]},makeNeutralElement:function(B){var R=document.createElement(B),D=R.style;return D.background="transparent none",D.border="none",D.margin="0px",D.padding="0px",D.position="static",R},now:function(){return Date.now?d.now=Date.now:d.now=function(){return new Date().getTime()},d.now()},makeTransparentImage:function(B){var R=d.makeNeutralElement("img");return R.src=B,R},setElementOpacity:function(B,R,D){var O;B=d.getElement(B),D&&!d.Browser.alpha&&(R=Math.round(R)),d.Browser.opacity?B.style.opacity=R<1?R:"":R<1?(O="alpha(opacity="+Math.round(100*R)+")",B.style.filter=O):B.style.filter=""},setElementTouchActionNone:function(B){(B=d.getElement(B)).style.touchAction!==void 0?B.style.touchAction="none":B.style.msTouchAction!==void 0&&(B.style.msTouchAction="none")},setElementPointerEvents:function(B,R){(B=d.getElement(B)).style!==void 0&&B.style.pointerEvents!==void 0&&(B.style.pointerEvents=R)},setElementPointerEventsNone:function(B){d.setElementPointerEvents(B,"none")},addClass:function(B,R){(B=d.getElement(B)).className?(" "+B.className+" ").indexOf(" "+R+" ")===-1&&(B.className+=" "+R):B.className=R},indexOf:function(B,R,D){return Array.prototype.indexOf?this.indexOf=function(O,V,$){return O.indexOf(V,$)}:this.indexOf=function(O,V,$){var G,X,te=$||0;if(!O)throw new TypeError;if((X=O.length)===0||te>=X)return-1;for(te<0&&(te=X-Math.abs(te)),G=te;G<X;G++)if(O[G]===V)return G;return-1},this.indexOf(B,R,D)},removeClass:function(B,R){var D,O,V=[];for(D=(B=d.getElement(B)).className.split(/\s+/),O=0;O<D.length;O++)D[O]&&D[O]!==R&&V.push(D[O]);B.className=V.join(" ")},normalizeEventListenerOptions:function(B){return B!==void 0?typeof B=="boolean"?d.supportsEventListenerOptions?{capture:B}:B:d.supportsEventListenerOptions?B:B.capture!==void 0&&B.capture:!!d.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(d.supportsAddEventListener)return function(B,R,D,O){O=d.normalizeEventListenerOptions(O),(B=d.getElement(B)).addEventListener(R,D,O)};if(document.documentElement.attachEvent&&document.attachEvent)return function(B,R,D){(B=d.getElement(B)).attachEvent("on"+R,D)};throw new Error("No known event model.")}(),removeEvent:function(){if(d.supportsRemoveEventListener)return function(B,R,D,O){O=d.normalizeEventListenerOptions(O),(B=d.getElement(B)).removeEventListener(R,D,O)};if(document.documentElement.detachEvent&&document.detachEvent)return function(B,R,D){(B=d.getElement(B)).detachEvent("on"+R,D)};throw new Error("No known event model.")}(),cancelEvent:function(B){B.preventDefault()},eventIsCanceled:function(B){return B.defaultPrevented},stopEvent:function(B){B.stopPropagation()},createCallback:function(B,R){console.error("The createCallback function is deprecated and will be removed in future versions. Please use alternativeFunction instead.");var D,O=[];for(D=2;D<arguments.length;D++)O.push(arguments[D]);return function(){var V,$=O.concat([]);for(V=0;V<arguments.length;V++)$.push(arguments[V]);return R.apply(B,$)}},getUrlParameter:function(B){return w[B]||null},getUrlProtocol:function(B){var R=B.match(/^([a-z]+:)\/\//i);return R===null?window.location.protocol:R[1].toLowerCase()},createAjaxRequest:function(){if(window.XMLHttpRequest)return d.createAjaxRequest=function(){return new XMLHttpRequest},new XMLHttpRequest;throw new Error("Browser doesn't support XMLHttpRequest.")},makeAjaxRequest:function(B,R,D){var O,V,$,G;d.isPlainObject(B)&&(R=B.success,D=B.error,O=B.withCredentials,V=B.headers,$=B.responseType||null,G=B.postData||null,B=B.url);var X=d.getUrlProtocol(B),te=d.createAjaxRequest();if(!d.isFunction(R))throw new Error("makeAjaxRequest requires a success callback");te.onreadystatechange=function(){te.readyState===4&&(te.onreadystatechange=function(){},te.status>=200&&te.status<300||te.status===0&&X!=="http:"&&X!=="https:"?R(te):d.isFunction(D)?D(te):d.console.error("AJAX request returned %d: %s",te.status,B))};var ae=G?"POST":"GET";try{if(te.open(ae,B,!0),$&&(te.responseType=$),V)for(var oe in V)Object.prototype.hasOwnProperty.call(V,oe)&&V[oe]&&te.setRequestHeader(oe,V[oe]);O&&(te.withCredentials=!0),te.send(G)}catch(Ae){d.console.error("%s while making AJAX request: %s",Ae.name,Ae.message),te.onreadystatechange=function(){},d.isFunction(D)&&D(te,Ae)}return te},jsonp:function(B){var R,D=B.url,O=document.head||document.getElementsByTagName("head")[0]||document.documentElement,V=B.callbackName||"openseadragon"+d.now(),$=window[V],G="$1"+V+"$2",X=B.param||"callback",te=B.callback;D=D.replace(/(=)\?(&|$)|\?\?/i,G),D+=(/\?/.test(D)?"&":"?")+X+"="+V,window[V]=function(ae){if($)window[V]=$;else try{delete window[V]}catch{}te&&d.isFunction(te)&&te(ae)},R=document.createElement("script"),B.async===void 0&&B.async===!1||(R.async="async"),B.scriptCharset&&(R.charset=B.scriptCharset),R.src=D,R.onload=R.onreadystatechange=function(ae,oe){(oe||!R.readyState||/loaded|complete/.test(R.readyState))&&(R.onload=R.onreadystatechange=null,O&&R.parentNode&&O.removeChild(R),R=void 0)},O.insertBefore(R,O.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(B){if(!window.DOMParser)throw new Error("Browser doesn't support XML DOM.");return d.parseXml=function(R){return new DOMParser().parseFromString(R,"text/xml")},d.parseXml(B)},parseJSON:function(B){return d.parseJSON=window.JSON.parse,d.parseJSON(B)},imageFormatSupported:function(B){return!!v[(B=B||"").toLowerCase()]},setImageFormatsSupported:function(B){d.extend(v,B)}});var p=function(B){};d.console=window.console||{log:p,debug:p,info:p,warn:p,error:p,assert:p},d.Browser={vendor:d.BROWSERS.UNKNOWN,version:0,alpha:!0};var v={avif:!0,bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1,webp:!0},w={};function S(B,R){return R&&B!==document.body?document.body:B.offsetParent}(function(){var B=navigator.appVersion,R=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(d.Browser.vendor=d.BROWSERS.IE,d.Browser.version=parseFloat(R.substring(R.indexOf("MSIE")+5,R.indexOf(";",R.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(R.indexOf("Edge")>=0?(d.Browser.vendor=d.BROWSERS.EDGE,d.Browser.version=parseFloat(R.substring(R.indexOf("Edge")+5))):R.indexOf("Edg")>=0?(d.Browser.vendor=d.BROWSERS.CHROMEEDGE,d.Browser.version=parseFloat(R.substring(R.indexOf("Edg")+4))):R.indexOf("Firefox")>=0?(d.Browser.vendor=d.BROWSERS.FIREFOX,d.Browser.version=parseFloat(R.substring(R.indexOf("Firefox")+8))):R.indexOf("Safari")>=0?(d.Browser.vendor=R.indexOf("Chrome")>=0?d.BROWSERS.CHROME:d.BROWSERS.SAFARI,d.Browser.version=parseFloat(R.substring(R.substring(0,R.indexOf("Safari")).lastIndexOf("/")+1,R.indexOf("Safari")))):new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(R)!==null&&(d.Browser.vendor=d.BROWSERS.IE,d.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":d.Browser.vendor=d.BROWSERS.OPERA,d.Browser.version=parseFloat(B)}var D,O,V,$=window.location.search.substring(1).split("&");for(V=0;V<$.length;V++)if((O=(D=$[V]).indexOf("="))>0){var G=D.substring(0,O),X=D.substring(O+1);try{w[G]=decodeURIComponent(X)}catch{d.console.error("Ignoring malformed URL parameter: %s=%s",G,X)}}d.Browser.alpha=!(d.Browser.vendor===d.BROWSERS.CHROME&&d.Browser.version<2),d.Browser.opacity=!0,d.Browser.vendor===d.BROWSERS.IE&&d.console.error("Internet Explorer is not supported by OpenSeadragon")})(),function(B){var R=B.requestAnimationFrame||B.mozRequestAnimationFrame||B.webkitRequestAnimationFrame||B.msRequestAnimationFrame,D=B.cancelAnimationFrame||B.mozCancelAnimationFrame||B.webkitCancelAnimationFrame||B.msCancelAnimationFrame;if(R&&D)d.requestAnimationFrame=function(){return R.apply(B,arguments)},d.cancelAnimationFrame=function(){return D.apply(B,arguments)};else{var O,V=[],$=[],G=0;d.requestAnimationFrame=function(X){return V.push([++G,X]),O||(O=setInterval(function(){if(V.length){var te=d.now(),ae=$;for($=V,V=ae;$.length;)$.shift()[1](te)}else clearInterval(O),O=void 0},20)),G},d.cancelAnimationFrame=function(X){var te,ae;for(te=0,ae=V.length;te<ae;te+=1)if(V[te][0]===X)return void V.splice(te,1);for(te=0,ae=$.length;te<ae;te+=1)if($[te][0]===X)return void $.splice(te,1)}}}(window)}(t),n=Ihe,c=function(){return t},o.exports?o.exports=c():n.OpenSeadragon=c(),function(d){class p{constructor(w){w||(w=[0,0,0,0,0,0,0,0,0]),this.values=w}static makeIdentity(){return new p([1,0,0,0,1,0,0,0,1])}static makeTranslation(w,S){return new p([1,0,0,0,1,0,w,S,1])}static makeRotation(w){var S=Math.cos(w),B=Math.sin(w);return new p([S,-B,0,B,S,0,0,0,1])}static makeScaling(w,S){return new p([w,0,0,0,S,0,0,0,1])}multiply(w){let S=this.values,B=w.values;var R=S[0],D=S[1],O=S[2],V=S[3],$=S[4],G=S[5],X=S[6],te=S[7],ae=S[8],oe=B[0],Ae=B[1],ve=B[2],De=B[3],Ne=B[4],We=B[5],vt=B[6],ot=B[7],nt=B[8];return new p([oe*R+Ae*V+ve*X,oe*D+Ae*$+ve*te,oe*O+Ae*G+ve*ae,De*R+Ne*V+We*X,De*D+Ne*$+We*te,De*O+Ne*G+We*ae,vt*R+ot*V+nt*X,vt*D+ot*$+nt*te,vt*O+ot*G+nt*ae])}}d.Mat3=p}(t),h=t,f={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(f.supportsFullScreen=!0,f.getFullScreenElement=function(){return document.fullscreenElement},f.requestFullScreen=function(d){return d.requestFullscreen().catch(function(p){h.console.error("Fullscreen request failed: ",p)})},f.exitFullScreen=function(){document.exitFullscreen().catch(function(d){h.console.error("Error while exiting fullscreen: ",d)})},f.fullScreenEventName="fullscreenchange",f.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(f.supportsFullScreen=!0,f.getFullScreenElement=function(){return document.msFullscreenElement},f.requestFullScreen=function(d){return d.msRequestFullscreen()},f.exitFullScreen=function(){document.msExitFullscreen()},f.fullScreenEventName="MSFullscreenChange",f.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(f.supportsFullScreen=!0,f.getFullScreenElement=function(){return document.webkitFullscreenElement},f.requestFullScreen=function(d){return d.webkitRequestFullscreen()},f.exitFullScreen=function(){document.webkitExitFullscreen()},f.fullScreenEventName="webkitfullscreenchange",f.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(f.supportsFullScreen=!0,f.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},f.requestFullScreen=function(d){return d.webkitRequestFullScreen()},f.exitFullScreen=function(){document.webkitCancelFullScreen()},f.fullScreenEventName="webkitfullscreenchange",f.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(f.supportsFullScreen=!0,f.getFullScreenElement=function(){return document.mozFullScreenElement},f.requestFullScreen=function(d){return d.mozRequestFullScreen()},f.exitFullScreen=function(){document.mozCancelFullScreen()},f.fullScreenEventName="mozfullscreenchange",f.fullScreenErrorEventName="mozfullscreenerror"),f.isFullScreen=function(){return f.getFullScreenElement()!==null},f.cancelFullScreen=function(){h.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),f.exitFullScreen()},h.extend(h,f),function(d){d.EventSource=function(){this.events={},this._rejectedEventList={}},d.EventSource.prototype={addOnceHandler:function(p,v,w,S,B){var R=this;S=S||1;var D=0,O=function(V){return++D===S&&R.removeHandler(p,O),v(V)};return this.addHandler(p,O,w,B)},addHandler:function(p,v,w,S){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,p))return d.console.error(`Error adding handler for ${p}. ${this._rejectedEventList[p]}`),!1;var B=this.events[p];if(B||(this.events[p]=B=[]),v&&d.isFunction(v)){var R=B.length,D={handler:v,userData:w||null,priority:S||0};for(B[R]=D;R>0&&B[R-1].priority<B[R].priority;)B[R]=B[R-1],B[R-1]=D,R--}return!0},removeHandler:function(p,v){var w,S=this.events[p],B=[];if(S&&d.isArray(S)){for(w=0;w<S.length;w++)S[w].handler!==v&&B.push(S[w]);this.events[p]=B}},numberOfHandlers:function(p){var v=this.events[p];return v?v.length:0},removeAllHandlers:function(p){if(p)this.events[p]=[];else for(var v in this.events)this.events[v]=[]},getHandler:function(p){var v=this.events[p];return v&&v.length?(v=v.length===1?[v[0]]:Array.apply(null,v),function(w,S){var B,R=v.length;for(B=0;B<R;B++)v[B]&&(S.eventSource=w,S.userData=v[B].userData,v[B].handler(S))}):null},raiseEvent:function(p,v){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,p))return d.console.error(`Error adding handler for ${p}. ${this._rejectedEventList[p]}`),!1;var w=this.getHandler(p);return w&&w(this,v||{}),!0},rejectEventHandler(p,v=""){this._rejectedEventList[p]=v},allowEventHandler(p){delete this._rejectedEventList[p]}}}(t),function(d){var p={};d.MouseTracker=function(we){var Re=arguments;d.isPlainObject(we)||(we={element:Re[0],clickTimeThreshold:Re[1],clickDistThreshold:Re[2]}),this.hash=Math.random(),this.element=d.getElement(we.element),this.clickTimeThreshold=we.clickTimeThreshold||d.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=we.clickDistThreshold||d.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=we.dblClickTimeThreshold||d.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=we.dblClickDistThreshold||d.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=we.userData||null,this.stopDelay=we.stopDelay||50,this.preProcessEventHandler=we.preProcessEventHandler||null,this.contextMenuHandler=we.contextMenuHandler||null,this.enterHandler=we.enterHandler||null,this.leaveHandler=we.leaveHandler||null,this.exitHandler=we.exitHandler||null,this.overHandler=we.overHandler||null,this.outHandler=we.outHandler||null,this.pressHandler=we.pressHandler||null,this.nonPrimaryPressHandler=we.nonPrimaryPressHandler||null,this.releaseHandler=we.releaseHandler||null,this.nonPrimaryReleaseHandler=we.nonPrimaryReleaseHandler||null,this.moveHandler=we.moveHandler||null,this.scrollHandler=we.scrollHandler||null,this.clickHandler=we.clickHandler||null,this.dblClickHandler=we.dblClickHandler||null,this.dragHandler=we.dragHandler||null,this.dragEndHandler=we.dragEndHandler||null,this.pinchHandler=we.pinchHandler||null,this.stopHandler=we.stopHandler||null,this.keyDownHandler=we.keyDownHandler||null,this.keyUpHandler=we.keyUpHandler||null,this.keyHandler=we.keyHandler||null,this.focusHandler=we.focusHandler||null,this.blurHandler=we.blurHandler||null;var Me=this;p[this.hash]={click:function(Z){var de,Te;Ge(Me,Te={originalEvent:de=Z,eventType:"click",pointerType:"mouse",isEmulated:!1}),Te.preventDefault&&!Te.defaultPrevented&&d.cancelEvent(de),Te.stopPropagation&&d.stopEvent(de)},dblclick:function(Z){var de,Te;Ge(Me,Te={originalEvent:de=Z,eventType:"dblclick",pointerType:"mouse",isEmulated:!1}),Te.preventDefault&&!Te.defaultPrevented&&d.cancelEvent(de),Te.stopPropagation&&d.stopEvent(de)},keydown:function(Z){var de,Te,Ve,Ze;Ve=null,Ge(de=Me,Ze={originalEvent:Te=Z,eventType:"keydown",pointerType:"",isEmulated:!1}),!de.keyDownHandler||Ze.preventGesture||Ze.defaultPrevented||(Ve={eventSource:de,keyCode:Te.keyCode?Te.keyCode:Te.charCode,ctrl:Te.ctrlKey,shift:Te.shiftKey,alt:Te.altKey,meta:Te.metaKey,originalEvent:Te,preventDefault:Ze.preventDefault||Ze.defaultPrevented,userData:de.userData},de.keyDownHandler(Ve)),(Ve&&Ve.preventDefault||Ze.preventDefault&&!Ze.defaultPrevented)&&d.cancelEvent(Te),Ze.stopPropagation&&d.stopEvent(Te)},keyup:function(Z){var de,Te,Ve,Ze;Ve=null,Ge(de=Me,Ze={originalEvent:Te=Z,eventType:"keyup",pointerType:"",isEmulated:!1}),!de.keyUpHandler||Ze.preventGesture||Ze.defaultPrevented||(Ve={eventSource:de,keyCode:Te.keyCode?Te.keyCode:Te.charCode,ctrl:Te.ctrlKey,shift:Te.shiftKey,alt:Te.altKey,meta:Te.metaKey,originalEvent:Te,preventDefault:Ze.preventDefault||Ze.defaultPrevented,userData:de.userData},de.keyUpHandler(Ve)),(Ve&&Ve.preventDefault||Ze.preventDefault&&!Ze.defaultPrevented)&&d.cancelEvent(Te),Ze.stopPropagation&&d.stopEvent(Te)},keypress:function(Z){var de,Te,Ve,Ze;Ve=null,Ge(de=Me,Ze={originalEvent:Te=Z,eventType:"keypress",pointerType:"",isEmulated:!1}),!de.keyHandler||Ze.preventGesture||Ze.defaultPrevented||(Ve={eventSource:de,keyCode:Te.keyCode?Te.keyCode:Te.charCode,ctrl:Te.ctrlKey,shift:Te.shiftKey,alt:Te.altKey,meta:Te.metaKey,originalEvent:Te,preventDefault:Ze.preventDefault||Ze.defaultPrevented,userData:de.userData},de.keyHandler(Ve)),(Ve&&Ve.preventDefault||Ze.preventDefault&&!Ze.defaultPrevented)&&d.cancelEvent(Te),Ze.stopPropagation&&d.stopEvent(Te)},focus:function(Z){var de,Te,Ve;Ge(de=Me,Ve={originalEvent:Te=Z,eventType:"focus",pointerType:"",isEmulated:!1}),de.focusHandler&&!Ve.preventGesture&&de.focusHandler({eventSource:de,originalEvent:Te,userData:de.userData})},blur:function(Z){var de,Te,Ve;Ge(de=Me,Ve={originalEvent:Te=Z,eventType:"blur",pointerType:"",isEmulated:!1}),de.blurHandler&&!Ve.preventGesture&&de.blurHandler({eventSource:de,originalEvent:Te,userData:de.userData})},contextmenu:function(Z){var de,Te,Ve,Ze;Ve=null,Ge(de=Me,Ze={originalEvent:Te=Z,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1}),!de.contextMenuHandler||Ze.preventGesture||Ze.defaultPrevented||(Ve={eventSource:de,position:We(De(Te),de.element),originalEvent:Ze.originalEvent,preventDefault:Ze.preventDefault||Ze.defaultPrevented,userData:de.userData},de.contextMenuHandler(Ve)),(Ve&&Ve.preventDefault||Ze.preventDefault&&!Ze.defaultPrevented)&&d.cancelEvent(Te),Ze.stopPropagation&&d.stopEvent(Te)},wheel:function(Z){var de;nt(Me,de=Z,de)},mousewheel:function(Z){ot(Me,Z)},DOMMouseScroll:function(Z){ot(Me,Z)},MozMousePixelScroll:function(Z){ot(Me,Z)},losecapture:function(Z){var de,Te,Ve,Ze;de=Me,Te=Z,Ve={id:d.MouseTracker.mousePointerId,type:"mouse"},Ge(de,Ze={originalEvent:Te,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1}),Te.target===de.element&&Pe(de,Ve,!1),Ze.stopPropagation&&d.stopEvent(Te)},mouseenter:function(Z){st(Me,Z)},mouseleave:function(Z){mt(Me,Z)},mouseover:function(Z){It(Me,Z)},mouseout:function(Z){Jt(Me,Z)},mousedown:function(Z){jt(Me,Z)},mouseup:function(Z){_i(Me,Z)},mousemove:function(Z){Kt(Me,Z)},touchstart:function(Z){(function(de,Te){var Ve,Ze,qt,Tt=Te.changedTouches.length,yi=de.getActivePointersListByType("touch");Ve=d.now(),yi.getLength()>Te.touches.length-Tt&&d.console.warn("Tracked touch contact count doesn't match event.touches.length");var un={originalEvent:Te,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(Ge(de,un),Ze=0;Ze<Tt;Ze++)ut(de,un,qt={id:Te.changedTouches[Ze].identifier,type:"touch",isPrimary:yi.getLength()===0,currentPos:De(Te.changedTouches[Ze]),currentTime:Ve}),ct(de,un,qt,0),Pe(de,qt,!0);un.preventDefault&&!un.defaultPrevented&&d.cancelEvent(Te),un.stopPropagation&&d.stopEvent(Te)})(Me,Z)},touchend:function(Z){(function(de,Te){var Ve,Ze,qt,Tt=Te.changedTouches.length;Ve=d.now();var yi={originalEvent:Te,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(Ge(de,yi),Ze=0;Ze<Tt;Ze++)Mt(de,yi,qt={id:Te.changedTouches[Ze].identifier,type:"touch",currentPos:De(Te.changedTouches[Ze]),currentTime:Ve},0),Pe(de,qt,!1),xt(de,yi,qt);yi.preventDefault&&!yi.defaultPrevented&&d.cancelEvent(Te),yi.stopPropagation&&d.stopEvent(Te)})(Me,Z)},touchmove:function(Z){(function(de,Te){var Ve,Ze,qt=Te.changedTouches.length;Ve=d.now();var Tt={originalEvent:Te,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(Ge(de,Tt),Ze=0;Ze<qt;Ze++)Je(de,Tt,{id:Te.changedTouches[Ze].identifier,type:"touch",currentPos:De(Te.changedTouches[Ze]),currentTime:Ve});Tt.preventDefault&&!Tt.defaultPrevented&&d.cancelEvent(Te),Tt.stopPropagation&&d.stopEvent(Te)})(Me,Z)},touchcancel:function(Z){(function(de,Te){var Ve,Ze=Te.changedTouches.length,qt={originalEvent:Te,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(Ge(de,qt),Ve=0;Ve<Ze;Ve++)Ut(de,qt,{id:Te.changedTouches[Ve].identifier,type:"touch"});qt.stopPropagation&&d.stopEvent(Te)})(Me,Z)},gesturestart:function(Z){var de;de=Z,d.eventIsCanceled(de)||de.preventDefault()},gesturechange:function(Z){var de;de=Z,d.eventIsCanceled(de)||de.preventDefault()},gotpointercapture:function(Z){var de,Te,Ve;Ge(de=Me,Ve={originalEvent:Te=Z,eventType:"gotpointercapture",pointerType:Ae(Te),isEmulated:!1}),Te.target===de.element&&Pe(de,{id:Te.pointerId,type:Ae(Te)},!0),Ve.stopPropagation&&d.stopEvent(Te)},lostpointercapture:function(Z){var de,Te,Ve;Ge(de=Me,Ve={originalEvent:Te=Z,eventType:"lostpointercapture",pointerType:Ae(Te),isEmulated:!1}),Te.target===de.element&&Pe(de,{id:Te.pointerId,type:Ae(Te)},!1),Ve.stopPropagation&&d.stopEvent(Te)},pointerenter:function(Z){st(Me,Z)},pointerleave:function(Z){mt(Me,Z)},pointerover:function(Z){It(Me,Z)},pointerout:function(Z){Jt(Me,Z)},pointerdown:function(Z){jt(Me,Z)},pointerup:function(Z){_i(Me,Z)},pointermove:function(Z){Kt(Me,Z)},pointercancel:function(Z){var de,Te,Ve,Ze;de=Me,Ve={id:(Te=Z).pointerId,type:Ae(Te)},Ge(de,Ze={originalEvent:Te,eventType:"pointercancel",pointerType:Ve.type,isEmulated:!1}),Ut(de,Ze,Ve),Ze.stopPropagation&&d.stopEvent(Te)},pointerupcaptured:function(Z){var de,Te;Te=Z,(de=Me).getActivePointersListByType(Ae(Te)).getById(Te.pointerId)&&xi(de,Te),d.stopEvent(Te)},pointermovecaptured:function(Z){var de,Te;Te=Z,(de=Me).getActivePointersListByType(Ae(Te)).getById(Te.pointerId)&&_t(de,Te),d.stopEvent(Te)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,d.MouseTracker.havePointerEvents&&d.setElementPointerEvents(this.element,"auto"),this.exitHandler&&d.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),we.startDisabled||this.setTracking(!0)},d.MouseTracker.prototype={destroy:function(){X(this),this.element=null,p[this.hash]=null,delete p[this.hash]},isTracking:function(){return p[this.hash].tracking},setTracking:function(we){return we?function(Re){var Me,Z,de=p[Re.hash];if(!de.tracking){for(Z=0;Z<d.MouseTracker.subscribeEvents.length;Z++)Me=d.MouseTracker.subscribeEvents[Z],d.addEvent(Re.element,Me,de[Me],Me===d.MouseTracker.wheelEventName&&{passive:!1,capture:!1});G(Re),de.tracking=!0}}(this):X(this),this},getActivePointersListByType:function(we){var Re,Me,Z=p[this.hash],de=Z?Z.activePointersLists.length:0;for(Re=0;Re<de;Re++)if(Z.activePointersLists[Re].type===we)return Z.activePointersLists[Re];return Me=new d.MouseTracker.GesturePointList(we),Z&&Z.activePointersLists.push(Me),Me},getActivePointerCount:function(){var we,Re=p[this.hash],Me=Re.activePointersLists.length,Z=0;for(we=0;we<Me;we++)Z+=Re.activePointersLists[we].getLength();return Z},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var v,w,S,B,R,D,O,V=function(){try{return window.self!==window.top}catch{return!0}}();function $(we){try{return we.addEventListener&&we.removeEventListener}catch{return!1}}function G(we){var Re,Me,Z,de,Te,Ve=p[we.hash],Ze=Ve.activePointersLists.length;for(Re=0;Re<Ze;Re++)if((Z=Ve.activePointersLists[Re]).getLength()>0){for(Te=[],de=Z.asArray(),Me=0;Me<de.length;Me++)Te.push(de[Me]);for(Me=0;Me<Te.length;Me++)bi(we,Z,Te[Me])}for(Re=0;Re<Ze;Re++)Ve.activePointersLists.pop();Ve.sentDragEvent=!1}function X(we){var Re,Me,Z=p[we.hash];if(Z.tracking){for(Me=0;Me<d.MouseTracker.subscribeEvents.length;Me++)Re=d.MouseTracker.subscribeEvents[Me],d.removeEvent(we.element,Re,Z[Re],!1);G(we),Z.tracking=!1}}function te(we,Re){var Me=p[we.hash];if(Re==="pointerevent")return{upName:"pointerup",upHandler:Me.pointerupcaptured,moveName:"pointermove",moveHandler:Me.pointermovecaptured};if(Re==="mouse")return{upName:"pointerup",upHandler:Me.pointerupcaptured,moveName:"pointermove",moveHandler:Me.pointermovecaptured};if(Re==="touch")return{upName:"touchend",upHandler:Me.touchendcaptured,moveName:"touchmove",moveHandler:Me.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function ae(we,Re){var Me,Z;if(d.MouseTracker.havePointerCapture)if(d.MouseTracker.havePointerEvents){if(!(Z=we.getActivePointersListByType(Re.type).getById(Re.id))||!Z.captured)return;try{we.element.releasePointerCapture(Re.id)}catch{}}else we.element.releaseCapture();else Me=te(we,d.MouseTracker.havePointerEvents?"pointerevent":Re.type),V&&$(window.top)&&d.removeEvent(window.top,Me.upName,Me.upHandler,!0),d.removeEvent(d.MouseTracker.captureElement,Me.moveName,Me.moveHandler,!0),d.removeEvent(d.MouseTracker.captureElement,Me.upName,Me.upHandler,!0);Pe(we,Re,!1)}function oe(we){return d.MouseTracker.havePointerEvents?we.pointerId:d.MouseTracker.mousePointerId}function Ae(we){return d.MouseTracker.havePointerEvents&&we.pointerType?we.pointerType:"mouse"}function ve(we){return!d.MouseTracker.havePointerEvents||we.isPrimary}function De(we){return d.getMousePosition(we)}function Ne(we,Re){return We(De(we),Re)}function We(we,Re){var Me=d.getElementOffset(Re);return we.minus(Me)}function vt(we,Re){return new d.Point((we.x+Re.x)/2,(we.y+Re.y)/2)}function ot(we,Re){var Me={target:Re.target||Re.srcElement,type:"wheel",shiftKey:Re.shiftKey||!1,clientX:Re.clientX,clientY:Re.clientY,pageX:Re.pageX?Re.pageX:Re.clientX,pageY:Re.pageY?Re.pageY:Re.clientY,deltaMode:Re.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};d.MouseTracker.wheelEventName==="mousewheel"?Me.deltaY=-Re.wheelDelta/d.DEFAULT_SETTINGS.pixelsPerWheelLine:Me.deltaY=Re.detail,nt(we,Me,Re)}function nt(we,Re,Me){var Z,de,Te=null;Z=Re.deltaY?Re.deltaY<0?1:-1:0,Ge(we,de={originalEvent:Re,eventType:"wheel",pointerType:"mouse",isEmulated:Re!==Me}),!we.scrollHandler||de.preventGesture||de.defaultPrevented||(Te={eventSource:we,pointerType:"mouse",position:Ne(Re,we.element),scroll:Z,shift:Re.shiftKey,isTouchEvent:!1,originalEvent:Me,preventDefault:de.preventDefault||de.defaultPrevented,userData:we.userData},we.scrollHandler(Te)),de.stopPropagation&&d.stopEvent(Me),(Te&&Te.preventDefault||de.preventDefault&&!de.defaultPrevented)&&d.cancelEvent(Me)}function st(we,Re){var Me={id:oe(Re),type:Ae(Re),isPrimary:ve(Re),currentPos:De(Re),currentTime:d.now()},Z={originalEvent:Re,eventType:"pointerenter",pointerType:Me.type,isEmulated:!1};Ge(we,Z),ut(we,Z,Me)}function mt(we,Re){var Me={id:oe(Re),type:Ae(Re),isPrimary:ve(Re),currentPos:De(Re),currentTime:d.now()},Z={originalEvent:Re,eventType:"pointerleave",pointerType:Me.type,isEmulated:!1};Ge(we,Z),xt(we,Z,Me)}function It(we,Re){var Me,Z,de,Te,Ve,Ze={id:oe(Re),type:Ae(Re),isPrimary:ve(Re),currentPos:De(Re),currentTime:d.now()},qt={originalEvent:Re,eventType:"pointerover",pointerType:Ze.type,isEmulated:!1};Ge(we,qt),Z=qt,de=Ze,(Ve=(Te=(Me=we).getActivePointersListByType(de.type)).getById(de.id))?de=Ve:(de.captured=!1,de.insideElementPressed=!1),Me.overHandler&&Me.overHandler({eventSource:Me,pointerType:de.type,position:We(de.currentPos,Me.element),buttons:Te.buttons,pointers:Me.getActivePointerCount(),insideElementPressed:de.insideElementPressed,buttonDownAny:Te.buttons!==0,isTouchEvent:de.type==="touch",originalEvent:Z.originalEvent,userData:Me.userData}),qt.preventDefault&&!qt.defaultPrevented&&d.cancelEvent(Re),qt.stopPropagation&&d.stopEvent(Re)}function Jt(we,Re){var Me,Z,de,Te,Ve,Ze={id:oe(Re),type:Ae(Re),isPrimary:ve(Re),currentPos:De(Re),currentTime:d.now()},qt={originalEvent:Re,eventType:"pointerout",pointerType:Ze.type,isEmulated:!1};Ge(we,qt),Z=qt,de=Ze,(Ve=(Te=(Me=we).getActivePointersListByType(de.type)).getById(de.id))?de=Ve:(de.captured=!1,de.insideElementPressed=!1),Me.outHandler&&Me.outHandler({eventSource:Me,pointerType:de.type,position:de.currentPos&&We(de.currentPos,Me.element),buttons:Te.buttons,pointers:Me.getActivePointerCount(),insideElementPressed:de.insideElementPressed,buttonDownAny:Te.buttons!==0,isTouchEvent:de.type==="touch",originalEvent:Z.originalEvent,userData:Me.userData}),qt.preventDefault&&!qt.defaultPrevented&&d.cancelEvent(Re),qt.stopPropagation&&d.stopEvent(Re)}function jt(we,Re){var Me={id:oe(Re),type:Ae(Re),isPrimary:ve(Re),currentPos:De(Re),currentTime:d.now()},Z=d.MouseTracker.havePointerEvents&&Me.type==="touch",de={originalEvent:Re,eventType:"pointerdown",pointerType:Me.type,isEmulated:!1};Ge(we,de),ct(we,de,Me,Re.button),de.preventDefault&&!de.defaultPrevented&&d.cancelEvent(Re),de.stopPropagation&&d.stopEvent(Re),de.shouldCapture&&(Z?Pe(we,Me,!0):function(Te,Ve){var Ze;if(d.MouseTracker.havePointerCapture)if(d.MouseTracker.havePointerEvents)try{Te.element.setPointerCapture(Ve.id)}catch{return void d.console.warn("setPointerCapture() called on invalid pointer ID")}else Te.element.setCapture(!0);else Ze=te(Te,d.MouseTracker.havePointerEvents?"pointerevent":Ve.type),V&&$(window.top)&&d.addEvent(window.top,Ze.upName,Ze.upHandler,!0),d.addEvent(d.MouseTracker.captureElement,Ze.upName,Ze.upHandler,!0),d.addEvent(d.MouseTracker.captureElement,Ze.moveName,Ze.moveHandler,!0);Pe(Te,Ve,!0)}(we,Me))}function _i(we,Re){xi(we,Re)}function xi(we,Re){var Me,Z={originalEvent:Re,eventType:"pointerup",pointerType:(Me={id:oe(Re),type:Ae(Re),isPrimary:ve(Re),currentPos:De(Re),currentTime:d.now()}).type,isEmulated:!1};Ge(we,Z),Mt(we,Z,Me,Re.button),Z.preventDefault&&!Z.defaultPrevented&&d.cancelEvent(Re),Z.stopPropagation&&d.stopEvent(Re),Z.shouldReleaseCapture&&(Re.target===we.element?ae(we,Me):Pe(we,Me,!1))}function Kt(we,Re){_t(we,Re)}function _t(we,Re){var Me={id:oe(Re),type:Ae(Re),isPrimary:ve(Re),currentPos:De(Re),currentTime:d.now()},Z={originalEvent:Re,eventType:"pointermove",pointerType:Me.type,isEmulated:!1};Ge(we,Z),Je(we,Z,Me),Z.preventDefault&&!Z.defaultPrevented&&d.cancelEvent(Re),Z.stopPropagation&&d.stopEvent(Re)}function hi(we,Re){return Re.speed=0,Re.direction=0,Re.contactPos=Re.currentPos,Re.contactTime=Re.currentTime,Re.lastPos=Re.currentPos,Re.lastTime=Re.currentTime,we.add(Re)}function bi(we,Re,Me){var Z,de=Re.getById(Me.id);return de?(de.captured&&(d.console.warn("stopTrackingPointer() called on captured pointer"),ae(we,de)),Re.removeContact(),Z=Re.removeById(Me.id)):Z=Re.getLength(),Z}function Ge(we,Re){Re.eventSource=we,Re.eventPhase=Re.originalEvent&&Re.originalEvent.eventPhase!==void 0?Re.originalEvent.eventPhase:0,Re.defaultPrevented=d.eventIsCanceled(Re.originalEvent),Re.shouldCapture=!1,Re.shouldReleaseCapture=!1,Re.userData=we.userData,function(Me,Z){switch(Z.eventType){case"pointermove":case"pointerdown":case"pointerup":Z.isStoppable=!0,Z.isCancelable=!0,Z.preventDefault=!1,Z.preventGesture=!Me.hasGestureHandlers,Z.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":Z.isStoppable=!0,Z.isCancelable=!0,Z.preventDefault=!1,Z.preventGesture=!1,Z.stopPropagation=!1;break;case"wheel":Z.isStoppable=!0,Z.isCancelable=!0,Z.preventDefault=!1,Z.preventGesture=!Me.hasScrollHandler,Z.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":Z.isStoppable=!0,Z.isCancelable=!1,Z.preventDefault=!1,Z.preventGesture=!1,Z.stopPropagation=!1;break;case"click":Z.isStoppable=!0,Z.isCancelable=!0,Z.preventDefault=!!Me.clickHandler,Z.preventGesture=!1,Z.stopPropagation=!1;break;case"dblclick":Z.isStoppable=!0,Z.isCancelable=!0,Z.preventDefault=!!Me.dblClickHandler,Z.preventGesture=!1,Z.stopPropagation=!1;break;default:Z.isStoppable=!1,Z.isCancelable=!1,Z.preventDefault=!1,Z.preventGesture=!1,Z.stopPropagation=!1}}(we,Re),we.preProcessEventHandler&&we.preProcessEventHandler(Re)}function Pe(we,Re,Me){var Z=we.getActivePointersListByType(Re.type),de=Z.getById(Re.id);de?Me&&!de.captured?(de.captured=!0,Z.captureCount++):!Me&&de.captured&&(de.captured=!1,Z.captureCount--,Z.captureCount<0&&(Z.captureCount=0,d.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):d.console.warn("updatePointerCaptured() called on untracked pointer")}function ut(we,Re,Me){var Z,de=we.getActivePointersListByType(Me.type);(Z=de.getById(Me.id))?(Z.insideElement=!0,Z.lastPos=Z.currentPos,Z.lastTime=Z.currentTime,Z.currentPos=Me.currentPos,Z.currentTime=Me.currentTime,Me=Z):(Me.captured=!1,Me.insideElementPressed=!1,Me.insideElement=!0,hi(de,Me)),we.enterHandler&&we.enterHandler({eventSource:we,pointerType:Me.type,position:We(Me.currentPos,we.element),buttons:de.buttons,pointers:we.getActivePointerCount(),insideElementPressed:Me.insideElementPressed,buttonDownAny:de.buttons!==0,isTouchEvent:Me.type==="touch",originalEvent:Re.originalEvent,userData:we.userData})}function xt(we,Re,Me){var Z,de,Te=we.getActivePointersListByType(Me.type);(Z=Te.getById(Me.id))?(Z.captured?(Z.insideElement=!1,Z.lastPos=Z.currentPos,Z.lastTime=Z.currentTime,Z.currentPos=Me.currentPos,Z.currentTime=Me.currentTime):bi(we,Te,Z),Me=Z):(Me.captured=!1,Me.insideElementPressed=!1),(we.leaveHandler||we.exitHandler)&&(de={eventSource:we,pointerType:Me.type,position:Me.currentPos&&We(Me.currentPos,we.element),buttons:Te.buttons,pointers:we.getActivePointerCount(),insideElementPressed:Me.insideElementPressed,buttonDownAny:Te.buttons!==0,isTouchEvent:Me.type==="touch",originalEvent:Re.originalEvent,userData:we.userData},we.leaveHandler&&we.leaveHandler(de),we.exitHandler&&we.exitHandler(de))}function ct(we,Re,Me,Z){var de,Te=p[we.hash],Ve=we.getActivePointersListByType(Me.type);if(Re.originalEvent.buttons!==void 0?Ve.buttons=Re.originalEvent.buttons:Z===0?Ve.buttons|=1:Z===1?Ve.buttons|=4:Z===2?Ve.buttons|=2:Z===3?Ve.buttons|=8:Z===4?Ve.buttons|=16:Z===5&&(Ve.buttons|=32),Z!==0)return Re.shouldCapture=!1,Re.shouldReleaseCapture=!1,void(!we.nonPrimaryPressHandler||Re.preventGesture||Re.defaultPrevented||(Re.preventDefault=!0,we.nonPrimaryPressHandler({eventSource:we,pointerType:Me.type,position:We(Me.currentPos,we.element),button:Z,buttons:Ve.buttons,isTouchEvent:Me.type==="touch",originalEvent:Re.originalEvent,userData:we.userData})));(de=Ve.getById(Me.id))?(de.insideElementPressed=!0,de.insideElement=!0,de.originalTarget=Re.originalEvent.target,de.contactPos=Me.currentPos,de.contactTime=Me.currentTime,de.lastPos=de.currentPos,de.lastTime=de.currentTime,de.currentPos=Me.currentPos,de.currentTime=Me.currentTime,Me=de):(Me.captured=!1,Me.insideElementPressed=!0,Me.insideElement=!0,Me.originalTarget=Re.originalEvent.target,hi(Ve,Me)),Ve.addContact(),Re.preventGesture||Re.defaultPrevented?(Re.shouldCapture=!1,Re.shouldReleaseCapture=!1):(Re.shouldCapture=!0,Re.shouldReleaseCapture=!1,Re.preventDefault=!0,(we.dragHandler||we.dragEndHandler||we.pinchHandler)&&d.MouseTracker.gesturePointVelocityTracker.addPoint(we,Me),Ve.contacts===1?we.pressHandler&&!Re.preventGesture&&we.pressHandler({eventSource:we,pointerType:Me.type,position:We(Me.contactPos,we.element),buttons:Ve.buttons,isTouchEvent:Me.type==="touch",originalEvent:Re.originalEvent,userData:we.userData}):Ve.contacts===2&&we.pinchHandler&&Me.type==="touch"&&(Te.pinchGPoints=Ve.asArray(),Te.lastPinchDist=Te.currentPinchDist=Te.pinchGPoints[0].currentPos.distanceTo(Te.pinchGPoints[1].currentPos),Te.lastPinchCenter=Te.currentPinchCenter=vt(Te.pinchGPoints[0].currentPos,Te.pinchGPoints[1].currentPos)))}function Mt(we,Re,Me,Z){var de,Te,Ve,Ze,qt=p[we.hash],Tt=we.getActivePointersListByType(Me.type),yi=!1;if(Re.originalEvent.buttons!==void 0?Tt.buttons=Re.originalEvent.buttons:Z===0?Tt.buttons^=-2:Z===1?Tt.buttons^=-5:Z===2?Tt.buttons^=-3:Z===3?Tt.buttons^=-9:Z===4?Tt.buttons^=-17:Z===5&&(Tt.buttons^=-33),Re.shouldCapture=!1,Z!==0)return Re.shouldReleaseCapture=!1,void(!we.nonPrimaryReleaseHandler||Re.preventGesture||Re.defaultPrevented||(Re.preventDefault=!0,we.nonPrimaryReleaseHandler({eventSource:we,pointerType:Me.type,position:We(Me.currentPos,we.element),button:Z,buttons:Tt.buttons,isTouchEvent:Me.type==="touch",originalEvent:Re.originalEvent,userData:we.userData})));(Ve=Tt.getById(Me.id))?(Tt.removeContact(),Ve.captured&&(yi=!0),Ve.lastPos=Ve.currentPos,Ve.lastTime=Ve.currentTime,Ve.currentPos=Me.currentPos,Ve.currentTime=Me.currentTime,Ve.insideElement||bi(we,Tt,Ve),de=Ve.currentPos,Te=Ve.currentTime):(Me.captured=!1,Me.insideElementPressed=!1,Me.insideElement=!0,hi(Tt,Me),Ve=Me),Re.preventGesture||Re.defaultPrevented||(yi?(Re.shouldReleaseCapture=!0,Re.preventDefault=!0,(we.dragHandler||we.dragEndHandler||we.pinchHandler)&&d.MouseTracker.gesturePointVelocityTracker.removePoint(we,Ve),Tt.contacts===0?(we.releaseHandler&&de&&we.releaseHandler({eventSource:we,pointerType:Ve.type,position:We(de,we.element),buttons:Tt.buttons,insideElementPressed:Ve.insideElementPressed,insideElementReleased:Ve.insideElement,isTouchEvent:Ve.type==="touch",originalEvent:Re.originalEvent,userData:we.userData}),we.dragEndHandler&&qt.sentDragEvent&&we.dragEndHandler({eventSource:we,pointerType:Ve.type,position:We(Ve.currentPos,we.element),speed:Ve.speed,direction:Ve.direction,shift:Re.originalEvent.shiftKey,isTouchEvent:Ve.type==="touch",originalEvent:Re.originalEvent,userData:we.userData}),qt.sentDragEvent=!1,(we.clickHandler||we.dblClickHandler)&&Ve.insideElement&&(Ze=Te-Ve.contactTime<=we.clickTimeThreshold&&Ve.contactPos.distanceTo(de)<=we.clickDistThreshold,we.clickHandler&&we.clickHandler({eventSource:we,pointerType:Ve.type,position:We(Ve.currentPos,we.element),quick:Ze,shift:Re.originalEvent.shiftKey,isTouchEvent:Ve.type==="touch",originalEvent:Re.originalEvent,originalTarget:Ve.originalTarget,userData:we.userData}),we.dblClickHandler&&Ze&&(Tt.clicks++,Tt.clicks===1?(qt.lastClickPos=de,qt.dblClickTimeOut=setTimeout(function(){Tt.clicks=0},we.dblClickTimeThreshold)):Tt.clicks===2&&(clearTimeout(qt.dblClickTimeOut),Tt.clicks=0,qt.lastClickPos.distanceTo(de)<=we.dblClickDistThreshold&&we.dblClickHandler({eventSource:we,pointerType:Ve.type,position:We(Ve.currentPos,we.element),shift:Re.originalEvent.shiftKey,isTouchEvent:Ve.type==="touch",originalEvent:Re.originalEvent,userData:we.userData}),qt.lastClickPos=null)))):Tt.contacts===2&&we.pinchHandler&&Ve.type==="touch"&&(qt.pinchGPoints=Tt.asArray(),qt.lastPinchDist=qt.currentPinchDist=qt.pinchGPoints[0].currentPos.distanceTo(qt.pinchGPoints[1].currentPos),qt.lastPinchCenter=qt.currentPinchCenter=vt(qt.pinchGPoints[0].currentPos,qt.pinchGPoints[1].currentPos))):(Re.shouldReleaseCapture=!1,we.releaseHandler&&de&&(we.releaseHandler({eventSource:we,pointerType:Ve.type,position:We(de,we.element),buttons:Tt.buttons,insideElementPressed:Ve.insideElementPressed,insideElementReleased:Ve.insideElement,isTouchEvent:Ve.type==="touch",originalEvent:Re.originalEvent,userData:we.userData}),Re.preventDefault=!0)))}function Je(we,Re,Me){var Z,de,Te,Ve=p[we.hash],Ze=we.getActivePointersListByType(Me.type);Re.originalEvent.buttons!==void 0&&(Ze.buttons=Re.originalEvent.buttons),(Z=Ze.getById(Me.id))&&(Z.lastPos=Z.currentPos,Z.lastTime=Z.currentTime,Z.currentPos=Me.currentPos,Z.currentTime=Me.currentTime,Re.shouldCapture=!1,Re.shouldReleaseCapture=!1,we.stopHandler&&Me.type==="mouse"&&(clearTimeout(we.stopTimeOut),we.stopTimeOut=setTimeout(function(){var qt,Tt,yi;qt=we,Tt=Re.originalEvent,yi=Me.type,qt.stopHandler&&qt.stopHandler({eventSource:qt,pointerType:yi,position:Ne(Tt,qt.element),buttons:qt.getActivePointersListByType(yi).buttons,isTouchEvent:yi==="touch",originalEvent:Tt,userData:qt.userData})},we.stopDelay)),Ze.contacts===0?we.moveHandler&&we.moveHandler({eventSource:we,pointerType:Me.type,position:We(Me.currentPos,we.element),buttons:Ze.buttons,isTouchEvent:Me.type==="touch",originalEvent:Re.originalEvent,userData:we.userData}):Ze.contacts===1?(we.moveHandler&&(Z=Ze.asArray()[0],we.moveHandler({eventSource:we,pointerType:Z.type,position:We(Z.currentPos,we.element),buttons:Ze.buttons,isTouchEvent:Z.type==="touch",originalEvent:Re.originalEvent,userData:we.userData})),!we.dragHandler||Re.preventGesture||Re.defaultPrevented||(Te=(Z=Ze.asArray()[0]).currentPos.minus(Z.lastPos),we.dragHandler({eventSource:we,pointerType:Z.type,position:We(Z.currentPos,we.element),buttons:Ze.buttons,delta:Te,speed:Z.speed,direction:Z.direction,shift:Re.originalEvent.shiftKey,isTouchEvent:Z.type==="touch",originalEvent:Re.originalEvent,userData:we.userData}),Re.preventDefault=!0,Ve.sentDragEvent=!0)):Ze.contacts===2&&(we.moveHandler&&(de=Ze.asArray(),we.moveHandler({eventSource:we,pointerType:de[0].type,position:We(vt(de[0].currentPos,de[1].currentPos),we.element),buttons:Ze.buttons,isTouchEvent:de[0].type==="touch",originalEvent:Re.originalEvent,userData:we.userData})),!we.pinchHandler||Me.type!=="touch"||Re.preventGesture||Re.defaultPrevented||(Te=Ve.pinchGPoints[0].currentPos.distanceTo(Ve.pinchGPoints[1].currentPos))!==Ve.currentPinchDist&&(Ve.lastPinchDist=Ve.currentPinchDist,Ve.currentPinchDist=Te,Ve.lastPinchCenter=Ve.currentPinchCenter,Ve.currentPinchCenter=vt(Ve.pinchGPoints[0].currentPos,Ve.pinchGPoints[1].currentPos),we.pinchHandler({eventSource:we,pointerType:"touch",gesturePoints:Ve.pinchGPoints,lastCenter:We(Ve.lastPinchCenter,we.element),center:We(Ve.currentPinchCenter,we.element),lastDistance:Ve.lastPinchDist,distance:Ve.currentPinchDist,shift:Re.originalEvent.shiftKey,originalEvent:Re.originalEvent,userData:we.userData}),Re.preventDefault=!0)))}function Ut(we,Re,Me){var Z,de=we.getActivePointersListByType(Me.type);(Z=de.getById(Me.id))&&bi(we,de,Z)}d.MouseTracker.gesturePointVelocityTracker=(v=[],w=0,S=0,B=function(we,Re){return we.hash.toString()+Re.type+Re.id.toString()},R=function(){var we,Re,Me,Z,de,Te,Ve=v.length,Ze=d.now();for(Z=Ze-S,S=Ze,we=0;we<Ve;we++)(Me=(Re=v[we]).gPoint).direction=Math.atan2(Me.currentPos.y-Re.lastPos.y,Me.currentPos.x-Re.lastPos.x),de=Re.lastPos.distanceTo(Me.currentPos),Re.lastPos=Me.currentPos,Te=1e3*de/(Z+1),Me.speed=.75*Te+.25*Me.speed},{addPoint:function(we,Re){var Me=B(we,Re);v.push({guid:Me,gPoint:Re,lastPos:Re.currentPos}),v.length===1&&(S=d.now(),w=window.setInterval(R,50))},removePoint:function(we,Re){var Me,Z=B(we,Re),de=v.length;for(Me=0;Me<de;Me++)if(v[Me].guid===Z){v.splice(Me,1),--de==0&&window.clearInterval(w);break}}}),d.MouseTracker.captureElement=document,d.MouseTracker.wheelEventName="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",d.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",d.MouseTracker.wheelEventName],d.MouseTracker.wheelEventName==="DOMMouseScroll"&&d.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(d.MouseTracker.havePointerEvents=!0,d.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),d.MouseTracker.havePointerCapture=(D=document.createElement("div"),d.isFunction(D.setPointerCapture)&&d.isFunction(D.releasePointerCapture)),d.MouseTracker.havePointerCapture&&d.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(d.MouseTracker.havePointerEvents=!1,d.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),d.MouseTracker.mousePointerId="legacy-mouse",d.MouseTracker.havePointerCapture=(O=document.createElement("div"),d.isFunction(O.setCapture)&&d.isFunction(O.releaseCapture)),d.MouseTracker.havePointerCapture&&d.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&d.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&d.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),d.MouseTracker.GesturePointList=function(we){this._gPoints=[],this.type=we,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},d.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(we){return this._gPoints.push(we)},removeById:function(we){var Re,Me=this._gPoints.length;for(Re=0;Re<Me;Re++)if(this._gPoints[Re].id===we){this._gPoints.splice(Re,1);break}return this._gPoints.length},getByIndex:function(we){return we<this._gPoints.length?this._gPoints[we]:null},getById:function(we){var Re,Me=this._gPoints.length;for(Re=0;Re<Me;Re++)if(this._gPoints[Re].id===we)return this._gPoints[Re];return null},getPrimary:function(we){var Re,Me=this._gPoints.length;for(Re=0;Re<Me;Re++)if(this._gPoints[Re].isPrimary)return this._gPoints[Re];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(d.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(t),function(d){d.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},d.Control=function(p,v,w){var S=p.parentNode;typeof v=="number"&&(d.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),v={anchor:v}),v.attachToViewer=v.attachToViewer===void 0||v.attachToViewer,this.autoFade=v.autoFade===void 0||v.autoFade,this.element=p,this.anchor=v.anchor,this.container=w,this.anchor===d.ControlAnchor.ABSOLUTE?(this.wrapper=d.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof v.top=="number"?v.top+"px":v.top,this.wrapper.style.left=typeof v.left=="number"?v.left+"px":v.left,this.wrapper.style.height=typeof v.height=="number"?v.height+"px":v.height,this.wrapper.style.width=typeof v.width=="number"?v.width+"px":v.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=d.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===d.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),v.attachToViewer?this.anchor===d.ControlAnchor.TOP_RIGHT||this.anchor===d.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):S.appendChild(this.wrapper)},d.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==d.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(p){this.wrapper.style.display=p?this.anchor===d.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(p){d.setElementOpacity(this.wrapper,p,!0)}}}(t),function(d){function p(v,w){var S,B=v.controls;for(S=B.length-1;S>=0;S--)if(B[S].element===w)return S;return-1}d.ControlDock=function(v){var w,S,B=["topleft","topright","bottomright","bottomleft"];for(d.extend(!0,this,{id:"controldock-"+d.now()+"-"+Math.floor(1e6*Math.random()),container:d.makeNeutralElement("div"),controls:[]},v),this.container.onsubmit=function(){return!1},this.element&&(this.element=d.getElement(this.element),this.element.appendChild(this.container),d.getElementStyle(this.element).position==="static"&&(this.element.style.position="relative"),this.container.style.width="100%",this.container.style.height="100%"),S=0;S<B.length;S++)w=B[S],this.controls[w]=d.makeNeutralElement("div"),this.controls[w].style.position="absolute",w.match("left")&&(this.controls[w].style.left="0px"),w.match("right")&&(this.controls[w].style.right="0px"),w.match("top")&&(this.controls[w].style.top="0px"),w.match("bottom")&&(this.controls[w].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},d.ControlDock.prototype={addControl:function(v,w){var S=null;if(!(p(this,v=d.getElement(v))>=0)){switch(w.anchor){case d.ControlAnchor.TOP_RIGHT:S=this.controls.topright,v.style.position="relative",v.style.paddingRight="0px",v.style.paddingTop="0px";break;case d.ControlAnchor.BOTTOM_RIGHT:S=this.controls.bottomright,v.style.position="relative",v.style.paddingRight="0px",v.style.paddingBottom="0px";break;case d.ControlAnchor.BOTTOM_LEFT:S=this.controls.bottomleft,v.style.position="relative",v.style.paddingLeft="0px",v.style.paddingBottom="0px";break;case d.ControlAnchor.TOP_LEFT:S=this.controls.topleft,v.style.position="relative",v.style.paddingLeft="0px",v.style.paddingTop="0px";break;case d.ControlAnchor.ABSOLUTE:default:case d.ControlAnchor.NONE:S=this.container,v.style.margin="0px",v.style.padding="0px"}this.controls.push(new d.Control(v,w,S)),v.style.display="inline-block"}},removeControl:function(v){var w=p(this,v=d.getElement(v));return w>=0&&(this.controls[w].destroy(),this.controls.splice(w,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var v;for(v=this.controls.length-1;v>=0;v--)if(this.controls[v].isVisible())return!0;return!1},setControlsEnabled:function(v){var w;for(w=this.controls.length-1;w>=0;w--)this.controls[w].setVisible(v);return this}}}(t),function(d){d.Placement=d.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(t),function(d){var p={},v=1;function w(Z){return Z=d.getElement(Z),new d.Point(Z.clientWidth===0?1:Z.clientWidth,Z.clientHeight===0?1:Z.clientHeight)}function S(Z,de){if(de instanceof d.Overlay)return de;var Te=null;if(de.element)Te=d.getElement(de.element);else{var Ve=de.id?de.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(Te=d.getElement(de.id))||((Te=document.createElement("a")).href="#/overlay/"+Ve),Te.id=Ve,d.addClass(Te,de.className?de.className:"openseadragon-overlay")}var Ze=de.location,qt=de.width,Tt=de.height;if(!Ze){var yi=de.x,un=de.y;if(de.px!==void 0){var Li=Z.viewport.imageToViewportRectangle(new d.Rect(de.px,de.py,qt||0,Tt||0));yi=Li.x,un=Li.y,qt=qt!==void 0?Li.width:void 0,Tt=Tt!==void 0?Li.height:void 0}Ze=new d.Point(yi,un)}var $i=de.placement;return $i&&d.type($i)==="string"&&($i=d.Placement[de.placement.toUpperCase()]),new d.Overlay({element:Te,location:Ze,placement:$i,onDraw:de.onDraw,checkResize:de.checkResize,width:qt,height:Tt,rotationMode:de.rotationMode})}function B(Z,de){var Te;for(Te=Z.length-1;Te>=0;Te--)if(Z[Te].element===de)return Te;return-1}function R(Z,de){return d.requestAnimationFrame(function(){de(Z)})}function D(Z){d.requestAnimationFrame(function(){(function(de){var Te,Ve;if(de.controlsShouldFade){for(Te=1-(d.now()-de.controlsFadeBeginTime)/de.controlsFadeLength,Te=Math.min(1,Te),Te=Math.max(0,Te),Ve=de.controls.length-1;Ve>=0;Ve--)de.controls[Ve].autoFade&&de.controls[Ve].setOpacity(Te);Te>0&&D(de)}})(Z)})}function O(Z){Z.autoHideControls&&(Z.controlsShouldFade=!0,Z.controlsFadeBeginTime=d.now()+Z.controlsFadeDelay,window.setTimeout(function(){D(Z)},Z.controlsFadeDelay))}function V(Z){var de;for(Z.controlsShouldFade=!1,de=Z.controls.length-1;de>=0;de--)Z.controls[de].setOpacity(1)}function $(){V(this)}function G(){O(this)}function X(Z){var de={tracker:Z.eventSource,position:Z.position,originalEvent:Z.originalEvent,preventDefault:Z.preventDefault};this.raiseEvent("canvas-contextmenu",de),Z.preventDefault=de.preventDefault}function te(Z){var de={originalEvent:Z.originalEvent,preventDefaultAction:!1,preventVerticalPan:Z.preventVerticalPan||!this.panVertical,preventHorizontalPan:Z.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",de),de.preventDefaultAction||Z.ctrl||Z.alt||Z.meta)Z.preventDefault=!1;else switch(Z.keyCode){case 38:de.preventVerticalPan||(Z.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 40:de.preventVerticalPan||(Z.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 37:de.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 39:de.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),Z.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),Z.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),Z.preventDefault=!0;break;case 87:de.preventVerticalPan||(Z.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(0,-40))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 83:de.preventVerticalPan||(Z.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(0,40))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 65:de.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(-40,0))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 68:de.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new d.Point(40,0))),this.viewport.applyConstraints()),Z.preventDefault=!0;break;case 82:Z.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),Z.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),Z.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:Z.preventDefault=!1}}function ae(Z){var de={originalEvent:Z.originalEvent};this.raiseEvent("canvas-key-press",de)}function oe(Z){var de;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(Z.position.x=this.viewport.getContainerSize().x-Z.position.x);var Te={tracker:Z.eventSource,position:Z.position,quick:Z.quick,shift:Z.shift,originalEvent:Z.originalEvent,originalTarget:Z.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",Te),!Te.preventDefaultAction&&this.viewport&&Z.quick&&((de=this.gestureSettingsByDeviceType(Z.pointerType)).clickToZoom===!0&&(this.viewport.zoomBy(Z.shift?1/this.zoomPerClick:this.zoomPerClick,de.zoomToRefPoint?this.viewport.pointFromPixel(Z.position,!0):null),this.viewport.applyConstraints()),de.dblClickDragToZoom&&(p[this.hash].draggingToZoom===!0?(p[this.hash].lastClickTime=null,p[this.hash].draggingToZoom=!1):p[this.hash].lastClickTime=d.now()))}function Ae(Z){var de,Te={tracker:Z.eventSource,position:Z.position,shift:Z.shift,originalEvent:Z.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",Te),!Te.preventDefaultAction&&this.viewport&&(de=this.gestureSettingsByDeviceType(Z.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(Z.shift?1/this.zoomPerClick:this.zoomPerClick,de.zoomToRefPoint?this.viewport.pointFromPixel(Z.position,!0):null),this.viewport.applyConstraints())}function ve(Z){var de,Te={tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,delta:Z.delta,speed:Z.speed,direction:Z.direction,shift:Z.shift,originalEvent:Z.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",Te),de=this.gestureSettingsByDeviceType(Z.pointerType),!Te.preventDefaultAction&&this.viewport){if(de.dblClickDragToZoom&&p[this.hash].draggingToZoom){var Ve=Math.pow(this.zoomPerDblClickDrag,Z.delta.y/50);this.viewport.zoomBy(Ve)}else if(de.dragToPan&&!p[this.hash].draggingToZoom){if(this.panHorizontal||(Z.delta.x=0),this.panVertical||(Z.delta.y=0),this.viewport.flipped&&(Z.delta.x=-Z.delta.x),this.constrainDuringPan){var Ze=this.viewport.deltaPointsFromPixels(Z.delta.negate());this.viewport.centerSpringX.target.value+=Ze.x,this.viewport.centerSpringY.target.value+=Ze.y;var qt=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Ze.x,this.viewport.centerSpringY.target.value-=Ze.y,qt.xConstrained&&(Z.delta.x=0),qt.yConstrained&&(Z.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(Z.delta.negate()),de.flickEnabled&&!this.constrainDuringPan)}}}function De(Z){var de,Te={tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,speed:Z.speed,direction:Z.direction,shift:Z.shift,originalEvent:Z.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",Te),de=this.gestureSettingsByDeviceType(Z.pointerType),!Te.preventDefaultAction&&this.viewport){if(!p[this.hash].draggingToZoom&&de.dragToPan&&de.flickEnabled&&Z.speed>=de.flickMinSpeed){var Ve=0;this.panHorizontal&&(Ve=de.flickMomentum*Z.speed*Math.cos(Z.direction));var Ze=0;this.panVertical&&(Ze=de.flickMomentum*Z.speed*Math.sin(Z.direction));var qt=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),Tt=this.viewport.pointFromPixel(new d.Point(qt.x-Ve,qt.y-Ze));this.viewport.panTo(Tt,!1)}this.viewport.applyConstraints()}de.dblClickDragToZoom&&p[this.hash].draggingToZoom===!0&&(p[this.hash].draggingToZoom=!1)}function Ne(Z){this.raiseEvent("canvas-enter",{tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,buttons:Z.buttons,pointers:Z.pointers,insideElementPressed:Z.insideElementPressed,buttonDownAny:Z.buttonDownAny,originalEvent:Z.originalEvent})}function We(Z){this.raiseEvent("canvas-exit",{tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,buttons:Z.buttons,pointers:Z.pointers,insideElementPressed:Z.insideElementPressed,buttonDownAny:Z.buttonDownAny,originalEvent:Z.originalEvent})}function vt(Z){if(this.raiseEvent("canvas-press",{tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,insideElementPressed:Z.insideElementPressed,insideElementReleased:Z.insideElementReleased,originalEvent:Z.originalEvent}),this.gestureSettingsByDeviceType(Z.pointerType).dblClickDragToZoom){var de=p[this.hash].lastClickTime,Te=d.now();if(de===null)return;Te-de<this.dblClickTimeThreshold&&(p[this.hash].draggingToZoom=!0),p[this.hash].lastClickTime=null}}function ot(Z){this.raiseEvent("canvas-release",{tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,insideElementPressed:Z.insideElementPressed,insideElementReleased:Z.insideElementReleased,originalEvent:Z.originalEvent})}function nt(Z){this.raiseEvent("canvas-nonprimary-press",{tracker:Z.eventSource,position:Z.position,pointerType:Z.pointerType,button:Z.button,buttons:Z.buttons,originalEvent:Z.originalEvent})}function st(Z){this.raiseEvent("canvas-nonprimary-release",{tracker:Z.eventSource,position:Z.position,pointerType:Z.pointerType,button:Z.button,buttons:Z.buttons,originalEvent:Z.originalEvent})}function mt(Z){var de,Te,Ve,Ze={tracker:Z.eventSource,pointerType:Z.pointerType,gesturePoints:Z.gesturePoints,lastCenter:Z.lastCenter,center:Z.center,lastDistance:Z.lastDistance,distance:Z.distance,shift:Z.shift,originalEvent:Z.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",Ze),this.viewport&&(!(de=this.gestureSettingsByDeviceType(Z.pointerType)).pinchToZoom||Ze.preventDefaultPanAction&&Ze.preventDefaultZoomAction||(Te=this.viewport.pointFromPixel(Z.center,!0),de.zoomToRefPoint&&!Ze.preventDefaultPanAction&&(Ve=this.viewport.pointFromPixel(Z.lastCenter,!0).minus(Te),this.panHorizontal||(Ve.x=0),this.panVertical||(Ve.y=0),this.viewport.panBy(Ve,!0)),Ze.preventDefaultZoomAction||this.viewport.zoomBy(Z.distance/Z.lastDistance,Te,!0),this.viewport.applyConstraints()),de.pinchRotate&&!Ze.preventDefaultRotateAction)){var qt=Math.atan2(Z.gesturePoints[0].currentPos.y-Z.gesturePoints[1].currentPos.y,Z.gesturePoints[0].currentPos.x-Z.gesturePoints[1].currentPos.x),Tt=Math.atan2(Z.gesturePoints[0].lastPos.y-Z.gesturePoints[1].lastPos.y,Z.gesturePoints[0].lastPos.x-Z.gesturePoints[1].lastPos.x);Te=this.viewport.pointFromPixel(Z.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(qt-Tt)*(180/Math.PI),Te,!0)}}function It(Z){this.raiseEvent("canvas-focus",{tracker:Z.eventSource,originalEvent:Z.originalEvent})}function Jt(Z){this.raiseEvent("canvas-blur",{tracker:Z.eventSource,originalEvent:Z.originalEvent})}function jt(Z){var de,Te,Ve,Ze;(Ze=d.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=Ze,de={tracker:Z.eventSource,position:Z.position,scroll:Z.scroll,shift:Z.shift,originalEvent:Z.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",de),!de.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(Z.position.x=this.viewport.getContainerSize().x-Z.position.x),(Te=this.gestureSettingsByDeviceType(Z.pointerType)).scrollToZoom&&(Ve=Math.pow(this.zoomPerScroll,Z.scroll),this.viewport.zoomBy(Ve,Te.zoomToRefPoint?this.viewport.pointFromPixel(Z.position,!0):null),this.viewport.applyConstraints())),Z.preventDefault=de.preventDefault):Z.preventDefault=!0}function _i(Z){p[this.hash].mouseInside=!0,V(this),this.raiseEvent("container-enter",{tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,buttons:Z.buttons,pointers:Z.pointers,insideElementPressed:Z.insideElementPressed,buttonDownAny:Z.buttonDownAny,originalEvent:Z.originalEvent})}function xi(Z){Z.pointers<1&&(p[this.hash].mouseInside=!1,p[this.hash].animating||O(this)),this.raiseEvent("container-exit",{tracker:Z.eventSource,pointerType:Z.pointerType,position:Z.position,buttons:Z.buttons,pointers:Z.pointers,insideElementPressed:Z.insideElementPressed,buttonDownAny:Z.buttonDownAny,originalEvent:Z.originalEvent})}function Kt(Z){(function(de){if(!de._opening&&p[de.hash]){if(de.autoResize||p[de.hash].forceResize){var Te;if(de._autoResizePolling){Te=w(de.container);var Ve=p[de.hash].prevContainerSize;Te.equals(Ve)||(p[de.hash].needsResize=!0)}p[de.hash].needsResize&&function(Li,$i){var Vn,hn=Li.viewport,ji=hn.getZoom(),Bn=hn.getCenter();if(hn.resize($i,Li.preserveImageSizeOnResize),hn.panTo(Bn,!0),Li.preserveImageSizeOnResize)Vn=p[Li.hash].prevContainerSize.x/$i.x;else{var es=new d.Point(0,0),Fm=new d.Point(p[Li.hash].prevContainerSize.x,p[Li.hash].prevContainerSize.y).distanceTo(es);Vn=new d.Point($i.x,$i.y).distanceTo(es)/Fm*p[Li.hash].prevContainerSize.x/$i.x}hn.zoomTo(ji*Vn,null,!0),p[Li.hash].prevContainerSize=$i,p[Li.hash].forceRedraw=!0,p[Li.hash].needsResize=!1,p[Li.hash].forceResize=!1}(de,Te||w(de.container))}var Ze=de.viewport.update(),qt=de.world.update(Ze)||Ze;Ze&&de.raiseEvent("viewport-change"),de.referenceStrip&&(qt=de.referenceStrip.update(de.viewport)||qt);var Tt=p[de.hash].animating;!Tt&&qt&&(de.raiseEvent("animation-start"),V(de));var yi,un=Tt&&!qt;un&&(p[de.hash].animating=!1),(qt||un||p[de.hash].forceRedraw||de.world.needsDraw())&&((yi=de).imageLoader.clear(),yi.world.draw(),yi.raiseEvent("update-viewport",{}),de._drawOverlays(),de.navigator&&de.navigator.update(de.viewport),p[de.hash].forceRedraw=!1,qt&&de.raiseEvent("animation")),un&&(de.raiseEvent("animation-finish"),p[de.hash].mouseInside||O(de)),p[de.hash].animating=qt}})(Z),Z.isOpen()?Z._updateRequestId=R(Z,Kt):Z._updateRequestId=!1}function _t(Z,de){return Z?Z+de:de}function hi(){p[this.hash].lastZoomTime=d.now(),p[this.hash].zoomFactor=this.zoomPerSecond,p[this.hash].zooming=!0,Pe(this)}function bi(){p[this.hash].lastZoomTime=d.now(),p[this.hash].zoomFactor=1/this.zoomPerSecond,p[this.hash].zooming=!0,Pe(this)}function Ge(){p[this.hash].zooming=!1}function Pe(Z){d.requestAnimationFrame(d.delegate(Z,ut))}function ut(){var Z,de,Te;p[this.hash].zooming&&this.viewport&&(de=(Z=d.now())-p[this.hash].lastZoomTime,Te=Math.pow(p[this.hash].zoomFactor,de/1e3),this.viewport.zoomBy(Te),this.viewport.applyConstraints(),p[this.hash].lastZoomTime=Z,Pe(this))}function xt(){this.viewport&&(p[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function ct(){this.viewport&&(p[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Mt(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Je(){this.viewport&&this.viewport.goHome()}function Ut(){this.isFullPage()&&!d.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function we(){if(this.viewport){var Z=this.viewport.getRotation();this.viewport.flipped?Z+=this.rotationIncrement:Z-=this.rotationIncrement,this.viewport.setRotation(Z)}}function Re(){if(this.viewport){var Z=this.viewport.getRotation();this.viewport.flipped?Z-=this.rotationIncrement:Z+=this.rotationIncrement,this.viewport.setRotation(Z)}}function Me(){this.viewport.toggleFlip()}d.Viewer=function(Z){var de,Te,Ve=arguments,Ze=this;if(d.isPlainObject(Z)||(Z={id:Ve[0],xmlPath:Ve.length>1?Ve[1]:void 0,prefixUrl:Ve.length>2?Ve[2]:void 0,controls:Ve.length>3?Ve[3]:void 0,overlays:Ve.length>4?Ve[4]:void 0}),Z.config&&(d.extend(!0,Z,Z.config),delete Z.config),Z.drawerOptions=Object.assign({},["useCanvas"].reduce((Tt,yi)=>(Tt[yi]=Z[yi],delete Z[yi],Tt),{}),Z.drawerOptions),d.extend(!0,this,{id:Z.id,hash:Z.hash||v++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},d.DEFAULT_SETTINGS,Z),this.hash===void 0)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");p[this.hash]!==void 0&&d.console.warn("Hash "+this.hash+" has already been used."),p[this.hash]={fsBoundsDelta:new d.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=d.now(),d.EventSource.call(this),this.addHandler("open-failed",function(Tt){var yi=d.getString("Errors.OpenFailed",Tt.eventSource,Tt.message);Ze._showMessage(yi)}),d.ControlDock.call(this,Z),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=d.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(Te=this.canvas.style).width="100%",Te.height="100%",Te.overflow="hidden",Te.position="absolute",Te.top="0px",Te.left="0px",d.setElementTouchActionNone(this.canvas),Z.tabIndex!==""&&(this.canvas.tabIndex=Z.tabIndex===void 0?0:Z.tabIndex),this.container.className="openseadragon-container",function(Tt){Tt.width="100%",Tt.height="100%",Tt.position="relative",Tt.overflow="hidden",Tt.left="0px",Tt.top="0px",Tt.textAlign="left"}(this.container.style),d.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new d.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:d.delegate(this,X),keyDownHandler:d.delegate(this,te),keyHandler:d.delegate(this,ae),clickHandler:d.delegate(this,oe),dblClickHandler:d.delegate(this,Ae),dragHandler:d.delegate(this,ve),dragEndHandler:d.delegate(this,De),enterHandler:d.delegate(this,Ne),leaveHandler:d.delegate(this,We),pressHandler:d.delegate(this,vt),releaseHandler:d.delegate(this,ot),nonPrimaryPressHandler:d.delegate(this,nt),nonPrimaryReleaseHandler:d.delegate(this,st),scrollHandler:d.delegate(this,jt),pinchHandler:d.delegate(this,mt),focusHandler:d.delegate(this,It),blurHandler:d.delegate(this,Jt)}),this.outerTracker=new d.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:d.delegate(this,_i),leaveHandler:d.delegate(this,xi)}),this.toolbar&&(this.toolbar=new d.ControlDock({element:this.toolbar})),this.bindStandardControls(),p[this.hash].prevContainerSize=w(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){p[Ze.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new d.World({viewer:this}),this.world.addHandler("add-item",function(Tt){Ze.source=Ze.world.getItemAt(0).source,p[Ze.hash].forceRedraw=!0,Ze._updateRequestId||(Ze._updateRequestId=R(Ze,Kt))}),this.world.addHandler("remove-item",function(Tt){Ze.world.getItemCount()?Ze.source=Ze.world.getItemAt(0).source:Ze.source=null,p[Ze.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(Tt){Ze.viewport&&Ze.viewport._setContentBounds(Ze.world.getHomeBounds(),Ze.world.getContentFactor())}),this.world.addHandler("item-index-change",function(Tt){Ze.source=Ze.world.getItemAt(0).source}),this.viewport=new d.Viewport({containerSize:p[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,overlayPreserveContentDirection:this.overlayPreserveContentDirection,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new d.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:Z.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new d.TileCache({maxImageCacheCount:this.maxImageCacheCount}),Object.prototype.hasOwnProperty.call(this.drawerOptions,"useCanvas")&&(d.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'),this.drawerOptions.useCanvas||(this.drawer=d.HTMLDrawer),delete this.drawerOptions.useCanvas);let qt=Array.isArray(this.drawer)?this.drawer:[this.drawer];qt.length===0&&(qt=[d.DEFAULT_SETTINGS.drawer].flat(),d.console.warn("No valid drawers were selected. Using the default value.")),this.drawer=null;for(const Tt of qt)if(this.requestDrawer(Tt,{mainDrawer:!0,redrawImmediately:!1}))break;if(!this.drawer)throw d.console.error("No drawer could be created!"),"Error with creating the selected drawer(s)";for(this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),this.overlaysContainer=d.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(de=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(de,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(de=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(de,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new d.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime,drawer:this.drawer.getType(),loadTilesWithAjax:this.loadTilesWithAjax,ajaxHeaders:this.ajaxHeaders,ajaxWithCredentials:this.ajaxWithCredentials})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),de=0;de<this.customControls.length;de++)this.addControl(this.customControls[de].id,{anchor:this.customControls[de].anchor});d.requestAnimationFrame(function(){O(Ze)}),d._viewers.set(this.element,this)},d.extend(d.Viewer.prototype,d.EventSource.prototype,d.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(Z){return d.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(Z)},openTileSource:function(Z){return d.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(Z)},get buttons(){return d.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(Z,de){var Te=this;if(this.close(),!Z)return this;if(this.sequenceMode&&d.isArray(Z))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),de===void 0||isNaN(de)||(this.initialPage=de),this.tileSources=Z,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(d.isArray(Z)||(Z=[Z]),!Z.length)return this;this._opening=!0;for(var Ve,Ze=Z.length,qt=0,Tt=0,yi=function(){if(qt+Tt===Ze)if(qt){!Te._firstOpen&&Te.preserveViewport||(Te.viewport.goHome(!0),Te.viewport.update()),Te._firstOpen=!1;var $i=Z[0];if($i.tileSource&&($i=$i.tileSource),Te.overlays&&!Te.preserveOverlays)for(var Vn=0;Vn<Te.overlays.length;Vn++)Te.currentOverlays[Vn]=S(Te,Te.overlays[Vn]);Te._drawOverlays(),Te._opening=!1,Te.raiseEvent("open",{source:$i})}else Te._opening=!1,Te.raiseEvent("open-failed",Ve)},un=function($i){d.isPlainObject($i)&&$i.tileSource||($i={tileSource:$i}),$i.index!==void 0&&(d.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete $i.index),$i.collectionImmediately===void 0&&($i.collectionImmediately=!0);var Vn=$i.success;$i.success=function(ji){if(qt++,$i.tileSource.overlays)for(var Bn=0;Bn<$i.tileSource.overlays.length;Bn++)Te.addOverlay($i.tileSource.overlays[Bn]);Vn&&Vn(ji),yi()};var hn=$i.error;$i.error=function(ji){Tt++,Ve||(Ve=ji),hn&&hn(ji),yi()},Te.addTiledImage($i)},Li=0;Li<Z.length;Li++)un(Z[Li]);return this},close:function(){return p[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),p[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(p[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(d.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),p[this.navigator.hash]=null,delete p[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),p[this.hash]=null,delete p[this.hash],this.canvas=null,this.container=null,d._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},requestDrawer(Z,de){const Te=(de=d.extend(!0,{mainDrawer:!0,redrawImmediately:!0,drawerOptions:null},de)).mainDrawer,Ve=de.redrawImmediately,Ze=de.drawerOptions,qt=this.drawer;let Tt=null;if(Z&&Z.prototype instanceof d.DrawerBase?(Tt=Z,Z="custom"):typeof Z=="string"&&(Tt=d.determineDrawer(Z)),Tt||d.console.warn("Unsupported drawer! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase."),Tt&&Tt.isSupported()){qt&&Te&&qt.destroy();const yi=new Tt({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor,options:Ze||this.drawerOptions[Z]});return Te&&(this.drawer=yi,Ve&&this.forceRedraw()),yi}return!1},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(Z){return this.innerTracker.setTracking(Z),this.outerTracker.setTracking(Z),this.raiseEvent("mouse-enabled",{enabled:Z}),this},areControlsEnabled:function(){var Z,de=this.controls.length;for(Z=0;Z<this.controls.length;Z++)de=de&&this.controls[Z].isVisible();return de},setControlsEnabled:function(Z){return Z?V(this):O(this),this.raiseEvent("controls-enabled",{enabled:Z}),this},setDebugMode:function(Z){for(var de=0;de<this.world.getItemCount();de++)this.world.getItemAt(de).debugMode=Z;this.debugMode=Z,this.forceRedraw()},setAjaxHeaders:function(Z,de){if(Z===null&&(Z={}),d.isPlainObject(Z)){if(de===void 0&&(de=!0),this.ajaxHeaders=Z,de){for(var Te=0;Te<this.world.getItemCount();Te++)this.world.getItemAt(Te)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var Ve in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[Ve].setAjaxHeaders(this.ajaxHeaders,!0)}}else console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},addButton:function(Z){this.buttonGroup.addButton(Z)},isFullPage:function(){return p[this.hash]&&p[this.hash].fullPage},setFullPage:function(Z){var de,Te,Ve=document.body,Ze=Ve.style,qt=document.documentElement.style,Tt=this;if(Z===this.isFullPage())return this;var yi={fullPage:Z,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",yi),yi.preventDefaultAction)return this;if(Z&&this.element){for(this.elementSize=d.getElementSize(this.element),this.pageScroll=d.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=Ze.margin,this.docMargin=qt.margin,Ze.margin="0",qt.margin="0",this.bodyPadding=Ze.padding,this.docPadding=qt.padding,Ze.padding="0",qt.padding="0",this.bodyWidth=Ze.width,this.docWidth=qt.width,Ze.width="100%",qt.width="100%",this.bodyHeight=Ze.height,this.docHeight=qt.height,Ze.height="100%",qt.height="100%",this.bodyDisplay=Ze.display,Ze.display="block",this.previousBody=[],p[this.hash].prevElementParent=this.element.parentNode,p[this.hash].prevNextSibling=this.element.nextSibling,p[this.hash].prevElementWidth=this.element.style.width,p[this.hash].prevElementHeight=this.element.style.height,de=Ve.childNodes.length,Te=0;Te<de;Te++)this.previousBody.push(Ve.childNodes[0]),Ve.removeChild(Ve.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,Ve.appendChild(this.toolbar.element),d.addClass(this.toolbar.element,"fullpage")),d.addClass(this.element,"fullpage"),Ve.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=d.getElementSize(this.element).y-d.getElementSize(this.toolbar.element).y+"px"),p[this.hash].fullPage=!0,d.delegate(this,_i)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,Ze.margin=this.bodyMargin,qt.margin=this.docMargin,Ze.padding=this.bodyPadding,qt.padding=this.docPadding,Ze.width=this.bodyWidth,qt.width=this.docWidth,Ze.height=this.bodyHeight,qt.height=this.docHeight,Ze.display=this.bodyDisplay,Ve.removeChild(this.element),de=this.previousBody.length,Te=0;Te<de;Te++)Ve.appendChild(this.previousBody.shift());d.removeClass(this.element,"fullpage"),p[this.hash].prevElementParent.insertBefore(this.element,p[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(Ve.removeChild(this.toolbar.element),d.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=p[this.hash].prevElementWidth,this.element.style.height=p[this.hash].prevElementHeight;var un=0,Li=function(){d.setPageScroll(Tt.pageScroll);var $i=d.getPageScroll();++un<10&&($i.x!==Tt.pageScroll.x||$i.y!==Tt.pageScroll.y)&&d.requestAnimationFrame(Li)};d.requestAnimationFrame(Li),p[this.hash].fullPage=!1,d.delegate(this,xi)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:Z}),this},setFullScreen:function(Z){var de=this;if(!d.supportsFullScreen)return this.setFullPage(Z);if(d.isFullScreen()===Z)return this;var Te={fullScreen:Z,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",Te),Te.preventDefaultAction)return this;if(Z){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var Ve=function(){var Ze=d.isFullScreen();Ze||(d.removeEvent(document,d.fullScreenEventName,Ve),d.removeEvent(document,d.fullScreenErrorEventName,Ve),de.setFullPage(!1),de.isFullPage()&&(de.element.style.width=de.fullPageStyleWidth,de.element.style.height=de.fullPageStyleHeight)),de.navigator&&de.viewport&&setTimeout(function(){de.navigator.update(de.viewport)}),de.raiseEvent("full-screen",{fullScreen:Ze})};d.addEvent(document,d.fullScreenEventName,Ve),d.addEvent(document,d.fullScreenErrorEventName,Ve),d.requestFullScreen(document.body)}else d.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return d.isFullScreen()&&this.isFullPage()},setVisible:function(Z){return this.container.style.visibility=Z?"":"hidden",this.raiseEvent("visible",{visible:Z}),this},addTiledImage:function(Z){d.console.assert(Z,"[Viewer.addTiledImage] options is required"),d.console.assert(Z.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),d.console.assert(!Z.replace||Z.index>-1&&Z.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var de=this;Z.replace&&(Z.replaceItem=de.world.getItemAt(Z.index)),this._hideMessage(),Z.placeholderFillStyle===void 0&&(Z.placeholderFillStyle=this.placeholderFillStyle),Z.opacity===void 0&&(Z.opacity=this.opacity),Z.preload===void 0&&(Z.preload=this.preload),Z.compositeOperation===void 0&&(Z.compositeOperation=this.compositeOperation),Z.crossOriginPolicy===void 0&&(Z.crossOriginPolicy=Z.tileSource.crossOriginPolicy!==void 0?Z.tileSource.crossOriginPolicy:this.crossOriginPolicy),Z.ajaxWithCredentials===void 0&&(Z.ajaxWithCredentials=this.ajaxWithCredentials),Z.loadTilesWithAjax===void 0&&(Z.loadTilesWithAjax=this.loadTilesWithAjax),d.isPlainObject(Z.ajaxHeaders)||(Z.ajaxHeaders={});var Te={options:Z};function Ve(Tt){for(var yi=0;yi<de._loadQueue.length;yi++)if(de._loadQueue[yi]===Te){de._loadQueue.splice(yi,1);break}de._loadQueue.length===0&&Ze(Te),de.raiseEvent("add-item-failed",Tt),Z.error&&Z.error(Tt)}function Ze(Tt){de.collectionMode&&(de.world.arrange({immediately:Tt.options.collectionImmediately,rows:de.collectionRows,columns:de.collectionColumns,layout:de.collectionLayout,tileSize:de.collectionTileSize,tileMargin:de.collectionTileMargin}),de.world.setAutoRefigureSizes(!0))}function qt(){for(var Tt,yi,un;de._loadQueue.length&&(Tt=de._loadQueue[0]).tileSource;){if(de._loadQueue.splice(0,1),Tt.options.replace){var Li=de.world.getIndexOfItem(Tt.options.replaceItem);Li!==-1&&(Tt.options.index=Li),de.world.removeItem(Tt.options.replaceItem)}yi=new d.TiledImage({viewer:de,source:Tt.tileSource,viewport:de.viewport,drawer:de.drawer,tileCache:de.tileCache,imageLoader:de.imageLoader,x:Tt.options.x,y:Tt.options.y,width:Tt.options.width,height:Tt.options.height,fitBounds:Tt.options.fitBounds,fitBoundsPlacement:Tt.options.fitBoundsPlacement,clip:Tt.options.clip,placeholderFillStyle:Tt.options.placeholderFillStyle,opacity:Tt.options.opacity,preload:Tt.options.preload,degrees:Tt.options.degrees,flipped:Tt.options.flipped,compositeOperation:Tt.options.compositeOperation,springStiffness:de.springStiffness,animationTime:de.animationTime,minZoomImageRatio:de.minZoomImageRatio,wrapHorizontal:de.wrapHorizontal,wrapVertical:de.wrapVertical,maxTilesPerFrame:de.maxTilesPerFrame,immediateRender:de.immediateRender,blendTime:de.blendTime,alwaysBlend:de.alwaysBlend,minPixelRatio:de.minPixelRatio,smoothTileEdgesMinZoom:de.smoothTileEdgesMinZoom,iOSDevice:de.iOSDevice,crossOriginPolicy:Tt.options.crossOriginPolicy,ajaxWithCredentials:Tt.options.ajaxWithCredentials,loadTilesWithAjax:Tt.options.loadTilesWithAjax,ajaxHeaders:Tt.options.ajaxHeaders,debugMode:de.debugMode,subPixelRoundingForTransparency:de.subPixelRoundingForTransparency}),de.collectionMode&&de.world.setAutoRefigureSizes(!1),de.navigator&&(un=d.extend({},Tt.options,{replace:!1,originalTiledImage:yi,tileSource:Tt.tileSource}),de.navigator.addTiledImage(un)),de.world.addItem(yi,{index:Tt.options.index}),de._loadQueue.length===0&&Ze(Tt),de.world.getItemCount()!==1||de.preserveViewport||de.viewport.goHome(!0),Tt.options.success&&Tt.options.success({item:yi})}}d.isArray(Z.tileSource)?setTimeout(function(){Ve({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:Z.tileSource,options:Z})}):(this._loadQueue.push(Te),function(Tt,yi,un,Li,$i){var Vn=Tt;if(d.type(yi)==="string"){if(yi.match(/^\s*<.*>\s*$/))yi=d.parseXml(yi);else if(yi.match(/^\s*[{[].*[}\]]\s*$/))try{var hn=d.parseJSON(yi);yi=hn}catch{}}function ji(Bn,es){Bn.ready?Li(Bn):(Bn.addHandler("ready",function(){Li(Bn)}),Bn.addHandler("open-failed",function(Fm){$i({message:Fm.message,source:es})}))}setTimeout(function(){if(d.type(yi)==="string")(yi=new d.TileSource({url:yi,crossOriginPolicy:un.crossOriginPolicy!==void 0?un.crossOriginPolicy:Tt.crossOriginPolicy,ajaxWithCredentials:Tt.ajaxWithCredentials,ajaxHeaders:un.ajaxHeaders?un.ajaxHeaders:Tt.ajaxHeaders,splitHashDataForPost:Tt.splitHashDataForPost,success:function(Um){Li(Um.tileSource)}})).addHandler("open-failed",function(Um){$i(Um)});else if(d.isPlainObject(yi)||yi.nodeType)if(yi.crossOriginPolicy!==void 0||un.crossOriginPolicy===void 0&&Tt.crossOriginPolicy===void 0||(yi.crossOriginPolicy=un.crossOriginPolicy!==void 0?un.crossOriginPolicy:Tt.crossOriginPolicy),yi.ajaxWithCredentials===void 0&&(yi.ajaxWithCredentials=Tt.ajaxWithCredentials),d.isFunction(yi.getTileUrl)){var Bn=new d.TileSource(yi);Bn.getTileUrl=yi.getTileUrl,Li(Bn)}else{var es=d.TileSource.determineType(Vn,yi);if(!es)return void $i({message:"Unable to load TileSource",source:yi});var Fm=es.prototype.configure.apply(Vn,[yi]);ji(new es(Fm),yi)}else ji(yi,yi)})}(this,Z.tileSource,Z,function(Tt){Te.tileSource=Tt,qt()},function(Tt){Tt.options=Z,Ve(Tt),qt()}))},addSimpleImage:function(Z){d.console.assert(Z,"[Viewer.addSimpleImage] options is required"),d.console.assert(Z.url,"[Viewer.addSimpleImage] options.url is required");var de=d.extend({},Z,{tileSource:{type:"image",url:Z.url}});delete de.url,this.addTiledImage(de)},addLayer:function(Z){var de=this;d.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var Te=d.extend({},Z,{success:function(Ve){de.raiseEvent("add-layer",{options:Z,drawer:Ve.item})},error:function(Ve){de.raiseEvent("add-layer-failed",Ve)}});return this.addTiledImage(Te),this},getLayerAtLevel:function(Z){return d.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(Z)},getLevelOfLayer:function(Z){return d.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(Z)},getLayersCount:function(){return d.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(Z,de){return d.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(Z,de)},removeLayer:function(Z){return d.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(Z)},forceRedraw:function(){return p[this.hash].forceRedraw=!0,this},forceResize:function(){p[this.hash].needsResize=!0,p[this.hash].forceResize=!0},bindSequenceControls:function(){var Z=d.delegate(this,$),de=d.delegate(this,G),Te=d.delegate(this,this.goToNextPage),Ve=d.delegate(this,this.goToPreviousPage),Ze=this.navImages,qt=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(qt=!1),this.previousButton=new d.Button({element:this.previousButton?d.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.PreviousPage"),srcRest:_t(this.prefixUrl,Ze.previous.REST),srcGroup:_t(this.prefixUrl,Ze.previous.GROUP),srcHover:_t(this.prefixUrl,Ze.previous.HOVER),srcDown:_t(this.prefixUrl,Ze.previous.DOWN),onRelease:Ve,onFocus:Z,onBlur:de}),this.nextButton=new d.Button({element:this.nextButton?d.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.NextPage"),srcRest:_t(this.prefixUrl,Ze.next.REST),srcGroup:_t(this.prefixUrl,Ze.next.GROUP),srcHover:_t(this.prefixUrl,Ze.next.HOVER),srcDown:_t(this.prefixUrl,Ze.next.DOWN),onRelease:Te,onFocus:Z,onBlur:de}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),qt&&(this.paging=new d.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:d.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||d.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var Z=d.delegate(this,hi),de=d.delegate(this,Ge),Te=d.delegate(this,xt),Ve=d.delegate(this,bi),Ze=d.delegate(this,ct),qt=d.delegate(this,Je),Tt=d.delegate(this,Ut),yi=d.delegate(this,we),un=d.delegate(this,Re),Li=d.delegate(this,Me),$i=d.delegate(this,$),Vn=d.delegate(this,G),hn=this.navImages,ji=[],Bn=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(Bn=!1),this.showZoomControl&&(ji.push(this.zoomInButton=new d.Button({element:this.zoomInButton?d.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.ZoomIn"),srcRest:_t(this.prefixUrl,hn.zoomIn.REST),srcGroup:_t(this.prefixUrl,hn.zoomIn.GROUP),srcHover:_t(this.prefixUrl,hn.zoomIn.HOVER),srcDown:_t(this.prefixUrl,hn.zoomIn.DOWN),onPress:Z,onRelease:de,onClick:Te,onEnter:Z,onExit:de,onFocus:$i,onBlur:Vn})),ji.push(this.zoomOutButton=new d.Button({element:this.zoomOutButton?d.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.ZoomOut"),srcRest:_t(this.prefixUrl,hn.zoomOut.REST),srcGroup:_t(this.prefixUrl,hn.zoomOut.GROUP),srcHover:_t(this.prefixUrl,hn.zoomOut.HOVER),srcDown:_t(this.prefixUrl,hn.zoomOut.DOWN),onPress:Ve,onRelease:de,onClick:Ze,onEnter:Ve,onExit:de,onFocus:$i,onBlur:Vn}))),this.showHomeControl&&ji.push(this.homeButton=new d.Button({element:this.homeButton?d.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.Home"),srcRest:_t(this.prefixUrl,hn.home.REST),srcGroup:_t(this.prefixUrl,hn.home.GROUP),srcHover:_t(this.prefixUrl,hn.home.HOVER),srcDown:_t(this.prefixUrl,hn.home.DOWN),onRelease:qt,onFocus:$i,onBlur:Vn})),this.showFullPageControl&&ji.push(this.fullPageButton=new d.Button({element:this.fullPageButton?d.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.FullPage"),srcRest:_t(this.prefixUrl,hn.fullpage.REST),srcGroup:_t(this.prefixUrl,hn.fullpage.GROUP),srcHover:_t(this.prefixUrl,hn.fullpage.HOVER),srcDown:_t(this.prefixUrl,hn.fullpage.DOWN),onRelease:Tt,onFocus:$i,onBlur:Vn})),this.showRotationControl&&(ji.push(this.rotateLeftButton=new d.Button({element:this.rotateLeftButton?d.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.RotateLeft"),srcRest:_t(this.prefixUrl,hn.rotateleft.REST),srcGroup:_t(this.prefixUrl,hn.rotateleft.GROUP),srcHover:_t(this.prefixUrl,hn.rotateleft.HOVER),srcDown:_t(this.prefixUrl,hn.rotateleft.DOWN),onRelease:yi,onFocus:$i,onBlur:Vn})),ji.push(this.rotateRightButton=new d.Button({element:this.rotateRightButton?d.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.RotateRight"),srcRest:_t(this.prefixUrl,hn.rotateright.REST),srcGroup:_t(this.prefixUrl,hn.rotateright.GROUP),srcHover:_t(this.prefixUrl,hn.rotateright.HOVER),srcDown:_t(this.prefixUrl,hn.rotateright.DOWN),onRelease:un,onFocus:$i,onBlur:Vn}))),this.showFlipControl&&ji.push(this.flipButton=new d.Button({element:this.flipButton?d.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:d.getString("Tooltips.Flip"),srcRest:_t(this.prefixUrl,hn.flip.REST),srcGroup:_t(this.prefixUrl,hn.flip.GROUP),srcHover:_t(this.prefixUrl,hn.flip.HOVER),srcDown:_t(this.prefixUrl,hn.flip.DOWN),onRelease:Li,onFocus:$i,onBlur:Vn})),Bn?(this.buttonGroup=new d.ButtonGroup({buttons:ji,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",d.delegate(this,Mt)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||d.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||d.ControlAnchor.TOP_LEFT})):this.customButtons=ji),this},currentPage:function(){return this._sequenceIndex},goToPage:function(Z){return this.tileSources&&Z>=0&&Z<this.tileSources.length&&(this._sequenceIndex=Z,this._updateSequenceButtons(Z),this.open(this.tileSources[Z]),this.referenceStrip&&this.referenceStrip.setFocus(Z),this.raiseEvent("page",{page:Z})),this},addOverlay:function(Z,de,Te,Ve){var Ze;if(Ze=d.isPlainObject(Z)?Z:{element:Z,location:de,placement:Te,onDraw:Ve},Z=d.getElement(Ze.element),B(this.currentOverlays,Z)>=0)return this;var qt=S(this,Ze);return this.currentOverlays.push(qt),qt.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:Z,location:Ze.location,placement:Ze.placement}),this},updateOverlay:function(Z,de,Te){var Ve;return Z=d.getElement(Z),(Ve=B(this.currentOverlays,Z))>=0&&(this.currentOverlays[Ve].update(de,Te),p[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:Z,location:de,placement:Te})),this},removeOverlay:function(Z){var de;return Z=d.getElement(Z),(de=B(this.currentOverlays,Z))>=0&&(this.currentOverlays[de].destroy(),this.currentOverlays.splice(de,1),p[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:Z})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return p[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(Z){var de;return Z=d.getElement(Z),(de=B(this.currentOverlays,Z))>=0?this.currentOverlays[de]:null},_updateSequenceButtons:function(Z){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==Z?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(Z>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(Z){this._hideMessage();var de=d.makeNeutralElement("div");de.appendChild(document.createTextNode(Z)),this.messageDiv=d.makeCenteredNode(de),d.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var Z=this.messageDiv;Z&&(Z.parentNode.removeChild(Z),delete this.messageDiv)},gestureSettingsByDeviceType:function(Z){switch(Z){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var Z,de=this.currentOverlays.length;for(Z=0;Z<de;Z++)this.currentOverlays[Z].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new d.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else d.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),d.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){d.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var Z=d.pixelDensityRatio,de=d.getCurrentPixelDensityRatio();Z!==de&&(d.pixelDensityRatio=de,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var Z=this._sequenceIndex-1;this.navPrevNextWrap&&Z<0&&(Z+=this.tileSources.length),this.goToPage(Z)},goToNextPage:function(){var Z=this._sequenceIndex+1;this.navPrevNextWrap&&Z>=this.tileSources.length&&(Z=0),this.goToPage(Z)},isAnimating:function(){return p[this.hash].animating}}),d.determineDrawer=function(Z){for(let de in t){const Te=t[de],Ve=Te.prototype;if(Ve&&Ve instanceof t.DrawerBase&&d.isFunction(Ve.getType)&&Ve.getType.call(Te)===Z)return Te}return null}}(t),function(d){function p(D){var O={tracker:D.eventSource,position:D.position,quick:D.quick,shift:D.shift,originalEvent:D.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",O),!O.preventDefaultAction&&D.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(D.position.x=this.viewport.getContainerSize().x-D.position.x);var V=this.viewport.pointFromPixel(D.position);this.panVertical?this.panHorizontal||(V.x=this.viewer.viewport.getCenter(!0).x):V.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(V),this.viewer.viewport.applyConstraints()}}function v(D){var O={tracker:D.eventSource,position:D.position,delta:D.delta,speed:D.speed,direction:D.direction,shift:D.shift,originalEvent:D.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",O),!O.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(D.delta.x=0),this.panVertical||(D.delta.y=0),this.viewer.viewport.flipped&&(D.delta.x=-D.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(D.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function w(D){D.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function S(D){var O={tracker:D.eventSource,position:D.position,scroll:D.scroll,shift:D.shift,originalEvent:D.originalEvent,preventDefault:D.preventDefault};this.viewer.raiseEvent("navigator-scroll",O),D.preventDefault=O.preventDefault}function B(D,O){R(D,"rotate("+O+"deg)")}function R(D,O){D.style.webkitTransform=O,D.style.mozTransform=O,D.style.msTransform=O,D.style.oTransform=O,D.style.transform=O}d.Navigator=function(D){var O,V,$,G,X=D.viewer,te=this;function ae(oe,Ae){B(te.displayRegionContainer,oe),B(te.displayRegion,-oe),te.viewport.setRotation(oe,Ae)}D.element||D.id?(D.element?(D.id&&d.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),D.element.id?D.id=D.element.id:D.id="navigator-"+d.now(),this.element=D.element):this.element=document.getElementById(D.id),D.controlOptions={anchor:d.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(D.id="navigator-"+d.now(),this.element=d.makeNeutralElement("div"),D.controlOptions={anchor:d.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:D.autoFade},D.position&&(D.position==="BOTTOM_RIGHT"?D.controlOptions.anchor=d.ControlAnchor.BOTTOM_RIGHT:D.position==="BOTTOM_LEFT"?D.controlOptions.anchor=d.ControlAnchor.BOTTOM_LEFT:D.position==="TOP_RIGHT"?D.controlOptions.anchor=d.ControlAnchor.TOP_RIGHT:D.position==="TOP_LEFT"?D.controlOptions.anchor=d.ControlAnchor.TOP_LEFT:D.position==="ABSOLUTE"&&(D.controlOptions.anchor=d.ControlAnchor.ABSOLUTE,D.controlOptions.top=D.top,D.controlOptions.left=D.left,D.controlOptions.height=D.height,D.controlOptions.width=D.width))),this.element.id=D.id,this.element.className+=" navigator",(D=d.extend(!0,{sizeRatio:d.DEFAULT_SETTINGS.navigatorSizeRatio},D,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:D.animationTime,autoResize:!1,minZoomImageRatio:1,background:D.background,opacity:D.opacity,borderColor:D.borderColor,displayRegionColor:D.displayRegionColor})).minPixelRatio=this.minPixelRatio=X.minPixelRatio,d.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new d.Point(1,1),this.totalBorderWidths=new d.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),D.controlOptions.anchor!==d.ControlAnchor.NONE&&($=this.element.style,G=this.borderWidth,$.margin="0px",$.border=G+"px solid "+D.borderColor,$.padding="0px",$.background=D.background,$.opacity=D.opacity,$.overflow="hidden"),this.displayRegion=d.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(oe,Ae){oe.position="relative",oe.top="0px",oe.left="0px",oe.fontSize="0px",oe.overflow="hidden",oe.border=Ae+"px solid "+D.displayRegionColor,oe.margin="0px",oe.padding="0px",oe.background="transparent",oe.float="left",oe.cssFloat="left",oe.zIndex=999999999,oe.cursor="default",oe.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),d.setElementPointerEventsNone(this.displayRegion),d.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=d.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",d.setElementPointerEventsNone(this.displayRegionContainer),d.setElementTouchActionNone(this.displayRegionContainer),X.addControl(this.element,D.controlOptions),this._resizeWithViewer=D.controlOptions.anchor!==d.ControlAnchor.ABSOLUTE&&D.controlOptions.anchor!==d.ControlAnchor.NONE,D.width&&D.height?(this.setWidth(D.width),this.setHeight(D.height)):this._resizeWithViewer&&(O=d.getElementSize(X.element),this.element.style.height=Math.round(O.y*D.sizeRatio)+"px",this.element.style.width=Math.round(O.x*D.sizeRatio)+"px",this.oldViewerSize=O,V=d.getElementSize(this.element),this.elementArea=V.x*V.y),this.oldContainerSize=new d.Point(0,0),d.Viewer.apply(this,[D]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),D.navigatorRotate&&(ae(D.viewer.viewport?D.viewer.viewport.getRotation():D.viewer.degrees||0,!0),D.viewer.addHandler("rotate",function(oe){ae(oe.degrees,oe.immediately)})),this.innerTracker.destroy(),this.innerTracker=new d.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:d.delegate(this,v),clickHandler:d.delegate(this,p),releaseHandler:d.delegate(this,w),scrollHandler:d.delegate(this,S),preProcessEventHandler:function(oe){oe.eventType==="wheel"&&(oe.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",d.setElementPointerEventsNone(this.canvas),d.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){te.viewport&&te.viewport.goHome(!0)}),X.world.addHandler("item-index-change",function(oe){window.setTimeout(function(){var Ae=te.world.getItemAt(oe.previousIndex);te.world.setItemIndex(Ae,oe.newIndex)},1)}),X.world.addHandler("remove-item",function(oe){var Ae=oe.item,ve=te._getMatchingItem(Ae);ve&&te.world.removeItem(ve)}),this.update(X.viewport)},d.extend(d.Navigator.prototype,d.EventSource.prototype,d.Viewer.prototype,{updateSize:function(){if(this.viewport){var D=new d.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);D.equals(this.oldContainerSize)||(this.viewport.resize(D,!0),this.viewport.goHome(!0),this.oldContainerSize=D,this.world.update(),this.world.draw(),this.update(this.viewer.viewport))}},setWidth:function(D){this.width=D,this.element.style.width=typeof D=="number"?D+"px":D,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(D){this.height=D,this.element.style.height=typeof D=="number"?D+"px":D,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(D){return this.viewport.setFlip(D),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(D){R(this.displayRegion,D),R(this.canvas,D),R(this.element,D)},update:function(D){var O,V,$,G,X,te;if(D||(D=this.viewer.viewport),O=d.getElementSize(this.viewer.element),this._resizeWithViewer&&O.x&&O.y&&!O.equals(this.oldViewerSize)&&(this.oldViewerSize=O,this.maintainSizeRatio||!this.elementArea?(V=O.x*this.sizeRatio,$=O.y*this.sizeRatio):(V=Math.sqrt(this.elementArea*(O.x/O.y)),$=this.elementArea/V),this.element.style.width=Math.round(V)+"px",this.element.style.height=Math.round($)+"px",this.elementArea||(this.elementArea=V*$),this.updateSize()),D&&this.viewport){if(G=D.getBoundsNoRotate(!0),X=this.viewport.pixelFromPointNoRotate(G.getTopLeft(),!1),te=this.viewport.pixelFromPointNoRotate(G.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var ae=D.getRotation(!0);B(this.displayRegion,-ae)}var oe=this.displayRegion.style;oe.display=this.world.getItemCount()?"block":"none",oe.top=X.y.toFixed(2)+"px",oe.left=X.x.toFixed(2)+"px";var Ae=te.x-X.x,ve=te.y-X.y;oe.width=Math.round(Math.max(Ae,0))+"px",oe.height=Math.round(Math.max(ve,0))+"px"}},addTiledImage:function(D){var O=this,V=D.originalTiledImage;delete D.original;var $=d.extend({},D,{success:function(G){var X=G.item;function te(){O._matchBounds(X,V)}X._originalForNavigator=V,O._matchBounds(X,V,!0),O._matchOpacity(X,V),O._matchCompositeOperation(X,V),V.addHandler("bounds-change",te),V.addHandler("clip-change",te),V.addHandler("opacity-change",function(){O._matchOpacity(X,V)}),V.addHandler("composite-operation-change",function(){O._matchCompositeOperation(X,V)})}});return d.Viewer.prototype.addTiledImage.apply(this,[$])},destroy:function(){return d.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(D){for(var O,V=this.world.getItemCount(),$=0;$<V;$++)if((O=this.world.getItemAt($))._originalForNavigator===D)return O;return null},_matchBounds:function(D,O,V){var $=O.getBoundsNoRotate();D.setPosition($.getTopLeft(),V),D.setWidth($.width,V),D.setRotation(O.getRotation(),V),D.setClip(O.getClip()),D.setFlip(O.getFlip())},_matchOpacity:function(D,O){D.setOpacity(O.opacity)},_matchCompositeOperation:function(D,O){D.setCompositeOperation(O.compositeOperation)}})}(t),function(d){var p={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};d.extend(d,{getString:function(v){var w,S=v.split("."),B=null,R=arguments,D=p;for(w=0;w<S.length-1;w++)D=D[S[w]]||{};return typeof(B=D[S[w]])!="string"&&(d.console.error("Untranslated source string:",v),B=""),B.replace(/\{\d+\}/g,function(O){var V=parseInt(O.match(/\d+/),10)+1;return V<R.length?R[V]:""})},setString:function(v,w){var S,B=v.split("."),R=p;for(S=0;S<B.length-1;S++)R[B[S]]||(R[B[S]]={}),R=R[B[S]];R[B[S]]=w}})}(t),function(d){d.Point=function(p,v){this.x=typeof p=="number"?p:0,this.y=typeof v=="number"?v:0},d.Point.prototype={clone:function(){return new d.Point(this.x,this.y)},plus:function(p){return new d.Point(this.x+p.x,this.y+p.y)},minus:function(p){return new d.Point(this.x-p.x,this.y-p.y)},times:function(p){return new d.Point(this.x*p,this.y*p)},divide:function(p){return new d.Point(this.x/p,this.y/p)},negate:function(){return new d.Point(-this.x,-this.y)},distanceTo:function(p){return Math.sqrt(Math.pow(this.x-p.x,2)+Math.pow(this.y-p.y,2))},squaredDistanceTo:function(p){return Math.pow(this.x-p.x,2)+Math.pow(this.y-p.y,2)},apply:function(p){return new d.Point(p(this.x),p(this.y))},equals:function(p){return p instanceof d.Point&&this.x===p.x&&this.y===p.y},rotate:function(p,v){var w,S;if(v=v||new d.Point(0,0),p%90==0)switch(d.positiveModulo(p,360)){case 0:w=1,S=0;break;case 90:w=0,S=1;break;case 180:w=-1,S=0;break;case 270:w=0,S=-1}else{var B=p*Math.PI/180;w=Math.cos(B),S=Math.sin(B)}var R=w*(this.x-v.x)-S*(this.y-v.y)+v.x,D=S*(this.x-v.x)+w*(this.y-v.y)+v.y;return new d.Point(R,D)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(t),function(d){d.TileSource=function(p,v,w,S,B,R){var D,O,V=this,$=arguments;if(D=d.isPlainObject(p)?p:{width:$[0],height:$[1],tileSize:$[2],tileOverlap:$[3],minLevel:$[4],maxLevel:$[5]},d.EventSource.call(this),d.extend(!0,this,D),!this.success){for(O=0;O<arguments.length;O++)if(d.isFunction(arguments[O])){this.success=arguments[O];break}}this.success&&this.addHandler("ready",function(G){V.success(G)}),d.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new d.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=D.width&&D.height?D.width/D.height:1,this.dimensions=new d.Point(D.width,D.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=D.tileOverlap?D.tileOverlap:0,this.minLevel=D.minLevel?D.minLevel:0,this.maxLevel=D.maxLevel!==void 0&&D.maxLevel!==null?D.maxLevel:D.width&&D.height?Math.ceil(Math.log(Math.max(D.width,D.height))/Math.log(2)):0,this.success&&d.isFunction(this.success)&&this.success(this))},d.TileSource.prototype={getTileSize:function(p){return d.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(p){return this._tileWidth?this._tileWidth:this.getTileSize(p)},getTileHeight:function(p){return this._tileHeight?this._tileHeight:this.getTileSize(p)},setMaxLevel:function(p){this.maxLevel=p,this._memoizeLevelScale()},getLevelScale:function(p){return this._memoizeLevelScale(),this.getLevelScale(p)},_memoizeLevelScale:function(){var p,v={};for(p=0;p<=this.maxLevel;p++)v[p]=1/Math.pow(2,this.maxLevel-p);this.getLevelScale=function(w){return v[w]}},getNumTiles:function(p){var v=this.getLevelScale(p),w=Math.ceil(v*this.dimensions.x/this.getTileWidth(p)),S=Math.ceil(v*this.dimensions.y/this.getTileHeight(p));return new d.Point(w,S)},getPixelRatio:function(p){var v=this.dimensions.times(this.getLevelScale(p)),w=1/v.x*d.pixelDensityRatio,S=1/v.y*d.pixelDensityRatio;return new d.Point(w,S)},getClosestLevel:function(){var p,v;for(p=this.minLevel+1;p<=this.maxLevel&&!((v=this.getNumTiles(p)).x>1||v.y>1);p++);return p-1},getTileAtPoint:function(p,v){var w=v.x>=0&&v.x<=1&&v.y>=0&&v.y<=1/this.aspectRatio;d.console.assert(w,"[TileSource.getTileAtPoint] must be called with a valid point.");var S=this.dimensions.x*this.getLevelScale(p),B=v.x*S,R=v.y*S,D=Math.floor(B/this.getTileWidth(p)),O=Math.floor(R/this.getTileHeight(p));return v.x>=1&&(D=this.getNumTiles(p).x-1),v.y>=1/this.aspectRatio-1e-15&&(O=this.getNumTiles(p).y-1),new d.Point(D,O)},getTileBounds:function(p,v,w,S){var B=this.dimensions.times(this.getLevelScale(p)),R=this.getTileWidth(p),D=this.getTileHeight(p),O=v===0?0:R*v-this.tileOverlap,V=w===0?0:D*w-this.tileOverlap,$=R+(v===0?1:2)*this.tileOverlap,G=D+(w===0?1:2)*this.tileOverlap,X=1/B.x;return $=Math.min($,B.x-O),G=Math.min(G,B.y-V),S?new d.Rect(0,0,$,G):new d.Rect(O*X,V*X,$*X,G*X)},getImageInfo:function(p){var v,w,S,B,R,D,O,V=this;p&&(O=(D=(R=p.split("/"))[R.length-1]).lastIndexOf("."))>-1&&(R[R.length-1]=D.slice(0,O));var $=null;if(this.splitHashDataForPost){var G=p.indexOf("#");G!==-1&&($=p.substring(G+1),p=p.substr(0,G))}w=function(X){typeof X=="string"&&(X=d.parseXml(X));var te=d.TileSource.determineType(V,X,p);te?((B=te.prototype.configure.apply(V,[X,p,$])).ajaxWithCredentials===void 0&&(B.ajaxWithCredentials=V.ajaxWithCredentials),S=new te(B),V.ready=!0,V.raiseEvent("ready",{tileSource:S})):V.raiseEvent("open-failed",{message:"Unable to load TileSource",source:p})},p.match(/\.js$/)?(v=p.split("/").pop().replace(".js",""),d.jsonp({url:p,async:!1,callbackName:v,callback:w})):d.makeAjaxRequest({url:p,postData:$,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(X){var te=function(ae){var oe,Ae,ve=ae.responseText,De=ae.status;if(!ae)throw new Error(d.getString("Errors.Security"));if(ae.status!==200&&ae.status!==0)throw oe=(De=ae.status)===404?"Not Found":ae.statusText,new Error(d.getString("Errors.Status",De,oe));if(ve.match(/^\s*<.*/))try{Ae=ae.responseXML&&ae.responseXML.documentElement?ae.responseXML:d.parseXml(ve)}catch{Ae=ae.responseText}else if(ve.match(/\s*[{[].*/))try{Ae=d.parseJSON(ve)}catch{Ae=ve}else Ae=ve;return Ae}(X);w(te)},error:function(X,te){var ae;try{ae="HTTP "+X.status+" attempting to load TileSource: "+p}catch{ae=(te!==void 0&&te.toString?te.toString():"Unknown error")+" attempting to load TileSource: "+p}d.console.error(ae),V.raiseEvent("open-failed",{message:ae,source:p,postData:$})}})},supports:function(p,v){return!1},configure:function(p,v,w){throw new Error("Method not implemented.")},getTileUrl:function(p,v,w){throw new Error("Method not implemented.")},getTilePostData:function(p,v,w){return null},getTileAjaxHeaders:function(p,v,w){return{}},getTileHashKey:function(p,v,w,S,B,R){return D=typeof S!="string"?p+"/"+v+"_"+w:S,B?D+"+"+JSON.stringify(B):D;var D},tileExists:function(p,v,w){var S=this.getNumTiles(p);return p>=this.minLevel&&p<=this.maxLevel&&v>=0&&w>=0&&v<S.x&&w<S.y},hasTransparency:function(p,v,w,S){return!!p||v.match(".png")},downloadTileStart:function(p){var v=p.userData,w=new Image;v.image=w,v.request=null;var S=function(B){w?(w.onload=w.onerror=w.onabort=null,p.finish(B?null:w,v.request,B)):p.finish(null,v.request,"Image load failed: undefined Image instance.")};w.onload=function(){S()},w.onabort=w.onerror=function(){S("Image load aborted.")},p.loadWithAjax?v.request=d.makeAjaxRequest({url:p.src,withCredentials:p.ajaxWithCredentials,headers:p.ajaxHeaders,responseType:"arraybuffer",postData:p.postData,success:function(B){var R;try{R=new window.Blob([B.response])}catch(V){var D=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(V.name==="TypeError"&&D){var O=new D;O.append(B.response),R=O.getBlob()}}R.size===0?S("Empty image response."):w.src=(window.URL||window.webkitURL).createObjectURL(R)},error:function(B){S("Image load aborted - XHR error")}}):(p.crossOriginPolicy!==!1&&(w.crossOrigin=p.crossOriginPolicy),w.src=p.src)},downloadTileAbort:function(p){p.userData.request&&p.userData.request.abort();var v=p.userData.image;p.userData.image&&(v.onload=v.onerror=v.onabort=null)},createTileCache:function(p,v,w){p._data=v},destroyTileCache:function(p){p._data=null,p._renderedContext=null},getTileCacheData:function(p){return p._data},getTileCacheDataAsImage:function(p){return p._data},getTileCacheDataAsContext2D:function(p){if(!p._renderedContext){var v=document.createElement("canvas");v.width=p._data.width,v.height=p._data.height,p._renderedContext=v.getContext("2d"),p._renderedContext.drawImage(p._data,0,0),p._data=null}return p._renderedContext}},d.extend(!0,d.TileSource.prototype,d.EventSource.prototype),d.TileSource.determineType=function(p,v,w){var S;for(S in t)if(S.match(/.+TileSource$/)&&d.isFunction(t[S])&&d.isFunction(t[S].prototype.supports)&&t[S].prototype.supports.call(p,v,w))return t[S];return d.console.error("No TileSource was able to open %s %s",w,v),null}}(t),function(d){function p(v,w){var S,B,R=w.Image,D=R.Url,O=R.Format,V=R.Size,$=R.DisplayRect||[],G=parseInt(V.Width,10),X=parseInt(V.Height,10),te=parseInt(R.TileSize,10),ae=parseInt(R.Overlap,10),oe=[];for(B=0;B<$.length;B++)S=$[B].Rect,oe.push(new d.DisplayRect(parseInt(S.X,10),parseInt(S.Y,10),parseInt(S.Width,10),parseInt(S.Height,10),parseInt(S.MinLevel,10),parseInt(S.MaxLevel,10)));return d.extend(!0,{width:G,height:X,tileSize:te,tileOverlap:ae,minLevel:null,maxLevel:null,tilesUrl:D,fileFormat:O,displayRects:oe},w)}d.DziTileSource=function(v,w,S,B,R,D,O,V,$){var G,X,te,ae;if(ae=d.isPlainObject(v)?v:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=ae.tilesUrl,this.fileFormat=ae.fileFormat,this.displayRects=ae.displayRects,this.displayRects)for(G=this.displayRects.length-1;G>=0;G--)for(te=(X=this.displayRects[G]).minLevel;te<=X.maxLevel;te++)this._levelRects[te]||(this._levelRects[te]=[]),this._levelRects[te].push(X);d.TileSource.apply(this,[ae])},d.extend(d.DziTileSource.prototype,d.TileSource.prototype,{supports:function(v,w){var S;return v.Image?S=v.Image.xmlns:v.documentElement&&(v.documentElement.localName!=="Image"&&v.documentElement.tagName!=="Image"||(S=v.documentElement.namespaceURI)),(S=(S||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||S.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(v,w,S){var B;return B=d.isPlainObject(v)?p(0,v):function(R,D){if(!D||!D.documentElement)throw new Error(d.getString("Errors.Xml"));var O,V,$,G,X,te=D.documentElement,ae=te.localName||te.tagName,oe=D.documentElement.namespaceURI,Ae=null,ve=[];if(ae==="Image")try{if((G=te.getElementsByTagName("Size")[0])===void 0&&(G=te.getElementsByTagNameNS(oe,"Size")[0]),Ae={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:te.getAttribute("Url"),Format:te.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(te.getAttribute("Overlap"),10),TileSize:parseInt(te.getAttribute("TileSize"),10),Size:{Height:parseInt(G.getAttribute("Height"),10),Width:parseInt(G.getAttribute("Width"),10)}}},!d.imageFormatSupported(Ae.Image.Format))throw new Error(d.getString("Errors.ImageFormat",Ae.Image.Format.toUpperCase()));for((O=te.getElementsByTagName("DisplayRect"))===void 0&&(O=te.getElementsByTagNameNS(oe,"DisplayRect")[0]),X=0;X<O.length;X++)($=(V=O[X]).getElementsByTagName("Rect")[0])===void 0&&($=V.getElementsByTagNameNS(oe,"Rect")[0]),ve.push({Rect:{X:parseInt($.getAttribute("X"),10),Y:parseInt($.getAttribute("Y"),10),Width:parseInt($.getAttribute("Width"),10),Height:parseInt($.getAttribute("Height"),10),MinLevel:parseInt(V.getAttribute("MinLevel"),10),MaxLevel:parseInt(V.getAttribute("MaxLevel"),10)}});return ve.length&&(Ae.Image.DisplayRect=ve),p(0,Ae)}catch(Ne){throw Ne instanceof Error?Ne:new Error(d.getString("Errors.Dzi"))}else{if(ae==="Collection")throw new Error(d.getString("Errors.Dzc"));if(ae==="Error"){var De=te.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(De)}}throw new Error(d.getString("Errors.Dzi"))}(0,v),w&&!B.tilesUrl&&(B.tilesUrl=w.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),w.search(/\.(dzi|xml|js)\?/)!==-1?B.queryParams=w.match(/\?.*/):B.queryParams=""),B},getTileUrl:function(v,w,S){return[this.tilesUrl,v,"/",w,"_",S,".",this.fileFormat,this.queryParams].join("")},tileExists:function(v,w,S){var B,R,D,O,V,$,G,X=this._levelRects[v];if(this.minLevel&&v<this.minLevel||this.maxLevel&&v>this.maxLevel)return!1;if(!X||!X.length)return!0;for(G=X.length-1;G>=0;G--)if(!(v<(B=X[G]).minLevel||v>B.maxLevel)&&(R=this.getLevelScale(v),D=B.x*R,O=B.y*R,V=D+B.width*R,$=O+B.height*R,D=Math.floor(D/this._tileWidth),O=Math.floor(O/this._tileWidth),V=Math.ceil(V/this._tileWidth),$=Math.ceil($/this._tileWidth),D<=w&&w<V&&O<=S&&S<$))return!0;return!1}})}(t),function(d){function p(S){var B=Array.isArray(S.profile)?S.profile[0]:S.profile,R=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(B)!==-1,D=!1;return S.version===2&&S.profile.length>1&&S.profile[1].supports&&(D=S.profile[1].supports.indexOf("sizeByW")!==-1),S.version===3&&S.extraFeatures&&(D=S.extraFeatures.indexOf("sizeByWh")!==-1),!R||D}function v(S){for(var B=[],R=0;R<S.sizes.length;R++)B.push({url:S._id+"/full/"+S.sizes[R].width+","+(S.version===3?S.sizes[R].height:"")+"/0/default."+S.tileFormat,width:S.sizes[R].width,height:S.sizes[R].height});return B.sort(function(D,O){return D.width-O.width})}function w(S,B,R){var D,O;if(S.nodeType===3&&R)(O=S.nodeValue.trim()).match(/^\d*$/)&&(O=Number(O)),B[R]?(d.isArray(B[R])||(B[R]=[B[R]]),B[R].push(O)):B[R]=O;else if(S.nodeType===1)for(D=0;D<S.childNodes.length;D++)w(S.childNodes[D],B,S.nodeName)}d.IIIFTileSource=function(S){if(d.extend(!0,this,S),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(S.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=S.version,this.tile_width&&this.tile_height)S.tileWidth=this.tile_width,S.tileHeight=this.tile_height;else if(this.tile_width)S.tileSize=this.tile_width;else if(this.tile_height)S.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)S.tileWidth=this.tiles[0].width,S.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var B=0;B<this.tiles.length;B++)for(var R=0;R<this.tiles[B].scaleFactors.length;R++){var D=this.tiles[B].scaleFactors[R];this.scale_factors.push(D),S.tileSizePerScaleFactor[D]={width:this.tiles[B].width,height:this.tiles[B].height||this.tiles[B].width}}}else if(p(S)){for(var O=Math.min(this.height,this.width),V=[256,512,1024],$=[],G=0;G<V.length;G++)V[G]<=O&&$.push(V[G]);$.length>0?S.tileSize=Math.max.apply(null,$):S.tileSize=O}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,S.levels=v(this),d.extend(!0,S,{width:S.levels[S.levels.length-1].width,height:S.levels[S.levels.length-1].height,tileSize:Math.max(S.height,S.width),tileOverlap:0,minLevel:0,maxLevel:S.levels.length-1}),this.levels=S.levels):d.console.error("Nothing in the info.json to construct image pyramids from");if(!S.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var X=Math.max.apply(null,this.scale_factors);S.maxLevel=Math.round(Math.log(X)*Math.LOG2E)}else S.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));if(this.sizes){var te=this.sizes.length;te!==S.maxLevel&&te!==S.maxLevel+1||(this.levelSizes=this.sizes.slice().sort((ae,oe)=>ae.width-oe.width),te===S.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}d.TileSource.apply(this,[S])},d.extend(d.IIIFTileSource.prototype,d.TileSource.prototype,{supports:function(S,B){return!!(S.protocol&&S.protocol==="http://iiif.io/api/image"||S["@context"]&&(S["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||S["@context"]==="http://iiif.io/api/image/1/context.json")||S.profile&&S.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||S.identifier&&S.width&&S.height||S.documentElement&&S.documentElement.tagName==="info"&&S.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(S,B,R){if(d.isPlainObject(S)){if(S["@context"]){var D=S["@context"];if(Array.isArray(D)){for(var O=0;O<D.length;O++)if(typeof D[O]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(D[O])||D[O]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){D=D[O];break}}switch(D){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":S.version=1;break;case"http://iiif.io/api/image/2/context.json":S.version=2;break;case"http://iiif.io/api/image/3/context.json":S.version=3;break;default:d.console.error("Data has a @context property which contains no known IIIF context URI.")}}else S["@context"]="http://iiif.io/api/image/1.0/context.json",S["@id"]=B.replace("/info.json",""),S.version=1;if(S.preferredFormats){for(var V=0;V<S.preferredFormats.length;V++)if(t.imageFormatSupported(S.preferredFormats[V])){S.tileFormat=S.preferredFormats[V];break}}return S}var $=function(G){if(!G||!G.documentElement)throw new Error(d.getString("Errors.Xml"));var X=G.documentElement,te=null;if(X.tagName==="info")try{return w(X,te={}),te}catch(ae){throw ae instanceof Error?ae:new Error(d.getString("Errors.IIIF"))}throw new Error(d.getString("Errors.IIIF"))}(S);return $["@context"]="http://iiif.io/api/image/1.0/context.json",$["@id"]=B.replace("/info.xml",""),$.version=1,$},getTileWidth:function(S){if(this.emulateLegacyImagePyramid)return d.TileSource.prototype.getTileWidth.call(this,S);var B=Math.pow(2,this.maxLevel-S);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[B]?this.tileSizePerScaleFactor[B].width:this._tileWidth},getTileHeight:function(S){if(this.emulateLegacyImagePyramid)return d.TileSource.prototype.getTileHeight.call(this,S);var B=Math.pow(2,this.maxLevel-S);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[B]?this.tileSizePerScaleFactor[B].height:this._tileHeight},getLevelScale:function(S){if(this.emulateLegacyImagePyramid){var B=NaN;return this.levels.length>0&&S>=this.minLevel&&S<=this.maxLevel&&(B=this.levels[S].width/this.levels[this.maxLevel].width),B}return d.TileSource.prototype.getLevelScale.call(this,S)},getNumTiles:function(S){if(this.emulateLegacyImagePyramid)return this.getLevelScale(S)?new d.Point(1,1):new d.Point(0,0);if(this.levelSizes){var B=this.levelSizes[S],R=Math.ceil(B.width/this.getTileWidth(S)),D=Math.ceil(B.height/this.getTileHeight(S));return new d.Point(R,D)}return d.TileSource.prototype.getNumTiles.call(this,S)},getTileAtPoint:function(S,B){if(this.emulateLegacyImagePyramid)return new d.Point(0,0);if(this.levelSizes){var R=B.x>=0&&B.x<=1&&B.y>=0&&B.y<=1/this.aspectRatio;d.console.assert(R,"[TileSource.getTileAtPoint] must be called with a valid point.");var D=this.levelSizes[S].width,O=B.x*D,V=B.y*D,$=Math.floor(O/this.getTileWidth(S)),G=Math.floor(V/this.getTileHeight(S));return B.x>=1&&($=this.getNumTiles(S).x-1),B.y>=1/this.aspectRatio-1e-15&&(G=this.getNumTiles(S).y-1),new d.Point($,G)}return d.TileSource.prototype.getTileAtPoint.call(this,S,B)},getTileUrl:function(S,B,R){if(this.emulateLegacyImagePyramid){var D=null;return this.levels.length>0&&S>=this.minLevel&&S<=this.maxLevel&&(D=this.levels[S].url),D}var O,V,$,G,X,te,ae,oe,Ae,ve,De,Ne,We,vt,ot,nt=Math.pow(.5,this.maxLevel-S);return this.levelSizes?(O=this.levelSizes[S].width,V=this.levelSizes[S].height):(O=Math.ceil(this.width*nt),V=Math.ceil(this.height*nt)),$=this.getTileWidth(S),G=this.getTileHeight(S),X=Math.round($/nt),te=Math.round(G/nt),ot=this.version===1?"native."+this.tileFormat:"default."+this.tileFormat,O<$&&V<G?(Ne=this.version===2&&O===this.width?"full":this.version===3&&O===this.width&&V===this.height?"max":this.version===3?O+","+V:O+",",ae="full"):(oe=B*X,Ae=R*te,ve=Math.min(X,this.width-oe),De=Math.min(te,this.height-Ae),ae=B===0&&R===0&&ve===this.width&&De===this.height?"full":[oe,Ae,ve,De].join(","),We=Math.min($,O-B*$),vt=Math.min(G,V-R*G),Ne=this.version===2&&We===this.width?"full":this.version===3&&We===this.width&&vt===this.height?"max":this.version===3?We+","+vt:We+","),[this._id,ae,Ne,"0",ot].join("/")},__testonly__:{canBeTiled:p,constructLevels:v}})}(t),function(d){d.OsmTileSource=function(p,v,w,S,B){var R;(R=d.isPlainObject(p)?p:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&R.height||(R.width=65572864,R.height=65572864),R.tileSize||(R.tileSize=256,R.tileOverlap=0),R.tilesUrl||(R.tilesUrl="http://tile.openstreetmap.org/"),R.minLevel=8,d.TileSource.apply(this,[R])},d.extend(d.OsmTileSource.prototype,d.TileSource.prototype,{supports:function(p,v){return p.type&&p.type==="openstreetmaps"},configure:function(p,v,w){return p},getTileUrl:function(p,v,w){return this.tilesUrl+(p-8)+"/"+v+"/"+w+".png"}})}(t),function(d){d.TmsTileSource=function(p,v,w,S,B){var R;R=d.isPlainObject(p)?p:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var D,O=256*Math.ceil(R.width/256),V=256*Math.ceil(R.height/256);D=O>V?O/256:V/256,R.maxLevel=Math.ceil(Math.log(D)/Math.log(2))-1,R.tileSize=256,R.width=O,R.height=V,d.TileSource.apply(this,[R])},d.extend(d.TmsTileSource.prototype,d.TileSource.prototype,{supports:function(p,v){return p.type&&p.type==="tiledmapservice"},configure:function(p,v,w){return p},getTileUrl:function(p,v,w){var S=this.getNumTiles(p).y-1;return this.tilesUrl+p+"/"+v+"/"+(S-w)+".png"}})}(t),function(d){d.ZoomifyTileSource=function(p){p.tileSize===void 0&&(p.tileSize=256),p.fileFormat===void 0&&(p.fileFormat="jpg",this.fileFormat=p.fileFormat);var v={x:p.width,y:p.height};for(p.imageSizes=[{x:p.width,y:p.height}],p.gridSize=[this._getGridSize(p.width,p.height,p.tileSize)];parseInt(v.x,10)>p.tileSize||parseInt(v.y,10)>p.tileSize;)v.x=Math.floor(v.x/2),v.y=Math.floor(v.y/2),p.imageSizes.push({x:v.x,y:v.y}),p.gridSize.push(this._getGridSize(v.x,v.y,p.tileSize));p.imageSizes.reverse(),p.gridSize.reverse(),p.minLevel=0,p.maxLevel=p.gridSize.length-1,t.TileSource.apply(this,[p])},d.extend(d.ZoomifyTileSource.prototype,d.TileSource.prototype,{_getGridSize:function(p,v,w){return{x:Math.ceil(p/w),y:Math.ceil(v/w)}},_calculateAbsoluteTileNumber:function(p,v,w){for(var S=0,B={},R=0;R<p;R++)S+=(B=this.gridSize[R]).x*B.y;return S+((B=this.gridSize[p]).x*w+v)},supports:function(p,v){return p.type&&p.type==="zoomifytileservice"},configure:function(p,v,w){return p},getTileUrl:function(p,v,w){var S,B=this._calculateAbsoluteTileNumber(p,v,w);return S=Math.floor(B/256),this.tilesUrl+"TileGroup"+S+"/"+p+"-"+v+"-"+w+"."+this.fileFormat}})}(t),function(d){function p(v,w){return w.levels}d.LegacyTileSource=function(v){var w,S,B;d.isArray(v)&&(w={type:"legacy-image-pyramid",levels:v}),w.levels=function(R){var D,O,V=[];for(O=0;O<R.length;O++)(D=R[O]).height&&D.width&&D.url?V.push({url:D.url,width:Number(D.width),height:Number(D.height)}):d.console.error("Unsupported image format: %s",D.url?D.url:"<no URL>");return V.sort(function($,G){return $.height-G.height})}(w.levels),w.levels.length>0?(S=w.levels[w.levels.length-1].width,B=w.levels[w.levels.length-1].height):(S=0,B=0,d.console.error("No supported image formats found")),d.extend(!0,w,{width:S,height:B,tileSize:Math.max(B,S),tileOverlap:0,minLevel:0,maxLevel:w.levels.length>0?w.levels.length-1:0}),d.TileSource.apply(this,[w]),this.levels=w.levels},d.extend(d.LegacyTileSource.prototype,d.TileSource.prototype,{supports:function(v,w){return v.type&&v.type==="legacy-image-pyramid"||v.documentElement&&v.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(v,w,S){return d.isPlainObject(v)?p(0,v):function(B,R){if(!R||!R.documentElement)throw new Error(d.getString("Errors.Xml"));var D,O,V=R.documentElement,$=V.tagName,G=null,X=[];if($==="image")try{for(G={type:V.getAttribute("type"),levels:[]},X=V.getElementsByTagName("level"),O=0;O<X.length;O++)D=X[O],G.levels.push({url:D.getAttribute("url"),width:parseInt(D.getAttribute("width"),10),height:parseInt(D.getAttribute("height"),10)});return p(0,G)}catch(te){throw te instanceof Error?te:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if($==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if($==="error")throw new Error("Error: "+R)}throw new Error("Unknown element "+$)}(0,v)},getLevelScale:function(v){var w=NaN;return this.levels.length>0&&v>=this.minLevel&&v<=this.maxLevel&&(w=this.levels[v].width/this.levels[this.maxLevel].width),w},getNumTiles:function(v){return this.getLevelScale(v)?new d.Point(1,1):new d.Point(0,0)},getTileUrl:function(v,w,S){var B=null;return this.levels.length>0&&v>=this.minLevel&&v<=this.maxLevel&&(B=this.levels[v].url),B}})}(t),function(d){d.ImageTileSource=function(p){p=d.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1},p),d.TileSource.apply(this,[p])},d.extend(d.ImageTileSource.prototype,d.TileSource.prototype,{supports:function(p,v){return p.type&&p.type==="image"},configure:function(p,v,w){return p},getImageInfo:function(p){var v=this._image=new Image,w=this;this.crossOriginPolicy&&(v.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(v.useCredentials=this.ajaxWithCredentials),d.addEvent(v,"load",function(){w.width=v.naturalWidth,w.height=v.naturalHeight,w.aspectRatio=w.width/w.height,w.dimensions=new d.Point(w.width,w.height),w._tileWidth=w.width,w._tileHeight=w.height,w.tileOverlap=0,w.minLevel=0,w.levels=w._buildLevels(),w.maxLevel=w.levels.length-1,w.ready=!0,w.raiseEvent("ready",{tileSource:w})}),d.addEvent(v,"error",function(){w.raiseEvent("open-failed",{message:"Error loading image at "+p,source:p})}),v.src=p},getLevelScale:function(p){var v=NaN;return p>=this.minLevel&&p<=this.maxLevel&&(v=this.levels[p].width/this.levels[this.maxLevel].width),v},getNumTiles:function(p){return this.getLevelScale(p)?new d.Point(1,1):new d.Point(0,0)},getTileUrl:function(p,v,w){var S=null;return p>=this.minLevel&&p<=this.maxLevel&&(S=this.levels[p].url),S},getContext2D:function(p,v,w){var S=null;return p>=this.minLevel&&p<=this.maxLevel&&(S=this.levels[p].context2D),S},destroy:function(p){this._freeupCanvasMemory(p)},_buildLevels:function(){var p=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!d.supportsCanvas)return delete this._image,p;var v=this._image.naturalWidth,w=this._image.naturalHeight,S=document.createElement("canvas"),B=S.getContext("2d");if(S.width=v,S.height=w,B.drawImage(this._image,0,0,v,w),p[0].context2D=B,delete this._image,d.isCanvasTainted(S))return p;for(;v>=2&&w>=2;){v=Math.floor(v/2),w=Math.floor(w/2);var R=document.createElement("canvas"),D=R.getContext("2d");R.width=v,R.height=w,D.drawImage(S,0,0,v,w),p.splice(0,0,{context2D:D,width:v,height:w}),S=R,B=D}return p},_freeupCanvasMemory:function(p){for(var v=0;v<this.levels.length;v++)this.levels[v].context2D&&(this.levels[v].context2D.canvas.height=0,this.levels[v].context2D.canvas.width=0,p&&p.raiseEvent("image-unloaded",{context2D:this.levels[v].context2D}))}})}(t),function(d){d.TileSourceCollection=function(p,v,w,S){d.console.error("TileSourceCollection is deprecated; use World instead")}}(t),function(d){function p(S){d.requestAnimationFrame(function(){var B,R;(B=S).shouldFade&&(R=1-(d.now()-B.fadeBeginTime)/B.fadeLength,R=Math.min(1,R),R=Math.max(0,R),B.imgGroup&&d.setElementOpacity(B.imgGroup,R,!0),R>0&&p(B))})}function v(S,B){var R;S.element.disabled||(B>=d.ButtonState.GROUP&&S.currentState===d.ButtonState.REST&&((R=S).shouldFade=!1,R.imgGroup&&d.setElementOpacity(R.imgGroup,1,!0),S.currentState=d.ButtonState.GROUP),B>=d.ButtonState.HOVER&&S.currentState===d.ButtonState.GROUP&&(S.imgHover&&(S.imgHover.style.visibility=""),S.currentState=d.ButtonState.HOVER),B>=d.ButtonState.DOWN&&S.currentState===d.ButtonState.HOVER&&(S.imgDown&&(S.imgDown.style.visibility=""),S.currentState=d.ButtonState.DOWN))}function w(S,B){var R;S.element.disabled||(B<=d.ButtonState.HOVER&&S.currentState===d.ButtonState.DOWN&&(S.imgDown&&(S.imgDown.style.visibility="hidden"),S.currentState=d.ButtonState.HOVER),B<=d.ButtonState.GROUP&&S.currentState===d.ButtonState.HOVER&&(S.imgHover&&(S.imgHover.style.visibility="hidden"),S.currentState=d.ButtonState.GROUP),B<=d.ButtonState.REST&&S.currentState===d.ButtonState.GROUP&&((R=S).shouldFade=!0,R.fadeBeginTime=d.now()+R.fadeDelay,window.setTimeout(function(){p(R)},R.fadeDelay),S.currentState=d.ButtonState.REST))}d.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},d.Button=function(S){var B=this;d.EventSource.call(this),d.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:d.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:d.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},S),this.element=S.element||d.makeNeutralElement("div"),S.element||(this.imgRest=d.makeTransparentImage(this.srcRest),this.imgGroup=d.makeTransparentImage(this.srcGroup),this.imgHover=d.makeTransparentImage(this.srcHover),this.imgDown=d.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,d.setElementPointerEventsNone(this.imgRest),d.setElementPointerEventsNone(this.imgGroup),d.setElementPointerEventsNone(this.imgHover),d.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",d.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=d.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new d.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(R){R.insideElementPressed?(v(B,d.ButtonState.DOWN),B.raiseEvent("enter",{originalEvent:R.originalEvent})):R.buttonDownAny||v(B,d.ButtonState.HOVER)},focusHandler:function(R){B.tracker.enterHandler(R),B.raiseEvent("focus",{originalEvent:R.originalEvent})},leaveHandler:function(R){w(B,d.ButtonState.GROUP),R.insideElementPressed&&B.raiseEvent("exit",{originalEvent:R.originalEvent})},blurHandler:function(R){B.tracker.leaveHandler(R),B.raiseEvent("blur",{originalEvent:R.originalEvent})},pressHandler:function(R){v(B,d.ButtonState.DOWN),B.raiseEvent("press",{originalEvent:R.originalEvent})},releaseHandler:function(R){R.insideElementPressed&&R.insideElementReleased?(w(B,d.ButtonState.HOVER),B.raiseEvent("release",{originalEvent:R.originalEvent})):R.insideElementPressed?w(B,d.ButtonState.GROUP):v(B,d.ButtonState.HOVER)},clickHandler:function(R){R.quick&&B.raiseEvent("click",{originalEvent:R.originalEvent})},keyHandler:function(R){R.keyCode===13?(B.raiseEvent("click",{originalEvent:R.originalEvent}),B.raiseEvent("release",{originalEvent:R.originalEvent}),R.preventDefault=!0):R.preventDefault=!1}}),w(this,d.ButtonState.REST)},d.extend(d.Button.prototype,d.EventSource.prototype,{notifyGroupEnter:function(){v(this,d.ButtonState.GROUP)},notifyGroupExit:function(){w(this,d.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),d.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),d.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(t),function(d){d.ButtonGroup=function(p){d.extend(!0,this,{buttons:[],clickTimeThreshold:d.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:d.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},p);var v,w=this.buttons.concat([]),S=this;if(this.element=p.element||d.makeNeutralElement("div"),!p.group)for(this.element.style.display="inline-block",v=0;v<w.length;v++)this.element.appendChild(w[v].element);d.setElementTouchActionNone(this.element),this.tracker=new d.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(B){var R;for(R=0;R<S.buttons.length;R++)S.buttons[R].notifyGroupEnter()},leaveHandler:function(B){var R;if(!B.insideElementPressed)for(R=0;R<S.buttons.length;R++)S.buttons[R].notifyGroupExit()}})},d.ButtonGroup.prototype={addButton:function(p){this.buttons.push(p),this.element.appendChild(p.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var p=this.buttons.pop();this.element.removeChild(p.element),p.destroy()}this.tracker.destroy(),this.element=null}}}(t),function(d){d.Rect=function(p,v,w,S,B){var R,D;this.x=typeof p=="number"?p:0,this.y=typeof v=="number"?v:0,this.width=typeof w=="number"?w:0,this.height=typeof S=="number"?S:0,this.degrees=typeof B=="number"?B:0,this.degrees=d.positiveModulo(this.degrees,360),this.degrees>=270?(R=this.getTopRight(),this.x=R.x,this.y=R.y,D=this.height,this.height=this.width,this.width=D,this.degrees-=270):this.degrees>=180?(R=this.getBottomRight(),this.x=R.x,this.y=R.y,this.degrees-=180):this.degrees>=90&&(R=this.getBottomLeft(),this.x=R.x,this.y=R.y,D=this.height,this.height=this.width,this.width=D,this.degrees-=90)},d.Rect.fromSummits=function(p,v,w){var S=p.distanceTo(v),B=p.distanceTo(w),R=v.minus(p),D=Math.atan(R.y/R.x);return R.x<0?D+=Math.PI:R.y<0&&(D+=2*Math.PI),new d.Rect(p.x,p.y,S,B,D/Math.PI*180)},d.Rect.prototype={clone:function(){return new d.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new d.Point(this.x,this.y)},getBottomRight:function(){return new d.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new d.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new d.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new d.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new d.Point(this.width,this.height)},equals:function(p){return p instanceof d.Rect&&this.x===p.x&&this.y===p.y&&this.width===p.width&&this.height===p.height&&this.degrees===p.degrees},times:function(p){return new d.Rect(this.x*p,this.y*p,this.width*p,this.height*p,this.degrees)},translate:function(p){return new d.Rect(this.x+p.x,this.y+p.y,this.width,this.height,this.degrees)},union:function(p){var v=this.getBoundingBox(),w=p.getBoundingBox(),S=Math.min(v.x,w.x),B=Math.min(v.y,w.y),R=Math.max(v.x+v.width,w.x+w.width),D=Math.max(v.y+v.height,w.y+w.height);return new d.Rect(S,B,R-S,D-B)},intersection:function(p){var v=1e-10,w=[],S=this.getTopLeft();p.containsPoint(S,v)&&w.push(S);var B=this.getTopRight();p.containsPoint(B,v)&&w.push(B);var R=this.getBottomLeft();p.containsPoint(R,v)&&w.push(R);var D=this.getBottomRight();p.containsPoint(D,v)&&w.push(D);var O=p.getTopLeft();this.containsPoint(O,v)&&w.push(O);var V=p.getTopRight();this.containsPoint(V,v)&&w.push(V);var $=p.getBottomLeft();this.containsPoint($,v)&&w.push($);var G=p.getBottomRight();this.containsPoint(G,v)&&w.push(G);for(var X=this._getSegments(),te=p._getSegments(),ae=0;ae<X.length;ae++)for(var oe=X[ae],Ae=0;Ae<te.length;Ae++){var ve=te[Ae],De=Ne(oe[0],oe[1],ve[0],ve[1]);De&&w.push(De)}function Ne(It,Jt,jt,_i){var xi=Jt.minus(It),Kt=_i.minus(jt),_t=-Kt.x*xi.y+xi.x*Kt.y;if(_t===0)return null;var hi=(xi.x*(It.y-jt.y)-xi.y*(It.x-jt.x))/_t,bi=(Kt.x*(It.y-jt.y)-Kt.y*(It.x-jt.x))/_t;return-1e-10<=hi&&hi<=1-v&&-1e-10<=bi&&bi<=1-v?new d.Point(It.x+bi*xi.x,It.y+bi*xi.y):null}if(w.length===0)return null;for(var We=w[0].x,vt=w[0].x,ot=w[0].y,nt=w[0].y,st=1;st<w.length;st++){var mt=w[st];mt.x<We&&(We=mt.x),mt.x>vt&&(vt=mt.x),mt.y<ot&&(ot=mt.y),mt.y>nt&&(nt=mt.y)}return new d.Rect(We,ot,vt-We,nt-ot)},_getSegments:function(){var p=this.getTopLeft(),v=this.getTopRight(),w=this.getBottomLeft(),S=this.getBottomRight();return[[p,v],[v,S],[S,w],[w,p]]},rotate:function(p,v){if((p=d.positiveModulo(p,360))===0)return this.clone();v=v||this.getCenter();var w=this.getTopLeft().rotate(p,v),S=this.getTopRight().rotate(p,v).minus(w);S=S.apply(function(R){return Math.abs(R)<1e-15?0:R});var B=Math.atan(S.y/S.x);return S.x<0?B+=Math.PI:S.y<0&&(B+=2*Math.PI),new d.Rect(w.x,w.y,this.width,this.height,B/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var p=this.getTopLeft(),v=this.getTopRight(),w=this.getBottomLeft(),S=this.getBottomRight(),B=Math.min(p.x,v.x,w.x,S.x),R=Math.max(p.x,v.x,w.x,S.x),D=Math.min(p.y,v.y,w.y,S.y),O=Math.max(p.y,v.y,w.y,S.y);return new d.Rect(B,D,R-B,O-D)},getIntegerBoundingBox:function(){var p=this.getBoundingBox(),v=Math.floor(p.x),w=Math.floor(p.y),S=Math.ceil(p.width+p.x-v),B=Math.ceil(p.height+p.y-w);return new d.Rect(v,w,S,B)},containsPoint:function(p,v){v=v||0;var w=this.getTopLeft(),S=this.getTopRight(),B=this.getBottomLeft(),R=S.minus(w),D=B.minus(w);return(p.x-w.x)*R.x+(p.y-w.y)*R.y>=-v&&(p.x-S.x)*R.x+(p.y-S.y)*R.y<=v&&(p.x-w.x)*D.x+(p.y-w.y)*D.y>=-v&&(p.x-B.x)*D.x+(p.y-B.y)*D.y<=v},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(t),function(d){var p={};function v($){var G;$.quick&&(G=this.scroll==="horizontal"?Math.floor($.position.x/(this.panelWidth+4)):Math.floor($.position.y/this.panelHeight),this.viewer.goToPage(G)),this.element.focus()}function w($){if(this.dragging=!0,this.element){var G=Number(this.element.style.marginLeft.replace("px","")),X=Number(this.element.style.marginTop.replace("px","")),te=Number(this.element.style.width.replace("px","")),ae=Number(this.element.style.height.replace("px","")),oe=d.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-$.delta.x>0?G>-(te-oe.x)&&(this.element.style.marginLeft=G+2*$.delta.x+"px",B(this,oe.x,G+2*$.delta.x)):-$.delta.x<0&&G<0&&(this.element.style.marginLeft=G+2*$.delta.x+"px",B(this,oe.x,G+2*$.delta.x)):-$.delta.y>0?X>-(ae-oe.y)&&(this.element.style.marginTop=X+2*$.delta.y+"px",B(this,oe.y,X+2*$.delta.y)):-$.delta.y<0&&X<0&&(this.element.style.marginTop=X+2*$.delta.y+"px",B(this,oe.y,X+2*$.delta.y))}}function S($){if(this.element){var G=Number(this.element.style.marginLeft.replace("px","")),X=Number(this.element.style.marginTop.replace("px","")),te=Number(this.element.style.width.replace("px","")),ae=Number(this.element.style.height.replace("px","")),oe=d.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?$.scroll>0?G>-(te-oe.x)&&(this.element.style.marginLeft=G-60*$.scroll+"px",B(this,oe.x,G-60*$.scroll)):$.scroll<0&&G<0&&(this.element.style.marginLeft=G-60*$.scroll+"px",B(this,oe.x,G-60*$.scroll)):$.scroll<0?X>oe.y-ae&&(this.element.style.marginTop=X+60*$.scroll+"px",B(this,oe.y,X+60*$.scroll)):$.scroll>0&&X<0&&(this.element.style.marginTop=X+60*$.scroll+"px",B(this,oe.y,X+60*$.scroll)),$.preventDefault=!0}}function B($,G,X){var te,ae,oe,Ae,ve,De;for(te=$.scroll==="horizontal"?$.panelWidth:$.panelHeight,ae=Math.ceil(G/te)+5,ve=ae=(ae=(oe=Math.ceil((Math.abs(X)+G)/te)+1)-ae)<0?0:ae;ve<oe&&ve<$.panels.length;ve++)if(!(De=$.panels[ve]).activePanel){var Ne,We=$.viewer.tileSources[ve];Ne=We.referenceStripThumbnailUrl?{type:"image",url:We.referenceStripThumbnailUrl}:We,Ae=new d.Viewer({id:De.id,tileSources:[Ne],element:De,navigatorSizeRatio:$.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:$.viewer.loadTilesWithAjax,ajaxHeaders:$.viewer.ajaxHeaders,drawer:"canvas"}),d.setElementPointerEventsNone(Ae.canvas),d.setElementPointerEventsNone(Ae.container),Ae.innerTracker.setTracking(!1),Ae.outerTracker.setTracking(!1),$.miniViewers[De.id]=Ae,De.activePanel=!0}}function R($){var G=$.eventSource.element;this.scroll==="horizontal"?G.style.marginBottom="0px":G.style.marginLeft="0px"}function D($){var G=$.eventSource.element;this.scroll==="horizontal"?G.style.marginBottom="-"+d.getElementSize(G).y/2+"px":G.style.marginLeft="-"+d.getElementSize(G).x/2+"px"}function O($){if($.ctrl||$.alt||$.meta)$.preventDefault=!1;else switch($.keyCode){case 38:case 39:S.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),$.preventDefault=!0;break;case 40:case 37:S.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),$.preventDefault=!0;break;default:$.preventDefault=!1}}function V($){if($.ctrl||$.alt||$.meta)$.preventDefault=!1;else switch($.keyCode){case 61:case 48:case 119:case 87:case 100:S.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),$.preventDefault=!0;break;case 45:case 115:case 83:case 97:S.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),$.preventDefault=!0;break;default:$.preventDefault=!1}}d.ReferenceStrip=function($){var G,X,te,ae=$.viewer,oe=d.getElementSize(ae.element);for($.id||($.id="referencestrip-"+d.now(),this.element=d.makeNeutralElement("div"),this.element.id=$.id,this.element.className="referencestrip"),$=d.extend(!0,{sizeRatio:d.DEFAULT_SETTINGS.referenceStripSizeRatio,position:d.DEFAULT_SETTINGS.referenceStripPosition,scroll:d.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:d.DEFAULT_SETTINGS.clickTimeThreshold},$,{element:this.element}),d.extend(this,$),p[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(X=this.element.style).marginTop="0px",X.marginRight="0px",X.marginBottom="0px",X.marginLeft="0px",X.left="0px",X.bottom="0px",X.border="0px",X.background="#000",X.position="relative",d.setElementTouchActionNone(this.element),d.setElementOpacity(this.element,.8),this.viewer=ae,this.tracker=new d.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:d.delegate(this,v),dragHandler:d.delegate(this,w),scrollHandler:d.delegate(this,S),enterHandler:d.delegate(this,R),leaveHandler:d.delegate(this,D),keyDownHandler:d.delegate(this,O),keyHandler:d.delegate(this,V),preProcessEventHandler:function(Ae){Ae.eventType==="wheel"&&(Ae.preventDefault=!0)}}),$.width&&$.height?(this.element.style.width=$.width+"px",this.element.style.height=$.height+"px",ae.addControl(this.element,{anchor:d.ControlAnchor.BOTTOM_LEFT})):$.scroll==="horizontal"?(this.element.style.width=oe.x*$.sizeRatio*ae.tileSources.length+12*ae.tileSources.length+"px",this.element.style.height=oe.y*$.sizeRatio+"px",ae.addControl(this.element,{anchor:d.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=oe.y*$.sizeRatio*ae.tileSources.length+12*ae.tileSources.length+"px",this.element.style.width=oe.x*$.sizeRatio+"px",ae.addControl(this.element,{anchor:d.ControlAnchor.TOP_LEFT})),this.panelWidth=oe.x*this.sizeRatio+8,this.panelHeight=oe.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},te=0;te<ae.tileSources.length;te++)(G=d.makeNeutralElement("div")).id=this.element.id+"-"+te,G.style.width=this.panelWidth+"px",G.style.height=this.panelHeight+"px",G.style.display="inline",G.style.float="left",G.style.cssFloat="left",G.style.padding="2px",d.setElementTouchActionNone(G),d.setElementPointerEventsNone(G),this.element.appendChild(G),G.activePanel=!1,this.panels.push(G);B(this,this.scroll==="vertical"?oe.y:oe.x,0),this.setFocus(0)},d.ReferenceStrip.prototype={setFocus:function($){var G,X=this.element.querySelector("#"+this.element.id+"-"+$),te=d.getElementSize(this.viewer.canvas),ae=Number(this.element.style.width.replace("px","")),oe=Number(this.element.style.height.replace("px","")),Ae=-Number(this.element.style.marginLeft.replace("px","")),ve=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==X&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=X,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(G=Number($)*(this.panelWidth+3))>Ae+te.x-this.panelWidth?(G=Math.min(G,ae-te.x),this.element.style.marginLeft=-G+"px",B(this,te.x,-G)):G<Ae&&(G=Math.max(0,G-te.x/2),this.element.style.marginLeft=-G+"px",B(this,te.x,-G)):(G=Number($)*(this.panelHeight+3))>ve+te.y-this.panelHeight?(G=Math.min(G,oe-te.y),this.element.style.marginTop=-G+"px",B(this,te.y,-G)):G<ve&&(G=Math.max(0,G-te.y/2),this.element.style.marginTop=-G+"px",B(this,te.y,-G)),this.currentPage=$,R.call(this,{eventSource:this.tracker}))},update:function(){return!!p[this.id].animating},destroy:function(){if(this.miniViewers)for(var $ in this.miniViewers)this.miniViewers[$].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(t),function(d){d.DisplayRect=function(p,v,w,S,B,R){d.Rect.apply(this,[p,v,w,S]),this.minLevel=B,this.maxLevel=R},d.extend(d.DisplayRect.prototype,d.Rect.prototype)}(t),function(d){d.Spring=function(p){var v=arguments;typeof p!="object"&&(p={initial:v.length&&typeof v[0]=="number"?v[0]:void 0,springStiffness:v.length>1?v[1].springStiffness:5,animationTime:v.length>1?v[1].animationTime:1.5}),d.console.assert(typeof p.springStiffness=="number"&&p.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),d.console.assert(typeof p.animationTime=="number"&&p.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),p.exponential&&(this._exponential=!0,delete p.exponential),d.extend(!0,this,p),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:d.now()},d.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},d.Spring.prototype={resetTo:function(p){d.console.assert(!this._exponential||p!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=p,this.start.time=this.target.time=this.current.time=d.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(p){d.console.assert(!this._exponential||p!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=p,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(p){this.start.value+=p,this.target.value+=p,this._exponential&&(d.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(p){this._exponential=p,this._exponential&&(d.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){let p,v;if(this.current.time=d.now(),this._exponential?(p=this.start._logValue,v=this.target._logValue):(p=this.start.value,v=this.target.value),this.current.time>=this.target.time)this.current.value=this.target.value;else{let B=p+(v-p)*(w=this.springStiffness,S=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(w*-S))/(1-Math.exp(-w)));this._exponential?this.current.value=Math.exp(B):this.current.value=B}var w,S;return this.current.value!==this.target.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(t),function(d){d.ImageJob=function(p){d.extend(!0,this,{timeout:d.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},p),this.data=null,this.userData={},this.errorMsg=null},d.ImageJob.prototype={start:function(){this.tries++;var p=this,v=this.abort;this.jobId=window.setTimeout(function(){p.finish(null,null,"Image load exceeded timeout ("+p.timeout+" ms)")},this.timeout),this.abort=function(){p.source.downloadTileAbort(p),typeof v=="function"&&v()},this.source.downloadTileStart(this)},finish:function(p,v,w){this.data=p,this.request=v,this.errorMsg=w,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},d.ImageLoader=function(p){d.extend(!0,this,{jobLimit:d.DEFAULT_SETTINGS.imageLoaderLimit,timeout:d.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},p)},d.ImageLoader.prototype={addJob:function(p){if(!p.source){d.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var v=d.TileSource.prototype;p.source={downloadTileStart:v.downloadTileStart,downloadTileAbort:v.downloadTileAbort}}var w=this,S={src:p.src,tile:p.tile||{},source:p.source,loadWithAjax:p.loadWithAjax,ajaxHeaders:p.loadWithAjax?p.ajaxHeaders:null,crossOriginPolicy:p.crossOriginPolicy,ajaxWithCredentials:p.ajaxWithCredentials,postData:p.postData,callback:function(R){var D,O,V,$;D=w,O=R,V=p.callback,O.errorMsg!==""&&(O.data===null||O.data===void 0)&&O.tries<1+D.tileRetryMax&&D.failedTiles.push(O),D.jobsInProgress--,(!D.jobLimit||D.jobsInProgress<D.jobLimit)&&D.jobQueue.length>0&&(($=D.jobQueue.shift()).start(),D.jobsInProgress++),D.tileRetryMax>0&&D.jobQueue.length===0&&(!D.jobLimit||D.jobsInProgress<D.jobLimit)&&D.failedTiles.length>0&&($=D.failedTiles.shift(),setTimeout(function(){$.start()},D.tileRetryDelay),D.jobsInProgress++),V(O.data,O.errorMsg,O.request)},abort:p.abort,timeout:this.timeout},B=new d.ImageJob(S);!this.jobLimit||this.jobsInProgress<this.jobLimit?(B.start(),this.jobsInProgress++):this.jobQueue.push(B)},clear:function(){for(var p=0;p<this.jobQueue.length;p++){var v=this.jobQueue[p];typeof v.abort=="function"&&v.abort()}this.jobQueue=[]}}}(t),function(d){d.Tile=function(p,v,w,S,B,R,D,O,V,$,G,X){this.level=p,this.x=v,this.y=w,this.bounds=S,this.positionedBounds=new t.Rect(S.x,S.y,S.width,S.height),this.sourceBounds=$,this.exists=B,this._url=R,this.postData=G,this.context2D=D,this.loadWithAjax=O,this.ajaxHeaders=V,X===void 0&&(d.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),X=d.TileSource.prototype.getTileHashKey(p,v,w,R,V,G)),this.cacheKey=X,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},d.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},get image(){return d.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return d.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord&&this.cacheImageRecord.getRenderedContext()},getScaleForEdgeSmoothing:function(){var p;if(this.cacheImageRecord)p=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return d.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;p=this.context2D}return p.canvas.width/(this.size.x*d.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(p,v,w){var S=Math.max(1,Math.ceil((w.x-v.x)/2)),B=Math.max(1,Math.ceil((w.y-v.y)/2));return new d.Point(S,B).minus(this.position.times(d.pixelDensityRatio).times(p||1).apply(function(R){return R%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(t),function(d){d.OverlayPlacement=d.Placement,d.OverlayRotationMode=d.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),d.Overlay=function(p,v,w){var S;S=d.isPlainObject(p)?p:{element:p,location:v,placement:w},this.element=S.element,this.element.innerHTML="<div>"+this.element.innerHTML+"</div>",this.style=S.element.style,this._init(S)},d.Overlay.prototype={_init:function(p){this.location=p.location,this.placement=p.placement===void 0?d.Placement.TOP_LEFT:p.placement,this.onDraw=p.onDraw,this.checkResize=p.checkResize===void 0||p.checkResize,this.width=p.width===void 0?null:p.width,this.height=p.height===void 0?null:p.height,this.rotationMode=p.rotationMode||d.OverlayRotationMode.EXACT,this.location instanceof d.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=d.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new d.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(p,v){var w=d.Placement.properties[this.placement];w&&(w.isHorizontallyCentered?p.x-=v.x/2:w.isRight&&(p.x-=v.x),w.isVerticallyCentered?p.y-=v.y/2:w.isBottom&&(p.y-=v.y))},destroy:function(){var p=this.element,v=this.style;p.parentNode&&(p.parentNode.removeChild(p),p.prevElementParent&&(v.display="none",document.body.appendChild(p))),this.onDraw=null,v.top="",v.left="",v.position="",this.width!==null&&(v.width=""),this.height!==null&&(v.height="");var w=d.getCssPropertyWithVendorPrefix("transformOrigin"),S=d.getCssPropertyWithVendorPrefix("transform");w&&S&&(v[w]="",v[S]="")},drawHTML:function(p,v){var w=this.element;w.parentNode!==p&&(w.prevElementParent=w.parentNode,w.prevNextSibling=w.nextSibling,p.appendChild(w),this.style.position="absolute",this.size=d.getElementSize(w));var S=this._getOverlayPositionAndSize(v),B=S.position,R=this.size=S.size,D="";v.overlayPreserveContentDirection&&(D=v.flipped?" scaleX(-1)":" scaleX(1)");var O=v.flipped?-S.rotate:S.rotate,V=v.flipped?" scaleX(-1)":"";if(this.onDraw)this.onDraw(B,R,this.element);else{var $=this.style,G=w.firstChild.style;$.left=B.x+"px",$.top=B.y+"px",this.width!==null&&($.width=R.x+"px"),this.height!==null&&($.height=R.y+"px");var X=d.getCssPropertyWithVendorPrefix("transformOrigin"),te=d.getCssPropertyWithVendorPrefix("transform");X&&te&&(O&&!v.flipped?(G[te]="",$[X]=this._getTransformOrigin(),$[te]="rotate("+O+"deg)"):!O&&v.flipped?(G[te]=D,$[X]=this._getTransformOrigin(),$[te]=V):O&&v.flipped?(G[te]=D,$[X]=this._getTransformOrigin(),$[te]="rotate("+O+"deg)"+V):(G[te]="",$[X]="",$[te]="")),$.display="block"}},_getOverlayPositionAndSize:function(p){var v=p.pixelFromPoint(this.location,!0),w=this._getSizeInPixels(p);this.adjust(v,w);var S=0;if(p.getRotation(!0)&&this.rotationMode!==d.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===d.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var B=new d.Rect(v.x,v.y,w.x,w.y),R=this._getBoundingBox(B,p.getRotation(!0));v=R.getTopLeft(),w=R.getSize()}else S=p.getRotation(!0);return p.flipped&&(v.x=p.getContainerSize().x-v.x),{position:v,size:w,rotate:S}},_getSizeInPixels:function(p){var v=this.size.x,w=this.size.y;if(this.width!==null||this.height!==null){var S=p.deltaPixelsFromPointsNoRotate(new d.Point(this.width||0,this.height||0),!0);this.width!==null&&(v=S.x),this.height!==null&&(w=S.y)}if(this.checkResize&&(this.width===null||this.height===null)){var B=this.size=d.getElementSize(this.element);this.width===null&&(v=B.x),this.height===null&&(w=B.y)}return new d.Point(v,w)},_getBoundingBox:function(p,v){var w=this._getPlacementPoint(p);return p.rotate(v,w).getBoundingBox()},_getPlacementPoint:function(p){var v=new d.Point(p.x,p.y),w=d.Placement.properties[this.placement];return w&&(w.isHorizontallyCentered?v.x+=p.width/2:w.isRight&&(v.x+=p.width),w.isVerticallyCentered?v.y+=p.height/2:w.isBottom&&(v.y+=p.height)),v},_getTransformOrigin:function(){var p="",v=d.Placement.properties[this.placement];return v&&(v.isLeft?p="left":v.isRight&&(p="right"),v.isTop?p+=" top":v.isBottom&&(p+=" bottom")),p},update:function(p,v){var w=d.isPlainObject(p)?p:{location:p,placement:v};this._init({location:w.location||this.location,placement:w.placement!==void 0?w.placement:this.placement,onDraw:w.onDraw||this.onDraw,checkResize:w.checkResize||this.checkResize,width:w.width!==void 0?w.width:this.width,height:w.height!==void 0?w.height:this.height,rotationMode:w.rotationMode||this.rotationMode})},getBounds:function(p){d.console.assert(p,"A viewport must now be passed to Overlay.getBounds.");var v=this.width,w=this.height;if(v===null||w===null){var S=p.deltaPointsFromPixelsNoRotate(this.size,!0);v===null&&(v=S.x),w===null&&(w=S.y)}var B=this.location.clone();return this.adjust(B,new d.Point(v,w)),this._adjustBoundsForRotation(p,new d.Rect(B.x,B.y,v,w))},_adjustBoundsForRotation:function(p,v){if(!p||p.getRotation(!0)===0||this.rotationMode===d.OverlayRotationMode.EXACT)return v;if(this.rotationMode===d.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return v;var w=this._getOverlayPositionAndSize(p);return p.viewerElementToViewportRectangle(new d.Rect(w.position.x,w.position.y,w.size.x,w.size.y))}return v.rotate(-p.getRotation(!0),this._getPlacementPoint(v))}}}(t),function(d){const p=d;p.DrawerBase=class{constructor(v){d.console.assert(v.viewer,"[Drawer] options.viewer is required"),d.console.assert(v.viewport,"[Drawer] options.viewport is required"),d.console.assert(v.element,"[Drawer] options.element is required"),this.viewer=v.viewer,this.viewport=v.viewport,this.debugGridColor=typeof v.debugGridColor=="string"?[v.debugGridColor]:v.debugGridColor||d.DEFAULT_SETTINGS.debugGridColor,this.options=v.options||{},this.container=d.getElement(v.element),this._renderingTarget=this._createDrawingElement(),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.canvas.style.left="0",d.setElementOpacity(this.canvas,this.viewer.opacity,!0),d.setElementPointerEventsNone(this.canvas),d.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._checkForAPIOverrides()}get canvas(){return this._renderingTarget}get element(){return d.console.error("Drawer.element is deprecated. Use Drawer.container instead."),this.container}getType(){d.console.error("Drawer.getType must be implemented by child class")}static isSupported(){d.console.error("Drawer.isSupported must be implemented by child class")}_createDrawingElement(){return d.console.error("Drawer._createDrawingElement must be implemented by child class"),null}draw(v){d.console.error("Drawer.draw must be implemented by child class")}canRotate(){d.console.error("Drawer.canRotate must be implemented by child class")}destroy(){d.console.error("Drawer.destroy must be implemented by child class")}minimumOverlapRequired(v){return!1}setImageSmoothingEnabled(v){d.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class")}drawDebuggingRect(v){d.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer")}clear(){d.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.")}_checkForAPIOverrides(){if(this._createDrawingElement===d.DrawerBase.prototype._createDrawingElement)throw new Error("[drawer]._createDrawingElement must be implemented by child class");if(this.draw===d.DrawerBase.prototype.draw)throw new Error("[drawer].draw must be implemented by child class");if(this.canRotate===d.DrawerBase.prototype.canRotate)throw new Error("[drawer].canRotate must be implemented by child class");if(this.destroy===d.DrawerBase.prototype.destroy)throw new Error("[drawer].destroy must be implemented by child class");if(this.setImageSmoothingEnabled===d.DrawerBase.prototype.setImageSmoothingEnabled)throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class")}viewportToDrawerRectangle(v){var w=this.viewport.pixelFromPointNoRotate(v.getTopLeft(),!0),S=this.viewport.deltaPixelsFromPointsNoRotate(v.getSize(),!0);return new d.Rect(w.x*d.pixelDensityRatio,w.y*d.pixelDensityRatio,S.x*d.pixelDensityRatio,S.y*d.pixelDensityRatio)}viewportCoordToDrawerCoord(v){var w=this.viewport.pixelFromPointNoRotate(v,!0);return new d.Point(w.x*d.pixelDensityRatio,w.y*d.pixelDensityRatio)}_calculateCanvasSize(){var v=d.pixelDensityRatio,w=this.viewport.getContainerSize();return new p.Point(Math.round(w.x*v),Math.round(w.y*v))}_raiseTiledImageDrawnEvent(v,w){this.viewer&&this.viewer.raiseEvent("tiled-image-drawn",{tiledImage:v,tiles:w})}_raiseDrawerErrorEvent(v,w){this.viewer&&this.viewer.raiseEvent("drawer-error",{tiledImage:v,drawer:this,error:w})}}}(t),function(d){const p=d;class v extends p.DrawerBase{constructor(S){super(S),this.viewer.rejectEventHandler("tile-drawing","The HTMLDrawer does not raise the tile-drawing event"),this.viewer.allowEventHandler("tile-drawn")}static isSupported(){return!0}getType(){return"html"}minimumOverlapRequired(S){return!0}_createDrawingElement(){return d.makeNeutralElement("div")}draw(S){var B=this;this._prepareNewFrame(),S.forEach(function(R){R.opacity!==0&&B._drawTiles(R)})}canRotate(){return!1}destroy(){this.container.removeChild(this.canvas)}setImageSmoothingEnabled(){}_prepareNewFrame(){this.canvas.innerHTML=""}_drawTiles(S){var B=S.getTilesToDraw().map(O=>O.tile);if(S.opacity!==0&&(B.length!==0||S.placeholderFillStyle))for(var R=B.length-1;R>=0;R--){var D=B[R];this._drawTile(D),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:S,tile:D})}}_drawTile(S){d.console.assert(S,"[Drawer._drawTile] tile is required");let B=this.canvas;if(S.cacheImageRecord)if(S.loaded){if(!S.element){var R=S.getImage();if(!R)return;S.element=d.makeNeutralElement("div"),S.imgElement=R.cloneNode(),S.imgElement.style.msInterpolationMode="nearest-neighbor",S.imgElement.style.width="100%",S.imgElement.style.height="100%",S.style=S.element.style,S.style.position="absolute"}S.element.parentNode!==B&&B.appendChild(S.element),S.imgElement.parentNode!==S.element&&S.element.appendChild(S.imgElement),S.style.top=S.position.y+"px",S.style.left=S.position.x+"px",S.style.height=S.size.y+"px",S.style.width=S.size.x+"px",S.flipped&&(S.style.transform="scaleX(-1)"),d.setElementOpacity(S.element,S.opacity)}else d.console.warn("Attempting to draw tile %s when it's not yet loaded.",S.toString());else d.console.warn("[Drawer._drawTileToHTML] attempting to draw tile %s when it's not cached",S.toString())}}d.HTMLDrawer=v}(t),function(d){const p=d;class v extends p.DrawerBase{constructor(D){super(D),this.context=this.canvas.getContext("2d"),this.sketchCanvas=null,this.sketchContext=null,this._imageSmoothingEnabled=!0,this.viewer.allowEventHandler("tile-drawn"),this.viewer.allowEventHandler("tile-drawing")}static isSupported(){return d.supportsCanvas}getType(){return"canvas"}_createDrawingElement(){let D=d.makeNeutralElement("canvas"),O=this._calculateCanvasSize();return D.width=O.x,D.height=O.y,D}draw(D){this._prepareNewFrame(),this.viewer.viewport.getFlip()!==this._viewportFlipped&&this._flip();for(const O of D)O.opacity!==0&&this._drawTiles(O)}canRotate(){return!0}destroy(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null,this.container.removeChild(this.canvas)}minimumOverlapRequired(D){return!0}setImageSmoothingEnabled(D){this._imageSmoothingEnabled=!!D,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw()}drawDebuggingRect(D){var O=this.context;O.save(),O.lineWidth=2*d.pixelDensityRatio,O.strokeStyle=this.debugGridColor[0],O.fillStyle=this.debugGridColor[0],O.strokeRect(D.x*d.pixelDensityRatio,D.y*d.pixelDensityRatio,D.width*d.pixelDensityRatio,D.height*d.pixelDensityRatio),O.restore()}get _viewportFlipped(){return this.context.getTransform().a<0}_raiseTileDrawingEvent(D,O,V,$){this.viewer.raiseEvent("tile-drawing",{tiledImage:D,context:O,tile:V,rendered:$})}_prepareNewFrame(){var D=this._calculateCanvasSize();if((this.canvas.width!==D.x||this.canvas.height!==D.y)&&(this.canvas.width=D.x,this.canvas.height=D.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var O=this._calculateSketchCanvasSize();this.sketchCanvas.width=O.x,this.sketchCanvas.height=O.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}_clear(D,O){var V=this._getContext(D);if(O)V.clearRect(O.x,O.y,O.width,O.height);else{var $=V.canvas;V.clearRect(0,0,$.width,$.height)}}_drawTiles(D){var O=D.getTilesToDraw().map(st=>st.tile);if(D.opacity!==0&&(O.length!==0||D.placeholderFillStyle)){var V,$,G,X=O[0];X&&(V=D.opacity<1||D.compositeOperation&&D.compositeOperation!=="source-over"||!D._isBottomItem()&&D.source.hasTransparency(X.context2D,X.getUrl(),X.ajaxHeaders,X.postData));var te,ae=this.viewport.getZoom(!0),oe=D.viewportToImageZoom(ae);O.length>1&&oe>D.smoothTileEdgesMinZoom&&!D.iOSDevice&&D.getRotation(!0)%360==0&&(V=!0,$=X.getScaleForEdgeSmoothing(),G=X.getTranslationForEdgeSmoothing($,this._getCanvasSize(!1),this._getCanvasSize(!0))),V&&($||(te=(te=this.viewport.viewportToViewerElementRectangle(D.getClippedBounds(!0)).getIntegerBoundingBox()).times(d.pixelDensityRatio)),this._clear(!0,te)),$||this._setRotations(D,V);var Ae=!1;if(D._clip){this._saveContext(V);var ve=D.imageToViewportRectangle(D._clip,!0);ve=ve.rotate(-D.getRotation(!0),D._getRotationPoint(!0));var De=this.viewportToDrawerRectangle(ve);$&&(De=De.times($)),G&&(De=De.translate(G)),this._setClip(De,V),Ae=!0}if(D._croppingPolygons){var Ne=this;Ae||this._saveContext(V);try{var We=D._croppingPolygons.map(function(st){return st.map(function(mt){var It=D.imageToViewportCoordinates(mt.x,mt.y,!0).rotate(-D.getRotation(!0),D._getRotationPoint(!0)),Jt=Ne.viewportCoordToDrawerCoord(It);return $&&(Jt=Jt.times($)),G&&(Jt=Jt.plus(G)),Jt})});this._clipWithPolygons(We,V)}catch(st){d.console.error(st)}Ae=!0}if(D._hasOpaqueTile=!1,D.placeholderFillStyle&&D._hasOpaqueTile===!1){let st=this.viewportToDrawerRectangle(D.getBoundsNoRotate(!0));$&&(st=st.times($)),G&&(st=st.translate(G));let mt=null;mt=typeof D.placeholderFillStyle=="function"?D.placeholderFillStyle(D,this.context):D.placeholderFillStyle,this._drawRectangle(st,mt,V)}var vt=function(st){if(typeof st=="number")return B(st);if(!st||!d.Browser)return w;var mt=st[d.Browser.vendor];return S(mt)&&(mt=st["*"]),B(mt)}(D.subPixelRoundingForTransparency),ot=!1;vt===d.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?ot=!0:vt===d.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(ot=!(this.viewer&&this.viewer.isAnimating()));for(var nt=0;nt<O.length;nt++)X=O[nt],this._drawTile(X,D,V,$,G,ot,D.source),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:D,tile:X});Ae&&this._restoreContext(V),$||(D.getRotation(!0)%360!=0&&this._restoreRotationChanges(V),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(V)),V&&($&&this._setRotations(D),this.blendSketch({opacity:D.opacity,scale:$,translate:G,compositeOperation:D.compositeOperation,bounds:te}),$&&(D.getRotation(!0)%360!=0&&this._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(!1))),this._drawDebugInfo(D,O),this._raiseTiledImageDrawnEvent(D,O)}}_drawDebugInfo(D,O){if(D.debugMode)for(var V=O.length-1;V>=0;V--){var $=O[V];try{this._drawDebugInfoOnTile($,O.length,V,D)}catch(G){d.console.error(G)}}}_clipWithPolygons(D,O){var V=this._getContext(O);V.beginPath();for(const $ of D)for(const[G,X]of $.entries())V[G===0?"moveTo":"lineTo"](X.x,X.y);V.clip()}_drawTile(D,O,V,$,G,X,te){d.console.assert(D,"[Drawer._drawTile] tile is required"),d.console.assert(O,"[Drawer._drawTile] drawingHandler is required");var ae=this._getContext(V);$=$||1,this._drawTileToCanvas(D,ae,O,$,G,X,te)}_drawTileToCanvas(D,O,V,$,G,X,te){var ae,oe,Ae,ve=D.position.times(d.pixelDensityRatio),De=D.size.times(d.pixelDensityRatio);D.context2D||D.cacheImageRecord?(ae=D.getCanvasContext(),D.loaded&&ae?(O.save(),typeof $=="number"&&$!==1&&(ve=ve.times($),De=De.times($)),G instanceof d.Point&&(ve=ve.plus(G)),O.globalAlpha===1&&D.hasTransparency&&(X&&(ve.x=Math.round(ve.x),ve.y=Math.round(ve.y),De.x=Math.round(De.x),De.y=Math.round(De.y)),O.clearRect(ve.x,ve.y,De.x,De.y)),this._raiseTileDrawingEvent(V,O,D,ae),D.sourceBounds?(oe=Math.min(D.sourceBounds.width,ae.canvas.width),Ae=Math.min(D.sourceBounds.height,ae.canvas.height)):(oe=ae.canvas.width,Ae=ae.canvas.height),O.translate(ve.x+De.x/2,0),D.flipped&&O.scale(-1,1),O.drawImage(ae.canvas,0,0,oe,Ae,-De.x/2,ve.y,De.x,De.y),O.restore()):d.console.warn("Attempting to draw tile %s when it's not yet loaded.",D.toString())):d.console.warn("[Drawer._drawTileToCanvas] attempting to draw tile %s when it's not cached",D.toString())}_getContext(D){var O=this.context;if(D){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var V=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=V.x,this.sketchCanvas.height=V.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var $=this;this.viewer.addHandler("rotate",function G(){if($.viewport.getRotation()!==0){$.viewer.removeHandler("rotate",G);var X=$._calculateSketchCanvasSize();$.sketchCanvas.width=X.x,$.sketchCanvas.height=X.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}O=this.sketchContext}return O}_saveContext(D){this._getContext(D).save()}_restoreContext(D){this._getContext(D).restore()}_setClip(D,O){var V=this._getContext(O);V.beginPath(),V.rect(D.x,D.y,D.width,D.height),V.clip()}_drawRectangle(D,O,V){var $=this._getContext(V);$.save(),$.fillStyle=O,$.fillRect(D.x,D.y,D.width,D.height),$.restore()}blendSketch(D,O,V,$){var G=D;d.isPlainObject(G)||(G={opacity:D,scale:O,translate:V,compositeOperation:$}),D=G.opacity,$=G.compositeOperation;var X=G.bounds;if(this.context.save(),this.context.globalAlpha=D,$&&(this.context.globalCompositeOperation=$),X)X.x<0&&(X.width+=X.x,X.x=0),X.x+X.width>this.canvas.width&&(X.width=this.canvas.width-X.x),X.y<0&&(X.height+=X.y,X.y=0),X.y+X.height>this.canvas.height&&(X.height=this.canvas.height-X.y),this.context.drawImage(this.sketchCanvas,X.x,X.y,X.width,X.height,X.x,X.y,X.width,X.height);else{O=G.scale||1;var te=(V=G.translate)instanceof d.Point?V:new d.Point(0,0),ae=0,oe=0;if(V){var Ae=this.sketchCanvas.width-this.canvas.width,ve=this.sketchCanvas.height-this.canvas.height;ae=Math.round(Ae/2),oe=Math.round(ve/2)}this.context.drawImage(this.sketchCanvas,te.x-ae*O,te.y-oe*O,(this.canvas.width+2*ae)*O,(this.canvas.height+2*oe)*O,-ae,-oe,this.canvas.width+2*ae,this.canvas.height+2*oe)}this.context.restore()}_drawDebugInfoOnTile(D,O,V,$){var G=this.viewer.world.getIndexOfItem($)%this.debugGridColor.length,X=this.context;X.save(),X.lineWidth=2*d.pixelDensityRatio,X.font="small-caps bold "+13*d.pixelDensityRatio+"px arial",X.strokeStyle=this.debugGridColor[G],X.fillStyle=this.debugGridColor[G],this._setRotations($),this._viewportFlipped&&this._flip({point:D.position.plus(D.size.divide(2))}),X.strokeRect(D.position.x*d.pixelDensityRatio,D.position.y*d.pixelDensityRatio,D.size.x*d.pixelDensityRatio,D.size.y*d.pixelDensityRatio);var te=(D.position.x+D.size.x/2)*d.pixelDensityRatio,ae=(D.position.y+D.size.y/2)*d.pixelDensityRatio;X.translate(te,ae);const oe=this.viewport.getRotation(!0);X.rotate(Math.PI/180*-oe),X.translate(-te,-ae),D.x===0&&D.y===0&&(X.fillText("Zoom: "+this.viewport.getZoom(),D.position.x*d.pixelDensityRatio,(D.position.y-30)*d.pixelDensityRatio),X.fillText("Pan: "+this.viewport.getBounds().toString(),D.position.x*d.pixelDensityRatio,(D.position.y-20)*d.pixelDensityRatio)),X.fillText("Level: "+D.level,(D.position.x+10)*d.pixelDensityRatio,(D.position.y+20)*d.pixelDensityRatio),X.fillText("Column: "+D.x,(D.position.x+10)*d.pixelDensityRatio,(D.position.y+30)*d.pixelDensityRatio),X.fillText("Row: "+D.y,(D.position.x+10)*d.pixelDensityRatio,(D.position.y+40)*d.pixelDensityRatio),X.fillText("Order: "+V+" of "+O,(D.position.x+10)*d.pixelDensityRatio,(D.position.y+50)*d.pixelDensityRatio),X.fillText("Size: "+D.size.toString(),(D.position.x+10)*d.pixelDensityRatio,(D.position.y+60)*d.pixelDensityRatio),X.fillText("Position: "+D.position.toString(),(D.position.x+10)*d.pixelDensityRatio,(D.position.y+70)*d.pixelDensityRatio),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(),$.getRotation(!0)%360!=0&&this._restoreRotationChanges(),X.restore()}_updateImageSmoothingEnabled(D){D.msImageSmoothingEnabled=this._imageSmoothingEnabled,D.imageSmoothingEnabled=this._imageSmoothingEnabled}_getCanvasSize(D){var O=this._getContext(D).canvas;return new d.Point(O.width,O.height)}_getCanvasCenter(){return new d.Point(this.canvas.width/2,this.canvas.height/2)}_setRotations(D,O=!1){var V=!1;this.viewport.getRotation(!0)%360!=0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:O,saveContext:V}),V=!1),D.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:D.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(D._getRotationPoint(!0),!0),useSketch:O,saveContext:V})}_offsetForRotation(D){var O=D.point?D.point.times(d.pixelDensityRatio):this._getCanvasCenter(),V=this._getContext(D.useSketch);V.save(),V.translate(O.x,O.y),V.rotate(Math.PI/180*D.degrees),V.translate(-O.x,-O.y)}_flip(D){var O=(D=D||{}).point?D.point.times(d.pixelDensityRatio):this._getCanvasCenter(),V=this._getContext(D.useSketch);V.translate(O.x,0),V.scale(-1,1),V.translate(-O.x,0)}_restoreRotationChanges(D){this._getContext(D).restore()}_calculateCanvasSize(){var D=d.pixelDensityRatio,O=this.viewport.getContainerSize();return{x:Math.round(O.x*D),y:Math.round(O.y*D)}}_calculateSketchCanvasSize(){var D=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return D;var O=Math.ceil(Math.sqrt(D.x*D.x+D.y*D.y));return{x:O,y:O}}}d.CanvasDrawer=v;var w=d.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function S(R){return R!==d.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&R!==d.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&R!==d.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function B(R){return S(R)?w:R}}(t),function(d){const p=d;p.WebGLDrawer=class extends p.DrawerBase{constructor(v){super(v),this._destroyed=!1,this._TextureMap=new Map,this._TileMap=new Map,this._gl=null,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._glFramebufferToCanvasTransform=null,this._outputCanvas=null,this._outputContext=null,this._clippingCanvas=null,this._clippingContext=null,this._renderingCanvas=null,this._backupCanvasDrawer=null,this._boundToTileReady=w=>this._tileReadyHandler(w),this._boundToImageUnloaded=w=>this._imageUnloadedHandler(w),this.viewer.addHandler("tile-ready",this._boundToTileReady),this.viewer.addHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.rejectEventHandler("tile-drawn","The WebGLDrawer does not raise the tile-drawn event"),this.viewer.rejectEventHandler("tile-drawing","The WebGLDrawer does not raise the tile-drawing event"),this._setupCanvases(),this._setupRenderer(),this.context=this._outputContext}destroy(){if(this._destroyed)return;let v=this._gl;var w=v.getParameter(v.MAX_TEXTURE_IMAGE_UNITS);for(let B=0;B<w;++B)v.activeTexture(v.TEXTURE0+B),v.bindTexture(v.TEXTURE_2D,null),v.bindTexture(v.TEXTURE_CUBE_MAP,null);v.bindBuffer(v.ARRAY_BUFFER,null),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,null),v.bindRenderbuffer(v.RENDERBUFFER,null),v.bindFramebuffer(v.FRAMEBUFFER,null),Array.from(this._TextureMap.keys()).forEach(B=>{this._cleanupImageData(B)}),v.deleteBuffer(this._secondPass.bufferOutputPosition),v.deleteFramebuffer(this._glFrameBuffer),this._renderingCanvas.width=this._renderingCanvas.height=1,this._clippingCanvas.width=this._clippingCanvas.height=1,this._outputCanvas.width=this._outputCanvas.height=1,this._renderingCanvas=null,this._clippingCanvas=this._clippingContext=null,this._outputCanvas=this._outputContext=null;let S=v.getExtension("WEBGL_lose_context");S&&S.loseContext(),this.viewer.removeHandler("tile-ready",this._boundToTileReady),this.viewer.removeHandler("image-unloaded",this._boundToImageUnloaded),this._gl=null,this._backupCanvasDrawer&&(this._backupCanvasDrawer.destroy(),this._backupCanvasDrawer=null),this.container.removeChild(this.canvas),this.viewer.drawer===this&&(this.viewer.drawer=null),this._destroyed=!0}canRotate(){return!0}static isSupported(){let v=document.createElement("canvas"),w=d.isFunction(v.getContext)&&v.getContext("webgl"),S=w&&w.getExtension("WEBGL_lose_context");return S&&S.loseContext(),!!w}getType(){return"webgl"}minimumOverlapRequired(v){return v.isTainted()}_createDrawingElement(){let v=d.makeNeutralElement("canvas"),w=this._calculateCanvasSize();return v.width=w.x,v.height=w.y,v}_getBackupCanvasDrawer(){return this._backupCanvasDrawer||(this._backupCanvasDrawer=this.viewer.requestDrawer("canvas",{mainDrawer:!1}),this._backupCanvasDrawer.canvas.style.setProperty("visibility","hidden")),this._backupCanvasDrawer}draw(v){let w=this._gl,S=this.viewport.getBoundsNoRotate(!0),B=this.viewport.getCenter(!0),R=this.viewport.getRotation(!0)*Math.PI/180,D=this.viewport.flipped?-1:1,O=d.Mat3.makeTranslation(-B.x,-B.y),V=d.Mat3.makeScaling(2/S.width*D,-2/S.height),$=d.Mat3.makeRotation(-R),G=V.multiply($).multiply(O);w.bindFramebuffer(w.FRAMEBUFFER,null),w.clear(w.COLOR_BUFFER_BIT),this._outputContext.clearRect(0,0,this._outputCanvas.width,this._outputCanvas.height);let X=!1;v.forEach((te,ae)=>{if(te.isTainted()){X&&(this._outputContext.drawImage(this._renderingCanvas,0,0),w.bindFramebuffer(w.FRAMEBUFFER,null),w.clear(w.COLOR_BUFFER_BIT),X=!1);const oe=this._getBackupCanvasDrawer();oe.draw([te]),this._outputContext.drawImage(oe.canvas,0,0)}else{let oe=te.getTilesToDraw();if(te.placeholderFillStyle&&te._hasOpaqueTile===!1&&this._drawPlaceholder(te),oe.length===0||te.getOpacity()===0)return;let Ae=oe[0],ve=te.compositeOperation||this.viewer.compositeOperation||te._clip||te._croppingPolygons||te.debugMode,De=ve||te.opacity<1||Ae.hasTransparency;ve&&(X&&this._outputContext.drawImage(this._renderingCanvas,0,0),w.bindFramebuffer(w.FRAMEBUFFER,null),w.clear(w.COLOR_BUFFER_BIT)),w.useProgram(this._firstPass.shaderProgram),De?(w.bindFramebuffer(w.FRAMEBUFFER,this._glFrameBuffer),w.clear(w.COLOR_BUFFER_BIT)):w.bindFramebuffer(w.FRAMEBUFFER,null);let Ne=G,We=te.getRotation(!0);if(We%360!=0){let It=d.Mat3.makeRotation(-We*Math.PI/180),Jt=te.getBoundsNoRotate(!0).getCenter(),jt=d.Mat3.makeTranslation(Jt.x,Jt.y),_i=d.Mat3.makeTranslation(-Jt.x,-Jt.y),xi=jt.multiply(It).multiply(_i);Ne=G.multiply(xi)}let vt=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);if(vt<=0)throw new Error(`WegGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${vt}). This could happen
                        if too many contexts have been created and not released, or there is another problem with the graphics card.`);let ot=new Float32Array(12*vt),nt=new Array(vt),st=new Array(vt),mt=new Array(vt);for(let It=0;It<oe.length;It++){let Jt=oe[It].tile,jt=It%vt,_i=jt+1,xi=Jt.getCanvasContext(),Kt=xi?this._TextureMap.get(xi.canvas):null;if(Kt||(this._tileReadyHandler({tile:Jt,tiledImage:te}),Kt=xi?this._TextureMap.get(xi.canvas):null),Kt&&this._getTileData(Jt,te,Kt,Ne,jt,ot,nt,st,mt),_i===vt||It===oe.length-1){for(let _t=0;_t<=_i;_t++)w.activeTexture(w.TEXTURE0+_t),w.bindTexture(w.TEXTURE_2D,nt[_t]);w.bindBuffer(w.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),w.bufferData(w.ARRAY_BUFFER,ot,w.DYNAMIC_DRAW),st.forEach((_t,hi)=>{w.uniformMatrix3fv(this._firstPass.uTransformMatrices[hi],!1,_t)}),w.uniform1fv(this._firstPass.uOpacities,new Float32Array(mt)),w.bindBuffer(w.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),w.vertexAttribPointer(this._firstPass.aOutputPosition,2,w.FLOAT,!1,0,0),w.bindBuffer(w.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),w.vertexAttribPointer(this._firstPass.aTexturePosition,2,w.FLOAT,!1,0,0),w.bindBuffer(w.ARRAY_BUFFER,this._firstPass.bufferIndex),w.vertexAttribPointer(this._firstPass.aIndex,1,w.FLOAT,!1,0,0),w.drawArrays(w.TRIANGLES,0,6*_i)}}De&&(w.useProgram(this._secondPass.shaderProgram),w.bindFramebuffer(w.FRAMEBUFFER,null),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,this._renderToTexture),this._gl.uniform1f(this._secondPass.uOpacityMultiplier,te.opacity),w.bindBuffer(w.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),w.vertexAttribPointer(this._secondPass.aTexturePosition,2,w.FLOAT,!1,0,0),w.bindBuffer(w.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),w.vertexAttribPointer(this._firstPass.aOutputPosition,2,w.FLOAT,!1,0,0),w.drawArrays(w.TRIANGLES,0,6)),X=!0,ve&&(this._applyContext2dPipeline(te,oe,ae),X=!1,w.bindFramebuffer(w.FRAMEBUFFER,null),w.clear(w.COLOR_BUFFER_BIT)),ae===0&&this._raiseTiledImageDrawnEvent(te,oe.map(It=>It.tile))}}),X&&this._outputContext.drawImage(this._renderingCanvas,0,0)}setImageSmoothingEnabled(v){}drawDebuggingRect(v){let w=this._outputContext;w.save(),w.lineWidth=2*d.pixelDensityRatio,w.strokeStyle=this.debugGridColor[0],w.fillStyle=this.debugGridColor[0],w.strokeRect(v.x*d.pixelDensityRatio,v.y*d.pixelDensityRatio,v.width*d.pixelDensityRatio,v.height*d.pixelDensityRatio),w.restore()}_getTextureDataFromTile(v){return v.getCanvasContext().canvas}_applyContext2dPipeline(v,w,S){if(this._outputContext.save(),this._outputContext.globalCompositeOperation=S===0?null:v.compositeOperation||this.viewer.compositeOperation,v._croppingPolygons||v._clip?(this._renderToClippingCanvas(v),this._outputContext.drawImage(this._clippingCanvas,0,0)):this._outputContext.drawImage(this._renderingCanvas,0,0),this._outputContext.restore(),v.debugMode){const B=this.viewer.viewport.getFlip();B&&this._flip(),this._drawDebugInfo(w,v,B),B&&this._flip()}}_getTileData(v,w,S,B,R,D,O,V,$){let G=S.texture,X=S.position;D.set(X,12*R);let te=this._calculateOverlapFraction(v,w),ae=v.positionedBounds.width*te.x,oe=v.positionedBounds.height*te.y,Ae=v.positionedBounds.x+(v.x===0?0:ae),ve=v.positionedBounds.y+(v.y===0?0:oe),De=v.positionedBounds.x+v.positionedBounds.width-(v.isRightMost?0:ae)-Ae,Ne=v.positionedBounds.y+v.positionedBounds.height-(v.isBottomMost?0:oe)-ve,We=new d.Mat3([De,0,0,0,Ne,0,Ae,ve,1]);if(v.flipped){let ot=d.Mat3.makeTranslation(.5,0),nt=d.Mat3.makeTranslation(-.5,0),st=ot.multiply(d.Mat3.makeScaling(-1,1)).multiply(nt);We=We.multiply(st)}let vt=B.multiply(We);$[R]=v.opacity,O[R]=G,V[R]=vt.values}_setupRenderer(){let v=this._gl;v||d.console.error("_setupCanvases must be called before _setupRenderer"),this._unitQuad=this._makeQuadVertexBuffer(0,1,0,1),this._makeFirstPassShaderProgram(),this._makeSecondPassShaderProgram(),this._renderToTexture=v.createTexture(),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,this._renderToTexture),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,this._renderingCanvas.width,this._renderingCanvas.height,0,v.RGBA,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),this._glFrameBuffer=v.createFramebuffer(),v.bindFramebuffer(v.FRAMEBUFFER,this._glFrameBuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,this._renderToTexture,0),v.enable(v.BLEND),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA)}_makeFirstPassShaderProgram(){let v=this._glNumTextures=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);const w=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;
            attribute float a_index;

            ${[...Array(v).keys()].map(V=>`uniform mat3 u_matrix_${V};`).join(`
`)} // create a uniform mat3 for each potential tile to draw

            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {

                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()

                ${[...Array(v).keys()].map(V=>`${V>0?"else ":""}if(int(a_index) == ${V}) { transform_matrix = u_matrix_${V}; }`).join(`
`)}

                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
                v_image_index = a_index;
            }
            `,S=`
            precision mediump float;

            // our textures
            uniform sampler2D u_images[${v}];
            // our opacities
            uniform float u_opacities[${v}];

            // the varyings passed in from the vertex shader.
            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {
                // can't index directly with a variable, need to use a loop iterator hack
                for(int i = 0; i < ${v}; ++i){
                    if(i == int(v_image_index)){
                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];
                    }
                }
            }
            `;let B=this._gl,R=this.constructor.initShaderProgram(B,w,S);B.useProgram(R),this._firstPass={shaderProgram:R,aOutputPosition:B.getAttribLocation(R,"a_output_position"),aTexturePosition:B.getAttribLocation(R,"a_texture_position"),aIndex:B.getAttribLocation(R,"a_index"),uTransformMatrices:[...Array(this._glNumTextures).keys()].map(V=>B.getUniformLocation(R,`u_matrix_${V}`)),uImages:B.getUniformLocation(R,"u_images"),uOpacities:B.getUniformLocation(R,"u_opacities"),bufferOutputPosition:B.createBuffer(),bufferTexturePosition:B.createBuffer(),bufferIndex:B.createBuffer()},B.uniform1iv(this._firstPass.uImages,[...Array(v).keys()]);let D=new Float32Array(12*v);for(let V=0;V<v;++V)D.set(Float32Array.from(this._unitQuad),12*V);B.bindBuffer(B.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),B.bufferData(B.ARRAY_BUFFER,D,B.STATIC_DRAW),B.enableVertexAttribArray(this._firstPass.aOutputPosition),B.bindBuffer(B.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),B.enableVertexAttribArray(this._firstPass.aTexturePosition),B.bindBuffer(B.ARRAY_BUFFER,this._firstPass.bufferIndex);let O=[...Array(this._glNumTextures).keys()].map(V=>Array(6).fill(V)).flat();B.bufferData(B.ARRAY_BUFFER,new Float32Array(O),B.STATIC_DRAW),B.enableVertexAttribArray(this._firstPass.aIndex)}_makeSecondPassShaderProgram(){let v=this._gl,w=this.constructor.initShaderProgram(v,`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;

            uniform mat3 u_matrix;

            varying vec2 v_texture_position;

            void main() {
                gl_Position = vec4(u_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
            }
            `,`
            precision mediump float;

            // our texture
            uniform sampler2D u_image;

            // the texCoords passed in from the vertex shader.
            varying vec2 v_texture_position;

            // the opacity multiplier for the image
            uniform float u_opacity_multiplier;

            void main() {
                gl_FragColor = texture2D(u_image, v_texture_position);
                gl_FragColor *= u_opacity_multiplier;
            }
            `);v.useProgram(w),this._secondPass={shaderProgram:w,aOutputPosition:v.getAttribLocation(w,"a_output_position"),aTexturePosition:v.getAttribLocation(w,"a_texture_position"),uMatrix:v.getUniformLocation(w,"u_matrix"),uImage:v.getUniformLocation(w,"u_image"),uOpacityMultiplier:v.getUniformLocation(w,"u_opacity_multiplier"),bufferOutputPosition:v.createBuffer(),bufferTexturePosition:v.createBuffer()},v.bindBuffer(v.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),v.bufferData(v.ARRAY_BUFFER,this._unitQuad,v.STATIC_DRAW),v.enableVertexAttribArray(this._secondPass.aOutputPosition),v.bindBuffer(v.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),v.bufferData(v.ARRAY_BUFFER,this._unitQuad,v.DYNAMIC_DRAW),v.enableVertexAttribArray(this._secondPass.aTexturePosition);let S=d.Mat3.makeScaling(2,2).multiply(d.Mat3.makeTranslation(-.5,-.5));v.uniformMatrix3fv(this._secondPass.uMatrix,!1,S.values)}_resizeRenderer(){let v=this._gl,w=this._renderingCanvas.width,S=this._renderingCanvas.height;v.viewport(0,0,w,S),v.deleteTexture(this._renderToTexture),this._renderToTexture=v.createTexture(),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,this._renderToTexture),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,w,S,0,v.RGBA,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.bindFramebuffer(v.FRAMEBUFFER,this._glFrameBuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,this._renderToTexture,0)}_setupCanvases(){let v=this;this._outputCanvas=this.canvas,this._outputContext=this._outputCanvas.getContext("2d"),this._renderingCanvas=document.createElement("canvas"),this._clippingCanvas=document.createElement("canvas"),this._clippingContext=this._clippingCanvas.getContext("2d"),this._renderingCanvas.width=this._clippingCanvas.width=this._outputCanvas.width,this._renderingCanvas.height=this._clippingCanvas.height=this._outputCanvas.height,this._gl=this._renderingCanvas.getContext("webgl"),this.viewer.addHandler("resize",function(){v._outputCanvas!==v.viewer.drawer.canvas&&(v._outputCanvas.style.width=v.viewer.drawer.canvas.clientWidth+"px",v._outputCanvas.style.height=v.viewer.drawer.canvas.clientHeight+"px");let w=v._calculateCanvasSize();v._outputCanvas.width===w.x&&v._outputCanvas.height===w.y||(v._outputCanvas.width=w.x,v._outputCanvas.height=w.y),v._renderingCanvas.style.width=v._outputCanvas.clientWidth+"px",v._renderingCanvas.style.height=v._outputCanvas.clientHeight+"px",v._renderingCanvas.width=v._clippingCanvas.width=v._outputCanvas.width,v._renderingCanvas.height=v._clippingCanvas.height=v._outputCanvas.height,v._resizeRenderer()})}_makeQuadVertexBuffer(v,w,S,B){return new Float32Array([v,B,w,B,v,S,v,S,w,B,w,S])}_tileReadyHandler(v){let w=v.tile,S=v.tiledImage;if(S.isTainted())return;let B=w.getCanvasContext(),R=B&&B.canvas;if(R&&!d.isCanvasTainted(R)){if(!this._TextureMap.get(R)){let D,O,V,$=this._gl,G=$.createTexture(),X=S.source.tileOverlap;if(w.sourceBounds?(O=Math.min(w.sourceBounds.width,R.width)/R.width,V=Math.min(w.sourceBounds.height,R.height)/R.height):(O=1,V=1),X>0){let ae=this._calculateOverlapFraction(w,S),oe=(w.x===0?0:ae.x)*O,Ae=(w.y===0?0:ae.y)*V,ve=(w.isRightMost?1:1-ae.x)*O,De=(w.isBottomMost?1:1-ae.y)*V;D=this._makeQuadVertexBuffer(oe,ve,Ae,De)}else D=O===1&&V===1?this._unitQuad:this._makeQuadVertexBuffer(0,O,0,V);let te={texture:G,position:D};this._TextureMap.set(R,te),$.activeTexture($.TEXTURE0),$.bindTexture($.TEXTURE_2D,G),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),this._uploadImageData(B)}}else S.isTainted()||(S.setTainted(!0),d.console.warn("WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"),this._raiseDrawerErrorEvent(S,"Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage."))}_calculateOverlapFraction(v,w){let S=w.source.tileOverlap,B=v.sourceBounds.width,R=v.sourceBounds.height;return{x:S/(B+((v.x===0?0:S)+(v.isRightMost?0:S))),y:S/(R+((v.y===0?0:S)+(v.isBottomMost?0:S)))}}_uploadImageData(v){let w=this._gl,S=v.canvas;try{if(!S)throw v;w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,S)}catch(B){d.console.error("Error uploading image data to WebGL",B)}}_imageUnloadedHandler(v){let w=v.context2D.canvas;this._cleanupImageData(w)}_cleanupImageData(v){let w=this._TextureMap.get(v);this._TextureMap.delete(v),w&&this._gl.deleteTexture(w.texture)}_setClip(){}_renderToClippingCanvas(v){if(this._clippingContext.clearRect(0,0,this._clippingCanvas.width,this._clippingCanvas.height),this._clippingContext.save(),this.viewer.viewport.getFlip()){const w=new d.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(w.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-w.x,0)}if(v._clip){let w=[{x:v._clip.x,y:v._clip.y},{x:v._clip.x+v._clip.width,y:v._clip.y},{x:v._clip.x+v._clip.width,y:v._clip.y+v._clip.height},{x:v._clip.x,y:v._clip.y+v._clip.height}].map(S=>{let B=v.imageToViewportCoordinates(S.x,S.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(B)});this._clippingContext.beginPath(),w.forEach((S,B)=>{this._clippingContext[B===0?"moveTo":"lineTo"](S.x,S.y)}),this._clippingContext.clip(),this._setClip()}if(v._croppingPolygons){let w=v._croppingPolygons.map(S=>S.map(B=>{let R=v.imageToViewportCoordinates(B.x,B.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(R)}));this._clippingContext.beginPath(),w.forEach(S=>{S.forEach((B,R)=>{this._clippingContext[R===0?"moveTo":"lineTo"](B.x,B.y)})}),this._clippingContext.clip()}if(this.viewer.viewport.getFlip()){const w=new d.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(w.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-w.x,0)}this._clippingContext.drawImage(this._renderingCanvas,0,0),this._clippingContext.restore()}_setRotations(v){var w=!1;this.viewport.getRotation(!0)%360!=0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),saveContext:w}),w=!1),v.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:v.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(v._getRotationPoint(!0),!0),saveContext:w})}_offsetForRotation(v){var w=v.point?v.point.times(d.pixelDensityRatio):this._getCanvasCenter(),S=this._outputContext;S.save(),S.translate(w.x,w.y),S.rotate(Math.PI/180*v.degrees),S.translate(-w.x,-w.y)}_flip(v){var w=(v=v||{}).point?v.point.times(d.pixelDensityRatio):this._getCanvasCenter(),S=this._outputContext;S.translate(w.x,0),S.scale(-1,1),S.translate(-w.x,0)}_drawDebugInfo(v,w,S){for(var B=v.length-1;B>=0;B--){var R=v[B].tile;try{this._drawDebugInfoOnTile(R,v.length,B,w,S)}catch(D){d.console.error(D)}}}_drawDebugInfoOnTile(v,w,S,B,R){var D=this.viewer.world.getIndexOfItem(B)%this.debugGridColor.length,O=this.context;O.save(),O.lineWidth=2*d.pixelDensityRatio,O.font="small-caps bold "+13*d.pixelDensityRatio+"px arial",O.strokeStyle=this.debugGridColor[D],O.fillStyle=this.debugGridColor[D],this._setRotations(B),R&&this._flip({point:v.position.plus(v.size.divide(2))}),O.strokeRect(v.position.x*d.pixelDensityRatio,v.position.y*d.pixelDensityRatio,v.size.x*d.pixelDensityRatio,v.size.y*d.pixelDensityRatio);var V=(v.position.x+v.size.x/2)*d.pixelDensityRatio,$=(v.position.y+v.size.y/2)*d.pixelDensityRatio;O.translate(V,$);const G=this.viewport.getRotation(!0);O.rotate(Math.PI/180*-G),O.translate(-V,-$),v.x===0&&v.y===0&&(O.fillText("Zoom: "+this.viewport.getZoom(),v.position.x*d.pixelDensityRatio,(v.position.y-30)*d.pixelDensityRatio),O.fillText("Pan: "+this.viewport.getBounds().toString(),v.position.x*d.pixelDensityRatio,(v.position.y-20)*d.pixelDensityRatio)),O.fillText("Level: "+v.level,(v.position.x+10)*d.pixelDensityRatio,(v.position.y+20)*d.pixelDensityRatio),O.fillText("Column: "+v.x,(v.position.x+10)*d.pixelDensityRatio,(v.position.y+30)*d.pixelDensityRatio),O.fillText("Row: "+v.y,(v.position.x+10)*d.pixelDensityRatio,(v.position.y+40)*d.pixelDensityRatio),O.fillText("Order: "+S+" of "+w,(v.position.x+10)*d.pixelDensityRatio,(v.position.y+50)*d.pixelDensityRatio),O.fillText("Size: "+v.size.toString(),(v.position.x+10)*d.pixelDensityRatio,(v.position.y+60)*d.pixelDensityRatio),O.fillText("Position: "+v.position.toString(),(v.position.x+10)*d.pixelDensityRatio,(v.position.y+70)*d.pixelDensityRatio),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(),B.getRotation(!0)%360!=0&&this._restoreRotationChanges(),O.restore()}_drawPlaceholder(v){const w=v.getBounds(!0),S=this.viewportToDrawerRectangle(v.getBounds(!0)),B=this._outputContext;let R;R=typeof v.placeholderFillStyle=="function"?v.placeholderFillStyle(v,B):v.placeholderFillStyle,this._offsetForRotation({degrees:this.viewer.viewport.getRotation(!0)}),B.fillStyle=R,B.translate(S.x,S.y),B.rotate(Math.PI/180*w.degrees),B.translate(-S.x,-S.y),B.fillRect(S.x,S.y,S.width,S.height),this._restoreRotationChanges()}_getCanvasCenter(){return new d.Point(this.canvas.width/2,this.canvas.height/2)}_restoreRotationChanges(){this._outputContext.restore()}static initShaderProgram(v,w,S){function B(V,$,G){const X=V.createShader($);return V.shaderSource(X,G),V.compileShader(X),V.getShaderParameter(X,V.COMPILE_STATUS)?X:(d.console.error(`An error occurred compiling the shaders: ${V.getShaderInfoLog(X)}`),V.deleteShader(X),null)}const R=B(v,v.VERTEX_SHADER,w),D=B(v,v.FRAGMENT_SHADER,S),O=v.createProgram();return v.attachShader(O,R),v.attachShader(O,D),v.linkProgram(O),v.getProgramParameter(O,v.LINK_STATUS)?O:(d.console.error(`Unable to initialize the shader program: ${v.getProgramInfoLog(O)}`),null)}}}(t),function(d){d.Viewport=function(p){var v=arguments;v.length&&v[0]instanceof d.Point&&(p={containerSize:v[0],contentSize:v[1],config:v[2]}),p.config&&(d.extend(!0,p,p.config),delete p.config),this._margins=d.extend({left:0,top:0,right:0,bottom:0},p.margins||{}),delete p.margins,p.initialDegrees=p.degrees,delete p.degrees,d.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:d.DEFAULT_SETTINGS.springStiffness,animationTime:d.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:d.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:d.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:d.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:d.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:d.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:d.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:d.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:d.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:d.DEFAULT_SETTINGS.degrees,flipped:d.DEFAULT_SETTINGS.flipped,homeFillsViewer:d.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:d.DEFAULT_SETTINGS.silenceMultiImageWarnings},p),this._updateContainerInnerSize(),this.centerSpringX=new d.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new d.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new d.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new d.Spring({initial:p.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new d.Rect(0,0,1,1),1),this.goHome(!0),this.update()},d.Viewport.prototype={get degrees(){return d.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(p){d.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(p)},resetContentSize:function(p){return d.console.assert(p,"[Viewport.resetContentSize] contentSize is required"),d.console.assert(p instanceof d.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),d.console.assert(p.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),d.console.assert(p.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new d.Rect(0,0,1,p.y/p.x),p.x),this},setHomeBounds:function(p,v){d.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(p,v)},_setContentBounds:function(p,v){d.console.assert(p,"[Viewport._setContentBounds] bounds is required"),d.console.assert(p instanceof d.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),d.console.assert(p.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),d.console.assert(p.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=p.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(v),this._contentBounds=p.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(v),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:v,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var p=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?p>=1?p:1:p>=1?1:p)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var p=this._contentBounds.getCenter(),v=1/this.getHomeZoom(),w=v/this.getAspectRatio();return new d.Rect(p.x-v/2,p.y-w/2,v,w)},goHome:function(p){return this.viewer&&this.viewer.raiseEvent("home",{immediately:p}),this.fitBounds(this.getHomeBounds(),p)},getMinZoom:function(){var p=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*p},getMaxZoom:function(){var p=this.maxZoomLevel;return p||(p=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,p/=this._contentBounds.width),Math.max(p,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new d.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return d.extend({},this._margins)},setMargins:function(p){d.console.assert(d.type(p)==="object","[Viewport.setMargins] margins must be an object"),this._margins=d.extend({left:0,top:0,right:0,bottom:0},p),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(p){return this.getBoundsNoRotate(p).rotate(-this.getRotation(p))},getBoundsNoRotate:function(p){var v=this.getCenter(p),w=1/this.getZoom(p),S=w/this.getAspectRatio();return new d.Rect(v.x-w/2,v.y-S/2,w,S)},getBoundsWithMargins:function(p){return this.getBoundsNoRotateWithMargins(p).rotate(-this.getRotation(p),this.getCenter(p))},getBoundsNoRotateWithMargins:function(p){var v=this.getBoundsNoRotate(p),w=this._containerInnerSize.x*this.getZoom(p);return v.x-=this._margins.left/w,v.y-=this._margins.top/w,v.width+=(this._margins.left+this._margins.right)/w,v.height+=(this._margins.top+this._margins.bottom)/w,v},getCenter:function(p){var v,w,S,B,R,D,O=new d.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),V=new d.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return p?O:this.zoomPoint?(v=this.pixelFromPoint(this.zoomPoint,!0),B=(S=1/(w=this.getZoom()))/this.getAspectRatio(),R=new d.Rect(O.x-S/2,O.y-B/2,S,B),D=this._pixelFromPoint(this.zoomPoint,R).minus(v).rotate(-this.getRotation(!0)).divide(this._containerInnerSize.x*w),V.plus(D)):V},getZoom:function(p){return p?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(p){return Math.max(Math.min(p,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(p){var v=this.viewportToViewerElementRectangle(p).getBoundingBox(),w=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),S=!1,B=!1;if(!this.wrapHorizontal){var R,D,O,V=v.x+v.width,$=w.x+w.width;R=v.width>w.width?this.visibilityRatio*w.width:this.visibilityRatio*v.width,D=w.x-V+R,O=$-v.x-R,R>w.width?(v.x+=(D+O)/2,S=!0):O<0?(v.x+=O,S=!0):D>0&&(v.x+=D,S=!0)}if(!this.wrapVertical){var G,X,te,ae=v.y+v.height,oe=w.y+w.height;G=v.height>w.height?this.visibilityRatio*w.height:this.visibilityRatio*v.height,X=w.y-ae+G,te=oe-v.y-G,G>w.height?(v.y+=(X+te)/2,B=!0):te<0?(v.y+=te,B=!0):X>0&&(v.y+=X,B=!0)}var Ae=S||B,ve=Ae?this.viewerElementToViewportRectangle(v):p.clone();return ve.xConstrained=S,ve.yConstrained=B,ve.constraintApplied=Ae,ve},_raiseConstraintsEvent:function(p){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:p})},applyConstraints:function(p){var v=this.getZoom(),w=this._applyZoomConstraints(v);v!==w&&this.zoomTo(w,this.zoomPoint,p);var S=this.getConstrainedBounds(!1);return S.constraintApplied&&(this.fitBounds(S,p),this._raiseConstraintsEvent(p)),this},ensureVisible:function(p){return this.applyConstraints(p)},_fitBounds:function(p,v){var w=(v=v||{}).immediately||!1,S=v.constraints||!1,B=this.getAspectRatio(),R=p.getCenter(),D=new d.Rect(p.x,p.y,p.width,p.height,p.degrees+this.getRotation()).getBoundingBox();D.getAspectRatio()>=B?D.height=D.width/B:D.width=D.height*B,D.x=R.x-D.width/2,D.y=R.y-D.height/2;var O=1/D.width;if(w)return this.panTo(R,!0),this.zoomTo(O,null,!0),S&&this.applyConstraints(!0),this;var V=this.getCenter(!0),$=this.getZoom(!0);this.panTo(V,!0),this.zoomTo($,null,!0);var G=this.getBounds(),X=this.getZoom();if(X===0||Math.abs(O/X-1)<1e-8)return this.zoomTo(O,null,!0),this.panTo(R,w),S&&this.applyConstraints(!1),this;if(S){this.panTo(R,!1),O=this._applyZoomConstraints(O),this.zoomTo(O,null,!1);var te=this.getConstrainedBounds();this.panTo(V,!0),this.zoomTo($,null,!0),this.fitBounds(te)}else{var ae=D.rotate(-this.getRotation()).getTopLeft().times(O).minus(G.getTopLeft().times(X)).divide(O-X);this.zoomTo(O,ae,w)}return this},fitBounds:function(p,v){return this._fitBounds(p,{immediately:v,constraints:!1})},fitBoundsWithConstraints:function(p,v){return this._fitBounds(p,{immediately:v,constraints:!0})},fitVertically:function(p){var v=new d.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(v,p)},fitHorizontally:function(p){var v=new d.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(v,p)},getConstrainedBounds:function(p){var v;return v=this.getBounds(p),this._applyBoundaryConstraints(v)},panBy:function(p,v){var w=new d.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(w.plus(p),v)},panTo:function(p,v){return v?(this.centerSpringX.resetTo(p.x),this.centerSpringY.resetTo(p.y)):(this.centerSpringX.springTo(p.x),this.centerSpringY.springTo(p.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:p,immediately:v}),this},zoomBy:function(p,v,w){return this.zoomTo(this.zoomSpring.target.value*p,v,w)},zoomTo:function(p,v,w){var S=this;return this.zoomPoint=v instanceof d.Point&&!isNaN(v.x)&&!isNaN(v.y)?v:null,w?this._adjustCenterSpringsForZoomPoint(function(){S.zoomSpring.resetTo(p)}):this.zoomSpring.springTo(p),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:p,refPoint:v,immediately:w}),this},setRotation:function(p,v){return this.rotateTo(p,null,v)},getRotation:function(p){return p?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(p,v,w){return this.rotateTo(p,v,w)},rotateTo:function(p,v,w){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===p&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=v instanceof d.Point&&!isNaN(v.x)&&!isNaN(v.y)?v:null,w)if(this.rotationPivot){if(!(p-this._oldDegrees))return this.rotationPivot=null,this;this._rotateAboutPivot(p)}else this.degreesSpring.resetTo(p);else{var S=d.positiveModulo(this.degreesSpring.current.value,360),B=d.positiveModulo(p,360),R=B-S;R>180?B-=360:R<-180&&(B+=360);var D=S-B;this.degreesSpring.resetTo(p+D),this.degreesSpring.springTo(p)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:p,immediately:!!w,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(p,v,w){return this.rotateTo(this.degreesSpring.target.value+p,v,w)},resize:function(p,v){var w,S=this.getBoundsNoRotate(),B=S;this.containerSize.x=p.x,this.containerSize.y=p.y,this._updateContainerInnerSize(),v&&(w=p.x/this.containerSize.x,B.width=S.width*w,B.height=B.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:p,maintain:v});var R=this.fitBounds(B,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:p,maintain:v}),R},_updateContainerInnerSize:function(){this._containerInnerSize=new d.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var p=this;this._adjustCenterSpringsForZoomPoint(function(){p.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var v=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,v||!this.zoomSpring.isAtTargetValue()||!this.centerSpringX.isAtTargetValue()||!this.centerSpringY.isAtTargetValue()||!this.degreesSpring.isAtTargetValue()},_rotateAboutPivot:function(p){var v=p===!0,w=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(w.x),this.centerSpringY.shiftBy(w.y),v?this.degreesSpring.update():this.degreesSpring.resetTo(p);var S=this.degreesSpring.current.value-this._oldDegrees,B=w.rotate(-1*S).times(-1);this.centerSpringX.shiftBy(B.x),this.centerSpringY.shiftBy(B.y)},_adjustCenterSpringsForZoomPoint:function(p){if(this.zoomPoint){var v=this.pixelFromPoint(this.zoomPoint,!0);p();var w=this.pixelFromPoint(this.zoomPoint,!0).minus(v),S=this.deltaPointsFromPixels(w,!0);this.centerSpringX.shiftBy(S.x),this.centerSpringY.shiftBy(S.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else p()},deltaPixelsFromPointsNoRotate:function(p,v){return p.times(this._containerInnerSize.x*this.getZoom(v))},deltaPixelsFromPoints:function(p,v){return this.deltaPixelsFromPointsNoRotate(p.rotate(this.getRotation(v)),v)},deltaPointsFromPixelsNoRotate:function(p,v){return p.divide(this._containerInnerSize.x*this.getZoom(v))},deltaPointsFromPixels:function(p,v){return this.deltaPointsFromPixelsNoRotate(p,v).rotate(-this.getRotation(v))},pixelFromPointNoRotate:function(p,v){return this._pixelFromPointNoRotate(p,this.getBoundsNoRotate(v))},pixelFromPoint:function(p,v){return this._pixelFromPoint(p,this.getBoundsNoRotate(v))},_pixelFromPointNoRotate:function(p,v){return p.minus(v.getTopLeft()).times(this._containerInnerSize.x/v.width).plus(new d.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(p,v){return this._pixelFromPointNoRotate(p.rotate(this.getRotation(!0),this.getCenter(!0)),v)},pointFromPixelNoRotate:function(p,v){var w=this.getBoundsNoRotate(v);return p.minus(new d.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/w.width).plus(w.getTopLeft())},pointFromPixel:function(p,v){return this.pointFromPixelNoRotate(p,v).rotate(-this.getRotation(v),this.getCenter(v))},_viewportToImageDelta:function(p,v){var w=this._contentBoundsNoRotate.width;return new d.Point(p*this._contentSizeNoRotate.x/w,v*this._contentSizeNoRotate.x/w)},viewportToImageCoordinates:function(p,v){if(p instanceof d.Point)return this.viewportToImageCoordinates(p.x,p.y);if(this.viewer){var w=this.viewer.world.getItemCount();if(w>1)this.silenceMultiImageWarnings||d.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(w===1)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(p,v,!0)}return this._viewportToImageDelta(p-this._contentBoundsNoRotate.x,v-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(p,v){var w=this._contentBoundsNoRotate.width;return new d.Point(p/this._contentSizeNoRotate.x*w,v/this._contentSizeNoRotate.x*w)},imageToViewportCoordinates:function(p,v){if(p instanceof d.Point)return this.imageToViewportCoordinates(p.x,p.y);if(this.viewer){var w=this.viewer.world.getItemCount();if(w>1)this.silenceMultiImageWarnings||d.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(w===1)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(p,v,!0)}var S=this._imageToViewportDelta(p,v);return S.x+=this._contentBoundsNoRotate.x,S.y+=this._contentBoundsNoRotate.y,S},imageToViewportRectangle:function(p,v,w,S){var B=p;if(B instanceof d.Rect||(B=new d.Rect(p,v,w,S)),this.viewer){var R=this.viewer.world.getItemCount();if(R>1)this.silenceMultiImageWarnings||d.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(R===1)return this.viewer.world.getItemAt(0).imageToViewportRectangle(p,v,w,S,!0)}var D=this.imageToViewportCoordinates(B.x,B.y),O=this._imageToViewportDelta(B.width,B.height);return new d.Rect(D.x,D.y,O.x,O.y,B.degrees)},viewportToImageRectangle:function(p,v,w,S){var B=p;if(B instanceof d.Rect||(B=new d.Rect(p,v,w,S)),this.viewer){var R=this.viewer.world.getItemCount();if(R>1)this.silenceMultiImageWarnings||d.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(R===1)return this.viewer.world.getItemAt(0).viewportToImageRectangle(p,v,w,S,!0)}var D=this.viewportToImageCoordinates(B.x,B.y),O=this._viewportToImageDelta(B.width,B.height);return new d.Rect(D.x,D.y,O.x,O.y,B.degrees)},viewerElementToImageCoordinates:function(p){var v=this.pointFromPixel(p,!0);return this.viewportToImageCoordinates(v)},imageToViewerElementCoordinates:function(p){var v=this.imageToViewportCoordinates(p);return this.pixelFromPoint(v,!0)},windowToImageCoordinates:function(p){d.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var v=p.minus(d.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(v)},imageToWindowCoordinates:function(p){return d.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(p).plus(d.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(p){return this.pointFromPixel(p,!0)},viewportToViewerElementCoordinates:function(p){return this.pixelFromPoint(p,!0)},viewerElementToViewportRectangle:function(p){return d.Rect.fromSummits(this.pointFromPixel(p.getTopLeft(),!0),this.pointFromPixel(p.getTopRight(),!0),this.pointFromPixel(p.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(p){return d.Rect.fromSummits(this.pixelFromPoint(p.getTopLeft(),!0),this.pixelFromPoint(p.getTopRight(),!0),this.pixelFromPoint(p.getBottomLeft(),!0))},windowToViewportCoordinates:function(p){d.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var v=p.minus(d.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(v)},viewportToWindowCoordinates:function(p){return d.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(p).plus(d.getElementPosition(this.viewer.element))},viewportToImageZoom:function(p){if(this.viewer){var v=this.viewer.world.getItemCount();if(v>1)this.silenceMultiImageWarnings||d.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(v===1)return this.viewer.world.getItemAt(0).viewportToImageZoom(p)}var w=this._contentSizeNoRotate.x;return p*(this._containerInnerSize.x/w*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(p){if(this.viewer){var v=this.viewer.world.getItemCount();if(v>1)this.silenceMultiImageWarnings||d.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");else if(v===1)return this.viewer.world.getItemAt(0).imageToViewportZoom(p)}return p*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(p){return this.flipped===p||(this.flipped=p,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:p})),this},getMaxZoomPixelRatio:function(){return this.maxZoomPixelRatio},setMaxZoomPixelRatio:function(p,v=!0,w=!1){d.console.assert(!isNaN(p),"[Viewport.setMaxZoomPixelRatio] ratio must be a number"),isNaN(p)||(this.maxZoomPixelRatio=p,v&&this.getZoom()>this.getMaxZoom()&&this.applyConstraints(w))}}}(t),function(d){d.TiledImage=function(p){this._initialized=!1,d.console.assert(p.tileCache,"[TiledImage] options.tileCache is required"),d.console.assert(p.drawer,"[TiledImage] options.drawer is required"),d.console.assert(p.viewer,"[TiledImage] options.viewer is required"),d.console.assert(p.imageLoader,"[TiledImage] options.imageLoader is required"),d.console.assert(p.source,"[TiledImage] options.source is required"),d.console.assert(!p.clip||p.clip instanceof d.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),d.EventSource.call(this),this._tileCache=p.tileCache,delete p.tileCache,this._drawer=p.drawer,delete p.drawer,this._imageLoader=p.imageLoader,delete p.imageLoader,p.clip instanceof d.Rect&&(this._clip=p.clip.clone()),delete p.clip;var v=p.x||0;delete p.x;var w=p.y||0;delete p.y,this.normHeight=p.source.dimensions.y/p.source.dimensions.x,this.contentAspectX=p.source.dimensions.x/p.source.dimensions.y;var S=1;p.width?(S=p.width,delete p.width,p.height&&(d.console.error("specifying both width and height to a tiledImage is not supported"),delete p.height)):p.height&&(S=p.height/this.normHeight,delete p.height);var B=p.fitBounds;delete p.fitBounds;var R=p.fitBoundsPlacement||t.Placement.CENTER;delete p.fitBoundsPlacement;var D=p.degrees||0;delete p.degrees;var O=p.ajaxHeaders;delete p.ajaxHeaders,d.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_needsDraw:!0,_needsUpdate:!0,_hasOpaqueTile:!1,_tilesLoading:0,_tilesToDraw:[],_lastDrawn:[],_isBlending:!1,_wasBlending:!1,_isTainted:!1,springStiffness:d.DEFAULT_SETTINGS.springStiffness,animationTime:d.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:d.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:d.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:d.DEFAULT_SETTINGS.wrapVertical,immediateRender:d.DEFAULT_SETTINGS.immediateRender,blendTime:d.DEFAULT_SETTINGS.blendTime,alwaysBlend:d.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:d.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:d.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:d.DEFAULT_SETTINGS.iOSDevice,debugMode:d.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:d.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:d.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:d.DEFAULT_SETTINGS.placeholderFillStyle,opacity:d.DEFAULT_SETTINGS.opacity,preload:d.DEFAULT_SETTINGS.preload,compositeOperation:d.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:d.DEFAULT_SETTINGS.subPixelRoundingForTransparency,maxTilesPerFrame:d.DEFAULT_SETTINGS.maxTilesPerFrame},p),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new d.Spring({initial:v,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new d.Spring({initial:w,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new d.Spring({initial:S,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new d.Spring({initial:D,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),B&&this.fitBounds(B,R,!0),this._ownAjaxHeaders={},this.setAjaxHeaders(O,!1),this._initialized=!0},d.extend(d.TiledImage.prototype,d.EventSource.prototype,{needsDraw:function(){return this._needsDraw},redraw:function(){this._needsDraw=!0},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(p){p!==this._fullyLoaded&&(this._fullyLoaded=p,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=d.now(),this._needsDraw=!0},update:function(p){let v=this._xSpring.update(),w=this._ySpring.update(),S=this._scaleSpring.update(),B=this._degreesSpring.update(),R=v||w||S||B||this._needsUpdate;if(R||p||!this._fullyLoaded){let D=this._updateLevelsForViewport();this._setFullyLoaded(D)}return this._needsUpdate=!1,!!R&&(this._updateForScale(),this._raiseBoundsChange(),this._needsDraw=!0,!0)},setDrawn:function(){return this._needsDraw=this._isBlending||this._wasBlending,this._needsDraw},setTainted(p){this._isTainted=p},isTainted(){return this._isTainted},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy(this.viewer)},getBounds:function(p){return this.getBoundsNoRotate(p).rotate(this.getRotation(p),this._getRotationPoint(p))},getBoundsNoRotate:function(p){return p?new d.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new d.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return d.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(p){var v=this.getBoundsNoRotate(p);if(this._clip){var w=(p?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,S=this._clip.times(w);v=new d.Rect(v.x+S.x,v.y+S.y,S.width,S.height)}return v.rotate(this.getRotation(p),this._getRotationPoint(p))},getTileBounds:function(p,v,w){var S=this.source.getNumTiles(p),B=(S.x+v%S.x)%S.x,R=(S.y+w%S.y)%S.y,D=this.source.getTileBounds(p,B,R);return this.getFlip()&&(D.x=Math.max(0,1-D.x-D.width)),D.x+=(v-B)/S.x,D.y+=this._worldHeightCurrent/this._worldWidthCurrent*((w-R)/S.y),D},getContentSize:function(){return new d.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var p=this.imageToWindowCoordinates(new d.Point(0,0)),v=this.imageToWindowCoordinates(this.getContentSize());return new d.Point(v.x-p.x,v.y-p.y)},_viewportToImageDelta:function(p,v,w){var S=w?this._scaleSpring.current.value:this._scaleSpring.target.value;return new d.Point(p*(this.source.dimensions.x/S),v*(this.source.dimensions.y*this.contentAspectX/S))},viewportToImageCoordinates:function(p,v,w){var S;return p instanceof d.Point?(w=v,S=p):S=new d.Point(p,v),S=S.rotate(-this.getRotation(w),this._getRotationPoint(w)),w?this._viewportToImageDelta(S.x-this._xSpring.current.value,S.y-this._ySpring.current.value):this._viewportToImageDelta(S.x-this._xSpring.target.value,S.y-this._ySpring.target.value)},_imageToViewportDelta:function(p,v,w){var S=w?this._scaleSpring.current.value:this._scaleSpring.target.value;return new d.Point(p/this.source.dimensions.x*S,v/this.source.dimensions.y/this.contentAspectX*S)},imageToViewportCoordinates:function(p,v,w){p instanceof d.Point&&(w=v,v=p.y,p=p.x);var S=this._imageToViewportDelta(p,v,w);return w?(S.x+=this._xSpring.current.value,S.y+=this._ySpring.current.value):(S.x+=this._xSpring.target.value,S.y+=this._ySpring.target.value),S.rotate(this.getRotation(w),this._getRotationPoint(w))},imageToViewportRectangle:function(p,v,w,S,B){var R=p;R instanceof d.Rect?B=v:R=new d.Rect(p,v,w,S);var D=this.imageToViewportCoordinates(R.getTopLeft(),B),O=this._imageToViewportDelta(R.width,R.height,B);return new d.Rect(D.x,D.y,O.x,O.y,R.degrees+this.getRotation(B))},viewportToImageRectangle:function(p,v,w,S,B){var R=p;p instanceof d.Rect?B=v:R=new d.Rect(p,v,w,S);var D=this.viewportToImageCoordinates(R.getTopLeft(),B),O=this._viewportToImageDelta(R.width,R.height,B);return new d.Rect(D.x,D.y,O.x,O.y,R.degrees-this.getRotation(B))},viewerElementToImageCoordinates:function(p){var v=this.viewport.pointFromPixel(p,!0);return this.viewportToImageCoordinates(v)},imageToViewerElementCoordinates:function(p){var v=this.imageToViewportCoordinates(p);return this.viewport.pixelFromPoint(v,!0)},windowToImageCoordinates:function(p){var v=p.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(v)},imageToWindowCoordinates:function(p){return this.imageToViewerElementCoordinates(p).plus(t.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(p){var v=this._scaleSpring.current.value;return p=p.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new d.Rect((p.x-this._xSpring.current.value)/v,(p.y-this._ySpring.current.value)/v,p.width/v,p.height/v,p.degrees)},viewportToImageZoom:function(p){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*p},imageToViewportZoom:function(p){return p/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(p,v){var w=this._xSpring.target.value===p.x&&this._ySpring.target.value===p.y;if(v){if(w&&this._xSpring.current.value===p.x&&this._ySpring.current.value===p.y)return;this._xSpring.resetTo(p.x),this._ySpring.resetTo(p.y),this._needsDraw=!0,this._needsUpdate=!0}else{if(w)return;this._xSpring.springTo(p.x),this._ySpring.springTo(p.y),this._needsDraw=!0,this._needsUpdate=!0}w||this._raiseBoundsChange()},setWidth:function(p,v){this._setScale(p,v)},setHeight:function(p,v){this._setScale(p/this.normHeight,v)},setCroppingPolygons:function(p){try{if(!d.isArray(p))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=p.map(function(v){return v.map(function(w){try{if((S=w)instanceof d.Point||typeof S.x=="number"&&typeof S.y=="number")return{x:w.x,y:w.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}var S})}),this._needsDraw=!0}catch(v){d.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),d.console.error(v),this.resetCroppingPolygons()}},resetCroppingPolygons:function(){this._croppingPolygons=null,this._needsDraw=!0},fitBounds:function(p,v,w){v=v||d.Placement.CENTER;var S=d.Placement.properties[v],B=this.contentAspectX,R=0,D=0,O=1,V=1;if(this._clip&&(B=this._clip.getAspectRatio(),O=this._clip.width/this.source.dimensions.x,V=this._clip.height/this.source.dimensions.y,p.getAspectRatio()>B?(R=this._clip.x/this._clip.height*p.height,D=this._clip.y/this._clip.height*p.height):(R=this._clip.x/this._clip.width*p.width,D=this._clip.y/this._clip.width*p.width)),p.getAspectRatio()>B){var $=p.height/V,G=0;S.isHorizontallyCentered?G=(p.width-p.height*B)/2:S.isRight&&(G=p.width-p.height*B),this.setPosition(new d.Point(p.x-R+G,p.y-D),w),this.setHeight($,w)}else{var X=p.width/O,te=0;S.isVerticallyCentered?te=(p.height-p.width/B)/2:S.isBottom&&(te=p.height-p.width/B),this.setPosition(new d.Point(p.x-R,p.y-D+te),w),this.setWidth(X,w)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(p){d.console.assert(!p||p instanceof d.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),p instanceof d.Rect?this._clip=p.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return this.flipped},setFlip:function(p){this.flipped=p},get flipped(){return this._flipped},set flipped(p){let v=this._flipped!==!!p;this._flipped=!!p,v&&(this.update(!0),this._needsDraw=!0,this._raiseBoundsChange())},get wrapHorizontal(){return this._wrapHorizontal},set wrapHorizontal(p){let v=this._wrapHorizontal!==!!p;this._wrapHorizontal=!!p,this._initialized&&v&&(this.update(!0),this._needsDraw=!0)},get wrapVertical(){return this._wrapVertical},set wrapVertical(p){let v=this._wrapVertical!==!!p;this._wrapVertical=!!p,this._initialized&&v&&(this.update(!0),this._needsDraw=!0)},get debugMode(){return this._debugMode},set debugMode(p){this._debugMode=!!p,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(p){this.opacity=p},get opacity(){return this._opacity},set opacity(p){p!==this.opacity&&(this._opacity=p,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(p){this._preload=!!p,this._needsDraw=!0},getRotation:function(p){return p?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(p,v){this._degreesSpring.target.value===p&&this._degreesSpring.isAtTargetValue()||(v?this._degreesSpring.resetTo(p):this._degreesSpring.springTo(p),this._needsDraw=!0,this._needsUpdate=!0,this._raiseBoundsChange())},getDrawArea:function(){if(this._opacity===0&&!this._preload)return!1;var p=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var v=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));p=p.intersection(v)}return p},getTilesToDraw:function(){let p=this._tilesToDraw.flat();return this._updateTilesInViewport(p),p=this._tilesToDraw.flat(),p.forEach(v=>{v.tile.beingDrawn=!0}),this._lastDrawn=p,p},_getRotationPoint:function(p){return this.getBoundsNoRotate(p).getCenter()},get compositeOperation(){return this._compositeOperation},set compositeOperation(p){p!==this._compositeOperation&&(this._compositeOperation=p,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this._compositeOperation}))},getCompositeOperation:function(){return this._compositeOperation},setCompositeOperation:function(p){this.compositeOperation=p},setAjaxHeaders:function(p,v){p===null&&(p={}),d.isPlainObject(p)?(this._ownAjaxHeaders=p,this._updateAjaxHeaders(v)):console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},_updateAjaxHeaders:function(p){if(p===void 0&&(p=!0),d.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=d.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,p){var v,w,S,B;for(var R in this.tilesMatrix)for(var D in v=this.source.getNumTiles(R),this.tilesMatrix[R])for(var O in w=(v.x+D%v.x)%v.x,this.tilesMatrix[R][D])if(S=(v.y+O%v.y)%v.y,(B=this.tilesMatrix[R][D][O]).loadWithAjax=this.loadTilesWithAjax,B.loadWithAjax){var V=this.source.getTileAjaxHeaders(R,w,S);B.ajaxHeaders=d.extend({},this.ajaxHeaders,V)}else B.ajaxHeaders=null;for(var $=0;$<this._imageLoader.jobQueue.length;$++){var G=this._imageLoader.jobQueue[$];G.loadWithAjax=G.tile.loadWithAjax,G.ajaxHeaders=G.tile.loadWithAjax?G.tile.ajaxHeaders:null}}},_setScale:function(p,v){var w=this._scaleSpring.target.value===p;if(v){if(w&&this._scaleSpring.current.value===p)return;this._scaleSpring.resetTo(p),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}else{if(w)return;this._scaleSpring.springTo(p),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}w||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var p=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),v=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,w=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(v/this.minPixelRatio)/Math.log(2))));return w=Math.max(w,this.source.minLevel||0),{lowestLevel:p=Math.min(p,w),highestLevel:w}},_updateLevelsForViewport:function(){var p=this._getLevelsInterval(),v=p.lowestLevel,w=p.highestLevel,S=[],B=this.getDrawArea(),R=d.now();if(this._lastDrawn.forEach(Ne=>{Ne.tile.beingDrawn=!1}),this._tilesToDraw=[],this._tilesLoading=0,this.loadingCoverage={},!B)return this._needsDraw=!1,this._fullyLoaded;var D=new Array(w-v+1);for(let Ne=0,We=w;We>=v;We--,Ne++)D[Ne]=We;for(let Ne=w+1;Ne<=this.source.maxLevel;Ne++){var O=this.tilesMatrix[Ne]&&this.tilesMatrix[Ne][0]&&this.tilesMatrix[Ne][0][0];if(O&&O.isBottomMost&&O.isRightMost&&O.loaded){D.push(Ne);break}}let V=!1;for(let Ne=0;Ne<D.length;Ne++){let We=D[Ne];var $=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(We),!0).x*this._scaleSpring.current.value;if(Ne===D.length-1||$>=this.minPixelRatio)V=!0;else if(!V)continue;var G=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(We),!1).x*this._scaleSpring.current.value,X=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,te=this.immediateRender?1:X,ae=Math.min(1,($-.5)/.5),oe=te/Math.abs(te-G),Ae=this._updateLevel(We,ae,oe,B,R,S);S=Ae.bestTiles;var ve=Ae.updatedTiles.filter(vt=>vt.loaded),De=function(vt,ot,nt){return function(st){return{tile:st,level:vt,levelOpacity:ot,currentTime:nt}}}(We,ae,R);if(this._tilesToDraw[We]=ve.map(De),this._providesCoverage(this.coverage,We))break}return S&&S.length>0?(S.forEach(function(Ne){Ne&&!Ne.context2D&&this._loadTile(Ne,R)},this),this._needsDraw=!0,!1):this._tilesLoading===0},_updateTilesInViewport:function(p){let v=d.now(),w=this;this._tilesLoading=0,this._wasBlending=this._isBlending,this._isBlending=!1,this.loadingCoverage={};let S=p.length?p[0].level:0;if(!this.getDrawArea())return;function B(D){let O=D.tile;if(O&&O.loaded){let V=w._blendTile(O,O.x,O.y,D.level,D.levelOpacity,v,S);w._isBlending=w._isBlending||V,w._needsDraw=w._needsDraw||V||w._wasBlending}}let R=0;for(let D=0;D<p.length;D++){let O=p[D];B(O),this._providesCoverage(this.coverage,O.level)&&(R=Math.max(R,O.level))}if(R>0)for(let D in this._tilesToDraw)D<R&&delete this._tilesToDraw[D]},_blendTile:function(p,v,w,S,B,R,D){let O,V,$=1e3*this.blendTime;return p.blendStart||(p.blendStart=R),O=R-p.blendStart,V=$?Math.min(1,O/$):1,S===D&&(V=1,O=$),this.alwaysBlend&&(V*=B),p.opacity=V,V===1&&(this._setCoverage(this.coverage,S,v,w,!0),this._hasOpaqueTile=!0),O<$},_updateLevel:function(p,v,w,S,B,R){var D=S.getBoundingBox().getTopLeft(),O=S.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:!0,level:p,opacity:v,visibility:w,drawArea:S,topleft:D,bottomright:O,currenttime:B,best:R}),this._resetCoverage(this.coverage,p),this._resetCoverage(this.loadingCoverage,p);var V=this._getCornerTiles(p,D,O),$=V.topLeft,G=V.bottomRight,X=this.source.getNumTiles(p),te=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(G.x+=1,this.wrapHorizontal||(G.x=Math.min(G.x,X.x-1)));for(var ae=Math.max(0,(G.x-$.x)*(G.y-$.y)),oe=new Array(ae),Ae=0,ve=$.x;ve<=G.x;ve++)for(var De=$.y;De<=G.y;De++){var Ne;if(this.getFlip()){var We=(X.x+ve%X.x)%X.x;Ne=ve+X.x-We-We-1}else Ne=ve;if(S.intersection(this.getTileBounds(p,Ne,De))!==null){var vt=this._updateTile(Ne,De,p,w,te,X,B,R);R=vt.bestTiles,oe[Ae]=vt.tile,Ae+=1}}return{bestTiles:R,updatedTiles:oe}},_positionTile:function(p,v,w,S,B){var R=p.bounds.getTopLeft();R.x*=this._scaleSpring.current.value,R.y*=this._scaleSpring.current.value,R.x+=this._xSpring.current.value,R.y+=this._ySpring.current.value;var D=p.bounds.getSize();D.x*=this._scaleSpring.current.value,D.y*=this._scaleSpring.current.value,p.positionedBounds.x=R.x,p.positionedBounds.y=R.y,p.positionedBounds.width=D.x,p.positionedBounds.height=D.y;var O=w.pixelFromPointNoRotate(R,!0),V=w.pixelFromPointNoRotate(R,!1),$=w.deltaPixelsFromPointsNoRotate(D,!0),G=w.deltaPixelsFromPointsNoRotate(D,!1),X=V.plus(G.divide(2)),te=S.squaredDistanceTo(X);this.viewer.drawer.minimumOverlapRequired(this)&&(v||($=$.plus(new d.Point(1,1))),p.isRightMost&&this.wrapHorizontal&&($.x+=.75),p.isBottomMost&&this.wrapVertical&&($.y+=.75)),p.position=O,p.size=$,p.squaredDistance=te,p.visibility=B},_updateTile:function(p,v,w,S,B,R,D,O){var V=this._getTile(p,v,w,D,R);this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:V}),this._setCoverage(this.coverage,w,p,v,!1);var $=V.loaded||V.loading||this._isCovered(this.loadingCoverage,w,p,v);if(this._setCoverage(this.loadingCoverage,w,p,v,$),!V.exists)return{bestTiles:O,tile:V};if(V.loaded&&V.opacity===1&&this._setCoverage(this.coverage,w,p,v,!0),this._positionTile(V,this.source.tileOverlap,this.viewport,B,S),!V.loaded)if(V.context2D)this._setTileLoaded(V);else{var G=this._tileCache.getImageRecord(V.cacheKey);G&&this._setTileLoaded(V,G.getData())}return V.loading?this._tilesLoading++:$||(O=this._compareTiles(O,V,this.maxTilesPerFrame)),{bestTiles:O,tile:V}},_getCornerTiles:function(p,v,w){var S,B,R,D;this.wrapHorizontal?(S=d.positiveModulo(v.x,1),B=d.positiveModulo(w.x,1)):(S=Math.max(0,v.x),B=Math.min(1,w.x));var O=1/this.source.aspectRatio;this.wrapVertical?(R=d.positiveModulo(v.y,O),D=d.positiveModulo(w.y,O)):(R=Math.max(0,v.y),D=Math.min(O,w.y));var V=this.source.getTileAtPoint(p,new d.Point(S,R)),$=this.source.getTileAtPoint(p,new d.Point(B,D)),G=this.source.getNumTiles(p);return this.wrapHorizontal&&(V.x+=G.x*Math.floor(v.x),$.x+=G.x*Math.floor(w.x)),this.wrapVertical&&(V.y+=G.y*Math.floor(v.y/O),$.y+=G.y*Math.floor(w.y/O)),{topLeft:V,bottomRight:$}},_getTile:function(p,v,w,S,B){var R,D,O,V,$,G,X,te,ae,oe,Ae=this.tilesMatrix,ve=this.source;return Ae[w]||(Ae[w]={}),Ae[w][p]||(Ae[w][p]={}),Ae[w][p][v]&&!Ae[w][p][v].flipped==!this.flipped||(R=(B.x+p%B.x)%B.x,D=(B.y+v%B.y)%B.y,O=this.getTileBounds(w,p,v),V=ve.getTileBounds(w,R,D,!0),$=ve.tileExists(w,R,D),G=ve.getTileUrl(w,R,D),X=ve.getTilePostData(w,R,D),this.loadTilesWithAjax?(te=ve.getTileAjaxHeaders(w,R,D),d.isPlainObject(this.ajaxHeaders)&&(te=d.extend({},this.ajaxHeaders,te))):te=null,ae=ve.getContext2D?ve.getContext2D(w,R,D):void 0,oe=new d.Tile(w,p,v,O,$,G,ae,this.loadTilesWithAjax,te,V,X,ve.getTileHashKey(w,R,D,G,te,X)),this.getFlip()?R===0&&(oe.isRightMost=!0):R===B.x-1&&(oe.isRightMost=!0),D===B.y-1&&(oe.isBottomMost=!0),oe.flipped=this.flipped,Ae[w][p][v]=oe),(oe=Ae[w][p][v]).lastTouchTime=S,oe},_loadTile:function(p,v){var w=this;p.loading=!0,this._imageLoader.addJob({src:p.getUrl(),tile:p,source:this.source,postData:p.postData,loadWithAjax:p.loadWithAjax,ajaxHeaders:p.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(S,B,R){w._onTileLoad(p,v,S,B,R)},abort:function(){p.loading=!1}})},_onTileLoad:function(p,v,w,S,B){return w?(p.exists=!0,v<this.lastResetTime?(d.console.warn("Ignoring tile %s loaded before reset: %s",p,p.getUrl()),void(p.loading=!1)):(R=this.source.getClosestLevel(),void this._setTileLoaded(p,w,R,B))):(d.console.error("Tile %s failed to load: %s - error: %s",p,p.getUrl(),S),this.viewer.raiseEvent("tile-load-failed",{tile:p,tiledImage:this,time:v,message:S,tileRequest:B}),p.loading=!1,void(p.exists=!1));var R},_setTileLoaded:function(p,v,w,S){var B=0,R=!1,D=this;function O(){return R&&d.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),B++,V}function V(){--B==0&&(p.loading=!1,p.loaded=!0,p.hasTransparency=D.source.hasTransparency(p.context2D,p.getUrl(),p.ajaxHeaders,p.postData),p.context2D||D._tileCache.cacheTile({data:v,tile:p,cutoff:w,tiledImage:D}),D.viewer.raiseEvent("tile-ready",{tile:p,tiledImage:D,tileRequest:S}),D._needsDraw=!0)}var $=O();this.viewer.raiseEvent("tile-loaded",{tile:p,tiledImage:this,tileRequest:S,get image(){return d.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),v},data:v,getCompletionCallback:O}),R=!0,$()},_compareTiles:function(p,v,w){return p?(p.push(v),this._sortTiles(p),p.length>w&&p.pop(),p):[v]},_sortTiles:function(p){p.sort(function(v,w){return v===null?1:w===null?-1:v.visibility===w.visibility?v.squaredDistance-w.squaredDistance:w.visibility-v.visibility})},_providesCoverage:function(p,v,w,S){var B,R,D,O;if(!p[v])return!1;if(w===void 0||S===void 0){for(D in B=p[v])if(Object.prototype.hasOwnProperty.call(B,D)){for(O in R=B[D])if(Object.prototype.hasOwnProperty.call(R,O)&&!R[O])return!1}return!0}return p[v][w]===void 0||p[v][w][S]===void 0||p[v][w][S]===!0},_isCovered:function(p,v,w,S){return w===void 0||S===void 0?this._providesCoverage(p,v+1):this._providesCoverage(p,v+1,2*w,2*S)&&this._providesCoverage(p,v+1,2*w,2*S+1)&&this._providesCoverage(p,v+1,2*w+1,2*S)&&this._providesCoverage(p,v+1,2*w+1,2*S+1)},_setCoverage:function(p,v,w,S,B){p[v]?(p[v][w]||(p[v][w]={}),p[v][w][S]=B):d.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",v)},_resetCoverage:function(p,v){p[v]={}}})}(t),function(d){var p=function(w){d.console.assert(w,"[TileCache.cacheTile] options is required"),d.console.assert(w.tile,"[TileCache.cacheTile] options.tile is required"),d.console.assert(w.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=w.tile,this.tiledImage=w.tiledImage},v=function(w){d.console.assert(w,"[ImageRecord] options is required"),d.console.assert(w.data,"[ImageRecord] options.data is required"),this._tiles=[],w.create.apply(null,[this,w.data,w.ownerTile]),this._destroyImplementation=w.destroy.bind(null,this),this.getImage=w.getImage.bind(null,this),this.getData=w.getData.bind(null,this),this.getRenderedContext=w.getRenderedContext.bind(null,this)};v.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(w){d.console.assert(w,"[ImageRecord.addTile] tile is required"),this._tiles.push(w)},removeTile:function(w){for(var S=0;S<this._tiles.length;S++)if(this._tiles[S]===w)return void this._tiles.splice(S,1);d.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",w)},getTileCount:function(){return this._tiles.length}},d.TileCache=function(w){w=w||{},this._maxImageCacheCount=w.maxImageCacheCount||d.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},d.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(w){d.console.assert(w,"[TileCache.cacheTile] options is required"),d.console.assert(w.tile,"[TileCache.cacheTile] options.tile is required"),d.console.assert(w.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),d.console.assert(w.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var S=w.cutoff||0,B=this._tilesLoaded.length,R=this._imagesLoaded[w.tile.cacheKey];if(R||(w.data||(d.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),w.data=w.image),d.console.assert(w.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),R=this._imagesLoaded[w.tile.cacheKey]=new v({data:w.data,ownerTile:w.tile,create:w.tiledImage.source.createTileCache,destroy:w.tiledImage.source.destroyTileCache,getImage:w.tiledImage.source.getTileCacheDataAsImage,getData:w.tiledImage.source.getTileCacheData,getRenderedContext:w.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),R.addTile(w.tile),w.tile.cacheImageRecord=R,this._imagesLoadedCount>this._maxImageCacheCount){for(var D,O,V,$,G,X,te=null,ae=-1,oe=null,Ae=this._tilesLoaded.length-1;Ae>=0;Ae--)(D=(X=this._tilesLoaded[Ae]).tile).level<=S||D.beingDrawn||(te?($=D.lastTouchTime,O=te.lastTouchTime,G=D.level,V=te.level,($<O||$===O&&G>V)&&(te=D,ae=Ae,oe=X)):(te=D,ae=Ae,oe=X));te&&ae>=0&&(this._unloadTile(oe),B=ae)}this._tilesLoaded[B]=new p({tile:w.tile,tiledImage:w.tiledImage})},clearTilesFor:function(w){var S;d.console.assert(w,"[TileCache.clearTilesFor] tiledImage is required");for(var B=0;B<this._tilesLoaded.length;++B)(S=this._tilesLoaded[B]).tiledImage===w&&(this._unloadTile(S),this._tilesLoaded.splice(B,1),B--)},getImageRecord:function(w){return d.console.assert(w,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[w]},_unloadTile:function(w){d.console.assert(w,"[TileCache._unloadTile] tileRecord is required");var S=w.tile,B=w.tiledImage;let R=S.getCanvasContext&&S.getCanvasContext();S.unload(),S.cacheImageRecord=null;var D=this._imagesLoaded[S.cacheKey];D&&(D.removeTile(S),D.getTileCount()||(D.destroy(),delete this._imagesLoaded[S.cacheKey],this._imagesLoadedCount--,R&&(R.canvas.width=0,R.canvas.height=0,B.viewer.raiseEvent("image-unloaded",{context2D:R,tile:S}))),B.viewer.raiseEvent("tile-unloaded",{tile:S,tiledImage:B}))}}}(t),function(d){d.World=function(p){var v=this;d.console.assert(p.viewer,"[World] options.viewer is required"),d.EventSource.call(this),this.viewer=p.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(w){v._autoRefigureSizes?v._figureSizes():v._needsSizesFigured=!0},this._figureSizes()},d.extend(d.World.prototype,d.EventSource.prototype,{addItem:function(p,v){if(d.console.assert(p,"[World.addItem] item is required"),d.console.assert(p instanceof d.TiledImage,"[World.addItem] only TiledImages supported at this time"),(v=v||{}).index!==void 0){var w=Math.max(0,Math.min(this._items.length,v.index));this._items.splice(w,0,p)}else this._items.push(p);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,p.addHandler("bounds-change",this._delegatedFigureSizes),p.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:p})},getItemAt:function(p){return d.console.assert(p!==void 0,"[World.getItemAt] index is required"),this._items[p]},getIndexOfItem:function(p){return d.console.assert(p,"[World.getIndexOfItem] item is required"),d.indexOf(this._items,p)},getItemCount:function(){return this._items.length},setItemIndex:function(p,v){d.console.assert(p,"[World.setItemIndex] item is required"),d.console.assert(v!==void 0,"[World.setItemIndex] index is required");var w=this.getIndexOfItem(p);if(v>=this._items.length)throw new Error("Index bigger than number of layers.");v!==w&&w!==-1&&(this._items.splice(w,1),this._items.splice(v,0,p),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:p,previousIndex:w,newIndex:v}))},removeItem:function(p){d.console.assert(p,"[World.removeItem] item is required");var v=d.indexOf(this._items,p);v!==-1&&(p.removeHandler("bounds-change",this._delegatedFigureSizes),p.removeHandler("clip-change",this._delegatedFigureSizes),p.destroy(),this._items.splice(v,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(p))},removeAll:function(){var p,v;for(this.viewer._cancelPendingImages(),v=0;v<this._items.length;v++)(p=this._items[v]).removeHandler("bounds-change",this._delegatedFigureSizes),p.removeHandler("clip-change",this._delegatedFigureSizes),p.destroy();var w=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,v=0;v<w.length;v++)p=w[v],this._raiseRemoveItem(p)},resetItems:function(){for(var p=0;p<this._items.length;p++)this._items[p].reset()},update:function(p){for(var v=!1,w=0;w<this._items.length;w++)v=this._items[w].update(p)||v;return v},draw:function(){this.viewer.drawer.draw(this._items),this._needsDraw=!1,this._items.forEach(p=>{this._needsDraw=p.setDrawn()||this._needsDraw})},needsDraw:function(){for(var p=0;p<this._items.length;p++)if(this._items[p].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(p){this._autoRefigureSizes=p,p&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(p){var v,w=(p=p||{}).immediately||!1,S=p.layout||d.DEFAULT_SETTINGS.collectionLayout,B=p.rows||d.DEFAULT_SETTINGS.collectionRows,R=p.columns||d.DEFAULT_SETTINGS.collectionColumns,D=p.tileSize||d.DEFAULT_SETTINGS.collectionTileSize,O=D+(p.tileMargin||d.DEFAULT_SETTINGS.collectionTileMargin);v=!p.rows&&R?R:Math.ceil(this._items.length/B);var V,$,G,X,te,ae=0,oe=0;this.setAutoRefigureSizes(!1);for(var Ae=0;Ae<this._items.length;Ae++)Ae&&Ae%v==0&&(S==="horizontal"?(oe+=O,ae=0):(ae+=O,oe=0)),X=(G=($=(V=this._items[Ae]).getBounds()).width>$.height?D:D*($.width/$.height))*($.height/$.width),te=new d.Point(ae+(D-G)/2,oe+(D-X)/2),V.setPosition(te,w),V.setWidth(G,w),S==="horizontal"?ae+=O:oe+=O;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var p=this._homeBounds?this._homeBounds.clone():null,v=this._contentSize?this._contentSize.clone():null,w=this._contentFactor||0;if(this._items.length){var S=this._items[0],B=S.getBounds();this._contentFactor=S.getContentSize().x/B.width;for(var R=S.getClippedBounds().getBoundingBox(),D=R.x,O=R.y,V=R.x+R.width,$=R.y+R.height,G=1;G<this._items.length;G++)B=(S=this._items[G]).getBounds(),this._contentFactor=Math.max(this._contentFactor,S.getContentSize().x/B.width),R=S.getClippedBounds().getBoundingBox(),D=Math.min(D,R.x),O=Math.min(O,R.y),V=Math.max(V,R.x+R.width),$=Math.max($,R.y+R.height);this._homeBounds=new d.Rect(D,O,V-D,$-O),this._contentSize=new d.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new d.Rect(0,0,1,1),this._contentSize=new d.Point(1,1),this._contentFactor=1;this._contentFactor===w&&this._homeBounds.equals(p)&&this._contentSize.equals(v)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(p){this.raiseEvent("remove-item",{item:p})}})}(t)})(uq);const Q0=function(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}(uq.exports);var Dhe=Object.defineProperty,Fhe=Object.getOwnPropertyDescriptor,AC=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?Fhe(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&Dhe(t,n,f),f};let N0=class extends ft{constructor(){super(...arguments),this.src2D="",this._imageFiles=[],this._currentImageIdx=-1,this._currentSyncRotationAngle=0,this._imageCenter=new Q0.Point(0,0),this._deltaX=0,this._deltaY=0,this._minZoomLevel=-1,this._lastDoublePressPointer={clientX:-1,clientY:-1,id:-1},this._lastDoublePressTimeStamp=0,this._isDown=!1,this._viewer=null,this._viewerHomeBounds=new Q0.Rect(0,0,0,0,0),this._checkIfZoomIsInvalid=_O(()=>{if(this._viewer==null)return;const o=this._viewer.viewport;o.getZoom(!0)<o.getMinZoom()&&(console.log("Zoom is invalid",o.getZoom(!0)),o.applyConstraints())},250),this._checkIfCenterPosIsUpdated=_O(()=>{const[o,t]=this.getImageCenter();this._deltaX==o&&this._deltaY==t||(this._deltaX=o,this._deltaY=t,this.dispatchEvent(new CustomEvent("image-shifted",{detail:{deltaX:o,deltaY:t}})))},15)}get viewer(){return this._viewer}render(){return Ie`
      <div id="image_viewer" @pointermove="${this._handlePointerMove}"></div>
      <div id="overlay"></div>
    `}firstUpdated(){const o=this.renderRoot.querySelector("#image_viewer");o!=null?(this._viewer=Q0({crossOriginPolicy:"Anonymous",element:o,autoResize:!0,showFullPageControl:!1,showZoomControl:!1,showHomeControl:!1,showNavigator:!1,navigatorPosition:"TOP_LEFT",minZoomImageRatio:1,maxZoomLevel:100,imageSmoothingEnabled:!1,visibilityRatio:1,constrainDuringPan:!0,defaultZoomLevel:0,placeholderFillStyle:"#FF8800",preserveViewport:!0,loadTilesWithAjax:!0,imageLoaderLimit:1,zoomPerScroll:1.4,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},gestureSettingsPen:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},gestureSettingsUnknown:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},preserveOverlays:!0}),console.log("Viewer 2D",this._viewer,this.clientHeight,this.clientWidth),this._viewer.addHandler("resize",this._handleImageResizeEvent.bind(this)),this._viewer.addHandler("tile-loaded",this._handleTileLoaded.bind(this)),this._viewer.addHandler("zoom",this._handleZoomChanged.bind(this)),this._viewer.addHandler("rotate",this._checkIfMinZoomChanged.bind(this)),this._viewer.addHandler("update-viewport",this._checkIfCenterPosIsUpdated.bind(this)),this._viewer.addHandler("canvas-press",function(t,n=300){let c,h=0;return function(...f){h++,h===1?c=window.setTimeout(()=>{h=0},n):(window.clearTimeout(c),t(...f),h=0)}}(this._handleCanvasDoublePressEvent.bind(this))),this._viewer.addHandler("viewport-change",this._handleViewportChangedEvent.bind(this)),this._viewer.addOverlay(this.hotspotOverlay,new Q0.Point(0,0),Q0.Placement.CENTER),this.hotspotOverlay.style.opacity="0",new lq(this.parentElement,"pointerdown").on("single-click",this._handleSingleClickEvent.bind(this)),this.measurementTool.on("change-image-hotspot-visibility",t=>this.hotspotOverlay.style.opacity=t?"1":"0"),this.measurementTool.on("update-image-hotspot-position-requested",this._updateImageHotspotPosition.bind(this))):console.log("coudn't find element #image_viewer")}connectWithSettings(o){o.imageRotation.on("rotation-angle-changed",this.rotateImage.bind(this))}resize(o,t,n){this.style.height=o+"px",this.style.width=t+"px",this.style.transform=n,this._checkIfZoomIsInvalid()}setImageFiles(o){this._imageFiles=o,console.log("Image Files has been set")}async loadNextImage(o){if(o>=this._imageFiles.length)return void console.log("Image with index",o,"cannot be loaded because only",this._imageFiles.length,"images exist");if(this._currentImageIdx==o||(this._currentImageIdx=o,this._viewer==null))return;const t=await this.viewSettings.resolve2dFileURL(this._imageFiles[this._currentImageIdx]);this._viewer.open({type:"image",url:t}),console.log("Loaded image",t)}rotateImage(o){this._currentSyncRotationAngle!=o&&(this._currentSyncRotationAngle=o,this._viewer!=null&&(this._viewer.viewport.setRotation(this._currentSyncRotationAngle),this._checkIfZoomIsInvalid()))}updatePointerEventsState(o){var t;(t=this._viewer)==null||t.setMouseNavEnabled(!o)}zoomImage(o){this._viewer!=null&&this._viewer.viewport.getZoom()!=o&&(console.log("Zooom image, ",o),this._viewer.viewport.zoomTo(o,void 0,!0))}getZoomLevel(){return this._viewer==null?1:this._viewer.viewport.getZoom()}getImageCenter(){if(this._viewer==null)return[0,0];const o=this._viewer.viewport.imageToViewerElementCoordinates(this._imageCenter);return[.5*this.clientWidth-o.x,.5*this.clientHeight-o.y]}_handlePointerMove(o){if(this._viewer==null||this._viewer.isMouseNavEnabled()||o.pointerId!=this._lastDoublePressPointer.id||!this._isDown)return;const t=o.clientX-this._lastDoublePressPointer.clientX,n=o.clientY-this._lastDoublePressPointer.clientY;t===0&&n===0||(this._lastDoublePressPointer.clientX=o.clientX,this._lastDoublePressPointer.clientY=o.clientY,this.dispatchEvent(new CustomEvent("pointer-move-in-disable-mode",{detail:{dx:t,dy:n}})))}_handlePointerUpAfterDoublePress(o){this._isDown=!1,this._viewer==null||this._viewer.isMouseNavEnabled()||o.timeStamp-this._lastDoublePressTimeStamp>700&&this.dispatchEvent(new Event("double-press-completed"))}_updateImageHotspotPosition(o,t){console.log("Hotspot update-image-hotspot-position",o,t),this._viewer!=null&&this._viewer.updateOverlay(this.hotspotOverlay,this._viewer.viewport.imageToViewportCoordinates(o,t),Q0.Placement.CENTER)}_handleSingleClickEvent(o){if(this._viewer==null||!this.measurementTool.isEditModeActive)return void console.log("Single click event: ignoring, viewer null or measurement tool not active.");const t=this.parentElement.getBoundingClientRect(),n=this._viewer.viewport.pointFromPixel(new Q0.Point(o.clientX-t.x,o.clientY-t.y)),c=this._viewer.viewport.viewportToImageCoordinates(n);this.measurementTool.addPointFromImage(c.x,c.y),this._viewer.updateOverlay(this.hotspotOverlay,n,Q0.Placement.CENTER),console.log("Hotspot in image added")}_handleCanvasDoublePressEvent(o){this._isDown=!0;const t=o.originalEvent;this._lastDoublePressPointer={clientX:t.clientX,clientY:t.clientX,id:t.pointerId},this.dispatchEvent(new CustomEvent("double-press",{detail:{pointerEvent:t}})),this._viewer!=null&&(console.log("Add event handler"),this._lastDoublePressTimeStamp=t.timeStamp,this.parentElement.addEventListener("pointerup",this._handlePointerUpAfterDoublePress.bind(this),{once:!0}))}_handleViewportChangedEvent(){this._viewer!=null&&(this._viewerHomeBounds.equals(this._viewer.viewport.getHomeBounds())||(this._viewerHomeBounds=this._viewer.viewport.getHomeBounds(),this.dispatchEvent(new CustomEvent("image-zoom-changed",{detail:{zoomLevel:this._viewer.viewport.getZoom(!1)}}))))}_handleImageResizeEvent(){this._checkIfMinZoomChanged()}_handleTileLoaded(o){this._checkIfZoomIsInvalid(),this._checkIfMinZoomChanged(),this._checkIfCenterPosIsUpdated();const t=o.tiledImage.source.dimensions;this._imageCenter.x=.5*t.x,this._imageCenter.y=.5*t.y}_checkIfMinZoomChanged(){this._viewer!=null&&this._minZoomLevel!=this._viewer.viewport.getMinZoom()&&(this._minZoomLevel=this._viewer.viewport.getMinZoom(),console.log("emit min zoom changed",this._minZoomLevel),this.dispatchEvent(new CustomEvent("min-zoom-level-changed",{detail:{zoomLevel:this._minZoomLevel}})))}_handleZoomChanged(o){this._viewer!=null&&o.immediately!=1?(console.log("image zoom changed 1",o.zoom),this._checkIfZoomIsInvalid(),this.dispatchEvent(new CustomEvent("image-zoom-changed",{detail:{zoomLevel:o.zoom}}))):console.log("Return zoom",o.zoom)}};N0.styles=A`
    :host {
      background-color: black;
    }

    #image_viewer {
      height: inherit;
      width: inherit;
      background-color: transparent;
    }

    .hotspot {
      display: block;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: none;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
      cursor: pointer;
      transition: opacity 0.3s;
      position: relative;
      font-size: 12px;
      padding: 0;
    }

    #overlay {
      display: none;
      background-color: transparent;
      opacity: 0;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: 3px solid rgb(0, 128, 200);
    }
  `,AC([$t()],N0.prototype,"src2D",2),AC([gi("#image_viewer")],N0.prototype,"parentElement",2),AC([gi("#overlay")],N0.prototype,"hotspotOverlay",2),AC([$t({type:Object})],N0.prototype,"measurementTool",2),AC([$t({type:Object})],N0.prototype,"viewSettings",2),N0=AC([Gt("viewer-2d")],N0);const XB=o=>(...t)=>({_$litDirective$:o,values:t});let F5=class{constructor(o){}get _$AU(){return this._$AM._$AU}_$AT(o,t,n){this._$Ct=o,this._$AM=t,this._$Ci=n}_$AS(o,t){return this.update(o,t)}update(o,t){return this.render(...t)}},U5=class extends F5{constructor(o){if(super(o),this.et=lt,o.type!==2)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(o){if(o===lt||o==null)return this.ft=void 0,this.et=o;if(o===ht)return o;if(typeof o!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(o===this.et)return this.ft;this.et=o;const t=[o];return t.raw=t,this.ft={_$litType$:this.constructor.resultType,strings:t,values:[]}}};U5.directiveName="unsafeHTML",U5.resultType=1;const Uhe=XB(U5);let vO=class extends U5{};vO.directiveName="unsafeSVG",vO.resultType=2;const W_=XB(vO),yO=(o,t=document.body,n)=>{let c=document.querySelector(o);return c||(c=n?n():document.createElement(o),t.insertBefore(c,t.firstChild))},khe=()=>{const o=document.createElement("meta");return o.setAttribute("name","ui5-shared-resources"),o.setAttribute("content",""),o},r1=(o,t)=>{const n=o.split(".");let c=typeof document>"u"?null:yO('meta[name="ui5-shared-resources"]',document.head,khe);if(!c)return t;for(let h=0;h<n.length;h++){const f=n[h],d=h===n.length-1;Object.prototype.hasOwnProperty.call(c,f)||(c[f]=d?t:{}),c=c[f]}return c};var bO=(o=>(o["SAP-icons"]="SAP-icons-v4",o.horizon="SAP-icons-v5",o["SAP-icons-TNT"]="tnt",o.BusinessSuiteInAppSymbols="business-suite",o))(bO||{});const hq=o=>bO[o]?bO[o]:o;var dq={},Aq=dq.hasOwnProperty,Lhe=dq.toString,pq=Aq.toString,Phe=pq.call(Object),fq=function(o){var t,n;return!(!o||Lhe.call(o)!=="[object Object]"||(t=Object.getPrototypeOf(o))&&(typeof(n=Aq.call(t,"constructor")&&t.constructor)!="function"||pq.call(n)!==Phe))},Ohe=Object.create(null),gq=function(o,t,n,c){var h,f,d,p,v,w,S=arguments[2]||{},B=3,R=arguments.length,D=arguments[0]||!1,O=arguments[1]?void 0:Ohe;for(typeof S!="object"&&typeof S!="function"&&(S={});B<R;B++)if((v=arguments[B])!=null)for(p in v)h=S[p],d=v[p],p!=="__proto__"&&S!==d&&(D&&d&&(fq(d)||(f=Array.isArray(d)))?(f?(f=!1,w=h&&Array.isArray(h)?h:[]):w=h&&fq(h)?h:{},S[p]=gq(D,arguments[1],w,d)):d!==O&&(S[p]=d));return S};const wO=function(o,t){return gq(!0,!1,...arguments)};let Cm=class{constructor(){this._eventRegistry=new Map}attachEvent(o,t){const n=this._eventRegistry,c=n.get(o);Array.isArray(c)?c.includes(t)||c.push(t):n.set(o,[t])}detachEvent(o,t){const n=this._eventRegistry,c=n.get(o);if(!c)return;const h=c.indexOf(t);h!==-1&&c.splice(h,1),c.length===0&&n.delete(o)}fireEvent(o,t){const n=this._eventRegistry.get(o);return n?n.map(c=>c.call(this,t)):[]}fireEventAsync(o,t){return Promise.all(this.fireEvent(o,t))}isHandlerAttached(o,t){const n=this._eventRegistry.get(o);return!!n&&n.includes(t)}hasListeners(o){return!!this._eventRegistry.get(o)}},Qhe=class{constructor(...o){}};const mq=new Map,_q=new Map,vq=new Map,yq=new Cm,bq=o=>`componentFeatureLoad_${o}`,lg=o=>mq.get(o),YB=o=>_q.get(o),k5="sap_horizon",Nhe=["sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw","sap_horizon_exp","sap_horizon_dark_exp","sap_horizon_hcb_exp","sap_horizon_hcw_exp"],JB="en",j_="en",wq=["ar","ar_EG","ar_SA","bg","ca","cnr","cs","da","de","de_AT","de_CH","el","el_CY","en","en_AU","en_GB","en_HK","en_IE","en_IN","en_NZ","en_PG","en_SG","en_ZA","es","es_AR","es_BO","es_CL","es_CO","es_MX","es_PE","es_UY","es_VE","et","fa","fi","fr","fr_BE","fr_CA","fr_CH","fr_LU","he","hi","hr","hu","id","it","it_CH","ja","kk","ko","lt","lv","ms","mk","nb","nl","nl_BE","pl","pt","pt_PT","ro","ru","ru_UA","sk","sl","sr","sr_Latn","sv","th","tr","uk","vi","zh_CN","zh_HK","zh_SG","zh_TW"],xq=typeof document>"u",Cq=()=>xq?"":window.location.href;var xO=(o=>(o.Full="full",o.Basic="basic",o.Minimal="minimal",o.None="none",o))(xO||{});const Hhe=new Cm,pC=o=>{Hhe.attachEvent("configurationReset",o)};let Eq=!1,wd={animationMode:xO.Full,theme:k5,themeRoot:void 0,rtl:void 0,language:void 0,timezone:void 0,calendarType:void 0,secondaryCalendarType:void 0,noConflict:!1,formatSettings:{},fetchDefaultLanguage:!1,defaultFontLoading:!0,enableDefaultTooltips:!0};const L5=new Map;L5.set("true",!0),L5.set("false",!1);const Sq=(o,t,n)=>{const c=t.toLowerCase(),h=o.split(`${n}-`)[1];var f;L5.has(t)&&(t=L5.get(c)),h==="theme"?(wd.theme=(f=t,h==="theme"&&f.includes("@")?f.split("@")[0]:f),t&&t.includes("@")&&(wd.themeRoot=(d=>(p=>{let v;try{if(p.startsWith(".")||p.startsWith("/"))v=new URL(p,Cq()).toString();else{const w=new URL(p),S=w.origin;v=S&&(B=>{const R=(()=>{const D=document.querySelector('META[name="sap-allowedThemeOrigins"]');return D&&D.getAttribute("content")})();return R&&R.split(",").some(D=>D==="*"||B===D.trim())})(S)?w.toString():((B,R)=>{const D=new URL(B).pathname;return new URL(D,R).toString()})(w.toString(),Cq())}return v.endsWith("/")||(v=`${v}/`),`${v}UI5/`}catch{}})(d.split("@")[1]))(t))):wd[h]=t},H0=()=>{typeof document>"u"||Eq||(zhe(),Eq=!0)},zhe=o=>{(()=>{const t=document.querySelector("[data-ui5-config]")||document.querySelector("[data-id='sap-ui-config']");let n;if(t){try{n=JSON.parse(t.innerHTML)}catch{console.warn("Incorrect data-sap-ui-config format. Please use JSON")}n&&(wd=wO(wd,n))}})(),(()=>{const t=new URLSearchParams(xq?"":window.location.search);t.forEach((n,c)=>{const h=c.split("sap-").length;h===0||h===c.split("sap-ui-").length||Sq(c,n,"sap")}),t.forEach((n,c)=>{c.startsWith("sap-ui")&&Sq(c,n,"sap-ui")})})(),(()=>{const t=lg("OpenUI5Support");if(!t||!t.isOpenUI5Detected())return;const n=t.getConfigurationSettingsObject();wd=wO(wd,n)})()},Bq={version:"2.4.0",major:2,minor:4,patch:0,suffix:"",isNext:!1,buildTime:1730643247};let CO={include:[/^ui5-/],exclude:[]};const EO=new Map,SO=o=>{if(!EO.has(o)){const t=CO.include.some(n=>o.match(n))&&!CO.exclude.some(n=>o.match(n));EO.set(o,t)}return EO.get(o)},fC=o=>{const t=`v${Bq.version.replaceAll(".","-")}`;return o.replaceAll(/(--_?ui5)([^,:)\s]+)/g,`$1-${t}$2`)};let P5;const BO=new Map,ZB=r1("Runtimes",[]),gC=()=>P5,Iq=(o,t)=>{const n=`${o},${t}`;if(BO.has(n))return BO.get(n);const c=ZB[o],h=ZB[t];if(!c||!h)throw new Error("Invalid runtime index supplied");if(c.isNext||h.isNext)return c.buildTime-h.buildTime;const f=c.major-h.major;if(f)return f;const d=c.minor-h.minor;if(d)return d;const p=c.patch-h.patch;if(p)return p;const v=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare(c.suffix,h.suffix);return BO.set(n,v),v},Tq=r1("Tags",new Map),IO=new Set;let TO,s1=new Map;const Mq=()=>[...IO.values()],Rq=new Set,MO=new Set,Ghe=new Cm,mC=new class{constructor(){this.list=[],this.lookup=new Set}add(o){this.lookup.has(o)||(this.list.push(o),this.lookup.add(o))}remove(o){this.lookup.has(o)&&(this.list=this.list.filter(t=>t!==o),this.lookup.delete(o))}shift(){const o=this.list.shift();if(o)return this.lookup.delete(o),o}isEmpty(){return this.list.length===0}isAdded(o){return this.lookup.has(o)}process(o){let t;const n=new Map;for(t=this.shift();t;){const c=n.get(t)||0;if(c>10)throw new Error("Web component processed too many times this task, max allowed is: 10");o(t),n.set(t,c+1),t=this.shift()}}};let e2,O5,RO,Q5;const Dq=async o=>{mC.add(o),await Vhe()},Fq=o=>{Ghe.fireEvent("beforeComponentRender",o),MO.add(o),o._render()},Vhe=async()=>{Q5||(Q5=new Promise(o=>{window.requestAnimationFrame(()=>{mC.process(Fq),Q5=null,o(),RO||(RO=setTimeout(()=>{RO=void 0,mC.isEmpty()&&qhe()},200))})})),await Q5},_C=async()=>{await(()=>{const o=Mq().map(t=>customElements.whenDefined(t));return Promise.all(o)})(),await(e2||(e2=new Promise(o=>{O5=o,window.requestAnimationFrame(()=>{mC.isEmpty()&&(e2=void 0,o())})}),e2))},qhe=()=>{mC.isEmpty()&&O5&&(O5(),O5=void 0,e2=void 0)},$he=typeof document>"u",N5=(o,t)=>t?`${o}|${t}`:o,t2=(o,t,n="",c)=>{const h=typeof o=="string"?o:o.content,f=gC(),d=new CSSStyleSheet;d.replaceSync(h),d._ui5StyleId=N5(t,n),c&&(d._ui5RuntimeIndex=f,d._ui5Theme=c),document.adoptedStyleSheets=[...document.adoptedStyleSheets,d]},i2=(o,t="")=>!!$he||!!document.adoptedStyleSheets.find(n=>n._ui5StyleId===N5(o,t)),Uq=(o,t,n="",c)=>{i2(t,n)?((h,f,d="",p)=>{const v=typeof h=="string"?h:h.content,w=gC(),S=document.adoptedStyleSheets.find(R=>R._ui5StyleId===N5(f,d));if(S)if(p){const R=S._ui5RuntimeIndex;(S._ui5Theme!==p||(B=R)===void 0||Iq(gC(),parseInt(B))===1)&&(S.replaceSync(v||""),S._ui5RuntimeIndex=String(w),S._ui5Theme=p)}else S.replaceSync(v||"");var B})(o,t,n,c):t2(o,t,n,c)},kq=new Cm,Lq="themeRegistered",Pq=new Map,Oq=new Map,Whe=new Map,Qq=new Set,H5=new Set,Gi=(o,t,n)=>{var c;Oq.set(`${o}/${t}`,n),Qq.add(o),H5.add(t),c=t,kq.fireEvent(Lq,c)},Nq=async(o,t,n)=>{const c=`${o}_${t}_${n||""}`,h=Pq.get(c);if(h!==void 0)return h;if(!H5.has(t)){const v=[...H5.values()].join(", ");return console.warn(`You have requested a non-registered theme ${t} - falling back to ${k5}. Registered themes are: ${v}`),DO(o,k5)}const[f,d]=await Promise.all([DO(o,t),n?DO(o,n,!0):void 0]),p=((v,w)=>{if(v===void 0)return w;if(w===void 0)return v;const S=typeof w=="string"?w:w.content;return typeof v=="string"?`${v} ${S}`:{content:`${v.content} ${S}`,packageName:v.packageName,fileName:v.fileName}})(f,d);return p&&Pq.set(c,p),p},DO=async(o,t,n=!1)=>{const c=(n?Whe:Oq).get(`${o}/${t}`);if(!c)return void(n||console.error(`Theme [${t}] not registered for package [${o}]`));let h;try{h=await c(t)}catch(f){return void console.error(o,f.message)}return h._||h},Hq=()=>Qq,vC=new Set,FO=()=>{const o=(()=>{let n=document.querySelector(".sapThemeMetaData-Base-baseLib")||document.querySelector(".sapThemeMetaData-UI5-sap-ui-core");if(n)return getComputedStyle(n).backgroundImage;n=document.createElement("span"),n.style.display="none",n.classList.add("sapThemeMetaData-Base-baseLib"),document.body.appendChild(n);let c=getComputedStyle(n).backgroundImage;return c==="none"&&(n.classList.add("sapThemeMetaData-UI5-sap-ui-core"),c=getComputedStyle(n).backgroundImage),document.body.removeChild(n),c})();if(!o||o==="none")return;const t=(n=>{const c=/\(["']?data:text\/plain;utf-8,(.*?)['"]?\)$/i.exec(n);if(c&&c.length>=2){let h=c[1];if(h=h.replace(/\\"/g,'"'),h.charAt(0)!=="{"&&h.charAt(h.length-1)!=="}")try{h=decodeURIComponent(h)}catch{return void(vC.has("decode")||(console.warn("Malformed theme metadata string, unable to decodeURIComponent"),vC.add("decode")))}try{return JSON.parse(h)}catch{vC.has("parse")||(console.warn("Malformed theme metadata string, unable to parse JSON"),vC.add("parse"))}}})(o);return t?(n=>{let c,h;try{c=n.Path.match(/\.([^.]+)\.css_variables$/)[1],h=n.Extends[0]}catch{return void(vC.has("object")||(console.warn("Malformed theme metadata Object",n),vC.add("object")))}return{themeName:c,baseThemeName:h}})(t):void 0},jhe=new Cm;let z5;pC(()=>{z5=void 0});const zq=()=>(z5===void 0&&(H0(),z5=wd.themeRoot),z5),n2="@ui5/webcomponents-theming",Gq=async o=>{const t=await(async h=>{var f;const d=FO();if(d)return d;const p=lg("OpenUI5Support");if(p&&p.isOpenUI5Detected()){if(p.cssVariablesLoaded())return{themeName:(f=p.getConfigurationSettingsObject())==null?void 0:f.theme,baseThemeName:""}}else if(zq())return await(async v=>{const w=document.querySelector(`[sap-ui-webcomponents-theme="${v}"]`);var S;w&&document.head.removeChild(w),await((B,R)=>{const D=document.createElement("link");return D.type="text/css",D.rel="stylesheet",R&&Object.entries(R).forEach(O=>D.setAttribute(...O)),D.href=B,document.head.appendChild(D),new Promise(O=>{D.addEventListener("load",O),D.addEventListener("error",O)})})((S=v,`${zq()}Base/baseLib/${S}/css_variables.css`),{"sap-ui-webcomponents-theme":v})})(h),FO()})(o);t&&o===t.themeName?((h,f="")=>{document.adoptedStyleSheets=document.adoptedStyleSheets.filter(d=>d._ui5StyleId!==N5(h,f))})("data-ui5-theme-properties",n2):await(async h=>{if(!Hq().has(n2))return;const f=await Nq(n2,h);f&&Uq(f,"data-ui5-theme-properties",n2,h)})(o);const n=(c=o,H5.has(c)?o:t&&t.baseThemeName);var c;await(async(h,f)=>{const d=[...Hq()].map(async p=>{if(p===n2)return;const v=await Nq(p,h,f);v&&Uq(v,`data-ui5-component-properties-${gC()}`,p)});return Promise.all(d)})(n||k5,t&&t.themeName===o?o:void 0),(h=>{jhe.fireEvent("themeLoaded",h)})(o)},Khe={packageName:"@ui5/webcomponents-base",fileName:"FontFace.css",content:`@font-face{font-family:"72";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular.woff2?ui5-webcomponents) format("woff2"),local("72");unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:"72full";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular-full.woff2?ui5-webcomponents) format("woff2"),local('72-full')}@font-face{font-family:"72";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format("woff2"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:"72full";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format("woff2")}@font-face{font-family:'72-Bold';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format("woff2"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Boldfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format("woff2")}@font-face{font-family:'72-Light';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light.woff2?ui5-webcomponents) format("woff2"),local('72-Light');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Lightfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light-full.woff2?ui5-webcomponents) format("woff2")}@font-face{font-family:'72Mono';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular.woff2?ui5-webcomponents) format('woff2'),local('72Mono');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Monofull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:'72Mono-Bold';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold.woff2?ui5-webcomponents) format('woff2'),local('72Mono-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Mono-Boldfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:"72Black";font-style:bold;font-weight:900;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black.woff2?ui5-webcomponents) format("woff2"),local('72Black');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Blackfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:"72-SemiboldDuplex";src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-SemiboldDuplex.woff2?ui5-webcomponents) format("woff2"),local('72-SemiboldDuplex');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}`},Xhe={packageName:"@ui5/webcomponents-base",fileName:"OverrideFontFace.css",content:"@font-face{font-family:'72override';unicode-range:U+0102-0103,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EB7,U+1EB8-1EC7,U+1EC8-1ECB,U+1ECC-1EE3,U+1EE4-1EF1,U+1EF4-1EF7;src:local('Arial'),local('Helvetica'),local('sans-serif')}"};let G5;pC(()=>{G5=void 0});const Yhe={packageName:"@ui5/webcomponents-base",fileName:"SystemCSSVars.css",content:":root{--_ui5_content_density:cozy}.sapUiSizeCompact,.ui5-content-density-compact,[data-ui5-compact-size]{--_ui5_content_density:compact}"},Rh=typeof document>"u",Cs={get userAgent(){return Rh?"":navigator.userAgent},get touch(){return!Rh&&("ontouchstart"in window||navigator.maxTouchPoints>0)},get chrome(){return!Rh&&/(Chrome|CriOS)/.test(Cs.userAgent)},get firefox(){return!Rh&&/Firefox/.test(Cs.userAgent)},get safari(){return!Rh&&!Cs.chrome&&/(Version|PhantomJS)\/(\d+\.\d+).*Safari/.test(Cs.userAgent)},get webkit(){return!Rh&&/webkit/.test(Cs.userAgent)},get windows(){return!Rh&&navigator.platform.indexOf("Win")!==-1},get macOS(){return!Rh&&!!navigator.userAgent.match(/Macintosh|Mac OS X/i)},get iOS(){return!(Rh||!navigator.platform.match(/iPhone|iPad|iPod/)&&(!Cs.userAgent.match(/Mac/)||!("ontouchend"in document)))},get android(){return!Rh&&!Cs.windows&&/Android/.test(Cs.userAgent)},get androidPhone(){return!Rh&&Cs.android&&/(?=android)(?=.*mobile)/i.test(Cs.userAgent)},get ipad(){return!Rh&&(/ipad/i.test(Cs.userAgent)||/Macintosh/i.test(Cs.userAgent)&&"ontouchend"in document)},_isPhone:()=>(Vq(),Cs.touch&&!z0)};let UO,kO,z0;const LO=()=>{if(Rh||!Cs.windows)return!1;if(UO===void 0){const o=Cs.userAgent.match(/Windows NT (\d+).(\d)/);UO=o?parseFloat(o[1]):0}return UO>=8},Vq=()=>{if(Rh)return!1;if(z0===void 0){if(Cs.ipad)return void(z0=!0);if(Cs.touch){if(LO())return void(z0=!0);if(Cs.chrome&&Cs.android)return void(z0=!/Mobile Safari\/[.0-9]+/.test(Cs.userAgent));let o=window.devicePixelRatio?window.devicePixelRatio:1;return Cs.android&&(()=>{if(Rh||!Cs.webkit)return!1;if(kO===void 0){const t=Cs.userAgent.match(/(webkit)[ /]([\w.]+)/);kO=t?parseFloat(t[1]):0}return kO>=537.1})()&&(o=1),void(z0=Math.min(window.screen.width/o,window.screen.height/o)>=600)}z0=Cs.userAgent.indexOf("Touch")!==-1||Cs.android&&!Cs.androidPhone}},qq=()=>Cs.touch,PO=()=>Cs.safari,Ml=()=>Cs._isPhone(),nf=()=>!Rh&&(Vq(),!((Cs.touch||LO())&&z0||Ml())||LO()),$q=()=>Cs.iOS;let OO,Wq=!1,QO=!1;const jq=new Cm,Jhe=async()=>(OO!==void 0||(OO=new Promise(async o=>{if((()=>{if(P5===void 0){P5=ZB.length;const f=Bq;ZB.push({...f,get scopingSuffix(){},get registeredTags(){return Mq()},get scopingRules(){return CO},alias:"",description:`Runtime ${P5} - ver ${f.version}`})}})(),typeof document>"u")return void o();var t;t=Zhe,kq.attachEvent(Lq,t);const n=lg("OpenUI5Support"),c=!!n&&n.isOpenUI5Detected(),h=lg("F6Navigation");n&&await n.init(),h&&!c&&h.init(),await new Promise(f=>{document.body?f():document.addEventListener("DOMContentLoaded",()=>{f()})}),await Gq(r2()),n&&n.attachListeners(),(()=>{const f=lg("OpenUI5Support");(!f||!f.isOpenUI5Detected())&&(()=>{const d=document.querySelector("head>style[data-ui5-font-face]");G5===void 0&&(H0(),G5=wd.defaultFontLoading),!G5||d||i2("data-ui5-font-face")||t2(Khe,"data-ui5-font-face")})(),i2("data-ui5-font-face-override")||t2(Xhe,"data-ui5-font-face-override")})(),i2("data-ui5-system-css-vars")||t2(Yhe,"data-ui5-system-css-vars"),PO()&&$q()&&!Wq&&(document.body.addEventListener("touchstart",()=>{}),Wq=!0),o(),QO=!0,jq.fireEvent("boot")})),OO),Zhe=o=>{QO&&o===r2()&&Gq(r2())};let V5;pC(()=>{V5=void 0});const r2=()=>(V5===void 0&&(H0(),V5=wd.theme),V5);var ede=(o=>(o.SAPIconsV4="SAP-icons-v4",o.SAPIconsV5="SAP-icons-v5",o.SAPIconsTNTV2="tnt-v2",o.SAPIconsTNTV3="tnt-v3",o.SAPBSIconsV1="business-suite-v1",o.SAPBSIconsV2="business-suite-v2",o))(ede||{});const K_=new Map;K_.set("SAP-icons",{legacy:"SAP-icons-v4",sap_horizon:"SAP-icons-v5"}),K_.set("tnt",{legacy:"tnt-v2",sap_horizon:"tnt-v3"}),K_.set("business-suite",{legacy:"business-suite-v1",sap_horizon:"business-suite-v2"});const tde=new Map,Kq=o=>{const t=(n=r2(),tde.get(n));var n;return!o&&t?hq(t):(c=>{const h=(()=>{var f,d;const p=r2();return(v=>Nhe.includes(v))(p)?!p.startsWith("sap_horizon"):!((d=(f=FO())==null?void 0:f.baseThemeName)!=null&&d.startsWith("sap_horizon"))})()?"legacy":"sap_horizon";return K_.has(c)?K_.get(c)[h]:c})(o||"SAP-icons")},ide=typeof document>"u",nde=new Cm,Xq=o=>{nde.attachEvent("languageChange",o)};let q5,$5;pC(()=>{q5=void 0,$5=void 0});const rde=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i;let Yq=class{constructor(o){const t=rde.exec(o.replace(/_/g,"-"));if(t===null)throw new Error(`The given language ${o} does not adhere to BCP-47.`);this.sLocaleId=o,this.sLanguage=t[1]||JB,this.sScript=t[2]||"",this.sRegion=t[3]||"",this.sVariant=t[4]&&t[4].slice(1)||null,this.sExtension=t[5]&&t[5].slice(1)||null,this.sPrivateUse=t[6]||null,this.sLanguage&&(this.sLanguage=this.sLanguage.toLowerCase()),this.sScript&&(this.sScript=this.sScript.toLowerCase().replace(/^[a-z]/,n=>n.toUpperCase())),this.sRegion&&(this.sRegion=this.sRegion.toUpperCase())}getLanguage(){return this.sLanguage}getScript(){return this.sScript}getRegion(){return this.sRegion}getVariant(){return this.sVariant}getVariantSubtags(){return this.sVariant?this.sVariant.split("-"):[]}getExtension(){return this.sExtension}getExtensionSubtags(){return this.sExtension?this.sExtension.slice(2).split("-"):[]}getPrivateUse(){return this.sPrivateUse}getPrivateUseSubtags(){return this.sPrivateUse?this.sPrivateUse.slice(2).split("-"):[]}hasPrivateUseSubtag(o){return this.getPrivateUseSubtags().indexOf(o)>=0}toString(){const o=[this.sLanguage];return this.sScript&&o.push(this.sScript),this.sRegion&&o.push(this.sRegion),this.sVariant&&o.push(this.sVariant),this.sExtension&&o.push(this.sExtension),this.sPrivateUse&&o.push(this.sPrivateUse),o.join("-")}};const NO=new Map,Jq=o=>(NO.has(o)||NO.set(o,new Yq(o)),NO.get(o)),o1=o=>{const t=(q5===void 0&&(H0(),q5=wd.language),q5);return t?Jq(t):(n=>{try{if(n&&typeof n=="string")return Jq(n)}catch{}return new Yq(j_)})((()=>{if(ide)return JB;const n=navigator.languages;return n&&n[0]||navigator.language||JB})())},sde=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i,Zq=/(?:^|-)(saptrc|sappsd)(?:-|$)/i,ode={he:"iw",yi:"ji",nb:"no",sr:"sh"},ade=o=>{if(!o)return j_;if(o==="zh_HK")return"zh_TW";const t=o.lastIndexOf("_");return t>=0?o.slice(0,t):o!==j_?j_:""},e$=new Set,t$=new Set,HO=new Map,zO=new Map,i$=new Map,n$=(o,t)=>{HO.set(o,t)},r$=(o,t)=>{const n=`${o}/${t}`;return i$.has(n)},s$=(o,t)=>t!==JB&&!r$(o,t),o$=async o=>{const t=o1().getLanguage(),n=o1().getRegion(),c=o1().getVariant();let h=t+(n?`-${n}`:"")+(c?`-${c}`:"");if(s$(o,h))for(h=(p=>{let v;if(!p)return j_;if(typeof p=="string"&&(v=sde.exec(p.replace(/_/g,"-")))){let w=v[1].toLowerCase(),S=v[3]?v[3].toUpperCase():void 0;const B=v[2]?v[2].toLowerCase():void 0,R=v[4]?v[4].slice(1):void 0,D=v[6];return w=ode[w]||w,D&&(v=Zq.exec(D))||R&&(v=Zq.exec(R))?`en_US_${v[1].toLowerCase()}`:(w==="zh"&&!S&&(B==="hans"?S="CN":B==="hant"&&(S="TW")),w+(S?"_"+S+(R?"_"+R.replace("-","_"):""):""))}return j_})(h);s$(o,h);)h=ade(h);const f=($5===void 0&&(H0(),$5=wd.fetchDefaultLanguage),$5);if(h!==JB||f)if(r$(o,h))try{const p=await((v,w)=>{const S=`${v}/${w}`,B=i$.get(S);return B&&!zO.get(S)&&zO.set(S,B(w)),zO.get(S)})(o,h);n$(o,p)}catch(p){const v=p;t$.has(v.message)||(t$.add(v.message),console.error(v.message))}else d=o,e$.has(d)||(console.warn(`[${d}]: Message bundle assets are not configured. Falling back to English texts.`,` Add \`import "${d}/dist/Assets.js"\` in your bundle and make sure your build tool supports dynamic imports and JSON imports. See section "Assets" in the documentation for more information.`),e$.add(d));else n$(o,null);var d};Xq(o=>{const t=[...HO.keys()];return Promise.all(t.map(o$))});const lde=/('')|'([^']+(?:''[^']*)*)(?:'|$)|\{([0-9]+(?:\s*,[^{}]*)?)\}|[{}]/g,GO=new Map;let cde=class{constructor(o){this.packageName=o}getText(o,...t){if(typeof o=="string"&&(o={key:o,defaultText:o}),!o||!o.key)return"";const n=(c=this.packageName,HO.get(c));var c;return n&&!n[o.key]&&console.warn(`Key ${o.key} not found in the i18n bundle, the default text will be used`),((h,f)=>(f=f||[],h.replace(lde,(d,p,v,w,S)=>{if(p)return"'";if(v)return v.replace(/''/g,"'");if(w){const B=typeof w=="string"?parseInt(w):w;return String(f[B])}throw new Error(`[i18n]: pattern syntax error at pos ${S}`)})))(n&&n[o.key]?n[o.key]:o.defaultText||o.key,t)}};const VO=async o=>(await o$(o),(t=>{if(GO.has(t))return GO.get(t);const n=new cde(t);return GO.set(t,n),n})(o)),a$=new Map,l$=r1("SVGIcons.registry",new Map),qO=r1("SVGIcons.promises",new Map),$O="ICON_NOT_FOUND",c$=o=>{Object.keys(o.data).forEach(t=>{const n=o.data[t];tr(t,{pathData:n.path||n.paths,ltr:n.ltr,accData:n.acc,collection:o.collection,packageName:o.packageName})})},tr=(o,t)=>{const n=`${t.collection}/${o}`;l$.set(n,{pathData:t.pathData,ltr:t.ltr,accData:t.accData,packageName:t.packageName,customTemplate:t.customTemplate,viewBox:t.viewBox,collection:t.collection})},u$=o=>{let t;return o.startsWith("sap-icon://")&&(o=o.replace("sap-icon://","")),[o,t]=o.split("/").reverse(),o=o.replace("icon-",""),t&&(t=hq(t)),{name:o,collection:t}},h$=o=>{const{name:t,collection:n}=u$(o);return WO(n,t)},d$=async o=>{const{name:t,collection:n}=u$(o);let c=$O;try{c=await(async h=>{if(!qO.has(h)){if(!a$.has(h))throw new Error(`No loader registered for the ${h} icons collection. Probably you forgot to import the "AllIcons.js" module for the respective package.`);const f=a$.get(h);qO.set(h,f(h))}return qO.get(h)})(Kq(n))}catch(h){console.error(h.message)}return c===$O?c:WO(n,t)||(Array.isArray(c)?c.forEach(h=>{var f,d;c$(h),f=n,d={[h.themeFamily||"legacy"]:h.collection},K_.has(f)?K_.set(f,{...d,...K_.get(f)}):K_.set(f,d)}):c$(c),WO(n,t))},WO=(o,t)=>{const n=`${Kq(o)}/${t}`;return l$.get(n)},jO=new Map,KO=new Map,A$=new Map,a1=o=>{if(!jO.has(o)){const t=ude(o.split("-"));jO.set(o,t)}return jO.get(o)},p$=o=>{if(!KO.has(o)){const t=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();KO.set(o,t)}return KO.get(o)},ude=o=>o.map((t,n)=>n===0?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(""),f$=o=>{const t=A$.get(o);if(t)return t;const n=a1(o),c=n.charAt(0).toUpperCase()+n.slice(1);return A$.set(o,c),c},g$=o=>o instanceof HTMLSlotElement?o.assignedNodes({flatten:!0}).filter(t=>t instanceof HTMLElement):[o],m$=o=>o.reduce((t,n)=>t.concat(g$(n)),[]);let hde=class{constructor(o){this.metadata=o}getInitialState(){if(Object.prototype.hasOwnProperty.call(this,"_initialState"))return this._initialState;const o={};if(this.slotsAreManaged()){const t=this.getSlots();for(const[n,c]of Object.entries(t)){const h=c.propertyName||n;o[h]=[],o[a1(h)]=o[h]}}return this._initialState=o,o}static validateSlotValue(o,t){return dde(o,t)}getPureTag(){return this.metadata.tag||""}getFeatures(){return this.metadata.features||[]}getTag(){const o=this.metadata.tag;if(!o)return"";const t=void SO(o);return t?`${o}-${t}`:o}hasAttribute(o){const t=this.getProperties()[o];return t.type!==Object&&t.type!==Array&&!t.noAttribute}getPropertiesList(){return Object.keys(this.getProperties())}getAttributesList(){return this.getPropertiesList().filter(this.hasAttribute.bind(this)).map(p$)}canSlotText(){var o;return((o=this.getSlots().default)==null?void 0:o.type)===Node}hasSlots(){return!!Object.entries(this.getSlots()).length}hasIndividualSlots(){return this.slotsAreManaged()&&Object.values(this.getSlots()).some(o=>o.individualSlots)}slotsAreManaged(){return!!this.metadata.managedSlots}supportsF6FastNavigation(){return!!this.metadata.fastNavigation}getProperties(){return this.metadata.properties||(this.metadata.properties={}),this.metadata.properties}getEvents(){return this.metadata.events||(this.metadata.events={}),this.metadata.events}getSlots(){return this.metadata.slots||(this.metadata.slots={}),this.metadata.slots}isLanguageAware(){return!!this.metadata.languageAware}isThemeAware(){return!!this.metadata.themeAware}needsCLDR(){return!!this.metadata.cldr}getShadowRootOptions(){return this.metadata.shadowRootOptions||{}}isFormAssociated(){return!!this.metadata.formAssociated}shouldInvalidateOnChildChange(o,t,n){const c=this.getSlots()[o].invalidateOnChildChange;if(c===void 0)return!1;if(typeof c=="boolean")return c;if(typeof c=="object"){if(t==="property"){if(c.properties===void 0)return!1;if(typeof c.properties=="boolean")return c.properties;if(Array.isArray(c.properties))return c.properties.includes(n);throw new Error("Wrong format for invalidateOnChildChange.properties: boolean or array is expected")}if(t==="slot"){if(c.slots===void 0)return!1;if(typeof c.slots=="boolean")return c.slots;if(Array.isArray(c.slots))return c.slots.includes(n);throw new Error("Wrong format for invalidateOnChildChange.slots: boolean or array is expected")}}throw new Error("Wrong format for invalidateOnChildChange: boolean or object is expected")}getI18n(){return this.metadata.i18n||(this.metadata.i18n={}),this.metadata.i18n}};const dde=(o,t)=>(o&&g$(o).forEach(n=>{if(!(n instanceof t.type))throw new Error(`The element is not of type ${t.type.toString()}`)}),o),XO=o=>{r1("CustomStyle.eventProvider",new Cm).attachEvent("CustomCSSChange",o)};XO(o=>{(async t=>{MO.forEach(n=>{const c=n.constructor,h=c.getMetadata().getTag(),f=(v=c,Rq.has(v)),d=c.getMetadata().isLanguageAware(),p=c.getMetadata().isThemeAware();var v;(!t||t.tag===h||t.rtlAware&&f||t.languageAware&&d||t.themeAware&&p)&&Dq(n)}),await _C()})({tag:o})});const _$=o=>Array.isArray(o)?o.filter(t=>!!t).flat(10).map(t=>typeof t=="string"?t:t.content).join(" "):typeof o=="string"?o:o.content,W5=new Map;XO(o=>{W5.delete(`${o}_normal`)});const j5=new Map;XO(o=>{j5.delete(`${o}_normal`)});const Ade=[],YO=new WeakMap,pde=["value-changed","click"];let K5;pC(()=>{K5=void 0});const v$=()=>(K5===void 0&&(H0(),K5=wd.noConflict),K5),fde=["disabled","title","hidden","role","draggable"],y$=o=>!(!fde.includes(o)&&!o.startsWith("aria")&&[HTMLElement,Element,Node].some(t=>t.prototype.hasOwnProperty(o))),gde=(o,t)=>{if(o.length!==t.length)return!1;for(let n=0;n<o.length;n++)if(o[n]!==t[n])return!1;return!0},b$=(o,t)=>{const n=mde(t);return o.call(t,t,n,void 0)},mde=o=>{const t=o.constructor,n=t.getMetadata().getPureTag(),c=t.getUniqueDependencies().map(h=>h.getMetadata().getPureTag()).filter(SO);return SO(n)&&c.push(n),c},JO=o=>{var t,n;if((t=o._internals)!=null&&t.form){if(_de(o),!o.name)return void((n=o._internals)==null||n.setFormValue(null));o._internals.setFormValue(o.formFormattedValue)}},_de=async o=>{var t,n;if((t=o._internals)!=null&&t.form)if(o.formValidity&&Object.keys(o.formValidity).some(c=>c)){const c=await((n=o.formElementAnchor)==null?void 0:n.call(o));o._internals.setValidity(o.formValidity,o.formValidityMessage,c)}else o._internals.setValidity({})},w$=o=>{var t,n;(n=(t=o._internals)==null?void 0:t.form)==null||n.requestSubmit()},vde=new Map,X5=new Map,ZO=new Map,x$=new Set;let C$=!1;const yde={iw:"he",ji:"yi",in:"id"},E$=o=>{C$||(console.warn(`[LocaleData] Supported locale "${o}" not configured, import the "Assets.js" module from the webcomponents package you are using.`),C$=!0)},S$=(o,t)=>{vde.set(o,t)},B$=async(o,t,n)=>{const c=((f,d,p)=>{(f=f&&yde[f]||f)==="no"&&(f="nb"),f==="zh"&&!d&&(p==="Hans"?d="CN":p==="Hant"&&(d="TW")),(f==="sh"||f==="sr"&&p==="Latn")&&(f="sr",d="Latn");let v=`${f}_${d}`;return wq.includes(v)?X5.has(v)?v:(E$(v),j_):(v=f,wq.includes(v)?X5.has(v)?v:(E$(v),j_):j_)})(o,t,n),h=lg("OpenUI5Support");if(h){const f=h.getLocaleDataObject();if(f)return void S$(c,f)}try{const f=await(d=>{if(!ZO.get(d)){const p=X5.get(d);if(!p)throw new Error(`CLDR data for locale ${d} is not loaded!`);ZO.set(d,p(d))}return ZO.get(d)})(c);S$(c,f)}catch(f){const d=f;x$.has(d.message)||(x$.add(d.message),console.error(d.message))}};X5.set("en",async()=>(await fetch("https://sdk.openui5.org/1.120.17/resources/sap/ui/core/cldr/en.json")).json()),Xq(()=>{const o=o1();return B$(o.getLanguage(),o.getRegion(),o.getScript())});let bde=0;const I$=new Map,eQ=new Map,T$={fromAttribute:(o,t)=>t===Boolean?o!==null:t===Number?o===null?void 0:parseFloat(o):o,toAttribute:(o,t)=>t===Boolean?o?"":null:t===Object||t===Array||o==null?null:String(o)};function s2(o){this._suppressInvalidation||(this.onInvalidation(o),this._changedState.push(o),Dq(this),this._invalidationEventProvider.fireEvent("invalidate",{...o,target:this}))}function wde(o,t){do{const n=Object.getOwnPropertyDescriptor(o,t);if(n)return n;o=Object.getPrototypeOf(o)}while(o&&o!==HTMLElement.prototype)}let xa=(a=class extends HTMLElement{constructor(){super(),this._rendered=!1;const o=this.constructor;let t;this._changedState=[],this._suppressInvalidation=!0,this._inDOM=!1,this._fullyConnected=!1,this._childChangeListeners=new Map,this._slotChangeListeners=new Map,this._invalidationEventProvider=new Cm,this._componentStateFinalizedEventProvider=new Cm,this._domRefReadyPromise=new Promise(n=>{t=n}),this._domRefReadyPromise._deferredResolve=t,this._doNotSyncAttributes=new Set,this._slotsAssignedNodes=new WeakMap,this._state={...o.getMetadata().getInitialState()},this.initializedProperties=new Map,this.constructor.getMetadata().getPropertiesList().forEach(n=>{if(this.hasOwnProperty(n)){const c=this[n];this.initializedProperties.set(n,c)}}),this._internals=this.attachInternals(),this._initShadowRoot()}_initShadowRoot(){const o=this.constructor;if(o._needsShadowDOM()){const t={mode:"open"};this.attachShadow({...t,...o.getMetadata().getShadowRootOptions()}),o.getMetadata().slotsAreManaged()&&this.shadowRoot.addEventListener("slotchange",this._onShadowRootSlotChange.bind(this))}}_onShadowRootSlotChange(o){var t;((t=o.target)==null?void 0:t.getRootNode())===this.shadowRoot&&this._processChildren()}get _id(){return this.__id||(this.__id="ui5wc_"+ ++bde),this.__id}render(){const o=this.constructor.template;return b$(o,this)}async connectedCallback(){const o=this.constructor;this.setAttribute(o.getMetadata().getPureTag(),""),o.getMetadata().supportsF6FastNavigation()&&this.setAttribute("data-sap-ui-fastnavgroup","true");const t=o.getMetadata().slotsAreManaged();this._inDOM=!0,t&&(this._startObservingDOMChildren(),await this._processChildren()),this._inDOM&&(o.asyncFinished||await o.definePromise,Fq(this),this._domRefReadyPromise._deferredResolve(),this._fullyConnected=!0,this.onEnterDOM())}disconnectedCallback(){const o=this.constructor.getMetadata().slotsAreManaged();this._inDOM=!1,o&&this._stopObservingDOMChildren(),this._fullyConnected&&(this.onExitDOM(),this._fullyConnected=!1),this._domRefReadyPromise._deferredResolve(),mC.remove(this),MO.delete(this)}onBeforeRendering(){}onAfterRendering(){}onEnterDOM(){}onExitDOM(){}_startObservingDOMChildren(){const o=this.constructor.getMetadata();if(!o.hasSlots())return;const t=o.canSlotText(),n={childList:!0,subtree:t,characterData:t};((c,h,f)=>{const d=new MutationObserver(h);YO.set(c,d),d.observe(c,f)})(this,this._processChildren.bind(this),n)}_stopObservingDOMChildren(){(o=>{const t=YO.get(o);t&&(t.disconnect(),YO.delete(o))})(this)}async _processChildren(){this.constructor.getMetadata().hasSlots()&&await this._updateSlots()}async _updateSlots(){const o=this.constructor,t=o.getMetadata().getSlots(),n=o.getMetadata().canSlotText(),c=Array.from(n?this.childNodes:this.children),h=new Map,f=new Map;for(const[S,B]of Object.entries(t)){const R=B.propertyName||S;f.set(R,S),h.set(R,[...this._state[R]]),this._clearSlot(S,B)}const d=new Map,p=new Map,v=c.map(async(S,B)=>{const R=($=>{if(!($ instanceof HTMLElement))return"default";const G=$.getAttribute("slot");if(G){const X=G.match(/^(.+?)-\d+$/);return X?X[1]:G}return"default"})(S),D=t[R];if(D===void 0){if(R!=="default"){const $=Object.keys(t).join(", ");console.warn(`Unknown slotName: ${R}, ignoring`,S,`Valid values are: ${$}`)}return}if(D.individualSlots){const $=(d.get(R)||0)+1;d.set(R,$),S._individualSlot=`${R}-${$}`}if(S instanceof HTMLElement){const $=S.localName;if($.includes("-")&&(O=$,!Ade.some(G=>O.startsWith(G)))){if(!customElements.get($)){const G=customElements.whenDefined($);let X=I$.get($);X||(X=new Promise(te=>setTimeout(te,1e3)),I$.set($,X)),await Promise.race([G,X])}customElements.upgrade(S)}}var O;if(S=o.getMetadata().constructor.validateSlotValue(S,D),G0(S)&&D.invalidateOnChildChange){const $=this._getChildChangeListener(R);S.attachInvalidate.call(S,$)}S instanceof HTMLSlotElement&&this._attachSlotChange(S,R,!!D.invalidateOnChildChange);const V=D.propertyName||R;p.has(V)?p.get(V).push({child:S,idx:B}):p.set(V,[{child:S,idx:B}])});await Promise.all(v),p.forEach((S,B)=>{this._state[B]=S.sort((R,D)=>R.idx-D.idx).map(R=>R.child),this._state[a1(B)]=this._state[B]});let w=!1;for(const[S,B]of Object.entries(t)){const R=B.propertyName||S;gde(h.get(R),this._state[R])||(s2.call(this,{type:"slot",name:f.get(R),reason:"children"}),w=!0,o.getMetadata().isFormAssociated()&&JO(this))}w||s2.call(this,{type:"slot",name:"default",reason:"textcontent"})}_clearSlot(o,t){const n=t.propertyName||o;this._state[n].forEach(c=>{if(G0(c)){const h=this._getChildChangeListener(o);c.detachInvalidate.call(c,h)}c instanceof HTMLSlotElement&&this._detachSlotChange(c,o)}),this._state[n]=[],this._state[a1(n)]=this._state[n]}attachInvalidate(o){this._invalidationEventProvider.attachEvent("invalidate",o)}detachInvalidate(o){this._invalidationEventProvider.detachEvent("invalidate",o)}_onChildChange(o,t){this.constructor.getMetadata().shouldInvalidateOnChildChange(o,t.type,t.name)&&s2.call(this,{type:"slot",name:o,reason:"childchange",child:t.target})}attributeChangedCallback(o,t,n){let c;if(this._doNotSyncAttributes.has(o))return;const h=this.constructor.getMetadata().getProperties(),f=o.replace(/^ui5-/,""),d=a1(f);if(h.hasOwnProperty(d)){const p=h[d];c=(p.converter??T$).fromAttribute(n,p.type),this[d]=c}}formAssociatedCallback(){this.constructor.getMetadata().isFormAssociated()&&(o=>{(t=>"formFormattedValue"in t&&"name"in t)(o)&&JO(o)})(this)}static get formAssociated(){return this.getMetadata().isFormAssociated()}_updateAttribute(o,t){const n=this.constructor;if(!n.getMetadata().hasAttribute(o))return;const c=n.getMetadata().getProperties()[o],h=p$(o),f=(c.converter||T$).toAttribute(t,c.type);this._doNotSyncAttributes.add(h),f==null?this.removeAttribute(h):this.setAttribute(h,f),this._doNotSyncAttributes.delete(h)}_getChildChangeListener(o){return this._childChangeListeners.has(o)||this._childChangeListeners.set(o,this._onChildChange.bind(this,o)),this._childChangeListeners.get(o)}_getSlotChangeListener(o){return this._slotChangeListeners.has(o)||this._slotChangeListeners.set(o,this._onSlotChange.bind(this,o)),this._slotChangeListeners.get(o)}_attachSlotChange(o,t,n){const c=this._getSlotChangeListener(t);o.addEventListener("slotchange",h=>{if(c.call(o,h),n){const f=this._slotsAssignedNodes.get(o);f&&f.forEach(p=>{if(G0(p)){const v=this._getChildChangeListener(t);p.detachInvalidate.call(p,v)}});const d=m$([o]);this._slotsAssignedNodes.set(o,d),d.forEach(p=>{if(G0(p)){const v=this._getChildChangeListener(t);p.attachInvalidate.call(p,v)}})}})}_detachSlotChange(o,t){o.removeEventListener("slotchange",this._getSlotChangeListener(t))}_onSlotChange(o){s2.call(this,{type:"slot",name:o,reason:"slotchange"})}onInvalidation(o){}updateAttributes(){const o=this.constructor.getMetadata().getProperties();for(const[t,n]of Object.entries(o))this._updateAttribute(t,this[t])}_render(){const o=this.constructor,t=o.getMetadata().hasIndividualSlots();this.initializedProperties.size>0&&(Array.from(this.initializedProperties.entries()).forEach(([n,c])=>{delete this[n],this[n]=c}),this.initializedProperties.clear()),this._suppressInvalidation=!0;try{this.onBeforeRendering(),this._rendered||this.updateAttributes(),this._componentStateFinalizedEventProvider.fireEvent("componentStateFinalized")}finally{this._suppressInvalidation=!1}this._changedState=[],o._needsShadowDOM()&&(n=>{const c=n.constructor,h=n.shadowRoot,f=n.render();h?(h.adoptedStyleSheets=(d=>{const p=`${d.getMetadata().getTag()}_normal`;if(!j5.has(p)){const v=(S=>{const B=S.getMetadata().getTag(),R=`${B}_normal`,D=lg("OpenUI5Enablement");if(!W5.has(R)){let O="";D&&(O=_$(D.getBusyIndicatorStyles()));const V=(G=>{const X=r1("CustomStyle.customCSSFor",{});return X[G]?X[G].join(""):""})(B)||"",$=`${_$(S.styles)} ${V} ${O}`;W5.set(R,$)}return W5.get(R)})(d),w=new CSSStyleSheet;w.replaceSync(v),j5.set(p,[w])}return j5.get(p)})(c),c.renderer(f,h,{host:n})):console.warn("There is no shadow root to update")})(this),this._rendered=!0,t&&this._assignIndividualSlotsToChildren(),this.onAfterRendering()}_assignIndividualSlotsToChildren(){Array.from(this.children).forEach(o=>{o._individualSlot&&o.setAttribute("slot",o._individualSlot)})}_waitForDomRef(){return this._domRefReadyPromise}getDomRef(){return typeof this._getRealDomRef=="function"?this._getRealDomRef():this.shadowRoot&&this.shadowRoot.children.length!==0?this.shadowRoot.children[0]:void 0}getFocusDomRef(){const o=this.getDomRef();if(o)return o.querySelector("[data-sap-focus-ref]")||o}async getFocusDomRefAsync(){return await this._waitForDomRef(),this.getFocusDomRef()}async focus(o){await this._waitForDomRef();const t=this.getFocusDomRef();t===this?HTMLElement.prototype.focus.call(this,o):t&&typeof t.focus=="function"&&t.focus(o)}fireEvent(o,t,n=!1,c=!0){const h=this._fireEvent(o,t,n,c),f=f$(o);return f!==o?h&&this._fireEvent(f,t,n,c):h}fireDecoratorEvent(o,t){const n=this.getEventData(o),c=!!n&&n.cancelable,h=!!n&&n.bubbles,f=this._fireEvent(o,t,c,h),d=f$(o);return d!==o?f&&this._fireEvent(d,t,c,h):f}_fireEvent(o,t,n=!1,c=!0){const h=new CustomEvent(`ui5-${o}`,{detail:t,composed:!1,bubbles:c,cancelable:n}),f=this.dispatchEvent(h);if((p=>{const v=v$();return w=p,!(pde.includes(w)||v!==!0&&(S=>{const B=v$();return!(typeof B!="boolean"&&B.events&&B.events.includes&&B.events.includes(S))})(p));var w})(o))return f;const d=new CustomEvent(o,{detail:t,composed:!1,bubbles:c,cancelable:n});return this.dispatchEvent(d)&&f}getEventData(o){return this.constructor.getMetadata().getEvents()[o]}getSlottedNodes(o){return m$(this[o])}attachComponentStateFinalized(o){this._componentStateFinalizedEventProvider.attachEvent("componentStateFinalized",o)}detachComponentStateFinalized(o){this._componentStateFinalizedEventProvider.detachEvent("componentStateFinalized",o)}get effectiveDir(){return(o=>{Rq.add(o)})(this.constructor),this.matches(":dir(rtl)")?"rtl":"ltr"}get isUI5Element(){return!0}get classes(){return{}}get accessibilityInfo(){return{}}static get observedAttributes(){return this.getMetadata().getAttributesList()}static _needsShadowDOM(){return!!this.template||Object.prototype.hasOwnProperty.call(this.prototype,"render")}static _generateAccessors(){const o=this.prototype,t=this.getMetadata().slotsAreManaged(),n=this.getMetadata().getProperties();for(const[c,h]of Object.entries(n)){y$(c)||console.warn(`"${c}" is not a valid property name. Use a name that does not collide with DOM APIs`);const f=wde(o,c);let d,p;f!=null&&f.set&&(d=f.set),f!=null&&f.get&&(p=f.get),Object.defineProperty(o,c,{get(){return p?p.call(this):this._state[c]},set(v){const w=this.constructor,S=p?p.call(this):this._state[c];S!==v&&(d?d.call(this,v):this._state[c]=v,s2.call(this,{type:"property",name:c,newValue:v,oldValue:S}),this._rendered&&this._updateAttribute(c,v),w.getMetadata().isFormAssociated()&&JO(this))}})}if(t){const c=this.getMetadata().getSlots();for(const[h,f]of Object.entries(c)){y$(h)||console.warn(`"${h}" is not a valid property name. Use a name that does not collide with DOM APIs`);const d=f.propertyName||h,p={get(){return this._state[d]!==void 0?this._state[d]:[]},set(){throw new Error("Cannot set slot content directly, use the DOM APIs (appendChild, removeChild, etc...)")}};Object.defineProperty(o,d,p),d!==a1(d)&&Object.defineProperty(o,a1(d),p)}}}static get dependencies(){return[]}static cacheUniqueDependencies(){const o=this.dependencies.filter((t,n,c)=>c.indexOf(t)===n);eQ.set(this,o)}static getUniqueDependencies(){return eQ.has(this)||this.cacheUniqueDependencies(),eQ.get(this)||[]}static async onDefine(){return Promise.resolve()}static fetchI18nBundles(){return Promise.all(Object.entries(this.getMetadata().getI18n()).map(o=>{const{bundleName:t}=o[1];return VO(t)}))}static fetchCLDR(){return this.getMetadata().needsCLDR()?B$(o1().getLanguage(),o1().getRegion(),o1().getScript()):Promise.resolve()}static define(){this.definePromise=(async()=>{await Jhe();const h=await Promise.all([this.fetchI18nBundles(),this.fetchCLDR(),this.onDefine()]),[f]=h;Object.entries(this.getMetadata().getI18n()).forEach((d,p)=>{const v=d[0];d[1].target[v]=f[p]}),this.asyncFinished=!0})();const o=this.getMetadata().getTag();this.getMetadata().getFeatures().forEach(h=>{YB(h)&&this.cacheUniqueDependencies(),((f,d,p)=>{const v=vq.get(d);v!=null&&v.includes(f)||(v?v.push(f):vq.set(d,[f]),yq.attachEvent(bq(f),p))})(h,this,this.cacheUniqueDependencies.bind(this))});const t=(c=o,IO.has(c)),n=customElements.get(o);var c;return n&&!t?(h=>{let f=Tq.get(h);f===void 0&&(f=-1),s1.has(f)||s1.set(f,new Set),s1.get(f).add(h),TO||(TO=setTimeout(()=>{(()=>{const d=ZB,p=gC(),v=d[p];let w="Multiple UI5 Web Components instances detected.";d.length>1&&(w=`${w}
Loading order (versions before 1.1.0 not listed): ${d.map(S=>`
${S.description}`).join("")}`),[...s1.keys()].forEach(S=>{let B,R,D;S===-1?(B=1,R={description:"Older unknown runtime"}):(B=Iq(p,S),R=d[S]),D=B>0?"an older":B<0?"a newer":"the same",w=`${w}

"${v.description}" failed to define ${s1.get(S).size} tag(s) as they were defined by a runtime of ${D} version "${R.description}": ${[...s1.get(S)].sort().join(", ")}.`,w=B>0?`${w}
WARNING! If your code uses features of the above web components, unavailable in ${R.description}, it might not work as expected!`:`${w}
Since the above web components were defined by the same or newer version runtime, they should be compatible with your code.`}),w=`${w}

To prevent other runtimes from defining tags that you use, consider using scoping or have third-party libraries use scoping: https://github.com/SAP/ui5-webcomponents/blob/main/docs/2-advanced/03-scoping.md.`,console.warn(w)})(),s1=new Map,TO=void 0},1e3))})(o):n||(this._generateAccessors(),(h=>{IO.add(h),Tq.set(h,gC())})(o),customElements.define(o,this)),this}static getMetadata(){if(this.hasOwnProperty("_metadata"))return this._metadata;const o=[this.metadata];let t=this;for(;t!==a;)t=Object.getPrototypeOf(t),o.unshift(t.metadata);const n=wO({},...o);return this._metadata=new hde(n),this._metadata}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}},a.metadata={},a.styles="",a);const G0=o=>"isUI5Element"in o,Ds=(o={})=>t=>{if(Object.prototype.hasOwnProperty.call(t,"metadata")||(t.metadata={}),typeof o=="string")return void(t.metadata.tag=o);const{tag:n,languageAware:c,themeAware:h,cldr:f,fastNavigation:d,formAssociated:p,shadowRootOptions:v,features:w}=o;t.metadata.tag=n,c&&(t.metadata.languageAware=c),f&&(t.metadata.cldr=f),w&&(t.metadata.features=w),h&&(t.metadata.themeAware=h),d&&(t.metadata.fastNavigation=d),p&&(t.metadata.formAssociated=p),v&&(t.metadata.shadowRootOptions=v),["renderer","template","styles","dependencies"].forEach(S=>{o[S]&&Object.defineProperty(t,S,{get:()=>o[S]})})},He=o=>(t,n)=>{const c=t.constructor;Object.prototype.hasOwnProperty.call(c,"metadata")||(c.metadata={});const h=c.metadata;h.properties||(h.properties={});const f=h.properties;f[n]||(f[n]=o??{})},Fn=(o,t={})=>n=>{Object.prototype.hasOwnProperty.call(n,"metadata")||(n.metadata={});const c=n.metadata;c.events||(c.events={});const h=c.events;h[o]||(t.bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,h[o]=t)},Ro=o=>(t,n)=>{const c=t.constructor;Object.prototype.hasOwnProperty.call(c,"metadata")||(c.metadata={});const h=c.metadata;h.slots||(h.slots={});const f=h.slots;if(o&&o.default&&f.default)throw new Error("Only one slot can be the default slot.");const d=o&&o.default?"default":n;(o=o||{type:HTMLElement}).type||(o.type=HTMLElement),f[d]||(f[d]=o),o.default&&(delete f.default.default,f.default.propertyName=n),c.metadata.managedSlots=!0},Zo=o=>(o.key?o.key==="Enter":o.keyCode===13)&&!Tc(o),Do=o=>(o.key?o.key==="Spacebar"||o.key===" ":o.keyCode===32)&&!Tc(o),M$=o=>(o.key?o.key==="Spacebar"||o.key===" ":o.keyCode===32)&&Nu(o,!1,!1,!0),V0=o=>(o.key?o.key==="ArrowLeft"||o.key==="Left":o.keyCode===37)&&!Tc(o),q0=o=>(o.key?o.key==="ArrowRight"||o.key==="Right":o.keyCode===39)&&!Tc(o),xd=o=>(o.key?o.key==="ArrowUp"||o.key==="Up":o.keyCode===38)&&!Tc(o),_A=o=>(o.key?o.key==="ArrowDown"||o.key==="Down":o.keyCode===40)&&!Tc(o),tQ=o=>(o.key?o.key==="ArrowLeft"||o.key==="Left":o.keyCode===37)&&Nu(o,!0,!1,!1),iQ=o=>(o.key?o.key==="ArrowRight"||o.key==="Right":o.keyCode===39)&&Nu(o,!0,!1,!1),o2=o=>(o.key?o.key==="ArrowUp"||o.key==="Up":o.keyCode===38)&&Nu(o,!0,!1,!1),nQ=o=>(o.key?o.key==="ArrowDown"||o.key==="Down":o.keyCode===40)&&Nu(o,!0,!1,!1),rQ=o=>(o.key?o.key==="ArrowUp"||o.key==="Up":o.keyCode===38)&&Nu(o,!1,!1,!0),sQ=o=>(o.key?o.key==="ArrowDown"||o.key==="Down":o.keyCode===40)&&Nu(o,!1,!1,!0),R$=o=>(o.key?o.key==="ArrowLeft"||o.key==="Left":o.keyCode===37)&&Nu(o,!1,!1,!0),D$=o=>(o.key?o.key==="ArrowRight"||o.key==="Right":o.keyCode===39)&&Nu(o,!1,!1,!0),a2=o=>(o.key?o.key==="Home":o.keyCode===36)&&!Tc(o),l2=o=>(o.key?o.key==="End":o.keyCode===35)&&!Tc(o),$0=o=>(o.key?o.key==="Escape"||o.key==="Esc":o.keyCode===27)&&!Tc(o),W0=o=>(o.key?o.key==="Tab":o.keyCode===9)&&!Tc(o),Y5=o=>(o.key?o.key==="Tab":o.keyCode===9)&&Nu(o,!1,!1,!0),oQ=o=>(o.key?o.key==="Delete":o.keyCode===46)&&!Tc(o),yC=o=>(o.key?o.key==="PageUp":o.keyCode===33)&&!Tc(o),J5=o=>(o.key?o.key==="PageDown":o.keyCode===34)&&!Tc(o),aQ=o=>(o.key?o.key==="+":o.keyCode===187)||o.keyCode===107&&!Tc(o),xde=o=>(o.key?o.key==="-":o.keyCode===219)||o.keyCode===109&&!Tc(o),lQ=o=>o.key==="F2"&&!Tc(o),Tc=o=>o.shiftKey||o.altKey||F$(o),F$=o=>!(!o.metaKey&&!o.ctrlKey),Nu=(o,t,n,c)=>o.shiftKey===c&&o.altKey===n&&F$(o)===t,bC=()=>{let o=document.activeElement;for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o};var l1=(o=>(o.Auto="Auto",o.Vertical="Vertical",o.Horizontal="Horizontal",o.Paging="Paging",o))(l1||{}),j0=(o=>(o.Static="Static",o.Cyclic="Cyclic",o))(j0||{});let Z5=class{constructor(o,t){if(!o.isUI5Element)throw new Error("The root web component must be a UI5 Element instance");if(this.rootWebComponent=o,this.rootWebComponent.addEventListener("keydown",this._onkeydown.bind(this)),this._initBound=this._init.bind(this),this.rootWebComponent.attachComponentStateFinalized(this._initBound),typeof t.getItemsCallback!="function")throw new Error("getItemsCallback is required");this._getItems=t.getItemsCallback,this._currentIndex=t.currentIndex||0,this._rowSize=t.rowSize||1,this._behavior=t.behavior||j0.Static,this._navigationMode=t.navigationMode||l1.Auto,this._affectedPropertiesNames=t.affectedPropertiesNames||[],this._skipItemsSize=t.skipItemsSize||null}setCurrentItem(o){const t=this._getItems().indexOf(o);t!==-1?(this._currentIndex=t,this._applyTabIndex()):console.warn("The provided item is not managed by ItemNavigation",o)}setRowSize(o){this._rowSize=o}_init(){this._getItems().forEach((o,t)=>{o.forcedTabIndex=t===this._currentIndex?"0":"-1"})}_onkeydown(o){if(!this._canNavigate())return;const t=this._navigationMode===l1.Horizontal||this._navigationMode===l1.Auto,n=this._navigationMode===l1.Vertical||this._navigationMode===l1.Auto,c=this.rootWebComponent.effectiveDir==="rtl";if(c&&V0(o)&&t)this._handleRight();else if(c&&q0(o)&&t)this._handleLeft();else if(V0(o)&&t)this._handleLeft();else if(q0(o)&&t)this._handleRight();else if(xd(o)&&n)this._handleUp();else if(_A(o)&&n)this._handleDown();else if(a2(o))this._handleHome();else if(l2(o))this._handleEnd();else if(yC(o))this._handlePageUp();else{if(!J5(o))return;this._handlePageDown()}o.preventDefault(),this._applyTabIndex(),this._focusCurrentItem()}_handleUp(){const o=this._getItems().length;if(this._currentIndex-this._rowSize>=0)this._currentIndex-=this._rowSize;else if(this._behavior===j0.Cyclic){const t=this._currentIndex%this._rowSize;let n=(t===0?this._rowSize-1:t-1)+(Math.ceil(o/this._rowSize)-1)*this._rowSize;n>o-1&&(n-=this._rowSize),this._currentIndex=n}else this._currentIndex=0}_handleDown(){const o=this._getItems().length;if(this._currentIndex+this._rowSize<o)this._currentIndex+=this._rowSize;else if(this._behavior===j0.Cyclic){const t=(this._currentIndex%this._rowSize+1)%this._rowSize;this._currentIndex=t}else this._currentIndex=o-1}_handleLeft(){const o=this._getItems().length;this._currentIndex>0?this._currentIndex-=1:this._behavior===j0.Cyclic&&(this._currentIndex=o-1)}_handleRight(){const o=this._getItems().length;this._currentIndex<o-1?this._currentIndex+=1:this._behavior===j0.Cyclic&&(this._currentIndex=0)}_handleHome(){const o=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex-=this._currentIndex%o}_handleEnd(){const o=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex+=o-1-this._currentIndex%o}_handlePageUp(){this._rowSize>1||this._handlePageUpFlat()}_handlePageDown(){this._rowSize>1||this._handlePageDownFlat()}_handlePageUpFlat(){this._skipItemsSize!==null&&this._currentIndex+1>this._skipItemsSize?this._currentIndex-=this._skipItemsSize:this._currentIndex-=this._currentIndex}_handlePageDownFlat(){this._skipItemsSize!==null&&this._getItems().length-this._currentIndex-1>this._skipItemsSize?this._currentIndex+=this._skipItemsSize:this._currentIndex=this._getItems().length-1}_applyTabIndex(){const o=this._getItems();for(let t=0;t<o.length;t++)o[t].forcedTabIndex=t===this._currentIndex?"0":"-1";this._affectedPropertiesNames.forEach(t=>{const n=this.rootWebComponent[t];this.rootWebComponent[t]=Array.isArray(n)?[...n]:{...n}})}_focusCurrentItem(){const o=this._getCurrentItem();o&&o.focus()}_canNavigate(){const o=this._getCurrentItem(),t=bC();return o&&o===t}_getCurrentItem(){const o=this._getItems();if(!o.length)return;for(;this._currentIndex>=o.length;)this._currentIndex-=this._rowSize;this._currentIndex<0&&(this._currentIndex=0);const t=o[this._currentIndex];if(!t)return;if(G0(t))return t.getFocusDomRef();const n=this.rootWebComponent.getDomRef();return n&&t.id?n.querySelector(`[id="${t.id}"]`):void 0}};const{I:Cde}=Se,U$=()=>document.createComment(""),c2=(o,t,n)=>{var c;const h=o._$AA.parentNode,f=t===void 0?o._$AB:t._$AA;if(n===void 0){const d=h.insertBefore(U$(),f),p=h.insertBefore(U$(),f);n=new Cde(d,p,o,o.options)}else{const d=n._$AB.nextSibling,p=n._$AM,v=p!==o;if(v){let w;(c=n._$AQ)===null||c===void 0||c.call(n,o),n._$AM=o,n._$AP!==void 0&&(w=o._$AU)!==p._$AU&&n._$AP(w)}if(d!==f||v){let w=n._$AA;for(;w!==d;){const S=w.nextSibling;h.insertBefore(w,f),w=S}}}return n},c1=(o,t,n=o)=>(o._$AI(t,n),o),Ede={},cQ=o=>{var t;(t=o._$AP)===null||t===void 0||t.call(o,!1,!0);let n=o._$AA;const c=o._$AB.nextSibling;for(;n!==c;){const h=n.nextSibling;n.remove(),n=h}},k$=(o,t,n)=>{const c=new Map;for(let h=t;h<=n;h++)c.set(o[h],h);return c},u1=XB(class extends F5{constructor(o){if(super(o),o.type!==2)throw Error("repeat() can only be used in text expressions")}ct(o,t,n){let c;n===void 0?n=t:t!==void 0&&(c=t);const h=[],f=[];let d=0;for(const p of o)h[d]=c?c(p,d):d,f[d]=n(p,d),d++;return{values:f,keys:h}}render(o,t,n){return this.ct(o,t,n).values}update(o,[t,n,c]){var h;const f=o._$AH,{values:d,keys:p}=this.ct(t,n,c);if(!Array.isArray(f))return this.ut=p,d;const v=(h=this.ut)!==null&&h!==void 0?h:this.ut=[],w=[];let S,B,R=0,D=f.length-1,O=0,V=d.length-1;for(;R<=D&&O<=V;)if(f[R]===null)R++;else if(f[D]===null)D--;else if(v[R]===p[O])w[O]=c1(f[R],d[O]),R++,O++;else if(v[D]===p[V])w[V]=c1(f[D],d[V]),D--,V--;else if(v[R]===p[V])w[V]=c1(f[R],d[V]),c2(o,w[V+1],f[R]),R++,V--;else if(v[D]===p[O])w[O]=c1(f[D],d[O]),c2(o,f[R],f[D]),D--,O++;else if(S===void 0&&(S=k$(p,O,V),B=k$(v,R,D)),S.has(v[R]))if(S.has(v[D])){const $=B.get(p[O]),G=$!==void 0?f[$]:null;if(G===null){const X=c2(o,f[R]);c1(X,d[O]),w[O]=X}else w[O]=c1(G,d[O]),c2(o,f[R],G),f[$]=null;O++}else cQ(f[D]),D--;else cQ(f[R]),R++;for(;O<=V;){const $=c2(o,w[V+1]);c1($,d[O]),w[O++]=$}for(;R<=D;){const $=f[R++];$!==null&&cQ($)}return this.ut=p,(($,G=Ede)=>{$._$AH=G})(o,w),ht}}),br=XB(class extends F5{constructor(o){var t;if(super(o),o.type!==1||o.name!=="class"||((t=o.strings)===null||t===void 0?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(o){return" "+Object.keys(o).filter(t=>o[t]).join(" ")+" "}update(o,[t]){var n,c;if(this.it===void 0){this.it=new Set,o.strings!==void 0&&(this.nt=new Set(o.strings.join(" ").split(/\s/).filter(f=>f!=="")));for(const f in t)t[f]&&!(!((n=this.nt)===null||n===void 0)&&n.has(f))&&this.it.add(f);return this.render(t)}const h=o.element.classList;this.it.forEach(f=>{f in t||(h.remove(f),this.it.delete(f))});for(const f in t){const d=!!t[f];d===this.it.has(f)||!((c=this.nt)===null||c===void 0)&&c.has(f)||(d?(h.add(f),this.it.add(f)):(h.remove(f),this.it.delete(f)))}return ht}}),Hr=XB(class extends F5{constructor(o){var t;if(super(o),o.type!==1||o.name!=="style"||((t=o.strings)===null||t===void 0?void 0:t.length)>2)throw new Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(o){return""}update(o,[t]){const{style:n}=o.element;if(this._previousStyleProperties===void 0){this._previousStyleProperties=new Set;for(const c in t)this._previousStyleProperties.add(c)}this._previousStyleProperties.forEach(c=>{t[c]==null&&(this._previousStyleProperties.delete(c),c.includes("-")?n.removeProperty(c):n[c]="")});for(const c in t){const h=t[c];h!=null&&(this._previousStyleProperties.add(c),c.includes("-")?n.setProperty(c,h):n[c]=h)}return ht}}),le=o=>o??lt,et=(o,...t)=>{const n=lg("LitStatic");return(n?n.html:Ie)(o,...t)},u2=(o,...t)=>{const n=lg("LitStatic");return(n?n.svg:ze)(o,...t)},Ca=(o,t,n)=>{const c=lg("OpenUI5Enablement");c&&(o=c.wrapTemplateResultInBusyMarkup(et,n.host,o)),$e(o,t,n)},Lt=(o,t,n)=>{const c=lg("LitStatic");if(c)return c.unsafeStatic((t||[]).includes(o)?`${o}-${n}`:o)},al=o=>(t,n)=>{t.metadata.i18n||(t.metadata.i18n={}),t.metadata.i18n[n]={bundleName:o,target:t}},L$=Symbol.for(""),Sde=o=>{if((o==null?void 0:o.r)===L$)return o==null?void 0:o._$litStatic$},P$=new Map,O$=o=>(t,...n)=>{const c=n.length;let h,f;const d=[],p=[];let v,w=0,S=!1;for(;w<c;){for(v=t[w];w<c&&(f=n[w],(h=Sde(f))!==void 0);)v+=h+t[++w],S=!0;w!==c&&p.push(f),d.push(v),w++}if(w===c&&d.push(t[c]),S){const B=d.join("$$lit$$");(t=P$.get(B))===void 0&&(d.raw=d,P$.set(B,t=d)),n=p}return o(t,...n)},Bde=O$(Ie),Ide=O$(ze);var Q$;(e=class{}).html=Bde,e.svg=Ide,e.unsafeStatic=o=>({_$litStatic$:o,r:L$}),Q$=e,mq.set("LitStatic",Q$);const Tde={key:"AVATAR_TOOLTIP",defaultText:"Avatar"},Mde={key:"BUSY_INDICATOR_TITLE",defaultText:"Please wait"},Rde={key:"BUTTON_ARIA_TYPE_ACCEPT",defaultText:"Positive Action"},Dde={key:"BUTTON_ARIA_TYPE_REJECT",defaultText:"Negative Action"},Fde={key:"BUTTON_ARIA_TYPE_EMPHASIZED",defaultText:"Emphasized"},Ude={key:"COLORPALETTE_CONTAINER_LABEL",defaultText:"Color Palette - Predefined Colors"},kde={key:"COLORPALETTE_POPOVER_TITLE",defaultText:"Color Palette"},Lde={key:"COLORPALETTE_COLOR_LABEL",defaultText:"Color"},N$={key:"COLOR_PALETTE_DIALOG_CANCEL_BUTTON",defaultText:"Cancel"},Pde={key:"COLOR_PALETTE_DIALOG_OK_BUTTON",defaultText:"OK"},Ode={key:"COLOR_PALETTE_DIALOG_TITLE",defaultText:"Change Color"},Qde={key:"COLOR_PALETTE_MORE_COLORS_TEXT",defaultText:"More Colors..."},Nde={key:"COLOR_PALETTE_DEFAULT_COLOR_TEXT",defaultText:"Default Color"},Hde={key:"COLORPICKER_ALPHA_SLIDER",defaultText:"Alpha control"},zde={key:"COLORPICKER_HUE_SLIDER",defaultText:"Hue control"},Gde={key:"COLORPICKER_HEX",defaultText:"Hexadecimal"},Vde={key:"COLORPICKER_RED",defaultText:"Red"},qde={key:"COLORPICKER_GREEN",defaultText:"Green"},$de={key:"COLORPICKER_BLUE",defaultText:"Blue"},Wde={key:"COLORPICKER_ALPHA",defaultText:"Alpha"},jde={key:"DELETE",defaultText:"Delete"},Kde={key:"GROUP_HEADER_TEXT",defaultText:"Group Header"},Xde={key:"SELECT_ROLE_DESCRIPTION",defaultText:"Listbox"},Yde={key:"INPUT_SUGGESTIONS",defaultText:"Suggestions Available"},H$={key:"INPUT_SUGGESTIONS_TITLE",defaultText:"Select"},Jde={key:"INPUT_SUGGESTIONS_ONE_HIT",defaultText:"1 result available"},Zde={key:"INPUT_SUGGESTIONS_MORE_HITS",defaultText:"{0} results are available"},eAe={key:"INPUT_SUGGESTIONS_NO_HIT",defaultText:"No results"},tAe={key:"INPUT_CLEAR_ICON_ACC_NAME",defaultText:"Clear"},iAe={key:"LIST_ITEM_POSITION",defaultText:"List item {0} of {1}"},nAe={key:"LIST_ITEM_SELECTED",defaultText:"Selected"},rAe={key:"LIST_ITEM_NOT_SELECTED",defaultText:"Not Selected"},sAe={key:"ARIA_LABEL_LIST_ITEM_CHECKBOX",defaultText:"Multiple Selection Mode"},oAe={key:"ARIA_LABEL_LIST_ITEM_RADIO_BUTTON",defaultText:"Item Selection."},aAe={key:"ARIA_LABEL_LIST_SELECTABLE",defaultText:"Contains Selectable Items"},lAe={key:"ARIA_LABEL_LIST_MULTISELECTABLE",defaultText:"Contains Multi-Selectable Items"},cAe={key:"ARIA_LABEL_LIST_DELETABLE",defaultText:"Contains Deletable Items"},uAe={key:"INPUT_AVALIABLE_VALUES",defaultText:"Available Values"},hAe={key:"PANEL_ICON",defaultText:"Expand/Collapse"},dAe={key:"RESPONSIVE_POPOVER_CLOSE_DIALOG_BUTTON",defaultText:"Decline"},AAe={key:"SEGMENTEDBUTTON_ARIA_DESCRIPTION",defaultText:"Segmented button group"},pAe={key:"SEGMENTEDBUTTON_ARIA_DESCRIBEDBY",defaultText:"Press SPACE or ENTER to select an item"},fAe={key:"SEGMENTEDBUTTONITEM_ARIA_DESCRIPTION",defaultText:"Segmented button"},gAe={key:"SLIDER_ARIA_DESCRIPTION",defaultText:"Slider handle"},mAe={key:"LOAD_MORE_TEXT",defaultText:"More"},z$={key:"VALUE_STATE_TYPE_ERROR",defaultText:"Value State Error"},G$={key:"VALUE_STATE_TYPE_WARNING",defaultText:"Value State Warning"},V$={key:"VALUE_STATE_TYPE_SUCCESS",defaultText:"Value State Success"},q$={key:"VALUE_STATE_TYPE_INFORMATION",defaultText:"Value State Information"},eR={key:"VALUE_STATE_ERROR",defaultText:"Invalid entry"},tR={key:"VALUE_STATE_WARNING",defaultText:"Warning issued"},uQ={key:"VALUE_STATE_INFORMATION",defaultText:"Informative entry"},iR={key:"VALUE_STATE_SUCCESS",defaultText:"Entry successfully validated"},_Ae={key:"SLIDER_TOOLTIP_INPUT_DESCRIPTION",defaultText:"Press F2 to enter a value"},vAe={key:"SLIDER_TOOLTIP_INPUT_LABEL",defaultText:"Current Value"},yAe={key:"STEPINPUT_DEC_ICON_TITLE",defaultText:"Decrease"},bAe={key:"STEPINPUT_INC_ICON_TITLE",defaultText:"Increase"},wAe={key:"DIALOG_HEADER_ARIA_ROLE_DESCRIPTION",defaultText:"Interactive Header"},xAe={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_RESIZABLE",defaultText:"Use Shift+Arrow keys to resize"},CAe={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE",defaultText:"Use Arrow keys to move"},EAe={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE_RESIZABLE",defaultText:"Use Arrow keys to move, Shift+Arrow keys to resize"},SAe={key:"LABEL_COLON",defaultText:":"},BAe={key:"FORM_CHECKABLE_REQUIRED",defaultText:"Please tick this box if you want to proceed."},IAe={key:"FORM_SELECTABLE_REQUIRED",defaultText:"Please select an item in the list."},TAe={key:"FORM_SELECTABLE_REQUIRED2",defaultText:"Please select one of these options."},MAe={key:"FORM_TEXTFIELD_REQUIRED",defaultText:"Please fill in this field."};let hQ;const dQ=()=>(hQ===void 0&&(H0(),hQ=wd.enableDefaultTooltips),hQ),nR=new WeakMap,h2=new WeakMap,RAe={attributes:!0,childList:!0,characterData:!0,subtree:!0},K0=o=>{const t=o;return t.accessibleNameRef?$$(o):t.accessibleName?t.accessibleName:void 0},$$=o=>{var t;const n=((t=o.accessibleNameRef)==null?void 0:t.split(" "))??[],c=o.getRootNode();let h="";return n.forEach((f,d)=>{const p=c.querySelector(`[id='${f}']`),v=`${p&&p.textContent?p.textContent:""}`;v&&(h+=v,d<n.length-1&&(h+=" "))}),h},W$=o=>{var t;const n=new Set;return j$(o).forEach(c=>{n.add(c)}),(((t=o.accessibleNameRef)==null?void 0:t.split(" "))??[]).forEach(c=>{const h=DAe(o,c);h&&n.add(h)}),Array.from(n)},j$=o=>{const t=o.getRootNode().querySelectorAll(`[for="${o.id}"]`);return Array.from(t)},DAe=(o,t)=>o.getRootNode().querySelector(`[id='${t}']`),K$=(o,t)=>{let n=nR.get(t);if(!n){n={observer:null,callbacks:[]};const c=new MutationObserver(()=>{n.callbacks.forEach(f=>{f()});const h=document.getElementById(t.id);o.host.id===t.getAttribute("for")||h||AQ(o,t)});n.observer=c,c.observe(t,RAe),nR.set(t,n)}n.callbacks.includes(o.callback)||n.callbacks.push(o.callback)},AQ=(o,t)=>{var n;const c=nR.get(t);c&&(c.callbacks=c.callbacks.filter(h=>h!==o.callback),c.callbacks.length||((n=c.observer)==null||n.disconnect(),nR.delete(t))),o.observedElements=o.observedElements.filter(h=>h!==t)},X$=o=>Array.from(o).filter(t=>t.nodeType!==Node.COMMENT_NODE&&(t.nodeType!==Node.TEXT_NODE||(t.nodeValue||"").trim().length!==0)).length>0;function FAe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-segmented-button-item-icon" name="${le(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-segmented-button-item-icon" name="${le(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function UAe(o,t,n){return u2`<title id="${le(this._id)}-tooltip">${le(this.effectiveAccessibleName)}</title>`}function kAe(o,t,n){return u2`${le(this.customSvg)}`}function LAe(o,t,n,c,h){return u2`<path d="${le(c)}"></path>`}function PAe(o,t,n){return u2`${this.hasIconTooltip?UAe.call(this,o,t,n):void 0}<g role="presentation">${this.customSvg?kAe.call(this,o,t,n):void 0}${u1(this.pathData,(c,h)=>c._id||h,(c,h)=>LAe.call(this,o,t,n,c,h))}</g>`}var pQ;(function(o){o.Image="Image",o.Decorative="Decorative",o.Interactive="Interactive"})(pQ||(pQ={}));const X0=pQ,Br={packageName:"@ui5/webcomponents-theming",fileName:"themes/sap_horizon/parameters-bundle.css.ts",content:`:root{--sapThemeMetaData-Base-baseLib:{"Path": "Base.baseLib.sap_horizon.css_variables","PathPattern": "/%frameworkId%/%libId%/%themeId%/%fileId%.css","Extends": ["baseTheme"],"Tags": ["Fiori_3","LightColorScheme"],"FallbackThemeId": "sap_fiori_3","Engine":{"Name": "theming-engine","Version": "14.0.2"},"Version":{"Build": "11.17.1.20240715084505","Source": "11.17.1"}};--sapBrandColor: #0070f2;--sapHighlightColor: #0064d9;--sapBaseColor: #fff;--sapShellColor: #fff;--sapBackgroundColor: #f5f6f7;--sapFontFamily: "72", "72full", Arial, Helvetica, sans-serif;--sapFontSize: .875rem;--sapTextColor: #1d2d3e;--sapLinkColor: #0064d9;--sapCompanyLogo: none;--sapBackgroundImage: none;--sapBackgroundImageOpacity: 1;--sapBackgroundImageRepeat: false;--sapSelectedColor: #0064d9;--sapHoverColor: #eaecee;--sapActiveColor: #dee2e5;--sapHighlightTextColor: #fff;--sapTitleColor: #1d2d3e;--sapNegativeColor: #aa0808;--sapCriticalColor: #e76500;--sapPositiveColor: #256f3a;--sapInformativeColor: #0070f2;--sapNeutralColor: #788fa6;--sapNegativeElementColor: #f53232;--sapCriticalElementColor: #e76500;--sapPositiveElementColor: #30914c;--sapInformativeElementColor: #0070f2;--sapNeutralElementColor: #788fa6;--sapNegativeTextColor: #aa0808;--sapCriticalTextColor: #b44f00;--sapPositiveTextColor: #256f3a;--sapInformativeTextColor: #0064d9;--sapNeutralTextColor: #1d2d3e;--sapErrorColor: #aa0808;--sapWarningColor: #e76500;--sapSuccessColor: #256f3a;--sapInformationColor: #0070f2;--sapErrorBackground: #ffeaf4;--sapWarningBackground: #fff8d6;--sapSuccessBackground: #f5fae5;--sapInformationBackground: #e1f4ff;--sapNeutralBackground: #eff1f2;--sapErrorBorderColor: #e90b0b;--sapWarningBorderColor: #dd6100;--sapSuccessBorderColor: #30914c;--sapInformationBorderColor: #0070f2;--sapNeutralBorderColor: #788fa6;--sapElement_LineHeight: 2.75rem;--sapElement_Height: 2.25rem;--sapElement_BorderWidth: .0625rem;--sapElement_BorderCornerRadius: .75rem;--sapElement_Compact_LineHeight: 2rem;--sapElement_Compact_Height: 1.625rem;--sapElement_Condensed_LineHeight: 1.5rem;--sapElement_Condensed_Height: 1.375rem;--sapContent_LineHeight: 1.5;--sapContent_IconHeight: 1rem;--sapContent_IconColor: #1d2d3e;--sapContent_ContrastIconColor: #fff;--sapContent_NonInteractiveIconColor: #758ca4;--sapContent_MarkerIconColor: #5d36ff;--sapContent_MarkerTextColor: #046c7a;--sapContent_MeasureIndicatorColor: #556b81;--sapContent_Selected_MeasureIndicatorColor: #0064d9;--sapContent_Placeholderloading_Background: #ccc;--sapContent_Placeholderloading_Gradient: linear-gradient(to right, #ccc 0%, #ccc 20%, #999 50%, #ccc 80%, #ccc 100%);--sapContent_ImagePlaceholderBackground: #eaecee;--sapContent_ImagePlaceholderForegroundColor: #5b738b;--sapContent_RatedColor: #d27700;--sapContent_UnratedColor: #758ca4;--sapContent_BusyColor: #0064d9;--sapContent_FocusColor: #0032a5;--sapContent_FocusStyle: solid;--sapContent_FocusWidth: .125rem;--sapContent_ContrastFocusColor: #fff;--sapContent_ShadowColor: #223548;--sapContent_ContrastShadowColor: #fff;--sapContent_Shadow0: 0 0 .125rem 0 rgba(34,53,72,.2), 0 .125rem .25rem 0 rgba(34,53,72,.2);--sapContent_Shadow1: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .125rem .5rem 0 rgba(34,53,72,.3);--sapContent_Shadow2: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .625rem 1.875rem 0 rgba(34,53,72,.25);--sapContent_Shadow3: 0 0 0 .0625rem rgba(34,53,72,.48), 0 1.25rem 5rem 0 rgba(34,53,72,.25);--sapContent_TextShadow: 0 0 .125rem #fff;--sapContent_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapContent_HeaderShadow: 0 .125rem .125rem 0 rgba(34,53,72,.05), inset 0 -.0625rem 0 0 #d9d9d9;--sapContent_Interaction_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapContent_Selected_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapContent_Negative_Shadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapContent_Critical_Shadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapContent_Positive_Shadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapContent_Informative_Shadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapContent_Neutral_Shadow: inset 0 0 0 .0625rem rgba(120,143,166,.3);--sapContent_SearchHighlightColor: #dafdf5;--sapContent_HelpColor: #188918;--sapContent_LabelColor: #556b82;--sapContent_MonospaceFontFamily: "72Mono", "72Monofull", lucida console, monospace;--sapContent_MonospaceBoldFontFamily: "72Mono-Bold", "72Mono-Boldfull", lucida console, monospace;--sapContent_IconFontFamily: "SAP-icons";--sapContent_DisabledTextColor: rgba(29,45,62,.6);--sapContent_DisabledOpacity: .4;--sapContent_ContrastTextThreshold: .65;--sapContent_ContrastTextColor: #fff;--sapContent_ForegroundColor: #efefef;--sapContent_ForegroundBorderColor: #758ca4;--sapContent_ForegroundTextColor: #1d2d3e;--sapContent_BadgeBackground: #aa0808;--sapContent_BadgeTextColor: #fff;--sapContent_DragAndDropActiveColor: #0064d9;--sapContent_Selected_TextColor: #0064d9;--sapContent_Selected_Background: #fff;--sapContent_Selected_Hover_Background: #e3f0ff;--sapContent_Selected_ForegroundColor: #0064d9;--sapContent_ForcedColorAdjust: none;--sapContent_Illustrative_Color1: #5d36ff;--sapContent_Illustrative_Color2: #0070f2;--sapContent_Illustrative_Color3: #f58b00;--sapContent_Illustrative_Color4: #00144a;--sapContent_Illustrative_Color5: #a9b4be;--sapContent_Illustrative_Color6: #d5dadd;--sapContent_Illustrative_Color7: #ebf8ff;--sapContent_Illustrative_Color8: #fff;--sapContent_Illustrative_Color9: #64edd2;--sapContent_Illustrative_Color10: #ebf8ff;--sapContent_Illustrative_Color11: #f31ded;--sapContent_Illustrative_Color12: #00a800;--sapContent_Illustrative_Color13: #005dc9;--sapContent_Illustrative_Color14: #004da5;--sapContent_Illustrative_Color15: #cc7400;--sapContent_Illustrative_Color16: #3b0ac6;--sapContent_Illustrative_Color17: #00a58a;--sapContent_Illustrative_Color18: #d1efff;--sapContent_Illustrative_Color19: #b8e6ff;--sapContent_Illustrative_Color20: #9eddff;--sapFontLightFamily: "72-Light", "72-Lightfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBoldFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldFamily: "72-Semibold", "72-Semiboldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldDuplexFamily: "72-SemiboldDuplex", "72-SemiboldDuplexfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBlackFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapFontHeaderFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSmallSize: .75rem;--sapFontLargeSize: 1rem;--sapFontHeader1Size: 3rem;--sapFontHeader2Size: 2rem;--sapFontHeader3Size: 1.5rem;--sapFontHeader4Size: 1.25rem;--sapFontHeader5Size: 1rem;--sapFontHeader6Size: .875rem;--sapLink_TextDecoration: none;--sapLink_Hover_Color: #0064d9;--sapLink_Hover_TextDecoration: underline;--sapLink_Active_Color: #0064d9;--sapLink_Active_TextDecoration: none;--sapLink_Visited_Color: #0064d9;--sapLink_InvertedColor: #a6cfff;--sapLink_SubtleColor: #1d2d3e;--sapShell_Background: #eff1f2;--sapShell_BackgroundImage: linear-gradient(to bottom, #eff1f2, #eff1f2);--sapShell_BackgroundImageOpacity: 1;--sapShell_BackgroundImageRepeat: false;--sapShell_BorderColor: #fff;--sapShell_TextColor: #1d2d3e;--sapShell_InteractiveBackground: #eff1f2;--sapShell_InteractiveTextColor: #1d2d3e;--sapShell_InteractiveBorderColor: #556b81;--sapShell_GroupTitleTextColor: #1d2d3e;--sapShell_GroupTitleTextShadow: 0 0 .125rem #fff;--sapShell_Hover_Background: #fff;--sapShell_Active_Background: #fff;--sapShell_Active_TextColor: #0070f2;--sapShell_Selected_Background: #fff;--sapShell_Selected_TextColor: #0070f2;--sapShell_Selected_Hover_Background: #fff;--sapShell_Favicon: none;--sapShell_Navigation_Background: #fff;--sapShell_Navigation_Hover_Background: #fff;--sapShell_Navigation_SelectedColor: #0064d9;--sapShell_Navigation_Selected_TextColor: #0064d9;--sapShell_Navigation_TextColor: #1d2d3e;--sapShell_Navigation_Active_TextColor: #0064d9;--sapShell_Navigation_Active_Background: #fff;--sapShell_Shadow: 0 .125rem .125rem 0 rgba(34,53,72,.15), inset 0 -.0625rem 0 0 rgba(34,53,72,.2);--sapShell_NegativeColor: #aa0808;--sapShell_CriticalColor: #b44f00;--sapShell_PositiveColor: #256f3a;--sapShell_InformativeColor: #0064d9;--sapShell_NeutralColor: #1d2d3e;--sapShell_Assistant_ForegroundColor: #5d36ff;--sapShell_Category_1_Background: #0057d2;--sapShell_Category_1_BorderColor: #0057d2;--sapShell_Category_1_TextColor: #fff;--sapShell_Category_1_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_2_Background: #df1278;--sapShell_Category_2_BorderColor: #df1278;--sapShell_Category_2_TextColor: #fff;--sapShell_Category_2_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_3_Background: #e76500;--sapShell_Category_3_BorderColor: #e76500;--sapShell_Category_3_TextColor: #fff;--sapShell_Category_3_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_4_Background: #7800a4;--sapShell_Category_4_BorderColor: #7800a4;--sapShell_Category_4_TextColor: #fff;--sapShell_Category_4_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_5_Background: #aa2608;--sapShell_Category_5_BorderColor: #aa2608;--sapShell_Category_5_TextColor: #fff;--sapShell_Category_5_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_6_Background: #07838f;--sapShell_Category_6_BorderColor: #07838f;--sapShell_Category_6_TextColor: #fff;--sapShell_Category_6_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_7_Background: #f31ded;--sapShell_Category_7_BorderColor: #f31ded;--sapShell_Category_7_TextColor: #fff;--sapShell_Category_7_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_8_Background: #188918;--sapShell_Category_8_BorderColor: #188918;--sapShell_Category_8_TextColor: #fff;--sapShell_Category_8_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_9_Background: #002a86;--sapShell_Category_9_BorderColor: #002a86;--sapShell_Category_9_TextColor: #fff;--sapShell_Category_9_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_10_Background: #5b738b;--sapShell_Category_10_BorderColor: #5b738b;--sapShell_Category_10_TextColor: #fff;--sapShell_Category_10_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_11_Background: #d20a0a;--sapShell_Category_11_BorderColor: #d20a0a;--sapShell_Category_11_TextColor: #fff;--sapShell_Category_11_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_12_Background: #7858ff;--sapShell_Category_12_BorderColor: #7858ff;--sapShell_Category_12_TextColor: #fff;--sapShell_Category_12_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_13_Background: #a00875;--sapShell_Category_13_BorderColor: #a00875;--sapShell_Category_13_TextColor: #fff;--sapShell_Category_13_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_14_Background: #14565b;--sapShell_Category_14_BorderColor: #14565b;--sapShell_Category_14_TextColor: #fff;--sapShell_Category_14_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_15_Background: #223548;--sapShell_Category_15_BorderColor: #223548;--sapShell_Category_15_TextColor: #fff;--sapShell_Category_15_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_16_Background: #1e592f;--sapShell_Category_16_BorderColor: #1e592f;--sapShell_Category_16_TextColor: #fff;--sapShell_Category_16_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapAssistant_Color1: #5d36ff;--sapAssistant_Color2: #a100c2;--sapAssistant_BackgroundGradient: linear-gradient(#5d36ff, #a100c2);--sapAssistant_Background: #5d36ff;--sapAssistant_BorderColor: #5d36ff;--sapAssistant_TextColor: #fff;--sapAssistant_Hover_Background: #2800cf;--sapAssistant_Hover_BorderColor: #2800cf;--sapAssistant_Hover_TextColor: #fff;--sapAssistant_Active_Background: #fff;--sapAssistant_Active_BorderColor: #5d36ff;--sapAssistant_Active_TextColor: #5d36ff;--sapAssistant_Question_Background: #eae5ff;--sapAssistant_Question_BorderColor: #eae5ff;--sapAssistant_Question_TextColor: #1d2d3e;--sapAssistant_Answer_Background: #eff1f2;--sapAssistant_Answer_BorderColor: #eff1f2;--sapAssistant_Answer_TextColor: #1d2d3e;--sapAvatar_1_Background: #fff3b8;--sapAvatar_1_BorderColor: #fff3b8;--sapAvatar_1_TextColor: #a45d00;--sapAvatar_2_Background: #ffd0e7;--sapAvatar_2_BorderColor: #ffd0e7;--sapAvatar_2_TextColor: #aa0808;--sapAvatar_3_Background: #ffdbe7;--sapAvatar_3_BorderColor: #ffdbe7;--sapAvatar_3_TextColor: #ba066c;--sapAvatar_4_Background: #ffdcf3;--sapAvatar_4_BorderColor: #ffdcf3;--sapAvatar_4_TextColor: #a100c2;--sapAvatar_5_Background: #ded3ff;--sapAvatar_5_BorderColor: #ded3ff;--sapAvatar_5_TextColor: #552cff;--sapAvatar_6_Background: #d1efff;--sapAvatar_6_BorderColor: #d1efff;--sapAvatar_6_TextColor: #0057d2;--sapAvatar_7_Background: #c2fcee;--sapAvatar_7_BorderColor: #c2fcee;--sapAvatar_7_TextColor: #046c7a;--sapAvatar_8_Background: #ebf5cb;--sapAvatar_8_BorderColor: #ebf5cb;--sapAvatar_8_TextColor: #256f3a;--sapAvatar_9_Background: #ddccf0;--sapAvatar_9_BorderColor: #ddccf0;--sapAvatar_9_TextColor: #6c32a9;--sapAvatar_10_Background: #eaecee;--sapAvatar_10_BorderColor: #eaecee;--sapAvatar_10_TextColor: #556b82;--sapButton_Background: #fff;--sapButton_BorderColor: #bcc3ca;--sapButton_BorderWidth: .0625rem;--sapButton_BorderCornerRadius: .5rem;--sapButton_TextColor: #0064d9;--sapButton_Hover_Background: #eaecee;--sapButton_Hover_BorderColor: #bcc3ca;--sapButton_Hover_TextColor: #0064d9;--sapButton_IconColor: #0064d9;--sapButton_Active_Background: #fff;--sapButton_Active_BorderColor: #0064d9;--sapButton_Active_TextColor: #0064d9;--sapButton_Emphasized_Background: #0070f2;--sapButton_Emphasized_BorderColor: #0070f2;--sapButton_Emphasized_TextColor: #fff;--sapButton_Emphasized_Hover_Background: #0064d9;--sapButton_Emphasized_Hover_BorderColor: #0064d9;--sapButton_Emphasized_Hover_TextColor: #fff;--sapButton_Emphasized_Active_Background: #fff;--sapButton_Emphasized_Active_BorderColor: #0064d9;--sapButton_Emphasized_Active_TextColor: #0064d9;--sapButton_Emphasized_TextShadow: transparent;--sapButton_Emphasized_FontWeight: bold;--sapButton_Reject_Background: #ffd6e9;--sapButton_Reject_BorderColor: #ffc2de;--sapButton_Reject_TextColor: #aa0808;--sapButton_Reject_Hover_Background: #ffbddb;--sapButton_Reject_Hover_BorderColor: #ffbddb;--sapButton_Reject_Hover_TextColor: #aa0808;--sapButton_Reject_Active_Background: #fff;--sapButton_Reject_Active_BorderColor: #e90b0b;--sapButton_Reject_Active_TextColor: #aa0808;--sapButton_Reject_Selected_Background: #fff;--sapButton_Reject_Selected_BorderColor: #e90b0b;--sapButton_Reject_Selected_TextColor: #aa0808;--sapButton_Reject_Selected_Hover_Background: #ffbddb;--sapButton_Reject_Selected_Hover_BorderColor: #e90b0b;--sapButton_Accept_Background: #ebf5cb;--sapButton_Accept_BorderColor: #dbeda0;--sapButton_Accept_TextColor: #256f3a;--sapButton_Accept_Hover_Background: #e3f1b6;--sapButton_Accept_Hover_BorderColor: #e3f1b6;--sapButton_Accept_Hover_TextColor: #256f3a;--sapButton_Accept_Active_Background: #fff;--sapButton_Accept_Active_BorderColor: #30914c;--sapButton_Accept_Active_TextColor: #256f3a;--sapButton_Accept_Selected_Background: #fff;--sapButton_Accept_Selected_BorderColor: #30914c;--sapButton_Accept_Selected_TextColor: #256f3a;--sapButton_Accept_Selected_Hover_Background: #e3f1b6;--sapButton_Accept_Selected_Hover_BorderColor: #30914c;--sapButton_Lite_Background: transparent;--sapButton_Lite_BorderColor: transparent;--sapButton_Lite_TextColor: #0064d9;--sapButton_Lite_Hover_Background: #eaecee;--sapButton_Lite_Hover_BorderColor: #bcc3ca;--sapButton_Lite_Hover_TextColor: #0064d9;--sapButton_Lite_Active_Background: #fff;--sapButton_Lite_Active_BorderColor: #0064d9;--sapButton_Selected_Background: #edf6ff;--sapButton_Selected_BorderColor: #0064d9;--sapButton_Selected_TextColor: #0064d9;--sapButton_Selected_Hover_Background: #d9ecff;--sapButton_Selected_Hover_BorderColor: #0064d9;--sapButton_Attention_Background: #fff3b7;--sapButton_Attention_BorderColor: #ffeb84;--sapButton_Attention_TextColor: #b44f00;--sapButton_Attention_Hover_Background: #ffef9e;--sapButton_Attention_Hover_BorderColor: #ffef9e;--sapButton_Attention_Hover_TextColor: #b44f00;--sapButton_Attention_Active_Background: #fff;--sapButton_Attention_Active_BorderColor: #dd6100;--sapButton_Attention_Active_TextColor: #b44f00;--sapButton_Attention_Selected_Background: #fff;--sapButton_Attention_Selected_BorderColor: #dd6100;--sapButton_Attention_Selected_TextColor: #b44f00;--sapButton_Attention_Selected_Hover_Background: #ffef9e;--sapButton_Attention_Selected_Hover_BorderColor: #dd6100;--sapButton_Negative_Background: #f53232;--sapButton_Negative_BorderColor: #f53232;--sapButton_Negative_TextColor: #fff;--sapButton_Negative_Hover_Background: #e90b0b;--sapButton_Negative_Hover_BorderColor: #e90b0b;--sapButton_Negative_Hover_TextColor: #fff;--sapButton_Negative_Active_Background: #fff;--sapButton_Negative_Active_BorderColor: #f53232;--sapButton_Negative_Active_TextColor: #aa0808;--sapButton_Critical_Background: #e76500;--sapButton_Critical_BorderColor: #e76500;--sapButton_Critical_TextColor: #fff;--sapButton_Critical_Hover_Background: #dd6100;--sapButton_Critical_Hover_BorderColor: #dd6100;--sapButton_Critical_Hover_TextColor: #fff;--sapButton_Critical_Active_Background: #fff;--sapButton_Critical_Active_BorderColor: #dd6100;--sapButton_Critical_Active_TextColor: #b44f00;--sapButton_Success_Background: #30914c;--sapButton_Success_BorderColor: #30914c;--sapButton_Success_TextColor: #fff;--sapButton_Success_Hover_Background: #2c8646;--sapButton_Success_Hover_BorderColor: #2c8646;--sapButton_Success_Hover_TextColor: #fff;--sapButton_Success_Active_Background: #fff;--sapButton_Success_Active_BorderColor: #30914c;--sapButton_Success_Active_TextColor: #256f3a;--sapButton_Information_Background: #e8f3ff;--sapButton_Information_BorderColor: #b5d8ff;--sapButton_Information_TextColor: #0064d9;--sapButton_Information_Hover_Background: #d4e8ff;--sapButton_Information_Hover_BorderColor: #b5d8ff;--sapButton_Information_Hover_TextColor: #0064d9;--sapButton_Information_Active_Background: #fff;--sapButton_Information_Active_BorderColor: #0064d9;--sapButton_Information_Active_TextColor: #0064d9;--sapButton_Neutral_Background: #e8f3ff;--sapButton_Neutral_BorderColor: #b5d8ff;--sapButton_Neutral_TextColor: #0064d9;--sapButton_Neutral_Hover_Background: #d4e8ff;--sapButton_Neutral_Hover_BorderColor: #b5d8ff;--sapButton_Neutral_Hover_TextColor: #0064d9;--sapButton_Neutral_Active_Background: #fff;--sapButton_Neutral_Active_BorderColor: #0064d9;--sapButton_Neutral_Active_TextColor: #0064d9;--sapButton_Track_Background: #788fa6;--sapButton_Track_BorderColor: #788fa6;--sapButton_Track_TextColor: #fff;--sapButton_Track_Hover_Background: #637d97;--sapButton_Track_Hover_BorderColor: #637d97;--sapButton_Track_Selected_Background: #0064d9;--sapButton_Track_Selected_BorderColor: #0064d9;--sapButton_Track_Selected_TextColor: #fff;--sapButton_Track_Selected_Hover_Background: #0058c0;--sapButton_Track_Selected_Hover_BorderColor: #0058c0;--sapButton_Handle_Background: #fff;--sapButton_Handle_BorderColor: #fff;--sapButton_Handle_TextColor: #1d2d3e;--sapButton_Handle_Hover_Background: #fff;--sapButton_Handle_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Handle_Selected_Background: #edf6ff;--sapButton_Handle_Selected_BorderColor: #edf6ff;--sapButton_Handle_Selected_TextColor: #0064d9;--sapButton_Handle_Selected_Hover_Background: #edf6ff;--sapButton_Handle_Selected_Hover_BorderColor: rgba(237,246,255,.5);--sapButton_Track_Negative_Background: #f53232;--sapButton_Track_Negative_BorderColor: #f53232;--sapButton_Track_Negative_TextColor: #fff;--sapButton_Track_Negative_Hover_Background: #e90b0b;--sapButton_Track_Negative_Hover_BorderColor: #e90b0b;--sapButton_Handle_Negative_Background: #fff;--sapButton_Handle_Negative_BorderColor: #fff;--sapButton_Handle_Negative_TextColor: #aa0808;--sapButton_Handle_Negative_Hover_Background: #fff;--sapButton_Handle_Negative_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Track_Positive_Background: #30914c;--sapButton_Track_Positive_BorderColor: #30914c;--sapButton_Track_Positive_TextColor: #fff;--sapButton_Track_Positive_Hover_Background: #2c8646;--sapButton_Track_Positive_Hover_BorderColor: #2c8646;--sapButton_Handle_Positive_Background: #fff;--sapButton_Handle_Positive_BorderColor: #fff;--sapButton_Handle_Positive_TextColor: #256f3a;--sapButton_Handle_Positive_Hover_Background: #fff;--sapButton_Handle_Positive_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_TokenBackground: #fff;--sapButton_TokenBorderColor: #bcc3ca;--sapField_Background: #fff;--sapField_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #556b81, #556b81) border-box;--sapField_TextColor: #131e29;--sapField_PlaceholderTextColor: #556b82;--sapField_BorderColor: #556b81;--sapField_HelpBackground: #fff;--sapField_BorderWidth: .0625rem;--sapField_BorderStyle: none;--sapField_BorderCornerRadius: .25rem;--sapField_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapField_Hover_Background: #fff;--sapField_Hover_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #0064d9, #0064d9) border-box;--sapField_Hover_BorderColor: #0064d9;--sapField_Hover_HelpBackground: #fff;--sapField_Hover_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapField_Hover_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_Hover_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_Hover_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_Hover_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapField_Active_BorderColor: #0064d9;--sapField_Focus_Background: #fff;--sapField_Focus_BorderColor: #0032a5;--sapField_Focus_HelpBackground: #fff;--sapField_ReadOnly_Background: #eaecee;--sapField_ReadOnly_BackgroundStyle: 0 100% / .375rem .0625rem repeat-x linear-gradient(90deg, #556b81 0, #556b81 .25rem, transparent .25rem) border-box;--sapField_ReadOnly_BorderColor: #556b81;--sapField_ReadOnly_BorderStyle: none;--sapField_ReadOnly_HelpBackground: #eaecee;--sapField_RequiredColor: #ba066c;--sapField_InvalidColor: #e90b0b;--sapField_InvalidBackground: #ffeaf4;--sapField_InvalidBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #e90b0b, #e90b0b) border-box;--sapField_InvalidBorderWidth: .125rem;--sapField_InvalidBorderStyle: none;--sapField_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_WarningColor: #dd6100;--sapField_WarningBackground: #fff8d6;--sapField_WarningBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #dd6100, #dd6100) border-box;--sapField_WarningBorderWidth: .125rem;--sapField_WarningBorderStyle: none;--sapField_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_SuccessColor: #30914c;--sapField_SuccessBackground: #f5fae5;--sapField_SuccessBackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #30914c, #30914c) border-box;--sapField_SuccessBorderWidth: .0625rem;--sapField_SuccessBorderStyle: none;--sapField_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_InformationColor: #0070f2;--sapField_InformationBackground: #e1f4ff;--sapField_InformationBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #0070f2, #0070f2) border-box;--sapField_InformationBorderWidth: .125rem;--sapField_InformationBorderStyle: none;--sapField_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapGroup_TitleBackground: #fff;--sapGroup_TitleBorderColor: #a8b2bd;--sapGroup_TitleTextColor: #1d2d3e;--sapGroup_Title_FontSize: 1rem;--sapGroup_ContentBackground: #fff;--sapGroup_ContentBorderColor: #d9d9d9;--sapGroup_BorderWidth: .0625rem;--sapGroup_BorderCornerRadius: .5rem;--sapGroup_FooterBackground: transparent;--sapToolbar_Background: #fff;--sapToolbar_SeparatorColor: #d9d9d9;--sapList_HeaderBackground: #fff;--sapList_HeaderBorderColor: #a8b2bd;--sapList_HeaderTextColor: #1d2d3e;--sapList_BorderColor: #e5e5e5;--sapList_BorderWidth: .0625rem;--sapList_TextColor: #1d2d3e;--sapList_Active_TextColor: #1d2d3e;--sapList_Active_Background: #dee2e5;--sapList_SelectionBackgroundColor: #ebf8ff;--sapList_SelectionBorderColor: #0064d9;--sapList_Hover_SelectionBackground: #dcf3ff;--sapList_Background: #fff;--sapList_Hover_Background: #eaecee;--sapList_AlternatingBackground: #f5f6f7;--sapList_GroupHeaderBackground: #fff;--sapList_GroupHeaderBorderColor: #a8b2bd;--sapList_GroupHeaderTextColor: #1d2d3e;--sapList_TableGroupHeaderBackground: #eff1f2;--sapList_TableGroupHeaderBorderColor: #a8b2bd;--sapList_TableGroupHeaderTextColor: #1d2d3e;--sapList_FooterBackground: #fff;--sapList_FooterTextColor: #1d2d3e;--sapList_TableFooterBorder: #a8b2bd;--sapList_TableFixedBorderColor: #8c8c8c;--sapMessage_ErrorBorderColor: #ff8ec4;--sapMessage_WarningBorderColor: #ffe770;--sapMessage_SuccessBorderColor: #cee67e;--sapMessage_InformationBorderColor: #7bcfff;--sapPopover_BorderCornerRadius: .5rem;--sapProgress_Background: #d5dadd;--sapProgress_BorderColor: #d5dadd;--sapProgress_TextColor: #1d2d3e;--sapProgress_FontSize: .875rem;--sapProgress_NegativeBackground: #ffdbec;--sapProgress_NegativeBorderColor: #ffdbec;--sapProgress_NegativeTextColor: #1d2d3e;--sapProgress_CriticalBackground: #fff4bd;--sapProgress_CriticalBorderColor: #fff4bd;--sapProgress_CriticalTextColor: #1d2d3e;--sapProgress_PositiveBackground: #e5f2ba;--sapProgress_PositiveBorderColor: #e5f2ba;--sapProgress_PositiveTextColor: #1d2d3e;--sapProgress_InformationBackground: #cdedff;--sapProgress_InformationBorderColor: #cdedff;--sapProgress_InformationTextColor: #1d2d3e;--sapProgress_Value_Background: #617b94;--sapProgress_Value_BorderColor: #617b94;--sapProgress_Value_TextColor: #788fa6;--sapProgress_Value_NegativeBackground: #f53232;--sapProgress_Value_NegativeBorderColor: #f53232;--sapProgress_Value_NegativeTextColor: #f53232;--sapProgress_Value_CriticalBackground: #e76500;--sapProgress_Value_CriticalBorderColor: #e76500;--sapProgress_Value_CriticalTextColor: #e76500;--sapProgress_Value_PositiveBackground: #30914c;--sapProgress_Value_PositiveBorderColor: #30914c;--sapProgress_Value_PositiveTextColor: #30914c;--sapProgress_Value_InformationBackground: #0070f2;--sapProgress_Value_InformationBorderColor: #0070f2;--sapProgress_Value_InformationTextColor: #0070f2;--sapScrollBar_FaceColor: #7b91a8;--sapScrollBar_TrackColor: #fff;--sapScrollBar_BorderColor: #7b91a8;--sapScrollBar_SymbolColor: #0064d9;--sapScrollBar_Dimension: .75rem;--sapScrollBar_Hover_FaceColor: #5b728b;--sapSlider_Background: #d5dadd;--sapSlider_BorderColor: #d5dadd;--sapSlider_Selected_Background: #0064d9;--sapSlider_Selected_BorderColor: #0064d9;--sapSlider_HandleBackground: #fff;--sapSlider_HandleBorderColor: #b0d5ff;--sapSlider_RangeHandleBackground: #fff;--sapSlider_Hover_HandleBackground: #d9ecff;--sapSlider_Hover_HandleBorderColor: #b0d5ff;--sapSlider_Hover_RangeHandleBackground: #d9ecff;--sapSlider_Active_HandleBackground: #fff;--sapSlider_Active_HandleBorderColor: #0064d9;--sapSlider_Active_RangeHandleBackground: transparent;--sapPageHeader_Background: #fff;--sapPageHeader_BorderColor: #d9d9d9;--sapPageHeader_TextColor: #1d2d3e;--sapPageFooter_Background: #fff;--sapPageFooter_BorderColor: #d9d9d9;--sapPageFooter_TextColor: #1d2d3e;--sapInfobar_Background: #c2fcee;--sapInfobar_Hover_Background: #fff;--sapInfobar_Active_Background: #fff;--sapInfobar_NonInteractive_Background: #f5f6f7;--sapInfobar_TextColor: #046c7a;--sapObjectHeader_Background: #fff;--sapObjectHeader_Hover_Background: #eaecee;--sapObjectHeader_BorderColor: #d9d9d9;--sapObjectHeader_Title_TextColor: #1d2d3e;--sapObjectHeader_Title_FontSize: 1.5rem;--sapObjectHeader_Title_SnappedFontSize: 1.25rem;--sapObjectHeader_Title_FontFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapObjectHeader_Subtitle_TextColor: #556b82;--sapBlockLayer_Background: #000;--sapTile_Background: #fff;--sapTile_Hover_Background: #eaecee;--sapTile_Active_Background: #dee2e5;--sapTile_BorderColor: transparent;--sapTile_BorderCornerRadius: 1rem;--sapTile_TitleTextColor: #1d2d3e;--sapTile_TextColor: #556b82;--sapTile_IconColor: #556b82;--sapTile_SeparatorColor: #ccc;--sapTile_Interactive_BorderColor: #b3b3b3;--sapTile_OverlayBackground: #fff;--sapTile_OverlayForegroundColor: #1d2d3e;--sapAccentColor1: #d27700;--sapAccentColor2: #aa0808;--sapAccentColor3: #ba066c;--sapAccentColor4: #a100c2;--sapAccentColor5: #5d36ff;--sapAccentColor6: #0057d2;--sapAccentColor7: #046c7a;--sapAccentColor8: #256f3a;--sapAccentColor9: #6c32a9;--sapAccentColor10: #5b738b;--sapAccentBackgroundColor1: #fff3b8;--sapAccentBackgroundColor2: #ffd0e7;--sapAccentBackgroundColor3: #ffdbe7;--sapAccentBackgroundColor4: #ffdcf3;--sapAccentBackgroundColor5: #ded3ff;--sapAccentBackgroundColor6: #d1efff;--sapAccentBackgroundColor7: #c2fcee;--sapAccentBackgroundColor8: #ebf5cb;--sapAccentBackgroundColor9: #ddccf0;--sapAccentBackgroundColor10: #eaecee;--sapIndicationColor_1: #840606;--sapIndicationColor_1_Background: #840606;--sapIndicationColor_1_BorderColor: #840606;--sapIndicationColor_1_TextColor: #fff;--sapIndicationColor_1_Hover_Background: #6c0505;--sapIndicationColor_1_Active_Background: #fff;--sapIndicationColor_1_Active_BorderColor: #fb9d9d;--sapIndicationColor_1_Active_TextColor: #840606;--sapIndicationColor_1_Selected_Background: #fff;--sapIndicationColor_1_Selected_BorderColor: #fb9d9d;--sapIndicationColor_1_Selected_TextColor: #840606;--sapIndicationColor_1b: #fb9d9d;--sapIndicationColor_1b_BorderColor: #fb9d9d;--sapIndicationColor_1b_Hover_Background: #fa8585;--sapIndicationColor_2: #aa0808;--sapIndicationColor_2_Background: #aa0808;--sapIndicationColor_2_BorderColor: #aa0808;--sapIndicationColor_2_TextColor: #fff;--sapIndicationColor_2_Hover_Background: #920707;--sapIndicationColor_2_Active_Background: #fff;--sapIndicationColor_2_Active_BorderColor: #fcc4c4;--sapIndicationColor_2_Active_TextColor: #aa0808;--sapIndicationColor_2_Selected_Background: #fff;--sapIndicationColor_2_Selected_BorderColor: #fcc4c4;--sapIndicationColor_2_Selected_TextColor: #aa0808;--sapIndicationColor_2b: #fcc4c4;--sapIndicationColor_2b_BorderColor: #fcc4c4;--sapIndicationColor_2b_Hover_Background: #fbacac;--sapIndicationColor_3: #b95100;--sapIndicationColor_3_Background: #e76500;--sapIndicationColor_3_BorderColor: #e76500;--sapIndicationColor_3_TextColor: #fff;--sapIndicationColor_3_Hover_Background: #d85e00;--sapIndicationColor_3_Active_Background: #fff;--sapIndicationColor_3_Active_BorderColor: #fff2c0;--sapIndicationColor_3_Active_TextColor: #b95100;--sapIndicationColor_3_Selected_Background: #fff;--sapIndicationColor_3_Selected_BorderColor: #fff2c0;--sapIndicationColor_3_Selected_TextColor: #b95100;--sapIndicationColor_3b: #fff2c0;--sapIndicationColor_3b_BorderColor: #fff2c0;--sapIndicationColor_3b_Hover_Background: #ffeda6;--sapIndicationColor_4: #256f3a;--sapIndicationColor_4_Background: #256f3a;--sapIndicationColor_4_BorderColor: #256f3a;--sapIndicationColor_4_TextColor: #fff;--sapIndicationColor_4_Hover_Background: #1f5c30;--sapIndicationColor_4_Active_Background: #fff;--sapIndicationColor_4_Active_BorderColor: #bae8bc;--sapIndicationColor_4_Active_TextColor: #256f3a;--sapIndicationColor_4_Selected_Background: #fff;--sapIndicationColor_4_Selected_BorderColor: #bae8bc;--sapIndicationColor_4_Selected_TextColor: #256f3a;--sapIndicationColor_4b: #bae8bc;--sapIndicationColor_4b_BorderColor: #bae8bc;--sapIndicationColor_4b_Hover_Background: #a7e2a9;--sapIndicationColor_5: #0070f2;--sapIndicationColor_5_Background: #0070f2;--sapIndicationColor_5_BorderColor: #0070f2;--sapIndicationColor_5_TextColor: #fff;--sapIndicationColor_5_Hover_Background: #0064d9;--sapIndicationColor_5_Active_Background: #fff;--sapIndicationColor_5_Active_BorderColor: #d3effd;--sapIndicationColor_5_Active_TextColor: #0070f2;--sapIndicationColor_5_Selected_Background: #fff;--sapIndicationColor_5_Selected_BorderColor: #d3effd;--sapIndicationColor_5_Selected_TextColor: #0070f2;--sapIndicationColor_5b: #d3effd;--sapIndicationColor_5b_BorderColor: #d3effd;--sapIndicationColor_5b_Hover_Background: #bbe6fc;--sapIndicationColor_6: #046c7a;--sapIndicationColor_6_Background: #046c7a;--sapIndicationColor_6_BorderColor: #046c7a;--sapIndicationColor_6_TextColor: #fff;--sapIndicationColor_6_Hover_Background: #035661;--sapIndicationColor_6_Active_Background: #fff;--sapIndicationColor_6_Active_BorderColor: #cdf5ec;--sapIndicationColor_6_Active_TextColor: #046c7a;--sapIndicationColor_6_Selected_Background: #fff;--sapIndicationColor_6_Selected_BorderColor: #cdf5ec;--sapIndicationColor_6_Selected_TextColor: #046c7a;--sapIndicationColor_6b: #cdf5ec;--sapIndicationColor_6b_BorderColor: #cdf5ec;--sapIndicationColor_6b_Hover_Background: #b8f1e4;--sapIndicationColor_7: #5d36ff;--sapIndicationColor_7_Background: #5d36ff;--sapIndicationColor_7_BorderColor: #5d36ff;--sapIndicationColor_7_TextColor: #fff;--sapIndicationColor_7_Hover_Background: #481cff;--sapIndicationColor_7_Active_Background: #fff;--sapIndicationColor_7_Active_BorderColor: #e2dbff;--sapIndicationColor_7_Active_TextColor: #5d36ff;--sapIndicationColor_7_Selected_Background: #fff;--sapIndicationColor_7_Selected_BorderColor: #e2dbff;--sapIndicationColor_7_Selected_TextColor: #5d36ff;--sapIndicationColor_7b: #e2dbff;--sapIndicationColor_7b_BorderColor: #e2dbff;--sapIndicationColor_7b_Hover_Background: #cdc2ff;--sapIndicationColor_8: #a100c2;--sapIndicationColor_8_Background: #a100c2;--sapIndicationColor_8_BorderColor: #a100c2;--sapIndicationColor_8_TextColor: #fff;--sapIndicationColor_8_Hover_Background: #8c00a9;--sapIndicationColor_8_Active_Background: #fff;--sapIndicationColor_8_Active_BorderColor: #f8d6ff;--sapIndicationColor_8_Active_TextColor: #a100c2;--sapIndicationColor_8_Selected_Background: #fff;--sapIndicationColor_8_Selected_BorderColor: #f8d6ff;--sapIndicationColor_8_Selected_TextColor: #a100c2;--sapIndicationColor_8b: #f8d6ff;--sapIndicationColor_8b_BorderColor: #f8d6ff;--sapIndicationColor_8b_Hover_Background: #f4bdff;--sapIndicationColor_9: #1d2d3e;--sapIndicationColor_9_Background: #1d2d3e;--sapIndicationColor_9_BorderColor: #1d2d3e;--sapIndicationColor_9_TextColor: #fff;--sapIndicationColor_9_Hover_Background: #15202d;--sapIndicationColor_9_Active_Background: #fff;--sapIndicationColor_9_Active_BorderColor: #d9d9d9;--sapIndicationColor_9_Active_TextColor: #1d2d3e;--sapIndicationColor_9_Selected_Background: #fff;--sapIndicationColor_9_Selected_BorderColor: #d9d9d9;--sapIndicationColor_9_Selected_TextColor: #1d2d3e;--sapIndicationColor_9b: #fff;--sapIndicationColor_9b_BorderColor: #d9d9d9;--sapIndicationColor_9b_Hover_Background: #f2f2f2;--sapIndicationColor_10: #45484a;--sapIndicationColor_10_Background: #83888b;--sapIndicationColor_10_BorderColor: #83888b;--sapIndicationColor_10_TextColor: #fff;--sapIndicationColor_10_Hover_Background: #767b7e;--sapIndicationColor_10_Active_Background: #fff;--sapIndicationColor_10_Active_BorderColor: #eaecee;--sapIndicationColor_10_Active_TextColor: #45484a;--sapIndicationColor_10_Selected_Background: #fff;--sapIndicationColor_10_Selected_BorderColor: #eaecee;--sapIndicationColor_10_Selected_TextColor: #45484a;--sapIndicationColor_10b: #eaecee;--sapIndicationColor_10b_BorderColor: #eaecee;--sapIndicationColor_10b_Hover_Background: #dcdfe3;--sapLegend_WorkingBackground: #fff;--sapLegend_NonWorkingBackground: #ebebeb;--sapLegend_CurrentDateTime: #a100c2;--sapLegendColor1: #c35500;--sapLegendColor2: #d23a0a;--sapLegendColor3: #df1278;--sapLegendColor4: #840606;--sapLegendColor5: #cc00dc;--sapLegendColor6: #0057d2;--sapLegendColor7: #07838f;--sapLegendColor8: #188918;--sapLegendColor9: #5b738b;--sapLegendColor10: #7800a4;--sapLegendColor11: #a93e00;--sapLegendColor12: #aa2608;--sapLegendColor13: #ba066c;--sapLegendColor14: #8d2a00;--sapLegendColor15: #4e247a;--sapLegendColor16: #002a86;--sapLegendColor17: #035663;--sapLegendColor18: #1e592f;--sapLegendColor19: #1a4796;--sapLegendColor20: #470ced;--sapLegendBackgroundColor1: #ffef9f;--sapLegendBackgroundColor2: #feeae1;--sapLegendBackgroundColor3: #fbf6f8;--sapLegendBackgroundColor4: #fbebeb;--sapLegendBackgroundColor5: #ffe5fe;--sapLegendBackgroundColor6: #d1efff;--sapLegendBackgroundColor7: #c2fcee;--sapLegendBackgroundColor8: #f5fae5;--sapLegendBackgroundColor9: #f5f6f7;--sapLegendBackgroundColor10: #fff0fa;--sapLegendBackgroundColor11: #fff8d6;--sapLegendBackgroundColor12: #fff6f6;--sapLegendBackgroundColor13: #f7ebef;--sapLegendBackgroundColor14: #f1ecd5;--sapLegendBackgroundColor15: #f0e7f8;--sapLegendBackgroundColor16: #ebf8ff;--sapLegendBackgroundColor17: #dafdf5;--sapLegendBackgroundColor18: #ebf5cb;--sapLegendBackgroundColor19: #fafdff;--sapLegendBackgroundColor20: #eceeff;--sapChart_Background: #fff;--sapChart_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapChart_ContrastShadowColor: #fff;--sapChart_ContrastLineColor: #fff;--sapChart_LineColor_1: #e1e6eb;--sapChart_LineColor_2: #768da4;--sapChart_LineColor_3: #000001;--sapChart_Choropleth_Background: #edf0f3;--sapChart_ChoroplethRegion_Background: #758ca4;--sapChart_ChoroplethRegion_BorderColor: #edf0f3;--sapChart_Data_TextColor: #000;--sapChart_Data_ContrastTextColor: #fff;--sapChart_Data_InteractiveColor: #000001;--sapChart_Data_Active_Background: #dee2e5;--sapChart_OrderedColor_1: #3278be;--sapChart_OrderedColor_2: #c87b00;--sapChart_OrderedColor_3: #75980b;--sapChart_OrderedColor_4: #df1278;--sapChart_OrderedColor_5: #8b47d7;--sapChart_OrderedColor_6: #049f9a;--sapChart_OrderedColor_7: #0070f2;--sapChart_OrderedColor_8: #cc00dc;--sapChart_OrderedColor_9: #798c77;--sapChart_OrderedColor_10: #da6c6c;--sapChart_OrderedColor_11: #5d36ff;--sapChart_OrderedColor_12: #a68a5b;--sapChart_Bad: #f53232;--sapChart_Critical: #e26300;--sapChart_Good: #30914c;--sapChart_Neutral: #758ca4;--sapChart_Sequence_1_Plus3: #84b8eb;--sapChart_Sequence_1_Plus3_TextColor: #000;--sapChart_Sequence_1_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus2: #468acd;--sapChart_Sequence_1_Plus2_TextColor: #000;--sapChart_Sequence_1_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus1: #3c8cdd;--sapChart_Sequence_1_Plus1_TextColor: #000;--sapChart_Sequence_1_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1: #3278be;--sapChart_Sequence_1_TextColor: #fff;--sapChart_Sequence_1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_BorderColor: #3278be;--sapChart_Sequence_1_Minus1: #31669c;--sapChart_Sequence_1_Minus1_TextColor: #fff;--sapChart_Sequence_1_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus2: #31669c;--sapChart_Sequence_1_Minus2_TextColor: #fff;--sapChart_Sequence_1_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus3: #204060;--sapChart_Sequence_1_Minus3_TextColor: #fff;--sapChart_Sequence_1_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus4: #19334e;--sapChart_Sequence_1_Minus4_TextColor: #fff;--sapChart_Sequence_1_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus5: #13263a;--sapChart_Sequence_1_Minus5_TextColor: #fff;--sapChart_Sequence_1_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Plus3: #efbf72;--sapChart_Sequence_2_Plus3_TextColor: #000;--sapChart_Sequence_2_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus2: #eaaa44;--sapChart_Sequence_2_Plus2_TextColor: #000;--sapChart_Sequence_2_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus1: #e29419;--sapChart_Sequence_2_Plus1_TextColor: #000;--sapChart_Sequence_2_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2: #c87b00;--sapChart_Sequence_2_TextColor: #000;--sapChart_Sequence_2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_BorderColor: #9f6200;--sapChart_Sequence_2_Minus1: #9f6200;--sapChart_Sequence_2_Minus1_TextColor: #fff;--sapChart_Sequence_2_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus2: #7c4c00;--sapChart_Sequence_2_Minus2_TextColor: #fff;--sapChart_Sequence_2_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus3: #623c00;--sapChart_Sequence_2_Minus3_TextColor: #fff;--sapChart_Sequence_2_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus4: #623c00;--sapChart_Sequence_2_Minus4_TextColor: #fff;--sapChart_Sequence_2_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus5: #2f1d00;--sapChart_Sequence_2_Minus5_TextColor: #fff;--sapChart_Sequence_2_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Plus3: #b9d369;--sapChart_Sequence_3_Plus3_TextColor: #000;--sapChart_Sequence_3_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus2: #a6c742;--sapChart_Sequence_3_Plus2_TextColor: #000;--sapChart_Sequence_3_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus1: #8fad33;--sapChart_Sequence_3_Plus1_TextColor: #000;--sapChart_Sequence_3_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3: #75980b;--sapChart_Sequence_3_TextColor: #000;--sapChart_Sequence_3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_BorderColor: #587208;--sapChart_Sequence_3_Minus1: #587208;--sapChart_Sequence_3_Minus1_TextColor: #fff;--sapChart_Sequence_3_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus2: #3e5106;--sapChart_Sequence_3_Minus2_TextColor: #fff;--sapChart_Sequence_3_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus3: #2c3904;--sapChart_Sequence_3_Minus3_TextColor: #fff;--sapChart_Sequence_3_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus4: #212b03;--sapChart_Sequence_3_Minus4_TextColor: #fff;--sapChart_Sequence_3_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus5: #161c02;--sapChart_Sequence_3_Minus5_TextColor: #fff;--sapChart_Sequence_3_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Plus3: #f473b3;--sapChart_Sequence_4_Plus3_TextColor: #000;--sapChart_Sequence_4_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus2: #f14d9e;--sapChart_Sequence_4_Plus2_TextColor: #000;--sapChart_Sequence_4_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus1: #ee278a;--sapChart_Sequence_4_Plus1_TextColor: #000;--sapChart_Sequence_4_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4: #df1278;--sapChart_Sequence_4_TextColor: #fff;--sapChart_Sequence_4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_BorderColor: #df1278;--sapChart_Sequence_4_Minus1: #b90f64;--sapChart_Sequence_4_Minus1_TextColor: #fff;--sapChart_Sequence_4_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus2: #930c4f;--sapChart_Sequence_4_Minus2_TextColor: #fff;--sapChart_Sequence_4_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus3: #770a40;--sapChart_Sequence_4_Minus3_TextColor: #fff;--sapChart_Sequence_4_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus4: #51072c;--sapChart_Sequence_4_Minus4_TextColor: #fff;--sapChart_Sequence_4_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus5: #3a051f;--sapChart_Sequence_4_Minus5_TextColor: #fff;--sapChart_Sequence_4_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Plus3: #d5bcf0;--sapChart_Sequence_5_Plus3_TextColor: #000;--sapChart_Sequence_5_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus2: #b994e0;--sapChart_Sequence_5_Plus2_TextColor: #000;--sapChart_Sequence_5_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus1: #a679d8;--sapChart_Sequence_5_Plus1_TextColor: #000;--sapChart_Sequence_5_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5: #8b47d7;--sapChart_Sequence_5_TextColor: #fff;--sapChart_Sequence_5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_BorderColor: #8b47d7;--sapChart_Sequence_5_Minus1: #7236b5;--sapChart_Sequence_5_Minus1_TextColor: #fff;--sapChart_Sequence_5_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus2: #5e2c96;--sapChart_Sequence_5_Minus2_TextColor: #fff;--sapChart_Sequence_5_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus3: #522682;--sapChart_Sequence_5_Minus3_TextColor: #fff;--sapChart_Sequence_5_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus4: #46216f;--sapChart_Sequence_5_Minus4_TextColor: #fff;--sapChart_Sequence_5_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus5: #341358;--sapChart_Sequence_5_Minus5_TextColor: #fff;--sapChart_Sequence_5_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Plus3: #64ede9;--sapChart_Sequence_6_Plus3_TextColor: #000;--sapChart_Sequence_6_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus2: #2ee0da;--sapChart_Sequence_6_Plus2_TextColor: #000;--sapChart_Sequence_6_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus1: #05c7c1;--sapChart_Sequence_6_Plus1_TextColor: #000;--sapChart_Sequence_6_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6: #049f9a;--sapChart_Sequence_6_TextColor: #000;--sapChart_Sequence_6_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_BorderColor: #05c7c1;--sapChart_Sequence_6_Minus1: #02837f;--sapChart_Sequence_6_Minus1_TextColor: #fff;--sapChart_Sequence_6_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus2: #006663;--sapChart_Sequence_6_Minus2_TextColor: #fff;--sapChart_Sequence_6_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus3: #00514f;--sapChart_Sequence_6_Minus3_TextColor: #fff;--sapChart_Sequence_6_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus4: #003d3b;--sapChart_Sequence_6_Minus4_TextColor: #fff;--sapChart_Sequence_6_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus5: #002322;--sapChart_Sequence_6_Minus5_TextColor: #fff;--sapChart_Sequence_6_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Plus3: #68aeff;--sapChart_Sequence_7_Plus3_TextColor: #000;--sapChart_Sequence_7_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus2: #4098ff;--sapChart_Sequence_7_Plus2_TextColor: #000;--sapChart_Sequence_7_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus1: #1c85ff;--sapChart_Sequence_7_Plus1_TextColor: #000;--sapChart_Sequence_7_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7: #0070f2;--sapChart_Sequence_7_TextColor: #fff;--sapChart_Sequence_7_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_BorderColor: #0070f2;--sapChart_Sequence_7_Minus1: #0062d3;--sapChart_Sequence_7_Minus1_TextColor: #fff;--sapChart_Sequence_7_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus2: #0054b5;--sapChart_Sequence_7_Minus2_TextColor: #fff;--sapChart_Sequence_7_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus3: #00418c;--sapChart_Sequence_7_Minus3_TextColor: #fff;--sapChart_Sequence_7_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus4: #00244f;--sapChart_Sequence_7_Minus4_TextColor: #fff;--sapChart_Sequence_7_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus5: #001b3a;--sapChart_Sequence_7_Minus5_TextColor: #fff;--sapChart_Sequence_7_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Plus3: #f462ff;--sapChart_Sequence_8_Plus3_TextColor: #000;--sapChart_Sequence_8_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus2: #f034ff;--sapChart_Sequence_8_Plus2_TextColor: #000;--sapChart_Sequence_8_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus1: #ed0bff;--sapChart_Sequence_8_Plus1_TextColor: #000;--sapChart_Sequence_8_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8: #cc00dc;--sapChart_Sequence_8_TextColor: #fff;--sapChart_Sequence_8_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_BorderColor: #cc00dc;--sapChart_Sequence_8_Minus1: #a600b3;--sapChart_Sequence_8_Minus1_TextColor: #fff;--sapChart_Sequence_8_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus2: #80008a;--sapChart_Sequence_8_Minus2_TextColor: #fff;--sapChart_Sequence_8_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus3: #6d0076;--sapChart_Sequence_8_Minus3_TextColor: #fff;--sapChart_Sequence_8_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus4: #56005d;--sapChart_Sequence_8_Minus4_TextColor: #fff;--sapChart_Sequence_8_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus5: #350039;--sapChart_Sequence_8_Minus5_TextColor: #fff;--sapChart_Sequence_8_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Plus3: #bdc6bc;--sapChart_Sequence_9_Plus3_TextColor: #000;--sapChart_Sequence_9_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus2: #b5bfb4;--sapChart_Sequence_9_Plus2_TextColor: #000;--sapChart_Sequence_9_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus1: #97a695;--sapChart_Sequence_9_Plus1_TextColor: #000;--sapChart_Sequence_9_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9: #798c77;--sapChart_Sequence_9_TextColor: #000;--sapChart_Sequence_9_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_BorderColor: #798c77;--sapChart_Sequence_9_Minus1: #667664;--sapChart_Sequence_9_Minus1_TextColor: #fff;--sapChart_Sequence_9_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus2: #536051;--sapChart_Sequence_9_Minus2_TextColor: #fff;--sapChart_Sequence_9_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus3: #404a3f;--sapChart_Sequence_9_Minus3_TextColor: #fff;--sapChart_Sequence_9_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus4: #2d342c;--sapChart_Sequence_9_Minus4_TextColor: #fff;--sapChart_Sequence_9_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus5: #1e231e;--sapChart_Sequence_9_Minus5_TextColor: #fff;--sapChart_Sequence_9_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Plus3: #f1c6c6;--sapChart_Sequence_10_Plus3_TextColor: #000;--sapChart_Sequence_10_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus2: #eaadad;--sapChart_Sequence_10_Plus2_TextColor: #000;--sapChart_Sequence_10_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus1: #e28d8d;--sapChart_Sequence_10_Plus1_TextColor: #000;--sapChart_Sequence_10_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10: #da6c6c;--sapChart_Sequence_10_TextColor: #000;--sapChart_Sequence_10_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_BorderColor: #b75757;--sapChart_Sequence_10_Minus1: #b75757;--sapChart_Sequence_10_Minus1_TextColor: #000;--sapChart_Sequence_10_Minus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Minus2: #9d4343;--sapChart_Sequence_10_Minus2_TextColor: #fff;--sapChart_Sequence_10_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus3: #803737;--sapChart_Sequence_10_Minus3_TextColor: #fff;--sapChart_Sequence_10_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus4: #672c2c;--sapChart_Sequence_10_Minus4_TextColor: #fff;--sapChart_Sequence_10_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus5: #562424;--sapChart_Sequence_10_Minus5_TextColor: #fff;--sapChart_Sequence_10_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Plus3: #c0b0ff;--sapChart_Sequence_11_Plus3_TextColor: #000;--sapChart_Sequence_11_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus2: #9b83ff;--sapChart_Sequence_11_Plus2_TextColor: #000;--sapChart_Sequence_11_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus1: #8669ff;--sapChart_Sequence_11_Plus1_TextColor: #000;--sapChart_Sequence_11_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11: #5d36ff;--sapChart_Sequence_11_TextColor: #fff;--sapChart_Sequence_11_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_BorderColor: #5d36ff;--sapChart_Sequence_11_Minus1: #4b25e7;--sapChart_Sequence_11_Minus1_TextColor: #fff;--sapChart_Sequence_11_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus2: #3a17cd;--sapChart_Sequence_11_Minus2_TextColor: #fff;--sapChart_Sequence_11_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus3: #2f13a8;--sapChart_Sequence_11_Minus3_TextColor: #fff;--sapChart_Sequence_11_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus4: #250f83;--sapChart_Sequence_11_Minus4_TextColor: #fff;--sapChart_Sequence_11_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus5: #2f13a8;--sapChart_Sequence_11_Minus5_TextColor: #fff;--sapChart_Sequence_11_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Plus3: #e4ddcf;--sapChart_Sequence_12_Plus3_TextColor: #000;--sapChart_Sequence_12_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus2: #dacebb;--sapChart_Sequence_12_Plus2_TextColor: #000;--sapChart_Sequence_12_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus1: #c4b293;--sapChart_Sequence_12_Plus1_TextColor: #000;--sapChart_Sequence_12_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12: #a68a5b;--sapChart_Sequence_12_TextColor: #000;--sapChart_Sequence_12_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_BorderColor: #a68a5b;--sapChart_Sequence_12_Minus1: #8c744c;--sapChart_Sequence_12_Minus1_TextColor: #fff;--sapChart_Sequence_12_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus2: #786441;--sapChart_Sequence_12_Minus2_TextColor: #fff;--sapChart_Sequence_12_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus3: #5e4e33;--sapChart_Sequence_12_Minus3_TextColor: #fff;--sapChart_Sequence_12_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus4: #433825;--sapChart_Sequence_12_Minus4_TextColor: #fff;--sapChart_Sequence_12_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus5: #30271a;--sapChart_Sequence_12_Minus5_TextColor: #fff;--sapChart_Sequence_12_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Plus3: #fdcece;--sapChart_Sequence_Bad_Plus3_TextColor: #000;--sapChart_Sequence_Bad_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus2: #fa9d9d;--sapChart_Sequence_Bad_Plus2_TextColor: #000;--sapChart_Sequence_Bad_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus1: #f86c6c;--sapChart_Sequence_Bad_Plus1_TextColor: #000;--sapChart_Sequence_Bad_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad: #f53232;--sapChart_Sequence_Bad_TextColor: #000;--sapChart_Sequence_Bad_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_BorderColor: #f53232;--sapChart_Sequence_Bad_Minus1: #d00a0a;--sapChart_Sequence_Bad_Minus1_TextColor: #fff;--sapChart_Sequence_Bad_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus2: #a90808;--sapChart_Sequence_Bad_Minus2_TextColor: #fff;--sapChart_Sequence_Bad_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus3: #830606;--sapChart_Sequence_Bad_Minus3_TextColor: #fff;--sapChart_Sequence_Bad_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus4: #570404;--sapChart_Sequence_Bad_Minus4_TextColor: #fff;--sapChart_Sequence_Bad_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus5: #320000;--sapChart_Sequence_Bad_Minus5_TextColor: #fff;--sapChart_Sequence_Bad_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Plus3: #ffb881;--sapChart_Sequence_Critical_Plus3_TextColor: #000;--sapChart_Sequence_Critical_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus2: #ff933f;--sapChart_Sequence_Critical_Plus2_TextColor: #000;--sapChart_Sequence_Critical_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus1: #ff760c;--sapChart_Sequence_Critical_Plus1_TextColor: #000;--sapChart_Sequence_Critical_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical: #e26300;--sapChart_Sequence_Critical_TextColor: #000;--sapChart_Sequence_Critical_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_BorderColor: #e26300;--sapChart_Sequence_Critical_Minus1: #c35600;--sapChart_Sequence_Critical_Minus1_TextColor: #fff;--sapChart_Sequence_Critical_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus2: #aa4a00;--sapChart_Sequence_Critical_Minus2_TextColor: #fff;--sapChart_Sequence_Critical_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus3: #903f00;--sapChart_Sequence_Critical_Minus3_TextColor: #fff;--sapChart_Sequence_Critical_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus4: #6d3000;--sapChart_Sequence_Critical_Minus4_TextColor: #fff;--sapChart_Sequence_Critical_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus5: #492000;--sapChart_Sequence_Critical_Minus5_TextColor: #fff;--sapChart_Sequence_Critical_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Plus3: #88d79f;--sapChart_Sequence_Good_Plus3_TextColor: #000;--sapChart_Sequence_Good_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus2: #56c776;--sapChart_Sequence_Good_Plus2_TextColor: #000;--sapChart_Sequence_Good_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus1: #3ab05c;--sapChart_Sequence_Good_Plus1_TextColor: #000;--sapChart_Sequence_Good_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good: #30914c;--sapChart_Sequence_Good_TextColor: #000;--sapChart_Sequence_Good_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_BorderColor: #30914c;--sapChart_Sequence_Good_Minus1: #287a40;--sapChart_Sequence_Good_Minus1_TextColor: #fff;--sapChart_Sequence_Good_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus2: #226736;--sapChart_Sequence_Good_Minus2_TextColor: #fff;--sapChart_Sequence_Good_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus3: #1c542c;--sapChart_Sequence_Good_Minus3_TextColor: #fff;--sapChart_Sequence_Good_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus4: #13391e;--sapChart_Sequence_Good_Minus4_TextColor: #fff;--sapChart_Sequence_Good_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus5: #0a1e10;--sapChart_Sequence_Good_Minus5_TextColor: #fff;--sapChart_Sequence_Good_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Plus3: #edf0f3;--sapChart_Sequence_Neutral_Plus3_TextColor: #000;--sapChart_Sequence_Neutral_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus2: #c2ccd7;--sapChart_Sequence_Neutral_Plus2_TextColor: #000;--sapChart_Sequence_Neutral_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus1: #9aabbc;--sapChart_Sequence_Neutral_Plus1_TextColor: #000;--sapChart_Sequence_Neutral_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral: #758ca4;--sapChart_Sequence_Neutral_TextColor: #000;--sapChart_Sequence_Neutral_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_BorderColor: #758ca4;--sapChart_Sequence_Neutral_Minus1: #5b728b;--sapChart_Sequence_Neutral_Minus1_TextColor: #fff;--sapChart_Sequence_Neutral_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus2: #495e74;--sapChart_Sequence_Neutral_Minus2_TextColor: #fff;--sapChart_Sequence_Neutral_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus3: #364a5f;--sapChart_Sequence_Neutral_Minus3_TextColor: #fff;--sapChart_Sequence_Neutral_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus4: #233649;--sapChart_Sequence_Neutral_Minus4_TextColor: #fff;--sapChart_Sequence_Neutral_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus5: #1a2633;--sapChart_Sequence_Neutral_Minus5_TextColor: #fff;--sapChart_Sequence_Neutral_Minus5_TextShadow: 0 0 .125rem #223548;}
`},Ir={packageName:"@ui5/webcomponents",fileName:"themes/sap_horizon/parameters-bundle.css.ts",content:`:root{--ui5-v2-4-0-avatar-hover-box-shadow-offset: 0px 0px 0px .0625rem;--ui5-v2-4-0-avatar-initials-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-border-radius-img-deduction: .0625rem;--_ui5-v2-4-0_avatar_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_focus_width: .0625rem;--_ui5-v2-4-0_avatar_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_overflow_button_focus_offset: .0625rem;--_ui5-v2-4-0_avatar_focus_offset: .1875rem;--ui5-v2-4-0-avatar-initials-border: .0625rem solid var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-border-radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_avatar_fontsize_XS: 1rem;--_ui5-v2-4-0_avatar_fontsize_S: 1.125rem;--_ui5-v2-4-0_avatar_fontsize_M: 1.5rem;--_ui5-v2-4-0_avatar_fontsize_L: 2.25rem;--_ui5-v2-4-0_avatar_fontsize_XL: 3rem;--ui5-v2-4-0-avatar-accent1: var(--sapAvatar_1_Background);--ui5-v2-4-0-avatar-accent2: var(--sapAvatar_2_Background);--ui5-v2-4-0-avatar-accent3: var(--sapAvatar_3_Background);--ui5-v2-4-0-avatar-accent4: var(--sapAvatar_4_Background);--ui5-v2-4-0-avatar-accent5: var(--sapAvatar_5_Background);--ui5-v2-4-0-avatar-accent6: var(--sapAvatar_6_Background);--ui5-v2-4-0-avatar-accent7: var(--sapAvatar_7_Background);--ui5-v2-4-0-avatar-accent8: var(--sapAvatar_8_Background);--ui5-v2-4-0-avatar-accent9: var(--sapAvatar_9_Background);--ui5-v2-4-0-avatar-accent10: var(--sapAvatar_10_Background);--ui5-v2-4-0-avatar-placeholder: var(--sapContent_ImagePlaceholderBackground);--ui5-v2-4-0-avatar-accent1-color: var(--sapAvatar_1_TextColor);--ui5-v2-4-0-avatar-accent2-color: var(--sapAvatar_2_TextColor);--ui5-v2-4-0-avatar-accent3-color: var(--sapAvatar_3_TextColor);--ui5-v2-4-0-avatar-accent4-color: var(--sapAvatar_4_TextColor);--ui5-v2-4-0-avatar-accent5-color: var(--sapAvatar_5_TextColor);--ui5-v2-4-0-avatar-accent6-color: var(--sapAvatar_6_TextColor);--ui5-v2-4-0-avatar-accent7-color: var(--sapAvatar_7_TextColor);--ui5-v2-4-0-avatar-accent8-color: var(--sapAvatar_8_TextColor);--ui5-v2-4-0-avatar-accent9-color: var(--sapAvatar_9_TextColor);--ui5-v2-4-0-avatar-accent10-color: var(--sapAvatar_10_TextColor);--ui5-v2-4-0-avatar-placeholder-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-accent1-border-color: var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-accent2-border-color: var(--sapAvatar_2_BorderColor);--ui5-v2-4-0-avatar-accent3-border-color: var(--sapAvatar_3_BorderColor);--ui5-v2-4-0-avatar-accent4-border-color: var(--sapAvatar_4_BorderColor);--ui5-v2-4-0-avatar-accent5-border-color: var(--sapAvatar_5_BorderColor);--ui5-v2-4-0-avatar-accent6-border-color: var(--sapAvatar_6_BorderColor);--ui5-v2-4-0-avatar-accent7-border-color: var(--sapAvatar_7_BorderColor);--ui5-v2-4-0-avatar-accent8-border-color: var(--sapAvatar_8_BorderColor);--ui5-v2-4-0-avatar-accent9-border-color: var(--sapAvatar_9_BorderColor);--ui5-v2-4-0-avatar-accent10-border-color: var(--sapAvatar_10_BorderColor);--ui5-v2-4-0-avatar-placeholder-border-color: var(--sapContent_ImagePlaceholderBackground);--_ui5-v2-4-0_avatar_icon_XS: var(--_ui5-v2-4-0_avatar_fontsize_XS);--_ui5-v2-4-0_avatar_icon_S: var(--_ui5-v2-4-0_avatar_fontsize_S);--_ui5-v2-4-0_avatar_icon_M: var(--_ui5-v2-4-0_avatar_fontsize_M);--_ui5-v2-4-0_avatar_icon_L: var(--_ui5-v2-4-0_avatar_fontsize_L);--_ui5-v2-4-0_avatar_icon_XL: var(--_ui5-v2-4-0_avatar_fontsize_XL);--_ui5-v2-4-0_avatar_group_button_focus_border: none;--_ui5-v2-4-0_avatar_group_focus_border_radius: .375rem;--_ui5-v2-4-0-tag-height: 1rem;--_ui5-v2-4-0-tag-icon-width: .75rem;--ui5-v2-4-0-tag-text-shadow: var(--sapContent_TextShadow);--ui5-v2-4-0-tag-contrast-text-shadow: var(--sapContent_ContrastTextShadow);--ui5-v2-4-0-tag-information-text-shadow: var(--ui5-v2-4-0-tag-text-shadow);--ui5-v2-4-0-tag-set2-color-scheme-1-color: var(--sapIndicationColor_1);--ui5-v2-4-0-tag-set2-color-scheme-1-background: var(--sapIndicationColor_1b);--ui5-v2-4-0-tag-set2-color-scheme-1-border: var(--sapIndicationColor_1b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-1-hover-background: var(--sapIndicationColor_1b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-color: var(--sapIndicationColor_1_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-1-active-background: var(--sapIndicationColor_1_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-border: var(--sapIndicationColor_1_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-color: var(--sapIndicationColor_2);--ui5-v2-4-0-tag-set2-color-scheme-2-background: var(--sapIndicationColor_2b);--ui5-v2-4-0-tag-set2-color-scheme-2-border: var(--sapIndicationColor_2b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-hover-background: var(--sapIndicationColor_2b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-color: var(--sapIndicationColor_2_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-2-active-background: var(--sapIndicationColor_2_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-border: var(--sapIndicationColor_2_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-color: var(--sapIndicationColor_3);--ui5-v2-4-0-tag-set2-color-scheme-3-background: var(--sapIndicationColor_3b);--ui5-v2-4-0-tag-set2-color-scheme-3-border: var(--sapIndicationColor_3b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-hover-background: var(--sapIndicationColor_3b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-color: var(--sapIndicationColor_3_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-3-active-background: var(--sapIndicationColor_3_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-border: var(--sapIndicationColor_3_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-color: var(--sapIndicationColor_4);--ui5-v2-4-0-tag-set2-color-scheme-4-background: var(--sapIndicationColor_4b);--ui5-v2-4-0-tag-set2-color-scheme-4-border: var(--sapIndicationColor_4b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-hover-background: var(--sapIndicationColor_4b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-color: var(--sapIndicationColor_4_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-4-active-background: var(--sapIndicationColor_4_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-border: var(--sapIndicationColor_4_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-color: var(--sapIndicationColor_5);--ui5-v2-4-0-tag-set2-color-scheme-5-background: var(--sapIndicationColor_5b);--ui5-v2-4-0-tag-set2-color-scheme-5-border: var(--sapIndicationColor_5b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-hover-background: var(--sapIndicationColor_5b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-color: var(--sapIndicationColor_5_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-5-active-background: var(--sapIndicationColor_5_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-border: var(--sapIndicationColor_5_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-color: var(--sapIndicationColor_6);--ui5-v2-4-0-tag-set2-color-scheme-6-background: var(--sapIndicationColor_6b);--ui5-v2-4-0-tag-set2-color-scheme-6-border: var(--sapIndicationColor_6b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-hover-background: var(--sapIndicationColor_6b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-color: var(--sapIndicationColor_6_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-6-active-background: var(--sapIndicationColor_6_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-border: var(--sapIndicationColor_6_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-color: var(--sapIndicationColor_7);--ui5-v2-4-0-tag-set2-color-scheme-7-background: var(--sapIndicationColor_7b);--ui5-v2-4-0-tag-set2-color-scheme-7-border: var(--sapIndicationColor_7b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-hover-background: var(--sapIndicationColor_7b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-color: var(--sapIndicationColor_7_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-7-active-background: var(--sapIndicationColor_7_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-border: var(--sapIndicationColor_7_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-color: var(--sapIndicationColor_8);--ui5-v2-4-0-tag-set2-color-scheme-8-background: var(--sapIndicationColor_8b);--ui5-v2-4-0-tag-set2-color-scheme-8-border: var(--sapIndicationColor_8b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-hover-background: var(--sapIndicationColor_8b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-color: var(--sapIndicationColor_8_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-8-active-background: var(--sapIndicationColor_8_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-border: var(--sapIndicationColor_8_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-9-color: var(--sapIndicationColor_9);--ui5-v2-4-0-tag-set2-color-scheme-9-background: var(--sapIndicationColor_9b);--ui5-v2-4-0-tag-set2-color-scheme-9-border: var(--sapIndicationColor_9b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-color: var(--sapIndicationColor_10);--ui5-v2-4-0-tag-set2-color-scheme-10-background: var(--sapIndicationColor_10b);--ui5-v2-4-0-tag-set2-color-scheme-10-border: var(--sapIndicationColor_10b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-hover-background: var(--sapIndicationColor_10b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-color: var(--sapIndicationColor_10_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-10-active-background: var(--sapIndicationColor_10_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-border: var(--sapIndicationColor_10_Active_BorderColor);--_ui5-v2-4-0-tag-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-min-width_size_l: 1.75rem;--_ui5-v2-4-0-tag-font-size_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_width_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_height_size_l:1.25rem;--_ui5-v2-4-0-tag-icon_height_size_l: 1.25rem;--_ui5-v2-4-0-tag-text_padding_size_l: .125rem .25rem;--_ui5-v2-4-0-tag-text-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-text-padding: .1875rem .25rem;--_ui5-v2-4-0-tag-padding-inline-icon-only: .313rem;--_ui5-v2-4-0-tag-text-transform: none;--_ui5-v2-4-0-tag-icon-gap: .25rem;--_ui5-v2-4-0-tag-font-size: var(--sapFontSize);--_ui5-v2-4-0-tag-font: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0-tag-font-weight: normal;--_ui5-v2-4-0-tag-letter-spacing: normal;--_ui5-v2-4-0_bar_base_height: 2.75rem;--_ui5-v2-4-0_bar_subheader_height: 3rem;--_ui5-v2-4-0_bar-start-container-padding-start: 2rem;--_ui5-v2-4-0_bar-mid-container-padding-start-end: .5rem;--_ui5-v2-4-0_bar-end-container-padding-end: 2rem;--_ui5-v2-4-0_bar-start-container-padding-start_S: 1rem;--_ui5-v2-4-0_bar-start-container-padding-start_XL: 3rem;--_ui5-v2-4-0_bar-end-container-padding-end_S: 1rem;--_ui5-v2-4-0_bar-end-container-padding-end_XL: 3rem;--_ui5-v2-4-0_bar_subheader_margin-top: -.0625rem;--_ui5-v2-4-0_breadcrumbs_margin: 0 0 .5rem 0;--_ui5-v2-4-0_busy_indicator_block_layer: color-mix(in oklch, transparent, var(--sapBlockLayer_Background) 20%);--_ui5-v2-4-0_busy_indicator_color: var(--sapContent_BusyColor);--_ui5-v2-4-0_busy_indicator_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0-calendar-legend-root-padding: .75rem;--_ui5-v2-4-0-calendar-legend-root-width: 18.5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: 0;--_ui5-v2-4-0-calendar-legend-item-root-width: 7.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border: var(--sapContent_FocusWidth) solid var(--sapContent_FocusColor);--_ui5-v2-4-0_card_box_shadow: var(--sapContent_Shadow0);--_ui5-v2-4-0_card_header_border_color: var(--sapTile_SeparatorColor);--_ui5-v2-4-0_card_header_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_card_header_focus_bottom_radius: 0px;--_ui5-v2-4-0_card_header_title_font_weight: normal;--_ui5-v2-4-0_card_header_subtitle_margin_top: .25rem;--_ui5-v2-4-0_card_hover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_card_header_focus_offset: 0px;--_ui5-v2-4-0_card_header_focus_radius: var(--_ui5-v2-4-0_card_border-radius);--_ui5-v2-4-0_card_header_title_font_family: var(--sapFontHeaderFamily);--_ui5-v2-4-0_card_header_title_font_size: var(--sapFontHeader6Size);--_ui5-v2-4-0_card_header_hover_bg: var(--sapTile_Hover_Background);--_ui5-v2-4-0_card_header_active_bg: var(--sapTile_Active_Background);--_ui5-v2-4-0_card_header_border: none;--_ui5-v2-4-0_card_border-radius: var(--sapTile_BorderCornerRadius);--_ui5-v2-4-0_card_header_padding: 1rem 1rem .75rem 1rem;--_ui5-v2-4-0_card_border: none;--ui5-v2-4-0_carousel_background_color_solid: var(--sapGroup_ContentBackground);--ui5-v2-4-0_carousel_background_color_translucent: var(--sapBackgroundColor);--ui5-v2-4-0_carousel_button_size: 2.5rem;--ui5-v2-4-0_carousel_inactive_dot_size: .25rem;--ui5-v2-4-0_carousel_inactive_dot_margin: 0 .375rem;--ui5-v2-4-0_carousel_inactive_dot_border: 1px solid var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_inactive_dot_background: var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_active_dot_border: 1px solid var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_active_dot_background: var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_navigation_button_active_box_shadow: none;--_ui5-v2-4-0_checkbox_box_shadow: none;--_ui5-v2-4-0_checkbox_transition: unset;--_ui5-v2-4-0_checkbox_focus_border: none;--_ui5-v2-4-0_checkbox_border_radius: 0;--_ui5-v2-4-0_checkbox_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_checkbox_outer_hover_background: transparent;--_ui5-v2-4-0_checkbox_inner_width_height: 1.375rem;--_ui5-v2-4-0_checkbox_inner_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_information_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_warning_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_error_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_success_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_default_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_background: var(--sapField_Background);--_ui5-v2-4-0_checkbox_wrapped_focus_padding: .375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_checkbox_compact_wrapper_padding: .5rem;--_ui5-v2-4-0_checkbox_compact_width_height: 2rem;--_ui5-v2-4-0_checkbox_compact_inner_size: 1rem;--_ui5-v2-4-0_checkbox_compact_focus_position: .375rem;--_ui5-v2-4-0_checkbox_label_offset: var(--_ui5-v2-4-0_checkbox_wrapper_padding);--_ui5-v2-4-0_checkbox_disabled_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_checkbox_default_focus_border: none;--_ui5-v2-4-0_checkbox_focus_outline_display: block;--_ui5-v2-4-0_checkbox_wrapper_padding: .6875rem;--_ui5-v2-4-0_checkbox_width_height: 2.75rem;--_ui5-v2-4-0_checkbox_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_checkbox_inner_border: solid var(--sapField_BorderWidth) var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_checkbox_checkmark_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_checkbox_hover_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_hover_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_selected_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_active_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_active_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_readonly_border: var(--sapElement_BorderWidth) var(--sapField_ReadOnly_BorderColor) dashed;--_ui5-v2-4-0_checkbox_inner_error_border: var(--sapField_InvalidBorderWidth) solid var(--sapField_InvalidColor);--_ui5-v2-4-0_checkbox_inner_error_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_warning_border: var(--sapField_WarningBorderWidth) solid var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_checkmark_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_success_border: var(--sapField_SuccessBorderWidth) solid var(--sapField_SuccessColor);--_ui5-v2-4-0_checkbox_inner_success_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_information_color: var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_border: var(--sapField_InformationBorderWidth) solid var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_checkbox_focus_position: .3125rem;--_ui5-v2-4-0_checkbox_focus_border_radius: .5rem;--_ui5-v2-4-0_checkbox_right_focus_distance: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_color-palette-item-after-focus-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-outer-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-inner-border-radius: .1875rem;--_ui5-v2-4-0_color-palette-item-after-not-focus-color: .0625rem solid var(--sapGroup_ContentBackground);--_ui5-v2-4-0_color-palette-item-container-sides-padding: .3125rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .6875rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1.5rem;--_ui5-v2-4-0_color-palette-item-container-padding: var(--_ui5-v2-4-0_color-palette-item-container-sides-padding) var(--_ui5-v2-4-0_color-palette-item-container-rows-padding);--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 9.5rem;--_ui5-v2-4-0_color-palette-button-height: 3rem;--_ui5-v2-4-0_color-palette-item-before-focus-color: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.3125rem;--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-color: .0625rem solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_color-palette-item-selected-focused-border-after: none;--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-before-focus-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-after-focus-border-radius: .3125rem;--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius: .375rem;--_ui5-v2-4-0_color-palette-item-selected-focused-border-before: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border: none;--_ui5-v2-4-0_color-palette-item-selected-focused-border: none;--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset: -.375rem -.375rem;--_ui5-v2-4-0-color-palette-item-mobile-focus-inset: 0px;--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border: none;--_ui5-v2-4-0_color_picker_circle_outer_border: .0625rem solid var(--sapContent_ContrastShadowColor);--_ui5-v2-4-0_color_picker_circle_inner_border: .0625rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_circle_inner_circle_size: .5625rem;--_ui5-v2-4-0_color_picker_slider_handle_box_shadow: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_border: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_hover: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_margin_top: -.1875rem;--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top: var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top);--_ui5-v2-4-0_color_picker_slider_container_margin_top: -11px;--_ui5-v2-4-0_color_picker_slider_handle_inline_focus: 1px solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_datepicker_icon_border: none;--_ui5-v2-4-0-datepicker-hover-background: var(--sapField_Hover_Background);--_ui5-v2-4-0-datepicker_border_radius: .25rem;--_ui5-v2-4-0-datepicker_icon_border_radius: .125rem;--_ui5-v2-4-0_daypicker_item_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_margin: 2px;--_ui5-v2-4-0_daypicker_item_border: none;--_ui5-v2-4-0_daypicker_item_selected_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_daynames_container_height: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_daypicker_item_othermonth_background_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_othermonth_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_othermonth_hover_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_now_inner_border_radius: 0;--_ui5-v2-4-0_daypicker_item_outline_width: 1px;--_ui5-v2-4-0_daypicker_item_outline_offset: 1px;--_ui5-v2-4-0_daypicker_item_now_focus_after_width: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_focus_after_height: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_selected_background: transparent;--_ui5-v2-4-0_daypicker_item_outline_focus_after: none;--_ui5-v2-4-0_daypicker_item_border_focus_after: var(--_ui5-v2-4-0_daypicker_item_outline_width) dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_width_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_height_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_outline: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset_focus_after: var(--_ui5-v2-4-0_daypicker_item_now_outline_offset);--_ui5-v2-4-0_daypicker_item_selected_between_hover_background: var(--sapList_Hover_SelectionBackground);--_ui5-v2-4-0_daypicker_item_now_not_selected_inset: 0;--_ui5-v2-4-0_daypicker_item_now_border_color: var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_border_radios: .25rem;--_ui5-v2-4-0_daypicker_special_day_top: 2.5rem;--_ui5-v2-4-0_daypicker_special_day_before_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_after_border_width: .125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_dot: .375rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.4375rem;--_ui5-v2-4-0_daypicker_item_border_radius: .4375rem;--_ui5-v2-4-0_daypicker_item_focus_border: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_border: .0625rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_not_selected_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_width: .125rem;--_ui5-v2-4-0_daypicker_item_no_selected_inset: .375rem;--_ui5-v2-4-0_daypicker_item_now_border_focus_after: .125rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_now_border_radius_focus_after: .3125rem;--_ui5-v2-4-0_day_picker_item_selected_now_border_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_day_picker_item_selected_now_border_radius_focus: .1875rem;--ui5-v2-4-0-dp-item_withsecondtype_border: .375rem;--_ui5-v2-4-0_daypicker_item_now_border: .125rem solid var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_daypicker_dayname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_weekname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_selected_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_selected_daytext_hover_background: transparent;--_ui5-v2-4-0_daypicker_item_border_radius_item: .5rem;--_ui5-v2-4-0_daypicker_item_border_radius_focus_after: .1875rem;--_ui5-v2-4-0_daypicker_item_selected_between_border: .5rem;--_ui5-v2-4-0_daypicker_item_selected_between_background: var(--sapList_SelectionBackgroundColor);--_ui5-v2-4-0_daypicker_item_selected_between_text_background: transparent;--_ui5-v2-4-0_daypicker_item_selected_between_text_font: var(--sapFontFamily);--_ui5-v2-4-0_daypicker_item_selected_text_font: var(--sapFontBoldFamily);--_ui5-v2-4-0_daypicker_item_now_box_shadow: inset 0 0 0 .35rem var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_selected_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_item_now_selected_outline_offset: -.25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_inset: .25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_border: .0625rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_now_selected_between_border_radius: .1875rem;--_ui5-v2-4-0_daypicker_item_select_between_border: 1px solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_weeekend_filter: brightness(105%);--_ui5-v2-4-0_daypicker_item_selected_hover: var(--sapList_Hover_Background);--_ui5-v2-4-0_daypicker_item_now_inset: .3125rem;--_ui5-v2-4-0-dp-item_withsecondtype_border: .25rem;--_ui5-v2-4-0_daypicker_item_selected__secondary_type_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_two_calendar_item_now_day_text_content: "";--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_width: .125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_radius: .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_focus_border_radius: .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_inset: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_now_border_radius_focus: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_focus_inset: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_select_focus_border_radius: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_inset: .125rem;--_ui5-v2-4-0_daypicker_selected_item_special_day_width: calc(100% - .125rem) ;--_ui5-v2-4-0_daypicker_special_day_border_bottom_radius: .5rem;--_ui5-v2-4-0-daypicker_item_selected_now_border_radius: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_width: calc(100% - .1875rem) ;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 2.4375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_border_radius: .25rem;--_ui5-v2-4-0_daypicker_item_now_focus_margin: 0;--_ui5-v2-4-0_daypicker_special_day_border_top: none;--_ui5-v2-4-0_daypicker_special_day_selected_border_radius_bottom: .25rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 2.125rem;--_ui5-v2-4-0_daypicker_specialday_focused_width: calc(100% - .75rem) ;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 2.3125rem;--_ui5-v2-4-0_daypicker_item_now_specialday_width: calc(100% - .5rem) ;--_ui5-v2-4-0_dialog_header_error_state_icon_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_dialog_header_information_state_icon_color: var(--sapInformativeElementColor);--_ui5-v2-4-0_dialog_header_success_state_icon_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_dialog_header_warning_state_icon_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_dialog_header_state_line_height: .0625rem;--_ui5-v2-4-0_dialog_header_focus_bottom_offset: 2px;--_ui5-v2-4-0_dialog_header_focus_top_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_left_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_right_offset: 1px;--_ui5-v2-4-0_dialog_header_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_file_uploader_value_state_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_file_uploader_hover_border: none;--_ui5-v2-4-0_table_cell_valign: center;--_ui5-v2-4-0_table_cell_min_width: 2.75rem;--_ui5-v2-4-0_table_navigated_cell_width: .1875rem;--_ui5-v2-4-0_table_shadow_border_left: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_top: inset 0 var(--sapContent_FocusWidth) var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_bottom: inset 0 -1px var(--sapContent_FocusColor);--ui5-v2-4-0-form-item-layout: 1fr 2fr;--ui5-v2-4-0-form-item-layout-span1: 1fr 11fr;--ui5-v2-4-0-form-item-layout-span2: 2fr 10fr;--ui5-v2-4-0-form-item-layout-span3: 3fr 9fr;--ui5-v2-4-0-form-item-layout-span4: 4fr 8fr;--ui5-v2-4-0-form-item-layout-span5: 5fr 7fr;--ui5-v2-4-0-form-item-layout-span6: 6fr 6fr;--ui5-v2-4-0-form-item-layout-span7: 7fr 5fr;--ui5-v2-4-0-form-item-layout-span8: 8fr 4fr;--ui5-v2-4-0-form-item-layout-span9: 9fr 3fr;--ui5-v2-4-0-form-item-layout-span10: 10fr 2fr;--ui5-v2-4-0-form-item-layout-span11: 11fr 1fr;--ui5-v2-4-0-form-item-layout-span12: 1fr;--ui5-v2-4-0-form-item-label-justify: end;--ui5-v2-4-0-form-item-label-justify-span12: start;--ui5-v2-4-0-form-item-label-padding: .125rem 0;--ui5-v2-4-0-form-item-label-padding-end: .85rem;--ui5-v2-4-0-form-item-label-padding-span12: .625rem .25rem 0 .25rem;--ui5-v2-4-0-group-header-listitem-background-color: var(--sapList_GroupHeaderBackground);--ui5-v2-4-0-icon-focus-border-radius: .25rem;--_ui5-v2-4-0_input_width: 13.125rem;--_ui5-v2-4-0_input_min_width: 2.75rem;--_ui5-v2-4-0_input_height: var(--sapElement_Height);--_ui5-v2-4-0_input_compact_height: 1.625rem;--_ui5-v2-4-0_input_value_state_error_hover_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_background_color: var(--sapField_Background);--_ui5-v2-4-0_input_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_input_placeholder_style: italic;--_ui5-v2-4-0_input_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_bottom_border_height: 0;--_ui5-v2-4-0_input_bottom_border_color: transparent;--_ui5-v2-4-0_input_focused_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_input_state_border_width: .125rem;--_ui5-v2-4-0_input_information_border_width: .125rem;--_ui5-v2-4-0_input_error_font_weight: normal;--_ui5-v2-4-0_input_warning_font_weight: normal;--_ui5-v2-4-0_input_focus_border_width: 1px;--_ui5-v2-4-0_input_error_warning_font_style: inherit;--_ui5-v2-4-0_input_error_warning_text_indent: 0;--_ui5-v2-4-0_input_disabled_color: var(--sapContent_DisabledTextColor);--_ui5-v2-4-0_input_disabled_font_weight: normal;--_ui5-v2-4-0_input_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0-input_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_input_readonly_border_color: var(--sapField_ReadOnly_BorderColor);--_ui5-v2-4-0_input_readonly_background: var(--sapField_ReadOnly_Background);--_ui5-v2-4-0_input_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_input_icon_min_width: 2.25rem;--_ui5-v2-4-0_input_compact_min_width: 2rem;--_ui5-v2-4-0_input_transition: none;--_ui5-v2-4-0-input-value-state-icon-display: none;--_ui5-v2-4-0_input_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focused_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_value_state_success_border_width: 1px;--_ui5-v2-4-0_input_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0_input_focused_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0-input-value-state-information-border-width: 1px;--_ui5-v2-4-0-input-background-image: none;--ui5-v2-4-0_input_focus_pseudo_element_content: "";--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0-input_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_icon_width: 2.25rem;--_ui5-v2-4-0-input-icons-count: 0;--_ui5-v2-4-0_input_margin_top_bottom: .1875rem;--_ui5-v2-4-0_input_tokenizer_min_width: 3.25rem;--_ui5-v2-4-0-input-border: none;--_ui5-v2-4-0_input_hover_border: none;--_ui5-v2-4-0_input_focus_border_radius: .25rem;--_ui5-v2-4-0_input_readonly_focus_border_radius: .125rem;--_ui5-v2-4-0_input_error_warning_border_style: none;--_ui5-v2-4-0_input_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focus_offset: 0;--_ui5-v2-4-0_input_readonly_focus_offset: .125rem;--_ui5-v2-4-0_input_information_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_custom_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_input_icon_wrapper_height: calc(100% - 1px) ;--_ui5-v2-4-0_input_icon_wrapper_state_height: calc(100% - 2px) ;--_ui5-v2-4-0_input_icon_wrapper_success_state_height: calc(100% - var(--_ui5-v2-4-0_input_value_state_success_border_width));--_ui5-v2-4-0_input_icon_color: var(--sapContent_IconColor);--_ui5-v2-4-0_input_icon_pressed_bg: var(--sapButton_Selected_Background);--_ui5-v2-4-0_input_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_icon_hover_bg: var(--sapField_Focus_Background);--_ui5-v2-4-0_input_icon_pressed_color: var(--sapButton_Active_TextColor);--_ui5-v2-4-0_input_icon_border_radius: .25rem;--_ui5-v2-4-0_input_icon_box_shadow: var(--sapField_Hover_Shadow);--_ui5-v2-4-0_input_icon_border: none;--_ui5-v2-4-0_input_error_icon_box_shadow: var(--sapContent_Negative_Shadow);--_ui5-v2-4-0_input_warning_icon_box_shadow: var(--sapContent_Critical_Shadow);--_ui5-v2-4-0_input_information_icon_box_shadow: var(--sapContent_Informative_Shadow);--_ui5-v2-4-0_input_success_icon_box_shadow: var(--sapContent_Positive_Shadow);--_ui5-v2-4-0_input_icon_error_pressed_color: var(--sapButton_Reject_Selected_TextColor);--_ui5-v2-4-0_input_icon_warning_pressed_color: var(--sapButton_Attention_Selected_TextColor);--_ui5-v2-4-0_input_icon_information_pressed_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_input_icon_success_pressed_color: var(--sapButton_Accept_Selected_TextColor);--_ui5-v2-4-0_link_focus_text_decoration: underline;--_ui5-v2-4-0_link_text_decoration: var(--sapLink_TextDecoration);--_ui5-v2-4-0_link_hover_text_decoration: var(--sapLink_Hover_TextDecoration);--_ui5-v2-4-0_link_focused_hover_text_decoration: none;--_ui5-v2-4-0_link_focused_hover_text_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_active_text_decoration: var(--sapLink_Active_TextDecoration);--_ui5-v2-4-0_link_outline: none;--_ui5-v2-4-0_link_focus_border-radius: .125rem;--_ui5-v2-4-0_link_focus_background_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_link_focus_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_subtle_text_decoration: underline;--_ui5-v2-4-0_link_subtle_text_decoration_hover: none;--ui5-v2-4-0_list_footer_text_color: var(--sapList_FooterTextColor);--ui5-v2-4-0-listitem-background-color: var(--sapList_Background);--ui5-v2-4-0-listitem-border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--ui5-v2-4-0-listitem-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--ui5-v2-4-0-listitem-focused-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_listitembase_focus_width: 1px;--_ui5-v2-4-0-listitembase_disabled_opacity: .5;--_ui5-v2-4-0_product_switch_item_border: none;--ui5-v2-4-0-listitem-active-border-color: var(--sapContent_FocusColor);--_ui5-v2-4-0_menu_item_padding: 0 1rem 0 .75rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: 1rem;--_ui5-v2-4-0_menu_item_additional_text_start_margin: 1rem;--_ui5-v2-4-0_menu_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_monthpicker_item_margin: .0625rem;--_ui5-v2-4-0_monthpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_monthpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_border_radius: .5rem;--_ui5-v2-4-0_message_strip_icon_width: 2.5rem;--_ui5-v2-4-0_message_strip_button_border_width: 0;--_ui5-v2-4-0_message_strip_button_border_style: none;--_ui5-v2-4-0_message_strip_button_border_color: transparent;--_ui5-v2-4-0_message_strip_button_border_radius: 0;--_ui5-v2-4-0_message_strip_padding: .4375rem 2.5rem .4375rem 2.5rem;--_ui5-v2-4-0_message_strip_padding_block_no_icon: .4375rem .4375rem;--_ui5-v2-4-0_message_strip_padding_inline_no_icon: 1rem 2.5rem;--_ui5-v2-4-0_message_strip_button_height: 1.625rem;--_ui5-v2-4-0_message_strip_border_width: 1px;--_ui5-v2-4-0_message_strip_close_button_border: none;--_ui5-v2-4-0_message_strip_icon_top: .4375rem;--_ui5-v2-4-0_message_strip_focus_width: 1px;--_ui5-v2-4-0_message_strip_focus_offset: -2px;--_ui5-v2-4-0_message_strip_close_button_top: .125rem;--_ui5-v2-4-0_message_strip_close_button_color_set_1_background: #eaecee4d;--_ui5-v2-4-0_message_strip_close_button_color_set_2_background: #eaecee80;--_ui5-v2-4-0_message_strip_close_button_color_set_1_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_close_button_color_set_1_hover_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_scheme_1_set_2_background: var(--sapIndicationColor_1b);--_ui5-v2-4-0_message_strip_scheme_1_set_2_border_color: var(--sapIndicationColor_1b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_2_set_2_background: var(--sapIndicationColor_2b);--_ui5-v2-4-0_message_strip_scheme_2_set_2_border_color: var(--sapIndicationColor_2b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_3_set_2_background: var(--sapIndicationColor_3b);--_ui5-v2-4-0_message_strip_scheme_3_set_2_border_color: var(--sapIndicationColor_3b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_4_set_2_background: var(--sapIndicationColor_4b);--_ui5-v2-4-0_message_strip_scheme_4_set_2_border_color: var(--sapIndicationColor_4b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_5_set_2_background: var(--sapIndicationColor_5b);--_ui5-v2-4-0_message_strip_scheme_5_set_2_border_color: var(--sapIndicationColor_5b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_6_set_2_background: var(--sapIndicationColor_6b);--_ui5-v2-4-0_message_strip_scheme_6_set_2_border_color: var(--sapIndicationColor_6b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_7_set_2_background: var(--sapIndicationColor_7b);--_ui5-v2-4-0_message_strip_scheme_7_set_2_border_color: var(--sapIndicationColor_7b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_8_set_2_background: var(--sapIndicationColor_8b);--_ui5-v2-4-0_message_strip_scheme_8_set_2_border_color: var(--sapIndicationColor_8b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_9_set_2_background: var(--sapIndicationColor_9b);--_ui5-v2-4-0_message_strip_scheme_9_set_2_border_color: var(--sapIndicationColor_9b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_10_set_2_background: var(--sapIndicationColor_10b);--_ui5-v2-4-0_message_strip_scheme_10_set_2_border_color: var(--sapIndicationColor_10b_BorderColor);--_ui5-v2-4-0_message_strip_close_button_right: .1875rem;--_ui5-v2-4-0_panel_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_panel_header_height: 2.75rem;--_ui5-v2-4-0_panel_button_root_width: 2.75rem;--_ui5-v2-4-0_panel_button_root_height: 2.75rem;--_ui5-v2-4-0_panel_header_padding_right: .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .25rem;--_ui5-v2-4-0_panel_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_panel_border_bottom: none;--_ui5-v2-4-0_panel_default_header_border: .0625rem solid var(--sapGroup_TitleBorderColor);--_ui5-v2-4-0_panel_outline_offset: -.125rem;--_ui5-v2-4-0_panel_border_radius_expanded: var(--sapElement_BorderCornerRadius) var(--sapElement_BorderCornerRadius) 0 0;--_ui5-v2-4-0_panel_icon_color: var(--sapButton_Lite_TextColor);--_ui5-v2-4-0_panel_focus_offset: 0px;--_ui5-v2-4-0_panel_focus_bottom_offset: -1px;--_ui5-v2-4-0_panel_content_padding: .625rem 1rem;--_ui5-v2-4-0_panel_header_background_color: var(--sapGroup_TitleBackground);--_ui5-v2-4-0_popover_background: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_popover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_popover_no_arrow_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_popup_content_padding_s: 1rem;--_ui5-v2-4-0_popup_content_padding_m_l: 2rem;--_ui5-v2-4-0_popup_content_padding_xl: 3rem;--_ui5-v2-4-0_popup_header_footer_padding_s: 1rem;--_ui5-v2-4-0_popup_header_footer_padding_m_l: 2rem;--_ui5-v2-4-0_popup_header_footer_padding_xl: 3rem;--_ui5-v2-4-0_popup_viewport_margin: 10px;--_ui5-v2-4-0_popup_header_font_weight: 400;--_ui5-v2-4-0_popup_header_prop_header_text_alignment: flex-start;--_ui5-v2-4-0_popup_header_background: var(--sapPageHeader_Background);--_ui5-v2-4-0_popup_header_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_popup_header_border: none;--_ui5-v2-4-0_popup_border_radius: .5rem;--_ui5-v2-4-0_popup_block_layer_background: var(--sapBlockLayer_Background);--_ui5-v2-4-0_popup_block_layer_opacity: .2;--_ui5-v2-4-0_progress_indicator_bar_border_max: none;--_ui5-v2-4-0_progress_indicator_icon_visibility: inline-block;--_ui5-v2-4-0_progress_indicator_side_points_visibility: block;--_ui5-v2-4-0_progress_indicator_padding: 1.25rem 0 .75rem 0;--_ui5-v2-4-0_progress_indicator_padding_novalue: .3125rem;--_ui5-v2-4-0_progress_indicator_padding_end: 1.25rem;--_ui5-v2-4-0_progress_indicator_host_height: unset;--_ui5-v2-4-0_progress_indicator_host_min_height: unset;--_ui5-v2-4-0_progress_indicator_host_box_sizing: border-box;--_ui5-v2-4-0_progress_indicator_root_position: relative;--_ui5-v2-4-0_progress_indicator_root_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_root_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_min_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_overflow: visible;--_ui5-v2-4-0_progress_indicator_bar_height: .625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_position: absolute;--_ui5-v2-4-0_progress_indicator_remaining_bar_width: 100%;--_ui5-v2-4-0_progress_indicator_remaining_bar_overflow: visible;--_ui5-v2-4-0_progress_indicator_icon_position: absolute;--_ui5-v2-4-0_progress_indicator_icon_right_position: -1.25rem;--_ui5-v2-4-0_progress_indicator_value_margin: 0 0 .1875rem 0;--_ui5-v2-4-0_progress_indicator_value_position: absolute;--_ui5-v2-4-0_progress_indicator_value_top_position: -1.3125rem;--_ui5-v2-4-0_progress_indicator_value_left_position: 0;--_ui5-v2-4-0_progress_indicator_background_none: var(--sapProgress_Background);--_ui5-v2-4-0_progress_indicator_background_error: var(--sapProgress_NegativeBackground);--_ui5-v2-4-0_progress_indicator_background_warning: var(--sapProgress_CriticalBackground);--_ui5-v2-4-0_progress_indicator_background_success: var(--sapProgress_PositiveBackground);--_ui5-v2-4-0_progress_indicator_background_information: var(--sapProgress_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_none: var(--sapProgress_Value_Background);--_ui5-v2-4-0_progress_indicator_value_state_error: var(--sapProgress_Value_NegativeBackground);--_ui5-v2-4-0_progress_indicator_value_state_warning: var(--sapProgress_Value_CriticalBackground);--_ui5-v2-4-0_progress_indicator_value_state_success: var(--sapProgress_Value_PositiveBackground);--_ui5-v2-4-0_progress_indicator_value_state_information: var(--sapProgress_Value_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_error_icon_color: var(--sapProgress_Value_NegativeTextColor);--_ui5-v2-4-0_progress_indicator_value_state_warning_icon_color: var(--sapProgress_Value_CriticalTextColor);--_ui5-v2-4-0_progress_indicator_value_state_success_icon_color: var(--sapProgress_Value_PositiveTextColor);--_ui5-v2-4-0_progress_indicator_value_state_information_icon_color: var(--sapProgress_Value_InformationTextColor);--_ui5-v2-4-0_progress_indicator_border: none;--_ui5-v2-4-0_progress_indicator_border_color_error: var(--sapErrorBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_warning: var(--sapWarningBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_success: var(--sapSuccessBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_information: var(--sapInformationBorderColor);--_ui5-v2-4-0_progress_indicator_color: var(--sapField_TextColor);--_ui5-v2-4-0_progress_indicator_bar_color: var(--sapProgress_TextColor);--_ui5-v2-4-0_progress_indicator_icon_size: var(--sapFontLargeSize);--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_rating_indicator_border_radius: .25rem;--_ui5-v2-4-0_rating_indicator_outline_offset: .125rem;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_spacing: .1875rem .1875rem;--_ui5-v2-4-0_segmented_btn_inner_border: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_border_odd_child: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_pressed_border_odd_child: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_segmented_btn_inner_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_segmented_btn_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_segmented_btn_border_color: var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_segmented_btn_hover_box_shadow: none;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_button_base_min_compact_width: 2rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Height);--_ui5-v2-4-0_button_compact_height: 1.625rem;--_ui5-v2-4-0_button_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_button_compact_padding: .4375rem;--_ui5-v2-4-0_button_emphasized_outline: 1px dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focus_offset: 1px;--_ui5-v2-4-0_button_focus_width: 1px;--_ui5-v2-4-0_button_emphasized_focused_border_before: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_emphasized_focused_active_border_color: transparent;--_ui5-v2-4-0_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focused_border_radius: .375rem;--_ui5-v2-4-0_button_focused_inner_border_radius: .375rem;--_ui5-v2-4-0_button_base_min_width: 2.25rem;--_ui5-v2-4-0_button_base_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_only_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_margin: .375rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_button_text_shadow: none;--_ui5-v2-4-0_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_button_pressed_focused_border_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_button_fontFamily: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_button_emphasized_focused_border_color: var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_radio_button_min_width: 2.75rem;--_ui5-v2-4-0_radio_button_hover_fill_error: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_warning: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_success: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_information: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_checked_fill: var(--sapSelectedColor);--_ui5-v2-4-0_radio_button_checked_error_fill: var(--sapField_InvalidColor);--_ui5-v2-4-0_radio_button_checked_success_fill: var(--sapField_SuccessColor);--_ui5-v2-4-0_radio_button_checked_information_fill: var(--sapField_InformationColor);--_ui5-v2-4-0_radio_button_warning_error_border_dash: 0;--_ui5-v2-4-0_radio_button_outer_ring_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_width: var(--sapField_BorderWidth);--_ui5-v2-4-0_radio_button_outer_ring_bg: var(--sapField_Background);--_ui5-v2-4-0_radio_button_outer_ring_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_active_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .6875rem;--_ui5-v2-4-0_radio_button_border: none;--_ui5-v2-4-0_radio_button_focus_outline: block;--_ui5-v2-4-0_radio_button_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_label_offset: 1px;--_ui5-v2-4-0_radio_button_items_align: unset;--_ui5-v2-4-0_radio_button_information_border_width: var(--sapField_InformationBorderWidth);--_ui5-v2-4-0_radio_button_border_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_radio_button_border_radius: .5rem;--_ui5-v2-4-0_radio_button_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_inner_ring_radius: 27.5%;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .6875rem;--_ui5-v2-4-0_radio_button_read_only_border_type: 4,2;--_ui5-v2-4-0_radio_button_inner_ring_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_radio_button_checked_warning_fill: var(--sapField_WarningColor);--_ui5-v2-4-0_radio_button_read_only_inner_ring_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_read_only_border_width: var(--sapElement_BorderWidth);--_ui5-v2-4-0_radio_button_hover_fill: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_radio_button_focus_dist: .375rem;--_ui5-v2-4-0_switch_height: 2.75rem;--_ui5-v2-4-0_switch_foucs_border_size: 1px;--_ui5-v2-4-0-switch-root-border-radius: 0;--_ui5-v2-4-0-switch-root-box-shadow: none;--_ui5-v2-4-0-switch-focus: "";--_ui5-v2-4-0_switch_track_border_radius: .75rem;--_ui5-v2-4-0-switch-track-border: 1px solid;--_ui5-v2-4-0_switch_track_transition: none;--_ui5-v2-4-0_switch_handle_border_radius: 1rem;--_ui5-v2-4-0-switch-handle-icon-display: none;--_ui5-v2-4-0-switch-slider-texts-display: inline;--_ui5-v2-4-0_switch_width: 3.5rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.875rem;--_ui5-v2-4-0_switch_focus_outline: none;--_ui5-v2-4-0_switch_root_after_outline: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_switch_root_after_boreder: none;--_ui5-v2-4-0_switch_root_after_boreder_radius: 1rem;--_ui5-v2-4-0_switch_root_outline_top: .5rem;--_ui5-v2-4-0_switch_root_outline_bottom: .5rem;--_ui5-v2-4-0_switch_root_outline_left: .375rem;--_ui5-v2-4-0_switch_root_outline_right: .375rem;--_ui5-v2-4-0_switch_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.625rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(-100%) translateX(1.625rem);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(-100%) translateX(1.875rem);--_ui5-v2-4-0_switch_track_width: 2.5rem;--_ui5-v2-4-0_switch_track_height: 1.5rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.875rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.5rem;--_ui5-v2-4-0_switch_track_active_background_color: var(--sapButton_Track_Selected_Background);--_ui5-v2-4-0_switch_track_inactive_background_color: var(--sapButton_Track_Background);--_ui5-v2-4-0_switch_track_hover_active_background_color: var(--sapButton_Track_Selected_Hover_Background);--_ui5-v2-4-0_switch_track_hover_inactive_background_color: var(--sapButton_Track_Hover_Background);--_ui5-v2-4-0_switch_track_active_border_color: var(--sapButton_Track_Selected_BorderColor);--_ui5-v2-4-0_switch_track_inactive_border_color: var(--sapButton_Track_BorderColor);--_ui5-v2-4-0_switch_track_hover_active_border_color: var(--sapButton_Track_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_track_hover_inactive_border_color: var(--sapButton_Track_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_accept_background_color: var(--sapButton_Track_Positive_Background);--_ui5-v2-4-0_switch_track_semantic_reject_background_color: var(--sapButton_Track_Negative_Background);--_ui5-v2-4-0_switch_track_semantic_hover_accept_background_color: var(--sapButton_Track_Positive_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_hover_reject_background_color: var(--sapButton_Track_Negative_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_accept_border_color: var(--sapButton_Track_Positive_BorderColor);--_ui5-v2-4-0_switch_track_semantic_reject_border_color: var(--sapButton_Track_Negative_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_accept_border_color: var(--sapButton_Track_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_reject_border_color: var(--sapButton_Track_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_track_icon_display: inline-block;--_ui5-v2-4-0_switch_handle_width: 1.5rem;--_ui5-v2-4-0_switch_handle_height: 1.25rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_border: var(--_ui5-v2-4-0_switch_handle_border_width) solid var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_border_width: .125rem;--_ui5-v2-4-0_switch_handle_active_background_color: var(--sapButton_Handle_Selected_Background);--_ui5-v2-4-0_switch_handle_inactive_background_color: var(--sapButton_Handle_Background);--_ui5-v2-4-0_switch_handle_hover_active_background_color: var(--sapButton_Handle_Selected_Hover_Background);--_ui5-v2-4-0_switch_handle_hover_inactive_background_color: var(--sapButton_Handle_Hover_Background);--_ui5-v2-4-0_switch_handle_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_hover_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_hover_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_accept_background_color: var(--sapButton_Handle_Positive_Background);--_ui5-v2-4-0_switch_handle_semantic_reject_background_color: var(--sapButton_Handle_Negative_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_background_color: var(--sapButton_Handle_Positive_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_background_color: var(--sapButton_Handle_Negative_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_left: .0625rem;--_ui5-v2-4-0_switch_text_font_family: var(--sapContent_IconFontFamily);--_ui5-v2-4-0_switch_text_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_switch_text_width: 1.25rem;--_ui5-v2-4-0_switch_text_with_label_font_family: "72-Condensed-Bold" , "72" , "72full" , Arial, Helvetica, sans-serif;--_ui5-v2-4-0_switch_text_with_label_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_switch_text_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_text_inactive_left: .1875rem;--_ui5-v2-4-0_switch_text_inactive_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_inactive_right: auto;--_ui5-v2-4-0_switch_text_inactive_right_alternate: 0;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_switch_text_active_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_active_right: auto;--_ui5-v2-4-0_switch_text_active_color: var(--sapButton_Handle_Selected_TextColor);--_ui5-v2-4-0_switch_text_inactive_color: var(--sapButton_Handle_TextColor);--_ui5-v2-4-0_switch_text_semantic_accept_color: var(--sapButton_Handle_Positive_TextColor);--_ui5-v2-4-0_switch_text_semantic_reject_color: var(--sapButton_Handle_Negative_TextColor);--_ui5-v2-4-0_switch_text_overflow: hidden;--_ui5-v2-4-0_switch_text_z_index: 1;--_ui5-v2-4-0_switch_text_hidden: hidden;--_ui5-v2-4-0_switch_text_min_width: none;--_ui5-v2-4-0_switch_icon_width: 1rem;--_ui5-v2-4-0_switch_icon_height: 1rem;--_ui5-v2-4-0_select_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_select_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_select_state_error_warning_border_style: solid;--_ui5-v2-4-0_select_state_error_warning_border_width: .125rem;--_ui5-v2-4-0_select_focus_width: 1px;--_ui5-v2-4-0_select_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_select_hover_icon_left_border: none;--_ui5-v2-4-0_select_option_focus_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_split_button_host_transparent_hover_background: transparent;--_ui5-v2-4-0_split_button_transparent_disabled_background: transparent;--_ui5-v2-4-0_split_button_host_default_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_host_attention_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_button_host_emphasized_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_button_host_positive_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_button_host_negative_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_button_host_transparent_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_split_text_button_border_color: transparent;--_ui5-v2-4-0_split_text_button_background_color: transparent;--_ui5-v2-4-0_split_text_button_emphasized_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_split_text_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_arrow_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_arrow_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_arrow_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_split_button_focused_border_radius: .375rem;--_ui5-v2-4-0_split_button_hover_border_radius: var(--_ui5-v2-4-0_button_border_radius);--_ui5-v2-4-0_split_button_middle_separator_width: 0;--_ui5-v2-4-0_split_button_middle_separator_left: -.0625rem;--_ui5-v2-4-0_split_button_middle_separator_hover_display: none;--_ui5-v2-4-0_split_button_text_button_width: 2.375rem;--_ui5-v2-4-0_split_button_text_button_right_border_width: .0625rem;--_ui5-v2-4-0_split_button_transparent_hover_background: var(--sapButton_Lite_Hover_Background);--_ui5-v2-4-0_split_button_transparent_hover_color: var(--sapButton_TextColor);--_ui5-v2-4-0_split_button_host_transparent_hover_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_inner_focused_border_radius_outer: .375rem;--_ui5-v2-4-0_split_button_inner_focused_border_radius_inner: .375rem;--_ui5-v2-4-0_split_button_emphasized_separator_color: transparent;--_ui5-v2-4-0_split_button_positive_separator_color: transparent;--_ui5-v2-4-0_split_button_negative_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color_default: var(--sapButton_Attention_TextColor);--_ui5-v2-4-0_split_text_button_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_right: none;--_ui5-v2-4-0_split_text_button_positive_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_middle_separator_hover_display_emphasized: none;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_header_height_text_only: var(--_ui5-v2-4-0_tc_item_text_only_height);--_ui5-v2-4-0_tc_header_height_text_with_additional_text: var(--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height);--_ui5-v2-4-0_tc_header_box_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_tc_header_background: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_header_background_translucent: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_content_background: var(--sapBackgroundColor);--_ui5-v2-4-0_tc_content_background_translucent: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_headeritem_padding: 1rem;--_ui5-v2-4-0_tc_headerItem_additional_text_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_tc_headerItem_text_selected_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_text_selected_hover_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_additional_text_font_weight: normal;--_ui5-v2-4-0_tc_headerItem_neutral_color: var(--sapNeutralTextColor);--_ui5-v2-4-0_tc_headerItem_positive_color: var(--sapPositiveTextColor);--_ui5-v2-4-0_tc_headerItem_negative_color: var(--sapNegativeTextColor);--_ui5-v2-4-0_tc_headerItem_critical_color: var(--sapCriticalTextColor);--_ui5-v2-4-0_tc_headerItem_neutral_border_color: var(--sapNeutralElementColor);--_ui5-v2-4-0_tc_headerItem_positive_border_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_tc_headerItem_negative_border_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_tc_headerItem_critical_border_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_tc_headerItem_neutral_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_neutral_color);--_ui5-v2-4-0_tc_headerItem_positive_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_positive_color);--_ui5-v2-4-0_tc_headerItem_negative_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_negative_color);--_ui5-v2-4-0_tc_headerItem_critical_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_critical_color);--_ui5-v2-4-0_tc_headerItem_transition: none;--_ui5-v2-4-0_tc_headerItem_hover_border_visibility: hidden;--_ui5-v2-4-0_tc_headerItemContent_border_radius: .125rem .125rem 0 0;--_ui5-v2-4-0_tc_headerItemContent_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_neutral_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_positive_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_negative_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_critical_border_bg: transparent;--_ui5-v2-4-0_tc_headerItemContent_border_height: 0;--_ui5-v2-4-0_tc_headerItemContent_focus_offset: 1rem;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_left: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_right: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_top: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_bottom: 0px;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_left: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_right: .625rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_top: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_bottom: .75rem;--_ui5-v2-4-0_tc_headerItemContent_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_default_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_focus_border_radius: 0;--_ui5-v2-4-0_tc_headerItemSemanticIcon_display: none;--_ui5-v2-4-0_tc_headerItemSemanticIcon_size: .75rem;--_ui5-v2-4-0_tc_mixedMode_itemText_font_family: var(--sapFontFamily);--_ui5-v2-4-0_tc_mixedMode_itemText_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_tc_mixedMode_itemText_font_weight: normal;--_ui5-v2-4-0_tc_overflowItem_positive_color: var(--sapPositiveColor);--_ui5-v2-4-0_tc_overflowItem_negative_color: var(--sapNegativeColor);--_ui5-v2-4-0_tc_overflowItem_critical_color: var(--sapCriticalColor);--_ui5-v2-4-0_tc_overflowItem_focus_offset: .125rem;--_ui5-v2-4-0_tc_overflowItem_extraIndent: 0rem;--_ui5-v2-4-0_tc_headerItemIcon_positive_selected_background: var(--sapPositiveColor);--_ui5-v2-4-0_tc_headerItemIcon_negative_selected_background: var(--sapNegativeColor);--_ui5-v2-4-0_tc_headerItemIcon_critical_selected_background: var(--sapCriticalColor);--_ui5-v2-4-0_tc_headerItemIcon_neutral_selected_background: var(--sapNeutralColor);--_ui5-v2-4-0_tc_headerItemIcon_semantic_selected_color: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_header_border_bottom: .0625rem solid var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_headerItemContent_border_bottom: .1875rem solid var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_default_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_current_color: CurrentColor;--_ui5-v2-4-0_tc_content_border_bottom: .0625rem solid var(--sapObjectHeader_BorderColor);--_ui5-v2-4-0_tc_headerItem_expand_button_margin_inline_start: 0rem;--_ui5-v2-4-0_tc_headerItem_single_click_expand_button_margin_inline_start: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_border_radius: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_separator_display: inline-block;--_ui5-v2-4-0_tc_headerItem_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_tc_headerItem_focus_border_offset: -5px;--_ui5-v2-4-0_tc_headerItemIcon_focus_border_radius: 50%;--_ui5-v2-4-0_tc_headerItem_focus_border_radius: .375rem;--_ui5-v2-4-0_tc_headeritem_text_font_weight: bold;--_ui5-v2-4-0_tc_headerItem_focus_offset: 1px;--_ui5-v2-4-0_tc_headerItem_text_hover_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_border: .125rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_selected_background: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_background_color: var(--sapContent_Selected_Background);--_ui5-v2-4-0_tc_headerItemIcon_selected_color: var(--sapContent_ContrastIconColor);--_ui5-v2-4-0_tc_mixedMode_itemText_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflow_text_color: var(--sapTextColor);--_ui5-v2-4-0_text_max_lines: initial;--_ui5-v2-4-0_textarea_state_border_width: .125rem;--_ui5-v2-4-0_textarea_information_border_width: .125rem;--_ui5-v2-4-0_textarea_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0_textarea_error_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_textarea_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_disabled_opacity: .4;--_ui5-v2-4-0_textarea_focus_pseudo_element_content: "";--_ui5-v2-4-0_textarea_min_height: 2.25rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .5625rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .4375rem;--_ui5-v2-4-0_textarea_exceeded_text_height: 1rem;--_ui5-v2-4-0_textarea_hover_border: none;--_ui5-v2-4-0_textarea_focus_border_radius: .25rem;--_ui5-v2-4-0_textarea_error_warning_border_style: none;--_ui5-v2-4-0_textarea_line_height: 1.5;--_ui5-v2-4-0_textarea_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_textarea_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_textarea_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_textarea_focus_offset: 0;--_ui5-v2-4-0_textarea_readonly_focus_offset: 1px;--_ui5-v2-4-0_textarea_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_textarea_value_state_focus_offset: 1px;--_ui5-v2-4-0_textarea_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_success_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_warning_error_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_information_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .375rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .4375rem;--_ui5-v2-4-0_textarea_padding_top_information: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .4375rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .625rem;--_ui5-v2-4-0_textarea_readonly_border_style: dashed;--_ui5-v2-4-0_time_picker_border: .0625rem solid transparent;--_ui5-v2-4-0-time_picker_border_radius: .25rem;--_ui5-v2-4-0_toast_vertical_offset: 3rem;--_ui5-v2-4-0_toast_horizontal_offset: 2rem;--_ui5-v2-4-0_toast_background: var(--sapList_Background);--_ui5-v2-4-0_toast_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_toast_offset_width: -.1875rem;--_ui5-v2-4-0_toggle_button_pressed_focussed: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_pressed_focussed_hovered: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_selected_positive_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_negative_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_attention_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_emphasized_pressed_focussed_hovered: var(--sapContent_FocusColor);--_ui5-v2-4-0_toggle_button_emphasized_text_shadow: none;--_ui5-v2-4-0_yearpicker_item_margin: .0625rem;--_ui5-v2-4-0_yearpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_yearpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_width: 6.25rem;--_ui5-v2-4-0_calendar_header_middle_button_flex: 1 1 auto;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_display: block;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_top_offset: .125rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_left_offset: .125rem;--_ui5-v2-4-0_calendar_header_arrow_button_border: none;--_ui5-v2-4-0_calendar_header_arrow_button_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_button_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_calendar_header_arrow_button_box_shadow: 0 0 .125rem 0 rgb(85 107 130 / 72%);--_ui5-v2-4-0_calendar_header_middle_button_focus_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_background: transparent;--_ui5-v2-4-0_calendar_header_middle_button_focus_outline: .125rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_background: transparent;--_ui5-v2-4-0_token_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_token_right_margin: .3125rem;--_ui5-v2-4-0_token_padding: .25rem 0;--_ui5-v2-4-0_token_left_padding: .3125rem;--_ui5-v2-4-0_token_focused_selected_border: 1px solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_focus_offset: -.25rem;--_ui5-v2-4-0_token_focus_outline_width: .0625rem;--_ui5-v2-4-0_token_hover_border_color: var(--sapButton_TokenBorderColor);--_ui5-v2-4-0_token_selected_focus_outline: none;--_ui5-v2-4-0_token_focus_outline: none;--_ui5-v2-4-0_token_outline_offset: .125rem;--_ui5-v2-4-0_token_selected_hover_border_color: var(--sapButton_Selected_BorderColor);--ui5-v2-4-0_token_focus_pseudo_element_content: "";--_ui5-v2-4-0_token_border_radius: .375rem;--_ui5-v2-4-0_token_focus_outline_border_radius: .5rem;--_ui5-v2-4-0_token_text_color: var(--sapTextColor);--_ui5-v2-4-0_token_selected_text_font_family: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_token_selected_internal_border_bottom: .125rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_selected_internal_border_bottom_radius: .1875rem;--_ui5-v2-4-0_token_text_icon_top: .0625rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.375rem;--_ui5-v2-4-0_token_readonly_padding: .25rem .3125rem;--_ui5-v2-4-0_tokenizer-popover_offset: .3125rem;--_ui5-v2-4-0_tokenizer_n_more_text_color: var(--sapLinkColor);--_ui5-v2-4-0-multi_combobox_token_margin_top: 1px;--_ui5-v2-4-0_slider_progress_container_dot_background: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_progress_border: none;--_ui5-v2-4-0_slider_padding: 1.406rem 1.0625rem;--_ui5-v2-4-0_slider_inner_height: .25rem;--_ui5-v2-4-0_slider_outer_height: 1.6875rem;--_ui5-v2-4-0_slider_progress_border_radius: .25rem;--_ui5-v2-4-0_slider_tickmark_bg: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_handle_margin_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2));--_ui5-v2-4-0_slider_handle_outline_offset: .075rem;--_ui5-v2-4-0_slider_progress_outline: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_progress_outline_offset: -.8125rem;--_ui5-v2-4-0_slider_disabled_opacity: .4;--_ui5-v2-4-0_slider_tooltip_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_range_slider_handle_background_focus: transparent;--_ui5-v2-4-0_slider_progress_box_sizing: content-box;--_ui5-v2-4-0_range_slider_focus_outline_width: 100%;--_ui5-v2-4-0_slider_progress_outline_offset_left: 0;--_ui5-v2-4-0_range_slider_focus_outline_radius: 0;--_ui5-v2-4-0_slider_progress_container_top: 0;--_ui5-v2-4-0_slider_progress_height: 100%;--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_active_progress_left: 0;--_ui5-v2-4-0_slider_active_progress_top: 0;--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top: var(--_ui5-v2-4-0_slider_progress_container_top);--_ui5-v2-4-0_slider_no_tickmarks_progress_height: var(--_ui5-v2-4-0_slider_progress_height);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border: var(--_ui5-v2-4-0_slider_active_progress_border);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left: var(--_ui5-v2-4-0_slider_active_progress_left);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top: var(--_ui5-v2-4-0_slider_active_progress_top);--_ui5-v2-4-0_slider_handle_focus_visibility: none;--_ui5-v2-4-0_slider_handle_icon_size: 1rem;--_ui5-v2-4-0_slider_progress_container_background: var(--sapSlider_Background);--_ui5-v2-4-0_slider_progress_container_dot_display: block;--_ui5-v2-4-0_slider_inner_min_width: 4rem;--_ui5-v2-4-0_slider_progress_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_before_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_after_background: var(--sapContent_MeasureIndicatorColor);--_ui5-v2-4-0_slider_handle_background: var(--sapSlider_HandleBackground);--_ui5-v2-4-0_slider_handle_icon_display: inline-block;--_ui5-v2-4-0_slider_handle_border: .0625rem solid var(--sapSlider_HandleBorderColor);--_ui5-v2-4-0_slider_handle_border_radius: .5rem;--_ui5-v2-4-0_slider_handle_height: 1.5rem;--_ui5-v2-4-0_slider_handle_width: 2rem;--_ui5-v2-4-0_slider_handle_top: -.625rem;--_ui5-v2-4-0_slider_handle_font_family: "SAP-icons";--_ui5-v2-4-0_slider_handle_hover_border: .0625rem solid var(--sapSlider_Hover_HandleBorderColor);--_ui5-v2-4-0_slider_handle_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_handle_background_focus: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_slider_handle_outline: none;--_ui5-v2-4-0_slider_handle_hover_background: var(--sapSlider_Hover_HandleBackground);--_ui5-v2-4-0_slider_tooltip_background: var(--sapField_Focus_Background);--_ui5-v2-4-0_slider_tooltip_border: none;--_ui5-v2-4-0_slider_tooltip_border_radius: .5rem;--_ui5-v2-4-0_slider_tooltip_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_range_slider_legacy_progress_focus_display: none;--_ui5-v2-4-0_range_slider_progress_focus_display: block;--_ui5-v2-4-0_slider_tickmark_in_range_bg: var(--sapSlider_Selected_BorderColor);--_ui5-v2-4-0_slider_label_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_min_width: 2rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_tooltip_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_tooltip_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_slider_handle_focus_width: 1px;--_ui5-v2-4-0_slider_start_end_point_size: .5rem;--_ui5-v2-4-0_slider_start_end_point_left: -.75rem;--_ui5-v2-4-0_slider_start_end_point_top: -.125rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_slider_tooltip_border_box: border-box;--_ui5-v2-4-0_range_slider_handle_active_background: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_range_slider_active_handle_icon_display: none;--_ui5-v2-4-0_range_slider_progress_focus_top: -15px;--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_range_slider_progress_focus_padding: 0 1rem 0 1rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_root_hover_handle_icon_display: inline-block;--_ui5-v2-4-0_range_slider_root_hover_handle_bg: var(--_ui5-v2-4-0_slider_handle_hover_background);--_ui5-v2-4-0_range_slider_root_active_handle_icon_display: none;--_ui5-v2-4-0_slider_tickmark_height: .5rem;--_ui5-v2-4-0_slider_tickmark_top: -2px;--_ui5-v2-4-0_slider_handle_box_sizing: border-box;--_ui5-v2-4-0_range_slider_handle_background: var(--sapSlider_RangeHandleBackground);--_ui5-v2-4-0_slider_tooltip_bottom: 2rem;--_ui5-v2-4-0_value_state_message_border: none;--_ui5-v2-4-0_value_state_header_border: none;--_ui5-v2-4-0_input_value_state_icon_offset: .5rem;--_ui5-v2-4-0_value_state_header_box_shadow_error: inset 0 -.0625rem var(--sapField_InvalidColor);--_ui5-v2-4-0_value_state_header_box_shadow_information: inset 0 -.0625rem var(--sapField_InformationColor);--_ui5-v2-4-0_value_state_header_box_shadow_success: inset 0 -.0625rem var(--sapField_SuccessColor);--_ui5-v2-4-0_value_state_header_box_shadow_warning: inset 0 -.0625rem var(--sapField_WarningColor);--_ui5-v2-4-0_value_state_message_icon_offset_phone: 1rem;--_ui5-v2-4-0_value_state_header_border_bottom: none;--_ui5-v2-4-0_input_value_state_icon_display: inline-block;--_ui5-v2-4-0_value_state_message_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_header_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_message_popover_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_value_state_message_icon_width: 1rem;--_ui5-v2-4-0_value_state_message_icon_height: 1rem;--_ui5-v2-4-0_value_state_header_offset: -.25rem;--_ui5-v2-4-0_value_state_message_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_value_state_message_padding_phone: .5rem .5rem .5rem 2.375rem;--_ui5-v2-4-0_value_state_message_line_height: 1.125rem;--_ui5-v2-4-0-toolbar-padding-left: .5rem;--_ui5-v2-4-0-toolbar-padding-right: .5rem;--_ui5-v2-4-0-toolbar-item-margin-left: 0;--_ui5-v2-4-0-toolbar-item-margin-right: .25rem;--_ui5-v2-4-0_step_input_min_width: 7.25rem;--_ui5-v2-4-0_step_input_padding: 2.5rem;--_ui5-v2-4-0_step_input_input_error_background_color: inherit;--_ui5-v2-4-0-step_input_button_state_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_step_input_border_style: none;--_ui5-v2-4-0_step_input_border_style_hover: none;--_ui5-v2-4-0_step_input_button_background_color: transparent;--_ui5-v2-4-0_step_input_input_border: none;--_ui5-v2-4-0_step_input_input_margin_top: 0;--_ui5-v2-4-0_step_input_button_display: inline-flex;--_ui5-v2-4-0_step_input_button_left: 0;--_ui5-v2-4-0_step_input_button_right: 0;--_ui5-v2-4-0_step_input_input_border_focused_after: .125rem solid #0070f2;--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after: 0;--_ui5-v2-4-0_step_input_input_border_radius_focused_after: .25rem;--_ui5-v2-4-0_step_input_input_information_border_color_focused_after: var(--sapField_InformationColor);--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after: var(--sapField_WarningColor);--_ui5-v2-4-0_step_input_input_success_border_color_focused_after: var(--sapField_SuccessColor);--_ui5-v2-4-0_step_input_input_error_border_color_focused_after: var(--sapField_InvalidColor);--_ui5-v2-4-0_step_input_disabled_button_background: none;--_ui5-v2-4-0_step_input_border_color_hover: none;--_ui5-v2-4-0_step_input_border_hover: none;--_ui5-v2-4-0_input_input_background_color: transparent;--_ui5-v2-4-0_load_more_padding: 0;--_ui5-v2-4-0_load_more_border: 1px top solid transparent;--_ui5-v2-4-0_load_more_border_radius: none;--_ui5-v2-4-0_load_more_outline_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_load_more_border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--_ui5-v2-4-0_calendar_height: 24.5rem;--_ui5-v2-4-0_calendar_width: 20rem;--_ui5-v2-4-0_calendar_padding: 1rem;--_ui5-v2-4-0_calendar_left_right_padding: .5rem;--_ui5-v2-4-0_calendar_top_bottom_padding: 1rem;--_ui5-v2-4-0_calendar_header_height: 3rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2.5rem;--_ui5-v2-4-0_calendar_header_padding: .25rem 0;--_ui5-v2-4-0_checkbox_root_side_padding: .6875rem;--_ui5-v2-4-0_checkbox_icon_size: 1rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .75rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2.75rem;--_ui5-v2-4-0_day_picker_item_width: 2.25rem;--_ui5-v2-4-0_day_picker_item_height: 2.875rem;--_ui5-v2-4-0_day_picker_empty_height: 3rem;--_ui5-v2-4-0_day_picker_item_justify_content: space-between;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1.8125rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .4375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-offset: -.125rem;--_ui5-v2-4-0-calendar-legend-item-box-margin: .25rem;--_ui5-v2-4-0-calendar-legend-item-box-inner-margin: .5rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .3125rem .6875rem;--_ui5-v2-4-0_datetime_picker_width: 40.0625rem;--_ui5-v2-4-0_datetime_picker_height: 25rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 19.5rem;--_ui5-v2-4-0_datetime_timeview_padding: 1rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 24.5rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 0;--_ui5-v2-4-0_dialog_content_min_height: 2.75rem;--_ui5-v2-4-0_dialog_footer_height: 2.75rem;--_ui5-v2-4-0_input_inner_padding: 0 .625rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .25rem 0 .625rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .1875rem;--_ui5-v2-4-0_list_no_data_height: 3rem;--_ui5-v2-4-0_list_item_cb_margin_right: 0;--_ui5-v2-4-0_list_item_title_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_item_img_size: 3rem;--_ui5-v2-4-0_list_item_img_top_margin: .5rem;--_ui5-v2-4-0_list_item_img_bottom_margin: .5rem;--_ui5-v2-4-0_list_item_img_hn_margin: .75rem;--_ui5-v2-4-0_list_item_dropdown_base_height: 2.5rem;--_ui5-v2-4-0_list_item_base_height: var(--sapElement_LineHeight);--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1.125rem;--_ui5-v2-4-0_list_item_icon_padding-inline-end: .5rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_group_header_list_item_height: 2.75rem;--_ui5-v2-4-0_list_busy_row_height: 3rem;--_ui5-v2-4-0_month_picker_item_height: 3rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_form_item_min_height: 2.813rem;--_ui5-v2-4-0_form_item_padding: .65rem;--_ui5-v2-4-0-form-group-heading-height: 2.75rem;--_ui5-v2-4-0_popup_default_header_height: 2.75rem;--_ui5-v2-4-0_year_picker_item_height: 3rem;--_ui5-v2-4-0_tokenizer_padding: .25rem;--_ui5-v2-4-0_token_height: 1.625rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .25rem .5rem;--_ui5-v2-4-0_token_wrapper_right_padding: .3125rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_tl_bubble_padding: 1rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -1.625rem;--_ui5-v2-4-0_tl_padding: 1rem 1rem 1rem .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: 1.625rem;--_ui5-v2-4-0_switch_focus_width_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_switch_focus_height_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_tc_item_text: 3rem;--_ui5-v2-4-0_tc_item_height: 4.75rem;--_ui5-v2-4-0_tc_item_text_only_height: 2.75rem;--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height: 3.75rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_icon_circle_size: 2.75rem;--_ui5-v2-4-0_tc_item_icon_size: 1.25rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .375rem;--_ui5-v2-4-0_textarea_margin: .25rem 0;--_ui5-v2-4-0_radio_button_height: 2.75rem;--_ui5-v2-4-0_radio_button_label_side_padding: .875rem;--_ui5-v2-4-0_radio_button_inner_size: 2.75rem;--_ui5-v2-4-0_radio_button_svg_size: 1.375rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.75rem;--ui5-v2-4-0_side_navigation_item_height: 2.75rem;--_ui5-v2-4-0-tree-indent-step: 1.5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2.75rem;--_ui5-v2-4-0-tree-toggle-box-height: 2.25rem;--_ui5-v2-4-0-tree-toggle-icon-size: 1.0625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -1.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -1.625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1.875rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -1.9375rem;--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% + 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_before_height: 100%;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.9375rem;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% + .375rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: 100%;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 1.5rem) ;--_ui5-v2-4-0-toolbar-separator-height: 2rem;--_ui5-v2-4-0-toolbar-height: 2.75rem;--_ui5-v2-4-0_toolbar_overflow_padding: .25rem .5rem;--_ui5-v2-4-0_table_cell_padding: .25rem .5rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_split_button_middle_separator_top: .625rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-height: 1.75rem;--_ui5-v2-4-0_color-palette-item-hover-height: 2.25rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 12rem;--_ui5-v2-4-0_textarea_padding_top: .5rem;--_ui5-v2-4-0_textarea_padding_bottom: .4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .5rem}[dir=rtl]{--_ui5-v2-4-0_table_shadow_border_left: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_icon_transform_scale: scale(-1, 1);--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: -.5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem .125rem 0 0;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem .25rem 0 0;--_ui5-v2-4-0_popover_downward_arrow_margin: -.4375rem .125rem 0 0;--_ui5-v2-4-0_popover_left_arrow_margin: .1875rem -.375rem 0 0;--_ui5-v2-4-0_dialog_resize_cursor:sw-resize;--_ui5-v2-4-0_menu_submenu_margin_offset: 0 -.25rem;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: 0 .25rem;--_ui5-v2-4-0-menu_item_icon_float: left;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: auto;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem}[data-ui5-compact-size],.ui5-content-density-compact,.sapUiSizeCompact{--_ui5-v2-4-0_input_min_width: 2rem;--_ui5-v2-4-0_input_icon_width: 2rem;--_ui5-v2-4-0_input_information_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_custom_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .1875rem .25rem;--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_radio_button_min_width: 2rem;--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .5rem;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .5rem;--_ui5-v2-4-0_radio_button_focus_dist: .1875rem;--_ui5-v2-4-0_switch_height: 2rem;--_ui5-v2-4-0_switch_width: 3rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.75rem;--_ui5-v2-4-0_switch_root_outline_top: .25rem;--_ui5-v2-4-0_switch_root_outline_bottom: .25rem;--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.375rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(1.375rem) translateX(-100%);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(1.875rem) translateX(-100%);--_ui5-v2-4-0_switch_track_width: 2rem;--_ui5-v2-4-0_switch_track_height: 1.25rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.75rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_width: 1.25rem;--_ui5-v2-4-0_switch_handle_height: 1rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1rem;--_ui5-v2-4-0_switch_text_font_size: var(--sapFontSize);--_ui5-v2-4-0_switch_text_width: 1rem;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .4375rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .125rem;--_ui5-v2-4-0_textarea_exceeded_text_height: .375rem;--_ui5-v2-4-0_textarea_min_height: 1.625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .0625rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .125rem;--_ui5-v2-4-0_textarea_padding_top_information: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .125rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .5rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.25rem;--_ui5-v2-4-0_tokenizer-popover_offset: .1875rem;--_ui5-v2-4-0_slider_handle_icon_size: .875rem;--_ui5-v2-4-0_slider_padding: 1rem 1.0625rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_top: -.8125rem;--_ui5-v2-4-0_slider_tooltip_bottom: 1.75rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_bar_base_height: 2.5rem;--_ui5-v2-4-0_bar_subheader_height: 2.25rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_button_base_padding: .4375rem;--_ui5-v2-4-0_button_base_min_width: 2rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_calendar_height: 18rem;--_ui5-v2-4-0_calendar_width: 17.75rem;--_ui5-v2-4-0_calendar_left_right_padding: .25rem;--_ui5-v2-4-0_calendar_top_bottom_padding: .5rem;--_ui5-v2-4-0_calendar_header_height: 2rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2rem;--_ui5-v2-4-0_calendar_header_padding: 0;--_ui5-v2-4-0-calendar-legend-root-padding: .5rem;--_ui5-v2-4-0-calendar-legend-root-width: 16.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: -.125rem;--_ui5-v2-4-0_checkbox_root_side_padding: var(--_ui5-v2-4-0_checkbox_wrapped_focus_padding);--_ui5-v2-4-0_checkbox_width_height: var(--_ui5-v2-4-0_checkbox_compact_width_height);--_ui5-v2-4-0_checkbox_wrapper_padding: var(--_ui5-v2-4-0_checkbox_compact_wrapper_padding);--_ui5-v2-4-0_checkbox_inner_width_height: var(--_ui5-v2-4-0_checkbox_compact_inner_size);--_ui5-v2-4-0_checkbox_icon_size: .75rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .5rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_day_picker_item_width: 2rem;--_ui5-v2-4-0_day_picker_item_height: 2rem;--_ui5-v2-4-0_day_picker_empty_height: 2.125rem;--_ui5-v2-4-0_day_picker_item_justify_content: flex-end;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .5rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: .75rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .5rem;--_ui5-v2-4-0_daypicker_special_day_top: 1.625rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 1.25rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 1rem;--_ui5-v2-4-0_datetime_picker_height: 20.5rem;--_ui5-v2-4-0_datetime_picker_width: 35.5rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 18.5rem;--_ui5-v2-4-0_datetime_timeview_padding: .5rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 21.125rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 3.125rem;--_ui5-v2-4-0_dialog_content_min_height: 2.5rem;--_ui5-v2-4-0_dialog_footer_height: 2.5rem;--_ui5-v2-4-0_form_item_min_height: 2rem;--_ui5-v2-4-0_form_item_padding: .25rem;--_ui5-v2-4-0-form-group-heading-height: 2rem;--_ui5-v2-4-0_input_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_input_inner_padding: 0 .5rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .2rem 0 .5rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .125rem;--_ui5-v2-4-0_input_icon_min_width: var(--_ui5-v2-4-0_input_compact_min_width);--_ui5-v2-4-0_menu_item_padding: 0 .75rem 0 .5rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: .75rem;--_ui5-v2-4-0_popup_default_header_height: 2.5rem;--_ui5-v2-4-0_textarea_margin: .1875rem 0;--_ui5-v2-4-0_list_no_data_height: 2rem;--_ui5-v2-4-0_list_item_cb_margin_right: .5rem;--_ui5-v2-4-0_list_item_title_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_img_top_margin: .55rem;--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_dropdown_base_height: 2rem;--_ui5-v2-4-0_list_item_base_height: 2rem;--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_list_busy_row_height: 2rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_month_picker_item_height: 2rem;--_ui5-v2-4-0_year_picker_item_height: 2rem;--_ui5-v2-4-0_panel_header_height: 2rem;--_ui5-v2-4-0_panel_button_root_height: 2rem;--_ui5-v2-4-0_panel_button_root_width: 2.5rem;--_ui5-v2-4-0_token_height: 1.25rem;--_ui5-v2-4-0_token_right_margin: .25rem;--_ui5-v2-4-0_token_left_padding: .25rem;--_ui5-v2-4-0_token_readonly_padding: .125rem .25rem;--_ui5-v2-4-0_token_focus_offset: -.125rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .375rem .375rem;--_ui5-v2-4-0_token_wrapper_right_padding: .25rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_token_outline_offset: -.125rem;--_ui5-v2-4-0_tl_bubble_padding: .5rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -.5rem;--_ui5-v2-4-0_tl_padding: .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: .5rem;--_ui5-v2-4-0_tc_item_text: 2rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .3125rem;--_ui5-v2-4-0_tc_item_height: 4rem;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_item_icon_circle_size: 2rem;--_ui5-v2-4-0_tc_item_icon_size: 1rem;--_ui5-v2-4-0_radio_button_height: 2rem;--_ui5-v2-4-0_radio_button_label_side_padding: .5rem;--_ui5-v2-4-0_radio_button_inner_size: 2rem;--_ui5-v2-4-0_radio_button_svg_size: 1rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.5rem;--ui5-v2-4-0_side_navigation_item_height: 2rem;--_ui5-v2-4-0_slider_handle_height: 1.25rem;--_ui5-v2-4-0_slider_handle_width: 1.5rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_progress_outline_offset: -.625rem;--_ui5-v2-4-0_slider_outer_height: 1.3125rem;--_ui5-v2-4-0_step_input_min_width: 6rem;--_ui5-v2-4-0_step_input_padding: 2rem;--_ui5-v2-4-0-tree-indent-step: .5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2rem;--_ui5-v2-4-0-tree-toggle-box-height: 1.5rem;--_ui5-v2-4-0-tree-toggle-icon-size: .8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -.75rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -.8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_height: calc(100% - 1.25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% + .9375rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% - .75rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.8625rem;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: calc(100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% - .625rem) ;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 2.5rem) ;--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height: calc(100% + 1.5rem) ;--_ui5-v2-4-0_timeline_tlgi_horizontal_line_placeholder_before_width: var(--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height);--_ui5-v2-4-0_timeline_tlgi_horizontal_compact_root_margin_left: .5rem;--_ui5-v2-4-0_timeline_tlgi_compact_root_gap: .5rem;--_ui5-v2-4-0_timeline_tlgi_root_horizontal_height: 19.375rem;--_ui5-v2-4-0_vsd_header_container: 2.5rem;--_ui5-v2-4-0_vsd_sub_header_container_height: 2rem;--_ui5-v2-4-0_vsd_header_height: 4rem;--_ui5-v2-4-0_vsd_expand_content_height: 25.4375rem;--_ui5-v2-4-0-toolbar-separator-height: 1.5rem;--_ui5-v2-4-0-toolbar-height: 2rem;--_ui5-v2-4-0_toolbar_overflow_padding: .1875rem .375rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_textarea_padding_top: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom: .125rem;--_ui5-v2-4-0_checkbox_focus_position: .25rem;--_ui5-v2-4-0_split_button_middle_separator_top: .3125rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0_slider_handle_top: -.5rem;--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: .125rem;--_ui5-v2-4-0_color-palette-item-height: 1.25rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1rem;--_ui5-v2-4-0_color-palette-item-container-sides-padding: .1875rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .8125rem;--_ui5-v2-4-0_color-palette-item-hover-height: 1.625rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 8.75rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .1875rem .5rem;--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 7.5rem;--_ui5-v2-4-0_color-palette-button-height: 2rem;--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.25rem;--_ui5-v2-4-0_color_picker_slider_container_margin_top: -9px;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 1.5625rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 1.3125rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: .25rem;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: -.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .4375rem}:root,[dir=ltr]{--_ui5-v2-4-0_rotation_90deg: rotate(90deg);--_ui5-v2-4-0_rotation_minus_90deg: rotate(-90deg);--_ui5-v2-4-0_icon_transform_scale: none;--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: .5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem 0 0 .1875rem;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem 0 0 -.375rem;--_ui5-v2-4-0_popover_downward_arrow_margin: -.375rem 0 0 .125rem;--_ui5-v2-4-0_popover_left_arrow_margin: .125rem 0 0 .25rem;--_ui5-v2-4-0_dialog_resize_cursor: se-resize;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem 0 0 .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: 0 .5rem .5rem 0;--_ui5-v2-4-0_menu_submenu_margin_offset: -.25rem 0;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: .25rem 0;--_ui5-v2-4-0-menu_item_icon_float: right;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: -.125rem}
`};Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var Em=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let tp=class extends xa{constructor(){super(...arguments),this.design="Default",this.showTooltip=!1,this.mode="Image",this.pathData=[],this.invalid=!1}_onkeydown(o){this.mode===X0.Interactive&&(Zo(o)&&this.fireDecoratorEvent("click"),Do(o)&&o.preventDefault())}_onkeyup(o){this.mode===X0.Interactive&&Do(o)&&this.fireDecoratorEvent("click")}get _dir(){return this.ltr?"ltr":void 0}get effectiveAriaHidden(){return this.mode===X0.Decorative?"true":void 0}get _tabIndex(){return this.mode===X0.Interactive?"0":void 0}get effectiveAccessibleRole(){switch(this.mode){case X0.Interactive:return"button";case X0.Decorative:return"presentation";default:return"img"}}onEnterDOM(){nf()&&this.setAttribute("desktop","")}async onBeforeRendering(){const o=this.name;if(!o)return console.warn("Icon name property is required",this);let t=h$(o);if(t||(t=await d$(o)),!t)return this.invalid=!0,console.warn(`Required icon is not registered. Invalid icon name: ${this.name}`);if(t==="ICON_NOT_FOUND")return this.invalid=!0,console.warn(`Required icon is not registered. You can either import the icon as a module in order to use it e.g. "@ui5/webcomponents-icons/dist/${o.replace("sap-icon://","")}.js", or setup a JSON build step and import "@ui5/webcomponents-icons/dist/AllIcons.js".`);if(this.viewBox=t.viewBox||"0 0 512 512",t.customTemplate&&(t.pathData=[],this.customSvg=b$(t.customTemplate,this)),this.invalid=!1,this.pathData=Array.isArray(t.pathData)?t.pathData:[t.pathData],this.accData=t.accData,this.ltr=t.ltr,this.packageName=t.packageName,this.accessibleName)this.effectiveAccessibleName=this.accessibleName;else if(this.accData){const n=await VO(this.packageName);this.effectiveAccessibleName=n.getText(this.accData)||void 0}else this.effectiveAccessibleName=void 0}get hasIconTooltip(){return this.showTooltip&&this.effectiveAccessibleName}};Em([He()],tp.prototype,"design",void 0),Em([He()],tp.prototype,"name",void 0),Em([He()],tp.prototype,"accessibleName",void 0),Em([He({type:Boolean})],tp.prototype,"showTooltip",void 0),Em([He()],tp.prototype,"mode",void 0),Em([He({type:Array})],tp.prototype,"pathData",void 0),Em([He({type:Object,noAttribute:!0})],tp.prototype,"accData",void 0),Em([He({type:Boolean})],tp.prototype,"invalid",void 0),Em([He({noAttribute:!0})],tp.prototype,"effectiveAccessibleName",void 0),tp=Em([Ds({tag:"ui5-icon",languageAware:!0,themeAware:!0,renderer:Ca,template:function(o,t,n){return et`<svg class="ui5-icon-root" part="root" tabindex="${le(this._tabIndex)}" dir="${le(this._dir)}" viewBox="${le(this.viewBox)}" role="${le(this.effectiveAccessibleRole)}" focusable="false" preserveAspectRatio="xMidYMid meet" aria-label="${le(this.effectiveAccessibleName)}" aria-hidden=${le(this.effectiveAriaHidden)} xmlns="http://www.w3.org/2000/svg" @keydown=${this._onkeydown} @keyup=${this._onkeyup}>${PAe.call(this,o,t,n)}</svg>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Icon.css.ts",content:`:host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([hidden]){display:none}:host([invalid]){display:none}:host(:not([hidden]).ui5_hovered){opacity:.7}:host{display:inline-block;width:1rem;height:1rem;color:var(--sapContent_IconColor);fill:currentColor;outline:none}:host([design="Contrast"]){color:var(--sapContent_ContrastIconColor)}:host([design="Critical"]){color:var(--sapCriticalElementColor)}:host([design="Information"]){color:var(--sapInformativeElementColor)}:host([design="Negative"]){color:var(--sapNegativeElementColor)}:host([design="Neutral"]){color:var(--sapNeutralElementColor)}:host([design="NonInteractive"]){color:var(--sapContent_NonInteractiveIconColor)}:host([design="Positive"]){color:var(--sapPositiveElementColor)}:host([mode="Interactive"][desktop]) .ui5-icon-root:focus,:host([mode="Interactive"]) .ui5-icon-root:focus-visible{outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--ui5-v2-4-0-icon-focus-border-radius)}.ui5-icon-root{display:flex;height:100%;width:100%;outline:none;vertical-align:top}:host([mode="Interactive"]){cursor:pointer}.ui5-icon-root:not([dir=ltr]){transform:var(--_ui5-v2-4-0_icon_transform_scale);transform-origin:center}
`}}),Fn("click",{bubbles:!0})],tp),tp.define();const rf=tp;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var fQ,vA=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let Hu=fQ=class extends xa{get ariaDescription(){return fQ.i18nBundle.getText(fAe)}constructor(){super(),this.disabled=!1,this.selected=!1,this.iconOnly=!1,this.nonInteractive=!1,this.posInSet=0,this.sizeOfSet=0}_onclick(o){this.disabled&&(o.preventDefault(),o.stopPropagation()),this.selected=!this.selected}onEnterDOM(){nf()&&this.setAttribute("desktop","")}onBeforeRendering(){this.iconOnly=!X$(this.text)}_onkeyup(o){M$(o)&&o.preventDefault()}get tabIndexValue(){if(!this.disabled)return this.getAttribute("tabindex")||this.forcedTabIndex}get ariaLabelText(){return K0(this)}get showIconTooltip(){return dQ()&&this.iconOnly&&!this.tooltip}};vA([He({type:Boolean})],Hu.prototype,"disabled",void 0),vA([He({type:Boolean})],Hu.prototype,"selected",void 0),vA([He()],Hu.prototype,"tooltip",void 0),vA([He()],Hu.prototype,"accessibleName",void 0),vA([He()],Hu.prototype,"accessibleNameRef",void 0),vA([He()],Hu.prototype,"icon",void 0),vA([He({type:Boolean})],Hu.prototype,"iconOnly",void 0),vA([He({type:Boolean})],Hu.prototype,"nonInteractive",void 0),vA([He({noAttribute:!0})],Hu.prototype,"forcedTabIndex",void 0),vA([He({type:Number})],Hu.prototype,"posInSet",void 0),vA([He({type:Number})],Hu.prototype,"sizeOfSet",void 0),vA([Ro({type:Node,default:!0})],Hu.prototype,"text",void 0),vA([al("@ui5/webcomponents")],Hu,"i18nBundle",void 0),Hu=fQ=vA([Ds({tag:"ui5-segmented-button-item",renderer:Ca,template:function(o,t,n){return et`<li role="option" aria-roledescription="${le(this.ariaDescription)}" aria-posinset="${le(this.posInSet)}" aria-setsize="${le(this.sizeOfSet)}" aria-selected="${le(this.selected)}" class="ui5-segmented-button-item-root" aria-disabled="${le(this.disabled)}" data-sap-focus-ref @click=${this._onclick} @keyup=${this._onkeyup} tabindex=${le(this.tabIndexValue)} aria-label="${le(this.ariaLabelText)}" title="${le(this.tooltip)}">${this.icon?FAe.call(this,o,t,n):void 0}<span id="${le(this._id)}-content" class="ui5-segmented-button-item-text"><bdi><slot></slot></bdi></span></li>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/SegmentedButtonItem.css.ts",content:`:host{vertical-align:middle}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-segmented-button-item-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:.0625rem solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-segmented-button-item-icon{color:inherit;flex-shrink:0;padding-inline-end:.375rem}:host([icon-only]) .ui5-segmented-button-item-icon{padding-inline-end:0}:host([icon-only]) .ui5-segmented-button-item-root{min-width:auto;padding:0}:host([icon-only]) .ui5-segmented-button-item-text{display:none}.ui5-segmented-button-item-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not([icon-end])) .ui5-segmented-button-item-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-icon][icon-end]) .ui5-segmented-button-item-text{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only])) .ui5-segmented-button-item-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]){pointer-events:none}:host([desktop]:not([active])) .ui5-segmented-button-item-root:focus-within:after,:host(:not([active])) .ui5-segmented-button-item-root:focus-visible:after,:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}.ui5-segmented-button-item-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([active][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([active]) .ui5-segmented-button-item-root:focus-visible:after,:host([selected][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([selected]) .ui5-segmented-button-item-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([desktop]:not(:last-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:last-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([desktop]:not(:first-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:first-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}
`},dependencies:[rf]})],Hu),Hu.define();const OAe=Hu;var gQ;(function(o){o.Single="Single",o.Multiple="Multiple"})(gQ||(gQ={}));const Y$=gQ;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var rR,d2=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let h1=rR=class extends xa{constructor(){super(),this.selectionMode="Single",this._itemNavigation=new Z5(this,{getItemsCallback:()=>this.navigatableItems}),this.hasPreviouslyFocusedItem=!1}onBeforeRendering(){const o=this.getSlottedNodes("items");o.forEach((t,n,c)=>{t.posInSet=n+1,t.sizeOfSet=c.length}),this.normalizeSelection(),this.style.setProperty(fC("--_ui5_segmented_btn_items_count"),`${o.length}`)}normalizeSelection(){if(this.items.length)switch(this.selectionMode){case Y$.Single:{const o=this.selectedItems,t=this._selectedItem?o.indexOf(this._selectedItem):-1;this._selectedItem&&o.length>1&&o.splice(t,1);const n=o.pop()||this.items[0];this._applySingleSelection(n);break}}}_selectItem(o){const t=o.target,n=t.hasAttribute("ui5-segmented-button-item");if(!t.disabled&&t!==this.getDomRef()&&n)return this.selectionMode===Y$.Multiple?o instanceof KeyboardEvent&&(t.selected=!t.selected):this._applySingleSelection(t),this.fireDecoratorEvent("selection-change",{selectedItems:this.selectedItems}),this._itemNavigation.setCurrentItem(t),this}_applySingleSelection(o){this.items.forEach(t=>{t.selected=!1}),o.selected=!0,this._selectedItem=o}_onclick(o){this._selectItem(o)}_onkeydown(o){Zo(o)?this._selectItem(o):Do(o)&&o.preventDefault()}_onkeyup(o){Do(o)&&this._selectItem(o)}_onmousedown(o){const t=o.target;t.hasAttribute("ui5-segmented-button-item")&&(this._itemNavigation.setCurrentItem(t),this.hasPreviouslyFocusedItem=!0)}_onfocusin(o){this.hasPreviouslyFocusedItem?this._itemNavigation.setCurrentItem(o.target):this.selectedItems.length&&(this._itemNavigation.setCurrentItem(this.selectedItems[0]),this.selectedItems[0].focus(),this.hasPreviouslyFocusedItem=!0)}get selectedItems(){return this.items.filter(o=>o.selected)}get navigatableItems(){return this.getSlottedNodes("items").filter(o=>!o.disabled)}get ariaDescribedBy(){return rR.i18nBundle.getText(pAe)}get ariaDescription(){return rR.i18nBundle.getText(AAe)}};var mQ;d2([He()],h1.prototype,"accessibleName",void 0),d2([He()],h1.prototype,"selectionMode",void 0),d2([Ro({type:HTMLElement,invalidateOnChildChange:!0,default:!0})],h1.prototype,"items",void 0),d2([al("@ui5/webcomponents")],h1,"i18nBundle",void 0),h1=rR=d2([Ds({tag:"ui5-segmented-button",languageAware:!0,renderer:Ca,template:function(o,t,n){return et`<ul @click="${this._onclick}" @mousedown="${this._onmousedown}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @focusin="${this._onfocusin}" class="ui5-segmented-button-root" role="listbox" aria-multiselectable="true" aria-describedby="${le(this._id)}-invisibleText" aria-roledescription=${le(this.ariaDescription)} aria-label=${le(this.accessibleName)}><slot></slot><span id="${le(this._id)}-invisibleText" class="ui5-hidden-text">${le(this.ariaDescribedBy)}</span></ul>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/SegmentedButton.css.ts",content:`:host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block;min-width:calc(var(--_ui5-v2-4-0_segmented_btn_items_count) * var(--_ui5-v2-4-0_button_base_min_width))}.ui5-segmented-button-root{width:inherit;display:grid;grid-template-columns:repeat(var(--_ui5-v2-4-0_segmented_btn_items_count),minmax(var(--_ui5-v2-4-0_button_base_min_width),1fr));margin:0;padding:0;background-color:var(--sapButton_Background);border-radius:var(--sapButton_BorderCornerRadius);box-shadow:inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item]){border-radius:var(--_ui5-v2-4-0_segmented_btn_inner_border_radius);border-color:var(--_ui5-v2-4-0_segmented_btn_border_color);background-color:var(--_ui5-v2-4-0_segmented_btn_background_color);height:var(--_ui5-v2-4-0_button_base_height);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:initial}::slotted([ui5-segmented-button-item]:hover){z-index:2;box-shadow:var(--_ui5-v2-4-0_segmented_btn_hover_box_shadow);border-color:var(--sapButton_Hover_BorderColor);background-color:var(--sapButton_Hover_Background)}::slotted([ui5-segmented-button-item][selected]),::slotted([ui5-segmented-button-item][active]){border-color:var(--sapButton_Selected_BorderColor);background-color:var(--sapButton_Selected_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item][selected]:hover){border-color:var(--sapButton_Selected_Hover_BorderColor);background-color:var(--sapButton_Selected_Hover_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item]:last-child){border-start-end-radius:var(--sapButton_BorderCornerRadius);border-end-end-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:first-child){border-start-start-radius:var(--sapButton_BorderCornerRadius);border-end-start-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:not(:first-child)){border-left-width:var(--_ui5-v2-4-0_segmented_btn_item_border_left);border-right-width:var(--_ui5-v2-4-0_segmented_btn_item_border_right)}::slotted([ui5-segmented-button-item][active]:not([active]):hover){border-color:var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item][active]:hover){border-color:var(--sapButton_Selected_BorderColor)}
`},dependencies:[OAe]}),Fn("selection-change",{detail:{selectedItems:{type:Array}},bubbles:!0})],h1),h1.define(),function(o){o.Default="Default",o.Positive="Positive",o.Negative="Negative",o.Transparent="Transparent",o.Emphasized="Emphasized",o.Attention="Attention"}(mQ||(mQ={}));const J$=mQ;var _Q;(function(o){o.Button="Button",o.Submit="Submit",o.Reset="Reset"})(_Q||(_Q={}));const Z$=_Q;function QAe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-button-icon" name="${le(this.icon)}" mode="${le(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-button-icon" name="${le(this.icon)}" mode="${le(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function NAe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-button-end-icon" name="${le(this.endIcon)}" mode="${le(this.endIconMode)}" part="endIcon"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-button-end-icon" name="${le(this.endIcon)}" mode="${le(this.endIconMode)}" part="endIcon"></ui5-icon>`}function HAe(o,t,n){return et`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${le(this.buttonTypeText)}</span>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var sR,Ea=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let eW=!1,A2=null,Fo=sR=class extends xa{constructor(){super(),this.design="Default",this.disabled=!1,this.submits=!1,this.accessibilityAttributes={},this.type="Button",this.accessibleRole="Button",this.active=!1,this.iconOnly=!1,this.hasIcon=!1,this.hasEndIcon=!1,this.nonInteractive=!1,this._iconSettings={},this.forcedTabIndex="0",this._isTouch=!1,this._cancelAction=!1,this._deactivate=()=>{A2&&A2._setActiveState(!1)},eW||(document.addEventListener("mouseup",this._deactivate),eW=!0),this._ontouchstart={handleEvent:()=>{this.nonInteractive||this._setActiveState(!0)},passive:!0}}onEnterDOM(){nf()&&this.setAttribute("desktop","")}async onBeforeRendering(){this.hasIcon=!!this.icon,this.hasEndIcon=!!this.endIcon,this.iconOnly=this.isIconOnly,this.buttonTitle=this.tooltip||await this.getDefaultTooltip()}_onclick(){var o;this.nonInteractive||(this._isSubmit&&w$(this),this._isReset&&(()=>{var t,n;(n=(t=this._internals)==null?void 0:t.form)==null||n.reset()})(),PO()&&((o=this.getDomRef())==null||o.focus()))}_onmousedown(){this.nonInteractive||(this._setActiveState(!0),A2=this)}_ontouchend(o){this.disabled&&(o.preventDefault(),o.stopPropagation()),this.active&&this._setActiveState(!1),A2&&A2._setActiveState(!1)}_onkeydown(o){var t;this._cancelAction=(t=o).key==="Shift"||t.keyCode===16||$0(o),Do(o)||Zo(o)?this._setActiveState(!0):this._cancelAction&&this._setActiveState(!1)}_onkeyup(o){this._cancelAction&&o.preventDefault(),(Do(o)||Zo(o))&&this.active&&this._setActiveState(!1)}_onfocusout(){this.nonInteractive||this.active&&this._setActiveState(!1)}_setActiveState(o){!this.fireDecoratorEvent("_active-state-change")||(this.active=o)}get _hasPopup(){return this.accessibilityAttributes.hasPopup}get hasButtonType(){return this.design!==J$.Default&&this.design!==J$.Transparent}get iconMode(){return this.icon?X0.Decorative:""}get endIconMode(){return this.endIcon?X0.Decorative:""}get isIconOnly(){return!X$(this.text)}static typeTextMappings(){return{Positive:Rde,Negative:Dde,Emphasized:Fde}}getDefaultTooltip(){if(dQ())return(async o=>{if(!o)return;let t=h$(o);return t||(t=await d$(o)),t&&t!==$O&&t.accData?(await VO(t.packageName)).getText(t.accData):void 0})(this.icon)}get buttonTypeText(){return sR.i18nBundle.getText(sR.typeTextMappings()[this.design])}get effectiveAccRole(){return this.accessibleRole.toLowerCase()}get tabIndexValue(){if(!this.disabled)return this.getAttribute("tabindex")||(this.nonInteractive?"-1":this.forcedTabIndex)}get showIconTooltip(){return dQ()&&this.iconOnly&&!this.tooltip}get ariaLabelText(){return K0(this)}get ariaDescribedbyText(){return this.hasButtonType?"ui5-button-hiddenText-type":void 0}get _isSubmit(){return this.type===Z$.Submit||this.submits}get _isReset(){return this.type===Z$.Reset}};Ea([He()],Fo.prototype,"design",void 0),Ea([He({type:Boolean})],Fo.prototype,"disabled",void 0),Ea([He()],Fo.prototype,"icon",void 0),Ea([He()],Fo.prototype,"endIcon",void 0),Ea([He({type:Boolean})],Fo.prototype,"submits",void 0),Ea([He()],Fo.prototype,"tooltip",void 0),Ea([He()],Fo.prototype,"accessibleName",void 0),Ea([He()],Fo.prototype,"accessibleNameRef",void 0),Ea([He({type:Object})],Fo.prototype,"accessibilityAttributes",void 0),Ea([He()],Fo.prototype,"type",void 0),Ea([He()],Fo.prototype,"accessibleRole",void 0),Ea([He({type:Boolean})],Fo.prototype,"active",void 0),Ea([He({type:Boolean})],Fo.prototype,"iconOnly",void 0),Ea([He({type:Boolean})],Fo.prototype,"hasIcon",void 0),Ea([He({type:Boolean})],Fo.prototype,"hasEndIcon",void 0),Ea([He({type:Boolean})],Fo.prototype,"nonInteractive",void 0),Ea([He({noAttribute:!0})],Fo.prototype,"buttonTitle",void 0),Ea([He({type:Object})],Fo.prototype,"_iconSettings",void 0),Ea([He({noAttribute:!0})],Fo.prototype,"forcedTabIndex",void 0),Ea([He({type:Boolean})],Fo.prototype,"_isTouch",void 0),Ea([He({type:Boolean,noAttribute:!0})],Fo.prototype,"_cancelAction",void 0),Ea([Ro({type:Node,default:!0})],Fo.prototype,"text",void 0),Ea([al("@ui5/webcomponents")],Fo,"i18nBundle",void 0),Fo=sR=Ea([Ds({tag:"ui5-button",formAssociated:!0,languageAware:!0,renderer:Ca,template:function(o,t,n){return et`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${le(this.tabIndexValue)} aria-expanded="${le(this.accessibilityAttributes.expanded)}" aria-controls="${le(this.accessibilityAttributes.controls)}" aria-haspopup="${le(this._hasPopup)}" aria-label="${le(this.ariaLabelText)}" aria-describedby="${le(this.ariaDescribedbyText)}" title="${le(this.buttonTitle)}" part="button" role="${le(this.effectiveAccRole)}">${this.icon?QAe.call(this,o,t,n):void 0}<span id="${le(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon?NAe.call(this,o,t,n):void 0}${this.hasButtonType?HAe.call(this,o,t,n):void 0}</button> `},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Button.css.ts",content:`:host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-button-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:1px solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-button-icon,.ui5-button-end-icon{color:inherit;flex-shrink:0}.ui5-button-end-icon{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([icon-only]:not([has-end-icon])) .ui5-button-root{min-width:auto;padding:0}:host([icon-only]) .ui5-button-text{display:none}.ui5-button-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not(:empty)) .ui5-button-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-end-icon]:not([has-icon]):empty) .ui5-button-end-icon{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only]):not([has-end-icon])) .ui5-button-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]:active){pointer-events:none}:host([desktop]:not([active])) .ui5-button-root:focus-within:after,:host(:not([active])) .ui5-button-root:focus-visible:after,:host([desktop][active][design="Emphasized"]) .ui5-button-root:focus-within:after,:host([active][design="Emphasized"]) .ui5-button-root:focus-visible:after,:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:before,:host([design="Emphasized"]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_emphasized_focused_border_before);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}.ui5-button-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([ui5-button][active]:not([disabled]):not([non-interactive])){background-image:none;background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([design="Positive"]){background-color:var(--sapButton_Accept_Background);border-color:var(--sapButton_Accept_BorderColor);color:var(--sapButton_Accept_TextColor)}:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Accept_Hover_Background);border-color:var(--sapButton_Accept_Hover_BorderColor);color:var(--sapButton_Accept_Hover_TextColor)}:host([ui5-button][design="Positive"][active]:not([non-interactive])){background-color:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Active_TextColor)}:host([design="Negative"]){background-color:var(--sapButton_Reject_Background);border-color:var(--sapButton_Reject_BorderColor);color:var(--sapButton_Reject_TextColor)}:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Reject_Hover_Background);border-color:var(--sapButton_Reject_Hover_BorderColor);color:var(--sapButton_Reject_Hover_TextColor)}:host([ui5-button][design="Negative"][active]:not([non-interactive])){background-color:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Attention"]){background-color:var(--sapButton_Attention_Background);border-color:var(--sapButton_Attention_BorderColor);color:var(--sapButton_Attention_TextColor)}:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Attention_Hover_Background);border-color:var(--sapButton_Attention_Hover_BorderColor);color:var(--sapButton_Attention_Hover_TextColor)}:host([ui5-button][design="Attention"][active]:not([non-interactive])){background-color:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Emphasized"]){background-color:var(--sapButton_Emphasized_Background);border-color:var(--sapButton_Emphasized_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_TextColor);font-family:var(--sapFontBoldFamily )}:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Emphasized_Hover_Background);border-color:var(--sapButton_Emphasized_Hover_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_Hover_TextColor)}:host([ui5-button][design="Empasized"][active]:not([non-interactive])){background-color:var(--sapButton_Emphasized_Active_Background);border-color:var(--sapButton_Emphasized_Active_BorderColor);color:var(--sapButton_Emphasized_Active_TextColor)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color);outline:none}:host([design="Emphasized"][desktop][active]:not([non-interactive])) .ui5-button-root:focus-within:after,:host([design="Emphasized"][active]:not([non-interactive])) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_active_border_color)}:host([design="Transparent"]){background-color:var(--sapButton_Lite_Background);color:var(--sapButton_Lite_TextColor);border-color:var(--sapButton_Lite_BorderColor)}:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Lite_Hover_Background);border-color:var(--sapButton_Lite_Hover_BorderColor);color:var(--sapButton_Lite_Hover_TextColor)}:host([ui5-button][design="Transparent"][active]:not([non-interactive])){background-color:var(--sapButton_Lite_Active_Background);border-color:var(--sapButton_Lite_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([ui5-segmented-button-item][active][desktop]) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item][active]) .ui5-button-root:focus-visible:after,:host([pressed][desktop]) .ui5-button-root:focus-within:after,:host([pressed]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([ui5-segmented-button-item][desktop]:not(:last-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:last-child)) .ui5-button-root:focus-visible:after{border-top-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([ui5-segmented-button-item][desktop]:not(:first-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:first-child)) .ui5-button-root:focus-visible:after{border-top-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}
`},dependencies:[rf],shadowRootOptions:{delegatesFocus:!0}}),Fn("click",{bubbles:!0}),Fn("_active-state-change",{bubbles:!0,cancelable:!0})],Fo),Fo.define();const X_=Fo,tW={key:"ICON_ADD",defaultText:"Add"},iW={key:"ICON_DECLINE",defaultText:"Decline"},nW={key:"ICON_ERROR",defaultText:"Error"};function zAe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-button-icon" name="${le(this.icon)}" mode="${le(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-button-icon" name="${le(this.icon)}" mode="${le(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function GAe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-button-end-icon" name="${le(this.endIcon)}" mode="${le(this.endIconMode)}" part="endIcon"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-button-end-icon" name="${le(this.endIcon)}" mode="${le(this.endIconMode)}" part="endIcon"></ui5-icon>`}function VAe(o,t,n){return et`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${le(this.buttonTypeText)}</span>`}tr("decline",{pathData:"M86 109l22-23q5-5 12-5 6 0 11 5l124 125L380 86q5-5 11-5 7 0 12 5l22 23q6 5 6 11t-6 12L301 256l124 125q6 5 6 11 0 5-6 11l-22 23q-8 5-12 5-3 0-11-5L255 301 131 426q-5 5-11 5-4 0-12-5l-22-23q-6-6-6-11 0-6 6-11l124-125L86 132q-6-6-6-12t6-11z",ltr:!1,accData:iW,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("decline",{pathData:"M292 256l117 116q7 7 7 18 0 12-7.5 19t-18.5 7q-9 0-18-7L256 292 140 409q-9 7-18 7-11 0-18.5-7.5T96 390t7-18l117-116-117-116q-7-7-7-18t7.5-18.5T122 96t18 7l116 117 116-117q7-7 18-7t18.5 7.5T416 122t-7 18z",ltr:!1,accData:iW,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("unit",{pathData:"M369.154 238q-11 0-18-8l-16-16-41 40 17 17q8 8 8 18t-8 18q-7 7-18 7t-18-7l-17-17-40 40 17 17q8 8 7.5 18t-7.5 18q-7 7-18 7t-18-7l-17-17-92 93h370V89l-90 89 17 17q8 8 8 18t-8 17q-7 8-18 8zm-340 271q-11 0-18-7 0-1-.5-1t-.5-1q-6-6-6-16t6-17l457-457 2-2q8-6 16-6 5 0 9 2l8 4q0 1 .5 1t.5 1q10 10 7 22v452q0 11-7 18t-18 7h-456zm381-101h-108l108-109v109z",ltr:!1,collection:"tnt-v2",packageName:"@ui5/webcomponents-icons-tnt"}),tr("unit",{pathData:"M199 448l-45-45-77 77h403V77l-77 77 45 45-23 23-45-45-22 22 45 45-23 23-45-45-22 23 44 45-22 22-45-45-23 23 45 45-22 22-45-44-23 22 45 45-23 23-45-45-22 22 45 45zm217-90l-58 58h58v-58zM512 0v512H0zm-64 281v167H281z",ltr:!1,collection:"tnt-v3",packageName:"@ui5/webcomponents-icons-tnt"}),tr("measure",{pathData:"M0 208V64h512v32h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96H96v80q0 16-16 16t-16-16V96H32v112q0 16-16 16T0 208zm0 112h304l25-49q2-5 7-5t7 5l25 49h144v32H384l16 32h112v32h-96l10 21q1 2 1 4t-1.5 4.5-6.5 2.5H253q-5 0-6.5-2.5T245 441t1-4l10-21H0v-32h272l16-32H0v-32zm292 96h88l-44-88z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("measure",{pathData:"M454 96q24 0 41 17t17 41v160q0 23-17 40t-41 17h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T442 320h12q7 0 7-6V154q0-7-7-7h-38v51q0 11-7.5 18.5T390 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T275 198v-51h-38v51q0 11-7.5 18.5T211 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T96 198v-51H58q-7 0-7 7v160q0 6 7 6h108q11 0 18.5 7.5T192 346t-7.5 18-18.5 7H58q-24 0-41-17T0 314V154q0-24 17-41t41-17h396zm-75 280q5 7 5 14 0 11-7.5 18.5T358 416H250q-11 0-18.5-7.5T224 390q0-7 5-14l54-77q8-11 21-11t21 11z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("camera",{pathData:"M0 158q0-13 9.5-21.5T32 128h64q4-14 11.5-30.5t17-31 19-24.5T160 32h192q9 0 18 9.5t17.5 24 16 31.5 12.5 31h64q9 0 16 4 6 3 11 9t5 17v290q0 12-9 22t-23 10H32q-13 0-22.5-10T0 448V158zm32 290h448V160h-87q-2-8-4.5-16t-6.5-16q-7-17-16-33.5T347 64H166q-11 14-19 30.5T132 128q-4 8-6.5 16t-5.5 16H32v288zm96-160q0-26 10-49.5t27.5-41T206 170t50-10 50 10 40.5 27.5 27.5 41 10 49.5q0 27-10 50t-27.5 40.5T306 406t-50 10-50-10-40.5-27.5T138 338t-10-50zm32 0q0 40 28 68t68 28 68-28 28-68-28-68-68-28-68 28-28 68zm272-96q16 0 16 16t-16 16-16-16 16-16z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("camera",{pathData:"M400 224q-16 0-16-16t16-16 16 16-16 16zM256 448q-27 0-50-10t-40.5-27.5T138 370t-10-50 10-50 27.5-40.5T206 202t50-10 50 10 40.5 27.5T374 270t10 50-10 50-27.5 40.5T306 438t-50 10zm0-205q-32 0-54.5 22.5T179 320t22.5 54.5T256 397t54.5-22.5T333 320t-22.5-54.5T256 243zm185 237q-11 0-18-7.5t-7-18.5 7-18 18-7h13q7 0 7-7V154q0-7-7-7h-74q-5 0-11-3t-13-12l-40-49H196l-44 55q-7 9-20 9H58q-7 0-7 7v268q0 7 7 7h13q11 0 18 7t7 18-7 18.5-18 7.5H58q-24 0-41-17T0 422V154q0-24 17-41t41-17h62l44-55q8-9 20-9h145q12 0 20 10l44 54h61q24 0 41 17t17 41v268q0 24-17 41t-41 17h-13z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("chart-axis",{pathData:"M487.5 408q9 10 9 23t-9 23l-61 53q-5 5-11 5t-11-5-5-11.5 5-11.5l44-36h-336q-14 0-23-9.5t-9-22.5V80l-37 43q-5 5-11.5 5t-11.5-5-5-11 5-11l52-60q10-9 23-9t23 9l53 60q5 5 5 11t-5 11-11.5 5-11.5-5l-36-43v313l225-225-57 5q-16-2-16-16 0-7 4.5-11.5t10.5-4.5l80-6q13 1 22.5 10t9.5 22l-5 81q0 6-4.5 10.5t-10.5 4.5q-17 0-17-16l5-56-224 225h313l-44-37q-5-5-5-11.5t5-11.5 11-5 11 5z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("chart-axis",{pathData:"M505 391q7 7 7 19 0 11-7 18l-77 76q-8 8-18 8-11 0-18.5-7.5T384 486q0-10 8-18l33-33H102q-11 0-18-7t-7-18V87l-33 34q-7 7-18 7t-18.5-7.5T0 102q0-10 8-18L84 7q9-7 19-7 9 0 18 7l76 77q8 7 8 18t-7.5 18.5T179 128t-18-7l-33-34v261l233-233h-47q-11 0-18.5-7T288 90t7.5-18.5T314 64h108q11 0 18.5 7.5T448 90v108q0 11-7.5 18.5T422 224t-18-7.5-7-18.5v-47L164 384h261l-33-33q-8-8-8-18 0-11 7.5-18.5T410 307q10 0 18 8z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("rotate",{pathData:"M200 59q5 5 5 11 0 5-5 12l-54 54q-5 5-12 5-6 0-11-4.5t-5-11.5q0-5 5-12l27-27H80q-20 0-34 14t-14 34v77q0 16-16 16T0 211v-77q0-33 23.5-56.5T80 54h70l-27-27q-5-5-5-11t5-11q4-5 11-5 8 0 12 5zm296 133q16 0 16 16v288q0 16-16 16H208q-16 0-16-16V208q0-16 16-16h288zm-16 288V224H224v256h256z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("rotate",{pathData:"M486 192q11 0 18.5 7.5T512 218v268q0 11-7.5 18.5T486 512H218q-11 0-18.5-7.5T192 486V218q0-11 7.5-18.5T218 192h268zm-25 51H243v218h218V243zM217 62q7 7 7 18t-7 18l-55 54q-8 8-18 8-11 0-18.5-7.5T118 134q0-10 8-18l11-10H90q-17 0-28 11t-11 27v86q0 11-7 18.5T26 256t-18.5-7.5T0 230v-86q0-37 26-63.5T90 54h47l-11-10q-8-8-8-18 0-11 7.5-18.5T144 0q10 0 18 8z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var rW=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let oR=class extends X_{constructor(){super(...arguments),this.pressed=!1}_onclick(){this.pressed=!this.pressed,PO()&&this.getDomRef().focus()}_onkeyup(o){M$(o)?o.preventDefault():super._onkeyup(o)}};rW([He({type:Boolean})],oR.prototype,"pressed",void 0),oR=rW([Ds({tag:"ui5-toggle-button",template:function(o,t,n){return et`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  aria-pressed="${le(this.pressed)}"  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${le(this.tabIndexValue)} aria-expanded="${le(this.accessibilityAttributes.expanded)}" aria-controls="${le(this.accessibilityAttributes.controls)}" aria-haspopup="${le(this._hasPopup)}" aria-label="${le(this.ariaLabelText)}" aria-describedby="${le(this.ariaDescribedbyText)}" title="${le(this.buttonTitle)}" part="button" role="${le(this.effectiveAccRole)}">${this.icon?zAe.call(this,o,t,n):void 0}<span id="${le(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon?GAe.call(this,o,t,n):void 0}${this.hasButtonType?VAe.call(this,o,t,n):void 0}</button> `},styles:[X_.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ToggleButton.css.ts",content:`:host(:not([hidden])){display:inline-block}:host([design="Emphasized"]:not([pressed])){text-shadow:var(--_ui5-v2-4-0_toggle_button_emphasized_text_shadow)}:host([pressed]),:host([design="Default"][pressed]),:host([design="Transparent"][pressed]),:host([design="Emphasized"][pressed]){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor);text-shadow:none}:host([pressed]:hover),:host([pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Default"][pressed]:hover),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Transparent"][pressed]:hover),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Emphasized"][pressed]:hover),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Selected_Hover_Background);border-color:var(--sapButton_Selected_Hover_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([active]:not([disabled])),:host([design="Default"][active]:not([disabled])),:host([design="Transparent"][active]:not([disabled])),:host([design="Emphasized"][active]:not([disabled])){background:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([design="Negative"][pressed]){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][active]:not([disabled])){background:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Negative"][pressed][active]:hover),:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Reject_Selected_Hover_Background);border-color:var(--sapButton_Reject_Selected_Hover_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Positive"][pressed]){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][active]:not([disabled])){background:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed][active]:hover),:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Accept_Selected_Hover_Background);border-color:var(--sapButton_Accept_Selected_Hover_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Attention"][pressed]){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][active]:not([disabled])){background:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Attention"][pressed][active]:hover),:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Attention_Selected_Hover_Background);border-color:var(--sapButton_Attention_Selected_Hover_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}
`}]})],oR),oR.define();const sW=()=>{const o=bC();return o&&typeof o.focus=="function"?o:null},oW=(o,t)=>{let n=o;if(n.shadowRoot&&(n=Array.from(n.shadowRoot.children).find(h=>h.localName!=="style"),!n))return!1;if(n===t)return!0;const c=n.localName==="slot"?n.assignedNodes():n.children;return!!c&&Array.from(c).some(h=>oW(h,t))},qAe=(o,t)=>{let n,c;if(o instanceof MouseEvent)n=o.clientX,c=o.clientY;else{const p=o.touches[0];n=p.clientX,c=p.clientY}return f=c,(h=n)>=(d=t).left&&h<=d.right&&f>=d.top&&f<=d.bottom;var h,f,d},aW=o=>{const t=o.parentElement||o.getRootNode&&o.getRootNode().host;return t&&("isUI5Element"in(n=t)&&"_show"in n||t===document.documentElement)?t:aW(t);var n},cg=(o,t,n)=>Math.min(Math.max(o,t),Math.max(t,n)),$Ae=o=>{const t=getComputedStyle(o);return["size","inline-size"].indexOf(t.containerType)>-1||["transform","perspective"].indexOf(t.willChange)>-1||["layout","paint","strict","content"].indexOf(t.contain)>-1||t.transform&&t.transform!=="none"||t.perspective&&t.perspective!=="none"||t.backdropFilter&&t.backdropFilter!=="none"},WAe=typeof document>"u",vQ=()=>WAe||document.body.classList.contains("ui5-content-native-scrollbars")?"":`::-webkit-scrollbar:horizontal {
	height: var(--sapScrollBar_Dimension);
}

::-webkit-scrollbar:vertical {
	width: var(--sapScrollBar_Dimension);
}

::-webkit-scrollbar {
	background-color: var(--sapScrollBar_TrackColor);
	border-left: none;
}

::-webkit-scrollbar-thumb {
	border-radius: var(--sapElement_BorderCornerRadius);
	background-color: var(--sapScrollBar_FaceColor);
}

::-webkit-scrollbar-thumb:hover {
	background-color: var(--sapScrollBar_Hover_FaceColor);
}

::-webkit-scrollbar-corner {
	background-color: var(--sapScrollBar_TrackColor);
}`,lW=o=>o.parentElement?o.parentNode:o.parentNode.host,cW={toAttribute:o=>o instanceof HTMLElement?null:o,fromAttribute:o=>o},aR=o=>o.nodeName!=="SLOT"&&(o.offsetWidth<=0&&o.offsetHeight<=0||o.style&&o.style.visibility==="hidden"),jAe=/^(?:a|area)$/i,KAe=/^(?:input|select|textarea|button)$/i,XAe=o=>{if(o.disabled)return!1;const t=o.getAttribute("tabindex");return t!=null?parseInt(t)>=0:KAe.test(o.nodeName)||jAe.test(o.nodeName)&&!!o.href},YAe=o=>o.hasAttribute("data-ui5-focus-trap"),yQ=async(o,t)=>!o||aR(o)?null:bQ(o,!0),JAe=o=>o.hasAttribute("data-ui5-focus-redirect")||!aR(o),bQ=async(o,t,n)=>{let c,h,f,d=-1;for(o.shadowRoot?c=t?o.shadowRoot.firstChild:o.shadowRoot.lastChild:o instanceof HTMLSlotElement&&o.assignedNodes()?(h=o.assignedNodes(),d=t?0:h.length-1,c=h[d]):c=t?o.firstElementChild:o.lastElementChild;c;){const p=c;if(G0(c)&&(c=await c.getFocusDomRefAsync()),!c)return null;if(c.nodeType===1&&JAe(c)&&!YAe(c)){if(XAe(c))return c&&typeof c.focus=="function"?c:null;if(f=await bQ(c,t),f)return f&&typeof f.focus=="function"?f:null}c=t?p.nextSibling:p.previousSibling,h&&!h[d].contains(c)&&(d=t?d+1:d-1,c=h[d])}return null};let wQ;const wC=new Map,uW=()=>(wQ||(wQ=new window.ResizeObserver(o=>{window.requestAnimationFrame(()=>{o.forEach(t=>{const n=wC.get(t.target);n&&Promise.all(n.map(c=>c()))})})})),wQ);let Sm=class{static register(o,t){let n=o;G0(n)&&(n=n.getDomRef()),n instanceof HTMLElement?((c,h)=>{const f=wC.get(c)||[];f.length||uW().observe(c),wC.set(c,[...f,h])})(n,t):console.warn("Cannot register ResizeHandler for element",o)}static deregister(o,t){let n=o;G0(n)&&(n=n.getDomRef()),n instanceof HTMLElement?((c,h)=>{const f=wC.get(c)||[];if(f.length===0)return;const d=f.filter(p=>p!==h);d.length===0?(uW().unobserve(c),wC.delete(c)):wC.set(c,d)})(n,t):console.warn("Cannot deregister ResizeHandler for element",o)}};const xQ=new Map,p2=new Map;p2.set("S",[0,599]),p2.set("M",[600,1023]),p2.set("L",[1024,1439]),p2.set("XL",[1440,1/0]);var hW=(o=>(o.RANGE_4STEPS="4Step",o))(hW||{});const lR={RANGESETS:hW,initRangeSet:(o,t)=>{xQ.set(o,t)},getCurrentRange:(o,t=window.innerWidth)=>{let n,c=xQ.get(o);c||(c=xQ.get("4Step"));const h=Math.floor(t);return c.forEach((f,d)=>{h>=f[0]&&h<=f[1]&&(n=d)}),n||[...c.keys()][0]}};var CQ;lR.initRangeSet(lR.RANGESETS.RANGE_4STEPS,p2),function(o){o.H1="H1",o.H2="H2",o.H3="H3",o.H4="H4",o.H5="H5",o.H6="H6"}(CQ||(CQ={}));const xC=CQ;function ZAe(o,t,n){return et`<h1 class="ui5-title-root"><span id="${le(this._id)}-inner"><slot></slot></span></h1>`}function epe(o,t,n){return et`<h2 class="ui5-title-root"><span id="${le(this._id)}-inner"><slot></slot></span></h2>`}function tpe(o,t,n){return et`<h3 class="ui5-title-root"><span id="${le(this._id)}-inner"><slot></slot></span></h3>`}function ipe(o,t,n){return et`<h4 class="ui5-title-root"><span id="${le(this._id)}-inner"><slot></slot></span></h4>`}function npe(o,t,n){return et`<h5 class="ui5-title-root"><span id="${le(this._id)}-inner"><slot></slot></span></h5>`}function rpe(o,t,n){return et`<h6 class="ui5-title-root"><span id="${le(this._id)}-inner"><slot></slot></span></h6>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var cR=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let d1=class extends xa{constructor(){super(...arguments),this.wrappingType="Normal",this.level="H2",this.size="H5"}get h1(){return this.level===xC.H1}get h2(){return this.level===xC.H2}get h3(){return this.level===xC.H3}get h4(){return this.level===xC.H4}get h5(){return this.level===xC.H5}get h6(){return this.level===xC.H6}};cR([He()],d1.prototype,"wrappingType",void 0),cR([He()],d1.prototype,"level",void 0),cR([He()],d1.prototype,"size",void 0),d1=cR([Ds({tag:"ui5-title",renderer:Ca,template:function(o,t,n){return et`${this.h1?ZAe.call(this,o,t,n):void 0}${this.h2?epe.call(this,o,t,n):void 0}${this.h3?tpe.call(this,o,t,n):void 0}${this.h4?ipe.call(this,o,t,n):void 0}${this.h5?npe.call(this,o,t,n):void 0}${this.h6?rpe.call(this,o,t,n):void 0}`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Title.css.ts",content:`:host(:not([hidden])){display:block;cursor:text}:host{max-width:100%;color:var(--sapGroup_TitleTextColor);font-size:var(--sapFontHeader5Size);font-family:"72override",var(--sapFontHeaderFamily);text-shadow:var(--sapContent_TextShadow)}.ui5-title-root{display:inline-block;position:relative;font-weight:400;font-size:inherit;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;max-width:100%;vertical-align:bottom;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;margin:0;cursor:inherit}:host{white-space:pre-line}:host([wrapping-type="None"]){white-space:nowrap}.ui5-title-root,:host ::slotted(*){white-space:inherit}::slotted(*){font-size:inherit;font-family:inherit;text-shadow:inherit}:host([size="H1"]){font-size:var(--sapFontHeader1Size)}:host([size="H2"]){font-size:var(--sapFontHeader2Size)}:host([size="H3"]){font-size:var(--sapFontHeader3Size)}:host([size="H4"]){font-size:var(--sapFontHeader4Size)}:host([size="H5"]){font-size:var(--sapFontHeader5Size)}:host([size="H6"]){font-size:var(--sapFontHeader6Size)}
`}})],d1),d1.define();const dW=d1;var EQ;(function(o){o.None="None",o.Dialog="Dialog",o.AlertDialog="AlertDialog"})(EQ||(EQ={}));const uR=EQ,sf=r1("OpenedPopupsRegistry",{openedRegistry:[]}),AW=(o,t=[])=>{sf.openedRegistry.some(n=>n.instance===o)||sf.openedRegistry.push({instance:o,parentPopovers:t}),gW(),sf.openedRegistry.length===1&&spe()},pW=o=>{sf.openedRegistry=sf.openedRegistry.filter(t=>t.instance!==o),gW(),sf.openedRegistry.length||ope()},fW=o=>{sf.openedRegistry.length&&$0(o)&&(o.stopPropagation(),sf.openedRegistry[sf.openedRegistry.length-1].instance.closePopup(!0))},spe=()=>{document.addEventListener("keydown",fW)},ope=()=>{document.removeEventListener("keydown",fW)},gW=()=>{let o,t=!1;for(let n=sf.openedRegistry.length-1;n>=0;n--)o=sf.openedRegistry[n].instance,!t&&o.isModal?(o.isTopModalPopup=!0,t=!0):o.isTopModalPopup=!1};Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var f2,ip=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};i2("data-ui5-popup-scroll-blocker")||t2({packageName:"@ui5/webcomponents",fileName:"themes/PopupGlobal.css.ts",content:`.ui5-popup-scroll-blocker{overflow:hidden}
`},"data-ui5-popup-scroll-blocker");const hR=new Set;let Cd=f2=class extends xa{constructor(){super(),this.preventFocusRestore=!1,this.accessibleRole="Dialog",this.preventInitialFocus=!1,this.isTopModalPopup=!1,this.onPhone=!1,this.onDesktop=!1,this._opened=!1,this._open=!1,this._resizeHandler=this._resize.bind(this),this._getRealDomRef=()=>this.shadowRoot.querySelector("[root-element]")}onBeforeRendering(){this.onPhone=Ml(),this.onDesktop=nf()}onAfterRendering(){_C().then(()=>{this._updateMediaRange()})}onEnterDOM(){this.setAttribute("popover","manual"),Sm.register(this,this._resizeHandler),nf()&&this.setAttribute("desktop",""),this.tabIndex=-1,this.open&&this.showPopover()}onExitDOM(){this._opened&&(f2.unblockPageScrolling(this),this._removeOpenedPopup()),Sm.deregister(this,this._resizeHandler)}set open(o){this._open!==o&&(this._open=o,o?this.openPopup():this.closePopup())}get open(){return this._open}async openPopup(){this._opened||!this.fireDecoratorEvent("before-open",{})||this._opened||(this._opened=!0,this.isModal&&f2.blockPageScrolling(this),this._focusedElementBeforeOpen=sW(),this._show(),this.getDomRef()&&this._updateMediaRange(),this._addOpenedPopup(),this.open=!0,await this.applyInitialFocus(),await _C(),await this.applyInitialFocus(),this.isConnected&&this.fireDecoratorEvent("open",{}))}_resize(){this._updateMediaRange()}_preventBlockLayerFocus(o){o.preventDefault()}static blockPageScrolling(o){hR.add(o),hR.size===1&&document.documentElement.classList.add("ui5-popup-scroll-blocker")}static unblockPageScrolling(o){hR.delete(o),hR.size===0&&document.documentElement.classList.remove("ui5-popup-scroll-blocker")}_scroll(o){this.fireDecoratorEvent("scroll",{scrollTop:o.target.scrollTop,targetRef:o.target})}_onkeydown(o){const t=o.target===this._root&&Y5(o),n=Zo(o)&&!this.open;(t||n)&&o.preventDefault()}_onfocusout(o){o.relatedTarget||(this._shouldFocusRoot=!0)}_onmousedown(o){this.shadowRoot.contains(o.target)?this._shouldFocusRoot=!0:this._shouldFocusRoot=!1}_onmouseup(){this._shouldFocusRoot&&(Cs.chrome&&this._root.focus(),this._shouldFocusRoot=!1)}async forwardToFirst(){const o=await yQ(this);o?o.focus():this._root.focus()}async forwardToLast(){const o=await(async t=>!t||aR(t)?null:bQ(t,!1))(this);o?o.focus():this._root.focus()}async applyInitialFocus(){this.preventInitialFocus||await this.applyFocus()}async applyFocus(){if(this.querySelector("[autofocus]")||(await this._waitForDomRef(),this.getRootNode()===this))return;let o;this.initialFocus&&(o=this.getRootNode().getElementById(this.initialFocus)||document.getElementById(this.initialFocus)),o=o||await yQ(this)||this._root,o&&(o===this._root&&(o.tabIndex=-1),o.focus())}isFocusWithin(){return(o=>{const t=sW();return!!t&&oW(o,t)})(this._root)}_updateMediaRange(){this.mediaRange=lR.getCurrentRange(lR.RANGESETS.RANGE_4STEPS,this.getDomRef().offsetWidth)}_addOpenedPopup(){AW(this)}closePopup(o=!1,t=!1,n=!1){this._opened&&(!this.fireDecoratorEvent("before-close",{escPressed:o})||(this._opened=!1,this.isModal&&f2.unblockPageScrolling(this),this.hide(),this.open=!1,t||this._removeOpenedPopup(),this.preventFocusRestore||n||this.resetFocus(),this.fireDecoratorEvent("close",{})))}_removeOpenedPopup(){pW(this)}resetFocus(){this._focusedElementBeforeOpen&&(this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null)}_show(){this.isConnected&&(this.setAttribute("popover","manual"),this.showPopover())}hide(){this.isConnected&&this.hidePopover()}get _ariaLabel(){return K0(this)}get _root(){return this.shadowRoot.querySelector(".ui5-popup-root")}get _role(){return this.accessibleRole===uR.None?void 0:this.accessibleRole.toLowerCase()}get _ariaModal(){return this.accessibleRole===uR.None?void 0:"true"}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get styles(){return{root:{},content:{}}}get classes(){return{root:{"ui5-popup-root":!0},content:{"ui5-popup-content":!0}}}};ip([He()],Cd.prototype,"initialFocus",void 0),ip([He({type:Boolean})],Cd.prototype,"preventFocusRestore",void 0),ip([He()],Cd.prototype,"accessibleName",void 0),ip([He()],Cd.prototype,"accessibleNameRef",void 0),ip([He()],Cd.prototype,"accessibleRole",void 0),ip([He()],Cd.prototype,"mediaRange",void 0),ip([He({type:Boolean})],Cd.prototype,"preventInitialFocus",void 0),ip([He({type:Boolean,noAttribute:!0})],Cd.prototype,"isTopModalPopup",void 0),ip([Ro({type:HTMLElement,default:!0})],Cd.prototype,"content",void 0),ip([He({type:Boolean})],Cd.prototype,"onPhone",void 0),ip([He({type:Boolean})],Cd.prototype,"onDesktop",void 0),ip([He({type:Boolean})],Cd.prototype,"open",null),Cd=f2=ip([Ds({renderer:Ca,styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Popup.css.ts",content:`:host{min-width:1px;overflow:visible;border:none;inset:unset;margin:0;padding:0}
`},{packageName:"@ui5/webcomponents",fileName:"themes/PopupBlockLayer.css.ts",content:`.ui5-block-layer{position:fixed;z-index:-1;display:none;inset:-500px;outline:none;pointer-events:all}
`}],template:function(o,t,n){return et`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${Hr(this.styles.root)}" class="${br(this.classes.root)}" role="${le(this._role)}" aria-modal="${le(this._ariaModal)}" aria-label="${le(this._ariaLabel)}" aria-labelledby="${le(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><div style="${Hr(this.styles.content)}" class="${br(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div><span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`},dependencies:[dW]}),Fn("before-open",{cancelable:!0}),Fn("open"),Fn("before-close",{detail:{escPressed:{type:Boolean}},cancelable:!0}),Fn("close"),Fn("scroll",{bubbles:!0})],Cd);const g2=Cd;var SQ;(function(o){o.Start="Start",o.End="End",o.Top="Top",o.Bottom="Bottom"})(SQ||(SQ={}));const su=SQ;var BQ;(function(o){o.Center="Center",o.Top="Top",o.Bottom="Bottom",o.Stretch="Stretch"})(BQ||(BQ={}));const CC=BQ;var IQ;(function(o){o.Center="Center",o.Start="Start",o.End="End",o.Stretch="Stretch"})(IQ||(IQ={}));const yA=IQ;let mW;const Dh=[],m2=()=>{Dh.forEach(o=>{o.instance.reposition()})},_W=o=>{const t=[...sf.openedRegistry];if(t.length!==0&&ppe(t[t.length-1].instance))for(let n=t.length-1;n!==-1;n--){const c=t[n].instance;if(c.isModal||c.isOpenerClicked(o))return;if(qAe(o,c.getBoundingClientRect()))break;c.closePopup()}},ape=()=>Dh,lpe=o=>{let t=o.parentNode;const n=[];for(;t&&t.parentNode;){for(let c=0;c<Dh.length;c++)t===Dh[c].instance&&n.push(t);t=t.parentNode}return n};function cpe(o,t,n){return et`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length?upe.call(this,o,t,n):hpe.call(this,o,t,n)}</header>`}function upe(o,t,n){return et`<slot name="header"></slot>`}function hpe(o,t,n){return n?et`<${Lt("ui5-title",t,n)} level="H1" class="ui5-popup-header-text">${le(this.headerText)}</${Lt("ui5-title",t,n)}>`:et`<ui5-title level="H1" class="ui5-popup-header-text">${le(this.headerText)}</ui5-title>`}function dpe(o,t,n){return et`${this.footer.length?Ape.call(this,o,t,n):void 0}`}function Ape(o,t,n){return et`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);const vW={packageName:"@ui5/webcomponents",fileName:"themes/PopupsCommon.css.ts",content:`:host{position:fixed;background:var(--sapGroup_ContentBackground);border-radius:var(--_ui5-v2-4-0_popup_border_radius);min-height:2rem;box-sizing:border-box}:host([open]){display:flex}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;flex:1 1 auto;outline:none}.ui5-popup-root .ui5-popup-header-root{color:var(--sapPageHeader_TextColor);box-shadow:var(--_ui5-v2-4-0_popup_header_shadow);border-bottom:var(--_ui5-v2-4-0_popup_header_border)}.ui5-popup-content{color:var(--sapTextColor);flex:auto}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-header-root,.ui5-popup-footer-root,:host([header-text]) .ui5-popup-header-text{margin:0;display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--_ui5-v2-4-0_popup_header_font_weight)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{min-height:var(--_ui5-v2-4-0_popup_default_header_height);max-height:var(--_ui5-v2-4-0_popup_default_header_height);line-height:var(--_ui5-v2-4-0_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([no-scrolling]) .ui5-popup-content{overflow:hidden}:host([media-range="S"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_s)}:host([media-range="M"]) .ui5-popup-content,:host([media-range="L"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_m_l)}:host([media-range="XL"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--_ui5-v2-4-0_popup_header_background)}:host([media-range="S"]) .ui5-popup-header-root,:host([media-range="S"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_s);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_s)}:host([media-range="M"]) .ui5-popup-header-root,:host([media-range="L"]) .ui5-popup-header-root,:host([media-range="M"]) .ui5-popup-footer-root,:host([media-range="L"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l)}:host([media-range="XL"]) .ui5-popup-header-root,:host([media-range="XL"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_xl);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_xl)}
`};Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var Mc,zu=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let ic=Mc=class extends g2{static get VIEWPORT_MARGIN(){return 10}constructor(){super(),this.placement="End",this.horizontalAlign="Center",this.verticalAlign="Center",this.modal=!1,this.hideArrow=!1,this.allowTargetOverlap=!1,this.disableScrolling=!1,this.arrowTranslateX=0,this.arrowTranslateY=0,this.actualPlacement="End"}set opener(o){this._opener!==o&&(this._opener=o,o&&this.open&&this.openPopup())}get opener(){return this._opener}async openPopup(){if(this._opened)return;const o=this.getOpenerHTMLElement(this.opener);if(o){if(this.isOpenerOutsideViewport(o.getBoundingClientRect()))return await _C(),this.open=!1,void this.fireDecoratorEvent("close");this._openerRect=o.getBoundingClientRect(),await super.openPopup()}else console.warn("Valid opener id is required. It must be defined before opening the popover.")}isOpenerClicked(o){const t=o.target;if(t===this._opener)return!0;const n=t;return!(!n.getFocusDomRef||n.getFocusDomRef()!==this._opener)||o.composedPath().indexOf(this._opener)>-1}_addOpenedPopup(){(o=>{const t=lpe(o);var n;AW(o,t),Dh.push({instance:o,parentPopovers:t}),(n=o)&&n.shadowRoot.addEventListener("scroll",m2,{capture:!0}),Dh.length===1&&(document.addEventListener("scroll",m2,{capture:!0}),document.addEventListener("mousedown",_W),mW=setInterval(()=>{m2(),bC().tagName==="IFRAME"&&ape().reverse().forEach(c=>c.instance.closePopup(!1,!1,!0))},300))})(this)}_removeOpenedPopup(){(o=>{const t=[o];for(let c=0;c<Dh.length;c++){const h=Dh[c].parentPopovers.indexOf(o);Dh[c].parentPopovers.length>0&&h>-1&&t.push(Dh[c].instance)}for(let c=t.length-1;c>=0;c--)for(let h=0;h<Dh.length;h++){let f=-1;t[c]===Dh[h].instance&&(f=h),f>=0&&(pW(Dh[f].instance),(n=Dh[f].instance)&&n.shadowRoot.removeEventListener("scroll",m2,{capture:!0}),Dh.splice(f,1)[0].instance.closePopup(!1,!0))}var n;Dh.length||(document.removeEventListener("scroll",m2,{capture:!0}),document.removeEventListener("mousedown",_W),clearInterval(mW))})(this)}getOpenerHTMLElement(o){if(o===void 0||o instanceof HTMLElement)return o;const t=this.getRootNode();return t instanceof Document?t.getElementById(o):document.getElementById(o)}shouldCloseDueToOverflow(o,t){const n={Start:t.right,End:t.left,Top:t.top,Bottom:t.bottom},c=this.getOpenerHTMLElement(this.opener),h=aW(c);let f=!1,d=!1;if(h instanceof Mc){const p=h.contentDOM.getBoundingClientRect();f=t.top>p.top+p.height,d=t.top+t.height<p.top}return n[o]<0||n[o]+32>h.innerHeight||f||d}shouldCloseDueToNoOpener(o){return o.top===0&&o.bottom===0&&o.left===0&&o.right===0}isOpenerOutsideViewport(o){return o.bottom<0||o.top>window.innerHeight||o.right<0||o.left>window.innerWidth}_resize(){super._resize(),this.open&&this.reposition()}reposition(){this._show()}async _show(){super._show();const o=this.getOpenerHTMLElement(this.opener);if(o&&this._isUI5Element(o)&&!o.getDomRef())return;this._opened||this._showOutsideViewport();const t=this.getPopoverSize();let n;if(t.width===0||t.height===0)return;if(this.open&&(this._openerRect=o.getBoundingClientRect()),n=this._oldPlacement&&this.shouldCloseDueToNoOpener(this._openerRect)&&this.isFocusWithin()?this._oldPlacement:this.calcPlacement(this._openerRect,t),this._preventRepositionAndClose||this.isOpenerOutsideViewport(this._openerRect))return await this._waitForDomRef(),this.closePopup();this._oldPlacement=n,this.actualPlacement=n.placement;let c=cg(this._left,Mc.VIEWPORT_MARGIN,document.documentElement.clientWidth-t.width-Mc.VIEWPORT_MARGIN);this.actualPlacement===su.End&&(c=Math.max(c,this._left));let h=cg(this._top,Mc.VIEWPORT_MARGIN,document.documentElement.clientHeight-t.height-Mc.VIEWPORT_MARGIN);this.actualPlacement===su.Bottom&&(h=Math.max(h,this._top)),this.arrowTranslateX=n.arrow.x,this.arrowTranslateY=n.arrow.y,h=this._adjustForIOSKeyboard(h),Object.assign(this.style,{top:`${h}px`,left:`${c}px`}),this.horizontalAlign===yA.Stretch&&this._width&&(this.style.width=this._width),this.verticalAlign===CC.Stretch&&this._height&&(this.style.height=this._height)}_adjustForIOSKeyboard(o){if(!$q())return o;const t=Math.ceil(this.getBoundingClientRect().top);return o+(Number.parseInt(this.style.top||"0")-t)}_getContainingBlockClientLocation(){let o=lW(this);for(;o;){if($Ae(o))return o.getBoundingClientRect();o=lW(o)}return{left:0,top:0}}getPopoverSize(){const o=this.getBoundingClientRect();return{width:o.width,height:o.height}}_showOutsideViewport(){Object.assign(this.style,{top:"-10000px",left:"-10000px"})}_isUI5Element(o){return"isUI5Element"in o}get arrowDOM(){return this.shadowRoot.querySelector(".ui5-popover-arrow")}calcPlacement(o,t){let n=Mc.VIEWPORT_MARGIN,c=0;const h=this.allowTargetOverlap,f=document.documentElement.clientWidth,d=document.documentElement.clientHeight;let p=d,v=f;const w=this.getActualPlacement(o,t);this._preventRepositionAndClose=this.shouldCloseDueToNoOpener(o)||this.shouldCloseDueToOverflow(w,o);const S=w===su.Top||w===su.Bottom;this.horizontalAlign===yA.Stretch&&S?(t.width=o.width,this._width=`${o.width}px`):this.verticalAlign!==CC.Stretch||S||(t.height=o.height,this._height=`${o.height}px`);const B=this.hideArrow?0:8;switch(w){case su.Top:n=this.getVerticalLeft(o,t),c=Math.max(o.top-t.height-B,0),h||(p=o.top-B);break;case su.Bottom:n=this.getVerticalLeft(o,t),c=o.bottom+B,h?c=Math.max(Math.min(c,d-t.height),0):p=d-o.bottom-B;break;case su.Start:n=Math.max(o.left-t.width-B,0),c=this.getHorizontalTop(o,t),h||(v=o.left-B);break;case su.End:n=o.left+o.width+B,c=this.getHorizontalTop(o,t),h?n=Math.max(Math.min(n,f-t.width),0):v=f-o.right-B}S?t.width>f||n<Mc.VIEWPORT_MARGIN?n=Mc.VIEWPORT_MARGIN:n+t.width>f-Mc.VIEWPORT_MARGIN&&(n=f-Mc.VIEWPORT_MARGIN-t.width):t.height>d||c<Mc.VIEWPORT_MARGIN?c=Mc.VIEWPORT_MARGIN:c+t.height>d-Mc.VIEWPORT_MARGIN&&(c=d-Mc.VIEWPORT_MARGIN-t.height),this._maxHeight=Math.round(p-Mc.VIEWPORT_MARGIN),this._maxWidth=Math.round(v-Mc.VIEWPORT_MARGIN),(this._left===void 0||Math.abs(this._left-n)>1.5)&&(this._left=Math.round(n)),(this._top===void 0||Math.abs(this._top-c)>1.5)&&(this._top=Math.round(c));const R=Number.parseInt(window.getComputedStyle(this).getPropertyValue("border-radius"));return{arrow:this.getArrowPosition(o,t,n,c,S,R),top:this._top,left:this._left,placement:w}}getArrowPosition(o,t,n,c,h,f){const d=this._actualHorizontalAlign;let p=d===yA.Center||d===yA.Stretch;d===yA.End&&n<=o.left&&(p=!0),d===yA.Start&&n+t.width>=o.left+o.width&&(p=!0);let v=0;h&&p&&(v=o.left+o.width/2-n-t.width/2);let w=0;h||(w=o.top+o.height/2-c-t.height/2);const S=t.height/2-f-4;w=cg(w,-S,S);const B=t.width/2-f-4;return v=cg(v,-B,B),{x:Math.round(v),y:Math.round(w)}}fallbackPlacement(o,t,n,c){return n.left>c.width?su.Start:o-n.right>n.left?su.End:t-n.bottom>c.height?su.Bottom:t-n.bottom<n.top?su.Top:void 0}getActualPlacement(o,t){const n=this.placement;let c=n;const h=document.documentElement.clientWidth,f=document.documentElement.clientHeight;switch(n){case su.Top:o.top<t.height&&o.top<f-o.bottom&&(c=su.Bottom);break;case su.Bottom:f-o.bottom<t.height&&f-o.bottom<o.top&&(c=su.Top);break;case su.Start:o.left<t.width&&(c=this.fallbackPlacement(h,f,o,t)||n);break;case su.End:h-o.right<t.width&&(c=this.fallbackPlacement(h,f,o,t)||n)}return c}getVerticalLeft(o,t){const n=this._actualHorizontalAlign;let c=Mc.VIEWPORT_MARGIN;switch(n){case yA.Center:case yA.Stretch:c=o.left-(t.width-o.width)/2;break;case yA.Start:c=o.left;break;case yA.End:c=o.right-t.width}return c}getHorizontalTop(o,t){let n=0;switch(this.verticalAlign){case CC.Center:case CC.Stretch:n=o.top-(t.height-o.height)/2;break;case CC.Top:n=o.top;break;case CC.Bottom:n=o.bottom-t.height}return n}get isModal(){return this.modal}get _ariaLabelledBy(){if(!this._ariaLabel&&this._displayHeader)return"ui5-popup-header"}get styles(){return{...super.styles,root:{"max-height":this._maxHeight?`${this._maxHeight}px`:"","max-width":this._maxWidth?`${this._maxWidth}px`:""},arrow:{transform:`translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)`}}}get classes(){const o=super.classes;return o.root["ui5-popover-root"]=!0,o}get _displayHeader(){return!(!this.header.length&&!this.headerText)}get _displayFooter(){return!0}get _actualHorizontalAlign(){if(this.effectiveDir==="rtl"){if(this.horizontalAlign===yA.Start)return yA.End;if(this.horizontalAlign===yA.End)return yA.Start}return this.horizontalAlign}};zu([He()],ic.prototype,"headerText",void 0),zu([He()],ic.prototype,"placement",void 0),zu([He()],ic.prototype,"horizontalAlign",void 0),zu([He()],ic.prototype,"verticalAlign",void 0),zu([He({type:Boolean})],ic.prototype,"modal",void 0),zu([He({type:Boolean})],ic.prototype,"hideArrow",void 0),zu([He({type:Boolean})],ic.prototype,"allowTargetOverlap",void 0),zu([He({type:Boolean})],ic.prototype,"disableScrolling",void 0),zu([He({type:Number,noAttribute:!0})],ic.prototype,"arrowTranslateX",void 0),zu([He({type:Number,noAttribute:!0})],ic.prototype,"arrowTranslateY",void 0),zu([He()],ic.prototype,"actualPlacement",void 0),zu([He({type:Number,noAttribute:!0})],ic.prototype,"_maxHeight",void 0),zu([He({type:Number,noAttribute:!0})],ic.prototype,"_maxWidth",void 0),zu([Ro({type:HTMLElement})],ic.prototype,"header",void 0),zu([Ro({type:HTMLElement})],ic.prototype,"footer",void 0),zu([He({converter:cW})],ic.prototype,"opener",null),ic=Mc=zu([Ds({tag:"ui5-popover",styles:[g2.styles,vW,{packageName:"@ui5/webcomponents",fileName:"themes/Popover.css.ts",content:`:host{box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);background-color:var(--_ui5-v2-4-0_popover_background);max-width:calc(100vw - (100vw - 100%) - 2 * var(--_ui5-v2-4-0_popup_viewport_margin))}:host([hide-arrow]){box-shadow:var(--_ui5-v2-4-0_popover_no_arrow_box_shadow)}:host([opened][actual-placement="Top"]){margin-top:var(--_ui5-v2-4-0-popover-margin-bottom)}:host([opened][actual-placement="Bottom"]){margin-top:var(--_ui5-v2-4-0-popover-margin-top)}:host([actual-placement="Bottom"]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5rem}:host([actual-placement="Bottom"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_upward_arrow_margin)}:host([actual-placement="Start"]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement="Start"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_right_arrow_margin)}:host([actual-placement="Top"]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement="Top"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_downward_arrow_margin)}:host(:not([actual-placement])) .ui5-popover-arrow,:host([actual-placement="End"]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement])) .ui5-popover-arrow:after,:host([actual-placement="End"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_left_arrow_margin)}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}.ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:"";display:block;width:.7rem;height:.7rem;background-color:var(--_ui5-v2-4-0_popover_background);box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);transform:rotate(-45deg)}:host([modal])::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}:host([modal]) .ui5-block-layer{display:block}
`},vQ()],template:function(o,t,n){return et`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${Hr(this.styles.root)}" class="${br(this.classes.root)}" role="${le(this._role)}" aria-modal="${le(this._ariaModal)}" aria-label="${le(this._ariaLabel)}" aria-labelledby="${le(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${Hr(this.styles.arrow)}"></span>${this._displayHeader?cpe.call(this,o,t,n):void 0}<div style="${Hr(this.styles.content)}" class="${br(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter?dpe.call(this,o,t,n):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `}})],ic);const ppe=o=>"opener"in o;ic.define();const _2=ic;var fpe=Object.defineProperty,gpe=Object.getOwnPropertyDescriptor,yW=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?gpe(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&fpe(t,n,f),f};let dR=class extends ft{constructor(){super(...arguments),this.isColumnMode=!1}render(){return Ie`
      <div
        id="toolBar"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div
          id="btnBar"
          class="${this.isColumnMode?"hor-orientation":"ver-orientation"}"
        >
          <slot @slotchange=${this._handleSlotChange}></slot>
        </pv-tool-area>
      </div>
    `}_handleSlotChange(o){console.log("Slot changed",o)}};dR.styles=A`
    :host {
      max-height: 100%;
      max-width: 100%;
      --size: 13.5rem;
    }

    #btnBar.hor-orientation{
      width: 100%;
      flex-direction: row;
    }

    #btnBar.ver-orientation{
      height: 100%;
      flex-direction: column;
    }

    #btnBar
    {
      display: flex;
      gap: 0.25rem;
      pointer-events: auto;
    }

    #toolBar.hor-orientation{
      width: calc(100% - 1rem);
      height: var(--size);
      flex-direction: row;
    }

    #toolBar.ver-orientation{
      height: calc(100% - 1rem);
      width: var(--size);
      flex-direction: column;
    }

    #toolBar {
      display: flex;
      gap: 0.5625rem;
      left: 0.5rem;
      top: 0.5rem;
      position: absolute;
      pointer-events: none;
    }

    #toolBar.hor-orientation pv-tool-area{
      height: 100%;
    }

    #toolBar.ver-orientation pv-tool-area{
      width: 100%;
    }

    ui5-toggle-button{
      height: 2.5rem;
      width: 2.5rem;
    }

    ui5-toggle-button ui5-icon{
      height: 85%;
      width: 85%;
    }

    ui5-icon {
      stroke:black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%)
    }
  `,yW([$t({type:Boolean})],dR.prototype,"isColumnMode",2),dR=yW([Gt("pv-menu")],dR);var mpe=Object.defineProperty,_pe=Object.getOwnPropertyDescriptor,EC=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?_pe(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&mpe(t,n,f),f};let Y0=class extends ft{constructor(){super(...arguments),this.title="",this.icon="",this.idx=0}render(){return Ie`
      <ui5-button
        data-index=${this.idx}
        tooltip=${this.title}
        id="tool-button"
        @click="${this._togglePopover}"
        icon=${this.icon}
      >
      </ui5-button>
      <ui5-popover id="tool-popover" header-text="${this.title}">
        <slot></slot>
      </ui5-popover>
    `}_togglePopover(){this.toolPopover!==null?(this.toolPopover.opener===void 0&&(this.toolPopover.opener=this.toolButton),this.toolPopover.open=!this.toolPopover.open):console.warn("Popover not found.")}updated(o){super.updated(o)}};Y0.styles=A`
    :host {
      max-height: 100%;
      max-width: 100%;
    }
  `,EC([$t()],Y0.prototype,"title",2),EC([$t()],Y0.prototype,"icon",2),EC([$t()],Y0.prototype,"idx",2),EC([gi("#tool-popover")],Y0.prototype,"toolPopover",2),EC([gi("#tool-button")],Y0.prototype,"toolButton",2),Y0=EC([Gt("pv-menu-item")],Y0),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var TQ,SC=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let Y_=TQ=class extends xa{constructor(){super(...arguments),this.showColon=!1,this.required=!1,this.wrappingType="Normal"}_onclick(){if(!this.for)return;const o=this.getRootNode().querySelector(`[id="${this.for}"]`);o&&o.focus()}get _colonSymbol(){return TQ.i18nBundle.getText(SAe)}};SC([He()],Y_.prototype,"for",void 0),SC([He({type:Boolean})],Y_.prototype,"showColon",void 0),SC([He({type:Boolean})],Y_.prototype,"required",void 0),SC([He()],Y_.prototype,"wrappingType",void 0),SC([al("@ui5/webcomponents")],Y_,"i18nBundle",void 0),Y_=TQ=SC([Ds({tag:"ui5-label",renderer:Ca,template:function(o,t,n){return et`<label class="ui5-label-root" @click=${this._onclick}><span class="ui5-label-text-wrapper"><slot></slot></span><span aria-hidden="true" class="ui5-label-required-colon" data-colon="${le(this._colonSymbol)}"></span></label>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Label.css.ts",content:`:host(:not([hidden])){display:inline-flex}:host{max-width:100%;color:var(--sapContent_LabelColor);font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;cursor:text}.ui5-label-root{width:100%;cursor:inherit}:host{white-space:normal}:host([wrapping-type="None"]){white-space:nowrap}:host([wrapping-type="None"]) .ui5-label-root{display:inline-flex}:host([wrapping-type="None"]) .ui5-label-text-wrapper{text-overflow:ellipsis;overflow:hidden;display:inline-block;vertical-align:top;flex:0 1 auto;min-width:0}:host([show-colon]) .ui5-label-required-colon:before{content:attr(data-colon)}:host([required]) .ui5-label-required-colon:after{content:"*";color:var(--sapField_RequiredColor);font-size:1.25rem;font-weight:700;position:relative;font-style:normal;vertical-align:middle;line-height:0}.ui5-label-text-wrapper{padding-inline-end:.075rem}:host([required][show-colon]) .ui5-label-required-colon:after{margin-inline-start:.125rem}:host([show-colon]) .ui5-label-required-colon{margin-inline-start:-.05rem;white-space:pre}
`},languageAware:!0})],Y_),Y_.define();const v2=Y_;let J0,A1;const bW=o=>{o.style.position="absolute",o.style.clip="rect(1px,1px,1px,1px)",o.style.userSelect="none",o.style.left="-1000px",o.style.top="-1000px",o.style.pointerEvents="none"};(o=>{QO?o():jq.attachEvent("boot",o)})(()=>{J0&&A1||(J0=document.createElement("span"),A1=document.createElement("span"),J0.classList.add("ui5-invisiblemessage-polite"),A1.classList.add("ui5-invisiblemessage-assertive"),J0.setAttribute("aria-live","polite"),A1.setAttribute("aria-live","assertive"),J0.setAttribute("role","alert"),A1.setAttribute("role","alert"),bW(J0),bW(A1),yO("ui5-announcement-area").appendChild(J0),yO("ui5-announcement-area").appendChild(A1))});var or=(o=>(o.None="None",o.Positive="Positive",o.Critical="Critical",o.Negative="Negative",o.Information="Information",o))(or||{});tr("slim-arrow-down",{pathData:"M420.5 187q6-6 11-6 6 0 12 6 5 5 5 11t-5 11l-165 165q-10 9-23 9t-22-9l-166-165q-5-5-5-11.5t5-11.5 11.5-5 11.5 5l160 160q3 3 5 3 3 0 6-3z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("slim-arrow-down",{pathData:"M96 186q0-11 7.5-18.5T122 160q10 0 18 8l116 121 116-121q8-8 18-8 11 0 18.5 7.5T416 186q0 10-7 17L275 344q-8 8-19 8t-19-8L103 203q-7-7-7-17z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("error",{pathData:"M512 256q0 53-20.5 100t-55 81.5-81 54.5-99.5 20-100-20.5-81.5-55T20 355 0 256q0-54 20-100.5t55-81T156.5 20 256 0t99.5 20T437 75t55 81.5 20 99.5zM399 364q3-3 3-6t-3-6l-86-86q-3-3-3-6t3-6l81-81q3-3 3-6t-3-6l-37-37q-2-2-6-2t-6 2l-83 82q-1 3-6 3-3 0-6-3l-84-83q-1-2-6-2-4 0-6 2l-37 37q-3 3-3 6t3 6l83 82q3 3 3 6t-3 6l-83 82q-2 2-2.5 4.5l-.5 2.5q0 3 3 5l36 37q4 2 6 2 4 0 6-2l85-84q2-2 6-2t6 2l88 88q4 2 6 2t6-2z",ltr:!1,accData:nW,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("error",{pathData:"M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm45 256l74-73q9-11 9-23 0-13-9.5-22.5T352 128q-12 0-23 9l-73 74-73-74q-10-9-23-9t-22.5 9.5T128 160q0 12 9 23l74 73-74 73q-9 10-9 23t9.5 22.5T160 384t23-9l73-74 73 74q11 9 23 9 13 0 22.5-9.5T384 352t-9-23z",ltr:!1,accData:nW,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("alert",{pathData:"M501 374q5 10 7.5 19.5T512 412v5q0 31-23 47t-50 16H74q-13 0-26-4t-23.5-12-17-20T0 417q0-13 4-22.5t9-20.5L198 38q21-38 61-38 38 0 59 38zM257 127q-13 0-23.5 8T223 161q1 7 2 12 3 25 4.5 48t3.5 61q0 11 7.5 16t16.5 5q22 0 23-21l2-36 9-85q0-18-10.5-26t-23.5-8zm0 299q20 0 31.5-12t11.5-32q0-19-11.5-31T257 339t-31.5 12-11.5 31q0 20 11.5 32t31.5 12z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("alert",{pathData:"M505 399q7 13 7 27 0 21-15.5 37.5T456 480H56q-25 0-40.5-16.5T0 426q0-14 7-27L208 59q8-14 21-20.5t27-6.5 27 6.5T304 59zm-249 17q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9zm32-240q0-14-9-23t-23-9-23 9-9 23v96q0 14 9 23t23 9 23-9 9-23v-96z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("sys-enter-2",{pathData:"M512 256q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256t20.5-100 55-81.5T157 20t99-20q53 0 100 20t81.5 54.5T492 156t20 100zm-118-87q2-4 2-7t-3-6l-36-36q-3-4-8-4t-8 5L237 294h-4l-70-52q-4-3-7-3t-4.5 2-2.5 3l-29 41q-3 3-3 6 0 5 5 8l113 95q2 2 7 2t8-4z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("sys-enter-2",{pathData:"M256 0q53 0 100 20t81.5 54.5T492 156t20 100-20 100-54.5 81.5T356 492t-100 20-100-20-81.5-54.5T20 356 0 256t20-100 54.5-81.5T156 20 256 0zm150 183q10-9 10-23 0-13-9.5-22.5T384 128t-22 9L186 308l-68-63q-9-9-22-9t-22.5 9.5T64 268q0 15 10 24l90 83q11 9 22 9 13 0 22-9z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("information",{pathData:"M0 256q0-53 20.5-100t55-81.5T157 20t99-20q54 0 100.5 20t81 55 54.5 81.5 20 99.5q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256zm226-89q14 11 30 11 17 0 29.5-11.5T298 138q0-19-13-31-12-12-29-12-19 0-30.5 12.5T214 138q0 17 12 29zm-34 201v33h128v-33h-32V215q0-6-7-6h-88v31h32v128h-33z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("information",{pathData:"M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm32 224q0-14-9-23t-23-9-23 9-9 23v160q0 14 9 23t23 9 23-9 9-23V224zm-32-64q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"});let AR=null;const MQ=new Set,vpe=new Set,ype=o=>{!o.dataTransfer||!(o.target instanceof HTMLElement)||vpe.has(o.target)||(AR=o.target)},bpe=()=>{AR=null},wpe=()=>{AR=null},wW=o=>{MQ.add(o),document.body.addEventListener("dragstart",ype),document.body.addEventListener("dragend",bpe),document.body.addEventListener("drop",wpe)},xW=o=>{MQ.delete(o),MQ.size},pR=()=>AR;var nc=(o=>(o.On="On",o.Before="Before",o.After="After",o))(nc||{}),Z0=(o=>(o.Vertical="Vertical",o.Horizontal="Horizontal",o))(Z0||{});const CW=(o,t,n,c)=>{const h=Math.abs(o-t),f=Math.abs(o-n),d=Math.abs(o-c);let p=[];switch(Math.min(h,f,d)){case h:p=[nc.Before];break;case f:p=[nc.On,h<d?nc.Before:nc.After];break;case d:p=[nc.After]}return p},EW=(o,t,n)=>{let c=Number.POSITIVE_INFINITY,h=null;for(let R=0;R<o.length;R++){const D=o[R],{left:O,width:V,top:$,height:G}=D.getBoundingClientRect();let X;X=n===Z0.Vertical?$+G/2:O+V/2;const te=Math.abs(t-X);te<c&&(c=te,h=D)}if(!h)return null;const{width:f,height:d,left:p,right:v,top:w,bottom:S}=h.getBoundingClientRect();let B;return B=n===Z0.Vertical?CW(t,w,w+d/2,S):CW(t,p,p+f/2,v),{element:h,placements:B}},SW=o=>{let t=o;return o.shadowRoot&&o.shadowRoot.activeElement&&(t=o.shadowRoot.activeElement),t};let fR=null;var RQ;(function(o){o.None="None",o.Single="Single",o.SingleStart="SingleStart",o.SingleEnd="SingleEnd",o.SingleAuto="SingleAuto",o.Multiple="Multiple",o.Delete="Delete"})(RQ||(RQ={}));const Rc=RQ;var DQ;(function(o){o.Button="Button",o.Scroll="Scroll",o.None="None"})(DQ||(DQ={}));const FQ=DQ;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var y2=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let ey=class extends xa{get _positionProperty(){return this.orientation===Z0.Vertical?"left":"top"}constructor(){super(),this.targetReference=null,this.ownerReference=null,this.placement="Before",this.orientation="Vertical"}onAfterRendering(){if(!this.targetReference||!this.ownerReference)return void Object.assign(this.style,{display:"none"});const{left:o,width:t,right:n,top:c,bottom:h,height:f}=this.targetReference.getBoundingClientRect(),{top:d,height:p}=this.ownerReference.getBoundingClientRect(),v={display:"",[this._positionProperty]:"",width:"",height:""};let w=0,S=!1,B=!1;if(this.orientation===Z0.Vertical){switch(this.placement){case nc.Before:w=o;break;case nc.On:v.width=`${t}px`,w=o;break;case nc.After:w=n}v.height=`${f}px`}if(this.orientation===Z0.Horizontal){switch(this.placement){case nc.Before:w=c;break;case nc.On:v.height=`${f}px`,w=c;break;case nc.After:w=h}v.width=`${t}px`,w-=d,w<=0&&(B=!0),w>=p&&(S=!0)}v[this._positionProperty]=`${w}px`,this.toggleAttribute("first",B),this.toggleAttribute("last",S),Object.assign(this.style,v)}get classes(){return{root:{"ui5-di-rect":this.placement===nc.On,"ui5-di-needle":this.placement!==nc.On}}}};y2([He({type:Object})],ey.prototype,"targetReference",void 0),y2([He({type:Object})],ey.prototype,"ownerReference",void 0),y2([He()],ey.prototype,"placement",void 0),y2([He()],ey.prototype,"orientation",void 0),ey=y2([Ds({tag:"ui5-drop-indicator",renderer:Ca,styles:{packageName:"@ui5/webcomponents",fileName:"themes/DropIndicator.css.ts",content:`:host{position:absolute;pointer-events:none;z-index:99}:host([orientation="Vertical"]) .ui5-di-needle{width:.125rem;height:100%;inset-block:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Vertical"]){margin-left:-.0625rem}:host([orientation="Horizontal"]) .ui5-di-needle{height:.125rem;width:100%;inset-inline:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Horizontal"]){margin-top:-.0625rem}:host([orientation="Horizontal"][placement="Before"][first]){margin-top:.3125rem}:host([orientation="Horizontal"][placement="After"][last]){margin-top:-.3125rem}:host([orientation="Vertical"]) .ui5-di-needle:before{left:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host([orientation="Horizontal"]) .ui5-di-needle:before{top:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host .ui5-di-rect{border:.125rem solid var(--sapContent_DragAndDropActiveColor);position:absolute;inset:0}:host .ui5-di-rect:before{content:" ";position:absolute;inset:0;background:var(--sapContent_DragAndDropActiveColor);opacity:.05}
`},template:function(o,t,n){return et`<div class="${br(this.classes.root)}"></div>`},dependencies:[]})],ey),ey.define();const BW=ey;var UQ;(function(o){o.All="All",o.Inner="Inner",o.None="None"})(UQ||(UQ={}));const IW=UQ;var kQ;(function(o){o.Top="Top",o.Bottom="Bottom"})(kQ||(kQ={}));const TW=kQ;function xpe(o,t,n){return et`<div class="ui5-busy-indicator-busy-area" title="${le(this.ariaTitle)}" tabindex="0" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuetext="Busy" aria-labelledby="${le(this.labelId)}" data-sap-focus-ref>${this.textPosition.top?Cpe.call(this,o,t,n):void 0}<div class="ui5-busy-indicator-circles-wrapper"><div class="ui5-busy-indicator-circle circle-animation-0"></div><div class="ui5-busy-indicator-circle circle-animation-1"></div><div class="ui5-busy-indicator-circle circle-animation-2"></div></div>${this.textPosition.bottom?Spe.call(this,o,t,n):void 0}</div>`}function Cpe(o,t,n){return et`${this.text?Epe.call(this,o,t,n):void 0}`}function Epe(o,t,n){return n?et`<${Lt("ui5-label",t,n)} id="${le(this._id)}-label" class="ui5-busy-indicator-text">${le(this.text)}</${Lt("ui5-label",t,n)}>`:et`<ui5-label id="${le(this._id)}-label" class="ui5-busy-indicator-text">${le(this.text)}</ui5-label>`}function Spe(o,t,n){return et`${this.text?Bpe.call(this,o,t,n):void 0}`}function Bpe(o,t,n){return n?et`<${Lt("ui5-label",t,n)} id="${le(this._id)}-label" class="ui5-busy-indicator-text">${le(this.text)}</${Lt("ui5-label",t,n)}>`:et`<ui5-label id="${le(this._id)}-label" class="ui5-busy-indicator-text">${le(this.text)}</ui5-label>`}function Ipe(o,t,n){return et`<span data-ui5-focus-redirect tabindex="0" @focusin="${this._redirectFocus}"></span>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var LQ,ty=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let ug=LQ=class extends xa{constructor(){super(),this.size="M",this.active=!1,this.delay=1e3,this.textPlacement="Bottom",this._isBusy=!1,this._keydownHandler=this._handleKeydown.bind(this),this._preventEventHandler=this._preventEvent.bind(this)}onEnterDOM(){this.addEventListener("keydown",this._keydownHandler,{capture:!0}),this.addEventListener("keyup",this._preventEventHandler,{capture:!0}),nf()&&this.setAttribute("desktop","")}onExitDOM(){this._busyTimeoutId&&(clearTimeout(this._busyTimeoutId),delete this._busyTimeoutId),this.removeEventListener("keydown",this._keydownHandler,!0),this.removeEventListener("keyup",this._preventEventHandler,!0)}get ariaTitle(){return LQ.i18nBundle.getText(Mde)}get labelId(){return this.text?`${this._id}-label`:void 0}get classes(){return{root:{"ui5-busy-indicator-root":!0}}}get textPosition(){return{top:this.text&&this.textPlacement===TW.Top,bottom:this.text&&this.textPlacement===TW.Bottom}}onBeforeRendering(){this.active?this._isBusy||this._busyTimeoutId||(this._busyTimeoutId=setTimeout(()=>{delete this._busyTimeoutId,this._isBusy=!0},Math.max(0,this.delay))):(this._busyTimeoutId&&(clearTimeout(this._busyTimeoutId),delete this._busyTimeoutId),this._isBusy=!1)}_handleKeydown(o){this._isBusy&&(o.stopImmediatePropagation(),W0(o)&&(this.focusForward=!0,this.shadowRoot.querySelector("[data-ui5-focus-redirect]").focus(),this.focusForward=!1))}_preventEvent(o){this._isBusy&&o.stopImmediatePropagation()}_redirectFocus(o){this.focusForward||(o.preventDefault(),this.shadowRoot.querySelector(".ui5-busy-indicator-busy-area").focus())}};ty([He()],ug.prototype,"text",void 0),ty([He()],ug.prototype,"size",void 0),ty([He({type:Boolean})],ug.prototype,"active",void 0),ty([He({type:Number})],ug.prototype,"delay",void 0),ty([He()],ug.prototype,"textPlacement",void 0),ty([He({type:Boolean})],ug.prototype,"_isBusy",void 0),ty([al("@ui5/webcomponents")],ug,"i18nBundle",void 0),ug=LQ=ty([Ds({tag:"ui5-busy-indicator",languageAware:!0,styles:{packageName:"@ui5/webcomponents",fileName:"themes/BusyIndicator.css.ts",content:`:host(:not([hidden])){display:inline-block}:host([_is-busy]){color:var(--_ui5-v2-4-0_busy_indicator_color)}:host([size="S"]) .ui5-busy-indicator-root{min-width:1.625rem;min-height:.5rem}:host([size="S"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:1.75rem}:host([size="S"]) .ui5-busy-indicator-circle{width:.5rem;height:.5rem}:host([size="S"]) .ui5-busy-indicator-circle:first-child,:host([size="S"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.0625rem}:host(:not([size])) .ui5-busy-indicator-root,:host([size="M"]) .ui5-busy-indicator-root{min-width:3.375rem;min-height:1rem}:host([size="M"]) .ui5-busy-indicator-circle:first-child,:host([size="M"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.1875rem}:host(:not([size])[text]:not([text=""])) .ui5-busy-indicator-root,:host([size="M"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:2.25rem}:host(:not([size])) .ui5-busy-indicator-circle,:host([size="M"]) .ui5-busy-indicator-circle{width:1rem;height:1rem}:host([size="L"]) .ui5-busy-indicator-root{min-width:6.5rem;min-height:2rem}:host([size="L"]) .ui5-busy-indicator-circle:first-child,:host([size="L"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.25rem}:host([size="L"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:3.25rem}:host([size="L"]) .ui5-busy-indicator-circle{width:2rem;height:2rem}.ui5-busy-indicator-root{display:flex;justify-content:center;align-items:center;position:relative;background-color:inherit;height:inherit;border-radius:inherit}.ui5-busy-indicator-busy-area{position:absolute;z-index:99;inset:0;display:flex;justify-content:center;align-items:center;background-color:inherit;flex-direction:column;border-radius:inherit}:host(:not(:empty)) .ui5-busy-indicator-busy-area{background-color:var(--_ui5-v2-4-0_busy_indicator_block_layer)}:host([desktop]) .ui5-busy-indicator-busy-area:focus,.ui5-busy-indicator-busy-area:focus-visible{outline:var(--_ui5-v2-4-0_busy_indicator_focus_outline);outline-offset:-2px}.ui5-busy-indicator-circles-wrapper{line-height:0}.ui5-busy-indicator-circle{display:inline-block;background-color:currentColor;border-radius:50%}.ui5-busy-indicator-circle:before{content:"";width:100%;height:100%;border-radius:100%}.circle-animation-0{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11)}.circle-animation-1{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.2s}.circle-animation-2{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.4s}.ui5-busy-indicator-text{width:100%;text-align:center}:host([text-placement="Top"]) .ui5-busy-indicator-text{margin-bottom:.5rem}:host(:not([text-placement])) .ui5-busy-indicator-text,:host([text-placement="Bottom"]) .ui5-busy-indicator-text{margin-top:.5rem}@keyframes grow{0%,50%,to{-webkit-transform:scale(.5);-moz-transform:scale(.5);transform:scale(.5)}25%{-webkit-transform:scale(1);-moz-transform:scale(1);transform:scale(1)}}
`},renderer:Ca,template:function(o,t,n){return et`<div class="${br(this.classes.root)}">${this._isBusy?xpe.call(this,o,t,n):void 0}<slot></slot>${this._isBusy?Ipe.call(this,o,t,n):void 0}</div> `},dependencies:[v2]})],ug),ug.define();const Tpe=ug;function MW(o,t,n){return et`<slot name="header" />`}function RW(o,t,n){return et`<header id="${le(this.headerID)}" class="ui5-list-header">${le(this.headerText)}</header>`}function DW(o,t,n){return et`<div id="${le(this._id)}-before" tabindex="0" role="none" class="ui5-list-focusarea"></div>`}function FW(o,t,n){return et`<li tabindex="0" id="${le(this._id)}-nodata" class="ui5-list-nodata"><div id="${le(this._id)}-nodata-text" class="ui5-list-nodata-text">${le(this.noDataText)}</div></li>`}function UW(o,t,n){return et`<div growing-button part="growing-button"><div part="growing-button-inner" tabindex="0" role="button" id="${le(this._id)}-growing-btn" aria-labelledby="${le(this._id)}-growingButton-text" ?active="${this._loadMoreActive}" @click="${this._onLoadMoreClick}" @keydown="${this._onLoadMoreKeydown}" @keyup="${this._onLoadMoreKeyup}" @mousedown="${this._onLoadMoreMousedown}" @mouseup="${this._onLoadMoreMouseup}" growing-button-inner>${this.loading?Mpe.call(this,o,t,n):void 0}<span id="${le(this._id)}-growingButton-text" growing-button-text>${le(this._growingButtonText)}</span></div></div>`}function Mpe(o,t,n){return n?et`<${Lt("ui5-busy-indicator",t,n)} delay="${le(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></${Lt("ui5-busy-indicator",t,n)}>`:et`<ui5-busy-indicator delay="${le(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></ui5-busy-indicator>`}function kW(o,t,n){return et`<footer id="${le(this._id)}-footer" class="ui5-list-footer">${le(this.footerText)}</footer>`}function LW(o,t,n){return et`<div id="${le(this._id)}-after" tabindex="0" role="none" class="ui5-list-focusarea"></div>`}function PW(o,t,n){return n?et`<${Lt("ui5-li-group-header",t,n)} ?focused="${this.focused}" part="header">${this.hasFormattedHeader?OW.call(this,o,t,n):QW.call(this,o,t,n)}</${Lt("ui5-li-group-header",t,n)}>`:et`<ui5-li-group-header ?focused="${this.focused}" part="header">${this.hasFormattedHeader?OW.call(this,o,t,n):QW.call(this,o,t,n)}</ui5-li-group-header>`}function OW(o,t,n){return et`<slot name="header"></slot>`}function QW(o,t,n){return et`${le(this.headerText)}`}var PQ;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),tr("edit",{pathData:"M475 104q5 7 5 12 0 6-5 11L150 453q-4 4-8 4L32 480l22-110q0-5 4-9L384 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L84 381l46 46z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("edit",{pathData:"M505 94q7 9 7 18 0 11-6 17L130 505q-7 7-18 7H26q-11 0-18.5-7.5T0 486v-86q1-5 1.5-8.5T6 384L382 7q9-7 18-7t18 7zM364 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),function(o){o.None="None",o.Positive="Positive",o.Critical="Critical",o.Negative="Negative",o.Information="Information"}(PQ||(PQ={}));const Rpe=PQ;var OQ;(function(o){o.Inactive="Inactive",o.Active="Active",o.Detail="Detail",o.Navigation="Navigation"})(OQ||(OQ={}));const Bm=OQ,QQ=(o,t)=>{const n=t||[];return o&&o.forEach(c=>{if(c.nodeType===Node.TEXT_NODE||c.nodeType===Node.COMMENT_NODE)return;const h=c;if(!h.hasAttribute("data-sap-no-tab-ref"))if((f=>{if(!f||f.hasAttribute("data-sap-no-tab-ref")||aR(f))return!1;const d=f.getAttribute("tabindex");if(d!=null)return parseInt(d)>=0;const p=f.nodeName.toLowerCase();return!(p!=="a"&&!/^(input|select|textarea|button|object)$/.test(p)||f.disabled)})(h)&&n.push(h),h.tagName==="SLOT")QQ(h.assignedNodes(),n);else{const f=h.shadowRoot?h.shadowRoot.children:h.children;QQ([...f],n)}}),n};Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var iy=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let Im=class extends xa{constructor(){super(...arguments),this.selected=!1,this.movable=!1,this.hasBorder=!1,this.disabled=!1,this.focused=!1,this.actionable=!1}onEnterDOM(){nf()&&this.setAttribute("desktop","")}onBeforeRendering(){this.actionable=!0}_onfocusin(o){this.fireDecoratorEvent("_request-tabindex-change",o),o.target===this.getFocusDomRef()&&this.fireDecoratorEvent("_focused",o)}_onkeydown(o){return W0(o)?this._handleTabNext(o):Y5(o)?this._handleTabPrevious(o):void(this.getFocusDomRef().matches(":has(:focus-within)")||(Do(o)&&o.preventDefault(),Zo(o)&&this.fireItemPress(o)))}_onkeyup(o){this.getFocusDomRef().matches(":has(:focus-within)")||Do(o)&&this.fireItemPress(o)}_onclick(o){this.getFocusDomRef().matches(":has(:focus-within)")||this.fireItemPress(o)}fireItemPress(o){!this.disabled&&this._pressable&&(Zo(o)&&o.preventDefault(),this.fireDecoratorEvent("_press",{item:this,selected:this.selected,key:o.key}))}_handleTabNext(o){this.shouldForwardTabAfter()&&(this.fireDecoratorEvent("_forward-after")||o.preventDefault())}_handleTabPrevious(o){const t=o.target;this.shouldForwardTabBefore(t)&&this.fireDecoratorEvent("_forward-before")}shouldForwardTabAfter(){const o=(t=this.getFocusDomRef(),QQ([...t.children]));var t;return o.length===0||o[o.length-1]===bC()}shouldForwardTabBefore(o){return this.getFocusDomRef()===o}get classes(){return{main:{"ui5-li-root":!0,"ui5-li--focusable":this._focusable}}}get _ariaDisabled(){return!!this.disabled||void 0}get _focusable(){return!this.disabled}get _pressable(){return!0}get hasConfigurableMode(){return!1}get _effectiveTabIndex(){return this._focusable?this.selected?0:this.forcedTabIndex:-1}};iy([He({type:Boolean})],Im.prototype,"selected",void 0),iy([He({type:Boolean})],Im.prototype,"movable",void 0),iy([He({type:Boolean})],Im.prototype,"hasBorder",void 0),iy([He()],Im.prototype,"forcedTabIndex",void 0),iy([He({type:Boolean})],Im.prototype,"disabled",void 0),iy([He({type:Boolean})],Im.prototype,"focused",void 0),iy([He({type:Boolean})],Im.prototype,"actionable",void 0),Im=iy([Ds({renderer:Ca,styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ListItemBase.css.ts",content:`:host{box-sizing:border-box;height:var(--_ui5-v2-4-0_list_item_base_height);background-color:var(--ui5-v2-4-0-listitem-background-color);border-bottom:.0625rem solid transparent}:host(:not([hidden])){display:block}:host([disabled]){opacity:var(--_ui5-v2-4-0-listitembase_disabled_opacity);pointer-events:none}:host([actionable]:not([disabled]):not([ui5-li-group-header])){cursor:pointer}:host([has-border]){border-bottom:var(--ui5-v2-4-0-listitem-border-bottom)}:host([selected]){background-color:var(--sapList_SelectionBackgroundColor);border-bottom:var(--ui5-v2-4-0-listitem-selected-border-bottom)}:host([actionable]:not([active]):not([selected]):not([ui5-li-group-header]):hover){background-color:var(--sapList_Hover_Background)}:host([actionable][selected]:not([active],[data-moving]):hover){background-color:var(--sapList_Hover_SelectionBackground)}:host([active][actionable]:not([data-moving])),:host([active][actionable][selected]:not([data-moving])){background-color:var(--sapList_Active_Background)}:host([desktop]:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root.ui5-li--focusable:after,:host(:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus-visible:after,:host([desktop]:not([data-moving])) .ui5-li-root .ui5-li-content:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root .ui5-li-content:after,:host(:not([data-moving])) .ui5-li-root .ui5-li-content:focus-visible:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none}.ui5-li-root{position:relative;display:flex;align-items:center;width:100%;height:100%;padding:var(--_ui5-v2-4-0_list_item_base_padding);box-sizing:border-box;background-color:inherit}.ui5-li-root.ui5-li--focusable{outline:none}.ui5-li-content{display:flex;align-items:center;flex:auto;overflow:hidden;max-width:100%;font-family:"72override",var(--sapFontFamily);color:var(--sapList_TextColor)}.ui5-li-content .ui5-li-title{color:var(--sapList_TextColor);font-size:var(--_ui5-v2-4-0_list_item_title_size)}.ui5-li-text-wrapper{display:flex;flex-direction:row;justify-content:space-between;flex:auto;min-width:1px;line-height:normal}
`},{packageName:"@ui5/webcomponents",fileName:"themes/DraggableElement.css.ts",content:`[draggable=true]{cursor:grab!important}[draggable=true][data-moving]{cursor:grabbing!important;opacity:var(--sapContent_DisabledOpacity)}
`}]}),Fn("_request-tabindex-change",{bubbles:!0}),Fn("_press",{bubbles:!0}),Fn("_focused",{bubbles:!0}),Fn("_forward-after",{bubbles:!0,cancelable:!0}),Fn("_forward-before",{bubbles:!0})],Im);const BC=Im;class ny{static hasGroup(t){return this.groups.has(t)}static getGroup(t){return this.groups.get(t)}static getCheckedRadioFromGroup(t){return this.checkedRadios.get(t)}static removeGroup(t){return this.checkedRadios.delete(t),this.groups.delete(t)}static addToGroup(t,n){this.hasGroup(n)?(this.enforceSingleSelection(t,n),this.getGroup(n)&&this.getGroup(n).push(t)):this.createGroup(t,n),this.updateTabOrder(n)}static removeFromGroup(t,n){const c=this.getGroup(n);if(!c)return;const h=this.getCheckedRadioFromGroup(n);c.forEach((f,d,p)=>{if(t._id===f._id)return p.splice(d,1)}),h===t&&this.checkedRadios.set(n,null),c.length||this.removeGroup(n),this.updateTabOrder(n)}static createGroup(t,n){t.checked&&this.checkedRadios.set(n,t),this.groups.set(n,[t])}static selectNextItem(t,n){const c=this.getGroup(n);if(!c)return;const h=c.length,f=c.indexOf(t);if(h<=1)return;const d=this._nextSelectable(f,c);d&&this.updateSelectionInGroup(d,n)}static updateFormValidity(t){const n=this.getGroup(t);if(!n)return;const c=n.some(f=>f.required),h=n.some(f=>f.checked);n.forEach(f=>{f._groupChecked=h,f._groupRequired=c})}static updateTabOrder(t){const n=this.getGroup(t);if(!n)return;const c=n.some(h=>h.checked);n.filter(h=>!h.disabled).forEach((h,f)=>{h._tabIndex=c?h.checked?"0":"-1":f===0?"0":"-1"})}static selectPreviousItem(t,n){const c=this.getGroup(n);if(!c)return;const h=c.length,f=c.indexOf(t);if(h<=1)return;const d=this._previousSelectable(f,c);d&&this.updateSelectionInGroup(d,n)}static selectItem(t,n){this.updateSelectionInGroup(t,n),this.updateTabOrder(n)}static updateSelectionInGroup(t,n){const c=this.getCheckedRadioFromGroup(n);c&&this._deselectRadio(c),this._selectRadio(t),this.checkedRadios.set(n,t)}static _deselectRadio(t){t&&(t.checked=!1)}static _selectRadio(t){t&&(t.focus(),t.checked=!0,t._checked=!0,t.fireDecoratorEvent("change"))}static _nextSelectable(t,n){if(!n)return null;let c=null;if(t===n.length-1){if(n[0].disabled||n[0].readonly)return this._nextSelectable(1,n);c=n[0]}else{if(n[t+1].disabled||n[t+1].readonly)return this._nextSelectable(t+1,n);c=n[t+1]}return c}static _previousSelectable(t,n){const c=n.length;let h=null;if(t===0){if(n[c-1].disabled||n[c-1].readonly)return this._previousSelectable(c-1,n);h=n[c-1]}else{if(n[t-1].disabled||n[t-1].readonly)return this._previousSelectable(t-1,n);h=n[t-1]}return h}static enforceSingleSelection(t,n){const c=this.getCheckedRadioFromGroup(n);t.checked?c?t!==c&&(this._deselectRadio(c),this.checkedRadios.set(n,t)):this.checkedRadios.set(n,t):t===c&&this.checkedRadios.set(n,null),this.updateTabOrder(n),this.updateFormValidity(n)}static get groups(){return this._groups||(this._groups=new Map),this._groups}static get checkedRadios(){return this._checkedRadios||(this._checkedRadios=new Map),this._checkedRadios}}function Dpe(o,t,n){return n?et`<${Lt("ui5-label",t,n)} id="${le(this._id)}-label" class="ui5-radio-label" for="${le(this._id)}" wrapping-type="${le(this.wrappingType)}">${le(this.text)}</${Lt("ui5-label",t,n)}>`:et`<ui5-label id="${le(this._id)}-label" class="ui5-radio-label" for="${le(this._id)}" wrapping-type="${le(this.wrappingType)}">${le(this.text)}</ui5-label>`}function Fpe(o,t,n){return et`<span id="${le(this._id)}-descr" class="ui5-hidden-text">${le(this.valueStateText)}</span>`}function Upe(o,t,n){return u2`<circle part="outer-ring" class="ui5-radio-svg-outer" cx="50%" cy="50%" r="50%" /><circle part="inner-ring" class="ui5-radio-svg-inner" cx="50%" cy="50%" />`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var p1,Gu=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let NQ,NW=!1,rc=p1=class extends xa{get formValidityMessage(){return p1.i18nBundle.getText(TAe)}get formValidity(){return{valueMissing:this._groupRequired&&!this._groupChecked}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.checked?this.value||"on":null}constructor(){super(),this.disabled=!1,this.readonly=!1,this.required=!1,this.checked=!1,this.valueState="None",this.value="",this.wrappingType="Normal",this.active=!1,this._groupChecked=!1,this._groupRequired=!1,this._name="",this._checked=!1,this._deactivate=()=>{NQ&&(NQ.active=!1)},NW||(document.addEventListener("mouseup",this._deactivate),NW=!0)}onAfterRendering(){this.syncGroup()}onEnterDOM(){nf()&&this.setAttribute("desktop","")}onExitDOM(){this.syncGroup(!0)}syncGroup(o){const t=this._name,n=this.name,c=this._checked,h=this.checked;o&&ny.removeFromGroup(this,t),n!==t?(t&&ny.removeFromGroup(this,t),n&&ny.addToGroup(this,n)):n&&this.isConnected&&ny.enforceSingleSelection(this,n),this.name&&h!==c&&ny.updateTabOrder(this.name),this._name=this.name||"",this._checked=this.checked}_onclick(){return this.toggle()}_handleDown(o){const t=this.name;t&&(o.preventDefault(),ny.selectNextItem(this,t))}_handleUp(o){const t=this.name;t&&(o.preventDefault(),ny.selectPreviousItem(this,t))}_onkeydown(o){if(Do(o))return this.active=!0,o.preventDefault();if(Zo(o))return this.active=!0,this.toggle();const t=this.effectiveDir==="rtl";(_A(o)||!t&&q0(o)||t&&V0(o))&&this._handleDown(o),(xd(o)||!t&&V0(o)||t&&q0(o))&&this._handleUp(o)}_onkeyup(o){Do(o)&&this.toggle(),this.active=!1}_onmousedown(){this.active=!0,NQ=this}_onmouseup(){this.active=!1}_onfocusout(){this.active=!1}toggle(){return this.canToggle()?this.name?(ny.selectItem(this,this.name),this):(this.checked=!this.checked,this.fireDecoratorEvent("change"),this):this}canToggle(){return!(this.disabled||this.readonly||this.checked)}get classes(){return{inner:{"ui5-radio-inner--hoverable":!this.disabled&&!this.readonly&&nf()}}}get effectiveAriaDisabled(){return this.disabled?"true":null}get ariaLabelText(){return[K0(this),this.text].filter(Boolean).join(" ")}get effectiveAriaDescribedBy(){return this.hasValueState?`${this._id}-descr`:void 0}get hasValueState(){return this.valueState!==or.None}get valueStateText(){switch(this.valueState){case or.Negative:return p1.i18nBundle.getText(eR);case or.Critical:return p1.i18nBundle.getText(tR);case or.Positive:return p1.i18nBundle.getText(iR);case or.Information:return p1.i18nBundle.getText(uQ);default:return""}}get effectiveTabIndex(){const o=this.getAttribute("tabindex");return this.disabled?"-1":this.name?this._tabIndex:o||"0"}};Gu([He({type:Boolean})],rc.prototype,"disabled",void 0),Gu([He({type:Boolean})],rc.prototype,"readonly",void 0),Gu([He({type:Boolean})],rc.prototype,"required",void 0),Gu([He({type:Boolean})],rc.prototype,"checked",void 0),Gu([He()],rc.prototype,"text",void 0),Gu([He()],rc.prototype,"valueState",void 0),Gu([He()],rc.prototype,"name",void 0),Gu([He()],rc.prototype,"value",void 0),Gu([He()],rc.prototype,"wrappingType",void 0),Gu([He()],rc.prototype,"accessibleName",void 0),Gu([He()],rc.prototype,"accessibleNameRef",void 0),Gu([He()],rc.prototype,"_tabIndex",void 0),Gu([He({type:Boolean})],rc.prototype,"active",void 0),Gu([He({type:Boolean,noAttribute:!0})],rc.prototype,"_groupChecked",void 0),Gu([He({type:Boolean,noAttribute:!0})],rc.prototype,"_groupRequired",void 0),Gu([al("@ui5/webcomponents")],rc,"i18nBundle",void 0),rc=p1=Gu([Ds({tag:"ui5-radio-button",languageAware:!0,formAssociated:!0,renderer:Ca,template:function(o,t,n){return et`<div class="ui5-radio-root" role="radio" aria-checked="${le(this.checked)}" aria-disabled="${le(this.effectiveAriaDisabled)}" aria-describedby="${le(this.effectiveAriaDescribedBy)}" aria-label="${le(this.ariaLabelText)}" tabindex="${le(this.effectiveTabIndex)}" @click="${this._onclick}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @focusout="${this._onfocusout}"><div class='ui5-radio-inner ${br(this.classes.inner)}'><svg class="ui5-radio-svg" focusable="false" aria-hidden="true">${Upe.call(this,o,t,n)}</svg><input type='radio' ?required="${this.required}" ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.effectiveAriaDisabled}" name="${le(this.name)}"  data-sap-no-tab-ref/></div>${this.text?Dpe.call(this,o,t,n):void 0}${this.hasValueState?Fpe.call(this,o,t,n):void 0}</div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/RadioButton.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_radio_button_min_width);max-width:100%;text-overflow:ellipsis;overflow:hidden;color:var(--_ui5-v2-4-0_radio_button_color);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([disabled])) .ui5-radio-root{cursor:pointer}:host([checked]){color:var(--_ui5-v2-4-0_radio_button_checked_fill)}:host([checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_inner_ring_color)}:host([checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_color)}:host([disabled]) .ui5-radio-root{color:var(--_ui5-v2-4-0_radio_button_color);opacity:var(--sapContent_DisabledOpacity)}:host([disabled][checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_color)}:host(:not([disabled])[desktop]) .ui5-radio-root:focus:before,:host(:not([disabled])) .ui5-radio-root:focus-visible:before{content:"";display:var(--_ui5-v2-4-0_radio_button_focus_outline);position:absolute;inset:var(--_ui5-v2-4-0_radio_button_focus_dist);pointer-events:none;border:var(--_ui5-v2-4-0_radio_button_border_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_hover_color)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])[checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}.ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer,:host([checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill)}:host([active][checked]:not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}:host([active]:not([checked]):not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_active_color)}:host([text]) .ui5-radio-root{padding-inline-end:var(--_ui5-v2-4-0_radio_button_border_width)}:host([text][desktop]) .ui5-radio-root:focus:before,:host([text]) .ui5-radio-root:focus-visible:before{inset-inline-end:0px}:host([text]) .ui5-radio-inner{padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label)}:host([checked][readonly]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_read_only_inner_ring_color)}:host([readonly]) .ui5-radio-root .ui5-radio-svg-outer{fill:var(--sapField_ReadOnly_Background);stroke:var(--sapField_ReadOnly_BorderColor);stroke-dasharray:var(--_ui5-v2-4-0_radio_button_read_only_border_type);stroke-width:var(--_ui5-v2-4-0_radio_button_read_only_border_width)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-svg-outer{stroke-width:var(--sapField_InvalidBorderWidth)}:host([value-state="Information"]) .ui5-radio-svg-outer{stroke-width:var(--_ui5-v2-4-0_radio_button_information_border_width)}:host([value-state="Negative"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_error_fill)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InvalidColor);fill:var(--sapField_InvalidBackground)}:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_error)}:host([value-state="Critical"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_warning_fill)}:host([value-state="Critical"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_WarningColor);fill:var(--sapField_WarningBackground)}:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_warning)}:host([value-state="Positive"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_success_fill)}:host([value-state="Positive"]) .ui5-radio-svg-outer,:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_SuccessColor);fill:var(--sapField_SuccessBackground)}:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_success)}:host([value-state="Information"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_information_fill)}:host([value-state="Information"]) .ui5-radio-svg-outer,:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InformationColor);fill:var(--sapField_InformationBackground)}:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_information)}:host([value-state="Negative"]) .ui5-radio-root,:host([value-state="Critical"]) .ui5-radio-root,:host([value-state="Information"]) .ui5-radio-root{stroke-dasharray:var(--_ui5-v2-4-0_radio_button_warning_error_border_dash)}.ui5-radio-root{height:auto;position:relative;display:inline-flex;flex-wrap:nowrap;outline:none;max-width:100%;box-sizing:border-box;border:var(--_ui5-v2-4-0_radio_button_border);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}.ui5-radio-inner{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding);flex-shrink:0;height:var(--_ui5-v2-4-0_radio_button_inner_size);font-size:1rem;pointer-events:none;vertical-align:top}.ui5-radio-inner{outline:none}.ui5-radio-inner input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit;margin:0}[ui5-label].ui5-radio-label{display:flex;align-items:center;padding-inline-end:var(--_ui5-v2-4-0_radio_button_label_offset);padding-block:var(--_ui5-v2-4-0_radio_button_label_side_padding);vertical-align:top;max-width:100%;pointer-events:none;color:var(--_ui5-v2-4-0_radio_button_label_color);overflow-wrap:break-word}:host([wrapping-type="None"][text]) .ui5-radio-root{height:var(--_ui5-v2-4-0_radio_button_height)}:host([wrapping-type="None"][text]) [ui5-label].ui5-radio-label{text-overflow:ellipsis;overflow:hidden}.ui5-radio-svg{height:var(--_ui5-v2-4-0_radio_button_svg_size);width:var(--_ui5-v2-4-0_radio_button_svg_size);overflow:visible;pointer-events:none}.ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_outer_ring_bg);stroke:currentColor;stroke-width:var(--_ui5-v2-4-0_radio_button_outer_ring_width)}.ui5-radio-svg-inner{fill:none;r:var(--_ui5-v2-4-0_radio_button_inner_ring_radius)}.ui5-radio-svg-outer,.ui5-radio-svg-inner{flex-shrink:0}:host(.ui5-li-singlesel-radiobtn) .ui5-radio-root .ui5-radio-inner .ui5-radio-svg-outer{fill:var(--sapList_Background)}
`},dependencies:[v2]}),Fn("change",{bubbles:!0})],rc),rc.define();const kpe=rc;function Lpe(o,t,n){return n?et`<div class="ui5-checkbox-display-only-icon-inner"><${Lt("ui5-icon",t,n)} aria-hidden="true" name=${le(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></${Lt("ui5-icon",t,n)}></div>`:et`<div class="ui5-checkbox-display-only-icon-inner"><ui5-icon aria-hidden="true" name=${le(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></ui5-icon></div>`}function Ppe(o,t,n){return et`<div id="${le(this._id)}-CbBg" class="ui5-checkbox-inner">${this.isCompletelyChecked?Ope.call(this,o,t,n):void 0}</div>`}function Ope(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></ui5-icon>`}function Qpe(o,t,n){return n?et`<${Lt("ui5-label",t,n)} part="label" id="${le(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${le(this.wrappingType)}">${le(this.text)}</${Lt("ui5-label",t,n)}>`:et`<ui5-label part="label" id="${le(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${le(this.wrappingType)}">${le(this.text)}</ui5-label>`}function Npe(o,t,n){return et`<span id="${le(this._id)}-descr" class="ui5-hidden-text">${le(this.valueStateText)}</span>`}tr("accept",{pathData:"M456 94q5 5 5 11 0 4-2 8L237 439q-4 8-8.5 8.5t-5.5.5q-7 0-12-5L60 276q-5-5-5-10l.5-3.5L61 254l25-25q6-6 12-6t11 6l96 96q5 5 12 5l4.5-.5 8.5-8.5L405 72q4-7 8.5-7.5t5.5-.5q6 0 11 4z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("accept",{pathData:"M187 416q-12 0-20-9L71 299q-7-7-7-17 0-11 7.5-18.5T90 256q12 0 19 9l77 87 217-247q8-9 19-9t18.5 7.5T448 122q0 10-6 16L206 407q-7 9-19 9z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("complete",{pathData:"M492 25q4 4 4 9 0 3-2 7L309 313q-3 6-7 6.5t-5 .5q-6 0-10-4L162 177q-4-5-4-9 0-5 4-9l21-21q5-5 10-5t9 5l80 80q4 4 9 4 1 0 5-.5t7-7.5L449 7q3-6 7-6.5t5-.5q5 0 9 4zm-60 295h32v128q0 14-9.5 23t-22.5 9H48q-14 0-23-9t-9-23V64q0-13 9-22.5T48 32h128v32H48v384h384V320z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("complete",{pathData:"M438 224q11 0 18.5 7.5T464 250v140q0 38-26 64t-64 26H106q-38 0-64-26t-26-64V122q0-38 26-64t64-26h237q11 0 18 7.5t7 18.5-7 18-18 7H106q-16 0-27.5 11.5T67 122v268q0 16 11.5 27.5T106 429h268q16 0 27.5-11.5T413 390V250q0-11 7-18.5t18-7.5zm32-192q11 0 18.5 7.5T496 58t-7 17L257 312q-6 8-18 8-10 0-18-8l-70-71q-7-7-7-18t7.5-18 18.5-7 18 7l51 53L452 40q8-8 18-8z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("border",{pathData:"M448 32q13 0 22.5 9t9.5 23v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-14 9-23t23-9h384zm0 32H64v384h384V64z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("border",{pathData:"M390 480H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268q38 0 64 26t26 64v268q0 38-26 64t-64 26zM122 83q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122q0-17-11-28t-28-11H122z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("tri-state",{pathData:"M448 32q13 0 22.5 9.5T480 64v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-13 9-22.5T64 32h384zm0 32H64v384h384V64zM160 345V169q0-8 8-8h176q8 0 8 8v176q0 8-8 8H168q-8 0-8-8z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("tri-state",{pathData:"M390 32q38 0 64 26t26 64v268q0 38-26 64t-64 26H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268zm39 90q0-17-11-28t-28-11H122q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122zm-77 38v192H160V160h192z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var IC,Ed=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let HQ,HW=!1,ou=IC=class extends xa{get formValidityMessage(){return IC.i18nBundle.getText(BAe)}get formValidity(){return{valueMissing:this.required&&!this.checked}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.checked?"on":null}constructor(){super(),this.disabled=!1,this.readonly=!1,this.displayOnly=!1,this.required=!1,this.indeterminate=!1,this.checked=!1,this.valueState="None",this.wrappingType="Normal",this.active=!1,this._deactivate=()=>{HQ&&(HQ.active=!1)},HW||(document.addEventListener("mouseup",this._deactivate),HW=!0)}onEnterDOM(){nf()&&this.setAttribute("desktop","")}_onclick(){this.toggle()}_onmousedown(){this.readonly||this.disabled||(this.active=!0,HQ=this)}_onmouseup(){this.active=!1}_onfocusout(){this.active=!1}_onkeydown(o){Do(o)&&o.preventDefault(),this.readonly||this.disabled||(Zo(o)&&this.toggle(),this.active=!0)}_onkeyup(o){Do(o)&&this.toggle(),this.active=!1}toggle(){if(this.canToggle()){const o={checked:this.checked,indeterminate:this.indeterminate};this.indeterminate?(this.indeterminate=!1,this.checked=!0):this.checked=!this.checked;const t=!this.fireDecoratorEvent("change"),n=!this.fireDecoratorEvent("value-changed");(t||n)&&(this.checked=o.checked,this.indeterminate=o.indeterminate)}return this}canToggle(){return!(this.disabled||this.readonly||this.displayOnly)}valueStateTextMappings(){return{Negative:IC.i18nBundle.getText(eR),Critical:IC.i18nBundle.getText(tR),Positive:IC.i18nBundle.getText(iR)}}get ariaLabelText(){return K0(this)}get classes(){return{main:{"ui5-checkbox--hoverable":!this.disabled&&!this.readonly&&nf()}}}get ariaReadonly(){return this.readonly||this.displayOnly?"true":void 0}get effectiveAriaDisabled(){return this.disabled?"true":void 0}get effectiveAriaChecked(){return this.indeterminate&&this.checked?"mixed":this.checked}get ariaLabelledBy(){if(!this.ariaLabelText)return this.text?`${this._id}-label`:void 0}get ariaDescribedBy(){return this.hasValueState?`${this._id}-descr`:void 0}get hasValueState(){return this.valueState!==or.None}get valueStateText(){if(this.valueState!==or.None&&this.valueState!==or.Information)return this.valueStateTextMappings()[this.valueState]}get effectiveTabIndex(){const o=this.getAttribute("tabindex");return this.disabled||this.displayOnly?void 0:o||"0"}get isCompletelyChecked(){return this.checked&&!this.indeterminate}get isDisplayOnly(){return this.displayOnly&&!this.disabled}get displayOnlyIcon(){return this.isCompletelyChecked?"complete":this.checked&&this.indeterminate?"tri-state":"border"}};Ed([He()],ou.prototype,"accessibleNameRef",void 0),Ed([He()],ou.prototype,"accessibleName",void 0),Ed([He({type:Boolean})],ou.prototype,"disabled",void 0),Ed([He({type:Boolean})],ou.prototype,"readonly",void 0),Ed([He({type:Boolean})],ou.prototype,"displayOnly",void 0),Ed([He({type:Boolean})],ou.prototype,"required",void 0),Ed([He({type:Boolean})],ou.prototype,"indeterminate",void 0),Ed([He({type:Boolean})],ou.prototype,"checked",void 0),Ed([He()],ou.prototype,"text",void 0),Ed([He()],ou.prototype,"valueState",void 0),Ed([He()],ou.prototype,"wrappingType",void 0),Ed([He()],ou.prototype,"name",void 0),Ed([He({type:Boolean})],ou.prototype,"active",void 0),Ed([al("@ui5/webcomponents")],ou,"i18nBundle",void 0),ou=IC=Ed([Ds({tag:"ui5-checkbox",languageAware:!0,formAssociated:!0,renderer:Ca,template:function(o,t,n){return et`<div class="ui5-checkbox-root ${br(this.classes.main)}" role="checkbox" part="root" aria-checked="${le(this.effectiveAriaChecked)}" aria-readonly="${le(this.ariaReadonly)}" aria-disabled="${le(this.effectiveAriaDisabled)}" aria-label="${le(this.ariaLabelText)}" aria-labelledby="${le(this.ariaLabelledBy)}" aria-describedby="${le(this.ariaDescribedBy)}" aria-required="${le(this.required)}" tabindex="${le(this.effectiveTabIndex)}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click="${this._onclick}" @focusout="${this._onfocusout}">${this.isDisplayOnly?Lpe.call(this,o,t,n):Ppe.call(this,o,t,n)}<input id="${le(this._id)}-CB" type='checkbox' ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.disabled}" tabindex="-1" aria-hidden="true" data-sap-no-tab-ref />${this.text?Qpe.call(this,o,t,n):void 0}${this.hasValueState?Npe.call(this,o,t,n):void 0}</div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/CheckBox.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host(:not([hidden])){display:inline-block}:host{overflow:hidden;max-width:100%;outline:none;border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);transition:var(--_ui5-v2-4-0_checkbox_transition);cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host([disabled]){cursor:default}:host([disabled]) .ui5-checkbox-root{opacity:var(--_ui5-v2-4-0_checkbox_disabled_opacity)}:host([disabled]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_disabled_border_color)}:host([disabled]) .ui5-checkbox-label{color:var(--_ui5-v2-4-0_checkbox_disabled_label_color)}:host([readonly]:not([value-state="Critical"]):not([value-state="Negative"])) .ui5-checkbox-inner{background:var(--sapField_ReadOnly_Background);border:var(--_ui5-v2-4-0_checkbox_inner_readonly_border);color:var(--sapField_TextColor)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root{min-height:auto;box-sizing:border-box;align-items:flex-start;padding-top:var(--_ui5-v2-4-0_checkbox_root_side_padding);padding-bottom:var(--_ui5-v2-4-0_checkbox_root_side_padding)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root .ui5-checkbox-label{overflow-wrap:break-word;align-self:center}:host([desktop][text]:not([wrapping-type="None"])) .ui5-checkbox-root:focus:before,.ui5-checkbox-root[text]:focus-visible:before{inset-block:var(--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block)}:host([value-state="Negative"]) .ui5-checkbox-inner,:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InvalidBackground);border:var(--_ui5-v2-4-0_checkbox_inner_error_border);color:var(--sapField_InvalidColor)}:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_error_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-inner,:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_WarningBackground);border:var(--_ui5-v2-4-0_checkbox_inner_warning_border);color:var(--_ui5-v2-4-0_checkbox_inner_warning_color)}:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_warning_background_hover)}:host([value-state="Information"]) .ui5-checkbox-inner,:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InformationBackground);border:var(--_ui5-v2-4-0_checkbox_inner_information_border);color:var(--_ui5-v2-4-0_checkbox_inner_information_color)}:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_information_background_hover)}:host([value-state="Positive"]) .ui5-checkbox-inner,:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_SuccessBackground);border:var(--_ui5-v2-4-0_checkbox_inner_success_border);color:var(--sapField_SuccessColor)}:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_success_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-icon,:host([value-state="Critical"][indeterminate]) .ui5-checkbox-inner:after{color:var(--_ui5-v2-4-0_checkbox_checkmark_warning_color)}.ui5-checkbox-root{position:relative;display:inline-flex;align-items:center;width:100%;min-height:var(--_ui5-v2-4-0_checkbox_width_height);min-width:var(--_ui5-v2-4-0_checkbox_width_height);padding:0 var(--_ui5-v2-4-0_checkbox_wrapper_padding);outline:none;transition:var(--_ui5-v2-4-0_checkbox_transition);border:var(--_ui5-v2-4-0_checkbox_default_focus_border);border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);box-sizing:border-box}:host([desktop]) .ui5-checkbox-root:focus:before,.ui5-checkbox-root:focus-visible:before{display:var(--_ui5-v2-4-0_checkbox_focus_outline_display);content:"";position:absolute;inset-inline:var(--_ui5-v2-4-0_checkbox_focus_position);inset-block:var(--_ui5-v2-4-0_checkbox_focus_position);border:var(--_ui5-v2-4-0_checkbox_focus_outline);border-radius:var(--_ui5-v2-4-0_checkbox_focus_border_radius)}:host([text]) .ui5-checkbox-root{padding-inline-end:var(--_ui5-v2-4-0_checkbox_right_focus_distance)}:host([text]) .ui5-checkbox-root:focus:before,:host([text]) .ui5-checkbox-root:focus-visible:before{inset-inline-end:0}:host(:hover:not([disabled])){background:var(--_ui5-v2-4-0_checkbox_outer_hover_background)}.ui5-checkbox--hoverable .ui5-checkbox-label:hover{color:var(--_ui5-v2-4-0_checkbox_label_color)}:host(:not([active]):not([checked]):not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active]):not([checked])[value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_border_color)}:host(:not([active])[checked]:not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active])[checked][value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color)}:host([checked]:not([value-state])) .ui5-checkbox-inner,:host([checked][value-state="None"]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color)}:host([active]:not([checked]):not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active]:not([checked])[value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_active_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}:host([active][checked]:not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active][checked][value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}.ui5-checkbox-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);border:var(--_ui5-v2-4-0_checkbox_inner_border);border-radius:var(--_ui5-v2-4-0_checkbox_inner_border_radius);background:var(--_ui5-v2-4-0_checkbox_inner_background);color:var(--_ui5-v2-4-0_checkbox_checkmark_color);box-sizing:border-box;position:relative;cursor:inherit}:host([indeterminate][checked]) .ui5-checkbox-inner:after{content:"";background-color:currentColor;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:var(--_ui5-v2-4-0_checkbox_partially_icon_size);height:var(--_ui5-v2-4-0_checkbox_partially_icon_size)}:host input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit}.ui5-checkbox-root .ui5-checkbox-label{margin-inline-start:var(--_ui5-v2-4-0_checkbox_label_offset);cursor:inherit;text-overflow:ellipsis;overflow:hidden;pointer-events:none;color:var(--_ui5-v2-4-0_checkbox_label_color)}.ui5-checkbox-icon{width:var(--_ui5-v2-4-0_checkbox_icon_size);height:var(--_ui5-v2-4-0_checkbox_icon_size);color:currentColor;cursor:inherit;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}:host([display-only]){cursor:default}:host([display-only]) .ui5-checkbox-display-only-icon-inner [ui5-icon]{color:var(--sapTextColor)}:host([display-only]) .ui5-checkbox-display-only-icon-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);display:flex;align-items:center;justify-content:center}
`},dependencies:[v2,rf]}),Fn("change",{bubbles:!0,cancelable:!0}),Fn("value-changed",{bubbles:!0,cancelable:!0})],ou),ou.define();const Hpe=ou;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);const zW={packageName:"@ui5/webcomponents",fileName:"themes/ListItemAdditionalText.css.ts",content:`.ui5-li-additional-text{margin:0 .25rem;color:var(--sapNeutralTextColor);font-size:var(--sapFontSize);min-width:3.75rem;text-align:end;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
`};tr("slim-arrow-right",{pathData:"M357.5 233q10 10 10 23t-10 23l-165 165q-6 5-12 5-5 0-11-5-5-6-5-11 0-6 5-12l160-159q3-3 3-6t-3-6l-159-159q-5-5-5-11t5-11 11-5 11 5z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("slim-arrow-right",{pathData:"M186 416q-11 0-18.5-7.5T160 390q0-10 8-18l121-116-121-116q-8-8-8-18 0-11 7.5-18.5T186 96q10 0 17 7l141 134q8 8 8 19t-8 19L203 409q-7 7-17 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"});var f1,of=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let bA=f1=class extends BC{constructor(){super(),this.type="Active",this.accessibilityAttributes={},this.navigated=!1,this.active=!1,this.highlight="None",this.accessibleRole="ListItem",this._selectionMode="None",this.deactivateByKey=o=>{Zo(o)&&this.deactivate()},this.deactivate=()=>{this.active&&(this.active=!1)},this._ontouchstart={handleEvent:()=>{this._onmousedown()},passive:!0}}onBeforeRendering(){super.onBeforeRendering(),this.actionable=(this.type===Bm.Active||this.type===Bm.Navigation)&&this._selectionMode!==Rc.Delete}onEnterDOM(){super.onEnterDOM(),document.addEventListener("mouseup",this.deactivate),document.addEventListener("touchend",this.deactivate),document.addEventListener("keyup",this.deactivateByKey)}onExitDOM(){document.removeEventListener("mouseup",this.deactivate),document.removeEventListener("keyup",this.deactivateByKey),document.removeEventListener("touchend",this.deactivate)}async _onkeydown(o){if((Do(o)||Zo(o))&&this._isTargetSelfFocusDomRef(o))return;super._onkeydown(o);const t=this.type===Bm.Active,n=this.typeNavigation;if((Do(o)||Zo(o))&&(t||n)&&this.activate(),lQ(o)){const c=bC(),h=this.getFocusDomRef();if(c===h){const f=await yQ(h);f==null||f.focus()}else h.focus()}}_onkeyup(o){super._onkeyup(o),(Do(o)||Zo(o))&&this.deactivate(),this.modeDelete&&oQ(o)&&this.onDelete()}_onmousedown(){this.activate()}_onmouseup(){this.getFocusDomRef().matches(":has(:focus-within)")||this.deactivate()}_ontouchend(){this._onmouseup()}_onfocusin(o){super._onfocusin(o),o.target!==this.getFocusDomRef()&&this.deactivate()}_onfocusout(o){o.target===this.getFocusDomRef()&&this.deactivate()}_ondragstart(o){o.dataTransfer&&o.target===this._listItem&&(this.setAttribute("data-moving",""),o.dataTransfer.dropEffect="move",o.dataTransfer.effectAllowed="move")}_ondragend(o){o.target===this._listItem&&this.removeAttribute("data-moving")}_isTargetSelfFocusDomRef(o){return o.target!==this.getFocusDomRef()}onMultiSelectionComponentPress(o){this.isInactive||this.fireDecoratorEvent("_selection-requested",{item:this,selected:o.target.checked,selectionComponentPressed:!0})}onSingleSelectionComponentPress(o){this.isInactive||this.fireDecoratorEvent("_selection-requested",{item:this,selected:!o.target.checked,selectionComponentPressed:!0})}activate(){this.type!==Bm.Active&&this.type!==Bm.Navigation||(this.active=!0)}onDelete(){this.fireDecoratorEvent("_selection-requested",{item:this,selectionComponentPressed:!1})}onDetailClick(){this.fireDecoratorEvent("detail-click",{item:this,selected:this.selected})}fireItemPress(o){this.isInactive||super.fireItemPress(o)}get isInactive(){return this.type===Bm.Inactive||this.type===Bm.Detail}get placeSelectionElementBefore(){return this._selectionMode===Rc.Multiple||this._selectionMode===Rc.SingleStart}get placeSelectionElementAfter(){return!this.placeSelectionElementBefore&&(this._selectionMode===Rc.SingleEnd||this._selectionMode===Rc.Delete)}get modeSingleSelect(){return[Rc.SingleStart,Rc.SingleEnd,Rc.Single].includes(this._selectionMode)}get modeMultiple(){return this._selectionMode===Rc.Multiple}get modeDelete(){return this._selectionMode===Rc.Delete}get renderDeleteButton(){return this.modeDelete}get typeDetail(){return this.type===Bm.Detail}get typeNavigation(){return this.type===Bm.Navigation}get typeActive(){return this.type===Bm.Active}get _ariaSelected(){if(this.modeMultiple||this.modeSingleSelect)return this.selected}get listItemAccessibleRole(){return this.accessibleRole.toLowerCase()}get ariaSelectedText(){let o;return this._ariaSelected!==void 0&&(o=this._ariaSelected?f1.i18nBundle.getText(nAe):f1.i18nBundle.getText(rAe)),o}get deleteText(){return f1.i18nBundle.getText(jde)}get hasDeleteButtonSlot(){return!!this.deleteButton.length}get _accessibleNameRef(){return this.accessibleName?`${this._id}-invisibleText`:`${this._id}-content ${this._id}-invisibleText`}get _accInfo(){return{role:this.listItemAccessibleRole,ariaExpanded:void 0,ariaLevel:void 0,ariaLabel:f1.i18nBundle.getText(sAe),ariaLabelRadioButton:f1.i18nBundle.getText(oAe),ariaSelectedText:this.ariaSelectedText,ariaHaspopup:this.accessibilityAttributes.hasPopup,setsize:this.accessibilityAttributes.ariaSetsize,posinset:this.accessibilityAttributes.ariaPosinset,tooltip:this.tooltip}}get _hasHighlightColor(){return this.highlight!==Rpe.None}get hasConfigurableMode(){return!0}get _listItem(){return this.shadowRoot.querySelector("li")}};of([He()],bA.prototype,"type",void 0),of([He({type:Object})],bA.prototype,"accessibilityAttributes",void 0),of([He({type:Boolean})],bA.prototype,"navigated",void 0),of([He()],bA.prototype,"tooltip",void 0),of([He({type:Boolean})],bA.prototype,"active",void 0),of([He()],bA.prototype,"highlight",void 0),of([He({type:Boolean})],bA.prototype,"selected",void 0),of([He()],bA.prototype,"accessibleRole",void 0),of([He()],bA.prototype,"_selectionMode",void 0),of([Ro()],bA.prototype,"deleteButton",void 0),of([al("@ui5/webcomponents")],bA,"i18nBundle",void 0),bA=f1=of([Ds({languageAware:!0,styles:[BC.styles,zW,{packageName:"@ui5/webcomponents",fileName:"themes/ListItem.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([navigated]) .ui5-li-root .ui5-li-navigated{width:.1875rem;position:absolute;right:0;top:0;bottom:0;background-color:var(--sapList_SelectionBorderColor)}:host([active][actionable]) .ui5-li-root .ui5-li-icon{color:var(--sapList_Active_TextColor)}:host([active][actionable]) .ui5-li-title,:host([active][actionable]) .ui5-li-desc,:host([active][actionable]) .ui5-li-additional-text{color:var(--sapList_Active_TextColor)}:host([additional-text-state="Critical"]) .ui5-li-additional-text{color:var(--sapCriticalTextColor)}:host([additional-text-state="Positive"]) .ui5-li-additional-text{color:var(--sapPositiveTextColor)}:host([additional-text-state="Negative"]) .ui5-li-additional-text{color:var(--sapNegativeTextColor)}:host([additional-text-state="Information"]) .ui5-li-additional-text{color:var(--sapInformativeTextColor)}:host([has-title][description]){height:5rem}:host([has-title][image]){height:5rem}:host([_has-image]){height:5rem}:host([image]) .ui5-li-content{height:3rem}::slotted(img[slot="image"]){width:var(--_ui5-v2-4-0_list_item_img_size);height:var(--_ui5-v2-4-0_list_item_img_size);border-radius:var(--ui5-v2-4-0-avatar-border-radius);object-fit:contain}:host([description]) .ui5-li-root{padding:1rem}:host([description]) .ui5-li-content{height:3rem}:host([has-title][description]) .ui5-li-title{padding-bottom:.375rem}.ui5-li-text-wrapper{flex-direction:column}:host([description]) .ui5-li-text-wrapper{height:100%;justify-content:space-between;padding:.125rem 0}.ui5-li-description-info-wrapper{display:flex;justify-content:space-between}.ui5-li-additional-text,:host(:not([wrapping-type="Normal"])) .ui5-li-title,.ui5-li-desc{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host([wrapping-type="Normal"]){height:auto}:host([wrapping-type="Normal"]) .ui5-li-content{margin:var(--_ui5-v2-4-0_list_item_content_vertical_offset) 0}.ui5-li-desc{color:var(--sapContent_LabelColor);font-size:var(--sapFontSize)}:host([description]) .ui5-li-additional-text{align-self:flex-end}.ui5-li-image{min-width:var(--_ui5-v2-4-0_list_item_img_size);min-height:var(--_ui5-v2-4-0_list_item_img_size);margin-top:var(--_ui5-v2-4-0_list_item_img_top_margin);margin-bottom:var(--_ui5-v2-4-0_list_item_img_bottom_margin);margin-inline-end:var(--_ui5-v2-4-0_list_item_img_hn_margin)}.ui5-li-icon{min-width:var(--_ui5-v2-4-0_list_item_icon_size);min-height:var(--_ui5-v2-4-0_list_item_icon_size);color:var(--sapContent_NonInteractiveIconColor);padding-inline-end:var(--_ui5-v2-4-0_list_item_icon_padding-inline-end)}.ui5-li-detailbtn,.ui5-li-deletebtn{display:flex;align-items:center;margin-left:var(--_ui5-v2-4-0_list_buttons_left_space)}.ui5-li-multisel-cb,.ui5-li-singlesel-radiobtn{flex-shrink:0}:host([description]) .ui5-li-singlesel-radiobtn{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([description]) .ui5-li-multisel-cb{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([_selection-mode="SingleStart"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="Multiple"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="SingleEnd"]) .ui5-li-root{padding-inline:1rem 0}:host [ui5-checkbox].ui5-li-singlesel-radiobtn{margin-right:var(--_ui5-v2-4-0_list_item_cb_margin_right)}.ui5-li-highlight{position:absolute;width:.375rem;bottom:0;left:0;top:0;border-inline-end:.0625rem solid var(--ui5-v2-4-0-listitem-background-color);box-sizing:border-box}:host([highlight="Negative"]) .ui5-li-highlight{background:var(--sapNegativeTextColor)}:host([highlight="Critical"]) .ui5-li-highlight{background:var(--sapCriticalTextColor)}:host([highlight="Positive"]) .ui5-li-highlight{background:var(--sapPositiveTextColor)}:host([highlight="Information"]) .ui5-li-highlight{background:var(--sapInformativeTextColor)}
`}],dependencies:[X_,kpe,Hpe]}),Fn("detail-click",{bubbles:!0}),Fn("_focused",{bubbles:!0}),Fn("_selection-requested",{bubbles:!0})],bA);const GW=bA;function zpe(o,t,n){return et`<slot></slot>`}function Gpe(o,t,n){return et`${this.icon?Vpe.call(this,o,t,n):void 0}${this.initials?qpe.call(this,o,t,n):void 0}`}function Vpe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-avatar-icon" name="${le(this.icon)}"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-avatar-icon" name="${le(this.icon)}"></ui5-icon>`}function qpe(o,t,n){return n?et`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${le(this.validInitials)}</span><${Lt("ui5-icon",t,n)} class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${le(this.fallbackIcon)}"></${Lt("ui5-icon",t,n)}>`:et`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${le(this.validInitials)}</span><ui5-icon class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${le(this.fallbackIcon)}"></ui5-icon>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),tr("employee",{pathData:"M448 512H64V384q0-26 10-49.5t27.5-41T142 266t50-10h64q-27 0-50-10t-40.5-27.5T138 178t-10-50q0-26 10-49.5t27.5-41T206 10t50-10q26 0 49.5 10t41 27.5 27.5 41 10 49.5q0 27-10 50t-27.5 40.5-41 27.5-49.5 10h64q26 0 49.5 10t41 27.5 27.5 41 10 49.5v128zM256 224q40 0 68-28t28-68-28-68-68-28-68 28-28 68 28 68 68 28zM96 384v96h320v-96q0-40-28-68t-68-28H192q-40 0-68 28t-28 68zm192 32v-32h96v32h-96z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("employee",{pathData:"M326 352q11 0 18.5 7.5T352 378t-7.5 18-18.5 7h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T314 352h12zm16-97q48 23 77 67.5t29 99.5v32q0 11-7.5 18.5T422 480H90q-11 0-18.5-7.5T64 454v-32q0-55 29-99.5t77-67.5l-5-4q-18-18-27.5-41.5T128 160q0-27 10-50t27.5-40.5 41-27.5T256 32t49.5 10.5 41 28T374 111t10 49q0 27-11 52t-31 43zm-112 86l-25-15q-13-7-13-19v-6q-34 17-55.5 49T115 422v7h115v-88zm-51-181q0 32 22.5 54.5T256 237t54.5-22.5T333 160t-22.5-54.5T256 83t-54.5 22.5T179 160zm218 262q0-40-21.5-72T320 301v6q0 12-13 19l-26 15v88h116v-7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"});var zQ,Vu=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let sc=zQ=class extends xa{constructor(){super(),this.disabled=!1,this.interactive=!1,this.fallbackIcon="employee",this.shape="Circle",this.size="S",this.colorScheme="Accent6",this._colorScheme="Accent6",this.accessibilityAttributes={},this._hasImage=!1,this._handleResizeBound=this.handleResize.bind(this)}get tabindex(){return this.forcedTabIndex||(this._interactive?"0":"-1")}get effectiveSize(){return this.getAttribute("size")}get ffectiveBackgroundColor(){return this.getAttribute("color-scheme")||this._colorScheme}get _role(){return this._interactive?"button":"img"}get _ariaHasPopup(){return this._getAriaHasPopup()}get _interactive(){return this.interactive&&!this.disabled}get validInitials(){return this.initials&&/^[a-zA-Z--]{1,3}$/.test(this.initials)?this.initials:null}get accessibleNameText(){return this.accessibleName?this.accessibleName:zQ.i18nBundle.getText(Tde)||void 0}get hasImage(){return this._hasImage=!!this.image.length,this._hasImage}get initialsContainer(){return this.getDomRef().querySelector(".ui5-avatar-initials")}get fallBackIconDomRef(){return this.getDomRef().querySelector(".ui5-avatar-icon-fallback")}onBeforeRendering(){this._onclick=this._interactive?this._onClickHandler.bind(this):void 0}async onAfterRendering(){await _C(),this.initials&&!this.icon&&this._checkInitials()}onEnterDOM(){nf()&&this.setAttribute("desktop",""),this.initialsContainer&&Sm.register(this.initialsContainer,this._handleResizeBound)}onExitDOM(){this.initialsContainer&&Sm.deregister(this.initialsContainer,this._handleResizeBound)}handleResize(){this.initials&&!this.icon&&this._checkInitials()}_checkInitials(){const o=this.getDomRef(),t=o.querySelector(".ui5-avatar-initials");this.validInitials&&t&&t.scrollWidth<=o.scrollWidth?this.showInitials():this.showFallbackIcon()}showFallbackIcon(){var o,t;(o=this.initialsContainer)==null||o.classList.add("ui5-avatar-initials-hidden"),(t=this.fallBackIconDomRef)==null||t.classList.remove("ui5-avatar-fallback-icon-hidden")}showInitials(){var o,t;(o=this.initialsContainer)==null||o.classList.remove("ui5-avatar-initials-hidden"),(t=this.fallBackIconDomRef)==null||t.classList.add("ui5-avatar-fallback-icon-hidden")}_onClickHandler(o){o.stopPropagation(),this._fireClick()}_onkeydown(o){this._interactive&&(Zo(o)&&this._fireClick(),Do(o)&&o.preventDefault())}_onkeyup(o){this._interactive&&!o.shiftKey&&Do(o)&&this._fireClick()}_fireClick(){this.fireDecoratorEvent("click")}_getAriaHasPopup(){const o=this.accessibilityAttributes.hasPopup;if(this._interactive&&o)return o}};Vu([He({type:Boolean})],sc.prototype,"disabled",void 0),Vu([He({type:Boolean})],sc.prototype,"interactive",void 0),Vu([He()],sc.prototype,"icon",void 0),Vu([He()],sc.prototype,"fallbackIcon",void 0),Vu([He()],sc.prototype,"initials",void 0),Vu([He()],sc.prototype,"shape",void 0),Vu([He()],sc.prototype,"size",void 0),Vu([He()],sc.prototype,"colorScheme",void 0),Vu([He()],sc.prototype,"_colorScheme",void 0),Vu([He()],sc.prototype,"accessibleName",void 0),Vu([He({type:Object})],sc.prototype,"accessibilityAttributes",void 0),Vu([He({noAttribute:!0})],sc.prototype,"forcedTabIndex",void 0),Vu([He({type:Boolean})],sc.prototype,"_hasImage",void 0),Vu([Ro({type:HTMLElement,default:!0})],sc.prototype,"image",void 0),Vu([Ro()],sc.prototype,"badge",void 0),Vu([al("@ui5/webcomponents")],sc,"i18nBundle",void 0),sc=zQ=Vu([Ds({tag:"ui5-avatar",languageAware:!0,renderer:Ca,styles:{packageName:"@ui5/webcomponents",fileName:"themes/Avatar.css.ts",content:`:host(:not([hidden])){display:inline-block;box-sizing:border-box;position:relative;font-family:"72override",var(--sapFontFamily)}:host(:not([hidden]).ui5_hovered){opacity:.7}:host([interactive]:not([disabled])){cursor:pointer}:host([interactive]:not([hidden]):active){background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([interactive]:not([hidden]):not([disabled]):not(:active):hover){box-shadow:var(--ui5-v2-4-0-avatar-hover-box-shadow-offset)}:host([interactive][desktop]:not([hidden])) .ui5-avatar-root:focus,:host([interactive]:not([hidden])) .ui5-avatar-root:focus-visible{outline:var(--_ui5-v2-4-0_avatar_outline);outline-offset:var(--_ui5-v2-4-0_avatar_focus_offset)}:host([disabled]){opacity:var(--sapContent_DisabledOpacity)}:host{height:3rem;width:3rem;border-radius:50%;border:var(--ui5-v2-4-0-avatar-initials-border);outline:none;color:var(--ui5-v2-4-0-avatar-initials-color)}.ui5-avatar-root{display:flex;align-items:center;justify-content:center;outline:none;height:100%;width:100%;border-radius:inherit}:host([_size="XS"]),:host([size="XS"]){height:2rem;width:2rem;min-height:2rem;min-width:2rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XS)}:host(:not([size])),:host([_size="S"]),:host([size="S"]){min-height:3rem;min-width:3rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_S)}:host([_size="M"]),:host([size="M"]){min-height:4rem;min-width:4rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_M)}:host([_size="L"]),:host([size="L"]){min-height:5rem;min-width:5rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_L)}:host([_size="XL"]),:host([size="XL"]){min-height:7rem;min-width:7rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XL)}:host .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_fontsize_S);width:var(--_ui5-v2-4-0_avatar_fontsize_S);color:inherit}:host([_size="XS"]) .ui5-avatar-icon,:host([size="XS"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XS);width:var(--_ui5-v2-4-0_avatar_icon_XS)}:host([_size="S"]) .ui5-avatar-icon,:host([size="S"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_S);width:var(--_ui5-v2-4-0_avatar_icon_S)}:host([_size="M"]) .ui5-avatar-icon,:host([size="M"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_M);width:var(--_ui5-v2-4-0_avatar_icon_M)}:host([_size="L"]) .ui5-avatar-icon,:host([size="L"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_L);width:var(--_ui5-v2-4-0_avatar_icon_L)}:host([_size="XL"]) .ui5-avatar-icon,:host([size="XL"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XL);width:var(--_ui5-v2-4-0_avatar_icon_XL)}::slotted(*){border-radius:50%;width:100%;height:100%;pointer-events:none}:host([shape="Square"]){border-radius:var(--ui5-v2-4-0-avatar-border-radius)}:host([shape="Square"]) ::slotted(*){border-radius:calc(var(--ui5-v2-4-0-avatar-border-radius) - var(--ui5-v2-4-0-avatar-border-radius-img-deduction))}:host(:not([color-scheme])),:host(:not([_has-image])),:host([_color-scheme="Accent6"]),:host([ui5-avatar][color-scheme="Accent6"]){background-color:var(--ui5-v2-4-0-avatar-accent6);color:var(--ui5-v2-4-0-avatar-accent6-color);border-color:var(--ui5-v2-4-0-avatar-accent6-border-color)}:host([_color-scheme="Accent1"]),:host([ui5-avatar][color-scheme="Accent1"]){background-color:var(--ui5-v2-4-0-avatar-accent1);color:var(--ui5-v2-4-0-avatar-accent1-color);border-color:var(--ui5-v2-4-0-avatar-accent1-border-color)}:host([_color-scheme="Accent2"]),:host([ui5-avatar][color-scheme="Accent2"]){background-color:var(--ui5-v2-4-0-avatar-accent2);color:var(--ui5-v2-4-0-avatar-accent2-color);border-color:var(--ui5-v2-4-0-avatar-accent2-border-color)}:host([_color-scheme="Accent3"]),:host([ui5-avatar][color-scheme="Accent3"]){background-color:var(--ui5-v2-4-0-avatar-accent3);color:var(--ui5-v2-4-0-avatar-accent3-color);border-color:var(--ui5-v2-4-0-avatar-accent3-border-color)}:host([_color-scheme="Accent4"]),:host([ui5-avatar][color-scheme="Accent4"]){background-color:var(--ui5-v2-4-0-avatar-accent4);color:var(--ui5-v2-4-0-avatar-accent4-color);border-color:var(--ui5-v2-4-0-avatar-accent4-border-color)}:host([_color-scheme="Accent5"]),:host([ui5-avatar][color-scheme="Accent5"]){background-color:var(--ui5-v2-4-0-avatar-accent5);color:var(--ui5-v2-4-0-avatar-accent5-color);border-color:var(--ui5-v2-4-0-avatar-accent5-border-color)}:host([_color-scheme="Accent7"]),:host([ui5-avatar][color-scheme="Accent7"]){background-color:var(--ui5-v2-4-0-avatar-accent7);color:var(--ui5-v2-4-0-avatar-accent7-color);border-color:var(--ui5-v2-4-0-avatar-accent7-border-color)}:host([_color-scheme="Accent8"]),:host([ui5-avatar][color-scheme="Accent8"]){background-color:var(--ui5-v2-4-0-avatar-accent8);color:var(--ui5-v2-4-0-avatar-accent8-color);border-color:var(--ui5-v2-4-0-avatar-accent8-border-color)}:host([_color-scheme="Accent9"]),:host([ui5-avatar][color-scheme="Accent9"]){background-color:var(--ui5-v2-4-0-avatar-accent9);color:var(--ui5-v2-4-0-avatar-accent9-color);border-color:var(--ui5-v2-4-0-avatar-accent9-border-color)}:host([_color-scheme="Accent10"]),:host([ui5-avatar][color-scheme="Accent10"]){background-color:var(--ui5-v2-4-0-avatar-accent10);color:var(--ui5-v2-4-0-avatar-accent10-color);border-color:var(--ui5-v2-4-0-avatar-accent10-border-color)}:host([_color-scheme="Placeholder"]),:host([ui5-avatar][color-scheme="Placeholder"]){background-color:var(--ui5-v2-4-0-avatar-placeholder);color:var(--ui5-v2-4-0-avatar-placeholder-color);border-color:var(--ui5-v2-4-0-avatar-placeholder-border-color)}:host([_has-image]){color:var(--ui5-v2-4-0-avatar-accent10-color);background-color:transparent;vertical-align:middle}.ui5-avatar-initials{color:inherit}.ui5-avatar-icon~.ui5-avatar-initials,.ui5-avatar-icon~.ui5-avatar-icon-fallback{display:none}.ui5-avatar-fallback-icon-hidden{display:none}.ui5-avatar-initials-hidden{position:absolute;visibility:hidden;z-index:0;pointer-events:none}::slotted([slot="badge"]){position:absolute;bottom:0;right:0;width:1.125rem;height:1.125rem;font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSmallSize);color:var(--sapBackgroundColor);--_ui5-v2-4-0-tag-height: 1.125rem;--_ui5-v2-4-0-tag-border-radius: 50%}:host([_size="L"]) ::slotted([slot="badge"]),:host([size="L"]) ::slotted([slot="badge"]){width:1.25rem;height:1.25rem;--_ui5-v2-4-0-tag-height: 1.25rem;--_ui5-v2-4-0-tag-icon-width: .875rem}:host([_size="XL"]) ::slotted([slot="badge"]),:host([size="XL"]) ::slotted([slot="badge"]){width:1.75rem;height:1.75rem;--_ui5-v2-4-0-tag-height: 1.75rem;--_ui5-v2-4-0-tag-icon-width: 1rem}:host([shape="Square"]) ::slotted([slot="badge"]){bottom:-.125rem;right:-.125rem}:host([_size="L"][shape="Square"]) ::slotted([slot="badge"]),:host([size="L"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.1875rem;right:-.1875rem}:host([_size="XL"][shape="Square"]) ::slotted([slot="badge"]),:host([size="XL"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.25rem;right:-.25rem}
`},template:function(o,t,n){return et`<div class="ui5-avatar-root" tabindex="${le(this.tabindex)}" data-sap-focus-ref @keyup=${this._onkeyup} @keydown=${this._onkeydown} @click=${this._onclick} role="${le(this._role)}" aria-haspopup="${le(this._ariaHasPopup)}" aria-label="${le(this.accessibleNameText)}" fallback-icon="${le(this.fallbackIcon)}">${this.hasImage?zpe.call(this,o,t,n):Gpe.call(this,o,t,n)}<slot name="badge"></slot></div>`},dependencies:[rf]}),Fn("click",{bubbles:!0})],sc),sc.define();const $pe=sc;function Wpe(o,t,n){return et`${this.modeSingleSelect?jpe.call(this,o,t,n):void 0}${this.modeMultiple?Kpe.call(this,o,t,n):void 0}${this.renderDeleteButton?Xpe.call(this,o,t,n):void 0}`}function jpe(o,t,n){return n?et`<${Lt("ui5-radio-button",t,n)} part="radio" ?disabled="${this.isInactive}" accessible-name="${le(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${le(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${le(this.onSingleSelectionComponentPress)}"></${Lt("ui5-radio-button",t,n)}>`:et`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${le(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${le(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${le(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`}function Kpe(o,t,n){return n?et`<${Lt("ui5-checkbox",t,n)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${le(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${le(this._accInfo.ariaLabel)}" @ui5-change="${le(this.onMultiSelectionComponentPress)}"></${Lt("ui5-checkbox",t,n)}>`:et`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${le(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${le(this._accInfo.ariaLabel)}" @ui5-change="${le(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`}function Xpe(o,t,n){return et`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot?Ype.call(this,o,t,n):Jpe.call(this,o,t,n)}</div>`}function Ype(o,t,n){return et`<slot name="deleteButton"></slot>`}function Jpe(o,t,n){return n?et`<${Lt("ui5-button",t,n)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${le(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${le(this.deleteText)}"></${Lt("ui5-button",t,n)}>`:et`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${le(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${le(this.deleteText)}"></ui5-button>`}function Zpe(o,t,n){return et`<div class="ui5-li-highlight"></div>`}function efe(o,t,n){return et`<div class="ui5-li-image"><slot name="image"></slot></div>`}function tfe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} part="icon" name="${le(this.icon)}" class="ui5-li-icon" mode="Decorative"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon part="icon" name="${le(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function ife(o,t,n){return et`<div class="ui5-li-description-info-wrapper"><span part="description" class="ui5-li-desc">${le(this.description)}</span>${this.additionalText?nfe.call(this,o,t,n):void 0}</div>`}function nfe(o,t,n){return et`<span part="additional-text" class="ui5-li-additional-text">${le(this.additionalText)}</span>`}function rfe(o,t,n){return et`<span class="ui5-hidden-text">${le(this.type)}</span>`}function sfe(o,t,n){return et`${this.additionalText?ofe.call(this,o,t,n):void 0}`}function ofe(o,t,n){return et`<span part="additional-text" class="ui5-li-additional-text">${le(this.additionalText)}</span>`}function afe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} part="icon" name="${le(this.icon)}" class="ui5-li-icon" mode="Decorative"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon part="icon" name="${le(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function lfe(o,t,n){return n?et`<div class="ui5-li-detailbtn"><${Lt("ui5-button",t,n)} part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></${Lt("ui5-button",t,n)}></div>`:et`<div class="ui5-li-detailbtn"><ui5-button part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></ui5-button></div>`}function cfe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} name ="slim-arrow-right"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon name ="slim-arrow-right"></ui5-icon>`}function ufe(o,t,n){return et`<div class="ui5-li-navigated"></div>`}function hfe(o,t,n){return et`${this.modeSingleSelect?dfe.call(this,o,t,n):void 0}${this.modeMultiple?Afe.call(this,o,t,n):void 0}${this.renderDeleteButton?pfe.call(this,o,t,n):void 0}`}function dfe(o,t,n){return n?et`<${Lt("ui5-radio-button",t,n)} part="radio" ?disabled="${this.isInactive}" accessible-name="${le(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${le(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${le(this.onSingleSelectionComponentPress)}"></${Lt("ui5-radio-button",t,n)}>`:et`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${le(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${le(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${le(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`}function Afe(o,t,n){return n?et`<${Lt("ui5-checkbox",t,n)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${le(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${le(this._accInfo.ariaLabel)}" @ui5-change="${le(this.onMultiSelectionComponentPress)}"></${Lt("ui5-checkbox",t,n)}>`:et`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${le(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${le(this._accInfo.ariaLabel)}" @ui5-change="${le(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`}function pfe(o,t,n){return et`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot?ffe.call(this,o,t,n):gfe.call(this,o,t,n)}</div>`}function ffe(o,t,n){return et`<slot name="deleteButton"></slot>`}function gfe(o,t,n){return n?et`<${Lt("ui5-button",t,n)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${le(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${le(this.deleteText)}"></${Lt("ui5-button",t,n)}>`:et`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${le(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${le(this.deleteText)}"></ui5-button>`}var af=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let Sd=class extends GW{constructor(){super(...arguments),this.iconEnd=!1,this.additionalTextState="None",this.movable=!1,this.wrappingType="None",this.hasTitle=!1,this._hasImage=!1}onBeforeRendering(){super.onBeforeRendering(),this.hasTitle=!!this.textContent,this._hasImage=this.hasImage}get displayIconBegin(){return!(!this.icon||this.iconEnd)}get displayIconEnd(){return!(!this.icon||!this.iconEnd)}get hasImage(){return!!this.image.length}};af([He()],Sd.prototype,"description",void 0),af([He()],Sd.prototype,"icon",void 0),af([He({type:Boolean})],Sd.prototype,"iconEnd",void 0),af([He()],Sd.prototype,"additionalText",void 0),af([He()],Sd.prototype,"additionalTextState",void 0),af([He({type:Boolean})],Sd.prototype,"movable",void 0),af([He()],Sd.prototype,"accessibleName",void 0),af([He()],Sd.prototype,"wrappingType",void 0),af([He({type:Boolean})],Sd.prototype,"hasTitle",void 0),af([He({type:Boolean})],Sd.prototype,"_hasImage",void 0),af([Ro()],Sd.prototype,"image",void 0),Sd=af([Ds({tag:"ui5-li",template:function(o,t,n){return et`<li part="native-li" data-sap-focus-ref tabindex="${le(this._effectiveTabIndex)}" class="${br(this.classes.main)}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}" @keyup="${this._onkeyup}" @keydown="${this._onkeydown}" @mouseup="${this._onmouseup}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" @click="${this._onclick}" draggable="${le(this.movable)}" @dragstart="${this._ondragstart}" @dragend="${this._ondragend}" role="${le(this._accInfo.role)}" aria-expanded="${le(this._accInfo.ariaExpanded)}" title="${le(this._accInfo.tooltip)}" aria-level="${le(this._accInfo.ariaLevel)}" aria-haspopup="${le(this._accInfo.ariaHaspopup)}" aria-posinset="${le(this._accInfo.posinset)}" aria-setsize="${le(this._accInfo.setsize)}" aria-describedby="${le(this._id)}-invisibleText-describedby" aria-labelledby="${le(this._accessibleNameRef)}" aria-disabled="${le(this._ariaDisabled)}" aria-selected="${le(this._accInfo.ariaSelected)}" aria-checked="${le(this._accInfo.ariaChecked)}" aria-owns="${le(this._accInfo.ariaOwns)}" aria-keyshortcuts="${le(this._accInfo.ariaKeyShortcuts)}">${this.placeSelectionElementBefore?Wpe.call(this,o,t,n):void 0}${this._hasHighlightColor?Zpe.call(this,o,t,n):void 0}<div part="content" id="${le(this._id)}-content" class="ui5-li-content">${this.hasImage?efe.call(this,o,t,n):void 0}${this.displayIconBegin?tfe.call(this,o,t,n):void 0}<div class="ui5-li-text-wrapper"><span part="title" class="ui5-li-title"><slot></slot></span>${this.description?ife.call(this,o,t,n):void 0}${this.typeActive?void 0:rfe.call(this,o,t,n)}</div>${this.description?void 0:sfe.call(this,o,t,n)}</div>${this.displayIconEnd?afe.call(this,o,t,n):void 0}${this.typeDetail?lfe.call(this,o,t,n):void 0}${this.typeNavigation?cfe.call(this,o,t,n):void 0}${this.navigated?ufe.call(this,o,t,n):void 0}${this.placeSelectionElementAfter?hfe.call(this,o,t,n):void 0}<span id="${le(this._id)}-invisibleText" class="ui5-hidden-text">${le(this._accInfo.listItemAriaLabel)}${le(this.accessibleName)}</span><span id="${le(this._id)}-invisibleText-describedby" class="ui5-hidden-text">${le(this._accInfo.ariaSelectedText)}</span></li> `},dependencies:[...GW.dependencies,rf,$pe]})],Sd),Sd.define();const mfe=Sd;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var GQ,VQ=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let TC=GQ=class extends BC{get groupItem(){return!0}get _pressable(){return!1}get groupHeaderText(){return GQ.i18nBundle.getText(Kde)}get ariaLabelText(){return[this.textContent,this.accessibleName].filter(Boolean).join(" ")}};VQ([He()],TC.prototype,"accessibleName",void 0),VQ([al("@ui5/webcomponents")],TC,"i18nBundle",void 0),TC=GQ=VQ([Ds({tag:"ui5-li-group-header",languageAware:!0,template:function(o,t,n){return et`<ul part="native-li" tabindex="${le(this.forcedTabIndex)}" class="ui5-ghli-root ${br(this.classes.main)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" aria-label="${le(this.ariaLabelText)}" aria-roledescription="${le(this.groupHeaderText)}" role="group"><div id="${le(this._id)}-content" class="ui5-li-content"><span class="ui5-ghli-title"><slot></slot></span></div></ul>`},styles:[BC.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ListItemGroupHeader.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}:host([has-border]){border-bottom:var(--sapList_BorderWidth) solid var(--sapList_GroupHeaderBorderColor)}:host([actionable]:not([disabled])){cursor:default}.ui5-li-root.ui5-ghli-root{padding-top:.5rem;color:currentColor;font-size:var(--sapFontHeader6Size);font-weight:400;line-height:2rem;margin:0}.ui5-ghli-title{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700;font-family:var(--sapFontHeaderFamily)}.ui5-li-content{width:100%}
`}]})],TC),TC.define();const _fe=TC;var MC=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let J_=class extends xa{constructor(){super(...arguments),this.focused=!1}onEnterDOM(){wW(this)}onExitDOM(){xW(this)}get groupHeaderItem(){return this.shadowRoot.querySelector("[ui5-li-group-header]")}get hasHeader(){return!!this.headerText||this.hasFormattedHeader}get hasFormattedHeader(){return!!this.header.length}get isListItemGroup(){return!0}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}_ondragenter(o){o.preventDefault()}_ondragleave(o){o.relatedTarget instanceof Node&&this.shadowRoot.contains(o.relatedTarget)||(this.dropIndicatorDOM.targetReference=null)}_ondragover(o){const t=pR();if(!(o.target instanceof HTMLElement&&t))return;const n=EW(this.items,o.clientY,Z0.Vertical);if(!n)return void(this.dropIndicatorDOM.targetReference=null);let c=n.placements;n.element===t&&(c=c.filter(h=>h!==nc.On)),c.some(h=>!this.fireDecoratorEvent("move-over",{source:{element:t},destination:{element:n.element,placement:h}})&&(o.preventDefault(),this.dropIndicatorDOM.targetReference=n.element,this.dropIndicatorDOM.placement=h,!0))||(this.dropIndicatorDOM.targetReference=null)}_ondrop(o){o.preventDefault(),this.fireDecoratorEvent("move",{source:{element:pR()},destination:{element:this.dropIndicatorDOM.targetReference,placement:this.dropIndicatorDOM.placement}}),this.dropIndicatorDOM.targetReference=null}};MC([He()],J_.prototype,"headerText",void 0),MC([He()],J_.prototype,"headerAccessibleName",void 0),MC([Ro({default:!0,invalidateOnChildChange:!0,type:HTMLElement})],J_.prototype,"items",void 0),MC([He({type:Boolean})],J_.prototype,"focused",void 0),MC([Ro({type:HTMLElement})],J_.prototype,"header",void 0),J_=MC([Ds({tag:"ui5-li-group",renderer:Ca,languageAware:!0,template:function(o,t,n){return n?et`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader?PW.call(this,o,t,n):void 0}<slot></slot><${Lt("ui5-drop-indicator",t,n)} orientation="Horizontal" .ownerReference="${le(this)}"></${Lt("ui5-drop-indicator",t,n)}></ul>`:et`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader?PW.call(this,o,t,n):void 0}<slot></slot><ui5-drop-indicator orientation="Horizontal" .ownerReference="${le(this)}"></ui5-drop-indicator></ul>`},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ListItemGroup.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}.ui5-group-li-root{width:100%;height:100%;position:relative;box-sizing:border-box;padding:0;margin:0;list-style-type:none}
`}],dependencies:[mfe,_fe,BW]}),Fn("move-over",{detail:{source:{type:Object},destination:{type:Object}},bubbles:!0,cancelable:!0}),Fn("move",{detail:{source:{type:Object},destination:{type:Object}},bubbles:!0})],J_),J_.define();const vfe=J_;var RC,Dc=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let ll=RC=class extends xa{constructor(){super(),this.indent=!1,this.selectionMode="None",this.separators="All",this.growing="None",this.loading=!1,this.loadingDelay=1e3,this.accessibleRole="List",this._inViewport=!1,this._loadMoreActive=!1,this._previouslyFocusedItem=null,this._forwardingFocus=!1,this.resizeListenerAttached=!1,this.listEndObserved=!1,this._itemNavigation=new Z5(this,{skipItemsSize:10,navigationMode:l1.Vertical,getItemsCallback:()=>this.getEnabledItems()}),this._handleResize=this.checkListInViewport.bind(this),this._handleResize=this.checkListInViewport.bind(this),this.initialIntersection=!0,this.onItemFocusedBound=this.onItemFocused.bind(this),this.onForwardAfterBound=this.onForwardAfter.bind(this),this.onForwardBeforeBound=this.onForwardBefore.bind(this),this.onItemTabIndexChangeBound=this.onItemTabIndexChange.bind(this)}get listItems(){return this.getItems()}onEnterDOM(){wW(this)}onExitDOM(){this.unobserveListEnd(),this.resizeListenerAttached=!1,Sm.deregister(this.getDomRef(),this._handleResize),xW(this)}onBeforeRendering(){this.detachGroupHeaderEvents(),this.prepareListItems()}onAfterRendering(){this.attachGroupHeaderEvents(),this.growsOnScroll?this.observeListEnd():this.listEndObserved&&this.unobserveListEnd(),this.grows&&(this.checkListInViewport(),this.attachForResize())}attachGroupHeaderEvents(){this.getItems().forEach(o=>{o.hasAttribute("ui5-li-group-header")&&(o.addEventListener("ui5-_focused",this.onItemFocusedBound),o.addEventListener("ui5-_forward-after",this.onForwardAfterBound),o.addEventListener("ui5-_forward-before",this.onForwardBeforeBound),o.addEventListener("ui5-_tabindex-change",this.onItemTabIndexChangeBound))})}detachGroupHeaderEvents(){this.getItems().forEach(o=>{o.hasAttribute("ui5-li-group-header")&&(o.removeEventListener("ui5-_focused",this.onItemFocusedBound),o.removeEventListener("ui5-_forward-after",this.onForwardAfterBound),o.removeEventListener("ui5-_forward-before",this.onForwardBeforeBound),o.removeEventListener("ui5-_tabindex-change",this.onItemTabIndexChangeBound))})}attachForResize(){this.resizeListenerAttached||(this.resizeListenerAttached=!0,Sm.register(this.getDomRef(),this._handleResize))}get shouldRenderH1(){return!this.header.length&&this.headerText}get headerID(){return`${this._id}-header`}get modeLabelID(){return`${this._id}-modeLabel`}get listEndDOM(){return this.shadowRoot.querySelector(".ui5-list-end-marker")}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}get hasData(){return this.getItems().length!==0}get showBusyIndicatorOverlay(){return!this.growsWithButton&&this.loading}get showNoDataText(){return!this.hasData&&this.noDataText}get isDelete(){return this.selectionMode===Rc.Delete}get isSingleSelect(){return[Rc.Single,Rc.SingleStart,Rc.SingleEnd,Rc.SingleAuto].includes(this.selectionMode)}get isMultiple(){return this.selectionMode===Rc.Multiple}get ariaLabelledBy(){if(this.accessibleNameRef||this.accessibleName)return;const o=[];return(this.isMultiple||this.isSingleSelect||this.isDelete)&&o.push(this.modeLabelID),this.shouldRenderH1&&o.push(this.headerID),o.length?o.join(" "):void 0}get ariaLabelTxt(){return K0(this)}get ariaLabelModeText(){if(this.hasData){if(this.isMultiple)return RC.i18nBundle.getText(lAe);if(this.isSingleSelect)return RC.i18nBundle.getText(aAe);if(this.isDelete)return RC.i18nBundle.getText(cAe)}return""}get grows(){return this.growing!==FQ.None}get growsOnScroll(){return this.growing===FQ.Scroll}get growsWithButton(){return this.growing===FQ.Button}get _growingButtonText(){return this.growingButtonText||RC.i18nBundle.getText(mAe)}get listAccessibleRole(){return this.accessibleRole.toLowerCase()}get classes(){return{root:{"ui5-list-root":!0}}}prepareListItems(){const o=this.getItemsForProcessing();o.forEach((t,n)=>{const c=n===o.length-1,h=this.separators===IW.All||this.separators===IW.Inner&&!c;t.hasConfigurableMode&&(t._selectionMode=this.selectionMode),t.hasBorder=h})}async observeListEnd(){this.listEndObserved||(await _C(),this.getIntersectionObserver().observe(this.listEndDOM),this.listEndObserved=!0)}unobserveListEnd(){this.growingIntersectionObserver&&(this.growingIntersectionObserver.disconnect(),this.growingIntersectionObserver=null,this.listEndObserved=!1)}onInteresection(o){this.initialIntersection?this.initialIntersection=!1:o.forEach(t=>{var n;t.isIntersecting&&(n=this.loadMore.bind(this),fR&&clearTimeout(fR),fR=setTimeout(()=>{fR=null,n()},250))})}onSelectionRequested(o){const t=this.getSelectedItems();let n=!1;this.selectionMode!==Rc.None&&this[`handle${this.selectionMode}`]&&(n=this[`handle${this.selectionMode}`](o.detail.item,!!o.detail.selected)),n&&!this.fireDecoratorEvent("selection-change",{selectedItems:this.getSelectedItems(),previouslySelectedItems:t,selectionComponentPressed:o.detail.selectionComponentPressed,targetItem:o.detail.item,key:o.detail.key})&&this._revertSelection(t)}handleSingle(o){return!o.selected&&(this.deselectSelectedItems(),o.selected=!0,!0)}handleSingleStart(o){return this.handleSingle(o)}handleSingleEnd(o){return this.handleSingle(o)}handleSingleAuto(o){return this.handleSingle(o)}handleMultiple(o,t){return o.selected=t,!0}handleDelete(o){return this.fireDecoratorEvent("item-delete",{item:o}),!0}deselectSelectedItems(){this.getSelectedItems().forEach(o=>{o.selected=!1})}getSelectedItems(){return this.getItems().filter(o=>o.selected)}getEnabledItems(){return this.getItems().filter(o=>o._focusable)}getItems(){const o=[];return this.getSlottedNodes("items").forEach(t=>{if("isListItemGroup"in t){const n=[t.groupHeaderItem,...t.items].filter(Boolean);o.push(...n)}else o.push(t)}),o}getItemsForProcessing(){return this.getItems()}_revertSelection(o){this.getItems().forEach(t=>{const n=o.indexOf(t)!==-1,c=t.shadowRoot.querySelector(".ui5-li-multisel-cb"),h=t.shadowRoot.querySelector(".ui5-li-singlesel-radiobtn");t.selected=n,c?c.checked=n:h&&(h.checked=n)})}_onkeydown(o){Nu(o,!0,!1,!1)?this._moveItem(o.target,o):W0(o)&&this._handleTabNext(o)}_moveItem(o,t){if(!o||!o.movable)return;const n=((h,f,d)=>{let p=h.indexOf(f);const v=[];switch(d.key){case"ArrowLeft":case"ArrowUp":p--,p>=0&&v.push({element:h[p],placement:nc.Before});break;case"ArrowRight":case"ArrowDown":p++,p<h.length&&v.push({element:h[p],placement:nc.After});break;case"Home":h.forEach(w=>{v.push({element:w,placement:nc.Before})});break;case"End":h.reverse().forEach(w=>{v.push({element:w,placement:nc.After})})}return v})(this.items,o,t);if(!n.length)return;t.preventDefault();const c=n.find(({element:h,placement:f})=>!this.fireDecoratorEvent("move-over",{originalEvent:t,source:{element:o},destination:{element:h,placement:f}}));c&&(this.fireDecoratorEvent("move",{originalEvent:t,source:{element:o},destination:{element:c.element,placement:c.placement}}),o.focus())}_onLoadMoreKeydown(o){Do(o)&&(o.preventDefault(),this._loadMoreActive=!0),Zo(o)&&(this._onLoadMoreClick(),this._loadMoreActive=!0),W0(o)&&this.focusAfterElement(),Y5(o)&&(this.getPreviouslyFocusedItem()?this.focusPreviouslyFocusedItem():this.focusFirstItem(),o.preventDefault())}_onLoadMoreKeyup(o){Do(o)&&this._onLoadMoreClick(),this._loadMoreActive=!1}_onLoadMoreMousedown(){this._loadMoreActive=!0}_onLoadMoreMouseup(){this._loadMoreActive=!1}_onLoadMoreClick(){this.loadMore()}checkListInViewport(){this._inViewport=(()=>{const o=this.getDomRef().getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)})()}loadMore(){this.fireDecoratorEvent("load-more")}_handleTabNext(o){SW(o.target)}_onfocusin(o){const t=SW(o.target);if(this.isForwardElement(t)){if(!this.getPreviouslyFocusedItem())return this.growsWithButton&&this.isForwardAfterElement(t)?this.focusGrowingButton():this.focusFirstItem(),void o.stopImmediatePropagation();if(!this.getForwardingFocus()){if(this.growsWithButton&&this.isForwardAfterElement(t))return this.focusGrowingButton(),void o.stopImmediatePropagation();this.focusPreviouslyFocusedItem(),o.stopImmediatePropagation()}this.setForwardingFocus(!1)}else o.stopImmediatePropagation()}_ondragenter(o){o.preventDefault()}_ondragleave(o){o.relatedTarget instanceof Node&&this.shadowRoot.contains(o.relatedTarget)||(this.dropIndicatorDOM.targetReference=null)}_ondragover(o){const t=pR();if(!(o.target instanceof HTMLElement&&t))return;const n=EW(this.items,o.clientY,Z0.Vertical);if(!n)return void(this.dropIndicatorDOM.targetReference=null);let c=n.placements;n.element===t&&(c=c.filter(h=>h!==nc.On)),c.some(h=>!this.fireDecoratorEvent("move-over",{originalEvent:o,source:{element:t},destination:{element:n.element,placement:h}})&&(o.preventDefault(),this.dropIndicatorDOM.targetReference=n.element,this.dropIndicatorDOM.placement=h,!0))||(this.dropIndicatorDOM.targetReference=null)}_ondrop(o){o.preventDefault();const t=pR();this.fireDecoratorEvent("move",{originalEvent:o,source:{element:t},destination:{element:this.dropIndicatorDOM.targetReference,placement:this.dropIndicatorDOM.placement}}),this.dropIndicatorDOM.targetReference=null,t.focus()}isForwardElement(o){const t=o.id,n=this.getBeforeElement();return!!(this._id===t||n&&n.id===t)||this.isForwardAfterElement(o)}isForwardAfterElement(o){const t=o.id,n=this.getAfterElement();return n&&n.id===t}onItemTabIndexChange(o){const t=o.target;this._itemNavigation.setCurrentItem(t)}onItemFocused(o){const t=o.target;if(o.stopPropagation(),this._itemNavigation.setCurrentItem(t),this.fireDecoratorEvent("item-focused",{item:t}),this.selectionMode===Rc.SingleAuto){const n={item:t,selectionComponentPressed:!1,selected:!0,key:o.detail.key};this.onSelectionRequested({detail:n})}}onItemPress(o){const t=o.detail.item;if(this.fireDecoratorEvent("item-click",{item:t})&&this.selectionMode!==Rc.Delete){const n={item:t,selectionComponentPressed:!1,selected:!t.selected,key:o.detail.key};this.onSelectionRequested({detail:n})}}onItemClose(o){var t;const n=o.target;(n!=null&&n.hasAttribute("ui5-li-notification")||n!=null&&n.hasAttribute("ui5-li-notification-group"))&&this.fireDecoratorEvent("item-close",{item:(t=o.detail)==null?void 0:t.item})}onItemToggle(o){this.fireDecoratorEvent("item-toggle",{item:o.detail.item})}onForwardBefore(o){this.setPreviouslyFocusedItem(o.target),this.focusBeforeElement(),o.stopPropagation()}onForwardAfter(o){this.setPreviouslyFocusedItem(o.target),this.growsWithButton?(this.focusGrowingButton(),o.preventDefault()):this.focusAfterElement(),o.stopPropagation()}focusBeforeElement(){this.setForwardingFocus(!0),this.getBeforeElement().focus()}focusAfterElement(){this.setForwardingFocus(!0),this.getAfterElement().focus()}focusGrowingButton(){const o=this.getGrowingButton();o&&o.focus()}getGrowingButton(){return this.shadowRoot.querySelector(`[id="${this._id}-growing-btn"]`)}focusFirstItem(){const o=this.getFirstItem(t=>t._focusable);o&&o.focus()}focusPreviouslyFocusedItem(){const o=this.getPreviouslyFocusedItem();o&&o.focus()}focusFirstSelectedItem(){const o=this.getFirstItem(t=>t.selected&&t._focusable);o&&o.focus()}focusItem(o){this._itemNavigation.setCurrentItem(o),o.focus()}onFocusRequested(o){setTimeout(()=>{this.setPreviouslyFocusedItem(o.target),this.focusPreviouslyFocusedItem()},0)}setForwardingFocus(o){this._forwardingFocus=o}getForwardingFocus(){return this._forwardingFocus}setPreviouslyFocusedItem(o){this._previouslyFocusedItem=o}getPreviouslyFocusedItem(){return this._previouslyFocusedItem}getFirstItem(o){const t=this.getItems();let n=null;if(!o)return t.length?t[0]:null;for(let c=0;c<t.length;c++)if(o(t[c])){n=t[c];break}return n}getAfterElement(){return this._afterElement||(this._afterElement=this.shadowRoot.querySelector(`[id="${this._id}-after"]`)),this._afterElement}getBeforeElement(){return this._beforeElement||(this._beforeElement=this.shadowRoot.querySelector(`[id="${this._id}-before"]`)),this._beforeElement}getIntersectionObserver(){return this.growingIntersectionObserver||(this.growingIntersectionObserver=new IntersectionObserver(this.onInteresection.bind(this),{root:null,rootMargin:"0px",threshold:1})),this.growingIntersectionObserver}};Dc([He()],ll.prototype,"headerText",void 0),Dc([He()],ll.prototype,"footerText",void 0),Dc([He({type:Boolean})],ll.prototype,"indent",void 0),Dc([He()],ll.prototype,"selectionMode",void 0),Dc([He()],ll.prototype,"noDataText",void 0),Dc([He()],ll.prototype,"separators",void 0),Dc([He()],ll.prototype,"growing",void 0),Dc([He()],ll.prototype,"growingButtonText",void 0),Dc([He({type:Boolean})],ll.prototype,"loading",void 0),Dc([He({type:Number})],ll.prototype,"loadingDelay",void 0),Dc([He()],ll.prototype,"accessibleName",void 0),Dc([He()],ll.prototype,"accessibleNameRef",void 0),Dc([He()],ll.prototype,"accessibleRole",void 0),Dc([He({type:Boolean})],ll.prototype,"_inViewport",void 0),Dc([He({type:Boolean})],ll.prototype,"_loadMoreActive",void 0),Dc([Ro({type:HTMLElement,default:!0,invalidateOnChildChange:!0})],ll.prototype,"items",void 0),Dc([Ro()],ll.prototype,"header",void 0),Dc([al("@ui5/webcomponents")],ll,"i18nBundle",void 0),ll=RC=Dc([Ds({tag:"ui5-list",fastNavigation:!0,renderer:Ca,template:function(o,t,n){return n?et`<div class="${br(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${le(this.onItemPress)} @ui5-close=${le(this.onItemClose)} @ui5-toggle=${le(this.onItemToggle)} @ui5-_request-tabindex-change=${le(this.onItemTabIndexChange)} @ui5-_focused=${le(this.onItemFocused)} @ui5-_forward-after=${le(this.onForwardAfter)} @ui5-_forward-before=${le(this.onForwardBefore)} @ui5-_selection-requested=${le(this.onSelectionRequested)} @ui5-_focus-requested=${le(this.onFocusRequested)}><${Lt("ui5-busy-indicator",t,n)} id="${le(this._id)}-busyIndicator" delay="${le(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length?MW.call(this,o,t,n):void 0}${this.shouldRenderH1?RW.call(this,o,t,n):void 0}${this.hasData?DW.call(this,o,t,n):void 0}<span id="${le(this._id)}-modeLabel" class="ui5-hidden-text">${le(this.ariaLabelModeText)}</span><ul id="${le(this._id)}-listUl" class="ui5-list-ul" role="${le(this.listAccessibleRole)}" aria-label="${le(this.ariaLabelTxt)}" aria-labelledby="${le(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText?FW.call(this,o,t,n):void 0}</ul>${this.growsWithButton?UW.call(this,o,t,n):void 0}${this.footerText?kW.call(this,o,t,n):void 0}${this.hasData?LW.call(this,o,t,n):void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><${Lt("ui5-drop-indicator",t,n)} orientation="Horizontal" .ownerReference="${le(this)}"></${Lt("ui5-drop-indicator",t,n)}></${Lt("ui5-busy-indicator",t,n)}></div> `:et`<div class="${br(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${le(this.onItemPress)} @ui5-close=${le(this.onItemClose)} @ui5-toggle=${le(this.onItemToggle)} @ui5-_request-tabindex-change=${le(this.onItemTabIndexChange)} @ui5-_focused=${le(this.onItemFocused)} @ui5-_forward-after=${le(this.onForwardAfter)} @ui5-_forward-before=${le(this.onForwardBefore)} @ui5-_selection-requested=${le(this.onSelectionRequested)} @ui5-_focus-requested=${le(this.onFocusRequested)}><ui5-busy-indicator id="${le(this._id)}-busyIndicator" delay="${le(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length?MW.call(this,o,t,n):void 0}${this.shouldRenderH1?RW.call(this,o,t,n):void 0}${this.hasData?DW.call(this,o,t,n):void 0}<span id="${le(this._id)}-modeLabel" class="ui5-hidden-text">${le(this.ariaLabelModeText)}</span><ul id="${le(this._id)}-listUl" class="ui5-list-ul" role="${le(this.listAccessibleRole)}" aria-label="${le(this.ariaLabelTxt)}" aria-labelledby="${le(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText?FW.call(this,o,t,n):void 0}</ul>${this.growsWithButton?UW.call(this,o,t,n):void 0}${this.footerText?kW.call(this,o,t,n):void 0}${this.hasData?LW.call(this,o,t,n):void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><ui5-drop-indicator orientation="Horizontal" .ownerReference="${le(this)}"></ui5-drop-indicator></ui5-busy-indicator></div> `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/List.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}[growing-button]{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_load_more_padding);border-top:1px solid var(--sapList_BorderColor);border-bottom:var(--_ui5-v2-4-0_load_more_border-bottom);box-sizing:border-box;cursor:pointer;outline:none}[growing-button-inner]{display:flex;align-items:center;justify-content:center;flex-direction:row;min-height:var(--_ui5-v2-4-0_load_more_text_height);width:100%;color:var(--sapButton_TextColor);background-color:var(--sapList_Background);border:var(--_ui5-v2-4-0_load_more_border);border-radius:var(--_ui5-v2-4-0_load_more_border_radius);box-sizing:border-box}[growing-button-inner]:focus-visible{outline:var(--_ui5-v2-4-0_load_more_outline_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);outline-offset:-.125rem;border-color:transparent}[growing-button-inner]:hover{background-color:var(--sapList_Hover_Background)}[growing-button-inner]:active,[growing-button-inner][active]{background-color:var(--sapList_Active_Background);border-color:var(--sapList_Active_Background)}[growing-button-inner]:active>*,[growing-button-inner][active]>*{color:var(--sapList_Active_TextColor)}[growing-button-text],[growing-button-subtext]{text-align:center;font-family:"72override",var(--sapFontFamily);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box}[growing-button-text]{height:var(--_ui5-v2-4-0_load_more_text_height);padding:.875rem 1rem 1rem;font-size:var(--_ui5-v2-4-0_load_more_text_font_size);font-weight:700}:host([loading]) .ui5-list-growing-button-busy-indicator:not([_is-busy]){display:none}:host([loading]) .ui5-list-growing-button-busy-indicator[_is-busy]+[growing-button-text]{padding-left:.5rem}[growing-button-subtext]{font-size:var(--sapFontSize);padding:var(--_ui5-v2-4-0_load_more_desc_padding)}:host(:not([hidden])){display:block;max-width:100%;width:100%;-webkit-tap-highlight-color:transparent}:host([indent]) .ui5-list-root{padding:2rem}:host([separators="None"]) .ui5-list-nodata{border-bottom:0}.ui5-list-root,.ui5-list-busy-indicator{width:100%;height:100%;position:relative;box-sizing:border-box}.ui5-list-scroll-container{overflow:auto;height:100%;width:100%}.ui5-list-ul{list-style-type:none;padding:0;margin:0}.ui5-list-ul:focus{outline:none}.ui5-list-focusarea{position:fixed}.ui5-list-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;font-size:var(--sapFontHeader4Size);font-family:"72override",var(--sapFontFamily);color:var(--sapGroup_TitleTextColor);height:3rem;line-height:3rem;padding:0 1rem;background-color:var(--sapGroup_TitleBackground);border-bottom:1px solid var(--sapGroup_TitleBorderColor)}.ui5-list-footer{height:2rem;box-sizing:border-box;-webkit-text-size-adjust:none;font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);line-height:2rem;background-color:var(--sapList_FooterBackground);color:var(--ui5-v2-4-0_list_footer_text_color);padding:0 1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-list-nodata{list-style-type:none;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;color:var(--sapTextColor);background-color:var(--sapList_Background);border-bottom:1px solid var(--sapList_BorderColor);padding:0 1rem!important;outline:none;height:var(--_ui5-v2-4-0_list_no_data_height);font-size:var(--_ui5-v2-4-0_list_no_data_font_size);font-family:"72override",var(--sapFontFamily)}.ui5-list-nodata:focus:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none;top:calc(50% + .125rem)}.ui5-list-nodata-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([growing="Scroll"]) .ui5-list-end-marker{display:inline-block}
`},vQ()],dependencies:[Tpe,BW,vfe]}),Fn("item-click",{detail:{item:{type:HTMLElement}},bubbles:!0,cancelable:!0}),Fn("item-close",{detail:{item:{type:HTMLElement}},bubbles:!0}),Fn("item-toggle",{detail:{item:{type:HTMLElement}},bubbles:!0}),Fn("item-delete",{detail:{item:{type:HTMLElement}},bubbles:!0}),Fn("selection-change",{detail:{selectedItems:{type:Array},previouslySelectedItems:{type:Array},targetItem:{type:HTMLElement},selectionComponentPressed:{type:Boolean},key:{type:String}},bubbles:!0,cancelable:!0}),Fn("load-more",{bubbles:!0}),Fn("item-focused",{detail:{item:{type:HTMLElement}},bubbles:!0}),Fn("move-over",{detail:{originalEvent:{type:Event},source:{type:Object},destination:{type:Object}},bubbles:!0,cancelable:!0}),Fn("move",{detail:{originalEvent:{type:Event},source:{type:Object},destination:{type:Object}},bubbles:!0})],ll),ll.define();const yfe=ll;function bfe(o,t,n){return n?et`<${Lt("ui5-dialog",t,n)} root-element accessible-name=${le(this.accessibleName)} accessible-name-ref=${le(this.accessibleNameRef)} accessible-role=${le(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${le(this.initialFocus)}" @ui5-before-open="${le(this._beforeDialogOpen)}" @ui5-open="${le(this._propagateDialogEvent)}" @ui5-before-close="${le(this._propagateDialogEvent)}" @ui5-close="${le(this._afterDialogClose)}" exportparts="content, header, footer" .open=${le(this.open)}>${this._hideHeader?void 0:VW.call(this,o,t,n)}<slot></slot><slot slot="footer" name="footer"></slot></${Lt("ui5-dialog",t,n)}>`:et`<ui5-dialog root-element accessible-name=${le(this.accessibleName)} accessible-name-ref=${le(this.accessibleNameRef)} accessible-role=${le(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${le(this.initialFocus)}" @ui5-before-open="${le(this._beforeDialogOpen)}" @ui5-open="${le(this._propagateDialogEvent)}" @ui5-before-close="${le(this._propagateDialogEvent)}" @ui5-close="${le(this._afterDialogClose)}" exportparts="content, header, footer" .open=${le(this.open)}>${this._hideHeader?void 0:VW.call(this,o,t,n)}<slot></slot><slot slot="footer" name="footer"></slot></ui5-dialog>`}function VW(o,t,n){return et`${this.header.length?wfe.call(this,o,t,n):xfe.call(this,o,t,n)}`}function wfe(o,t,n){return et`<slot slot="header" name="header"></slot>`}function xfe(o,t,n){return et`<div class="${br(this.classes.header)}" slot="header">${this.headerText?Cfe.call(this,o,t,n):void 0}${this._hideCloseButton?void 0:Efe.call(this,o,t,n)}</div>`}function Cfe(o,t,n){return n?et`<${Lt("ui5-title",t,n)} level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${le(this.headerText)}</${Lt("ui5-title",t,n)}>`:et`<ui5-title level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${le(this.headerText)}</ui5-title>`}function Efe(o,t,n){return n?et`<${Lt("ui5-button",t,n)} icon="decline" design="Transparent" accessible-name="${le(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></${Lt("ui5-button",t,n)}>`:et`<ui5-button icon="decline" design="Transparent" accessible-name="${le(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></ui5-button>`}function Sfe(o,t,n){return et`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${Hr(this.styles.root)}" class="${br(this.classes.root)}" role="${le(this._role)}" aria-modal="${le(this._ariaModal)}" aria-label="${le(this._ariaLabel)}" aria-labelledby="${le(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${Hr(this.styles.arrow)}"></span>${this._displayHeader?Bfe.call(this,o,t,n):void 0}<div style="${Hr(this.styles.content)}" class="${br(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter?Mfe.call(this,o,t,n):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`}function Bfe(o,t,n){return et`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length?Ife.call(this,o,t,n):Tfe.call(this,o,t,n)}</header>`}function Ife(o,t,n){return et`<slot name="header"></slot>`}function Tfe(o,t,n){return n?et`<${Lt("ui5-title",t,n)} level="H1" class="ui5-popup-header-text">${le(this.headerText)}</${Lt("ui5-title",t,n)}>`:et`<ui5-title level="H1" class="ui5-popup-header-text">${le(this.headerText)}</ui5-title>`}function Mfe(o,t,n){return et`${this.footer.length?Rfe.call(this,o,t,n):void 0}`}function Rfe(o,t,n){return et`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}function Dfe(o,t,n){return et`<header><div class="ui5-popup-header-root" id="ui5-popup-header" role="group" aria-describedby=${le(this.effectiveAriaDescribedBy)} aria-roledescription=${le(this.ariaRoleDescriptionHeaderText)} tabindex="${le(this._headerTabIndex)}" @keydown="${this._onDragOrResizeKeyDown}" @mousedown="${this._onDragMouseDown}" part="header" state="${le(this.state)}">${this.hasValueState?Ffe.call(this,o,t,n):void 0}${this.header.length?Ufe.call(this,o,t,n):kfe.call(this,o,t,n)}${this.resizable?Lfe.call(this,o,t,n):Qfe.call(this,o,t,n)}</div></header>`}function Ffe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-dialog-value-state-icon" name="${le(this._dialogStateIcon)}"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-dialog-value-state-icon" name="${le(this._dialogStateIcon)}"></ui5-icon>`}function Ufe(o,t,n){return et`<slot name="header"></slot>`}function kfe(o,t,n){return n?et`<${Lt("ui5-title",t,n)} level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${le(this.headerText)}</${Lt("ui5-title",t,n)}>`:et`<ui5-title level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${le(this.headerText)}</ui5-title>`}function Lfe(o,t,n){return et`${this.draggable?Pfe.call(this,o,t,n):Ofe.call(this,o,t,n)}`}function Pfe(o,t,n){return et`<span id="${le(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${le(this.ariaDescribedByHeaderTextDraggableAndResizable)}</span>`}function Ofe(o,t,n){return et`<span id="${le(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${le(this.ariaDescribedByHeaderTextResizable)}</span>`}function Qfe(o,t,n){return et`${this.draggable?Nfe.call(this,o,t,n):void 0}`}function Nfe(o,t,n){return et`<span id="${le(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${le(this.ariaDescribedByHeaderTextDraggable)}</span>`}function Hfe(o,t,n){return et`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}function zfe(o,t,n){return n?et`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><${Lt("ui5-icon",t,n)} name="resize-corner"></${Lt("ui5-icon",t,n)}></div>`:et`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><ui5-icon name="resize-corner"></ui5-icon></div>`}tr("resize-corner",{pathData:"M384 160v32q0 12-10 22L182 406q-10 10-22 10h-32zM224 416l160-160v32q0 12-10 22l-96 96q-10 10-22 10h-32zm160-64v32q0 12-10 22t-22 10h-32z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("resize-corner",{pathData:"M282 416q-11 0-18.5-7.5T256 390t7-18l109-109q7-7 18-7t18.5 7.5T416 282t-7 18L300 409q-7 7-18 7zm-160 0q-11 0-18.5-7.5T96 390t7-18l269-269q7-7 18-7t18.5 7.5T416 122t-7 18L140 409q-7 7-18 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var ry,Z_=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const sy=16,Gfe={[or.Negative]:"error",[or.Critical]:"alert",[or.Positive]:"sys-enter-2",[or.Information]:"information"};let lf=ry=class extends g2{constructor(){super(),this.stretch=!1,this.draggable=!1,this.resizable=!1,this.state="None",this._draggedOrResized=!1,this._revertSize=()=>{Object.assign(this.style,{top:"",left:"",width:"",height:""})},this._screenResizeHandler=this._screenResize.bind(this),this._dragMouseMoveHandler=this._onDragMouseMove.bind(this),this._dragMouseUpHandler=this._onDragMouseUp.bind(this),this._resizeMouseMoveHandler=this._onResizeMouseMove.bind(this),this._resizeMouseUpHandler=this._onResizeMouseUp.bind(this),this._dragStartHandler=this._handleDragStart.bind(this)}static _isHeader(o){return o.classList.contains("ui5-popup-header-root")||o.getAttribute("slot")==="header"}get isModal(){return!0}get _ariaLabelledBy(){let o;return this.headerText&&!this._ariaLabel&&(o="ui5-popup-header-text"),o}get ariaRoleDescriptionHeaderText(){return this.resizable||this.draggable?ry.i18nBundle.getText(wAe):void 0}get effectiveAriaDescribedBy(){return this.resizable||this.draggable?`${this._id}-descr`:void 0}get ariaDescribedByHeaderTextResizable(){return ry.i18nBundle.getText(xAe)}get ariaDescribedByHeaderTextDraggable(){return ry.i18nBundle.getText(CAe)}get ariaDescribedByHeaderTextDraggableAndResizable(){return ry.i18nBundle.getText(EAe)}get _displayHeader(){return this.header.length||this.headerText||this.draggable||this.resizable}get _movable(){return!this.stretch&&this.onDesktop&&(this.draggable||this.resizable)}get _headerTabIndex(){return this._movable?"0":void 0}get _showResizeHandle(){return this.resizable&&this.onDesktop}get _minHeight(){let o=Number.parseInt(window.getComputedStyle(this.contentDOM).minHeight);const t=this._root.querySelector(".ui5-popup-header-root");t&&(o+=t.offsetHeight);const n=this._root.querySelector(".ui5-popup-footer-root");return n&&(o+=n.offsetHeight),o}get hasValueState(){return this.state!==or.None}get _dialogStateIcon(){return Gfe[this.state]}get _role(){if(this.accessibleRole!==uR.None)return this.state===or.Negative||this.state===or.Critical?uR.AlertDialog.toLowerCase():this.accessibleRole.toLowerCase()}_show(){super._show(),this._center()}onBeforeRendering(){super.onBeforeRendering(),this._isRTL=this.effectiveDir==="rtl"}onEnterDOM(){super.onEnterDOM(),this._attachScreenResizeHandler(),this.addEventListener("dragstart",this._dragStartHandler)}onExitDOM(){super.onExitDOM(),this._detachScreenResizeHandler(),this.removeEventListener("dragstart",this._dragStartHandler)}_resize(){super._resize(),this._draggedOrResized||this._center()}_screenResize(){this._center()}_attachScreenResizeHandler(){this._screenResizeHandlerAttached||(window.addEventListener("resize",this._screenResizeHandler),this._screenResizeHandlerAttached=!0)}_detachScreenResizeHandler(){this._screenResizeHandlerAttached&&(window.removeEventListener("resize",this._screenResizeHandler),this._screenResizeHandlerAttached=!1)}_center(){const o=window.innerHeight-this.offsetHeight,t=window.innerWidth-this.offsetWidth;Object.assign(this.style,{top:`${Math.round(o/2)}px`,left:`${Math.round(t/2)}px`})}_onDragMouseDown(o){if(!this._movable||!this.draggable||!ry._isHeader(o.target))return;const{top:t,left:n}=this.getBoundingClientRect(),{width:c,height:h}=window.getComputedStyle(this);Object.assign(this.style,{top:`${t}px`,left:`${n}px`,width:Math.round(100*Number.parseFloat(c))/100+"px",height:Math.round(100*Number.parseFloat(h))/100+"px"}),this._x=o.clientX,this._y=o.clientY,this._draggedOrResized=!0,this._attachMouseDragHandlers()}_onDragMouseMove(o){o.preventDefault();const{clientX:t,clientY:n}=o,c=this._x-t,h=this._y-n,{left:f,top:d}=this.getBoundingClientRect();Object.assign(this.style,{left:`${Math.floor(f-c)}px`,top:`${Math.floor(d-h)}px`}),this._x=t,this._y=n}_onDragMouseUp(){delete this._x,delete this._y,this._detachMouseDragHandlers()}_onDragOrResizeKeyDown(o){this._movable&&ry._isHeader(o.target)&&(this.draggable&&[xd,_A,V0,q0].some(t=>t(o))?this._dragWithEvent(o):this.resizable&&[rQ,sQ,R$,D$].some(t=>t(o))&&this._resizeWithEvent(o))}_dragWithEvent(o){const{top:t,left:n,width:c,height:h}=this.getBoundingClientRect();let f=0,d="top";switch(!0){case xd(o):f=t-sy,d="top";break;case _A(o):f=t+sy,d="top";break;case V0(o):f=n-sy,d="left";break;case q0(o):f=n+sy,d="left"}f=cg(f,0,d==="left"?window.innerWidth-c:window.innerHeight-h),this.style[d]=`${f}px`}_resizeWithEvent(o){this._draggedOrResized=!0,this.addEventListener("ui5-before-close",this._revertSize,{once:!0});const{top:t,left:n}=this.getBoundingClientRect(),c=window.getComputedStyle(this),h=Number.parseFloat(c.minWidth),f=window.innerWidth-n,d=window.innerHeight-t;let p=Number.parseFloat(c.width),v=Number.parseFloat(c.height);switch(!0){case rQ(o):v-=sy;break;case sQ(o):v+=sy;break;case R$(o):p-=sy;break;case D$(o):p+=sy}p=cg(p,h,f),v=cg(v,this._minHeight,d),Object.assign(this.style,{width:`${p}px`,height:`${v}px`})}_attachMouseDragHandlers(){window.addEventListener("mousemove",this._dragMouseMoveHandler),window.addEventListener("mouseup",this._dragMouseUpHandler)}_detachMouseDragHandlers(){window.removeEventListener("mousemove",this._dragMouseMoveHandler),window.removeEventListener("mouseup",this._dragMouseUpHandler)}_onResizeMouseDown(o){if(!this._movable||!this.resizable)return;o.preventDefault();const{top:t,left:n}=this.getBoundingClientRect(),{width:c,height:h,minWidth:f}=window.getComputedStyle(this);this._initialX=o.clientX,this._initialY=o.clientY,this._initialWidth=Number.parseFloat(c),this._initialHeight=Number.parseFloat(h),this._initialTop=t,this._initialLeft=n,this._minWidth=Number.parseFloat(f),this._cachedMinHeight=this._minHeight,Object.assign(this.style,{top:`${t}px`,left:`${n}px`}),this._draggedOrResized=!0,this._attachMouseResizeHandlers()}_onResizeMouseMove(o){const{clientX:t,clientY:n}=o;let c,h;this._isRTL?(c=cg(this._initialWidth-(t-this._initialX),this._minWidth,this._initialLeft+this._initialWidth),h=cg(this._initialLeft+(t-this._initialX),0,this._initialX+this._initialWidth-this._minWidth)):c=cg(this._initialWidth+(t-this._initialX),this._minWidth,window.innerWidth-this._initialLeft);const f=cg(this._initialHeight+(n-this._initialY),this._cachedMinHeight,window.innerHeight-this._initialTop);Object.assign(this.style,{height:`${f}px`,width:`${c}px`,left:h?`${h}px`:void 0})}_onResizeMouseUp(){delete this._initialX,delete this._initialY,delete this._initialWidth,delete this._initialHeight,delete this._initialTop,delete this._initialLeft,delete this._minWidth,delete this._cachedMinHeight,this._detachMouseResizeHandlers()}_handleDragStart(o){this.draggable&&o.preventDefault()}_attachMouseResizeHandlers(){window.addEventListener("mousemove",this._resizeMouseMoveHandler),window.addEventListener("mouseup",this._resizeMouseUpHandler),this.addEventListener("ui5-before-close",this._revertSize,{once:!0})}_detachMouseResizeHandlers(){window.removeEventListener("mousemove",this._resizeMouseMoveHandler),window.removeEventListener("mouseup",this._resizeMouseUpHandler)}};Z_([He()],lf.prototype,"headerText",void 0),Z_([He({type:Boolean})],lf.prototype,"stretch",void 0),Z_([He({type:Boolean})],lf.prototype,"draggable",void 0),Z_([He({type:Boolean})],lf.prototype,"resizable",void 0),Z_([He()],lf.prototype,"state",void 0),Z_([Ro()],lf.prototype,"header",void 0),Z_([Ro()],lf.prototype,"footer",void 0),Z_([al("@ui5/webcomponents")],lf,"i18nBundle",void 0),lf=ry=Z_([Ds({tag:"ui5-dialog",template:function(o,t,n){return et`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${Hr(this.styles.root)}" class="${br(this.classes.root)}" role="${le(this._role)}" aria-modal="${le(this._ariaModal)}" aria-label="${le(this._ariaLabel)}" aria-labelledby="${le(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span>${this._displayHeader?Dfe.call(this,o,t,n):void 0}<div style="${Hr(this.styles.content)}" class="${br(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this.footer.length?Hfe.call(this,o,t,n):void 0}${this._showResizeHandle?zfe.call(this,o,t,n):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `},styles:[g2.styles,vW,{packageName:"@ui5/webcomponents",fileName:"themes/Dialog.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{min-width:20rem;min-height:6rem;max-height:94%;max-width:90%;flex-direction:column;box-shadow:var(--sapContent_Shadow3);border-radius:var(--sapElement_BorderCornerRadius)}:host([stretch]){width:90%;height:94%}:host([stretch][on-phone]){width:100%;height:100%;max-height:100%;max-width:100%;border-radius:0}:host([draggable]) .ui5-popup-header-root,:host([draggable]) ::slotted([slot="header"]){cursor:move}:host([draggable]) .ui5-popup-header-root *{cursor:auto}:host([draggable]) .ui5-popup-root{user-select:text}::slotted([slot="header"]){max-width:100%}.ui5-popup-root{display:flex;flex-direction:column;max-width:100vw}.ui5-popup-header-root{position:relative}.ui5-popup-header-root:before{content:"";position:absolute;inset-block-start:auto;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;height:var(--_ui5-v2-4-0_dialog_header_state_line_height);background:var(--sapObjectHeader_BorderColor)}:host([state="Negative"]) .ui5-popup-header-root:before{background:var(--sapErrorBorderColor)}:host([state="Information"]) .ui5-popup-header-root:before{background:var(--sapInformationBorderColor)}:host([state="Positive"]) .ui5-popup-header-root:before{background:var(--sapSuccessBorderColor)}:host([state="Critical"]) .ui5-popup-header-root:before{background:var(--sapWarningBorderColor)}.ui5-dialog-value-state-icon{margin-inline-end:.5rem;flex-shrink:0}:host([state="Negative"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_error_state_icon_color)}:host([state="Information"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_information_state_icon_color)}:host([state="Positive"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_success_state_icon_color)}:host([state="Critical"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_warning_state_icon_color)}.ui5-popup-header-root{outline:none}:host([desktop]) .ui5-popup-header-root:focus:after,.ui5-popup-header-root:focus-visible:after{content:"";position:absolute;left:var(--_ui5-v2-4-0_dialog_header_focus_left_offset);bottom:var(--_ui5-v2-4-0_dialog_header_focus_bottom_offset);right:var(--_ui5-v2-4-0_dialog_header_focus_right_offset);top:var(--_ui5-v2-4-0_dialog_header_focus_top_offset);border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_dialog_header_border_radius) var(--_ui5-v2-4-0_dialog_header_border_radius) 0 0;pointer-events:none}:host([stretch]) .ui5-popup-content{width:100%;height:100%}.ui5-popup-content{min-height:var(--_ui5-v2-4-0_dialog_content_min_height);flex:1 1 auto}.ui5-popup-resize-handle{position:absolute;bottom:-.5rem;inset-inline-end:-.5rem;cursor:var(--_ui5-v2-4-0_dialog_resize_cursor);width:1.5rem;height:1.5rem;border-radius:50%}.ui5-popup-resize-handle [ui5-icon]{color:var(--sapButton_Lite_TextColor)}::slotted([slot="footer"]){height:var(--_ui5-v2-4-0_dialog_footer_height)}::slotted([slot="footer"][ui5-bar][design="Footer"]){border-top:none}::slotted([slot="header"][ui5-bar]){box-shadow:none}::slotted([slot="footer"][ui5-toolbar]){border:0}:host::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}.ui5-block-layer{display:block}
`},vQ()],dependencies:[rf,...g2.dependencies]})],lf),lf.define();const qW=lf;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var qQ,b2=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let oy=qQ=class extends _2{constructor(){super(),this.contentOnlyOnDesktop=!1,this._hideHeader=!1,this._hideCloseButton=!1}async openPopup(){Ml()?this._dialog&&(this._dialog.open=!0):await super.openPopup()}async _show(){if(!Ml())return super._show()}closePopup(o=!1,t=!1,n=!1){var c;Ml()?(c=this._dialog)==null||c.closePopup(o,t,n):super.closePopup(o,t,n)}toggle(o){this.open?this.closePopup():(this.opener=o,this.open=!0)}get classes(){const o=super.classes;return o.header={"ui5-responsive-popover-header":!0,"ui5-responsive-popover-header-no-title":!this.headerText},o}get _dialog(){return this.shadowRoot.querySelector("[ui5-dialog]")}get contentDOM(){return Ml()?this._dialog.contentDOM:super.contentDOM}get _isPhone(){return Ml()}get _displayHeader(){return(Ml()||!this.contentOnlyOnDesktop)&&super._displayHeader}get _displayFooter(){return Ml()||!this.contentOnlyOnDesktop}get _closeDialogAriaLabel(){return qQ.i18nBundle.getText(dAe)}_beforeDialogOpen(o){this._opened=!0,this.open=!0,this._propagateDialogEvent(o)}_afterDialogClose(o){this._opened=!1,this.open=!1,this._propagateDialogEvent(o)}_propagateDialogEvent(o){const t=o.type.replace("ui5-","");this.fireDecoratorEvent(t,o.detail)}get isModal(){return Ml()?this._dialog.isModal:super.isModal}};b2([He({type:Boolean})],oy.prototype,"contentOnlyOnDesktop",void 0),b2([He({type:Boolean})],oy.prototype,"_hideHeader",void 0),b2([He({type:Boolean})],oy.prototype,"_hideCloseButton",void 0),b2([al("@ui5/webcomponents")],oy,"i18nBundle",void 0),oy=qQ=b2([Ds({tag:"ui5-responsive-popover",styles:[_2.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ResponsivePopover.css.ts",content:`:host{--_ui5-v2-4-0_input_width: 100%;min-width:6.25rem;min-height:2rem}:host([on-phone]){display:contents}.ui5-responsive-popover-header{height:var(--_ui5-v2-4-0-responsive_popover_header_height);display:flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment);align-items:center;width:100%}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header-no-title{justify-content:flex-end}
`}],template:function(o,t,n){return et`${this._isPhone?bfe.call(this,o,t,n):Sfe.call(this,o,t,n)}`},dependencies:[..._2.dependencies,X_,qW]})],oy),oy.define();const $Q=oy;function Vfe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} mode="Decorative" class="ui5-select-option-icon" name="${le(this.selectedOptionIcon)}"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon mode="Decorative" class="ui5-select-option-icon" name="${le(this.selectedOptionIcon)}"></ui5-icon>`}function qfe(o,t,n){return et`<slot name="label"></slot>`}function $fe(o,t,n){return et`${le(this.text)}`}function Wfe(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} name="slim-arrow-down" class="inputIcon" ?pressed="${this._iconPressed}"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon name="slim-arrow-down" class="inputIcon" ?pressed="${this._iconPressed}"></ui5-icon>`}function jfe(o,t,n){return et`<span id="${le(this._id)}-valueStateDesc" class="ui5-hidden-text">${le(this.valueStateText)}</span>`}function Kfe(o,t,n){return n?et`<${Lt("ui5-responsive-popover",t,n)} hide-arrow prevent-initial-focus part="popover" placement="Bottom" class="ui5-select-popover ${br(this.classes.popover)}" horizontal-align="Start" @ui5-open="${le(this._afterOpen)}" @ui5-before-open="${le(this._beforeOpen)}" @ui5-close="${le(this._afterClose)}" @keydown="${this._onkeydown}" style=${Hr(this.styles.responsivePopover)}>${this._isPhone?$W.call(this,o,t,n):void 0}${this._isPhone?void 0:jW.call(this,o,t,n)}<${Lt("ui5-list",t,n)} mode="SingleAuto" separators="None" @mousedown="${this._itemMousedown}" @ui5-item-click="${le(this._handleItemPress)}"><slot></slot></${Lt("ui5-list",t,n)}></${Lt("ui5-responsive-popover",t,n)}>`:et`<ui5-responsive-popover hide-arrow prevent-initial-focus part="popover" placement="Bottom" class="ui5-select-popover ${br(this.classes.popover)}" horizontal-align="Start" @ui5-open="${le(this._afterOpen)}" @ui5-before-open="${le(this._beforeOpen)}" @ui5-close="${le(this._afterClose)}" @keydown="${this._onkeydown}" style=${Hr(this.styles.responsivePopover)}>${this._isPhone?$W.call(this,o,t,n):void 0}${this._isPhone?void 0:jW.call(this,o,t,n)}<ui5-list mode="SingleAuto" separators="None" @mousedown="${this._itemMousedown}" @ui5-item-click="${le(this._handleItemPress)}"><slot></slot></ui5-list></ui5-responsive-popover>`}function $W(o,t,n){return n?et`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${le(this._headerTitleText)}</span><${Lt("ui5-button",t,n)} class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._toggleRespPopover}"></${Lt("ui5-button",t,n)}></div>${this.hasValueStateText?WW.call(this,o,t,n):void 0}</div>`:et`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${le(this._headerTitleText)}</span><ui5-button class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._toggleRespPopover}"></ui5-button></div>${this.hasValueStateText?WW.call(this,o,t,n):void 0}</div>`}function WW(o,t,n){return et`<div class="${br(this.classes.popoverValueState)} row ui5-select-value-state-dialog-header">${this.shouldDisplayDefaultValueStateMessage?Xfe.call(this,o,t,n):Yfe.call(this,o,t,n)}</div>`}function Xfe(o,t,n){return et`${le(this.valueStateText)}`}function Yfe(o,t,n){return et`<slot name="valueStateMessage"></slot>`}function jW(o,t,n){return et`${this.hasValueStateText?Jfe.call(this,o,t,n):void 0}`}function Jfe(o,t,n){return n?et`<div class="${br(this.classes.popoverValueState)}" style=${Hr(this.styles.responsivePopoverHeader)}><${Lt("ui5-icon",t,n)} class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></${Lt("ui5-icon",t,n)}>${this.shouldDisplayDefaultValueStateMessage?KW.call(this,o,t,n):XW.call(this,o,t,n)}</div>`:et`<div class="${br(this.classes.popoverValueState)}" style=${Hr(this.styles.responsivePopoverHeader)}><ui5-icon class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></ui5-icon>${this.shouldDisplayDefaultValueStateMessage?KW.call(this,o,t,n):XW.call(this,o,t,n)}</div>`}function KW(o,t,n){return et`${le(this.valueStateText)}`}function XW(o,t,n){return et`<slot name="valueStateMessage"></slot>`}function Zfe(o,t,n){return n?et`<${Lt("ui5-popover",t,n)} part="popover" skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" horizontal-align="Start"><div class="${br(this.classes.popoverValueState)}" style="${Hr(this.styles.popoverHeader)}"><${Lt("ui5-icon",t,n)} class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></${Lt("ui5-icon",t,n)}>${this.shouldDisplayDefaultValueStateMessage?YW.call(this,o,t,n):JW.call(this,o,t,n)}</div></${Lt("ui5-popover",t,n)}>`:et`<ui5-popover part="popover" skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" horizontal-align="Start"><div class="${br(this.classes.popoverValueState)}" style="${Hr(this.styles.popoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></ui5-icon>${this.shouldDisplayDefaultValueStateMessage?YW.call(this,o,t,n):JW.call(this,o,t,n)}</div></ui5-popover>`}function YW(o,t,n){return et`${le(this.valueStateText)}`}function JW(o,t,n){return et`<slot name="valueStateMessage"></slot>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);const WQ={packageName:"@ui5/webcomponents",fileName:"themes/ResponsivePopoverCommon.css.ts",content:`.input-root-phone{flex:1;position:relative;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color);border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box}.input-root-phone [inner-input]{padding:0 .5rem;width:100%;height:100%}.input-root-phone [inner-input]:focus{background-color:var(--sapField_Focus_Background)}.input-root-phone:focus-within:before{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}.input-root-phone [value-state=Negative] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Positive] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Critical] .inputIcon[data-ui5-compact-size]{padding:.1875rem .5rem}[inner-input]{background:transparent;color:inherit;border:none;font-style:normal;-webkit-appearance:none;-moz-appearance:textfield;line-height:normal;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;min-width:3rem;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}[inner-input]::selection,[inner-input]::-moz-selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}[inner-input]::-webkit-input-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}[inner-input]::-moz-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}.input-root-phone[value-state]:not([value-state=None]){border-width:var(--_ui5-v2-4-0_input_state_border_width)}.input-root-phone[value-state=Negative] [inner-input],.input-root-phone[value-state=Critical] [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style)}.input-root-phone[value-state=Negative] [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}.input-root-phone[value-state=Negative]:not([readonly]){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}.input-root-phone[value-state=Negative]:not([readonly]):not([disabled]),.input-root-phone[value-state=Critical]:not([readonly]):not([disabled]),.input-root-phone[value-state=Information]:not([readonly]):not([disabled]){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}.input-root-phone[value-state=Critical]:not([readonly]){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}.input-root-phone[value-state=Positive]:not([readonly]){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width)}.input-root-phone[value-state=Positive]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}.input-root-phone[value-state=Positive]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}.input-root-phone[value-state=Information]:not([readonly]){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width)}.input-root-phone[value-state=Information]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}.ui5-multi-combobox-toggle-button{margin-left:.5rem}.ui5-responsive-popover-header{width:100%;min-height:2.5rem;display:flex;flex-direction:column}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header .row{box-sizing:border-box;padding:.25rem 1rem;min-height:2.5rem;display:flex;justify-content:center;align-items:center;font-size:var(--sapFontHeader5Size)}.ui5-responsive-popover-footer{display:flex;justify-content:flex-end;padding:.25rem 0;width:100%}.ui5-responsive-popover-close-btn{position:absolute;right:1rem}
`};Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);const ZW={packageName:"@ui5/webcomponents",fileName:"themes/ValueStateMessage.css.ts",content:`.ui5-valuestatemessage-popover{border-radius:var(--_ui5-v2-4-0_value_state_message_popover_border_radius);box-shadow:var(--_ui5-v2-4-0_value_state_message_popover_box_shadow)}.ui5-input-value-state-message-icon{width:var(--_ui5-v2-4-0_value_state_message_icon_width);height:var(--_ui5-v2-4-0_value_state_message_icon_height);display:var(--_ui5-v2-4-0_input_value_state_icon_display);position:absolute;padding-right:.375rem}.ui5-valuestatemessage-root .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_input_value_state_icon_offset)}.ui5-input-value-state-message-icon[name=error]{color:var(--sapNegativeElementColor)}.ui5-input-value-state-message-icon[name=alert]{color:var(--sapCriticalElementColor)}.ui5-input-value-state-message-icon[name=success]{color:var(--sapPositiveElementColor)}.ui5-input-value-state-message-icon[name=information]{color:var(--sapInformativeElementColor)}.ui5-valuestatemessage-root{box-sizing:border-box;display:inline-block;color:var(--sapTextColor);font-size:var(--sapFontSmallSize);font-family:"72override",var(--sapFontFamily);height:auto;padding:var(--_ui5-v2-4-0_value_state_message_padding);overflow:hidden;text-overflow:ellipsis;min-width:6.25rem;border:var(--_ui5-v2-4-0_value_state_message_border);line-height:var(--_ui5-v2-4-0_value_state_message_line_height)}[ui5-responsive-popover] .ui5-valuestatemessage-header,[ui5-popover] .ui5-valuestatemessage-header{min-height:2rem}[ui5-responsive-popover] .ui5-valuestatemessage-header{padding:var(--_ui5-v2-4-0_value_state_header_padding);border:var(--_ui5-v2-4-0_value_state_header_border);border-bottom:var(--_ui5-v2-4-0_value_state_header_border_bottom);flex-grow:1;position:relative}.ui5-valuestatemessage--success{background:var(--sapSuccessBackground)}.ui5-valuestatemessage--warning{background:var(--sapWarningBackground)}.ui5-valuestatemessage--error{background:var(--sapErrorBackground)}.ui5-valuestatemessage--information{background:var(--sapInformationBackground)}.ui5-responsive-popover-header[focused],.ui5-responsive-popover-header:focus{outline-offset:var(--_ui5-v2-4-0_value_state_header_offset);outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor)}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(content){padding:0}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(footer){min-height:0}.ui5-valuestatemessage-popover::part(header),.ui5-popover-with-value-state-header::part(header),.ui5-popover-with-value-state-header-phone::part(header){margin-bottom:0}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-root{padding:var(--_ui5-v2-4-0_value_state_message_padding_phone);width:100%}.ui5-popover-with-value-state-header-phone .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_value_state_message_icon_offset_phone)}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-header{position:relative;flex:none;top:0;left:0}.ui5-popover-with-value-state-header-phone::part(content){padding:0;overflow:hidden;display:flex;flex-direction:column}.ui5-popover-with-value-state-header-phone [ui5-list]{overflow:auto}[ui5-responsive-popover] .ui5-valuestatemessage--error{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_error)}[ui5-responsive-popover] .ui5-valuestatemessage--information{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_information)}[ui5-responsive-popover] .ui5-valuestatemessage--success{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_success)}[ui5-responsive-popover] .ui5-valuestatemessage--warning{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_warning)}[ui5-responsive-popover].ui5-popover-with-value-state-header .ui5-valuestatemessage-root:has(+[ui5-list]:empty){box-shadow:none}
`};Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var wA,qu=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let Fc=wA=class extends xa{constructor(){super(...arguments),this.disabled=!1,this.valueState="None",this.required=!1,this.readonly=!1,this._iconPressed=!1,this.opened=!1,this._listWidth=0,this.focused=!1,this._selectedIndexBeforeOpen=-1,this._escapePressed=!1,this._lastSelectedOption=null,this._typedChars=""}get formValidityMessage(){return wA.i18nBundle.getText(IAe)}get formValidity(){const o=this.selectedOption;return{valueMissing:this.required&&o&&o.getAttribute("value")===""}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){const o=this.selectedOption;return o?o.hasAttribute("value")?o.value:o.textContent:""}onBeforeRendering(){this._ensureSingleSelection(),this.style.setProperty(fC("--_ui5-input-icons-count"),`${this.iconsCount}`)}onAfterRendering(){this.toggleValueStatePopover(this.shouldOpenValueStateMessagePopover),this._isPickerOpen&&(this._listWidth||(this._listWidth=this.responsivePopover.offsetWidth))}_ensureSingleSelection(){let o=this.options.findLastIndex(t=>t.selected);o=o===-1?0:o;for(let t=0;t<this.options.length&&(this.options[t].selected=o===t,o!==t);t++);}_onfocusin(){this.focused=!0}_onfocusout(){this.focused=!1}get _isPickerOpen(){return!!this.responsivePopover&&this.responsivePopover.open}_respPopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}set value(o){Array.from(this.children).forEach(t=>{t.selected=(t.getAttribute("value")||t.textContent)===o})}get value(){var o,t;return((o=this.selectedOption)==null?void 0:o.value)||((t=this.selectedOption)==null?void 0:t.textContent)||""}get _selectedIndex(){return this.options.findIndex(o=>o.selected)}get selectedOption(){return this.options.find(o=>o.selected)}get text(){var o;return(o=this.selectedOption)==null?void 0:o.effectiveDisplayText}_toggleRespPopover(){this.disabled||this.readonly||(this._iconPressed=!0,this.responsivePopover=this._respPopover(),this._isPickerOpen?this.responsivePopover.open=!1:(this.responsivePopover.opener=this,this.responsivePopover.open=!0))}_onkeydown(o){var t;(W0(o)||Y5(o))&&this._isPickerOpen?this.responsivePopover.open=!1:((t=o).key?(n=>n.key==="F4"&&!Tc(n))(t)||(n=>(n.key==="ArrowDown"||n.key==="Down"||n.key==="ArrowUp"||n.key==="Up")&&Nu(n,!1,!0,!1))(t):t.keyCode===115&&!Tc(t)||t.keyCode===40&&Nu(t,!1,!0,!1))?(o.preventDefault(),this._toggleRespPopover()):Do(o)?o.preventDefault():$0(o)&&this._isPickerOpen?this._escapePressed=!0:a2(o)?this._handleHomeKey(o):l2(o)?this._handleEndKey(o):Zo(o)?this._handleSelectionChange():(xd(o)||_A(o))&&this._handleArrowNavigation(o)}_handleKeyboardNavigation(o){if(Zo(o)||this.readonly)return;const t=o.key.toLowerCase();this._typedChars+=t;const n=/^(.)\1+$/i.test(this._typedChars)?t:this._typedChars;clearTimeout(this._typingTimeoutID),this._typingTimeoutID=setTimeout(()=>{this._typedChars="",this._typingTimeoutID=-1},1e3),this._selectTypedItem(n)}_selectTypedItem(o){const t=this._selectedIndex,n=this._searchNextItemByText(o);if(n){const c=this.options.indexOf(n);this._changeSelectedItem(this._selectedIndex,c),t!==this._selectedIndex&&(this.itemSelectionAnnounce(),this._scrollSelectedItem())}}_searchNextItemByText(o){let t=this.options.slice(0);const n=t.splice(this._selectedIndex+1,t.length-this._selectedIndex),c=t.splice(0,t.length-1);return t=n.concat(c),t.find(h=>h.effectiveDisplayText.toLowerCase().startsWith(o))}_handleHomeKey(o){o.preventDefault(),this.readonly||this._changeSelectedItem(this._selectedIndex,0)}_handleEndKey(o){if(o.preventDefault(),this.readonly)return;const t=this.options.length-1;this._changeSelectedItem(this._selectedIndex,t)}_onkeyup(o){Do(o)&&(this._isPickerOpen?this._handleSelectionChange():this._toggleRespPopover())}_getItemIndex(o){return this.options.indexOf(o)}_select(o){const t=this._selectedIndex;o<0||o>=this.options.length||this.options.length===0||(this.options[t]&&(this.options[t].selected=!1),t!==o&&this.fireDecoratorEvent("live-change",{selectedOption:this.options[o]}),this.options[o].selected=!0)}_handleItemPress(o){const t=o.detail.item,n=this._getItemIndex(t);this._handleSelectionChange(n)}_itemMousedown(o){o.preventDefault()}_onclick(){this.getFocusDomRef().focus(),this._toggleRespPopover()}_handleSelectionChange(o=this._selectedIndex){this._typedChars="",this._select(o),this._toggleRespPopover()}_scrollSelectedItem(){var o;if(this._isPickerOpen){const t=(o=this._currentlySelectedOption)==null?void 0:o.getDomRef();t&&t.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}}_handleArrowNavigation(o){if(o.preventDefault(),this.readonly)return;let t=-1;const n=this._selectedIndex;t=_A(o)?this._getNextOptionIndex():this._getPreviousOptionIndex(),this._changeSelectedItem(this._selectedIndex,t),n!==this._selectedIndex&&(this.itemSelectionAnnounce(),this._scrollSelectedItem())}_changeSelectedItem(o,t){const n=this.options,c=n[o],h=n[t];c!==h&&(c.selected=!1,c.focused=!1,h.selected=!0,h.focused=!0,this.fireDecoratorEvent("live-change",{selectedOption:h}),this._isPickerOpen||this._fireChangeEvent(h))}_getNextOptionIndex(){return this._selectedIndex===this.options.length-1?this._selectedIndex:this._selectedIndex+1}_getPreviousOptionIndex(){return this._selectedIndex===0?this._selectedIndex:this._selectedIndex-1}_beforeOpen(){this._selectedIndexBeforeOpen=this._selectedIndex,this._lastSelectedOption=this.options[this._selectedIndex]}_afterOpen(){this.opened=!0,this.fireDecoratorEvent("open"),this.itemSelectionAnnounce(),this._scrollSelectedItem(),this._applyFocusToSelectedItem()}_applyFocusToSelectedItem(){this.options.forEach(o=>{o.focused=o.selected})}_afterClose(){this.opened=!1,this._iconPressed=!1,this._listWidth=0,this._escapePressed?(this._select(this._selectedIndexBeforeOpen),this._escapePressed=!1):this._lastSelectedOption!==this.options[this._selectedIndex]&&(this._fireChangeEvent(this.options[this._selectedIndex]),this._lastSelectedOption=this.options[this._selectedIndex]),this.fireDecoratorEvent("close")}get hasCustomLabel(){return!!this.label.length}_fireChangeEvent(o){const t=!this.fireDecoratorEvent("change",{selectedOption:o});this.fireDecoratorEvent("selected-item-changed"),t&&this._select(this._selectedIndexBeforeOpen)}get valueStateTextMappings(){return{[or.Positive]:wA.i18nBundle.getText(iR),[or.Information]:wA.i18nBundle.getText(uQ),[or.Negative]:wA.i18nBundle.getText(eR),[or.Critical]:wA.i18nBundle.getText(tR)}}get valueStateTypeMappings(){return{[or.Positive]:wA.i18nBundle.getText(V$),[or.Information]:wA.i18nBundle.getText(q$),[or.Negative]:wA.i18nBundle.getText(z$),[or.Critical]:wA.i18nBundle.getText(G$)}}get valueStateText(){let o;return o=this.shouldDisplayDefaultValueStateMessage?this.valueStateDefaultText:this.valueStateMessage.map(t=>t.textContent).join(" "),`${this.valueStateTypeText} ${o}`}get valueStateDefaultText(){return this.valueState!==or.None?this.valueStateTextMappings[this.valueState]:""}get valueStateTypeText(){return this.valueState!==or.None?this.valueStateTypeMappings[this.valueState]:""}get hasValueState(){return this.valueState!==or.None}get valueStateTextId(){return this.hasValueState?`${this._id}-valueStateDesc`:void 0}get isDisabled(){return this.disabled||void 0}get _headerTitleText(){return wA.i18nBundle.getText(H$)}get _currentlySelectedOption(){return this.options[this._selectedIndex]}get _effectiveTabIndex(){return this.disabled||this.responsivePopover&&this.responsivePopover.open?"-1":"0"}get _valueStateMessageInputIcon(){return this.valueState!==or.None?{Negative:"error",Critical:"alert",Positive:"sys-enter-2",Information:"information"}[this.valueState]:""}get iconsCount(){return this.selectedOptionIcon?2:1}get classes(){return{popoverValueState:{"ui5-valuestatemessage-root":!0,"ui5-valuestatemessage--success":this.valueState===or.Positive,"ui5-valuestatemessage--error":this.valueState===or.Negative,"ui5-valuestatemessage--warning":this.valueState===or.Critical,"ui5-valuestatemessage--information":this.valueState===or.Information},popover:{"ui5-select-popover-valuestate":this.hasValueState}}}get styles(){return{popoverHeader:{"max-width":`${this.offsetWidth}px`},responsivePopoverHeader:{display:this.options.length&&this._listWidth===0?"none":"inline-block",width:`${this.options.length?this._listWidth:this.offsetWidth}px`},responsivePopover:{"min-width":`${this.offsetWidth}px`}}}get ariaLabelText(){return K0(this)}get shouldDisplayDefaultValueStateMessage(){return!this.valueStateMessage.length&&this.hasValueStateText}get hasValueStateText(){return this.hasValueState&&this.valueState!==or.Positive}get shouldOpenValueStateMessagePopover(){return this.focused&&this.hasValueStateText&&!this._iconPressed&&!this._isPickerOpen&&!this._isPhone}get _ariaRoleDescription(){return wA.i18nBundle.getText(Xde)}get _isPhone(){return Ml()}itemSelectionAnnounce(){let o;const t=this.options.length,n=wA.i18nBundle.getText(iAe,this._selectedIndex+1,t);this.focused&&this._currentlySelectedOption&&(o=`${this._currentlySelectedOption.textContent} ${this._isPickerOpen?n:""}`,(c=>{const h=J0;h.textContent="",h.textContent=c,setTimeout(()=>{h.textContent===c&&(h.textContent="")},3e3)})(o))}openValueStatePopover(){this.valueStatePopover=this._getPopover(),this.valueStatePopover&&(this.valueStatePopover.opener=this,this.valueStatePopover.open=!0)}closeValueStatePopover(){this.valueStatePopover&&(this.valueStatePopover.open=!1)}toggleValueStatePopover(o){o?this.openValueStatePopover():this.closeValueStatePopover()}get selectedOptionIcon(){return this.selectedOption&&this.selectedOption.icon}_getPopover(){return this.shadowRoot.querySelector("[ui5-popover]")}};function ege(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} part="icon" name="${le(this.icon)}" class="ui5-li-icon" mode="Decorative"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon part="icon" name="${le(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function tge(o,t,n){return et`<span part="additional-text" class="ui5-li-additional-text">${le(this.additionalText)}</span>`}qu([He({type:Boolean})],Fc.prototype,"disabled",void 0),qu([He()],Fc.prototype,"name",void 0),qu([He()],Fc.prototype,"valueState",void 0),qu([He({type:Boolean})],Fc.prototype,"required",void 0),qu([He({type:Boolean})],Fc.prototype,"readonly",void 0),qu([He()],Fc.prototype,"accessibleName",void 0),qu([He()],Fc.prototype,"accessibleNameRef",void 0),qu([He({type:Boolean,noAttribute:!0})],Fc.prototype,"_iconPressed",void 0),qu([He({type:Boolean})],Fc.prototype,"opened",void 0),qu([He({type:Number,noAttribute:!0})],Fc.prototype,"_listWidth",void 0),qu([He({type:Boolean})],Fc.prototype,"focused",void 0),qu([Ro({default:!0,type:HTMLElement,invalidateOnChildChange:!0})],Fc.prototype,"options",void 0),qu([Ro()],Fc.prototype,"valueStateMessage",void 0),qu([Ro()],Fc.prototype,"label",void 0),qu([He({noAttribute:!0})],Fc.prototype,"value",null),qu([al("@ui5/webcomponents")],Fc,"i18nBundle",void 0),Fc=wA=qu([Ds({tag:"ui5-select",languageAware:!0,formAssociated:!0,renderer:Ca,template:function(o,t,n){return et`<div class="ui5-select-root ui5-input-focusable-element" id="${le(this._id)}-select" @click="${this._onclick}">${this.selectedOptionIcon?Vfe.call(this,o,t,n):void 0}<div class="ui5-select-label-root" data-sap-focus-ref tabindex="${le(this._effectiveTabIndex)}" role="combobox" aria-haspopup="listbox" aria-label="${le(this.ariaLabelText)}" aria-describedby="${le(this.valueStateTextId)}" aria-disabled="${le(this.isDisabled)}" aria-required="${le(this.required)}" aria-readonly="${le(this.readonly)}" aria-expanded="${le(this._isPickerOpen)}" aria-roledescription="${le(this._ariaRoleDescription)}" @keydown="${this._onkeydown}" @keypress="${this._handleKeyboardNavigation}" @keyup="${this._onkeyup}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.hasCustomLabel?qfe.call(this,o,t,n):$fe.call(this,o,t,n)}</div>${this.readonly?void 0:Wfe.call(this,o,t,n)}${this.hasValueState?jfe.call(this,o,t,n):void 0}</div>${this.options?Kfe.call(this,o,t,n):void 0}${this.shouldOpenValueStateMessagePopover?Zfe.call(this,o,t,n):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Select.css.ts",content:`:host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host(:not([hidden])){display:inline-block}:host{width:var(--_ui5-v2-4-0_input_width);min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);font-style:normal;border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box;text-align:start;transition:var(--_ui5-v2-4-0_input_transition);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color)}:host(:not([readonly])),:host([readonly][disabled]){box-shadow:var(--sapField_Shadow)}:host([focused]:not([opened])){border-color:var(--_ui5-v2-4-0_input_focused_border_color);background-color:var(--sapField_Focus_Background)}.ui5-input-focusable-element{position:relative}:host([focused]:not([opened])) .ui5-input-focusable-element:after{content:var(--ui5-v2-4-0_input_focus_pseudo_element_content);position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--_ui5-v2-4-0_input_focus_outline_color);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}:host([focused][readonly]:not([opened])) .ui5-input-focusable-element:after{top:var(--_ui5-v2-4-0_input_readonly_focus_offset);bottom:var(--_ui5-v2-4-0_input_readonly_focus_offset);left:var(--_ui5-v2-4-0_input_readonly_focus_offset);right:var(--_ui5-v2-4-0_input_readonly_focus_offset);border-radius:var(--_ui5-v2-4-0_input_readonly_focus_border_radius)}.ui5-input-root:before{content:"";position:absolute;width:calc(100% - 2px);left:1px;bottom:-2px;border-bottom-left-radius:8px;border-bottom-right-radius:8px;height:var(--_ui5-v2-4-0_input_bottom_border_height);transition:var(--_ui5-v2-4-0_input_transition);background-color:var(--_ui5-v2-4-0_input_bottom_border_color)}.ui5-input-root{width:100%;height:100%;position:relative;background:transparent;display:inline-block;outline:none;box-sizing:border-box;color:inherit;transition:border-color .2s ease-in-out;border-radius:var(--_ui5-v2-4-0_input_border_radius);overflow:hidden}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([disabled]) .ui5-input-root:before,:host([readonly]) .ui5-input-root:before{content:none}[inner-input]{background:transparent;color:inherit;border:none;font-style:inherit;-webkit-appearance:none;-moz-appearance:textfield;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;width:100%;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;text-align:inherit}[inner-input][inner-input-with-icon]{padding:var(--_ui5-v2-4-0_input_inner_padding_with_icon)}[inner-input][type=search]::-webkit-search-decoration,[inner-input][type=search]::-webkit-search-cancel-button,[inner-input][type=search]::-webkit-search-results-button,[inner-input][type=search]::-webkit-search-results-decoration{display:none}.ui5-input-value-state-icon{height:100%;display:var(--_ui5-v2-4-0-input-value-state-icon-display);align-items:center}.ui5-input-value-state-icon>svg{margin-right:8px}[inner-input]::selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}:host([disabled]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([disabled]) [inner-input]::-moz-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-moz-placeholder{visibility:hidden}[inner-input]::-webkit-input-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}[inner-input]::-moz-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}:host([value-state="Negative"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Negative"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-webkit-input-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-moz-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Positive"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Positive"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}.ui5-input-content{height:100%;box-sizing:border-box;display:flex;flex-direction:row;justify-content:flex-end;overflow:hidden;outline:none;background:transparent;color:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([value-state="None"]:not([readonly]):hover),:host(:not([value-state]):not([readonly]):hover){border:var(--_ui5-v2-4-0_input_hover_border);border-color:var(--_ui5-v2-4-0_input_focused_border_color);box-shadow:var(--sapField_Hover_Shadow);background:var(--sapField_Hover_BackgroundStyle);background-color:var(--sapField_Hover_Background)}:host(:not([value-state]):not([readonly])[focused]:not([opened]):hover),:host([value-state="None"]:not([readonly])[focused]:not([opened]):hover){box-shadow:none}:host([focused]):not([opened]) .ui5-input-root:before{content:none}:host(:not([readonly]):not([disabled])[value-state]:not([value-state="None"])){border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]) [inner-input],:host([value-state="Critical"]) [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style);text-indent:var(--_ui5-v2-4-0_input_error_warning_text_indent)}:host([value-state="Negative"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}:host([value-state="Critical"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_warning_font_weight)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}:host([value-state="Negative"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0-input-value-state-error-border-botom-color)}:host([value-state="Negative"]:not([readonly]):not([focused]):hover),:host([value-state="Negative"]:not([readonly])[focused][opened]:hover){background-color:var(--_ui5-v2-4-0_input_value_state_error_hover_background);box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])),:host([value-state="Critical"]:not([readonly]):not([disabled])),:host([value-state="Information"]:not([readonly]):not([disabled])){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}:host([value-state="Critical"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_warning_border_botom_color)}:host([value-state="Critical"]:not([readonly]):not([focused]):hover),:host([value-state="Critical"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}:host([value-state="Positive"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_success_border_botom_color)}:host([value-state="Positive"]:not([readonly]):not([focused]):hover),:host([value-state="Positive"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Information"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}:host([value-state="Information"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_success_information_border_botom_color)}:host([value-state="Information"]:not([readonly]):not([focused]):hover),:host([value-state="Information"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_InformationShadow)}.ui5-input-icon-root{min-width:var(--_ui5-v2-4-0_input_icon_min_width);height:100%;display:flex;justify-content:center;align-items:center}::slotted([ui5-icon][slot="icon"]){align-self:start;padding:var(--_ui5-v2-4-0_input_custom_icon_padding);box-sizing:content-box!important}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Negative"][focused]) .inputIcon,:host([value-state="Critical"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_focused_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host([value-state="Information"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_focused_icon_padding)}:host([value-state="Negative"]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_icon_padding)}:host([value-state="Negative"][focused]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"][focused]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding)}:host([value-state="Information"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_icon_padding)}:host([value-state="Information"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_focused_icon_padding)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}.ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_height);padding:0;width:var(--_ui5-v2-4-0_input_icon_width);min-width:var(--_ui5-v2-4-0_input_icon_width);display:flex;justify-content:center;align-items:center;box-sizing:border-box}:host([value-state]:not([value-state="None"]):not([value-state="Positive"])) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_state_height);vertical-align:top}:host([value-state="Positive"]) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_success_state_height)}[ui5-icon].ui5-input-clear-icon{padding:0;color:inherit}[inner-input]::-webkit-outer-spin-button,[inner-input]::-webkit-inner-spin-button{-webkit-appearance:inherit;margin:inherit}.ui5-select-root{min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));width:100%;height:100%;display:flex;outline:none;cursor:pointer;overflow:hidden;border-radius:var(--_ui5-v2-4-0_input_border_radius)}.ui5-select-label-root{flex-shrink:1;flex-grow:1;align-self:center;min-width:1rem;padding-inline-start:.5rem;cursor:pointer;outline:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--_ui5-v2-4-0_select_label_color);font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400}.ui5-select-option-icon{padding-inline-start:.5rem;color:var(--sapField_TextColor);align-self:center}:host(:not([disabled])){cursor:pointer}
`},WQ,ZW,{packageName:"@ui5/webcomponents",fileName:"themes/SelectPopover.css.ts",content:`.ui5-select-popover::part(content),.ui5-select-popover::part(header){padding:0}
`}],dependencies:[v2,$Q,_2,yfe,rf,X_]}),Fn("change",{detail:{selectedOption:{type:HTMLElement}},bubbles:!0,cancelable:!0}),Fn("live-change",{detail:{selectedOption:{type:HTMLElement}},bubbles:!0}),Fn("open",{bubbles:!0}),Fn("close"),Fn("selected-item-changed",{bubbles:!0})],Fc),Fc.define(),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var g1=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let ev=class extends BC{get displayIconBegin(){return!!this.icon}get effectiveDisplayText(){return this.textContent||""}};function ige(o,t,n){return n?et`<div class="ui5-cp-default-color-button-wrapper"><${Lt("ui5-button",t,n)} class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${le(this.colorPaletteDefaultColorText)}</${Lt("ui5-button",t,n)}><div class="ui5-cp-separator"></div></div>`:et`<div class="ui5-cp-default-color-button-wrapper"><ui5-button class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${le(this.colorPaletteDefaultColorText)}</ui5-button><div class="ui5-cp-separator"></div></div>`}function nge(o,t,n,c,h){return et`<slot name="${le(c._individualSlot)}"></slot>`}function rge(o,t,n){return n?et`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><${Lt("ui5-button",t,n)} design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${le(this.colorPaletteMoreColorsText)}</${Lt("ui5-button",t,n)}></div>`:et`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><ui5-button design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${le(this.colorPaletteMoreColorsText)}</ui5-button></div>`}function sge(o,t,n){return et`<div class="ui5-cp-recent-colors-wrapper"><div class="ui5-cp-separator"></div><div class="ui5-cp-recent-colors-container" @keydown="${this._onRecentColorsContainerKeyDown}">${u1(this.recentColors,(c,h)=>c._id||h,(c,h)=>oge.call(this,o,t,n,c,h))}</div></div>`}function oge(o,t,n,c,h){return n?et`<${Lt("ui5-color-palette-item",t,n)} value="${le(c)}"></${Lt("ui5-color-palette-item",t,n)}>`:et`<ui5-color-palette-item value="${le(c)}"></ui5-color-palette-item>`}function age(o,t,n){return n?et`<${Lt("ui5-dialog",t,n)} header-text="${le(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><${Lt("ui5-color-picker",t,n)}></${Lt("ui5-color-picker",t,n)}></div><div slot="footer" class="ui5-cp-dialog-footer"><${Lt("ui5-button",t,n)} design="Emphasized" @click="${this._chooseCustomColor}">${le(this.colorPaletteDialogOKButton)}</${Lt("ui5-button",t,n)}><${Lt("ui5-button",t,n)} design="Transparent" @click="${this._closeDialog}">${le(this.colorPaletteCancelButton)}</${Lt("ui5-button",t,n)}></div></${Lt("ui5-dialog",t,n)}>`:et`<ui5-dialog header-text="${le(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><ui5-color-picker></ui5-color-picker></div><div slot="footer" class="ui5-cp-dialog-footer"><ui5-button design="Emphasized" @click="${this._chooseCustomColor}">${le(this.colorPaletteDialogOKButton)}</ui5-button><ui5-button design="Transparent" @click="${this._closeDialog}">${le(this.colorPaletteCancelButton)}</ui5-button></div></ui5-dialog>`}g1([Ro({type:Node,default:!0,invalidateOnChildChange:!0})],ev.prototype,"text",void 0),g1([He()],ev.prototype,"value",void 0),g1([He()],ev.prototype,"icon",void 0),g1([He()],ev.prototype,"additionalText",void 0),g1([He()],ev.prototype,"tooltip",void 0),g1([He({type:Boolean})],ev.prototype,"selected",void 0),ev=g1([Ds({tag:"ui5-option",template:function(o,t,n){return et`<li part="native-li" data-sap-focus-ref tabindex="${le(this._effectiveTabIndex)}" class="${br(this.classes.main)}" @focusin="${this._onfocusin}" @keyup="${this._onkeyup}" @keydown="${this._onkeydown}" draggable="${le(this.movable)}" @click="${this._onclick}"  role="option" title="${le(this.tooltip)}" ><div part="content" id="${le(this._id)}-content" class="ui5-li-content">${this.displayIconBegin?ege.call(this,o,t,n):void 0}<div class="ui5-li-text-wrapper"><span part="title" class="ui5-li-title"><slot></slot></span>${this.additionalText?tge.call(this,o,t,n):void 0}</div></div></li> `},styles:[BC.styles,zW,{packageName:"@ui5/webcomponents",fileName:"themes/ListItemIcon.css.ts",content:`.ui5-li-icon{color:var(--sapList_TextColor);min-width:var(--_ui5-v2-4-0_list_item_icon_size);min-height:var(--_ui5-v2-4-0_list_item_icon_size);padding-inline-end:var(--_ui5-v2-4-0_list_item_icon_padding-inline-end)}
`},{packageName:"@ui5/webcomponents",fileName:"themes/OptionBase.css.ts",content:`:host{height:var(--_ui5-v2-4-0_list_item_dropdown_base_height)}
`}],dependencies:[rf]})],ev),ev.define(),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var jQ,ay=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let hg=jQ=class extends xa{constructor(){super(),this.value="",this.selected=!1,this.forcedTabIndex="-1",this.onPhone=!1,this._disabled=!1}onBeforeRendering(){this._disabled=!this.value,this.onPhone=Ml(),this.setAttribute("style",`background-color: ${this.value}`);const o=this.offsetHeight+4;this.style.setProperty(fC("--_ui5_color_palette_item_height"),`${o}px`)}get colorLabel(){return jQ.i18nBundle.getText(Lde)}get styles(){return{root:{"background-color":this.value}}}get classes(){return{root:{"ui5-cp-item":!0}}}};ay([He()],hg.prototype,"value",void 0),ay([He({type:Boolean})],hg.prototype,"selected",void 0),ay([He({noAttribute:!0})],hg.prototype,"forcedTabIndex",void 0),ay([He({type:Number})],hg.prototype,"index",void 0),ay([He({type:Boolean})],hg.prototype,"onPhone",void 0),ay([He({type:Boolean})],hg.prototype,"_disabled",void 0),ay([al("@ui5/webcomponents")],hg,"i18nBundle",void 0),hg=jQ=ay([Ds({tag:"ui5-color-palette-item",renderer:Ca,styles:{packageName:"@ui5/webcomponents",fileName:"themes/ColorPaletteItem.css.ts",content:`:host(:not([hidden])){height:var(--_ui5-v2-4-0_color-palette-item-height);width:var(--_ui5-v2-4-0_color-palette-item-height);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:var(--_ui5-v2-4-0_color-palette-item-outer-border-radius);display:inline-block;margin:var(--_ui5-v2-4-0_color-palette-item-margin);box-sizing:border-box}:host(:not([_disabled]):hover),:host([selected]){height:var(--_ui5-v2-4-0_color-palette-item-hover-height);width:var(--_ui5-v2-4-0_color-palette-item-hover-height);margin:var(--_ui5-v2-4-0_color-palette-item-hover-margin);border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius)}:host(:not([hidden])[on-phone]){width:calc(100% - .5rem);padding-block-start:calc(100% - .625rem);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:.25rem;display:inline-block;margin:.625rem;height:0;max-width:4.5rem;max-height:4.5rem}:host([selected][on-phone]){padding-block-start:calc(100% - .125rem);width:100%;margin:0}.ui5-cp-item{position:relative;box-sizing:border-box;border-radius:var(--_ui5-v2-4-0_color-palette-item-inner-border-radius);width:100%;height:100%}:host(:not([_disabled]):not([on-phone]):hover) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius)}:host(:not([_disabled])[on-phone]) .ui5-cp-item{border-radius:.1875rem}.ui5-cp-item:hover:not(:focus),:host([selected]:not([on-phone])) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius);box-sizing:border-box}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus,:host([selected]:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item{border:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border)}:host([selected]) .ui5-cp-item:focus,:host(:not([_disabled])) .ui5-cp-item:focus{outline:none}:host(:not([_disabled]):not([on-phone]):focus) .ui5-cp-item{pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):focus:not(:hover)) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host([selected]:not([_disabled]):not([on-phone]):not(:focus):not(:hover)) .ui5-cp-item:after,:host([selected]:not([_disabled]):not([on-phone]):not(:focus):hover) .ui5-cp-item:after,:host(:not([selected]):not([on-phone]):hover) .ui5-cp-item:after{content:"";box-sizing:border-box;position:absolute;inset:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset) - .0625rem);border:var(--_ui5-v2-4-0_color-palette-item-after-not-focus-color);border-radius:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius) + .0625rem);pointer-events:none}:host(:not([_disabled]):not([on-phone]):not([selected]):not(:hover)) .ui5-cp-item:focus:not(:hover):after{border:var(--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border)}:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before,:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:hover:before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border-before);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before,:host(:not([disabled])) .ui5-cp-item:focus-visible:after{content:"";box-sizing:border-box;position:absolute;pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius)}:host(:not([disabled])) .ui5-cp-item:focus-visible:after{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border)}
`},template:function(o,t,n){return et`<div class="${br(this.classes.root)}" style="${Hr(this.styles.root)}" value="${le(this.value)}" tabindex="${le(this.forcedTabIndex)}" role="button" aria-label="${le(this.colorLabel)} - ${le(this.index)}: ${le(this.value)}" title="${le(this.colorLabel)} - ${le(this.index)}: ${le(this.value)}" ?disabled="${this._disabled}"></div>`},shadowRootOptions:{delegatesFocus:!0}})],hg),hg.define();const lge=hg;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var DC,Tm=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let np=DC=class extends xa{constructor(){super(),this.showRecentColors=!1,this.showMoreColors=!1,this.showDefaultColor=!1,this.popupMode=!1,this.onPhone=!1,this._shouldFocusRecentColors=!1,this._itemNavigation=new Z5(this,{getItemsCallback:()=>this.displayedColors,rowSize:this.rowSize,behavior:j0.Cyclic}),this._itemNavigationRecentColors=new Z5(this,{getItemsCallback:()=>this.recentColorsElements,rowSize:this.rowSize,behavior:j0.Static}),this._recentColors=[]}onBeforeRendering(){this._ensureSingleSelectionOrDeselectAll();const o=this.selectedItem;if(o&&!this.showRecentColors&&(this._selectedColor=o.value),this.displayedColors.forEach((t,n)=>{t.index=n+1}),this.showMoreColors){const t=YB("ColorPaletteMoreColors");t.i18nBundle=DC.i18nBundle,t&&(this.moreColorsFeature=new t)}this.onPhone=Ml()}get _effectiveShowMoreColors(){return!(!this.showMoreColors||!this.moreColorsFeature)}onAfterRendering(){if(this.hasRecentColors&&this._shouldFocusRecentColors){this.selectedItem&&(this.selectedItem.selected=!1);const o=this.recentColorsElements[0];o.selected=!0,this._currentlySelected=o,this._currentlySelected.focus(),this._shouldFocusRecentColors=!1}}selectColor(o){o.value&&(o.focus(),this.displayedColors.includes(o)&&this._itemNavigation.setCurrentItem(o),this._setColor(o.value))}_setColor(o){this._selectedColor=o,this._recentColors[0]!==this._selectedColor&&(this._recentColors.includes(this._selectedColor)?this._recentColors.unshift(this._recentColors.splice(this._recentColors.indexOf(this._selectedColor),1)[0]):this._addRecentColor(this._selectedColor)),this.fireDecoratorEvent("item-click",{color:this._selectedColor})}get effectiveColorItems(){let o=this.colors;return this.popupMode&&(o=this.getSlottedNodes("colors")),o}_ensureSingleSelectionOrDeselectAll(){let o;this.allColorsInPalette.forEach(t=>{t.selected&&(o&&(o.selected=!1),o=t)})}_onclick(o){this.handleSelection(o.target)}_onkeyup(o){const t=o.target;Do(o)&&(o.preventDefault(),this.handleSelection(t))}_onkeydown(o){const t=o.target;Zo(o)&&this.handleSelection(t),Do(o)&&o.preventDefault()}handleSelection(o){o.hasAttribute("ui5-color-palette-item")&&o.value&&(this._shouldFocusRecentColors=!1,this.selectColor(o),this.recentColorsElements.includes(o)?(this.recentColorsElements[0].selected=!0,this.recentColorsElements[0].focus(),this._currentlySelected=this.recentColorsElements[0]):(this.allColorsInPalette.forEach(t=>{t.selected=t===o}),this._currentlySelected=o),this._ensureSingleSelectionOrDeselectAll())}_handleDefaultColorClick(o){o.preventDefault(),this._onDefaultColorClick()}_onDefaultColorKeyUp(o){Do(o)&&this._handleDefaultColorClick(o)}_onDefaultColorKeyDown(o){if(W0(o)&&this.popupMode&&this._handleDefaultColorClick(o),Zo(o)&&this._handleDefaultColorClick(o),_A(o))o.stopPropagation(),this.focusColorElement(this.colorPaletteNavigationElements[1],this._itemNavigation);else if(xd(o)){o.stopPropagation();const t=this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length-1];if(this.hasRecentColors)this.focusColorElement(t,this._itemNavigationRecentColors);else if(this.showMoreColors)t.focus();else{const n=this.displayedColors.length%this.rowSize*this.rowSize;this.focusColorElement(this.displayedColors[n],this._itemNavigation)}}}_onMoreColorsKeyDown(o){const t=o.target,n=this.colorPaletteNavigationElements.indexOf(t),c=this.displayedColors.length%this.rowSize*this.rowSize;xd(o)?(o.stopPropagation(),this.focusColorElement(this.displayedColors[c],this._itemNavigation)):_A(o)&&(o.stopPropagation(),this.hasRecentColors?this.focusColorElement(this.colorPaletteNavigationElements[n+1],this._itemNavigationRecentColors):this.showDefaultColor?this.firstFocusableElement.focus():this.focusColorElement(this.displayedColors[0],this._itemNavigation))}_isUpOrDownNavigatableColorPaletteItem(o){return(xd(o)||_A(o))&&this._currentlySelected&&this.colorPaletteNavigationElements.includes(this._currentlySelected)}_onColorContainerKeyDown(o){const t=o.target,n=this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length-1];if(this._isUpOrDownNavigatableColorPaletteItem(o)&&(this._currentlySelected=void 0),W0(o)&&this.popupMode&&(o.preventDefault(),this.selectColor(t)),xd(o)&&t===this.displayedColors[0]&&this.colorPaletteNavigationElements.length>1)o.stopPropagation(),this.showDefaultColor?this.firstFocusableElement.focus():!this.showDefaultColor&&this.hasRecentColors?this.focusColorElement(n,this._itemNavigationRecentColors):!this.showDefaultColor&&this.showMoreColors&&n.focus();else if(_A(o)&&t===this.displayedColors[this.displayedColors.length-1]&&this.colorPaletteNavigationElements.length>1){o.stopPropagation();const c=this.showDefaultColor&&!this.showMoreColors&&this.hasRecentColors||!this.showDefaultColor&&!this.showMoreColors&&this.hasRecentColors;this.showDefaultColor&&this.showMoreColors?this.colorPaletteNavigationElements[2].focus():!this.showDefaultColor||this.showMoreColors||this.showRecentColors&&this.recentColors[0]?c?this.focusColorElement(n,this._itemNavigationRecentColors):!this.showDefaultColor&&this.showMoreColors&&this.colorPaletteNavigationElements[1].focus():this.firstFocusableElement.focus()}}_onRecentColorsContainerKeyDown(o){if(this._isUpOrDownNavigatableColorPaletteItem(o)&&(this._currentlySelected=void 0),xd(o)){if(this.showMoreColors){const t=this.showDefaultColor?2:1;this.colorPaletteNavigationElements[t].focus()}else if(!this.showMoreColors&&this.colorPaletteNavigationElements.length>1){const t=this.displayedColors.length%this.rowSize*this.rowSize;o.stopPropagation(),this.focusColorElement(this.displayedColors[t],this._itemNavigation)}}else _A(o)&&(this.showDefaultColor?this.firstFocusableElement.focus():(o.stopPropagation(),this.focusColorElement(this.displayedColors[0],this._itemNavigation)))}focusColorElement(o,t){t.setCurrentItem(o),t._focusCurrentItem()}get firstFocusableElement(){return this.colorPaletteNavigationElements[0]}_chooseCustomColor(){const o=this.getColorPicker();this._setColor(o.value),this._closeDialog(),this._shouldFocusRecentColors=!0}_addRecentColor(o){this.showRecentColors&&!this._recentColors.includes(o)&&(this._recentColors.unshift(o),this._recentColors.length>this.rowSize&&this._recentColors.pop())}_closeDialog(){this._getDialog().open=!1}_openMoreColorsDialog(){this._getDialog().open=!0}_onDefaultColorClick(){this.defaultColor&&(this._setColor(this.defaultColor),this._addRecentColor(this.defaultColor),this.selectedItem&&(this.selectedItem.selected=!1,this._currentlySelected=void 0))}get selectedItem(){return this.allColorsInPalette.find(o=>o.selected)}get allColorsInPalette(){return[...this.effectiveColorItems,...this.recentColorsElements]}get colorPaletteDialogTitle(){var o;return(o=this.moreColorsFeature)==null?void 0:o.colorPaletteDialogTitle}get colorPaletteDialogOKButton(){var o;return(o=this.moreColorsFeature)==null?void 0:o.colorPaletteDialogOKButton}get colorPaletteCancelButton(){var o;return(o=this.moreColorsFeature)==null?void 0:o.colorPaletteCancelButton}get selectedColor(){return this._selectedColor}get displayedColors(){return this.getSlottedNodes("colors").filter(o=>o.value).slice(0,15)}get colorContainerLabel(){return DC.i18nBundle.getText(Ude)}get colorPaletteMoreColorsText(){return DC.i18nBundle.getText(Qde)}get colorPaletteDefaultColorText(){return DC.i18nBundle.getText(Nde)}get _showMoreColors(){return this.showMoreColors&&this.moreColorsFeature}get rowSize(){return 5}get hasRecentColors(){return this.showRecentColors&&this.recentColors[0]}get recentColors(){for(this._recentColors.length>this.rowSize&&(this._recentColors=this._recentColors.slice(0,this.rowSize));this._recentColors.length<this.rowSize;)this._recentColors.push("");return this._recentColors}get recentColorsElements(){const o=this.getDomRef();return o?Array.from(o.querySelectorAll(".ui5-cp-recent-colors-wrapper [ui5-color-palette-item]")).filter(t=>t.value!==""):[]}get colorPaletteNavigationElements(){const o=[],t=this.shadowRoot.querySelector(".ui5-cp-root");return this._currentlySelected&&o.push(this._currentlySelected),this.showDefaultColor&&o.push(t.querySelector(".ui5-cp-default-color-button")),o.push(this.displayedColors[0]),this.showMoreColors&&o.push(t.querySelector(".ui5-cp-more-colors")),this.showRecentColors&&this.recentColorsElements.length&&o.push(this.recentColorsElements[0]),o}get classes(){return{colorPaletteRoot:{"ui5-cp-root":!0,"ui5-cp-root-phone":Ml()}}}_getDialog(){return this.shadowRoot.querySelector("[ui5-dialog]")}getColorPicker(){return this._getDialog().content[0].querySelector("[ui5-color-picker]")}};Tm([He({type:Boolean})],np.prototype,"showRecentColors",void 0),Tm([He({type:Boolean})],np.prototype,"showMoreColors",void 0),Tm([He({type:Boolean})],np.prototype,"showDefaultColor",void 0),Tm([He()],np.prototype,"defaultColor",void 0),Tm([He()],np.prototype,"_selectedColor",void 0),Tm([He({type:Boolean})],np.prototype,"popupMode",void 0),Tm([He({type:Boolean})],np.prototype,"onPhone",void 0),Tm([Ro({default:!0,type:HTMLElement,invalidateOnChildChange:!0,individualSlots:!0})],np.prototype,"colors",void 0),Tm([al("@ui5/webcomponents")],np,"i18nBundle",void 0),np=DC=Tm([Ds({tag:"ui5-color-palette",renderer:Ca,features:["ColorPaletteMoreColors"],template:function(o,t,n){return et`<div class="${br(this.classes.colorPaletteRoot)}" @click=${this._onclick} @keyup=${this._onkeyup} @keydown=${this._onkeydown}>${this.showDefaultColor?ige.call(this,o,t,n):void 0}<div class="ui5-cp-item-container" role="region" aria-label="${le(this.colorContainerLabel)}" @keydown="${this._onColorContainerKeyDown}">${u1(this.displayedColors,(c,h)=>c._id||h,(c,h)=>nge.call(this,o,t,n,c,h))}</div>${this._showMoreColors?rge.call(this,o,t,n):void 0}${this.showRecentColors?sge.call(this,o,t,n):void 0}</div>${this._effectiveShowMoreColors?age.call(this,o,t,n):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ColorPalette.css.ts",content:`:host(:not([hidden])){display:inline-block}:host(:not([hidden])[popup-mode]),:host(:not([hidden])[on-phone]){width:100%;overflow:hidden}.ui5-cp-root{display:flex;flex-direction:column}.ui5-cp-root.ui5-cp-root-phone,.ui5-cp-separator,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper,.ui5-cp-recent-colors-wrapper{width:100%}.ui5-cp-root.ui5-cp-root-phone .ui5-cp-item-container{padding:.375rem .625rem;width:100%;max-width:100%;max-height:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-default-color-button,.ui5-cp-root-phone .ui5-cp-more-colors,.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper{height:2.875rem}.ui5-cp-root-phone .ui5-cp-item-container{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center}.ui5-cp-root-phone .ui5-cp-recent-colors-container{padding:.375rem .625rem;display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center;width:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-recent-colors-wrapper{max-width:100%;padding:0;display:flex;justify-content:center;flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden}.ui5-cp-recent-colors-wrapper{display:flex;align-items:center;flex-direction:column;gap:.25rem}.ui5-cp-root.ui5-cp-root-phone{display:flex}.ui5-cp-item-container{display:flex;max-width:var(--_ui5-v2-4-0_color-palette-row-width);flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden;padding:var(--_ui5-v2-4-0_color-palette-swatch-container-padding)}.ui5-cp-more-colors,.ui5-cp-default-color-button{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);text-align:center;border:none}.ui5-cp-more-colors-wrapper,.ui5-cp-default-color-button-wrapper{display:flex;flex-direction:column}.ui5-cp-separator{height:.0625rem;background:var(--sapToolbar_SeparatorColor)}.ui5-cp-default-color-button,.ui5-cp-more-colors{padding:.0625rem}
`},{packageName:"@ui5/webcomponents",fileName:"themes/ColorPaletteDialog.css.ts",content:`.ui5-cp-dialog-content{display:flex;justify-content:center;align-items:center;margin:1rem 0}.ui5-cp-dialog-footer{width:100%;display:flex;justify-content:flex-end;margin:.1875rem 1rem}.ui5-cp-dialog-footer [ui5-button]:first-child{margin-right:1rem}
`}],get dependencies(){const o=YB("ColorPaletteMoreColors");return[lge,X_].concat(o?o.dependencies:[])}}),Fn("item-click",{detail:{color:{type:String}}})],np),np.define();const cge=np;function e3(o,t,n,c,h){return et`<slot name="${le(c._individualSlot)}"></slot>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var gR,tv=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let dg=gR=class extends xa{constructor(){super(),this.showRecentColors=!1,this.showMoreColors=!1,this.showDefaultColor=!1,this.open=!1}get responsivePopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}get respPopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}closePopover(){this.open=!1}onAfterClose(){this.closePopover(),this.fireDecoratorEvent("close")}onAfterOpen(){var o;const t=this._colorPalette;t._currentlySelected?(o=t._currentlySelected)==null||o.focus():t.showRecentColors&&t.recentColorsElements.length?t.recentColorsElements[0].focus():t.showDefaultColor&&t.colorPaletteNavigationElements[0].focus(),t.allColorsInPalette.forEach(n=>{const c=n.offsetHeight+4;n.style.setProperty(fC("--_ui5_color_palette_item_height"),`${c}px`)})}onSelectedColor(o){this.closePopover(),this.fireDecoratorEvent("item-click",o.detail)}get _colorPalette(){return this.responsivePopover.content[0].querySelector("[ui5-color-palette]")}isOpen(){return this.open}get colorPaletteColors(){return this.getSlottedNodes("colors")}get _colorPaletteTitle(){return gR.i18nBundle.getText(kde)}get _cancelButtonLabel(){return gR.i18nBundle.getText(N$)}get _open(){return this.open||void 0}};tv([He({type:Boolean})],dg.prototype,"showRecentColors",void 0),tv([He({type:Boolean})],dg.prototype,"showMoreColors",void 0),tv([He({type:Boolean})],dg.prototype,"showDefaultColor",void 0),tv([He()],dg.prototype,"defaultColor",void 0),tv([He({type:Boolean})],dg.prototype,"open",void 0),tv([He({converter:cW})],dg.prototype,"opener",void 0),tv([Ro({default:!0,type:HTMLElement,individualSlots:!0})],dg.prototype,"colors",void 0),tv([al("@ui5/webcomponents")],dg,"i18nBundle",void 0),dg=gR=tv([Ds({tag:"ui5-color-palette-popover",renderer:Ca,styles:[WQ,{packageName:"@ui5/webcomponents",fileName:"themes/ColorPalettePopover.css.ts",content:`.ui5-cp-header{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);display:flex;align-items:center}.ui5-cp-footer{width:100%;display:flex;justify-content:flex-end;align-items:center;margin:.1875rem 0}[ui5-responsive-popover]::part(content){padding:0}.ui5-cp-item-container{padding:.3125rem .6875rem}
`}],template:function(o,t,n){return n?et`<${Lt("ui5-responsive-popover",t,n)} hide-arrow content-only-on-desktop placement="Bottom" .opener="${le(this.opener)}" ?open="${this._open}" @ui5-close="${le(this.onAfterClose)}" @ui5-open="${le(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><${Lt("ui5-title",t,n)} level="H1" wrapping-type="None">${le(this._colorPaletteTitle)}</${Lt("ui5-title",t,n)}></div><div><${Lt("ui5-color-palette",t,n)} ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${le(this.defaultColor)}" popup-mode @ui5-item-click="${le(this.onSelectedColor)}">${u1(this.colorPaletteColors,(c,h)=>c._id||h,(c,h)=>e3.call(this,o,t,n,c,h))}</${Lt("ui5-color-palette",t,n)}></div><div slot="footer" class="ui5-cp-footer"><${Lt("ui5-button",t,n)} design="Transparent" @click="${this.closePopover}">${le(this._cancelButtonLabel)}</${Lt("ui5-button",t,n)}></div></${Lt("ui5-responsive-popover",t,n)}>`:et`<ui5-responsive-popover hide-arrow content-only-on-desktop placement="Bottom" .opener="${le(this.opener)}" ?open="${this._open}" @ui5-close="${le(this.onAfterClose)}" @ui5-open="${le(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><ui5-title level="H1" wrapping-type="None">${le(this._colorPaletteTitle)}</ui5-title></div><div><ui5-color-palette ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${le(this.defaultColor)}" popup-mode @ui5-item-click="${le(this.onSelectedColor)}">${u1(this.colorPaletteColors,(c,h)=>c._id||h,(c,h)=>e3.call(this,o,t,n,c,h))}</ui5-color-palette></div><div slot="footer" class="ui5-cp-footer"><ui5-button design="Transparent" @click="${this.closePopover}">${le(this._cancelButtonLabel)}</ui5-button></div></ui5-responsive-popover>`},dependencies:[$Q,X_,dW,cge]}),Fn("item-click",{detail:{color:{type:String}},bubbles:!0}),Fn("close",{bubbles:!0})],dg),dg.define();const t3=new Map([["aliceblue","f0f8ff"],["antiquewhite","faebd7"],["aqua","00ffff"],["aquamarine","7fffd4"],["azure","f0ffff"],["beige","f5f5dc"],["bisque","ffe4c4"],["black","000000"],["blanchedalmond","ffebcd"],["blue","0000ff"],["blueviolet","8a2be2"],["brown","a52a2a"],["burlywood","deb887"],["cadetblue","5f9ea0"],["chartreuse","7fff00"],["chocolate","d2691e"],["coral","ff7f50"],["cornflowerblue","6495ed"],["cornsilk","fff8dc"],["crimson","dc143c"],["cyan","00ffff"],["darkblue","00008b"],["darkcyan","008b8b"],["darkgoldenrod","b8860b"],["darkgray","a9a9a9"],["darkgrey","a9a9a9"],["darkgreen","006400"],["darkkhaki","bdb76b"],["darkmagenta","8b008b"],["darkolivegreen","556b2f"],["darkorange","ff8c00"],["darkorchid","9932cc"],["darkred","8b0000"],["darksalmon","e9967a"],["darkseagreen","8fbc8f"],["darkslateblue","483d8b"],["darkslategray","2f4f4f"],["darkslategrey","2f4f4f"],["darkturquoise","00ced1"],["darkviolet","9400d3"],["deeppink","ff1493"],["deepskyblue","00bfff"],["dimgray","696969"],["dimgrey","696969"],["dodgerblue","1e90ff"],["firebrick","b22222"],["floralwhite","fffaf0"],["forestgreen","228b22"],["fuchsia","ff00ff"],["gainsboro","dcdcdc"],["ghostwhite","f8f8ff"],["gold","ffd700"],["goldenrod","daa520"],["gray","808080"],["grey","808080"],["green","008000"],["greenyellow","adff2f"],["honeydew","f0fff0"],["hotpink","ff69b4"],["indianred","cd5c5c"],["indigo","4b0082"],["ivory","fffff0"],["khaki","f0e68c"],["lavender","e6e6fa"],["lavenderblush","fff0f5"],["lawngreen","7cfc00"],["lemonchiffon","fffacd"],["lightblue","add8e6"],["lightcoral","f08080"],["lightcyan","e0ffff"],["lightgoldenrodyellow","fafad2"],["lightgray","d3d3d3"],["lightgrey","d3d3d3"],["lightgreen","90ee90"],["lightpink","ffb6c1"],["lightsalmon","ffa07a"],["lightseagreen","20b2aa"],["lightskyblue","87cefa"],["lightslategray","778899"],["lightslategrey","778899"],["lightsteelblue","b0c4de"],["lightyellow","ffffe0"],["lime","00ff00"],["limegreen","32cd32"],["linen","faf0e6"],["magenta","ff00ff"],["maroon","800000"],["mediumaquamarine","66cdaa"],["mediumblue","0000cd"],["mediumorchid","ba55d3"],["mediumpurple","9370db"],["mediumseagreen","3cb371"],["mediumslateblue","7b68ee"],["mediumspringgreen","00fa9a"],["mediumturquoise","48d1cc"],["mediumvioletred","c71585"],["midnightblue","191970"],["mintcream","f5fffa"],["mistyrose","ffe4e1"],["moccasin","ffe4b5"],["navajowhite","ffdead"],["navy","000080"],["oldlace","fdf5e6"],["olive","808000"],["olivedrab","6b8e23"],["orange","ffa500"],["orangered","ff4500"],["orchid","da70d6"],["palegoldenrod","eee8aa"],["palegreen","98fb98"],["paleturquoise","afeeee"],["palevioletred","db7093"],["papayawhip","ffefd5"],["peachpuff","ffdab9"],["peru","cd853f"],["pink","ffc0cb"],["plum","dda0dd"],["powderblue","b0e0e6"],["purple","800080"],["red","ff0000"],["rosybrown","bc8f8f"],["royalblue","4169e1"],["saddlebrown","8b4513"],["salmon","fa8072"],["sandybrown","f4a460"],["seagreen","2e8b57"],["seashell","fff5ee"],["sienna","a0522d"],["silver","c0c0c0"],["skyblue","87ceeb"],["slateblue","6a5acd"],["slategray","708090"],["slategrey","708090"],["snow","fffafa"],["springgreen","00ff7f"],["steelblue","4682b4"],["tan","d2b48c"],["teal","008080"],["thistle","d8bfd8"],["tomato","ff6347"],["turquoise","40e0d0"],["violet","ee82ee"],["wheat","f5deb3"],["white","ffffff"],["whitesmoke","f5f5f5"],["yellow","ffff00"],["yellowgreen","9acd32"],["transparent","00000000"]]),KQ=o=>o.startsWith("rgba")?uge(o):o.startsWith("rgb")?hge(o):(o.indexOf("#")===0&&(o=o.length===4?`${o[1]}${o[1]}${o[2]}${o[2]}${o[3]}${o[3]}`:o.slice(1,o.length)),t3.has(o)&&(o=t3.get(o)),n3(o)),uge=o=>{const t=o.indexOf("("),n=[];for(let c=0;c<o.length;c++)o[c]===","&&n.push(c);return{r:parseInt(o.slice(t+1,n[0]).trim()),g:parseInt(o.slice(n[0]+1,n[1]).trim()),b:parseInt(o.slice(n[1]+1,n[2]).trim())}},hge=o=>{const t=o.indexOf("("),n=o.indexOf(")"),c=[];for(let h=0;h<o.length;h++)o[h]===","&&c.push(h);return{r:parseInt(o.slice(t+1,c[0]).trim()),g:parseInt(o.slice(c[0]+1,c[1]).trim()),b:parseInt(o.slice(c[1]+1,n).trim())}},i3=o=>{let t,n,c,h=100*o.s,f=100*o.l;h>100?h=1:h<0?h=0:h/=100,f>100?f=1:f<0?f=0:f/=100;const d=o.h,p=h*(1-Math.abs(2*f-1)),v=255*(f-.5*p),w=v+p*(1-Math.abs(d/60%2-1))*255,S=v+255*p;switch(Math.floor(d/60)){case 0:t=S,n=w,c=v;break;case 1:t=w,n=S,c=v;break;case 2:t=v,n=S,c=w;break;case 3:t=v,n=w,c=S;break;case 4:t=w,n=v,c=S;break;case 5:t=S,n=v,c=w;break;default:t=0,n=0,c=0}return{r:Math.round(t),g:Math.round(n),b:Math.round(c)}},n3=o=>({r:parseInt(o.substr(0,2),16),g:parseInt(o.substr(2,2),16),b:parseInt(o.substr(4,2),16)});var XQ,dge=/[\x00-\x2b\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff\u2028\u2029]/g,Age=/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f-\x9f]/,r3={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},pge=function(o){var t=r3[o];return t||(t=Age.test(o)?"&#xfffd;":"&#x"+o.charCodeAt(0).toString(16)+";",r3[o]=t),t};tr("not-editable",{pathData:"M443 104q5 7 5 12 0 6-5 11L118 453q-4 4-8 4L0 480l22-110q0-5 4-9L352 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L52 381l46 46zm158 116l32 32-66 63 66 66-32 32-63-66-65 66-33-32 66-66-66-63 33-32 65 64z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("not-editable",{pathData:"M504 94q7 7 7 18t-7 18L130 504q-8 8-18 8H26q-11 0-18.5-7.5T0 486v-86q0-9 7-18L381 8q8-8 18-8 12 0 18 8zM363 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50zm56 356q7 7 7 18t-7.5 18.5T486 512q-10 0-18-8l-37-37-38 37q-8 8-18 8-11 0-18.5-7.5T349 486q0-10 8-18l38-37-38-38q-8-8-8-18 0-11 7.5-18.5T375 349q10 0 18 8l38 37 37-37q8-8 18-8 11 0 18.5 7.5T512 375t-7 18l-38 38z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),function(o){o.Text="Text",o.Email="Email",o.Number="Number",o.Password="Password",o.Tel="Tel",o.URL="URL",o.Search="Search"}(XQ||(XQ={}));const s3=XQ;function fge(o,t,n){return n?et`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><${Lt("ui5-icon",t,n)} part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${le(this.clearIconAccessibleName)}"></${Lt("ui5-icon",t,n)}></div>`:et`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><ui5-icon part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${le(this.clearIconAccessibleName)}"></ui5-icon></div>`}function gge(o,t,n){return et`<div class="ui5-input-icon-root"><slot name="icon"></slot></div>`}function mge(o,t,n){return et`<span id="suggestionsText" class="ui5-hidden-text">${le(this.suggestionsText)}</span><span id="selectionText" class="ui5-hidden-text" aria-live="polite" role="status"></span><span id="suggestionsCount" class="ui5-hidden-text" aria-live="polite">${le(this.availableSuggestionsCount)}</span>`}function _ge(o,t,n){return et`<span id="descr" class="ui5-hidden-text">${le(this.accInfo.input.ariaDescription)}</span>`}function vge(o,t,n){return et`<span id="valueStateDesc" class="ui5-hidden-text">${le(this.ariaValueStateHiddenText)}</span>`}function yge(o,t,n){return n?et`<${Lt("ui5-responsive-popover",t,n)} class="${br(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${Hr(this.styles.suggestionsPopover)}" @ui5-open="${le(this._afterOpenPicker)}" @ui5-close="${le(this._afterClosePicker)}" @ui5-scroll="${le(this._scroll)}" .open=${le(this.open)} .opener=${le(this)} accessible-name="${le(this._popupLabel)}">${this._isPhone?o3.call(this,o,t,n):void 0}${this._isPhone?void 0:c3.call(this,o,t,n)}<${Lt("ui5-list",t,n)} separators="${le(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${le(this._handleSuggestionItemPress)}" @ui5-selection-change="${le(this._handleSelectionChange)}"><slot></slot></${Lt("ui5-list",t,n)}>${this._isPhone?h3.call(this,o,t,n):void 0}</${Lt("ui5-responsive-popover",t,n)}>`:et`<ui5-responsive-popover class="${br(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${Hr(this.styles.suggestionsPopover)}" @ui5-open="${le(this._afterOpenPicker)}" @ui5-close="${le(this._afterClosePicker)}" @ui5-scroll="${le(this._scroll)}" .open=${le(this.open)} .opener=${le(this)} accessible-name="${le(this._popupLabel)}">${this._isPhone?o3.call(this,o,t,n):void 0}${this._isPhone?void 0:c3.call(this,o,t,n)}<ui5-list separators="${le(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${le(this._handleSuggestionItemPress)}" @ui5-selection-change="${le(this._handleSelectionChange)}"><slot></slot></ui5-list>${this._isPhone?h3.call(this,o,t,n):void 0}</ui5-responsive-popover>`}function o3(o,t,n){return n?et`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${le(this._headerTitleText)}</span><${Lt("ui5-button",t,n)} class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></${Lt("ui5-button",t,n)}></div><div class="row"><div class="input-root-phone native-input-wrapper"><${Lt("ui5-input",t,n)} class="ui5-input-inner-phone" type="${le(this.inputType)}" .value="${le(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${le(this.placeholder)}" @ui5-input="${le(this._handleInput)}" @ui5-change="${le(this._handleChange)}"></${Lt("ui5-input",t,n)}></div></div></div>${this.hasValueStateMessage?a3.call(this,o,t,n):void 0}`:et`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${le(this._headerTitleText)}</span><ui5-button class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></ui5-button></div><div class="row"><div class="input-root-phone native-input-wrapper"><ui5-input class="ui5-input-inner-phone" type="${le(this.inputType)}" .value="${le(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${le(this.placeholder)}" @ui5-input="${le(this._handleInput)}" @ui5-change="${le(this._handleChange)}"></ui5-input></div></div></div>${this.hasValueStateMessage?a3.call(this,o,t,n):void 0}`}function a3(o,t,n){return n?et`<div class="${br(this.classes.popoverValueState)}" style="${Hr(this.styles.suggestionPopoverHeader)}"><${Lt("ui5-icon",t,n)} class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></${Lt("ui5-icon",t,n)}>${this.open?l3.call(this,o,t,n):void 0}</div>`:et`<div class="${br(this.classes.popoverValueState)}" style="${Hr(this.styles.suggestionPopoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open?l3.call(this,o,t,n):void 0}</div>`}function l3(o,t,n){return et`${this.shouldDisplayDefaultValueStateMessage?bge.call(this,o,t,n):wge.call(this,o,t,n)}`}function bge(o,t,n){return et`${le(this.valueStateText)}`}function wge(o,t,n){return et`<slot name="valueStateMessage"></slot>`}function c3(o,t,n){return et`${this.hasValueStateMessage?xge.call(this,o,t,n):void 0}`}function xge(o,t,n){return n?et`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${br(this.classes.popoverValueState)}" style=${Hr(this.styles.suggestionPopoverHeader)}><${Lt("ui5-icon",t,n)} class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></${Lt("ui5-icon",t,n)}>${this.open?u3.call(this,o,t,n):void 0}</div>`:et`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${br(this.classes.popoverValueState)}" style=${Hr(this.styles.suggestionPopoverHeader)}><ui5-icon class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open?u3.call(this,o,t,n):void 0}</div>`}function u3(o,t,n){return et`${this.shouldDisplayDefaultValueStateMessage?Cge.call(this,o,t,n):Ege.call(this,o,t,n)}`}function Cge(o,t,n){return et`${le(this.valueStateText)}`}function Ege(o,t,n){return et`<slot name="valueStateMessage"></slot>`}function h3(o,t,n){return n?et`<div slot="footer" class="ui5-responsive-popover-footer"><${Lt("ui5-button",t,n)} design="Transparent" @click="${this._closePicker}">OK</${Lt("ui5-button",t,n)}></div>`:et`<div slot="footer" class="ui5-responsive-popover-footer"><ui5-button design="Transparent" @click="${this._closePicker}">OK</ui5-button></div>`}function Sge(o,t,n){return n?et`<${Lt("ui5-popover",t,n)} skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${le(this._valueStatePopoverHorizontalAlign)}" .opener=${le(this)} .open=${le(this.valueStateOpen)} @ui5-close="${le(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${br(this.classes.popoverValueState)}" style="${Hr(this.styles.popoverHeader)}"><${Lt("ui5-icon",t,n)} class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></${Lt("ui5-icon",t,n)}>${this.valueStateOpen?d3.call(this,o,t,n):void 0}</div></${Lt("ui5-popover",t,n)}>`:et`<ui5-popover skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${le(this._valueStatePopoverHorizontalAlign)}" .opener=${le(this)} .open=${le(this.valueStateOpen)} @ui5-close="${le(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${br(this.classes.popoverValueState)}" style="${Hr(this.styles.popoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${le(this._valueStateMessageInputIcon)}"></ui5-icon>${this.valueStateOpen?d3.call(this,o,t,n):void 0}</div></ui5-popover>`}function d3(o,t,n){return et`${this.shouldDisplayDefaultValueStateMessage?Bge.call(this,o,t,n):Ige.call(this,o,t,n)}`}function Bge(o,t,n){return et`${le(this.valueStateText)}`}function Ige(o,t,n){return et`<slot name="valueStateMessage"></slot>`}Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var Uc,ly,mR,Bs=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};(function(o){o.CHANGE="change",o.INPUT="input",o.SELECTION_CHANGE="selection-change"})(ly||(ly={})),function(o){o.ACTION_ENTER="enter",o.ACTION_USER_INPUT="input"}(mR||(mR={}));let cs=Uc=class extends xa{get formValidityMessage(){return Uc.i18nBundle.getText(MAe)}get _effectiveShowSuggestions(){return!(!this.showSuggestions||!this.Suggestions)}get formValidity(){return{valueMissing:this.required&&!this.value}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.value}constructor(){super(),this.disabled=!1,this.highlight=!1,this.readonly=!1,this.required=!1,this.noTypeahead=!1,this.type="Text",this.value="",this._innerValue="",this.valueState="None",this.showSuggestions=!1,this.showClearIcon=!1,this.open=!1,this._effectiveShowClearIcon=!1,this.focused=!1,this.valueStateOpen=!1,this._isValueStateFocused=!1,this._inputAccInfo={},this._nativeInputAttributes={},this._inputIconFocused=!1,this.hasSuggestionItemSelected=!1,this.valueBeforeItemSelection="",this.valueBeforeSelectionStart="",this.previousValue="",this.firstRendering=!0,this.typedInValue="",this.lastConfirmedValue="",this.isTyping=!1,this._isLatestValueFromSuggestions=!1,this._handleResizeBound=this._handleResize.bind(this),this._keepInnerValue=!1,this._focusedAfterClear=!1}onEnterDOM(){Sm.register(this,this._handleResizeBound),((o,t)=>{if(h2.has(o))return;const n=W$(o),c=(f=>d=>{if(!d||d.type!=="property"||d.name!=="accessibleNameRef")return;const p=h2.get(f);if(!p)return;const v=p.observedElements,w=W$(f);v.forEach(S=>{w.includes(S)||AQ(p,S)}),w.forEach(S=>{v.includes(S)||(K$(p,S),p.observedElements.push(S))}),p==null||p.callback()})(o),h={host:o,observedElements:n,callback:t,invalidationCallback:c};h2.set(o,h),o.attachInvalidate(c),n.forEach(f=>{K$(h,f)}),t()})(this,this._updateAssociatedLabelsTexts.bind(this))}onExitDOM(){Sm.deregister(this,this._handleResizeBound),(o=>{const t=h2.get(o);t&&([...t.observedElements].forEach(n=>{AQ(t,n)}),o.detachInvalidate(t.invalidationCallback),h2.delete(o))})(this)}_highlightSuggestionItem(o){var t;o.markupText=this.typedInValue?(t=this.Suggestions)==null?void 0:t.hightlightInput(o.text||"",this.typedInValue):(o.text||"").replace(dge,pge)}_isGroupItem(o){return o.hasAttribute("ui5-suggestion-item-group")}onBeforeRendering(){this._keepInnerValue||(this._innerValue=this.value===null?"":this.value),this.showSuggestions&&(this.enableSuggestions(),this._flattenItems.forEach(d=>{var p;d.hasAttribute("ui5-suggestion-item")?this._highlightSuggestionItem(d):this._isGroupItem(d)&&((p=d.items)==null||p.forEach(v=>{this._highlightSuggestionItem(v)}))})),this._effectiveShowClearIcon=this.showClearIcon&&!!this.value&&!this.readonly&&!this.disabled,this.style.setProperty(fC("--_ui5-input-icons-count"),`${this.iconsCount}`);const o=!!this._flattenItems.length,t=!!this.value,n=this.shadowRoot.querySelector("input")===bC();this.shouldDisplayOnlyValueStateMessage?this.openValueStatePopover():this.closeValueStatePopover(),this.disabled||this.readonly?this.open=!1:this._isPhone||(this.open=o&&(this.open||t&&n&&this.isTyping));const c=this.value,h=this.getInputDOMRefSync();if(!h||!c)return;const f=h.selectionEnd-h.selectionStart;if(this._shouldAutocomplete&&!Cs.android&&!Cs.androidPhone&&!f&&!this._isKeyNavigation){const d=this._getFirstMatchingItem(c);d&&this._handleTypeAhead(d)}}onAfterRendering(){var o;const t=this.getInputDOMRefSync();this.showSuggestions&&((o=this.Suggestions)!=null&&o._getPicker())&&(this._listWidth=this.Suggestions._getListWidth()),this._performTextSelection&&(t.value!==this._innerValue&&(t.value=this._innerValue),this.typedInValue.length&&this.value.length&&t.setSelectionRange(this.typedInValue.length,this.value.length),this.fireDecoratorEvent("type-ahead")),this._performTextSelection=!1}_onkeydown(o){return this._isKeyNavigation=!0,this._shouldAutocomplete=!(this.noTypeahead||(t=o,(t.key?t.key==="Backspace":t.keyCode===8)&&!Tc(t)||oQ(o)||$0(o))),xd(o)?this._handleUp(o):_A(o)?this._handleDown(o):Do(o)?this._handleSpace(o):W0(o)?this._handleTab():Zo(o)?this._handleEnter(o):yC(o)?this._handlePageUp(o):J5(o)?this._handlePageDown(o):a2(o)?this._handleHome(o):l2(o)?this._handleEnd(o):$0(o)?this._handleEscape():(this.showSuggestions&&this._clearPopoverFocusAndSelection(),this._keyDown=!0,void(this._isKeyNavigation=!1));var t}_onkeyup(o){oQ(o)&&(this.value=o.target.value),this._keyDown=!1}_handleUp(o){var t;(t=this.Suggestions)!=null&&t.isOpened()&&this.Suggestions.onUp(o)}_handleDown(o){var t;(t=this.Suggestions)!=null&&t.isOpened()&&this.Suggestions.onDown(o)}_handleSpace(o){this.Suggestions&&this.Suggestions.onSpace(o)}_handleTab(){this.Suggestions&&this.previousValue!==this.value&&this.Suggestions.onTab()}_handleEnter(o){var t;const n=!!((t=this.Suggestions)!=null&&t.onEnter(o)),c=this.getInputDOMRefSync(),h=this._selectableItems.find(f=>f.text===this.value);if(h){const f=h.text||"";c.setSelectionRange(f.length,f.length),n||(this.fireSelectionChange(h,!0),this.acceptSuggestion(h,!0),this.open=!1)}if(!this._isPhone||this._flattenItems.length||this.isTypeNumber||c.setSelectionRange(this.value.length,this.value.length),!n)return this.lastConfirmedValue=this.value,void(this._internals.form&&w$(this));this.focused=!0}_handlePageUp(o){var t;this._isSuggestionsFocused?(t=this.Suggestions)==null||t.onPageUp(o):o.preventDefault()}_handlePageDown(o){var t;this._isSuggestionsFocused?(t=this.Suggestions)==null||t.onPageDown(o):o.preventDefault()}_handleHome(o){var t;this._isSuggestionsFocused&&((t=this.Suggestions)==null||t.onHome(o))}_handleEnd(o){var t;this._isSuggestionsFocused&&((t=this.Suggestions)==null||t.onEnd(o))}_handleEscape(){var o;const t=this.showSuggestions&&!!this.Suggestions&&this.open,n=this.getInputDOMRefSync(),c=n.selectionEnd-n.selectionStart>0;if(this.isTyping=!1,t){if(t&&((o=this.Suggestions)!=null&&o._isItemOnTarget()))return this.value=this.typedInValue||this.valueBeforeSelectionStart,void(this.focused=!0);c&&(this.value=this.typedInValue),this._isValueStateFocused&&(this._isValueStateFocused=!1,this.focused=!0)}else this.value=this.lastConfirmedValue?this.lastConfirmedValue:this.previousValue}_onfocusin(o){this.focused=!0,this._focusedAfterClear||(this.previousValue=this.value),this.valueBeforeSelectionStart=this.value,this._inputIconFocused=!!o.target&&o.target===this.querySelector("[ui5-icon]"),this._focusedAfterClear=!1}innerFocusIn(){}_onfocusout(o){var t;const n=o.relatedTarget;(t=this.Suggestions)!=null&&t._getPicker().contains(n)||this.contains(n)||this.getSlottedNodes("valueStateMessage").some(c=>c.contains(n))||(this._keepInnerValue=!1,this.focused=!1,this.showClearIcon&&!this._effectiveShowClearIcon&&(this._clearIconClicked=!1,this._handleChange()),this.open=!1,this._clearPopoverFocusAndSelection(),this._clearIconClicked||(this.previousValue=""),this.lastConfirmedValue="",this.isTyping=!1)}_clearPopoverFocusAndSelection(){var o,t;this.showSuggestions&&this.Suggestions&&(this._isValueStateFocused=!1,this.hasSuggestionItemSelected=!1,(o=this.Suggestions)==null||o._deselectItems(),(t=this.Suggestions)==null||t._clearItemFocus())}_click(){Ml()&&!this.readonly&&this.Suggestions&&(this.blur(),this.open=!0)}_handleChange(){var o;this._clearIconClicked?this._clearIconClicked=!1:this.previousValue!==this.getInputDOMRefSync().value&&((o=this.Suggestions)!=null&&o._getPicker().open&&this._flattenItems.some(t=>t.hasAttribute("ui5-suggestion-item")&&t.selected)?this._changeToBeFired=!0:(this.fireDecoratorEvent(ly.CHANGE),this.previousValue=this.value,this.typedInValue=this.value))}_clear(){const o=this.value;this.value="",this.fireDecoratorEvent(ly.INPUT,{inputType:""})?this._isPhone||(this.fireResetSelectionChange(),this.focus(),this._focusedAfterClear=!0):this.value=o}_iconMouseDown(){this._clearIconClicked=!0}_scroll(o){this.fireDecoratorEvent("suggestion-scroll",{scrollTop:o.detail.scrollTop,scrollContainer:o.detail.targetRef})}_handleSelect(){this.fireDecoratorEvent("select",{})}_handleInput(o){const t=this.getInputDOMRefSync(),n=this.value&&this.isTypeNumber&&!t.value,c=o.inputType||o.detail&&o.detail.inputType||"";if(this._keepInnerValue=!1,this._shouldAutocomplete=!["deleteWordBackward","deleteWordForward","deleteSoftLineBackward","deleteSoftLineForward","deleteEntireSoftLine","deleteHardLineBackward","deleteHardLineForward","deleteByDrag","deleteByCut","deleteContent","deleteContentBackward","deleteContentForward","historyUndo"].includes(c)&&!this.noTypeahead,o instanceof InputEvent){const h=this.isTypeNumber&&(o.inputType==="deleteContentForward"||o.inputType==="deleteContentBackward")&&!o.target.value.includes(".")&&this.value.includes("."),f=n&&o.data==="e",d=n&&this.value.startsWith("-")&&this.value.length===2&&(o.inputType==="deleteContentForward"||o.inputType==="deleteContentBackward");(h||f||d)&&(this.value=o.target.value,this._keepInnerValue=!0)}o.target===t&&(this.focused=!0,o.stopImmediatePropagation()),this.fireEventByAction(mR.ACTION_ENTER,o),this.hasSuggestionItemSelected=!1,this._isValueStateFocused=!1,this.Suggestions&&this.Suggestions.updateSelectedItemPosition(-1),this.isTyping=!0}_startsWithMatchingItems(o){return t=o,this._selectableItems.filter(n=>(n.text||"").toLowerCase().startsWith(t.toLowerCase()));var t}_getFirstMatchingItem(o){if(!this._flattenItems.length)return;const t=this._startsWithMatchingItems(o).filter(n=>!this._isGroupItem(n));return t.length?t[0]:void 0}_handleSelectionChange(o){var t;(t=this.Suggestions)==null||t.onItemPress(o)}_handleTypeAhead(o){const t=o.text?o.text:"";this._innerValue=t,this.value=t,this._performTextSelection=!0,this._shouldAutocomplete=!1}_handleResize(){this._inputWidth=this.offsetWidth}_updateAssociatedLabelsTexts(){this._associatedLabelsTexts=(()=>{const o=[];if(j$(this).forEach(t=>{const n=t.textContent;n&&o.push(n)}),o.length)return o.join(" ")})(),this._accessibleLabelsRefTexts=$$(this)}_closePicker(){this.open=!1}_afterOpenPicker(){Ml()&&this.getInputDOMRef().focus(),this._handlePickerAfterOpen()}_afterClosePicker(){this.announceSelectedItem(),Ml()&&(this.blur(),this.focused=!1),this._changeToBeFired&&(this.fireDecoratorEvent(ly.CHANGE),this._changeToBeFired=!1),this.open=!1,this.isTyping=!1,this.hasSuggestionItemSelected&&this.focus(),this._handlePickerAfterClose()}_handlePickerAfterOpen(){var o;(o=this.Suggestions)==null||o._onOpen(),this.fireDecoratorEvent("open")}_handlePickerAfterClose(){var o;(o=this.Suggestions)==null||o._onClose(),this.fireDecoratorEvent("close")}openValueStatePopover(){this.valueStateOpen=!0}closeValueStatePopover(){this.valueStateOpen=!1}_handleValueStatePopoverAfterClose(){this.valueStateOpen=!1}_getValueStatePopover(){return this.shadowRoot.querySelector("[ui5-popover]")}enableSuggestions(){if(this.Suggestions)return;const o=YB("InputSuggestions");o.i18nBundle=Uc.i18nBundle,o&&(this.Suggestions=new o(this,"suggestionItems",!0,!1))}acceptSuggestion(o,t){if(this._isGroupItem(o))return;const n=this.typedInValue||this.value,c=o.text||"",h=t?this.valueBeforeItemSelection!==c:n!==c;this.hasSuggestionItemSelected=!0,this.value=c,h&&this.previousValue!==c&&(this.valueBeforeItemSelection=c,this.lastConfirmedValue=c,this._performTextSelection=!0,this.fireDecoratorEvent(ly.CHANGE),this.typedInValue=this.value,this.previousValue=this.value),this.valueBeforeSelectionStart="",this.isTyping=!1,this.open=!1}updateValueOnSelect(o){const t=this._isGroupItem(o)?this.valueBeforeSelectionStart:o.text;this.value=t||"",this._performTextSelection=!0}fireEventByAction(o,t){const n=this.value,c=this.getInputDOMRefSync();if(this.disabled||this.readonly)return;const h=this.getInputValue(),f=o===mR.ACTION_ENTER;if(this.value=h,this.typedInValue=h,this.valueBeforeSelectionStart=h,f){const d=t.inputType||"";!this.fireDecoratorEvent(ly.INPUT,{inputType:d})&&(this.value=n,c&&(c.value=n)),this.fireDecoratorEvent("value-changed"),this.fireResetSelectionChange()}}getInputValue(){return this.getDomRef()?this.getInputDOMRef().value:""}getInputDOMRef(){return Ml()&&this.Suggestions?this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone"):this.nativeInput}getInputDOMRefSync(){var o;return Ml()&&((o=this.Suggestions)!=null&&o._getPicker())?this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone").shadowRoot.querySelector("input"):this.nativeInput}get nativeInput(){const o=this.getDomRef();return o?o.querySelector("input"):null}get nativeInputWidth(){return this.nativeInput?this.nativeInput.offsetWidth:0}isSuggestionsScrollable(){var o;return this.Suggestions?(o=this.Suggestions)==null?void 0:o._isScrollable():Promise.resolve(!1)}onItemMouseDown(o){o.preventDefault()}onItemSelected(o,t){!t&&!(o!=null&&o.focused)&&this.valueBeforeItemSelection!==o.text&&this.fireSelectionChange(o,!0),this.acceptSuggestion(o,t)}_handleSuggestionItemPress(o){var t;(t=this.Suggestions)==null||t.onItemPress(o)}onItemSelect(o){this.valueBeforeItemSelection=this.value,this.updateValueOnSelect(o),this.announceSelectedItem(),this.fireSelectionChange(o,!0)}get _flattenItems(){return this.getSlottedNodes("suggestionItems").flatMap(o=>this._isGroupItem(o)?[o,...o.items]:[o])}get _selectableItems(){return this._flattenItems.filter(o=>!this._isGroupItem(o))}get valueStateTypeMappings(){return{Positive:Uc.i18nBundle.getText(V$),Information:Uc.i18nBundle.getText(q$),Negative:Uc.i18nBundle.getText(z$),Critical:Uc.i18nBundle.getText(G$)}}valueStateTextMappings(){return{Positive:Uc.i18nBundle.getText(iR),Information:Uc.i18nBundle.getText(uQ),Negative:Uc.i18nBundle.getText(eR),Critical:Uc.i18nBundle.getText(tR)}}announceSelectedItem(){const o=this.shadowRoot.querySelector("#selectionText");o&&(o.textContent=this.itemSelectionAnnounce)}fireSelectionChange(o,t){this.Suggestions&&(this.fireDecoratorEvent(ly.SELECTION_CHANGE,{item:o}),this._isLatestValueFromSuggestions=t)}fireResetSelectionChange(){this._isLatestValueFromSuggestions&&this.fireSelectionChange(null,!1)}get _readonly(){return this.readonly&&!this.disabled}get _headerTitleText(){return Uc.i18nBundle.getText(H$)}get clearIconAccessibleName(){return Uc.i18nBundle.getText(tAe)}get _popupLabel(){return Uc.i18nBundle.getText(uAe)}get inputType(){return this.type.toLowerCase()}get isTypeNumber(){return this.type===s3.Number}get suggestionsTextId(){return this.showSuggestions?"suggestionsText":""}get valueStateTextId(){return this.hasValueState?"valueStateDesc":""}get accInfo(){const o=this.showSuggestions?"dialog":void 0,t=this.showSuggestions?"list":void 0,n=this._inputAccInfo.ariaDescribedBy?`${this.suggestionsTextId} ${this.valueStateTextId} ${this._inputAccInfo.ariaDescribedBy}`.trim():`${this.suggestionsTextId} ${this.valueStateTextId}`.trim();return{input:{ariaRoledescription:this._inputAccInfo&&(this._inputAccInfo.ariaRoledescription||void 0),ariaDescribedBy:n||void 0,ariaInvalid:this.valueState===or.Negative?"true":void 0,ariaHasPopup:this._inputAccInfo.ariaHasPopup?this._inputAccInfo.ariaHasPopup:o,ariaAutoComplete:this._inputAccInfo.ariaAutoComplete?this._inputAccInfo.ariaAutoComplete:t,role:this._inputAccInfo&&this._inputAccInfo.role,ariaControls:this._inputAccInfo&&this._inputAccInfo.ariaControls,ariaExpanded:this._inputAccInfo&&this._inputAccInfo.ariaExpanded,ariaDescription:this._inputAccInfo&&this._inputAccInfo.ariaDescription,ariaLabel:this._inputAccInfo&&this._inputAccInfo.ariaLabel||this._accessibleLabelsRefTexts||this.accessibleName||this._associatedLabelsTexts||void 0}}}get nativeInputAttributes(){return{min:this.isTypeNumber?this._nativeInputAttributes.min:void 0,max:this.isTypeNumber?this._nativeInputAttributes.max:void 0,step:this.isTypeNumber?this._nativeInputAttributes.step||"any":void 0}}get ariaValueStateHiddenText(){if(!this.hasValueState)return;const o=this.valueState!==or.None?this.valueStateTypeMappings[this.valueState]:"";return this.shouldDisplayDefaultValueStateMessage?this.valueStateText?`${o} ${this.valueStateText}`:o:`${o}`.concat(" ",this.valueStateMessage.map(t=>t.textContent).join(" "))}get itemSelectionAnnounce(){return this.Suggestions?this.Suggestions.itemSelectionAnnounce:""}get iconsCount(){return(this.icon?this.icon.length:0)+(Number(this._effectiveShowClearIcon)??0)}get classes(){return{popover:{"ui5-suggestions-popover":this.showSuggestions,"ui5-popover-with-value-state-header-phone":this._isPhone&&this.showSuggestions&&this.hasValueStateMessage,"ui5-popover-with-value-state-header":!this._isPhone&&this.showSuggestions&&this.hasValueStateMessage},popoverValueState:{"ui5-valuestatemessage-root":!0,"ui5-valuestatemessage-header":!0,"ui5-valuestatemessage--success":this.valueState===or.Positive,"ui5-valuestatemessage--error":this.valueState===or.Negative,"ui5-valuestatemessage--warning":this.valueState===or.Critical,"ui5-valuestatemessage--information":this.valueState===or.Information}}}get styles(){const o=parseInt(getComputedStyle(document.documentElement).fontSize);return{popoverHeader:{"max-width":this._inputWidth?`${this._inputWidth}px`:""},suggestionPopoverHeader:{display:this._listWidth===0?"none":"inline-block",width:this._listWidth?`${this._listWidth}px`:""},suggestionsPopover:{"min-width":this._inputWidth?`${this._inputWidth}px`:"","max-width":this._inputWidth&&this._inputWidth/o>40?`${this._inputWidth}px`:"40rem"},innerInput:{padding:""}}}get suggestionSeparators(){return"None"}get shouldDisplayOnlyValueStateMessage(){return this.hasValueStateMessage&&!this.readonly&&!this.open&&this.focused}get shouldDisplayDefaultValueStateMessage(){return!this.valueStateMessage.length&&this.hasValueStateMessage}get hasValueState(){return this.valueState!==or.None}get hasValueStateMessage(){return this.hasValueState&&this.valueState!==or.Positive&&(!this._inputIconFocused||!(!this._isPhone||!this.Suggestions))}get valueStateText(){return this.valueState!==or.None?this.valueStateTextMappings()[this.valueState]:void 0}get suggestionsText(){return Uc.i18nBundle.getText(Yde)}get availableSuggestionsCount(){var o;if(this.showSuggestions&&(this.value||(o=this.Suggestions)!=null&&o.isOpened())){const t=this._selectableItems;switch(t.length){case 0:return Uc.i18nBundle.getText(eAe);case 1:return Uc.i18nBundle.getText(Jde);default:return Uc.i18nBundle.getText(Zde,t.length)}}}get step(){return this.isTypeNumber?"any":void 0}get _isPhone(){return Ml()}get _isSuggestionsFocused(){var o;return!this.focused&&((o=this.Suggestions)==null?void 0:o.isOpened())}get _placeholder(){return this.placeholder}get _valueStateInputIcon(){return this.valueState!==or.None?`
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="20" viewBox="0 0 20 20" fill="none">
				${{Negative:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20ZM7.70711 13.7071C7.31658 14.0976 6.68342 14.0976 6.29289 13.7071C5.90237 13.3166 5.90237 12.6834 6.29289 12.2929L8.58579 10L6.29289 7.70711C5.90237 7.31658 5.90237 6.68342 6.29289 6.29289C6.68342 5.90237 7.31658 5.90237 7.70711 6.29289L10 8.58579L12.2929 6.29289C12.6834 5.90237 13.3166 5.90237 13.7071 6.29289C14.0976 6.68342 14.0976 7.31658 13.7071 7.70711L11.4142 10L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L10 11.4142L7.70711 13.7071Z" fill="#EE3939"/>',Critical:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M11.8619 0.49298C11.6823 0.187541 11.3544 0 11 0C10.6456 0 10.3177 0.187541 10.1381 0.49298L0.138066 17.493C-0.0438112 17.8022 -0.0461447 18.1851 0.13195 18.4965C0.310046 18.8079 0.641283 19 1 19H21C21.3587 19 21.69 18.8079 21.868 18.4965C22.0461 18.1851 22.0438 17.8022 21.8619 17.493L11.8619 0.49298ZM11 6C11.5523 6 12 6.44772 12 7V10C12 10.5523 11.5523 11 11 11C10.4477 11 10 10.5523 10 10V7C10 6.44772 10.4477 6 11 6ZM11 16C11.8284 16 12.5 15.3284 12.5 14.5C12.5 13.6716 11.8284 13 11 13C10.1716 13 9.5 13.6716 9.5 14.5C9.5 15.3284 10.1716 16 11 16Z" fill="#F58B00"/>',Positive:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M0 10C0 15.5228 4.47715 20 10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10ZM14.7071 6.29289C14.3166 5.90237 13.6834 5.90237 13.2929 6.29289L8 11.5858L6.70711 10.2929C6.31658 9.90237 5.68342 9.90237 5.29289 10.2929C4.90237 10.6834 4.90237 11.3166 5.29289 11.7071L7.29289 13.7071C7.68342 14.0976 8.31658 14.0976 8.70711 13.7071L14.7071 7.70711C15.0976 7.31658 15.0976 6.68342 14.7071 6.29289Z" fill="#36A41D"/>',Information:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M3 0C1.34315 0 0 1.34315 0 3V15C0 16.6569 1.34315 18 3 18H15C16.6569 18 18 16.6569 18 15V3C18 1.34315 16.6569 0 15 0H3ZM9 6.5C9.82843 6.5 10.5 5.82843 10.5 5C10.5 4.17157 9.82843 3.5 9 3.5C8.17157 3.5 7.5 4.17157 7.5 5C7.5 5.82843 8.17157 6.5 9 6.5ZM9 8.5C9.55228 8.5 10 8.94772 10 9.5V13.5C10 14.0523 9.55228 14.5 9 14.5C8.44771 14.5 8 14.0523 8 13.5V9.5C8 8.94772 8.44771 8.5 9 8.5Z" fill="#1B90FF"/>'}[this.valueState]};
			</svg>
			`:""}get _valueStatePopoverHorizontalAlign(){return this.effectiveDir!=="rtl"?"Start":"End"}get _valueStateMessageInputIcon(){return this.valueState!==or.None?{Negative:"error",Critical:"alert",Positive:"sys-enter-2",Information:"information"}[this.valueState]:""}getCaretPosition(){return(o=>{let t=0;return(o.selectionStart||o.selectionStart===0)&&(t=o.selectionDirection==="backward"?o.selectionStart:o.selectionEnd),t})(this.nativeInput)}setCaretPosition(o){((t,n)=>{t.selectionStart?(t.focus(),t.setSelectionRange(n,n)):t.focus()})(this.nativeInput,o)}removeFractionalPart(o){return o.includes(".")?o.slice(0,o.indexOf(".")):o.includes(",")?o.slice(0,o.indexOf(",")):o}};Bs([He({type:Boolean})],cs.prototype,"disabled",void 0),Bs([He({type:Boolean})],cs.prototype,"highlight",void 0),Bs([He()],cs.prototype,"placeholder",void 0),Bs([He({type:Boolean})],cs.prototype,"readonly",void 0),Bs([He({type:Boolean})],cs.prototype,"required",void 0),Bs([He({type:Boolean})],cs.prototype,"noTypeahead",void 0),Bs([He()],cs.prototype,"type",void 0),Bs([He()],cs.prototype,"value",void 0),Bs([He({noAttribute:!0})],cs.prototype,"_innerValue",void 0),Bs([He()],cs.prototype,"valueState",void 0),Bs([He()],cs.prototype,"name",void 0),Bs([He({type:Boolean})],cs.prototype,"showSuggestions",void 0),Bs([He({type:Number})],cs.prototype,"maxlength",void 0),Bs([He()],cs.prototype,"accessibleName",void 0),Bs([He()],cs.prototype,"accessibleNameRef",void 0),Bs([He({type:Boolean})],cs.prototype,"showClearIcon",void 0),Bs([He({type:Boolean})],cs.prototype,"open",void 0),Bs([He({type:Boolean})],cs.prototype,"_effectiveShowClearIcon",void 0),Bs([He({type:Boolean})],cs.prototype,"focused",void 0),Bs([He({type:Boolean})],cs.prototype,"valueStateOpen",void 0),Bs([He({type:Boolean})],cs.prototype,"_isValueStateFocused",void 0),Bs([He({type:Object})],cs.prototype,"_inputAccInfo",void 0),Bs([He({type:Object})],cs.prototype,"_nativeInputAttributes",void 0),Bs([He({type:Number})],cs.prototype,"_inputWidth",void 0),Bs([He({type:Number})],cs.prototype,"_listWidth",void 0),Bs([He({type:Boolean,noAttribute:!0})],cs.prototype,"_inputIconFocused",void 0),Bs([He({noAttribute:!0})],cs.prototype,"_associatedLabelsTexts",void 0),Bs([He({noAttribute:!0})],cs.prototype,"_accessibleLabelsRefTexts",void 0),Bs([Ro({type:HTMLElement,default:!0})],cs.prototype,"suggestionItems",void 0),Bs([Ro()],cs.prototype,"icon",void 0),Bs([Ro({type:HTMLElement,invalidateOnChildChange:!0})],cs.prototype,"valueStateMessage",void 0),Bs([al("@ui5/webcomponents")],cs,"i18nBundle",void 0),cs=Uc=Bs([Ds({tag:"ui5-input",languageAware:!0,formAssociated:!0,renderer:Ca,template:function(o,t,n){return et`<div class="ui5-input-root ui5-input-focusable-element" part="root" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}"><div class="ui5-input-content"><input id="inner" part="input" class="ui5-input-inner" style="${Hr(this.styles.innerInput)}" type="${le(this.inputType)}" inner-input ?inner-input-with-icon="${this.icon.length}" ?disabled="${this.disabled}" ?readonly="${this._readonly}" .value="${le(this._innerValue)}" placeholder="${le(this._placeholder)}" maxlength="${le(this.maxlength)}" role="${le(this.accInfo.input.role)}" aria-controls="${le(this.accInfo.input.ariaControls)}" aria-invalid="${le(this.accInfo.input.ariaInvalid)}" aria-haspopup="${le(this.accInfo.input.ariaHasPopup)}" aria-describedby="${le(this.accInfo.input.ariaDescribedBy)}" aria-roledescription="${le(this.accInfo.input.ariaRoledescription)}" aria-autocomplete="${le(this.accInfo.input.ariaAutoComplete)}" aria-expanded="${le(this.accInfo.input.ariaExpanded)}" aria-label="${le(this.accInfo.input.ariaLabel)}" aria-required="${le(this.required)}" autocomplete="off" @input="${this._handleInput}" @change="${this._handleChange}" @select="${this._handleSelect}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click=${this._click} @focusin=${this.innerFocusIn} data-sap-focus-ref step="${le(this.nativeInputAttributes.step)}" min="${le(this.nativeInputAttributes.min)}" max="${le(this.nativeInputAttributes.max)}" />${this._effectiveShowClearIcon?fge.call(this,o,t,n):void 0}${this.icon.length?gge.call(this,o,t,n):void 0}<div class="ui5-input-value-state-icon">${Uhe(this._valueStateInputIcon)}</div>${this._effectiveShowSuggestions?mge.call(this,o,t,n):void 0}${this.accInfo.input.ariaDescription?_ge.call(this,o,t,n):void 0}${this.hasValueState?vge.call(this,o,t,n):void 0}</div></div>${this._effectiveShowSuggestions?yge.call(this,o,t,n):void 0}${this.hasValueStateMessage?Sge.call(this,o,t,n):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Input.css.ts",content:`:host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host(:not([hidden])){display:inline-block}:host{width:var(--_ui5-v2-4-0_input_width);min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);font-style:normal;border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box;text-align:start;transition:var(--_ui5-v2-4-0_input_transition);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color)}:host(:not([readonly])),:host([readonly][disabled]){box-shadow:var(--sapField_Shadow)}:host([focused]:not([opened])){border-color:var(--_ui5-v2-4-0_input_focused_border_color);background-color:var(--sapField_Focus_Background)}.ui5-input-focusable-element{position:relative}:host([focused]:not([opened])) .ui5-input-focusable-element:after{content:var(--ui5-v2-4-0_input_focus_pseudo_element_content);position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--_ui5-v2-4-0_input_focus_outline_color);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}:host([focused][readonly]:not([opened])) .ui5-input-focusable-element:after{top:var(--_ui5-v2-4-0_input_readonly_focus_offset);bottom:var(--_ui5-v2-4-0_input_readonly_focus_offset);left:var(--_ui5-v2-4-0_input_readonly_focus_offset);right:var(--_ui5-v2-4-0_input_readonly_focus_offset);border-radius:var(--_ui5-v2-4-0_input_readonly_focus_border_radius)}.ui5-input-root:before{content:"";position:absolute;width:calc(100% - 2px);left:1px;bottom:-2px;border-bottom-left-radius:8px;border-bottom-right-radius:8px;height:var(--_ui5-v2-4-0_input_bottom_border_height);transition:var(--_ui5-v2-4-0_input_transition);background-color:var(--_ui5-v2-4-0_input_bottom_border_color)}.ui5-input-root{width:100%;height:100%;position:relative;background:transparent;display:inline-block;outline:none;box-sizing:border-box;color:inherit;transition:border-color .2s ease-in-out;border-radius:var(--_ui5-v2-4-0_input_border_radius);overflow:hidden}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([disabled]) .ui5-input-root:before,:host([readonly]) .ui5-input-root:before{content:none}[inner-input]{background:transparent;color:inherit;border:none;font-style:inherit;-webkit-appearance:none;-moz-appearance:textfield;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;width:100%;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;text-align:inherit}[inner-input][inner-input-with-icon]{padding:var(--_ui5-v2-4-0_input_inner_padding_with_icon)}[inner-input][type=search]::-webkit-search-decoration,[inner-input][type=search]::-webkit-search-cancel-button,[inner-input][type=search]::-webkit-search-results-button,[inner-input][type=search]::-webkit-search-results-decoration{display:none}.ui5-input-value-state-icon{height:100%;display:var(--_ui5-v2-4-0-input-value-state-icon-display);align-items:center}.ui5-input-value-state-icon>svg{margin-right:8px}[inner-input]::selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}:host([disabled]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([disabled]) [inner-input]::-moz-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-moz-placeholder{visibility:hidden}[inner-input]::-webkit-input-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}[inner-input]::-moz-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}:host([value-state="Negative"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Negative"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-webkit-input-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-moz-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Positive"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Positive"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}.ui5-input-content{height:100%;box-sizing:border-box;display:flex;flex-direction:row;justify-content:flex-end;overflow:hidden;outline:none;background:transparent;color:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([value-state="None"]:not([readonly]):hover),:host(:not([value-state]):not([readonly]):hover){border:var(--_ui5-v2-4-0_input_hover_border);border-color:var(--_ui5-v2-4-0_input_focused_border_color);box-shadow:var(--sapField_Hover_Shadow);background:var(--sapField_Hover_BackgroundStyle);background-color:var(--sapField_Hover_Background)}:host(:not([value-state]):not([readonly])[focused]:not([opened]):hover),:host([value-state="None"]:not([readonly])[focused]:not([opened]):hover){box-shadow:none}:host([focused]):not([opened]) .ui5-input-root:before{content:none}:host(:not([readonly]):not([disabled])[value-state]:not([value-state="None"])){border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]) [inner-input],:host([value-state="Critical"]) [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style);text-indent:var(--_ui5-v2-4-0_input_error_warning_text_indent)}:host([value-state="Negative"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}:host([value-state="Critical"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_warning_font_weight)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}:host([value-state="Negative"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0-input-value-state-error-border-botom-color)}:host([value-state="Negative"]:not([readonly]):not([focused]):hover),:host([value-state="Negative"]:not([readonly])[focused][opened]:hover){background-color:var(--_ui5-v2-4-0_input_value_state_error_hover_background);box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])),:host([value-state="Critical"]:not([readonly]):not([disabled])),:host([value-state="Information"]:not([readonly]):not([disabled])){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}:host([value-state="Critical"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_warning_border_botom_color)}:host([value-state="Critical"]:not([readonly]):not([focused]):hover),:host([value-state="Critical"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}:host([value-state="Positive"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_success_border_botom_color)}:host([value-state="Positive"]:not([readonly]):not([focused]):hover),:host([value-state="Positive"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Information"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}:host([value-state="Information"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_success_information_border_botom_color)}:host([value-state="Information"]:not([readonly]):not([focused]):hover),:host([value-state="Information"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_InformationShadow)}.ui5-input-icon-root{min-width:var(--_ui5-v2-4-0_input_icon_min_width);height:100%;display:flex;justify-content:center;align-items:center}::slotted([ui5-icon][slot="icon"]){align-self:start;padding:var(--_ui5-v2-4-0_input_custom_icon_padding);box-sizing:content-box!important}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Negative"][focused]) .inputIcon,:host([value-state="Critical"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_focused_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host([value-state="Information"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_focused_icon_padding)}:host([value-state="Negative"]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_icon_padding)}:host([value-state="Negative"][focused]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"][focused]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding)}:host([value-state="Information"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_icon_padding)}:host([value-state="Information"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_focused_icon_padding)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}.ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_height);padding:0;width:var(--_ui5-v2-4-0_input_icon_width);min-width:var(--_ui5-v2-4-0_input_icon_width);display:flex;justify-content:center;align-items:center;box-sizing:border-box}:host([value-state]:not([value-state="None"]):not([value-state="Positive"])) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_state_height);vertical-align:top}:host([value-state="Positive"]) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_success_state_height)}[ui5-icon].ui5-input-clear-icon{padding:0;color:inherit}[inner-input]::-webkit-outer-spin-button,[inner-input]::-webkit-inner-spin-button{-webkit-appearance:inherit;margin:inherit}
`},WQ,ZW,{packageName:"@ui5/webcomponents",fileName:"themes/Suggestions.css.ts",content:`.ui5-suggestions-popover{box-shadow:var(--sapContent_Shadow1)}.ui5-suggestions-popover::part(header),.ui5-suggestions-popover::part(content){padding:0}.ui5-suggestions-popover::part(footer){padding:0 1rem}.input-root-phone.native-input-wrapper{display:contents}.input-root-phone.native-input-wrapper:before{display:none}.native-input-wrapper .ui5-input-inner-phone{margin:0}
`}],features:["InputSuggestions"],get dependencies(){const o=YB("InputSuggestions");return[_2,$Q,rf].concat(o?o.dependencies:[])}}),Fn("change",{bubbles:!0}),Fn("value-changed",{bubbles:!0}),Fn("input",{bubbles:!0,cancelable:!0}),Fn("select",{bubbles:!0}),Fn("selection-change",{detail:{item:{type:HTMLElement}},bubbles:!0}),Fn("type-ahead",{bubbles:!0}),Fn("suggestion-scroll",{detail:{scrollTop:{type:Number},scrollContainer:{type:HTMLElement}},bubbles:!0}),Fn("open",{bubbles:!0}),Fn("close",{bubbles:!0})],cs),cs.define();const YQ=cs;tr("direction-arrows",{pathData:"M507 244q5 5 5 12 0 6-5 11L394 379q-5 5-12 5-6 0-11-5t-5-11V144q0-12 10-15 2-1 6-1 8 0 12 4zM135 129q10 3 10 15v224q0 6-4.5 11t-11.5 5q-6 0-11-5L5 267q-5-5-5-11 0-7 5-12l113-112q4-4 11-4 4 0 6 1z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("direction-arrows",{pathData:"M504 237q8 8 8 19t-8 19L395 377q-7 7-17 7t-18-7.5-8-18.5V154q0-11 8-18.5t19-7.5q9 0 16 7zM135 128q11 0 18 7.5t7 18.5v204q0 12-8 19t-18 7-17-7L8 275q-8-8-8-19t8-19l109-102q7-7 18-7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);const Tge={packageName:"@ui5/webcomponents",fileName:"themes/SliderBase.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([disabled]){opacity:var(--_ui5-v2-4-0_slider_disabled_opacity);cursor:default;pointer-events:none}:host{box-sizing:border-box;cursor:pointer;vertical-align:top;width:100%}:host(:not([hidden])){display:inline-block}.ui5-slider-root{box-sizing:border-box;height:3.3125rem;outline:none;padding:var(--_ui5-v2-4-0_slider_padding);touch-action:none}.ui5-slider-inner{background-repeat:no-repeat;position:relative;min-width:var(--_ui5-v2-4-0_slider_inner_min_width);height:100%}.ui5-slider-progress-container{width:100%;background:var(--_ui5-v2-4-0_slider_progress_container_background);border:var(--_ui5-v2-4-0_slider_progress_border);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_inner_height);position:relative;box-sizing:var(--_ui5-v2-4-0_slider_progress_box_sizing);top:var(--_ui5-v2-4-0_slider_progress_container_top)}.ui5-slider-progress-container:before,.ui5-slider-progress-container:after{display:var(--_ui5-v2-4-0_slider_progress_container_dot_display);content:"";position:absolute;border-radius:50%;width:var(--_ui5-v2-4-0_slider_start_end_point_size);height:var(--_ui5-v2-4-0_slider_start_end_point_size);top:var(--_ui5-v2-4-0_slider_start_end_point_top)}.ui5-slider-progress-container:before{inset-inline-start:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_before_background);border:var(--_ui5-v2-4-0_slider_progress_before_border)}.ui5-slider-progress-container:after{inset-inline-end:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_after_background);border:var(--_ui5-v2-4-0_slider_progress_after_border)}.ui5-slider-progress{background:var(--_ui5-v2-4-0_slider_progress_background);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_progress_height);position:relative;outline:none;box-sizing:border-box;border:var(--_ui5-v2-4-0_slider_active_progress_border);left:var(--_ui5-v2-4-0_slider_active_progress_left);top:var(--_ui5-v2-4-0_slider_active_progress_top)}.ui5-slider-tickmarks{list-style:none;padding:0;margin:0;top:var(--_ui5-v2-4-0_slider_tickmark_top);display:flex;box-sizing:border-box;width:100%;justify-content:space-between;position:absolute;z-index:1}.ui5-slider-tickmarks li{height:var(--_ui5-v2-4-0_slider_tickmark_height);border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_bg)}.ui5-slider-handle{background:var(--_ui5-v2-4-0_slider_handle_background);border:var(--_ui5-v2-4-0_slider_handle_border);border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);position:relative;outline:none;height:var(--_ui5-v2-4-0_slider_handle_height);width:var(--_ui5-v2-4-0_slider_handle_width);box-sizing:var(--_ui5-v2-4-0_slider_handle_box_sizing);display:flex;justify-content:center;align-items:center;z-index:2}[slider-icon]{display:var(--_ui5-v2-4-0_slider_handle_icon_display);color:var(--sapContent_Selected_ForegroundColor);width:var(--_ui5-v2-4-0_slider_handle_icon_size);height:var(--_ui5-v2-4-0_slider_handle_icon_size)}.ui5-slider-root .ui5-slider-handle:focus [slider-icon]{display:var(--_ui5-v2-4-0_range_slider_active_handle_icon_display)}.ui5-slider-progress-container:hover~.ui5-slider-handle:not(:focus),.ui5-slider-handle:hover{background:var(--_ui5-v2-4-0_slider_handle_hover_background);border:var(--_ui5-v2-4-0_slider_handle_hover_border)}.ui5-slider-root:focus .ui5-slider-inner .ui5-slider-handle,.ui5-slider-handle:focus{outline:var(--_ui5-v2-4-0_slider_handle_outline);outline-offset:var(--_ui5-v2-4-0_slider_handle_outline_offset);border:var(--_ui5-v2-4-0_slider_handle_focus_border);background:var(--_ui5-v2-4-0_slider_handle_background_focus)}.ui5-slider-handle.ui5-slider-handle--start:focus,.ui5-slider-handle--end:focus{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-root:focus:hover .ui5-slider-handle,.ui5-slider-handle:focus:hover{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-handle-container{position:absolute;margin-inline-start:calc(-1 * var(--_ui5-v2-4-0_slider_handle_width) / 2);top:var(--_ui5-v2-4-0_slider_handle_top)}:host(:not([hidden])) .ui5-slider-handle-container .ui5-slider-tooltip{display:flex;font-family:var(--sapFontFamily);justify-content:center;align-items:center;visibility:hidden;position:absolute;left:50%;transform:translate(-50%);bottom:var(--_ui5-v2-4-0_slider_tooltip_bottom);background:var(--_ui5-v2-4-0_slider_tooltip_background);border:var(--_ui5-v2-4-0_slider_tooltip_border);border-radius:var(--_ui5-v2-4-0_slider_tooltip_border_radius);box-shadow:var(--_ui5-v2-4-0_slider_tooltip_box_shadow);font-size:var(--_ui5-v2-4-0_slider_tooltip_fontsize);color:var(--_ui5-v2-4-0_slider_tooltip_color);height:var(--_ui5-v2-4-0_slider_tooltip_height);min-width:var(--_ui5-v2-4-0_slider_tooltip_min_width);padding:var(--_ui5-v2-4-0_slider_tooltip_padding);box-sizing:var(--_ui5-v2-4-0_slider_tooltip_border_box)}:host(:not([hidden])):host([editable-tooltip]) .ui5-slider-handle-container .ui5-slider-tooltip{border:none;background:none;box-shadow:none}:host([editable-tooltip]) .ui5-slider-tooltip{padding:0;box-shadow:none}.ui5-slider-tooltip [ui5-input]{width:100%;text-align:center}.ui5-slider-tooltip-value{position:relative;display:flex;justify-content:center;align-items:center}.ui5-slider-labels{position:absolute;top:1.25rem;margin:0;padding:0;white-space:nowrap}.ui5-slider-labels li{position:relative;list-style:none;padding-top:.3125rem;height:1rem;margin:0;text-align:center;display:inline-block;color:var(--_ui5-v2-4-0_slider_label_color);font-family:var(--sapFontFamily);font-size:var(--_ui5-v2-4-0_slider_label_fontsize);padding-top:0;box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;vertical-align:top}.ui5-slider-hidden-labels li:not(:first-child):not(:last-child){visibility:hidden}.ui5-slider-handle:focus .ui5-slider-tooltip{bottom:var(--_ui5-v2-4-0_slider_handle_focused_tooltip_distance)}.ui5-slider-tickmarks li.ui5-slider-tickmark-in-range{border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_in_range_bg)}:host([show-tickmarks]) .ui5-slider-progress{height:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_height);border:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border);left:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left);top:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top)}:host([show-tickmarks]) .ui5-slider-progress-container{top:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top)}.ui5-slider-handle:focus:after{content:"";display:var(--_ui5-v2-4-0_slider_handle_focus_visibility);width:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);height:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);border:var(--sapContent_FocusWidth) dotted var(--sapContent_FocusColor);position:absolute;border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);pointer-events:none}
`};var Ag,Fh=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let au=Ag=class extends xa{async formElementAnchor(){return this.getFocusDomRefAsync()}constructor(){super(),this.min=0,this.max=100,this.step=1,this.labelInterval=0,this.showTickmarks=!1,this.showTooltip=!1,this.editableTooltip=!1,this.disabled=!1,this.value=0,this._tooltipVisibility="hidden",this._labelsOverlapping=!1,this._hiddenTickmarks=!1,this._isInputValueValid=!1,this.notResized=!1,this._isUserInteraction=!1,this._isInnerElementFocusing=!1,this._labelWidth=0,this._resizeHandler=this._handleResize.bind(this),this._moveHandler=this._handleMove.bind(this),this._upHandler=this._handleUp.bind(this),this._stateStorage={step:void 0,min:void 0,max:void 0,labelInterval:void 0},this._ontouchstart={handleEvent:o=>{this._onmousedown(o)},passive:!0}}_handleMove(o){}_handleUp(o){}_onmousedown(o){}_handleActionKeyPress(o){}_updateInputValue(){}static get ACTION_KEYS(){return[V0,q0,xd,_A,tQ,iQ,o2,nQ,aQ,xde,a2,l2,yC,J5,$0]}static get MIN_SPACE_BETWEEN_TICKMARKS(){return 8}static get TOOLTIP_VISIBILITY(){return{VISIBLE:"visible",HIDDEN:"hidden"}}static get renderer(){return Ca}static get styles(){return Tge}get classes(){return{root:{"ui5-slider-root-phone":Ml()},labelContainer:{"ui5-slider-hidden-labels":this._labelsOverlapping}}}onEnterDOM(){Sm.register(this,this._resizeHandler)}onExitDOM(){Sm.deregister(this,this._resizeHandler)}onAfterRendering(){this.notResized&&this._resizeHandler()}_onmouseover(){this.showTooltip&&(this._tooltipVisibility=Ag.TOOLTIP_VISIBILITY.VISIBLE)}_onmouseout(){this.showTooltip&&!this.shadowRoot.activeElement&&(this._tooltipVisibility=Ag.TOOLTIP_VISIBILITY.HIDDEN)}_onkeydown(o){const t=o.target;lQ(o)&&t.classList.contains("ui5-slider-handle")&&t.parentNode.querySelector(".ui5-slider-handle-container ui5-input").focus(),this.disabled||this._effectiveStep===0||t.hasAttribute("ui5-slider-handle")||Ag._isActionKey(o)&&t&&!t.hasAttribute("ui5-input")&&(o.preventDefault(),this._isUserInteraction=!0,this._handleActionKeyPress(o))}_onInputKeydown(o){const t=o.target;lQ(o)&&t.hasAttribute("ui5-input")&&t.parentNode.parentNode.querySelector(".ui5-slider-handle").focus(),Zo(o)&&(this._updateInputValue(),this._updateValueFromInput(o))}_onInputChange(){this._valueOnInteractionStart!==this.value&&this.fireEvent("change")}_onInputInput(){this.fireEvent("input")}_updateValueFromInput(o){const t=o.target,n=parseFloat(t.value);this._isInputValueValid=n>=this._effectiveMin&&n<=this._effectiveMax,this._isInputValueValid&&(this.value=n)}_onKeyupBase(){this.disabled||(this._isUserInteraction=!1)}_preserveFocus(o){this._isInnerElementFocusing=o}_isFocusing(){return this._isInnerElementFocusing}_preventFocusOut(){this.focusInnerElement()}focusInnerElement(){this.focus()}_handleResize(){if(!this.showTickmarks||(this.notResized=!1,this._spaceBetweenTickmarks()<Ag.MIN_SPACE_BETWEEN_TICKMARKS?(this._hiddenTickmarks=!0,this._labelsOverlapping=!0):this._hiddenTickmarks=!1,this.labelInterval<=0||this._hiddenTickmarks))return;const o=this.shadowRoot.querySelectorAll(".ui5-slider-labels li");this._labelsOverlapping=[...o].some(t=>t.scrollWidth>t.clientWidth)}handleDownBase(o){const t=this._effectiveMin,n=this._effectiveMax,c=this.getBoundingClientRect(),h=this.directionStart,f=this._effectiveStep,d=Ag.getValueFromInteraction(o,f,t,n,c,h);return this._isUserInteraction=!0,window.addEventListener("mouseup",this._upHandler),window.addEventListener("touchend",this._upHandler),qq()&&o instanceof TouchEvent?window.addEventListener("touchmove",this._moveHandler):window.addEventListener("mousemove",this._moveHandler),this._handleFocusOnMouseDown(o),d}_handleFocusOnMouseDown(o){const t=this.shadowRoot.activeElement,n=o.target;t&&t===n||n.hasAttribute("ui5-input")||(this._preserveFocus(!0),this.focusInnerElement())}handleUpBase(){window.removeEventListener("mouseup",this._upHandler),window.removeEventListener("touchend",this._upHandler),window.removeEventListener("mousemove",this._moveHandler),window.removeEventListener("touchmove",this._moveHandler),this._isUserInteraction=!1,this._preserveFocus(!1)}updateStateStorageAndFireInputEvent(o){this.storePropertyState(o),this._isUserInteraction&&this.fireDecoratorEvent("input")}static _isActionKey(o){return this.ACTION_KEYS.some(t=>t(o))}static clipValue(o,t,n){return Math.min(Math.max(o,t),n)}static getValueFromInteraction(o,t,n,c,h,f){const d=this.getPageXValueFromEvent(o),p=this.computedValueFromPageX(d,n,c,h,f),v=this.getSteppedValue(p,t,n);return this.clipValue(v,n,c)}static getSteppedValue(o,t,n){const c=Math.abs((o-n)%t);if(t===0||c===0)return o;o=2*c>=t?o+t-c:o-c;const h=Ag._getDecimalPrecisionOfNumber(t);return Number(o.toFixed(h))}static getPageXValueFromEvent(o){return qq()&&o instanceof TouchEvent?o.targetTouches&&o.targetTouches.length>0?o.targetTouches[0].pageX:0:o.pageX}static computedValueFromPageX(o,t,n,c,h){return t+(h==="left"?o-c[h]:c[h]-o)/c.width*(n-t)}static _getDecimalPrecisionOfNumber(o){if(Number.isInteger(o))return 0;const t=String(o).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return!t||t.length<2?0:Math.max(0,(t[1]?t[1].length:0)-(t[2]?Number(t[2]):0))}isCurrentStateOutdated(){return Object.entries(this._stateStorage).some(([o,t])=>this[o]!==t)}getStoredPropertyState(o){return this._stateStorage[o]}isPropertyUpdated(...o){return o.some(t=>this.getStoredPropertyState(t)!==this[t])}storePropertyState(...o){o.forEach(t=>{this._stateStorage[t]=this[t]})}get directionStart(){return this.effectiveDir==="rtl"?"right":"left"}_createLabels(){if(!this.labelInterval||!this.showTickmarks)return;const o=this.labelInterval,t=this._effectiveStep,n=(this._effectiveMax-this._effectiveMin)/(t*o);if(n===this._oldNumberOfLabels&&this._oldMin===this._effectiveMin&&this._oldMax===this._effectiveMax)return;this._oldMin=this._effectiveMin,this._oldMax=this._effectiveMax,this._oldNumberOfLabels=n,this._labelWidth=100/n,this._labelValues=[];const c=Ag._getDecimalPrecisionOfNumber(t);for(let h=0;h<=n;h++){const f=(h*t*o+this._effectiveMin).toFixed(c);this._labelValues.push(f)}}_handleActionKeyPressBase(o,t){const n=Ag._isIncreaseValueAction(o,this.directionStart),c=Ag._isBigStepAction(o),h=this[t],f=this._effectiveMin,d=this._effectiveMax;let p=this._effectiveStep;return p=c&&(d-f)/p>10?(d-f)/10:p,l2(o)?d-h:a2(o)?-1*(h-f):n?p:-1*p}static _isIncreaseValueAction(o,t){return t==="right"?xd(o)||o2(o)||V0(o)||tQ(o)||aQ(o)||yC(o):xd(o)||o2(o)||q0(o)||iQ(o)||aQ(o)||yC(o)}static _isBigStepAction(o){return nQ(o)||o2(o)||tQ(o)||iQ(o)||yC(o)||J5(o)}get _tickmarksCount(){return(this._effectiveMax-this._effectiveMin)/this._effectiveStep}_spaceBetweenTickmarks(){return this.getBoundingClientRect().width/this._tickmarksCount}_validateStep(o){o===0&&console.warn("The 'step' property must be a positive float number"),o<0&&console.warn("The 'step' property must be a positive float number. The provided negative number has been converted to its positve equivalent"),Number.isNaN(o)&&console.warn("The 'step' property must be a positive float number. It has been set to its default value of 1")}get _labels(){return this._labelValues||[]}get _effectiveStep(){let o=this.step;return o<0&&(o=Math.abs(o)),Number.isNaN(o)&&(o=1),o}get _effectiveMin(){return Math.min(this.min,this.max)}get _effectiveMax(){return Math.max(this.min,this.max)}get _tabIndex(){return this.disabled?"-1":"0"}get _ariaDescribedByHandleText(){return this.editableTooltip?"ui5-slider-InputDesc":void 0}get _ariaLabelledByHandleText(){return this.accessibleName?"ui5-slider-accName ui5-slider-sliderDesc":"ui5-slider-sliderDesc"}get _ariaDescribedByInputText(){return""}get _ariaLabelledByInputText(){return""}};Fh([He({type:Number})],au.prototype,"min",void 0),Fh([He({type:Number})],au.prototype,"max",void 0),Fh([He()],au.prototype,"name",void 0),Fh([He({type:Number})],au.prototype,"step",void 0),Fh([He({type:Number})],au.prototype,"labelInterval",void 0),Fh([He({type:Boolean})],au.prototype,"showTickmarks",void 0),Fh([He({type:Boolean})],au.prototype,"showTooltip",void 0),Fh([He({type:Boolean})],au.prototype,"editableTooltip",void 0),Fh([He({type:Boolean})],au.prototype,"disabled",void 0),Fh([He()],au.prototype,"accessibleName",void 0),Fh([He({type:Number})],au.prototype,"value",void 0),Fh([He()],au.prototype,"_tooltipVisibility",void 0),Fh([He({type:Boolean})],au.prototype,"_labelsOverlapping",void 0),Fh([He({type:Boolean})],au.prototype,"_hiddenTickmarks",void 0),Fh([He({type:Boolean})],au.prototype,"_isInputValueValid",void 0),au=Ag=Fh([Fn("change",{bubbles:!0}),Fn("input",{bubbles:!0})],au);const w2=au;function A3(o,t,n){return et`${this.showTickmarks?Mge.call(this,o,t,n):void 0}`}function Mge(o,t,n){return et`<ul class="ui5-slider-tickmarks">${u1(this.tickmarksObject,(c,h)=>c._id||h,(c,h)=>Rge.call(this,o,t,n,c,h))}</ul>${this.labelInterval?Uge.call(this,o,t,n):void 0}`}function Rge(o,t,n,c,h){return et`${c?Dge.call(this,o,t,n,c,h):Fge.call(this,o,t,n,c,h)}`}function Dge(o,t,n,c,h){return et`<li class="ui5-slider-tickmark ui5-slider-tickmark-in-range"></li>`}function Fge(o,t,n,c,h){return et`<li class="ui5-slider-tickmark"></li>`}function Uge(o,t,n){return et`<ul class="ui5-slider-labels ${br(this.classes.labelContainer)}" style="${Hr(this.styles.labelContainer)}">${u1(this._labels,(c,h)=>c._id||h,(c,h)=>kge.call(this,o,t,n,c,h))}</ul>`}function kge(o,t,n,c,h){return et`<li style="${Hr(this.styles.label)}">${le(c)}</li>`}function p3(o,t,n){return et`<div class="ui5-slider-tooltip" style="${Hr(this.styles.tooltip)}">${this.editableTooltip?Lge.call(this,o,t,n):Pge.call(this,o,t,n)}</div>`}function Lge(o,t,n){return n?et`<${Lt("ui5-input",t,n)} value="${le(this._tooltipInputValue)}" value-state="${le(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${le(this._onInputChange)}" @ui5-input="${le(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></${Lt("ui5-input",t,n)}>`:et`<ui5-input value="${le(this._tooltipInputValue)}" value-state="${le(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${le(this._onInputChange)}" @ui5-input="${le(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></ui5-input>`}function Pge(o,t,n){return et`<span class="ui5-slider-tooltip-value">${le(this.tooltipValue)}</span>`}function f3(o,t,n){return et`<span id="ui5-slider-accName" class="ui5-hidden-text">${le(this.accessibleName)}</span>`}function g3(o,t,n){return et`<span id="ui5-slider-InputDesc" class="ui5-hidden-text">${le(this._ariaDescribedByInputText)}</span><span id="ui5-slider-InputLabel" class="ui5-hidden-text">${le(this._ariaLabelledByInputText)}</span>`}var x2,JQ=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let FC=x2=class extends w2{get formFormattedValue(){return this.value.toString()}constructor(){super(),this.value=0,this._progressPercentage=0,this._handlePositionFromStart=0,this._tooltipInputValue=this.value.toString(),this._tooltipInputValueState="None",this._stateStorage.value=void 0,this._lastValidInputValue=this.min.toString()}onBeforeRendering(){this.editableTooltip&&this._updateInputValue(),this.isCurrentStateOutdated()&&(this.notResized=!0,this.syncUIAndState(),this._updateHandleAndProgress(this.value))}syncUIAndState(){this.isPropertyUpdated("step")&&(this._validateStep(this.step),this.storePropertyState("step")),this.isPropertyUpdated("min","max","value")&&(this.storePropertyState("min","max"),this.value=w2.clipValue(this.value,this._effectiveMin,this._effectiveMax),this.updateStateStorageAndFireInputEvent("value"),this.storePropertyState("value")),this.labelInterval&&this.showTickmarks&&this._createLabels(),this.isPropertyUpdated("labelInterval")&&this.storePropertyState("labelInterval")}_onmousedown(o){if(this.disabled||this.step===0||o.target.hasAttribute("ui5-input"))return;const t=this.handleDownBase(o);this._valueOnInteractionStart=this.value,this._valueInitial===void 0&&(this._valueInitial=this.value);const n=this.constructor;this._isHandlePressed(n.getPageXValueFromEvent(o))||(this._updateHandleAndProgress(t),this.value=t,this.updateStateStorageAndFireInputEvent("value"))}_onfocusin(){this._valueInitial===void 0&&(this._valueInitial=this.value),this.showTooltip&&(this._tooltipVisibility=w2.TOOLTIP_VISIBILITY.VISIBLE)}_onfocusout(o){var t;this._isFocusing()?this._preventFocusOut():(this._valueInitial=void 0,this.showTooltip&&!((t=o.relatedTarget)!=null&&t.hasAttribute("ui5-input"))&&(this._tooltipVisibility=w2.TOOLTIP_VISIBILITY.HIDDEN))}_handleMove(o){if(o.target.hasAttribute("ui5-input")||(o.preventDefault(),this.disabled||this._effectiveStep===0))return;const t=this.constructor.getValueFromInteraction(o,this._effectiveStep,this._effectiveMin,this._effectiveMax,this.getBoundingClientRect(),this.directionStart);this._updateHandleAndProgress(t),this.value=t,this.updateStateStorageAndFireInputEvent("value")}_handleUp(o){o.target.hasAttribute("ui5-input")||(this._valueOnInteractionStart!==this.value&&this.fireDecoratorEvent("change"),this.handleUpBase(),this._valueOnInteractionStart=void 0)}_onInputFocusOut(o){const t=this.shadowRoot.querySelector("[ui5-input]");this._tooltipVisibility=w2.TOOLTIP_VISIBILITY.HIDDEN,this._updateValueFromInput(o),this._isInputValueValid||(t.value=this._lastValidInputValue,this._isInputValueValid=!0,this._tooltipInputValueState="None")}_updateInputValue(){const o=this.shadowRoot.querySelector("[ui5-input]");if(o){if(this._isInputValueValid=parseFloat(o.value)>=this.min&&parseFloat(o.value)<=this.max,!this._isInputValueValid)return this._tooltipInputValue=this._lastValidInputValue,this._isInputValueValid=!0,void(this._tooltipInputValueState="Negative");this._tooltipInputValue=this.value.toString(),this._lastValidInputValue=this._tooltipInputValue,this._tooltipInputValueState="None"}}_isHandlePressed(o){const t=this._sliderHandle.getBoundingClientRect();return o>=t.left&&o<=t.right}_updateHandleAndProgress(o){const t=this._effectiveMax,n=this._effectiveMin;this._progressPercentage=(o-n)/(t-n),this._handlePositionFromStart=100*this._progressPercentage}_handleActionKeyPress(o){const t=this._effectiveMin,n=this._effectiveMax,c=this.value,h=this.constructor,f=$0(o)?this._valueInitial:h.clipValue(this._handleActionKeyPressBase(o,"value")+c,t,n);f!==c&&(this._updateHandleAndProgress(f),this.value=f,this.updateStateStorageAndFireInputEvent("value"))}get inputValue(){return this.value.toString()}get styles(){return{progress:{transform:`scaleX(${this._progressPercentage})`,"transform-origin":`${this.directionStart} top`},handle:{[this.directionStart]:`${this._handlePositionFromStart}%`},label:{width:`${this._labelWidth}%`},labelContainer:{width:"100%",[this.directionStart]:`-${this._labelWidth/2}%`},tooltip:{visibility:`${this._tooltipVisibility}`}}}get _sliderHandle(){return this.shadowRoot.querySelector(".ui5-slider-handle")}get tooltipValue(){const o=this.constructor._getDecimalPrecisionOfNumber(this._effectiveStep);return this.value.toFixed(o)}get _ariaDisabled(){return this.disabled||void 0}get _ariaLabelledByText(){return x2.i18nBundle.getText(gAe)}get _ariaDescribedByInputText(){return x2.i18nBundle.getText(_Ae)}get _ariaLabelledByInputText(){return x2.i18nBundle.getText(vAe)}get tickmarksObject(){const o=this._tickmarksCount,t=[];if(this._hiddenTickmarks)return[!0,!1];for(let n=0;n<=o;n++)t.push(this._effectiveMin+n*this.step<=this.value);return t}};JQ([He({type:Number})],FC.prototype,"value",void 0),JQ([al("@ui5/webcomponents")],FC,"i18nBundle",void 0),FC=x2=JQ([Ds({tag:"ui5-slider",languageAware:!0,formAssociated:!0,template:function(o,t,n){return n?et`<div class="ui5-slider-root ${br(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step?A3.call(this,o,t,n):void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${Hr(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${Hr(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${le(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${le(this.min)}" aria-valuemax="${le(this.max)}" aria-valuenow="${le(this.value)}" aria-labelledby="${le(this._ariaLabelledByHandleText)}" aria-disabled="${le(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${le(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><${Lt("ui5-icon",t,n)} name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></${Lt("ui5-icon",t,n)}></div>${this.showTooltip?p3.call(this,o,t,n):void 0}</div></div>${this.accessibleName?f3.call(this,o,t,n):void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${le(this._ariaLabelledByText)}</span>${this.editableTooltip?g3.call(this,o,t,n):void 0}</div> `:et`<div class="ui5-slider-root ${br(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step?A3.call(this,o,t,n):void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${Hr(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${Hr(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${le(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${le(this.min)}" aria-valuemax="${le(this.max)}" aria-valuenow="${le(this.value)}" aria-labelledby="${le(this._ariaLabelledByHandleText)}" aria-disabled="${le(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${le(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><ui5-icon name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></ui5-icon></div>${this.showTooltip?p3.call(this,o,t,n):void 0}</div></div>${this.accessibleName?f3.call(this,o,t,n):void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${le(this._ariaLabelledByText)}</span>${this.editableTooltip?g3.call(this,o,t,n):void 0}</div> `},dependencies:[rf,YQ]})],FC),FC.define();const Oge=FC;Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var iv,rp=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};const UC=6.5;let Uh=iv=class extends xa{async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.value}constructor(){super(),this.value="rgba(255,255,255,1)",this.hex="ffffff",this._value=KQ(this.value),this._alpha=1,this._hue=0,this._isSelectedColorChanged=!1,this._isHueValueChanged=!1,this._wrongHEX=!1,this._selectedCoordinates={x:249.5,y:249.5},this._mainValue={r:255,g:0,b:0},this.selectedHue=0,this.mouseDown=!1,this.mouseIn=!1}onBeforeRendering(){this._value=KQ(this.value);const o=`rgba(${this._value.r},${this._value.g},${this._value.b},1)`;this._setHex(),this._setValues(),this.style.setProperty(fC("--ui5_Color_Picker_Progress_Container_Color"),o)}_handleMouseDown(o){this.mouseDown=!0,this.mouseIn=!0,this._changeSelectedColor(o.offsetX,o.offsetY)}_handleMouseUp(){this.mouseDown=!1}_handleMouseOut(o){if(!this.mouseIn||!this.mouseDown)return;const t=o.target,n=t.offsetHeight,c=t.offsetWidth,h=o.offsetX<=0,f=o.offsetY<=0,d=o.offsetY>=t.offsetHeight,p=o.offsetX>=t.offsetWidth;let v,w;v=h?0:p?c:o.offsetX,w=f?0:d?n:o.offsetY,this._changeSelectedColor(v,w),this.mouseIn=!1,this.mouseDown=!1}_handleMouseMove(o){this.mouseDown&&this.mouseIn&&this._changeSelectedColor(o.offsetX,o.offsetY)}_handleAlphaInput(o){const t=o.target.value;this._alpha=parseFloat(t),Number.isNaN(this._alpha)&&(this._alpha=1),this._isHueValueChanged=!0,this._setColor(this._value)}_handleHueInput(o){this.selectedHue=o.target.value,this._hue=this.selectedHue,this._setMainColor(this._hue),this._isHueValueChanged=!0;const t=this._selectedCoordinates.x+UC,n=this._selectedCoordinates.y+UC,c=this._calculateColorFromCoordinates(t,n);c&&this._setColor(i3(c))}_handleHEXChange(o){const t=new RegExp("^[<0-9 abcdef]+$"),n=o.target;let c=n.value.toLowerCase();c.length===3&&(c=`${c[0]}${c[0]}${c[1]}${c[1]}${c[2]}${c[2]}`);const h=c.length===6&&t.test(c);h&&n.value!==c&&(this._wrongHEX=!1,n.value=c),c!==this.hex&&(this.hex=c,h?(this._wrongHEX=!1,this._setColor(n3(this.hex))):this._wrongHEX=!0)}_handleRGBInputsChange(o){const t=o.target,n=parseInt(t.value)||0;let c;switch(t.id){case"red":c={...this._value,r:n};break;case"green":c={...this._value,g:n};break;case"blue":c={...this._value,b:n};break;default:c={...this._value}}this._setColor(c)}_setMainColor(o){this._mainValue=o<=255?{r:255,g:o,b:0}:o<=510?{r:255-(o-255),g:255,b:0}:o<=765?{r:0,g:255,b:o-510}:o<=1020?{r:0,g:765-(o-255),b:255}:o<=1275?{r:o-1020,g:0,b:255}:{r:255,g:0,b:1275-(o-255)}}_handleAlphaChange(){this._alpha=this._alpha<0?0:this._alpha,this._alpha=this._alpha>1?1:this._alpha}_changeSelectedColor(o,t){this._selectedCoordinates={x:o-UC,y:t-UC},this._isSelectedColorChanged=!0;const n=this._calculateColorFromCoordinates(o,t);n&&this._setColor(i3(n))}_onkeydown(o){Zo(o)&&this._handleHEXChange(o)}_calculateColorFromCoordinates(o,t){const n=this._hue/4.251,c=1-+(Math.round(parseFloat(t/256+"e+2"))+"e-2"),h=+(Math.round(parseFloat(o/256+"e+2"))+"e-2");if(c&&h)return{h:n,s:c,l:h}}_setColor(o={r:0,g:0,b:0}){this.value=`rgba(${o.r}, ${o.g}, ${o.b}, ${this._alpha})`,this._wrongHEX=!this.isValidRGBColor(o),this.fireDecoratorEvent("change")}isValidRGBColor(o){return o.r>=0&&o.r<=255&&o.g>=0&&o.g<=255&&o.b>=0&&o.b<=255}_setHex(){let o=this._value.r.toString(16),t=this._value.g.toString(16),n=this._value.b.toString(16);o.length===1&&(o=`0${o}`),t.length===1&&(t=`0${t}`),n.length===1&&(n=`0${n}`),this.hex=o+t+n}_setValues(){const o=(t=>{const n=t.r/255,c=t.g/255,h=t.b/255,f=Math.max(n,c,h),d=Math.min(n,c,h),p=f-d;let v,w=0;p===0?w=0:f===n?w=(c-h)/p%6*60:f===c?w=60*((h-n)/p+2):f===h&&(w=60*((n-c)/p+4));const S=(f+d)/2;return v=p===0?0:p/(1-Math.abs(2*S-1)),{h:w,s:v,l:S}})(this._value);this._selectedCoordinates={x:2.56*Math.round(100*o.l)-UC,y:256-2.56*Math.round(100*o.s)-UC},this._isSelectedColorChanged?this._isSelectedColorChanged=!1:this._isHueValueChanged?(this._isHueValueChanged=!1,this._hue=this.selectedHue?this.selectedHue:this._hue):this._hue=Math.round(4.25*o.h),this._setMainColor(this._hue)}get hueSliderLabel(){return iv.i18nBundle.getText(zde)}get alphaSliderLabel(){return iv.i18nBundle.getText(Hde)}get hexInputLabel(){return iv.i18nBundle.getText(Gde)}get redInputLabel(){return iv.i18nBundle.getText(Vde)}get greenInputLabel(){return iv.i18nBundle.getText(qde)}get blueInputLabel(){return iv.i18nBundle.getText($de)}get alphaInputLabel(){return iv.i18nBundle.getText(Wde)}get inputsDisabled(){return!!this._wrongHEX||void 0}get hexInputErrorState(){return this._wrongHEX?"Error":void 0}get styles(){return{mainColor:{"background-color":`rgb(${this._mainValue.r}, ${this._mainValue.g}, ${this._mainValue.b})`},circle:{left:`${this._selectedCoordinates.x}px`,top:`${this._selectedCoordinates.y}px`},colorSpan:{"background-color":`rgba(${this._value.r}, ${this._value.g}, ${this._value.b}, ${this._alpha})`}}}};rp([He()],Uh.prototype,"value",void 0),rp([He()],Uh.prototype,"name",void 0),rp([He({noAttribute:!0})],Uh.prototype,"hex",void 0),rp([He({type:Object})],Uh.prototype,"_mainValue",void 0),rp([He({type:Object})],Uh.prototype,"_value",void 0),rp([He({type:Object})],Uh.prototype,"_selectedCoordinates",void 0),rp([He({type:Number})],Uh.prototype,"_alpha",void 0),rp([He({type:Number})],Uh.prototype,"_hue",void 0),rp([He({type:Boolean})],Uh.prototype,"_isSelectedColorChanged",void 0),rp([He({type:Boolean})],Uh.prototype,"_isHueValueChanged",void 0),rp([He({type:Boolean})],Uh.prototype,"_wrongHEX",void 0),rp([al("@ui5/webcomponents")],Uh,"i18nBundle",void 0),Uh=iv=rp([Ds({tag:"ui5-color-picker",renderer:Ca,formAssociated:!0,styles:{packageName:"@ui5/webcomponents",fileName:"themes/ColorPicker.css.ts",content:`:host(:not([hidden])){display:inline-block}.ui5-color-picker-root{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.ui5-color-picker-main-color{width:16rem;height:16rem;position:relative;margin-bottom:1.5rem;border:1px solid var(--sapContent_ForegroundBorderColor);background-size:100%;background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0)),-webkit-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0)),-moz-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:linear-gradient(left,#000,#0000),linear-gradient(top,#fff0,#fff);background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-webkit-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-moz-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:linear-gradient(left,#000,#0000,#fff),linear-gradient(top,#80808000,gray);user-select:none;-moz-user-select:none}.ui5-color-picker-circle{position:absolute;box-sizing:border-box;width:13px;height:13px;border:var(--_ui5-v2-4-0_color_picker_circle_outer_border);border-radius:.6875rem;pointer-events:none}.ui5-color-picker-circle:after{content:"";position:absolute;width:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);height:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);border:var(--_ui5-v2-4-0_color_picker_circle_inner_border);border-radius:.9375rem;pointer-events:none}.ui5-color-picker-sliders-wrapper{width:calc(100% - 11px);margin-left:-10px}[ui5-slider]{--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_progress_box_sizing: content-box}[ui5-slider]::part(handle){width:.9375rem;height:1.5rem;background:transparent;box-sizing:border-box}[ui5-slider]::part(handle-container){margin-inline-start:-2px;margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top)}[ui5-slider]::part(handle-container):focus-within{margin-inline-start:unset;margin-top:unset}[ui5-slider]::part(handle):after{content:"";border:2px solid #fff;display:block;height:1.25rem;border-radius:1rem;width:100%;box-sizing:border-box}[ui5-slider]::part(root-container){padding:1rem 0}[ui5-slider]::part(progress-container){width:calc(100% + 11px);height:18px;position:absolute;margin-top:var(--_ui5-v2-4-0_color_picker_slider_container_margin_top);border-radius:0;border:1px solid var(--sapField_BorderColor)}[ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-size:100%;background-image:-webkit-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(left,red,#ff0,#0f0,#0ff,#00f,#f0f,red);background-color:none}[ui5-slider].ui5-color-picker-alpha-slider::part(progress-container){background-image:-webkit-linear-gradient(left,rgba(65,120,13,0),var(--ui5-v2-4-0_Color_Picker_Progress_Container_Color)),url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}[ui5-slider]::part(progress-bar){background:transparent}.ui5-color-picker-current-color{width:100%;display:flex;justify-content:space-around;align-items:center}.ui5-color-picker-colors-wrapper{display:flex;flex-wrap:nowrap;height:1.5rem;border:1px solid var(--sapField_BorderColor)}.ui5-color-picker-white,.ui5-color-picker-color{width:3.1rem;background:#fff;display:block}.ui5-color-picker-color{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}.ui5-color-picker-color-inner{width:100%;height:100%}.ui5-color-picker-hex-input-wrapper{display:flex;align-items:center;flex-wrap:nowrap}.ui5-color-picker-hex-input{width:4.5rem;min-width:4.5rem;margin-left:.2rem}.ui5-color-picker-rgb-wrapper{display:flex;justify-content:space-around;width:100%}.ui5-color-picker-rgb{display:flex;flex-direction:column;align-items:center;margin-top:1rem}.ui5-color-picker-rgb-input{width:2.5rem;min-width:2.5rem;text-align:center}.ui5-color-picker-hue-slider::part(progress-container):before,.ui5-color-picker-alpha-slider::part(progress-container):before,.ui5-color-picker-hue-slider::part(progress-container):after,.ui5-color-picker-alpha-slider::part(progress-container):after,[ui5-slider].ui5-color-picker-hue-slider::part(icon-slider),[ui5-slider].ui5-color-picker-alpha-slider::part(icon-slider){display:none}.ui5-color-picker-alpha-slider::part(handle),.ui5-color-picker-hue-slider::part(handle){box-shadow:var(--_ui5-v2-4-0_color_picker_slider_handle_box_shadow);border:var(--_ui5-v2-4-0_color_picker_slider_handle_border)}.ui5-color-picker-alpha-slider::part(handle):hover,.ui5-color-picker-hue-slider::part(handle):hover{border:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_hover)}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{outline:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_focus);outline-offset:.0625rem}.ui5-color-picker-alpha-slider::part(handle):focus:before,.ui5-color-picker-hue-slider::part(handle):focus:before{content:"";border:var(--_ui5-v2-4-0_color_picker_slider_handle_inline_focus);display:block;height:1.625rem;border-radius:1rem;width:1.05rem;box-sizing:border-box;position:absolute;inset:-3px -3px 2px}.ui5-color-picker-alpha-slider::part(handle):before,.ui5-color-picker-hue-slider::part(handle):before{display:none}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top)}:dir(rtl) [ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-image:-webkit-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(right,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}:dir(rtl) .ui5-color-picker-alpha-slider::part(handle),:dir(rtl) .ui5-color-picker-hue-slider::part(handle){--_ui5-v2-4-0_slider_handle_margin_left: 0}:dir(rtl) .ui5-color-picker-sliders-wrapper{margin-left:10px}
`},template:function(o,t,n){return n?et`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${Hr(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${Hr(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><${Lt("ui5-slider",t,n)} disabled="${le(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${le(this._hue)}" accessible-name="${le(this.hueSliderLabel)}" @ui5-input="${le(this._handleHueInput)}"></${Lt("ui5-slider",t,n)}><${Lt("ui5-slider",t,n)} disabled="${le(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${le(this._alpha)}" accessible-name="${le(this.alphaSliderLabel)}" @ui5-input="${le(this._handleAlphaInput)}"></${Lt("ui5-slider",t,n)}></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${Hr(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><${Lt("ui5-label",t,n)}>Hex</${Lt("ui5-label",t,n)}><${Lt("ui5-input",t,n)} class="ui5-color-picker-hex-input" value="${le(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${le(this.hexInputLabel)}" @ui5-change="${le(this._handleHEXChange)}" value-state="${le(this.hexInputErrorState)}"></${Lt("ui5-input",t,n)}></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${le(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><${Lt("ui5-input",t,n)} id="red" class="ui5-color-picker-rgb-input" disabled="${le(this.inputsDisabled)}" accessible-name="${le(this.redInputLabel)}" value="${le(this._value.r)}"></${Lt("ui5-input",t,n)}><${Lt("ui5-label",t,n)}>R</${Lt("ui5-label",t,n)}></div><div class="ui5-color-picker-rgb"><${Lt("ui5-input",t,n)} id="green" class="ui5-color-picker-rgb-input" disabled="${le(this.inputsDisabled)}" accessible-name="${le(this.greenInputLabel)}" value="${le(this._value.g)}"></${Lt("ui5-input",t,n)}><${Lt("ui5-label",t,n)}>G</${Lt("ui5-label",t,n)}></div><div class="ui5-color-picker-rgb"><${Lt("ui5-input",t,n)} id="blue" class="ui5-color-picker-rgb-input" disabled="${le(this.inputsDisabled)}" accessible-name="${le(this.blueInputLabel)}" value="${le(this._value.b)}"></${Lt("ui5-input",t,n)}><${Lt("ui5-label",t,n)}>B</${Lt("ui5-label",t,n)}></div><div class="ui5-color-picker-rgb"><${Lt("ui5-input",t,n)} id="alpha" disabled="${le(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${le(this._alpha)}" accessible-name="${le(this.alphaInputLabel)}" @ui5-input="${le(this._handleAlphaInput)}" @ui5-change="${le(this._handleAlphaChange)}"></${Lt("ui5-input",t,n)}><${Lt("ui5-label",t,n)}>A</${Lt("ui5-label",t,n)}></div></div></section>`:et`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${Hr(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${Hr(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><ui5-slider disabled="${le(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${le(this._hue)}" accessible-name="${le(this.hueSliderLabel)}" @ui5-input="${le(this._handleHueInput)}"></ui5-slider><ui5-slider disabled="${le(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${le(this._alpha)}" accessible-name="${le(this.alphaSliderLabel)}" @ui5-input="${le(this._handleAlphaInput)}"></ui5-slider></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${Hr(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><ui5-label>Hex</ui5-label><ui5-input class="ui5-color-picker-hex-input" value="${le(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${le(this.hexInputLabel)}" @ui5-change="${le(this._handleHEXChange)}" value-state="${le(this.hexInputErrorState)}"></ui5-input></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${le(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><ui5-input id="red" class="ui5-color-picker-rgb-input" disabled="${le(this.inputsDisabled)}" accessible-name="${le(this.redInputLabel)}" value="${le(this._value.r)}"></ui5-input><ui5-label>R</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="green" class="ui5-color-picker-rgb-input" disabled="${le(this.inputsDisabled)}" accessible-name="${le(this.greenInputLabel)}" value="${le(this._value.g)}"></ui5-input><ui5-label>G</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="blue" class="ui5-color-picker-rgb-input" disabled="${le(this.inputsDisabled)}" accessible-name="${le(this.blueInputLabel)}" value="${le(this._value.b)}"></ui5-input><ui5-label>B</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="alpha" disabled="${le(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${le(this._alpha)}" accessible-name="${le(this.alphaInputLabel)}" @ui5-input="${le(this._handleAlphaInput)}" @ui5-change="${le(this._handleAlphaChange)}"></ui5-input><ui5-label>A</ui5-label></div></div></section>`},dependencies:[YQ,Oge,v2],shadowRootOptions:{delegatesFocus:!0}}),Fn("change",{bubbles:!0})],Uh),Uh.define();const Qge=Uh;class C2 extends Qhe{static get dependencies(){return[qW,X_,Qge]}get colorPaletteDialogTitle(){return C2.i18nBundle.getText(Ode)}get colorPaletteDialogOKButton(){return C2.i18nBundle.getText(Pde)}get colorPaletteCancelButton(){return C2.i18nBundle.getText(N$)}}function m3(o,t,n){return n?et`<div class="ui5-step-icon ui5-step-dec" title="${le(this.decIconTitle)}"><${Lt("ui5-icon",t,n)} id="${le(this._id)}-dec" name="${le(this.decIconName)}" tabindex="-1" accessible-name="${le(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></${Lt("ui5-icon",t,n)}></div>`:et`<div class="ui5-step-icon ui5-step-dec" title="${le(this.decIconTitle)}"><ui5-icon id="${le(this._id)}-dec" name="${le(this.decIconName)}" tabindex="-1" accessible-name="${le(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></ui5-icon></div>`}function _3(o,t,n){return et`<slot name="valueStateMessage" slot="valueStateMessage"></slot>`}function v3(o,t,n){return n?et`<div class="ui5-step-icon ui5-step-inc" title="${le(this.incIconTitle)}"><${Lt("ui5-icon",t,n)} id="${le(this._id)}-inc" name="${le(this.incIconName)}" tabindex="-1" accessible-name="${le(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></${Lt("ui5-icon",t,n)}></div>`:et`<div class="ui5-step-icon ui5-step-inc" title="${le(this.incIconTitle)}"><ui5-icon id="${le(this._id)}-inc" name="${le(this.incIconName)}" tabindex="-1" accessible-name="${le(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></ui5-icon></div>`}(async(o,t)=>{var n,c;await Promise.all(((n=t.dependencies)==null?void 0:n.map(h=>h.define()))||[]),await((c=t.define)==null?void 0:c.call(t)),_q.set(o,t),(h=>{yq.fireEvent(bq(h),void 0)})(o)})("ColorPaletteMoreColors",C2),tr("less",{pathData:"M464 224q16 0 16 16v32q0 16-16 16H48q-6 0-11-4.5T32 272v-32q0-7 5-11.5t11-4.5h416z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("less",{pathData:"M454 275H58q-11 0-18.5-7T32 250t7.5-18.5T58 224h396q11 0 18.5 7.5T480 250t-7.5 18-18.5 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),tr("add",{pathData:"M32 240q0-7 5-11.5t11-4.5h176V48q0-7 5-11.5t11-4.5h32q16 0 16 16v176h176q16 0 16 16v32q0 16-16 16H288v176q0 16-16 16h-32q-6 0-11-4.5t-5-11.5V288H48q-6 0-11-4.5T32 272v-32z",ltr:!1,accData:tW,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),tr("add",{pathData:"M454 230q11 0 18.5 7.5T480 256t-7.5 18.5T454 282H282v172q0 11-7.5 18.5T256 480t-18.5-7.5T230 454V282H58q-11 0-18.5-7.5T32 256t7.5-18.5T58 230h172V58q0-11 7.5-18.5T256 32t18.5 7.5T282 58v172h172z",ltr:!1,accData:tW,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var _R,Go=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let yo=_R=class extends xa{constructor(){super(...arguments),this.value=0,this.step=1,this.valueState="None",this.required=!1,this.disabled=!1,this.readonly=!1,this.valuePrecision=0,this._decIconDisabled=!1,this._incIconDisabled=!1,this.focused=!1,this._inputFocused=!1,this._previousValue=this.value,this._waitTimeout=500,this._speed=120,this._spinStarted=!1}async formElementAnchor(){var o;return(o=await this.getFocusDomRefAsync())==null?void 0:o.getFocusDomRefAsync()}get formFormattedValue(){return this.value.toString()}get type(){return s3.Number}get decIconTitle(){return _R.i18nBundle.getText(yAe)}get decIconName(){return"less"}get incIconTitle(){return _R.i18nBundle.getText(bAe)}get incIconName(){return"add"}get _decIconClickable(){return!this._decIconDisabled&&!this.readonly&&!this.disabled}get _incIconClickable(){return!this._incIconDisabled&&!this.readonly&&!this.disabled}get _isFocused(){return this.focused}get _displayValue(){return this.value===0||Number.isInteger(this.value)?this.value.toFixed(this.valuePrecision):this.input&&this.value===Number(this.input.value)?this.input.value:this.value.toString()}get accInfo(){return{ariaRequired:this.required,ariaLabel:K0(this)}}get inputAttributes(){return{min:this.min===void 0?void 0:this.min,max:this.max===void 0?void 0:this.max,step:this.step}}onBeforeRendering(){this._setButtonState(),this._previousValue===void 0&&(this._previousValue=this.value)}get input(){return this.shadowRoot.querySelector("[ui5-input]")}get innerInput(){return this.input.shadowRoot.querySelector("input")}get inputOuter(){return this.shadowRoot.querySelector(".ui5-step-input-input")}_onButtonFocusOut(){setTimeout(()=>{this._inputFocused||this.inputOuter.removeAttribute("focused")},0)}_onInputFocusIn(){this._inputFocused=!0,this.value!==this._previousValue&&(this._previousValue=this.value)}_onInputFocusOut(){this._inputFocused=!1,this._onInputChange()}_setButtonState(){this._decIconDisabled=this.min!==void 0&&this.value<=this.min,this._incIconDisabled=this.max!==void 0&&this.value>=this.max}_validate(){this._initialValueState===void 0&&(this._initialValueState=this.valueState),this._updateValueState()}_updateValueState(){const o=(this.min===void 0||Number(this.input.value)>=this.min)&&(this.max===void 0||Number(this.input.value)<=this.max),t=this._isValueWithCorrectPrecision,n=this.valueState,c=o&&t;this.valueState=c?or.None:or.Negative,!this.fireDecoratorEvent("value-state-change",{valueState:this.valueState,valid:c})&&(this.valueState=n)}_preciseValue(o){const t=10**this.valuePrecision;return Math.round(o*t)/t}_fireChangeEvent(){this._previousValue!==this.value&&(this._previousValue=this.value,this.fireDecoratorEvent("change",{value:this.value}))}_modifyValue(o,t=!1){let n;n=this.value+o,this.min!==void 0&&n<this.min&&(n=this.min),this.max!==void 0&&n>this.max&&(n=this.max),n=this._preciseValue(n),n!==this.value&&(this.value=n,this.input.value=n.toFixed(this.valuePrecision),this._validate(),this._setButtonState(),this.focused=!0,this.inputOuter.setAttribute("focused",""),t?this._fireChangeEvent():this.input.focus())}_incValue(o){this._incIconClickable&&o.isTrusted&&!this.disabled&&!this.readonly&&(this._modifyValue(this.step,!0),this._previousValue=this.value)}_decValue(o){this._decIconClickable&&o.isTrusted&&!this.disabled&&!this.readonly&&(this._modifyValue(-this.step,!0),this._previousValue=this.value)}get _isValueWithCorrectPrecision(){const o=this.input.value.includes(".")?".":",",t=this.input.value.split(o);return(t.length>1?t[1].length:0)===this.valuePrecision}_onInputChange(){this._setDefaultInputValueIfNeeded();const o=Number(this.input.value);this._isValueChanged(o)&&this._updateValueAndValidate(o)}_setDefaultInputValueIfNeeded(){if(this.input.value===""){const o=(this.min||0).toFixed(this.valuePrecision);this.input.value=o,this.innerInput.value=o}}_isValueChanged(o){const t=this._isValueWithCorrectPrecision,n=t&&this.valueState===or.Negative;return this.value!==this._previousValue||this.value!==o||o===0||!t||n}_updateValueAndValidate(o){this.value=o,this._validate(),this._setButtonState(),this._fireChangeEvent()}_onfocusin(){this.focused=!0}_onfocusout(){this.focused=!1}_onkeydown(o){let t=!0;var n;this.disabled||this.readonly||(Zo(o)?this._onInputChange():(xd(o)?this._modifyValue(this.step):_A(o)?this._modifyValue(-this.step):$0(o)?(this.value=this._previousValue,this.input.value=this.value.toFixed(this.valuePrecision)):this.max!==void 0&&(((n=o).key?n.key==="PageUp":n.keyCode===33)&&Nu(n,!1,!1,!0)||(c=>(c.key?c.key==="ArrowUp"||c.key==="Up":c.keyCode===38)&&Nu(c,!0,!1,!0))(o))?this._modifyValue(this.max-this.value):this.min!==void 0&&((c=>(c.key?c.key==="PageDown":c.keyCode===34)&&Nu(c,!1,!1,!0))(o)||(c=>(c.key?c.key==="ArrowDown"||c.key==="Down":c.keyCode===40)&&Nu(c,!0,!1,!0))(o))?this._modifyValue(this.min-this.value):o2(o)||nQ(o)||rQ(o)||sQ(o)||(t=!1),t&&o.preventDefault()))}_decSpin(){this._decIconDisabled||this._spinValue(!1,!0)}_incSpin(){this._incIconDisabled||this._spinValue(!0,!0)}_calcWaitTimeout(){return this._speed*=.8,this._waitTimeout=this._waitTimeout-this._speed<50?50:this._waitTimeout-this._speed,this._waitTimeout}_spinValue(o,t=!1){t&&(this._waitTimeout=500,this._speed=120,this._btnDown=!0),this._spinTimeoutId=setTimeout(()=>{this._btnDown&&(this._spinStarted=!0,this._modifyValue(o?this.step:-this.step),this._setButtonState(),!this._incIconDisabled&&o||!this._decIconDisabled&&!o?this._spinValue(o):(this._resetSpin(),this._fireChangeEvent()))},this._calcWaitTimeout())}_resetSpin(){clearTimeout(this._spinTimeoutId),this._btnDown=!1,this._spinStarted=!1}_resetSpinOut(){this._btnDown&&(this._resetSpin(),this._fireChangeEvent())}};Go([He({type:Number})],yo.prototype,"value",void 0),Go([He({type:Number})],yo.prototype,"min",void 0),Go([He({type:Number})],yo.prototype,"max",void 0),Go([He({type:Number})],yo.prototype,"step",void 0),Go([He()],yo.prototype,"valueState",void 0),Go([He({type:Boolean})],yo.prototype,"required",void 0),Go([He({type:Boolean})],yo.prototype,"disabled",void 0),Go([He({type:Boolean})],yo.prototype,"readonly",void 0),Go([He()],yo.prototype,"placeholder",void 0),Go([He()],yo.prototype,"name",void 0),Go([He({type:Number})],yo.prototype,"valuePrecision",void 0),Go([He()],yo.prototype,"accessibleName",void 0),Go([He()],yo.prototype,"accessibleNameRef",void 0),Go([He({noAttribute:!0})],yo.prototype,"_decIconDisabled",void 0),Go([He({noAttribute:!0})],yo.prototype,"_incIconDisabled",void 0),Go([He({type:Boolean})],yo.prototype,"focused",void 0),Go([He({noAttribute:!0})],yo.prototype,"_inputFocused",void 0),Go([He({noAttribute:!0})],yo.prototype,"_previousValue",void 0),Go([He({noAttribute:!0})],yo.prototype,"_waitTimeout",void 0),Go([He({noAttribute:!0})],yo.prototype,"_speed",void 0),Go([He({noAttribute:!0})],yo.prototype,"_btnDown",void 0),Go([He({noAttribute:!0})],yo.prototype,"_spinTimeoutId",void 0),Go([He({noAttribute:!0})],yo.prototype,"_spinStarted",void 0),Go([Ro()],yo.prototype,"valueStateMessage",void 0),Go([al("@ui5/webcomponents")],yo,"i18nBundle",void 0),yo=_R=Go([Ds({tag:"ui5-step-input",formAssociated:!0,renderer:Ca,styles:{packageName:"@ui5/webcomponents",fileName:"themes/StepInput.css.ts",content:`:host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host(:not([hidden])){display:inline-block;width:100%;line-height:normal;letter-spacing:normal;word-spacing:normal}:host{--ui5-v2-4-0_input_focus_pseudo_element_content: none;color:var(--sapField_TextColor);background-color:var(--sapField_Background);border:var(--_ui5-v2-4-0_step_input_border_style);border-radius:var(--sapField_BorderCornerRadius);box-sizing:border-box;height:var(--_ui5-v2-4-0_input_height);position:relative;margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;min-width:var(--_ui5-v2-4-0_step_input_min_width);text-align:right;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host .ui5-step-input-input{text-align:inherit;height:inherit}:host(:not([value-state]):not([readonly]):not([disabled])){box-shadow:none}:host(:not([value-state]):not([readonly]):not([disabled]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0_step_input_border_color_hover);border:var(--_ui5-v2-4-0_step_input_border_hover)}:host(:not([value-state]):not([readonly]):not([disabled]):not([focused]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):not([focused]):hover){background-color:var(--sapField_Hover_Background);border:var(--_ui5-v2-4-0_step_input_border_style_hover);box-shadow:var(--sapField_Hover_Shadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InformationShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):hover),:host([value-state="Negative"]:not([readonly]):not([disabled]):hover),:host([value-state="Information"]:not([readonly]):not([disabled]):hover),:host([value-state="Critical"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0-step_input_button_state_hover_background_color)}:host(:not([value-state]):not([readonly]):not([disabled])[focused]),:host([value-state="None"]:not([readonly]):not([disabled])[focused]),:host([value-state="Positive"]:not([readonly]):not([disabled])[focused]),:host([value-state="Negative"]:not([readonly]):not([disabled])[focused]),:host([value-state="Information"]:not([readonly]):not([disabled])[focused]),:host([value-state="Critical"]:not([readonly]):not([disabled])[focused]){background-color:var(--sapField_Focus_Background)}:host([value-state="Positive"]:not([readonly]):not([disabled])):after,:host([value-state="Negative"]:not([readonly]):not([disabled])):after,:host([value-state="None"]:not([readonly]):not([disabled])):after,:host([value-state="Information"]:not([readonly]):not([disabled])):after,:host([value-state="Critical"]:not([readonly]):not([disabled])):after{position:absolute;content:"";inset:-1px;outline:none;pointer-events:none;border-radius:var(--sapField_BorderCornerRadius);border-style:var(--_ui5-v2-4-0_input_error_warning_border_style);z-index:1;border-width:0px}:host([value-state="Information"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InformationColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state="Critical"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_WarningColor);border-width:2px}:host([value-state="Positive"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_SuccessColor);border-width:1px}:host([value-state="Negative"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InvalidColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state]):after{border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input{background-color:var(--_ui5-v2-4-0_input_input_background_color)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input:hover{background-color:var(--_ui5-v2-4-0_step_input_input_error_background_color)}:host([value-state]:not([value-state="None"]) .ui5-step-input-input[focused]){outline:none}:host .ui5-step-input-input{width:100%;color:inherit;background-color:inherit;border:var(--_ui5-v2-4-0_step_input_input_border);box-sizing:border-box;vertical-align:top;margin-top:var(--_ui5-v2-4-0_step_input_input_margin_top);min-width:var(--_ui5-v2-4-0_step_input_min_width);padding-inline-start:var(--_ui5-v2-4-0_step_input_padding);padding-inline-end:var(--_ui5-v2-4-0_step_input_padding);position:relative;outline:none;line-height:inherit;letter-spacing:inherit;word-spacing:inherit}:host .ui5-step-input-input[readonly]{padding:0}:host .ui5-step-input-input:hover,:host .ui5-step-input-input[focused]{box-shadow:none}:host .ui5-step-input-root{white-space:nowrap;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;height:inherit}:host .ui5-step-input-input[text-align=left]{text-align:left}:host .ui5-step-input-input[text-align=center]{text-align:center}:host .ui5-step-input-input[text-align=right]{text-align:right}:host .ui5-step-icon{position:absolute;display:var(--_ui5-v2-4-0_step_input_button_display);height:2rem;height:100%;background-color:var(--_ui5-v2-4-0_step_input_button_background_color);z-index:0}:host .ui5-step-icon[focused]{border:none;outline:none}:host .ui5-step-icon.ui5-step-dec{left:var(--_ui5-v2-4-0_step_input_button_left);z-index:1}:host .ui5-step-icon.ui5-step-inc{right:var(--_ui5-v2-4-0_step_input_button_right)}:host .ui5-step-icon *:not([clickable]),:host .ui5-step-icon *:not([clickable]):active,:host .ui5-step-icon *:not([clickable]):hover{opacity:.5;background-color:transparent;color:var(--sapContent_IconColor)}:host .ui5-step-icon :not([clickable]) *:hover,:host .ui5-step-icon :not([clickable]) *:active{background-color:var(--sapField_Background);color:var(--sapContent_IconColor)}:host .ui5-step-input-input[focused]:after{position:absolute;content:"";border:var(--_ui5-v2-4-0_step_input_input_border_focused_after);top:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);right:0;bottom:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);border-radius:var(--_ui5-v2-4-0_step_input_input_border_radius_focused_after);left:0;outline:none;pointer-events:none;z-index:1}:host .ui5-step-input-input[focused]{outline:none}:host([value-state="Information"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_information_border_color_focused_after)}:host([value-state="Critical"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after)}:host([value-state="Positive"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_success_border_color_focused_after)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_error_border_color_focused_after)}:host .ui5-step-input-input::-webkit-outer-spin-button,:host .ui5-step-input-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}:host([disabled]) .ui5-step-icon{background-color:var(--_ui5-v2-4-0_step_input_disabled_button_background)}:host([disabled]) .ui5-step-icon [ui5-icon]{color:var(--sapField_ReadOnly_BorderColor)}
`},template:function(o,t,n){return n?et`<div id="${le(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly?void 0:m3.call(this,o,t,n)}<${Lt("ui5-input",t,n)} id="${le(this._id)}-inner" class="ui5-step-input-input" placeholder="${le(this.placeholder)}" type="${le(this.type)}" value="${le(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${le(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${le(this.accInfo)}" ._nativeInputAttributes="${le(this.inputAttributes)}" @ui5-change="${le(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length?_3.call(this,o,t,n):void 0}</${Lt("ui5-input",t,n)}>${this.readonly?void 0:v3.call(this,o,t,n)}</div>`:et`<div id="${le(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly?void 0:m3.call(this,o,t,n)}<ui5-input id="${le(this._id)}-inner" class="ui5-step-input-input" placeholder="${le(this.placeholder)}" type="${le(this.type)}" value="${le(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${le(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${le(this.accInfo)}" ._nativeInputAttributes="${le(this.inputAttributes)}" @ui5-change="${le(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length?_3.call(this,o,t,n):void 0}</ui5-input>${this.readonly?void 0:v3.call(this,o,t,n)}</div>`},dependencies:[rf,YQ]}),Fn("change",{bubbles:!0}),Fn("value-state-change",{detail:{valueState:{type:String},valid:{type:Boolean}},bubbles:!0,cancelable:!0})],yo),yo.define();var Nge=Object.defineProperty,Hge=Object.getOwnPropertyDescriptor,E2=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?Hge(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&Nge(t,n,f),f};let m1=class extends ft{constructor(){super(...arguments),this.isColumnMode=!1}render(){return Ie`
      <div
        id="layout"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div class="input-row">
          <ui5-label show-colon>Show Axes</ui5-label>
          <ui5-checkbox
            ?checked="${this.environmentSettings.showAxes}"
            @change="${this._handleShowAxesStateChanged}"
          ></ui5-checkbox>
        </div>
        <div class="input-row">
          <ui5-label show-colon>Remap 2D  3D Axes</ui5-label>
          <ui5-select @change="${this._handleAxesRemapChanged}">
            <ui5-option selected>x-y-z</ui5-option>
            <ui5-option>x-z-y</ui5-option>
            <ui5-option>y-x-z</ui5-option>
            <ui5-option>y-z-x</ui5-option>
            <ui5-option>z-x-y</ui5-option>
            <ui5-option>z-y-x</ui5-option>
          </ui5-select>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        ></div>
        <div>
          <div class="input-row">
            <ui5-label show-colon for="color-palette-current"
              >Background Color</ui5-label
            >
            <ui5-color-palette-item
              value=${this.environmentSettings.backgroundColor[0]}
              @click=${this._toggleColorPalette}
              id="color-palette-current"
            ></ui5-color-palette-item>
          </div>
          <ui5-color-palette-popover
            id="colorPalettePopover"
            show-more-colors=""
            @item-click=${this._handleColorChanged}
          >
            <ui5-color-palette-item value="#444444"></ui5-color-palette-item>
            <ui5-color-palette-item value="lightpink"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(216,124,172)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#6c666d"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(55,81,95)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#0072bb"></ui5-color-palette-item>
            <ui5-color-palette-item value="powderblue"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(143,201,58)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(195,172,206)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="orange"></ui5-color-palette-item>
          </ui5-color-palette-popover>
          <div class="input-row">
            <ui5-label show-colon>Gradient Effect</ui5-label>
            <ui5-checkbox
              ?checked="${this.environmentSettings.applyGradient}"
              @change="${this._handleApplyGradientStateChanged}"
            ></ui5-checkbox>
          </div>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        ></div>
        <div class="input-row">
          <ui5-label show-colon>Light [%]</ui5-label>
          <ui5-step-input
            value="100"
            min="0"
            max="500"
            step="10"
            @change="${this._handleBrightnessChanged}"
          ></ui5-step-input>
        </div>
      </div>
    `}_toggleColorPalette(){this.colorPalettePopover!==null&&(this.colorPalettePopover.opener===void 0&&(this.colorPalettePopover.opener=this.colorPaletteToggle),this.colorPalettePopover.open=!this.colorPalettePopover.open)}_handleColorChanged(o){this.environmentSettings.backgroundColor=o.detail.color,this.requestUpdate()}_handleShowAxesStateChanged(o){this.environmentSettings.showAxes=o.target.checked}_handleAxesRemapChanged(o){const t=o.target.value.split("-");if(console.log("Axes remap requested",t),t.length==3){const n=t.map(c=>"xyz".indexOf(c));this.environmentSettings.remapAxes=new Ke(n[0],n[1],n[2])}else console.warn("Unexpected input",t)}_handleApplyGradientStateChanged(o){this.environmentSettings.applyGradient=o.target.checked}_handleBrightnessChanged(o){this.environmentSettings.brightness=o.detail.value/100}};m1.styles=A`
    :host {
      height: 100%;
      width: 100%;
    }

    #divider.ver-orientation {
      border-top: 0.05rem solid darkgrey;
    }

    #divider.hor-orientation {
      border-left: 0.05rem solid darkgrey;
    }

    #layout.ver-orientation {
      flex-direction: column;
    }

    #layout.hor-orientation {
      flex-direction: row;
    }

    #layout {
      position: relative;
      display: flex;
      align-items: stretch;
      gap: 0.5rem;
    }

    .input-row {
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .ver-orientation > .input-row {
      width: 11rem;
    }
  `,E2([$t({type:Boolean})],m1.prototype,"isColumnMode",2),E2([$t({type:Object})],m1.prototype,"environmentSettings",2),E2([gi("#colorPalettePopover")],m1.prototype,"colorPalettePopover",2),E2([gi("#color-palette-current")],m1.prototype,"colorPaletteToggle",2),m1=E2([Gt("environment-settings")],m1);var zge=Object.defineProperty,Gge=Object.getOwnPropertyDescriptor,S2=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?Gge(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&zge(t,n,f),f};let _1=class extends ft{constructor(){super(...arguments),this.isColumnMode=!1,this.isAutoRotationDisabled=!1,this._userAutoRotationOn=!1}render(){return Ie`
    <div id="layout" class="${this.isColumnMode?"ver-orientation":"hor-orientation"}">
      <div>    
        <ui5-title level="H5">3D</ui5-title>
        <div class = "input-row" >
          <ui5-label for="xOrientation" show-colon>X [&deg;]</ui5-label>
          <ui5-step-input id="xOrientation" value="0" min="0" max="359" step="10" @change="${this.handleXOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="yOrientation" show-colon>Y [&deg;]</ui5-label>
          <ui5-step-input id="yOrientation" value="0" min="0" max="359" step="10" @change="${this.handleYOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="zOrientation" show-colon>Z [&deg;]</ui5-label>
          <ui5-step-input id="zOrientation" value="0" min="0" max="359" step="10" @change="${this.handleZOrientationChanged}"></ui5-step-input>
        </div>
      </div>
      <div id="divider" class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"></div>
      <div>    
        <ui5-title level="H5">2D</ui5-title>
        <div class = "input-row" >
          <ui5-label show-colon>Auto Rotation</ui5-label>
          <ui5-checkbox id= "autoRotationCheckbox" 
             text="${this.imageRotationSettings.isAutoRotationActivated?"On":"Off"}"
             ?checked="${this.imageRotationSettings.isAutoRotationActivated}" 
             ?disabled="${this.isAutoRotationDisabled}" 
             @change="${this._handleAutoRotationStateChanged}"></ui5-checkbox>
        </div>
        <div class = "input-row"  >
          <ui5-label for="imageAngle" show-colon>&phi; [&deg;]</ui5-label>
          <ui5-step-input id="imageAngle"
           value="${this.imageRotationSettings.isAutoRotationActivated?this.imageRotationSettings.autoRotationAngle:this.imageRotationSettings.userSetRotationAngle}"
            min="-180" max="180" step="10" 
            ?disabled="${this.imageRotationSettings.isAutoRotationActivated}"
            @change="${this._handleRotationValueChanged}"></ui5-step-input>
        </div>
      </div>
    </div>
        `}firstUpdated(){this.imageRotationSettings.on("rotation-angle-changed",()=>this.requestUpdate())}updated(o){super.updated(o),o.has("isAutoRotationDisabled")&&(this.isAutoRotationDisabled?(this._userAutoRotationOn=this.imageRotationSettings.isAutoRotationActivated,this.imageRotationSettings.isAutoRotationActivated=!0):this.imageRotationSettings.isAutoRotationActivated!=this._userAutoRotationOn&&(this.imageRotationSettings.isAutoRotationActivated=this._userAutoRotationOn))}_handleRotationValueChanged(o){this.imageRotationSettings.isAutoRotationActivated||(this.imageRotationSettings.userSetRotationAngle=o.detail.value)}_handleAutoRotationStateChanged(o){const t=o.target.checked;this.imageRotationSettings.isAutoRotationActivated!=t&&(this.imageRotationSettings.isAutoRotationActivated=t)}_handleDegreeInput(o){return t=o.detail.value,Math.min(Math.max(Number(t),0),359)*Math.PI/180;var t}handleXOrientationChanged(o){this.modelOrientationSettings.xOrientationInRad=this._handleDegreeInput(o)}handleYOrientationChanged(o){this.modelOrientationSettings.yOrientationInRad=this._handleDegreeInput(o)}handleZOrientationChanged(o){this.modelOrientationSettings.zOrientationInRad=this._handleDegreeInput(o)}};_1.styles=A`
        :host {
          height: 100%;
          width: 100%;
        }

        #divider.ver-orientation {
          border-top: 0.05rem solid darkgrey;
        }

        #divider.hor-orientation {
          border-left: 0.05rem solid darkgrey;
        }

        #layout.ver-orientation{
          flex-direction: column;
        }

        #layout.hor-orientation{
          flex-direction: row;
        }

        #layout{
          position: relative;
          display: flex;
          align-items: stretch;
          gap: 1rem;
        }

        .input-row{
          position: relative;
          display: flex;
          align-items: center;
          width: 11rem; 
          gap: 1rem;
        }
      `,S2([$t({type:Boolean})],_1.prototype,"isColumnMode",2),S2([$t({type:Boolean})],_1.prototype,"isAutoRotationDisabled",2),S2([$t({type:Object})],_1.prototype,"imageRotationSettings",2),S2([$t({type:Object})],_1.prototype,"modelOrientationSettings",2),_1=S2([Gt("rotation-settings")],_1);const nv=new WeakMap;let Vge=class bU{static get tasks(){return nv}static enqueue(t,n){nv.has(t)||nv.set(t,[]),nv.get(t).push(n)}static run(t,n){return nv.has(t)||nv.set(t,[]),n().then(()=>{const c=nv.get(t);if(c.length>0)return bU.run(t,c.shift());nv.delete(t)})}static push(t,n){nv.get(t)?bU.enqueue(t,n):bU.run(t,n)}};const y3=o=>{let t,n,c,h=null,f=!1;const d=new Promise((p,v)=>{c=w=>{h=h||w;const S=w-h,B=o.duration-S;if(S<=o.duration){const R=1-B/o.duration;o.advance(R),f||(t=requestAnimationFrame(c))}else o.advance(1),p()},n=()=>{f=!0,cancelAnimationFrame(t),v(new Error("animation stopped"))}}).catch(p=>p);return Vge.push(o.element,()=>(typeof o.beforeStart=="function"&&o.beforeStart(),requestAnimationFrame(c),new Promise(p=>{d.then(()=>p())}))),{promise:()=>d,stop:()=>n}};let vR;function qge(o,t,n){return et`<div class="ui5-panel-heading-wrapper${br(this.classes.stickyHeaderClass)}" role="${le(this.headingWrapperRole)}" aria-level="${le(this.headingWrapperAriaLevel)}"><div @click="${this._headerClick}" @keydown="${this._headerKeyDown}" @keyup="${this._headerKeyUp}" class="ui5-panel-header" tabindex="${le(this.headerTabIndex)}" role="${le(this.accInfo.role)}" aria-expanded="${le(this.accInfo.ariaExpanded)}" aria-controls="${le(this.accInfo.ariaControls)}" aria-labelledby="${le(this.accInfo.ariaLabelledby)}" part="header">${this.fixed?void 0:$ge.call(this,o,t,n)}${this._hasHeader?Kge.call(this,o,t,n):Xge.call(this,o,t,n)}</div></div>`}function $ge(o,t,n){return et`<div class="ui5-panel-header-button-root">${this._hasHeader?Wge.call(this,o,t,n):jge.call(this,o,t,n)}</div>`}function Wge(o,t,n){return n?et`<${Lt("ui5-button",t,n)} design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${le(this.accInfo.button.accessibilityAttributes)} tooltip="${le(this.accInfo.button.title)}" accessible-name="${le(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><${Lt("ui5-icon",t,n)} class="ui5-panel-header-icon ${br(this.classes.headerBtn)}" name="slim-arrow-right"></${Lt("ui5-icon",t,n)}></div></${Lt("ui5-button",t,n)}>`:et`<ui5-button design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${le(this.accInfo.button.accessibilityAttributes)} tooltip="${le(this.accInfo.button.title)}" accessible-name="${le(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><ui5-icon class="ui5-panel-header-icon ${br(this.classes.headerBtn)}" name="slim-arrow-right"></ui5-icon></div></ui5-button>`}function jge(o,t,n){return n?et`<${Lt("ui5-icon",t,n)} class="ui5-panel-header-button ui5-panel-header-icon ${br(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${le(this.toggleButtonTitle)}"></${Lt("ui5-icon",t,n)}>`:et`<ui5-icon class="ui5-panel-header-button ui5-panel-header-icon ${br(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${le(this.toggleButtonTitle)}"></ui5-icon>`}function Kge(o,t,n){return et`<slot name="header"></slot>`}function Xge(o,t,n){return et`<div id="${le(this._id)}-header-title" class="ui5-panel-header-title">${le(this.headerText)}</div>`}pC(()=>{vR=void 0}),Gi("@ui5/webcomponents-theming","sap_horizon",async()=>Br),Gi("@ui5/webcomponents","sap_horizon",async()=>Ir);var ZQ,Bd=function(o,t,n,c){var h,f=arguments.length,d=f<3?t:c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,n,c);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(d=(f<3?h(d):f>3?h(t,n,d):h(t,n))||d);return f>3&&d&&Object.defineProperty(t,n,d),d};let $u=ZQ=class extends xa{constructor(){super(...arguments),this.fixed=!1,this.collapsed=!1,this.noAnimation=!1,this.accessibleRole="Form",this.headerLevel="H2",this.stickyHeader=!1,this.useAccessibleNameForToggleButton=!1,this._hasHeader=!1,this._contentExpanded=!1,this._animationRunning=!1}onBeforeRendering(){this._animationRunning||(this._contentExpanded=!this.collapsed),this._hasHeader=!!this.header.length}shouldToggle(o){return!this.header.length||o.classList.contains("ui5-panel-header-button")}shouldNotAnimate(){return this.noAnimation||(vR===void 0&&(H0(),vR=wd.animationMode),vR===xO.None)}_headerClick(o){this.shouldToggle(o.target)&&this._toggleOpen()}_toggleButtonClick(o){o.x===0&&o.y===0&&o.stopImmediatePropagation()}_headerKeyDown(o){this.shouldToggle(o.target)&&(Zo(o)&&o.preventDefault(),Do(o)&&o.preventDefault())}_headerKeyUp(o){this.shouldToggle(o.target)&&(Zo(o)&&this._toggleOpen(),Do(o)&&this._toggleOpen())}_toggleOpen(){if(this.fixed)return;if(this.collapsed=!this.collapsed,this.shouldNotAnimate())return void this.fireDecoratorEvent("toggle");this._animationRunning=!0;const o=this.getDomRef().querySelectorAll(".ui5-panel-content"),t=[];[].forEach.call(o,n=>{this.collapsed?t.push((c=>{let h,f,d,p,v,w,S,B,R,D,O,V;const $=y3({beforeStart:()=>{const G=c;h=getComputedStyle(G),f=parseFloat(h.paddingTop),d=parseFloat(h.paddingBottom),p=parseFloat(h.marginTop),v=parseFloat(h.marginBottom),w=parseFloat(h.height),S=G.style.overflow,B=G.style.paddingTop,R=G.style.paddingBottom,D=G.style.marginTop,O=G.style.marginBottom,V=G.style.height,G.style.overflow="hidden"},duration:400,element:c,advance:G=>{c.style.paddingTop=f-f*G+"px",c.style.paddingBottom=d-d*G+"px",c.style.marginTop=p-p*G+"px",c.style.marginBottom=v-v*G+"px",c.style.height=w-w*G+"px"}});return $.promise().then(G=>{G instanceof Error||(c.style.overflow=S,c.style.paddingTop=B,c.style.paddingBottom=R,c.style.marginTop=D,c.style.marginBottom=O,c.style.height=V,c.style.display="none")}),$})(n).promise()):t.push((c=>{let h,f,d,p,v,w,S,B,R,D,O,V;const $=y3({beforeStart:()=>{c.style.display="block",h=getComputedStyle(c),f=parseFloat(h.paddingTop),d=parseFloat(h.paddingBottom),p=parseFloat(h.marginTop),v=parseFloat(h.marginBottom),w=parseFloat(h.height),S=c.style.overflow,B=c.style.paddingTop,R=c.style.paddingBottom,D=c.style.marginTop,O=c.style.marginBottom,V=c.style.height,c.style.overflow="hidden",c.style.paddingTop="0",c.style.paddingBottom="0",c.style.marginTop="0",c.style.marginBottom="0",c.style.height="0"},duration:400,element:c,advance:G=>{c.style.display="block",c.style.paddingTop=f*G+"px",c.style.paddingBottom=d*G+"px",c.style.marginTop=p*G+"px",c.style.marginBottom=v*G+"px",c.style.height=w*G+"px"}});return $.promise().then(()=>{c.style.overflow=S,c.style.paddingTop=B,c.style.paddingBottom=R,c.style.marginTop=D,c.style.marginBottom=O,c.style.height=V}),$})(n).promise())}),Promise.all(t).then(()=>{this._animationRunning=!1,this._contentExpanded=!this.collapsed,this.fireDecoratorEvent("toggle")})}_headerOnTarget(o){return o.classList.contains("sapMPanelWrappingDiv")}get classes(){return{headerBtn:{"ui5-panel-header-button-animated":!this.shouldNotAnimate()},stickyHeaderClass:{"ui5-panel-heading-wrapper-sticky":this.stickyHeader}}}get toggleButtonTitle(){return ZQ.i18nBundle.getText(hAe)}get expanded(){return!this.collapsed}get accRole(){return this.accessibleRole.toLowerCase()}get effectiveAccessibleName(){return typeof this.accessibleName=="string"&&this.accessibleName.length?this.accessibleName:void 0}get accInfo(){return{button:{accessibilityAttributes:{expanded:this.expanded},title:this.toggleButtonTitle,ariaLabelButton:!this.nonFocusableButton&&this.useAccessibleNameForToggleButton?this.effectiveAccessibleName:void 0},ariaExpanded:this.nonFixedInternalHeader?this.expanded:void 0,ariaControls:this.nonFixedInternalHeader?`${this._id}-content`:void 0,ariaLabelledby:this.nonFocusableButton?this.ariaLabelledbyReference:void 0,role:this.nonFixedInternalHeader?"button":void 0}}get ariaLabelledbyReference(){return this.nonFocusableButton&&this.headerText&&!this.fixed?`${this._id}-header-title`:void 0}get fixedPanelAriaLabelledbyReference(){return this.fixed&&!this.effectiveAccessibleName?`${this._id}-header-title`:void 0}get headerAriaLevel(){return this.headerLevel.slice(1)}get headerTabIndex(){return this.header.length||this.fixed?"-1":"0"}get headingWrapperAriaLevel(){return this._hasHeader?void 0:this.headerAriaLevel}get headingWrapperRole(){return this._hasHeader?void 0:"heading"}get nonFixedInternalHeader(){return!this._hasHeader&&!this.fixed}get hasHeaderOrHeaderText(){return this._hasHeader||this.headerText}get nonFocusableButton(){return!this.header.length}get styles(){return{content:{display:this._contentExpanded?"block":"none"}}}};Bd([He()],$u.prototype,"headerText",void 0),Bd([He({type:Boolean})],$u.prototype,"fixed",void 0),Bd([He({type:Boolean})],$u.prototype,"collapsed",void 0),Bd([He({type:Boolean})],$u.prototype,"noAnimation",void 0),Bd([He()],$u.prototype,"accessibleRole",void 0),Bd([He()],$u.prototype,"headerLevel",void 0),Bd([He()],$u.prototype,"accessibleName",void 0),Bd([He({type:Boolean})],$u.prototype,"stickyHeader",void 0),Bd([He({type:Boolean})],$u.prototype,"useAccessibleNameForToggleButton",void 0),Bd([He({type:Boolean})],$u.prototype,"_hasHeader",void 0),Bd([He({type:Boolean,noAttribute:!0})],$u.prototype,"_contentExpanded",void 0),Bd([He({type:Boolean,noAttribute:!0})],$u.prototype,"_animationRunning",void 0),Bd([Ro()],$u.prototype,"header",void 0),Bd([al("@ui5/webcomponents")],$u,"i18nBundle",void 0),$u=ZQ=Bd([Ds({tag:"ui5-panel",fastNavigation:!0,languageAware:!0,renderer:Ca,template:function(o,t,n){return et`<div class="ui5-panel-root" role="${le(this.accRole)}" aria-label="${le(this.effectiveAccessibleName)}" aria-labelledby="${le(this.fixedPanelAriaLabelledbyReference)}">${this.hasHeaderOrHeaderText?qge.call(this,o,t,n):void 0}<div class="ui5-panel-content" id="${le(this._id)}-content" tabindex="-1" style="${Hr(this.styles.content)}" part="content"><slot></slot></div></div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Panel.css.ts",content:`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:block}:host{font-family:"72override",var(--sapFontFamily);background-color:var(--sapGroup_TitleBackground);border-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([collapsed])){border-bottom:var(--_ui5-v2-4-0_panel_border_bottom)}:host([fixed]) .ui5-panel-header{padding-left:1rem}.ui5-panel-header{min-height:var(--_ui5-v2-4-0_panel_header_height);width:100%;position:relative;display:flex;justify-content:flex-start;align-items:center;outline:none;box-sizing:border-box;padding-right:var(--_ui5-v2-4-0_panel_header_padding_right);font-family:"72override",var(--sapFontHeaderFamily);font-size:var(--sapGroup_Title_FontSize);font-weight:400;color:var(--sapGroup_TitleTextColor)}.ui5-panel-header-icon{color:var(--_ui5-v2-4-0_panel_icon_color)}.ui5-panel-header-button-animated{transition:transform .4s ease-out}:host(:not([_has-header]):not([fixed])) .ui5-panel-header{cursor:pointer}:host(:not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--_ui5-v2-4-0_panel_focus_border);border-radius:var(--_ui5-v2-4-0_panel_border_radius);top:var(--_ui5-v2-4-0_panel_focus_offset);bottom:var(--_ui5-v2-4-0_panel_focus_bottom_offset);left:var(--_ui5-v2-4-0_panel_focus_offset);right:var(--_ui5-v2-4-0_panel_focus_offset)}:host(:not([collapsed]):not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{border-radius:var(--_ui5-v2-4-0_panel_border_radius_expanded)}:host(:not([collapsed])) .ui5-panel-header-button:not(.ui5-panel-header-button-with-icon),:host(:not([collapsed])) .ui5-panel-header-icon-wrapper [ui5-icon]{transform:var(--_ui5-v2-4-0_panel_toggle_btn_rotation)}:host([fixed]) .ui5-panel-header-title{width:100%}.ui5-panel-heading-wrapper.ui5-panel-heading-wrapper-sticky{position:sticky;top:0;background-color:var(--_ui5-v2-4-0_panel_header_background_color);z-index:100;border-radius:var(--_ui5-v2-4-0_panel_border_radius)}.ui5-panel-header-title{width:calc(100% - var(--_ui5-v2-4-0_panel_button_root_width));overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui5-panel-content{padding:var(--_ui5-v2-4-0_panel_content_padding);background-color:var(--sapGroup_ContentBackground);outline:none;border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius);overflow:auto}.ui5-panel-header-button-root{display:flex;justify-content:center;align-items:center;flex-shrink:0;width:var(--_ui5-v2-4-0_panel_button_root_width);height:var(--_ui5-v2-4-0_panel_button_root_height);padding:var(--_ui5-v2-4-0_panel_header_button_wrapper_padding);box-sizing:border-box}:host([fixed]:not([collapsed]):not([_has-header])) .ui5-panel-header,:host([collapsed]) .ui5-panel-header{border-bottom:.0625rem solid var(--sapGroup_TitleBorderColor)}:host([collapsed]) .ui5-panel-header{border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([fixed]):not([collapsed])) .ui5-panel-header{border-bottom:var(--_ui5-v2-4-0_panel_default_header_border)}[ui5-button].ui5-panel-header-button{display:flex;justify-content:center;align-items:center;min-width:initial;height:100%;width:100%}.ui5-panel-header-icon-wrapper{display:flex;justify-content:center;align-items:center}.ui5-panel-header-icon-wrapper,.ui5-panel-header-icon-wrapper .ui5-panel-header-icon{color:inherit}.ui5-panel-header-icon-wrapper,[ui5-button].ui5-panel-header-button-with-icon [ui5-icon]{pointer-events:none}.ui5-panel-root{height:100%;display:flex;flex-direction:column}
`},dependencies:[X_,rf]}),Fn("toggle",{bubbles:!0})],$u),$u.define();var Yge=Object.defineProperty,Jge=Object.getOwnPropertyDescriptor,eN=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?Jge(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&Yge(t,n,f),f};let B2=class extends ft{constructor(){super(...arguments),this.isColumnMode=!0,this.precision=4}render(){return Ie`
      <ui5-panel id="layout" class="${this.isColumnMode?"ver-orientation":"hor-orientation"}">
        <div class="row">
          <div class="alignCenter">
            <ui5-button @click="${this._handleNewPathClicked}" title="${this.measurementTool.isEditModeActive||this.measurementTool.numPoints>0?"Reset current measurement":"Start new measurement"}">
              ${this.measurementTool.isEditModeActive||this.measurementTool.numPoints>0?"Reset":"New"}
            </ui5-button>
          </div>
          ${this.measurementTool.isEditModeActive||this.measurementTool.numPoints!==0?Ie`
            <div class="alignCenter">
              <ui5-button
                @click="${this._handleUpdateEditStateClicked}"
                title="${this.measurementTool.isEditModeActive?"Pause current measurement":"Continue current measurement"}"
              >
                ${this.measurementTool.isEditModeActive?"Stop":"Continue"}
              </ui5-button>
            </div>
            <div class="alignCenter">
              <ui5-button
                ?disabled="${this.measurementTool.numPoints===0}"
                @click="${()=>{this.measurementTool.saveMeasurement("csv")}}"
                title="Download as CSV"
              >Download CSV</ui5-button>
            </div>
            <div class="alignCenter">
              <ui5-button
                ?disabled="${this.measurementTool.numPoints===0}"
                @click="${()=>{this.measurementTool.saveMeasurement("json")}}"
                title="Download as JSON"
              >Download JSON</ui5-button>
            </div>
          `:lt}
        </div>
        ${this.measurementTool.numPoints>0||!this.measurementTool.isEditModeActive?lt:Ie`
          <div class="pt-1">Click on 2D/3D view to create a measurement point</div>
        `}
        ${this.measurementTool.numPoints===0?lt:Ie`
          <div>
            <ui5-checkbox text="Show distances" ?checked=${this.measurementTool.showMeasurementDistances} @change="${o=>{this.measurementTool.showMeasurementDistances=o.target.checked,this.requestUpdate()}}"></ui5-checkbox>
          </div>
          <table>
            <thead>
              <tr><th>#</th><th>x</th><th>y</th><th>z</th>${this.measurementTool.showMeasurementDistances?Ie`<th>&Delta;</th>`:lt}<th>label</th></tr>
            </thead>
            <tbody>
            ${this.measurementTool.measurementPoints.map((o,t)=>Ie`
              <tr>
                <td>${t}</td>
                <td>${o.positionInModelCoor.x.toFixed(this.precision)}</td>
                <td>${o.positionInModelCoor.y.toFixed(this.precision)}</td>
                <td>${o.positionInModelCoor.z.toFixed(this.precision)}</td>
                ${this.measurementTool.showMeasurementDistances?Ie`
                  <td>${t>0?this.measurementTool.measurementDistances[t-1].distance.toFixed(this.precision):""}</td>
                `:lt}
                <td><input .value="${o.label}" @change="${n=>{o.label=n.target.value}}"></td>
              </tr>
            `)}
            ${!this.measurementTool.showMeasurementDistances||this.measurementTool.numPoints<2?lt:Ie`
              <tr><td colspan="4"></td><td class="sum">${this.measurementTool.measuredLength.toFixed(5)}</td><td></td></tr>
            `}
            </tbody>
          </table>
        `}
      </ui5-panel>
    `}firstUpdated(){this.measurementTool.on("update-requested",()=>this.requestUpdate()),this.measurementTool.on("hotspot-added",()=>this.requestUpdate())}updated(o){super.updated(o)}_handleNewPathClicked(){this.measurementTool.isEditModeActive=this.measurementTool.measurementPoints.length===0,this.measurementTool.resetPoints(),this.requestUpdate()}_handleUpdateEditStateClicked(){this.measurementTool.isEditModeActive=!this.measurementTool.isEditModeActive,this.requestUpdate()}};B2.styles=A`
    :host {
      min-width: 15em;
      height: 100%;
      width: 100%;
    }

    #layout.ver-orientation {
      flex-direction: column;
      width: 100%;
    }

    #layout.hor-orientation {
      flex-direction: row;
      height: 100%;
    }

    #layout {
      position: relative;
      min-width: 15em;
      display: flex;
      align-items: stretch;
      flex-direction: column;
      gap: 1rem;
    }

    .row {
      display: flex;
      flex: 1;
      flex-direction: row;
      gap: 1rem;
      justify-content: space-between;
      width: 100%;
    }

    .pt-1 { padding-top: 10px; }

    .alignCenter {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    ui5-button {
      padding: 0.25rem;
    }

    ui5-label {
      --sapFontSize: 15;
    }

    td { padding: 1px 8px; text-align: right; }
    td.sum { position: relative; }
    td.sum:before { content: '\\03a3'; left: -10px; position: absolute; }
  `,eN([$t({type:Boolean})],B2.prototype,"isColumnMode",2),eN([$t({type:Object})],B2.prototype,"measurementTool",2),B2=eN([Gt("measurement-tool")],B2);var b3=function(o,t){return(b3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,c){n.__proto__=c}||function(n,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(n[h]=c[h])})(o,t)};function pg(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=o}b3(o,t),o.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var tN=function(){return tN=Object.assign||function(o){for(var t,n=1,c=arguments.length;n<c;n++)for(var h in t=arguments[n])Object.prototype.hasOwnProperty.call(t,h)&&(o[h]=t[h]);return o},tN.apply(this,arguments)};function Id(o,t,n,c){return new(n||(n=Promise))(function(h,f){function d(w){try{v(c.next(w))}catch(S){f(S)}}function p(w){try{v(c.throw(w))}catch(S){f(S)}}function v(w){var S;w.done?h(w.value):(S=w.value,S instanceof n?S:new n(function(B){B(S)})).then(d,p)}v((c=c.apply(o,[])).next())})}function kh(o,t){var n,c,h,f,d={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(v){return function(w){return function(S){if(n)throw new TypeError("Generator is already executing.");for(;d;)try{if(n=1,c&&(h=2&S[0]?c.return:S[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,S[1])).done)return h;switch(c=0,h&&(S=[2&S[0],h.value]),S[0]){case 0:case 1:h=S;break;case 4:return d.label++,{value:S[1],done:!1};case 5:d.label++,c=S[1],S=[0];continue;case 7:S=d.ops.pop(),d.trys.pop();continue;default:if(!((h=(h=d.trys).length>0&&h[h.length-1])||S[0]!==6&&S[0]!==2)){d=0;continue}if(S[0]===3&&(!h||S[1]>h[0]&&S[1]<h[3])){d.label=S[1];break}if(S[0]===6&&d.label<h[1]){d.label=h[1],h=S;break}if(h&&d.label<h[2]){d.label=h[2],d.ops.push(S);break}h[2]&&d.ops.pop(),d.trys.pop();continue}S=t.call(o,d)}catch(B){S=[6,B],c=0}finally{n=h=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([v,w])}}}function yR(o,t,n){if(arguments.length===2)for(var c,h=0,f=t.length;h<f;h++)!c&&h in t||(c||(c=Array.prototype.slice.call(t,0,h)),c[h]=t[h]);return o.concat(c||t)}for(var rv=function(){function o(t,n,c,h){this.left=t,this.top=n,this.width=c,this.height=h}return o.prototype.add=function(t,n,c,h){return new o(this.left+t,this.top+n,this.width+c,this.height+h)},o.fromClientRect=function(t,n){return new o(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},o.fromDOMRectList=function(t,n){var c=Array.from(n).find(function(h){return h.width!==0});return c?new o(c.left+t.windowBounds.left,c.top+t.windowBounds.top,c.width,c.height):o.EMPTY},o.EMPTY=new o(0,0,0,0),o}(),bR=function(o,t){return rv.fromClientRect(o,t.getBoundingClientRect())},wR=function(o){for(var t=[],n=0,c=o.length;n<c;){var h=o.charCodeAt(n++);if(h>=55296&&h<=56319&&n<c){var f=o.charCodeAt(n++);(64512&f)==56320?t.push(((1023&h)<<10)+(1023&f)+65536):(t.push(h),n--)}else t.push(h)}return t},Rl=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var n=o.length;if(!n)return"";for(var c=[],h=-1,f="";++h<n;){var d=o[h];d<=65535?c.push(d):(d-=65536,c.push(55296+(d>>10),d%1024+56320)),(h+1===n||c.length>16384)&&(f+=String.fromCharCode.apply(String,c),c.length=0)}return f},Zge=typeof Uint8Array>"u"?[]:new Uint8Array(256),xR=0;xR<64;xR++)Zge["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(xR)]=xR;for(var I2=typeof Uint8Array>"u"?[]:new Uint8Array(256),CR=0;CR<64;CR++)I2["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(CR)]=CR;for(var w3=function(o,t,n){return o.slice?o.slice(t,n):new Uint16Array(Array.prototype.slice.call(o,t,n))},eme=function(){function o(t,n,c,h,f,d){this.initialValue=t,this.errorValue=n,this.highStart=c,this.highValueIndex=h,this.index=f,this.data=d}return o.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=((n=this.index[t>>5])<<2)+(31&t),this.data[n];if(t<=65535)return n=((n=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[n];if(t<this.highStart)return n=2080+(t>>11),n=this.index[n],n+=t>>5&63,n=((n=this.index[n])<<2)+(31&t),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),tme=typeof Uint8Array>"u"?[]:new Uint8Array(256),ER=0;ER<64;ER++)tme["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ER)]=ER;var cy=10,iN=13,T2=15,SR=17,M2=18,ime=19,x3=20,nN=21,R2=22,kC=24,sp=25,D2=26,F2=27,LC=28,PC=30,BR=32,IR=33,rN=34,sN=35,U2=37,oN=38,TR=39,MR=40,C3=42,nme=[9001,65288],us="",RR="",aN=function(){var o,t,n,c=function(v){var w,S,B,R,D,O=39666,V=0;v[52887]==="="&&(O--,v[52886]==="="&&O--);var $=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&Uint8Array.prototype.slice!==void 0?new ArrayBuffer(O):new Array(O),G=Array.isArray($)?$:new Uint8Array($);for(w=0;w<52888;w+=4)S=I2[v.charCodeAt(w)],B=I2[v.charCodeAt(w+1)],R=I2[v.charCodeAt(w+2)],D=I2[v.charCodeAt(w+3)],G[V++]=S<<2|B>>4,G[V++]=(15&B)<<4|R>>2,G[V++]=(3&R)<<6|63&D;return $}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),h=Array.isArray(c)?function(v){for(var w=v.length,S=[],B=0;B<w;B+=4)S.push(v[B+3]<<24|v[B+2]<<16|v[B+1]<<8|v[B]);return S}(c):new Uint32Array(c),f=Array.isArray(c)?function(v){for(var w=v.length,S=[],B=0;B<w;B+=2)S.push(v[B+1]<<8|v[B]);return S}(c):new Uint16Array(c),d=w3(f,12,h[4]/2),p=h[5]===2?w3(f,(24+h[4])/2):(o=h,t=Math.ceil((24+h[4])/4),o.slice?o.slice(t,n):new Uint32Array(Array.prototype.slice.call(o,t,n)));return new eme(h[0],h[1],h[2],h[3],d,p)}(),sv=[PC,36],lN=[1,2,3,5],E3=[cy,8],S3=[F2,D2],rme=lN.concat(E3),B3=[oN,TR,MR,rN,sN],sme=[T2,iN],cN=function(o,t,n,c){var h=c[n];if(Array.isArray(o)?o.indexOf(h)!==-1:o===h)for(var f=n;f<=c.length;){if((v=c[++f])===t)return!0;if(v!==cy)break}if(h===cy)for(f=n;f>0;){var d=c[--f];if(Array.isArray(o)?o.indexOf(d)!==-1:o===d)for(var p=n;p<=c.length;){var v;if((v=c[++p])===t)return!0;if(v!==cy)break}if(d!==cy)break}return!1},I3=function(o,t){for(var n=o;n>=0;){var c=t[n];if(c!==cy)return c;n--}return 0},ome=function(o,t,n,c,h){if(n[c]===0)return us;var f=c-1;if(Array.isArray(h)&&h[f]===!0)return us;var d=f-1,p=f+1,v=t[f],w=d>=0?t[d]:0,S=t[p];if(v===2&&S===3)return us;if(lN.indexOf(v)!==-1)return"!";if(lN.indexOf(S)!==-1||E3.indexOf(S)!==-1)return us;if(I3(f,t)===8)return RR;if(aN.get(o[f])===11||(v===BR||v===IR)&&aN.get(o[p])===11||v===7||S===7||v===9||[cy,iN,T2].indexOf(v)===-1&&S===9||[SR,M2,ime,kC,LC].indexOf(S)!==-1||I3(f,t)===R2||cN(23,R2,f,t)||cN([SR,M2],nN,f,t)||cN(12,12,f,t))return us;if(v===cy)return RR;if(v===23||S===23)return us;if(S===16||v===16)return RR;if([iN,T2,nN].indexOf(S)!==-1||v===14||w===36&&sme.indexOf(v)!==-1||v===LC&&S===36||S===x3||sv.indexOf(S)!==-1&&v===sp||sv.indexOf(v)!==-1&&S===sp||v===F2&&[U2,BR,IR].indexOf(S)!==-1||[U2,BR,IR].indexOf(v)!==-1&&S===D2||sv.indexOf(v)!==-1&&S3.indexOf(S)!==-1||S3.indexOf(v)!==-1&&sv.indexOf(S)!==-1||[F2,D2].indexOf(v)!==-1&&(S===sp||[R2,T2].indexOf(S)!==-1&&t[p+1]===sp)||[R2,T2].indexOf(v)!==-1&&S===sp||v===sp&&[sp,LC,kC].indexOf(S)!==-1)return us;if([sp,LC,kC,SR,M2].indexOf(S)!==-1)for(var B=f;B>=0;){if((R=t[B])===sp)return us;if([LC,kC].indexOf(R)===-1)break;B--}if([F2,D2].indexOf(S)!==-1)for(B=[SR,M2].indexOf(v)!==-1?d:f;B>=0;){var R;if((R=t[B])===sp)return us;if([LC,kC].indexOf(R)===-1)break;B--}if(oN===v&&[oN,TR,rN,sN].indexOf(S)!==-1||[TR,rN].indexOf(v)!==-1&&[TR,MR].indexOf(S)!==-1||[MR,sN].indexOf(v)!==-1&&S===MR||B3.indexOf(v)!==-1&&[x3,D2].indexOf(S)!==-1||B3.indexOf(S)!==-1&&v===F2||sv.indexOf(v)!==-1&&sv.indexOf(S)!==-1||v===kC&&sv.indexOf(S)!==-1||sv.concat(sp).indexOf(v)!==-1&&S===R2&&nme.indexOf(o[p])===-1||sv.concat(sp).indexOf(S)!==-1&&v===M2)return us;if(v===41&&S===41){for(var D=n[f],O=1;D>0&&t[--D]===41;)O++;if(O%2!=0)return us}return v===BR&&S===IR?us:RR},ame=function(){function o(t,n,c,h){this.codePoints=t,this.required=n==="!",this.start=c,this.end=h}return o.prototype.slice=function(){return Rl.apply(void 0,this.codePoints.slice(this.start,this.end))},o}(),xA=45,v1=43,Mm=-1,Td=function(o){return o>=48&&o<=57},OC=function(o){return Td(o)||o>=65&&o<=70||o>=97&&o<=102},DR=function(o){return o===10||o===9||o===32},FR=function(o){return(n=t=o)>=97&&n<=122||function(c){return c>=65&&c<=90}(t)||function(c){return c>=128}(o)||o===95;var t,n},T3=function(o){return FR(o)||Td(o)||o===xA},lme=function(o){return o>=0&&o<=8||o===11||o>=14&&o<=31||o===127},uy=function(o,t){return o===92&&t!==10},UR=function(o,t,n){return o===xA?FR(t)||uy(t,n):!!FR(o)||!(o!==92||!uy(o,t))},uN=function(o,t,n){return o===v1||o===xA?!!Td(t)||t===46&&Td(n):Td(o===46?t:o)},cme=function(o){var t=0,n=1;o[t]!==v1&&o[t]!==xA||(o[t]===xA&&(n=-1),t++);for(var c=[];Td(o[t]);)c.push(o[t++]);var h=c.length?parseInt(Rl.apply(void 0,c),10):0;o[t]===46&&t++;for(var f=[];Td(o[t]);)f.push(o[t++]);var d=f.length,p=d?parseInt(Rl.apply(void 0,f),10):0;o[t]!==69&&o[t]!==101||t++;var v=1;o[t]!==v1&&o[t]!==xA||(o[t]===xA&&(v=-1),t++);for(var w=[];Td(o[t]);)w.push(o[t++]);var S=w.length?parseInt(Rl.apply(void 0,w),10):0;return n*(h+p*Math.pow(10,-d))*Math.pow(10,v*S)},ume={type:2},hme={type:3},dme={type:4},Ame={type:13},pme={type:8},fme={type:21},gme={type:9},mme={type:10},_me={type:11},vme={type:12},yme={type:14},kR={type:23},bme={type:1},wme={type:25},xme={type:24},Cme={type:26},Eme={type:27},Sme={type:28},Bme={type:29},Ime={type:31},hN={type:32},M3=function(){function o(){this._value=[]}return o.prototype.write=function(t){this._value=this._value.concat(wR(t))},o.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==hN;)t.push(n),n=this.consumeToken();return t},o.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var n=this.peekCodePoint(0),c=this.peekCodePoint(1),h=this.peekCodePoint(2);if(T3(n)||uy(c,h)){var f=UR(n,c,h)?2:1;return{type:5,value:this.consumeName(),flags:f}}break;case 36:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),Ame;break;case 39:return this.consumeStringToken(39);case 40:return ume;case 41:return hme;case 42:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),yme;break;case v1:if(uN(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return dme;case xA:var d=t,p=this.peekCodePoint(0),v=this.peekCodePoint(1);if(uN(d,p,v))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(UR(d,p,v))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(p===xA&&v===62)return this.consumeCodePoint(),this.consumeCodePoint(),xme;break;case 46:if(uN(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(this.peekCodePoint(0)===42)for(this.consumeCodePoint();;){var w=this.consumeCodePoint();if(w===42&&(w=this.consumeCodePoint())===47)return this.consumeToken();if(w===Mm)return this.consumeToken()}break;case 58:return Cme;case 59:return Eme;case 60:if(this.peekCodePoint(0)===33&&this.peekCodePoint(1)===xA&&this.peekCodePoint(2)===xA)return this.consumeCodePoint(),this.consumeCodePoint(),wme;break;case 64:var S=this.peekCodePoint(0),B=this.peekCodePoint(1),R=this.peekCodePoint(2);if(UR(S,B,R))return{type:7,value:this.consumeName()};break;case 91:return Sme;case 92:if(uy(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return Bme;case 61:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),pme;break;case 123:return _me;case 125:return vme;case 117:case 85:var D=this.peekCodePoint(0),O=this.peekCodePoint(1);return D!==v1||!OC(O)&&O!==63||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),gme;if(this.peekCodePoint(0)===124)return this.consumeCodePoint(),fme;break;case 126:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),mme;break;case Mm:return hN}return DR(t)?(this.consumeWhiteSpace(),Ime):Td(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):FR(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Rl(t)}},o.prototype.consumeCodePoint=function(){var t=this._value.shift();return t===void 0?-1:t},o.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},o.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},o.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();OC(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var c=!1;n===63&&t.length<6;)t.push(n),n=this.consumeCodePoint(),c=!0;if(c)return{type:30,start:parseInt(Rl.apply(void 0,t.map(function(d){return d===63?48:d})),16),end:parseInt(Rl.apply(void 0,t.map(function(d){return d===63?70:d})),16)};var h=parseInt(Rl.apply(void 0,t),16);if(this.peekCodePoint(0)===xA&&OC(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var f=[];OC(n)&&f.length<6;)f.push(n),n=this.consumeCodePoint();return{type:30,start:h,end:parseInt(Rl.apply(void 0,f),16)}}return{type:30,start:h,end:h}},o.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===40?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===40?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},o.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Mm)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===39||n===34){var c=this.consumeStringToken(this.consumeCodePoint());return c.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Mm||this.peekCodePoint(0)===41)?(this.consumeCodePoint(),{type:22,value:c.value}):(this.consumeBadUrlRemnants(),kR)}for(;;){var h=this.consumeCodePoint();if(h===Mm||h===41)return{type:22,value:Rl.apply(void 0,t)};if(DR(h))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Mm||this.peekCodePoint(0)===41?(this.consumeCodePoint(),{type:22,value:Rl.apply(void 0,t)}):(this.consumeBadUrlRemnants(),kR);if(h===34||h===39||h===40||lme(h))return this.consumeBadUrlRemnants(),kR;if(h===92){if(!uy(h,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),kR;t.push(this.consumeEscapedCodePoint())}else t.push(h)}},o.prototype.consumeWhiteSpace=function(){for(;DR(this.peekCodePoint(0));)this.consumeCodePoint()},o.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===41||t===Mm)return;uy(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},o.prototype.consumeStringSlice=function(t){for(var n="";t>0;){var c=Math.min(5e4,t);n+=Rl.apply(void 0,this._value.splice(0,c)),t-=c}return this._value.shift(),n},o.prototype.consumeStringToken=function(t){for(var n="",c=0;;){var h=this._value[c];if(h===Mm||h===void 0||h===t)return{type:0,value:n+=this.consumeStringSlice(c)};if(h===10)return this._value.splice(0,c),bme;if(h===92){var f=this._value[c+1];f!==Mm&&f!==void 0&&(f===10?(n+=this.consumeStringSlice(c),c=-1,this._value.shift()):uy(h,f)&&(n+=this.consumeStringSlice(c),n+=Rl(this.consumeEscapedCodePoint()),c=-1))}c++}},o.prototype.consumeNumber=function(){var t=[],n=4,c=this.peekCodePoint(0);for(c!==v1&&c!==xA||t.push(this.consumeCodePoint());Td(this.peekCodePoint(0));)t.push(this.consumeCodePoint());c=this.peekCodePoint(0);var h=this.peekCodePoint(1);if(c===46&&Td(h))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=8;Td(this.peekCodePoint(0));)t.push(this.consumeCodePoint());c=this.peekCodePoint(0),h=this.peekCodePoint(1);var f=this.peekCodePoint(2);if((c===69||c===101)&&((h===v1||h===xA)&&Td(f)||Td(h)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=8;Td(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[cme(t),n]},o.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],c=t[1],h=this.peekCodePoint(0),f=this.peekCodePoint(1),d=this.peekCodePoint(2);return UR(h,f,d)?{type:15,number:n,flags:c,unit:this.consumeName()}:h===37?(this.consumeCodePoint(),{type:16,number:n,flags:c}):{type:17,number:n,flags:c}},o.prototype.consumeEscapedCodePoint=function(){var t,n=this.consumeCodePoint();if(OC(n)){for(var c=Rl(n);OC(this.peekCodePoint(0))&&c.length<6;)c+=Rl(this.consumeCodePoint());DR(this.peekCodePoint(0))&&this.consumeCodePoint();var h=parseInt(c,16);return h===0||(t=h)>=55296&&t<=57343||h>1114111?65533:h}return n===Mm?65533:n},o.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(T3(n))t+=Rl(n);else{if(!uy(n,this.peekCodePoint(0)))return this.reconsumeCodePoint(n),t;t+=Rl(this.consumeEscapedCodePoint())}}},o}(),R3=function(){function o(t){this._tokens=t}return o.create=function(t){var n=new M3;return n.write(t),new o(n.read())},o.parseValue=function(t){return o.create(t).parseComponentValue()},o.parseValues=function(t){return o.create(t).parseComponentValues()},o.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},o.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},o.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},o.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},c=this.consumeToken();;){if(c.type===32||Mme(c,t))return n;this.reconsumeToken(c),n.values.push(this.consumeComponentValue()),c=this.consumeToken()}},o.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var c=this.consumeToken();if(c.type===32||c.type===3)return n;this.reconsumeToken(c),n.values.push(this.consumeComponentValue())}},o.prototype.consumeToken=function(){var t=this._tokens.shift();return t===void 0?hN:t},o.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},o}(),k2=function(o){return o.type===15},QC=function(o){return o.type===17},bo=function(o){return o.type===20},Tme=function(o){return o.type===0},dN=function(o,t){return bo(o)&&o.value===t},D3=function(o){return o.type!==31},NC=function(o){return o.type!==31&&o.type!==4},Rm=function(o){var t=[],n=[];return o.forEach(function(c){if(c.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}c.type!==31&&n.push(c)}),n.length&&t.push(n),t},Mme=function(o,t){return t===11&&o.type===12||t===28&&o.type===29||t===2&&o.type===3},hy=function(o){return o.type===17||o.type===15},oc=function(o){return o.type===16||hy(o)},F3=function(o){return o.length>1?[o[0],o[1]]:[o[0]]},Wu={type:17,number:0,flags:4},AN={type:16,number:50,flags:4},dy={type:16,number:100,flags:4},L2=function(o,t,n){var c=o[0],h=o[1];return[Vo(c,t),Vo(h!==void 0?h:c,n)]},Vo=function(o,t){if(o.type===16)return o.number/100*t;if(k2(o))switch(o.unit){case"rem":case"em":return 16*o.number;default:return o.number}return o.number},U3="grad",k3="turn",LR=function(o,t){if(t.type===15)switch(t.unit){case"deg":return Math.PI*t.number/180;case U3:return Math.PI/200*t.number;case"rad":return t.number;case k3:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},L3=function(o){return o.type===15&&(o.unit==="deg"||o.unit===U3||o.unit==="rad"||o.unit===k3)},P3=function(o){switch(o.filter(bo).map(function(t){return t.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Wu,Wu];case"to top":case"bottom":return cf(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Wu,dy];case"to right":case"left":return cf(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[dy,dy];case"to bottom":case"top":return cf(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[dy,Wu];case"to left":case"right":return cf(270)}return 0},cf=function(o){return Math.PI*o/180},Ay=function(o,t){if(t.type===18){var n=Rme[t.name];if(n===void 0)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(o,t.values)}if(t.type===5){if(t.value.length===3){var c=t.value.substring(0,1),h=t.value.substring(1,2),f=t.value.substring(2,3);return fy(parseInt(c+c,16),parseInt(h+h,16),parseInt(f+f,16),1)}if(t.value.length===4){c=t.value.substring(0,1),h=t.value.substring(1,2),f=t.value.substring(2,3);var d=t.value.substring(3,4);return fy(parseInt(c+c,16),parseInt(h+h,16),parseInt(f+f,16),parseInt(d+d,16)/255)}if(t.value.length===6)return c=t.value.substring(0,2),h=t.value.substring(2,4),f=t.value.substring(4,6),fy(parseInt(c,16),parseInt(h,16),parseInt(f,16),1);if(t.value.length===8)return c=t.value.substring(0,2),h=t.value.substring(2,4),f=t.value.substring(4,6),d=t.value.substring(6,8),fy(parseInt(c,16),parseInt(h,16),parseInt(f,16),parseInt(d,16)/255)}if(t.type===20){var p=ov[t.value.toUpperCase()];if(p!==void 0)return p}return ov.TRANSPARENT},py=function(o){return!(255&o)},lu=function(o){var t=255&o,n=255&o>>8,c=255&o>>16,h=255&o>>24;return t<255?"rgba("+h+","+c+","+n+","+t/255+")":"rgb("+h+","+c+","+n+")"},fy=function(o,t,n,c){return(o<<24|t<<16|n<<8|Math.round(255*c))>>>0},O3=function(o,t){if(o.type===17)return o.number;if(o.type===16){var n=t===3?1:255;return t===3?o.number/100*n:Math.round(o.number/100*n)}return 0},Q3=function(o,t){var n=t.filter(NC);if(n.length===3){var c=n.map(O3),h=c[0],f=c[1],d=c[2];return fy(h,f,d,1)}if(n.length===4){var p=n.map(O3),v=(h=p[0],f=p[1],d=p[2],p[3]);return fy(h,f,d,v)}return 0};function pN(o,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-o)*n*6+o:n<.5?t:n<2/3?6*(t-o)*(2/3-n)+o:o}var HC,N3=function(o,t){var n=t.filter(NC),c=n[0],h=n[1],f=n[2],d=n[3],p=(c.type===17?cf(c.number):LR(0,c))/(2*Math.PI),v=oc(h)?h.number/100:0,w=oc(f)?f.number/100:0,S=d!==void 0&&oc(d)?Vo(d,1):1;if(v===0)return fy(255*w,255*w,255*w,1);var B=w<=.5?w*(v+1):w+v-w*v,R=2*w-B,D=pN(R,B,p+1/3),O=pN(R,B,p),V=pN(R,B,p-1/3);return fy(255*D,255*O,255*V,S)},Rme={hsl:N3,hsla:N3,rgb:Q3,rgba:Q3},P2=function(o,t){return Ay(o,R3.create(t).parseComponentValue())},ov={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Dme={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(o,t){return t.map(function(n){if(bo(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Fme={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},PR=function(o,t){var n=Ay(o,t[0]),c=t[1];return c&&oc(c)?{color:n,stop:c}:{color:n,stop:null}},H3=function(o,t){var n=o[0],c=o[o.length-1];n.stop===null&&(n.stop=Wu),c.stop===null&&(c.stop=dy);for(var h=[],f=0,d=0;d<o.length;d++){var p=o[d].stop;if(p!==null){var v=Vo(p,t);v>f?h.push(v):h.push(f),f=v}else h.push(null)}var w=null;for(d=0;d<h.length;d++){var S=h[d];if(S===null)w===null&&(w=d);else if(w!==null){for(var B=d-w,R=(S-h[w-1])/(B+1),D=1;D<=B;D++)h[w+D-1]=R*D;w=null}}return o.map(function(O,V){return{color:O.color,stop:Math.max(Math.min(1,h[V]/t),0)}})},fg=function(o,t){return Math.sqrt(o*o+t*t)},z3=function(o,t,n,c,h){return[[0,0],[0,t],[o,0],[o,t]].reduce(function(f,d){var p=d[0],v=d[1],w=fg(n-p,c-v);return(h?w<f.optimumDistance:w>f.optimumDistance)?{optimumCorner:d,optimumDistance:w}:f},{optimumDistance:h?1/0:-1/0,optimumCorner:null}).optimumCorner},OR=function(o,t){var n=cf(180),c=[];return Rm(t).forEach(function(h,f){if(f===0){var d=h[0];if(d.type===20&&["top","left","right","bottom"].indexOf(d.value)!==-1)return void(n=P3(h));if(L3(d))return void(n=(LR(0,d)+cf(270))%cf(360))}var p=PR(o,h);c.push(p)}),{angle:n,stops:c,type:1}},G3="closest-side",V3="farthest-side",q3="closest-corner",$3="farthest-corner",W3="circle",j3="ellipse",K3="cover",X3="contain",QR=function(o,t){var n=0,c=3,h=[],f=[];return Rm(t).forEach(function(d,p){var v=!0;if(p===0?v=d.reduce(function(S,B){if(bo(B))switch(B.value){case"center":return f.push(AN),!1;case"top":case"left":return f.push(Wu),!1;case"right":case"bottom":return f.push(dy),!1}else if(oc(B)||hy(B))return f.push(B),!1;return S},v):p===1&&(v=d.reduce(function(S,B){if(bo(B))switch(B.value){case W3:return n=0,!1;case j3:return n=1,!1;case X3:case G3:return c=0,!1;case V3:return c=1,!1;case q3:return c=2,!1;case K3:case $3:return c=3,!1}else if(hy(B)||oc(B))return Array.isArray(c)||(c=[]),c.push(B),!1;return S},v)),v){var w=PR(o,d);h.push(w)}}),{size:c,shape:n,stops:h,position:f,type:2}},fN=function(o,t){if(t.type===22){var n={url:t.value,type:0};return o.cache.addImage(t.value),n}if(t.type===18){var c=Y3[t.name];if(c===void 0)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return c(o,t.values)}throw new Error("Unsupported image type "+t.type)},Y3={"linear-gradient":function(o,t){var n=cf(180),c=[];return Rm(t).forEach(function(h,f){if(f===0){var d=h[0];if(d.type===20&&d.value==="to")return void(n=P3(h));if(L3(d))return void(n=LR(0,d))}var p=PR(o,h);c.push(p)}),{angle:n,stops:c,type:1}},"-moz-linear-gradient":OR,"-ms-linear-gradient":OR,"-o-linear-gradient":OR,"-webkit-linear-gradient":OR,"radial-gradient":function(o,t){var n=0,c=3,h=[],f=[];return Rm(t).forEach(function(d,p){var v=!0;if(p===0){var w=!1;v=d.reduce(function(B,R){if(w)if(bo(R))switch(R.value){case"center":return f.push(AN),B;case"top":case"left":return f.push(Wu),B;case"right":case"bottom":return f.push(dy),B}else(oc(R)||hy(R))&&f.push(R);else if(bo(R))switch(R.value){case W3:return n=0,!1;case j3:return n=1,!1;case"at":return w=!0,!1;case G3:return c=0,!1;case K3:case V3:return c=1,!1;case X3:case q3:return c=2,!1;case $3:return c=3,!1}else if(hy(R)||oc(R))return Array.isArray(c)||(c=[]),c.push(R),!1;return B},v)}if(v){var S=PR(o,d);h.push(S)}}),{size:c,shape:n,stops:h,position:f,type:2}},"-moz-radial-gradient":QR,"-ms-radial-gradient":QR,"-o-radial-gradient":QR,"-webkit-radial-gradient":QR,"-webkit-gradient":function(o,t){var n=cf(180),c=[],h=1;return Rm(t).forEach(function(f,d){var p=f[0];if(d===0){if(bo(p)&&p.value==="linear")return void(h=1);if(bo(p)&&p.value==="radial")return void(h=2)}if(p.type===18){if(p.name==="from"){var v=Ay(o,p.values[0]);c.push({stop:Wu,color:v})}else if(p.name==="to")v=Ay(o,p.values[0]),c.push({stop:dy,color:v});else if(p.name==="color-stop"){var w=p.values.filter(NC);if(w.length===2){v=Ay(o,w[1]);var S=w[0];QC(S)&&c.push({stop:{type:16,number:100*S.number,flags:S.flags},color:v})}}}}),h===1?{angle:(n+cf(180))%cf(360),stops:c,type:h}:{size:3,shape:0,stops:c,position:[],type:h}}},Ume={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(o,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(c){return NC(c)&&!((h=c).type===20&&h.value==="none"||h.type===18&&!Y3[h.name]);var h}).map(function(c){return fN(o,c)})}},kme={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(o,t){return t.map(function(n){if(bo(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Lme={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(o,t){return Rm(t).map(function(n){return n.filter(oc)}).map(F3)}},Pme={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(o,t){return Rm(t).map(function(n){return n.filter(bo).map(function(c){return c.value}).join(" ")}).map(Ome)}},Ome=function(o){switch(o){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(function(o){o.AUTO="auto",o.CONTAIN="contain",o.COVER="cover"})(HC||(HC={}));var NR,Qme={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(o,t){return Rm(t).map(function(n){return n.filter(Nme)})}},Nme=function(o){return bo(o)||oc(o)},HR=function(o){return{name:"border-"+o+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Hme=HR("top"),zme=HR("right"),Gme=HR("bottom"),Vme=HR("left"),zR=function(o){return{name:"border-radius-"+o,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return F3(n.filter(oc))}}},qme=zR("top-left"),$me=zR("top-right"),Wme=zR("bottom-right"),jme=zR("bottom-left"),GR=function(o){return{name:"border-"+o+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Kme=GR("top"),Xme=GR("right"),Yme=GR("bottom"),Jme=GR("left"),VR=function(o){return{name:"border-"+o+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return k2(n)?n.number:0}}},Zme=VR("top"),e_e=VR("right"),t_e=VR("bottom"),i_e=VR("left"),n_e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},r_e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(o,t){return t==="rtl"?1:0}},s_e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(o,t){return t.filter(bo).reduce(function(n,c){return n|o_e(c.value)},0)}},o_e=function(o){switch(o){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},a_e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(o,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},l_e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(o,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}};(function(o){o.NORMAL="normal",o.STRICT="strict"})(NR||(NR={}));var O2,c_e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,t){return t==="strict"?NR.STRICT:NR.NORMAL}},u_e={name:"line-height",initialValue:"normal",prefix:!1,type:4},J3=function(o,t){return bo(o)&&o.value==="normal"?1.2*t:o.type===17?t*o.number:oc(o)?Vo(o,t):t},h_e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(o,t){return t.type===20&&t.value==="none"?null:fN(o,t)}},d_e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(o,t){return t==="inside"?0:1}},gN={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(o,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},qR=function(o){return{name:"margin-"+o,initialValue:"0",prefix:!1,type:4}},A_e=qR("top"),p_e=qR("right"),f_e=qR("bottom"),g_e=qR("left"),m_e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(o,t){return t.filter(bo).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},__e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(o,t){return t==="break-word"?"break-word":"normal"}},$R=function(o){return{name:"padding-"+o,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},v_e=$R("top"),y_e=$R("right"),b_e=$R("bottom"),w_e=$R("left"),x_e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(o,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},C_e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(o,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},E_e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,t){return t.length===1&&dN(t[0],"none")?[]:Rm(t).map(function(n){for(var c={color:ov.TRANSPARENT,offsetX:Wu,offsetY:Wu,blur:Wu},h=0,f=0;f<n.length;f++){var d=n[f];hy(d)?(h===0?c.offsetX=d:h===1?c.offsetY=d:c.blur=d,h++):c.color=Ay(o,d)}return c})}},S_e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(o,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},B_e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(o,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=I_e[t.name];if(n===void 0)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},I_e={matrix:function(o){var t=o.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},matrix3d:function(o){var t=o.filter(function(v){return v.type===17}).map(function(v){return v.number}),n=t[0],c=t[1];t[2],t[3];var h=t[4],f=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var d=t[12],p=t[13];return t[14],t[15],t.length===16?[n,c,h,f,d,p]:null}},Z3={type:16,number:50,flags:4},T_e=[Z3,Z3],M_e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(o,t){var n=t.filter(oc);return n.length!==2?T_e:[n[0],n[1]]}},R_e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(o,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(function(o){o.NORMAL="normal",o.BREAK_ALL="break-all",o.KEEP_ALL="keep-all"})(O2||(O2={}));for(var D_e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,t){switch(t){case"break-all":return O2.BREAK_ALL;case"keep-all":return O2.KEEP_ALL;default:return O2.NORMAL}}},F_e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(o,t){if(t.type===20)return{auto:!0,order:0};if(QC(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},ej=function(o,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")},U_e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(o,t){return QC(t)?t.number:1}},k_e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},L_e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(o,t){return t.filter(bo).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},P_e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(o,t){var n=[],c=[];return t.forEach(function(h){switch(h.type){case 20:case 0:n.push(h.value);break;case 17:n.push(h.number.toString());break;case 4:c.push(n.join(" ")),n.length=0}}),n.length&&c.push(n.join(" ")),c.map(function(h){return h.indexOf(" ")===-1?h:"'"+h+"'"})}},O_e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Q_e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(o,t){return QC(t)?t.number:bo(t)&&t.value==="bold"?700:400}},N_e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(o,t){return t.filter(bo).map(function(n){return n.value})}},H_e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(o,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},kc=function(o,t){return!!(o&t)},z_e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(o,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},G_e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(o,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var c=[],h=t.filter(D3),f=0;f<h.length;f++){var d=h[f],p=h[f+1];if(d.type===20){var v=p&&QC(p)?p.number:1;c.push({counter:d.value,increment:v})}}return c}},V_e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(o,t){if(t.length===0)return[];for(var n=[],c=t.filter(D3),h=0;h<c.length;h++){var f=c[h],d=c[h+1];if(bo(f)&&f.value!=="none"){var p=d&&QC(d)?d.number:0;n.push({counter:f.value,reset:p})}}return n}},q_e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(o,t){return t.filter(k2).map(function(n){return ej(0,n)})}},$_e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(o,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var c=[],h=t.filter(Tme);if(h.length%2!=0)return null;for(var f=0;f<h.length;f+=2){var d=h[f].value,p=h[f+1].value;c.push({open:d,close:p})}return c}},tj=function(o,t,n){if(!o)return"";var c=o[Math.min(t,o.length-1)];return c?n?c.open:c.close:""},W_e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,t){return t.length===1&&dN(t[0],"none")?[]:Rm(t).map(function(n){for(var c={color:255,offsetX:Wu,offsetY:Wu,blur:Wu,spread:Wu,inset:!1},h=0,f=0;f<n.length;f++){var d=n[f];dN(d,"inset")?c.inset=!0:hy(d)?(h===0?c.offsetX=d:h===1?c.offsetY=d:h===2?c.blur=d:c.spread=d,h++):c.color=Ay(o,d)}return c})}},j_e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(o,t){var n=[];return t.filter(bo).forEach(function(c){switch(c.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}}),[0,1,2].forEach(function(c){n.indexOf(c)===-1&&n.push(c)}),n}},K_e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},X_e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(o,t){return k2(t)?t.number:0}},Y_e=function(){function o(t,n){var c,h;this.animationDuration=on(t,q_e,n.animationDuration),this.backgroundClip=on(t,Dme,n.backgroundClip),this.backgroundColor=on(t,Fme,n.backgroundColor),this.backgroundImage=on(t,Ume,n.backgroundImage),this.backgroundOrigin=on(t,kme,n.backgroundOrigin),this.backgroundPosition=on(t,Lme,n.backgroundPosition),this.backgroundRepeat=on(t,Pme,n.backgroundRepeat),this.backgroundSize=on(t,Qme,n.backgroundSize),this.borderTopColor=on(t,Hme,n.borderTopColor),this.borderRightColor=on(t,zme,n.borderRightColor),this.borderBottomColor=on(t,Gme,n.borderBottomColor),this.borderLeftColor=on(t,Vme,n.borderLeftColor),this.borderTopLeftRadius=on(t,qme,n.borderTopLeftRadius),this.borderTopRightRadius=on(t,$me,n.borderTopRightRadius),this.borderBottomRightRadius=on(t,Wme,n.borderBottomRightRadius),this.borderBottomLeftRadius=on(t,jme,n.borderBottomLeftRadius),this.borderTopStyle=on(t,Kme,n.borderTopStyle),this.borderRightStyle=on(t,Xme,n.borderRightStyle),this.borderBottomStyle=on(t,Yme,n.borderBottomStyle),this.borderLeftStyle=on(t,Jme,n.borderLeftStyle),this.borderTopWidth=on(t,Zme,n.borderTopWidth),this.borderRightWidth=on(t,e_e,n.borderRightWidth),this.borderBottomWidth=on(t,t_e,n.borderBottomWidth),this.borderLeftWidth=on(t,i_e,n.borderLeftWidth),this.boxShadow=on(t,W_e,n.boxShadow),this.color=on(t,n_e,n.color),this.direction=on(t,r_e,n.direction),this.display=on(t,s_e,n.display),this.float=on(t,a_e,n.cssFloat),this.fontFamily=on(t,P_e,n.fontFamily),this.fontSize=on(t,O_e,n.fontSize),this.fontStyle=on(t,H_e,n.fontStyle),this.fontVariant=on(t,N_e,n.fontVariant),this.fontWeight=on(t,Q_e,n.fontWeight),this.letterSpacing=on(t,l_e,n.letterSpacing),this.lineBreak=on(t,c_e,n.lineBreak),this.lineHeight=on(t,u_e,n.lineHeight),this.listStyleImage=on(t,h_e,n.listStyleImage),this.listStylePosition=on(t,d_e,n.listStylePosition),this.listStyleType=on(t,gN,n.listStyleType),this.marginTop=on(t,A_e,n.marginTop),this.marginRight=on(t,p_e,n.marginRight),this.marginBottom=on(t,f_e,n.marginBottom),this.marginLeft=on(t,g_e,n.marginLeft),this.opacity=on(t,U_e,n.opacity);var f=on(t,m_e,n.overflow);this.overflowX=f[0],this.overflowY=f[f.length>1?1:0],this.overflowWrap=on(t,__e,n.overflowWrap),this.paddingTop=on(t,v_e,n.paddingTop),this.paddingRight=on(t,y_e,n.paddingRight),this.paddingBottom=on(t,b_e,n.paddingBottom),this.paddingLeft=on(t,w_e,n.paddingLeft),this.paintOrder=on(t,j_e,n.paintOrder),this.position=on(t,C_e,n.position),this.textAlign=on(t,x_e,n.textAlign),this.textDecorationColor=on(t,k_e,(c=n.textDecorationColor)!==null&&c!==void 0?c:n.color),this.textDecorationLine=on(t,L_e,(h=n.textDecorationLine)!==null&&h!==void 0?h:n.textDecoration),this.textShadow=on(t,E_e,n.textShadow),this.textTransform=on(t,S_e,n.textTransform),this.transform=on(t,B_e,n.transform),this.transformOrigin=on(t,M_e,n.transformOrigin),this.visibility=on(t,R_e,n.visibility),this.webkitTextStrokeColor=on(t,K_e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=on(t,X_e,n.webkitTextStrokeWidth),this.wordBreak=on(t,D_e,n.wordBreak),this.zIndex=on(t,F_e,n.zIndex)}return o.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},o.prototype.isTransparent=function(){return py(this.backgroundColor)},o.prototype.isTransformed=function(){return this.transform!==null},o.prototype.isPositioned=function(){return this.position!==0},o.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},o.prototype.isFloating=function(){return this.float!==0},o.prototype.isInlineLevel=function(){return kc(this.display,4)||kc(this.display,33554432)||kc(this.display,268435456)||kc(this.display,536870912)||kc(this.display,67108864)||kc(this.display,134217728)},o}(),J_e=function(o,t){this.content=on(o,z_e,t.content),this.quotes=on(o,$_e,t.quotes)},ij=function(o,t){this.counterIncrement=on(o,G_e,t.counterIncrement),this.counterReset=on(o,V_e,t.counterReset)},on=function(o,t,n){var c=new M3,h=n!=null?n.toString():t.initialValue;c.write(h);var f=new R3(c.read());switch(t.type){case 2:var d=f.parseComponentValue();return t.parse(o,bo(d)?d.value:t.initialValue);case 0:return t.parse(o,f.parseComponentValue());case 1:return t.parse(o,f.parseComponentValues());case 4:return f.parseComponentValue();case 3:switch(t.format){case"angle":return LR(0,f.parseComponentValue());case"color":return Ay(o,f.parseComponentValue());case"image":return fN(o,f.parseComponentValue());case"length":var p=f.parseComponentValue();return hy(p)?p:Wu;case"length-percentage":var v=f.parseComponentValue();return oc(v)?v:Wu;case"time":return ej(0,f.parseComponentValue())}}},mN=function(o,t){var n=function(c){switch(c.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(o);return n===1||t===n},Dm=function(o,t){this.context=o,this.textNodes=[],this.elements=[],this.flags=0,mN(t,3),this.styles=new Y_e(o,window.getComputedStyle(t,null)),xN(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=bR(this.context,t),mN(t,4)&&(this.flags|=16)},Q2=typeof Uint8Array>"u"?[]:new Uint8Array(256),WR=0;WR<64;WR++)Q2["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(WR)]=WR;for(var nj=function(o,t,n){return o.slice?o.slice(t,n):new Uint16Array(Array.prototype.slice.call(o,t,n))},Z_e=function(){function o(t,n,c,h,f,d){this.initialValue=t,this.errorValue=n,this.highStart=c,this.highValueIndex=h,this.index=f,this.data=d}return o.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=((n=this.index[t>>5])<<2)+(31&t),this.data[n];if(t<=65535)return n=((n=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[n];if(t<this.highStart)return n=2080+(t>>11),n=this.index[n],n+=t>>5&63,n=((n=this.index[n])<<2)+(31&t),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),eve=typeof Uint8Array>"u"?[]:new Uint8Array(256),jR=0;jR<64;jR++)eve["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(jR)]=jR;var N2,rj=8,_N=9,sj=11,oj=12,tve=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var n=o.length;if(!n)return"";for(var c=[],h=-1,f="";++h<n;){var d=o[h];d<=65535?c.push(d):(d-=65536,c.push(55296+(d>>10),d%1024+56320)),(h+1===n||c.length>16384)&&(f+=String.fromCharCode.apply(String,c),c.length=0)}return f},ive=function(){var o,t,n,c=function(v){var w,S,B,R,D,O=19617,V=0;v[26155]==="="&&(O--,v[26154]==="="&&O--);var $=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&Uint8Array.prototype.slice!==void 0?new ArrayBuffer(O):new Array(O),G=Array.isArray($)?$:new Uint8Array($);for(w=0;w<26156;w+=4)S=Q2[v.charCodeAt(w)],B=Q2[v.charCodeAt(w+1)],R=Q2[v.charCodeAt(w+2)],D=Q2[v.charCodeAt(w+3)],G[V++]=S<<2|B>>4,G[V++]=(15&B)<<4|R>>2,G[V++]=(3&R)<<6|63&D;return $}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),h=Array.isArray(c)?function(v){for(var w=v.length,S=[],B=0;B<w;B+=4)S.push(v[B+3]<<24|v[B+2]<<16|v[B+1]<<8|v[B]);return S}(c):new Uint32Array(c),f=Array.isArray(c)?function(v){for(var w=v.length,S=[],B=0;B<w;B+=2)S.push(v[B+1]<<8|v[B]);return S}(c):new Uint16Array(c),d=nj(f,12,h[4]/2),p=h[5]===2?nj(f,(24+h[4])/2):(o=h,t=Math.ceil((24+h[4])/4),o.slice?o.slice(t,n):new Uint32Array(Array.prototype.slice.call(o,t,n)));return new Z_e(h[0],h[1],h[2],h[3],d,p)}(),uf="",nve=function(o){return ive.get(o)},rve=function(o,t,n){var c=n-2,h=t[c],f=t[n-1],d=t[n];if(f===2&&d===3)return uf;if(f===2||f===3||f===4||d===2||d===3||d===4)return"";if(f===rj&&[rj,_N,sj,oj].indexOf(d)!==-1||!(f!==sj&&f!==_N||d!==_N&&d!==10)||(f===oj||f===10)&&d===10||d===13||d===5||d===7||f===1)return uf;if(f===13&&d===14){for(;h===5;)h=t[--c];if(h===14)return uf}if(f===15&&d===15){for(var p=0;h===15;)p++,h=t[--c];if(p%2==0)return uf}return""},sve=function(o){var t=function(d){for(var p=[],v=0,w=d.length;v<w;){var S=d.charCodeAt(v++);if(S>=55296&&S<=56319&&v<w){var B=d.charCodeAt(v++);(64512&B)==56320?p.push(((1023&S)<<10)+(1023&B)+65536):(p.push(S),v--)}else p.push(S)}return p}(o),n=t.length,c=0,h=0,f=t.map(nve);return{next:function(){if(c>=n)return{done:!0,value:null};for(var d=uf;c<n&&(d=rve(0,f,++c))===uf;);if(d!==uf||c===n){var p=tve.apply(null,t.slice(h,c));return h=c,{value:p,done:!1}}return{done:!0,value:null}}}},aj=function(o){return o[0]===0&&o[1]===255&&o[2]===0&&o[3]===255},vN=function(o,t,n,c,h){var f="http://www.w3.org/2000/svg",d=document.createElementNS(f,"svg"),p=document.createElementNS(f,"foreignObject");return d.setAttributeNS(null,"width",o.toString()),d.setAttributeNS(null,"height",t.toString()),p.setAttributeNS(null,"width","100%"),p.setAttributeNS(null,"height","100%"),p.setAttributeNS(null,"x",n.toString()),p.setAttributeNS(null,"y",c.toString()),p.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(p),p.appendChild(h),d},lj=function(o){return new Promise(function(t,n){var c=new Image;c.onload=function(){return t(c)},c.onerror=n,c.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(o))})},ju={get SUPPORT_RANGE_BOUNDS(){var o=function(t){if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var c=t.createElement("boundtest");c.style.height="123px",c.style.display="block",t.body.appendChild(c),n.selectNode(c);var h=n.getBoundingClientRect(),f=Math.round(h.height);if(t.body.removeChild(c),f===123)return!0}}return!1}(document);return Object.defineProperty(ju,"SUPPORT_RANGE_BOUNDS",{value:o}),o},get SUPPORT_WORD_BREAKING(){var o=ju.SUPPORT_RANGE_BOUNDS&&function(t){var n=t.createElement("boundtest");n.style.width="50px",n.style.display="block",n.style.fontSize="12px",n.style.letterSpacing="0px",n.style.wordSpacing="0px",t.body.appendChild(n);var c=t.createRange();n.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var h=n.firstChild,f=wR(h.data).map(function(w){return Rl(w)}),d=0,p={},v=f.every(function(w,S){c.setStart(h,d),c.setEnd(h,d+w.length);var B=c.getBoundingClientRect();d+=w.length;var R=B.x>p.x||B.y>p.y;return p=B,S===0||R});return t.body.removeChild(n),v}(document);return Object.defineProperty(ju,"SUPPORT_WORD_BREAKING",{value:o}),o},get SUPPORT_SVG_DRAWING(){var o=function(t){var n=new Image,c=t.createElement("canvas"),h=c.getContext("2d");if(!h)return!1;n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{h.drawImage(n,0,0),c.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(ju,"SUPPORT_SVG_DRAWING",{value:o}),o},get SUPPORT_FOREIGNOBJECT_DRAWING(){var o=typeof Array.from=="function"&&typeof window.fetch=="function"?function(t){var n=t.createElement("canvas"),c=100;n.width=c,n.height=c;var h=n.getContext("2d");if(!h)return Promise.reject(!1);h.fillStyle="rgb(0, 255, 0)",h.fillRect(0,0,c,c);var f=new Image,d=n.toDataURL();f.src=d;var p=vN(c,c,0,0,f);return h.fillStyle="red",h.fillRect(0,0,c,c),lj(p).then(function(v){h.drawImage(v,0,0);var w=h.getImageData(0,0,c,c).data;h.fillStyle="red",h.fillRect(0,0,c,c);var S=t.createElement("div");return S.style.backgroundImage="url("+d+")",S.style.height=c+"px",aj(w)?lj(vN(c,c,0,0,S)):Promise.reject(!1)}).then(function(v){return h.drawImage(v,0,0),aj(h.getImageData(0,0,c,c).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(ju,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:o}),o},get SUPPORT_CORS_IMAGES(){var o=new Image().crossOrigin!==void 0;return Object.defineProperty(ju,"SUPPORT_CORS_IMAGES",{value:o}),o},get SUPPORT_RESPONSE_TYPE(){var o=typeof new XMLHttpRequest().responseType=="string";return Object.defineProperty(ju,"SUPPORT_RESPONSE_TYPE",{value:o}),o},get SUPPORT_CORS_XHR(){var o="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ju,"SUPPORT_CORS_XHR",{value:o}),o},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var o=!(typeof Intl>"u"||!Intl.Segmenter);return Object.defineProperty(ju,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:o}),o}},H2=function(o,t){this.text=o,this.bounds=t},cj=function(o,t,n){var c=o.ownerDocument;if(!c)throw new Error("Node has no owner document");var h=c.createRange();return h.setStart(o,t),h.setEnd(o,t+n),h},yN=function(o){if(ju.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(o)).map(function(n){return n.segment})}return function(n){for(var c,h=sve(n),f=[];!(c=h.next()).done;)c.value&&f.push(c.value.slice());return f}(o)},ove=[32,160,4961,65792,65793,4153,4241],ave=function(o,t,n){var c,h,f,d,p,v,w;this.text=lve(t.data,n.textTransform),this.textBounds=(c=o,h=this.text,d=t,p=function(S,B){return B.letterSpacing!==0?yN(S):function(R,D){if(ju.SUPPORT_NATIVE_TEXT_SEGMENTATION){var O=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(O.segment(R)).map(function(V){return V.segment})}return function(V,$){for(var G,X=function(oe,Ae){var ve=wR(oe),De=function(mt,It){It||(It={lineBreak:"normal",wordBreak:"normal"});var Jt=function(Kt,_t){_t===void 0&&(_t="strict");var hi=[],bi=[],Ge=[];return Kt.forEach(function(Pe,ut){var xt=aN.get(Pe);if(xt>50?(Ge.push(!0),xt-=50):Ge.push(!1),["normal","auto","loose"].indexOf(_t)!==-1&&[8208,8211,12316,12448].indexOf(Pe)!==-1)return bi.push(ut),hi.push(16);if(xt===4||xt===11){if(ut===0)return bi.push(ut),hi.push(PC);var ct=hi[ut-1];return rme.indexOf(ct)===-1?(bi.push(bi[ut-1]),hi.push(ct)):(bi.push(ut),hi.push(PC))}return bi.push(ut),xt===31?hi.push(_t==="strict"?nN:U2):xt===C3||xt===29?hi.push(PC):xt===43?Pe>=131072&&Pe<=196605||Pe>=196608&&Pe<=262141?hi.push(U2):hi.push(PC):void hi.push(xt)}),[bi,hi,Ge]}(mt,It.lineBreak),jt=Jt[0],_i=Jt[1],xi=Jt[2];return It.wordBreak!=="break-all"&&It.wordBreak!=="break-word"||(_i=_i.map(function(Kt){return[sp,PC,C3].indexOf(Kt)!==-1?U2:Kt})),[jt,_i,It.wordBreak==="keep-all"?xi.map(function(Kt,_t){return Kt&&mt[_t]>=19968&&mt[_t]<=40959}):void 0]}(ve,Ae),Ne=De[0],We=De[1],vt=De[2],ot=ve.length,nt=0,st=0;return{next:function(){if(st>=ot)return{done:!0,value:null};for(var mt=us;st<ot&&(mt=ome(ve,We,Ne,++st,vt))===us;);if(mt!==us||st===ot){var It=new ame(ve,mt,nt,st);return nt=st,{value:It,done:!1}}return{done:!0,value:null}}}}(V,{lineBreak:$.lineBreak,wordBreak:$.overflowWrap==="break-word"?"break-word":$.wordBreak}),te=[],ae=function(){if(G.value){var oe=G.value.slice(),Ae=wR(oe),ve="";Ae.forEach(function(De){ove.indexOf(De)===-1?ve+=Rl(De):(ve.length&&te.push(ve),te.push(Rl(De)),ve="")}),ve.length&&te.push(ve)}};!(G=X.next()).done;)ae();return te}(R,D)}(S,B)}(h,f=n),v=[],w=0,p.forEach(function(S){if(f.textDecorationLine.length||S.trim().length>0)if(ju.SUPPORT_RANGE_BOUNDS){var B=cj(d,w,S.length).getClientRects();if(B.length>1){var R=yN(S),D=0;R.forEach(function(V){v.push(new H2(V,rv.fromDOMRectList(c,cj(d,D+w,V.length).getClientRects()))),D+=V.length})}else v.push(new H2(S,rv.fromDOMRectList(c,B)))}else{var O=d.splitText(S.length);v.push(new H2(S,function(V,$){var G=$.ownerDocument;if(G){var X=G.createElement("html2canvaswrapper");X.appendChild($.cloneNode(!0));var te=$.parentNode;if(te){te.replaceChild(X,$);var ae=bR(V,X);return X.firstChild&&te.replaceChild(X.firstChild,X),ae}}return rv.EMPTY}(c,d))),d=O}else ju.SUPPORT_RANGE_BOUNDS||(d=d.splitText(S.length));w+=S.length}),v)},lve=function(o,t){switch(t){case 1:return o.toLowerCase();case 3:return o.replace(cve,uve);case 2:return o.toUpperCase();default:return o}},cve=/(^|\s|:|-|\(|\))([a-z])/g,uve=function(o,t,n){return o.length>0?t+n.toUpperCase():o},uj=function(o){function t(n,c){var h=o.call(this,n,c)||this;return h.src=c.currentSrc||c.src,h.intrinsicWidth=c.naturalWidth,h.intrinsicHeight=c.naturalHeight,h.context.cache.addImage(h.src),h}return pg(t,o),t}(Dm),hj=function(o){function t(n,c){var h=o.call(this,n,c)||this;return h.canvas=c,h.intrinsicWidth=c.width,h.intrinsicHeight=c.height,h}return pg(t,o),t}(Dm),dj=function(o){function t(n,c){var h=o.call(this,n,c)||this,f=new XMLSerializer,d=bR(n,c);return c.setAttribute("width",d.width+"px"),c.setAttribute("height",d.height+"px"),h.svg="data:image/svg+xml,"+encodeURIComponent(f.serializeToString(c)),h.intrinsicWidth=c.width.baseVal.value,h.intrinsicHeight=c.height.baseVal.value,h.context.cache.addImage(h.svg),h}return pg(t,o),t}(Dm),Aj=function(o){function t(n,c){var h=o.call(this,n,c)||this;return h.value=c.value,h}return pg(t,o),t}(Dm),bN=function(o){function t(n,c){var h=o.call(this,n,c)||this;return h.start=c.start,h.reversed=typeof c.reversed=="boolean"&&c.reversed===!0,h}return pg(t,o),t}(Dm),hve=[{type:15,flags:0,unit:"px",number:3}],dve=[{type:16,flags:0,number:50}],KR="checkbox",XR="radio",pj=707406591,wN=function(o){function t(n,c){var h,f,d,p=o.call(this,n,c)||this;switch(p.type=c.type.toLowerCase(),p.checked=c.checked,p.value=(f=(h=c).type==="password"?new Array(h.value.length+1).join(""):h.value).length===0?h.placeholder||"":f,p.type!==KR&&p.type!==XR||(p.styles.backgroundColor=3739148031,p.styles.borderTopColor=p.styles.borderRightColor=p.styles.borderBottomColor=p.styles.borderLeftColor=2779096575,p.styles.borderTopWidth=p.styles.borderRightWidth=p.styles.borderBottomWidth=p.styles.borderLeftWidth=1,p.styles.borderTopStyle=p.styles.borderRightStyle=p.styles.borderBottomStyle=p.styles.borderLeftStyle=1,p.styles.backgroundClip=[0],p.styles.backgroundOrigin=[0],p.bounds=(d=p.bounds).width>d.height?new rv(d.left+(d.width-d.height)/2,d.top,d.height,d.height):d.width<d.height?new rv(d.left,d.top+(d.height-d.width)/2,d.width,d.width):d),p.type){case KR:p.styles.borderTopRightRadius=p.styles.borderTopLeftRadius=p.styles.borderBottomRightRadius=p.styles.borderBottomLeftRadius=hve;break;case XR:p.styles.borderTopRightRadius=p.styles.borderTopLeftRadius=p.styles.borderBottomRightRadius=p.styles.borderBottomLeftRadius=dve}return p}return pg(t,o),t}(Dm),fj=function(o){function t(n,c){var h=o.call(this,n,c)||this,f=c.options[c.selectedIndex||0];return h.value=f&&f.text||"",h}return pg(t,o),t}(Dm),gj=function(o){function t(n,c){var h=o.call(this,n,c)||this;return h.value=c.value,h}return pg(t,o),t}(Dm),mj=function(o){function t(n,c){var h=o.call(this,n,c)||this;h.src=c.src,h.width=parseInt(c.width,10)||0,h.height=parseInt(c.height,10)||0,h.backgroundColor=h.styles.backgroundColor;try{if(c.contentWindow&&c.contentWindow.document&&c.contentWindow.document.documentElement){h.tree=vj(n,c.contentWindow.document.documentElement);var f=c.contentWindow.document.documentElement?P2(n,getComputedStyle(c.contentWindow.document.documentElement).backgroundColor):ov.TRANSPARENT,d=c.contentWindow.document.body?P2(n,getComputedStyle(c.contentWindow.document.body).backgroundColor):ov.TRANSPARENT;h.backgroundColor=py(f)?py(d)?h.styles.backgroundColor:d:f}}catch{}return h}return pg(t,o),t}(Dm),Ave=["OL","UL","MENU"],YR=function(o,t,n,c){for(var h=t.firstChild,f=void 0;h;h=f)if(f=h.nextSibling,yj(h)&&h.data.trim().length>0)n.textNodes.push(new ave(o,h,n.styles));else if(zC(h))if(Sj(h)&&h.assignedNodes)h.assignedNodes().forEach(function(p){return YR(o,p,n,c)});else{var d=_j(o,h);d.styles.isVisible()&&(pve(h,d,c)?d.flags|=4:fve(d.styles)&&(d.flags|=2),Ave.indexOf(h.tagName)!==-1&&(d.flags|=8),n.elements.push(d),h.slot,h.shadowRoot?YR(o,h.shadowRoot,d,c):ZR(h)||bj(h)||eD(h)||YR(o,h,d,c))}},_j=function(o,t){return EN(t)?new uj(o,t):wj(t)?new hj(o,t):bj(t)?new dj(o,t):gve(t)?new Aj(o,t):mve(t)?new bN(o,t):_ve(t)?new wN(o,t):eD(t)?new fj(o,t):ZR(t)?new gj(o,t):Cj(t)?new mj(o,t):new Dm(o,t)},vj=function(o,t){var n=_j(o,t);return n.flags|=4,YR(o,t,n,n),n},pve=function(o,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||CN(o)&&n.styles.isTransparent()},fve=function(o){return o.isPositioned()||o.isFloating()},yj=function(o){return o.nodeType===Node.TEXT_NODE},zC=function(o){return o.nodeType===Node.ELEMENT_NODE},xN=function(o){return zC(o)&&o.style!==void 0&&!JR(o)},JR=function(o){return typeof o.className=="object"},gve=function(o){return o.tagName==="LI"},mve=function(o){return o.tagName==="OL"},_ve=function(o){return o.tagName==="INPUT"},bj=function(o){return o.tagName==="svg"},CN=function(o){return o.tagName==="BODY"},wj=function(o){return o.tagName==="CANVAS"},xj=function(o){return o.tagName==="VIDEO"},EN=function(o){return o.tagName==="IMG"},Cj=function(o){return o.tagName==="IFRAME"},Ej=function(o){return o.tagName==="STYLE"},ZR=function(o){return o.tagName==="TEXTAREA"},eD=function(o){return o.tagName==="SELECT"},Sj=function(o){return o.tagName==="SLOT"},Bj=function(o){return o.tagName.indexOf("-")>0},vve=function(){function o(){this.counters={}}return o.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},o.prototype.getCounterValues=function(t){return this.counters[t]||[]},o.prototype.pop=function(t){var n=this;t.forEach(function(c){return n.counters[c].pop()})},o.prototype.parse=function(t){var n=this,c=t.counterIncrement,h=t.counterReset,f=!0;c!==null&&c.forEach(function(p){var v=n.counters[p.counter];v&&p.increment!==0&&(f=!1,v.length||v.push(1),v[Math.max(0,v.length-1)]+=p.increment)});var d=[];return f&&h.forEach(function(p){var v=n.counters[p.counter];d.push(p.counter),v||(v=n.counters[p.counter]=[]),v.push(p.reset)}),d},o}(),Ij={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Tj={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},yve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GC=function(o,t,n,c,h,f){return o<t||o>n?z2(o,h,f.length>0):c.integers.reduce(function(d,p,v){for(;o>=p;)o-=p,d+=c.values[v];return d},"")+f},Mj=function(o,t,n,c){var h="";do n||o--,h=c(o)+h,o/=t;while(o*t>=t);return h},Dl=function(o,t,n,c,h){var f=n-t+1;return(o<0?"-":"")+(Mj(Math.abs(o),f,c,function(d){return Rl(Math.floor(d%f)+t)})+h)},y1=function(o,t,n){n===void 0&&(n=". ");var c=t.length;return Mj(Math.abs(o),c,!1,function(h){return t[Math.floor(h%c)]})+n},av=function(o,t,n,c,h,f){if(o<-9999||o>9999)return z2(o,4,h.length>0);var d=Math.abs(o),p=h;if(d===0)return t[0]+p;for(var v=0;d>0&&v<=4;v++){var w=d%10;w===0&&kc(f,1)&&p!==""?p=t[w]+p:w>1||w===1&&v===0||w===1&&v===1&&kc(f,2)||w===1&&v===1&&kc(f,4)&&o>100||w===1&&v>1&&kc(f,8)?p=t[w]+(v>0?n[v-1]:"")+p:w===1&&v>0&&(p=n[v-1]+p),d=Math.floor(d/10)}return(o<0?c:"")+p},Rj="",Dj="",Fj="",SN="",z2=function(o,t,n){var c=n?". ":"",h=n?"":"",f=n?", ":"",d=n?" ":"";switch(t){case 0:return""+d;case 1:return""+d;case 2:return""+d;case 5:var p=Dl(o,48,57,!0,c);return p.length<4?"0"+p:p;case 4:return y1(o,"",h);case 6:return GC(o,1,3999,Ij,3,c).toLowerCase();case 7:return GC(o,1,3999,Ij,3,c);case 8:return Dl(o,945,969,!1,c);case 9:return Dl(o,97,122,!1,c);case 10:return Dl(o,65,90,!1,c);case 11:return Dl(o,1632,1641,!0,c);case 12:case 49:return GC(o,1,9999,Tj,3,c);case 35:return GC(o,1,9999,Tj,3,c).toLowerCase();case 13:return Dl(o,2534,2543,!0,c);case 14:case 30:return Dl(o,6112,6121,!0,c);case 15:return y1(o,"",h);case 16:return y1(o,"",h);case 17:case 48:return av(o,"",Rj,"",h,14);case 47:return av(o,"",Dj,"",h,15);case 42:return av(o,"",Rj,"",h,14);case 41:return av(o,"",Dj,"",h,15);case 26:return av(o,"","",Fj,h,0);case 25:return av(o,"","",Fj,h,7);case 31:return av(o,"","",SN,f,7);case 33:return av(o,"","",SN,f,0);case 32:return av(o,"","",SN,f,7);case 18:return Dl(o,2406,2415,!0,c);case 20:return GC(o,1,19999,bve,3,c);case 21:return Dl(o,2790,2799,!0,c);case 22:return Dl(o,2662,2671,!0,c);case 22:return GC(o,1,10999,yve,3,c);case 23:return y1(o,"");case 24:return y1(o,"");case 27:return Dl(o,3302,3311,!0,c);case 28:return y1(o,"",h);case 29:return y1(o,"",h);case 34:return Dl(o,3792,3801,!0,c);case 37:return Dl(o,6160,6169,!0,c);case 38:return Dl(o,4160,4169,!0,c);case 39:return Dl(o,2918,2927,!0,c);case 40:return Dl(o,1776,1785,!0,c);case 43:return Dl(o,3046,3055,!0,c);case 44:return Dl(o,3174,3183,!0,c);case 45:return Dl(o,3664,3673,!0,c);case 46:return Dl(o,3872,3881,!0,c);default:return Dl(o,48,57,!0,c)}},Uj="data-html2canvas-ignore",kj=function(){function o(t,n,c){if(this.context=t,this.options=c,this.scrolledElements=[],this.referenceElement=n,this.counters=new vve,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return o.prototype.toIFrame=function(t,n){var c=this,h=wve(t,n);if(!h.contentWindow)return Promise.reject("Unable to find iframe window");var f=t.defaultView.pageXOffset,d=t.defaultView.pageYOffset,p=h.contentWindow,v=p.document,w=Eve(h).then(function(){return Id(c,0,void 0,function(){var S,B;return kh(this,function(R){switch(R.label){case 0:return this.scrolledElements.forEach(Tve),p&&(p.scrollTo(n.left,n.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||p.scrollY===n.top&&p.scrollX===n.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(p.scrollX-n.left,p.scrollY-n.top,0,0))),S=this.options.onclone,(B=this.clonedReferenceElement)===void 0?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:v.fonts&&v.fonts.ready?[4,v.fonts.ready]:[3,2];case 1:R.sent(),R.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Cve(v)]:[3,4];case 3:R.sent(),R.label=4;case 4:return typeof S=="function"?[2,Promise.resolve().then(function(){return S(v,B)}).then(function(){return h})]:[2,h]}})})});return v.open(),v.write(Bve(document.doctype)+"<html></html>"),Ive(this.referenceElement.ownerDocument,f,d),v.replaceChild(v.adoptNode(this.documentElement),v.documentElement),v.close(),w},o.prototype.createElementClone=function(t){if(mN(t,2),wj(t))return this.createCanvasClone(t);if(xj(t))return this.createVideoClone(t);if(Ej(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return EN(n)&&(EN(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),Bj(n)?this.createCustomElementClone(n):n},o.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return BN(t.style,n),n},o.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var c=[].slice.call(n.cssRules,0).reduce(function(f,d){return d&&typeof d.cssText=="string"?f+d.cssText:f},""),h=t.cloneNode(!1);return h.textContent=c,h}}catch(f){if(this.context.logger.error("Unable to access cssRules property",f),f.name!=="SecurityError")throw f}return t.cloneNode(!1)},o.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var c=t.ownerDocument.createElement("img");try{return c.src=t.toDataURL(),c}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var h=t.cloneNode(!1);try{h.width=t.width,h.height=t.height;var f=t.getContext("2d"),d=h.getContext("2d");if(d)if(!this.options.allowTaint&&f)d.putImageData(f.getImageData(0,0,t.width,t.height),0,0);else{var p=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(p){var v=p.getContextAttributes();(v==null?void 0:v.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}d.drawImage(t,0,0)}return h}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return h},o.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var c=n.getContext("2d");try{return c&&(c.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||c.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var h=t.ownerDocument.createElement("canvas");return h.width=t.offsetWidth,h.height=t.offsetHeight,h},o.prototype.appendChildNode=function(t,n,c){zC(n)&&(n.tagName==="SCRIPT"||n.hasAttribute(Uj)||typeof this.options.ignoreElements=="function"&&this.options.ignoreElements(n))||this.options.copyStyles&&zC(n)&&Ej(n)||t.appendChild(this.cloneNode(n,c))},o.prototype.cloneChildNodes=function(t,n,c){for(var h=this,f=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;f;f=f.nextSibling)if(zC(f)&&Sj(f)&&typeof f.assignedNodes=="function"){var d=f.assignedNodes();d.length&&d.forEach(function(p){return h.appendChildNode(n,p,c)})}else this.appendChildNode(n,f,c)},o.prototype.cloneNode=function(t,n){if(yj(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var c=t.ownerDocument.defaultView;if(c&&zC(t)&&(xN(t)||JR(t))){var h=this.createElementClone(t);h.style.transitionProperty="none";var f=c.getComputedStyle(t),d=c.getComputedStyle(t,":before"),p=c.getComputedStyle(t,":after");this.referenceElement===t&&xN(h)&&(this.clonedReferenceElement=h),CN(h)&&Mve(h);var v=this.counters.parse(new ij(this.context,f)),w=this.resolvePseudoContent(t,h,d,N2.BEFORE);Bj(t)&&(n=!0),xj(t)||this.cloneChildNodes(t,h,n),w&&h.insertBefore(w,h.firstChild);var S=this.resolvePseudoContent(t,h,p,N2.AFTER);return S&&h.appendChild(S),this.counters.pop(v),(f&&(this.options.copyStyles||JR(t))&&!Cj(t)||n)&&BN(f,h),t.scrollTop===0&&t.scrollLeft===0||this.scrolledElements.push([h,t.scrollLeft,t.scrollTop]),(ZR(t)||eD(t))&&(ZR(h)||eD(h))&&(h.value=t.value),h}return t.cloneNode(!1)},o.prototype.resolvePseudoContent=function(t,n,c,h){var f=this;if(c){var d=c.content,p=n.ownerDocument;if(p&&d&&d!=="none"&&d!=="-moz-alt-content"&&c.display!=="none"){this.counters.parse(new ij(this.context,c));var v=new J_e(this.context,c),w=p.createElement("html2canvaspseudoelement");BN(c,w),v.content.forEach(function(B){if(B.type===0)w.appendChild(p.createTextNode(B.value));else if(B.type===22){var R=p.createElement("img");R.src=B.value,R.style.opacity="1",w.appendChild(R)}else if(B.type===18){if(B.name==="attr"){var D=B.values.filter(bo);D.length&&w.appendChild(p.createTextNode(t.getAttribute(D[0].value)||""))}else if(B.name==="counter"){var O=B.values.filter(NC),V=O[0],$=O[1];if(V&&bo(V)){var G=f.counters.getCounterValue(V.value),X=$&&bo($)?gN.parse(f.context,$.value):3;w.appendChild(p.createTextNode(z2(G,X,!1)))}}else if(B.name==="counters"){var te=B.values.filter(NC),ae=(V=te[0],te[1]);if($=te[2],V&&bo(V)){var oe=f.counters.getCounterValues(V.value),Ae=$&&bo($)?gN.parse(f.context,$.value):3,ve=ae&&ae.type===0?ae.value:"",De=oe.map(function(Ne){return z2(Ne,Ae,!1)}).join(ve);w.appendChild(p.createTextNode(De))}}}else if(B.type===20)switch(B.value){case"open-quote":w.appendChild(p.createTextNode(tj(v.quotes,f.quoteDepth++,!0)));break;case"close-quote":w.appendChild(p.createTextNode(tj(v.quotes,--f.quoteDepth,!1)));break;default:w.appendChild(p.createTextNode(B.value))}}),w.className=IN+" "+TN;var S=h===N2.BEFORE?" "+IN:" "+TN;return JR(n)?n.className.baseValue+=S:n.className+=S,w}}},o.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},o}();(function(o){o[o.BEFORE=0]="BEFORE",o[o.AFTER=1]="AFTER"})(N2||(N2={}));var js,wve=function(o,t){var n=o.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Uj,"true"),o.body.appendChild(n),n},xve=function(o){return new Promise(function(t){o.complete?t():o.src?(o.onload=t,o.onerror=t):t()})},Cve=function(o){return Promise.all([].slice.call(o.images,0).map(xve))},Eve=function(o){return new Promise(function(t,n){var c=o.contentWindow;if(!c)return n("No window assigned for iframe");var h=c.document;c.onload=o.onload=function(){c.onload=o.onload=null;var f=setInterval(function(){h.body.childNodes.length>0&&h.readyState==="complete"&&(clearInterval(f),t(o))},50)}})},Sve=["all","d","content"],BN=function(o,t){for(var n=o.length-1;n>=0;n--){var c=o.item(n);Sve.indexOf(c)===-1&&t.style.setProperty(c,o.getPropertyValue(c))}return t},Bve=function(o){var t="";return o&&(t+="<!DOCTYPE ",o.name&&(t+=o.name),o.internalSubset&&(t+=o.internalSubset),o.publicId&&(t+='"'+o.publicId+'"'),o.systemId&&(t+='"'+o.systemId+'"'),t+=">"),t},Ive=function(o,t,n){o&&o.defaultView&&(t!==o.defaultView.pageXOffset||n!==o.defaultView.pageYOffset)&&o.defaultView.scrollTo(t,n)},Tve=function(o){var t=o[0],n=o[1],c=o[2];t.scrollLeft=n,t.scrollTop=c},IN="___html2canvas___pseudoelement_before",TN="___html2canvas___pseudoelement_after",Lj=`{
    content: "" !important;
    display: none !important;
}`,Mve=function(o){Rve(o,"."+IN+":before"+Lj+`
         .`+TN+":after"+Lj)},Rve=function(o,t){var n=o.ownerDocument;if(n){var c=n.createElement("style");c.textContent=t,o.appendChild(c)}},Pj=function(){function o(){}return o.getOrigin=function(t){var n=o._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},o.isSameOrigin=function(t){return o.getOrigin(t)===o._origin},o.setContext=function(t){o._link=t.document.createElement("a"),o._origin=o.getOrigin(t.location.href)},o._origin="about:blank",o}(),Dve=function(){function o(t,n){this.context=t,this._options=n,this._cache={}}return o.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(RN(t)||Lve(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},o.prototype.match=function(t){return this._cache[t]},o.prototype.loadImage=function(t){return Id(this,0,void 0,function(){var n,c,h,f,d=this;return kh(this,function(p){switch(p.label){case 0:return n=Pj.isSameOrigin(t),c=!MN(t)&&this._options.useCORS===!0&&ju.SUPPORT_CORS_IMAGES&&!n,h=!MN(t)&&!n&&!RN(t)&&typeof this._options.proxy=="string"&&ju.SUPPORT_CORS_XHR&&!c,n||this._options.allowTaint!==!1||MN(t)||RN(t)||h||c?(f=t,h?[4,this.proxy(f)]:[3,2]):[2];case 1:f=p.sent(),p.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(v,w){var S=new Image;S.onload=function(){return v(S)},S.onerror=w,(Pve(f)||c)&&(S.crossOrigin="anonymous"),S.src=f,S.complete===!0&&setTimeout(function(){return v(S)},500),d._options.imageTimeout>0&&setTimeout(function(){return w("Timed out ("+d._options.imageTimeout+"ms) loading image")},d._options.imageTimeout)})];case 3:return[2,p.sent()]}})})},o.prototype.has=function(t){return this._cache[t]!==void 0},o.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},o.prototype.proxy=function(t){var n=this,c=this._options.proxy;if(!c)throw new Error("No proxy defined");var h=t.substring(0,256);return new Promise(function(f,d){var p=ju.SUPPORT_RESPONSE_TYPE?"blob":"text",v=new XMLHttpRequest;v.onload=function(){if(v.status===200)if(p==="text")f(v.response);else{var B=new FileReader;B.addEventListener("load",function(){return f(B.result)},!1),B.addEventListener("error",function(R){return d(R)},!1),B.readAsDataURL(v.response)}else d("Failed to proxy resource "+h+" with status code "+v.status)},v.onerror=d;var w=c.indexOf("?")>-1?"&":"?";if(v.open("GET",""+c+w+"url="+encodeURIComponent(t)+"&responseType="+p),p!=="text"&&v instanceof XMLHttpRequest&&(v.responseType=p),n._options.imageTimeout){var S=n._options.imageTimeout;v.timeout=S,v.ontimeout=function(){return d("Timed out ("+S+"ms) proxying "+h)}}v.send()})},o}(),Fve=/^data:image\/svg\+xml/i,Uve=/^data:image\/.*;base64,/i,kve=/^data:image\/.*/i,Lve=function(o){return ju.SUPPORT_SVG_DRAWING||!Ove(o)},MN=function(o){return kve.test(o)},Pve=function(o){return Uve.test(o)},RN=function(o){return o.substr(0,4)==="blob"},Ove=function(o){return o.substr(-3).toLowerCase()==="svg"||Fve.test(o)},tn=function(){function o(t,n){this.type=0,this.x=t,this.y=n}return o.prototype.add=function(t,n){return new o(this.x+t,this.y+n)},o}(),VC=function(o,t,n){return new tn(o.x+(t.x-o.x)*n,o.y+(t.y-o.y)*n)},tD=function(){function o(t,n,c,h){this.type=1,this.start=t,this.startControl=n,this.endControl=c,this.end=h}return o.prototype.subdivide=function(t,n){var c=VC(this.start,this.startControl,t),h=VC(this.startControl,this.endControl,t),f=VC(this.endControl,this.end,t),d=VC(c,h,t),p=VC(h,f,t),v=VC(d,p,t);return n?new o(this.start,c,d,v):new o(v,p,f,this.end)},o.prototype.add=function(t,n){return new o(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},o.prototype.reverse=function(){return new o(this.end,this.endControl,this.startControl,this.start)},o}(),hf=function(o){return o.type===1},Qve=function(o){var t=o.styles,n=o.bounds,c=L2(t.borderTopLeftRadius,n.width,n.height),h=c[0],f=c[1],d=L2(t.borderTopRightRadius,n.width,n.height),p=d[0],v=d[1],w=L2(t.borderBottomRightRadius,n.width,n.height),S=w[0],B=w[1],R=L2(t.borderBottomLeftRadius,n.width,n.height),D=R[0],O=R[1],V=[];V.push((h+p)/n.width),V.push((D+S)/n.width),V.push((f+O)/n.height),V.push((v+B)/n.height);var $=Math.max.apply(Math,V);$>1&&(h/=$,f/=$,p/=$,v/=$,S/=$,B/=$,D/=$,O/=$);var G=n.width-p,X=n.height-B,te=n.width-S,ae=n.height-O,oe=t.borderTopWidth,Ae=t.borderRightWidth,ve=t.borderBottomWidth,De=t.borderLeftWidth,Ne=Vo(t.paddingTop,o.bounds.width),We=Vo(t.paddingRight,o.bounds.width),vt=Vo(t.paddingBottom,o.bounds.width),ot=Vo(t.paddingLeft,o.bounds.width);this.topLeftBorderDoubleOuterBox=h>0||f>0?Sa(n.left+De/3,n.top+oe/3,h-De/3,f-oe/3,js.TOP_LEFT):new tn(n.left+De/3,n.top+oe/3),this.topRightBorderDoubleOuterBox=h>0||f>0?Sa(n.left+G,n.top+oe/3,p-Ae/3,v-oe/3,js.TOP_RIGHT):new tn(n.left+n.width-Ae/3,n.top+oe/3),this.bottomRightBorderDoubleOuterBox=S>0||B>0?Sa(n.left+te,n.top+X,S-Ae/3,B-ve/3,js.BOTTOM_RIGHT):new tn(n.left+n.width-Ae/3,n.top+n.height-ve/3),this.bottomLeftBorderDoubleOuterBox=D>0||O>0?Sa(n.left+De/3,n.top+ae,D-De/3,O-ve/3,js.BOTTOM_LEFT):new tn(n.left+De/3,n.top+n.height-ve/3),this.topLeftBorderDoubleInnerBox=h>0||f>0?Sa(n.left+2*De/3,n.top+2*oe/3,h-2*De/3,f-2*oe/3,js.TOP_LEFT):new tn(n.left+2*De/3,n.top+2*oe/3),this.topRightBorderDoubleInnerBox=h>0||f>0?Sa(n.left+G,n.top+2*oe/3,p-2*Ae/3,v-2*oe/3,js.TOP_RIGHT):new tn(n.left+n.width-2*Ae/3,n.top+2*oe/3),this.bottomRightBorderDoubleInnerBox=S>0||B>0?Sa(n.left+te,n.top+X,S-2*Ae/3,B-2*ve/3,js.BOTTOM_RIGHT):new tn(n.left+n.width-2*Ae/3,n.top+n.height-2*ve/3),this.bottomLeftBorderDoubleInnerBox=D>0||O>0?Sa(n.left+2*De/3,n.top+ae,D-2*De/3,O-2*ve/3,js.BOTTOM_LEFT):new tn(n.left+2*De/3,n.top+n.height-2*ve/3),this.topLeftBorderStroke=h>0||f>0?Sa(n.left+De/2,n.top+oe/2,h-De/2,f-oe/2,js.TOP_LEFT):new tn(n.left+De/2,n.top+oe/2),this.topRightBorderStroke=h>0||f>0?Sa(n.left+G,n.top+oe/2,p-Ae/2,v-oe/2,js.TOP_RIGHT):new tn(n.left+n.width-Ae/2,n.top+oe/2),this.bottomRightBorderStroke=S>0||B>0?Sa(n.left+te,n.top+X,S-Ae/2,B-ve/2,js.BOTTOM_RIGHT):new tn(n.left+n.width-Ae/2,n.top+n.height-ve/2),this.bottomLeftBorderStroke=D>0||O>0?Sa(n.left+De/2,n.top+ae,D-De/2,O-ve/2,js.BOTTOM_LEFT):new tn(n.left+De/2,n.top+n.height-ve/2),this.topLeftBorderBox=h>0||f>0?Sa(n.left,n.top,h,f,js.TOP_LEFT):new tn(n.left,n.top),this.topRightBorderBox=p>0||v>0?Sa(n.left+G,n.top,p,v,js.TOP_RIGHT):new tn(n.left+n.width,n.top),this.bottomRightBorderBox=S>0||B>0?Sa(n.left+te,n.top+X,S,B,js.BOTTOM_RIGHT):new tn(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=D>0||O>0?Sa(n.left,n.top+ae,D,O,js.BOTTOM_LEFT):new tn(n.left,n.top+n.height),this.topLeftPaddingBox=h>0||f>0?Sa(n.left+De,n.top+oe,Math.max(0,h-De),Math.max(0,f-oe),js.TOP_LEFT):new tn(n.left+De,n.top+oe),this.topRightPaddingBox=p>0||v>0?Sa(n.left+Math.min(G,n.width-Ae),n.top+oe,G>n.width+Ae?0:Math.max(0,p-Ae),Math.max(0,v-oe),js.TOP_RIGHT):new tn(n.left+n.width-Ae,n.top+oe),this.bottomRightPaddingBox=S>0||B>0?Sa(n.left+Math.min(te,n.width-De),n.top+Math.min(X,n.height-ve),Math.max(0,S-Ae),Math.max(0,B-ve),js.BOTTOM_RIGHT):new tn(n.left+n.width-Ae,n.top+n.height-ve),this.bottomLeftPaddingBox=D>0||O>0?Sa(n.left+De,n.top+Math.min(ae,n.height-ve),Math.max(0,D-De),Math.max(0,O-ve),js.BOTTOM_LEFT):new tn(n.left+De,n.top+n.height-ve),this.topLeftContentBox=h>0||f>0?Sa(n.left+De+ot,n.top+oe+Ne,Math.max(0,h-(De+ot)),Math.max(0,f-(oe+Ne)),js.TOP_LEFT):new tn(n.left+De+ot,n.top+oe+Ne),this.topRightContentBox=p>0||v>0?Sa(n.left+Math.min(G,n.width+De+ot),n.top+oe+Ne,G>n.width+De+ot?0:p-De+ot,v-(oe+Ne),js.TOP_RIGHT):new tn(n.left+n.width-(Ae+We),n.top+oe+Ne),this.bottomRightContentBox=S>0||B>0?Sa(n.left+Math.min(te,n.width-(De+ot)),n.top+Math.min(X,n.height+oe+Ne),Math.max(0,S-(Ae+We)),B-(ve+vt),js.BOTTOM_RIGHT):new tn(n.left+n.width-(Ae+We),n.top+n.height-(ve+vt)),this.bottomLeftContentBox=D>0||O>0?Sa(n.left+De+ot,n.top+ae,Math.max(0,D-(De+ot)),O-(ve+vt),js.BOTTOM_LEFT):new tn(n.left+De+ot,n.top+n.height-(ve+vt))};(function(o){o[o.TOP_LEFT=0]="TOP_LEFT",o[o.TOP_RIGHT=1]="TOP_RIGHT",o[o.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",o[o.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(js||(js={}));var Sa=function(o,t,n,c,h){var f=(Math.sqrt(2)-1)/3*4,d=n*f,p=c*f,v=o+n,w=t+c;switch(h){case js.TOP_LEFT:return new tD(new tn(o,w),new tn(o,w-p),new tn(v-d,t),new tn(v,t));case js.TOP_RIGHT:return new tD(new tn(o,t),new tn(o+d,t),new tn(v,w-p),new tn(v,w));case js.BOTTOM_RIGHT:return new tD(new tn(v,t),new tn(v,t+p),new tn(o+d,w),new tn(o,w));case js.BOTTOM_LEFT:default:return new tD(new tn(v,w),new tn(v-d,w),new tn(o,t+p),new tn(o,t))}},iD=function(o){return[o.topLeftBorderBox,o.topRightBorderBox,o.bottomRightBorderBox,o.bottomLeftBorderBox]},nD=function(o){return[o.topLeftPaddingBox,o.topRightPaddingBox,o.bottomRightPaddingBox,o.bottomLeftPaddingBox]},Nve=function(o,t,n){this.offsetX=o,this.offsetY=t,this.matrix=n,this.type=0,this.target=6},rD=function(o,t){this.path=o,this.target=t,this.type=1},Hve=function(o){this.opacity=o,this.type=2,this.target=6},Oj=function(o){return o.type===1},Qj=function(o,t){return o.length===t.length&&o.some(function(n,c){return n===t[c]})},Nj=function(o){this.element=o,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Hj=function(){function o(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new Qve(this.container),this.container.styles.opacity<1&&this.effects.push(new Hve(this.container.styles.opacity)),this.container.styles.transform!==null){var c=this.container.bounds.left+this.container.styles.transformOrigin[0].number,h=this.container.bounds.top+this.container.styles.transformOrigin[1].number,f=this.container.styles.transform;this.effects.push(new Nve(c,h,f))}if(this.container.styles.overflowX!==0){var d=iD(this.curves),p=nD(this.curves);Qj(d,p)?this.effects.push(new rD(d,6)):(this.effects.push(new rD(d,2)),this.effects.push(new rD(p,4)))}}return o.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,c=this.parent,h=this.effects.slice(0);c;){var f=c.effects.filter(function(v){return!Oj(v)});if(n||c.container.styles.position!==0||!c.parent){if(h.unshift.apply(h,f),n=[2,3].indexOf(c.container.styles.position)===-1,c.container.styles.overflowX!==0){var d=iD(c.curves),p=nD(c.curves);Qj(d,p)||h.unshift(new rD(p,6))}}else h.unshift.apply(h,f);c=c.parent}return h.filter(function(v){return kc(v.target,t)})},o}(),DN=function(o,t,n,c){o.container.elements.forEach(function(h){var f=kc(h.flags,4),d=kc(h.flags,2),p=new Hj(h,o);kc(h.styles.display,2048)&&c.push(p);var v=kc(h.flags,8)?[]:c;if(f||d){var w=f||h.styles.isPositioned()?n:t,S=new Nj(p);if(h.styles.isPositioned()||h.styles.opacity<1||h.styles.isTransformed()){var B=h.styles.zIndex.order;if(B<0){var R=0;w.negativeZIndex.some(function(O,V){return B>O.element.container.styles.zIndex.order?(R=V,!1):R>0}),w.negativeZIndex.splice(R,0,S)}else if(B>0){var D=0;w.positiveZIndex.some(function(O,V){return B>=O.element.container.styles.zIndex.order?(D=V+1,!1):D>0}),w.positiveZIndex.splice(D,0,S)}else w.zeroOrAutoZIndexOrTransformedOrOpacity.push(S)}else h.styles.isFloating()?w.nonPositionedFloats.push(S):w.nonPositionedInlineLevel.push(S);DN(p,S,f?S:n,v)}else h.styles.isInlineLevel()?t.inlineLevel.push(p):t.nonInlineLevel.push(p),DN(p,t,n,v);kc(h.flags,8)&&zj(h,v)})},zj=function(o,t){for(var n=o instanceof bN?o.start:1,c=o instanceof bN&&o.reversed,h=0;h<t.length;h++){var f=t[h];f.container instanceof Aj&&typeof f.container.value=="number"&&f.container.value!==0&&(n=f.container.value),f.listValue=z2(n,f.container.styles.listStyleType,!0),n+=c?-1:1}},Gj=function(o,t){switch(t){case 0:return df(o.topLeftBorderBox,o.topLeftPaddingBox,o.topRightBorderBox,o.topRightPaddingBox);case 1:return df(o.topRightBorderBox,o.topRightPaddingBox,o.bottomRightBorderBox,o.bottomRightPaddingBox);case 2:return df(o.bottomRightBorderBox,o.bottomRightPaddingBox,o.bottomLeftBorderBox,o.bottomLeftPaddingBox);default:return df(o.bottomLeftBorderBox,o.bottomLeftPaddingBox,o.topLeftBorderBox,o.topLeftPaddingBox)}},sD=function(o,t){var n=[];return hf(o)?n.push(o.subdivide(.5,!1)):n.push(o),hf(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},df=function(o,t,n,c){var h=[];return hf(o)?h.push(o.subdivide(.5,!1)):h.push(o),hf(n)?h.push(n.subdivide(.5,!0)):h.push(n),hf(c)?h.push(c.subdivide(.5,!0).reverse()):h.push(c),hf(t)?h.push(t.subdivide(.5,!1).reverse()):h.push(t),h},Vj=function(o){var t=o.bounds,n=o.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},oD=function(o){var t=o.styles,n=o.bounds,c=Vo(t.paddingLeft,n.width),h=Vo(t.paddingRight,n.width),f=Vo(t.paddingTop,n.width),d=Vo(t.paddingBottom,n.width);return n.add(c+t.borderLeftWidth,f+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+c+h),-(t.borderTopWidth+t.borderBottomWidth+f+d))},FN=function(o,t,n){var c,h,f=(h=o,(c=$C(o.styles.backgroundOrigin,t))===0?h.bounds:c===2?oD(h):Vj(h)),d=function(B,R){return B===0?R.bounds:B===2?oD(R):Vj(R)}($C(o.styles.backgroundClip,t),o),p=zve($C(o.styles.backgroundSize,t),n,f),v=p[0],w=p[1],S=L2($C(o.styles.backgroundPosition,t),f.width-v,f.height-w);return[Gve($C(o.styles.backgroundRepeat,t),S,p,f,d),Math.round(f.left+S[0]),Math.round(f.top+S[1]),v,w]},qC=function(o){return bo(o)&&o.value===HC.AUTO},aD=function(o){return typeof o=="number"},zve=function(o,t,n){var c=t[0],h=t[1],f=t[2],d=o[0],p=o[1];if(!d)return[0,0];if(oc(d)&&p&&oc(p))return[Vo(d,n.width),Vo(p,n.height)];var v=aD(f);if(bo(d)&&(d.value===HC.CONTAIN||d.value===HC.COVER))return aD(f)?n.width/n.height<f!=(d.value===HC.COVER)?[n.width,n.width/f]:[n.height*f,n.height]:[n.width,n.height];var w=aD(c),S=aD(h),B=w||S;if(qC(d)&&(!p||qC(p)))return w&&S?[c,h]:v||B?B&&v?[w?c:h*f,S?h:c/f]:[w?c:n.width,S?h:n.height]:[n.width,n.height];if(v){var R=0,D=0;return oc(d)?R=Vo(d,n.width):oc(p)&&(D=Vo(p,n.height)),qC(d)?R=D*f:p&&!qC(p)||(D=R/f),[R,D]}var O=null,V=null;if(oc(d)?O=Vo(d,n.width):p&&oc(p)&&(V=Vo(p,n.height)),O===null||p&&!qC(p)||(V=w&&S?O/c*h:n.height),V!==null&&qC(d)&&(O=w&&S?V/h*c:n.width),O!==null&&V!==null)return[O,V];throw new Error("Unable to calculate background-size for element")},$C=function(o,t){var n=o[t];return n===void 0?o[0]:n},Gve=function(o,t,n,c,h){var f=t[0],d=t[1],p=n[0],v=n[1];switch(o){case 2:return[new tn(Math.round(c.left),Math.round(c.top+d)),new tn(Math.round(c.left+c.width),Math.round(c.top+d)),new tn(Math.round(c.left+c.width),Math.round(v+c.top+d)),new tn(Math.round(c.left),Math.round(v+c.top+d))];case 3:return[new tn(Math.round(c.left+f),Math.round(c.top)),new tn(Math.round(c.left+f+p),Math.round(c.top)),new tn(Math.round(c.left+f+p),Math.round(c.height+c.top)),new tn(Math.round(c.left+f),Math.round(c.height+c.top))];case 1:return[new tn(Math.round(c.left+f),Math.round(c.top+d)),new tn(Math.round(c.left+f+p),Math.round(c.top+d)),new tn(Math.round(c.left+f+p),Math.round(c.top+d+v)),new tn(Math.round(c.left+f),Math.round(c.top+d+v))];default:return[new tn(Math.round(h.left),Math.round(h.top)),new tn(Math.round(h.left+h.width),Math.round(h.top)),new tn(Math.round(h.left+h.width),Math.round(h.height+h.top)),new tn(Math.round(h.left),Math.round(h.height+h.top))]}},qj="Hidden Text",Vve=function(){function o(t){this._data={},this._document=t}return o.prototype.parseMetrics=function(t,n){var c=this._document.createElement("div"),h=this._document.createElement("img"),f=this._document.createElement("span"),d=this._document.body;c.style.visibility="hidden",c.style.fontFamily=t,c.style.fontSize=n,c.style.margin="0",c.style.padding="0",c.style.whiteSpace="nowrap",d.appendChild(c),h.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",h.width=1,h.height=1,h.style.margin="0",h.style.padding="0",h.style.verticalAlign="baseline",f.style.fontFamily=t,f.style.fontSize=n,f.style.margin="0",f.style.padding="0",f.appendChild(this._document.createTextNode(qj)),c.appendChild(f),c.appendChild(h);var p=h.offsetTop-f.offsetTop+2;c.removeChild(f),c.appendChild(this._document.createTextNode(qj)),c.style.lineHeight="normal",h.style.verticalAlign="super";var v=h.offsetTop-c.offsetTop+2;return d.removeChild(c),{baseline:p,middle:v}},o.prototype.getMetrics=function(t,n){var c=t+" "+n;return this._data[c]===void 0&&(this._data[c]=this.parseMetrics(t,n)),this._data[c]},o}(),$j=function(o,t){this.context=o,this.options=t},qve=function(o){function t(n,c){var h=o.call(this,n,c)||this;return h._activeEffects=[],h.canvas=c.canvas?c.canvas:document.createElement("canvas"),h.ctx=h.canvas.getContext("2d"),c.canvas||(h.canvas.width=Math.floor(c.width*c.scale),h.canvas.height=Math.floor(c.height*c.scale),h.canvas.style.width=c.width+"px",h.canvas.style.height=c.height+"px"),h.fontMetrics=new Vve(document),h.ctx.scale(h.options.scale,h.options.scale),h.ctx.translate(-c.x,-c.y),h.ctx.textBaseline="bottom",h._activeEffects=[],h.context.logger.debug("Canvas renderer initialized ("+c.width+"x"+c.height+") with scale "+c.scale),h}return pg(t,o),t.prototype.applyEffects=function(n){for(var c=this;this._activeEffects.length;)this.popEffect();n.forEach(function(h){return c.applyEffect(h)})},t.prototype.applyEffect=function(n){this.ctx.save(),n.type===2&&(this.ctx.globalAlpha=n.opacity),function(c){return c.type===0}(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),Oj(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return Id(this,0,void 0,function(){return kh(this,function(c){switch(c.label){case 0:return n.element.container.styles.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return Id(this,0,void 0,function(){return kh(this,function(c){switch(c.label){case 0:return kc(n.container.flags,16),n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return c.sent(),[4,this.renderNodeContent(n)];case 2:c.sent(),c.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,c,h){var f=this;c===0?this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+h):yN(n.text).reduce(function(d,p){return f.ctx.fillText(p,d,n.bounds.top+h),d+f.ctx.measureText(p).width},n.bounds.left)},t.prototype.createFontStyle=function(n){var c=n.fontVariant.filter(function(d){return d==="normal"||d==="small-caps"}).join(""),h=Xve(n.fontFamily).join(", "),f=k2(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,c,n.fontWeight,f,h].join(" "),h,f]},t.prototype.renderTextNode=function(n,c){return Id(this,0,void 0,function(){var h,f,d,p,v,w,S,B,R=this;return kh(this,function(D){return h=this.createFontStyle(c),f=h[0],d=h[1],p=h[2],this.ctx.font=f,this.ctx.direction=c.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",v=this.fontMetrics.getMetrics(d,p),w=v.baseline,S=v.middle,B=c.paintOrder,n.textBounds.forEach(function(O){B.forEach(function(V){switch(V){case 0:R.ctx.fillStyle=lu(c.color),R.renderTextWithLetterSpacing(O,c.letterSpacing,w);var $=c.textShadow;$.length&&O.text.trim().length&&($.slice(0).reverse().forEach(function(G){R.ctx.shadowColor=lu(G.color),R.ctx.shadowOffsetX=G.offsetX.number*R.options.scale,R.ctx.shadowOffsetY=G.offsetY.number*R.options.scale,R.ctx.shadowBlur=G.blur.number,R.renderTextWithLetterSpacing(O,c.letterSpacing,w)}),R.ctx.shadowColor="",R.ctx.shadowOffsetX=0,R.ctx.shadowOffsetY=0,R.ctx.shadowBlur=0),c.textDecorationLine.length&&(R.ctx.fillStyle=lu(c.textDecorationColor||c.color),c.textDecorationLine.forEach(function(G){switch(G){case 1:R.ctx.fillRect(O.bounds.left,Math.round(O.bounds.top+w),O.bounds.width,1);break;case 2:R.ctx.fillRect(O.bounds.left,Math.round(O.bounds.top),O.bounds.width,1);break;case 3:R.ctx.fillRect(O.bounds.left,Math.ceil(O.bounds.top+S),O.bounds.width,1)}}));break;case 1:c.webkitTextStrokeWidth&&O.text.trim().length&&(R.ctx.strokeStyle=lu(c.webkitTextStrokeColor),R.ctx.lineWidth=c.webkitTextStrokeWidth,R.ctx.lineJoin=window.chrome?"miter":"round",R.ctx.strokeText(O.text,O.bounds.left,O.bounds.top+w)),R.ctx.strokeStyle="",R.ctx.lineWidth=0,R.ctx.lineJoin="miter"}})}),[2]})})},t.prototype.renderReplacedElement=function(n,c,h){if(h&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var f=oD(n),d=nD(c);this.path(d),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(h,0,0,n.intrinsicWidth,n.intrinsicHeight,f.left,f.top,f.width,f.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return Id(this,0,void 0,function(){var c,h,f,d,p,v,w,S,B,R,D,O,V,$,G,X,te,ae;return kh(this,function(oe){switch(oe.label){case 0:this.applyEffects(n.getEffects(4)),c=n.container,h=n.curves,f=c.styles,d=0,p=c.textNodes,oe.label=1;case 1:return d<p.length?(v=p[d],[4,this.renderTextNode(v,f)]):[3,4];case 2:oe.sent(),oe.label=3;case 3:return d++,[3,1];case 4:if(!(c instanceof uj))return[3,8];oe.label=5;case 5:return oe.trys.push([5,7,,8]),[4,this.context.cache.match(c.src)];case 6:return G=oe.sent(),this.renderReplacedElement(c,h,G),[3,8];case 7:return oe.sent(),this.context.logger.error("Error loading image "+c.src),[3,8];case 8:if(c instanceof hj&&this.renderReplacedElement(c,h,c.canvas),!(c instanceof dj))return[3,12];oe.label=9;case 9:return oe.trys.push([9,11,,12]),[4,this.context.cache.match(c.svg)];case 10:return G=oe.sent(),this.renderReplacedElement(c,h,G),[3,12];case 11:return oe.sent(),this.context.logger.error("Error loading svg "+c.svg.substring(0,255)),[3,12];case 12:return c instanceof mj&&c.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:c.backgroundColor,x:0,y:0,width:c.width,height:c.height}).render(c.tree)]:[3,14];case 13:w=oe.sent(),c.width&&c.height&&this.ctx.drawImage(w,0,0,c.width,c.height,c.bounds.left,c.bounds.top,c.bounds.width,c.bounds.height),oe.label=14;case 14:if(c instanceof wN&&(S=Math.min(c.bounds.width,c.bounds.height),c.type===KR?c.checked&&(this.ctx.save(),this.path([new tn(c.bounds.left+.39363*S,c.bounds.top+.79*S),new tn(c.bounds.left+.16*S,c.bounds.top+.5549*S),new tn(c.bounds.left+.27347*S,c.bounds.top+.44071*S),new tn(c.bounds.left+.39694*S,c.bounds.top+.5649*S),new tn(c.bounds.left+.72983*S,c.bounds.top+.23*S),new tn(c.bounds.left+.84*S,c.bounds.top+.34085*S),new tn(c.bounds.left+.39363*S,c.bounds.top+.79*S)]),this.ctx.fillStyle=lu(pj),this.ctx.fill(),this.ctx.restore()):c.type===XR&&c.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(c.bounds.left+S/2,c.bounds.top+S/2,S/4,0,2*Math.PI,!0),this.ctx.fillStyle=lu(pj),this.ctx.fill(),this.ctx.restore())),$ve(c)&&c.value.length){switch(B=this.createFontStyle(f),te=B[0],R=B[1],D=this.fontMetrics.getMetrics(te,R).baseline,this.ctx.font=te,this.ctx.fillStyle=lu(f.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=jve(c.styles.textAlign),ae=oD(c),O=0,c.styles.textAlign){case 1:O+=ae.width/2;break;case 2:O+=ae.width}V=ae.add(O,0,0,-ae.height/2+1),this.ctx.save(),this.path([new tn(ae.left,ae.top),new tn(ae.left+ae.width,ae.top),new tn(ae.left+ae.width,ae.top+ae.height),new tn(ae.left,ae.top+ae.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new H2(c.value,V),f.letterSpacing,D),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!kc(c.styles.display,2048))return[3,20];if(c.styles.listStyleImage===null)return[3,19];if(($=c.styles.listStyleImage).type!==0)return[3,18];G=void 0,X=$.url,oe.label=15;case 15:return oe.trys.push([15,17,,18]),[4,this.context.cache.match(X)];case 16:return G=oe.sent(),this.ctx.drawImage(G,c.bounds.left-(G.width+10),c.bounds.top),[3,18];case 17:return oe.sent(),this.context.logger.error("Error loading list-style-image "+X),[3,18];case 18:return[3,20];case 19:n.listValue&&c.styles.listStyleType!==-1&&(te=this.createFontStyle(f)[0],this.ctx.font=te,this.ctx.fillStyle=lu(f.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ae=new rv(c.bounds.left,c.bounds.top+Vo(c.styles.paddingTop,c.bounds.width),c.bounds.width,J3(f.lineHeight,f.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new H2(n.listValue,ae),f.letterSpacing,J3(f.lineHeight,f.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),oe.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return Id(this,0,void 0,function(){var c,h,f,d,p,v,w,S,B,R,D,O,V,$,G;return kh(this,function(X){switch(X.label){case 0:return kc(n.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:X.sent(),c=0,h=n.negativeZIndex,X.label=2;case 2:return c<h.length?(G=h[c],[4,this.renderStack(G)]):[3,5];case 3:X.sent(),X.label=4;case 4:return c++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:X.sent(),f=0,d=n.nonInlineLevel,X.label=7;case 7:return f<d.length?(G=d[f],[4,this.renderNode(G)]):[3,10];case 8:X.sent(),X.label=9;case 9:return f++,[3,7];case 10:p=0,v=n.nonPositionedFloats,X.label=11;case 11:return p<v.length?(G=v[p],[4,this.renderStack(G)]):[3,14];case 12:X.sent(),X.label=13;case 13:return p++,[3,11];case 14:w=0,S=n.nonPositionedInlineLevel,X.label=15;case 15:return w<S.length?(G=S[w],[4,this.renderStack(G)]):[3,18];case 16:X.sent(),X.label=17;case 17:return w++,[3,15];case 18:B=0,R=n.inlineLevel,X.label=19;case 19:return B<R.length?(G=R[B],[4,this.renderNode(G)]):[3,22];case 20:X.sent(),X.label=21;case 21:return B++,[3,19];case 22:D=0,O=n.zeroOrAutoZIndexOrTransformedOrOpacity,X.label=23;case 23:return D<O.length?(G=O[D],[4,this.renderStack(G)]):[3,26];case 24:X.sent(),X.label=25;case 25:return D++,[3,23];case 26:V=0,$=n.positiveZIndex,X.label=27;case 27:return V<$.length?(G=$[V],[4,this.renderStack(G)]):[3,30];case 28:X.sent(),X.label=29;case 29:return V++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var c=this;n.forEach(function(h,f){var d=hf(h)?h.start:h;f===0?c.ctx.moveTo(d.x,d.y):c.ctx.lineTo(d.x,d.y),hf(h)&&c.ctx.bezierCurveTo(h.startControl.x,h.startControl.y,h.endControl.x,h.endControl.y,h.end.x,h.end.y)})},t.prototype.renderRepeat=function(n,c,h,f){this.path(n),this.ctx.fillStyle=c,this.ctx.translate(h,f),this.ctx.fill(),this.ctx.translate(-h,-f)},t.prototype.resizeImage=function(n,c,h){var f;if(n.width===c&&n.height===h)return n;var d=((f=this.canvas.ownerDocument)!==null&&f!==void 0?f:document).createElement("canvas");return d.width=Math.max(1,c),d.height=Math.max(1,h),d.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,c,h),d},t.prototype.renderBackgroundImage=function(n){return Id(this,0,void 0,function(){var c,h,f,d,p,v;return kh(this,function(w){switch(w.label){case 0:c=n.styles.backgroundImage.length-1,h=function(S){var B,R,D,O,V,$,G,X,te,ae,oe,Ae,ve,De,Ne,We,vt,ot,nt,st,mt,It,Jt,jt,_i,xi,Kt,_t,hi,bi,Ge;return kh(this,function(Pe){switch(Pe.label){case 0:if(S.type!==0)return[3,5];B=void 0,R=S.url,Pe.label=1;case 1:return Pe.trys.push([1,3,,4]),[4,f.context.cache.match(R)];case 2:return B=Pe.sent(),[3,4];case 3:return Pe.sent(),f.context.logger.error("Error loading background-image "+R),[3,4];case 4:return B&&(D=FN(n,c,[B.width,B.height,B.width/B.height]),We=D[0],It=D[1],Jt=D[2],nt=D[3],st=D[4],De=f.ctx.createPattern(f.resizeImage(B,nt,st),"repeat"),f.renderRepeat(We,De,It,Jt)),[3,6];case 5:S.type===1?(O=FN(n,c,[null,null,null]),We=O[0],It=O[1],Jt=O[2],nt=O[3],st=O[4],V=function(ut,xt,ct){var Mt,Je,Ut,we,Re,Me,Z,de=typeof ut=="number"?ut:(we=(Je=xt)/2,Re=(Ut=ct)/2,Me=Vo((Mt=ut)[0],Je)-we,Z=Re-Vo(Mt[1],Ut),(Math.atan2(Z,Me)+2*Math.PI)%(2*Math.PI)),Te=Math.abs(xt*Math.sin(de))+Math.abs(ct*Math.cos(de)),Ve=xt/2,Ze=ct/2,qt=Te/2,Tt=Math.sin(de-Math.PI/2)*qt,yi=Math.cos(de-Math.PI/2)*qt;return[Te,Ve-yi,Ve+yi,Ze-Tt,Ze+Tt]}(S.angle,nt,st),$=V[0],G=V[1],X=V[2],te=V[3],ae=V[4],(oe=document.createElement("canvas")).width=nt,oe.height=st,Ae=oe.getContext("2d"),ve=Ae.createLinearGradient(G,te,X,ae),H3(S.stops,$).forEach(function(ut){return ve.addColorStop(ut.stop,lu(ut.color))}),Ae.fillStyle=ve,Ae.fillRect(0,0,nt,st),nt>0&&st>0&&(De=f.ctx.createPattern(oe,"repeat"),f.renderRepeat(We,De,It,Jt))):S.type===2&&(Ne=FN(n,c,[null,null,null]),We=Ne[0],vt=Ne[1],ot=Ne[2],nt=Ne[3],st=Ne[4],mt=S.position.length===0?[AN]:S.position,It=Vo(mt[0],nt),Jt=Vo(mt[mt.length-1],st),jt=function(ut,xt,ct,Mt,Je){var Ut=0,we=0;switch(ut.size){case 0:ut.shape===0?Ut=we=Math.min(Math.abs(xt),Math.abs(xt-Mt),Math.abs(ct),Math.abs(ct-Je)):ut.shape===1&&(Ut=Math.min(Math.abs(xt),Math.abs(xt-Mt)),we=Math.min(Math.abs(ct),Math.abs(ct-Je)));break;case 2:if(ut.shape===0)Ut=we=Math.min(fg(xt,ct),fg(xt,ct-Je),fg(xt-Mt,ct),fg(xt-Mt,ct-Je));else if(ut.shape===1){var Re=Math.min(Math.abs(ct),Math.abs(ct-Je))/Math.min(Math.abs(xt),Math.abs(xt-Mt)),Me=z3(Mt,Je,xt,ct,!0),Z=Me[0],de=Me[1];we=Re*(Ut=fg(Z-xt,(de-ct)/Re))}break;case 1:ut.shape===0?Ut=we=Math.max(Math.abs(xt),Math.abs(xt-Mt),Math.abs(ct),Math.abs(ct-Je)):ut.shape===1&&(Ut=Math.max(Math.abs(xt),Math.abs(xt-Mt)),we=Math.max(Math.abs(ct),Math.abs(ct-Je)));break;case 3:if(ut.shape===0)Ut=we=Math.max(fg(xt,ct),fg(xt,ct-Je),fg(xt-Mt,ct),fg(xt-Mt,ct-Je));else if(ut.shape===1){Re=Math.max(Math.abs(ct),Math.abs(ct-Je))/Math.max(Math.abs(xt),Math.abs(xt-Mt));var Te=z3(Mt,Je,xt,ct,!1);Z=Te[0],de=Te[1],we=Re*(Ut=fg(Z-xt,(de-ct)/Re))}}return Array.isArray(ut.size)&&(Ut=Vo(ut.size[0],Mt),we=ut.size.length===2?Vo(ut.size[1],Je):Ut),[Ut,we]}(S,It,Jt,nt,st),_i=jt[0],xi=jt[1],_i>0&&xi>0&&(Kt=f.ctx.createRadialGradient(vt+It,ot+Jt,0,vt+It,ot+Jt,_i),H3(S.stops,2*_i).forEach(function(ut){return Kt.addColorStop(ut.stop,lu(ut.color))}),f.path(We),f.ctx.fillStyle=Kt,_i!==xi?(_t=n.bounds.left+.5*n.bounds.width,hi=n.bounds.top+.5*n.bounds.height,Ge=1/(bi=xi/_i),f.ctx.save(),f.ctx.translate(_t,hi),f.ctx.transform(1,0,0,bi,0,0),f.ctx.translate(-_t,-hi),f.ctx.fillRect(vt,Ge*(ot-hi)+hi,nt,st*Ge),f.ctx.restore()):f.ctx.fill())),Pe.label=6;case 6:return c--,[2]}})},f=this,d=0,p=n.styles.backgroundImage.slice(0).reverse(),w.label=1;case 1:return d<p.length?(v=p[d],[5,h(v)]):[3,4];case 2:w.sent(),w.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,c,h){return Id(this,0,void 0,function(){return kh(this,function(f){return this.path(Gj(h,c)),this.ctx.fillStyle=lu(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,c,h,f){return Id(this,0,void 0,function(){var d,p;return kh(this,function(v){switch(v.label){case 0:return c<3?[4,this.renderSolidBorder(n,h,f)]:[3,2];case 1:return v.sent(),[2];case 2:return d=function(w,S){switch(S){case 0:return df(w.topLeftBorderBox,w.topLeftBorderDoubleOuterBox,w.topRightBorderBox,w.topRightBorderDoubleOuterBox);case 1:return df(w.topRightBorderBox,w.topRightBorderDoubleOuterBox,w.bottomRightBorderBox,w.bottomRightBorderDoubleOuterBox);case 2:return df(w.bottomRightBorderBox,w.bottomRightBorderDoubleOuterBox,w.bottomLeftBorderBox,w.bottomLeftBorderDoubleOuterBox);default:return df(w.bottomLeftBorderBox,w.bottomLeftBorderDoubleOuterBox,w.topLeftBorderBox,w.topLeftBorderDoubleOuterBox)}}(f,h),this.path(d),this.ctx.fillStyle=lu(n),this.ctx.fill(),p=function(w,S){switch(S){case 0:return df(w.topLeftBorderDoubleInnerBox,w.topLeftPaddingBox,w.topRightBorderDoubleInnerBox,w.topRightPaddingBox);case 1:return df(w.topRightBorderDoubleInnerBox,w.topRightPaddingBox,w.bottomRightBorderDoubleInnerBox,w.bottomRightPaddingBox);case 2:return df(w.bottomRightBorderDoubleInnerBox,w.bottomRightPaddingBox,w.bottomLeftBorderDoubleInnerBox,w.bottomLeftPaddingBox);default:return df(w.bottomLeftBorderDoubleInnerBox,w.bottomLeftPaddingBox,w.topLeftBorderDoubleInnerBox,w.topLeftPaddingBox)}}(f,h),this.path(p),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return Id(this,0,void 0,function(){var c,h,f,d,p,v,w,S,B=this;return kh(this,function(R){switch(R.label){case 0:return this.applyEffects(n.getEffects(2)),c=n.container.styles,h=!py(c.backgroundColor)||c.backgroundImage.length,f=[{style:c.borderTopStyle,color:c.borderTopColor,width:c.borderTopWidth},{style:c.borderRightStyle,color:c.borderRightColor,width:c.borderRightWidth},{style:c.borderBottomStyle,color:c.borderBottomColor,width:c.borderBottomWidth},{style:c.borderLeftStyle,color:c.borderLeftColor,width:c.borderLeftWidth}],d=Wve($C(c.backgroundClip,0),n.curves),h||c.boxShadow.length?(this.ctx.save(),this.path(d),this.ctx.clip(),py(c.backgroundColor)||(this.ctx.fillStyle=lu(c.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:R.sent(),this.ctx.restore(),c.boxShadow.slice(0).reverse().forEach(function(D){B.ctx.save();var O,V,$,G,X,te=iD(n.curves),ae=D.inset?0:1e4,oe=(O=te,V=-ae+(D.inset?1:-1)*D.spread.number,$=(D.inset?1:-1)*D.spread.number,G=D.spread.number*(D.inset?-2:2),X=D.spread.number*(D.inset?-2:2),O.map(function(Ae,ve){switch(ve){case 0:return Ae.add(V,$);case 1:return Ae.add(V+G,$);case 2:return Ae.add(V+G,$+X);case 3:return Ae.add(V,$+X)}return Ae}));D.inset?(B.path(te),B.ctx.clip(),B.mask(oe)):(B.mask(te),B.ctx.clip(),B.path(oe)),B.ctx.shadowOffsetX=D.offsetX.number+ae,B.ctx.shadowOffsetY=D.offsetY.number,B.ctx.shadowColor=lu(D.color),B.ctx.shadowBlur=D.blur.number,B.ctx.fillStyle=D.inset?lu(D.color):"rgba(0,0,0,1)",B.ctx.fill(),B.ctx.restore()}),R.label=2;case 2:p=0,v=0,w=f,R.label=3;case 3:return v<w.length?(S=w[v]).style!==0&&!py(S.color)&&S.width>0?S.style!==2?[3,5]:[4,this.renderDashedDottedBorder(S.color,S.width,p,n.curves,2)]:[3,11]:[3,13];case 4:return R.sent(),[3,11];case 5:return S.style!==3?[3,7]:[4,this.renderDashedDottedBorder(S.color,S.width,p,n.curves,3)];case 6:return R.sent(),[3,11];case 7:return S.style!==4?[3,9]:[4,this.renderDoubleBorder(S.color,S.width,p,n.curves)];case 8:return R.sent(),[3,11];case 9:return[4,this.renderSolidBorder(S.color,p,n.curves)];case 10:R.sent(),R.label=11;case 11:p++,R.label=12;case 12:return v++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,c,h,f,d){return Id(this,0,void 0,function(){var p,v,w,S,B,R,D,O,V,$,G,X,te,ae,oe,Ae;return kh(this,function(ve){return this.ctx.save(),p=function(De,Ne){switch(Ne){case 0:return sD(De.topLeftBorderStroke,De.topRightBorderStroke);case 1:return sD(De.topRightBorderStroke,De.bottomRightBorderStroke);case 2:return sD(De.bottomRightBorderStroke,De.bottomLeftBorderStroke);default:return sD(De.bottomLeftBorderStroke,De.topLeftBorderStroke)}}(f,h),v=Gj(f,h),d===2&&(this.path(v),this.ctx.clip()),hf(v[0])?(w=v[0].start.x,S=v[0].start.y):(w=v[0].x,S=v[0].y),hf(v[1])?(B=v[1].end.x,R=v[1].end.y):(B=v[1].x,R=v[1].y),D=Math.abs(h===0||h===2?w-B:S-R),this.ctx.beginPath(),d===3?this.formatPath(p):this.formatPath(v.slice(0,2)),O=c<3?3*c:2*c,V=c<3?2*c:c,d===3&&(O=c,V=c),$=!0,D<=2*O?$=!1:D<=2*O+V?(O*=G=D/(2*O+V),V*=G):(X=Math.floor((D+V)/(O+V)),te=(D-X*O)/(X-1),V=(ae=(D-(X+1)*O)/X)<=0||Math.abs(V-te)<Math.abs(V-ae)?te:ae),$&&(d===3?this.ctx.setLineDash([0,O+V]):this.ctx.setLineDash([O,V])),d===3?(this.ctx.lineCap="round",this.ctx.lineWidth=c):this.ctx.lineWidth=2*c+1.1,this.ctx.strokeStyle=lu(n),this.ctx.stroke(),this.ctx.setLineDash([]),d===2&&(hf(v[0])&&(oe=v[3],Ae=v[0],this.ctx.beginPath(),this.formatPath([new tn(oe.end.x,oe.end.y),new tn(Ae.start.x,Ae.start.y)]),this.ctx.stroke()),hf(v[1])&&(oe=v[1],Ae=v[2],this.ctx.beginPath(),this.formatPath([new tn(oe.end.x,oe.end.y),new tn(Ae.start.x,Ae.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return Id(this,0,void 0,function(){var c;return kh(this,function(h){switch(h.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=lu(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),f=new Hj(n,null),d=new Nj(f),DN(f,d,d,p=[]),zj(f.container,p),c=d,[4,this.renderStack(c)];case 1:return h.sent(),this.applyEffects([]),[2,this.canvas]}var f,d,p})})},t}($j),$ve=function(o){return o instanceof gj||o instanceof fj||o instanceof wN&&o.type!==XR&&o.type!==KR},Wve=function(o,t){switch(o){case 0:return iD(t);case 2:return[(n=t).topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox];default:return nD(t)}var n},jve=function(o){switch(o){case 1:return"center";case 2:return"right";default:return"left"}},Kve=["-apple-system","system-ui"],Xve=function(o){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?o.filter(function(t){return Kve.indexOf(t)===-1}):o},Yve=function(o){function t(n,c){var h=o.call(this,n,c)||this;return h.canvas=c.canvas?c.canvas:document.createElement("canvas"),h.ctx=h.canvas.getContext("2d"),h.options=c,h.canvas.width=Math.floor(c.width*c.scale),h.canvas.height=Math.floor(c.height*c.scale),h.canvas.style.width=c.width+"px",h.canvas.style.height=c.height+"px",h.ctx.scale(h.options.scale,h.options.scale),h.ctx.translate(-c.x,-c.y),h.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+c.width+"x"+c.height+" at "+c.x+","+c.y+") with scale "+c.scale),h}return pg(t,o),t.prototype.render=function(n){return Id(this,0,void 0,function(){var c,h;return kh(this,function(f){switch(f.label){case 0:return c=vN(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,Jve(c)];case 1:return h=f.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=lu(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(h,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}($j),Jve=function(o){return new Promise(function(t,n){var c=new Image;c.onload=function(){t(c)},c.onerror=n,c.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(o))})},Zve=function(){function o(t){var n=t.id,c=t.enabled;this.id=n,this.enabled=c,this.start=Date.now()}return o.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,yR([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},o.prototype.getTime=function(){return Date.now()-this.start},o.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,yR([this.id,this.getTime()+"ms"],t))},o.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,yR([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},o.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,yR([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},o.instances={},o}(),e0e=function(){function o(t,n){var c;this.windowBounds=n,this.instanceName="#"+o.instanceCount++,this.logger=new Zve({id:this.instanceName,enabled:t.logging}),this.cache=(c=t.cache)!==null&&c!==void 0?c:new Dve(this,t)}return o.instanceCount=1,o}();typeof window<"u"&&Pj.setContext(window);var t0e=Object.defineProperty,i0e=Object.getOwnPropertyDescriptor,lD=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?i0e(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&t0e(t,n,f),f};let WC=class extends ft{constructor(){super(...arguments),this._saving3D=!1,this._saving2D=!1}download3D(){this._saving3D=!0,setTimeout(async()=>{const o=await this.viewerSettings.viewer3DElement.toBlob(),t=new Image;t.onload=async()=>{const n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0);const c=this.viewerSettings.viewer3DElement.style.background;var h,f;this.viewerSettings.viewer3DElement.style.background="",await(h=this.viewerSettings.viewer3DElement,f={canvas:n,backgroundColor:null},f===void 0&&(f={}),function(d,p){return Id(void 0,0,void 0,function(){var v,w,S,B,R,D,O,V,$,G,X,te,ae,oe,Ae,ve,De,Ne,We,vt,ot,nt,st,mt,It,Jt,jt,_i,xi,Kt,_t,hi,bi,Ge,Pe,ut,xt,ct;return kh(this,function(Mt){switch(Mt.label){case 0:if(!d||typeof d!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(!(v=d.ownerDocument))throw new Error("Element is not attached to a Document");if(!(w=v.defaultView))throw new Error("Document is not attached to a Window");return S={allowTaint:(nt=p.allowTaint)!==null&&nt!==void 0&&nt,imageTimeout:(st=p.imageTimeout)!==null&&st!==void 0?st:15e3,proxy:p.proxy,useCORS:(mt=p.useCORS)!==null&&mt!==void 0&&mt},B=tN({logging:(It=p.logging)===null||It===void 0||It,cache:p.cache},S),R={windowWidth:(Jt=p.windowWidth)!==null&&Jt!==void 0?Jt:w.innerWidth,windowHeight:(jt=p.windowHeight)!==null&&jt!==void 0?jt:w.innerHeight,scrollX:(_i=p.scrollX)!==null&&_i!==void 0?_i:w.pageXOffset,scrollY:(xi=p.scrollY)!==null&&xi!==void 0?xi:w.pageYOffset},D=new rv(R.scrollX,R.scrollY,R.windowWidth,R.windowHeight),O=new e0e(B,D),V=(Kt=p.foreignObjectRendering)!==null&&Kt!==void 0&&Kt,$={allowTaint:(_t=p.allowTaint)!==null&&_t!==void 0&&_t,onclone:p.onclone,ignoreElements:p.ignoreElements,inlineImages:V,copyStyles:V},O.logger.debug("Starting document clone with size "+D.width+"x"+D.height+" scrolled to "+-D.left+","+-D.top),G=new kj(O,d,$),(X=G.clonedReferenceElement)?[4,G.toIFrame(v,D)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return te=Mt.sent(),ae=CN(X)||X.tagName==="HTML"?function(Je){var Ut=Je.body,we=Je.documentElement;if(!Ut||!we)throw new Error("Unable to get document size");var Re=Math.max(Math.max(Ut.scrollWidth,we.scrollWidth),Math.max(Ut.offsetWidth,we.offsetWidth),Math.max(Ut.clientWidth,we.clientWidth)),Me=Math.max(Math.max(Ut.scrollHeight,we.scrollHeight),Math.max(Ut.offsetHeight,we.offsetHeight),Math.max(Ut.clientHeight,we.clientHeight));return new rv(0,0,Re,Me)}(X.ownerDocument):bR(O,X),oe=ae.width,Ae=ae.height,ve=ae.left,De=ae.top,Ne=function(Je,Ut,we){var Re=Ut.ownerDocument,Me=Re.documentElement?P2(Je,getComputedStyle(Re.documentElement).backgroundColor):ov.TRANSPARENT,Z=Re.body?P2(Je,getComputedStyle(Re.body).backgroundColor):ov.TRANSPARENT,de=typeof we=="string"?P2(Je,we):we===null?ov.TRANSPARENT:4294967295;return Ut===Re.documentElement?py(Me)?py(Z)?de:Z:Me:de}(O,X,p.backgroundColor),We={canvas:p.canvas,backgroundColor:Ne,scale:(bi=(hi=p.scale)!==null&&hi!==void 0?hi:w.devicePixelRatio)!==null&&bi!==void 0?bi:1,x:((Ge=p.x)!==null&&Ge!==void 0?Ge:0)+ve,y:((Pe=p.y)!==null&&Pe!==void 0?Pe:0)+De,width:(ut=p.width)!==null&&ut!==void 0?ut:Math.ceil(oe),height:(xt=p.height)!==null&&xt!==void 0?xt:Math.ceil(Ae)},V?(O.logger.debug("Document cloned, using foreign object rendering"),[4,new Yve(O,We).render(X)]):[3,3];case 2:return vt=Mt.sent(),[3,5];case 3:return O.logger.debug("Document cloned, element located at "+ve+","+De+" with size "+oe+"x"+Ae+" using computed rendering"),O.logger.debug("Starting DOM parsing"),ot=vj(O,X),Ne===ot.styles.backgroundColor&&(ot.styles.backgroundColor=ov.TRANSPARENT),O.logger.debug("Starting renderer for element at "+We.x+","+We.y+" with size "+We.width+"x"+We.height),[4,new qve(O,We).render(ot)];case 4:vt=Mt.sent(),Mt.label=5;case 5:return((ct=p.removeContainer)===null||ct===void 0||ct)&&(kj.destroy(te)||O.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),O.logger.debug("Finished rendering"),[2,vt]}})})}(h,f)),this.viewerSettings.viewer3DElement.style.background=c,n.toBlob(d=>{if(d){const p=document.createElement("a");p.href=URL.createObjectURL(d),p.download="view-3d.png",p.click(),this._saving3D=!1}})},t.src=URL.createObjectURL(o)},20)}download2D(){this._saving2D=!0,setTimeout(()=>{this.viewerSettings.viewer2DElement.viewer.drawer.canvas.toBlob(o=>{if(o){const t=document.createElement("a");t.href=window.URL.createObjectURL(o),t.download="view-2d.png",t.click()}this._saving2D=!1},"image/png")},20)}render(){return Ie`
        <div id="layout">
            <div class="row">
                <div class="alignCenter">
                    <ui5-button @click="${()=>{this.download3D()}}" ?disabled="${this._saving3D}" title="Save 3D view">3D</ui5-button>
                </div>
                <div class="alignCenter">
                    <ui5-button @click="${()=>{this.download2D()}}" ?disabled="${this._saving2D}" title="Save 2D view">2D</ui5-button>
                </div>
            </div>
            <ui5-busy-indicator ?active="${this._saving2D||this._saving3D}" delay="0"></ui5-busy-indicator>
        </div>
    `}};WC.styles=A`
    :host {
      min-width: 15em;
      height: 100%;
      width: 100%;
    }

    #layout {
      position: relative;
      min-width: 15em;
      display: flex;
      align-items: stretch;
      flex-direction: column;
      gap: 1rem;
    }

    .row {
      display: flex;
      flex: 1;
      flex-direction: row;
      gap: 1rem;
      justify-content: space-between;
      width: 100%;
    }

    .alignCenter {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    ui5-button {
      padding: 0.25rem;
    }

    ui5-label {
      --sapFontSize: 15;
    }
  `,lD([$t({type:Object})],WC.prototype,"viewerSettings",2),lD([ti()],WC.prototype,"_saving3D",2),lD([ti()],WC.prototype,"_saving2D",2),WC=lD([Gt("export-tool")],WC);var n0e=Object.defineProperty,r0e=Object.getOwnPropertyDescriptor,cD=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?r0e(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&n0e(t,n,f),f};const Wj={doubleview:()=>W_(`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g id="double_view">
	<g>	
		<path d="M28.347,56.693h226.771v4h-226.77z"/>
		<path d="M28.347,56.693v170.079h4v-170.079z"/>
		<path d="M255.118,226.772h-226.771v4h226.77z"/>
		<path d="M255.118,226.772v-170.079h-4v170.079z"/>
	</g>
	<g>
		<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057
			c-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945
			c-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791
			c1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112
			h-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>
		<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427
			c1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426
			c-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688
			s2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478
			L100.871,151.478z"/>
	</g>
	<g>
		<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246
			c0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002
			c-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645
			s5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931
			c1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245
			V152.283z"/>
		<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436
			c1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437
			c-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689
			c1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23
			L214.226,152.23z"/>
	</g>
	<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>
</g>
`),"doubleview-mobile":()=>W_(`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g id="double_view_mobile">
		<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>
	<g>
		<path d="M132.829,84.75c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057c-1.177,1.863-2.969,3.365-5.373,4.505
			c-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946c-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848
			c1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791c1.79,0,3.213-0.334,4.267-0.999
			c1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111h-14.541v-8.061h26.657v6.533
			l-7.639,8.217C128.853,81.617,131.197,82.873,132.829,84.75z"/>
		<path d="M140.547,66.233h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427
			c1.722,2.775,2.582,6.023,2.582,9.746c0,3.723-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426
			c-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V66.233z M157.564,94.786c3.16,0,5.697-0.896,7.611-2.687s2.871-4.267,2.871-7.428
			c0-3.161-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229L157.564,94.786L157.564,94.786z"/>
	</g>
	<g>
		<path d="M135.532,208.976v8.281H106.78v-6.541l13.821-12.924c1.337-1.268,2.233-2.349,2.691-3.246
			c0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002
			c-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.392,3.464-4.273,6.066-5.646
			c2.602-1.372,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.163,0.916,3.852,2.227,5.063,3.932
			c1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.776-2.524,3.791-4.985,6.041l-6.965,6.436
			H135.532z"/>
		<path d="M140.493,180.33h17.461c4.045,0,7.631,0.756,10.762,2.27c3.131,1.512,5.559,3.658,7.281,6.436
			c1.724,2.78,2.584,6.033,2.584,9.762s-0.86,6.98-2.584,9.761c-1.724,2.778-4.15,4.923-7.281,6.437
			c-3.131,1.512-6.717,2.268-10.762,2.268h-17.461V180.33z M157.535,208.923c3.164,0,5.705-0.896,7.623-2.69
			c1.916-1.794,2.873-4.271,2.873-7.438c0-3.166-0.957-5.645-2.873-7.438c-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597
			V208.923z"/>
	</g>
	<line stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>
</g>`),singleview:()=>W_(`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g>	
	<path d="M28.347,56.693h226.771v4h-226.77z"/>
	<path d="M28.347,56.693v170.079h4v-170.079z"/>
	<path d="M255.118,226.772h-226.771v4h226.77z"/>
	<path d="M255.118,226.772v-170.079h-4v170.079z"/>
</g>
<g>
	<path d="M84.09,100.5c1.634,1.879,2.45,4.154,2.45,6.822c0,2.179-0.588,4.198-1.765,6.058c-1.177,1.863-2.968,3.364-5.373,4.505
		c-2.406,1.141-5.383,1.712-8.93,1.712c-2.6,0-5.172-0.316-7.718-0.949c-2.547-0.631-4.75-1.527-6.612-2.686l3.793-7.851
		c1.44,0.985,3.063,1.739,4.873,2.266c1.809,0.526,3.59,0.791,5.348,0.791c1.791,0,3.213-0.333,4.267-1.002
		c1.054-0.666,1.58-1.614,1.58-2.845c0-2.388-1.879-3.582-5.637-3.582h-4.372v-6.586l6.585-7.111h-14.54v-8.061h26.657v6.533
		l-7.639,8.218C80.113,97.366,82.458,98.622,84.09,100.5z"/>
	<path d="M91.808,81.982h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.269,6.427
		c1.721,2.775,2.581,6.023,2.581,9.746s-0.86,6.972-2.581,9.746c-1.72,2.775-4.145,4.918-7.269,6.427
		c-3.126,1.511-6.709,2.266-10.747,2.266H91.808V81.982z M108.824,110.536c3.161,0,5.697-0.895,7.612-2.686
		c1.914-1.792,2.871-4.268,2.871-7.428c0-3.161-0.957-5.637-2.871-7.428c-1.915-1.792-4.451-2.687-7.612-2.687h-6.585v20.229
		H108.824z"/>
</g>
<g>
	<line stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721" x1="36.324" y1="220.789" x2="249.128" y2="61.185"/>
</g>
<g>
	<path d="M184.332,193.225v8.282H155.58v-6.541l13.821-12.926c1.337-1.266,2.233-2.349,2.69-3.244
		c0.457-0.897,0.686-1.803,0.686-2.717c0-1.194-0.402-2.127-1.212-2.797c-0.81-0.668-1.987-1.004-3.535-1.004
		c-1.37,0-2.629,0.309-3.771,0.924c-1.145,0.618-2.084,1.506-2.822,2.666l-7.755-4.326c1.44-2.392,3.464-4.272,6.065-5.646
		c2.604-1.371,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.164,0.916,3.852,2.226,5.063,3.932
		c1.216,1.706,1.824,3.686,1.824,5.934c0,2.004-0.433,3.896-1.295,5.672c-0.861,1.776-2.523,3.791-4.984,6.041l-6.965,6.437H184.332
		L184.332,193.225z"/>
	<path d="M189.292,164.58h17.461c4.045,0,7.632,0.756,10.763,2.269c3.13,1.513,5.558,3.657,7.28,6.437
		c1.724,2.778,2.584,6.031,2.584,9.76c0,3.729-0.86,6.981-2.584,9.762c-1.724,2.777-4.15,4.923-7.28,6.436
		c-3.131,1.512-6.718,2.269-10.763,2.269h-17.461V164.58z M206.333,193.171c3.164,0,5.705-0.896,7.621-2.689
		c1.918-1.794,2.875-4.271,2.875-7.439c0-3.164-0.957-5.644-2.875-7.438c-1.916-1.794-4.457-2.691-7.621-2.691h-6.599v20.26h6.599
		V193.171z"/>
</g>
`),"singleview-mobile":()=>W_(`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g>
    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">
        <path d="M84.09,100.5C85.724,102.379 86.54,104.654 86.54,107.322C86.54,109.501 85.952,111.52 84.775,113.38C83.598,115.243 81.807,116.744 79.402,117.885C76.996,119.026 74.019,119.597 70.472,119.597C67.872,119.597 65.3,119.281 62.754,118.648C60.207,118.017 58.004,117.121 56.142,115.962L59.935,108.111C61.375,109.096 62.998,109.85 64.808,110.377C66.617,110.903 68.398,111.168 70.156,111.168C71.947,111.168 73.369,110.835 74.423,110.166C75.477,109.5 76.003,108.552 76.003,107.321C76.003,104.933 74.124,103.739 70.366,103.739L65.994,103.739L65.994,97.153L72.579,90.042L58.039,90.042L58.039,81.981L84.696,81.981L84.696,88.514L77.057,96.732C80.113,97.366 82.458,98.622 84.09,100.5Z" style="fill-rule:nonzero;"/>
    </g>
    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">
        <path d="M91.808,81.982L109.246,81.982C113.284,81.982 116.867,82.738 119.993,84.248C123.117,85.758 125.542,87.901 127.262,90.675C128.983,93.45 129.843,96.698 129.843,100.421C129.843,104.144 128.983,107.393 127.262,110.167C125.542,112.942 123.117,115.085 119.993,116.594C116.867,118.105 113.284,118.86 109.246,118.86L91.808,118.86L91.808,81.982ZM108.824,110.536C111.985,110.536 114.521,109.641 116.436,107.85C118.35,106.058 119.307,103.582 119.307,100.422C119.307,97.261 118.35,94.785 116.436,92.994C114.521,91.202 111.985,90.307 108.824,90.307L102.239,90.307L102.239,110.536L108.824,110.536Z" style="fill-rule:nonzero;"/>
    </g>
</g>
<g transform="matrix(0.992491,-0.32133,0.25458,0.992398,-36.1177,47.6794)">
    <g>
        <path d="M36.324,220.789L249.128,61.185" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721"/>
    </g>
</g>
<g>
    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">
        <path d="M184.332,193.225L184.332,201.507L155.58,201.507L155.58,194.966L169.401,182.04C170.738,180.774 171.634,179.691 172.091,178.796C172.548,177.899 172.777,176.993 172.777,176.079C172.777,174.885 172.375,173.952 171.565,173.282C170.755,172.614 169.578,172.278 168.03,172.278C166.66,172.278 165.401,172.587 164.259,173.202C163.114,173.82 162.175,174.708 161.437,175.868L153.682,171.542C155.122,169.15 157.146,167.27 159.747,165.896C162.351,164.525 165.427,163.838 168.979,163.838C171.792,163.838 174.282,164.295 176.444,165.209C178.608,166.125 180.296,167.435 181.507,169.141C182.723,170.847 183.331,172.827 183.331,175.075C183.331,177.079 182.898,178.971 182.036,180.747C181.175,182.523 179.513,184.538 177.052,186.788L170.087,193.225L184.332,193.225Z" style="fill-rule:nonzero;"/>
    </g>
    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">
        <path d="M189.292,164.58L206.753,164.58C210.798,164.58 214.385,165.336 217.516,166.849C220.646,168.362 223.074,170.506 224.796,173.286C226.52,176.064 227.38,179.317 227.38,183.046C227.38,186.775 226.52,190.027 224.796,192.808C223.072,195.585 220.646,197.731 217.516,199.244C214.385,200.756 210.798,201.513 206.753,201.513L189.292,201.513L189.292,164.58ZM206.333,193.171C209.497,193.171 212.038,192.275 213.954,190.482C215.872,188.688 216.829,186.211 216.829,183.043C216.829,179.879 215.872,177.399 213.954,175.605C212.038,173.811 209.497,172.914 206.333,172.914L199.734,172.914L199.734,193.174L206.333,193.174L206.333,193.171Z" style="fill-rule:nonzero;"/>
    </g>
</g>
<g>
    <rect x="56.693" y="28.347" width="170.079" height="226.771" stroke-width="4" fill="none"/>
</g>
`),"doubleview-synced":()=>W_(`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g id="double_view_synced">
	<g>	
		<path d="M28.347,56.693h226.771v4h-226.77z"/>
		<path d="M28.347,56.693v170.079h4v-170.079z"/>
		<path d="M255.118,226.772h-226.771v4h226.77z"/>
		<path d="M255.118,226.772v-170.079h-4v170.079z"/>
	</g>
	<g>
		<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057
			c-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945
			c-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791
			c1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112
			h-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>
		<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427
			c1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426
			c-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688
			s2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478
			L100.871,151.478z"/>
	</g>
	<g>
		<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246
			c0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002
			c-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645
			s5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931
			c1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245
			V152.283z"/>
		<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436
			c1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437
			c-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689
			c1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23
			L214.226,152.23z"/>
	</g>
	<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>
	<path d="M171.183,87.604c-4.617-7.616-11.391-13.276-19.449-16.142c-9.447-3.359-19.521-2.491-28.371,2.445
		c-8.85,4.936-15.413,13.347-18.481,23.685l8.746,3.109c2.31-7.78,7.25-14.11,13.911-17.827c6.661-3.715,14.245-4.369,21.354-1.84
		c5.717,2.034,10.555,5.953,14.004,11.192l-7.537,4.204l10.929,7.769l10.935,7.771l0.679-14.248l0.684-14.244L171.183,87.604z"/>
	<path d="M112.281,195.862c4.618,7.616,11.388,13.276,19.45,16.144c9.446,3.357,19.522,2.49,28.372-2.445
		s15.413-13.348,18.479-23.686l-8.744-3.108c-2.31,7.78-7.25,14.11-13.91,17.825c-6.66,3.716-14.246,4.369-21.355,1.844
		c-5.716-2.035-10.552-5.955-14.002-11.193l7.538-4.203l-10.931-7.77l-10.933-7.771l-0.679,14.246l-0.684,14.248L112.281,195.862z"
		/>
</g>
`),"doubleview-synced-mobile":()=>W_(`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g id="double_view_synced_mobile">
		<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>
	<g>
		<path d="M132.829,70.578c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057
			c-1.177,1.863-2.969,3.365-5.373,4.505c-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946
			c-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848c1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791
			c1.79,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111
			h-14.541V52.06h26.657v6.533l-7.639,8.217C128.853,67.444,131.197,68.7,132.829,70.578z"/>
		<path d="M140.547,52.06h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427
			c1.722,2.775,2.582,6.023,2.582,9.746s-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426
			c-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V52.06z M157.564,80.613c3.16,0,5.697-0.896,7.611-2.687
			c1.914-1.791,2.871-4.267,2.871-7.428s-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229
			L157.564,80.613L157.564,80.613z"/>
	</g>
	<g>
		<path d="M135.532,223.15v8.282H106.78v-6.542l13.821-12.924c1.337-1.268,2.233-2.348,2.691-3.246
			c0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002
			c-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.391,3.464-4.273,6.066-5.646
			c2.602-1.372,5.68-2.057,9.232-2.057c2.813,0,5.303,0.457,7.465,1.371c2.163,0.915,3.852,2.226,5.063,3.931
			c1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.436
			H135.532z"/>
		<path d="M140.493,194.503h17.461c4.045,0,7.631,0.756,10.762,2.269s5.559,3.658,7.281,6.437c1.724,2.779,2.584,6.033,2.584,9.761
			c0,3.729-0.86,6.981-2.584,9.761c-1.724,2.777-4.15,4.923-7.281,6.436s-6.717,2.269-10.762,2.269h-17.461V194.503z
			 M157.535,223.097c3.164,0,5.705-0.896,7.623-2.69c1.916-1.794,2.873-4.271,2.873-7.438s-0.957-5.646-2.873-7.438
			c-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597V223.097z"/>
	</g>
	<line  stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>
	<path d="M195.861,171.183c7.616-4.617,13.276-11.391,16.143-19.449c3.359-9.447,2.492-19.521-2.444-28.371
		c-4.937-8.85-13.349-15.413-23.685-18.481l-3.109,8.746c7.779,2.31,14.109,7.249,17.826,13.911
		c3.716,6.661,4.369,14.245,1.841,21.354c-2.034,5.717-5.953,10.555-11.192,14.004l-4.203-7.537l-7.77,10.929l-7.771,10.935
		l14.248,0.679l14.243,0.684L195.861,171.183z"/>
	<path d="M87.603,112.282c-7.616,4.617-13.276,11.388-16.143,19.449c-3.358,9.446-2.49,19.522,2.445,28.372
		c4.936,8.85,13.347,15.413,23.685,18.479l3.109-8.744c-7.78-2.31-14.11-7.25-17.826-13.91c-3.715-6.66-4.369-14.245-1.843-21.354
		c2.035-5.717,5.955-10.553,11.193-14.002l4.204,7.538l7.769-10.932l7.771-10.933l-14.246-0.679l-14.247-0.685L87.603,112.282z"/>
</g>
`),rotation:()=>W_(`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g id="Ebene_2_Kopie">

	<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.347" y1="255.121" x2="28.347" y2="28.344"/>

	<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="255.119" y2="255.121"/>

	<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="221.982" y2="61.482"/>
	<g>
		<path d="M202.653,96.368l-7.829,7.829c4.909,5.954,8.646,12.978,10.756,20.852c8.142,30.384-10.805,61.953-42.229,70.373
			l-3.644-13.592l-28.735,27.984l38.878,9.863l-3.643-13.596c37.303-9.994,59.748-47.629,50.031-83.89
			C213.609,112.381,208.876,103.672,202.653,96.368z"/>
		<path d="M177.707,90.202l8.084-8.083c-15.77-9.456-35.422-12.758-54.826-7.559c-17.677,4.736-32.636,15.802-42.119,31.156
			l9.388,5.8c8-12.952,20.639-22.291,35.587-26.297C149.246,81.085,164.847,83.297,177.707,90.202z"/>
	</g>
</g>
</svg>
`),measure:()=>W_(`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<g>
	<g>
		<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="56.692" y1="204.288" x2="56.692" y2="232.538"/>
		
			<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="113.385" y1="204.288" x2="113.385" y2="232.538"/>
		<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="170.08" y1="204.288" x2="170.08" y2="232.538"/>
		
			<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="141.732" y1="204.287" x2="141.732" y2="221.237"/>
		<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="85.039" y1="204.287" x2="85.039" y2="221.237"/>
		<g>
			<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M216.394,246.657l-24.545-42.369H14.173v56.5
				h226.772c0.127,0,0.25-0.008,0.375-0.01C231.4,260.901,221.707,255.827,216.394,246.657z"/>
		</g>
	</g>
	<g>
		<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="173.365" y1="59.376" x2="148.816" y2="73.501"/>
		
			<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="201.71" y1="108.308" x2="177.164" y2="122.434"/>
		
			<line fill="none"  stroke-width="10" stroke-miterlimit="10" x1="230.056" y1="157.242" x2="205.509" y2="171.368"/>
		
			<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="215.884" y1="132.773" x2="201.156" y2="141.25"/>
		<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="187.539" y1="83.841" x2="172.808" y2="92.317"/>
		<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M265.49,218.408L265.49,218.408L152.105,22.677
			l-49.099,28.25l113.388,195.73c7.828,13.511,25.162,18.142,38.721,10.342C268.673,249.198,273.316,231.92,265.49,218.408z
			 M240.945,246.663c-7.826,0-14.172-6.324-14.172-14.124c0-7.801,6.346-14.125,14.172-14.125c7.828,0,14.174,6.324,14.174,14.125
			C255.119,240.338,248.773,246.663,240.945,246.663z"/>
	</g>
</g>
`),environment3D:()=>W_(`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<g id="surface1">
    <g fill="none" stroke-width="50px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">
        <path d="M2295,1430.47C2294.8,1429.26 2294.51,1428.1 2294.31,1426.95C2294.21,1426.36 2294.08,1425.69 2293.96,1425.1C2293.86,1424.6 2293.74,1424.01 2293.66,1423.54C2293.41,1422.38 2293.22,1421.19 2292.94,1420C2291.88,1415.51 2290.47,1410.96 2288.78,1406.45C2287.06,1401.87 2285.05,1397.3 2282.7,1392.72C2280.36,1388.17 2277.69,1383.63 2274.71,1379.05C2271.73,1374.5 2268.43,1369.95 2264.83,1365.36C2261.22,1360.83 2257.3,1356.31 2253.1,1351.81C2248.91,1347.32 2244.39,1342.81 2239.58,1338.37C2234.77,1333.92 2229.66,1329.53 2224.28,1325.18C2218.91,1320.8 2213.21,1316.46 2207.28,1312.21C2201.33,1307.95 2195.1,1303.7 2188.62,1299.54C2182.14,1295.39 2175.37,1291.28 2168.35,1287.26C2164.85,1285.24 2161.28,1283.26 2157.64,1281.27C2154.01,1279.32 2150.3,1277.33 2146.55,1275.4C2142.8,1273.48 2138.96,1271.57 2135.09,1269.67C2131.21,1267.78 2127.27,1265.92 2123.28,1264.09C2119.28,1262.23 2115.22,1260.38 2111.1,1258.6C2106.98,1256.77 2102.83,1255.02 2098.61,1253.23C2094.37,1251.48 2090.09,1249.73 2085.76,1248.03C2081.42,1246.31 2077.03,1244.64 2072.59,1243C2068.15,1241.33 2063.66,1239.71 2059.12,1238.12C2054.55,1236.51 2049.95,1234.95 2045.31,1233.41C2040.67,1231.85 2035.98,1230.37 2031.24,1228.87C2026.5,1227.39 2021.69,1225.93 2016.87,1224.53C2012.03,1223.09 2007.15,1221.68 2002.23,1220.32C1997.28,1218.97 1992.31,1217.67 1987.28,1216.38C1982.27,1215.07 1977.21,1213.8 1972.1,1212.59C1967.01,1211.37 1961.87,1210.16 1956.69,1208.99C1951.52,1207.83 1946.29,1206.73 1941.03,1205.65C1935.77,1204.55 1930.46,1203.49 1925.13,1202.45C1919.79,1201.43 1914.42,1200.51 1909.01,1199.57C1903.59,1198.63 1898.14,1197.73 1892.66,1196.85C1887.18,1195.99 1881.67,1195.15 1876.13,1194.38C1870.58,1193.57 1865,1192.87 1859.41,1192.16C1853.8,1191.46 1848.13,1190.76 1842.47,1190.14C1836.79,1189.53 1831.1,1188.94 1825.37,1188.42C1819.64,1187.86 1813.87,1187.38 1808.09,1186.94C1802.31,1186.48 1796.5,1186.08 1790.65,1185.73C1784.82,1185.35 1778.98,1185.03 1773.08,1184.74C1767.18,1184.45 1761.27,1184.22 1755.34,1184.04C1749.42,1183.87 1743.48,1183.72 1737.5,1183.64C1731.52,1183.53 1725.49,1183.5 1719.5,1183.5C1713.49,1183.5 1707.49,1183.55 1701.51,1183.64C1695.51,1183.72 1689.57,1183.87 1683.65,1184.04C1677.72,1184.22 1671.79,1184.45 1665.91,1184.76C1660.03,1185.03 1654.17,1185.31 1648.34,1185.7C1642.49,1186.08 1636.68,1186.48 1630.9,1186.94C1625.1,1187.38 1619.36,1187.86 1613.63,1188.42C1607.91,1188.94 1602.22,1189.52 1596.54,1190.14C1590.86,1190.76 1585.21,1191.44 1579.6,1192.16C1573.99,1192.86 1568.43,1193.57 1562.87,1194.38C1557.32,1195.15 1551.81,1195.99 1546.31,1196.87C1540.85,1197.73 1535.41,1198.63 1530,1199.57C1524.59,1200.53 1519.21,1201.48 1513.86,1202.49C1508.54,1203.49 1503.23,1204.55 1497.96,1205.67C1492.7,1206.73 1487.48,1207.83 1482.28,1208.99C1477.11,1210.17 1471.96,1211.37 1466.85,1212.59C1461.76,1213.82 1456.7,1215.11 1451.69,1216.39C1446.67,1217.67 1441.71,1219 1436.77,1220.36C1431.86,1221.71 1426.97,1223.09 1422.12,1224.53C1417.28,1225.94 1412.51,1227.39 1407.75,1228.87C1403.01,1230.37 1398.3,1231.86 1393.68,1233.41C1389.04,1234.96 1384.43,1236.53 1379.87,1238.15C1375.33,1239.72 1370.84,1241.35 1366.4,1243.02C1361.96,1244.66 1357.58,1246.33 1353.24,1248.05C1348.9,1249.75 1344.62,1251.5 1340.39,1253.25C1336.15,1255.02 1331.99,1256.78 1327.87,1258.6C1323.77,1260.4 1319.71,1262.24 1315.71,1264.1C1311.72,1265.93 1307.77,1267.8 1303.88,1269.69C1300.01,1271.58 1296.19,1273.48 1292.44,1275.4C1288.69,1277.33 1284.99,1279.33 1281.35,1281.29C1277.71,1283.26 1274.15,1285.29 1270.64,1287.31C1263.62,1291.3 1256.86,1295.41 1250.37,1299.56C1243.89,1303.73 1237.64,1307.95 1231.69,1312.23C1225.76,1316.44 1220.07,1320.84 1214.69,1325.2C1209.31,1329.56 1204.2,1333.93 1199.39,1338.37C1194.6,1342.83 1190.08,1347.33 1185.88,1351.84C1181.67,1356.32 1177.77,1360.84 1174.16,1365.38C1170.56,1369.96 1167.26,1374.51 1164.28,1379.07C1161.3,1383.65 1158.63,1388.18 1156.29,1392.78C1153.94,1397.3 1151.92,1401.89 1150.19,1406.47C1148.48,1410.97 1147.11,1415.52 1146.05,1420.03C1145.77,1421.19 1145.6,1422.38 1145.35,1423.5C1145.22,1424.12 1145.1,1424.79 1144.98,1425.36C1144.88,1425.88 1144.76,1426.44 1144.68,1426.93C1144.46,1428.1 1144.19,1429.26 1143.99,1430.48C1143.79,1431.76 1143.66,1433.12 1143.51,1434.49C1143.66,1435.86 1143.79,1437.25 1143.99,1438.55C1144.19,1439.75 1144.48,1440.87 1144.68,1442.05C1144.8,1442.62 1144.91,1443.29 1145.03,1443.88C1145.13,1444.41 1145.25,1445 1145.35,1445.46C1145.6,1446.6 1145.77,1447.8 1146.05,1449.01C1147.11,1453.49 1148.52,1458.03 1150.21,1462.53C1151.93,1467.13 1153.94,1471.7 1156.29,1476.28C1158.63,1480.82 1161.3,1485.35 1164.28,1489.97C1167.26,1494.49 1170.56,1499.07 1174.16,1503.64C1177.77,1508.16 1181.69,1512.69 1185.89,1517.2C1190.1,1521.68 1194.6,1526.17 1199.41,1530.63C1204.22,1535.12 1209.33,1539.46 1214.71,1543.82C1220.09,1548.2 1225.78,1552.54 1231.73,1556.78C1237.66,1561.06 1243.89,1565.31 1250.37,1569.46C1256.86,1573.63 1263.62,1577.72 1270.64,1581.74C1274.15,1583.73 1277.71,1585.75 1281.37,1587.71C1284.99,1589.68 1288.69,1591.67 1292.44,1593.58C1296.19,1595.51 1300.03,1597.42 1303.9,1599.3C1307.79,1601.19 1311.72,1603.08 1315.73,1604.91C1319.71,1606.74 1323.79,1608.62 1327.89,1610.39C1332.01,1612.24 1336.16,1613.97 1340.39,1615.74C1344.62,1617.5 1348.91,1619.25 1353.25,1620.95C1357.58,1622.66 1361.96,1624.35 1366.4,1626C1370.84,1627.65 1375.33,1629.28 1379.89,1630.9C1384.45,1632.49 1389.04,1634.05 1393.68,1635.6C1398.32,1637.16 1403.03,1638.64 1407.75,1640.1C1412.51,1641.63 1417.28,1643.04 1422.12,1644.48C1426.97,1645.91 1431.86,1647.33 1436.78,1648.68C1441.73,1650.03 1446.68,1651.37 1451.69,1652.62C1456.72,1653.94 1461.78,1655.19 1466.89,1656.41C1471.98,1657.64 1477.12,1658.85 1482.3,1659.98C1487.49,1661.19 1492.7,1662.24 1497.96,1663.33C1503.23,1664.45 1508.54,1665.51 1513.86,1666.55C1519.21,1667.57 1524.59,1668.47 1530,1669.41C1535.41,1670.35 1540.85,1671.28 1546.31,1672.13C1551.81,1672.99 1557.32,1673.81 1562.87,1674.63C1568.41,1675.4 1573.99,1676.11 1579.6,1676.83C1585.21,1677.55 1590.86,1678.23 1596.52,1678.87C1602.2,1679.49 1607.9,1680.04 1613.63,1680.59C1619.36,1681.13 1625.1,1681.63 1630.88,1682.07C1636.68,1682.49 1642.49,1682.92 1648.34,1683.29C1654.17,1683.66 1660.03,1683.99 1665.91,1684.25C1671.79,1684.55 1677.72,1684.75 1683.65,1684.94C1689.57,1685.14 1695.51,1685.23 1701.5,1685.36C1707.48,1685.44 1713.47,1685.5 1719.49,1685.5C1725.49,1685.5 1731.5,1685.44 1737.48,1685.36C1743.46,1685.23 1749.42,1685.14 1755.34,1684.94C1761.25,1684.75 1767.18,1684.55 1773.06,1684.25C1778.96,1683.99 1784.82,1683.7 1790.65,1683.31C1796.5,1682.94 1802.31,1682.51 1808.09,1682.08C1813.87,1681.63 1819.64,1681.13 1825.37,1680.59C1831.08,1680.04 1836.77,1679.5 1842.47,1678.87C1848.13,1678.23 1853.78,1677.58 1859.39,1676.85C1865,1676.14 1870.57,1675.4 1876.13,1674.63C1881.67,1673.81 1887.18,1672.99 1892.66,1672.13C1898.14,1671.28 1903.59,1670.35 1909.01,1669.41C1914.42,1668.47 1919.79,1667.54 1925.13,1666.53C1930.46,1665.51 1935.77,1664.45 1941.03,1663.33C1946.29,1662.25 1951.52,1661.19 1956.71,1659.98C1961.88,1658.83 1967.03,1657.64 1972.14,1656.41C1977.23,1655.17 1982.29,1653.94 1987.32,1652.59C1992.33,1651.35 1997.3,1650 2002.23,1648.65C2007.15,1647.29 2012.03,1645.91 2016.87,1644.46C2021.71,1643.04 2026.5,1641.63 2031.24,1640.1C2035.98,1638.65 2040.67,1637.16 2045.33,1635.6C2049.97,1634.05 2054.58,1632.49 2059.12,1630.87C2063.66,1629.26 2068.15,1627.65 2072.59,1625.98C2077.04,1624.35 2081.42,1622.66 2085.76,1620.95C2090.09,1619.25 2094.38,1617.5 2098.61,1615.74C2102.84,1613.97 2107,1612.25 2111.12,1610.39C2115.22,1608.62 2119.3,1606.74 2123.28,1604.91C2127.29,1603.08 2131.22,1601.19 2135.09,1599.3C2138.98,1597.4 2142.8,1595.53 2146.57,1593.58C2150.32,1591.67 2154.01,1589.68 2157.64,1587.71C2161.28,1585.75 2164.86,1583.73 2168.36,1581.71C2175.37,1577.69 2182.14,1573.61 2188.62,1569.44C2195.1,1565.29 2201.33,1561.09 2207.3,1556.81C2213.23,1552.59 2218.92,1548.2 2224.32,1543.82C2229.68,1539.46 2234.79,1535.1 2239.6,1530.64C2244.41,1526.17 2248.91,1521.68 2253.12,1517.2C2257.34,1512.69 2261.22,1508.17 2264.83,1503.65C2268.43,1499.09 2271.73,1494.5 2274.71,1489.97C2277.69,1485.35 2280.36,1480.83 2282.7,1476.27C2285.05,1471.7 2287.09,1467.13 2288.8,1462.55C2290.49,1458.05 2291.88,1453.49 2292.95,1449.01C2293.22,1447.81 2293.41,1446.62 2293.66,1445.54C2293.78,1444.9 2293.89,1444.23 2294.03,1443.64C2294.13,1443.13 2294.24,1442.59 2294.31,1442.08C2294.51,1440.91 2294.81,1439.76 2295,1438.57C2295.22,1437.26 2295.33,1435.88 2295.5,1434.53C2295.33,1433.12 2295.2,1431.74 2295,1430.47Z" />
    </g>
    <path d="M179.539,220.301C179.539,239.078 165.082,254.301 147.246,254.301C129.41,254.301 114.953,239.078 114.953,220.301C114.953,201.527 129.41,186.305 147.246,186.305C165.082,186.305 179.539,201.527 179.539,220.301Z"/>
    <g fill="none" stroke-width= "40px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">
        <path d="M1996.5,1434.49C1996.5,1329.76 1938.43,1238.62 1852.76,1191.41C1849.2,1190.98 1845.65,1190.53 1842.1,1190.14C1836.42,1189.53 1830.71,1188.94 1824.98,1188.42C1819.23,1187.86 1813.49,1187.38 1807.69,1186.94C1801.89,1186.48 1796.1,1186.08 1790.24,1185.73C1784.39,1185.35 1778.53,1185.03 1772.63,1184.74C1766.75,1184.45 1760.82,1184.22 1754.89,1184.04C1748.96,1183.87 1742.99,1183.72 1737.01,1183.64C1731.01,1183.53 1724.98,1183.5 1718.99,1183.5C1712.99,1183.5 1706.97,1183.55 1700.98,1183.64C1695,1183.72 1689.03,1183.87 1683.1,1184.04C1677.19,1184.22 1671.26,1184.45 1665.34,1184.76C1659.46,1185.03 1653.58,1185.31 1647.75,1185.7C1641.9,1186.08 1636.09,1186.48 1630.3,1186.94C1624.5,1187.38 1618.74,1187.86 1613.01,1188.42C1607.28,1188.94 1601.56,1189.52 1595.88,1190.14C1592.33,1190.53 1588.82,1190.96 1585.26,1191.39C1499.57,1238.62 1441.51,1329.76 1441.51,1434.49C1441.51,1539.24 1499.56,1630.38 1585.25,1677.59C1588.78,1678.01 1592.33,1678.47 1595.88,1678.87C1601.58,1679.49 1607.29,1680.04 1613.02,1680.59C1618.75,1681.13 1624.52,1681.63 1630.3,1682.07C1636.09,1682.49 1641.9,1682.92 1647.77,1683.29C1653.6,1683.66 1659.46,1683.99 1665.36,1684.25C1671.26,1684.55 1677.19,1684.75 1683.12,1684.94C1689.05,1685.14 1695,1685.23 1700.99,1685.36C1706.97,1685.44 1712.99,1685.5 1719,1685.5C1725,1685.5 1731.01,1685.44 1737.01,1685.36C1742.99,1685.23 1748.97,1685.14 1754.89,1684.94C1760.82,1684.75 1766.75,1684.55 1772.64,1684.25C1778.53,1683.99 1784.4,1683.7 1790.24,1683.31C1796.1,1682.94 1801.91,1682.51 1807.71,1682.08C1813.49,1681.63 1819.25,1681.13 1825,1680.59C1830.71,1680.04 1836.42,1679.5 1842.1,1678.87C1845.67,1678.48 1849.2,1678.02 1852.74,1677.61C1938.43,1630.39 1996.5,1539.24 1996.5,1434.49Z"/>
    </g>
    <g stroke-width="25px" transform="matrix(0.235243,0,0,0.245462,-256.696,-129.858)">
        <path d="M1117.26,774.021L1495.79,554.41L1876.76,773.989L1498.22,993.616L1117.26,774.021M1883.5,773.989L1495.75,550.495L1110.5,774.021L1498.25,997.499L1883.5,773.989" />
    </g>
    <g transform="matrix(-0.233169,0,0,0.245462,188.517,69.5886)">
        <path d="M0.007,0.005L0.007,369.922" fill="none" stroke-width="22.92px" stroke-linecap="round"/>
    </g>
    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">
        <path d="M1513.49,1036.5L1513.49,1193.24" fill="none" stroke-width="22.92px" stroke-linecap="round"/>
    </g>
    <g transform="matrix(-0.116585,-0.212577,-0.20193,0.122731,188.644,67.8623)">
        <path d="M-0.003,0.003L-0.005,441.736" fill="none" stroke-width="22.92px" stroke-linecap="round"/>
    </g>
    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">
        <path d="M1480.51,1033.5L1480.51,1202.4" fill="none" stroke-width="22.92px" stroke-linecap="round"/>
    </g>
    <g transform="matrix(-0.11662,0.212556,0.201158,0.122262,2.826,67.8637)">
        <path d="M0.002,-0.008L0.004,441.726" fill="none" stroke-width="22.92px" stroke-linecap="round"/>
    </g>
    <g transform="matrix(-0.233169,0,0,0.245462,2.91461,67.6249)">
        <path d="M0.002,0L0.002,439.254" fill="none" stroke-width="22.92px" stroke-linecap="round"/>
    </g>
    <g transform="matrix(-0.116585,0.212577,0.20193,0.122731,3.4509,175.859)">
        <path d="M0.005,-0.006L0.003,116.931" fill="none" stroke-width="22.92px" stroke-linecap="round"/>
    </g>
</g>
`)};for(const o in Wj)tr(o,{pathData:"",collection:"custom",packageName:"custom",viewBox:"0 0 284 284",customTemplate:Wj[o]});let jC=class extends ft{constructor(){super(...arguments),this.currentViewModeIndex=2,this.isColumnMode=!1}render(){return Ie`
      <ui5-segmented-button
        id="viewModeBtn"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        @selection-change="${this._handleSelectionChanged}"
      >
        <ui5-segmented-button-item
          tooltip="One View Mode"
          ?selected=${this.currentViewModeIndex==0}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/singleview-mobile":"custom/singleview"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Sync Mode"
          ?selected=${this.currentViewModeIndex==1}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/doubleview-synced-mobile":"custom/doubleview-synced"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Navigation Mode"
          ?selected=${this.currentViewModeIndex==2}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/doubleview-mobile":"custom/doubleview"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
      </ui5-segmented-button>

      <pv-menu ?isColumnMode=${this.isColumnMode}>
        <pv-menu-item
          icon="chart-axis"
          title="3D Environment"
          idx="1"
        >
          <environment-settings
            ?isColumnMode=${this.isColumnMode}
            .environmentSettings="${this.viewerSettings.environment3D}"
          >
          </environment-settings>
        </pv-menu-item>
        <pv-menu-item icon="rotate" title="Rotation Settings" idx="2">
          <rotation-settings
            ?isColumnMode=${this.isColumnMode}
            ?isAutoRotationDisabled="${this.currentViewModeIndex<2}"
            .imageRotationSettings="${this.viewerSettings.imageRotation}"
            .modelOrientationSettings="${this.viewerSettings.modelOrientation}"
          >
          </rotation-settings>
        </pv-menu-item>
        <pv-menu-item icon="measure" title="Measurement Tool" idx="3">
          <measurement-tool
            ?isColumnMode=${this.isColumnMode}
            .measurementTool="${this.viewerSettings.measurementTool}"
          ></measurement-tool>
        </pv-menu-item>
        <pv-menu-item icon="camera" title="Save view as image" idx="4">
          <export-tool
            .viewerSettings="${this.viewerSettings}"
          ></export-tool>
        </pv-menu-item>
      </pv-menu>
    `}_handleSelectionChanged(o){const t=o.detail.selectedItems[0],n=t.getAttribute("pos-in-set")??t.ariaPosInSet;n==null&&console.warn("Selected item does not have an ariaPosInSet property. Check your segmented button implementation.",t);const c=parseInt(n??"",10)-1;c!=this.currentViewModeIndex&&(this.currentViewModeIndex=c,this.dispatchEvent(new CustomEvent("view-mode-changed",{detail:{viewIndex:c}})))}};jC.styles=A`
    :host {
      height: 100%;
      width: 100%;
      --_ui5_button_base_padding: 0px;
    }

    .rotated-icon {
      transform: rotate(-90deg);
    }

    .hor-orientation {
      left: 50%;
    }

    .ver-orientation {
      top: 50%;
    }

    #viewModeBtn.hor-orientation {
      bottom: 1%;
      transform: translateX(-50%);
    }

    #viewModeBtn.ver-orientation {
      right: 1%;
      transform-origin: 100% 0;
      transform: rotate(90deg) translateX(50%);
    }

    #viewModeBtn {
      position: absolute;
      pointer-events: auto;
    }

    ui5-segmented-button-item {
      height: 3.5rem;
      padding: 1px 1px 1px 1px;
    }

    ui5-icon {
      width: 3.5rem;
      height: 3.5rem;
      stroke: black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%);
    }
  `,cD([$t({type:Number})],jC.prototype,"currentViewModeIndex",2),cD([$t({type:Boolean})],jC.prototype,"isColumnMode",2),cD([$t({type:Object})],jC.prototype,"viewerSettings",2),jC=cD([Gt("control-panel")],jC);class s0e{constructor(t,n,c){this.focalLengthInPx=t,this._sensorWidthInPx=n,this._sensorHeightInPx=c,this._sensorHeightInPx==0||this._sensorWidthInPx==0?this.aspectRatio=-1:this.aspectRatio=n/c,this.fovInRad=this._sensorHeightInPx/this.focalLengthInPx,this.cx=.5*(this._sensorWidthInPx-1),this.cy=.5*(this._sensorHeightInPx-1)}equals(t){return t.focalLengthInPx==this.focalLengthInPx&&t.cx==this.cx&&t.cy==this.cy}}class o0e extends O0.EventEmitter{constructor(){super(),this.isValid=!1,this.sensorMap=new Map,this.sensorIds=[],this.imageFiles=[],this.camPosesInChunk=[],this.transformationChunkToWorld=new nn,this._xmlDoc=null}readFromFile(t){return fetch(t).then(n=>n.text()).then(n=>{this._xmlDoc=new DOMParser().parseFromString(n,"text/xml"),this._extractInformation()})}_extractInformation(){this.isValid=!1,this._xmlDoc!=null?this._extractIntrinsicCameraInformation()?this._extractExtrinsicCameraInformation()?(this.isValid=!0,this.emit("scanInformationExtracted")):console.error("Coudn't extract extrinisc camera information from xml document"):console.error("Coudn't extract intrinsic camera information from xml document"):console.error("Xml of scaninformation is not valid")}_extractIntrinsicCameraInformation(){if(this._xmlDoc==null)return!1;const t=this._xmlDoc.getElementsByTagName("sensor");if(t.length==0)return console.error("No sensors found in xml document"),!1;for(let n=0;n<t.length;n++){const c=t[n].getAttribute("id");if(c==null)return console.error(`Sensor Element in xml doesn't contain key "id"`,n,t[n]),!1;const h=b1(t[n],"calibration");if(h==null)return!1;const f=b1(h,"resolution");if(f==null)return!1;const d=jj(f,"width"),p=jj(f,"height");if(d==null||p==null)return console.error("XML Document doesn't contain information about sensor width and height"),!1;const v=b1(h,"f");if(v==null||v.textContent==null)return console.error("XML Document doesn't contain information about the field of view",v),!1;const w=Number(v.textContent);if(Number.isNaN(w)||w<=0)return console.error("XML Document doesn't contain valid information about the field of view:",w),!1;this.sensorMap.set(c,new s0e(w,d,p))}return!0}_extractExtrinsicCameraInformation(){return this._xmlDoc!=null&&(this._extractChunkToWorldCoorTransformation()?!!this._extractCamPoses()||(console.error("Coudn't extract cam poses information from xml document"),!1):(console.error("Coudn't extract transformation chunk to world coordinate system from xml document"),!1))}_extractChunkToWorldCoorTransformation(){if(this._xmlDoc==null)return console.error("XML Document is null"),!1;const t=function(R,D){const O=R.getElementsByTagName(D);return O.length==0?(console.warn("XML Document doesn't contain valid element with name",D),null):O[O.length-1]}(this._xmlDoc,"transform");if(t==null)return console.error("XML Document doesn't contain a transform element"),!1;const n=b1(t,"rotation");if(n==null||n.textContent==null)return console.error("XML Document doesn't contain valid information about the rotation between chunk and world coordinate system",n),!1;const c=n.textContent.split(" "),h=c.map(R=>Number(R));if(h.length!=9)return console.error("Rotation part of chunk doesn't contain 9 numbers:",h),!1;const f=new On;f.fromArray(h).transpose();const d=b1(t,"scale");if(d==null||d.textContent==null)return console.error("XML Document doesn't contain valid information about the scaling between chunk and world coordinate system",d),!1;const p=Number(d.textContent);if(p<=0)return console.error("Scalefactor in xml document is not valid: ",p),!1;f.multiplyScalar(p);const v=b1(t,"translation");if(v==null||v.textContent==null)return console.error("XML Document doesn't contain valid information about the translation between chunk and world coordinate system",v),!1;const w=v.textContent.split(" "),S=w.map(R=>Number(R));if(S.length!=3)return console.error("Translation part of chunk doesn't contain 3 numbers:",S),!1;const B=new Ke(S[0],S[1],S[2]);return this.transformationChunkToWorld.setFromMatrix3(f),this.transformationChunkToWorld.setPosition(B),console.log("Transformation chunk to world extracted from XML",{rotationChunkAsMat:f,rotationChunkAsStringArray:c,rotationElement:n,scaleElement:d,scaleFactor:p,transformationChunkToWorld:this.transformationChunkToWorld,translationChunkAsStringArray:w,translationElement:v}),!0}_extractCamPoses(){if(this._xmlDoc==null)return!1;const t=this._xmlDoc.getElementsByTagName("camera");if(t.length==0)return console.error("No cameras found in xml document"),!1;this.imageFiles.length=t.length,this.camPosesInChunk.length=t.length,this.sensorIds.length=t.length;let n=0;for(let c=0;c<t.length;c++){if(n>=10)return console.error("Failed to extract camera information for all cameras in xml document. Stopping after 10 errors."),!1;const h=t[c].getAttribute("label");if(h==null){console.warn(`Camera Element in xml doesn't contain key "label"`,c,t[c]),n+=1;continue}const f=t[c].getAttribute("sensor_id");if(f==null){console.warn(`Camera Element in xml doesn't contain key "sensor_id"`,c,t[c]),n+=1;continue}if(this.sensorMap.has(f)==0){console.warn("Sensor with id",f,"doesn't exist in xml file"),n+=1;continue}const d=b1(t[c],"transform");if(d==null||d.textContent==null){console.warn("Camera Element in xml doesn't contain transformationElement",c,t[c]),n+=1;continue}const p=d.textContent.split(" ").map(v=>Number(v));p.length==16?(this.imageFiles[c]=h,this.sensorIds[c]=f,this.camPosesInChunk[c]=new nn,this.camPosesInChunk[c].fromArray(p).transpose()):(console.warn("cam pose doesn't contain 16 numbers:",c,p),n+=1)}return!0}}function b1(o,t){const n=o.getElementsByTagName(t);return n.length==0?(console.warn("XML Document doesn't contain valid element with name",t),null):n[0]}function jj(o,t){const n=o.getAttribute(t);return n?Number(n):null}class a0e extends O0.EventEmitter{constructor(){super(...arguments),this.poses=[],this.normedPositions=[],this._remapCoordinates=new Ke(0,1,2),this._sensorMap=new Map,this._sensorIds=[],this._camPosesInChunk=[],this._chunkToWorldTransform=new nn,this._isYupTransformApplied=!0,this._additionalRotation=new nn}init(t,n,c){this._sensorMap=t.sensorMap,this._sensorIds=t.sensorIds,this._camPosesInChunk=t.camPosesInChunk,this._chunkToWorldTransform=t.transformationChunkToWorld,this._isYupTransformApplied=n,this._additionalRotation=this._additionalRotation.makeRotationFromEuler(c),this._calculateCamPosesInWorldCoor()}setIsYupTransformApplied(t){t!=this._isYupTransformApplied&&(this._isYupTransformApplied=t,this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed"))}setAdditionalRotation(t){console.log("Set additional rotation"),this._additionalRotation=this._additionalRotation.makeRotationFromEuler(t.angleInRad),this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed")}setAxesRemapping(t){console.log("Set new axes mapping"),this._remapCoordinates=t,this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed")}getImageSensor(t){const n=this._sensorIds[t];return this._sensorMap.get(n)}getCameraPose(t){return t<this.poses.length&&t>=0?this.poses[t]:new nn}getSyncSettingsOfNextBestImage(t){let n=t.position.clone().normalize();n=new Ke(n.getComponent(this._remapCoordinates.getComponent(0)),n.getComponent(this._remapCoordinates.getComponent(1)),n.getComponent(this._remapCoordinates.getComponent(2)));let c=Number.MAX_VALUE,h=-1;for(let Ae=0;Ae<this.normedPositions.length;Ae++){if(this.normedPositions[Ae]===void 0||this.normedPositions[Ae]===null)continue;const ve=Math.acos(n.dot(this.normedPositions[Ae]));ve<c&&(c=ve,h=Ae)}if(h==-1)return[null,null];const f=new Ke,d=new Ke,p=new Ke;this.poses[h].extractBasis(f,d,p);const v=Math.acos(-p.y),w=Math.atan2(-p.x,-p.z),S=new Ke(Math.cos(w),0,-Math.sin(w)),B=new Ke(-Math.cos(v)*Math.sin(w),Math.sin(v),-Math.cos(v)*Math.cos(w)),R=new Cn;R.x=f.dot(S),R.y=f.dot(B),R.normalize();const D=function(Ae){for(;Ae<-180;)Ae+=360;for(;Ae>180;)Ae-=360;return Ae}(KB(Math.atan2(R.y,R.x)));console.log("Computing sync settings of next best image",{rotAngle:D,idxMinAngle:h,minAngle:c,normedPosition:this.normedPositions[h],pose:this.poses[h],unrotatedImgCamAxisX:S,normed3DCamPosition:n,projectedXDirCam2D:R,phiImageCam:v,thetaImageCam:w,nNormedPositions:this.normedPositions.length});const O=new Ke;O.setFromMatrixPosition(this.poses[h]);const V=O.length(),$={theta:w,phi:v,radius:V,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}},G=new Ke;G.x=O.x-V*Math.sin(v)*Math.sin(w),G.y=O.y-V*Math.cos(v),G.z=O.z-V*Math.sin(v)*Math.cos(w);const X=this._sensorIds[h],te=this._sensorMap.get(X);let ae=.25*Math.PI,oe=1;return te!=null&&(ae=te.fovInRad,oe=te.aspectRatio),[{imageIdx:h,rotationAngle:-D,imageAspectRatio:oe},{orbitPos:$,cameraTarget:G_(G),fovInRad:ae}]}_calculateCamPosesInWorldCoor(){const t=this._chunkToWorldTransform.clone();if(this._isYupTransformApplied){const f=new nn;f.makeRotationX(.5*-Math.PI),t.premultiply(f)}const n=new Ke,c=new ha,h=new Ke;this.poses.length=this._camPosesInChunk.length,this.normedPositions.length=this._camPosesInChunk.length;for(let f=0;f<this._camPosesInChunk.length;f++){if(this._camPosesInChunk[f]==null||this._camPosesInChunk[f]===void 0)continue;const d=new nn;d.multiplyMatrices(t,this._camPosesInChunk[f]),d.premultiply(this._additionalRotation),d.decompose(n,c,h);const p=new Ke(1,1,1);n.multiplyScalar(1e3);const v=new nn;v.compose(n,c,p),this.poses[f]=v;const w=new Ke;w.setFromMatrixPosition(v),this.normedPositions[f]=w.normalize()}console.log("Calculated camera poses in world coordinates",{transformationChunkToWorldYUp:t,camPosesInChunk:this._camPosesInChunk,normedPoses:this.normedPositions,poses:this.poses})}}class l0e{constructor(){this.angleInRad=new Za(0,0,0,"YXZ")}angleInRadAsString(){return`${this.angleInRad.z}rad ${this.angleInRad.x}rad ${this.angleInRad.y}rad`}equals(t){return t.angleInRadAsString()==this.angleInRadAsString()}set x(t){this.angleInRad.x=t}get x(){return this.angleInRad.x}set y(t){this.angleInRad.y=t}get y(){return this.angleInRad.y}set z(t){this.angleInRad.z=t}get z(){return this.angleInRad.x}}function Kj(o){return`rgb(${o.r}, ${o.g}, ${o.b})`}class c0e extends O0.EventEmitter{constructor(){super(...arguments),this._eulerOrientation=new l0e}set xOrientationInRad(t){this._eulerOrientation.x!=t&&(this._eulerOrientation.x=t,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}set yOrientationInRad(t){this._eulerOrientation.y!=t&&(this._eulerOrientation.y=t,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}set zOrientationInRad(t){this._eulerOrientation.z!=t&&(this._eulerOrientation.z=t,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}get eulerOrientationYXZInRad(){return this._eulerOrientation}}class u0e extends O0.EventEmitter{constructor(){super(...arguments),this._autoRotationAngle=0,this._userSetRotationAngle=0,this._isAutoRotationActivated=!1}set autoRotationAngle(t){this._autoRotationAngle!=t&&(this._autoRotationAngle=t,this._isAutoRotationActivated&&this.emit("rotation-angle-changed",this._autoRotationAngle))}get autoRotationAngle(){return this._autoRotationAngle}set userSetRotationAngle(t){this._userSetRotationAngle!=t&&(this._userSetRotationAngle=t,this._isAutoRotationActivated||this.emit("rotation-angle-changed",this._userSetRotationAngle))}get userSetRotationAngle(){return this._userSetRotationAngle}set isAutoRotationActivated(t){this._isAutoRotationActivated!=t&&(this._isAutoRotationActivated=t,this._isAutoRotationActivated?this.emit("rotation-angle-changed",this._autoRotationAngle):this.emit("rotation-angle-changed",this._userSetRotationAngle,!1))}get isAutoRotationActivated(){return this._isAutoRotationActivated}}class h0e extends O0.EventEmitter{constructor(){super(...arguments),this._showAxes=!1,this._remapAxes=new Ke(0,1,2),this._backgroundColor="#444444",this._gradientColor="#b9b9b9",this._applyGradient=!0,this._brightness=1}set showAxes(t){this._showAxes!=t&&(this._showAxes=t,this.emit("change-axes-visibility-requested",this._showAxes))}get showAxes(){return this._showAxes}set remapAxes(t){this._remapAxes!=t&&(console.log("Remapped axes to ",t),this._remapAxes=t,this.emit("change-axes-mapping-requested",this.remapAxes))}get remapAxes(){return this._remapAxes}set backgroundColor(t){const n=KQ(t),c=Kj(n);if(console.log("Set backgroundcolor",n,c),this._backgroundColor==c)return;this._backgroundColor=c;const h={r:Math.min(2.5*n.r,255),g:Math.min(2.5*n.g,255),b:Math.min(2.5*n.b,255)};this._gradientColor=Kj(h),console.log("Set gradient color",h,this._gradientColor),this._applyGradient?this.emit("change-viewer-background-color-requested",this._backgroundColor,this._gradientColor):this.emit("change-viewer-background-color-requested",this._backgroundColor,"")}get backgroundColor(){return this._applyGradient?[this._backgroundColor,this._gradientColor]:[this._backgroundColor,""]}set applyGradient(t){this._applyGradient!=t&&(this._applyGradient=t,this._applyGradient?this.emit("change-viewer-background-color-requested",this._backgroundColor,this._gradientColor):this.emit("change-viewer-background-color-requested",this._backgroundColor,""))}get applyGradient(){return this._applyGradient}set brightness(t){this._brightness!=t&&(this._brightness=t,this.emit("change-exposure-requested",this._brightness))}}class d0e extends O0.EventEmitter{constructor(){super(...arguments),this._isEditModeActive=!1,this._measurementPoints=[],this._measuredLength=0,this._currentOrientation=new Za,this._currentTranslation=new Ke,this._imageSensor=null,this._imageCamOrientation=new nn,this._measurementDistances=[],this._showMeasurementDistances=!0,this._sceneElementGroup=new mh}set imageSensor(t){this._imageSensor&&t.equals(this._imageSensor)||(this._imageSensor=t)}set imageCamOrientation(t){this._imageCamOrientation.equals(t)||(this._imageCamOrientation=t)}get sceneElementGroup(){return this._sceneElementGroup}set isEditModeActive(t){this._isEditModeActive!=t&&(this._isEditModeActive=t)}get isEditModeActive(){return this._isEditModeActive}get numPoints(){return this._measurementPoints.length}get measurementPoints(){return this._measurementPoints}get measurementDistances(){return this._measurementDistances}get measuredLength(){return this._measuredLength}set translation(t){t.equals(this._currentTranslation)||(this._measurementDistances.forEach(n=>{n.translate(t)}),this._currentTranslation=t.clone())}set eulerOrientation(t){this._currentOrientation.equals(t.angleInRad)||(this._currentOrientation=t.angleInRad.clone(),this._measurementDistances.forEach(n=>{n.changeSceneOrientation(this._currentOrientation)}),this._measurementPoints.forEach(n=>{n.updatePosition(this._currentOrientation)}))}addPointFromImage(t,n){if(this._imageSensor==null)return void console.warn("Cannot add point from image, since image sensor is null.");const c=new Ke;c.x=t-this._imageSensor.cx,c.y=n-this._imageSensor.cy,c.z=this._imageSensor.focalLengthInPx;const h=new On;h.setFromMatrix4(this._imageCamOrientation),console.log("Cam orientation in World",this._imageCamOrientation),c.applyMatrix3(h);const f=c.normalize(),d=new Ke;d.setFromMatrixPosition(this._imageCamOrientation),this.emit("calculate-hotspot-requested",d,f)}addPointFrom3DScene(t,n,c=!0,h=this._measurementPoints.length){const f=this._measurementPoints.length,d=new Ke(t.x,t.y,t.z),p=new Ke(n.x,n.y,n.z),v=new f0e(h,d,p,this._currentOrientation);if(v.on("hotspot-selected",this._updateHotspotInImage.bind(this)),v.on("hotspot-focus-changed",w=>this.emit("change-image-hotspot-visibility",w)),this._measurementPoints.push(v),f>0){const w=new p0e(this._measurementDistances.length,this._measurementPoints[f-1],v,this._currentTranslation,this._currentOrientation);this._showMeasurementDistances||w.hide(),this._measuredLength+=w.distance,this._sceneElementGroup.add(w.sceneElement),this._measurementDistances.push(w),this.emit("hotspot-added",w.annotationElement),this.emit("update-requested")}this.emit("hotspot-added",v.domElement),c&&this._updateHotspotInImage(v.positionInSceneCoor),window.setTimeout(()=>v.domElement.focus(),0)}resetPoints(){this._measurementPoints.forEach(t=>{t.delete()}),this._measurementPoints=[],this._measuredLength=0,this._measurementDistances.forEach(t=>{t.reset()}),this.emit("update-requested")}showPoints(){this._measurementPoints.forEach(t=>{t.show()}),this._measurementDistances.forEach(t=>{t.show()}),this.emit("scene-update-requested")}hidePoints(){this._measurementDistances.forEach(t=>{t.hide()}),this._measurementPoints.forEach(t=>{t.hide()}),this.emit("scene-update-requested")}get showMeasurementDistances(){return this._showMeasurementDistances}set showMeasurementDistances(t){this._showMeasurementDistances!=t&&(this._showMeasurementDistances=t,this._measurementDistances.forEach(n=>{t?n.show():n.hide()}),this.emit("scene-update-requested"))}saveMeasurement(t="csv"){const n=document.createElement("a");if(t==="csv"){let c=`index,x,y,z${this.showMeasurementDistances?",distance":""},label
`;this._measurementPoints.forEach((h,f)=>{const d=h.positionInModelCoor;c+=`${f},${d.x},${d.y},${d.z}${this.showMeasurementDistances?","+(f>0?this._measurementDistances[f-1].distance:""):""},"${h.label.replace(/"/g,'""')}"
`}),n.href=window.URL.createObjectURL(new Blob([c],{type:"text/csv"})),n.download="measurement.csv"}else{const c=[];for(let h=0;h<this._measurementPoints.length;h++){const f=this._measurementPoints[h];c.push({pos:[f.positionInModelCoor.x,f.positionInModelCoor.y,f.positionInModelCoor.z],normal:[f.normalInSceneCoor.x,f.normalInSceneCoor.y,f.normalInSceneCoor.z],label:f.label,distance:this._showMeasurementDistances&&h>0?this._measurementDistances[h-1].distance:void 0})}n.href=window.URL.createObjectURL(new Blob([JSON.stringify(c)],{type:"application/json"})),n.download="measurement.json"}n.click()}async loadMeasurement(t){try{const n=await(await fetch(t)).json();let c=!1;for(const h of n){const f={x:h.pos[0],y:h.pos[1],z:h.pos[2]},d={x:h.normal[0],y:h.normal[1],z:h.normal[2]};this.addPointFrom3DScene(f,d,!1,h.label),c=c||h.distance!==void 0}this._showMeasurementDistances=c}catch(n){console.error(n)}}_updateHotspotInImage(t){if(this._imageSensor==null)return void console.warn("Cannot update hotspot in image: image sensor null.");const n=this._imageSensor,c=this._imageCamOrientation.clone(),h=new Ke().setFromMatrixPosition(c);h.add(this._currentTranslation),c.setPosition(h),c.invert();const f=new Ke().addVectors(t,this._currentTranslation),d=new Fr(f.x,f.y,f.z,1).applyMatrix4(c),p=new Ke(d.x/d.w,d.y/d.w,d.z/d.w),v=p.x/p.z*n.focalLengthInPx+n.cx,w=p.y/p.z*n.focalLengthInPx+n.cy;v>0&&w>0&&this.emit("update-image-hotspot-position-requested",v,w)}}class A0e{constructor(){this._lineGeometry=new ga,this._translation=new Ke,this._pointsInModelCoor=[],this._lineMaterial=new wh({color:16777215,gapSize:.1,dashSize:.1}),this._lineMaterial.transparent=!0,this._lineMaterial.depthTest=!1,this._distanceLine=new Wi(this._lineGeometry,this._lineMaterial)}get lineElement(){return this._distanceLine}addPoint(t,n,c){const h=new nn().makeRotationFromEuler(c).invert(),f=t.clone().applyMatrix4(h);this._pointsInModelCoor.push(f),this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4(new nn().makeRotationFromEuler(c)),this._lineGeometry.translate(n.x,n.y,n.z),this._distanceLine.computeLineDistances(),this._translation=n}addPointInModelCoor(t,n,c){this._pointsInModelCoor.push(t),this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4(new nn().makeRotationFromEuler(c)),this._lineGeometry.translate(n.x,n.y,n.z),this._distanceLine.computeLineDistances(),this._translation=n}setTranslation(t){this._lineGeometry.translate(-this._translation.x+t.x,-this._translation.y+t.y,-this._translation.z+t.z),this._translation=t}setEulerOrientation(t){this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4(new nn().makeRotationFromEuler(t)),this._lineGeometry.translate(this._translation.x,this._translation.y,this._translation.z),this._distanceLine.computeLineDistances()}set opacity(t){this._lineMaterial.opacity=t}show(){this._distanceLine.visible=!0}hide(){this._distanceLine.visible=!1}reset(){this._pointsInModelCoor.length=0,this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._distanceLine.removeFromParent()}}class p0e{constructor(t,n,c,h,f){this._sceneLineElement=new A0e,this._numVisiblePoints=0,this._isHidden=!1;const d=n.distanceTo(c),p=new Ke().addVectors(n.positionInSceneCoor,c.positionInSceneCoor).multiplyScalar(.5),v=new Ke().addVectors(n.normalInSceneCoor,c.normalInSceneCoor).multiplyScalar(.5);this._distanceAnnotation=new g0e(t,d,p,v,f),this._sceneLineElement.addPointInModelCoor(n.positionInModelCoor,h,f),this._sceneLineElement.addPointInModelCoor(c.positionInModelCoor,h,f);const w=new MutationObserver(this._handlePointVisibilityChanged.bind(this));w.observe(n.domElement,{attributes:!0}),w.observe(c.domElement,{attributes:!0}),this._numVisiblePoints=Number(n.domElement.hasAttribute("data-visible"))+Number(c.domElement.hasAttribute("data-visible"))}get distance(){return this._distanceAnnotation.distance}get sceneElement(){return this._sceneLineElement.lineElement}get annotationElement(){return this._distanceAnnotation.domElement}translate(t){this._sceneLineElement.setTranslation(t)}changeSceneOrientation(t){this._sceneLineElement.setEulerOrientation(t),this._distanceAnnotation.updatePosition(t)}show(){this._sceneLineElement.show(),this._distanceAnnotation.show(),this._isHidden=!1,this._updateAnnotationVisibility()}hide(){this._isHidden=!0,this._distanceAnnotation.hide(),this._sceneLineElement.hide()}reset(){this._sceneLineElement.reset(),this._distanceAnnotation.delete()}_handlePointVisibilityChanged(t){for(const n of t)if(n.type==="attributes"&&n.attributeName==="data-visible"){const c=n.target;this._numVisiblePoints+=c.hasAttribute("data-visible")?1:-1}this._isHidden||this._updateAnnotationVisibility()}_updateAnnotationVisibility(){this._numVisiblePoints<=0?(this._distanceAnnotation.hide(),this._sceneLineElement.opacity=.25):(this._distanceAnnotation.show(),this._sceneLineElement.opacity=1)}}class Xj extends O0.EventEmitter{constructor(t,n,c){super();const h=new nn().makeRotationFromEuler(c).invert();this._positionInSceneCoor=t,this._positionInModelCoor=this._positionInSceneCoor.clone().applyMatrix4(h),this._normalInSceneCoor=n,this._normalInModelCoor=this._normalInSceneCoor.clone().applyMatrix4(h),this._domElement=document.createElement("button"),this._domElement.dataset.visibilityAttribute="visible",this._domElement.style.display="block",this._domElement.dataset.position=this.positionInSceneCoorAsString,this._domElement.dataset.normal=this.normalInSceneCoorAsString,this._domElement.addEventListener("focus",this._handleFocusChanged.bind(this)),this._domElement.addEventListener("blur",this._handleFocusChanged.bind(this))}get domElement(){return this._domElement}get positionInModelCoor(){return this._positionInModelCoor}get positionInSceneCoor(){return this._positionInSceneCoor}get normalInSceneCoor(){return this._normalInSceneCoor}get positionInSceneCoorAsString(){return`${this._positionInSceneCoor.x}m ${this._positionInSceneCoor.y}m ${this._positionInSceneCoor.z}m`}get normalInSceneCoorAsString(){return`${this._normalInSceneCoor.x}m ${this._normalInSceneCoor.y}m ${this._normalInSceneCoor.z}m`}updatePosition(t){this._positionInSceneCoor=this._positionInModelCoor.clone().applyEuler(t),this._normalInSceneCoor=this._normalInModelCoor.clone().applyEuler(t),this.domElement.dataset.position=this.positionInSceneCoorAsString,this.domElement.dataset.normal=this.normalInSceneCoorAsString,this.domElement.dispatchEvent(new Event("hotspot-position-changed"))}show(){this.domElement.style.display="block"}hide(){this.domElement.style.display="none"}delete(){var t;(t=this.domElement.parentNode)==null||t.removeChild(this.domElement)}_handleFocusChanged(t){this.emit("hotspot-focus-changed",t.type=="focus")}}class f0e extends Xj{constructor(t,n,c,h){super(n,c,h),this._domElement.slot="hotspot-measurementpoint"+t,this.domElement.classList.add("hotspot"),this.domElement.textContent=t.toString(),this.domElement.addEventListener("click",f=>{f.stopPropagation(),this.emit("hotspot-selected",this.positionInSceneCoor)})}set label(t){this.domElement.textContent=t}get label(){return this.domElement.textContent||""}distanceTo(t){return this.positionInModelCoor.distanceTo(t.positionInModelCoor)}}class g0e extends Xj{constructor(t,n,c,h,f){super(c,h,f),this._distance=0,this._distance=n,this._domElement.slot="hotspot-distance-annotation"+t,this.domElement.classList.add("annotation"),this.domElement.textContent=n.toFixed(1)+" mm"}get distance(){return this._distance}}class UN{constructor(t,n){this.projectRoot=t,this.imageType=n,this.skyBoxImage=null}resolve2dFileURL(t){return new Promise((n,c)=>{n(this.projectRoot+t+this.imageType)})}}var m0e=Object.defineProperty,_0e=Object.getOwnPropertyDescriptor,gg=(o,t,n,c)=>{for(var h,f=c>1?void 0:c?_0e(t,n):t,d=o.length-1;d>=0;d--)(h=o[d])&&(f=(c?h(t,n,f):h(f))||f);return c&&f&&m0e(t,n,f),f};let op=class extends ft{constructor(){super(),this.isYupTransformApplied=!1,this.src3D="",this.src2D="",this.srcScanInformation="",this._scanInformation=new o0e,this._imageCamera=new a0e,this._syncSettings2DViewer=null,this._syncSettings3DViewer=null,this._viewerAspectRatio=1,this._viewModeIndex=2,this._isInit=!1,this._isColumnDir=!1,this._viewerSettings={imageRotation:new u0e,modelOrientation:new c0e,measurementTool:new d0e,environment3D:new h0e,viewer2DElement:null,viewer3DElement:null},this._viewerSettings.modelOrientation.on("model-orientation-changed",o=>this._imageCamera.setAdditionalRotation(o)),this._viewerSettings.environment3D.on("change-axes-mapping-requested",o=>{console.log("Setting new axes mapping"),this._imageCamera.setAxesRemapping(o)}),this._scanInformation.on("scanInformationExtracted",this._handleScanInformationExtracted.bind(this)),this._imageCamera.on("camera-parameters-changed",this._updateViewer.bind(this)),this._resizeObserver=new ResizeObserver(this._handleViewerResizeEvent.bind(this)),this.viewSettings==null&&(this.viewSettings=new UN(this.src2D,".png"))}render(){return Ie`
      <div id="viewerBase">
        <viewer-3d
          id="viewer3D"
          src=${this.src3D}
          camera-controls
          disable-tap
          camera-orbit="0deg 90deg auto"
          max-camera-orbit="Infinity 157.5deg auto"
          min-camera-orbit="-Infinity 22.5deg auto"
          camera-target="0m 0m 0m"
          exposure="1.2"
          shadow-intensity="0"
          min-field-of-view="0deg"
          max-field-of-view="18deg"
          interaction-prompt="none"
          skybox-image="${this.viewSettings.skyBoxImage}"
          .measurementTool="${this._viewerSettings.measurementTool}"
          @fov-based-zoom-changed="${this._handleFovBasedZoomChanged}"
          @cam-orbit-angle-changed="${this._updateViewer}"
          @dblclick="${this._updateOneViewSyncMode}"
        >
        </viewer-3d>
        <viewer-2d
          id="viewer2D"
          src2D=${this.src2D}
          .measurementTool="${this._viewerSettings.measurementTool}"
          .viewSettings="${this.viewSettings}"
          @image-zoom-changed="${this._handleImageZoomChanged}"
          @image-shifted="${this._handleImageShifted}"
          @min-zoom-level-changed="${this._handleImageMinZoomLevelChanged}"
          @double-press="${this._updateOneViewSyncMode}"
          @pointer-move-in-disable-mode="${this._handlePointerMoveOnImageInDisableMode}"
          @double-press-completed="${this._updateOneViewSyncMode}"
        >
        </viewer-2d>
        <control-panel
          id="controls"
          ?isColumnMode=${this._isColumnDir}
          .viewerSettings="${this._viewerSettings}"
          @view-mode-changed="${this._handleViewModeChanged}"
        >
        </control-panel>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){this._resizeObserver.disconnect(),super.disconnectedCallback()}firstUpdated(){if(this._resizeObserver.observe(this.viewerBase),this.viewer2DElement.connectWithSettings(this._viewerSettings),this.viewer3DElement.connectWithSettings(this._viewerSettings),this._viewerSettings.viewer2DElement=this.viewer2DElement,this._viewerSettings.viewer3DElement=this.viewer3DElement,this.loadMeasurement!==void 0){const o=this.src3D.split("/").slice(0,-1).join("/")+"/measurement.json";this._viewerSettings.measurementTool.loadMeasurement(o)}}updated(o){super.updated(o),o.has("srcScanInformation")&&(this._isInit=!1,this._scanInformation.readFromFile(this.srcScanInformation).then(()=>{this._scanInformation.isValid||alert("Invalid scan information file")})),o.has("isYupTransformApplied")&&this._imageCamera.setIsYupTransformApplied(this.isYupTransformApplied),o.has("src2D")&&this.viewSettings instanceof UN&&(this.viewSettings=new UN(this.src2D,".png"))}_handleViewModeChanged(o){if(this._viewModeIndex==o.detail.viewIndex)return;const t=this._viewModeIndex;this._viewModeIndex=o.detail.viewIndex,t==0&&(this._activateAndShow2DViewer(),this._updateViewerSize()),t!=2&&this._viewModeIndex!=2||this._changeSyncMode(),this._viewModeIndex==0&&this._updateViewerSize()}_handlePointerMoveOnImageInDisableMode(o){this._viewModeIndex>0||this.viewer3DElement.rotateModel(o.detail.dx,o.detail.dy)}_handleScanInformationExtracted(){this._imageCamera.init(this._scanInformation,this.isYupTransformApplied,this._viewerSettings.modelOrientation.eulerOrientationYXZInRad.angleInRad),this.viewer2DElement.setImageFiles(this._scanInformation.imageFiles),this.viewer3DElement.loaded&&this._updateViewer()}_activateAndShow2DViewer(){this.viewer2DElement.style.cursor="auto",this.viewer2DElement.style.opacity="1",this.viewer2DElement.style.zIndex="2",this.viewer2DElement.updatePointerEventsState(!1)}_deactivateAndHide2DViewer(){this.viewer2DElement.style.opacity="0",this.viewer2DElement.style.zIndex="0",this.viewer2DElement.updatePointerEventsState(!0),this.viewer2DElement.style.cursor="grabbing"}_updateOneViewSyncMode(){this._viewModeIndex>0||(this.viewer2DElement.style.opacity==="0"?this._activateAndShow2DViewer():this._deactivateAndHide2DViewer())}_handleViewerResizeEvent(){this._updateViewerSize()}_updateViewerSize(){if(this._viewModeIndex==0){if(this._viewerAspectRatio=this.viewerBase.offsetWidth/this.viewerBase.offsetHeight,this.viewer3DElement.resize(this.viewerBase.offsetHeight,this.viewerBase.offsetWidth),this.viewer2DElement.resize(this.viewerBase.offsetHeight,this.viewerBase.offsetWidth,"translate(0,0)"),this._syncSettings2DViewer==null||this._syncSettings3DViewer==null)return;const f=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,d=this._syncSettings3DViewer.fovInRad*f;return this.viewer3DElement.setReferenceFieldOfView(d,this._viewModeIndex<2),void this._synchronize3DViewer()}if(this._isColumnDir=this.viewerBase.offsetHeight>this.viewerBase.offsetWidth,this._syncSettings2DViewer!=null){const f=this._syncSettings2DViewer.imageAspectRatio*this.viewerBase.offsetHeight/this.viewerBase.offsetWidth;this._isColumnDir=f>1}let o=this.viewerBase.offsetWidth,t=.5*this.viewerBase.offsetHeight,n="translate(0,100%)";if(this._isColumnDir||(o=.5*this.viewerBase.offsetWidth,t=this.viewerBase.offsetHeight,n="translate(100%,0)"),this._viewerAspectRatio=o/t,this.viewer3DElement.resize(t,o),this.viewer2DElement.resize(t,o,n),this.requestUpdate(),this._syncSettings2DViewer==null||this._syncSettings3DViewer==null)return;const c=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,h=this._syncSettings3DViewer.fovInRad*c;this.viewer3DElement.setReferenceFieldOfView(h,!0),this._synchronize3DViewer()}_changeSyncMode(){this._viewModeIndex<2?(this.viewer3DElement.updateRadiusMode(!0),this._synchronize3DViewer(),this.viewer3DElement.disablePan=!0):(this.viewer3DElement.disablePan=!1,this.viewer3DElement.updateRadiusMode(!1),this.viewer3DElement.setViewerOffset(0,0))}_handleFovBasedZoomChanged(o){this._viewModeIndex!=2&&this.viewer2DElement.zoomImage(o.detail.zoomLevel)}_handleImageZoomChanged(o){this._viewModeIndex<2&&this.viewer3DElement.zoomTo(o.detail.zoomLevel)}_handleImageMinZoomLevelChanged(o){this.viewer3DElement.setMinZoomLevel(o.detail.zoomLevel)}_handleImageShifted(o){this._viewModeIndex<2&&this.viewer3DElement.setViewerOffset(o.detail.deltaX,o.detail.deltaY)}_updateViewer(){const o=this.viewer3DElement.getCamera();if([this._syncSettings2DViewer,this._syncSettings3DViewer]=this._imageCamera.getSyncSettingsOfNextBestImage(o),this._syncSettings2DViewer==null||this._syncSettings3DViewer==null)return;this._viewerSettings.imageRotation.autoRotationAngle=this._syncSettings2DViewer.rotationAngle;const t=this._syncSettings2DViewer.imageIdx;this.viewer2DElement.loadNextImage(t);const n=this._imageCamera.getImageSensor(t);n==null?console.log("There is no sensor to the image index ",t):this._viewerSettings.measurementTool.imageSensor=n,this._viewerSettings.measurementTool.imageCamOrientation=this._imageCamera.getCameraPose(t);const c=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,h=this._syncSettings3DViewer.fovInRad*c;this._isInit?this.viewer3DElement.setReferenceFieldOfView(h,this._viewModeIndex<2):(this.viewer3DElement.setReferenceFieldOfView(h,!0),this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos),this._updateViewerSize(),this._isInit=!0),this._viewModeIndex<2&&this._synchronize3DViewer()}_synchronize3DViewer(){this._syncSettings3DViewer!=null&&this._syncSettings2DViewer!=null&&(this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos),this.viewer3DElement.cameraTarget=this._syncSettings3DViewer.cameraTarget.toString(),this.viewer3DElement.zoomTo(this.viewer2DElement.getZoomLevel()))}};return op.styles=A`
    :host {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #viewerBase {
      position: relative;
      border: 2px solid blue;
      width: 100%;
      height: 100%;
      min-height: 480px;
      border: 0;
      background-color: lightgray;
    }

    #viewer2D {
      position: absolute;
      left: 0;
      right: 0;
      z-index: 2;
      opacity: 1;
    }

    #viewer3D {
      position: absolute;
      z-index: 1;
      overflow: hidden;
    }

    #controls {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0;
      right: 0;
      z-index: 5;
      pointer-events: none;
    }

    .hotspot {
      display: block;
      border-radius: 20px;
      border: none;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
      cursor: pointer;
      transition: opacity 0.3s;
      position: relative;
      font-size: 12px;
      padding: 2px 6px;
    }

    .hotspot:not([data-visible]) {
      background: transparent;
      border: 3px solid #fff;
      box-shadow: none;
      pointer-events: none;
    }

    .hotspot:focus {
      border: 3px solid rgb(0, 128, 200);
      outline: none;
    }

    .hotspot > * {
      opacity: 1;
    }

    .annotation {
      background: rgba(0, 0, 0, 0.75);
      color: rgba(255, 255, 255);
      border-radius: 5px;
      border: 0;
      box-shadow: 0;
      width: max-content;
      padding: 0.25em 0.5em;
    }
  `,gg([$t({type:Boolean})],op.prototype,"isYupTransformApplied",2),gg([$t()],op.prototype,"src3D",2),gg([$t()],op.prototype,"src2D",2),gg([$t()],op.prototype,"srcScanInformation",2),gg([$t()],op.prototype,"loadMeasurement",2),gg([$t({type:Object})],op.prototype,"viewSettings",2),gg([gi("#viewerBase")],op.prototype,"viewerBase",2),gg([gi("#viewer3D")],op.prototype,"viewer3DElement",2),gg([gi("#viewer2D")],op.prototype,"viewer2DElement",2),gg([gi("#controls")],op.prototype,"controlsElement",2),op=gg([Gt("photogrammetry-viewer")],op),yie}(),OLe=PS.div(bie||(bie=uM([`
  text-align: center;
  position: relative;
  margin: auto;
  width: 100%;
  padding: 1em;

  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
`],[`
  text-align: center;
  position: relative;
  margin: auto;
  width: 100%;
  padding: 1em;

  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
`]))),QLe={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function zF(a){var e=function(i){if(typeof i=="number")return{value:i,unit:"px"};var r,s=(i.match(/^[0-9.]*/)||"").toString();r=s.includes(".")?parseFloat(s):parseInt(s,10);var l=(i.match(/[^0-9]*$/)||"").toString();return QLe[l]?{value:r,unit:l}:(console.warn("React Spinners: ".concat(i," is not a valid css value. Defaulting to ").concat(r,"px.")),{value:r,unit:"px"})}(a);return"".concat(e.value).concat(e.unit)}var Dk=function(){return Dk=Object.assign||function(a){for(var e,i=1,r=arguments.length;i<r;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a},Dk.apply(this,arguments)},NLe=function(a,e){var i={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(i[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(r=Object.getOwnPropertySymbols(a);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(a,r[s])&&(i[r[s]]=a[r[s]])}return i},HLe=function(a,e,i){var r="react-spinners-".concat(a,"-").concat(i);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var l=s.sheet,u=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return l&&l.insertRule(u,0),r}("BounceLoader","0% {transform: scale(0)} 50% {transform: scale(1.0)} 100% {transform: scale(0)}","bounce");function zLe(a){var e=a.loading,i=e===void 0||e,r=a.color,s=r===void 0?"#000000":r,l=a.speedMultiplier,u=l===void 0?1:l,A=a.cssOverride,g=A===void 0?{}:A,_=a.size,b=_===void 0?60:_,x=NLe(a,["loading","color","speedMultiplier","cssOverride","size"]),C=function(F){var L=F===1?"".concat(1/u,"s"):"0s";return{position:"absolute",height:zF(b),width:zF(b),backgroundColor:s,borderRadius:"100%",opacity:.6,top:0,left:0,animationFillMode:"both",animation:"".concat(HLe," ").concat(2.1/u,"s ").concat(L," infinite ease-in-out")}},I=Dk({display:"inherit",position:"relative",width:zF(b),height:zF(b)},g);return i?Ce.createElement("span",Dk({style:I},x),Ce.createElement("span",{style:C(1)}),Ce.createElement("span",{style:C(2)})):null}var wie,$le=function(a){return Ye.createElement(OLe,null,Ye.createElement(zLe,{color:"#32cd32"}),Ye.createElement("p",null,a.statusMessage))},M4=PS.div(wie||(wie=uM([`
  text-align: center;
  position: relative;
  margin: auto;
  padding: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;

  background-color: #f1f1f1;
  color: #333;

  @media (prefers-color-scheme: dark) {
    background-color: #333;
    color: #fff;
  }
`],[`
  text-align: center;
  position: relative;
  margin: auto;
  padding: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;

  background-color: #f1f1f1;
  color: #333;

  @media (prefers-color-scheme: dark) {
    background-color: #333;
    color: #fff;
  }
`]))),sT=1,fz=65535,xie=setInterval(function(){sT=sT+1&fz},250);xie.unref&&xie.unref();class GLe{constructor(e,i=1e3){this.length=parseInt(e,10)||0,this.transferred=0,this.speed=0,this.streamSpeed=function(r){var s=4*r,l=[0],u=1,A=sT-1&fz;return function(g){var _=sT-A&fz;for(_>s&&(_=s),A=sT;_--;)u===s&&(u=0),l[u]=l[u===0?s-1:u-1],u++;g&&(l[u-1]+=g);var b=l[u-1],x=l.length<s?0:l[u===s?0:u];return l.length<4?b:4*(b-x)/l.length}}(this.speed||5e3),this.initial=!1,this.emitDelay=i,this.eventStart=0,this.percentage=0}getRemainingBytes(){return parseInt(this.length,10)-parseInt(this.transferred,10)}getEta(){return this.length>=this.transferred?this.getRemainingBytes()/this.speed*1e9:0}flow(e,i){const r=e.length;if(this.transferred+=r,this.speed=this.streamSpeed(r),this.percentage=Math.round(this.transferred/this.length*100),this.initial||(this.eventStart=Date.now(),this.initial=!0),this.length>=this.transferred||Date.now()-this.eventStart>this.emitDelay){this.eventStart=Date.now();const s={total:this.length,transferred:this.transferred,speed:this.speed,eta:this.getEta()};this.length&&(s.remaining=this.getRemainingBytes(),s.percentage=this.percentage),i(s)}}}function VLe({defaultSize:a=0,emitDelay:e=10,onProgress:i=()=>null,onComplete:r=()=>null,onError:s=()=>null}){return function(l){if(typeof Response>"u"||typeof ReadableStream>"u")return l;const{body:u,headers:A,status:g}=l,_=A.get("content-length")||a,b=new GLe(_,e),x=u.getReader(),C=new ReadableStream({start(I){(function F(){x.read().then(({done:L,value:U})=>{if(L)return r({}),void I.close();U&&b.flow(U,i),I.enqueue(U),F()}).catch(L=>{s(L)})})()}});return new Response(C,{headers:A,status:g})}}function qLe(a,e){var i=this;return caches.open("photogrammetry-viewer-cache").then(function(r){return r.match(a).then(function(s){return s?(console.log("Using cached response for "+a),s):fetch(a).then(VLe(e)).then(function(l){return Ef(i,void 0,void 0,function(){var u;return Sf(this,function(A){switch(A.label){case 0:if(!a.startsWith("http:")&&!a.startsWith("https:"))return[3,4];console.info("Caching response for "+a),l.headers.append("cached-time",Date.now().toString()),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,r.put(a,l.clone())];case 2:return A.sent(),[3,4];case 3:return u=A.sent(),console.error("Error caching response for ".concat(a,":"),u),[3,4];case 4:return[2,l]}})})})})})}function Wle(a){return a.arrayBuffer?a.arrayBuffer():new Promise((e,i)=>{const r=new FileReader;r.addEventListener("loadend",()=>{e(r.result)}),r.addEventListener("error",i),r.readAsArrayBuffer(a)})}async function $Le(a){const e=await Wle(a);return new Uint8Array(e)}function jle(a){return typeof Blob<"u"&&a instanceof Blob}function qT(a){return typeof SharedArrayBuffer<"u"&&a instanceof SharedArrayBuffer}const WLe=typeof process<"u"&&process.versions&&process.versions.node!==void 0&&process.versions.electron===void 0;class Cie{constructor(e){this.typedArray=e instanceof ArrayBuffer||qT(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,i){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,i)}}class Eie{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,i){const r=this.blob.slice(e,e+i),s=await Wle(r);return new Uint8Array(s)}async sliceAsBlob(e,i,r=""){return this.blob.slice(e,e+i,r)}}function R4(a,e){var i=a.length;if(e<=i)return a;var r=new Uint8Array(Math.max(i<<1,e));return r.set(a,0),r}function jLe(a,e,i,r,s,l){for(var u=Kle,A=Xle,g=0;g<i;){var _=a[A(r,s)&e];s+=15&_;var b=_>>>4;if(b<=15)l[g]=b,g++;else{var x=0,C=0;b==16?(C=3+u(r,s,2),s+=2,x=l[g-1]):b==17?(C=3+u(r,s,3),s+=3):b==18&&(C=11+u(r,s,7),s+=7);for(var I=g+C;g<I;)l[g]=x,g++}}return s}function Sie(a,e,i,r){for(var s=0,l=0,u=r.length>>>1;l<i;){var A=a[l+e];r[l<<1]=0,r[1+(l<<1)]=A,A>s&&(s=A),l++}for(;l<u;)r[l<<1]=0,r[1+(l<<1)]=0,l++;return s}function oT(a,e){for(var i,r,s,l,u=a.length,A=qn.bl_count,g=0;g<=e;g++)A[g]=0;for(g=1;g<u;g+=2)A[a[g]]++;var _=qn.next_code;for(i=0,A[0]=0,r=1;r<=e;r++)i=i+A[r-1]<<1,_[r]=i;for(s=0;s<u;s+=2)(l=a[s+1])!=0&&(a[s]=_[l],_[l]++)}function aT(a,e,i){for(var r=a.length,s=qn.rev15,l=0;l<r;l+=2)if(a[l+1]!=0)for(var u=l>>1,A=a[l+1],g=u<<4|A,_=e-A,b=a[l]<<_,x=b+(1<<_);b!=x;)i[s[b]>>>15-e]=g,b++}function Bie(a,e){for(var i=qn.rev15,r=15-e,s=0;s<a.length;s+=2){var l=a[s]<<e-a[s+1];a[s]=i[l]>>>r}}function Kle(a,e,i){return(a[e>>>3]|a[1+(e>>>3)]<<8)>>>(7&e)&(1<<i)-1}function KLe(a,e,i){return(a[e>>>3]|a[1+(e>>>3)]<<8|a[2+(e>>>3)]<<16)>>>(7&e)&(1<<i)-1}function Xle(a,e){return(a[e>>>3]|a[1+(e>>>3)]<<8|a[2+(e>>>3)]<<16)>>>(7&e)}const qn=(mf=Uint16Array,kE=Uint32Array,{next_code:new mf(16),bl_count:new mf(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new mf(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new kE(32),flmap:new mf(512),fltree:[],fdmap:new mf(32),fdtree:[],lmap:new mf(32768),ltree:[],ttree:[],dmap:new mf(32768),dtree:[],imap:new mf(512),itree:[],rev15:new mf(32768),lhst:new kE(286),dhst:new kE(30),ihst:new kE(19),lits:new kE(15e3),strt:new mf(65536),prev:new mf(32768)});var mf,kE;function XLe(a,e){return function(i,r){var s=Uint8Array;if(i[0]==3&&i[1]==0)return r||new s(0);var l=KLe,u=Kle,A=jLe,g=Xle,_=r==null;_&&(r=new s(i.length>>>2<<3));for(var b,x,C=0,I=0,F=0,L=0,U=0,P=0,H=0,N=0,z=0;C==0;)if(C=l(i,z,1),I=l(i,z+1,2),z+=3,I!=0){if(_&&(r=R4(r,N+(1<<17))),I==1&&(b=qn.flmap,x=qn.fdmap,P=511,H=31),I==2){F=u(i,z,5)+257,L=u(i,z+5,5)+1,U=u(i,z+10,4)+4,z+=14;for(var W=0;W<38;W+=2)qn.itree[W]=0,qn.itree[W+1]=0;var j=1;for(W=0;W<U;W++){var J=u(i,z+3*W,3);qn.itree[1+(qn.ordr[W]<<1)]=J,J>j&&(j=J)}z+=3*U,oT(qn.itree,j),aT(qn.itree,j,qn.imap),b=qn.lmap,x=qn.dmap,z=A(qn.imap,(1<<j)-1,F+L,i,z,qn.ttree);var ie=Sie(qn.ttree,0,F,qn.ltree);P=(1<<ie)-1;var ee=Sie(qn.ttree,F,L,qn.dtree);H=(1<<ee)-1,oT(qn.ltree,ie),aT(qn.ltree,ie,b),oT(qn.dtree,ee),aT(qn.dtree,ee,x)}for(;;){var re=b[g(i,z)&P];z+=15&re;var se=re>>>4;if(!(se>>>8))r[N++]=se;else{if(se==256)break;var ue=N+se-254;if(se>264){var fe=qn.ldef[se-257];ue=N+(fe>>>3)+u(i,z,7&fe),z+=7&fe}var pe=x[g(i,z)&H];z+=15&pe;var xe=pe>>>4,ce=qn.ddef[xe],_e=(ce>>>4)+l(i,z,15&ce);for(z+=15&ce,_&&(r=R4(r,N+(1<<17)));N<ue;)r[N]=r[N++-_e],r[N]=r[N++-_e],r[N]=r[N++-_e],r[N]=r[N++-_e];N=ue}}}else{7&z&&(z+=8-(7&z));var ye=4+(z>>>3),Oe=i[ye-4]|i[ye-3]<<8;_&&(r=R4(r,N+Oe)),r.set(new s(i.buffer,i.byteOffset+ye,Oe),N),z=ye+Oe<<3,N+=Oe}return r.length==N?r:r.slice(0,N)}(a,e)}(function(){for(var a=0;a<32768;a++){var e=a;e=(4278255360&(e=(4042322160&(e=(3435973836&(e=(2863311530&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8,qn.rev15[a]=(e>>>16|e<<16)>>>17}function i(r,s,l){for(;s--!=0;)r.push(0,l)}for(a=0;a<32;a++)qn.ldef[a]=qn.of0[a]<<3|qn.exb[a],qn.ddef[a]=qn.df0[a]<<4|qn.dxb[a];i(qn.fltree,144,8),i(qn.fltree,112,9),i(qn.fltree,24,7),i(qn.fltree,8,8),oT(qn.fltree,9),aT(qn.fltree,9,qn.flmap),Bie(qn.fltree,9),i(qn.fdtree,32,5),oT(qn.fdtree,5),aT(qn.fdtree,5,qn.fdmap),Bie(qn.fdtree,5),i(qn.itree,19,0),i(qn.ltree,286,0),i(qn.dtree,30,0),i(qn.ttree,320,0)})(),function(){for(var a=new Uint32Array(256),e=0;e<256;e++){for(var i=e,r=0;r<8;r++)1&i?i=3988292384^i>>>1:i>>>=1;a[e]=i}}();const Iie={numWorkers:1,workerURL:"",useWorkers:!1};let YLe=0;const GF=[];function D4(a){return new Promise((e,i)=>{const r=new Worker(a);r.onmessage=s=>{s.data==="start"?(r.onerror=void 0,r.onmessage=void 0,e(r)):i(new Error(`unexpected message: ${s.data}`))},r.onerror=i})}function JLe(a,e,i,r){const s=new Uint8Array(e);XLe(a,s),r(i?new Blob([s],{type:i}):s.buffer)}function Tie(a,e,i){return new Promise((r,s)=>{GF.push({src:a,uncompressedSize:e,type:i,resolve:r,reject:s,id:YLe++}),async function(){if(GF.length!==0)for(;GF.length;){const{src:l,uncompressedSize:u,type:A,resolve:g}=GF.shift();let _=l;jle(l)&&(_=await $Le(l)),JLe(_,u,A,g)}}()})}(function(){if(WLe){const{Worker:i}=(a=Nce,e="worker_threads",a.require?a.require(e):{});return{createWorker:async r=>new i(r),addEventListener(r,s){r.on("message",l=>{s({target:r,data:l})})},async terminate(r){await r.terminate()}}}return{async createWorker(i){try{return await D4(i)}catch{console.warn("could not load worker:",i)}let r;try{const s=await fetch(i,{mode:"cors"});if(!s.ok)throw new Error(`could not load: ${i}`);r=await s.text(),i=URL.createObjectURL(new Blob([r],{type:"application/javascript"}));const l=await D4(i);return Iie.workerURL=i,l}catch{console.warn("could not load worker via fetch:",i)}if(r!==void 0)try{i=`data:application/javascript;base64,${btoa(r)}`;const s=await D4(i);return Iie.workerURL=i,s}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(i,r){i.addEventListener("message",r)},async terminate(i){i.terminate()}};var a,e})();class ZLe{constructor(e,i){var r,s;this._reader=e,this._rawEntry=i,this.name=i.name,this.nameBytes=i.nameBytes,this.size=i.uncompressedSize,this.compressedSize=i.compressedSize,this.comment=i.comment,this.commentBytes=i.commentBytes,this.compressionMethod=i.compressionMethod,this.lastModDate=(r=i.lastModFileDate,s=i.lastModFileTime,new Date(1980+(r>>9&127),(r>>5&15)-1,31&r,s>>11&31,s>>5&63,2*(31&s),0)),this.isDirectory=i.uncompressedSize===0&&i.name.endsWith("/"),this.encrypted=!!(1&i.generalPurposeBitFlag),this.externalFileAttributes=i.externalFileAttributes,this.versionMadeBy=i.versionMadeBy}async blob(e="application/octet-stream"){return await async function(i,r,s){const{decompress:l,fileDataStart:u}=await Mie(i,r);if(!l){const _=await F4(i,u,r.compressedSize,s);return jle(_)?_:new Blob([qT(_.buffer)?new Uint8Array(_):_],{type:s})}const A=await F4(i,u,r.compressedSize);return await Tie(A,r.uncompressedSize,s)}(this._reader,this._rawEntry,e)}async arrayBuffer(){return await async function(e,i){const{decompress:r,fileDataStart:s}=await Mie(e,i);if(!r){const A=await SS(e,s,i.compressedSize);return(l=A).byteOffset===0&&l.byteLength===l.buffer.byteLength?A.buffer:A.slice().buffer}var l;const u=await F4(e,s,i.compressedSize);return await Tie(u,i.uncompressedSize)}(this._reader,this._rawEntry)}async text(){const e=await this.arrayBuffer();return lT(new Uint8Array(e))}async json(){const e=await this.text();return JSON.parse(e)}}async function SS(a,e,i){return await a.read(e,i)}async function F4(a,e,i,r){return a.sliceAsBlob?await a.sliceAsBlob(e,i,r):await a.read(e,i)}const ePe={unsigned:()=>0};function Yu(a,e){return a[e]+256*a[e+1]}function Hd(a,e){return a[e]+256*a[e+1]+65536*a[e+2]+16777216*a[e+3]}function dw(a,e){return Hd(a,e)+4294967296*Hd(a,e+4)}const tPe=new TextDecoder;function lT(a,e){return qT(a.buffer)&&(a=new Uint8Array(a)),tPe.decode(a)}const iPe=117853008;async function nPe(a,e,i,r){const s=e-20,l=await SS(a,s,20);if(Hd(l,0)!==iPe)throw new Error("invalid zip64 end of central directory locator signature");const u=dw(l,8),A=await SS(a,u,56);if(Hd(A,0)!==101075792)throw new Error("invalid zip64 end of central directory record signature");const g=dw(A,32),_=dw(A,40);return Yle(a,dw(A,48),_,g,i,r)}const rPe=33639248;async function Yle(a,e,i,r,s,l){let u=0;const A=await SS(a,e,i),g=[];for(let _=0;_<r;++_){const b=A.subarray(u,u+46),x=Hd(b,0);if(x!==rPe)throw new Error(`invalid central directory file header signature: 0x${x.toString(16)}`);const C={versionMadeBy:Yu(b,4),versionNeededToExtract:Yu(b,6),generalPurposeBitFlag:Yu(b,8),compressionMethod:Yu(b,10),lastModFileTime:Yu(b,12),lastModFileDate:Yu(b,14),crc32:Hd(b,16),compressedSize:Hd(b,20),uncompressedSize:Hd(b,24),fileNameLength:Yu(b,28),extraFieldLength:Yu(b,30),fileCommentLength:Yu(b,32),internalFileAttributes:Yu(b,36),externalFileAttributes:Hd(b,38),relativeOffsetOfLocalHeader:Hd(b,42)};if(64&C.generalPurposeBitFlag)throw new Error("strong encryption is not supported");u+=46;const I=A.subarray(u,u+C.fileNameLength+C.extraFieldLength+C.fileCommentLength);C.nameBytes=I.slice(0,C.fileNameLength),C.name=lT(C.nameBytes);const F=C.fileNameLength+C.extraFieldLength,L=I.slice(C.fileNameLength,F);C.extraFields=[];let U=0;for(;U<L.length-3;){const H=Yu(L,U+0),N=U+4,z=N+Yu(L,U+2);if(z>L.length)throw new Error("extra field length exceeds extra field buffer size");C.extraFields.push({id:H,data:L.slice(N,z)}),U=z}if(C.commentBytes=I.slice(F,F+C.fileCommentLength),C.comment=lT(C.commentBytes),u+=I.length,C.uncompressedSize===4294967295||C.compressedSize===4294967295||C.relativeOffsetOfLocalHeader===4294967295){const H=C.extraFields.find(W=>W.id===1);if(!H)throw new Error("expected zip64 extended information extra field");const N=H.data;let z=0;if(C.uncompressedSize===4294967295){if(z+8>N.length)throw new Error("zip64 extended information extra field does not include uncompressed size");C.uncompressedSize=dw(N,z),z+=8}if(C.compressedSize===4294967295){if(z+8>N.length)throw new Error("zip64 extended information extra field does not include compressed size");C.compressedSize=dw(N,z),z+=8}if(C.relativeOffsetOfLocalHeader===4294967295){if(z+8>N.length)throw new Error("zip64 extended information extra field does not include relative header offset");C.relativeOffsetOfLocalHeader=dw(N,z),z+=8}}const P=C.extraFields.find(H=>H.id===28789&&H.data.length>=6&&H.data[0]===1&&Hd(H.data,1),ePe.unsigned(C.nameBytes));if(P&&(C.fileName=lT(P.data.slice(5))),C.compressionMethod===0){let H=C.uncompressedSize;if(1&C.generalPurposeBitFlag&&(H+=12),C.compressedSize!==H)throw new Error(`compressed size mismatch for stored file: ${C.compressedSize} != ${H}`)}g.push(C)}return{zip:{comment:s,commentBytes:l},entries:g.map(_=>new ZLe(a,_))}}async function Mie(a,e){if(1&e.generalPurposeBitFlag)throw new Error("encrypted entries not supported");const i=await SS(a,e.relativeOffsetOfLocalHeader,30),r=await a.getLength(),s=Hd(i,0);if(s!==67324752)throw new Error(`invalid local file header signature: 0x${s.toString(16)}`);const l=Yu(i,26),u=Yu(i,28),A=e.relativeOffsetOfLocalHeader+i.length+l+u;let g;if(e.compressionMethod===0)g=!1;else{if(e.compressionMethod!==8)throw new Error(`unsupported compression method: ${e.compressionMethod}`);g=!0}const _=A,b=_+e.compressedSize;if(e.compressedSize!==0&&b>r)throw new Error(`file data overflows file bounds: ${_} +  ${e.compressedSize}  > ${r}`);return{decompress:g,fileDataStart:_}}async function sPe(a){let e;if(typeof Blob<"u"&&a instanceof Blob)e=new Eie(a);else if(a instanceof ArrayBuffer||a&&a.buffer&&a.buffer instanceof ArrayBuffer)e=new Cie(a);else if(qT(a)||qT(a.buffer))e=new Cie(a);else if(typeof a=="string"){const r=await fetch(a);if(!r.ok)throw new Error(`failed http request ${a}, status: ${r.status}: ${r.statusText}`);const s=await r.blob();e=new Eie(s)}else{if(typeof a.getLength!="function"||typeof a.read!="function")throw new Error("unsupported source type");e=a}const i=await e.getLength();if(i>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${i}. Only file sizes up 4503599627370496 bytes are supported`);return await async function(r,s){const l=Math.min(65557,s),u=s-l,A=await SS(r,u,l);for(let g=l-22;g>=0;--g){if(Hd(A,g)!==101010256)continue;const _=new Uint8Array(A.buffer,A.byteOffset+g,A.byteLength-g),b=Yu(_,4);if(b!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${b}`);const x=Yu(_,10),C=Hd(_,12),I=Hd(_,16),F=Yu(_,20),L=_.length-22;if(F!==L)throw new Error(`invalid comment length. expected: ${L}, actual: ${F}`);const U=new Uint8Array(_.buffer,_.byteOffset+22,F),P=lT(U);return x===65535||I===4294967295?await nPe(r,u+g,P,U):await Yle(r,I,C,x,P,U)}throw new Error("could not find end of central directory. maybe not zip file")}(e,i)}async function oPe(a){const{zip:e,entries:i}=await sPe(a);return{zip:e,entries:Object.fromEntries(i.map(r=>[r.name,r]))}}var aPe=function(){function a(){this.zipInfo=null}return a.prototype.getFileList=function(){return Ef(this,void 0,void 0,function(){return Sf(this,function(e){if(this.zipInfo==null)throw new Error("Zip file not initialized");return[2,Object.keys(this.zipInfo.entries)]})})},a.create=function(e){return Ef(this,void 0,void 0,function(){var i,r;return Sf(this,function(s){switch(s.label){case 0:return i=new a,r=i,[4,oPe(e)];case 1:return r.zipInfo=s.sent(),[2,i]}})})},a.prototype.getFileAsObjectURL=function(e){return Ef(this,void 0,void 0,function(){var i,r;return Sf(this,function(s){switch(s.label){case 0:if(this.zipInfo==null)throw new Error("Zip file not initialized");return r=(i=URL).createObjectURL,[4,this.zipInfo.entries[e].blob()];case 1:return[2,r.apply(i,[s.sent()])]}})})},a}(),lPe=Object.defineProperty,vf=(a,e,i)=>((r,s,l)=>s in r?lPe(r,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[s]=l)(a,typeof e!="symbol"?e+"":e,i);function zS(a){let e=a.length;for(;--e>=0;)a[e]=0}zS(new Array(576));zS(new Array(60));zS(new Array(512));zS(new Array(256));zS(new Array(29));zS(new Array(30));var gz=(a,e,i,r)=>{let s=65535&a,l=a>>>16&65535,u=0;for(;i!==0;){u=i>2e3?2e3:i,i-=u;do s=s+e[r++]|0,l=l+s|0;while(--u);s%=65521,l%=65521}return s|l<<16};const cPe=new Uint32Array((()=>{let a,e=[];for(var i=0;i<256;i++){a=i;for(var r=0;r<8;r++)a=1&a?3988292384^a>>>1:a>>>1;e[i]=a}return e})());var Pm=(a,e,i,r)=>{const s=cPe,l=r+i;a^=-1;for(let u=r;u<l;u++)a=a>>>8^s[255&(a^e[u])];return~a},mz={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Jle={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const uPe=(a,e)=>Object.prototype.hasOwnProperty.call(a,e);var hPe=function(a){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const r in i)uPe(i,r)&&(a[r]=i[r])}}return a},dPe=a=>{let e=0;for(let r=0,s=a.length;r<s;r++)e+=a[r].length;const i=new Uint8Array(e);for(let r=0,s=0,l=a.length;r<l;r++){let u=a[r];i.set(u,s),s+=u.length}return i};let Zle=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Zle=!1}const $T=new Uint8Array(256);for(let a=0;a<256;a++)$T[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;$T[254]=$T[254]=1;var APe=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let e,i,r,s,l,u=a.length,A=0;for(s=0;s<u;s++)i=a.charCodeAt(s),(64512&i)==55296&&s+1<u&&(r=a.charCodeAt(s+1),(64512&r)==56320&&(i=65536+(i-55296<<10)+(r-56320),s++)),A+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(A),l=0,s=0;l<A;s++)i=a.charCodeAt(s),(64512&i)==55296&&s+1<u&&(r=a.charCodeAt(s+1),(64512&r)==56320&&(i=65536+(i-55296<<10)+(r-56320),s++)),i<128?e[l++]=i:i<2048?(e[l++]=192|i>>>6,e[l++]=128|63&i):i<65536?(e[l++]=224|i>>>12,e[l++]=128|i>>>6&63,e[l++]=128|63&i):(e[l++]=240|i>>>18,e[l++]=128|i>>>12&63,e[l++]=128|i>>>6&63,e[l++]=128|63&i);return e},pPe=(a,e)=>{const i=e||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,e));let r,s;const l=new Array(2*i);for(s=0,r=0;r<i;){let u=a[r++];if(u<128){l[s++]=u;continue}let A=$T[u];if(A>4)l[s++]=65533,r+=A-1;else{for(u&=A===2?31:A===3?15:7;A>1&&r<i;)u=u<<6|63&a[r++],A--;A>1?l[s++]=65533:u<65536?l[s++]=u:(u-=65536,l[s++]=55296|u>>10&1023,l[s++]=56320|1023&u)}}return((u,A)=>{if(A<65534&&u.subarray&&Zle)return String.fromCharCode.apply(null,u.length===A?u:u.subarray(0,A));let g="";for(let _=0;_<A;_++)g+=String.fromCharCode(u[_]);return g})(l,s)},fPe=(a,e)=>{(e=e||a.length)>a.length&&(e=a.length);let i=e-1;for(;i>=0&&(192&a[i])==128;)i--;return i<0||i===0?e:i+$T[a[i]]>e?i:e},gPe=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const VF=16209;var mPe=function(a,e){let i,r,s,l,u,A,g,_,b,x,C,I,F,L,U,P,H,N,z,W,j,J,ie,ee;const re=a.state;i=a.next_in,ie=a.input,r=i+(a.avail_in-5),s=a.next_out,ee=a.output,l=s-(e-a.avail_out),u=s+(a.avail_out-257),A=re.dmax,g=re.wsize,_=re.whave,b=re.wnext,x=re.window,C=re.hold,I=re.bits,F=re.lencode,L=re.distcode,U=(1<<re.lenbits)-1,P=(1<<re.distbits)-1;e:do{I<15&&(C+=ie[i++]<<I,I+=8,C+=ie[i++]<<I,I+=8),H=F[C&U];t:for(;;){if(N=H>>>24,C>>>=N,I-=N,N=H>>>16&255,N===0)ee[s++]=65535&H;else{if(!(16&N)){if(64&N){if(32&N){re.mode=16191;break e}a.msg="invalid literal/length code",re.mode=VF;break e}H=F[(65535&H)+(C&(1<<N)-1)];continue t}for(z=65535&H,N&=15,N&&(I<N&&(C+=ie[i++]<<I,I+=8),z+=C&(1<<N)-1,C>>>=N,I-=N),I<15&&(C+=ie[i++]<<I,I+=8,C+=ie[i++]<<I,I+=8),H=L[C&P];;){if(N=H>>>24,C>>>=N,I-=N,N=H>>>16&255,16&N){if(W=65535&H,N&=15,I<N&&(C+=ie[i++]<<I,I+=8,I<N&&(C+=ie[i++]<<I,I+=8)),W+=C&(1<<N)-1,W>A){a.msg="invalid distance too far back",re.mode=VF;break e}if(C>>>=N,I-=N,N=s-l,W>N){if(N=W-N,N>_&&re.sane){a.msg="invalid distance too far back",re.mode=VF;break e}if(j=0,J=x,b===0){if(j+=g-N,N<z){z-=N;do ee[s++]=x[j++];while(--N);j=s-W,J=ee}}else if(b<N){if(j+=g+b-N,N-=b,N<z){z-=N;do ee[s++]=x[j++];while(--N);if(j=0,b<z){N=b,z-=N;do ee[s++]=x[j++];while(--N);j=s-W,J=ee}}}else if(j+=b-N,N<z){z-=N;do ee[s++]=x[j++];while(--N);j=s-W,J=ee}for(;z>2;)ee[s++]=J[j++],ee[s++]=J[j++],ee[s++]=J[j++],z-=3;z&&(ee[s++]=J[j++],z>1&&(ee[s++]=J[j++]))}else{j=s-W;do ee[s++]=ee[j++],ee[s++]=ee[j++],ee[s++]=ee[j++],z-=3;while(z>2);z&&(ee[s++]=ee[j++],z>1&&(ee[s++]=ee[j++]))}break}if(64&N){a.msg="invalid distance code",re.mode=VF;break e}H=L[(65535&H)+(C&(1<<N)-1)]}}break}}while(i<r&&s<u);z=I>>3,i-=z,I-=z<<3,C&=(1<<I)-1,a.next_in=i,a.next_out=s,a.avail_in=i<r?r-i+5:5-(i-r),a.avail_out=s<u?u-s+257:257-(s-u),re.hold=C,re.bits=I};const qF=15,_Pe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vPe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yPe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bPe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var cT=(a,e,i,r,s,l,u,A)=>{const g=A.bits;let _,b,x,C,I,F,L=0,U=0,P=0,H=0,N=0,z=0,W=0,j=0,J=0,ie=0,ee=null;const re=new Uint16Array(16),se=new Uint16Array(16);let ue,fe,pe,xe=null;for(L=0;L<=qF;L++)re[L]=0;for(U=0;U<r;U++)re[e[i+U]]++;for(N=g,H=qF;H>=1&&re[H]===0;H--);if(N>H&&(N=H),H===0)return s[l++]=20971520,s[l++]=20971520,A.bits=1,0;for(P=1;P<H&&re[P]===0;P++);for(N<P&&(N=P),j=1,L=1;L<=qF;L++)if(j<<=1,j-=re[L],j<0)return-1;if(j>0&&(a===0||H!==1))return-1;for(se[1]=0,L=1;L<qF;L++)se[L+1]=se[L]+re[L];for(U=0;U<r;U++)e[i+U]!==0&&(u[se[e[i+U]]++]=U);if(a===0?(ee=xe=u,F=20):a===1?(ee=_Pe,xe=vPe,F=257):(ee=yPe,xe=bPe,F=0),ie=0,U=0,L=P,I=l,z=N,W=0,x=-1,J=1<<N,C=J-1,a===1&&J>852||a===2&&J>592)return 1;for(;;){ue=L-W,u[U]+1<F?(fe=0,pe=u[U]):u[U]>=F?(fe=xe[u[U]-F],pe=ee[u[U]-F]):(fe=96,pe=0),_=1<<L-W,b=1<<z,P=b;do b-=_,s[I+(ie>>W)+b]=ue<<24|fe<<16|pe;while(b!==0);for(_=1<<L-1;ie&_;)_>>=1;if(_!==0?(ie&=_-1,ie+=_):ie=0,U++,--re[L]==0){if(L===H)break;L=e[i+u[U]]}if(L>N&&(ie&C)!==x){for(W===0&&(W=N),I+=P,z=L-W,j=1<<z;z+W<H&&(j-=re[z+W],!(j<=0));)z++,j<<=1;if(J+=1<<z,a===1&&J>852||a===2&&J>592)return 1;x=ie&C,s[x]=N<<24|z<<16|I-l}}return ie!==0&&(s[I+ie]=L-W<<24|64<<16),A.bits=N,0};const{Z_FINISH:Rie,Z_BLOCK:wPe,Z_TREES:$F,Z_OK:Nw,Z_STREAM_END:xPe,Z_NEED_DICT:CPe,Z_STREAM_ERROR:Pg,Z_DATA_ERROR:ece,Z_MEM_ERROR:tce,Z_BUF_ERROR:EPe,Z_DEFLATED:Die}=Jle,HL=16180,Fk=16190,Cv=16191,U4=16192,k4=16194,WF=16199,jF=16200,L4=16206,Ta=16209,Fie=a=>(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24);function SPe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ww=a=>{if(!a)return 1;const e=a.state;return!e||e.strm!==a||e.mode<HL||e.mode>16211?1:0},ice=a=>{if(Ww(a))return Pg;const e=a.state;return a.total_in=a.total_out=e.total=0,a.msg="",e.wrap&&(a.adler=1&e.wrap),e.mode=HL,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Nw},nce=a=>{if(Ww(a))return Pg;const e=a.state;return e.wsize=0,e.whave=0,e.wnext=0,ice(a)},rce=(a,e)=>{let i;if(Ww(a))return Pg;const r=a.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Pg:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=i,r.wbits=e,nce(a))},sce=(a,e)=>{if(!a)return Pg;const i=new SPe;a.state=i,i.strm=a,i.window=null,i.mode=HL;const r=rce(a,e);return r!==Nw&&(a.state=null),r};let P4,O4,Uie=!0;const BPe=a=>{if(Uie){P4=new Int32Array(512),O4=new Int32Array(32);let e=0;for(;e<144;)a.lens[e++]=8;for(;e<256;)a.lens[e++]=9;for(;e<280;)a.lens[e++]=7;for(;e<288;)a.lens[e++]=8;for(cT(1,a.lens,0,288,P4,0,a.work,{bits:9}),e=0;e<32;)a.lens[e++]=5;cT(2,a.lens,0,32,O4,0,a.work,{bits:5}),Uie=!1}a.lencode=P4,a.lenbits=9,a.distcode=O4,a.distbits=5},oce=(a,e,i,r)=>{let s;const l=a.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),r>=l.wsize?(l.window.set(e.subarray(i-l.wsize,i),0),l.wnext=0,l.whave=l.wsize):(s=l.wsize-l.wnext,s>r&&(s=r),l.window.set(e.subarray(i-r,i-r+s),l.wnext),(r-=s)?(l.window.set(e.subarray(i-r,i),0),l.wnext=r,l.whave=l.wsize):(l.wnext+=s,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=s))),0};var IPe=a=>sce(a,15),TPe=(a,e)=>{let i,r,s,l,u,A,g,_,b,x,C,I,F,L,U,P,H,N,z,W,j,J,ie=0;const ee=new Uint8Array(4);let re,se;const ue=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ww(a)||!a.output||!a.input&&a.avail_in!==0)return Pg;i=a.state,i.mode===Cv&&(i.mode=U4),u=a.next_out,s=a.output,g=a.avail_out,l=a.next_in,r=a.input,A=a.avail_in,_=i.hold,b=i.bits,x=A,C=g,J=Nw;e:for(;;)switch(i.mode){case HL:if(i.wrap===0){i.mode=U4;break}for(;b<16;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(2&i.wrap&&_===35615){i.wbits===0&&(i.wbits=15),i.check=0,ee[0]=255&_,ee[1]=_>>>8&255,i.check=Pm(i.check,ee,2,0),_=0,b=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&_)<<8)+(_>>8))%31){a.msg="incorrect header check",i.mode=Ta;break}if((15&_)!==Die){a.msg="unknown compression method",i.mode=Ta;break}if(_>>>=4,b-=4,j=8+(15&_),i.wbits===0&&(i.wbits=j),j>15||j>i.wbits){a.msg="invalid window size",i.mode=Ta;break}i.dmax=1<<i.wbits,i.flags=0,a.adler=i.check=1,i.mode=512&_?16189:Cv,_=0,b=0;break;case 16181:for(;b<16;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(i.flags=_,(255&i.flags)!==Die){a.msg="unknown compression method",i.mode=Ta;break}if(57344&i.flags){a.msg="unknown header flags set",i.mode=Ta;break}i.head&&(i.head.text=_>>8&1),512&i.flags&&4&i.wrap&&(ee[0]=255&_,ee[1]=_>>>8&255,i.check=Pm(i.check,ee,2,0)),_=0,b=0,i.mode=16182;case 16182:for(;b<32;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}i.head&&(i.head.time=_),512&i.flags&&4&i.wrap&&(ee[0]=255&_,ee[1]=_>>>8&255,ee[2]=_>>>16&255,ee[3]=_>>>24&255,i.check=Pm(i.check,ee,4,0)),_=0,b=0,i.mode=16183;case 16183:for(;b<16;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}i.head&&(i.head.xflags=255&_,i.head.os=_>>8),512&i.flags&&4&i.wrap&&(ee[0]=255&_,ee[1]=_>>>8&255,i.check=Pm(i.check,ee,2,0)),_=0,b=0,i.mode=16184;case 16184:if(1024&i.flags){for(;b<16;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}i.length=_,i.head&&(i.head.extra_len=_),512&i.flags&&4&i.wrap&&(ee[0]=255&_,ee[1]=_>>>8&255,i.check=Pm(i.check,ee,2,0)),_=0,b=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(I=i.length,I>A&&(I=A),I&&(i.head&&(j=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(r.subarray(l,l+I),j)),512&i.flags&&4&i.wrap&&(i.check=Pm(i.check,r,I,l)),A-=I,l+=I,i.length-=I),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(A===0)break e;I=0;do j=r[l+I++],i.head&&j&&i.length<65536&&(i.head.name+=String.fromCharCode(j));while(j&&I<A);if(512&i.flags&&4&i.wrap&&(i.check=Pm(i.check,r,I,l)),A-=I,l+=I,j)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(A===0)break e;I=0;do j=r[l+I++],i.head&&j&&i.length<65536&&(i.head.comment+=String.fromCharCode(j));while(j&&I<A);if(512&i.flags&&4&i.wrap&&(i.check=Pm(i.check,r,I,l)),A-=I,l+=I,j)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;b<16;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(4&i.wrap&&_!==(65535&i.check)){a.msg="header crc mismatch",i.mode=Ta;break}_=0,b=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),a.adler=i.check=0,i.mode=Cv;break;case 16189:for(;b<32;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}a.adler=i.check=Fie(_),_=0,b=0,i.mode=Fk;case Fk:if(i.havedict===0)return a.next_out=u,a.avail_out=g,a.next_in=l,a.avail_in=A,i.hold=_,i.bits=b,CPe;a.adler=i.check=1,i.mode=Cv;case Cv:if(e===wPe||e===$F)break e;case U4:if(i.last){_>>>=7&b,b-=7&b,i.mode=L4;break}for(;b<3;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}switch(i.last=1&_,_>>>=1,b-=1,3&_){case 0:i.mode=16193;break;case 1:if(BPe(i),i.mode=WF,e===$F){_>>>=2,b-=2;break e}break;case 2:i.mode=16196;break;case 3:a.msg="invalid block type",i.mode=Ta}_>>>=2,b-=2;break;case 16193:for(_>>>=7&b,b-=7&b;b<32;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if((65535&_)!=(_>>>16^65535)){a.msg="invalid stored block lengths",i.mode=Ta;break}if(i.length=65535&_,_=0,b=0,i.mode=k4,e===$F)break e;case k4:i.mode=16195;case 16195:if(I=i.length,I){if(I>A&&(I=A),I>g&&(I=g),I===0)break e;s.set(r.subarray(l,l+I),u),A-=I,l+=I,g-=I,u+=I,i.length-=I;break}i.mode=Cv;break;case 16196:for(;b<14;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(i.nlen=257+(31&_),_>>>=5,b-=5,i.ndist=1+(31&_),_>>>=5,b-=5,i.ncode=4+(15&_),_>>>=4,b-=4,i.nlen>286||i.ndist>30){a.msg="too many length or distance symbols",i.mode=Ta;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;b<3;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}i.lens[ue[i.have++]]=7&_,_>>>=3,b-=3}for(;i.have<19;)i.lens[ue[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,re={bits:i.lenbits},J=cT(0,i.lens,0,19,i.lencode,0,i.work,re),i.lenbits=re.bits,J){a.msg="invalid code lengths set",i.mode=Ta;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;ie=i.lencode[_&(1<<i.lenbits)-1],U=ie>>>24,P=ie>>>16&255,H=65535&ie,!(U<=b);){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(H<16)_>>>=U,b-=U,i.lens[i.have++]=H;else{if(H===16){for(se=U+2;b<se;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(_>>>=U,b-=U,i.have===0){a.msg="invalid bit length repeat",i.mode=Ta;break}j=i.lens[i.have-1],I=3+(3&_),_>>>=2,b-=2}else if(H===17){for(se=U+3;b<se;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}_>>>=U,b-=U,j=0,I=3+(7&_),_>>>=3,b-=3}else{for(se=U+7;b<se;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}_>>>=U,b-=U,j=0,I=11+(127&_),_>>>=7,b-=7}if(i.have+I>i.nlen+i.ndist){a.msg="invalid bit length repeat",i.mode=Ta;break}for(;I--;)i.lens[i.have++]=j}}if(i.mode===Ta)break;if(i.lens[256]===0){a.msg="invalid code -- missing end-of-block",i.mode=Ta;break}if(i.lenbits=9,re={bits:i.lenbits},J=cT(1,i.lens,0,i.nlen,i.lencode,0,i.work,re),i.lenbits=re.bits,J){a.msg="invalid literal/lengths set",i.mode=Ta;break}if(i.distbits=6,i.distcode=i.distdyn,re={bits:i.distbits},J=cT(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,re),i.distbits=re.bits,J){a.msg="invalid distances set",i.mode=Ta;break}if(i.mode=WF,e===$F)break e;case WF:i.mode=jF;case jF:if(A>=6&&g>=258){a.next_out=u,a.avail_out=g,a.next_in=l,a.avail_in=A,i.hold=_,i.bits=b,mPe(a,C),u=a.next_out,s=a.output,g=a.avail_out,l=a.next_in,r=a.input,A=a.avail_in,_=i.hold,b=i.bits,i.mode===Cv&&(i.back=-1);break}for(i.back=0;ie=i.lencode[_&(1<<i.lenbits)-1],U=ie>>>24,P=ie>>>16&255,H=65535&ie,!(U<=b);){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(P&&!(240&P)){for(N=U,z=P,W=H;ie=i.lencode[W+((_&(1<<N+z)-1)>>N)],U=ie>>>24,P=ie>>>16&255,H=65535&ie,!(N+U<=b);){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}_>>>=N,b-=N,i.back+=N}if(_>>>=U,b-=U,i.back+=U,i.length=H,P===0){i.mode=16205;break}if(32&P){i.back=-1,i.mode=Cv;break}if(64&P){a.msg="invalid literal/length code",i.mode=Ta;break}i.extra=15&P,i.mode=16201;case 16201:if(i.extra){for(se=i.extra;b<se;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}i.length+=_&(1<<i.extra)-1,_>>>=i.extra,b-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;ie=i.distcode[_&(1<<i.distbits)-1],U=ie>>>24,P=ie>>>16&255,H=65535&ie,!(U<=b);){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(!(240&P)){for(N=U,z=P,W=H;ie=i.distcode[W+((_&(1<<N+z)-1)>>N)],U=ie>>>24,P=ie>>>16&255,H=65535&ie,!(N+U<=b);){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}_>>>=N,b-=N,i.back+=N}if(_>>>=U,b-=U,i.back+=U,64&P){a.msg="invalid distance code",i.mode=Ta;break}i.offset=H,i.extra=15&P,i.mode=16203;case 16203:if(i.extra){for(se=i.extra;b<se;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}i.offset+=_&(1<<i.extra)-1,_>>>=i.extra,b-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){a.msg="invalid distance too far back",i.mode=Ta;break}i.mode=16204;case 16204:if(g===0)break e;if(I=C-g,i.offset>I){if(I=i.offset-I,I>i.whave&&i.sane){a.msg="invalid distance too far back",i.mode=Ta;break}I>i.wnext?(I-=i.wnext,F=i.wsize-I):F=i.wnext-I,I>i.length&&(I=i.length),L=i.window}else L=s,F=u-i.offset,I=i.length;I>g&&(I=g),g-=I,i.length-=I;do s[u++]=L[F++];while(--I);i.length===0&&(i.mode=jF);break;case 16205:if(g===0)break e;s[u++]=i.length,g--,i.mode=jF;break;case L4:if(i.wrap){for(;b<32;){if(A===0)break e;A--,_|=r[l++]<<b,b+=8}if(C-=g,a.total_out+=C,i.total+=C,4&i.wrap&&C&&(a.adler=i.check=i.flags?Pm(i.check,s,C,u-C):gz(i.check,s,C,u-C)),C=g,4&i.wrap&&(i.flags?_:Fie(_))!==i.check){a.msg="incorrect data check",i.mode=Ta;break}_=0,b=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;b<32;){if(A===0)break e;A--,_+=r[l++]<<b,b+=8}if(4&i.wrap&&_!==(4294967295&i.total)){a.msg="incorrect length check",i.mode=Ta;break}_=0,b=0}i.mode=16208;case 16208:J=xPe;break e;case Ta:J=ece;break e;case 16210:return tce;default:return Pg}return a.next_out=u,a.avail_out=g,a.next_in=l,a.avail_in=A,i.hold=_,i.bits=b,(i.wsize||C!==a.avail_out&&i.mode<Ta&&(i.mode<L4||e!==Rie))&&oce(a,a.output,a.next_out,C-a.avail_out),x-=a.avail_in,C-=a.avail_out,a.total_in+=x,a.total_out+=C,i.total+=C,4&i.wrap&&C&&(a.adler=i.check=i.flags?Pm(i.check,s,C,a.next_out-C):gz(i.check,s,C,a.next_out-C)),a.data_type=i.bits+(i.last?64:0)+(i.mode===Cv?128:0)+(i.mode===WF||i.mode===k4?256:0),(x===0&&C===0||e===Rie)&&J===Nw&&(J=EPe),J},MPe=a=>{if(Ww(a))return Pg;let e=a.state;return e.window&&(e.window=null),a.state=null,Nw},RPe=(a,e)=>{if(Ww(a))return Pg;const i=a.state;return 2&i.wrap?(i.head=e,e.done=!1,Nw):Pg},DPe=(a,e)=>{const i=e.length;let r,s,l;return Ww(a)||(r=a.state,r.wrap!==0&&r.mode!==Fk)?Pg:r.mode===Fk&&(s=1,s=gz(s,e,i,0),s!==r.check)?ece:(l=oce(a,e,i,i),l?(r.mode=16210,tce):(r.havedict=1,Nw))},Mv={inflateReset:nce,inflateReset2:rce,inflateResetKeep:ice,inflateInit:IPe,inflateInit2:sce,inflate:TPe,inflateEnd:MPe,inflateGetHeader:RPe,inflateSetDictionary:DPe,inflateInfo:"pako inflate (from Nodeca project)"},FPe=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ace=Object.prototype.toString,{Z_NO_FLUSH:UPe,Z_FINISH:kPe,Z_OK:uT,Z_STREAM_END:Q4,Z_NEED_DICT:N4,Z_STREAM_ERROR:LPe,Z_DATA_ERROR:kie,Z_MEM_ERROR:PPe}=Jle;function wU(a){this.options=hPe({chunkSize:65536,windowBits:15,to:""},a||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(a&&a.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gPe,this.strm.avail_out=0;let i=Mv.inflateInit2(this.strm,e.windowBits);if(i!==uT)throw new Error(mz[i]);if(this.header=new FPe,Mv.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=APe(e.dictionary):ace.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=Mv.inflateSetDictionary(this.strm,e.dictionary),i!==uT)))throw new Error(mz[i])}wU.prototype.push=function(a,e){const i=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let l,u,A;if(this.ended)return!1;for(u=e===~~e?e:e===!0?kPe:UPe,ace.call(a)==="[object ArrayBuffer]"?i.input=new Uint8Array(a):i.input=a,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(r),i.next_out=0,i.avail_out=r),l=Mv.inflate(i,u),l===N4&&s&&(l=Mv.inflateSetDictionary(i,s),l===uT?l=Mv.inflate(i,u):l===kie&&(l=N4));i.avail_in>0&&l===Q4&&i.state.wrap>0&&a[i.next_in]!==0;)Mv.inflateReset(i),l=Mv.inflate(i,u);switch(l){case LPe:case kie:case N4:case PPe:return this.onEnd(l),this.ended=!0,!1}if(A=i.avail_out,i.next_out&&(i.avail_out===0||l===Q4))if(this.options.to==="string"){let g=fPe(i.output,i.next_out),_=i.next_out-g,b=pPe(i.output,g);i.next_out=_,i.avail_out=r-_,_&&i.output.set(i.output.subarray(g,g+_),0),this.onData(b)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(l!==uT||A!==0){if(l===Q4)return l=Mv.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(i.avail_in===0)break}}return!0},wU.prototype.onData=function(a){this.chunks.push(a)},wU.prototype.onEnd=function(a){a===uT&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=dPe(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var OPe=function(a,e){return(e=e||{}).raw=!0,function(i,r){const s=new wU(r);if(s.push(i),s.err)throw s.msg||mz[s.err];return s.result}(a,e)},QPe={inflateRaw:OPe};const{inflateRaw:NPe}=QPe;var HPe=NPe;const Om=function({polynomial:a,numTables:e}){const i=new Uint32Array(256*e);for(let r=0;r<256;r++){let s=r;s=(1&s)*a^s>>>1,s=(1&s)*a^s>>>1,s=(1&s)*a^s>>>1,s=(1&s)*a^s>>>1,s=(1&s)*a^s>>>1,s=(1&s)*a^s>>>1,s=(1&s)*a^s>>>1,s=(1&s)*a^s>>>1,i[r]=s}for(let r=256;r<i.length;r++){const s=i[r-256];i[r]=i[255&s]^s>>>8}return i}({polynomial:3988292384,numTables:8});function zPe(a){return function(e){return~e>>>0}(function(e,i){const r=i.byteLength,s=new DataView(i.buffer,i.byteOffset,r);let l=e,u=0;const A=3&-s.byteOffset;for(;u<A&&u<r;u++)l=Om[255&(l^s.getUint8(u))]^l>>>8;if(u===r)return l;u=A;let g=r-u;for(;g>=8;u+=8,g-=8){l^=s.getUint32(u,!0);const _=s.getUint32(u+4,!0);l=Om[0+(_>>>24&255)]^Om[256+(_>>>16&255)]^Om[512+(_>>>8&255)]^Om[768+(_>>>0&255)]^Om[1024+(l>>>24&255)]^Om[1280+(l>>>16&255)]^Om[1536+(l>>>8&255)]^Om[1792+(l>>>0&255)]}for(let _=u;_<r;_++)l=Om[255&(l^s.getUint8(_))]^l>>>8;return l}(-1,a))}const Lie={".aac":"audio/aac",".abw":"application/x-abiword",".arc":"application/x-freearc",".avi":"video/x-msvideo",".azw":"application/vnd.amazon.ebook",".bin":"application/octet-stream",".bmp":"image/bmp",".bz":"application/x-bzip",".bz2":"application/x-bzip2",".csh":"application/x-csh",".css":"text/css",".csv":"text/csv",".doc":"application/msword",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".eot":"application/vnd.ms-fontobject",".epub":"application/epub+zip",".gz":"application/gzip",".gif":"image/gif",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".jar":"application/java-archive",".jpeg":".jpg",".js":"text/javascript",".json":"application/json",".jsonld":"application/ld+json",".mid":".midi",".mjs":"text/javascript",".mp3":"audio/mpeg",".mpeg":"video/mpeg",".mpkg":"application/vnd.apple.installer+xml",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogv":"video/ogg",".ogx":"application/ogg",".opus":"audio/opus",".otf":"font/otf",".png":"image/png",".pdf":"application/pdf",".php":"application/php",".ppt":"application/vnd.ms-powerpoint",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".rar":"application/vnd.rar",".rtf":"application/rtf",".sh":"application/x-sh",".svg":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tif":"image/tiff",".tiff":"image/tiff",".ts":"video/mp2t",".ttf":"font/ttf",".txt":"text/plain",".vsd":"application/vnd.visio",".wav":"audio/wav",".weba":"audio/webm",".webm":"video/webm",".webp":"image/webp",".woff":"font/woff",".woff2":"font/woff2",".xhtml":"application/xhtml+xml",".xls":"application/vnd.ms-excel",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xml":"XML",".xul":"application/vnd.mozilla.xul+xml",".zip":"application/zip",".3gp":"video/3gpp",".3g2":"video/3gpp2",".7z":"application/x-7z-compressed"};class GPe{constructor(e){vf(this,"url"),vf(this,"zipSize",0),vf(this,"files",new Map),vf(this,"magic_eocd64",new Uint8Array([80,75,6,6])),vf(this,"magic_eocd",new Uint8Array([80,75,5,6])),this.url=e}async getRange(e,i){return await(await fetch(this.url,{headers:{Range:`bytes=${e}-${e+i-1}`}})).arrayBuffer()}async infoiter(){const e=await fetch(this.url,{method:"HEAD"}),i=e.headers.get("Accept-Ranges")||"";if(i!=="bytes"){const b=new URL(this.url).hostname;console.warn(`${b} Accept-Ranges header ('${i}') is not 'bytes'--trying anyway`)}this.zipSize=parseInt(e.headers.get("Content-Length")||"0");let r=await this.getRange(Math.max(this.zipSize-65536,0),65536),s=new Uint8Array(r),l=-1,u=0,A=this.findLastIndex(s,this.magic_eocd64);if(A>=0){const b=new DataView(r);u=Number(b.getBigUint64(A+40,!0)),l=Number(b.getBigUint64(A+48,!0))}else if(A=this.findLastIndex(s,this.magic_eocd),A>=0){const b=new DataView(r);u=b.getUint32(A+12,!0),l=b.getUint32(A+16,!0)}if(l<0||l>=this.zipSize)throw new Error("Cannot find central directory");r=await this.getRange(l,u),s=new Uint8Array(r);const g=[];let _=0;for(;_<u;){const b=new DataView(r,_),x=b.getUint16(10,!0),C=b.getUint32(12,!0),I=b.getUint32(20,!0),F=b.getUint32(24,!0),L=b.getUint16(28,!0),U=b.getUint16(30,!0),P=b.getUint16(32,!0),H=b.getUint32(42,!0),N=b.getUint32(16,!0);_+=46;const z=new TextDecoder().decode(s.slice(_,_+L));_+=L;const W=s.slice(_,_+U);_+=U,_+=P;const j=new VPe(z,C,H,x,I,F,N);j.parseExtra(W),g.push(j)}return g}findLastIndex(e,i){for(let r=e.length-i.length;r>=0;r--)if(i.every((s,l)=>s===e[r+l]))return r;return-1}async getFileList(){const e=await this.infoiter();return this.files=new Map(e.map(i=>[i.filename,i])),Array.from(this.files.keys())}async getFileAsObjectURL(e,i=""){const r=this.files.get(e);if(!r)throw new Error(`File not found: ${e}`);const s="."+(e.split(".").pop()||"").toLowerCase();s in Lie&&i==""&&(i=Lie[s]),console.log("File info:",r);const l=await this.getRange(r.headerOffset,30+r.filename.length+2),u=new DataView(l),A=u.getUint32(0,!0);if(A!==67324752)throw new Error("Invalid local file header signature");const g=u.getUint16(26,!0),_=u.getUint16(28,!0);console.log("Local header info:",{signature:A.toString(16),filenameLength:g,extraFieldLength:_});const b=r.headerOffset+30+g+_;console.log("File data offset:",b);const x=await this.getRange(b,r.compressSize);let C;if(console.log("Compressed data size:",x.byteLength),r.compressType===0)C=new Uint8Array(x);else{if(r.compressType!==8)throw new Error(`Unsupported compression method: ${r.compressType}`);try{C=HPe(new Uint8Array(x))}catch(L){throw console.error("Decompression error:",L),console.error("Compressed data (first 50 bytes):",new Uint8Array(x).slice(0,50)),new Error("Failed to decompress file data")}}console.log("Decompressed data size:",C.length),C.length!==r.fileSize&&console.warn(`Decompressed size (${C.length}) doesn't match expected size (${r.fileSize})`);const I=this.calculateCRC32(C);I!==r.crc32&&console.warn(`Calculated CRC32 (${I}) doesn't match expected CRC32 (${r.crc32})`);const F=new Blob([C],{type:i||"application/octet-stream"});return URL.createObjectURL(F)}calculateCRC32(e){return zPe(e)}}class VPe{constructor(e,i,r,s,l,u,A){vf(this,"filename"),vf(this,"dateTime"),vf(this,"headerOffset"),vf(this,"compressType"),vf(this,"compressSize"),vf(this,"fileSize"),vf(this,"crc32"),this.filename=e,this.dateTime=i,this.headerOffset=r,this.compressType=s,this.compressSize=l,this.fileSize=u,this.crc32=A}parseExtra(e){let i=0;for(;i<e.length;){const r=e[i+1]<<8|e[i],s=e[i+3]<<8|e[i+2];i+=4,r===1?(s>=8&&this.fileSize===4294967295&&(this.fileSize=Number(new DataView(e.buffer,i,8).getBigUint64(0,!0)),i+=8),s>=16&&this.compressSize===4294967295&&(this.compressSize=Number(new DataView(e.buffer,i,8).getBigUint64(0,!0)),i+=8),s>=24&&this.headerOffset===4294967295&&(this.headerOffset=Number(new DataView(e.buffer,i,8).getBigUint64(0,!0)),i+=8)):i+=s}}}var Pie,qPe=qoe({tagName:"photogrammetry-viewer",elementClass:PLe.PhotogrammetryViewer,react:Ye}),$Pe=function(){function a(e,i){this.zip=e,this.skyBoxImage=i}return a.prototype.resolve2dFileURL=function(e){return Ef(this,void 0,void 0,function(){var i,r,s,l,u,A,g,_,b,x,C,I,F;return Sf(this,function(L){switch(L.label){case 0:return i=null,[4,this.zip.getFileList()];case 1:if(r=L.sent(),s=r[0],e in r)i=e;else{for(l=[".jpg",".png",".jpeg",".JPG",".PNG",".JPEG",".gif",".GIF"],u=0,A=["redof/","edof/",s+"redof/",s+"edof/"];u<A.length;u++)for(g=A[u],_=0,b=l;_<b.length;_++)if((x=g+e+b[_])in r){i=x;break}if(i==null){for(C=0,I=r;C<I.length;C++)if((F=I[C]).includes(e)){i=F;break}}}if(i!=null)return console.log("Resolved 2D file "+e+" to path in ZIP: "+i),[2,this.zip.getFileAsObjectURL(i)];throw new Error("File not found in Zip: ".concat(e))}})})},a}(),WPe=function(a){var e=Ce.useState(!1),i=e[0],r=e[1],s=Ce.useState("Downloading..."),l=s[0],u=s[1],A=Ce.useState(null),g=A[0],_=A[1],b=Ce.useState(""),x=b[0],C=b[1],I=Ce.useState(""),F=I[0],L=I[1],U=Ce.useState(void 0),P=U[0],H=U[1];function N(W,j){console.error("Error "+j+":",W),_(gae(W.message,1e3,"..."))}function z(W){u(W),console.log(W)}return Ce.useEffect(function(){i||(function(){Ef(this,void 0,void 0,function(){var W,j,J,ie,ee,re,se,ue,fe,pe,xe,ce,_e,ye,Oe,ge,Ee,ke,je;return Sf(this,function(Ie){switch(Ie.label){case 0:u("Downloading..."),W=null,j=[],Ie.label=1;case 1:return Ie.trys.push([1,3,,8]),[4,(W=new GPe(a.src)).getFileList()];case 2:return j=Ie.sent(),[3,8];case 3:return Ie.sent(),[4,qLe(a.src,{onProgress:function(ze){u("Downloading... ".concat(Math.floor(ze.percentage),"%"))}})];case 4:return[4,Ie.sent().blob()];case 5:return J=Ie.sent(),[4,aPe.create(J)];case 6:return[4,(W=Ie.sent()).getFileList()];case 7:return j=Ie.sent(),[3,8];case 8:u("Parsing files..."),Ie.label=9;case 9:Ie.trys.push([9,32,,33]),ie=!1,ee=!1,console.log("Entries: ",j),re=null,se=0,ue=j,Ie.label=10;case 10:if(!(se<ue.length))return[3,22];if(!(fe=ue[se]).endsWith(".xml")||ie)return[3,15];z("Loading camera info from "+fe+"..."),Ie.label=11;case 11:return Ie.trys.push([11,13,,14]),pe=C,[4,W.getFileAsObjectURL(fe)];case 12:return pe.apply(void 0,[Ie.sent()]),[3,14];case 13:return N(Ie.sent(),"converting XML to base64"),[3,14];case 14:ie=!0,Ie.label=15;case 15:if(!fe.endsWith(".gltf")&&!fe.endsWith(".glb")||ee)return[3,20];z("Loading 3D image from "+fe+"..."),Ie.label=16;case 16:return Ie.trys.push([16,18,,19]),xe=L,[4,W.getFileAsObjectURL(fe)];case 17:return xe.apply(void 0,[Ie.sent()]),[3,19];case 18:return N(Ie.sent(),"converting gltf to base64"),[3,19];case 19:ee=!0,Ie.label=20;case 20:if(ee&&ie)return[3,22];Ie.label=21;case 21:return se++,[3,10];case 22:u("Looking for HDR image..."),ce=["hdr.jpg","hdr.jpeg","hdr.png","HDR.jpg","HDR.jpeg","HDR.png"],_e=0,ye=j,Ie.label=23;case 23:if(!(_e<ye.length))return[3,31];Oe=ye[_e],ge=0,Ee=ce,Ie.label=24;case 24:if(!(ge<Ee.length))return[3,30];if(ke=Ee[ge],!Oe.endsWith(ke))return[3,29];z("Loading HDR image from "+Oe+"..."),Ie.label=25;case 25:return Ie.trys.push([25,27,,28]),[4,W.getFileAsObjectURL(Oe)];case 26:return re=Ie.sent(),[3,28];case 27:return N(Ie.sent(),"converting HDR to base64"),[3,28];case 28:return[3,30];case 29:return ge++,[3,24];case 30:return _e++,[3,23];case 31:return ee&&ie?(H(new $Pe(W,re)),u("Loaded."),r(!0)):(je="Did not find required files in the package.",ee||(je+=`
3D image data has not been found.`),ie||(je+=`
No XML file with camera info has been found.`),_(je),console.log(ee,ie)),[3,33];case 32:return N(Ie.sent(),"while parsing files"),[3,33];case 33:return[2]}})})}(),caches.open("photogrammetry-viewer-cache").then(function(W){W.matchAll().then(function(j){j.forEach(function(J){var ie,ee=parseInt((ie=J.headers.get("cached-time"))!==null&&ie!==void 0?ie:Date.now().toString());(Date.now()-ee)/1e3>360&&(console.log("Deleting outdated cache entry for "+J.url),W.delete(J.url))})})}))},[a.src]),g!=null?Ye.createElement(M4,null,"Error: ",g):i?Ye.createElement(M4,null,Ye.createElement(qPe,{src2D:"/",src3D:F,srcScanInformation:x,viewSettings:P,isYupTransformApplied:!0})):Ye.createElement(M4,null,Ye.createElement($le,{statusMessage:l}))},Oie={exports:{}},By={},Qie;/**
 * @license React
 * react-reconciler-constants.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nie,xU=(Qie||(Qie=1,Oie.exports=(Pie||(Pie=1,By.ConcurrentRoot=1,By.ContinuousEventPriority=8,By.DefaultEventPriority=32,By.DiscreteEventPriority=2,By.IdleEventPriority=268435456,By.LegacyRoot=0,By.NoEventPriority=0),By)),Oie.exports),Hie={exports:{}},H4={},zie={exports:{}},z4={},Gie,Vie;/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function jPe(){return Gie||(Gie=1,zie.exports=function(){if(Nie)return z4;Nie=1;var a=Ye,e=typeof Object.is=="function"?Object.is:function(g,_){return g===_&&(g!==0||1/g==1/_)||g!=g&&_!=_},i=a.useState,r=a.useEffect,s=a.useLayoutEffect,l=a.useDebugValue;function u(g){var _=g.getSnapshot;g=g.value;try{var b=_();return!e(g,b)}catch{return!0}}var A=typeof window>"u"||window.document===void 0||window.document.createElement===void 0?function(g,_){return _()}:function(g,_){var b=_(),x=i({inst:{value:b,getSnapshot:_}}),C=x[0].inst,I=x[1];return s(function(){C.value=b,C.getSnapshot=_,u(C)&&I({inst:C})},[g,b,_]),r(function(){return u(C)&&I({inst:C}),g(function(){u(C)&&I({inst:C})})},[g]),l(b),b};return z4.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:A,z4}()),zie.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qie;/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KPe=(qie||(qie=1,Hie.exports=function(){if(Vie)return H4;Vie=1;var a=Ye,e=jPe(),i=typeof Object.is=="function"?Object.is:function(g,_){return g===_&&(g!==0||1/g==1/_)||g!=g&&_!=_},r=e.useSyncExternalStore,s=a.useRef,l=a.useEffect,u=a.useMemo,A=a.useDebugValue;return H4.useSyncExternalStoreWithSelector=function(g,_,b,x,C){var I=s(null);if(I.current===null){var F={hasValue:!1,value:null};I.current=F}else F=I.current;I=u(function(){function U(W){if(!N){if(N=!0,P=W,W=x(W),C!==void 0&&F.hasValue){var j=F.value;if(C(j,W))return H=j}return H=W}if(j=H,i(P,W))return j;var J=x(W);return C!==void 0&&C(j,J)?(P=W,j):(P=W,H=J)}var P,H,N=!1,z=b===void 0?null:b;return[function(){return U(_())},z===null?void 0:function(){return U(z())}]},[_,b,x,C]);var L=r(g,I[0],I[1]);return l(function(){F.hasValue=!0,F.value=L},[L]),A(L),L},H4}()),Hie.exports),XPe=fM(KPe);const $ie=a=>{let e;const i=new Set,r=(A,g)=>{const _=typeof A=="function"?A(e):A;if(!Object.is(_,e)){const b=e;e=g??(typeof _!="object"||_===null)?_:Object.assign({},e,_),i.forEach(x=>x(e,b))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:A=>(i.add(A),()=>i.delete(A))},u=e=a(r,s,l);return l},lce=a=>a?$ie(a):$ie,{useSyncExternalStoreWithSelector:YPe}=XPe,JPe=a=>a,Wie=(a,e)=>{const i=lce(a),r=(s,l=e)=>function(u,A=JPe,g){const _=YPe(u.subscribe,u.getState,u.getInitialState,A,g);return Ye.useDebugValue(_),_}(i,s,l);return Object.assign(r,i),r};var jie,Kie={exports:{}},Xie={exports:{}},Yie={exports:{}},Jie={},Zie,ene;/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function cce(){return Zie||(Zie=1,Yie.exports=(jie||(jie=1,function(a){function e(ce,_e){var ye=ce.length;ce.push(_e);e:for(;0<ye;){var Oe=ye-1>>>1,ge=ce[Oe];if(!(0<s(ge,_e)))break e;ce[Oe]=_e,ce[ye]=ge,ye=Oe}}function i(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var _e=ce[0],ye=ce.pop();if(ye!==_e){ce[0]=ye;e:for(var Oe=0,ge=ce.length,Ee=ge>>>1;Oe<Ee;){var ke=2*(Oe+1)-1,je=ce[ke],Ie=ke+1,ze=ce[Ie];if(0>s(je,ye))Ie<ge&&0>s(ze,je)?(ce[Oe]=ze,ce[Ie]=ye,Oe=Ie):(ce[Oe]=je,ce[ke]=ye,Oe=ke);else{if(!(Ie<ge&&0>s(ze,ye)))break e;ce[Oe]=ze,ce[Ie]=ye,Oe=Ie}}}return _e}function s(ce,_e){var ye=ce.sortIndex-_e.sortIndex;return ye!==0?ye:ce.id-_e.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var u=Date,A=u.now();a.unstable_now=function(){return u.now()-A}}var g=[],_=[],b=1,x=null,C=3,I=!1,F=!1,L=!1,U=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function N(ce){for(var _e=i(_);_e!==null;){if(_e.callback===null)r(_);else{if(!(_e.startTime<=ce))break;r(_),_e.sortIndex=_e.expirationTime,e(g,_e)}_e=i(_)}}function z(ce){if(L=!1,N(ce),!F)if(i(g)!==null)F=!0,pe();else{var _e=i(_);_e!==null&&xe(z,_e.startTime-ce)}}var W,j=!1,J=-1,ie=5,ee=-1;function re(){return!(a.unstable_now()-ee<ie)}function se(){if(j){var ce=a.unstable_now();ee=ce;var _e=!0;try{e:{F=!1,L&&(L=!1,P(J),J=-1),I=!0;var ye=C;try{t:{for(N(ce),x=i(g);x!==null&&!(x.expirationTime>ce&&re());){var Oe=x.callback;if(typeof Oe=="function"){x.callback=null,C=x.priorityLevel;var ge=Oe(x.expirationTime<=ce);if(ce=a.unstable_now(),typeof ge=="function"){x.callback=ge,N(ce),_e=!0;break t}x===i(g)&&r(g),N(ce)}else r(g);x=i(g)}if(x!==null)_e=!0;else{var Ee=i(_);Ee!==null&&xe(z,Ee.startTime-ce),_e=!1}}break e}finally{x=null,C=ye,I=!1}_e=void 0}}finally{_e?W():j=!1}}}if(typeof H=="function")W=function(){H(se)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,fe=ue.port2;ue.port1.onmessage=se,W=function(){fe.postMessage(null)}}else W=function(){U(se,0)};function pe(){j||(j=!0,W())}function xe(ce,_e){J=U(function(){ce(a.unstable_now())},_e)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ce){ce.callback=null},a.unstable_continueExecution=function(){F||I||(F=!0,pe())},a.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<ce?Math.floor(1e3/ce):5},a.unstable_getCurrentPriorityLevel=function(){return C},a.unstable_getFirstCallbackNode=function(){return i(g)},a.unstable_next=function(ce){switch(C){case 1:case 2:case 3:var _e=3;break;default:_e=C}var ye=C;C=_e;try{return ce()}finally{C=ye}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(ce,_e){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ye=C;C=ce;try{return _e()}finally{C=ye}},a.unstable_scheduleCallback=function(ce,_e,ye){var Oe=a.unstable_now();switch(ye=typeof ye=="object"&&ye!==null&&typeof(ye=ye.delay)=="number"&&0<ye?Oe+ye:Oe,ce){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ce={id:b++,callback:_e,priorityLevel:ce,startTime:ye,expirationTime:ge=ye+ge,sortIndex:-1},ye>Oe?(ce.sortIndex=ye,e(_,ce),i(g)===null&&ce===i(_)&&(L?(P(J),J=-1):L=!0,xe(z,ye-Oe))):(ce.sortIndex=ge,e(g,ce),F||I||(F=!0,pe())),ce},a.unstable_shouldYield=re,a.unstable_wrapCallback=function(ce){var _e=C;return function(){var ye=C;C=_e;try{return ce.apply(this,arguments)}finally{C=ye}}}}(Jie)),Jie)),Yie.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ZPe(){return ene||(ene=1,function(a){a.exports=function(e){function i(E,M,Q,K){return new el(E,M,Q,K)}function r(){}function s(E){var M="https://react.dev/errors/"+E;if(1<arguments.length){M+="?args[]="+encodeURIComponent(arguments[1]);for(var Q=2;Q<arguments.length;Q++)M+="&args[]="+encodeURIComponent(arguments[Q])}return"Minified React error #"+E+"; visit "+M+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(E){return E===null||typeof E!="object"?null:typeof(E=Jg&&E[Jg]||E["@@iterator"])=="function"?E:null}function u(E){if(E==null)return null;if(typeof E=="function")return E.$$typeof===Ip?null:E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case ks:return"Fragment";case eo:return"Portal";case Bp:return"Profiler";case Ls:return"StrictMode";case c_:return"Suspense";case VA:return"SuspenseList"}if(typeof E=="object")switch(E.$$typeof){case Bu:return(E.displayName||"Context")+".Provider";case fa:return(E._context.displayName||"Context")+".Consumer";case Oa:var M=E.render;return(E=E.displayName)||(E=(E=M.displayName||M.name||"")!==""?"ForwardRef("+E+")":"ForwardRef"),E;case xc:return(M=E.displayName||null)!==null?M:u(E.type)||"Memo";case Iu:M=E._payload,E=E._init;try{return u(E(M))}catch{}}return null}function A(E){if(GA===void 0)try{throw Error()}catch(Q){var M=Q.stack.trim().match(/\n( *(at )?)/);GA=M&&M[1]||"",an=-1<Q.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Q.stack.indexOf("@")?"@unknown:0:0":""}return`
`+GA+E+an}function g(E,M){if(!E||u_)return"";u_=!0;var Q=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var K={DetermineComponentFrameRoot:function(){try{if(M){var zi=function(){throw Error()};if(Object.defineProperty(zi.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zi,[])}catch(Sn){var Di=Sn}Reflect.construct(E,[],zi)}else{try{zi.call()}catch(Sn){Di=Sn}E.call(zi.prototype)}}else{try{throw Error()}catch(Sn){Di=Sn}(zi=E())&&typeof zi.catch=="function"&&zi.catch(function(){})}}catch(Sn){if(Sn&&Di&&typeof Sn.stack=="string")return[Sn.stack,Di.stack]}return[null,null]}};K.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ne=Object.getOwnPropertyDescriptor(K.DetermineComponentFrameRoot,"name");ne&&ne.configurable&&Object.defineProperty(K.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var he=K.DetermineComponentFrameRoot(),Qe=he[0],tt=he[1];if(Qe&&tt){var dt=Qe.split(`
`),ni=tt.split(`
`);for(ne=K=0;K<dt.length&&!dt[K].includes("DetermineComponentFrameRoot");)K++;for(;ne<ni.length&&!ni[ne].includes("DetermineComponentFrameRoot");)ne++;if(K===dt.length||ne===ni.length)for(K=dt.length-1,ne=ni.length-1;1<=K&&0<=ne&&dt[K]!==ni[ne];)ne--;for(;1<=K&&0<=ne;K--,ne--)if(dt[K]!==ni[ne]){if(K!==1||ne!==1)do if(K--,0>--ne||dt[K]!==ni[ne]){var vi=`
`+dt[K].replace(" at new "," at ");return E.displayName&&vi.includes("<anonymous>")&&(vi=vi.replace("<anonymous>",E.displayName)),vi}while(1<=K&&0<=ne);break}}}finally{u_=!1,Error.prepareStackTrace=Q}return(Q=E?E.displayName||E.name:"")?A(Q):""}function _(E){switch(E.tag){case 26:case 27:case 5:return A(E.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 15:return E=g(E.type,!1);case 11:return E=g(E.type.render,!1);case 1:return E=g(E.type,!0);default:return""}}function b(E){try{var M="";do M+=_(E),E=E.return;while(E);return M}catch(Q){return`
Error generating stack: `+Q.message+`
`+Q.stack}}function x(E){var M=E,Q=E;if(E.alternate)for(;M.return;)M=M.return;else{E=M;do 4098&(M=E).flags&&(Q=M.return),E=M.return;while(E)}return M.tag===3?Q:null}function C(E){if(x(E)!==E)throw Error(s(188))}function I(E){var M=E.alternate;if(!M){if((M=x(E))===null)throw Error(s(188));return M!==E?null:E}for(var Q=E,K=M;;){var ne=Q.return;if(ne===null)break;var he=ne.alternate;if(he===null){if((K=ne.return)!==null){Q=K;continue}break}if(ne.child===he.child){for(he=ne.child;he;){if(he===Q)return C(ne),E;if(he===K)return C(ne),M;he=he.sibling}throw Error(s(188))}if(Q.return!==K.return)Q=ne,K=he;else{for(var Qe=!1,tt=ne.child;tt;){if(tt===Q){Qe=!0,Q=ne,K=he;break}if(tt===K){Qe=!0,K=ne,Q=he;break}tt=tt.sibling}if(!Qe){for(tt=he.child;tt;){if(tt===Q){Qe=!0,Q=he,K=ne;break}if(tt===K){Qe=!0,K=he,Q=ne;break}tt=tt.sibling}if(!Qe)throw Error(s(189))}}if(Q.alternate!==K)throw Error(s(190))}if(Q.tag!==3)throw Error(s(188));return Q.stateNode.current===Q?E:M}function F(E){var M=E.tag;if(M===5||M===26||M===27||M===6)return E;for(E=E.child;E!==null;){if((M=F(E))!==null)return M;E=E.sibling}return null}function L(E){var M=E.tag;if(M===5||M===26||M===27||M===6)return E;for(E=E.child;E!==null;){if(E.tag!==4&&(M=L(E))!==null)return M;E=E.sibling}return null}function U(E){return{current:E}}function P(E){0>jA||(E.current=Kf[jA],Kf[jA]=null,jA--)}function H(E,M){jA++,Kf[jA]=E.current,E.current=M}function N(E){var M=42&E;if(M!==0)return M;switch(E&-E){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&E;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&E;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return E}}function z(E,M){var Q=E.pendingLanes;if(Q===0)return 0;var K=0,ne=E.suspendedLanes,he=E.pingedLanes,Qe=E.warmLanes;E=E.finishedLanes!==0;var tt=134217727&Q;return tt!==0?(Q=tt&~ne)!==0?K=N(Q):(he&=tt)!==0?K=N(he):E||(Qe=tt&~Qe)!==0&&(K=N(Qe)):(tt=Q&~ne)!==0?K=N(tt):he!==0?K=N(he):E||(Qe=Q&~Qe)!==0&&(K=N(Qe)),K===0?0:M!==0&&M!==K&&!(M&ne)&&((ne=K&-K)>=(Qe=M&-M)||ne===32&&4194176&Qe)?M:K}function W(E,M){return!(E.pendingLanes&~(E.suspendedLanes&~E.pingedLanes)&M)}function j(E,M){switch(E){case 1:case 2:case 4:case 8:return M+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return M+5e3;default:return-1}}function J(){var E=Up;return!(4194176&(Up<<=1))&&(Up=128),E}function ie(){var E=A0;return!(62914560&(A0<<=1))&&(A0=4194304),E}function ee(E){for(var M=[],Q=0;31>Q;Q++)M.push(E);return M}function re(E,M){E.pendingLanes|=M,M!==268435456&&(E.suspendedLanes=0,E.pingedLanes=0,E.warmLanes=0)}function se(E,M,Q){E.pendingLanes|=M,E.suspendedLanes&=~M;var K=31-Kl(M);E.entangledLanes|=M,E.entanglements[K]=1073741824|E.entanglements[K]|4194218&Q}function ue(E,M){var Q=E.entangledLanes|=M;for(E=E.entanglements;Q;){var K=31-Kl(Q),ne=1<<K;ne&M|E[K]&M&&(E[K]|=M),Q&=~ne}}function fe(E){return 2<(E&=-E)?8<E?134217727&E?32:268435456:8:2}function pe(E){if(typeof p0=="function"&&yx(E),Na&&typeof Na.setStrictMode=="function")try{Na.setStrictMode(Xf,E)}catch{}}function xe(E,M){if(typeof E=="object"&&E!==null){var Q=om.get(E);return Q!==void 0?Q:(M={value:E,source:M,stack:b(M)},om.set(E,M),M)}return{value:E,source:M,stack:b(M)}}function ce(E,M){ud[Lp++]=E_,ud[Lp++]=Pp,Pp=E,E_=M}function _e(E,M,Q){Yl[Mu++]=rA,Yl[Mu++]=hd,Yl[Mu++]=Op,Op=E;var K=rA;E=hd;var ne=32-Kl(K)-1;K&=~(1<<ne),Q+=1;var he=32-Kl(M)+ne;if(30<he){var Qe=ne-ne%5;he=(K&(1<<Qe)-1).toString(32),K>>=Qe,ne-=Qe,rA=1<<32-Kl(M)+ne|Q<<ne|K,hd=he+E}else rA=1<<he|Q<<ne|K,hd=E}function ye(E){E.return!==null&&(ce(E,1),_e(E,1,0))}function Oe(E){for(;E===Pp;)Pp=ud[--Lp],ud[Lp]=null,E_=ud[--Lp],ud[Lp]=null;for(;E===Op;)Op=Yl[--Mu],Yl[Mu]=null,hd=Yl[--Mu],Yl[Mu]=null,rA=Yl[--Mu],Yl[Mu]=null}function ge(E,M){H(KA,M),H(zo,E),H(Kr,null),E=em(M),P(Kr),H(Kr,E)}function Ee(){P(Kr),P(zo),P(KA)}function ke(E){E.memoizedState!==null&&H(S_,E);var M=Kr.current,Q=d_(M,E.type);M!==Q&&(H(zo,E),H(Kr,Q))}function je(E){zo.current===E&&(P(Kr),P(zo)),S_.current===E&&(P(S_),Jc?Mn._currentValue=Qa:Mn._currentValue2=Qa)}function Ie(E){throw Nt(xe(Error(s(418,"")),E)),B_}function ze(E,M){if(!Ho)throw Error(s(175));ma(E.stateNode,E.type,E.memoizedProps,M,E)||Ie(E)}function ht(E){for(Jl=E.return;Jl;)switch(Jl.tag){case 3:case 27:return void(gh=!0);case 5:case 13:return void(gh=!1);default:Jl=Jl.return}}function lt(E){if(!Ho||E!==Jl)return!1;if(!Jr)return ht(E),Jr=!0,!1;var M=!1;if(xl?E.tag!==3&&E.tag!==27&&(E.tag!==5||c0(E.type)&&!dh(E.type,E.memoizedProps))&&(M=!0):E.tag!==3&&(E.tag!==5||c0(E.type)&&!dh(E.type,E.memoizedProps))&&(M=!0),M&&Cl&&Ie(E),ht(E),E.tag===13){if(!Ho)throw Error(s(316));if(!(E=(E=E.memoizedState)!==null?E.dehydrated:null))throw Error(s(317));Cl=rx(E)}else Cl=Jl?l0(E.stateNode):null;return!0}function yt(){Ho&&(Cl=Jl=null,Jr=!1)}function Nt(E){eu===null?eu=[E]:eu.push(E)}function zt(){for(var E=Yf,M=I_=Yf=0;M<E;){var Q=tu[M];tu[M++]=null;var K=tu[M];tu[M++]=null;var ne=tu[M];tu[M++]=null;var he=tu[M];if(tu[M++]=null,K!==null&&ne!==null){var Qe=K.pending;Qe===null?ne.next=ne:(ne.next=Qe.next,Qe.next=ne),K.pending=ne}he!==0&&Be(Q,ne,he)}}function ei(E,M,Q,K){tu[Yf++]=E,tu[Yf++]=M,tu[Yf++]=Q,tu[Yf++]=K,I_|=K,E.lanes|=K,(E=E.alternate)!==null&&(E.lanes|=K)}function it(E,M,Q,K){return ei(E,M,Q,K),li(E)}function Dt(E,M){return ei(E,null,null,M),li(E)}function Be(E,M,Q){E.lanes|=Q;var K=E.alternate;K!==null&&(K.lanes|=Q);for(var ne=!1,he=E.return;he!==null;)he.childLanes|=Q,(K=he.alternate)!==null&&(K.childLanes|=Q),he.tag===22&&((E=he.stateNode)===null||1&E._visibility||(ne=!0)),E=he,he=he.return;ne&&M!==null&&E.tag===3&&(he=E.stateNode,ne=31-Kl(Q),(E=(he=he.hiddenUpdates)[ne])===null?he[ne]=[M]:E.push(M),M.lane=536870912|Q)}function li(E){if(50<tg)throw tg=0,md=null,Error(s(185));for(var M=E.return;M!==null;)M=(E=M).return;return E.tag===3?E.stateNode:null}function bt(E){var M;E!==Qp&&E.next===null&&(Qp===null?am=Qp=E:Qp=Qp.next=E),Jf=!0,f0||(f0=!0,M=qe,ws?im(function(){6&En?Cc(fh,M):M()}):Cc(fh,M))}function Wt(E,M){if(!lm&&Jf){lm=!0;do for(var Q=!1,K=am;K!==null;){if(E!==0){var ne=K.pendingLanes;if(ne===0)var he=0;else{var Qe=K.suspendedLanes,tt=K.pingedLanes;he=(1<<31-Kl(42|E)+1)-1,he=201326677&(he&=ne&~(Qe&~tt))?201326677&he|1:he?2|he:0}he!==0&&(Q=!0,Se(K,he))}else he=rn,!(3&(he=z(K,K===cn?he:0)))||W(K,he)||(Q=!0,Se(K,he));K=K.next}while(Q);lm=!1}}function qe(){Jf=f0=!1;var E=0;XA!==0&&(mr()&&(E=XA),XA=0);for(var M=nl(),Q=null,K=am;K!==null;){var ne=K.next,he=pt(K,M);he===0?(K.next=null,Q===null?am=ne:Q.next=ne,ne===null&&(Qp=Q)):(Q=K,(E!==0||3&he)&&(Jf=!0)),K=ne}Wt(E)}function pt(E,M){for(var Q=E.suspendedLanes,K=E.pingedLanes,ne=E.expirationTimes,he=-62914561&E.pendingLanes;0<he;){var Qe=31-Kl(he),tt=1<<Qe,dt=ne[Qe];dt===-1?tt&Q&&!(tt&K)||(ne[Qe]=j(tt,M)):dt<=M&&(E.expiredLanes|=tt),he&=~tt}if(Q=rn,Q=z(E,E===(M=cn)?Q:0),K=E.callbackNode,Q===0||E===M&&_r===2||E.cancelPendingCommit!==null)return K!==null&&K!==null&&ph(K),E.callbackNode=null,E.callbackPriority=0;if(!(3&Q)||W(E,Q)){if((M=Q&-Q)===E.callbackPriority)return M;switch(K!==null&&ph(K),fe(Q)){case 2:case 8:Q=va;break;case 32:default:Q=C_;break;case 268435456:Q=sm}return K=At.bind(null,E),Q=Cc(Q,K),E.callbackPriority=M,E.callbackNode=Q,M}return K!==null&&K!==null&&ph(K),E.callbackPriority=2,E.callbackNode=null,2}function At(E,M){var Q=E.callbackNode;if(Xc()&&E.callbackNode!==Q)return null;var K=rn;return(K=z(E,E===cn?K:0))===0?null:(Wg(E,K,M),pt(E,nl()),E.callbackNode!=null&&E.callbackNode===Q?At.bind(null,E):null)}function Se(E,M){if(Xc())return null;Wg(E,M,!0)}function me(){return XA===0&&(XA=J()),XA}function $e(){if(--T_==0&&cm!==null){Ec!==null&&(Ec.status="fulfilled");var E=cm;cm=null,Np=0,Ec=null;for(var M=0;M<E.length;M++)(0,E[M])()}}function Ct(E){E.updateQueue={baseState:E.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wt(E,M){E=E.updateQueue,M.updateQueue===E&&(M.updateQueue={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,callbacks:null})}function ft(E){return{lane:E,tag:0,payload:null,callback:null,next:null}}function Ot(E,M,Q){var K=E.updateQueue;if(K===null)return null;if(K=K.shared,2&En){var ne=K.pending;return ne===null?M.next=M:(M.next=ne.next,ne.next=M),K.pending=M,M=li(E),Be(E,null,Q),M}return ei(E,K,M,Q),li(E)}function Gt(E,M,Q){if((M=M.updateQueue)!==null&&(M=M.shared,4194176&Q)){var K=M.lanes;Q|=K&=E.pendingLanes,M.lanes=Q,ue(E,Q)}}function si(E,M){var Q=E.updateQueue,K=E.alternate;if(K!==null&&Q===(K=K.updateQueue)){var ne=null,he=null;if((Q=Q.firstBaseUpdate)!==null){do{var Qe={lane:Q.lane,tag:Q.tag,payload:Q.payload,callback:null,next:null};he===null?ne=he=Qe:he=he.next=Qe,Q=Q.next}while(Q!==null);he===null?ne=he=M:he=he.next=M}else ne=he=M;return Q={baseState:K.baseState,firstBaseUpdate:ne,lastBaseUpdate:he,shared:K.shared,callbacks:K.callbacks},void(E.updateQueue=Q)}(E=Q.lastBaseUpdate)===null?Q.firstBaseUpdate=M:E.next=M,Q.lastBaseUpdate=M}function $t(){if(Sb&&Ec!==null)throw Ec}function ti(E,M,Q,K){Sb=!1;var ne=E.updateQueue;dd=!1;var he=ne.firstBaseUpdate,Qe=ne.lastBaseUpdate,tt=ne.shared.pending;if(tt!==null){ne.shared.pending=null;var dt=tt,ni=dt.next;dt.next=null,Qe===null?he=ni:Qe.next=ni,Qe=dt;var vi=E.alternate;vi!==null&&(tt=(vi=vi.updateQueue).lastBaseUpdate)!==Qe&&(tt===null?vi.firstBaseUpdate=ni:tt.next=ni,vi.lastBaseUpdate=dt)}if(he!==null){var zi=ne.baseState;for(Qe=0,vi=ni=dt=null,tt=he;;){var Di=-536870913&tt.lane,Sn=Di!==tt.lane;if(Sn?(rn&Di)===Di:(K&Di)===Di){Di!==0&&Di===Np&&(Sb=!0),vi!==null&&(vi=vi.next={lane:0,tag:tt.tag,payload:tt.payload,callback:null,next:null});e:{var Zn=E,ri=tt;Di=M;var Qt=Q;switch(ri.tag){case 1:if(typeof(Zn=ri.payload)=="function"){zi=Zn.call(Qt,zi,Di);break e}zi=Zn;break e;case 3:Zn.flags=-65537&Zn.flags|128;case 0:if((Di=typeof(Zn=ri.payload)=="function"?Zn.call(Qt,zi,Di):Zn)==null)break e;zi=Wl({},zi,Di);break e;case 2:dd=!0}}(Di=tt.callback)!==null&&(E.flags|=64,Sn&&(E.flags|=8192),(Sn=ne.callbacks)===null?ne.callbacks=[Di]:Sn.push(Di))}else Sn={lane:Di,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},vi===null?(ni=vi=Sn,dt=zi):vi=vi.next=Sn,Qe|=Di;if((tt=tt.next)===null){if((tt=ne.shared.pending)===null)break;tt=(Sn=tt).next,Sn.next=null,ne.lastBaseUpdate=Sn,ne.shared.pending=null}}vi===null&&(dt=zi),ne.baseState=dt,ne.firstBaseUpdate=ni,ne.lastBaseUpdate=vi,he===null&&(ne.shared.lanes=0),Tl|=Qe,E.lanes=Qe,E.memoizedState=zi}}function gi(E,M){if(typeof E!="function")throw Error(s(191,E));E.call(M)}function mi(E,M){var Q=E.callbacks;if(Q!==null)for(E.callbacks=null,E=0;E<Q.length;E++)gi(Q[E],M)}function Oi(E,M){if(Xl(E,M))return!0;if(typeof E!="object"||E===null||typeof M!="object"||M===null)return!1;var Q=Object.keys(E),K=Object.keys(M);if(Q.length!==K.length)return!1;for(K=0;K<Q.length;K++){var ne=Q[K];if(!bx.call(M,ne)||!Xl(E[ne],M[ne]))return!1}return!0}function Bi(E){return(E=E.status)==="fulfilled"||E==="rejected"}function ln(){}function Ji(E,M,Q){switch((Q=E[Q])===void 0?E.push(M):Q!==M&&(M.then(ln,ln),M=Q),M.status){case"fulfilled":return M.value;case"rejected":throw(E=M.reason)===Ru?Error(s(483)):E;default:if(typeof M.status=="string")M.then(ln,ln);else{if((E=cn)!==null&&100<E.shellSuspendCounter)throw Error(s(482));(E=M).status="pending",E.then(function(K){if(M.status==="pending"){var ne=M;ne.status="fulfilled",ne.value=K}},function(K){if(M.status==="pending"){var ne=M;ne.status="rejected",ne.reason=K}})}switch(M.status){case"fulfilled":return M.value;case"rejected":throw(E=M.reason)===Ru?Error(s(483)):E}throw _h=M,Ru}}function Vi(){if(_h===null)throw Error(s(459));var E=_h;return _h=null,E}function at(E){var M=M_;return M_+=1,Ts===null&&(Ts=[]),Ji(Ts,E,M)}function Ti(E,M){M=M.props.ref,E.ref=M!==void 0?M:null}function Pt(E,M){throw M.$$typeof===t0?Error(s(525)):(E=Object.prototype.toString.call(M),Error(s(31,E==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":E)))}function Xt(E){return(0,E._init)(E._payload)}function Mi(E){function M(ri,Qt){if(E){var oi=ri.deletions;oi===null?(ri.deletions=[Qt],ri.flags|=16):oi.push(Qt)}}function Q(ri,Qt){if(!E)return null;for(;Qt!==null;)M(ri,Qt),Qt=Qt.sibling;return null}function K(ri){for(var Qt=new Map;ri!==null;)ri.key!==null?Qt.set(ri.key,ri):Qt.set(ri.index,ri),ri=ri.sibling;return Qt}function ne(ri,Qt){return(ri=Qo(ri,Qt)).index=0,ri.sibling=null,ri}function he(ri,Qt,oi){return ri.index=oi,E?(oi=ri.alternate)!==null?(oi=oi.index)<Qt?(ri.flags|=33554434,Qt):oi:(ri.flags|=33554434,Qt):(ri.flags|=1048576,Qt)}function Qe(ri){return E&&ri.alternate===null&&(ri.flags|=33554434),ri}function tt(ri,Qt,oi,qi){return Qt===null||Qt.tag!==6?((Qt=Xg(oi,ri.mode,qi)).return=ri,Qt):((Qt=ne(Qt,oi)).return=ri,Qt)}function dt(ri,Qt,oi,qi){var Rn=oi.type;return Rn===ks?vi(ri,Qt,oi.props.children,qi,oi.key):Qt!==null&&(Qt.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===Iu&&Xt(Rn)===Qt.type)?(Ti(Qt=ne(Qt,oi.props),oi),Qt.return=ri,Qt):(Ti(Qt=Zd(oi.type,oi.key,oi.props,null,ri.mode,qi),oi),Qt.return=ri,Qt)}function ni(ri,Qt,oi,qi){return Qt===null||Qt.tag!==4||Qt.stateNode.containerInfo!==oi.containerInfo||Qt.stateNode.implementation!==oi.implementation?((Qt=zA(oi,ri.mode,qi)).return=ri,Qt):((Qt=ne(Qt,oi.children||[])).return=ri,Qt)}function vi(ri,Qt,oi,qi,Rn){return Qt===null||Qt.tag!==7?((Qt=uh(oi,ri.mode,qi,Rn)).return=ri,Qt):((Qt=ne(Qt,oi)).return=ri,Qt)}function zi(ri,Qt,oi){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return(Qt=Xg(""+Qt,ri.mode,oi)).return=ri,Qt;if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case zf:return Ti(oi=Zd(Qt.type,Qt.key,Qt.props,null,ri.mode,oi),Qt),oi.return=ri,oi;case eo:return(Qt=zA(Qt,ri.mode,oi)).return=ri,Qt;case Iu:return zi(ri,Qt=(0,Qt._init)(Qt._payload),oi)}if(tA(Qt)||l(Qt))return(Qt=uh(Qt,ri.mode,oi,null)).return=ri,Qt;if(typeof Qt.then=="function")return zi(ri,at(Qt),oi);if(Qt.$$typeof===Bu)return zi(ri,qc(ri,Qt),oi);Pt(ri,Qt)}return null}function Di(ri,Qt,oi,qi){var Rn=Qt!==null?Qt.key:null;if(typeof oi=="string"&&oi!==""||typeof oi=="number"||typeof oi=="bigint")return Rn!==null?null:tt(ri,Qt,""+oi,qi);if(typeof oi=="object"&&oi!==null){switch(oi.$$typeof){case zf:return oi.key===Rn?dt(ri,Qt,oi,qi):null;case eo:return oi.key===Rn?ni(ri,Qt,oi,qi):null;case Iu:return Di(ri,Qt,oi=(Rn=oi._init)(oi._payload),qi)}if(tA(oi)||l(oi))return Rn!==null?null:vi(ri,Qt,oi,qi,null);if(typeof oi.then=="function")return Di(ri,Qt,at(oi),qi);if(oi.$$typeof===Bu)return Di(ri,Qt,qc(ri,oi),qi);Pt(ri,oi)}return null}function Sn(ri,Qt,oi,qi,Rn){if(typeof qi=="string"&&qi!==""||typeof qi=="number"||typeof qi=="bigint")return tt(Qt,ri=ri.get(oi)||null,""+qi,Rn);if(typeof qi=="object"&&qi!==null){switch(qi.$$typeof){case zf:return dt(Qt,ri=ri.get(qi.key===null?oi:qi.key)||null,qi,Rn);case eo:return ni(Qt,ri=ri.get(qi.key===null?oi:qi.key)||null,qi,Rn);case Iu:return Sn(ri,Qt,oi,qi=(0,qi._init)(qi._payload),Rn)}if(tA(qi)||l(qi))return vi(Qt,ri=ri.get(oi)||null,qi,Rn,null);if(typeof qi.then=="function")return Sn(ri,Qt,oi,at(qi),Rn);if(qi.$$typeof===Bu)return Sn(ri,Qt,oi,qc(Qt,qi),Rn);Pt(Qt,qi)}return null}function Zn(ri,Qt,oi,qi){if(typeof oi=="object"&&oi!==null&&oi.type===ks&&oi.key===null&&(oi=oi.props.children),typeof oi=="object"&&oi!==null){switch(oi.$$typeof){case zf:e:{for(var Rn=oi.key;Qt!==null;){if(Qt.key===Rn){if((Rn=oi.type)===ks){if(Qt.tag===7){Q(ri,Qt.sibling),(qi=ne(Qt,oi.props.children)).return=ri,ri=qi;break e}}else if(Qt.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===Iu&&Xt(Rn)===Qt.type){Q(ri,Qt.sibling),Ti(qi=ne(Qt,oi.props),oi),qi.return=ri,ri=qi;break e}Q(ri,Qt);break}M(ri,Qt),Qt=Qt.sibling}oi.type===ks?((qi=uh(oi.props.children,ri.mode,qi,oi.key)).return=ri,ri=qi):(Ti(qi=Zd(oi.type,oi.key,oi.props,null,ri.mode,qi),oi),qi.return=ri,ri=qi)}return Qe(ri);case eo:e:{for(Rn=oi.key;Qt!==null;){if(Qt.key===Rn){if(Qt.tag===4&&Qt.stateNode.containerInfo===oi.containerInfo&&Qt.stateNode.implementation===oi.implementation){Q(ri,Qt.sibling),(qi=ne(Qt,oi.children||[])).return=ri,ri=qi;break e}Q(ri,Qt);break}M(ri,Qt),Qt=Qt.sibling}(qi=zA(oi,ri.mode,qi)).return=ri,ri=qi}return Qe(ri);case Iu:return Zn(ri,Qt,oi=(Rn=oi._init)(oi._payload),qi)}if(tA(oi))return function(Qn,vr,Dn,os){for(var as=null,_s=null,Nn=vr,ur=vr=0,_o=null;Nn!==null&&ur<Dn.length;ur++){Nn.index>ur?(_o=Nn,Nn=null):_o=Nn.sibling;var Ur=Di(Qn,Nn,Dn[ur],os);if(Ur===null){Nn===null&&(Nn=_o);break}E&&Nn&&Ur.alternate===null&&M(Qn,Nn),vr=he(Ur,vr,ur),_s===null?as=Ur:_s.sibling=Ur,_s=Ur,Nn=_o}if(ur===Dn.length)return Q(Qn,Nn),Jr&&ce(Qn,ur),as;if(Nn===null){for(;ur<Dn.length;ur++)(Nn=zi(Qn,Dn[ur],os))!==null&&(vr=he(Nn,vr,ur),_s===null?as=Nn:_s.sibling=Nn,_s=Nn);return Jr&&ce(Qn,ur),as}for(Nn=K(Nn);ur<Dn.length;ur++)(_o=Sn(Nn,Qn,ur,Dn[ur],os))!==null&&(E&&_o.alternate!==null&&Nn.delete(_o.key===null?ur:_o.key),vr=he(_o,vr,ur),_s===null?as=_o:_s.sibling=_o,_s=_o);return E&&Nn.forEach(function(xh){return M(Qn,xh)}),Jr&&ce(Qn,ur),as}(ri,Qt,oi,qi);if(l(oi)){if(typeof(Rn=l(oi))!="function")throw Error(s(150));return function(Qn,vr,Dn,os){if(Dn==null)throw Error(s(151));for(var as=null,_s=null,Nn=vr,ur=vr=0,_o=null,Ur=Dn.next();Nn!==null&&!Ur.done;ur++,Ur=Dn.next()){Nn.index>ur?(_o=Nn,Nn=null):_o=Nn.sibling;var xh=Di(Qn,Nn,Ur.value,os);if(xh===null){Nn===null&&(Nn=_o);break}E&&Nn&&xh.alternate===null&&M(Qn,Nn),vr=he(xh,vr,ur),_s===null?as=xh:_s.sibling=xh,_s=xh,Nn=_o}if(Ur.done)return Q(Qn,Nn),Jr&&ce(Qn,ur),as;if(Nn===null){for(;!Ur.done;ur++,Ur=Dn.next())(Ur=zi(Qn,Ur.value,os))!==null&&(vr=he(Ur,vr,ur),_s===null?as=Ur:_s.sibling=Ur,_s=Ur);return Jr&&ce(Qn,ur),as}for(Nn=K(Nn);!Ur.done;ur++,Ur=Dn.next())(Ur=Sn(Nn,Qn,ur,Ur.value,os))!==null&&(E&&Ur.alternate!==null&&Nn.delete(Ur.key===null?ur:Ur.key),vr=he(Ur,vr,ur),_s===null?as=Ur:_s.sibling=Ur,_s=Ur);return E&&Nn.forEach(function(ZA){return M(Qn,ZA)}),Jr&&ce(Qn,ur),as}(ri,Qt,oi=Rn.call(oi),qi)}if(typeof oi.then=="function")return Zn(ri,Qt,at(oi),qi);if(oi.$$typeof===Bu)return Zn(ri,Qt,qc(ri,oi),qi);Pt(ri,oi)}return typeof oi=="string"&&oi!==""||typeof oi=="number"||typeof oi=="bigint"?(oi=""+oi,Qt!==null&&Qt.tag===6?(Q(ri,Qt.sibling),(qi=ne(Qt,oi)).return=ri,ri=qi):(Q(ri,Qt),(qi=Xg(oi,ri.mode,qi)).return=ri,ri=qi),Qe(ri)):Q(ri,Qt)}return function(ri,Qt,oi,qi){try{M_=0;var Rn=Zn(ri,Qt,oi,qi);return Ts=null,Rn}catch(vr){if(vr===Ru)throw vr;var Qn=i(29,vr,null,ri.mode);return Qn.lanes=qi,Qn.return=ri,Qn}}}function Ii(E,M){H(Ad,E=gs),H(sA,M),gs=E|M.baseLanes}function Fi(){H(Ad,gs),H(sA,sA.current)}function vn(){gs=Ad.current,P(sA),P(Ad)}function Xn(E){var M=E.alternate;H(Ao,1&Ao.current),H(Sc,E),El===null&&(M===null||sA.current!==null||M.memoizedState!==null)&&(El=E)}function Tn(E){if(E.tag===22){if(H(Ao,Ao.current),H(Sc,E),El===null){var M=E.alternate;M!==null&&M.memoizedState!==null&&(El=E)}}else cr()}function cr(){H(Ao,Ao.current),H(Sc,Sc.current)}function gr(E){P(Sc),El===E&&(El=null),P(Ao)}function Xr(E){for(var M=E;M!==null;){if(M.tag===13){var Q=M.memoizedState;if(Q!==null&&((Q=Q.dehydrated)===null||a0(Q)||m_(Q)))return M}else if(M.tag===19&&M.memoizedProps.revealOrder!==void 0){if(128&M.flags)return M}else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===E)break;for(;M.sibling===null;){if(M.return===null||M.return===E)return null;M=M.return}M.sibling.return=M.return,M=M.sibling}return null}function $n(){throw Error(s(321))}function co(E,M){if(M===null)return!1;for(var Q=0;Q<M.length&&Q<E.length;Q++)if(!Xl(E[Q],M[Q]))return!1;return!0}function Ka(E,M,Q,K,ne,he){return ps=he,Jn=M,M.memoizedState=null,M.updateQueue=null,M.lanes=0,In.H=E===null||E.memoizedState===null?zp:pd,Bc=!1,he=Q(K,ne),Bc=!1,Fu&&(he=fl(M,Q,K,ne)),Zu(E),he}function Zu(E){In.H=xs;var M=Ms!==null&&Ms.next!==null;if(ps=0,Vs=Ms=Jn=null,oA=!1,Sl=0,Ps=null,M)throw Error(s(300));E===null||ya||(E=E.dependencies)!==null&&Zm(E)&&(ya=!0)}function fl(E,M,Q,K){Jn=E;var ne=0;do{if(Fu&&(Ps=null),Sl=0,Fu=!1,25<=ne)throw Error(s(301));if(ne+=1,Vs=Ms=null,E.updateQueue!=null){var he=E.updateQueue;he.lastEffect=null,he.events=null,he.stores=null,he.memoCache!=null&&(he.memoCache.index=0)}In.H=YA,he=M(Q,K)}while(Fu);return he}function Ql(){var E=In.H,M=E.useState()[0];return M=typeof M.then=="function"?Nl(M):M,E=E.useState()[0],(Ms!==null?Ms.memoizedState:null)!==E&&(Jn.flags|=1024),M}function Nc(){var E=aA!==0;return aA=0,E}function eh(E,M,Q){M.updateQueue=E.updateQueue,M.flags&=-2053,E.lanes&=~Q}function Hc(E){if(oA){for(E=E.memoizedState;E!==null;){var M=E.queue;M!==null&&(M.pending=null),E=E.next}oA=!1}ps=0,Vs=Ms=Jn=null,Fu=!1,Sl=aA=0,Ps=null}function Fs(){var E={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vs===null?Jn.memoizedState=Vs=E:Vs=Vs.next=E,Vs}function ys(){if(Ms===null){var E=Jn.alternate;E=E!==null?E.memoizedState:null}else E=Ms.next;var M=Vs===null?Jn.memoizedState:Vs.next;if(M!==null)Vs=M,Ms=E;else{if(E===null)throw Jn.alternate===null?Error(s(467)):Error(s(310));E={memoizedState:(Ms=E).memoizedState,baseState:Ms.baseState,baseQueue:Ms.baseQueue,queue:Ms.queue,next:null},Vs===null?Jn.memoizedState=Vs=E:Vs=Vs.next=E}return Vs}function Nl(E){var M=Sl;return Sl+=1,Ps===null&&(Ps=[]),E=Ji(Ps,E,M),M=Jn,(Vs===null?M.memoizedState:Vs.next)===null&&(M=M.alternate,In.H=M===null||M.memoizedState===null?zp:pd),E}function Hi(E){if(E!==null&&typeof E=="object"){if(typeof E.then=="function")return Nl(E);if(E.$$typeof===Bu)return ka(E)}throw Error(s(438,String(E)))}function gl(E){var M=null,Q=Jn.updateQueue;if(Q!==null&&(M=Q.memoCache),M==null){var K=Jn.alternate;K!==null&&(K=K.updateQueue)!==null&&(K=K.memoCache)!=null&&(M={data:K.data.map(function(ne){return ne.slice()}),index:0})}if(M==null&&(M={data:[],index:0}),Q===null&&(Q=Hp(),Jn.updateQueue=Q),Q.memoCache=M,(Q=M.data[M.index])===void 0)for(Q=M.data[M.index]=Array(E),K=0;K<E;K++)Q[K]=ga;return M.index++,Q}function oa(E,M){return typeof M=="function"?M(E):M}function uo(E){return Le(ys(),Ms,E)}function Le(E,M,Q){var K=E.queue;if(K===null)throw Error(s(311));K.lastRenderedReducer=Q;var ne=E.baseQueue,he=K.pending;if(he!==null){if(ne!==null){var Qe=ne.next;ne.next=he.next,he.next=Qe}M.baseQueue=ne=he,K.pending=null}if(he=E.baseState,ne===null)E.memoizedState=he;else{var tt=Qe=null,dt=null,ni=M=ne.next,vi=!1;do{var zi=-536870913&ni.lane;if(zi!==ni.lane?(rn&zi)===zi:(ps&zi)===zi){var Di=ni.revertLane;if(Di===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,action:ni.action,hasEagerState:ni.hasEagerState,eagerState:ni.eagerState,next:null}),zi===Np&&(vi=!0);else{if((ps&Di)===Di){ni=ni.next,Di===Np&&(vi=!0);continue}zi={lane:0,revertLane:ni.revertLane,action:ni.action,hasEagerState:ni.hasEagerState,eagerState:ni.eagerState,next:null},dt===null?(tt=dt=zi,Qe=he):dt=dt.next=zi,Jn.lanes|=Di,Tl|=Di}zi=ni.action,Bc&&Q(he,zi),he=ni.hasEagerState?ni.eagerState:Q(he,zi)}else Di={lane:zi,revertLane:ni.revertLane,action:ni.action,hasEagerState:ni.hasEagerState,eagerState:ni.eagerState,next:null},dt===null?(tt=dt=Di,Qe=he):dt=dt.next=Di,Jn.lanes|=zi,Tl|=zi;ni=ni.next}while(ni!==null&&ni!==M);if(dt===null?Qe=he:dt.next=tt,!Xl(he,E.memoizedState)&&(ya=!0,vi&&(Q=Ec)!==null))throw Q;E.memoizedState=he,E.baseState=Qe,E.baseQueue=dt,K.lastRenderedState=he}return ne===null&&(K.lanes=0),[E.memoizedState,K.dispatch]}function Et(E){var M=ys(),Q=M.queue;if(Q===null)throw Error(s(311));Q.lastRenderedReducer=E;var K=Q.dispatch,ne=Q.pending,he=M.memoizedState;if(ne!==null){Q.pending=null;var Qe=ne=ne.next;do he=E(he,Qe.action),Qe=Qe.next;while(Qe!==ne);Xl(he,M.memoizedState)||(ya=!0),M.memoizedState=he,M.baseQueue===null&&(M.baseState=he),Q.lastRenderedState=he}return[he,K]}function Vt(E,M,Q){var K=Jn,ne=ys(),he=Jr;if(he){if(Q===void 0)throw Error(s(407));Q=Q()}else Q=M();var Qe=!Xl((Ms||ne).memoizedState,Q);if(Qe&&(ne.memoizedState=Q,ya=!0),ne=ne.queue,ns(pi.bind(null,K,ne,E),[E]),ne.getSnapshot!==M||Qe||Vs!==null&&1&Vs.memoizedState.tag){if(K.flags|=2048,fn(9,St.bind(null,K,ne,Q,M),{destroy:void 0},null),cn===null)throw Error(s(349));he||60&ps||kt(K,M,Q)}return Q}function kt(E,M,Q){E.flags|=16384,E={getSnapshot:M,value:Q},(M=Jn.updateQueue)===null?(M=Hp(),Jn.updateQueue=M,M.stores=[E]):(Q=M.stores)===null?M.stores=[E]:Q.push(E)}function St(E,M,Q,K){M.value=Q,M.getSnapshot=K,Ui(M)&&ki(E)}function pi(E,M,Q){return Q(function(){Ui(M)&&ki(E)})}function Ui(E){var M=E.getSnapshot;E=E.value;try{var Q=M();return!Xl(E,Q)}catch{return!0}}function ki(E){var M=Dt(E,2);M!==null&&Ko(M,E,2)}function Ci(E){var M=Fs();if(typeof E=="function"){var Q=E;if(E=Q(),Bc){pe(!0);try{Q()}finally{pe(!1)}}}return M.memoizedState=M.baseState=E,M.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:E},M}function yn(E,M,Q,K){return E.baseState=Q,Le(E,Ms,typeof K=="function"?K:oa)}function en(E,M,Q,K,ne){if(yu(E))throw Error(s(485));if((E=M.action)!==null){var he={payload:ne,action:E,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Qe){he.listeners.push(Qe)}};In.T!==null?Q(!0):he.isTransition=!1,K(he),(Q=M.pending)===null?(he.next=M.pending=he,Qi(M,he)):(he.next=Q.next,M.pending=Q.next=he)}}function Qi(E,M){var Q=M.action,K=M.payload,ne=E.state;if(M.isTransition){var he=In.T,Qe={};In.T=Qe;try{var tt=Q(ne,K),dt=In.S;dt!==null&&dt(Qe,tt),Wn(E,M,tt)}catch(ni){Yr(E,M,ni)}finally{In.T=he}}else try{Wn(E,M,he=Q(ne,K))}catch(ni){Yr(E,M,ni)}}function Wn(E,M,Q){Q!==null&&typeof Q=="object"&&typeof Q.then=="function"?Q.then(function(K){Cr(E,M,K)},function(K){return Yr(E,M,K)}):Cr(E,M,Q)}function Cr(E,M,Q){M.status="fulfilled",M.value=Q,sr(M),E.state=Q,(M=E.pending)!==null&&((Q=M.next)===M?E.pending=null:(Q=Q.next,M.next=Q,Qi(E,Q)))}function Yr(E,M,Q){var K=E.pending;if(E.pending=null,K!==null){K=K.next;do M.status="rejected",M.reason=Q,sr(M),M=M.next;while(M!==K)}E.action=null}function sr(E){E=E.listeners;for(var M=0;M<E.length;M++)(0,E[M])()}function xn(E,M){return M}function Xi(E,M){if(Jr){var Q=cn.formState;if(Q!==null){e:{var K=Jn;if(Jr){if(Cl){var ne=yb(Cl,gh);if(ne){Cl=l0(ne),K=nx(ne);break e}}Ie(K)}K=!1}K&&(M=Q[0])}}(Q=Fs()).memoizedState=Q.baseState=M,K={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:M},Q.queue=K,Q=Kh.bind(null,Jn,K),K.dispatch=Q,K=Ci(!1);var he=$d.bind(null,Jn,!1,K.queue);return ne={state:M,dispatch:null,action:E,pending:null},(K=Fs()).queue=ne,Q=en.bind(null,Jn,ne,he,Q),ne.dispatch=Q,K.memoizedState=E,[M,Q,!1]}function jn(E){return ar(ys(),Ms,E)}function ar(E,M,Q){M=Le(E,M,xn)[0],E=uo(oa)[0],M=typeof M=="object"&&M!==null&&typeof M.then=="function"?Nl(M):M;var K=ys(),ne=K.queue,he=ne.dispatch;return Q!==K.memoizedState&&(Jn.flags|=2048,fn(9,Wo.bind(null,ne,Q),{destroy:void 0},null)),[M,he,E]}function Wo(E,M){E.action=M}function Ua(E){var M=ys(),Q=Ms;if(Q!==null)return ar(M,Q,E);ys(),M=M.memoizedState;var K=(Q=ys()).queue.dispatch;return Q.memoizedState=E,[M,K,!1]}function fn(E,M,Q,K){return E={tag:E,create:M,inst:Q,deps:K,next:null},(M=Jn.updateQueue)===null&&(M=Hp(),Jn.updateQueue=M),(Q=M.lastEffect)===null?M.lastEffect=E.next=E:(K=Q.next,Q.next=E,E.next=K,M.lastEffect=E),E}function Xa(){return ys().memoizedState}function Er(E,M,Q,K){var ne=Fs();Jn.flags|=E,ne.memoizedState=fn(1|M,Q,{destroy:void 0},K===void 0?null:K)}function Ss(E,M,Q,K){var ne=ys();K=K===void 0?null:K;var he=ne.memoizedState.inst;Ms!==null&&K!==null&&co(K,Ms.memoizedState.deps)?ne.memoizedState=fn(M,Q,he,K):(Jn.flags|=E,ne.memoizedState=fn(1|M,Q,he,K))}function Qs(E,M){Er(8390656,8,E,M)}function ns(E,M){Ss(2048,8,E,M)}function So(E,M){return Ss(4,2,E,M)}function Ya(E,M){return Ss(4,4,E,M)}function aa(E,M){if(typeof M=="function"){E=E();var Q=M(E);return function(){typeof Q=="function"?Q():M(null)}}if(M!=null)return E=E(),M.current=E,function(){M.current=null}}function zc(E,M,Q){Q=Q!=null?Q.concat([E]):null,Ss(4,4,aa.bind(null,M,E),Q)}function _u(){}function Wh(E,M){var Q=ys();M=M===void 0?null:M;var K=Q.memoizedState;return M!==null&&co(M,K[1])?K[0]:(Q.memoizedState=[E,M],E)}function jh(E,M){var Q=ys();M=M===void 0?null:M;var K=Q.memoizedState;if(M!==null&&co(M,K[1]))return K[0];if(K=E(),Bc){pe(!0);try{E()}finally{pe(!1)}}return Q.memoizedState=[K,M],K}function kA(E,M,Q){return Q===void 0||1073741824&ps?E.memoizedState=M:(E.memoizedState=Q,E=Of(),Jn.lanes|=E,Tl|=E,Q)}function th(E,M,Q,K){return Xl(Q,M)?Q:sA.current!==null?(E=kA(E,Q,K),Xl(E,M)||(ya=!0),E):42&ps?(E=Of(),Jn.lanes|=E,Tl|=E,M):(ya=!0,E.memoizedState=Q)}function LA(E,M,Q,K,ne){var he=ld();il(he!==0&&8>he?he:8);var Qe,tt,dt,ni=In.T,vi={};In.T=vi,$d(E,!1,M,Q);try{var zi=ne(),Di=In.S;if(Di!==null&&Di(vi,zi),zi!==null&&typeof zi=="object"&&typeof zi.then=="function"){var Sn=(Qe=K,tt=[],dt={status:"pending",value:null,reason:null,then:function(Zn){tt.push(Zn)}},zi.then(function(){dt.status="fulfilled",dt.value=Qe;for(var Zn=0;Zn<tt.length;Zn++)(0,tt[Zn])(Qe)},function(Zn){for(dt.status="rejected",dt.reason=Zn,Zn=0;Zn<tt.length;Zn++)(0,tt[Zn])(void 0)}),dt);jo(E,M,Sn,Oo())}else jo(E,M,K,Oo())}catch(Zn){jo(E,M,{then:function(){},status:"rejected",reason:Zn},Oo())}finally{il(he),In.T=ni}}function ih(E){var M=E.memoizedState;if(M!==null)return M;var Q={};return(M={memoizedState:Qa,baseState:Qa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:Qa},next:null}).next={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:Q},next:null},E.memoizedState=M,(E=E.alternate)!==null&&(E.memoizedState=M),M}function pc(){return ka(Mn)}function vu(){return ys().memoizedState}function Ja(){return ys().memoizedState}function PA(E){for(var M=E.return;M!==null;){switch(M.tag){case 24:case 3:var Q=Oo(),K=Ot(M,E=ft(Q),Q);return K!==null&&(Ko(K,M,Q),Gt(K,M,Q)),M={cache:jv()},void(E.payload=M)}M=M.return}}function Uf(E,M,Q){var K=Oo();Q={lane:K,revertLane:0,action:Q,hasEagerState:!1,eagerState:null,next:null},yu(E)?ml(M,Q):(Q=it(E,M,Q,K))!==null&&(Ko(Q,E,K),nh(Q,M,K))}function Kh(E,M,Q){jo(E,M,Q,Oo())}function jo(E,M,Q,K){var ne={lane:K,revertLane:0,action:Q,hasEagerState:!1,eagerState:null,next:null};if(yu(E))ml(M,ne);else{var he=E.alternate;if(E.lanes===0&&(he===null||he.lanes===0)&&(he=M.lastRenderedReducer)!==null)try{var Qe=M.lastRenderedState,tt=he(Qe,Q);if(ne.hasEagerState=!0,ne.eagerState=tt,Xl(tt,Qe))return ei(E,M,ne,0),cn===null&&zt(),!1}catch{}if((Q=it(E,M,ne,K))!==null)return Ko(Q,E,K),nh(Q,M,K),!0}return!1}function $d(E,M,Q,K){if(K={lane:2,revertLane:me(),action:K,hasEagerState:!1,eagerState:null,next:null},yu(E)){if(M)throw Error(s(479))}else(M=it(E,Q,K,2))!==null&&Ko(M,E,2)}function yu(E){var M=E.alternate;return E===Jn||M!==null&&M===Jn}function ml(E,M){Fu=oA=!0;var Q=E.pending;Q===null?M.next=M:(M.next=Q.next,Q.next=M),E.pending=M}function nh(E,M,Q){if(4194176&Q){var K=M.lanes;Q|=K&=E.pendingLanes,M.lanes=Q,ue(E,Q)}}function _l(E,M,Q,K){Q=(Q=Q(K,M=E.memoizedState))==null?M:Wl({},M,Q),E.memoizedState=Q,E.lanes===0&&(E.updateQueue.baseState=Q)}function _p(E,M,Q,K,ne,he,Qe){return typeof(E=E.stateNode).shouldComponentUpdate=="function"?E.shouldComponentUpdate(K,he,Qe):!M.prototype||!M.prototype.isPureReactComponent||!Oi(Q,K)||!Oi(ne,he)}function Xh(E,M,Q,K){E=M.state,typeof M.componentWillReceiveProps=="function"&&M.componentWillReceiveProps(Q,K),typeof M.UNSAFE_componentWillReceiveProps=="function"&&M.UNSAFE_componentWillReceiveProps(Q,K),M.state!==E&&fs.enqueueReplaceState(M,M.state,null)}function Hl(E,M){var Q=M;if("ref"in M)for(var K in Q={},M)K!=="ref"&&(Q[K]=M[K]);if(E=E.defaultProps)for(var ne in Q===M&&(Q=Wl({},Q)),E)Q[ne]===void 0&&(Q[ne]=E[ne]);return Q}function bu(E,M){try{(0,E.onUncaughtError)(M.value,{componentStack:M.stack})}catch(Q){setTimeout(function(){throw Q})}}function Uo(E,M,Q){try{(0,E.onCaughtError)(Q.value,{componentStack:Q.stack,errorBoundary:M.tag===1?M.stateNode:null})}catch(K){setTimeout(function(){throw K})}}function vl(E,M,Q){return(Q=ft(Q)).tag=3,Q.payload={element:null},Q.callback=function(){bu(E,M)},Q}function Yh(E){return(E=ft(E)).tag=3,E}function ko(E,M,Q,K){var ne=Q.type.getDerivedStateFromError;if(typeof ne=="function"){var he=K.value;E.payload=function(){return ne(he)},E.callback=function(){Uo(M,Q,K)}}var Qe=Q.stateNode;Qe!==null&&typeof Qe.componentDidCatch=="function"&&(E.callback=function(){Uo(M,Q,K),typeof ne!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var tt=K.stack;this.componentDidCatch(K.value,{componentStack:tt!==null?tt:""})})}function la(E,M,Q,K){M.child=E===null?Bb(M,null,Q,K):Du(M,E.child,Q,K)}function Jh(E,M,Q,K,ne){Q=Q.render;var he=M.ref;if("ref"in K){var Qe={};for(var tt in K)tt!=="ref"&&(Qe[tt]=K[tt])}else Qe=K;return sh(M),K=Ka(E,M,Q,Qe,he,ne),tt=Nc(),E===null||ya?(Jr&&tt&&ye(M),M.flags|=1,la(E,M,K,ne),M.child):(eh(E,M,ne),ed(E,M,ne))}function Zh(E,M,Q,K,ne){if(E===null){var he=Q.type;return typeof he!="function"||Hf(he)||he.defaultProps!==void 0||Q.compare!==null?((E=Zd(Q.type,null,K,M,M.mode,ne)).ref=M.ref,E.return=M,M.child=E):(M.tag=15,M.type=he,Gc(E,M,he,K,ne))}if(he=E.child,!rb(E,ne)){var Qe=he.memoizedProps;if((Q=(Q=Q.compare)!==null?Q:Oi)(Qe,K)&&E.ref===M.ref)return ed(E,M,ne)}return M.flags|=1,(E=Qo(he,K)).ref=M.ref,E.return=M,M.child=E}function Gc(E,M,Q,K,ne){if(E!==null){var he=E.memoizedProps;if(Oi(he,K)&&E.ref===M.ref){if(ya=!1,M.pendingProps=K=he,!rb(E,ne))return M.lanes=E.lanes,ed(E,M,ne);131072&E.flags&&(ya=!0)}}return Bo(E,M,Q,K,ne)}function rh(E,M,Q){var K=M.pendingProps,ne=K.children,he=!!(2&M.stateNode._pendingVisibility),Qe=E!==null?E.memoizedState:null;if(Lo(E,M),K.mode==="hidden"||he){if(128&M.flags){if(K=Qe!==null?Qe.baseLanes|Q:Q,E!==null){for(ne=M.child=E.child,he=0;ne!==null;)he=he|ne.lanes|ne.childLanes,ne=ne.sibling;M.childLanes=he&~K}else M.childLanes=0,M.child=null;return ca(E,M,K,Q)}if(!(536870912&Q))return M.lanes=M.childLanes=536870912,ca(E,M,Qe!==null?Qe.baseLanes|Q:Q,Q);M.memoizedState={baseLanes:0,cachePool:null},E!==null&&$c(M,Qe!==null?Qe.cachePool:null),Qe!==null?Ii(M,Qe):Fi(),Tn(M)}else Qe!==null?($c(M,Qe.cachePool),Ii(M,Qe),cr(),M.memoizedState=null):(E!==null&&$c(M,null),Fi(),cr());return la(E,M,ne,Q),M.child}function ca(E,M,Q,K){var ne=oh();return ne=ne===null?null:{parent:Jc?Mo._currentValue:Mo._currentValue2,pool:ne},M.memoizedState={baseLanes:Q,cachePool:ne},E!==null&&$c(M,null),Fi(),Tn(M),E!==null&&kf(E,M,K,!0),null}function Lo(E,M){var Q=M.ref;if(Q===null)E!==null&&E.ref!==null&&(M.flags|=2097664);else{if(typeof Q!="function"&&typeof Q!="object")throw Error(s(284));E!==null&&E.ref===Q||(M.flags|=2097664)}}function Bo(E,M,Q,K,ne){return sh(M),Q=Ka(E,M,Q,K,void 0,ne),K=Nc(),E===null||ya?(Jr&&K&&ye(M),M.flags|=1,la(E,M,Q,ne),M.child):(eh(E,M,ne),ed(E,M,ne))}function Vc(E,M,Q,K,ne,he){return sh(M),M.updateQueue=null,Q=fl(M,K,Q,ne),Zu(E),K=Nc(),E===null||ya?(Jr&&K&&ye(M),M.flags|=1,la(E,M,Q,he),M.child):(eh(E,M,he),ed(E,M,he))}function fc(E,M,Q,K,ne){if(sh(M),M.stateNode===null){var he=nA,Qe=Q.contextType;typeof Qe=="object"&&Qe!==null&&(he=ka(Qe)),he=new Q(K,he),M.memoizedState=he.state!==null&&he.state!==void 0?he.state:null,he.updater=fs,M.stateNode=he,he._reactInternals=M,(he=M.stateNode).props=K,he.state=M.memoizedState,he.refs={},Ct(M),Qe=Q.contextType,he.context=typeof Qe=="object"&&Qe!==null?ka(Qe):nA,he.state=M.memoizedState,typeof(Qe=Q.getDerivedStateFromProps)=="function"&&(_l(M,Q,Qe,K),he.state=M.memoizedState),typeof Q.getDerivedStateFromProps=="function"||typeof he.getSnapshotBeforeUpdate=="function"||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(Qe=he.state,typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount(),Qe!==he.state&&fs.enqueueReplaceState(he,he.state,null),ti(M,K,he,ne),$t(),he.state=M.memoizedState),typeof he.componentDidMount=="function"&&(M.flags|=4194308),K=!0}else if(E===null){he=M.stateNode;var tt=M.memoizedProps,dt=Hl(Q,tt);he.props=dt;var ni=he.context,vi=Q.contextType;Qe=nA,typeof vi=="object"&&vi!==null&&(Qe=ka(vi));var zi=Q.getDerivedStateFromProps;vi=typeof zi=="function"||typeof he.getSnapshotBeforeUpdate=="function",tt=M.pendingProps!==tt,vi||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(tt||ni!==Qe)&&Xh(M,he,K,Qe),dd=!1;var Di=M.memoizedState;he.state=Di,ti(M,K,he,ne),$t(),ni=M.memoizedState,tt||Di!==ni||dd?(typeof zi=="function"&&(_l(M,Q,zi,K),ni=M.memoizedState),(dt=dd||_p(M,Q,dt,K,Di,ni,Qe))?(vi||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount()),typeof he.componentDidMount=="function"&&(M.flags|=4194308)):(typeof he.componentDidMount=="function"&&(M.flags|=4194308),M.memoizedProps=K,M.memoizedState=ni),he.props=K,he.state=ni,he.context=Qe,K=dt):(typeof he.componentDidMount=="function"&&(M.flags|=4194308),K=!1)}else{he=M.stateNode,wt(E,M),vi=Hl(Q,Qe=M.memoizedProps),he.props=vi,zi=M.pendingProps,Di=he.context,ni=Q.contextType,dt=nA,typeof ni=="object"&&ni!==null&&(dt=ka(ni)),(ni=typeof(tt=Q.getDerivedStateFromProps)=="function"||typeof he.getSnapshotBeforeUpdate=="function")||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(Qe!==zi||Di!==dt)&&Xh(M,he,K,dt),dd=!1,Di=M.memoizedState,he.state=Di,ti(M,K,he,ne),$t();var Sn=M.memoizedState;Qe!==zi||Di!==Sn||dd||E!==null&&E.dependencies!==null&&Zm(E.dependencies)?(typeof tt=="function"&&(_l(M,Q,tt,K),Sn=M.memoizedState),(vi=dd||_p(M,Q,vi,K,Di,Sn,dt)||E!==null&&E.dependencies!==null&&Zm(E.dependencies))?(ni||typeof he.UNSAFE_componentWillUpdate!="function"&&typeof he.componentWillUpdate!="function"||(typeof he.componentWillUpdate=="function"&&he.componentWillUpdate(K,Sn,dt),typeof he.UNSAFE_componentWillUpdate=="function"&&he.UNSAFE_componentWillUpdate(K,Sn,dt)),typeof he.componentDidUpdate=="function"&&(M.flags|=4),typeof he.getSnapshotBeforeUpdate=="function"&&(M.flags|=1024)):(typeof he.componentDidUpdate!="function"||Qe===E.memoizedProps&&Di===E.memoizedState||(M.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Qe===E.memoizedProps&&Di===E.memoizedState||(M.flags|=1024),M.memoizedProps=K,M.memoizedState=Sn),he.props=K,he.state=Sn,he.context=dt,K=vi):(typeof he.componentDidUpdate!="function"||Qe===E.memoizedProps&&Di===E.memoizedState||(M.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Qe===E.memoizedProps&&Di===E.memoizedState||(M.flags|=1024),K=!1)}return he=K,Lo(E,M),K=!!(128&M.flags),he||K?(he=M.stateNode,Q=K&&typeof Q.getDerivedStateFromError!="function"?null:he.render(),M.flags|=1,E!==null&&K?(M.child=Du(M,E.child,null,ne),M.child=Du(M,null,Q,ne)):la(E,M,Q,ne),M.memoizedState=he.state,E=M.child):E=ed(E,M,ne),E}function Ns(E,M,Q,K){return yt(),M.flags|=256,la(E,M,Q,K),M.child}function bs(E){return{baseLanes:E,cachePool:ua()}}function Ng(E,M,Q){return E=E!==null?E.childLanes&~Q:0,M&&(E|=sl),E}function Hg(E,M,Q){var K,ne=M.pendingProps,he=!1,Qe=!!(128&M.flags);if((K=Qe)||(K=(E===null||E.memoizedState!==null)&&!!(2&Ao.current)),K&&(he=!0,M.flags&=-129),K=!!(32&M.flags),M.flags&=-33,E===null){if(Jr){if(he?Xn(M):cr(),Jr){var tt,dt=Cl;(tt=dt)&&((dt=Wf(dt,gh))!==null?(M.memoizedState={dehydrated:dt,treeContext:Op!==null?{id:rA,overflow:hd}:null,retryLane:536870912},(tt=i(18,null,null,0)).stateNode=dt,tt.return=M,M.child=tt,Jl=M,Cl=null,tt=!0):tt=!1),tt||Ie(M)}if((dt=M.memoizedState)!==null&&(dt=dt.dehydrated)!==null)return m_(dt)?M.lanes=16:M.lanes=536870912,null;gr(M)}return dt=ne.children,ne=ne.fallback,he?(cr(),dt=Is({mode:"hidden",children:dt},he=M.mode),ne=uh(ne,he,Q,null),dt.return=M,ne.return=M,dt.sibling=ne,M.child=dt,(he=M.child).memoizedState=bs(Q),he.childLanes=Ng(E,K,Q),M.memoizedState=R_,ne):(Xn(M),zg(M,dt))}if((tt=E.memoizedState)!==null&&(dt=tt.dehydrated)!==null){if(Qe)256&M.flags?(Xn(M),M.flags&=-257,M=Gg(E,M,Q)):M.memoizedState!==null?(cr(),M.child=E.child,M.flags|=128,M=null):(cr(),he=ne.fallback,dt=M.mode,ne=Is({mode:"visible",children:ne.children},dt),(he=uh(he,dt,Q,null)).flags|=2,ne.return=M,he.return=M,ne.sibling=he,M.child=ne,Du(M,E.child,null,Q),(ne=M.child).memoizedState=bs(Q),ne.childLanes=Ng(E,K,Q),M.memoizedState=R_,M=he);else if(Xn(M),m_(dt))K=_b(dt).digest,(ne=Error(s(419))).stack="",ne.digest=K,Nt({value:ne,source:null,stack:null}),M=Gg(E,M,Q);else if(ya||kf(E,M,Q,!1),K=!!(Q&E.childLanes),ya||K){if((K=cn)!==null){if(42&(ne=Q&-Q))ne=1;else switch(ne){case 2:ne=1;break;case 8:ne=4;break;case 32:ne=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:ne=64;break;case 268435456:ne=134217728;break;default:ne=0}if((ne=ne&(K.suspendedLanes|Q)?0:ne)!==0&&ne!==tt.retryLane)throw tt.retryLane=ne,Dt(E,ne),Ko(K,E,ne),fd}a0(dt)||Za(),M=Gg(E,M,Q)}else a0(dt)?(M.flags|=128,M.child=E.child,M=gn.bind(null,E),vb(dt,M),M=null):(E=tt.treeContext,Ho&&(Cl=bb(dt),Jl=M,Jr=!0,eu=null,gh=!1,E!==null&&(Yl[Mu++]=rA,Yl[Mu++]=hd,Yl[Mu++]=Op,rA=E.id,hd=E.overflow,Op=M)),(M=zg(M,ne.children)).flags|=4096);return M}return he?(cr(),he=ne.fallback,dt=M.mode,Qe=(tt=E.child).sibling,(ne=Qo(tt,{mode:"hidden",children:ne.children})).subtreeFlags=31457280&tt.subtreeFlags,Qe!==null?he=Qo(Qe,he):(he=uh(he,dt,Q,null)).flags|=2,he.return=M,ne.return=M,ne.sibling=he,M.child=ne,ne=he,he=M.child,(dt=E.child.memoizedState)===null?dt=bs(Q):((tt=dt.cachePool)!==null?(Qe=Jc?Mo._currentValue:Mo._currentValue2,tt=tt.parent!==Qe?{parent:Qe,pool:Qe}:tt):tt=ua(),dt={baseLanes:dt.baseLanes|Q,cachePool:tt}),he.memoizedState=dt,he.childLanes=Ng(E,K,Q),M.memoizedState=R_,ne):(Xn(M),E=(Q=E.child).sibling,(Q=Qo(Q,{mode:"visible",children:ne.children})).return=M,Q.sibling=null,E!==null&&((K=M.deletions)===null?(M.deletions=[E],M.flags|=16):K.push(E)),M.child=Q,M.memoizedState=null,Q)}function zg(E,M){return(M=Is({mode:"visible",children:M},E.mode)).return=E,E.child=M}function Is(E,M){return Ep(E,M,0,null)}function Gg(E,M,Q){return Du(M,E.child,null,Q),(E=zg(M,M.pendingProps.children)).flags|=2,M.memoizedState=null,E}function Jm(E,M,Q){E.lanes|=M;var K=E.alternate;K!==null&&(K.lanes|=M),sb(E.return,M,Q)}function vp(E,M,Q,K,ne){var he=E.memoizedState;he===null?E.memoizedState={isBackwards:M,rendering:null,renderingStartTime:0,last:K,tail:Q,tailMode:ne}:(he.isBackwards=M,he.rendering=null,he.renderingStartTime=0,he.last=K,he.tail=Q,he.tailMode=ne)}function jw(E,M,Q){var K=M.pendingProps,ne=K.revealOrder,he=K.tail;if(la(E,M,K.children,Q),2&(K=Ao.current))K=1&K|2,M.flags|=128;else{if(E!==null&&128&E.flags)e:for(E=M.child;E!==null;){if(E.tag===13)E.memoizedState!==null&&Jm(E,Q,M);else if(E.tag===19)Jm(E,Q,M);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===M)break e;for(;E.sibling===null;){if(E.return===null||E.return===M)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}K&=1}switch(H(Ao,K),ne){case"forwards":for(Q=M.child,ne=null;Q!==null;)(E=Q.alternate)!==null&&Xr(E)===null&&(ne=Q),Q=Q.sibling;(Q=ne)===null?(ne=M.child,M.child=null):(ne=Q.sibling,Q.sibling=null),vp(M,!1,ne,Q,he);break;case"backwards":for(Q=null,ne=M.child,M.child=null;ne!==null;){if((E=ne.alternate)!==null&&Xr(E)===null){M.child=ne;break}E=ne.sibling,ne.sibling=Q,Q=ne,ne=E}vp(M,!0,Q,null,he);break;case"together":vp(M,!1,null,null,void 0);break;default:M.memoizedState=null}return M.child}function ed(E,M,Q){if(E!==null&&(M.dependencies=E.dependencies),Tl|=M.lanes,!(Q&M.childLanes)&&(E===null||(kf(E,M,Q,!1),!(Q&M.childLanes))))return null;if(E!==null&&M.child!==E.child)throw Error(s(153));if(M.child!==null){for(Q=Qo(E=M.child,E.pendingProps),M.child=Q,Q.return=M;E.sibling!==null;)E=E.sibling,(Q=Q.sibling=Qo(E,E.pendingProps)).return=M;Q.sibling=null}return M.child}function rb(E,M){return!!(E.lanes&M)||!((E=E.dependencies)===null||!Zm(E))}function Kw(E,M,Q){if(E!==null)if(E.memoizedProps!==M.pendingProps)ya=!0;else{if(!(rb(E,Q)||128&M.flags))return ya=!1,function(tt,dt,ni){switch(dt.tag){case 3:ge(dt,dt.stateNode.containerInfo),yp(dt,Mo,tt.memoizedState.cache),yt();break;case 27:case 5:ke(dt);break;case 4:ge(dt,dt.stateNode.containerInfo);break;case 10:yp(dt,dt.type,dt.memoizedProps.value);break;case 13:var vi=dt.memoizedState;if(vi!==null)return vi.dehydrated!==null?(Xn(dt),dt.flags|=128,null):ni&dt.child.childLanes?Hg(tt,dt,ni):(Xn(dt),(tt=ed(tt,dt,ni))!==null?tt.sibling:null);Xn(dt);break;case 19:var zi=!!(128&tt.flags);if((vi=!!(ni&dt.childLanes))||(kf(tt,dt,ni,!1),vi=!!(ni&dt.childLanes)),zi){if(vi)return jw(tt,dt,ni);dt.flags|=128}if((zi=dt.memoizedState)!==null&&(zi.rendering=null,zi.tail=null,zi.lastEffect=null),H(Ao,Ao.current),vi)break;return null;case 22:case 23:return dt.lanes=0,rh(tt,dt,ni);case 24:yp(dt,Mo,tt.memoizedState.cache)}return ed(tt,dt,ni)}(E,M,Q);ya=!!(131072&E.flags)}else ya=!1,Jr&&1048576&M.flags&&_e(M,E_,M.index);switch(M.lanes=0,M.tag){case 16:e:{E=M.pendingProps;var K=M.elementType,ne=K._init;if(K=ne(K._payload),M.type=K,typeof K!="function"){if(K!=null){if((ne=K.$$typeof)===Oa){M.tag=11,M=Jh(null,M,K,E,Q);break e}if(ne===xc){M.tag=14,M=Zh(null,M,K,E,Q);break e}}throw M=u(K)||K,Error(s(306,M,""))}Hf(K)?(E=Hl(K,E),M.tag=1,M=fc(null,M,K,E,Q)):(M.tag=0,M=Bo(null,M,K,E,Q))}return M;case 0:return Bo(E,M,M.type,M.pendingProps,Q);case 1:return fc(E,M,K=M.type,ne=Hl(K,M.pendingProps),Q);case 3:e:{if(ge(M,M.stateNode.containerInfo),E===null)throw Error(s(387));var he=M.pendingProps;K=(ne=M.memoizedState).element,wt(E,M),ti(M,he,null,Q);var Qe=M.memoizedState;if(he=Qe.cache,yp(M,Mo,he),he!==ne.cache&&ob(M,[Mo],Q,!0),$t(),he=Qe.element,Ho&&ne.isDehydrated){if(ne={element:he,isDehydrated:!1,cache:Qe.cache},M.updateQueue.baseState=ne,M.memoizedState=ne,256&M.flags){M=Ns(E,M,he,Q);break e}if(he!==K){Nt(K=xe(Error(s(424)),M)),M=Ns(E,M,he,Q);break e}for(Ho&&(Cl=__(M.stateNode.containerInfo),Jl=M,Jr=!0,eu=null,gh=!0),Q=Bb(M,null,he,Q),M.child=Q;Q;)Q.flags=-3&Q.flags|4096,Q=Q.sibling}else{if(yt(),he===K){M=ed(E,M,Q);break e}la(E,M,he,Q)}M=M.child}return M;case 26:if(Ah)return Lo(E,M),E===null?(Q=xb(M.type,null,M.pendingProps,null))?M.memoizedState=Q:Jr||(M.stateNode=Ax(M.type,M.pendingProps,KA.current,M)):M.memoizedState=xb(M.type,E.memoizedProps,M.pendingProps,E.memoizedState),null;case 27:if(xl)return ke(M),E===null&&xl&&Jr&&(K=M.stateNode=x_(M.type,M.pendingProps,KA.current,Kr.current,!1),Jl=M,gh=!0,Cl=Fp(K)),K=M.pendingProps.children,E!==null||Jr?la(E,M,K,Q):M.child=Du(M,null,K,Q),Lo(E,M),M.child;case 5:return E===null&&Jr&&(lx(M.type,M.pendingProps,Kr.current),(ne=K=Cl)&&((K=v_(K,M.type,M.pendingProps,gh))!==null?(M.stateNode=K,Jl=M,Cl=Fp(K),gh=!1,ne=!0):ne=!1),ne||Ie(M)),ke(M),ne=M.type,he=M.pendingProps,Qe=E!==null?E.memoizedProps:null,K=he.children,dh(ne,he)?K=null:Qe!==null&&dh(ne,Qe)&&(M.flags|=32),M.memoizedState!==null&&(ne=Ka(E,M,Ql,null,null,Q),Jc?Mn._currentValue=ne:Mn._currentValue2=ne),Lo(E,M),la(E,M,K,Q),M.child;case 6:return E===null&&Jr&&(cx(M.pendingProps,Kr.current),(E=Q=Cl)&&((Q=rm(Q,M.pendingProps,gh))!==null?(M.stateNode=Q,Jl=M,Cl=null,E=!0):E=!1),E||Ie(M)),null;case 13:return Hg(E,M,Q);case 4:return ge(M,M.stateNode.containerInfo),K=M.pendingProps,E===null?M.child=Du(M,null,K,Q):la(E,M,K,Q),M.child;case 11:return Jh(E,M,M.type,M.pendingProps,Q);case 7:return la(E,M,M.pendingProps,Q),M.child;case 8:case 12:return la(E,M,M.pendingProps.children,Q),M.child;case 10:return K=M.pendingProps,yp(M,M.type,K.value),la(E,M,K.children,Q),M.child;case 9:return ne=M.type._context,K=M.pendingProps.children,sh(M),K=K(ne=ka(ne)),M.flags|=1,la(E,M,K,Q),M.child;case 14:return Zh(E,M,M.type,M.pendingProps,Q);case 15:return Gc(E,M,M.type,M.pendingProps,Q);case 19:return jw(E,M,Q);case 22:return rh(E,M,Q);case 24:return sh(M),K=ka(Mo),E===null?((ne=oh())===null&&(ne=cn,he=jv(),ne.pooledCache=he,he.refCount++,he!==null&&(ne.pooledCacheLanes|=Q),ne=he),M.memoizedState={parent:K,cache:ne},Ct(M),yp(M,Mo,ne)):(E.lanes&Q&&(wt(E,M),ti(M,null,null,Q),$t()),ne=E.memoizedState,he=M.memoizedState,ne.parent!==K?(ne={parent:K,cache:K},M.memoizedState=ne,M.lanes===0&&(M.memoizedState=M.updateQueue.baseState=ne),yp(M,Mo,K)):(K=he.cache,yp(M,Mo,K),K!==ne.cache&&ob(M,[Mo],Q,!0))),la(E,M,M.pendingProps.children,Q),M.child;case 29:throw M.pendingProps}throw Error(s(156,M.tag))}function yp(E,M,Q){Jc?(H(g0,M._currentValue),M._currentValue=Q):(H(g0,M._currentValue2),M._currentValue2=Q)}function Wd(E){var M=g0.current;Jc?E._currentValue=M:E._currentValue2=M,P(g0)}function sb(E,M,Q){for(;E!==null;){var K=E.alternate;if((E.childLanes&M)!==M?(E.childLanes|=M,K!==null&&(K.childLanes|=M)):K!==null&&(K.childLanes&M)!==M&&(K.childLanes|=M),E===Q)break;E=E.return}}function ob(E,M,Q,K){var ne=E.child;for(ne!==null&&(ne.return=E);ne!==null;){var he=ne.dependencies;if(he!==null){var Qe=ne.child;he=he.firstContext;e:for(;he!==null;){var tt=he;he=ne;for(var dt=0;dt<M.length;dt++)if(tt.context===M[dt]){he.lanes|=Q,(tt=he.alternate)!==null&&(tt.lanes|=Q),sb(he.return,Q,E),K||(Qe=null);break e}he=tt.next}}else if(ne.tag===18){if((Qe=ne.return)===null)throw Error(s(341));Qe.lanes|=Q,(he=Qe.alternate)!==null&&(he.lanes|=Q),sb(Qe,Q,E),Qe=null}else Qe=ne.child;if(Qe!==null)Qe.return=ne;else for(Qe=ne;Qe!==null;){if(Qe===E){Qe=null;break}if((ne=Qe.sibling)!==null){ne.return=Qe.return,Qe=ne;break}Qe=Qe.return}ne=Qe}}function kf(E,M,Q,K){E=null;for(var ne=M,he=!1;ne!==null;){if(!he){if(524288&ne.flags)he=!0;else if(262144&ne.flags)break}if(ne.tag===10){var Qe=ne.alternate;if(Qe===null)throw Error(s(387));if((Qe=Qe.memoizedProps)!==null){var tt=ne.type;Xl(ne.pendingProps.value,Qe.value)||(E!==null?E.push(tt):E=[tt])}}else if(ne===S_.current){if((Qe=ne.alternate)===null)throw Error(s(387));Qe.memoizedState.memoizedState!==ne.memoizedState.memoizedState&&(E!==null?E.push(Mn):E=[Mn])}ne=ne.return}E!==null&&ob(M,E,Q,K),M.flags|=262144}function Zm(E){for(E=E.firstContext;E!==null;){var M=E.context;if(!Xl(Jc?M._currentValue:M._currentValue2,E.memoizedValue))return!0;E=E.next}return!1}function sh(E){lA=E,po=null,(E=E.dependencies)!==null&&(E.firstContext=null)}function ka(E){return yl(lA,E)}function qc(E,M){return lA===null&&sh(E),yl(E,M)}function yl(E,M){var Q=Jc?M._currentValue:M._currentValue2;if(M={context:M,memoizedValue:Q,next:null},po===null){if(E===null)throw Error(s(308));po=M,E.dependencies={lanes:0,firstContext:M},E.flags|=524288}else po=po.next=M;return Q}function jv(){return{controller:new Uu,data:new Map,refCount:0}}function td(E){E.refCount--,E.refCount===0&&Ib(Ic,function(){E.controller.abort()})}function oh(){var E=Zl.current;return E!==null?E:cn.pooledCache}function $c(E,M){H(Zl,M===null?Zl.current:M.pool)}function ua(){var E=oh();return E===null?null:{parent:Jc?Mo._currentValue:Mo._currentValue2,pool:E}}function zl(E){E.flags|=4}function Lf(E,M){if(E!==null&&E.child===M.child)return!1;if(16&M.flags)return!0;for(E=M.child;E!==null;){if(13878&E.flags||13878&E.subtreeFlags)return!0;E=E.sibling}return!1}function Wc(E,M,Q,K){if(tl)for(Q=M.child;Q!==null;){if(Q.tag===5||Q.tag===6)iA(E,Q.stateNode);else if(!(Q.tag===4||xl&&Q.tag===27)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===M)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===M)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}else if(zs)for(var ne=M.child;ne!==null;){if(ne.tag===5){var he=ne.stateNode;Q&&K&&(he=mb(he,ne.type,ne.memoizedProps)),iA(E,he)}else if(ne.tag===6)he=ne.stateNode,Q&&K&&(he=o0(he,ne.memoizedProps)),iA(E,he);else if(ne.tag!==4){if(ne.tag===22&&ne.memoizedState!==null)(he=ne.child)!==null&&(he.return=ne),Wc(E,ne,!0,!0);else if(ne.child!==null){ne.child.return=ne,ne=ne.child;continue}}if(ne===M)break;for(;ne.sibling===null;){if(ne.return===null||ne.return===M)return;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}}function ds(E,M,Q,K){if(zs)for(var ne=M.child;ne!==null;){if(ne.tag===5){var he=ne.stateNode;Q&&K&&(he=mb(he,ne.type,ne.memoizedProps)),tx(E,he)}else if(ne.tag===6)he=ne.stateNode,Q&&K&&(he=o0(he,ne.memoizedProps)),tx(E,he);else if(ne.tag!==4){if(ne.tag===22&&ne.memoizedState!==null)(he=ne.child)!==null&&(he.return=ne),ds(E,ne,!(ne.memoizedProps!==null&&ne.memoizedProps.mode==="manual"),!0);else if(ne.child!==null){ne.child.return=ne,ne=ne.child;continue}}if(ne===M)break;for(;ne.sibling===null;){if(ne.return===null||ne.return===M)return;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}}function jd(E,M){if(zs&&Lf(E,M)){var Q=(E=M.stateNode).containerInfo,K=fb();ds(K,M,!1,!1),E.pendingChildren=K,zl(M),ix(Q,K)}}function Cn(E,M,Q,K){if(tl)E.memoizedProps!==K&&zl(M);else if(zs){var ne=E.stateNode,he=E.memoizedProps;if((E=Lf(E,M))||he!==K){var Qe=Kr.current;(he=s0(ne,Q,he,K,!E,null))===ne?M.stateNode=ne:(To(he,Q,K,Qe)&&zl(M),M.stateNode=he,E?Wc(he,M,!1,!1):zl(M))}else M.stateNode=ne}}function On(E,M,Q){if(Gs(M,Q)){if(E.flags|=16777216,!Mp(M,Q)){if(!wc())throw _h=Zf,mh;E.flags|=8192}}else E.flags&=-16777217}function Kv(E,M){if(Eb(M)){if(E.flags|=16777216,!w_(M)){if(!wc())throw _h=Zf,mh;E.flags|=8192}}else E.flags&=-16777217}function Vg(E,M){M!==null&&(E.flags|=4),16384&E.flags&&(M=E.tag!==22?ie():536870912,E.lanes|=M,hA|=M)}function Kd(E,M){if(!Jr)switch(E.tailMode){case"hidden":M=E.tail;for(var Q=null;M!==null;)M.alternate!==null&&(Q=M),M=M.sibling;Q===null?E.tail=null:Q.sibling=null;break;case"collapsed":Q=E.tail;for(var K=null;Q!==null;)Q.alternate!==null&&(K=Q),Q=Q.sibling;K===null?M||E.tail===null?E.tail=null:E.tail.sibling=null:K.sibling=null}}function Hs(E){var M=E.alternate!==null&&E.alternate.child===E.child,Q=0,K=0;if(M)for(var ne=E.child;ne!==null;)Q|=ne.lanes|ne.childLanes,K|=31457280&ne.subtreeFlags,K|=31457280&ne.flags,ne.return=E,ne=ne.sibling;else for(ne=E.child;ne!==null;)Q|=ne.lanes|ne.childLanes,K|=ne.subtreeFlags,K|=ne.flags,ne.return=E,ne=ne.sibling;return E.subtreeFlags|=K,E.childLanes=Q,M}function qg(E,M,Q){var K=M.pendingProps;switch(Oe(M),M.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Hs(M),null;case 3:return Q=M.stateNode,K=null,E!==null&&(K=E.memoizedState.cache),M.memoizedState.cache!==K&&(M.flags|=2048),Wd(Mo),Ee(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),E!==null&&E.child!==null||(lt(M)?zl(M):E===null||E.memoizedState.isDehydrated&&!(256&M.flags)||(M.flags|=1024,eu!==null&&(ch(eu),eu=null))),jd(E,M),Hs(M),null;case 26:if(Ah){Q=M.type;var ne=M.memoizedState;return E===null?(zl(M),ne!==null?(Hs(M),Kv(M,ne)):(Hs(M),On(M,Q,K))):ne?ne!==E.memoizedState?(zl(M),Hs(M),Kv(M,ne)):(Hs(M),M.flags&=-16777217):(tl?E.memoizedProps!==K&&zl(M):Cn(E,M,Q,K),Hs(M),On(M,Q,K)),null}case 27:if(xl){if(je(M),Q=KA.current,ne=M.type,E!==null&&M.stateNode!=null)tl?E.memoizedProps!==K&&zl(M):Cn(E,M,ne,K);else{if(!K){if(M.stateNode===null)throw Error(s(166));return Hs(M),null}E=Kr.current,lt(M)?ze(M,E):(E=x_(ne,K,Q,E,!0),M.stateNode=E,zl(M))}return Hs(M),null}case 5:if(je(M),Q=M.type,E!==null&&M.stateNode!=null)Cn(E,M,Q,K);else{if(!K){if(M.stateNode===null)throw Error(s(166));return Hs(M),null}E=Kr.current,lt(M)?ze(M,E):(Wc(ne=ad(Q,K,KA.current,E,M),M,!1,!1),M.stateNode=ne,To(ne,Q,K,E)&&zl(M))}return Hs(M),On(M,M.type,M.pendingProps),null;case 6:if(E&&M.stateNode!=null)Q=E.memoizedProps,tl?Q!==K&&zl(M):zs&&(Q!==K?(M.stateNode=tm(K,KA.current,Kr.current,M),zl(M)):M.stateNode=E.stateNode);else{if(typeof K!="string"&&M.stateNode===null)throw Error(s(166));if(E=KA.current,Q=Kr.current,lt(M)){if(!Ho)throw Error(s(176));if(E=M.stateNode,Q=M.memoizedProps,K=null,(ne=Jl)!==null)switch(ne.tag){case 27:case 5:K=ne.memoizedProps}_a(E,Q,M,K)||Ie(M)}else M.stateNode=tm(K,E,Q,M)}return Hs(M),null;case 13:if(K=M.memoizedState,E===null||E.memoizedState!==null&&E.memoizedState.dehydrated!==null){if(ne=lt(M),K!==null&&K.dehydrated!==null){if(E===null){if(!ne)throw Error(s(318));if(!Ho)throw Error(s(344));if(!(ne=(ne=M.memoizedState)!==null?ne.dehydrated:null))throw Error(s(317));y_(ne,M)}else yt(),!(128&M.flags)&&(M.memoizedState=null),M.flags|=4;Hs(M),ne=!1}else eu!==null&&(ch(eu),eu=null),ne=!0;if(!ne)return 256&M.flags?(gr(M),M):(gr(M),null)}if(gr(M),128&M.flags)return M.lanes=Q,M;if(Q=K!==null,E=E!==null&&E.memoizedState!==null,Q){ne=null,(K=M.child).alternate!==null&&K.alternate.memoizedState!==null&&K.alternate.memoizedState.cachePool!==null&&(ne=K.alternate.memoizedState.cachePool.pool);var he=null;K.memoizedState!==null&&K.memoizedState.cachePool!==null&&(he=K.memoizedState.cachePool.pool),he!==ne&&(K.flags|=2048)}return Q!==E&&Q&&(M.child.flags|=8192),Vg(M,M.updateQueue),Hs(M),null;case 4:return Ee(),jd(E,M),E===null&&lb(M.stateNode.containerInfo),Hs(M),null;case 10:return Wd(M.type),Hs(M),null;case 19:if(P(Ao),(ne=M.memoizedState)===null)return Hs(M),null;if(K=!!(128&M.flags),(he=ne.rendering)===null)if(K)Kd(ne,!1);else{if(ms!==0||E!==null&&128&E.flags)for(E=M.child;E!==null;){if((he=Xr(E))!==null){for(M.flags|=128,Kd(ne,!1),E=he.updateQueue,M.updateQueue=E,Vg(M,E),M.subtreeFlags=0,E=Q,Q=M.child;Q!==null;)Cp(Q,E),Q=Q.sibling;return H(Ao,1&Ao.current|2),M.child}E=E.sibling}ne.tail!==null&&nl()>dA&&(M.flags|=128,K=!0,Kd(ne,!1),M.lanes=4194304)}else{if(!K)if((E=Xr(he))!==null){if(M.flags|=128,K=!0,E=E.updateQueue,M.updateQueue=E,Vg(M,E),Kd(ne,!0),ne.tail===null&&ne.tailMode==="hidden"&&!he.alternate&&!Jr)return Hs(M),null}else 2*nl()-ne.renderingStartTime>dA&&Q!==536870912&&(M.flags|=128,K=!0,Kd(ne,!1),M.lanes=4194304);ne.isBackwards?(he.sibling=M.child,M.child=he):((E=ne.last)!==null?E.sibling=he:M.child=he,ne.last=he)}return ne.tail!==null?(M=ne.tail,ne.rendering=M,ne.tail=M.sibling,ne.renderingStartTime=nl(),M.sibling=null,E=Ao.current,H(Ao,K?1&E|2:1&E),M):(Hs(M),null);case 22:case 23:return gr(M),vn(),K=M.memoizedState!==null,E!==null?E.memoizedState!==null!==K&&(M.flags|=8192):K&&(M.flags|=8192),K?536870912&Q&&!(128&M.flags)&&(Hs(M),6&M.subtreeFlags&&(M.flags|=8192)):Hs(M),(Q=M.updateQueue)!==null&&Vg(M,Q.retryQueue),Q=null,E!==null&&E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(Q=E.memoizedState.cachePool.pool),K=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(K=M.memoizedState.cachePool.pool),K!==Q&&(M.flags|=2048),E!==null&&P(Zl),null;case 24:return Q=null,E!==null&&(Q=E.memoizedState.cache),M.memoizedState.cache!==Q&&(M.flags|=2048),Wd(Mo),Hs(M),null;case 25:return null}throw Error(s(156,M.tag))}function Xv(E,M){switch(Oe(M),M.tag){case 1:return 65536&(E=M.flags)?(M.flags=-65537&E|128,M):null;case 3:return Wd(Mo),Ee(),65536&(E=M.flags)&&!(128&E)?(M.flags=-65537&E|128,M):null;case 26:case 27:case 5:return je(M),null;case 13:if(gr(M),(E=M.memoizedState)!==null&&E.dehydrated!==null){if(M.alternate===null)throw Error(s(340));yt()}return 65536&(E=M.flags)?(M.flags=-65537&E|128,M):null;case 19:return P(Ao),null;case 4:return Ee(),null;case 10:return Wd(M.type),null;case 22:case 23:return gr(M),vn(),E!==null&&P(Zl),65536&(E=M.flags)?(M.flags=-65537&E|128,M):null;case 24:return Wd(Mo),null;default:return null}}function $g(E,M){switch(Oe(M),M.tag){case 3:Wd(Mo),Ee();break;case 26:case 27:case 5:je(M);break;case 4:Ee();break;case 13:gr(M);break;case 19:P(Ao);break;case 10:Wd(M.type);break;case 22:case 23:gr(M),vn(),E!==null&&P(Zl);break;case 24:Wd(Mo)}}function Pf(E,M){try{var Q=M.updateQueue,K=Q!==null?Q.lastEffect:null;if(K!==null){var ne=K.next;Q=ne;do{if((Q.tag&E)===E){K=void 0;var he=Q.create,Qe=Q.inst;K=he(),Qe.destroy=K}Q=Q.next}while(Q!==ne)}}catch(tt){rs(M,M.return,tt)}}function wu(E,M,Q){try{var K=M.updateQueue,ne=K!==null?K.lastEffect:null;if(ne!==null){var he=ne.next;K=he;do{if((K.tag&E)===E){var Qe=K.inst,tt=Qe.destroy;if(tt!==void 0){Qe.destroy=void 0,ne=M;var dt=Q;try{tt()}catch(ni){rs(ne,dt,ni)}}}K=K.next}while(K!==he)}}catch(ni){rs(M,M.return,ni)}}function Yv(E){var M=E.updateQueue;if(M!==null){var Q=E.stateNode;try{mi(M,Q)}catch(K){rs(E,E.return,K)}}}function Qr(E,M,Q){Q.props=Hl(E.type,E.memoizedProps),Q.state=E.memoizedState;try{Q.componentWillUnmount()}catch(K){rs(E,M,K)}}function xu(E,M){try{var Q=E.ref;if(Q!==null){var K=E.stateNode;switch(E.tag){case 26:case 27:case 5:var ne=qA(K);break;default:ne=K}typeof Q=="function"?E.refCleanup=Q(ne):Q.current=ne}}catch(he){rs(E,M,he)}}function Gl(E,M){var Q=E.ref,K=E.refCleanup;if(Q!==null)if(typeof K=="function")try{K()}catch(ne){rs(E,M,ne)}finally{E.refCleanup=null,(E=E.alternate)!=null&&(E.refCleanup=null)}else if(typeof Q=="function")try{Q(null)}catch(ne){rs(E,M,ne)}else Q.current=null}function bp(E){var M=E.type,Q=E.memoizedProps,K=E.stateNode;try{A_(K,M,Q,E)}catch(ne){rs(E,E.return,ne)}}function Xw(E,M,Q){try{p_(E.stateNode,E.type,Q,M,E)}catch(K){rs(E,E.return,K)}}function Yw(E){return E.tag===5||E.tag===3||!!Ah&&E.tag===26||!!xl&&E.tag===27||E.tag===4}function e_(E){e:for(;;){for(;E.sibling===null;){if(E.return===null||Yw(E.return))return null;E=E.return}for(E.sibling.return=E.return,E=E.sibling;E.tag!==5&&E.tag!==6&&(!xl||E.tag!==27)&&E.tag!==18;){if(2&E.flags||E.child===null||E.tag===4)continue e;E.child.return=E,E=E.child}if(!(2&E.flags))return E.stateNode}}function t_(E,M,Q){var K=E.tag;if(K===5||K===6)E=E.stateNode,M?nm(Q,E,M):r0(Q,E);else if(!(K===4||xl&&K===27)&&(E=E.child)!==null)for(t_(E,M,Q),E=E.sibling;E!==null;)t_(E,M,Q),E=E.sibling}function Jv(E,M,Q){var K=E.tag;if(K===5||K===6)E=E.stateNode,M?cd(Q,E,M):io(Q,E);else if(!(K===4||xl&&K===27)&&(E=E.child)!==null)for(Jv(E,M,Q),E=E.sibling;E!==null;)Jv(E,M,Q),E=E.sibling}function Sr(E,M,Q){E=E.containerInfo;try{gb(E,Q)}catch(K){rs(M,M.return,K)}}function Fr(E,M,Q){var K=Q.flags;switch(Q.tag){case 0:case 11:case 15:La(E,Q),4&K&&Pf(5,Q);break;case 1:if(La(E,Q),4&K)if(E=Q.stateNode,M===null)try{E.componentDidMount()}catch(tt){rs(Q,Q.return,tt)}else{var ne=Hl(Q.type,M.memoizedProps);M=M.memoizedState;try{E.componentDidUpdate(ne,M,E.__reactInternalSnapshotBeforeUpdate)}catch(tt){rs(Q,Q.return,tt)}}64&K&&Yv(Q),512&K&&xu(Q,Q.return);break;case 3:if(La(E,Q),64&K&&(K=Q.updateQueue)!==null){if(E=null,Q.child!==null)switch(Q.child.tag){case 27:case 5:E=qA(Q.child.stateNode);break;case 1:E=Q.child.stateNode}try{mi(K,E)}catch(tt){rs(Q,Q.return,tt)}}break;case 26:if(Ah){La(E,Q),512&K&&xu(Q,Q.return);break}case 27:case 5:La(E,Q),M===null&&4&K&&bp(Q),512&K&&xu(Q,Q.return);break;case 12:La(E,Q);break;case 13:La(E,Q),4&K&&Zv(E,Q);break;case 22:if(!(ne=Q.memoizedState!==null||Bl)){M=M!==null&&M.memoizedState!==null||fo;var he=Bl,Qe=fo;Bl=ne,(fo=M)&&!Qe?ql(E,Q,!!(8772&Q.subtreeFlags)):La(E,Q),Bl=he,fo=Qe}512&K&&(Q.memoizedProps.mode==="manual"?xu(Q,Q.return):Gl(Q,Q.return));break;default:La(E,Q)}}function ab(E){var M=E.alternate;M!==null&&(E.alternate=null,ab(M)),E.child=null,E.deletions=null,E.sibling=null,E.tag===5&&(M=E.stateNode)!==null&&jr(M),E.stateNode=null,E.return=null,E.dependencies=null,E.memoizedProps=null,E.memoizedState=null,E.pendingProps=null,E.stateNode=null,E.updateQueue=null}function Io(E,M,Q){for(Q=Q.child;Q!==null;)i_(E,M,Q),Q=Q.sibling}function i_(E,M,Q){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(Xf,Q)}catch{}switch(Q.tag){case 26:if(Ah){fo||Gl(Q,M),Io(E,M,Q),Q.memoizedState?Cb(Q.memoizedState):Q.stateNode&&dx(Q.stateNode);break}case 27:if(xl){fo||Gl(Q,M);var K=no,ne=Il;no=Q.stateNode,Io(E,M,Q),qS(Q.stateNode),no=K,Il=ne;break}case 5:fo||Gl(Q,M);case 6:if(tl){if(K=no,ne=Il,no=null,Io(E,M,Q),Il=ne,(no=K)!==null)if(Il)try{WA(no,Q.stateNode)}catch(he){rs(Q,M,he)}else try{f_(no,Q.stateNode)}catch(he){rs(Q,M,he)}}else Io(E,M,Q);break;case 18:tl&&no!==null&&(Il?ax(no,Q.stateNode):ox(no,Q.stateNode));break;case 4:tl?(K=no,ne=Il,no=Q.stateNode.containerInfo,Il=!0,Io(E,M,Q),no=K,Il=ne):(zs&&Sr(Q.stateNode,Q,fb()),Io(E,M,Q));break;case 0:case 11:case 14:case 15:fo||wu(2,Q,M),fo||wu(4,Q,M),Io(E,M,Q);break;case 1:fo||(Gl(Q,M),typeof(K=Q.stateNode).componentWillUnmount=="function"&&Qr(Q,M,K)),Io(E,M,Q);break;case 21:Io(E,M,Q);break;case 22:fo||Gl(Q,M),fo=(K=fo)||Q.memoizedState!==null,Io(E,M,Q),fo=K;break;default:Io(E,M,Q)}}function Zv(E,M){if(Ho&&M.memoizedState===null&&(E=M.alternate)!==null&&(E=E.memoizedState)!==null&&(E=E.dehydrated)!==null)try{wb(E)}catch(Q){rs(M,M.return,Q)}}function ha(E,M){var Q=function(K){switch(K.tag){case 13:case 19:var ne=K.stateNode;return ne===null&&(ne=K.stateNode=new ku),ne;case 22:return(ne=(K=K.stateNode)._retryCache)===null&&(ne=K._retryCache=new ku),ne;default:throw Error(s(435,K.tag))}}(E);M.forEach(function(K){var ne=wl.bind(null,E,K);Q.has(K)||(Q.add(K),K.then(ne,ne))})}function Ke(E,M){var Q=M.deletions;if(Q!==null)for(var K=0;K<Q.length;K++){var ne=Q[K],he=E,Qe=M;if(tl){var tt=Qe;e:for(;tt!==null;){switch(tt.tag){case 27:case 5:no=tt.stateNode,Il=!1;break e;case 3:case 4:no=tt.stateNode.containerInfo,Il=!0;break e}tt=tt.return}if(no===null)throw Error(s(160));i_(he,Qe,ne),no=null,Il=!1}else i_(he,Qe,ne);(he=ne.alternate)!==null&&(he.return=null),ne.return=null}if(13878&M.subtreeFlags)for(M=M.child;M!==null;)OA(M,E),M=M.sibling}function OA(E,M){var Q=E.alternate,K=E.flags;switch(E.tag){case 0:case 11:case 14:case 15:Ke(M,E),Vl(E),4&K&&(wu(3,E,E.return),Pf(3,E),wu(5,E,E.return));break;case 1:Ke(M,E),Vl(E),512&K&&(fo||Q===null||Gl(Q,Q.return)),64&K&&Bl&&(E=E.updateQueue)!==null&&(K=E.callbacks)!==null&&(Q=E.shared.hiddenCallbacks,E.shared.hiddenCallbacks=Q===null?K:Q.concat(K));break;case 26:if(Ah){var ne=ec;Ke(M,E),Vl(E),512&K&&(fo||Q===null||Gl(Q,Q.return)),4&K&&(K=Q!==null?Q.memoizedState:null,M=E.memoizedState,Q===null?M===null?E.stateNode===null?E.stateNode=ux(ne,E.type,E.memoizedProps,E):hx(ne,E.type,E.stateNode):E.stateNode=d0(ne,M,E.memoizedProps):K!==M?(K===null?Q.stateNode!==null&&dx(Q.stateNode):Cb(K),M===null?hx(ne,E.type,E.stateNode):d0(ne,M,E.memoizedProps)):M===null&&E.stateNode!==null&&Xw(E,E.memoizedProps,Q.memoizedProps));break}case 27:if(xl&&4&K&&E.alternate===null){ne=E.stateNode;var he=E.memoizedProps;try{fx(ne),gx(E.type,he,ne,E)}catch(vi){rs(E,E.return,vi)}}case 5:if(Ke(M,E),Vl(E),512&K&&(fo||Q===null||Gl(Q,Q.return)),tl){if(32&E.flags){M=E.stateNode;try{Dp(M)}catch(vi){rs(E,E.return,vi)}}4&K&&E.stateNode!=null&&Xw(E,M=E.memoizedProps,Q!==null?Q.memoizedProps:M),1024&K&&(eg=!0)}break;case 6:if(Ke(M,E),Vl(E),4&K&&tl){if(E.stateNode===null)throw Error(s(162));K=E.memoizedProps,Q=Q!==null?Q.memoizedProps:K,M=E.stateNode;try{$f(M,Q,K)}catch(vi){rs(E,E.return,vi)}}break;case 3:if(Ah?(b_(),ne=ec,ec=h0(M.containerInfo),Ke(M,E),ec=ne):Ke(M,E),Vl(E),4&K){if(tl&&Ho&&Q!==null&&Q.memoizedState.isDehydrated)try{sx(M.containerInfo)}catch(vi){rs(E,E.return,vi)}if(zs){K=M.containerInfo,Q=M.pendingChildren;try{gb(K,Q)}catch(vi){rs(E,E.return,vi)}}}eg&&(eg=!1,da(E));break;case 4:Ah?(Q=ec,ec=h0(E.stateNode.containerInfo),Ke(M,E),Vl(E),ec=Q):(Ke(M,E),Vl(E)),4&K&&zs&&Sr(E.stateNode,E,E.stateNode.pendingChildren);break;case 12:Ke(M,E),Vl(E);break;case 13:Ke(M,E),Vl(E),8192&E.child.flags&&E.memoizedState!==null!=(Q!==null&&Q.memoizedState!==null)&&(jp=nl()),4&K&&(K=E.updateQueue)!==null&&(E.updateQueue=null,ha(E,K));break;case 22:512&K&&(fo||Q===null||Gl(Q,Q.return)),ne=E.memoizedState!==null;var Qe=Q!==null&&Q.memoizedState!==null,tt=Bl,dt=fo;if(Bl=tt||ne,fo=dt||Qe,Ke(M,E),fo=dt,Bl=tt,Vl(E),(M=E.stateNode)._current=E,M._visibility&=-3,M._visibility|=2&M._pendingVisibility,8192&K&&(M._visibility=ne?-2&M._visibility:1|M._visibility,ne&&(M=Bl||fo,Q===null||Qe||M||bl(E)),tl&&(E.memoizedProps===null||E.memoizedProps.mode!=="manual"))){e:if(Q=null,tl)for(M=E;;){if(M.tag===5||Ah&&M.tag===26||xl&&M.tag===27){if(Q===null){Qe=Q=M;try{he=Qe.stateNode,ne?hb(he):Ab(Qe.stateNode,Qe.memoizedProps)}catch(vi){rs(Qe,Qe.return,vi)}}}else if(M.tag===6){if(Q===null){Qe=M;try{var ni=Qe.stateNode;ne?db(ni):g_(ni,Qe.memoizedProps)}catch(vi){rs(Qe,Qe.return,vi)}}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===E)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===E)break e;for(;M.sibling===null;){if(M.return===null||M.return===E)break e;Q===M&&(Q=null),M=M.return}Q===M&&(Q=null),M.sibling.return=M.return,M=M.sibling}}4&K&&(K=E.updateQueue)!==null&&(Q=K.retryQueue)!==null&&(K.retryQueue=null,ha(E,Q));break;case 19:Ke(M,E),Vl(E),4&K&&(K=E.updateQueue)!==null&&(E.updateQueue=null,ha(E,K));break;case 21:break;default:Ke(M,E),Vl(E)}}function Vl(E){var M=E.flags;if(2&M){try{if(tl&&(!xl||E.tag!==27)){e:{for(var Q=E.return;Q!==null;){if(Yw(Q)){var K=Q;break e}Q=Q.return}throw Error(s(160))}switch(K.tag){case 27:if(xl){var ne=K.stateNode;Jv(E,e_(E),ne);break}case 5:var he=K.stateNode;32&K.flags&&(Dp(he),K.flags&=-33),Jv(E,e_(E),he);break;case 3:case 4:var Qe=K.stateNode.containerInfo;t_(E,e_(E),Qe);break;default:throw Error(s(161))}}}catch(tt){rs(E,E.return,tt)}E.flags&=-3}4096&M&&(E.flags&=-4097)}function da(E){if(1024&E.subtreeFlags)for(E=E.child;E!==null;){var M=E;da(M),M.tag===5&&1024&M.flags&&Yi(M.stateNode),E=E.sibling}}function La(E,M){if(8772&M.subtreeFlags)for(M=M.child;M!==null;)Fr(E,M.alternate,M),M=M.sibling}function bl(E){for(E=E.child;E!==null;){var M=E;switch(M.tag){case 0:case 11:case 14:case 15:wu(4,M,M.return),bl(M);break;case 1:Gl(M,M.return);var Q=M.stateNode;typeof Q.componentWillUnmount=="function"&&Qr(M,M.return,Q),bl(M);break;case 26:case 27:case 5:Gl(M,M.return),bl(M);break;case 22:Gl(M,M.return),M.memoizedState===null&&bl(M);break;default:bl(M)}E=E.sibling}}function ql(E,M,Q){for(Q=Q&&!!(8772&M.subtreeFlags),M=M.child;M!==null;){var K=M.alternate,ne=E,he=M,Qe=he.flags;switch(he.tag){case 0:case 11:case 15:ql(ne,he,Q),Pf(4,he);break;case 1:if(ql(ne,he,Q),typeof(ne=(K=he).stateNode).componentDidMount=="function")try{ne.componentDidMount()}catch(ni){rs(K,K.return,ni)}if((ne=(K=he).updateQueue)!==null){var tt=K.stateNode;try{var dt=ne.shared.hiddenCallbacks;if(dt!==null)for(ne.shared.hiddenCallbacks=null,ne=0;ne<dt.length;ne++)gi(dt[ne],tt)}catch(ni){rs(K,K.return,ni)}}Q&&64&Qe&&Yv(he),xu(he,he.return);break;case 26:case 27:case 5:ql(ne,he,Q),Q&&K===null&&4&Qe&&bp(he),xu(he,he.return);break;case 12:default:ql(ne,he,Q);break;case 13:ql(ne,he,Q),Q&&4&Qe&&Zv(ne,he);break;case 22:he.memoizedState===null&&ql(ne,he,Q),xu(he,he.return)}M=M.sibling}}function Cu(E,M){var Q=null;E!==null&&E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(Q=E.memoizedState.cachePool.pool),E=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(E=M.memoizedState.cachePool.pool),E!==Q&&(E!=null&&E.refCount++,Q!=null&&td(Q))}function Xd(E,M){E=null,M.alternate!==null&&(E=M.alternate.memoizedState.cache),(M=M.memoizedState.cache)!==E&&(M.refCount++,E!=null&&td(E))}function jc(E,M,Q,K){if(10256&M.subtreeFlags)for(M=M.child;M!==null;)gc(E,M,Q,K),M=M.sibling}function gc(E,M,Q,K){var ne=M.flags;switch(M.tag){case 0:case 11:case 15:jc(E,M,Q,K),2048&ne&&Pf(9,M);break;case 3:jc(E,M,Q,K),2048&ne&&(E=null,M.alternate!==null&&(E=M.alternate.memoizedState.cache),(M=M.memoizedState.cache)!==E&&(M.refCount++,E!=null&&td(E)));break;case 12:if(2048&ne){jc(E,M,Q,K),E=M.stateNode;try{var he=M.memoizedProps,Qe=he.id,tt=he.onPostCommit;typeof tt=="function"&&tt(Qe,M.alternate===null?"mount":"update",E.passiveEffectDuration,-0)}catch(dt){rs(M,M.return,dt)}}else jc(E,M,Q,K);break;case 23:break;case 22:he=M.stateNode,M.memoizedState!==null?4&he._visibility?jc(E,M,Q,K):ah(E,M):4&he._visibility?jc(E,M,Q,K):(he._visibility|=4,Kc(E,M,Q,K,!!(10256&M.subtreeFlags))),2048&ne&&Cu(M.alternate,M);break;case 24:jc(E,M,Q,K),2048&ne&&Xd(M.alternate,M);break;default:jc(E,M,Q,K)}}function Kc(E,M,Q,K,ne){for(ne=ne&&!!(10256&M.subtreeFlags),M=M.child;M!==null;){var he=E,Qe=M,tt=Q,dt=K,ni=Qe.flags;switch(Qe.tag){case 0:case 11:case 15:Kc(he,Qe,tt,dt,ne),Pf(8,Qe);break;case 23:break;case 22:var vi=Qe.stateNode;Qe.memoizedState!==null?4&vi._visibility?Kc(he,Qe,tt,dt,ne):ah(he,Qe):(vi._visibility|=4,Kc(he,Qe,tt,dt,ne)),ne&&2048&ni&&Cu(Qe.alternate,Qe);break;case 24:Kc(he,Qe,tt,dt,ne),ne&&2048&ni&&Xd(Qe.alternate,Qe);break;default:Kc(he,Qe,tt,dt,ne)}M=M.sibling}}function ah(E,M){if(10256&M.subtreeFlags)for(M=M.child;M!==null;){var Q=E,K=M,ne=K.flags;switch(K.tag){case 22:ah(Q,K),2048&ne&&Cu(K.alternate,K);break;case 24:ah(Q,K),2048&ne&&Xd(K.alternate,K);break;default:ah(Q,K)}M=M.sibling}}function lh(E){if(E.subtreeFlags&gd)for(E=E.child;E!==null;)n_(E),E=E.sibling}function n_(E){switch(E.tag){case 26:lh(E),E.flags&gd&&(E.memoizedState!==null?px(ec,E.memoizedState,E.memoizedProps):$A(E.type,E.memoizedProps));break;case 5:lh(E),E.flags&gd&&$A(E.type,E.memoizedProps);break;case 3:case 4:if(Ah){var M=ec;ec=h0(E.stateNode.containerInfo),lh(E),ec=M}else lh(E);break;case 22:E.memoizedState===null&&((M=E.alternate)!==null&&M.memoizedState!==null?(M=gd,gd=16777216,lh(E),gd=M):lh(E));break;default:lh(E)}}function r_(E){var M=E.alternate;if(M!==null&&(E=M.child)!==null){M.child=null;do M=E.sibling,E.sibling=null,E=M;while(E!==null)}}function QA(E){var M=E.deletions;if(16&E.flags){if(M!==null)for(var Q=0;Q<M.length;Q++){var K=M[Q];go=K,wp(K,E)}r_(E)}if(10256&E.subtreeFlags)for(E=E.child;E!==null;)s_(E),E=E.sibling}function s_(E){switch(E.tag){case 0:case 11:case 15:QA(E),2048&E.flags&&wu(9,E,E.return);break;case 3:case 12:default:QA(E);break;case 22:var M=E.stateNode;E.memoizedState!==null&&4&M._visibility&&(E.return===null||E.return.tag!==13)?(M._visibility&=-5,o_(E)):QA(E)}}function o_(E){var M=E.deletions;if(16&E.flags){if(M!==null)for(var Q=0;Q<M.length;Q++){var K=M[Q];go=K,wp(K,E)}r_(E)}for(E=E.child;E!==null;){switch((M=E).tag){case 0:case 11:case 15:wu(8,M,M.return),o_(M);break;case 22:4&(Q=M.stateNode)._visibility&&(Q._visibility&=-5,o_(M));break;default:o_(M)}E=E.sibling}}function wp(E,M){for(;go!==null;){var Q=go;switch(Q.tag){case 0:case 11:case 15:wu(8,Q,M);break;case 23:case 22:if(Q.memoizedState!==null&&Q.memoizedState.cachePool!==null){var K=Q.memoizedState.cachePool.pool;K!=null&&K.refCount++}break;case 24:td(Q.memoizedState.cache)}if((K=Q.child)!==null)K.return=Q,go=K;else e:for(Q=E;go!==null;){var ne=(K=go).sibling,he=K.return;if(ab(K),K===Q){go=null;break e}if(ne!==null){ne.return=he,go=ne;break e}go=he}}}function mc(E){var M=Vf(E);if(M!=null){if(typeof M.memoizedProps["data-testname"]!="string")throw Error(s(364));return M}if((E=Zw(E))===null)throw Error(s(362));return E.stateNode.current}function _c(E,M){var Q=E.tag;switch(M.$$typeof){case Vp:if(E.type===M.value)return!0;break;case qp:e:{for(M=M.value,E=[E,0],Q=0;Q<E.length;){var K=E[Q++],ne=K.tag,he=E[Q++],Qe=M[he];if(ne!==5&&ne!==26&&ne!==27||!qf(K)){for(;Qe!=null&&_c(K,Qe);)Qe=M[++he];if(he===M.length){M=!0;break e}for(K=K.child;K!==null;)E.push(K,he),K=K.sibling}}M=!1}return M;case uA:if((Q===5||Q===26||Q===27)&&cb(E.stateNode,M.value))return!0;break;case D_:if((Q===5||Q===6||Q===26||Q===27)&&(E=VS(E))!==null&&0<=E.indexOf(M.value))return!0;break;case $p:if((Q===5||Q===26||Q===27)&&typeof(E=E.memoizedProps["data-testname"])=="string"&&E.toLowerCase()===M.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function Po(E){switch(E.$$typeof){case Vp:return"<"+(u(E.value)||"Unknown")+">";case qp:return":has("+(Po(E)||"")+")";case uA:return'[role="'+E.value+'"]';case D_:return'"'+E.value+'"';case $p:return'[data-testname="'+E.value+'"]';default:throw Error(s(365))}}function vc(E,M){var Q=[];E=[E,0];for(var K=0;K<E.length;){var ne=E[K++],he=ne.tag,Qe=E[K++],tt=M[Qe];if(he!==5&&he!==26&&he!==27||!qf(ne)){for(;tt!=null&&_c(ne,tt);)tt=M[++Qe];if(Qe===M.length)Q.push(ne);else for(ne=ne.child;ne!==null;)E.push(ne,Qe),ne=ne.sibling}}return Q}function id(E,M){if(!Tu)throw Error(s(363));E=vc(E=mc(E),M),M=[],E=Array.from(E);for(var Q=0;Q<E.length;){var K=E[Q++],ne=K.tag;if(ne===5||ne===26||ne===27)qf(K)||M.push(K.stateNode);else for(K=K.child;K!==null;)E.push(K),K=K.sibling}return M}function Oo(){return 2&En&&rn!==0?rn&-rn:In.T!==null?Np!==0?Np:me():Tp()}function Of(){sl===0&&(sl=536870912&rn&&!Jr?536870912:J());var E=Sc.current;return E!==null&&(E.flags|=32),sl}function Ko(E,M,Q){(E===cn&&_r===2||E.cancelPendingCommit!==null)&&(bc(E,0),ho(E,rn,sl,!1)),re(E,Q),2&En&&E===cn||(E===cn&&(!(2&En)&&(yh|=Q),ms===4&&ho(E,rn,sl,!1)),bt(E))}function Wg(E,M,Q){if(6&En)throw Error(s(327));for(var K=!Q&&!(60&M)&&!(M&E.expiredLanes)||W(E,M),ne=K?function(ni,vi){var zi=En;En|=2;var Di=jg(),Sn=HA();cn!==ni||rn!==vi?(Lu=null,dA=nl()+500,bc(ni,vi)):Wp=W(ni,vi);e:for(;;)try{if(_r!==0&&Wi!==null){vi=Wi;var Zn=Xo;t:switch(_r){case 1:_r=0,Xo=null,Aa(ni,vi,Zn,1);break;case 2:if(Bi(Zn)){_r=0,Xo=null,Su(vi);break}vi=function(){_r===2&&cn===ni&&(_r=7),bt(ni)},Zn.then(vi,vi);break e;case 3:_r=7;break e;case 4:_r=5;break e;case 7:Bi(Zn)?(_r=0,Xo=null,Su(vi)):(_r=0,Xo=null,Aa(ni,vi,Zn,7));break;case 5:var ri=null;switch(Wi.tag){case 26:ri=Wi.memoizedState;case 5:case 27:var Qt=Wi,oi=Qt.type,qi=Qt.pendingProps;if(ri?w_(ri):Mp(oi,qi)){_r=0,Xo=null;var Rn=Qt.sibling;if(Rn!==null)Wi=Rn;else{var Qn=Qt.return;Qn!==null?(Wi=Qn,Pa(Qn)):Wi=null}break t}}_r=0,Xo=null,Aa(ni,vi,Zn,5);break;case 6:_r=0,Xo=null,Aa(ni,vi,Zn,6);break;case 8:yc(),ms=6;break e;default:throw Error(s(462))}}Nf();break}catch(vr){Eu(ni,vr)}return po=lA=null,In.H=Di,In.A=Sn,En=zi,Wi!==null?0:(cn=null,rn=0,zt(),ms)}(E,M):Qf(E,M,!0),he=K;;){if(ne===0){Wp&&!K&&ho(E,M,0,!1);break}if(ne===6)ho(E,M,0,!iu);else{if(Q=E.current.alternate,he&&!NA(Q)){ne=Qf(E,M,!1),he=!1;continue}if(ne===2){if(he=M,E.errorRecoveryDisabledLanes&he)var Qe=0;else Qe=(Qe=-536870913&E.pendingLanes)!==0?Qe:536870912&Qe?536870912:0;if(Qe!==0){M=Qe;e:{var tt=E;ne=mo;var dt=Ho&&tt.current.memoizedState.isDehydrated;if(dt&&(bc(tt,Qe).flags|=256),(Qe=Qf(tt,Qe,!1))!==2){if(vh&&!dt){tt.errorRecoveryDisabledLanes|=he,yh|=he,ne=4;break e}he=bh,bh=ne,he!==null&&ch(he)}ne=Qe}if(he=!1,ne!==2)continue}}if(ne===1){bc(E,0),ho(E,M,0,!0);break}e:{switch(K=E,ne){case 0:case 1:throw Error(s(345));case 4:if((4194176&M)===M){ho(K,M,sl,!iu);break e}break;case 2:bh=null;break;case 3:case 5:break;default:throw Error(s(329))}if(K.finishedWork=Q,K.finishedLanes=M,(62914560&M)===M&&10<(he=jp+300-nl())){if(ho(K,M,sl,!iu),z(K,0)!==0)break e;K.timeoutHandle=jl(nn.bind(null,K,Q,bh,Lu,F_,M,sl,yh,hA,iu,2,-0,0),he)}else nn(K,Q,bh,Lu,F_,M,sl,yh,hA,iu,0,-0,0)}}break}bt(E)}function ch(E){bh===null?bh=E:bh.push.apply(bh,E)}function nn(E,M,Q,K,ne,he,Qe,tt,dt,ni,vi,zi,Di){var Sn=M.subtreeFlags;if((8192&Sn||!(16785408&~Sn))&&(Rp(),n_(M),(M=n0())!==null))return E.cancelPendingCommit=M(Jd.bind(null,E,Q,K,ne,Qe,tt,dt,1,zi,Di)),void ho(E,he,Qe,!ni);Jd(E,Q,K,ne,Qe,tt,dt)}function NA(E){for(var M=E;;){var Q=M.tag;if((Q===0||Q===11||Q===15)&&16384&M.flags&&(Q=M.updateQueue)!==null&&(Q=Q.stores)!==null)for(var K=0;K<Q.length;K++){var ne=Q[K],he=ne.getSnapshot;ne=ne.value;try{if(!Xl(he(),ne))return!1}catch{return!1}}if(Q=M.child,16384&M.subtreeFlags&&Q!==null)Q.return=M,M=Q;else{if(M===E)break;for(;M.sibling===null;){if(M.return===null||M.return===E)return!0;M=M.return}M.sibling.return=M.return,M=M.sibling}}return!0}function ho(E,M,Q,K){M&=~nu,M&=~yh,E.suspendedLanes|=M,E.pingedLanes&=~M,K&&(E.warmLanes|=M),K=E.expirationTimes;for(var ne=M;0<ne;){var he=31-Kl(ne),Qe=1<<he;K[he]=-1,ne&=~Qe}Q!==0&&se(E,Q,M)}function Jw(){return!!(6&En)||(Wt(0),!1)}function yc(){if(Wi!==null){if(_r===0)var E=Wi.return;else po=lA=null,Hc(E=Wi),Ts=null,M_=0,E=Wi;for(;E!==null;)$g(E.alternate,E),E=E.return;Wi=null}}function bc(E,M){E.finishedWork=null,E.finishedLanes=0;var Q=E.timeoutHandle;Q!==Yc&&(E.timeoutHandle=Yc,i0(Q)),(Q=E.cancelPendingCommit)!==null&&(E.cancelPendingCommit=null,Q()),yc(),cn=E,Wi=Q=Qo(E.current,null),rn=M,_r=0,Xo=null,iu=!1,Wp=W(E,M),vh=!1,hA=sl=nu=yh=Tl=ms=0,bh=mo=null,F_=!1,8&M&&(M|=32&M);var K=E.entangledLanes;if(K!==0)for(E=E.entanglements,K&=M;0<K;){var ne=31-Kl(K),he=1<<ne;M|=E[ne],K&=~he}return gs=M,zt(),Q}function Eu(E,M){Jn=null,In.H=xs,M===Ru?(M=Vi(),_r=3):M===mh?(M=Vi(),_r=4):_r=M===fd?8:M!==null&&typeof M=="object"&&typeof M.then=="function"?6:1,Xo=M,Wi===null&&(ms=1,bu(E,xe(M,E.current)))}function wc(){var E=Sc.current;return E===null||((4194176&rn)===rn?El===null:!!((62914560&rn)===rn||536870912&rn)&&E===El)}function jg(){var E=In.H;return In.H=xs,E===null?xs:E}function HA(){var E=In.A;return In.A=hm,E}function Za(){ms=4,iu||(4194176&rn)!==rn&&Sc.current!==null||(Wp=!0),!(134217727&Tl)&&!(134217727&yh)||cn===null||ho(cn,rn,sl,!1)}function Qf(E,M,Q){var K=En;En|=2;var ne=jg(),he=HA();cn===E&&rn===M||(Lu=null,bc(E,M)),M=!1;var Qe=ms;e:for(;;)try{if(_r!==0&&Wi!==null){var tt=Wi,dt=Xo;switch(_r){case 8:yc(),Qe=6;break e;case 3:case 2:case 6:Sc.current===null&&(M=!0);var ni=_r;if(_r=0,Xo=null,Aa(E,tt,dt,ni),Q&&Wp){Qe=0;break e}break;default:ni=_r,_r=0,Xo=null,Aa(E,tt,dt,ni)}}Kg(),Qe=ms;break}catch(vi){Eu(E,vi)}return M&&E.shellSuspendCounter++,po=lA=null,En=K,In.H=ne,In.A=he,Wi===null&&(cn=null,rn=0,zt()),Qe}function Kg(){for(;Wi!==null;)Yd(Wi)}function Nf(){for(;Wi!==null&&!kp();)Yd(Wi)}function Yd(E){var M=Kw(E.alternate,E,gs);E.memoizedProps=E.pendingProps,M===null?Pa(E):Wi=M}function Su(E){var M=E,Q=M.alternate;switch(M.tag){case 15:case 0:M=Vc(Q,M,M.pendingProps,M.type,void 0,rn);break;case 11:M=Vc(Q,M,M.pendingProps,M.type.render,M.ref,rn);break;case 5:Hc(M);default:$g(Q,M),M=Kw(Q,M=Wi=Cp(M,gs),gs)}E.memoizedProps=E.pendingProps,M===null?Pa(E):Wi=M}function Aa(E,M,Q,K){po=lA=null,Hc(M),Ts=null,M_=0;var ne=M.return;try{if(function(he,Qe,tt,dt,ni){if(tt.flags|=32768,dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){if((Qe=tt.alternate)!==null&&kf(Qe,tt,ni,!0),(tt=Sc.current)!==null){switch(tt.tag){case 13:return El===null?Za():tt.alternate===null&&ms===0&&(ms=3),tt.flags&=-257,tt.flags|=65536,tt.lanes=ni,dt===Zf?tt.flags|=16384:((Qe=tt.updateQueue)===null?tt.updateQueue=new Set([dt]):Qe.add(dt),a_(he,dt,ni)),!1;case 22:return tt.flags|=65536,dt===Zf?tt.flags|=16384:((Qe=tt.updateQueue)===null?(Qe={transitions:null,markerInstances:null,retryQueue:new Set([dt])},tt.updateQueue=Qe):(tt=Qe.retryQueue)===null?Qe.retryQueue=new Set([dt]):tt.add(dt),a_(he,dt,ni)),!1}throw Error(s(435,tt.tag))}return a_(he,dt,ni),Za(),!1}if(Jr)return(Qe=Sc.current)!==null?(!(65536&Qe.flags)&&(Qe.flags|=256),Qe.flags|=65536,Qe.lanes=ni,dt!==B_&&Nt(xe(he=Error(s(422),{cause:dt}),tt))):(dt!==B_&&Nt(xe(Qe=Error(s(423),{cause:dt}),tt)),(he=he.current.alternate).flags|=65536,ni&=-ni,he.lanes|=ni,dt=xe(dt,tt),si(he,ni=vl(he.stateNode,dt,ni)),ms!==4&&(ms=2)),!1;var vi=Error(s(520),{cause:dt});if(vi=xe(vi,tt),mo===null?mo=[vi]:mo.push(vi),ms!==4&&(ms=2),Qe===null)return!0;dt=xe(dt,tt),tt=Qe;do{switch(tt.tag){case 3:return tt.flags|=65536,he=ni&-ni,tt.lanes|=he,si(tt,he=vl(tt.stateNode,dt,he)),!1;case 1:if(Qe=tt.type,vi=tt.stateNode,!(128&tt.flags||typeof Qe.getDerivedStateFromError!="function"&&(vi===null||typeof vi.componentDidCatch!="function"||Rs!==null&&Rs.has(vi))))return tt.flags|=65536,ni&=-ni,tt.lanes|=ni,ko(ni=Yh(ni),he,tt,dt),si(tt,ni),!1}tt=tt.return}while(tt!==null);return!1}(E,ne,M,Q,rn))return ms=1,bu(E,xe(Q,E.current)),void(Wi=null)}catch(he){if(ne!==null)throw Wi=ne,he;return ms=1,bu(E,xe(Q,E.current)),void(Wi=null)}32768&M.flags?(Jr||K===1?E=!0:Wp||536870912&rn?E=!1:(iu=E=!0,(K===2||K===3||K===6)&&(K=Sc.current)!==null&&K.tag===13&&(K.flags|=16384)),xp(M,E)):Pa(M)}function Pa(E){var M=E;do{if(32768&M.flags)return void xp(M,iu);E=M.return;var Q=qg(M.alternate,M,gs);if(Q!==null)return void(Wi=Q);if((M=M.sibling)!==null)return void(Wi=M);Wi=M=E}while(M!==null);ms===0&&(ms=5)}function xp(E,M){do{var Q=Xv(E.alternate,E);if(Q!==null)return Q.flags&=32767,void(Wi=Q);if((Q=E.return)!==null&&(Q.flags|=32768,Q.subtreeFlags=0,Q.deletions=null),!M&&(E=E.sibling)!==null)return void(Wi=E);Wi=E=Q}while(E!==null);ms=6,Wi=null}function Jd(E,M,Q,K,ne,he,Qe,tt,dt,ni){var vi=In.T,zi=ld();try{il(2),In.T=null,function(Di,Sn,Zn,ri,Qt,oi,qi,Rn){do Xc();while(wh!==null);if(6&En)throw Error(s(327));var Qn=Di.finishedWork;if(ri=Di.finishedLanes,Qn===null)return null;if(Di.finishedWork=null,Di.finishedLanes=0,Qn===Di.current)throw Error(s(177));Di.callbackNode=null,Di.callbackPriority=0,Di.cancelPendingCommit=null;var vr=Qn.lanes|Qn.childLanes;if(function(Dn,os,as,_s,Nn,ur){var _o=Dn.pendingLanes;Dn.pendingLanes=as,Dn.suspendedLanes=0,Dn.pingedLanes=0,Dn.warmLanes=0,Dn.expiredLanes&=as,Dn.entangledLanes&=as,Dn.errorRecoveryDisabledLanes&=as,Dn.shellSuspendCounter=0;var Ur=Dn.entanglements,xh=Dn.expirationTimes,ZA=Dn.hiddenUpdates;for(as=_o&~as;0<as;){var kr=31-Kl(as),Tb=1<<kr;Ur[kr]=0,xh[kr]=-1;var m0=ZA[kr];if(m0!==null)for(ZA[kr]=null,kr=0;kr<m0.length;kr++){var Mb=m0[kr];Mb!==null&&(Mb.lane&=-536870913)}as&=~Tb}_s!==0&&se(Dn,_s,0),ur!==0&&Nn===0&&Dn.tag!==0&&(Dn.suspendedLanes|=ur&~(_o&~os))}(Di,ri,vr|=I_,oi,qi,Rn),Di===cn&&(Wi=cn=null,rn=0),!(10256&Qn.subtreeFlags)&&!(10256&Qn.flags)||ba||(ba=!0,U_=vr,dm=Zn,function(Dn,os){Cc(Dn,os)}(C_,function(){return Xc(),null})),Zn=!!(15990&Qn.flags),15990&Qn.subtreeFlags||Zn?(Zn=In.T,In.T=null,oi=ld(),il(2),qi=En,En|=4,function(Dn,os){for(As(Dn.containerInfo),go=os;go!==null;)if(os=(Dn=go).child,1028&Dn.subtreeFlags&&os!==null)os.return=Dn,go=os;else for(;go!==null;){var as=(Dn=go).alternate;switch(os=Dn.flags,Dn.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&os&&as!==null){os=void 0;var _s=Dn,Nn=as.memoizedProps;as=as.memoizedState;var ur=_s.stateNode;try{var _o=Hl(_s.type,Nn,(_s.elementType,_s.type));os=ur.getSnapshotBeforeUpdate(_o,as),ur.__reactInternalSnapshotBeforeUpdate=os}catch(Ur){rs(_s,_s.return,Ur)}}break;case 3:1024&os&&tl&&pb(Dn.stateNode.containerInfo);break;default:if(1024&os)throw Error(s(163))}if((os=Dn.sibling)!==null){os.return=Dn.return,go=os;break}go=Dn.return}_o=Gp,Gp=!1}(Di,Qn),OA(Qn,Di),od(Di.containerInfo),Di.current=Qn,Fr(Di,Qn.alternate,Qn),vx(),En=qi,il(oi),In.T=Zn):Di.current=Qn,ba?(ba=!1,wh=Di,Pu=ri):nd(Di,vr),vr=Di.pendingLanes,vr===0&&(Rs=null),function(Dn){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(Xf,Dn,void 0,!(128&~Dn.current.flags))}catch{}}(Qn.stateNode),bt(Di),Sn!==null)for(Qt=Di.onRecoverableError,Qn=0;Qn<Sn.length;Qn++)vr=Sn[Qn],Qt(vr.value,{componentStack:vr.stack});3&Pu&&Xc(),vr=Di.pendingLanes,4194218&ri&&42&vr?Di===md?tg++:(tg=0,md=Di):tg=0,Wt(0)}(E,M,Q,K,zi,ne,he,Qe)}finally{In.T=vi,il(zi)}}function nd(E,M){(E.pooledCacheLanes&=M)==0&&(M=E.pooledCache)!=null&&(E.pooledCache=null,td(M))}function Xc(){if(wh!==null){var E=wh,M=U_;U_=0;var Q=fe(Pu),K=32>Q?32:Q;Q=In.T;var ne=ld();try{if(il(K),In.T=null,wh===null)var he=!1;else{K=dm,dm=null;var Qe=wh,tt=Pu;if(wh=null,Pu=0,6&En)throw Error(s(331));var dt=En;if(En|=4,s_(Qe.current),gc(Qe,Qe.current,tt,K),En=dt,Wt(0),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(Xf,Qe)}catch{}he=!0}return he}finally{il(ne),In.T=Q,nd(E,M)}}return!1}function e0(E,M,Q){M=xe(Q,M),(E=Ot(E,M=vl(E.stateNode,M,2),2))!==null&&(re(E,2),bt(E))}function rs(E,M,Q){if(E.tag===3)e0(E,E,Q);else for(;M!==null;){if(M.tag===3){e0(M,E,Q);break}if(M.tag===1){var K=M.stateNode;if(typeof M.type.getDerivedStateFromError=="function"||typeof K.componentDidCatch=="function"&&(Rs===null||!Rs.has(K))){E=xe(Q,E),(K=Ot(M,Q=Yh(2),2))!==null&&(ko(Q,K,M,E),re(K,2),bt(K));break}}M=M.return}}function a_(E,M,Q){var K=E.pingCache;if(K===null){K=E.pingCache=new ss;var ne=new Set;K.set(M,ne)}else(ne=K.get(M))===void 0&&(ne=new Set,K.set(M,ne));ne.has(Q)||(vh=!0,ne.add(Q),E=pa.bind(null,E,M,Q),M.then(E,E))}function pa(E,M,Q){var K=E.pingCache;K!==null&&K.delete(M),E.pingedLanes|=E.suspendedLanes&Q,E.warmLanes&=~Q,cn===E&&(rn&Q)===Q&&(ms===4||ms===3&&(62914560&rn)===rn&&300>nl()-jp?!(2&En)&&bc(E,0):nu|=Q,hA===rn&&(hA=0)),bt(E)}function Zs(E,M){M===0&&(M=ie()),(E=Dt(E,M))!==null&&(re(E,M),bt(E))}function gn(E){var M=E.memoizedState,Q=0;M!==null&&(Q=M.retryLane),Zs(E,Q)}function wl(E,M){var Q=0;switch(E.tag){case 13:var K=E.stateNode,ne=E.memoizedState;ne!==null&&(Q=ne.retryLane);break;case 19:K=E.stateNode;break;case 22:K=E.stateNode._retryCache;break;default:throw Error(s(314))}K!==null&&K.delete(M),Zs(E,Q)}function el(E,M,Q,K){this.tag=E,this.key=Q,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=M,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=K,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hf(E){return!(!(E=E.prototype)||!E.isReactComponent)}function Qo(E,M){var Q=E.alternate;return Q===null?((Q=i(E.tag,M,E.key,E.mode)).elementType=E.elementType,Q.type=E.type,Q.stateNode=E.stateNode,Q.alternate=E,E.alternate=Q):(Q.pendingProps=M,Q.type=E.type,Q.flags=0,Q.subtreeFlags=0,Q.deletions=null),Q.flags=31457280&E.flags,Q.childLanes=E.childLanes,Q.lanes=E.lanes,Q.child=E.child,Q.memoizedProps=E.memoizedProps,Q.memoizedState=E.memoizedState,Q.updateQueue=E.updateQueue,M=E.dependencies,Q.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext},Q.sibling=E.sibling,Q.index=E.index,Q.ref=E.ref,Q.refCleanup=E.refCleanup,Q}function Cp(E,M){E.flags&=31457282;var Q=E.alternate;return Q===null?(E.childLanes=0,E.lanes=M,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=Q.childLanes,E.lanes=Q.lanes,E.child=Q.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=Q.memoizedProps,E.memoizedState=Q.memoizedState,E.updateQueue=Q.updateQueue,E.type=Q.type,M=Q.dependencies,E.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),E}function Zd(E,M,Q,K,ne,he){var Qe=0;if(K=E,typeof E=="function")Hf(E)&&(Qe=1);else if(typeof E=="string")Qe=Ah&&xl?u0(E,Q,Kr.current)?26:jf(E)?27:5:Ah?u0(E,Q,Kr.current)?26:5:xl&&jf(E)?27:5;else e:switch(E){case ks:return uh(Q.children,ne,he,M);case Ls:Qe=8,ne|=24;break;case Bp:return(E=i(12,Q,M,2|ne)).elementType=Bp,E.lanes=he,E;case c_:return(E=i(13,Q,M,ne)).elementType=c_,E.lanes=he,E;case VA:return(E=i(19,Q,M,ne)).elementType=VA,E.lanes=he,E;case to:return Ep(Q,ne,he,M);default:if(typeof E=="object"&&E!==null)switch(E.$$typeof){case Yg:case Bu:Qe=10;break e;case fa:Qe=9;break e;case Oa:Qe=11;break e;case xc:Qe=14;break e;case Iu:Qe=16,K=null;break e}Qe=29,Q=Error(s(130,E===null?"null":typeof E,"")),K=null}return(M=i(Qe,Q,M,ne)).elementType=E,M.type=K,M.lanes=he,M}function uh(E,M,Q,K){return(E=i(7,E,K,M)).lanes=Q,E}function Ep(E,M,Q,K){(E=i(22,E,K,M)).elementType=to,E.lanes=Q;var ne={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var he=ne._current;if(he===null)throw Error(s(456));if(!(2&ne._pendingVisibility)){var Qe=Dt(he,2);Qe!==null&&(ne._pendingVisibility|=2,Ko(Qe,0,2))}},attach:function(){var he=ne._current;if(he===null)throw Error(s(456));if(2&ne._pendingVisibility){var Qe=Dt(he,2);Qe!==null&&(ne._pendingVisibility&=-3,Ko(Qe,0,2))}}};return E.stateNode=ne,E}function Xg(E,M,Q){return(E=i(6,E,null,M)).lanes=Q,E}function zA(E,M,Q){return(M=i(4,E.children!==null?E.children:[],E.key,M)).lanes=Q,M.stateNode={containerInfo:E.containerInfo,pendingChildren:null,implementation:E.implementation},M}function l_(E,M,Q,K,ne,he,Qe,tt){this.tag=1,this.containerInfo=E,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Yc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ee(0),this.hiddenUpdates=ee(null),this.identifierPrefix=K,this.onUncaughtError=ne,this.onCaughtError=he,this.onRecoverableError=Qe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=tt,this.incompleteTransitions=new Map}function eA(E,M,Q,K,ne,he,Qe,tt,dt,ni,vi,zi){return E=new l_(E,M,Q,Qe,tt,dt,ni,zi),M=1,he===!0&&(M|=24),he=i(3,null,null,M),E.current=he,he.stateNode=E,(M=jv()).refCount++,E.pooledCache=M,M.refCount++,he.memoizedState={element:K,isDehydrated:Q,cache:M},Ct(he),E}function hh(E){return E?E=nA:nA}function No(E){var M=E._reactInternals;if(M===void 0)throw typeof E.render=="function"?Error(s(188)):(E=Object.keys(E).join(","),Error(s(268,E)));return(E=(E=I(M))!==null?F(E):null)===null?null:qA(E.stateNode)}function rd(E,M,Q,K,ne,he){ne=hh(ne),K.context===null?K.context=ne:K.pendingContext=ne,(K=ft(M)).payload={element:Q},(he=he===void 0?null:he)!==null&&(K.callback=he),(Q=Ot(E,K,M))!==null&&(Ko(Q,0,M),Gt(Q,E,M))}function sd(E,M){if((E=E.memoizedState)!==null&&E.dehydrated!==null){var Q=E.retryLane;E.retryLane=Q!==0&&Q<M?Q:M}}function Sp(E,M){sd(E,M),(E=E.alternate)&&sd(E,M)}var GA,an,_n={},$l=Ye,Us=cce(),Wl=Object.assign,t0=Symbol.for("react.element"),zf=Symbol.for("react.transitional.element"),eo=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),Ls=Symbol.for("react.strict_mode"),Bp=Symbol.for("react.profiler"),Yg=Symbol.for("react.provider"),fa=Symbol.for("react.consumer"),Bu=Symbol.for("react.context"),Oa=Symbol.for("react.forward_ref"),c_=Symbol.for("react.suspense"),VA=Symbol.for("react.suspense_list"),xc=Symbol.for("react.memo"),Iu=Symbol.for("react.lazy"),to=Symbol.for("react.offscreen"),ga=Symbol.for("react.memo_cache_sentinel"),Jg=Symbol.iterator,Ip=Symbol.for("react.client.reference"),In=$l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,u_=!1,tA=Array.isArray,Zg=e.rendererVersion,h_=e.rendererPackageName,Gf=e.extraDevToolsConfig,qA=e.getPublicInstance,em=e.getRootHostContext,d_=e.getChildHostContext,As=e.prepareForCommit,od=e.resetAfterCommit,ad=e.createInstance,iA=e.appendInitialChild,To=e.finalizeInitialChildren,dh=e.shouldSetTextContent,tm=e.createTextInstance,jl=e.scheduleTimeout,i0=e.cancelTimeout,Yc=e.noTimeout,Jc=e.isPrimaryRenderer;e.warnsIfNotActing;var tl=e.supportsMutation,zs=e.supportsPersistence,Ho=e.supportsHydration,Vf=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var lb=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var il=e.setCurrentUpdatePriority,ld=e.getCurrentUpdatePriority,Tp=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var mr=e.shouldAttemptEagerTransition,jr=e.detachDeletedInstance;e.requestPostPaintCallback;var Gs=e.maySuspendCommit,Mp=e.preloadInstance,Rp=e.startSuspendingCommit,$A=e.suspendInstance,n0=e.waitForCommitToBeReady,Qa=e.NotPendingTransition,Mn=e.HostTransitionContext,Yi=e.resetFormInstance;e.bindToConsole;var ws=e.supportsMicrotasks,im=e.scheduleMicrotask,Tu=e.supportsTestSelectors,Zw=e.findFiberRoot,ex=e.getBoundingRect,VS=e.getTextContent,qf=e.isHiddenSubtree,cb=e.matchAccessibilityRole,ub=e.setFocusIfFocusable,Zc=e.setupIntersectionObserver,io=e.appendChild,r0=e.appendChildToContainer,$f=e.commitTextUpdate,A_=e.commitMount,p_=e.commitUpdate,cd=e.insertBefore,nm=e.insertInContainerBefore,f_=e.removeChild,WA=e.removeChildFromContainer,Dp=e.resetTextContent,hb=e.hideInstance,db=e.hideTextInstance,Ab=e.unhideInstance,g_=e.unhideTextInstance,pb=e.clearContainer,s0=e.cloneInstance,fb=e.createContainerChildSet,tx=e.appendChildToContainerChildSet,ix=e.finalizeContainerChildren,gb=e.replaceContainerChildren,mb=e.cloneHiddenInstance,o0=e.cloneHiddenTextInstance,a0=e.isSuspenseInstancePending,m_=e.isSuspenseInstanceFallback,_b=e.getSuspenseInstanceFallbackErrorDetails,vb=e.registerSuspenseInstanceRetry,yb=e.canHydrateFormStateMarker,nx=e.isFormStateMarkerMatching,l0=e.getNextHydratableSibling,Fp=e.getFirstHydratableChild,__=e.getFirstHydratableChildWithinContainer,bb=e.getFirstHydratableChildWithinSuspenseInstance,v_=e.canHydrateInstance,rm=e.canHydrateTextInstance,Wf=e.canHydrateSuspenseInstance,ma=e.hydrateInstance,_a=e.hydrateTextInstance,y_=e.hydrateSuspenseInstance,rx=e.getNextHydratableInstanceAfterSuspenseInstance,sx=e.commitHydratedContainer,wb=e.commitHydratedSuspenseInstance,ox=e.clearSuspenseBoundary,ax=e.clearSuspenseBoundaryFromContainer,c0=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var lx=e.validateHydratableInstance,cx=e.validateHydratableTextInstance,Ah=e.supportsResources,u0=e.isHostHoistableType,h0=e.getHoistableRoot,xb=e.getResource,d0=e.acquireResource,Cb=e.releaseResource,ux=e.hydrateHoistable,hx=e.mountHoistable,dx=e.unmountHoistable,Ax=e.createHoistableInstance,b_=e.prepareToCommitHoistables,Eb=e.mayResourceSuspendCommit,w_=e.preloadResource,px=e.suspendResource,xl=e.supportsSingletons,x_=e.resolveSingletonInstance,fx=e.clearSingleton,gx=e.acquireSingletonInstance,qS=e.releaseSingletonInstance,jf=e.isHostSingletonType,Kf=[],jA=-1,nA={},Kl=Math.clz32?Math.clz32:function(E){return(E>>>=0)===0?32:31-(mx(E)/_x|0)|0},mx=Math.log,_x=Math.LN2,Up=128,A0=4194304,Cc=Us.unstable_scheduleCallback,ph=Us.unstable_cancelCallback,kp=Us.unstable_shouldYield,vx=Us.unstable_requestPaint,nl=Us.unstable_now,fh=Us.unstable_ImmediatePriority,va=Us.unstable_UserBlockingPriority,C_=Us.unstable_NormalPriority,sm=Us.unstable_IdlePriority,p0=Us.log,yx=Us.unstable_setDisableYieldValue,Xf=null,Na=null,Xl=typeof Object.is=="function"?Object.is:function(E,M){return E===M&&(E!==0||1/E==1/M)||E!=E&&M!=M},om=new WeakMap,ud=[],Lp=0,Pp=null,E_=0,Yl=[],Mu=0,Op=null,rA=1,hd="",Kr=U(null),zo=U(null),KA=U(null),S_=U(null),Jl=null,Cl=null,Jr=!1,eu=null,gh=!1,B_=Error(s(519)),tu=[],Yf=0,I_=0,am=null,Qp=null,f0=!1,Jf=!1,lm=!1,XA=0,cm=null,T_=0,Np=0,Ec=null,dd=!1,Sb=!1,bx=Object.prototype.hasOwnProperty,Ru=Error(s(460)),mh=Error(s(474)),Zf={then:function(){}},_h=null,Ts=null,M_=0,Du=Mi(!0),Bb=Mi(!1),sA=U(null),Ad=U(0),Sc=U(null),El=null,Ao=U(0),ps=0,Jn=null,Ms=null,Vs=null,oA=!1,Fu=!1,Bc=!1,aA=0,Sl=0,Ps=null,um=0,Hp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},xs={readContext:ka,use:Hi,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n};xs.useCacheRefresh=$n,xs.useMemoCache=$n,xs.useHostTransitionStatus=$n,xs.useFormState=$n,xs.useActionState=$n,xs.useOptimistic=$n;var zp={readContext:ka,use:Hi,useCallback:function(E,M){return Fs().memoizedState=[E,M===void 0?null:M],E},useContext:ka,useEffect:Qs,useImperativeHandle:function(E,M,Q){Q=Q!=null?Q.concat([E]):null,Er(4194308,4,aa.bind(null,M,E),Q)},useLayoutEffect:function(E,M){return Er(4194308,4,E,M)},useInsertionEffect:function(E,M){Er(4,2,E,M)},useMemo:function(E,M){var Q=Fs();M=M===void 0?null:M;var K=E();if(Bc){pe(!0);try{E()}finally{pe(!1)}}return Q.memoizedState=[K,M],K},useReducer:function(E,M,Q){var K=Fs();if(Q!==void 0){var ne=Q(M);if(Bc){pe(!0);try{Q(M)}finally{pe(!1)}}}else ne=M;return K.memoizedState=K.baseState=ne,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E,lastRenderedState:ne},K.queue=E,E=E.dispatch=Uf.bind(null,Jn,E),[K.memoizedState,E]},useRef:function(E){return E={current:E},Fs().memoizedState=E},useState:function(E){var M=(E=Ci(E)).queue,Q=Kh.bind(null,Jn,M);return M.dispatch=Q,[E.memoizedState,Q]},useDebugValue:_u,useDeferredValue:function(E,M){return kA(Fs(),E,M)},useTransition:function(){var E=Ci(!1);return E=LA.bind(null,Jn,E.queue,!0,!1),Fs().memoizedState=E,[!1,E]},useSyncExternalStore:function(E,M,Q){var K=Jn,ne=Fs();if(Jr){if(Q===void 0)throw Error(s(407));Q=Q()}else{if(Q=M(),cn===null)throw Error(s(349));60&rn||kt(K,M,Q)}ne.memoizedState=Q;var he={value:Q,getSnapshot:M};return ne.queue=he,Qs(pi.bind(null,K,he,E),[E]),K.flags|=2048,fn(9,St.bind(null,K,he,Q,M),{destroy:void 0},null),Q},useId:function(){var E=Fs(),M=cn.identifierPrefix;if(Jr){var Q=hd;M=":"+M+"R"+(Q=(rA&~(1<<32-Kl(rA)-1)).toString(32)+Q),0<(Q=aA++)&&(M+="H"+Q.toString(32)),M+=":"}else M=":"+M+"r"+(Q=um++).toString(32)+":";return E.memoizedState=M},useCacheRefresh:function(){return Fs().memoizedState=PA.bind(null,Jn)}};zp.useMemoCache=gl,zp.useHostTransitionStatus=pc,zp.useFormState=Xi,zp.useActionState=Xi,zp.useOptimistic=function(E){var M=Fs();M.memoizedState=M.baseState=E;var Q={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return M.queue=Q,M=$d.bind(null,Jn,!0,Q),Q.dispatch=M,[E,M]};var pd={readContext:ka,use:Hi,useCallback:Wh,useContext:ka,useEffect:ns,useImperativeHandle:zc,useInsertionEffect:So,useLayoutEffect:Ya,useMemo:jh,useReducer:uo,useRef:Xa,useState:function(){return uo(oa)},useDebugValue:_u,useDeferredValue:function(E,M){return th(ys(),Ms.memoizedState,E,M)},useTransition:function(){var E=uo(oa)[0],M=ys().memoizedState;return[typeof E=="boolean"?E:Nl(E),M]},useSyncExternalStore:Vt,useId:vu};pd.useCacheRefresh=Ja,pd.useMemoCache=gl,pd.useHostTransitionStatus=pc,pd.useFormState=jn,pd.useActionState=jn,pd.useOptimistic=function(E,M){return yn(ys(),0,E,M)};var YA={readContext:ka,use:Hi,useCallback:Wh,useContext:ka,useEffect:ns,useImperativeHandle:zc,useInsertionEffect:So,useLayoutEffect:Ya,useMemo:jh,useReducer:Et,useRef:Xa,useState:function(){return Et(oa)},useDebugValue:_u,useDeferredValue:function(E,M){var Q=ys();return Ms===null?kA(Q,E,M):th(Q,Ms.memoizedState,E,M)},useTransition:function(){var E=Et(oa)[0],M=ys().memoizedState;return[typeof E=="boolean"?E:Nl(E),M]},useSyncExternalStore:Vt,useId:vu};YA.useCacheRefresh=Ja,YA.useMemoCache=gl,YA.useHostTransitionStatus=pc,YA.useFormState=Ua,YA.useActionState=Ua,YA.useOptimistic=function(E,M){var Q=ys();return Ms!==null?yn(Q,0,E,M):(Q.baseState=E,[E,Q.queue.dispatch])};var fs={isMounted:function(E){return!!(E=E._reactInternals)&&x(E)===E},enqueueSetState:function(E,M,Q){E=E._reactInternals;var K=Oo(),ne=ft(K);ne.payload=M,Q!=null&&(ne.callback=Q),(M=Ot(E,ne,K))!==null&&(Ko(M,0,K),Gt(M,E,K))},enqueueReplaceState:function(E,M,Q){E=E._reactInternals;var K=Oo(),ne=ft(K);ne.tag=1,ne.payload=M,Q!=null&&(ne.callback=Q),(M=Ot(E,ne,K))!==null&&(Ko(M,0,K),Gt(M,E,K))},enqueueForceUpdate:function(E,M){E=E._reactInternals;var Q=Oo(),K=ft(Q);K.tag=2,M!=null&&(K.callback=M),(M=Ot(E,K,Q))!==null&&(Ko(M,0,Q),Gt(M,E,Q))}},rl=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function")return void process.emit("uncaughtException",E);console.error(E)},fd=Error(s(461)),ya=!1,R_={dehydrated:null,treeContext:null,retryLane:0},g0=U(null),lA=null,po=null,Uu=typeof AbortController<"u"?AbortController:function(){var E=[],M=this.signal={aborted:!1,addEventListener:function(Q,K){E.push(K)}};this.abort=function(){M.aborted=!0,E.forEach(function(Q){return Q()})}},Ib=Us.unstable_scheduleCallback,Ic=Us.unstable_NormalPriority,Mo={$$typeof:Bu,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},cA=In.S;In.S=function(E,M){typeof M=="object"&&M!==null&&typeof M.then=="function"&&function(Q,K){if(cm===null){var ne=cm=[];T_=0,Np=me(),Ec={status:"pending",value:void 0,then:function(he){ne.push(he)}}}T_++,K.then($e,$e)}(0,M),cA!==null&&cA(E,M)};var Zl=U(null),Bl=!1,fo=!1,eg=!1,ku=typeof WeakSet=="function"?WeakSet:Set,go=null,Gp=!1,no=null,Il=!1,ec=null,gd=8192,hm={getCacheForType:function(E){var M=ka(Mo),Q=M.data.get(E);return Q===void 0&&(Q=E(),M.data.set(E,Q)),Q}},Vp=0,qp=1,uA=2,$p=3,D_=4;if(typeof Symbol=="function"&&Symbol.for){var JA=Symbol.for;Vp=JA("selector.component"),qp=JA("selector.has_pseudo_class"),uA=JA("selector.role"),$p=JA("selector.test_id"),D_=JA("selector.text")}var ss=typeof WeakMap=="function"?WeakMap:Map,En=0,cn=null,Wi=null,rn=0,_r=0,Xo=null,iu=!1,Wp=!1,vh=!1,gs=0,ms=0,Tl=0,yh=0,nu=0,sl=0,hA=0,mo=null,bh=null,F_=!1,jp=0,dA=1/0,Lu=null,Rs=null,ba=!1,wh=null,Pu=0,U_=0,dm=null,tg=0,md=null;return _n.attemptContinuousHydration=function(E){if(E.tag===13){var M=Dt(E,67108864);M!==null&&Ko(M,0,67108864),Sp(E,67108864)}},_n.attemptHydrationAtCurrentPriority=function(E){if(E.tag===13){var M=Oo(),Q=Dt(E,M);Q!==null&&Ko(Q,0,M),Sp(E,M)}},_n.attemptSynchronousHydration=function(E){switch(E.tag){case 3:if((E=E.stateNode).current.memoizedState.isDehydrated){var M=N(E.pendingLanes);if(M!==0){for(E.pendingLanes|=2,E.entangledLanes|=2;M;){var Q=1<<31-Kl(M);E.entanglements[1]|=Q,M&=~Q}bt(E),!(6&En)&&(dA=nl()+500,Wt(0))}}break;case 13:(M=Dt(E,2))!==null&&Ko(M,0,2),Jw(),Sp(E,2)}},_n.batchedUpdates=function(E,M){return E(M)},_n.createComponentSelector=function(E){return{$$typeof:Vp,value:E}},_n.createContainer=function(E,M,Q,K,ne,he,Qe,tt,dt,ni){return eA(E,M,!1,null,0,K,he,Qe,tt,dt,0,null)},_n.createHasPseudoClassSelector=function(E){return{$$typeof:qp,value:E}},_n.createHydrationContainer=function(E,M,Q,K,ne,he,Qe,tt,dt,ni,vi,zi,Di){return(E=eA(Q,K,!0,E,0,he,tt,dt,ni,vi,0,Di)).context=hh(null),Q=E.current,(ne=ft(K=Oo())).callback=M??null,Ot(Q,ne,K),E.current.lanes=K,re(E,K),bt(E),E},_n.createPortal=function(E,M,Q){var K=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:K==null?null:""+K,children:E,containerInfo:M,implementation:Q}},_n.createRoleSelector=function(E){return{$$typeof:uA,value:E}},_n.createTestNameSelector=function(E){return{$$typeof:$p,value:E}},_n.createTextSelector=function(E){return{$$typeof:D_,value:E}},_n.defaultOnCaughtError=function(E){console.error(E)},_n.defaultOnRecoverableError=function(E){rl(E)},_n.defaultOnUncaughtError=function(E){rl(E)},_n.deferredUpdates=function(E){var M=In.T,Q=ld();try{return il(32),In.T=null,E()}finally{il(Q),In.T=M}},_n.discreteUpdates=function(E,M,Q,K,ne){var he=In.T,Qe=ld();try{return il(2),In.T=null,E(M,Q,K,ne)}finally{il(Qe),In.T=he,En===0&&(dA=nl()+500)}},_n.findAllNodes=id,_n.findBoundingRects=function(E,M){if(!Tu)throw Error(s(363));M=id(E,M),E=[];for(var Q=0;Q<M.length;Q++)E.push(ex(M[Q]));for(M=E.length-1;0<M;M--)for(var K=(Q=E[M]).x,ne=K+Q.width,he=Q.y,Qe=he+Q.height,tt=M-1;0<=tt;tt--)if(M!==tt){var dt=E[tt],ni=dt.x,vi=ni+dt.width,zi=dt.y,Di=zi+dt.height;if(K>=ni&&he>=zi&&ne<=vi&&Qe<=Di){E.splice(M,1);break}if(!(K!==ni||Q.width!==dt.width||Di<he||zi>Qe)){zi>he&&(dt.height+=zi-he,dt.y=he),Di<Qe&&(dt.height=Qe-zi),E.splice(M,1);break}if(!(he!==zi||Q.height!==dt.height||vi<K||ni>ne)){ni>K&&(dt.width+=ni-K,dt.x=K),vi<ne&&(dt.width=ne-ni),E.splice(M,1);break}}return E},_n.findHostInstance=No,_n.findHostInstanceWithNoPortals=function(E){return(E=(E=I(E))!==null?L(E):null)===null?null:qA(E.stateNode)},_n.findHostInstanceWithWarning=function(E){return No(E)},_n.flushPassiveEffects=Xc,_n.flushSyncFromReconciler=function(E){var M=En;En|=1;var Q=In.T,K=ld();try{if(il(2),In.T=null,E)return E()}finally{il(K),In.T=Q,!(6&(En=M))&&Wt(0)}},_n.flushSyncWork=Jw,_n.focusWithin=function(E,M){if(!Tu)throw Error(s(363));for(M=vc(E=mc(E),M),M=Array.from(M),E=0;E<M.length;){var Q=M[E++],K=Q.tag;if(!qf(Q)){if((K===5||K===26||K===27)&&ub(Q.stateNode))return!0;for(Q=Q.child;Q!==null;)M.push(Q),Q=Q.sibling}}return!1},_n.getFindAllNodesFailureDescription=function(E,M){if(!Tu)throw Error(s(363));var Q=0,K=[];E=[mc(E),0];for(var ne=0;ne<E.length;){var he=E[ne++],Qe=he.tag,tt=E[ne++],dt=M[tt];if((Qe!==5&&Qe!==26&&Qe!==27||!qf(he))&&(_c(he,dt)&&(K.push(Po(dt)),++tt>Q&&(Q=tt)),tt<M.length))for(he=he.child;he!==null;)E.push(he,tt),he=he.sibling}if(Q<M.length){for(E=[];Q<M.length;Q++)E.push(Po(M[Q]));return`findAllNodes was able to match part of the selector:
  `+K.join(" > ")+`

No matching component was found for:
  `+E.join(" > ")}return null},_n.getPublicRootInstance=function(E){if(!(E=E.current).child)return null;switch(E.child.tag){case 27:case 5:return qA(E.child.stateNode);default:return E.child.stateNode}},_n.injectIntoDevTools=function(){var E={bundleType:0,version:Zg,rendererPackageName:h_,currentDispatcherRef:In,findFiberByHostInstance:Vf,reconcilerVersion:"19.0.0"};if(Gf!==null&&(E.rendererConfig=Gf),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")E=!1;else{var M=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(M.isDisabled||!M.supportsFiber)E=!0;else{try{Xf=M.inject(E),Na=M}catch{}E=!!M.checkDCE}}return E},_n.isAlreadyRendering=function(){return!1},_n.observeVisibleRects=function(E,M,Q,K){if(!Tu)throw Error(s(363));E=id(E,M);var ne=Zc(E,Q,K).disconnect;return{disconnect:function(){ne()}}},_n.shouldError=function(){return null},_n.shouldSuspend=function(){return!1},_n.startHostTransition=function(E,M,Q,K){if(E.tag!==5)throw Error(s(476));var ne=ih(E).queue;LA(E,ne,M,Qa,Q===null?r:function(){var he=ih(E).next.queue;return jo(E,he,{},Oo()),Q(K)})},_n.updateContainer=function(E,M,Q,K){var ne=M.current,he=Oo();return rd(ne,he,E,M,Q,K),he},_n.updateContainerSync=function(E,M,Q,K){return M.tag===0&&Xc(),rd(M.current,2,E,M,Q,K),2},_n},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})}(Xie)),Xie.exports}var tne,eOe=fM((tne||(tne=1,Kie.exports=ZPe()),Kie.exports)),ine=cce();const Aw=[];function uce(a,e,i=(r,s)=>r===s){if(a===e)return!0;if(!a||!e)return!1;const r=a.length;if(e.length!==r)return!1;for(let s=0;s<r;s++)if(!i(a[s],e[s]))return!1;return!0}function hce(a,e=null,i=!1,r={}){e===null&&(e=[a]);for(const u of Aw)if(uce(e,u.keys,u.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(u,"error"))throw u.error;if(Object.prototype.hasOwnProperty.call(u,"response"))return r.lifespan&&r.lifespan>0&&(u.timeout&&clearTimeout(u.timeout),u.timeout=setTimeout(u.remove,r.lifespan)),u.response;if(!i)throw u.promise}const s={keys:e,equal:r.equal,remove:()=>{const u=Aw.indexOf(s);u!==-1&&Aw.splice(u,1)},promise:(l=a,typeof l=="object"&&typeof l.then=="function"?a:a(...e)).then(u=>{s.response=u,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))}).catch(u=>s.error=u)};var l;if(Aw.push(s),!i)throw s.promise}const dce=(a,e,i)=>hce(a,e,!1,i);function Y7(a,e,i){if(!a)return;if(i(a)===!0)return a;let r=e?a.return:a.child;for(;r;){const s=Y7(r,e,i);if(s)return s;r=e?null:r.sibling}}function Ace(a){try{return Object.defineProperties(a,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch{return a}}const J7=Ace(Ce.createContext(null));class pce extends Ce.Component{render(){return Ce.createElement(J7.Provider,{value:this._reactInternals},this.props.children)}}function fce(){const a=Ce.useContext(J7);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ce.useId();return Ce.useMemo(()=>{for(const i of[a,a==null?void 0:a.alternate]){if(!i)continue;const r=Y7(i,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===e)return!0;l=l.next}});if(r)return r}},[a,e])}const tOe=Symbol.for("react.context"),iOe=a=>a!==null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===tOe;function nOe(){const a=function(){const e=fce(),[i]=Ce.useState(()=>new Map);i.clear();let r=e;for(;r;){const s=r.type;iOe(s)&&s!==J7&&!i.has(s)&&i.set(s,Ce.use(Ace(s))),r=r.return}return i}();return Ce.useMemo(()=>Array.from(a.keys()).reduce((e,i)=>r=>Ce.createElement(e,null,Ce.createElement(i.Provider,{...r,value:a.get(i)})),e=>Ce.createElement(pce,{...e})),[a])}function gce(a){let e=a.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const nne=a=>a&&a.isOrthographicCamera,rOe=a=>a!=null&&(typeof a=="string"||typeof a=="number"||a.isColor),mM=((a,e)=>typeof window<"u"&&(((a=window.document)==null?void 0:a.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?Ce.useLayoutEffect:Ce.useEffect;function mce(a){const e=Ce.useRef(a);return mM(()=>{e.current=a},[a]),e}function sOe({set:a}){return mM(()=>(a(new Promise(()=>null)),()=>a(!1)),[a]),null}const oOe=(a=>((a=class extends Ce.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),a))();function _ce(a){var e;const i=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(a)?Math.min(Math.max(a[0],i),a[1]):a}function LE(a){var e;return(e=a.__r3f)==null?void 0:e.root.getState()}const Ma={obj:a=>a===Object(a)&&!Ma.arr(a)&&typeof a!="function",fun:a=>typeof a=="function",str:a=>typeof a=="string",num:a=>typeof a=="number",boo:a=>typeof a=="boolean",und:a=>a===void 0,nul:a=>a===null,arr:a=>Array.isArray(a),equ(a,e,{arrays:i="shallow",objects:r="reference",strict:s=!0}={}){if(typeof a!=typeof e||!!a!=!!e)return!1;if(Ma.str(a)||Ma.num(a)||Ma.boo(a))return a===e;const l=Ma.obj(a);if(l&&r==="reference")return a===e;const u=Ma.arr(a);if(u&&i==="reference")return a===e;if((u||l)&&a===e)return!0;let A;for(A in a)if(!(A in e))return!1;if(l&&i==="shallow"&&r==="shallow"){for(A in s?e:a)if(!Ma.equ(a[A],e[A],{strict:s,objects:"reference"}))return!1}else for(A in s?e:a)if(a[A]!==e[A])return!1;if(Ma.und(A)){if(u&&a.length===0&&e.length===0||l&&Object.keys(a).length===0&&Object.keys(e).length===0)return!0;if(a!==e)return!1}return!0}},vce=["children","key","ref"];function aOe(a){const e={};for(const i in a)vce.includes(i)||(e[i]=a[i]);return e}function Uk(a,e,i,r){const s=a;let l=s==null?void 0:s.__r3f;return l||(l={root:e,type:i,parent:null,children:[],props:aOe(r),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=l)),l}function WT(a,e){let i=a[e];if(!e.includes("-"))return{root:a,key:e,target:i};i=a;for(const s of e.split("-")){var r;e=s,a=i,i=(r=i)==null?void 0:r[e]}return{root:a,key:e,target:i}}const rne=/-\d+$/;function kk(a,e){if(Ma.str(e.props.attach)){if(rne.test(e.props.attach)){const s=e.props.attach.replace(rne,""),{root:l,key:u}=WT(a.object,s);Array.isArray(l[u])||(l[u]=[])}const{root:i,key:r}=WT(a.object,e.props.attach);e.previousAttach=i[r],i[r]=e.object}else Ma.fun(e.props.attach)&&(e.previousAttach=e.props.attach(a.object,e.object))}function CU(a,e){if(Ma.str(e.props.attach)){const{root:i,key:r}=WT(a.object,e.props.attach),s=e.previousAttach;s===void 0?delete i[r]:i[r]=s}else e.previousAttach==null||e.previousAttach(a.object,e.object);delete e.previousAttach}const _z=[...vce,"args","dispose","attach","object","onUpdate","dispose"],sne=new Map;function lOe(a){let e=sne.get(a.constructor);try{e||(e=new a.constructor,sne.set(a.constructor,e))}catch{}return e}const cOe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],uOe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Py(a,e){var i;const r=a.__r3f,s=r&&gce(r).getState(),l=r==null?void 0:r.eventCount;for(const A in e){let g=e[A];if(_z.includes(A))continue;if(r&&uOe.test(A)){typeof g=="function"?r.handlers[A]=g:delete r.handlers[A],r.eventCount=Object.keys(r.handlers).length;continue}if(g===void 0)continue;let{root:_,key:b,target:x}=WT(a,A);if(x instanceof AS&&g instanceof AS)x.mask=g.mask;else if(x instanceof Si&&rOe(g))x.set(g);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&typeof x.copy=="function"&&g!=null&&g.constructor&&x.constructor===g.constructor)x.copy(g);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&Array.isArray(g))typeof x.fromArray=="function"?x.fromArray(g):x.set(...g);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&typeof g=="number")typeof x.setScalar=="function"?x.setScalar(g):x.set(g);else{var u;_[b]=g,s&&!s.linear&&cOe.includes(b)&&(u=_[b])!=null&&u.isTexture&&_[b].format===lo&&_[b].type===$a&&(_[b].colorSpace=rr)}}if(r!=null&&r.parent&&s!=null&&s.internal&&(i=r.object)!=null&&i.isObject3D&&l!==r.eventCount){const A=r.object,g=s.internal.interaction.indexOf(A);g>-1&&s.internal.interaction.splice(g,1),r.eventCount&&A.raycast!==null&&s.internal.interaction.push(A)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&BS(r),a}function BS(a){var e;if(!a.parent)return;a.props.onUpdate==null||a.props.onUpdate(a.object);const i=(e=a.root)==null||e.getState==null?void 0:e.getState();i&&i.internal.frames===0&&i.invalidate()}const Qd=a=>a==null?void 0:a.isObject3D;function KF(a){return(a.eventObject||a.object).uuid+"/"+a.index+a.instanceId}function yce(a,e,i,r){const s=i.get(e);s&&(i.delete(e),i.size===0&&(a.delete(r),s.target.releasePointerCapture(r)))}function hOe(a){function e(s){return s.filter(l=>["Move","Over","Enter","Out","Leave"].some(u=>{var A;return(A=l.__r3f)==null?void 0:A.handlers["onPointer"+u]}))}function i(s){const{internal:l}=a.getState();for(const u of l.hovered.values())if(!s.length||!s.find(A=>A.object===u.object&&A.index===u.index&&A.instanceId===u.instanceId)){const A=u.eventObject.__r3f;if(l.hovered.delete(KF(u)),A!=null&&A.eventCount){const g=A.handlers,_={...u,intersections:s};g.onPointerOut==null||g.onPointerOut(_),g.onPointerLeave==null||g.onPointerLeave(_)}}}function r(s,l){for(let u=0;u<l.length;u++){const A=l[u].__r3f;A==null||A.handlers.onPointerMissed==null||A.handlers.onPointerMissed(s)}}return{handlePointer:function(s){switch(s){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return l=>{const{internal:u}=a.getState();"pointerId"in l&&u.capturedMap.has(l.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(l.pointerId)&&(u.capturedMap.delete(l.pointerId),i([]))})}}return function(l){const{onPointerMissed:u,internal:A}=a.getState();A.lastEvent.current=l;const g=s==="onPointerMove",_=s==="onClick"||s==="onContextMenu"||s==="onDoubleClick",b=function(C,I){const F=a.getState(),L=new Set,U=[],P=I?I(F.internal.interaction):F.internal.interaction;for(let z=0;z<P.length;z++){const W=LE(P[z]);W&&(W.raycaster.camera=void 0)}F.previousRoot||F.events.compute==null||F.events.compute(C,F);let H=P.flatMap(function(z){const W=LE(z);return W&&W.events.enabled&&W.raycaster.camera!==null?(W.raycaster.camera===void 0&&(W.events.compute==null||W.events.compute(C,W,(j=W.previousRoot)==null?void 0:j.getState()),W.raycaster.camera===void 0&&(W.raycaster.camera=null)),W.raycaster.camera?W.raycaster.intersectObject(z,!0):[]):[];var j}).sort((z,W)=>{const j=LE(z.object),J=LE(W.object);return j&&J&&J.events.priority-j.events.priority||z.distance-W.distance}).filter(z=>{const W=KF(z);return!L.has(W)&&(L.add(W),!0)});F.events.filter&&(H=F.events.filter(H,F));for(const z of H){let W=z.object;for(;W;){var N;(N=W.__r3f)!=null&&N.eventCount&&U.push({...z,eventObject:W}),W=W.parent}}if("pointerId"in C&&F.internal.capturedMap.has(C.pointerId))for(let z of F.internal.capturedMap.get(C.pointerId).values())L.has(KF(z.intersection))||U.push(z.intersection);return U}(l,g?e:void 0),x=_?function(C){const{internal:I}=a.getState(),F=C.offsetX-I.initialClick[0],L=C.offsetY-I.initialClick[1];return Math.round(Math.sqrt(F*F+L*L))}(l):0;s==="onPointerDown"&&(A.initialClick=[l.offsetX,l.offsetY],A.initialHits=b.map(C=>C.eventObject)),_&&!b.length&&x<=2&&(r(l,A.interaction),u&&u(l)),g&&i(b),function(C,I,F,L){if(C.length){const U={stopped:!1};for(const P of C){let H=LE(P.object);if(H||P.object.traverseAncestors(N=>{const z=LE(N);if(z)return H=z,!1}),H){const{raycaster:N,pointer:z,camera:W,internal:j}=H,J=new Fe(z.x,z.y,0).unproject(W),ie=fe=>{var pe,xe;return(pe=(xe=j.capturedMap.get(fe))==null?void 0:xe.has(P.eventObject))!=null&&pe},ee=fe=>{const pe={intersection:P,target:I.target};j.capturedMap.has(fe)?j.capturedMap.get(fe).set(P.eventObject,pe):j.capturedMap.set(fe,new Map([[P.eventObject,pe]])),I.target.setPointerCapture(fe)},re=fe=>{const pe=j.capturedMap.get(fe);pe&&yce(j.capturedMap,P.eventObject,pe,fe)};let se={};for(let fe in I){let pe=I[fe];typeof pe!="function"&&(se[fe]=pe)}let ue={...P,...se,pointer:z,intersections:C,stopped:U.stopped,delta:F,unprojectedPoint:J,ray:N.ray,camera:W,stopPropagation(){const fe="pointerId"in I&&j.capturedMap.get(I.pointerId);(!fe||fe.has(P.eventObject))&&(ue.stopped=U.stopped=!0,j.hovered.size&&Array.from(j.hovered.values()).find(pe=>pe.eventObject===P.eventObject))&&i([...C.slice(0,C.indexOf(P)),P])},target:{hasPointerCapture:ie,setPointerCapture:ee,releasePointerCapture:re},currentTarget:{hasPointerCapture:ie,setPointerCapture:ee,releasePointerCapture:re},nativeEvent:I};if(L(ue),U.stopped===!0)break}}}}(b,l,x,function(C){const I=C.eventObject,F=I.__r3f;if(F==null||!F.eventCount)return;const L=F.handlers;if(g){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const U=KF(C),P=A.hovered.get(U);P?P.stopped&&C.stopPropagation():(A.hovered.set(U,C),L.onPointerOver==null||L.onPointerOver(C),L.onPointerEnter==null||L.onPointerEnter(C))}L.onPointerMove==null||L.onPointerMove(C)}else{const U=L[s];U?_&&!A.initialHits.includes(I)||(r(l,A.interaction.filter(P=>!A.initialHits.includes(P))),U(C)):_&&A.initialHits.includes(I)&&r(l,A.interaction.filter(P=>!A.initialHits.includes(P)))}})}}}}const one=a=>!(a==null||!a.render),bce=Ce.createContext(null),dOe=(a,e)=>{const i=(r=(_,b)=>{const x=new Fe,C=new Fe,I=new Fe;function F(N=b().camera,z=C,W=b().size){const{width:j,height:J,top:ie,left:ee}=W,re=j/J;z.isVector3?I.copy(z):I.set(...z);const se=N.getWorldPosition(x).distanceTo(I);if(nne(N))return{width:j/N.zoom,height:J/N.zoom,top:ie,left:ee,factor:1,distance:se,aspect:re};{const ue=N.fov*Math.PI/180,fe=2*Math.tan(ue/2)*se,pe=fe*(j/J);return{width:pe,height:fe,top:ie,left:ee,factor:j/pe,distance:se,aspect:re}}}let L;const U=N=>_(z=>({performance:{...z.performance,current:N}})),P=new ci;return{set:_,get:b,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(N=1)=>a(b(),N),advance:(N,z)=>e(N,z,b()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new A7,pointer:P,mouse:P,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const N=b();L&&clearTimeout(L),N.performance.current!==N.performance.min&&U(N.performance.min),L=setTimeout(()=>U(b().performance.max),N.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:F},setEvents:N=>_(z=>({...z,events:{...z.events,...N}})),setSize:(N,z,W=0,j=0)=>{const J=b().camera,ie={width:N,height:z,top:W,left:j};_(ee=>({size:ie,viewport:{...ee.viewport,...F(J,C,ie)}}))},setDpr:N=>_(z=>{const W=_ce(N);return{viewport:{...z.viewport,dpr:W,initialDpr:z.viewport.initialDpr||W}}}),setFrameloop:(N="always")=>{const z=b().clock;z.stop(),z.elapsedTime=0,N!=="never"&&(z.start(),z.elapsedTime=0),_(()=>({frameloop:N}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Ce.createRef(),active:!1,frames:0,priority:0,subscribe:(N,z,W)=>{const j=b().internal;return j.priority=j.priority+(z>0?1:0),j.subscribers.push({ref:N,priority:z,store:W}),j.subscribers=j.subscribers.sort((J,ie)=>J.priority-ie.priority),()=>{const J=b().internal;J!=null&&J.subscribers&&(J.priority=J.priority-(z>0?1:0),J.subscribers=J.subscribers.filter(ie=>ie.ref!==N))}}}}},r?Wie(r,s):Wie);var r,s;const l=i.getState();let u=l.size,A=l.viewport.dpr,g=l.camera;return i.subscribe(()=>{const{camera:_,size:b,viewport:x,gl:C,set:I}=i.getState();if(b.width!==u.width||b.height!==u.height||x.dpr!==A){u=b,A=x.dpr,function(L,U){L.manual||(nne(L)?(L.left=U.width/-2,L.right=U.width/2,L.top=U.height/2,L.bottom=U.height/-2):L.aspect=U.width/U.height,L.updateProjectionMatrix())}(_,b),x.dpr>0&&C.setPixelRatio(x.dpr);const F=typeof HTMLCanvasElement<"u"&&C.domElement instanceof HTMLCanvasElement;C.setSize(b.width,b.height,F)}_!==g&&(g=_,I(F=>({viewport:{...F.viewport,...F.viewport.getCurrentViewport(_)}})))}),i.subscribe(_=>a(_)),i};function wce(){const a=Ce.useContext(bce);if(!a)throw new Error("R3F: Hooks can only be used within the Canvas component!");return a}function Bg(a=i=>i,e){return wce()(a,e)}function xce(a,e=0){const i=wce(),r=i.getState().internal.subscribe,s=mce(a);return mM(()=>r(s,e,i),[e,r,i]),null}const ane=new WeakMap;function Cce(a,e){return function(i,...r){let s;var l,u;return typeof(l=i)=="function"&&(l==null||(u=l.prototype)==null?void 0:u.constructor)===l?(s=ane.get(i),s||(s=new i,ane.set(i,s))):s=i,a&&a(s),Promise.all(r.map(A=>new Promise((g,_)=>s.load(A,b=>{Qd(b==null?void 0:b.scene)&&Object.assign(b,function(x){const C={nodes:{},materials:{},meshes:{}};return x&&x.traverse(I=>{I.name&&(C.nodes[I.name]=I),I.material&&!C.materials[I.material.name]&&(C.materials[I.material.name]=I.material),I.isMesh&&!C.meshes[I.name]&&(C.meshes[I.name]=I)}),C}(b.scene)),g(b)},e,b=>_(new Error(`Could not load ${A}: ${b==null?void 0:b.message}`))))))}}function vz(a,e,i,r){const s=Array.isArray(e)?e:[e],l=dce(Cce(i,r),[a,...s],{equal:Ma.equ});return Array.isArray(e)?l:l[0]}function AOe(a){const e=eOe(a);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ce.version}),e}vz.preload=function(a,e,i){const r=Array.isArray(e)?e:[e];return((s,l,u)=>{hce(s,l,!0,u)})(Cce(i),[a,...r])},vz.clear=function(a,e){return(i=>{if(i===void 0||i.length===0)Aw.splice(0,Aw.length);else{const r=Aw.find(s=>uce(i,s.keys,s.equal));r&&r.remove()}})([a,...Array.isArray(e)?e:[e]])};const IS={},pOe=/^three(?=[A-Z])/,Lk=a=>`${a[0].toUpperCase()}${a.slice(1)}`;let fOe=0;function lne(a,e){const i=Lk(a),r=IS[i];if(a!=="primitive"&&!r)throw new Error(`R3F: ${i} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(a==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function cne(a){var e;a.isHidden&&(a.props.attach&&(e=a.parent)!=null&&e.object?kk(a.parent,a):Qd(a.object)&&a.props.visible!==!1&&(a.object.visible=!0),a.isHidden=!1,BS(a))}function Z7(a,e,i){const r=e.root.getState();if(a.parent||a.object===r.scene){if(!e.object){var s,l;const u=IS[Lk(e.type)];e.object=(s=e.props.object)!=null?s:new u(...(l=e.props.args)!=null?l:[]),e.object.__r3f=e}if(Py(e.object,e.props),e.props.attach)kk(a,e);else if(Qd(e.object)&&Qd(a.object)){const u=a.object.children.indexOf(i==null?void 0:i.object);if(i&&u!==-1){const A=a.object.children.indexOf(e.object);if(A!==-1){a.object.children.splice(A,1);const g=A<u?u-1:u;a.object.children.splice(g,0,e.object)}else e.object.parent=a.object,a.object.children.splice(u,0,e.object),e.object.dispatchEvent({type:"added"}),a.object.dispatchEvent({type:"childadded",child:e.object})}else a.object.add(e.object)}for(const u of e.children)Z7(e,u);BS(e)}}function G4(a,e){e&&(e.parent=a,a.children.push(e),Z7(a,e))}function une(a,e,i){if(!e||!i)return;e.parent=a;const r=a.children.indexOf(i);r!==-1?a.children.splice(r,0,e):a.children.push(e),Z7(a,e,i)}function Ece(a){if(typeof a.dispose=="function"){const e=()=>{try{a.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():ine.unstable_scheduleCallback(ine.unstable_IdlePriority,e)}}function yz(a,e,i){if(!e)return;e.parent=null;const r=a.children.indexOf(e);r!==-1&&a.children.splice(r,1),e.props.attach?CU(a,e):Qd(e.object)&&Qd(a.object)&&(a.object.remove(e.object),function(l,u){const{internal:A}=l.getState();A.interaction=A.interaction.filter(g=>g!==u),A.initialHits=A.initialHits.filter(g=>g!==u),A.hovered.forEach((g,_)=>{g.eventObject!==u&&g.object!==u||A.hovered.delete(_)}),A.capturedMap.forEach((g,_)=>{yce(A.capturedMap,u,g,_)})}(gce(e),e.object));const s=e.props.dispose!==null&&i!==!1;for(let l=e.children.length-1;l>=0;l--)yz(e,e.children[l],s);e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&Ece(e.object),i===void 0&&BS(e)}function gOe(a,e){for(const i of[a,a.alternate])if(i!==null)if(typeof i.ref=="function"){i.refCleanup==null||i.refCleanup();const r=i.ref(e);typeof r=="function"&&(i.refCleanup=r)}else i.ref&&(i.ref.current=e)}const XF=[],V4=()=>{},hne={};let YF=0;const bz=AOe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(a,e,i){var r;return lne(a=Lk(a)in IS?a:a.replace(pOe,""),e),a==="primitive"&&(r=e.object)!=null&&r.__r3f&&delete e.object.__r3f,Uk(e.object,i,a,e)},removeChild:yz,appendChild:G4,appendInitialChild:G4,insertBefore:une,appendChildToContainer(a,e){const i=a.getState().scene.__r3f;e&&i&&G4(i,e)},removeChildFromContainer(a,e){const i=a.getState().scene.__r3f;e&&i&&yz(i,e)},insertInContainerBefore(a,e,i){const r=a.getState().scene.__r3f;e&&i&&r&&une(r,e,i)},getRootHostContext:()=>hne,getChildHostContext:()=>hne,commitUpdate(a,e,i,r,s){var l,u,A;lne(e,r);let g=!1;if((a.type==="primitive"&&i.object!==r.object||((l=r.args)==null?void 0:l.length)!==((u=i.args)==null?void 0:u.length)||(A=r.args)!=null&&A.some((_,b)=>{var x;return _!==((x=i.args)==null?void 0:x[b])}))&&(g=!0),g)XF.push([a,{...r},s]);else{const _=function(b,x){const C={};for(const I in x)if(!_z.includes(I)&&!Ma.equ(x[I],b.props[I])){C[I]=x[I];for(const F in x)F.startsWith(`${I}-`)&&(C[F]=x[F])}for(const I in b.props){if(_z.includes(I)||x.hasOwnProperty(I))continue;const{root:F,key:L}=WT(b.object,I);if(F.constructor&&F.constructor.length===0){const U=lOe(F);Ma.und(U)||(C[L]=U[L])}else C[L]=0}return C}(a,r);Object.keys(_).length&&(Object.assign(a.props,_),Py(a.object,_))}(s.sibling===null||!(4&s.flags))&&function(){for(const[x]of XF){const C=x.parent;if(C){x.props.attach?CU(C,x):Qd(x.object)&&Qd(C.object)&&C.object.remove(x.object);for(const I of x.children)I.props.attach?CU(x,I):Qd(I.object)&&Qd(x.object)&&x.object.remove(I.object)}x.isHidden&&cne(x),x.object.__r3f&&delete x.object.__r3f,x.type!=="primitive"&&Ece(x.object)}for(const[x,C,I]of XF){x.props=C;const F=x.parent;if(F){var _,b;const L=IS[Lk(x.type)];x.object=(_=x.props.object)!=null?_:new L(...(b=x.props.args)!=null?b:[]),x.object.__r3f=x,gOe(I,x.object),Py(x.object,x.props),x.props.attach?kk(F,x):Qd(x.object)&&Qd(F.object)&&F.object.add(x.object);for(const U of x.children)U.props.attach?kk(x,U):Qd(U.object)&&Qd(x.object)&&x.object.add(U.object);BS(x)}}XF.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:a=>a==null?void 0:a.object,prepareForCommit:()=>null,preparePortalMount:a=>Uk(a.getState().scene,a,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(a){var e;a.isHidden||(a.props.attach&&(e=a.parent)!=null&&e.object?CU(a.parent,a):Qd(a.object)&&(a.object.visible=!1),a.isHidden=!0,BS(a))},unhideInstance:cne,createTextInstance:V4,hideTextInstance:V4,unhideTextInstance:V4,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Ce.createContext(null),setCurrentUpdatePriority(a){YF=a},getCurrentUpdatePriority:()=>YF,resolveUpdatePriority(){var a;if(YF!==0)return YF;switch(typeof window<"u"&&((a=window.event)==null?void 0:a.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return xU.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return xU.ContinuousEventPriority;default:return xU.DefaultEventPriority}},resetFormInstance(){}}),Hw=new Map,PE={objects:"shallow",strict:!1};function mOe(a){const e=Hw.get(a),i=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,l=r||dOe(Cz,Ane),u=i||bz.createContainer(l,xU.ConcurrentRoot,null,!1,null,"",s,s,s,null);let A,g;e||Hw.set(a,{fiber:u,store:l});let _=!1,b=null;return{async configure(x={}){let C;b=new Promise(Ee=>C=Ee);let{gl:I,size:F,scene:L,events:U,onCreated:P,shadows:H=!1,linear:N=!1,flat:z=!1,legacy:W=!1,orthographic:j=!1,frameloop:J="always",dpr:ie=[1,2],performance:ee,raycaster:re,camera:se,onPointerMissed:ue}=x,fe=l.getState(),pe=fe.gl;if(!fe.gl){const Ee={canvas:a,powerPreference:"high-performance",antialias:!0,alpha:!0},ke=typeof I=="function"?await I(Ee):I;pe=one(ke)?ke:new yL({...Ee,...I}),fe.set({gl:pe})}let xe=fe.raycaster;xe||fe.set({raycaster:xe=new m7});const{params:ce,..._e}=re||{};if(Ma.equ(_e,xe,PE)||Py(xe,{..._e}),Ma.equ(ce,xe.params,PE)||Py(xe,{params:{...xe.params,...ce}}),!fe.camera||fe.camera===g&&!Ma.equ(g,se,PE)){g=se;const Ee=se==null?void 0:se.isCamera,ke=Ee?se:j?new DA(0,0,0,0,.1,1e3):new xo(75,0,.1,1e3);Ee||(ke.position.z=5,se&&(Py(ke,se),ke.manual||("aspect"in se||"left"in se||"right"in se||"bottom"in se||"top"in se)&&(ke.manual=!0,ke.updateProjectionMatrix())),fe.camera||se!=null&&se.rotation||ke.lookAt(0,0,0)),fe.set({camera:ke}),xe.camera=ke}if(!fe.scene){let Ee;L!=null&&L.isScene?(Ee=L,Uk(Ee,l,"",{})):(Ee=new Tf,Uk(Ee,l,"",{}),L&&Py(Ee,L)),fe.set({scene:Ee})}U&&!fe.events.handlers&&fe.set({events:U(l)});const ye=function(Ee,ke){if(!ke&&typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement&&Ee.parentElement){const{width:je,height:Ie,top:ze,left:ht}=Ee.parentElement.getBoundingClientRect();return{width:je,height:Ie,top:ze,left:ht}}return!ke&&typeof OffscreenCanvas<"u"&&Ee instanceof OffscreenCanvas?{width:Ee.width,height:Ee.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...ke}}(a,F);if(Ma.equ(ye,fe.size,PE)||fe.setSize(ye.width,ye.height,ye.top,ye.left),ie&&fe.viewport.dpr!==_ce(ie)&&fe.setDpr(ie),fe.frameloop!==J&&fe.setFrameloop(J),fe.onPointerMissed||fe.set({onPointerMissed:ue}),ee&&!Ma.equ(ee,fe.performance,PE)&&fe.set(Ee=>({performance:{...Ee.performance,...ee}})),!fe.xr){var Oe;const Ee=(Ie,ze)=>{const ht=l.getState();ht.frameloop!=="never"&&Ane(Ie,!0,ht,ze)},ke=()=>{const Ie=l.getState();Ie.gl.xr.enabled=Ie.gl.xr.isPresenting,Ie.gl.xr.setAnimationLoop(Ie.gl.xr.isPresenting?Ee:null),Ie.gl.xr.isPresenting||Cz(Ie)},je={connect(){const Ie=l.getState().gl;Ie.xr.addEventListener("sessionstart",ke),Ie.xr.addEventListener("sessionend",ke)},disconnect(){const Ie=l.getState().gl;Ie.xr.removeEventListener("sessionstart",ke),Ie.xr.removeEventListener("sessionend",ke)}};typeof((Oe=pe.xr)==null?void 0:Oe.addEventListener)=="function"&&je.connect(),fe.set({xr:je})}if(pe.shadowMap){const Ee=pe.shadowMap.enabled,ke=pe.shadowMap.type;if(pe.shadowMap.enabled=!!H,Ma.boo(H))pe.shadowMap.type=WI;else if(Ma.str(H)){var ge;const je={basic:Gne,percentage:Ok,soft:WI,variance:Sg};pe.shadowMap.type=(ge=je[H])!=null?ge:WI}else Ma.obj(H)&&Object.assign(pe.shadowMap,H);Ee===pe.shadowMap.enabled&&ke===pe.shadowMap.type||(pe.shadowMap.needsUpdate=!0)}return lr.enabled=!W,_||(pe.outputColorSpace=N?Co:rr,pe.toneMapping=z?xf:Qk),fe.legacy!==W&&fe.set(()=>({legacy:W})),fe.linear!==N&&fe.set(()=>({linear:N})),fe.flat!==z&&fe.set(()=>({flat:z})),!I||Ma.fun(I)||one(I)||Ma.equ(I,pe,PE)||Py(pe,I),A=P,_=!0,C(),this},render(x){return _||b||this.configure(),b.then(()=>{bz.updateContainer(hu.jsx(_Oe,{store:l,children:x,onCreated:A,rootElement:a}),u,null,()=>{})}),l},unmount(){Sce(a)}}}function _Oe({store:a,children:e,onCreated:i,rootElement:r}){return mM(()=>{const s=a.getState();s.set(l=>({internal:{...l.internal,active:!0}})),i&&i(s),a.getState().events.connected||s.events.connect==null||s.events.connect(r)},[]),hu.jsx(bce.Provider,{value:a,children:e})}function Sce(a,e){const i=Hw.get(a),r=i==null?void 0:i.fiber;if(r){const s=i==null?void 0:i.store.getState();s&&(s.internal.active=!1),bz.updateContainer(null,r,null,()=>{s&&setTimeout(()=>{try{var l,u,A,g;s.events.disconnect==null||s.events.disconnect(),(l=s.gl)==null||(u=l.renderLists)==null||u.dispose==null||u.dispose(),(A=s.gl)==null||A.forceContextLoss==null||A.forceContextLoss(),(g=s.gl)!=null&&g.xr&&s.xr.disconnect(),function(_){_.type!=="Scene"&&(_.dispose==null||_.dispose());for(const b in _){const x=_[b];(x==null?void 0:x.type)!=="Scene"&&(x==null||x.dispose==null||x.dispose())}}(s.scene),Hw.delete(a)}catch{}},500)})}}const vOe=new Set,yOe=new Set,bOe=new Set;function q4(a,e){if(a.size)for(const{callback:i}of a.values())i(e)}function hT(a,e){switch(a){case"before":return q4(vOe,e);case"after":return q4(yOe,e);case"tail":return q4(bOe,e)}}let $4,W4;function wz(a,e,i){let r=e.clock.getDelta();e.frameloop==="never"&&typeof a=="number"&&(r=a-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=a),$4=e.internal.subscribers;for(let s=0;s<$4.length;s++)W4=$4[s],W4.ref.current(W4.store.getState(),r,i);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let j4,dne,OE,Pk=!1,xz=!1;function Bce(a){dne=requestAnimationFrame(Bce),Pk=!0,j4=0,hT("before",a),xz=!0;for(const i of Hw.values()){var e;OE=i.store.getState(),!OE.internal.active||!(OE.frameloop==="always"||OE.internal.frames>0)||(e=OE.gl.xr)!=null&&e.isPresenting||(j4+=wz(a,OE))}if(xz=!1,hT("after",a),j4===0)return hT("tail",a),Pk=!1,cancelAnimationFrame(dne)}function Cz(a,e=1){var i;if(!a)return Hw.forEach(r=>Cz(r.store.getState(),e));(i=a.gl.xr)!=null&&i.isPresenting||!a.internal.active||a.frameloop==="never"||(a.internal.frames=e>1?Math.min(60,a.internal.frames+e):xz?2:1,Pk||(Pk=!0,requestAnimationFrame(Bce)))}function Ane(a,e=!0,i,r){if(e&&hT("before",a),i)wz(a,i,r);else for(const s of Hw.values())wz(a,s.store.getState());e&&hT("after",a)}const K4={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wOe(a){const{handlePointer:e}=hOe(a);return{priority:1,enabled:!0,compute(i,r,s){r.pointer.set(i.offsetX/r.size.width*2-1,-i.offsetY/r.size.height*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(K4).reduce((i,r)=>({...i,[r]:e(r)}),{}),update:()=>{var i;const{events:r,internal:s}=a.getState();(i=s.lastEvent)!=null&&i.current&&r.handlers&&r.handlers.onPointerMove(s.lastEvent.current)},connect:i=>{const{set:r,events:s}=a.getState();if(s.disconnect==null||s.disconnect(),r(l=>({events:{...l.events,connected:i}})),s.handlers)for(const l in s.handlers){const u=s.handlers[l],[A,g]=K4[l];i.addEventListener(A,u,{passive:g})}},disconnect:()=>{const{set:i,events:r}=a.getState();if(r.connected){if(r.handlers)for(const s in r.handlers){const l=r.handlers[s],[u]=K4[s];r.connected.removeEventListener(u,l)}i(s=>({events:{...s.events,connected:void 0}}))}}}}function pne(a,e){let i;return(...r)=>{window.clearTimeout(i),i=window.setTimeout(()=>a(...r),e)}}function xOe({debounce:a,scroll:e,polyfill:i,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=Ce.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),A=Ce.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l,orientationHandler:null}),g=a?typeof a=="number"?a:a.scroll:null,_=a?typeof a=="number"?a:a.resize:null,b=Ce.useRef(!1);Ce.useEffect(()=>(b.current=!0,()=>{b.current=!1}));const[x,C,I]=Ce.useMemo(()=>{const U=()=>{if(!A.current.element)return;const{left:P,top:H,width:N,height:z,bottom:W,right:j,x:J,y:ie}=A.current.element.getBoundingClientRect(),ee={left:P,top:H,width:N,height:z,bottom:W,right:j,x:J,y:ie};A.current.element instanceof HTMLElement&&r&&(ee.height=A.current.element.offsetHeight,ee.width=A.current.element.offsetWidth),Object.freeze(ee),b.current&&!EOe(A.current.lastBounds,ee)&&u(A.current.lastBounds=ee)};return[U,_?pne(U,_):U,g?pne(U,g):U]},[u,r,g,_]);function F(){A.current.scrollContainers&&(A.current.scrollContainers.forEach(U=>U.removeEventListener("scroll",I,!0)),A.current.scrollContainers=null),A.current.resizeObserver&&(A.current.resizeObserver.disconnect(),A.current.resizeObserver=null),A.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",A.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",A.current.orientationHandler))}function L(){A.current.element&&(A.current.resizeObserver=new s(I),A.current.resizeObserver.observe(A.current.element),e&&A.current.scrollContainers&&A.current.scrollContainers.forEach(U=>U.addEventListener("scroll",I,{capture:!0,passive:!0})),A.current.orientationHandler=()=>{I()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",A.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",A.current.orientationHandler))}return function(U,P){Ce.useEffect(()=>{if(P){const H=U;return window.addEventListener("scroll",H,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",H,!0)}}},[U,P])}(I,!!e),function(U){Ce.useEffect(()=>{const P=U;return window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P)}},[U])}(C),Ce.useEffect(()=>{F(),L()},[e,I,C]),Ce.useEffect(()=>F,[]),[U=>{!U||U===A.current.element||(F(),A.current.element=U,A.current.scrollContainers=Ice(U),L())},l,x]}function Ice(a){const e=[];if(!a||a===document.body)return e;const{overflow:i,overflowX:r,overflowY:s}=window.getComputedStyle(a);return[i,r,s].some(l=>l==="auto"||l==="scroll")&&e.push(a),[...e,...Ice(a.parentElement)]}const COe=["x","y","top","bottom","left","right","width","height"],EOe=(a,e)=>COe.every(i=>a[i]===e[i]);function SOe({ref:a,children:e,fallback:i,resize:r,style:s,gl:l,events:u=wOe,eventSource:A,eventPrefix:g,shadows:_,linear:b,flat:x,legacy:C,orthographic:I,frameloop:F,dpr:L,performance:U,raycaster:P,camera:H,scene:N,onPointerMissed:z,onCreated:W,...j}){Ce.useMemo(()=>function(ye){if(typeof ye=="function"){const Oe=""+fOe++;return IS[Oe]=ye,Oe}Object.assign(IS,ye)}(FSe),[]);const J=function(){const ye=fce(),Oe=nOe();return Ce.useMemo(()=>({children:ge})=>{const Ee=Y7(ye,!0,ke=>ke.type===Ce.StrictMode)?Ce.StrictMode:Ce.Fragment;return hu.jsx(Ee,{children:hu.jsx(Oe,{children:ge})})},[ye,Oe])}(),[ie,ee]=xOe({scroll:!0,debounce:{scroll:50,resize:0},...r}),re=Ce.useRef(null),se=Ce.useRef(null);Ce.useImperativeHandle(a,()=>re.current);const ue=mce(z),[fe,pe]=Ce.useState(!1),[xe,ce]=Ce.useState(!1);if(fe)throw fe;if(xe)throw xe;const _e=Ce.useRef(null);return mM(()=>{const ye=re.current;if(ee.width>0&&ee.height>0&&ye){async function Oe(){await _e.current.configure({gl:l,scene:N,events:u,shadows:_,linear:b,flat:x,legacy:C,orthographic:I,frameloop:F,dpr:L,performance:U,raycaster:P,camera:H,size:ee,onPointerMissed:(...ge)=>ue.current==null?void 0:ue.current(...ge),onCreated:ge=>{var Ee;ge.events.connect==null||ge.events.connect(A?(Ee=A)&&Ee.hasOwnProperty("current")?A.current:A:se.current),g&&ge.setEvents({compute:(ke,je)=>{const Ie=ke[g+"X"],ze=ke[g+"Y"];je.pointer.set(Ie/je.size.width*2-1,-ze/je.size.height*2+1),je.raycaster.setFromCamera(je.pointer,je.camera)}}),W==null||W(ge)}}),_e.current.render(hu.jsx(J,{children:hu.jsx(oOe,{set:ce,children:hu.jsx(Ce.Suspense,{fallback:hu.jsx(sOe,{set:pe}),children:e??null})})}))}_e.current||(_e.current=mOe(ye)),Oe()}}),Ce.useEffect(()=>{const ye=re.current;if(ye)return()=>Sce(ye)},[]),hu.jsx("div",{ref:se,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:A?"none":"auto",...s},...j,children:hu.jsx("div",{ref:ie,style:{width:"100%",height:"100%"},children:hu.jsx("canvas",{ref:re,style:{display:"block"},children:i})})})}function BOe(a){return hu.jsx(pce,{children:hu.jsx(SOe,{...a})})}const qI=new Fe,X4=new Fe,IOe=new Fe,fne=new ci;function TOe(a,e,i){const r=qI.setFromMatrixPosition(a.matrixWorld);r.project(e);const s=i.width/2,l=i.height/2;return[r.x*s+s,-r.y*l+l]}const Ez=a=>Math.abs(a)<1e-10?0:a;function Tce(a,e,i=""){let r="matrix3d(";for(let s=0;s!==16;s++)r+=Ez(e[s]*a.elements[s])+(s!==15?",":")");return i+r}const MOe=(gne=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],a=>Tce(a,gne));var gne;const ROe=(a,e)=>Tce(a,(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1])(e),"translate(-50%,-50%)"),DOe=Ce.forwardRef(({children:a,eps:e=.001,style:i,className:r,prepend:s,center:l,fullscreen:u,portal:A,distanceFactor:g,sprite:_=!1,transform:b=!1,occlude:x,onOcclude:C,castShadow:I,receiveShadow:F,material:L,geometry:U,zIndexRange:P=[16777271,0],calculatePosition:H=TOe,as:N="div",wrapperClass:z,pointerEvents:W="auto",...j},J)=>{const{gl:ie,camera:ee,scene:re,size:se,raycaster:ue,events:fe,viewport:pe}=Bg(),[xe]=Ce.useState(()=>document.createElement(N)),ce=Ce.useRef(null),_e=Ce.useRef(null),ye=Ce.useRef(0),Oe=Ce.useRef([0,0]),ge=Ce.useRef(null),Ee=Ce.useRef(null),ke=(A==null?void 0:A.current)||fe.connected||ie.domElement.parentNode,je=Ce.useRef(null),Ie=Ce.useRef(!1),ze=Ce.useMemo(()=>x&&x!=="blending"||Array.isArray(x)&&x.length&&function(zt){return zt&&typeof zt=="object"&&"current"in zt}(x[0]),[x]);Ce.useLayoutEffect(()=>{const zt=ie.domElement;x&&x==="blending"?(zt.style.zIndex=`${Math.floor(P[0]/2)}`,zt.style.position="absolute",zt.style.pointerEvents="none"):(zt.style.zIndex=null,zt.style.position=null,zt.style.pointerEvents=null)},[x]),Ce.useLayoutEffect(()=>{if(_e.current){const zt=ce.current=Mz.createRoot(xe);if(re.updateMatrixWorld(),b)xe.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ei=H(_e.current,ee,se);xe.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ei[0]}px,${ei[1]}px,0);transform-origin:0 0;`}return ke&&(s?ke.prepend(xe):ke.appendChild(xe)),()=>{ke&&ke.removeChild(xe),zt.unmount()}}},[ke,b]),Ce.useLayoutEffect(()=>{z&&(xe.className=z)},[z]);const ht=Ce.useMemo(()=>b?{position:"absolute",top:0,left:0,width:se.width,height:se.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:l?"translate3d(-50%,-50%,0)":"none",...u&&{top:-se.height/2,left:-se.width/2,width:se.width,height:se.height},...i},[i,l,u,se,b]),lt=Ce.useMemo(()=>({position:"absolute",pointerEvents:W}),[W]);Ce.useLayoutEffect(()=>{var zt,ei;Ie.current=!1,b?(zt=ce.current)==null||zt.render(Ce.createElement("div",{ref:ge,style:ht},Ce.createElement("div",{ref:Ee,style:lt},Ce.createElement("div",{ref:J,className:r,style:i,children:a})))):(ei=ce.current)==null||ei.render(Ce.createElement("div",{ref:J,style:ht,className:r,children:a}))});const yt=Ce.useRef(!0);xce(zt=>{if(_e.current){ee.updateMatrixWorld(),_e.current.updateWorldMatrix(!0,!1);const ei=b?Oe.current:H(_e.current,ee,se);if(b||Math.abs(ye.current-ee.zoom)>e||Math.abs(Oe.current[0]-ei[0])>e||Math.abs(Oe.current[1]-ei[1])>e){const it=function(Wt,qe){const pt=qI.setFromMatrixPosition(Wt.matrixWorld),At=X4.setFromMatrixPosition(qe.matrixWorld),Se=pt.sub(At),me=qe.getWorldDirection(IOe);return Se.angleTo(me)>Math.PI/2}(_e.current,ee);let Dt=!1;ze&&(Array.isArray(x)?Dt=x.map(Wt=>Wt.current):x!=="blending"&&(Dt=[re]));const Be=yt.current;if(Dt){const Wt=function(qe,pt,At,Se){const me=qI.setFromMatrixPosition(qe.matrixWorld),$e=me.clone();$e.project(pt),fne.set($e.x,$e.y),At.setFromCamera(fne,pt);const Ct=At.intersectObjects(Se,!0);if(Ct.length){const wt=Ct[0].distance;return me.distanceTo(At.ray.origin)<wt}return!0}(_e.current,ee,ue,Dt);yt.current=Wt&&!it}else yt.current=!it;Be!==yt.current&&(C?C(!yt.current):xe.style.display=yt.current?"block":"none");const li=Math.floor(P[0]/2),bt=x?ze?[P[0],li]:[li-1,0]:P;if(xe.style.zIndex=`${function(Wt,qe,pt){if(qe instanceof xo||qe instanceof DA){const At=qI.setFromMatrixPosition(Wt.matrixWorld),Se=X4.setFromMatrixPosition(qe.matrixWorld),me=At.distanceTo(Se),$e=(pt[1]-pt[0])/(qe.far-qe.near),Ct=pt[1]-$e*qe.far;return Math.round($e*me+Ct)}}(_e.current,ee,bt)}`,b){const[Wt,qe]=[se.width/2,se.height/2],pt=ee.projectionMatrix.elements[5]*qe,{isOrthographicCamera:At,top:Se,left:me,bottom:$e,right:Ct}=ee,wt=MOe(ee.matrixWorldInverse),ft=At?`scale(${pt})translate(${Ez(-(Ct+me)/2)}px,${Ez((Se+$e)/2)}px)`:`translateZ(${pt}px)`;let Ot=_e.current.matrixWorld;_&&(Ot=ee.matrixWorldInverse.clone().transpose().copyPosition(Ot).scale(_e.current.scale),Ot.elements[3]=Ot.elements[7]=Ot.elements[11]=0,Ot.elements[15]=1),xe.style.width=se.width+"px",xe.style.height=se.height+"px",xe.style.perspective=At?"":`${pt}px`,ge.current&&Ee.current&&(ge.current.style.transform=`${ft}${wt}translate(${Wt}px,${qe}px)`,Ee.current.style.transform=ROe(Ot,1/((g||10)/400)))}else{const Wt=g===void 0?1:function(qe,pt){if(pt instanceof DA)return pt.zoom;if(pt instanceof xo){const At=qI.setFromMatrixPosition(qe.matrixWorld),Se=X4.setFromMatrixPosition(pt.matrixWorld),me=pt.fov*Math.PI/180,$e=At.distanceTo(Se);return 1/(2*Math.tan(me/2)*$e)}return 1}(_e.current,ee)*g;xe.style.transform=`translate3d(${ei[0]}px,${ei[1]}px,0) scale(${Wt})`}Oe.current=ei,ye.current=ee.zoom}}if(!ze&&je.current&&!Ie.current)if(b){if(ge.current){const ei=ge.current.children[0];if(ei!=null&&ei.clientWidth&&ei!=null&&ei.clientHeight){const{isOrthographicCamera:it}=ee;if(it||U)j.scale&&(Array.isArray(j.scale)?j.scale instanceof Fe?je.current.scale.copy(j.scale.clone().divideScalar(1)):je.current.scale.set(1/j.scale[0],1/j.scale[1],1/j.scale[2]):je.current.scale.setScalar(1/j.scale));else{const Dt=(g||10)/400,Be=ei.clientWidth*Dt,li=ei.clientHeight*Dt;je.current.scale.set(Be,li,1)}Ie.current=!0}}}else{const ei=xe.children[0];if(ei!=null&&ei.clientWidth&&ei!=null&&ei.clientHeight){const it=1/pe.factor,Dt=ei.clientWidth*it,Be=ei.clientHeight*it;je.current.scale.set(Dt,Be,1),Ie.current=!0}je.current.lookAt(zt.camera.position)}});const Nt=Ce.useMemo(()=>({vertexShader:b?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[b]);return Ce.createElement("group",Fa({},j,{ref:_e}),x&&!ze&&Ce.createElement("mesh",{castShadow:I,receiveShadow:F,ref:je},U||Ce.createElement("planeGeometry",null),L||Ce.createElement("shaderMaterial",{side:Ll,vertexShader:Nt.vertexShader,fragmentShader:Nt.fragmentShader})))}),FOe=a=>a,mne=a=>{const e=lce(a),i=r=>function(s,l=FOe){const u=Ye.useSyncExternalStore(s.subscribe,()=>l(s.getState()),()=>l(s.getInitialState()));return Ye.useDebugValue(u),u}(e,r);return Object.assign(i,e),i};let MI=0;const UOe=(a=>a?mne(a):mne)(a=>(qE.onStart=(e,i,r)=>{a({active:!0,item:e,loaded:i,total:r,progress:(i-MI)/(r-MI)*100})},qE.onLoad=()=>{a({active:!1})},qE.onError=e=>a(i=>({errors:[...i.errors,e]})),qE.onProgress=(e,i,r)=>{i===r&&(MI=r),a({active:!0,item:e,loaded:i,total:r,progress:(i-MI)/(r-MI)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));var kOe=Object.defineProperty,LOe=(a,e,i)=>(((r,s,l)=>{s in r?kOe(r,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[s]=l})(a,e+"",i),i);class POe{constructor(){LOe(this,"_listeners")}addEventListener(e,i){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(i)===-1&&r[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(i);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,l=r.length;s<l;s++)r[s].call(this,e);e.target=null}}}var OOe=Object.defineProperty,Hn=(a,e,i)=>(((r,s,l)=>{s in r?OOe(r,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[s]=l})(a,typeof e!="symbol"?e+"":e,i),i);const JF=new Gw,_ne=new Iv,QOe=Math.cos(Math.PI/180*70),vne=(a,e)=>(a%e+e)%e;let NOe=class extends POe{constructor(a,e){super(),Hn(this,"object"),Hn(this,"domElement"),Hn(this,"enabled",!0),Hn(this,"target",new Fe),Hn(this,"minDistance",0),Hn(this,"maxDistance",1/0),Hn(this,"minZoom",0),Hn(this,"maxZoom",1/0),Hn(this,"minPolarAngle",0),Hn(this,"maxPolarAngle",Math.PI),Hn(this,"minAzimuthAngle",-1/0),Hn(this,"maxAzimuthAngle",1/0),Hn(this,"enableDamping",!1),Hn(this,"dampingFactor",.05),Hn(this,"enableZoom",!0),Hn(this,"zoomSpeed",1),Hn(this,"enableRotate",!0),Hn(this,"rotateSpeed",1),Hn(this,"enablePan",!0),Hn(this,"panSpeed",1),Hn(this,"screenSpacePanning",!0),Hn(this,"keyPanSpeed",7),Hn(this,"zoomToCursor",!1),Hn(this,"autoRotate",!1),Hn(this,"autoRotateSpeed",2),Hn(this,"reverseOrbit",!1),Hn(this,"reverseHorizontalOrbit",!1),Hn(this,"reverseVerticalOrbit",!1),Hn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Hn(this,"mouseButtons",{LEFT:j1.ROTATE,MIDDLE:j1.DOLLY,RIGHT:j1.PAN}),Hn(this,"touches",{ONE:K1.ROTATE,TWO:K1.DOLLY_PAN}),Hn(this,"target0"),Hn(this,"position0"),Hn(this,"zoom0"),Hn(this,"_domElementKeyEvents",null),Hn(this,"getPolarAngle"),Hn(this,"getAzimuthalAngle"),Hn(this,"setPolarAngle"),Hn(this,"setAzimuthalAngle"),Hn(this,"getDistance"),Hn(this,"getZoomScale"),Hn(this,"listenToKeyEvents"),Hn(this,"stopListenToKeyEvents"),Hn(this,"saveState"),Hn(this,"reset"),Hn(this,"update"),Hn(this,"connect"),Hn(this,"dispose"),Hn(this,"dollyIn"),Hn(this,"dollyOut"),Hn(this,"getScale"),Hn(this,"setScale"),this.object=a,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>_.phi,this.getAzimuthalAngle=()=>_.theta,this.setPolarAngle=qe=>{let pt=vne(qe,2*Math.PI),At=_.phi;At<0&&(At+=2*Math.PI),pt<0&&(pt+=2*Math.PI);let Se=Math.abs(pt-At);2*Math.PI-Se<Se&&(pt<At?pt+=2*Math.PI:At+=2*Math.PI),b.phi=pt-At,i.update()},this.setAzimuthalAngle=qe=>{let pt=vne(qe,2*Math.PI),At=_.theta;At<0&&(At+=2*Math.PI),pt<0&&(pt+=2*Math.PI);let Se=Math.abs(pt-At);2*Math.PI-Se<Se&&(pt<At?pt+=2*Math.PI:At+=2*Math.PI),b.theta=pt-At,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=qe=>{qe.addEventListener("keydown",Be),this._domElementKeyEvents=qe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Be),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),A=u.NONE},this.update=(()=>{const qe=new Fe,pt=new Fe(0,1,0),At=new Ys().setFromUnitVectors(a.up,pt),Se=At.clone().invert(),me=new Fe,$e=new Ys,Ct=2*Math.PI;return function(){const wt=i.object.position;At.setFromUnitVectors(a.up,pt),Se.copy(At).invert(),qe.copy(wt).sub(i.target),qe.applyQuaternion(At),_.setFromVector3(qe),i.autoRotate&&A===u.NONE&&ue(2*Math.PI/60/60*i.autoRotateSpeed),i.enableDamping?(_.theta+=b.theta*i.dampingFactor,_.phi+=b.phi*i.dampingFactor):(_.theta+=b.theta,_.phi+=b.phi);let ft=i.minAzimuthAngle,Ot=i.maxAzimuthAngle;isFinite(ft)&&isFinite(Ot)&&(ft<-Math.PI?ft+=Ct:ft>Math.PI&&(ft-=Ct),Ot<-Math.PI?Ot+=Ct:Ot>Math.PI&&(Ot-=Ct),_.theta=ft<=Ot?Math.max(ft,Math.min(Ot,_.theta)):_.theta>(ft+Ot)/2?Math.max(ft,_.theta):Math.min(Ot,_.theta)),_.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,_.phi)),_.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(C,i.dampingFactor):i.target.add(C),i.zoomToCursor&&ie||i.object.isOrthographicCamera?_.radius=Ee(_.radius):_.radius=Ee(_.radius*x),qe.setFromSpherical(_),qe.applyQuaternion(Se),wt.copy(i.target).add(qe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(b.theta*=1-i.dampingFactor,b.phi*=1-i.dampingFactor,C.multiplyScalar(1-i.dampingFactor)):(b.set(0,0,0),C.set(0,0,0));let Gt=!1;if(i.zoomToCursor&&ie){let si=null;if(i.object instanceof xo&&i.object.isPerspectiveCamera){const $t=qe.length();si=Ee($t*x);const ti=$t-si;i.object.position.addScaledVector(j,ti),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const $t=new Fe(J.x,J.y,0);$t.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/x)),i.object.updateProjectionMatrix(),Gt=!0;const ti=new Fe(J.x,J.y,0);ti.unproject(i.object),i.object.position.sub(ti).add($t),i.object.updateMatrixWorld(),si=qe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;si!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(si).add(i.object.position):(JF.origin.copy(i.object.position),JF.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(JF.direction))<QOe?a.lookAt(i.target):(_ne.setFromNormalAndCoplanarPoint(i.object.up,i.target),JF.intersectPlane(_ne,i.target))))}else i.object instanceof DA&&i.object.isOrthographicCamera&&(Gt=x!==1,Gt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/x)),i.object.updateProjectionMatrix()));return x=1,ie=!1,!!(Gt||me.distanceToSquared(i.object.position)>g||8*(1-$e.dot(i.object.quaternion))>g)&&(i.dispatchEvent(r),me.copy(i.object.position),$e.copy(i.object.quaternion),Gt=!1,!0)}})(),this.connect=qe=>{i.domElement=qe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",li),i.domElement.addEventListener("pointerdown",zt),i.domElement.addEventListener("pointercancel",it),i.domElement.addEventListener("wheel",Dt)},this.dispose=()=>{var qe,pt,At,Se,me,$e;i.domElement&&(i.domElement.style.touchAction="auto"),(qe=i.domElement)==null||qe.removeEventListener("contextmenu",li),(pt=i.domElement)==null||pt.removeEventListener("pointerdown",zt),(At=i.domElement)==null||At.removeEventListener("pointercancel",it),(Se=i.domElement)==null||Se.removeEventListener("wheel",Dt),(me=i.domElement)==null||me.ownerDocument.removeEventListener("pointermove",ei),($e=i.domElement)==null||$e.ownerDocument.removeEventListener("pointerup",it),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Be)};const i=this,r={type:"change"},s={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let A=u.NONE;const g=1e-6,_=new vw,b=new vw;let x=1;const C=new Fe,I=new ci,F=new ci,L=new ci,U=new ci,P=new ci,H=new ci,N=new ci,z=new ci,W=new ci,j=new Fe,J=new ci;let ie=!1;const ee=[],re={};function se(){return Math.pow(.95,i.zoomSpeed)}function ue(qe){i.reverseOrbit||i.reverseHorizontalOrbit?b.theta+=qe:b.theta-=qe}function fe(qe){i.reverseOrbit||i.reverseVerticalOrbit?b.phi+=qe:b.phi-=qe}const pe=(()=>{const qe=new Fe;return function(pt,At){qe.setFromMatrixColumn(At,0),qe.multiplyScalar(-pt),C.add(qe)}})(),xe=(()=>{const qe=new Fe;return function(pt,At){i.screenSpacePanning===!0?qe.setFromMatrixColumn(At,1):(qe.setFromMatrixColumn(At,0),qe.crossVectors(i.object.up,qe)),qe.multiplyScalar(pt),C.add(qe)}})(),ce=(()=>{const qe=new Fe;return function(pt,At){const Se=i.domElement;if(Se&&i.object instanceof xo&&i.object.isPerspectiveCamera){const me=i.object.position;qe.copy(me).sub(i.target);let $e=qe.length();$e*=Math.tan(i.object.fov/2*Math.PI/180),pe(2*pt*$e/Se.clientHeight,i.object.matrix),xe(2*At*$e/Se.clientHeight,i.object.matrix)}else Se&&i.object instanceof DA&&i.object.isOrthographicCamera?(pe(pt*(i.object.right-i.object.left)/i.object.zoom/Se.clientWidth,i.object.matrix),xe(At*(i.object.top-i.object.bottom)/i.object.zoom/Se.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function _e(qe){i.object instanceof xo&&i.object.isPerspectiveCamera||i.object instanceof DA&&i.object.isOrthographicCamera?x=qe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ye(qe){_e(x/qe)}function Oe(qe){_e(x*qe)}function ge(qe){if(!i.zoomToCursor||!i.domElement)return;ie=!0;const pt=i.domElement.getBoundingClientRect(),At=qe.clientX-pt.left,Se=qe.clientY-pt.top,me=pt.width,$e=pt.height;J.x=At/me*2-1,J.y=-Se/$e*2+1,j.set(J.x,J.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ee(qe){return Math.max(i.minDistance,Math.min(i.maxDistance,qe))}function ke(qe){I.set(qe.clientX,qe.clientY)}function je(qe){U.set(qe.clientX,qe.clientY)}function Ie(){if(ee.length==1)I.set(ee[0].pageX,ee[0].pageY);else{const qe=.5*(ee[0].pageX+ee[1].pageX),pt=.5*(ee[0].pageY+ee[1].pageY);I.set(qe,pt)}}function ze(){if(ee.length==1)U.set(ee[0].pageX,ee[0].pageY);else{const qe=.5*(ee[0].pageX+ee[1].pageX),pt=.5*(ee[0].pageY+ee[1].pageY);U.set(qe,pt)}}function ht(){const qe=ee[0].pageX-ee[1].pageX,pt=ee[0].pageY-ee[1].pageY,At=Math.sqrt(qe*qe+pt*pt);N.set(0,At)}function lt(qe){if(ee.length==1)F.set(qe.pageX,qe.pageY);else{const At=Wt(qe),Se=.5*(qe.pageX+At.x),me=.5*(qe.pageY+At.y);F.set(Se,me)}L.subVectors(F,I).multiplyScalar(i.rotateSpeed);const pt=i.domElement;pt&&(ue(2*Math.PI*L.x/pt.clientHeight),fe(2*Math.PI*L.y/pt.clientHeight)),I.copy(F)}function yt(qe){if(ee.length==1)P.set(qe.pageX,qe.pageY);else{const pt=Wt(qe),At=.5*(qe.pageX+pt.x),Se=.5*(qe.pageY+pt.y);P.set(At,Se)}H.subVectors(P,U).multiplyScalar(i.panSpeed),ce(H.x,H.y),U.copy(P)}function Nt(qe){const pt=Wt(qe),At=qe.pageX-pt.x,Se=qe.pageY-pt.y,me=Math.sqrt(At*At+Se*Se);z.set(0,me),W.set(0,Math.pow(z.y/N.y,i.zoomSpeed)),ye(W.y),N.copy(z)}function zt(qe){var pt,At;i.enabled!==!1&&(ee.length===0&&((pt=i.domElement)==null||pt.ownerDocument.addEventListener("pointermove",ei),(At=i.domElement)==null||At.ownerDocument.addEventListener("pointerup",it)),function(Se){ee.push(Se)}(qe),qe.pointerType==="touch"?function(Se){switch(bt(Se),ee.length){case 1:switch(i.touches.ONE){case K1.ROTATE:if(i.enableRotate===!1)return;Ie(),A=u.TOUCH_ROTATE;break;case K1.PAN:if(i.enablePan===!1)return;ze(),A=u.TOUCH_PAN;break;default:A=u.NONE}break;case 2:switch(i.touches.TWO){case K1.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;i.enableZoom&&ht(),i.enablePan&&ze(),A=u.TOUCH_DOLLY_PAN;break;case K1.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;i.enableZoom&&ht(),i.enableRotate&&Ie(),A=u.TOUCH_DOLLY_ROTATE;break;default:A=u.NONE}break;default:A=u.NONE}A!==u.NONE&&i.dispatchEvent(s)}(qe):function(Se){let me;switch(Se.button){case 0:me=i.mouseButtons.LEFT;break;case 1:me=i.mouseButtons.MIDDLE;break;case 2:me=i.mouseButtons.RIGHT;break;default:me=-1}switch(me){case j1.DOLLY:if(i.enableZoom===!1)return;(function($e){ge($e),N.set($e.clientX,$e.clientY)})(Se),A=u.DOLLY;break;case j1.ROTATE:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(i.enablePan===!1)return;je(Se),A=u.PAN}else{if(i.enableRotate===!1)return;ke(Se),A=u.ROTATE}break;case j1.PAN:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(i.enableRotate===!1)return;ke(Se),A=u.ROTATE}else{if(i.enablePan===!1)return;je(Se),A=u.PAN}break;default:A=u.NONE}A!==u.NONE&&i.dispatchEvent(s)}(qe))}function ei(qe){i.enabled!==!1&&(qe.pointerType==="touch"?function(pt){switch(bt(pt),A){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;lt(pt),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;yt(pt),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;(function(At){i.enableZoom&&Nt(At),i.enablePan&&yt(At)})(pt),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;(function(At){i.enableZoom&&Nt(At),i.enableRotate&&lt(At)})(pt),i.update();break;default:A=u.NONE}}(qe):function(pt){if(i.enabled!==!1)switch(A){case u.ROTATE:if(i.enableRotate===!1)return;(function(At){F.set(At.clientX,At.clientY),L.subVectors(F,I).multiplyScalar(i.rotateSpeed);const Se=i.domElement;Se&&(ue(2*Math.PI*L.x/Se.clientHeight),fe(2*Math.PI*L.y/Se.clientHeight)),I.copy(F),i.update()})(pt);break;case u.DOLLY:if(i.enableZoom===!1)return;(function(At){z.set(At.clientX,At.clientY),W.subVectors(z,N),W.y>0?ye(se()):W.y<0&&Oe(se()),N.copy(z),i.update()})(pt);break;case u.PAN:if(i.enablePan===!1)return;(function(At){P.set(At.clientX,At.clientY),H.subVectors(P,U).multiplyScalar(i.panSpeed),ce(H.x,H.y),U.copy(P),i.update()})(pt)}}(qe))}function it(qe){var pt,At,Se;(function(me){delete re[me.pointerId];for(let $e=0;$e<ee.length;$e++)if(ee[$e].pointerId==me.pointerId)return void ee.splice($e,1)})(qe),ee.length===0&&((pt=i.domElement)==null||pt.releasePointerCapture(qe.pointerId),(At=i.domElement)==null||At.ownerDocument.removeEventListener("pointermove",ei),(Se=i.domElement)==null||Se.ownerDocument.removeEventListener("pointerup",it)),i.dispatchEvent(l),A=u.NONE}function Dt(qe){i.enabled===!1||i.enableZoom===!1||A!==u.NONE&&A!==u.ROTATE||(qe.preventDefault(),i.dispatchEvent(s),function(pt){ge(pt),pt.deltaY<0?Oe(se()):pt.deltaY>0&&ye(se()),i.update()}(qe),i.dispatchEvent(l))}function Be(qe){i.enabled!==!1&&i.enablePan!==!1&&function(pt){let At=!1;switch(pt.code){case i.keys.UP:ce(0,i.keyPanSpeed),At=!0;break;case i.keys.BOTTOM:ce(0,-i.keyPanSpeed),At=!0;break;case i.keys.LEFT:ce(i.keyPanSpeed,0),At=!0;break;case i.keys.RIGHT:ce(-i.keyPanSpeed,0),At=!0}At&&(pt.preventDefault(),i.update())}(qe)}function li(qe){i.enabled!==!1&&qe.preventDefault()}function bt(qe){let pt=re[qe.pointerId];pt===void 0&&(pt=new ci,re[qe.pointerId]=pt),pt.set(qe.pageX,qe.pageY)}function Wt(qe){const pt=qe.pointerId===ee[0].pointerId?ee[1]:ee[0];return re[pt.pointerId]}this.dollyIn=(qe=se())=>{Oe(qe),i.update()},this.dollyOut=(qe=se())=>{ye(qe),i.update()},this.getScale=()=>x,this.setScale=qe=>{_e(qe),i.update()},this.getZoomScale=()=>se(),e!==void 0&&this.connect(e),this.update()}};function HOe(){var a=Object.create(null);function e(r,s){var l=r.id,u=r.name,A=r.dependencies;A===void 0&&(A=[]);var g=r.init;g===void 0&&(g=function(){});var _=r.getTransferables;if(_===void 0&&(_=null),!a[l])try{A=A.map(function(x){return x&&x.isWorkerModule&&(e(x,function(C){if(C instanceof Error)throw C}),x=a[x.id].value),x}),g=i("<"+u+">.init",g),_&&(_=i("<"+u+">.getTransferables",_));var b=null;typeof g=="function"?b=g.apply(void 0,A):console.error("worker module init function failed to rehydrate"),a[l]={id:l,value:b,getTransferables:_},s(b)}catch(x){x&&x.noLog||console.error(x),s(x)}}function i(r,s){var l=void 0;self.troikaDefine=function(A){return l=A};var u=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(A){console.error(A)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(r){var s=r.data,l=s.messageId,u=s.action,A=s.data;try{u==="registerModule"&&e(A,function(g){g instanceof Error?postMessage({messageId:l,success:!1,error:g.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof g=="function"}})}),u==="callModule"&&function(g,_){var b,x=g.id,C=g.args;a[x]&&typeof a[x].value=="function"||_(new Error("Worker module "+x+": not found or its 'init' did not return a function"));try{var I=(b=a[x]).value.apply(b,C);I&&typeof I.then=="function"?I.then(F,function(L){return _(L instanceof Error?L:new Error(""+L))}):F(I)}catch(L){_(L)}function F(L){try{var U=a[x].getTransferables&&a[x].getTransferables(L);U&&Array.isArray(U)&&U.length||(U=void 0),_(L,U)}catch(P){console.error(P),_(P)}}}(A,function(g,_){g instanceof Error?postMessage({messageId:l,success:!1,error:g.message}):postMessage({messageId:l,success:!0,result:g},_||void 0)})}catch(g){postMessage({messageId:l,success:!1,error:g.stack})}})}var Mce=function(){var a=!1;if(typeof window<"u"&&window.document!==void 0)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),a=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return Mce=function(){return a},a},zOe=0,GOe=0,Y4=!1,dT=Object.create(null),AT=Object.create(null),J4=Object.create(null);function GS(a){if(!(a&&typeof a.init=="function"||Y4))throw new Error("requires `options.init` function");var e=a.dependencies,i=a.init,r=a.getTransferables,s=a.workerId,l=function(b){var x=function(){for(var C=[],I=arguments.length;I--;)C[I]=arguments[I];return x._getInitResult().then(function(F){if(typeof F=="function")return F.apply(void 0,C);throw new Error("Worker module function was called but `init` did not return a callable function")})};return x._getInitResult=function(){var C=b.dependencies,I=b.init;C=Array.isArray(C)?C.map(function(L){return L&&(L=L.onMainThread||L)._getInitResult&&(L=L._getInitResult()),L}):[];var F=Promise.all(C).then(function(L){return I.apply(null,L)});return x._getInitResult=function(){return F},F},x}(a);s==null&&(s="#default");var u="workerModule"+ ++zOe,A=a.name||u,g=null;function _(){for(var b=[],x=arguments.length;x--;)b[x]=arguments[x];if(!Mce())return l.apply(void 0,b);if(!g){g=yne(s,"registerModule",_.workerModuleData);var C=function(){g=null,AT[s].delete(C)};(AT[s]||(AT[s]=new Set)).add(C)}return g.then(function(I){if(I.isCallable)return yne(s,"callModule",{id:u,args:b});throw new Error("Worker module function was called but `init` did not return a callable function")})}return e=e&&e.map(function(b){return typeof b!="function"||b.workerModuleData||(Y4=!0,b=GS({workerId:s,name:"<"+A+"> function dependency: "+b.name,init:`function(){return (
`+EU(b)+`
)}`}),Y4=!1),b&&b.workerModuleData&&(b=b.workerModuleData),b}),_.workerModuleData={isWorkerModule:!0,id:u,name:A,dependencies:e,init:EU(i),getTransferables:r&&EU(r)},_.onMainThread=l,_}function EU(a){var e=a.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function yne(a,e,i){return new Promise(function(r,s){var l=++GOe;J4[l]=function(u){u.success?r(u.result):s(new Error("Error in worker "+e+" call: "+u.error))},function(u){var A=dT[u];if(!A){var g=EU(HOe);(A=dT[u]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+u.replace(/\*/g,"")+` **/

;(`+g+")()"],{type:"application/javascript"})))).onmessage=function(_){var b=_.data,x=b.messageId,C=J4[x];if(!C)throw new Error("WorkerModule response with empty or unknown messageId");delete J4[x],C(b)}}return A}(a).postMessage({messageId:l,action:e,data:i})})}function Rce(){var a=function(e){function i(ue,fe,pe,xe,ce,_e,ye,Oe){var ge=1-ye;Oe.x=ge*ge*ue+2*ge*ye*pe+ye*ye*ce,Oe.y=ge*ge*fe+2*ge*ye*xe+ye*ye*_e}function r(ue,fe,pe,xe,ce,_e,ye,Oe,ge,Ee){var ke=1-ge;Ee.x=ke*ke*ke*ue+3*ke*ke*ge*pe+3*ke*ge*ge*ce+ge*ge*ge*ye,Ee.y=ke*ke*ke*fe+3*ke*ke*ge*xe+3*ke*ge*ge*_e+ge*ge*ge*Oe}function s(ue,fe){for(var pe,xe,ce,_e,ye,Oe=/([MLQCZ])([^MLQCZ]*)/g;pe=Oe.exec(ue);){var ge=pe[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Ee){return parseFloat(Ee)});switch(pe[1]){case"M":_e=xe=ge[0],ye=ce=ge[1];break;case"L":ge[0]===_e&&ge[1]===ye||fe("L",_e,ye,_e=ge[0],ye=ge[1]);break;case"Q":fe("Q",_e,ye,_e=ge[2],ye=ge[3],ge[0],ge[1]);break;case"C":fe("C",_e,ye,_e=ge[4],ye=ge[5],ge[0],ge[1],ge[2],ge[3]);break;case"Z":_e===xe&&ye===ce||fe("L",_e,ye,xe,ce)}}}function l(ue,fe,pe){pe===void 0&&(pe=16);var xe={x:0,y:0};s(ue,function(ce,_e,ye,Oe,ge,Ee,ke,je,Ie){switch(ce){case"L":fe(_e,ye,Oe,ge);break;case"Q":for(var ze=_e,ht=ye,lt=1;lt<pe;lt++)i(_e,ye,Ee,ke,Oe,ge,lt/(pe-1),xe),fe(ze,ht,xe.x,xe.y),ze=xe.x,ht=xe.y;break;case"C":for(var yt=_e,Nt=ye,zt=1;zt<pe;zt++)r(_e,ye,Ee,ke,je,Ie,Oe,ge,zt/(pe-1),xe),fe(yt,Nt,xe.x,xe.y),yt=xe.x,Nt=xe.y}})}var u="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",A=new WeakMap,g={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function _(ue,fe){var pe=ue.getContext?ue.getContext("webgl",g):ue,xe=A.get(pe);if(!xe){let ke=function(yt){var Nt=_e[yt];if(!Nt&&!(Nt=_e[yt]=pe.getExtension(yt)))throw new Error(yt+" not supported");return Nt},je=function(yt,Nt){var zt=pe.createShader(Nt);return pe.shaderSource(zt,yt),pe.compileShader(zt),zt},Ie=function(yt,Nt,zt,ei){if(!ye[yt]){var it={},Dt={},Be=pe.createProgram();pe.attachShader(Be,je(Nt,pe.VERTEX_SHADER)),pe.attachShader(Be,je(zt,pe.FRAGMENT_SHADER)),pe.linkProgram(Be),ye[yt]={program:Be,transaction:function(li){pe.useProgram(Be),li({setUniform:function(bt,Wt){for(var qe=[],pt=arguments.length-2;pt-- >0;)qe[pt]=arguments[pt+2];var At=Dt[Wt]||(Dt[Wt]=pe.getUniformLocation(Be,Wt));pe["uniform"+bt].apply(pe,[At].concat(qe))},setAttribute:function(bt,Wt,qe,pt,At){var Se=it[bt];Se||(Se=it[bt]={buf:pe.createBuffer(),loc:pe.getAttribLocation(Be,bt),data:null}),pe.bindBuffer(pe.ARRAY_BUFFER,Se.buf),pe.vertexAttribPointer(Se.loc,Wt,pe.FLOAT,!1,0,0),pe.enableVertexAttribArray(Se.loc),ce?pe.vertexAttribDivisor(Se.loc,pt):ke("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Se.loc,pt),At!==Se.data&&(pe.bufferData(pe.ARRAY_BUFFER,At,qe),Se.data=At)}})}}}ye[yt].transaction(ei)},ze=function(yt,Nt){ge++;try{pe.activeTexture(pe.TEXTURE0+ge);var zt=Oe[yt];zt||(zt=Oe[yt]=pe.createTexture(),pe.bindTexture(pe.TEXTURE_2D,zt),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.NEAREST),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.NEAREST)),pe.bindTexture(pe.TEXTURE_2D,zt),Nt(zt,ge)}finally{ge--}},ht=function(yt,Nt,zt){var ei=pe.createFramebuffer();Ee.push(ei),pe.bindFramebuffer(pe.FRAMEBUFFER,ei),pe.activeTexture(pe.TEXTURE0+Nt),pe.bindTexture(pe.TEXTURE_2D,yt),pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,yt,0);try{zt(ei)}finally{pe.deleteFramebuffer(ei),pe.bindFramebuffer(pe.FRAMEBUFFER,Ee[--Ee.length-1]||null)}},lt=function(){_e={},ye={},Oe={},ge=-1,Ee.length=0};var ce=typeof WebGL2RenderingContext<"u"&&pe instanceof WebGL2RenderingContext,_e={},ye={},Oe={},ge=-1,Ee=[];pe.canvas.addEventListener("webglcontextlost",function(yt){lt(),yt.preventDefault()},!1),A.set(pe,xe={gl:pe,isWebGL2:ce,getExtension:ke,withProgram:Ie,withTexture:ze,withTextureFramebuffer:ht,handleContextLoss:lt})}fe(xe)}function b(ue,fe,pe,xe,ce,_e,ye,Oe){ye===void 0&&(ye=15),Oe===void 0&&(Oe=null),_(ue,function(ge){var Ee=ge.gl,ke=ge.withProgram;(0,ge.withTexture)("copy",function(je,Ie){Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,ce,_e,0,Ee.RGBA,Ee.UNSIGNED_BYTE,fe),ke("copy",u,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(ze){var ht=ze.setUniform;(0,ze.setAttribute)("aUV",2,Ee.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ht("1i","image",Ie),Ee.bindFramebuffer(Ee.FRAMEBUFFER,Oe||null),Ee.disable(Ee.BLEND),Ee.colorMask(8&ye,4&ye,2&ye,1&ye),Ee.viewport(pe,xe,ce,_e),Ee.scissor(pe,xe,ce,_e),Ee.drawArrays(Ee.TRIANGLES,0,3)})})})}var x=Object.freeze({__proto__:null,withWebGLContext:_,renderImageData:b,resizeWebGLCanvasWithoutClearing:function(ue,fe,pe){var xe=ue.width,ce=ue.height;_(ue,function(_e){var ye=_e.gl,Oe=new Uint8Array(xe*ce*4);ye.readPixels(0,0,xe,ce,ye.RGBA,ye.UNSIGNED_BYTE,Oe),ue.width=fe,ue.height=pe,b(ye,Oe,0,0,xe,ce)})}});function C(ue,fe,pe,xe,ce,_e){_e===void 0&&(_e=1);var ye=new Uint8Array(ue*fe),Oe=xe[2]-xe[0],ge=xe[3]-xe[1],Ee=[];l(pe,function(lt,yt,Nt,zt){Ee.push({x1:lt,y1:yt,x2:Nt,y2:zt,minX:Math.min(lt,Nt),minY:Math.min(yt,zt),maxX:Math.max(lt,Nt),maxY:Math.max(yt,zt)})}),Ee.sort(function(lt,yt){return lt.maxX-yt.maxX});for(var ke=0;ke<ue;ke++)for(var je=0;je<fe;je++){var Ie=ht(xe[0]+Oe*(ke+.5)/ue,xe[1]+ge*(je+.5)/fe),ze=Math.pow(1-Math.abs(Ie)/ce,_e)/2;Ie<0&&(ze=1-ze),ze=Math.max(0,Math.min(255,Math.round(255*ze))),ye[je*ue+ke]=ze}return ye;function ht(lt,yt){for(var Nt=1/0,zt=1/0,ei=Ee.length;ei--;){var it=Ee[ei];if(it.maxX+zt<=lt)break;if(lt+zt>it.minX&&yt-zt<it.maxY&&yt+zt>it.minY){var Dt=L(lt,yt,it.x1,it.y1,it.x2,it.y2);Dt<Nt&&(Nt=Dt,zt=Math.sqrt(Nt))}}return function(Be,li){for(var bt=0,Wt=Ee.length;Wt--;){var qe=Ee[Wt];if(qe.maxX<=Be)break;qe.y1>li!=qe.y2>li&&Be<(qe.x2-qe.x1)*(li-qe.y1)/(qe.y2-qe.y1)+qe.x1&&(bt+=qe.y1<qe.y2?1:-1)}return bt!==0}(lt,yt)&&(zt=-zt),zt}}function I(ue,fe,pe,xe,ce,_e,ye,Oe,ge,Ee){_e===void 0&&(_e=1),Oe===void 0&&(Oe=0),ge===void 0&&(ge=0),Ee===void 0&&(Ee=0),F(ue,fe,pe,xe,ce,_e,ye,null,Oe,ge,Ee)}function F(ue,fe,pe,xe,ce,_e,ye,Oe,ge,Ee,ke){_e===void 0&&(_e=1),ge===void 0&&(ge=0),Ee===void 0&&(Ee=0),ke===void 0&&(ke=0);for(var je=C(ue,fe,pe,xe,ce,_e),Ie=new Uint8Array(4*je.length),ze=0;ze<je.length;ze++)Ie[4*ze+ke]=je[ze];b(ye,Ie,ge,Ee,ue,fe,1<<3-ke,Oe)}function L(ue,fe,pe,xe,ce,_e){var ye=ce-pe,Oe=_e-xe,ge=ye*ye+Oe*Oe,Ee=ge?Math.max(0,Math.min(1,((ue-pe)*ye+(fe-xe)*Oe)/ge)):0,ke=ue-(pe+Ee*ye),je=fe-(xe+Ee*Oe);return ke*ke+je*je}var U=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:I,generateIntoFramebuffer:F}),P=new Float32Array([0,0,2,0,0,2]),H=null,N=!1,z={},W=new WeakMap;function j(ue){if(!N&&!re(ue))throw new Error("WebGL generation not supported")}function J(ue,fe,pe,xe,ce,_e,ye){if(_e===void 0&&(_e=1),ye===void 0&&(ye=null),!ye&&!(ye=H)){var Oe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Oe)throw new Error("OffscreenCanvas or DOM canvas not supported");ye=H=Oe.getContext("webgl",{depth:!1})}j(ye);var ge=new Uint8Array(ue*fe*4);_(ye,function(Ie){var ze=Ie.gl,ht=Ie.withTexture,lt=Ie.withTextureFramebuffer;ht("readable",function(yt,Nt){ze.texImage2D(ze.TEXTURE_2D,0,ze.RGBA,ue,fe,0,ze.RGBA,ze.UNSIGNED_BYTE,null),lt(yt,Nt,function(zt){ee(ue,fe,pe,xe,ce,_e,ze,zt,0,0,0),ze.readPixels(0,0,ue,fe,ze.RGBA,ze.UNSIGNED_BYTE,ge)})})});for(var Ee=new Uint8Array(ue*fe),ke=0,je=0;ke<ge.length;ke+=4)Ee[je++]=ge[ke];return Ee}function ie(ue,fe,pe,xe,ce,_e,ye,Oe,ge,Ee){_e===void 0&&(_e=1),Oe===void 0&&(Oe=0),ge===void 0&&(ge=0),Ee===void 0&&(Ee=0),ee(ue,fe,pe,xe,ce,_e,ye,null,Oe,ge,Ee)}function ee(ue,fe,pe,xe,ce,_e,ye,Oe,ge,Ee,ke){_e===void 0&&(_e=1),ge===void 0&&(ge=0),Ee===void 0&&(Ee=0),ke===void 0&&(ke=0),j(ye);var je=[];l(pe,function(Ie,ze,ht,lt){je.push(Ie,ze,ht,lt)}),je=new Float32Array(je),_(ye,function(Ie){var ze=Ie.gl,ht=Ie.isWebGL2,lt=Ie.getExtension,yt=Ie.withProgram,Nt=Ie.withTexture,zt=Ie.withTextureFramebuffer,ei=Ie.handleContextLoss;if(Nt("rawDistances",function(it,Dt){ue===it._lastWidth&&fe===it._lastHeight||ze.texImage2D(ze.TEXTURE_2D,0,ze.RGBA,it._lastWidth=ue,it._lastHeight=fe,0,ze.RGBA,ze.UNSIGNED_BYTE,null),yt("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(Be){var li=Be.setAttribute,bt=Be.setUniform,Wt=!ht&&lt("ANGLE_instanced_arrays"),qe=!ht&&lt("EXT_blend_minmax");li("aUV",2,ze.STATIC_DRAW,0,P),li("aLineSegment",4,ze.DYNAMIC_DRAW,1,je),bt.apply(void 0,["4f","uGlyphBounds"].concat(xe)),bt("1f","uMaxDistance",ce),bt("1f","uExponent",_e),zt(it,Dt,function(pt){ze.enable(ze.BLEND),ze.colorMask(!0,!0,!0,!0),ze.viewport(0,0,ue,fe),ze.scissor(0,0,ue,fe),ze.blendFunc(ze.ONE,ze.ONE),ze.blendEquationSeparate(ze.FUNC_ADD,ht?ze.MAX:qe.MAX_EXT),ze.clear(ze.COLOR_BUFFER_BIT),ht?ze.drawArraysInstanced(ze.TRIANGLES,0,3,je.length/4):Wt.drawArraysInstancedANGLE(ze.TRIANGLES,0,3,je.length/4)})}),yt("post",u,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(Be){Be.setAttribute("aUV",2,ze.STATIC_DRAW,0,P),Be.setUniform("1i","tex",Dt),ze.bindFramebuffer(ze.FRAMEBUFFER,Oe),ze.disable(ze.BLEND),ze.colorMask(ke===0,ke===1,ke===2,ke===3),ze.viewport(ge,Ee,ue,fe),ze.scissor(ge,Ee,ue,fe),ze.drawArrays(ze.TRIANGLES,0,3)})}),ze.isContextLost())throw ei(),new Error("webgl context lost")})}function re(ue){var fe=ue&&ue!==H?ue.canvas||ue:z,pe=W.get(fe);if(pe===void 0){N=!0;var xe=null;try{var ce=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],_e=J(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,ue);pe=_e&&ce.length===_e.length&&_e.every(function(ye,Oe){return ye===ce[Oe]}),pe||(xe="bad trial run results",console.info(ce,_e))}catch(ye){pe=!1,xe=ye.message}xe&&console.warn("WebGL SDF generation not supported:",xe),N=!1,W.set(fe,pe)}return pe}var se=Object.freeze({__proto__:null,generate:J,generateIntoCanvas:ie,generateIntoFramebuffer:ee,isSupported:re});return e.forEachPathCommand=s,e.generate=function(ue,fe,pe,xe,ce,_e){ce===void 0&&(ce=Math.max(xe[2]-xe[0],xe[3]-xe[1])/2),_e===void 0&&(_e=1);try{return J.apply(se,arguments)}catch(ye){return console.info("WebGL SDF generation failed, falling back to JS",ye),C.apply(U,arguments)}},e.generateIntoCanvas=function(ue,fe,pe,xe,ce,_e,ye,Oe,ge,Ee){ce===void 0&&(ce=Math.max(xe[2]-xe[0],xe[3]-xe[1])/2),_e===void 0&&(_e=1),Oe===void 0&&(Oe=0),ge===void 0&&(ge=0),Ee===void 0&&(Ee=0);try{return ie.apply(se,arguments)}catch(ke){return console.info("WebGL SDF generation failed, falling back to JS",ke),I.apply(U,arguments)}},e.javascript=U,e.pathToLineSegments=l,e.webgl=se,e.webglUtils=x,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return a}const Dce=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Sz(a){return a.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,i){let r=Tr[i];return r?Sz(r):e})}const Ku=[];for(let a=0;a<256;a++)Ku[a]=(a<16?"0":"")+a.toString(16);const W1=Object.assign||function(){let a=arguments[0];for(let e=1,i=arguments.length;e<i;e++){let r=arguments[e];if(r)for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},VOe=Date.now(),bne=new WeakMap,wne=new Map;let qOe=1e10;function Bz(a,e){const i=function(_){const b=JSON.stringify(_,$Oe);let x=Cne.get(b);return x==null&&Cne.set(b,x=++WOe),x}(e);let r=bne.get(a);if(r||bne.set(a,r=Object.create(null)),r[i])return new r[i];const s=`_onBeforeCompile${i}`,l=function(_,b){a.onBeforeCompile.call(this,_,b);const x=this.customProgramCacheKey()+"|"+_.vertexShader+"|"+_.fragmentShader;let C=wne[x];if(!C){const I=function(F,{vertexShader:L,fragmentShader:U},P,H){let{vertexDefs:N,vertexMainIntro:z,vertexMainOutro:W,vertexTransform:j,fragmentDefs:J,fragmentMainIntro:ie,fragmentMainOutro:ee,fragmentColorTransform:re,customRewriter:se,timeUniform:ue}=P;if(N=N||"",z=z||"",W=W||"",J=J||"",ie=ie||"",ee=ee||"",(j||se)&&(L=Sz(L)),(re||se)&&(U=Sz(U=U.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`))),se){let fe=se({vertexShader:L,fragmentShader:U});L=fe.vertexShader,U=fe.fragmentShader}if(re){let fe=[];U=U.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,pe=>(fe.push(pe),"")),ee=`${re}
${fe.join(`
`)}
${ee}`}if(ue){const fe=`
uniform float ${ue};
`;N=fe+N,J=fe+J}return j&&(N=`${N}
void troikaVertexTransform${H}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${j}
}
`,z=`
troika_position_${H} = vec3(position);
troika_normal_${H} = vec3(normal);
troika_uv_${H} = vec2(uv);
troikaVertexTransform${H}(troika_position_${H}, troika_normal_${H}, troika_uv_${H});
${z}
`,L=(L=`vec3 troika_position_${H};
vec3 troika_normal_${H};
vec2 troika_uv_${H};
${L}
`).replace(/\b(position|normal|uv)\b/g,(fe,pe,xe,ce)=>/\battribute\s+vec[23]\s+$/.test(ce.substr(0,xe))?pe:`troika_${pe}_${H}`),F.map&&F.map.channel>0||(L=L.replace(/\bMAP_UV\b/g,`troika_uv_${H}`))),L=xne(L,H,N,z,W),U=xne(U,H,J,ie,ee),{vertexShader:L,fragmentShader:U}}(this,_,e,i);C=wne[x]=I}_.vertexShader=C.vertexShader,_.fragmentShader=C.fragmentShader,W1(_.uniforms,this.uniforms),e.timeUniform&&(_.uniforms[e.timeUniform]={get value(){return Date.now()-VOe}}),this[s]&&this[s](_)},u=function(){return A(e.chained?a:a.clone())},A=function(_){const b=Object.create(_,g);return Object.defineProperty(b,"baseMaterial",{value:a}),Object.defineProperty(b,"id",{value:qOe++}),b.uuid=function(){const x=4294967295*Math.random()|0,C=4294967295*Math.random()|0,I=4294967295*Math.random()|0,F=4294967295*Math.random()|0;return(Ku[255&x]+Ku[x>>8&255]+Ku[x>>16&255]+Ku[x>>24&255]+"-"+Ku[255&C]+Ku[C>>8&255]+"-"+Ku[C>>16&15|64]+Ku[C>>24&255]+"-"+Ku[63&I|128]+Ku[I>>8&255]+"-"+Ku[I>>16&255]+Ku[I>>24&255]+Ku[255&F]+Ku[F>>8&255]+Ku[F>>16&255]+Ku[F>>24&255]).toUpperCase()}(),b.uniforms=W1({},_.uniforms,e.uniforms),b.defines=W1({},_.defines,e.defines),b.defines[`TROIKA_DERIVED_MATERIAL_${i}`]="",b.extensions=W1({},_.extensions,e.extensions),b._listeners=void 0,b},g={constructor:{value:u},isDerivedMaterial:{value:!0},type:{get:()=>a.type,set:_=>{a.type=_}},isDerivedFrom:{writable:!0,configurable:!0,value:function(_){const b=this.baseMaterial;return _===b||b.isDerivedMaterial&&b.isDerivedFrom(_)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return a.customProgramCacheKey()+"|"+i}},onBeforeCompile:{get:()=>l,set(_){this[s]=_}},copy:{writable:!0,configurable:!0,value:function(_){return a.copy.call(this,_),a.isShaderMaterial||a.isDerivedMaterial||(W1(this.extensions,_.extensions),W1(this.defines,_.defines),W1(this.uniforms,Wz.clone(_.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const _=new a.constructor;return A(_).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let _=this._depthMaterial;return _||(_=this._depthMaterial=Bz(a.isDerivedMaterial?a.getDepthMaterial():new sM({depthPacking:Gz}),e),_.defines.IS_DEPTH_MATERIAL="",_.uniforms=this.uniforms),_}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let _=this._distanceMaterial;return _||(_=this._distanceMaterial=Bz(a.isDerivedMaterial?a.getDistanceMaterial():new pL,e),_.defines.IS_DISTANCE_MATERIAL="",_.uniforms=this.uniforms),_}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:_,_distanceMaterial:b}=this;_&&_.dispose(),b&&b.dispose(),a.dispose.call(this)}}};return r[i]=u,new u}function xne(a,e,i,r,s){return(r||s||i)&&(a=a.replace(Dce,`
${i}
void troikaOrigMain${e}() {`),a+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${s}
}`),a}function $Oe(a,e){return a==="uniforms"?void 0:typeof e=="function"?e.toString():e}let WOe=0;const Cne=new Map,jOe=GS({name:"Typr Font Parser",dependencies:[function(){return typeof window>"u"&&(self.window=self),function(a){var e={parse:function(s){var l=e._bin,u=new Uint8Array(s);if(l.readASCII(u,0,4)=="ttcf"){var A=4;l.readUshort(u,A),A+=2,l.readUshort(u,A),A+=2;var g=l.readUint(u,A);A+=4;for(var _=[],b=0;b<g;b++){var x=l.readUint(u,A);A+=4,_.push(e._readFont(u,x))}return _}return[e._readFont(u,0)]},_readFont:function(s,l){var u=e._bin,A=l;u.readFixed(s,l),l+=4;var g=u.readUshort(s,l);l+=2,u.readUshort(s,l),l+=2,u.readUshort(s,l),l+=2,u.readUshort(s,l),l+=2;for(var _=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],b={_data:s,_offset:A},x={},C=0;C<g;C++){var I=u.readASCII(s,l,4);l+=4,u.readUint(s,l),l+=4;var F=u.readUint(s,l);l+=4;var L=u.readUint(s,l);l+=4,x[I]={offset:F,length:L}}for(C=0;C<_.length;C++){var U=_[C];x[U]&&(b[U.trim()]=e[U.trim()].parse(s,x[U].offset,x[U].length,b))}return b},_tabOffset:function(s,l,u){for(var A=e._bin,g=A.readUshort(s,u+4),_=u+12,b=0;b<g;b++){var x=A.readASCII(s,_,4);_+=4,A.readUint(s,_),_+=4;var C=A.readUint(s,_);if(_+=4,A.readUint(s,_),_+=4,x==l)return C}return 0}};e._bin={readFixed:function(s,l){return(s[l]<<8|s[l+1])+(s[l+2]<<8|s[l+3])/65540},readF2dot14:function(s,l){return e._bin.readShort(s,l)/16384},readInt:function(s,l){return e._bin._view(s).getInt32(l)},readInt8:function(s,l){return e._bin._view(s).getInt8(l)},readShort:function(s,l){return e._bin._view(s).getInt16(l)},readUshort:function(s,l){return e._bin._view(s).getUint16(l)},readUshorts:function(s,l,u){for(var A=[],g=0;g<u;g++)A.push(e._bin.readUshort(s,l+2*g));return A},readUint:function(s,l){return e._bin._view(s).getUint32(l)},readUint64:function(s,l){return 4294967296*e._bin.readUint(s,l)+e._bin.readUint(s,l+4)},readASCII:function(s,l,u){for(var A="",g=0;g<u;g++)A+=String.fromCharCode(s[l+g]);return A},readUnicode:function(s,l,u){for(var A="",g=0;g<u;g++){var _=s[l++]<<8|s[l++];A+=String.fromCharCode(_)}return A},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,l,u){var A=e._bin._tdec;return A&&l==0&&u==s.length?A.decode(s):e._bin.readASCII(s,l,u)},readBytes:function(s,l,u){for(var A=[],g=0;g<u;g++)A.push(s[l+g]);return A},readASCIIArray:function(s,l,u){for(var A=[],g=0;g<u;g++)A.push(String.fromCharCode(s[l+g]));return A},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,l,u,A,g){var _=e._bin,b={},x=l;_.readFixed(s,l),l+=4;var C=_.readUshort(s,l);l+=2;var I=_.readUshort(s,l);l+=2;var F=_.readUshort(s,l);return l+=2,b.scriptList=e._lctf.readScriptList(s,x+C),b.featureList=e._lctf.readFeatureList(s,x+I),b.lookupList=e._lctf.readLookupList(s,x+F,g),b},e._lctf.readLookupList=function(s,l,u){var A=e._bin,g=l,_=[],b=A.readUshort(s,l);l+=2;for(var x=0;x<b;x++){var C=A.readUshort(s,l);l+=2;var I=e._lctf.readLookupTable(s,g+C,u);_.push(I)}return _},e._lctf.readLookupTable=function(s,l,u){var A=e._bin,g=l,_={tabs:[]};_.ltype=A.readUshort(s,l),l+=2,_.flag=A.readUshort(s,l),l+=2;var b=A.readUshort(s,l);l+=2;for(var x=_.ltype,C=0;C<b;C++){var I=A.readUshort(s,l);l+=2;var F=u(s,x,g+I,_);_.tabs.push(F)}return _},e._lctf.numOfOnes=function(s){for(var l=0,u=0;u<32;u++)s>>>u&1&&l++;return l},e._lctf.readClassDef=function(s,l){var u=e._bin,A=[],g=u.readUshort(s,l);if(l+=2,g==1){var _=u.readUshort(s,l);l+=2;var b=u.readUshort(s,l);l+=2;for(var x=0;x<b;x++)A.push(_+x),A.push(_+x),A.push(u.readUshort(s,l)),l+=2}if(g==2){var C=u.readUshort(s,l);for(l+=2,x=0;x<C;x++)A.push(u.readUshort(s,l)),l+=2,A.push(u.readUshort(s,l)),l+=2,A.push(u.readUshort(s,l)),l+=2}return A},e._lctf.getInterval=function(s,l){for(var u=0;u<s.length;u+=3){var A=s[u],g=s[u+1];if(s[u+2],A<=l&&l<=g)return u}return-1},e._lctf.readCoverage=function(s,l){var u=e._bin,A={};A.fmt=u.readUshort(s,l),l+=2;var g=u.readUshort(s,l);return l+=2,A.fmt==1&&(A.tab=u.readUshorts(s,l,g)),A.fmt==2&&(A.tab=u.readUshorts(s,l,3*g)),A},e._lctf.coverageIndex=function(s,l){var u=s.tab;if(s.fmt==1)return u.indexOf(l);if(s.fmt==2){var A=e._lctf.getInterval(u,l);if(A!=-1)return u[A+2]+(l-u[A])}return-1},e._lctf.readFeatureList=function(s,l){var u=e._bin,A=l,g=[],_=u.readUshort(s,l);l+=2;for(var b=0;b<_;b++){var x=u.readASCII(s,l,4);l+=4;var C=u.readUshort(s,l);l+=2;var I=e._lctf.readFeatureTable(s,A+C);I.tag=x.trim(),g.push(I)}return g},e._lctf.readFeatureTable=function(s,l){var u=e._bin,A=l,g={},_=u.readUshort(s,l);l+=2,_>0&&(g.featureParams=A+_);var b=u.readUshort(s,l);l+=2,g.tab=[];for(var x=0;x<b;x++)g.tab.push(u.readUshort(s,l+2*x));return g},e._lctf.readScriptList=function(s,l){var u=e._bin,A=l,g={},_=u.readUshort(s,l);l+=2;for(var b=0;b<_;b++){var x=u.readASCII(s,l,4);l+=4;var C=u.readUshort(s,l);l+=2,g[x.trim()]=e._lctf.readScriptTable(s,A+C)}return g},e._lctf.readScriptTable=function(s,l){var u=e._bin,A=l,g={},_=u.readUshort(s,l);l+=2,_>0&&(g.default=e._lctf.readLangSysTable(s,A+_));var b=u.readUshort(s,l);l+=2;for(var x=0;x<b;x++){var C=u.readASCII(s,l,4);l+=4;var I=u.readUshort(s,l);l+=2,g[C.trim()]=e._lctf.readLangSysTable(s,A+I)}return g},e._lctf.readLangSysTable=function(s,l){var u=e._bin,A={};u.readUshort(s,l),l+=2,A.reqFeature=u.readUshort(s,l),l+=2;var g=u.readUshort(s,l);return l+=2,A.features=u.readUshorts(s,l,g),A},e.CFF={},e.CFF.parse=function(s,l,u){var A=e._bin;(s=new Uint8Array(s.buffer,l,u))[l=0],s[++l],s[++l],s[++l],l++;var g=[];l=e.CFF.readIndex(s,l,g);for(var _=[],b=0;b<g.length-1;b++)_.push(A.readASCII(s,l+g[b],g[b+1]-g[b]));l+=g[g.length-1];var x=[];l=e.CFF.readIndex(s,l,x);var C=[];for(b=0;b<x.length-1;b++)C.push(e.CFF.readDict(s,l+x[b],l+x[b+1]));l+=x[x.length-1];var I=C[0],F=[];l=e.CFF.readIndex(s,l,F);var L=[];for(b=0;b<F.length-1;b++)L.push(A.readASCII(s,l+F[b],F[b+1]-F[b]));if(l+=F[F.length-1],e.CFF.readSubrs(s,l,I),I.CharStrings){l=I.CharStrings,F=[],l=e.CFF.readIndex(s,l,F);var U=[];for(b=0;b<F.length-1;b++)U.push(A.readBytes(s,l+F[b],F[b+1]-F[b]));I.CharStrings=U}if(I.ROS){l=I.FDArray;var P=[];for(l=e.CFF.readIndex(s,l,P),I.FDArray=[],b=0;b<P.length-1;b++){var H=e.CFF.readDict(s,l+P[b],l+P[b+1]);e.CFF._readFDict(s,H,L),I.FDArray.push(H)}l+=P[P.length-1],l=I.FDSelect,I.FDSelect=[];var N=s[l];if(l++,N!=3)throw N;var z=A.readUshort(s,l);for(l+=2,b=0;b<z+1;b++)I.FDSelect.push(A.readUshort(s,l),s[l+2]),l+=3}return I.Encoding&&(I.Encoding=e.CFF.readEncoding(s,I.Encoding,I.CharStrings.length)),I.charset&&(I.charset=e.CFF.readCharset(s,I.charset,I.CharStrings.length)),e.CFF._readFDict(s,I,L),I},e.CFF._readFDict=function(s,l,u){var A;for(var g in l.Private&&(A=l.Private[1],l.Private=e.CFF.readDict(s,A,A+l.Private[0]),l.Private.Subrs&&e.CFF.readSubrs(s,A+l.Private.Subrs,l.Private)),l)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(g)!=-1&&(l[g]=u[l[g]-426+35])},e.CFF.readSubrs=function(s,l,u){var A=e._bin,g=[];l=e.CFF.readIndex(s,l,g);var _,b=g.length;_=b<1240?107:b<33900?1131:32768,u.Bias=_,u.Subrs=[];for(var x=0;x<g.length-1;x++)u.Subrs.push(A.readBytes(s,l+g[x],g[x+1]-g[x]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,l){for(var u=0;u<s.charset.length;u++)if(s.charset[u]==l)return u;return-1},e.CFF.glyphBySE=function(s,l){return l<0||l>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[l])},e.CFF.readEncoding=function(s,l,u){e._bin;var A=[".notdef"],g=s[l];if(l++,g!=0)throw"error: unknown encoding format: "+g;var _=s[l];l++;for(var b=0;b<_;b++)A.push(s[l+b]);return A},e.CFF.readCharset=function(s,l,u){var A=e._bin,g=[".notdef"],_=s[l];if(l++,_==0)for(var b=0;b<u;b++){var x=A.readUshort(s,l);l+=2,g.push(x)}else{if(_!=1&&_!=2)throw"error: format: "+_;for(;g.length<u;){x=A.readUshort(s,l),l+=2;var C=0;for(_==1?(C=s[l],l++):(C=A.readUshort(s,l),l+=2),b=0;b<=C;b++)g.push(x),x++}}return g},e.CFF.readIndex=function(s,l,u){var A=e._bin,g=A.readUshort(s,l)+1,_=s[l+=2];if(l++,_==1)for(var b=0;b<g;b++)u.push(s[l+b]);else if(_==2)for(b=0;b<g;b++)u.push(A.readUshort(s,l+2*b));else if(_==3)for(b=0;b<g;b++)u.push(16777215&A.readUint(s,l+3*b-1));else if(g!=1)throw"unsupported offset size: "+_+", count: "+g;return(l+=g*_)-1},e.CFF.getCharString=function(s,l,u){var A=e._bin,g=s[l],_=s[l+1];s[l+2],s[l+3],s[l+4];var b=1,x=null,C=null;g<=20&&(x=g,b=1),g==12&&(x=100*g+_,b=2),21<=g&&g<=27&&(x=g,b=1),g==28&&(C=A.readShort(s,l+1),b=3),29<=g&&g<=31&&(x=g,b=1),32<=g&&g<=246&&(C=g-139,b=1),247<=g&&g<=250&&(C=256*(g-247)+_+108,b=2),251<=g&&g<=254&&(C=256*-(g-251)-_-108,b=2),g==255&&(C=A.readInt(s,l+1)/65535,b=5),u.val=C??"o"+x,u.size=b},e.CFF.readCharString=function(s,l,u){for(var A=l+u,g=e._bin,_=[];l<A;){var b=s[l],x=s[l+1];s[l+2],s[l+3],s[l+4];var C=1,I=null,F=null;b<=20&&(I=b,C=1),b==12&&(I=100*b+x,C=2),b!=19&&b!=20||(I=b,C=2),21<=b&&b<=27&&(I=b,C=1),b==28&&(F=g.readShort(s,l+1),C=3),29<=b&&b<=31&&(I=b,C=1),32<=b&&b<=246&&(F=b-139,C=1),247<=b&&b<=250&&(F=256*(b-247)+x+108,C=2),251<=b&&b<=254&&(F=256*-(b-251)-x-108,C=2),b==255&&(F=g.readInt(s,l+1)/65535,C=5),_.push(F??"o"+I),l+=C}return _},e.CFF.readDict=function(s,l,u){for(var A=e._bin,g={},_=[];l<u;){var b=s[l],x=s[l+1];s[l+2],s[l+3],s[l+4];var C=1,I=null,F=null;if(b==28&&(F=A.readShort(s,l+1),C=3),b==29&&(F=A.readInt(s,l+1),C=5),32<=b&&b<=246&&(F=b-139,C=1),247<=b&&b<=250&&(F=256*(b-247)+x+108,C=2),251<=b&&b<=254&&(F=256*-(b-251)-x-108,C=2),b==255)throw F=A.readInt(s,l+1)/65535,C=5,"unknown number";if(b==30){var L=[];for(C=1;;){var U=s[l+C];C++;var P=U>>4,H=15&U;if(P!=15&&L.push(P),H!=15&&L.push(H),H==15)break}for(var N="",z=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],W=0;W<L.length;W++)N+=z[L[W]];F=parseFloat(N)}b<=21&&(I=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][b],C=1,b==12&&(I=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][x],C=2)),I!=null?(g[I]=_.length==1?_[0]:_,_=[]):_.push(F),l+=C}return g},e.cmap={},e.cmap.parse=function(s,l,u){s=new Uint8Array(s.buffer,l,u),l=0;var A=e._bin,g={};A.readUshort(s,l),l+=2;var _=A.readUshort(s,l);l+=2;var b=[];g.tables=[];for(var x=0;x<_;x++){var C=A.readUshort(s,l);l+=2;var I=A.readUshort(s,l);l+=2;var F=A.readUint(s,l);l+=4;var L="p"+C+"e"+I,U=b.indexOf(F);if(U==-1){var P;U=g.tables.length,b.push(F);var H=A.readUshort(s,F);H==0?P=e.cmap.parse0(s,F):H==4?P=e.cmap.parse4(s,F):H==6?P=e.cmap.parse6(s,F):H==12?P=e.cmap.parse12(s,F):console.debug("unknown format: "+H,C,I,F),g.tables.push(P)}if(g[L]!=null)throw"multiple tables for one platform+encoding";g[L]=U}return g},e.cmap.parse0=function(s,l){var u=e._bin,A={};A.format=u.readUshort(s,l),l+=2;var g=u.readUshort(s,l);l+=2,u.readUshort(s,l),l+=2,A.map=[];for(var _=0;_<g-6;_++)A.map.push(s[l+_]);return A},e.cmap.parse4=function(s,l){var u=e._bin,A=l,g={};g.format=u.readUshort(s,l),l+=2;var _=u.readUshort(s,l);l+=2,u.readUshort(s,l),l+=2;var b=u.readUshort(s,l);l+=2;var x=b/2;g.searchRange=u.readUshort(s,l),l+=2,g.entrySelector=u.readUshort(s,l),l+=2,g.rangeShift=u.readUshort(s,l),l+=2,g.endCount=u.readUshorts(s,l,x),l+=2*x,l+=2,g.startCount=u.readUshorts(s,l,x),l+=2*x,g.idDelta=[];for(var C=0;C<x;C++)g.idDelta.push(u.readShort(s,l)),l+=2;for(g.idRangeOffset=u.readUshorts(s,l,x),l+=2*x,g.glyphIdArray=[];l<A+_;)g.glyphIdArray.push(u.readUshort(s,l)),l+=2;return g},e.cmap.parse6=function(s,l){var u=e._bin,A={};A.format=u.readUshort(s,l),l+=2,u.readUshort(s,l),l+=2,u.readUshort(s,l),l+=2,A.firstCode=u.readUshort(s,l),l+=2;var g=u.readUshort(s,l);l+=2,A.glyphIdArray=[];for(var _=0;_<g;_++)A.glyphIdArray.push(u.readUshort(s,l)),l+=2;return A},e.cmap.parse12=function(s,l){var u=e._bin,A={};A.format=u.readUshort(s,l),l+=2,l+=2,u.readUint(s,l),l+=4,u.readUint(s,l),l+=4;var g=u.readUint(s,l);l+=4,A.groups=[];for(var _=0;_<g;_++){var b=l+12*_,x=u.readUint(s,b+0),C=u.readUint(s,b+4),I=u.readUint(s,b+8);A.groups.push([x,C,I])}return A},e.glyf={},e.glyf.parse=function(s,l,u,A){for(var g=[],_=0;_<A.maxp.numGlyphs;_++)g.push(null);return g},e.glyf._parseGlyf=function(s,l){var u=e._bin,A=s._data,g=e._tabOffset(A,"glyf",s._offset)+s.loca[l];if(s.loca[l]==s.loca[l+1])return null;var _={};if(_.noc=u.readShort(A,g),g+=2,_.xMin=u.readShort(A,g),g+=2,_.yMin=u.readShort(A,g),g+=2,_.xMax=u.readShort(A,g),g+=2,_.yMax=u.readShort(A,g),g+=2,_.xMin>=_.xMax||_.yMin>=_.yMax)return null;if(_.noc>0){_.endPts=[];for(var b=0;b<_.noc;b++)_.endPts.push(u.readUshort(A,g)),g+=2;var x=u.readUshort(A,g);if(g+=2,A.length-g<x)return null;_.instructions=u.readBytes(A,g,x),g+=x;var C=_.endPts[_.noc-1]+1;for(_.flags=[],b=0;b<C;b++){var I=A[g];if(g++,_.flags.push(I),8&I){var F=A[g];g++;for(var L=0;L<F;L++)_.flags.push(I),b++}}for(_.xs=[],b=0;b<C;b++){var U=!!(2&_.flags[b]),P=!!(16&_.flags[b]);U?(_.xs.push(P?A[g]:-A[g]),g++):P?_.xs.push(0):(_.xs.push(u.readShort(A,g)),g+=2)}for(_.ys=[],b=0;b<C;b++)U=!!(4&_.flags[b]),P=!!(32&_.flags[b]),U?(_.ys.push(P?A[g]:-A[g]),g++):P?_.ys.push(0):(_.ys.push(u.readShort(A,g)),g+=2);var H=0,N=0;for(b=0;b<C;b++)H+=_.xs[b],N+=_.ys[b],_.xs[b]=H,_.ys[b]=N}else{var z;_.parts=[];do{z=u.readUshort(A,g),g+=2;var W={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(_.parts.push(W),W.glyphIndex=u.readUshort(A,g),g+=2,1&z){var j=u.readShort(A,g);g+=2;var J=u.readShort(A,g);g+=2}else j=u.readInt8(A,g),g++,J=u.readInt8(A,g),g++;2&z?(W.m.tx=j,W.m.ty=J):(W.p1=j,W.p2=J),8&z?(W.m.a=W.m.d=u.readF2dot14(A,g),g+=2):64&z?(W.m.a=u.readF2dot14(A,g),g+=2,W.m.d=u.readF2dot14(A,g),g+=2):128&z&&(W.m.a=u.readF2dot14(A,g),g+=2,W.m.b=u.readF2dot14(A,g),g+=2,W.m.c=u.readF2dot14(A,g),g+=2,W.m.d=u.readF2dot14(A,g),g+=2)}while(32&z);if(256&z){var ie=u.readUshort(A,g);for(g+=2,_.instr=[],b=0;b<ie;b++)_.instr.push(A[g]),g++}}return _},e.GDEF={},e.GDEF.parse=function(s,l,u,A){var g=l;l+=4;var _=e._bin.readUshort(s,l);return{glyphClassDef:_===0?null:e._lctf.readClassDef(s,g+_)}},e.GPOS={},e.GPOS.parse=function(s,l,u,A){return e._lctf.parse(s,l,u,A,e.GPOS.subt)},e.GPOS.subt=function(s,l,u,A){var g=e._bin,_=u,b={};if(b.fmt=g.readUshort(s,u),u+=2,l==1||l==2||l==3||l==7||l==8&&b.fmt<=2){var x=g.readUshort(s,u);u+=2,b.coverage=e._lctf.readCoverage(s,x+_)}if(l==1&&b.fmt==1){var C=g.readUshort(s,u);u+=2,C!=0&&(b.pos=e.GPOS.readValueRecord(s,u,C))}else if(l==2&&b.fmt>=1&&b.fmt<=2){C=g.readUshort(s,u),u+=2;var I=g.readUshort(s,u);u+=2;var F=e._lctf.numOfOnes(C),L=e._lctf.numOfOnes(I);if(b.fmt==1){b.pairsets=[];var U=g.readUshort(s,u);u+=2;for(var P=0;P<U;P++){var H=_+g.readUshort(s,u);u+=2;var N=g.readUshort(s,H);H+=2;for(var z=[],W=0;W<N;W++){var j=g.readUshort(s,H);H+=2,C!=0&&(ue=e.GPOS.readValueRecord(s,H,C),H+=2*F),I!=0&&(fe=e.GPOS.readValueRecord(s,H,I),H+=2*L),z.push({gid2:j,val1:ue,val2:fe})}b.pairsets.push(z)}}if(b.fmt==2){var J=g.readUshort(s,u);u+=2;var ie=g.readUshort(s,u);u+=2;var ee=g.readUshort(s,u);u+=2;var re=g.readUshort(s,u);for(u+=2,b.classDef1=e._lctf.readClassDef(s,_+J),b.classDef2=e._lctf.readClassDef(s,_+ie),b.matrix=[],P=0;P<ee;P++){var se=[];for(W=0;W<re;W++){var ue=null,fe=null;C!=0&&(ue=e.GPOS.readValueRecord(s,u,C),u+=2*F),I!=0&&(fe=e.GPOS.readValueRecord(s,u,I),u+=2*L),se.push({val1:ue,val2:fe})}b.matrix.push(se)}}}else if(l==4&&b.fmt==1)b.markCoverage=e._lctf.readCoverage(s,g.readUshort(s,u)+_),b.baseCoverage=e._lctf.readCoverage(s,g.readUshort(s,u+2)+_),b.markClassCount=g.readUshort(s,u+4),b.markArray=e.GPOS.readMarkArray(s,g.readUshort(s,u+6)+_),b.baseArray=e.GPOS.readBaseArray(s,g.readUshort(s,u+8)+_,b.markClassCount);else if(l==6&&b.fmt==1)b.mark1Coverage=e._lctf.readCoverage(s,g.readUshort(s,u)+_),b.mark2Coverage=e._lctf.readCoverage(s,g.readUshort(s,u+2)+_),b.markClassCount=g.readUshort(s,u+4),b.mark1Array=e.GPOS.readMarkArray(s,g.readUshort(s,u+6)+_),b.mark2Array=e.GPOS.readBaseArray(s,g.readUshort(s,u+8)+_,b.markClassCount);else{if(l==9&&b.fmt==1){var pe=g.readUshort(s,u);u+=2;var xe=g.readUint(s,u);if(u+=4,A.ltype==9)A.ltype=pe;else if(A.ltype!=pe)throw"invalid extension substitution";return e.GPOS.subt(s,A.ltype,_+xe)}console.debug("unsupported GPOS table LookupType",l,"format",b.fmt)}return b},e.GPOS.readValueRecord=function(s,l,u){var A=e._bin,g=[];return g.push(1&u?A.readShort(s,l):0),l+=1&u?2:0,g.push(2&u?A.readShort(s,l):0),l+=2&u?2:0,g.push(4&u?A.readShort(s,l):0),l+=4&u?2:0,g.push(8&u?A.readShort(s,l):0),l+=8&u?2:0,g},e.GPOS.readBaseArray=function(s,l,u){var A=e._bin,g=[],_=l,b=A.readUshort(s,l);l+=2;for(var x=0;x<b;x++){for(var C=[],I=0;I<u;I++)C.push(e.GPOS.readAnchorRecord(s,_+A.readUshort(s,l))),l+=2;g.push(C)}return g},e.GPOS.readMarkArray=function(s,l){var u=e._bin,A=[],g=l,_=u.readUshort(s,l);l+=2;for(var b=0;b<_;b++){var x=e.GPOS.readAnchorRecord(s,u.readUshort(s,l+2)+g);x.markClass=u.readUshort(s,l),A.push(x),l+=4}return A},e.GPOS.readAnchorRecord=function(s,l){var u=e._bin,A={};return A.fmt=u.readUshort(s,l),A.x=u.readShort(s,l+2),A.y=u.readShort(s,l+4),A},e.GSUB={},e.GSUB.parse=function(s,l,u,A){return e._lctf.parse(s,l,u,A,e.GSUB.subt)},e.GSUB.subt=function(s,l,u,A){var g=e._bin,_=u,b={};if(b.fmt=g.readUshort(s,u),u+=2,l!=1&&l!=2&&l!=4&&l!=5&&l!=6)return null;if(l==1||l==2||l==4||l==5&&b.fmt<=2||l==6&&b.fmt<=2){var x=g.readUshort(s,u);u+=2,b.coverage=e._lctf.readCoverage(s,_+x)}if(l==1&&b.fmt>=1&&b.fmt<=2){if(b.fmt==1)b.delta=g.readShort(s,u),u+=2;else if(b.fmt==2){var C=g.readUshort(s,u);u+=2,b.newg=g.readUshorts(s,u,C),u+=2*b.newg.length}}else if(l==2&&b.fmt==1){C=g.readUshort(s,u),u+=2,b.seqs=[];for(var I=0;I<C;I++){var F=g.readUshort(s,u)+_;u+=2;var L=g.readUshort(s,F);b.seqs.push(g.readUshorts(s,F+2,L))}}else if(l==4)for(b.vals=[],C=g.readUshort(s,u),u+=2,I=0;I<C;I++){var U=g.readUshort(s,u);u+=2,b.vals.push(e.GSUB.readLigatureSet(s,_+U))}else if(l==5&&b.fmt==2){if(b.fmt==2){var P=g.readUshort(s,u);u+=2,b.cDef=e._lctf.readClassDef(s,_+P),b.scset=[];var H=g.readUshort(s,u);for(u+=2,I=0;I<H;I++){var N=g.readUshort(s,u);u+=2,b.scset.push(N==0?null:e.GSUB.readSubClassSet(s,_+N))}}}else if(l==6&&b.fmt==3){if(b.fmt==3){for(I=0;I<3;I++){C=g.readUshort(s,u),u+=2;for(var z=[],W=0;W<C;W++)z.push(e._lctf.readCoverage(s,_+g.readUshort(s,u+2*W)));u+=2*C,I==0&&(b.backCvg=z),I==1&&(b.inptCvg=z),I==2&&(b.ahedCvg=z)}C=g.readUshort(s,u),u+=2,b.lookupRec=e.GSUB.readSubstLookupRecords(s,u,C)}}else{if(l==7&&b.fmt==1){var j=g.readUshort(s,u);u+=2;var J=g.readUint(s,u);if(u+=4,A.ltype==9)A.ltype=j;else if(A.ltype!=j)throw"invalid extension substitution";return e.GSUB.subt(s,A.ltype,_+J)}console.debug("unsupported GSUB table LookupType",l,"format",b.fmt)}return b},e.GSUB.readSubClassSet=function(s,l){var u=e._bin.readUshort,A=l,g=[],_=u(s,l);l+=2;for(var b=0;b<_;b++){var x=u(s,l);l+=2,g.push(e.GSUB.readSubClassRule(s,A+x))}return g},e.GSUB.readSubClassRule=function(s,l){var u=e._bin.readUshort,A={},g=u(s,l),_=u(s,l+=2);l+=2,A.input=[];for(var b=0;b<g-1;b++)A.input.push(u(s,l)),l+=2;return A.substLookupRecords=e.GSUB.readSubstLookupRecords(s,l,_),A},e.GSUB.readSubstLookupRecords=function(s,l,u){for(var A=e._bin.readUshort,g=[],_=0;_<u;_++)g.push(A(s,l),A(s,l+2)),l+=4;return g},e.GSUB.readChainSubClassSet=function(s,l){var u=e._bin,A=l,g=[],_=u.readUshort(s,l);l+=2;for(var b=0;b<_;b++){var x=u.readUshort(s,l);l+=2,g.push(e.GSUB.readChainSubClassRule(s,A+x))}return g},e.GSUB.readChainSubClassRule=function(s,l){for(var u=e._bin,A={},g=["backtrack","input","lookahead"],_=0;_<g.length;_++){var b=u.readUshort(s,l);l+=2,_==1&&b--,A[g[_]]=u.readUshorts(s,l,b),l+=2*A[g[_]].length}return b=u.readUshort(s,l),l+=2,A.subst=u.readUshorts(s,l,2*b),l+=2*A.subst.length,A},e.GSUB.readLigatureSet=function(s,l){var u=e._bin,A=l,g=[],_=u.readUshort(s,l);l+=2;for(var b=0;b<_;b++){var x=u.readUshort(s,l);l+=2,g.push(e.GSUB.readLigature(s,A+x))}return g},e.GSUB.readLigature=function(s,l){var u=e._bin,A={chain:[]};A.nglyph=u.readUshort(s,l),l+=2;var g=u.readUshort(s,l);l+=2;for(var _=0;_<g-1;_++)A.chain.push(u.readUshort(s,l)),l+=2;return A},e.head={},e.head.parse=function(s,l,u){var A=e._bin,g={};return A.readFixed(s,l),l+=4,g.fontRevision=A.readFixed(s,l),l+=4,A.readUint(s,l),l+=4,A.readUint(s,l),l+=4,g.flags=A.readUshort(s,l),l+=2,g.unitsPerEm=A.readUshort(s,l),l+=2,g.created=A.readUint64(s,l),l+=8,g.modified=A.readUint64(s,l),l+=8,g.xMin=A.readShort(s,l),l+=2,g.yMin=A.readShort(s,l),l+=2,g.xMax=A.readShort(s,l),l+=2,g.yMax=A.readShort(s,l),l+=2,g.macStyle=A.readUshort(s,l),l+=2,g.lowestRecPPEM=A.readUshort(s,l),l+=2,g.fontDirectionHint=A.readShort(s,l),l+=2,g.indexToLocFormat=A.readShort(s,l),l+=2,g.glyphDataFormat=A.readShort(s,l),l+=2,g},e.hhea={},e.hhea.parse=function(s,l,u){var A=e._bin,g={};return A.readFixed(s,l),l+=4,g.ascender=A.readShort(s,l),l+=2,g.descender=A.readShort(s,l),l+=2,g.lineGap=A.readShort(s,l),l+=2,g.advanceWidthMax=A.readUshort(s,l),l+=2,g.minLeftSideBearing=A.readShort(s,l),l+=2,g.minRightSideBearing=A.readShort(s,l),l+=2,g.xMaxExtent=A.readShort(s,l),l+=2,g.caretSlopeRise=A.readShort(s,l),l+=2,g.caretSlopeRun=A.readShort(s,l),l+=2,g.caretOffset=A.readShort(s,l),l+=2,l+=8,g.metricDataFormat=A.readShort(s,l),l+=2,g.numberOfHMetrics=A.readUshort(s,l),l+=2,g},e.hmtx={},e.hmtx.parse=function(s,l,u,A){for(var g=e._bin,_={aWidth:[],lsBearing:[]},b=0,x=0,C=0;C<A.maxp.numGlyphs;C++)C<A.hhea.numberOfHMetrics&&(b=g.readUshort(s,l),l+=2,x=g.readShort(s,l),l+=2),_.aWidth.push(b),_.lsBearing.push(x);return _},e.kern={},e.kern.parse=function(s,l,u,A){var g=e._bin,_=g.readUshort(s,l);if(l+=2,_==1)return e.kern.parseV1(s,l-2,u,A);var b=g.readUshort(s,l);l+=2;for(var x={glyph1:[],rval:[]},C=0;C<b;C++){l+=2,u=g.readUshort(s,l),l+=2;var I=g.readUshort(s,l);l+=2;var F=I>>>8;if((F&=15)!=0)throw"unknown kern table format: "+F;l=e.kern.readFormat0(s,l,x)}return x},e.kern.parseV1=function(s,l,u,A){var g=e._bin;g.readFixed(s,l),l+=4;var _=g.readUint(s,l);l+=4;for(var b={glyph1:[],rval:[]},x=0;x<_;x++){g.readUint(s,l),l+=4;var C=g.readUshort(s,l);l+=2,g.readUshort(s,l),l+=2;var I=C>>>8;if((I&=15)!=0)throw"unknown kern table format: "+I;l=e.kern.readFormat0(s,l,b)}return b},e.kern.readFormat0=function(s,l,u){var A=e._bin,g=-1,_=A.readUshort(s,l);l+=2,A.readUshort(s,l),l+=2,A.readUshort(s,l),l+=2,A.readUshort(s,l),l+=2;for(var b=0;b<_;b++){var x=A.readUshort(s,l);l+=2;var C=A.readUshort(s,l);l+=2;var I=A.readShort(s,l);l+=2,x!=g&&(u.glyph1.push(x),u.rval.push({glyph2:[],vals:[]}));var F=u.rval[u.rval.length-1];F.glyph2.push(C),F.vals.push(I),g=x}return l},e.loca={},e.loca.parse=function(s,l,u,A){var g=e._bin,_=[],b=A.head.indexToLocFormat,x=A.maxp.numGlyphs+1;if(b==0)for(var C=0;C<x;C++)_.push(g.readUshort(s,l+(C<<1))<<1);if(b==1)for(C=0;C<x;C++)_.push(g.readUint(s,l+(C<<2)));return _},e.maxp={},e.maxp.parse=function(s,l,u){var A=e._bin,g={},_=A.readUint(s,l);return l+=4,g.numGlyphs=A.readUshort(s,l),l+=2,_==65536&&(g.maxPoints=A.readUshort(s,l),l+=2,g.maxContours=A.readUshort(s,l),l+=2,g.maxCompositePoints=A.readUshort(s,l),l+=2,g.maxCompositeContours=A.readUshort(s,l),l+=2,g.maxZones=A.readUshort(s,l),l+=2,g.maxTwilightPoints=A.readUshort(s,l),l+=2,g.maxStorage=A.readUshort(s,l),l+=2,g.maxFunctionDefs=A.readUshort(s,l),l+=2,g.maxInstructionDefs=A.readUshort(s,l),l+=2,g.maxStackElements=A.readUshort(s,l),l+=2,g.maxSizeOfInstructions=A.readUshort(s,l),l+=2,g.maxComponentElements=A.readUshort(s,l),l+=2,g.maxComponentDepth=A.readUshort(s,l),l+=2),g},e.name={},e.name.parse=function(s,l,u){var A=e._bin,g={};A.readUshort(s,l),l+=2;var _=A.readUshort(s,l);l+=2,A.readUshort(s,l);for(var b,x=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],C=l+=2,I=0;I<_;I++){var F=A.readUshort(s,l);l+=2;var L=A.readUshort(s,l);l+=2;var U=A.readUshort(s,l);l+=2;var P=A.readUshort(s,l);l+=2;var H=A.readUshort(s,l);l+=2;var N=A.readUshort(s,l);l+=2;var z,W=x[P],j=C+12*_+N;if(F==0)z=A.readUnicode(s,j,H/2);else if(F==3&&L==0)z=A.readUnicode(s,j,H/2);else if(L==0)z=A.readASCII(s,j,H);else if(L==1)z=A.readUnicode(s,j,H/2);else if(L==3)z=A.readUnicode(s,j,H/2);else{if(F!=1)throw"unknown encoding "+L+", platformID: "+F;z=A.readASCII(s,j,H),console.debug("reading unknown MAC encoding "+L+" as ASCII")}var J="p"+F+","+U.toString(16);g[J]==null&&(g[J]={}),g[J][W!==void 0?W:P]=z,g[J]._lang=U}for(var ie in g)if(g[ie].postScriptName!=null&&g[ie]._lang==1033)return g[ie];for(var ie in g)if(g[ie].postScriptName!=null&&g[ie]._lang==0)return g[ie];for(var ie in g)if(g[ie].postScriptName!=null&&g[ie]._lang==3084)return g[ie];for(var ie in g)if(g[ie].postScriptName!=null)return g[ie];for(var ie in g){b=ie;break}return console.debug("returning name table with languageID "+g[b]._lang),g[b]},e["OS/2"]={},e["OS/2"].parse=function(s,l,u){var A=e._bin.readUshort(s,l);l+=2;var g={};if(A==0)e["OS/2"].version0(s,l,g);else if(A==1)e["OS/2"].version1(s,l,g);else if(A==2||A==3||A==4)e["OS/2"].version2(s,l,g);else{if(A!=5)throw"unknown OS/2 table version: "+A;e["OS/2"].version5(s,l,g)}return g},e["OS/2"].version0=function(s,l,u){var A=e._bin;return u.xAvgCharWidth=A.readShort(s,l),l+=2,u.usWeightClass=A.readUshort(s,l),l+=2,u.usWidthClass=A.readUshort(s,l),l+=2,u.fsType=A.readUshort(s,l),l+=2,u.ySubscriptXSize=A.readShort(s,l),l+=2,u.ySubscriptYSize=A.readShort(s,l),l+=2,u.ySubscriptXOffset=A.readShort(s,l),l+=2,u.ySubscriptYOffset=A.readShort(s,l),l+=2,u.ySuperscriptXSize=A.readShort(s,l),l+=2,u.ySuperscriptYSize=A.readShort(s,l),l+=2,u.ySuperscriptXOffset=A.readShort(s,l),l+=2,u.ySuperscriptYOffset=A.readShort(s,l),l+=2,u.yStrikeoutSize=A.readShort(s,l),l+=2,u.yStrikeoutPosition=A.readShort(s,l),l+=2,u.sFamilyClass=A.readShort(s,l),l+=2,u.panose=A.readBytes(s,l,10),l+=10,u.ulUnicodeRange1=A.readUint(s,l),l+=4,u.ulUnicodeRange2=A.readUint(s,l),l+=4,u.ulUnicodeRange3=A.readUint(s,l),l+=4,u.ulUnicodeRange4=A.readUint(s,l),l+=4,u.achVendID=[A.readInt8(s,l),A.readInt8(s,l+1),A.readInt8(s,l+2),A.readInt8(s,l+3)],l+=4,u.fsSelection=A.readUshort(s,l),l+=2,u.usFirstCharIndex=A.readUshort(s,l),l+=2,u.usLastCharIndex=A.readUshort(s,l),l+=2,u.sTypoAscender=A.readShort(s,l),l+=2,u.sTypoDescender=A.readShort(s,l),l+=2,u.sTypoLineGap=A.readShort(s,l),l+=2,u.usWinAscent=A.readUshort(s,l),l+=2,u.usWinDescent=A.readUshort(s,l),l+2},e["OS/2"].version1=function(s,l,u){var A=e._bin;return l=e["OS/2"].version0(s,l,u),u.ulCodePageRange1=A.readUint(s,l),l+=4,u.ulCodePageRange2=A.readUint(s,l),l+4},e["OS/2"].version2=function(s,l,u){var A=e._bin;return l=e["OS/2"].version1(s,l,u),u.sxHeight=A.readShort(s,l),l+=2,u.sCapHeight=A.readShort(s,l),l+=2,u.usDefault=A.readUshort(s,l),l+=2,u.usBreak=A.readUshort(s,l),l+=2,u.usMaxContext=A.readUshort(s,l),l+2},e["OS/2"].version5=function(s,l,u){var A=e._bin;return l=e["OS/2"].version2(s,l,u),u.usLowerOpticalPointSize=A.readUshort(s,l),l+=2,u.usUpperOpticalPointSize=A.readUshort(s,l),l+2},e.post={},e.post.parse=function(s,l,u){var A=e._bin,g={};return g.version=A.readFixed(s,l),l+=4,g.italicAngle=A.readFixed(s,l),l+=4,g.underlinePosition=A.readShort(s,l),l+=2,g.underlineThickness=A.readShort(s,l),l+=2,g},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,l){var u=s.cmap,A=-1;if(u.p0e4!=null?A=u.p0e4:u.p3e1!=null?A=u.p3e1:u.p1e0!=null?A=u.p1e0:u.p0e3!=null&&(A=u.p0e3),A==-1)throw"no familiar platform and encoding!";var g=u.tables[A];if(g.format==0)return l>=g.map.length?0:g.map[l];if(g.format==4){for(var _=-1,b=0;b<g.endCount.length;b++)if(l<=g.endCount[b]){_=b;break}return _==-1||g.startCount[_]>l?0:65535&(g.idRangeOffset[_]!=0?g.glyphIdArray[l-g.startCount[_]+(g.idRangeOffset[_]>>1)-(g.idRangeOffset.length-_)]:l+g.idDelta[_])}if(g.format==12){if(l>g.groups[g.groups.length-1][1])return 0;for(b=0;b<g.groups.length;b++){var x=g.groups[b];if(x[0]<=l&&l<=x[1])return x[2]+(l-x[0])}return 0}throw"unknown cmap table format "+g.format},e.U.glyphToPath=function(s,l){var u={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[l]){var A=s.SVG.entries[l];return A==null?u:(typeof A=="string"&&(A=e.SVG.toPath(A),s.SVG.entries[l]=A),A)}if(s.CFF){var g={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},_=s.CFF,b=s.CFF.Private;if(_.ROS){for(var x=0;_.FDSelect[x+2]<=l;)x+=2;b=_.FDArray[_.FDSelect[x+1]].Private}e.U._drawCFF(s.CFF.CharStrings[l],g,_,b,u)}else s.glyf&&e.U._drawGlyf(l,s,u);return u},e.U._drawGlyf=function(s,l,u){var A=l.glyf[s];A==null&&(A=l.glyf[s]=e.glyf._parseGlyf(l,s)),A!=null&&(A.noc>-1?e.U._simpleGlyph(A,u):e.U._compoGlyph(A,l,u))},e.U._simpleGlyph=function(s,l){for(var u=0;u<s.noc;u++){for(var A=u==0?0:s.endPts[u-1]+1,g=s.endPts[u],_=A;_<=g;_++){var b=_==A?g:_-1,x=_==g?A:_+1,C=1&s.flags[_],I=1&s.flags[b],F=1&s.flags[x],L=s.xs[_],U=s.ys[_];if(_==A)if(C){if(!I){e.U.P.moveTo(l,L,U);continue}e.U.P.moveTo(l,s.xs[b],s.ys[b])}else I?e.U.P.moveTo(l,s.xs[b],s.ys[b]):e.U.P.moveTo(l,(s.xs[b]+L)/2,(s.ys[b]+U)/2);C?I&&e.U.P.lineTo(l,L,U):F?e.U.P.qcurveTo(l,L,U,s.xs[x],s.ys[x]):e.U.P.qcurveTo(l,L,U,(L+s.xs[x])/2,(U+s.ys[x])/2)}e.U.P.closePath(l)}},e.U._compoGlyph=function(s,l,u){for(var A=0;A<s.parts.length;A++){var g={cmds:[],crds:[]},_=s.parts[A];e.U._drawGlyf(_.glyphIndex,l,g);for(var b=_.m,x=0;x<g.crds.length;x+=2){var C=g.crds[x],I=g.crds[x+1];u.crds.push(C*b.a+I*b.b+b.tx),u.crds.push(C*b.c+I*b.d+b.ty)}for(x=0;x<g.cmds.length;x++)u.cmds.push(g.cmds[x])}},e.U._getGlyphClass=function(s,l){var u=e._lctf.getInterval(l,s);return u==-1?0:l[u+2]},e.U._applySubs=function(s,l,u,A){for(var g=s.length-l-1,_=0;_<u.tabs.length;_++)if(u.tabs[_]!=null){var b,x=u.tabs[_];if(!x.coverage||(b=e._lctf.coverageIndex(x.coverage,s[l]))!=-1){if(u.ltype==1)s[l],x.fmt==1?s[l]=s[l]+x.delta:s[l]=x.newg[b];else if(u.ltype==4)for(var C=x.vals[b],I=0;I<C.length;I++){var F=C[I],L=F.chain.length;if(!(L>g)){for(var U=!0,P=0,H=0;H<L;H++){for(;s[l+P+(1+H)]==-1;)P++;F.chain[H]!=s[l+P+(1+H)]&&(U=!1)}if(U){for(s[l]=F.nglyph,H=0;H<L+P;H++)s[l+H+1]=-1;break}}}else if(u.ltype==5&&x.fmt==2)for(var N=e._lctf.getInterval(x.cDef,s[l]),z=x.cDef[N+2],W=x.scset[z],j=0;j<W.length;j++){var J=W[j],ie=J.input;if(!(ie.length>g)){for(U=!0,H=0;H<ie.length;H++){var ee=e._lctf.getInterval(x.cDef,s[l+1+H]);if(N==-1&&x.cDef[ee+2]!=ie[H]){U=!1;break}}if(U){var re=J.substLookupRecords;for(I=0;I<re.length;I+=2)re[I],re[I+1]}}}else if(u.ltype==6&&x.fmt==3){if(!e.U._glsCovered(s,x.backCvg,l-x.backCvg.length)||!e.U._glsCovered(s,x.inptCvg,l)||!e.U._glsCovered(s,x.ahedCvg,l+x.inptCvg.length))continue;var se=x.lookupRec;for(j=0;j<se.length;j+=2){N=se[j];var ue=A[se[j+1]];e.U._applySubs(s,l+N,ue,A)}}}}},e.U._glsCovered=function(s,l,u){for(var A=0;A<l.length;A++)if(e._lctf.coverageIndex(l[A],s[u+A])==-1)return!1;return!0},e.U.glyphsToPath=function(s,l,u){for(var A={cmds:[],crds:[]},g=0,_=0;_<l.length;_++){var b=l[_];if(b!=-1){for(var x=_<l.length-1&&l[_+1]!=-1?l[_+1]:0,C=e.U.glyphToPath(s,b),I=0;I<C.crds.length;I+=2)A.crds.push(C.crds[I]+g),A.crds.push(C.crds[I+1]);for(u&&A.cmds.push(u),I=0;I<C.cmds.length;I++)A.cmds.push(C.cmds[I]);u&&A.cmds.push("X"),g+=s.hmtx.aWidth[b],_<l.length-1&&(g+=e.U.getPairAdjustment(s,b,x))}}return A},e.U.P={},e.U.P.moveTo=function(s,l,u){s.cmds.push("M"),s.crds.push(l,u)},e.U.P.lineTo=function(s,l,u){s.cmds.push("L"),s.crds.push(l,u)},e.U.P.curveTo=function(s,l,u,A,g,_,b){s.cmds.push("C"),s.crds.push(l,u,A,g,_,b)},e.U.P.qcurveTo=function(s,l,u,A,g){s.cmds.push("Q"),s.crds.push(l,u,A,g)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,l,u,A,g){for(var _=l.stack,b=l.nStems,x=l.haveWidth,C=l.width,I=l.open,F=0,L=l.x,U=l.y,P=0,H=0,N=0,z=0,W=0,j=0,J=0,ie=0,ee=0,re=0,se={val:0,size:0};F<s.length;){e.CFF.getCharString(s,F,se);var ue=se.val;if(F+=se.size,ue=="o1"||ue=="o18")_.length%2!=0&&!x&&(C=_.shift()+A.nominalWidthX),b+=_.length>>1,_.length=0,x=!0;else if(ue=="o3"||ue=="o23")_.length%2!=0&&!x&&(C=_.shift()+A.nominalWidthX),b+=_.length>>1,_.length=0,x=!0;else if(ue=="o4")_.length>1&&!x&&(C=_.shift()+A.nominalWidthX,x=!0),I&&e.U.P.closePath(g),U+=_.pop(),e.U.P.moveTo(g,L,U),I=!0;else if(ue=="o5")for(;_.length>0;)L+=_.shift(),U+=_.shift(),e.U.P.lineTo(g,L,U);else if(ue=="o6"||ue=="o7")for(var fe=_.length,pe=ue=="o6",xe=0;xe<fe;xe++){var ce=_.shift();pe?L+=ce:U+=ce,pe=!pe,e.U.P.lineTo(g,L,U)}else if(ue=="o8"||ue=="o24"){fe=_.length;for(var _e=0;_e+6<=fe;)P=L+_.shift(),H=U+_.shift(),N=P+_.shift(),z=H+_.shift(),L=N+_.shift(),U=z+_.shift(),e.U.P.curveTo(g,P,H,N,z,L,U),_e+=6;ue=="o24"&&(L+=_.shift(),U+=_.shift(),e.U.P.lineTo(g,L,U))}else{if(ue=="o11")break;if(ue=="o1234"||ue=="o1235"||ue=="o1236"||ue=="o1237")ue=="o1234"&&(H=U,N=(P=L+_.shift())+_.shift(),re=z=H+_.shift(),j=z,ie=U,L=(J=(W=(ee=N+_.shift())+_.shift())+_.shift())+_.shift(),e.U.P.curveTo(g,P,H,N,z,ee,re),e.U.P.curveTo(g,W,j,J,ie,L,U)),ue=="o1235"&&(P=L+_.shift(),H=U+_.shift(),N=P+_.shift(),z=H+_.shift(),ee=N+_.shift(),re=z+_.shift(),W=ee+_.shift(),j=re+_.shift(),J=W+_.shift(),ie=j+_.shift(),L=J+_.shift(),U=ie+_.shift(),_.shift(),e.U.P.curveTo(g,P,H,N,z,ee,re),e.U.P.curveTo(g,W,j,J,ie,L,U)),ue=="o1236"&&(P=L+_.shift(),H=U+_.shift(),N=P+_.shift(),re=z=H+_.shift(),j=z,J=(W=(ee=N+_.shift())+_.shift())+_.shift(),ie=j+_.shift(),L=J+_.shift(),e.U.P.curveTo(g,P,H,N,z,ee,re),e.U.P.curveTo(g,W,j,J,ie,L,U)),ue=="o1237"&&(P=L+_.shift(),H=U+_.shift(),N=P+_.shift(),z=H+_.shift(),ee=N+_.shift(),re=z+_.shift(),W=ee+_.shift(),j=re+_.shift(),J=W+_.shift(),ie=j+_.shift(),Math.abs(J-L)>Math.abs(ie-U)?L=J+_.shift():U=ie+_.shift(),e.U.P.curveTo(g,P,H,N,z,ee,re),e.U.P.curveTo(g,W,j,J,ie,L,U));else if(ue=="o14"){if(_.length>0&&!x&&(C=_.shift()+u.nominalWidthX,x=!0),_.length==4){var ye=_.shift(),Oe=_.shift(),ge=_.shift(),Ee=_.shift(),ke=e.CFF.glyphBySE(u,ge),je=e.CFF.glyphBySE(u,Ee);e.U._drawCFF(u.CharStrings[ke],l,u,A,g),l.x=ye,l.y=Oe,e.U._drawCFF(u.CharStrings[je],l,u,A,g)}I&&(e.U.P.closePath(g),I=!1)}else if(ue=="o19"||ue=="o20")_.length%2!=0&&!x&&(C=_.shift()+A.nominalWidthX),b+=_.length>>1,_.length=0,x=!0,F+=b+7>>3;else if(ue=="o21")_.length>2&&!x&&(C=_.shift()+A.nominalWidthX,x=!0),U+=_.pop(),L+=_.pop(),I&&e.U.P.closePath(g),e.U.P.moveTo(g,L,U),I=!0;else if(ue=="o22")_.length>1&&!x&&(C=_.shift()+A.nominalWidthX,x=!0),L+=_.pop(),I&&e.U.P.closePath(g),e.U.P.moveTo(g,L,U),I=!0;else if(ue=="o25"){for(;_.length>6;)L+=_.shift(),U+=_.shift(),e.U.P.lineTo(g,L,U);P=L+_.shift(),H=U+_.shift(),N=P+_.shift(),z=H+_.shift(),L=N+_.shift(),U=z+_.shift(),e.U.P.curveTo(g,P,H,N,z,L,U)}else if(ue=="o26")for(_.length%2&&(L+=_.shift());_.length>0;)P=L,H=U+_.shift(),L=N=P+_.shift(),U=(z=H+_.shift())+_.shift(),e.U.P.curveTo(g,P,H,N,z,L,U);else if(ue=="o27")for(_.length%2&&(U+=_.shift());_.length>0;)H=U,N=(P=L+_.shift())+_.shift(),z=H+_.shift(),L=N+_.shift(),U=z,e.U.P.curveTo(g,P,H,N,z,L,U);else if(ue=="o10"||ue=="o29"){var Ie=ue=="o10"?A:u;if(_.length==0)console.debug("error: empty stack");else{var ze=_.pop(),ht=Ie.Subrs[ze+Ie.Bias];l.x=L,l.y=U,l.nStems=b,l.haveWidth=x,l.width=C,l.open=I,e.U._drawCFF(ht,l,u,A,g),L=l.x,U=l.y,b=l.nStems,x=l.haveWidth,C=l.width,I=l.open}}else if(ue=="o30"||ue=="o31"){var lt=_.length,yt=(_e=0,ue=="o31");for(_e+=lt-(fe=-3&lt);_e<fe;)yt?(H=U,N=(P=L+_.shift())+_.shift(),U=(z=H+_.shift())+_.shift(),fe-_e==5?(L=N+_.shift(),_e++):L=N,yt=!1):(P=L,H=U+_.shift(),N=P+_.shift(),z=H+_.shift(),L=N+_.shift(),fe-_e==5?(U=z+_.shift(),_e++):U=z,yt=!0),e.U.P.curveTo(g,P,H,N,z,L,U),_e+=4}else{if((ue+"").charAt(0)=="o")throw console.debug("Unknown operation: "+ue,s),ue;_.push(ue)}}}l.x=L,l.y=U,l.nStems=b,l.haveWidth=x,l.width=C,l.open=I};var i=e,r={Typr:i};return a.Typr=i,a.default=r,Object.defineProperty(a,"__esModule",{value:!0}),a}({}).Typr},function(){return function(a){var e=Uint8Array,i=Uint16Array,r=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A=function(ue,fe){for(var pe=new i(31),xe=0;xe<31;++xe)pe[xe]=fe+=1<<ue[xe-1];var ce=new r(pe[30]);for(xe=1;xe<30;++xe)for(var _e=pe[xe];_e<pe[xe+1];++_e)ce[_e]=_e-pe[xe]<<5|xe;return[pe,ce]},g=A(s,2),_=g[0],b=g[1];_[28]=258,b[258]=28;for(var x=A(l,0)[0],C=new i(32768),I=0;I<32768;++I){var F=(43690&I)>>>1|(21845&I)<<1;F=(61680&(F=(52428&F)>>>2|(13107&F)<<2))>>>4|(3855&F)<<4,C[I]=((65280&F)>>>8|(255&F)<<8)>>>1}var L=function(ue,fe,pe){for(var xe=ue.length,ce=0,_e=new i(fe);ce<xe;++ce)++_e[ue[ce]-1];var ye,Oe=new i(fe);for(ce=0;ce<fe;++ce)Oe[ce]=Oe[ce-1]+_e[ce-1]<<1;ye=new i(1<<fe);var ge=15-fe;for(ce=0;ce<xe;++ce)if(ue[ce])for(var Ee=ce<<4|ue[ce],ke=fe-ue[ce],je=Oe[ue[ce]-1]++<<ke,Ie=je|(1<<ke)-1;je<=Ie;++je)ye[C[je]>>>ge]=Ee;return ye},U=new e(288);for(I=0;I<144;++I)U[I]=8;for(I=144;I<256;++I)U[I]=9;for(I=256;I<280;++I)U[I]=7;for(I=280;I<288;++I)U[I]=8;var P=new e(32);for(I=0;I<32;++I)P[I]=5;var H=L(U,9),N=L(P,5),z=function(ue){for(var fe=ue[0],pe=1;pe<ue.length;++pe)ue[pe]>fe&&(fe=ue[pe]);return fe},W=function(ue,fe,pe){var xe=fe/8|0;return(ue[xe]|ue[xe+1]<<8)>>(7&fe)&pe},j=function(ue,fe){var pe=fe/8|0;return(ue[pe]|ue[pe+1]<<8|ue[pe+2]<<16)>>(7&fe)},J=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ie=function(ue,fe,pe){var xe=new Error(fe||J[ue]);if(xe.code=ue,Error.captureStackTrace&&Error.captureStackTrace(xe,ie),!pe)throw xe;return xe},ee=function(ue,fe,pe){var xe=ue.length;if(!xe||pe&&!pe.l&&xe<5)return fe||new e(0);var ce=!fe||pe,_e=!pe||pe.i;pe||(pe={}),fe||(fe=new e(3*xe));var ye,Oe=function(Bi){var ln=fe.length;if(Bi>ln){var Ji=new e(Math.max(2*ln,Bi));Ji.set(fe),fe=Ji}},ge=pe.f||0,Ee=pe.p||0,ke=pe.b||0,je=pe.l,Ie=pe.d,ze=pe.m,ht=pe.n,lt=8*xe;do{if(!je){pe.f=ge=W(ue,Ee,1);var yt=W(ue,Ee+1,3);if(Ee+=3,!yt){var Nt=ue[(At=((ye=Ee)/8|0)+(7&ye&&1)+4)-4]|ue[At-3]<<8,zt=At+Nt;if(zt>xe){_e&&ie(0);break}ce&&Oe(ke+Nt),fe.set(ue.subarray(At,zt),ke),pe.b=ke+=Nt,pe.p=Ee=8*zt;continue}if(yt==1)je=H,Ie=N,ze=9,ht=5;else if(yt==2){var ei=W(ue,Ee,31)+257,it=W(ue,Ee+10,15)+4,Dt=ei+W(ue,Ee+5,31)+1;Ee+=14;for(var Be=new e(Dt),li=new e(19),bt=0;bt<it;++bt)li[u[bt]]=W(ue,Ee+3*bt,7);Ee+=3*it;var Wt=z(li),qe=(1<<Wt)-1,pt=L(li,Wt);for(bt=0;bt<Dt;){var At,Se=pt[W(ue,Ee,qe)];if(Ee+=15&Se,(At=Se>>>4)<16)Be[bt++]=At;else{var me=0,$e=0;for(At==16?($e=3+W(ue,Ee,3),Ee+=2,me=Be[bt-1]):At==17?($e=3+W(ue,Ee,7),Ee+=3):At==18&&($e=11+W(ue,Ee,127),Ee+=7);$e--;)Be[bt++]=me}}var Ct=Be.subarray(0,ei),wt=Be.subarray(ei);ze=z(Ct),ht=z(wt),je=L(Ct,ze),Ie=L(wt,ht)}else ie(1);if(Ee>lt){_e&&ie(0);break}}ce&&Oe(ke+131072);for(var ft=(1<<ze)-1,Ot=(1<<ht)-1,Gt=Ee;;Gt=Ee){var si=(me=je[j(ue,Ee)&ft])>>>4;if((Ee+=15&me)>lt){_e&&ie(0);break}if(me||ie(2),si<256)fe[ke++]=si;else{if(si==256){Gt=Ee,je=null;break}var $t=si-254;if(si>264){var ti=s[bt=si-257];$t=W(ue,Ee,(1<<ti)-1)+_[bt],Ee+=ti}var gi=Ie[j(ue,Ee)&Ot],mi=gi>>>4;if(gi||ie(3),Ee+=15&gi,wt=x[mi],mi>3&&(ti=l[mi],wt+=j(ue,Ee)&(1<<ti)-1,Ee+=ti),Ee>lt){_e&&ie(0);break}ce&&Oe(ke+131072);for(var Oi=ke+$t;ke<Oi;ke+=4)fe[ke]=fe[ke-wt],fe[ke+1]=fe[ke+1-wt],fe[ke+2]=fe[ke+2-wt],fe[ke+3]=fe[ke+3-wt];ke=Oi}}pe.l=je,pe.p=Gt,pe.b=ke,je&&(ge=1,pe.m=ze,pe.d=Ie,pe.n=ht)}while(!ge);return ke==fe.length?fe:function(Bi,ln,Ji){(Ji==null||Ji>Bi.length)&&(Ji=Bi.length);var Vi=new(Bi instanceof i?i:Bi instanceof r?r:e)(Ji-0);return Vi.set(Bi.subarray(0,Ji)),Vi}(fe,0,ke)},re=new e(0),se=typeof TextDecoder<"u"&&new TextDecoder;try{se.decode(re,{stream:!0})}catch{}return a.convert_streams=function(ue){var fe=new DataView(ue),pe=0;function xe(){var ei=fe.getUint16(pe);return pe+=2,ei}function ce(){var ei=fe.getUint32(pe);return pe+=4,ei}function _e(ei){Nt.setUint16(zt,ei),zt+=2}function ye(ei){Nt.setUint32(zt,ei),zt+=4}for(var Oe={signature:ce(),flavor:ce(),length:ce(),numTables:xe(),reserved:xe(),totalSfntSize:ce(),majorVersion:xe(),minorVersion:xe(),metaOffset:ce(),metaLength:ce(),metaOrigLength:ce(),privOffset:ce(),privLength:ce()},ge=0;Math.pow(2,ge)<=Oe.numTables;)ge++;ge--;for(var Ee=16*Math.pow(2,ge),ke=16*Oe.numTables-Ee,je=12,Ie=[],ze=0;ze<Oe.numTables;ze++)Ie.push({tag:ce(),offset:ce(),compLength:ce(),origLength:ce(),origChecksum:ce()}),je+=16;var ht,lt=new Uint8Array(12+16*Ie.length+Ie.reduce(function(ei,it){return ei+it.origLength+4},0)),yt=lt.buffer,Nt=new DataView(yt),zt=0;return ye(Oe.flavor),_e(Oe.numTables),_e(Ee),_e(ge),_e(ke),Ie.forEach(function(ei){ye(ei.tag),ye(ei.origChecksum),ye(je),ye(ei.origLength),ei.outOffset=je,(je+=ei.origLength)%4!=0&&(je+=4-je%4)}),Ie.forEach(function(ei){var it,Dt=ue.slice(ei.offset,ei.offset+ei.compLength);if(ei.compLength!=ei.origLength){var Be=new Uint8Array(ei.origLength);it=new Uint8Array(Dt,2),ee(it,Be)}else Be=new Uint8Array(Dt);lt.set(Be,ei.outOffset);var li=0;(je=ei.outOffset+ei.origLength)%4!=0&&(li=4-je%4),lt.set(new Uint8Array(li).buffer,ei.outOffset+ei.origLength),ht=je+li}),yt.slice(0,ht)},Object.defineProperty(a,"__esModule",{value:!0}),a}({}).convert_streams},function(a,e){const i={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let s;function l(x){if(!s){const C={R:2,L:1,D:4,C:16,U:32,T:8};s=new Map;for(let I in r){let F=0;r[I].split(",").forEach(L=>{let[U,P]=L.split("+");U=parseInt(U,36),P=P?parseInt(P,36):0,s.set(F+=U,C[I]);for(let H=P;H--;)s.set(++F,C[I])})}}return s.get(x)||32}const u=[null,"isol","init","fina","medi"];function A(x){const C=new Uint8Array(x.length);let I=32,F=1,L=-1;for(let U=0;U<x.length;U++){const P=x.codePointAt(U);let H=0|l(P),N=1;8&H||(21&I?22&H?(N=3,F!==1&&F!==3||C[L]++):33&H&&(F!==2&&F!==4||C[L]--):34&I&&(F!==2&&F!==4||C[L]--),F=C[U]=N,I=H,L=U,P>65535&&U++)}return C}function g(x,C){const I=x.GDEF&&x.GDEF.glyphClassDef;return I?a.U._getGlyphClass(C,I):0}function _(...x){for(let C=0;C<x.length;C++)if(typeof x[C]=="number")return x[C]}function b(x){const C=Object.create(null),I=x["OS/2"],F=x.hhea,L=x.head.unitsPerEm,U=_(I&&I.sTypoAscender,F&&F.ascender,L),P={unitsPerEm:L,ascender:U,descender:_(I&&I.sTypoDescender,F&&F.descender,0),capHeight:_(I&&I.sCapHeight,U),xHeight:_(I&&I.sxHeight,U),lineGap:_(I&&I.sTypoLineGap,F&&F.lineGap),supportsCodePoint:H=>a.U.codeToGlyph(x,H)>0,forEachGlyph(H,N,z,W){let j=0;const J=1/P.unitsPerEm*N,ie=function(se,ue){const fe=[];for(let xe=0;xe<ue.length;xe++){const ce=ue.codePointAt(xe);ce>65535&&xe++,fe.push(a.U.codeToGlyph(se,ce))}const pe=se.GSUB;if(pe){const{lookupList:xe,featureList:ce}=pe;let _e;const ye=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,Oe=[];ce.forEach(ge=>{if(ye.test(ge.tag))for(let Ee=0;Ee<ge.tab.length;Ee++){if(Oe[ge.tab[Ee]])continue;Oe[ge.tab[Ee]]=!0;const ke=xe[ge.tab[Ee]],je=/^(isol|init|fina|medi)$/.test(ge.tag);je&&!_e&&(_e=A(ue));for(let Ie=0;Ie<fe.length;Ie++)_e&&je&&u[_e[Ie]]!==ge.tag||a.U._applySubs(fe,Ie,ke,xe)}})}return fe}(x,H);let ee=0;const re=function(se,ue){const fe=new Int16Array(3*ue.length);let pe=0;for(;pe<ue.length;pe++){const ye=ue[pe];if(ye===-1)continue;fe[3*pe+2]=se.hmtx.aWidth[ye];const Oe=se.GPOS;if(Oe){const ge=Oe.lookupList;for(let Ee=0;Ee<ge.length;Ee++){const ke=ge[Ee];for(let je=0;je<ke.tabs.length;je++){const Ie=ke.tabs[je];if(ke.ltype===1){if(a._lctf.coverageIndex(Ie.coverage,ye)!==-1&&Ie.pos){_e(Ie.pos,pe);break}}else if(ke.ltype===2){let ze=null,ht=xe();if(ht!==-1){const lt=a._lctf.coverageIndex(Ie.coverage,ue[ht]);if(lt!==-1){if(Ie.fmt===1){const yt=Ie.pairsets[lt];for(let Nt=0;Nt<yt.length;Nt++)yt[Nt].gid2===ye&&(ze=yt[Nt])}else if(Ie.fmt===2){const yt=a.U._getGlyphClass(ue[ht],Ie.classDef1),Nt=a.U._getGlyphClass(ye,Ie.classDef2);ze=Ie.matrix[yt][Nt]}if(ze){ze.val1&&_e(ze.val1,ht),ze.val2&&_e(ze.val2,pe);break}}}}else if(ke.ltype===4){const ze=a._lctf.coverageIndex(Ie.markCoverage,ye);if(ze!==-1){const ht=xe(ce),lt=ht===-1?-1:a._lctf.coverageIndex(Ie.baseCoverage,ue[ht]);if(lt!==-1){const yt=Ie.markArray[ze],Nt=Ie.baseArray[lt][yt.markClass];fe[3*pe]=Nt.x-yt.x+fe[3*ht]-fe[3*ht+2],fe[3*pe+1]=Nt.y-yt.y+fe[3*ht+1];break}}}else if(ke.ltype===6){const ze=a._lctf.coverageIndex(Ie.mark1Coverage,ye);if(ze!==-1){const ht=xe();if(ht!==-1){const lt=ue[ht];if(g(se,lt)===3){const yt=a._lctf.coverageIndex(Ie.mark2Coverage,lt);if(yt!==-1){const Nt=Ie.mark1Array[ze],zt=Ie.mark2Array[yt][Nt.markClass];fe[3*pe]=zt.x-Nt.x+fe[3*ht]-fe[3*ht+2],fe[3*pe+1]=zt.y-Nt.y+fe[3*ht+1];break}}}}}}}}else if(se.kern&&!se.cff){const ge=xe();if(ge!==-1){const Ee=se.kern.glyph1.indexOf(ue[ge]);if(Ee!==-1){const ke=se.kern.rval[Ee].glyph2.indexOf(ye);ke!==-1&&(fe[3*ge+2]+=se.kern.rval[Ee].vals[ke])}}}}return fe;function xe(ye){for(let Oe=pe-1;Oe>=0;Oe--)if(ue[Oe]!==-1&&(!ye||ye(ue[Oe])))return Oe;return-1}function ce(ye){return g(se,ye)===1}function _e(ye,Oe){for(let ge=0;ge<3;ge++)fe[3*Oe+ge]+=ye[ge]||0}}(x,ie);return ie.forEach((se,ue)=>{if(se!==-1){let fe=C[se];if(!fe){const{cmds:pe,crds:xe}=a.U.glyphToPath(x,se);let ce,_e,ye,Oe,ge="",Ee=0;for(let ke=0,je=pe.length;ke<je;ke++){const Ie=i[pe[ke]];ge+=pe[ke];for(let ze=1;ze<=Ie;ze++)ge+=(ze>1?",":"")+xe[Ee++]}if(xe.length){ce=_e=1/0,ye=Oe=-1/0;for(let ke=0,je=xe.length;ke<je;ke+=2){let Ie=xe[ke],ze=xe[ke+1];Ie<ce&&(ce=Ie),ze<_e&&(_e=ze),Ie>ye&&(ye=Ie),ze>Oe&&(Oe=ze)}}else ce=ye=_e=Oe=0;fe=C[se]={index:se,advanceWidth:x.hmtx.aWidth[se],xMin:ce,yMin:_e,xMax:ye,yMax:Oe,path:ge}}W.call(null,fe,j+re[3*ue]*J,re[3*ue+1]*J,ee),j+=re[3*ue+2]*J,z&&(j+=z*N)}ee+=H.codePointAt(ee)>65535?2:1}),j}};return P}return function(x){const C=new Uint8Array(x,0,4),I=a._bin.readASCII(C,0,4);if(I==="wOFF")x=e(x);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return b(a.parse(x)[0])}}],init:(a,e,i)=>i(a(),e())});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/const KOe=GS({name:"FontResolver",dependencies:[function(a,e){const i=Object.create(null),r=Object.create(null);function s(l,u){let A=i[l];A?u(A):r[l]?r[l].push(u):(r[l]=[u],function(g,_){const b=x=>{console.error(`Failure loading font ${g}`,x)};try{const x=new XMLHttpRequest;x.open("get",g,!0),x.responseType="arraybuffer",x.onload=function(){if(x.status>=400)b(new Error(x.statusText));else if(x.status>0)try{const C=a(x.response);C.src=g,_(C)}catch(C){b(C)}},x.onerror=b,x.send()}catch(x){b(x)}}(l,g=>{g.src=l,i[l]=g,r[l].forEach(_=>_(g)),delete r[l]}))}return function(l,u,{lang:A,fonts:g=[],style:_="normal",weight:b="normal",unicodeFontsURL:x}={}){const C=new Uint8Array(l.length),I=[];l.length||P();const F=new Map,L=[];if(_!=="italic"&&(_="normal"),typeof b!="number"&&(b=b==="bold"?700:400),g&&!Array.isArray(g)&&(g=[g]),(g=g.slice().filter(N=>!N.lang||N.lang.test(A)).reverse()).length){let W=0;(function j(J=0){for(let ie=J,ee=l.length;ie<ee;ie++){const re=l.codePointAt(ie);if(W===1&&I[C[ie-1]].supportsCodePoint(re)||ie>0&&/\s/.test(l[ie]))C[ie]=C[ie-1],W===2&&(L[L.length-1][1]=ie);else for(let se=C[ie],ue=g.length;se<=ue;se++)if(se===ue)(W===2?L[L.length-1]:L[L.length]=[ie,ie])[1]=ie,W=2;else{C[ie]=se;const{src:fe,unicodeRange:pe}=g[se];if(!pe||H(re,pe)){const xe=i[fe];if(!xe)return void s(fe,()=>{j(ie)});if(xe.supportsCodePoint(re)){let ce=F.get(xe);typeof ce!="number"&&(ce=I.length,I.push(xe),F.set(xe,ce)),C[ie]=ce,W=1;break}}}re>65535&&ie+1<ee&&(C[ie+1]=C[ie],ie++,W===2&&(L[L.length-1][1]=ie))}U()})()}else L.push([0,l.length-1]),U();function U(){if(L.length){const N=L.map(z=>l.substring(z[0],z[1]+1)).join(`
`);e.getFontsForString(N,{lang:A||void 0,style:_,weight:b,dataUrl:x}).then(({fontUrls:z,chars:W})=>{const j=I.length;let J=0;L.forEach(ee=>{for(let re=0,se=ee[1]-ee[0];re<=se;re++)C[ee[0]+re]=W[J++]+j;J++});let ie=0;z.forEach((ee,re)=>{s(ee,se=>{I[re+j]=se,++ie===z.length&&P()})})})}else P()}function P(){u({chars:C,fonts:I})}function H(N,z){for(let W=0;W<z.length;W++){const[j,J=j]=z[W];if(j<=N&&N<=J)return!0}return!1}}},jOe,function(){return function(a){var e=function(){this.buckets=new Map};e.prototype.add=function(H){var N=H>>5;this.buckets.set(N,(this.buckets.get(N)||0)|1<<(31&H))},e.prototype.has=function(H){var N=this.buckets.get(H>>5);return N!==void 0&&!!(N&1<<(31&H))},e.prototype.serialize=function(){var H=[];return this.buckets.forEach(function(N,z){H.push((+z).toString(36)+":"+N.toString(36))}),H.join(",")},e.prototype.deserialize=function(H){var N=this;this.buckets.clear(),H.split(",").forEach(function(z){var W=z.split(":");N.buckets.set(parseInt(W[0],36),parseInt(W[1],36))})};var i=Math.pow(2,8),r=i-1,s=~r;function l(H){var N=function(W){return W&s}(H).toString(16),z=function(W){return(W&s)+i-1}(H).toString(16);return"codepoint-index/plane"+(H>>16)+"/"+N+"-"+z+".json"}function u(H,N){var z=H&r,W=N.codePointAt(z/6|0);return!!((W=(W||48)-48)&1<<z%6)}function A(H,N){(function(z,W){var j;(j=z,j.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(J){return J.split("-").map(function(ie){return parseInt(ie.trim(),16)})})).forEach(function(J){var ie=J[0],ee=J[1];ee===void 0&&(ee=ie),W(ie,ee)})})(H,function(z,W){for(var j=z;j<=W;j++)N(j)})}var g={},_={},b=new WeakMap,x="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function C(H){var N=b.get(H);return N||(N=new e,A(H.ranges,function(z){return N.add(z)}),b.set(H,N)),N}var I,F=new Map;function L(H,N,z){return H[N]?N:H[z]?z:function(W){for(var j in W)return j}(H)}function U(H,N){var z=N;if(!H.includes(z)){z=1/0;for(var W=0;W<H.length;W++)Math.abs(H[W]-N)<Math.abs(z-N)&&(z=H[W])}return z}function P(H){return I||(I=new Set,A("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(N){I.add(N)})),I.has(H)}return a.CodePointSet=e,a.clearCache=function(){g={},_={}},a.getFontsForString=function(H,N){N===void 0&&(N={});var z,W=N.lang;W===void 0&&(W=new RegExp("\\p{Script=Hangul}","u").test(z=H)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(z)?"ja":"en");var j=N.category;j===void 0&&(j="sans-serif");var J=N.style;J===void 0&&(J="normal");var ie=N.weight;ie===void 0&&(ie=400);var ee=(N.dataUrl||x).replace(/\/$/g,""),re=new Map,se=new Uint8Array(H.length),ue={},fe={},pe=new Array(H.length),xe=new Map,ce=!1;function _e(ge){var Ee=F.get(ge);return Ee||(Ee=fetch(ee+"/"+ge).then(function(ke){if(!ke.ok)throw new Error(ke.statusText);return ke.json().then(function(je){if(!Array.isArray(je)||je[0]!==1)throw new Error("Incorrect schema version; need 1, got "+je[0]);return je[1]})}).catch(function(ke){if(ee!==x)return ce||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+ee+'", trying default CDN. '+ke.message),ce=!0),ee=x,F.delete(ge),_e(ge);throw ke}),F.set(ge,Ee)),Ee}for(var ye=function(ge){var Ee=H.codePointAt(ge),ke=l(Ee);pe[ge]=ke,g[ke]||xe.has(ke)||xe.set(ke,_e(ke).then(function(je){g[ke]=je})),Ee>65535&&(ge++,Oe=ge)},Oe=0;Oe<H.length;Oe++)ye(Oe);return Promise.all(xe.values()).then(function(){xe.clear();for(var ge=function(ke){var je=H.codePointAt(ke),Ie=null,ze=g[pe[ke]],ht=void 0;for(var lt in ze){var yt=fe[lt];if(yt===void 0&&(yt=fe[lt]=new RegExp(lt).test(W||"en")),yt){for(var Nt in ht=lt,ze[lt])if(u(je,ze[lt][Nt])){Ie=Nt;break}break}}if(!Ie){e:for(var zt in ze)if(zt!==ht){for(var ei in ze[zt])if(u(je,ze[zt][ei])){Ie=ei;break e}}}Ie||(console.debug("No font coverage for U+"+je.toString(16)),Ie="latin"),pe[ke]=Ie,_[Ie]||xe.has(Ie)||xe.set(Ie,_e("font-meta/"+Ie+".json").then(function(it){_[Ie]=it})),je>65535&&(ke++,Ee=ke)},Ee=0;Ee<H.length;Ee++)ge(Ee);return Promise.all(xe.values())}).then(function(){for(var ge,Ee=null,ke=0;ke<H.length;ke++){var je=H.codePointAt(ke);if(Ee&&(P(je)||C(Ee).has(je)))se[ke]=se[ke-1];else{Ee=_[pe[ke]];var Ie=ue[Ee.id];if(!Ie){var ze=Ee.typeforms,ht=L(ze,j,"sans-serif"),lt=L(ze[ht],J,"normal"),yt=U((ge=ze[ht])===null||ge===void 0?void 0:ge[lt],ie);Ie=ue[Ee.id]=ee+"/font-files/"+Ee.id+"/"+ht+"."+lt+"."+yt+".woff"}var Nt=re.get(Ie);Nt==null&&(Nt=re.size,re.set(Ie,Nt)),se[ke]=Nt}je>65535&&(ke++,se[ke]=se[ke-1])}return{fontUrls:Array.from(re.keys()),chars:se}})},Object.defineProperty(a,"__esModule",{value:!0}),a}({})}],init:(a,e,i)=>a(e,i())}),Ew=()=>(self.performance||Date).now(),zL=Rce();let Ene;const SU=[];let Iz=0;function Fce(){const a=Ew();for(;SU.length&&Ew()-a<5;)SU.shift()();Iz=SU.length?setTimeout(Fce,0):0}const XOe=(...a)=>new Promise((e,i)=>{SU.push(()=>{const r=Ew();try{zL.webgl.generateIntoCanvas(...a),e({timing:Ew()-r})}catch(s){i(s)}}),Iz||(Iz=setTimeout(Fce,0))}),YOe=4,JOe=2e3,Sne={};let ZOe=0;function Bne(a,e,i,r,s,l,u,A,g,_){const b="TroikaTextSDFGenerator_JS_"+ZOe++%YOe;let x=Sne[b];return x||(x=Sne[b]={workerModule:GS({name:b,workerId:b,dependencies:[Rce,Ew],init(C,I){const F=C().javascript.generate;return function(...L){const U=I();return{textureData:F(...L),timing:I()-U}}},getTransferables:C=>[C.textureData.buffer]}),requests:0,idleTimer:null}),x.requests++,clearTimeout(x.idleTimer),x.workerModule(a,e,i,r,s,l).then(({textureData:C,timing:I})=>{const F=Ew(),L=new Uint8Array(4*C.length);for(let U=0;U<C.length;U++)L[4*U+_]=C[U];return zL.webglUtils.renderImageData(u,L,A,g,a,e,1<<3-_),I+=Ew()-F,--x.requests==0&&(x.idleTimer=setTimeout(()=>{(function(U){AT[U]&&AT[U].forEach(function(P){P()}),dT[U]&&(dT[U].terminate(),delete dT[U])})(b)},JOe)),{timing:I}})}const eQe=zL.webglUtils.resizeWebGLCanvasWithoutClearing,$I={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tQe=new Si;function QE(){return(self.performance||Date).now()}const Ine=Object.create(null);function Uce(a,e){a=function(x,C){for(let I in C)C.hasOwnProperty(I)&&(x[I]=C[I]);return x}({},a);const i=QE(),r=[];if(a.font&&r.push({label:"user",src:iQe(a.font)}),a.font=r,a.text=""+a.text,a.sdfGlyphSize=a.sdfGlyphSize||$I.sdfGlyphSize,a.unicodeFontsURL=a.unicodeFontsURL||$I.unicodeFontsURL,a.colorRanges!=null){let x={};for(let C in a.colorRanges)if(a.colorRanges.hasOwnProperty(C)){let I=a.colorRanges[C];typeof I!="number"&&(I=tQe.set(I).getHex()),x[C]=I}a.colorRanges=x}Object.freeze(a);const{textureWidth:s,sdfExponent:l}=$I,{sdfGlyphSize:u}=a,A=s/u*4;let g=Ine[u];if(!g){const x=document.createElement("canvas");x.width=s,x.height=256*u/A,g=Ine[u]={glyphCount:0,sdfGlyphSize:u,sdfCanvas:x,sdfTexture:new Js(x,void 0,void 0,void 0,Or,Or),contextLost:!1,glyphsByFont:new Map},g.sdfTexture.generateMipmaps=!1,function(C){const I=C.sdfCanvas;I.addEventListener("webglcontextlost",F=>{console.log("Context Lost",F),F.preventDefault(),C.contextLost=!0}),I.addEventListener("webglcontextrestored",F=>{console.log("Context Restored",F),C.contextLost=!1;const L=[];C.glyphsByFont.forEach(U=>{U.forEach(P=>{L.push(Tne(P,C,!0))})}),Promise.all(L).then(()=>{Mne(C),C.sdfTexture.needsUpdate=!0})})}(g)}const{sdfTexture:_,sdfCanvas:b}=g;kce(a).then(x=>{const{glyphIds:C,glyphFontIndices:I,fontData:F,glyphPositions:L,fontSize:U,timings:P}=x,H=[],N=new Float32Array(4*C.length);let z=0,W=0;const j=QE(),J=F.map(ue=>{let fe=g.glyphsByFont.get(ue.src);return fe||g.glyphsByFont.set(ue.src,fe=new Map),fe});C.forEach((ue,fe)=>{const pe=I[fe],{src:xe,unitsPerEm:ce}=F[pe];let _e=J[pe].get(ue);if(!_e){const{path:ke,pathBounds:je}=x.glyphData[xe][ue],Ie=Math.max(je[2]-je[0],je[3]-je[1])/u*($I.sdfMargin*u+.5),ze=g.glyphCount++,ht=[je[0]-Ie,je[1]-Ie,je[2]+Ie,je[3]+Ie];J[pe].set(ue,_e={path:ke,atlasIndex:ze,sdfViewBox:ht}),H.push(_e)}const{sdfViewBox:ye}=_e,Oe=L[W++],ge=L[W++],Ee=U/ce;N[z++]=Oe+ye[0]*Ee,N[z++]=ge+ye[1]*Ee,N[z++]=Oe+ye[2]*Ee,N[z++]=ge+ye[3]*Ee,C[fe]=_e.atlasIndex}),P.quads=(P.quads||0)+(QE()-j);const ie=QE();P.sdf={};const ee=b.height,re=Math.ceil(g.glyphCount/A),se=Math.pow(2,Math.ceil(Math.log2(re*u)));se>ee&&(console.info(`Increasing SDF texture size ${ee}->${se}`),eQe(b,s,se),_.dispose()),Promise.all(H.map(ue=>Tne(ue,g,a.gpuAccelerateSDF).then(({timing:fe})=>{P.sdf[ue.atlasIndex]=fe}))).then(()=>{H.length&&!g.contextLost&&(Mne(g),_.needsUpdate=!0),P.sdfTotal=QE()-ie,P.total=QE()-i,e(Object.freeze({parameters:a,sdfTexture:_,sdfGlyphSize:u,sdfExponent:l,glyphBounds:N,glyphAtlasIndices:C,glyphColors:x.glyphColors,caretPositions:x.caretPositions,chunkedBounds:x.chunkedBounds,ascender:x.ascender,descender:x.descender,lineHeight:x.lineHeight,capHeight:x.capHeight,xHeight:x.xHeight,topBaseline:x.topBaseline,blockBounds:x.blockBounds,visibleBounds:x.visibleBounds,timings:x.timings}))})}),Promise.resolve().then(()=>{var x;g.contextLost||(x=b)._warm||(zL.webgl.isSupported(x),x._warm=!0)})}function Tne({path:a,atlasIndex:e,sdfViewBox:i},{sdfGlyphSize:r,sdfCanvas:s,contextLost:l},u){if(l)return Promise.resolve({timing:-1});const{textureWidth:A,sdfExponent:g}=$I,_=Math.max(i[2]-i[0],i[3]-i[1]),b=Math.floor(e/4);return function(x,C,I,F,L,U,P,H,N,z,W=!0){return W?XOe(x,C,I,F,L,U,P,H,N,z).then(null,j=>(Ene||(console.warn("WebGL SDF generation failed, falling back to JS",j),Ene=!0),Bne(x,C,I,F,L,U,P,H,N,z))):Bne(x,C,I,F,L,U,P,H,N,z)}(r,r,a,i,_,g,s,b%(A/r)*r,Math.floor(b/(A/r))*r,e%4,u)}let ZF;function iQe(a){return ZF||(ZF=typeof document>"u"?{}:document.createElement("a")),ZF.href=a,ZF.href}function Mne(a){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:i}=a,{width:r,height:s}=e,l=a.sdfCanvas.getContext("webgl");let u=i.image.data;u&&u.length===r*s*4||(u=new Uint8Array(r*s*4),i.image={width:r,height:s,data:u},i.flipY=!1,i.isDataTexture=!0),l.readPixels(0,0,r,s,l.RGBA,l.UNSIGNED_BYTE,u)}}const nQe=GS({name:"Typesetter",dependencies:[function(a,e){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",l=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u({text:C="",font:I,lang:F,sdfGlyphSize:L=64,fontSize:U=400,fontWeight:P=1,fontStyle:H="normal",letterSpacing:N=0,lineHeight:z="normal",maxWidth:W=1/0,direction:j,textAlign:J="left",textIndent:ie=0,whiteSpace:ee="normal",overflowWrap:re="normal",anchorX:se=0,anchorY:ue=0,metricsOnly:fe=!1,unicodeFontsURL:pe,preResolvedFonts:xe=null,includeCaretPositions:ce=!1,chunkedBoundsSize:_e=8192,colorRanges:ye=null},Oe){const ge=_(),Ee={fontLoad:0,typesetting:0};C.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),C=C.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),U=+U,N=+N,W=+W,z=z||"normal",ie=+ie,function({text:ke,lang:je,fonts:Ie,style:ze,weight:ht,preResolvedFonts:lt,unicodeFontsURL:yt},Nt){const zt=({chars:ei,fonts:it})=>{let Dt,Be;const li=[];for(let bt=0;bt<ei.length;bt++)ei[bt]!==Be?(Be=ei[bt],li.push(Dt={start:bt,end:bt,fontObj:it[ei[bt]]})):Dt.end=bt;Nt(li)};lt?zt(lt):a(ke,zt,{lang:je,fonts:Ie,style:ze,weight:ht,unicodeFontsURL:yt})}({text:C,lang:F,style:H,weight:P,fonts:typeof I=="string"?[{src:I}]:I,unicodeFontsURL:pe,preResolvedFonts:xe},ke=>{Ee.fontLoad=_()-ge;const je=isFinite(W);let Ie=null,ze=null,ht=null,lt=null,yt=null,Nt=null,zt=null,ei=null,it=0,Dt=0,Be=ee!=="nowrap";const li=new Map,bt=_();let Wt=ie,qe=0,pt=new b;const At=[pt];ke.forEach(wt=>{const{fontObj:ft}=wt,{ascender:Ot,descender:Gt,unitsPerEm:si,lineGap:$t,capHeight:ti,xHeight:gi}=ft;let mi=li.get(ft);if(!mi){const Vi=U/si,at=z==="normal"?(Ot-Gt+$t)*Vi:z*U,Ti=(at-(Ot-Gt)*Vi)/2,Pt=Math.min(at,(Ot-Gt)*Vi),Xt=(Ot+Gt)/2*Vi+Pt/2;mi={index:li.size,src:ft.src,fontObj:ft,fontSizeMult:Vi,unitsPerEm:si,ascender:Ot*Vi,descender:Gt*Vi,capHeight:ti*Vi,xHeight:gi*Vi,lineHeight:at,baseline:-Ti-Ot*Vi,caretTop:Xt,caretBottom:Xt-Pt},li.set(ft,mi)}const{fontSizeMult:Oi}=mi,Bi=C.slice(wt.start,wt.end+1);let ln,Ji;ft.forEachGlyph(Bi,U,N,(Vi,at,Ti,Pt)=>{at+=qe,Pt+=wt.start,ln=at,Ji=Vi;const Xt=C.charAt(Pt),Mi=Vi.advanceWidth*Oi,Ii=pt.count;let Fi;if("isEmpty"in Vi||(Vi.isWhitespace=!!Xt&&new RegExp(s).test(Xt),Vi.canBreakAfter=!!Xt&&l.test(Xt),Vi.isEmpty=Vi.xMin===Vi.xMax||Vi.yMin===Vi.yMax||r.test(Xt)),Vi.isWhitespace||Vi.isEmpty||Dt++,Be&&je&&!Vi.isWhitespace&&at+Mi+Wt>W&&Ii){if(pt.glyphAt(Ii-1).glyphObj.canBreakAfter)Fi=new b,Wt=-at;else for(let Xn=Ii;Xn--;){if(Xn===0&&re==="break-word"){Fi=new b,Wt=-at;break}if(pt.glyphAt(Xn).glyphObj.canBreakAfter){Fi=pt.splitAt(Xn+1);const Tn=Fi.glyphAt(0).x;Wt-=Tn;for(let cr=Fi.count;cr--;)Fi.glyphAt(cr).x-=Tn;break}}Fi&&(pt.isSoftWrapped=!0,pt=Fi,At.push(pt),it=W)}let vn=pt.glyphAt(pt.count);vn.glyphObj=Vi,vn.x=at+Wt,vn.y=Ti,vn.width=Mi,vn.charIndex=Pt,vn.fontData=mi,Xt===`
`&&(pt=new b,At.push(pt),Wt=-(at+Mi+N*U)+ie)}),qe=ln+Ji.advanceWidth*Oi+N*U});let Se=0;At.forEach(wt=>{let ft=!0;for(let Ot=wt.count;Ot--;){const Gt=wt.glyphAt(Ot);ft&&!Gt.glyphObj.isWhitespace&&(wt.width=Gt.x+Gt.width,wt.width>it&&(it=wt.width),ft=!1);let{lineHeight:si,capHeight:$t,xHeight:ti,baseline:gi}=Gt.fontData;si>wt.lineHeight&&(wt.lineHeight=si);const mi=gi-wt.baseline;mi<0&&(wt.baseline+=mi,wt.cap+=mi,wt.ex+=mi),wt.cap=Math.max(wt.cap,wt.baseline+$t),wt.ex=Math.max(wt.ex,wt.baseline+ti)}wt.baseline-=Se,wt.cap-=Se,wt.ex-=Se,Se+=wt.lineHeight});let me=0,$e=0;if(se&&(typeof se=="number"?me=-se:typeof se=="string"&&(me=-it*(se==="left"?0:se==="center"?.5:se==="right"?1:A(se)))),ue&&(typeof ue=="number"?$e=-ue:typeof ue=="string"&&($e=ue==="top"?0:ue==="top-baseline"?-At[0].baseline:ue==="top-cap"?-At[0].cap:ue==="top-ex"?-At[0].ex:ue==="middle"?Se/2:ue==="bottom"?Se:ue==="bottom-baseline"?-At[At.length-1].baseline:A(ue)*Se)),!fe){const wt=e.getEmbeddingLevels(C,j);Ie=new Uint16Array(Dt),ze=new Uint8Array(Dt),ht=new Float32Array(2*Dt),lt={},zt=[1/0,1/0,-1/0,-1/0],ei=[],ce&&(Nt=new Float32Array(4*C.length)),ye&&(yt=new Uint8Array(3*Dt));let ft,Ot,Gt=0,si=-1,$t=-1;if(At.forEach((ti,gi)=>{let{count:mi,width:Oi}=ti;if(mi>0){let Bi=0;for(let Pt=mi;Pt--&&ti.glyphAt(Pt).glyphObj.isWhitespace;)Bi++;let ln=0,Ji=0;if(J==="center")ln=(it-Oi)/2;else if(J==="right")ln=it-Oi;else if(J==="justify"&&ti.isSoftWrapped){let Pt=0;for(let Xt=mi-Bi;Xt--;)ti.glyphAt(Xt).glyphObj.isWhitespace&&Pt++;Ji=(it-Oi)/Pt}if(Ji||ln){let Pt=0;for(let Xt=0;Xt<mi;Xt++){let Mi=ti.glyphAt(Xt);const Ii=Mi.glyphObj;Mi.x+=ln+Pt,Ji!==0&&Ii.isWhitespace&&Xt<mi-Bi&&(Pt+=Ji,Mi.width+=Ji)}}const Vi=e.getReorderSegments(C,wt,ti.glyphAt(0).charIndex,ti.glyphAt(ti.count-1).charIndex);for(let Pt=0;Pt<Vi.length;Pt++){const[Xt,Mi]=Vi[Pt];let Ii=1/0,Fi=-1/0;for(let vn=0;vn<mi;vn++)if(ti.glyphAt(vn).charIndex>=Xt){let Xn=vn,Tn=vn;for(;Tn<mi;Tn++){let cr=ti.glyphAt(Tn);if(cr.charIndex>Mi)break;Tn<mi-Bi&&(Ii=Math.min(Ii,cr.x),Fi=Math.max(Fi,cr.x+cr.width))}for(let cr=Xn;cr<Tn;cr++){const gr=ti.glyphAt(cr);gr.x=Fi-(gr.x+gr.width-Ii)}break}}let at;const Ti=Pt=>at=Pt;for(let Pt=0;Pt<mi;Pt++){const Xt=ti.glyphAt(Pt);at=Xt.glyphObj;const Mi=at.index,Ii=1&wt.levels[Xt.charIndex];if(Ii){const Fi=e.getMirroredCharacter(C[Xt.charIndex]);Fi&&Xt.fontData.fontObj.forEachGlyph(Fi,0,0,Ti)}if(ce){const{charIndex:Fi,fontData:vn}=Xt,Xn=Xt.x+me,Tn=Xt.x+Xt.width+me;Nt[4*Fi]=Ii?Tn:Xn,Nt[4*Fi+1]=Ii?Xn:Tn,Nt[4*Fi+2]=ti.baseline+vn.caretBottom+$e,Nt[4*Fi+3]=ti.baseline+vn.caretTop+$e;const cr=Fi-si;cr>1&&g(Nt,si,cr),si=Fi}if(ye){const{charIndex:Fi}=Xt;for(;Fi>$t;)$t++,ye.hasOwnProperty($t)&&(Ot=ye[$t])}if(!at.isWhitespace&&!at.isEmpty){const Fi=Gt++,{fontSizeMult:vn,src:Xn,index:Tn}=Xt.fontData,cr=lt[Xn]||(lt[Xn]={});cr[Mi]||(cr[Mi]={path:at.path,pathBounds:[at.xMin,at.yMin,at.xMax,at.yMax]});const gr=Xt.x+me,Xr=Xt.y+ti.baseline+$e;ht[2*Fi]=gr,ht[2*Fi+1]=Xr;const $n=gr+at.xMin*vn,co=Xr+at.yMin*vn,Ka=gr+at.xMax*vn,Zu=Xr+at.yMax*vn;$n<zt[0]&&(zt[0]=$n),co<zt[1]&&(zt[1]=co),Ka>zt[2]&&(zt[2]=Ka),Zu>zt[3]&&(zt[3]=Zu),Fi%_e==0&&(ft={start:Fi,end:Fi,rect:[1/0,1/0,-1/0,-1/0]},ei.push(ft)),ft.end++;const fl=ft.rect;if($n<fl[0]&&(fl[0]=$n),co<fl[1]&&(fl[1]=co),Ka>fl[2]&&(fl[2]=Ka),Zu>fl[3]&&(fl[3]=Zu),Ie[Fi]=Mi,ze[Fi]=Tn,ye){const Ql=3*Fi;yt[Ql]=Ot>>16&255,yt[Ql+1]=Ot>>8&255,yt[Ql+2]=255&Ot}}}}}),Nt){const ti=C.length-si;ti>1&&g(Nt,si,ti)}}const Ct=[];li.forEach(({index:wt,src:ft,unitsPerEm:Ot,ascender:Gt,descender:si,lineHeight:$t,capHeight:ti,xHeight:gi})=>{Ct[wt]={src:ft,unitsPerEm:Ot,ascender:Gt,descender:si,lineHeight:$t,capHeight:ti,xHeight:gi}}),Ee.typesetting=_()-bt,Oe({glyphIds:Ie,glyphFontIndices:ze,glyphPositions:ht,glyphData:lt,fontData:Ct,caretPositions:Nt,glyphColors:yt,chunkedBounds:ei,fontSize:U,topBaseline:$e+At[0].baseline,blockBounds:[me,$e-Se,me+it,$e],visibleBounds:zt,timings:Ee})})}function A(C){let I=C.match(/^([\d.]+)%$/),F=I?parseFloat(I[1]):NaN;return isNaN(F)?0:F/100}function g(C,I,F){const L=C[4*I],U=C[4*I+1],P=C[4*I+2],H=C[4*I+3],N=(U-L)/F;for(let z=0;z<F;z++){const W=4*(I+z);C[W]=L+N*z,C[W+1]=L+N*(z+1),C[W+2]=P,C[W+3]=H}}function _(){return(self.performance||Date).now()}function b(){this.data=[]}const x=["glyphObj","x","y","width","charIndex","fontData"];return b.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/x.length)},glyphAt(C){let I=b.flyweight;return I.data=this.data,I.index=C,I},splitAt(C){let I=new b;return I.data=this.data.splice(C*x.length),I}},b.flyweight=x.reduce((C,I,F,L)=>(Object.defineProperty(C,I,{get(){return this.data[this.index*x.length+F]},set(U){this.data[this.index*x.length+F]=U}}),C),{data:null,index:0}),{typeset:u,measure:function(C,I){u({...C,metricsOnly:!0},F=>{const[L,U,P,H]=F.blockBounds;I({width:P-L,height:H-U})})}}},KOe,function(){var a=function(e){var i={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},s={};r.L=1,s[1]="L",Object.keys(i).forEach(function(it,Dt){r[it]=1<<Dt+1,s[r[it]]=it}),Object.freeze(r);var l=r.LRI|r.RLI|r.FSI,u=r.L|r.R|r.AL,A=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,g=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,_=r.S|r.WS|r.B|l|r.PDI|g,b=null;function x(it){return function(){if(!b){b=new Map;var Dt=function(li){if(i.hasOwnProperty(li)){var bt=0;i[li].split(",").forEach(function(Wt){var qe=Wt.split("+"),pt=qe[0],At=qe[1];pt=parseInt(pt,36),At=At?parseInt(At,36):0,b.set(bt+=pt,r[li]);for(var Se=0;Se<At;Se++)b.set(++bt,r[li])})}};for(var Be in i)Dt(Be)}}(),b.get(it.codePointAt(0))||r.L}var C,I,F,L="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",U="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function P(it,Dt){var Be,li=0,bt=new Map,Wt=Dt&&new Map;return it.split(",").forEach(function qe(pt){if(pt.indexOf("+")!==-1)for(var At=+pt;At--;)qe(Be);else{Be=pt;var Se=pt.split(">"),me=Se[0],$e=Se[1];me=String.fromCodePoint(li+=parseInt(me,36)),$e=String.fromCodePoint(li+=parseInt($e,36)),bt.set(me,$e),Dt&&Wt.set($e,me)}}),{map:bt,reverseMap:Wt}}function H(){if(!C){var it=P(L,!0),Dt=it.map,Be=it.reverseMap;C=Dt,I=Be,F=P(U,!1).map}}function N(it){return H(),C.get(it)||null}function z(it){return H(),I.get(it)||null}function W(it){return H(),F.get(it)||null}var j=r.L,J=r.R,ie=r.EN,ee=r.ES,re=r.ET,se=r.AN,ue=r.CS,fe=r.B,pe=r.S,xe=r.ON,ce=r.BN,_e=r.NSM,ye=r.AL,Oe=r.LRO,ge=r.RLO,Ee=r.LRE,ke=r.RLE,je=r.PDF,Ie=r.LRI,ze=r.RLI,ht=r.FSI,lt=r.PDI,yt;function Nt(it){return function(){if(!yt){var Dt=P("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),Be=Dt.map;Dt.reverseMap.forEach(function(li,bt){Be.set(bt,li)}),yt=Be}}(),yt.get(it)||null}function zt(it,Dt,Be,li){var bt=it.length;Be=Math.max(0,Be==null?0:+Be),li=Math.min(bt-1,li==null?bt-1:+li);var Wt=[];return Dt.paragraphs.forEach(function(qe){var pt=Math.max(Be,qe.start),At=Math.min(li,qe.end);if(pt<At){for(var Se=Dt.levels.slice(pt,At+1),me=At;me>=pt&&x(it[me])&_;me--)Se[me]=qe.level;for(var $e=qe.level,Ct=1/0,wt=0;wt<Se.length;wt++){var ft=Se[wt];ft>$e&&($e=ft),ft<Ct&&(Ct=1|ft)}for(var Ot=$e;Ot>=Ct;Ot--)for(var Gt=0;Gt<Se.length;Gt++)if(Se[Gt]>=Ot){for(var si=Gt;Gt+1<Se.length&&Se[Gt+1]>=Ot;)Gt++;Gt>si&&Wt.push([si+pt,Gt+pt])}}}),Wt}function ei(it,Dt,Be,li){for(var bt=zt(it,Dt,Be,li),Wt=[],qe=0;qe<it.length;qe++)Wt[qe]=qe;return bt.forEach(function(pt){for(var At=pt[0],Se=pt[1],me=Wt.slice(At,Se+1),$e=me.length;$e--;)Wt[Se-$e]=me[$e]}),Wt}return e.closingToOpeningBracket=z,e.getBidiCharType=x,e.getBidiCharTypeName=function(it){return s[x(it)]},e.getCanonicalBracket=W,e.getEmbeddingLevels=function(it,Dt){for(var Be=new Uint32Array(it.length),li=0;li<it.length;li++)Be[li]=x(it[li]);var bt=new Map;function Wt(ca,Lo){var Bo=Be[ca];Be[ca]=Lo,bt.set(Bo,bt.get(Bo)-1),Bo&A&&bt.set(A,bt.get(A)-1),bt.set(Lo,(bt.get(Lo)||0)+1),Lo&A&&bt.set(A,(bt.get(A)||0)+1)}for(var qe=new Uint8Array(it.length),pt=new Map,At=[],Se=null,me=0;me<it.length;me++)Se||At.push(Se={start:me,end:it.length-1,level:Dt==="rtl"?1:Dt==="ltr"?0:Gc(me,!1)}),Be[me]&fe&&(Se.end=me,Se=null);for(var $e=ke|Ee|ge|Oe|l|lt|je|fe,Ct=function(ca){return ca+(1&ca?1:2)},wt=function(ca){return ca+(1&ca?2:1)},ft=0;ft<At.length;ft++){var Ot=[{_level:(Se=At[ft]).level,_override:0,_isolate:0}],Gt=void 0,si=0,$t=0,ti=0;bt.clear();for(var gi=Se.start;gi<=Se.end;gi++){var mi=Be[gi];if(Gt=Ot[Ot.length-1],bt.set(mi,(bt.get(mi)||0)+1),mi&A&&bt.set(A,(bt.get(A)||0)+1),mi&$e)if(mi&(ke|Ee)){qe[gi]=Gt._level;var Oi=(mi===ke?wt:Ct)(Gt._level);Oi<=125&&!si&&!$t?Ot.push({_level:Oi,_override:0,_isolate:0}):si||$t++}else if(mi&(ge|Oe)){qe[gi]=Gt._level;var Bi=(mi===ge?wt:Ct)(Gt._level);Bi<=125&&!si&&!$t?Ot.push({_level:Bi,_override:mi&ge?J:j,_isolate:0}):si||$t++}else if(mi&l){mi&ht&&(mi=Gc(gi+1,!0)===1?ze:Ie),qe[gi]=Gt._level,Gt._override&&Wt(gi,Gt._override);var ln=(mi===ze?wt:Ct)(Gt._level);ln<=125&&si===0&&$t===0?(ti++,Ot.push({_level:ln,_override:0,_isolate:1,_isolInitIndex:gi})):si++}else if(mi&lt){if(si>0)si--;else if(ti>0){for($t=0;!Ot[Ot.length-1]._isolate;)Ot.pop();var Ji=Ot[Ot.length-1]._isolInitIndex;Ji!=null&&(pt.set(Ji,gi),pt.set(gi,Ji)),Ot.pop(),ti--}Gt=Ot[Ot.length-1],qe[gi]=Gt._level,Gt._override&&Wt(gi,Gt._override)}else mi&je?(si===0&&($t>0?$t--:!Gt._isolate&&Ot.length>1&&(Ot.pop(),Gt=Ot[Ot.length-1])),qe[gi]=Gt._level):mi&fe&&(qe[gi]=Se.level);else qe[gi]=Gt._level,Gt._override&&mi!==ce&&Wt(gi,Gt._override)}for(var Vi=[],at=null,Ti=Se.start;Ti<=Se.end;Ti++){var Pt=Be[Ti];if(!(Pt&g)){var Xt=qe[Ti],Mi=Pt&l,Ii=Pt===lt;at&&Xt===at._level?(at._end=Ti,at._endsWithIsolInit=Mi):Vi.push(at={_start:Ti,_end:Ti,_level:Xt,_startsWithPDI:Ii,_endsWithIsolInit:Mi})}}for(var Fi=[],vn=0;vn<Vi.length;vn++){var Xn=Vi[vn];if(!Xn._startsWithPDI||Xn._startsWithPDI&&!pt.has(Xn._start)){for(var Tn=[at=Xn],cr=void 0;at&&at._endsWithIsolInit&&(cr=pt.get(at._end))!=null;)for(var gr=vn+1;gr<Vi.length;gr++)if(Vi[gr]._start===cr){Tn.push(at=Vi[gr]);break}for(var Xr=[],$n=0;$n<Tn.length;$n++)for(var co=Tn[$n],Ka=co._start;Ka<=co._end;Ka++)Xr.push(Ka);for(var Zu=qe[Xr[0]],fl=Se.level,Ql=Xr[0]-1;Ql>=0;Ql--)if(!(Be[Ql]&g)){fl=qe[Ql];break}var Nc=Xr[Xr.length-1],eh=qe[Nc],Hc=Se.level;if(!(Be[Nc]&l)){for(var Fs=Nc+1;Fs<=Se.end;Fs++)if(!(Be[Fs]&g)){Hc=qe[Fs];break}}Fi.push({_seqIndices:Xr,_sosType:Math.max(fl,Zu)%2?J:j,_eosType:Math.max(Hc,eh)%2?J:j})}}for(var ys=0;ys<Fi.length;ys++){var Nl=Fi[ys],Hi=Nl._seqIndices,gl=Nl._sosType,oa=Nl._eosType,uo=1&qe[Hi[0]]?J:j;if(bt.get(_e))for(var Le=0;Le<Hi.length;Le++){var Et=Hi[Le];if(Be[Et]&_e){for(var Vt=gl,kt=Le-1;kt>=0;kt--)if(!(Be[Hi[kt]]&g)){Vt=Be[Hi[kt]];break}Wt(Et,Vt&(l|lt)?xe:Vt)}}if(bt.get(ie))for(var St=0;St<Hi.length;St++){var pi=Hi[St];if(Be[pi]&ie)for(var Ui=St-1;Ui>=-1;Ui--){var ki=Ui===-1?gl:Be[Hi[Ui]];if(ki&u){ki===ye&&Wt(pi,se);break}}}if(bt.get(ye))for(var Ci=0;Ci<Hi.length;Ci++){var yn=Hi[Ci];Be[yn]&ye&&Wt(yn,J)}if(bt.get(ee)||bt.get(ue))for(var en=1;en<Hi.length-1;en++){var Qi=Hi[en];if(Be[Qi]&(ee|ue)){for(var Wn=0,Cr=0,Yr=en-1;Yr>=0&&(Wn=Be[Hi[Yr]])&g;Yr--);for(var sr=en+1;sr<Hi.length&&(Cr=Be[Hi[sr]])&g;sr++);Wn===Cr&&(Be[Qi]===ee?Wn===ie:Wn&(ie|se))&&Wt(Qi,Wn)}}if(bt.get(ie))for(var xn=0;xn<Hi.length;xn++){var Xi=Hi[xn];if(Be[Xi]&ie){for(var jn=xn-1;jn>=0&&Be[Hi[jn]]&(re|g);jn--)Wt(Hi[jn],ie);for(xn++;xn<Hi.length&&Be[Hi[xn]]&(re|g|ie);xn++)Be[Hi[xn]]!==ie&&Wt(Hi[xn],ie)}}if(bt.get(re)||bt.get(ee)||bt.get(ue))for(var ar=0;ar<Hi.length;ar++){var Wo=Hi[ar];if(Be[Wo]&(re|ee|ue)){Wt(Wo,xe);for(var Ua=ar-1;Ua>=0&&Be[Hi[Ua]]&g;Ua--)Wt(Hi[Ua],xe);for(var fn=ar+1;fn<Hi.length&&Be[Hi[fn]]&g;fn++)Wt(Hi[fn],xe)}}if(bt.get(ie))for(var Xa=0,Er=gl;Xa<Hi.length;Xa++){var Ss=Hi[Xa],Qs=Be[Ss];Qs&ie?Er===j&&Wt(Ss,j):Qs&u&&(Er=Qs)}if(bt.get(A)){for(var ns=J|ie|se,So=ns|j,Ya=[],aa=[],zc=0;zc<Hi.length;zc++)if(Be[Hi[zc]]&A){var _u=it[Hi[zc]],Wh=void 0;if(N(_u)!==null){if(!(aa.length<63))break;aa.push({char:_u,seqIndex:zc})}else if((Wh=z(_u))!==null)for(var jh=aa.length-1;jh>=0;jh--){var kA=aa[jh].char;if(kA===Wh||kA===z(W(_u))||N(W(kA))===_u){Ya.push([aa[jh].seqIndex,zc]),aa.length=jh;break}}}Ya.sort(function(ca,Lo){return ca[0]-Lo[0]});for(var th=0;th<Ya.length;th++){for(var LA=Ya[th],ih=LA[0],pc=LA[1],vu=!1,Ja=0,PA=ih+1;PA<pc;PA++){var Uf=Hi[PA];if(Be[Uf]&So){vu=!0;var Kh=Be[Uf]&ns?J:j;if(Kh===uo){Ja=Kh;break}}}if(vu&&!Ja){Ja=gl;for(var jo=ih-1;jo>=0;jo--){var $d=Hi[jo];if(Be[$d]&So){var yu=Be[$d]&ns?J:j;Ja=yu!==uo?yu:uo;break}}}if(Ja){if(Be[Hi[ih]]=Be[Hi[pc]]=Ja,Ja!==uo){for(var ml=ih+1;ml<Hi.length;ml++)if(!(Be[Hi[ml]]&g)){x(it[Hi[ml]])&_e&&(Be[Hi[ml]]=Ja);break}}if(Ja!==uo){for(var nh=pc+1;nh<Hi.length;nh++)if(!(Be[Hi[nh]]&g)){x(it[Hi[nh]])&_e&&(Be[Hi[nh]]=Ja);break}}}}for(var _l=0;_l<Hi.length;_l++)if(Be[Hi[_l]]&A){for(var _p=_l,Xh=_l,Hl=gl,bu=_l-1;bu>=0;bu--){if(!(Be[Hi[bu]]&g)){Hl=Be[Hi[bu]]&ns?J:j;break}_p=bu}for(var Uo=oa,vl=_l+1;vl<Hi.length;vl++){if(!(Be[Hi[vl]]&(A|g))){Uo=Be[Hi[vl]]&ns?J:j;break}Xh=vl}for(var Yh=_p;Yh<=Xh;Yh++)Be[Hi[Yh]]=Hl===Uo?Hl:uo;_l=Xh}}}for(var ko=Se.start;ko<=Se.end;ko++){var la=qe[ko],Jh=Be[ko];if(1&la?Jh&(j|ie|se)&&qe[ko]++:Jh&J?qe[ko]++:Jh&(se|ie)&&(qe[ko]+=2),Jh&g&&(qe[ko]=ko===0?Se.level:qe[ko-1]),ko===Se.end||x(it[ko])&(pe|fe))for(var Zh=ko;Zh>=0&&x(it[Zh])&_;Zh--)qe[Zh]=Se.level}}return{levels:qe,paragraphs:At};function Gc(ca,Lo){for(var Bo=ca;Bo<it.length;Bo++){var Vc=Be[Bo];if(Vc&(J|ye))return 1;if(Vc&(fe|j)||Lo&&Vc===lt)return 0;if(Vc&l){var fc=rh(Bo);Bo=fc===-1?it.length:fc}}return 0}function rh(ca){for(var Lo=1,Bo=ca+1;Bo<it.length;Bo++){var Vc=Be[Bo];if(Vc&fe)break;if(Vc&lt){if(--Lo==0)return Bo}else Vc&l&&Lo++}return-1}},e.getMirroredCharacter=Nt,e.getMirroredCharactersMap=function(it,Dt,Be,li){var bt=it.length;Be=Math.max(0,Be==null?0:+Be),li=Math.min(bt-1,li==null?bt-1:+li);for(var Wt=new Map,qe=Be;qe<=li;qe++)if(1&Dt[qe]){var pt=Nt(it[qe]);pt!==null&&Wt.set(qe,pt)}return Wt},e.getReorderSegments=zt,e.getReorderedIndices=ei,e.getReorderedString=function(it,Dt,Be,li){var bt=ei(it,Dt,Be,li),Wt=[].concat(it);return bt.forEach(function(qe,pt){Wt[pt]=(1&Dt.levels[qe]?Nt(it[qe]):null)||it[qe]}),Wt.join("")},e.openingToClosingBracket=N,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return a}],init:(a,e,i)=>a(e,i())}),kce=GS({name:"Typesetter",dependencies:[nQe],init:a=>function(e){return new Promise(i=>{a.typeset(e,i)})},getTransferables(a){const e=[];for(let i in a)a[i]&&a[i].buffer&&e.push(a[i].buffer);return e}});kce.onMainThread;const Rne={},Dne="aTroikaGlyphIndex";class rQe extends h7{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new dc,this.boundingBox=new ia}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let i=function(r){let s=Rne[r];return s||(s=Rne[r]=new UA(1,1,r,r).translate(.5,.5,0)),s}(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=i.attributes[r].clone()}),this.setIndex(i.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,i,r,s,l){this.updateAttributeData("aTroikaGlyphBounds",e,4),this.updateAttributeData(Dne,i,1),this.updateAttributeData("aTroikaGlyphColor",l,3),this._blockBounds=r,this._chunkedBounds=s,this.instanceCount=i.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:i,boundingBox:r}=this;if(i){const{PI:s,floor:l,min:u,max:A,sin:g,cos:_}=Math,b=s/2,x=2*s,C=Math.abs(i),I=e[0]/C,F=e[2]/C,L=l((I+b)/x)!==l((F+b)/x)?-C:u(g(I)*C,g(F)*C),U=l((I-b)/x)!==l((F-b)/x)?C:A(g(I)*C,g(F)*C),P=l((I+s)/x)!==l((F+s)/x)?2*C:A(C-_(I)*C,C-_(F)*C);r.min.set(L,e[1],i<0?-P:0),r.max.set(U,e[3],i<0?0:P)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let i=this.getAttribute(Dne).count,r=this._chunkedBounds;if(r)for(let s=r.length;s--;){i=r[s].end;let l=r[s].rect;if(l[1]<e.w&&l[3]>e.y&&l[0]<e.z&&l[2]>e.x)break}this.instanceCount=i}updateAttributeData(e,i,r){const s=this.getAttribute(e);i?s&&s.array.length===i.length?(s.array.set(i),s.needsUpdate=!0):(this.setAttribute(e,new jy(i,r)),delete this._maxInstanceCount,this.dispose()):s&&this.deleteAttribute(e)}}const e9=new Pc({color:16777215,side:Ll,transparent:!0}),Fne=8421504,Une=new Ki,eU=new Fe,Z4=new Fe,RI=[],sQe=new Fe,eH="+x+y";function kne(a){return Array.isArray(a)?a[0]:a}let Lce=()=>{const a=new Dr(new UA(1,1),e9);return Lce=()=>a,a},Pce=()=>{const a=new Dr(new UA(1,1,32,1),e9);return Pce=()=>a,a};const oQe={type:"syncstart"},aQe={type:"synccomplete"},Oce=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],lQe=Oce.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Qce=class extends Dr{constructor(){super(new rQe,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Fne,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=eH,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(a){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(a):(this._isSyncing=!0,this.dispatchEvent(oQe),Uce({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},e=>{this._isSyncing=!1,this._textRenderInfo=e,this.geometry.updateGlyphs(e.glyphBounds,e.glyphAtlasIndices,e.blockBounds,e.chunkedBounds,e.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(aQe),a&&a()})))}onBeforeRender(a,e,i,r,s,l){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(a){return function(e){const i=Bz(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ci},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vr(0,0,0,0)},uTroikaClipRect:{value:new Vr(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ci},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Si},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new nr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,vertexTransform:`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,fragmentDefs:`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,fragmentColorTransform:`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`,customRewriter({vertexShader:r,fragmentShader:s}){let l=/\buniform\s+vec3\s+diffuse\b/;return l.test(s)&&(s=s.replace(l,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),l.test(r)||(r=r.replace(Dce,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:r,fragmentShader:s}}});return i.transparent=!0,i.forceSinglePass=!0,Object.defineProperties(i,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),i}(a)}get material(){let a=this._derivedMaterial;const e=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e9.clone());if(a&&a.isDerivedFrom(e)||(a=this._derivedMaterial=this.createDerivedMaterial(e),e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),a.dispose()})),this.hasOutline()){let i=a._outlineMtl;return i||(i=a._outlineMtl=Object.create(a,{id:{value:a.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,a.addEventListener("dispose",function r(){a.removeEventListener("dispose",r),i.dispose()})),[i,a]}return a}set material(a){a&&a.isTroikaTextMaterial?(this._derivedMaterial=a,this._baseMaterial=a.baseMaterial):this._baseMaterial=a}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(a){this.geometry.detail=a}get curveRadius(){return this.geometry.curveRadius}set curveRadius(a){this.geometry.curveRadius=a}get customDepthMaterial(){return kne(this.material).getDepthMaterial()}set customDepthMaterial(a){}get customDistanceMaterial(){return kne(this.material).getDistanceMaterial()}set customDistanceMaterial(a){}_prepareForRender(a){const e=a.isTextOutlineMaterial,i=a.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:u,blockBounds:A}=r;i.uTroikaSDFTexture.value=u,i.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(A),i.uTroikaUseGlyphColors.value=!e&&!!r.glyphColors;let g,_,b,x=0,C=0,I=0,F=0,L=0;if(e){let{outlineWidth:P,outlineOffsetX:H,outlineOffsetY:N,outlineBlur:z,outlineOpacity:W}=this;x=this._parsePercent(P)||0,C=Math.max(0,this._parsePercent(z)||0),g=W,F=this._parsePercent(H)||0,L=this._parsePercent(N)||0}else I=Math.max(0,this._parsePercent(this.strokeWidth)||0),I&&(b=this.strokeColor,i.uTroikaStrokeColor.value.set(b??Fne),_=this.strokeOpacity,_==null&&(_=1)),g=this.fillOpacity;i.uTroikaEdgeOffset.value=x,i.uTroikaPositionOffset.value.set(F,L),i.uTroikaBlurRadius.value=C,i.uTroikaStrokeWidth.value=I,i.uTroikaStrokeOpacity.value=_,i.uTroikaFillOpacity.value=g??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let U=this.clipRect;if(U&&Array.isArray(U)&&U.length===4)i.uTroikaClipRect.value.fromArray(U);else{const P=100*(this.fontSize||.1);i.uTroikaClipRect.value.set(A[0]-P,A[1]-P,A[2]+P,A[3]+P)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,a.polygonOffset=!!this.depthOffset,a.polygonOffsetFactor=a.polygonOffsetUnits=this.depthOffset||0;const s=e?this.outlineColor||0:this.color;if(s==null)delete a.color;else{const u=a.hasOwnProperty("color")?a.color:a.color=new Si;s===u._input&&typeof s!="object"||u.set(u._input=s)}let l=this.orientation||eH;if(l!==a._orientation){let u=i.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let A=l!==eH&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(A){let[,g,_,b,x]=A;eU.set(0,0,0)[_]=g==="-"?1:-1,Z4.set(0,0,0)[x]=b==="-"?-1:1,Une.lookAt(sQe,eU.cross(Z4),Z4),u.setFromMatrix4(Une)}else u.identity();a._orientation=l}}_parsePercent(a){if(typeof a=="string"){let e=a.match(/^(-?[\d.]+)%$/),i=e?parseFloat(e[1]):NaN;a=(isNaN(i)?0:i/100)*this.fontSize}return a}localPositionToTextCoords(a,e=new ci){e.copy(a);const i=this.curveRadius;return i&&(e.x=Math.atan2(a.x,Math.abs(i)-Math.abs(a.z))*Math.abs(i)),e}worldPositionToTextCoords(a,e=new ci){return eU.copy(a),this.localPositionToTextCoords(this.worldToLocal(eU),e)}raycast(a,e){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,l=r?Pce():Lce(),u=l.geometry,{position:A,uv:g}=u.attributes;for(let _=0;_<g.count;_++){let b=s[0]+g.getX(_)*(s[2]-s[0]);const x=s[1]+g.getY(_)*(s[3]-s[1]);let C=0;r&&(C=r-Math.cos(b/r)*r,b=Math.sin(b/r)*r),A.setXYZ(_,b,x,C)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,RI.length=0,l.raycast(a,RI);for(let _=0;_<RI.length;_++)RI[_].object=this,e.push(RI[_])}}copy(a){const e=this.geometry;return super.copy(a),this.geometry=e,lQe.forEach(i=>{this[i]=a[i]}),this}clone(){return new this.constructor().copy(this)}};Oce.forEach(a=>{const e="_private_"+a;Object.defineProperty(Qce.prototype,a,{get(){return this[e]},set(i){i!==this[e]&&(this[e]=i,this._needsSync=!0)}})}),new ia,new Si;const cQe=Ce.forwardRef(({sdfGlyphSize:a=64,anchorX:e="center",anchorY:i="middle",font:r,fontSize:s=1,children:l,characters:u,onSync:A,...g},_)=>{const b=Bg(({invalidate:F})=>F),[x]=Ce.useState(()=>new Qce),[C,I]=Ce.useMemo(()=>{const F=[];let L="";return Ce.Children.forEach(l,U=>{typeof U=="string"||typeof U=="number"?L+=U:F.push(U)}),[F,L]},[l]);return dce(()=>new Promise(F=>function({font:L,characters:U,sdfGlyphSize:P},H){Uce({font:L,sdfGlyphSize:P,text:Array.isArray(U)?U.join(`
`):""+U},H)}({font:r,characters:u},F)),["troika-text",r,u]),Ce.useLayoutEffect(()=>{x.sync(()=>{b(),A&&A(x)})}),Ce.useEffect(()=>()=>x.dispose(),[x]),Ce.createElement("primitive",Fa({object:x,ref:_,font:r,text:I,anchorX:e,anchorY:i,fontSize:s,sdfGlyphSize:a},g),C)}),uQe=Ce.forwardRef(({makeDefault:a,camera:e,regress:i,domElement:r,enableDamping:s=!0,keyEvents:l=!1,onChange:u,onStart:A,onEnd:g,..._},b)=>{const x=Bg(j=>j.invalidate),C=Bg(j=>j.camera),I=Bg(j=>j.gl),F=Bg(j=>j.events),L=Bg(j=>j.setEvents),U=Bg(j=>j.set),P=Bg(j=>j.get),H=Bg(j=>j.performance),N=e||C,z=r||F.connected||I.domElement,W=Ce.useMemo(()=>new NOe(N),[N]);return xce(()=>{W.enabled&&W.update()},-1),Ce.useEffect(()=>(l&&W.connect(l===!0?z:l),W.connect(z),()=>{W.dispose()}),[l,z,i,W,x]),Ce.useEffect(()=>{const j=ee=>{x(),i&&H.regress(),u&&u(ee)},J=ee=>{A&&A(ee)},ie=ee=>{g&&g(ee)};return W.addEventListener("change",j),W.addEventListener("start",J),W.addEventListener("end",ie),()=>{W.removeEventListener("start",J),W.removeEventListener("end",ie),W.removeEventListener("change",j)}},[u,A,g,W,x,L]),Ce.useEffect(()=>{if(a){const j=P().controls;return U({controls:W}),()=>U({controls:j})}},[a,W]),Ce.createElement("primitive",Fa({ref:b,object:W,enableDamping:s},_))});var Lne,Pne,hQe=PS.div(Lne||(Lne=uM([`
  width: 100%;
  height: 100%;
`],[`
  width: 100%;
  height: 100%;
`]))),dQe=function(){var a=UOe().progress;return Ye.createElement(DOe,{center:!0,style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},Ye.createElement($le,{statusMessage:a+"% loaded"}))},AQe=function(a){var e=Bg().camera,i=vz(a.loader,a.src),r=null;if(i instanceof Tf?r=i:i.scene&&i.scene instanceof Tf?r=i.scene:typeof i!="object"||Array.isArray(i)||i===null||(r=i),r!==null){try{var s=new ia().setFromObject(r),l=s.getSize(new Fe).length(),u=s.getCenter(new Fe);e.position.set(u.x,u.y,u.z+1.25*l),e.lookAt(u),console.log("Calculated bounding box of model, re-set camera",{box:s,size:l,center:u})}catch(A){console.error("Error calculating bounding box of model",A)}return Ye.createElement("primitive",{object:r,scale:1})}return console.log("Loaded model did not support any available option",{model:i,src:a.src,loader:a.loader}),Ye.createElement(cQe,{position:[0,0,0],color:"red"},"Failed to load model.")},pQe=function(a){var e=Gle("Environment",{Light:X7({ambientIntensity:{min:0,max:5,step:.1,value:1},ambientColor:"#c4c4c4",directionalIntensity:{min:0,max:5,step:.1,value:Math.PI/2},directionalPosition:[0,10,10]})},{collapsed:!0}),i=e.ambientIntensity,r=e.directionalIntensity,s=e.directionalPosition,l=e.ambientColor;return Ye.createElement(hQe,{style:{backgroundColor:l}},Ye.createElement(BOe,{camera:{position:[15,15,15]},style:{width:"100%",height:"100%"}},Ye.createElement(Ce.Suspense,{fallback:Ye.createElement(dQe,null)},Ye.createElement("ambientLight",{intensity:i,color:l}),Ye.createElement("directionalLight",{intensity:r,position:s}),Ye.createElement(AQe,{src:a.src,loader:a.loader}),Ye.createElement(uQe,null))))},Iy=PS.div(Pne||(Pne=uM([`
  padding: 0;
  width: 100%;
  height: 100%;
  text-align: center;
`],[`
  padding: 0;
  width: 100%;
  height: 100%;
  text-align: center;
`]))),fQe=function(a){if(!a.src)return Ye.createElement(Iy,null,"No 3D file set to display.");console.log("Loading 3D model from ".concat(a.src));var e=a.fileName||a.src.split("/").pop()||"",i=e.split(".").pop();a.src.startsWith("data:")&&!a.fileName&&(i=a.src.split(";")[0].split("/")[1]||"");var r=/^x\-([a-z]+)\-((bin)|(txt)|(text))$/;if(r.test(i)){var s=r.exec(i);s&&s.length>1&&(i=s[1])}var l=null;switch(i.toLowerCase()){case"gltf":case"glb":return l=Dse,Ye.createElement(Iy,null,Ye.createElement(LLe,{src:a.src}));case"obj":l=r2e;break;case"fbx":l=aBe;break;case"ply":l=s2e;break;case"stl":l=a2e;break;case"xyz":l=l2e;break;case"p3v":case"zip":return Ye.createElement(Iy,null,Ye.createElement(WPe,{src:a.src}));case"jpg":case"png":case"jpeg":return Ye.createElement(Iy,null,Ye.createElement("img",{src:a.src,alt:e}));case"mp4":case"ogv":case"webm":return Ye.createElement(Iy,null,Ye.createElement("video",{src:a.src,controls:!0,autoPlay:!0}));case"mp3":case"wav":case"ogg":return Ye.createElement(Iy,null,Ye.createElement("audio",{src:a.src,controls:!0,autoPlay:!0}))}return l!==null?Ye.createElement(Iy,null,Ye.createElement(pQe,{src:a.src,loader:l})):Ye.createElement(Iy,null,Ye.createElement("p",null,"SpecimenViewer3D Component."),Ye.createElement("p",{style:{color:"red"}},'Source with type "',i,'" from "',gae(a.src,25,""),'" is currently not supported.'))};function gQe(){const e=new URLSearchParams(window.location.search).get("asset");return e?hu.jsx("div",{className:"App specimen-3d-viewer-full-size",children:hu.jsx(fQe,{src:e})}):hu.jsx("h1",{children:"No asset specified."})}Mz.createRoot(document.getElementById("root")).render(hu.jsx(Ce.StrictMode,{children:hu.jsx(gQe,{})}))});export default mQe();
